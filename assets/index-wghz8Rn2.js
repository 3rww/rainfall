var N0e=Object.defineProperty;var F0e=(e,t,n)=>t in e?N0e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var B0e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ir=(e,t,n)=>F0e(e,typeof t!="symbol"?t+"":t,n);var Zdt=B0e((Kf,Mu)=>{function j0e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ma(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function U0e(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var t3={exports:{}},xE={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p7;function $0e(){if(p7)return xE;p7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var f=null;if(s!==void 0&&(f=""+s),i.key!==void 0&&(f=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:f,ref:i!==void 0?i:null,props:s}}return xE.Fragment=t,xE.jsx=n,xE.jsxs=n,xE}var m7;function V0e(){return m7||(m7=1,t3.exports=$0e()),t3.exports}var Oe=V0e(),n3={exports:{}},wE={},r3={exports:{}},i3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g7;function q0e(){return g7||(g7=1,(function(e){function t(Ee,Fe){var at=Ee.length;Ee.push(Fe);e:for(;0<at;){var yt=at-1>>>1,je=Ee[yt];if(0<i(je,Fe))Ee[yt]=Fe,Ee[at]=je,at=yt;else break e}}function n(Ee){return Ee.length===0?null:Ee[0]}function r(Ee){if(Ee.length===0)return null;var Fe=Ee[0],at=Ee.pop();if(at!==Fe){Ee[0]=at;e:for(var yt=0,je=Ee.length,Ke=je>>>1;yt<Ke;){var it=2*(yt+1)-1,Pe=Ee[it],jt=it+1,sn=Ee[jt];if(0>i(Pe,at))jt<je&&0>i(sn,Pe)?(Ee[yt]=sn,Ee[jt]=at,yt=jt):(Ee[yt]=Pe,Ee[it]=at,yt=it);else if(jt<je&&0>i(sn,at))Ee[yt]=sn,Ee[jt]=at,yt=jt;else break e}}return Fe}function i(Ee,Fe){var at=Ee.sortIndex-Fe.sortIndex;return at!==0?at:Ee.id-Fe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var f=Date,a=f.now();e.unstable_now=function(){return f.now()-a}}var p=[],y=[],S=1,E=null,I=3,L=!1,N=!1,j=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function ie(Ee){for(var Fe=n(y);Fe!==null;){if(Fe.callback===null)r(y);else if(Fe.startTime<=Ee)r(y),Fe.sortIndex=Fe.expirationTime,t(p,Fe);else break;Fe=n(y)}}function Q(Ee){if(j=!1,ie(Ee),!N)if(n(p)!==null)N=!0,W||(W=!0,ye());else{var Fe=n(y);Fe!==null&&Be(Q,Fe.startTime-Ee)}}var W=!1,te=-1,X=5,ae=-1;function le(){return k?!0:!(e.unstable_now()-ae<X)}function ge(){if(k=!1,W){var Ee=e.unstable_now();ae=Ee;var Fe=!0;try{e:{N=!1,j&&(j=!1,K(te),te=-1),L=!0;var at=I;try{t:{for(ie(Ee),E=n(p);E!==null&&!(E.expirationTime>Ee&&le());){var yt=E.callback;if(typeof yt=="function"){E.callback=null,I=E.priorityLevel;var je=yt(E.expirationTime<=Ee);if(Ee=e.unstable_now(),typeof je=="function"){E.callback=je,ie(Ee),Fe=!0;break t}E===n(p)&&r(p),ie(Ee)}else r(p);E=n(p)}if(E!==null)Fe=!0;else{var Ke=n(y);Ke!==null&&Be(Q,Ke.startTime-Ee),Fe=!1}}break e}finally{E=null,I=at,L=!1}Fe=void 0}}finally{Fe?ye():W=!1}}}var ye;if(typeof J=="function")ye=function(){J(ge)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,He=De.port2;De.port1.onmessage=ge,ye=function(){He.postMessage(null)}}else ye=function(){V(ge,0)};function Be(Ee,Fe){te=V(function(){Ee(e.unstable_now())},Fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ee){Ee.callback=null},e.unstable_forceFrameRate=function(Ee){0>Ee||125<Ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<Ee?Math.floor(1e3/Ee):5},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_next=function(Ee){switch(I){case 1:case 2:case 3:var Fe=3;break;default:Fe=I}var at=I;I=Fe;try{return Ee()}finally{I=at}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(Ee,Fe){switch(Ee){case 1:case 2:case 3:case 4:case 5:break;default:Ee=3}var at=I;I=Ee;try{return Fe()}finally{I=at}},e.unstable_scheduleCallback=function(Ee,Fe,at){var yt=e.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?yt+at:yt):at=yt,Ee){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=at+je,Ee={id:S++,callback:Fe,priorityLevel:Ee,startTime:at,expirationTime:je,sortIndex:-1},at>yt?(Ee.sortIndex=at,t(y,Ee),n(p)===null&&Ee===n(y)&&(j?(K(te),te=-1):j=!0,Be(Q,at-yt))):(Ee.sortIndex=je,t(p,Ee),N||L||(N=!0,W||(W=!0,ye()))),Ee},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(Ee){var Fe=I;return function(){var at=I;I=Fe;try{return Ee.apply(this,arguments)}finally{I=at}}}})(i3)),i3}var y7;function H0e(){return y7||(y7=1,r3.exports=q0e()),r3.exports}var a3={exports:{}},gi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _7;function G0e(){if(_7)return gi;_7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),f=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),I=Symbol.iterator;function L(Ke){return Ke===null||typeof Ke!="object"?null:(Ke=I&&Ke[I]||Ke["@@iterator"],typeof Ke=="function"?Ke:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,k={};function V(Ke,it,Pe){this.props=Ke,this.context=it,this.refs=k,this.updater=Pe||N}V.prototype.isReactComponent={},V.prototype.setState=function(Ke,it){if(typeof Ke!="object"&&typeof Ke!="function"&&Ke!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ke,it,"setState")},V.prototype.forceUpdate=function(Ke){this.updater.enqueueForceUpdate(this,Ke,"forceUpdate")};function K(){}K.prototype=V.prototype;function J(Ke,it,Pe){this.props=Ke,this.context=it,this.refs=k,this.updater=Pe||N}var ie=J.prototype=new K;ie.constructor=J,j(ie,V.prototype),ie.isPureReactComponent=!0;var Q=Array.isArray;function W(){}var te={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function ae(Ke,it,Pe){var jt=Pe.ref;return{$$typeof:e,type:Ke,key:it,ref:jt!==void 0?jt:null,props:Pe}}function le(Ke,it){return ae(Ke.type,it,Ke.props)}function ge(Ke){return typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===e}function ye(Ke){var it={"=":"=0",":":"=2"};return"$"+Ke.replace(/[=:]/g,function(Pe){return it[Pe]})}var De=/\/+/g;function He(Ke,it){return typeof Ke=="object"&&Ke!==null&&Ke.key!=null?ye(""+Ke.key):it.toString(36)}function Be(Ke){switch(Ke.status){case"fulfilled":return Ke.value;case"rejected":throw Ke.reason;default:switch(typeof Ke.status=="string"?Ke.then(W,W):(Ke.status="pending",Ke.then(function(it){Ke.status==="pending"&&(Ke.status="fulfilled",Ke.value=it)},function(it){Ke.status==="pending"&&(Ke.status="rejected",Ke.reason=it)})),Ke.status){case"fulfilled":return Ke.value;case"rejected":throw Ke.reason}}throw Ke}function Ee(Ke,it,Pe,jt,sn){var dn=typeof Ke;(dn==="undefined"||dn==="boolean")&&(Ke=null);var Tn=!1;if(Ke===null)Tn=!0;else switch(dn){case"bigint":case"string":case"number":Tn=!0;break;case"object":switch(Ke.$$typeof){case e:case t:Tn=!0;break;case S:return Tn=Ke._init,Ee(Tn(Ke._payload),it,Pe,jt,sn)}}if(Tn)return sn=sn(Ke),Tn=jt===""?"."+He(Ke,0):jt,Q(sn)?(Pe="",Tn!=null&&(Pe=Tn.replace(De,"$&/")+"/"),Ee(sn,it,Pe,"",function(Ye){return Ye})):sn!=null&&(ge(sn)&&(sn=le(sn,Pe+(sn.key==null||Ke&&Ke.key===sn.key?"":(""+sn.key).replace(De,"$&/")+"/")+Tn)),it.push(sn)),1;Tn=0;var Ut=jt===""?".":jt+":";if(Q(Ke))for(var xe=0;xe<Ke.length;xe++)jt=Ke[xe],dn=Ut+He(jt,xe),Tn+=Ee(jt,it,Pe,dn,sn);else if(xe=L(Ke),typeof xe=="function")for(Ke=xe.call(Ke),xe=0;!(jt=Ke.next()).done;)jt=jt.value,dn=Ut+He(jt,xe++),Tn+=Ee(jt,it,Pe,dn,sn);else if(dn==="object"){if(typeof Ke.then=="function")return Ee(Be(Ke),it,Pe,jt,sn);throw it=String(Ke),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(Ke).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return Tn}function Fe(Ke,it,Pe){if(Ke==null)return Ke;var jt=[],sn=0;return Ee(Ke,jt,"","",function(dn){return it.call(Pe,dn,sn++)}),jt}function at(Ke){if(Ke._status===-1){var it=Ke._result;it=it(),it.then(function(Pe){(Ke._status===0||Ke._status===-1)&&(Ke._status=1,Ke._result=Pe)},function(Pe){(Ke._status===0||Ke._status===-1)&&(Ke._status=2,Ke._result=Pe)}),Ke._status===-1&&(Ke._status=0,Ke._result=it)}if(Ke._status===1)return Ke._result.default;throw Ke._result}var yt=typeof reportError=="function"?reportError:function(Ke){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ke=="object"&&Ke!==null&&typeof Ke.message=="string"?String(Ke.message):String(Ke),error:Ke});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ke);return}console.error(Ke)},je={map:Fe,forEach:function(Ke,it,Pe){Fe(Ke,function(){it.apply(this,arguments)},Pe)},count:function(Ke){var it=0;return Fe(Ke,function(){it++}),it},toArray:function(Ke){return Fe(Ke,function(it){return it})||[]},only:function(Ke){if(!ge(Ke))throw Error("React.Children.only expected to receive a single React element child.");return Ke}};return gi.Activity=E,gi.Children=je,gi.Component=V,gi.Fragment=n,gi.Profiler=i,gi.PureComponent=J,gi.StrictMode=r,gi.Suspense=p,gi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,gi.__COMPILER_RUNTIME={__proto__:null,c:function(Ke){return te.H.useMemoCache(Ke)}},gi.cache=function(Ke){return function(){return Ke.apply(null,arguments)}},gi.cacheSignal=function(){return null},gi.cloneElement=function(Ke,it,Pe){if(Ke==null)throw Error("The argument must be a React element, but you passed "+Ke+".");var jt=j({},Ke.props),sn=Ke.key;if(it!=null)for(dn in it.key!==void 0&&(sn=""+it.key),it)!X.call(it,dn)||dn==="key"||dn==="__self"||dn==="__source"||dn==="ref"&&it.ref===void 0||(jt[dn]=it[dn]);var dn=arguments.length-2;if(dn===1)jt.children=Pe;else if(1<dn){for(var Tn=Array(dn),Ut=0;Ut<dn;Ut++)Tn[Ut]=arguments[Ut+2];jt.children=Tn}return ae(Ke.type,sn,jt)},gi.createContext=function(Ke){return Ke={$$typeof:f,_currentValue:Ke,_currentValue2:Ke,_threadCount:0,Provider:null,Consumer:null},Ke.Provider=Ke,Ke.Consumer={$$typeof:s,_context:Ke},Ke},gi.createElement=function(Ke,it,Pe){var jt,sn={},dn=null;if(it!=null)for(jt in it.key!==void 0&&(dn=""+it.key),it)X.call(it,jt)&&jt!=="key"&&jt!=="__self"&&jt!=="__source"&&(sn[jt]=it[jt]);var Tn=arguments.length-2;if(Tn===1)sn.children=Pe;else if(1<Tn){for(var Ut=Array(Tn),xe=0;xe<Tn;xe++)Ut[xe]=arguments[xe+2];sn.children=Ut}if(Ke&&Ke.defaultProps)for(jt in Tn=Ke.defaultProps,Tn)sn[jt]===void 0&&(sn[jt]=Tn[jt]);return ae(Ke,dn,sn)},gi.createRef=function(){return{current:null}},gi.forwardRef=function(Ke){return{$$typeof:a,render:Ke}},gi.isValidElement=ge,gi.lazy=function(Ke){return{$$typeof:S,_payload:{_status:-1,_result:Ke},_init:at}},gi.memo=function(Ke,it){return{$$typeof:y,type:Ke,compare:it===void 0?null:it}},gi.startTransition=function(Ke){var it=te.T,Pe={};te.T=Pe;try{var jt=Ke(),sn=te.S;sn!==null&&sn(Pe,jt),typeof jt=="object"&&jt!==null&&typeof jt.then=="function"&&jt.then(W,yt)}catch(dn){yt(dn)}finally{it!==null&&Pe.types!==null&&(it.types=Pe.types),te.T=it}},gi.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},gi.use=function(Ke){return te.H.use(Ke)},gi.useActionState=function(Ke,it,Pe){return te.H.useActionState(Ke,it,Pe)},gi.useCallback=function(Ke,it){return te.H.useCallback(Ke,it)},gi.useContext=function(Ke){return te.H.useContext(Ke)},gi.useDebugValue=function(){},gi.useDeferredValue=function(Ke,it){return te.H.useDeferredValue(Ke,it)},gi.useEffect=function(Ke,it){return te.H.useEffect(Ke,it)},gi.useEffectEvent=function(Ke){return te.H.useEffectEvent(Ke)},gi.useId=function(){return te.H.useId()},gi.useImperativeHandle=function(Ke,it,Pe){return te.H.useImperativeHandle(Ke,it,Pe)},gi.useInsertionEffect=function(Ke,it){return te.H.useInsertionEffect(Ke,it)},gi.useLayoutEffect=function(Ke,it){return te.H.useLayoutEffect(Ke,it)},gi.useMemo=function(Ke,it){return te.H.useMemo(Ke,it)},gi.useOptimistic=function(Ke,it){return te.H.useOptimistic(Ke,it)},gi.useReducer=function(Ke,it,Pe){return te.H.useReducer(Ke,it,Pe)},gi.useRef=function(Ke){return te.H.useRef(Ke)},gi.useState=function(Ke){return te.H.useState(Ke)},gi.useSyncExternalStore=function(Ke,it,Pe){return te.H.useSyncExternalStore(Ke,it,Pe)},gi.useTransition=function(){return te.H.useTransition()},gi.version="19.2.4",gi}var v7;function kP(){return v7||(v7=1,a3.exports=G0e()),a3.exports}var o3={exports:{}},vu={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b7;function Y0e(){if(b7)return vu;b7=1;var e=kP();function t(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)y+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(p,y,S){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:E==null?null:""+E,children:p,containerInfo:y,implementation:S}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return vu.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vu.createPortal=function(p,y){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return s(p,y,null,S)},vu.flushSync=function(p){var y=f.T,S=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=y,r.p=S,r.d.f()}},vu.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},vu.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},vu.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var S=y.as,E=a(S,y.crossOrigin),I=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;S==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:I,fetchPriority:L}):S==="script"&&r.d.X(p,{crossOrigin:E,integrity:I,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},vu.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var S=a(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},vu.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var S=y.as,E=a(S,y.crossOrigin);r.d.L(p,S,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},vu.preloadModule=function(p,y){if(typeof p=="string")if(y){var S=a(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},vu.requestFormReset=function(p){r.d.r(p)},vu.unstable_batchedUpdates=function(p,y){return p(y)},vu.useFormState=function(p,y,S){return f.H.useFormState(p,y,S)},vu.useFormStatus=function(){return f.H.useHostTransitionStatus()},vu.version="19.2.4",vu}var x7;function Tae(){if(x7)return o3.exports;x7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),o3.exports=Y0e(),o3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w7;function W0e(){if(w7)return wE;w7=1;var e=H0e(),t=kP(),n=Tae();function r(m){var x="https://react.dev/errors/"+m;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)x+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function s(m){var x=m,C=m;if(m.alternate)for(;x.return;)x=x.return;else{m=x;do x=m,(x.flags&4098)!==0&&(C=x.return),m=x.return;while(m)}return x.tag===3?C:null}function f(m){if(m.tag===13){var x=m.memoizedState;if(x===null&&(m=m.alternate,m!==null&&(x=m.memoizedState)),x!==null)return x.dehydrated}return null}function a(m){if(m.tag===31){var x=m.memoizedState;if(x===null&&(m=m.alternate,m!==null&&(x=m.memoizedState)),x!==null)return x.dehydrated}return null}function p(m){if(s(m)!==m)throw Error(r(188))}function y(m){var x=m.alternate;if(!x){if(x=s(m),x===null)throw Error(r(188));return x!==m?null:m}for(var C=m,z=x;;){var Y=C.return;if(Y===null)break;var ne=Y.alternate;if(ne===null){if(z=Y.return,z!==null){C=z;continue}break}if(Y.child===ne.child){for(ne=Y.child;ne;){if(ne===C)return p(Y),m;if(ne===z)return p(Y),x;ne=ne.sibling}throw Error(r(188))}if(C.return!==z.return)C=Y,z=ne;else{for(var Te=!1,Xe=Y.child;Xe;){if(Xe===C){Te=!0,C=Y,z=ne;break}if(Xe===z){Te=!0,z=Y,C=ne;break}Xe=Xe.sibling}if(!Te){for(Xe=ne.child;Xe;){if(Xe===C){Te=!0,C=ne,z=Y;break}if(Xe===z){Te=!0,z=ne,C=Y;break}Xe=Xe.sibling}if(!Te)throw Error(r(189))}}if(C.alternate!==z)throw Error(r(190))}if(C.tag!==3)throw Error(r(188));return C.stateNode.current===C?m:x}function S(m){var x=m.tag;if(x===5||x===26||x===27||x===6)return m;for(m=m.child;m!==null;){if(x=S(m),x!==null)return x;m=m.sibling}return null}var E=Object.assign,I=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),J=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),ge=Symbol.iterator;function ye(m){return m===null||typeof m!="object"?null:(m=ge&&m[ge]||m["@@iterator"],typeof m=="function"?m:null)}var De=Symbol.for("react.client.reference");function He(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===De?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case j:return"Fragment";case V:return"Profiler";case k:return"StrictMode";case Q:return"Suspense";case W:return"SuspenseList";case ae:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case N:return"Portal";case J:return m.displayName||"Context";case K:return(m._context.displayName||"Context")+".Consumer";case ie:var x=m.render;return m=m.displayName,m||(m=x.displayName||x.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case te:return x=m.displayName||null,x!==null?x:He(m.type)||"Memo";case X:x=m._payload,m=m._init;try{return He(m(x))}catch{}}return null}var Be=Array.isArray,Ee=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},yt=[],je=-1;function Ke(m){return{current:m}}function it(m){0>je||(m.current=yt[je],yt[je]=null,je--)}function Pe(m,x){je++,yt[je]=m.current,m.current=x}var jt=Ke(null),sn=Ke(null),dn=Ke(null),Tn=Ke(null);function Ut(m,x){switch(Pe(dn,x),Pe(sn,m),Pe(jt,null),x.nodeType){case 9:case 11:m=(m=x.documentElement)&&(m=m.namespaceURI)?AT(m):0;break;default:if(m=x.tagName,x=x.namespaceURI)x=AT(x),m=w1(x,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}it(jt),Pe(jt,m)}function xe(){it(jt),it(sn),it(dn)}function Ye(m){m.memoizedState!==null&&Pe(Tn,m);var x=jt.current,C=w1(x,m.type);x!==C&&(Pe(sn,m),Pe(jt,C))}function ct(m){sn.current===m&&(it(jt),it(sn)),Tn.current===m&&(it(Tn),Wc._currentValue=at)}var mt,Ct;function Yt(m){if(mt===void 0)try{throw Error()}catch(C){var x=C.stack.trim().match(/\n( *(at )?)/);mt=x&&x[1]||"",Ct=-1<C.stack.indexOf(`
    at`)?" (<anonymous>)":-1<C.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mt+m+Ct}var gn=!1;function An(m,x){if(!m||gn)return"";gn=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var z={DetermineComponentFrameRoot:function(){try{if(x){var wn=function(){throw Error()};if(Object.defineProperty(wn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wn,[])}catch(ln){var en=ln}Reflect.construct(m,[],wn)}else{try{wn.call()}catch(ln){en=ln}m.call(wn.prototype)}}else{try{throw Error()}catch(ln){en=ln}(wn=m())&&typeof wn.catch=="function"&&wn.catch(function(){})}}catch(ln){if(ln&&en&&typeof ln.stack=="string")return[ln.stack,en.stack]}return[null,null]}};z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Y=Object.getOwnPropertyDescriptor(z.DetermineComponentFrameRoot,"name");Y&&Y.configurable&&Object.defineProperty(z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ne=z.DetermineComponentFrameRoot(),Te=ne[0],Xe=ne[1];if(Te&&Xe){var St=Te.split(`
`),Qt=Xe.split(`
`);for(Y=z=0;z<St.length&&!St[z].includes("DetermineComponentFrameRoot");)z++;for(;Y<Qt.length&&!Qt[Y].includes("DetermineComponentFrameRoot");)Y++;if(z===St.length||Y===Qt.length)for(z=St.length-1,Y=Qt.length-1;1<=z&&0<=Y&&St[z]!==Qt[Y];)Y--;for(;1<=z&&0<=Y;z--,Y--)if(St[z]!==Qt[Y]){if(z!==1||Y!==1)do if(z--,Y--,0>Y||St[z]!==Qt[Y]){var mn=`
`+St[z].replace(" at new "," at ");return m.displayName&&mn.includes("<anonymous>")&&(mn=mn.replace("<anonymous>",m.displayName)),mn}while(1<=z&&0<=Y);break}}}finally{gn=!1,Error.prepareStackTrace=C}return(C=m?m.displayName||m.name:"")?Yt(C):""}function ar(m,x){switch(m.tag){case 26:case 27:case 5:return Yt(m.type);case 16:return Yt("Lazy");case 13:return m.child!==x&&x!==null?Yt("Suspense Fallback"):Yt("Suspense");case 19:return Yt("SuspenseList");case 0:case 15:return An(m.type,!1);case 11:return An(m.type.render,!1);case 1:return An(m.type,!0);case 31:return Yt("Activity");default:return""}}function or(m){try{var x="",C=null;do x+=ar(m,C),C=m,m=m.return;while(m);return x}catch(z){return`
Error generating stack: `+z.message+`
`+z.stack}}var Nr=Object.prototype.hasOwnProperty,Pr=e.unstable_scheduleCallback,Er=e.unstable_cancelCallback,Tr=e.unstable_shouldYield,pi=e.unstable_requestPaint,Fr=e.unstable_now,hi=e.unstable_getCurrentPriorityLevel,$t=e.unstable_ImmediatePriority,En=e.unstable_UserBlockingPriority,ur=e.unstable_NormalPriority,$r=e.unstable_LowPriority,Br=e.unstable_IdlePriority,Ya=e.log,vo=e.unstable_setDisableYieldValue,Yo=null,Aa=null;function Qi(m){if(typeof Ya=="function"&&vo(m),Aa&&typeof Aa.setStrictMode=="function")try{Aa.setStrictMode(Yo,m)}catch{}}var Ri=Math.clz32?Math.clz32:uf,zs=Math.log,is=Math.LN2;function uf(m){return m>>>=0,m===0?32:31-(zs(m)/is|0)|0}var zu=256,Nu=262144,cf=4194304;function mi(m){var x=m&42;if(x!==0)return x;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function oo(m,x,C){var z=m.pendingLanes;if(z===0)return 0;var Y=0,ne=m.suspendedLanes,Te=m.pingedLanes;m=m.warmLanes;var Xe=z&134217727;return Xe!==0?(z=Xe&~ne,z!==0?Y=mi(z):(Te&=Xe,Te!==0?Y=mi(Te):C||(C=Xe&~m,C!==0&&(Y=mi(C))))):(Xe=z&~ne,Xe!==0?Y=mi(Xe):Te!==0?Y=mi(Te):C||(C=z&~m,C!==0&&(Y=mi(C)))),Y===0?0:x!==0&&x!==Y&&(x&ne)===0&&(ne=Y&-Y,C=x&-x,ne>=C||ne===32&&(C&4194048)!==0)?x:Y}function ah(m,x){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&x)===0}function Pp(m,x){switch(m){case 1:case 2:case 4:case 8:case 64:return x+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wl(){var m=cf;return cf<<=1,(cf&62914560)===0&&(cf=4194304),m}function vg(m){for(var x=[],C=0;31>C;C++)x.push(m);return x}function Sc(m,x){m.pendingLanes|=x,x!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function Vt(m,x,C,z,Y,ne){var Te=m.pendingLanes;m.pendingLanes=C,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=C,m.entangledLanes&=C,m.errorRecoveryDisabledLanes&=C,m.shellSuspendCounter=0;var Xe=m.entanglements,St=m.expirationTimes,Qt=m.hiddenUpdates;for(C=Te&~C;0<C;){var mn=31-Ri(C),wn=1<<mn;Xe[mn]=0,St[mn]=-1;var en=Qt[mn];if(en!==null)for(Qt[mn]=null,mn=0;mn<en.length;mn++){var ln=en[mn];ln!==null&&(ln.lane&=-536870913)}C&=~wn}z!==0&&Tc(m,z,0),ne!==0&&Y===0&&m.tag!==0&&(m.suspendedLanes|=ne&~(Te&~x))}function Tc(m,x,C){m.pendingLanes|=x,m.suspendedLanes&=~x;var z=31-Ri(x);m.entangledLanes|=x,m.entanglements[z]=m.entanglements[z]|1073741824|C&261930}function x_(m,x){var C=m.entangledLanes|=x;for(m=m.entanglements;C;){var z=31-Ri(C),Y=1<<z;Y&x|m[z]&x&&(m[z]|=x),C&=~Y}}function Rp(m,x){var C=x&-x;return C=(C&42)!==0?1:Ar(C),(C&(m.suspendedLanes|x))!==0?0:C}function Ar(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function ut(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function me(){var m=Fe.p;return m!==0?m:(m=window.event,m===void 0?32:fC(m.type))}function we(m,x){var C=Fe.p;try{return Fe.p=m,x()}finally{Fe.p=C}}var Le=Math.random().toString(36).slice(2),Qe="__reactFiber$"+Le,ze="__reactProps$"+Le,ot="__reactContainer$"+Le,_t="__reactEvents$"+Le,lt="__reactListeners$"+Le,bt="__reactHandles$"+Le,Gt="__reactResources$"+Le,Ft="__reactMarker$"+Le;function hn(m){delete m[Qe],delete m[ze],delete m[_t],delete m[lt],delete m[bt]}function Dn(m){var x=m[Qe];if(x)return x;for(var C=m.parentNode;C;){if(x=C[ot]||C[Qe]){if(C=x.alternate,x.child!==null||C!==null&&C.child!==null)for(m=DT(m);m!==null;){if(C=m[Qe])return C;m=DT(m)}return x}m=C,C=m.parentNode}return null}function Rn(m){if(m=m[Qe]||m[ot]){var x=m.tag;if(x===5||x===6||x===13||x===31||x===26||x===27||x===3)return m}return null}function Zn(m){var x=m.tag;if(x===5||x===26||x===27||x===6)return m.stateNode;throw Error(r(33))}function rr(m){var x=m[Gt];return x||(x=m[Gt]={hoistableStyles:new Map,hoistableScripts:new Map}),x}function Pn(m){m[Ft]=!0}var Hn=new Set,xi={};function oa(m,x){zi(m,x),zi(m+"Capture",x)}function zi(m,x){for(xi[m]=x,m=0;m<x.length;m++)Hn.add(x[m])}var ya=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ki={},Or={};function ji(m){return Nr.call(Or,m)?!0:Nr.call(ki,m)?!1:ya.test(m)?Or[m]=!0:(ki[m]=!0,!1)}function si(m,x,C){if(ji(x))if(C===null)m.removeAttribute(x);else{switch(typeof C){case"undefined":case"function":case"symbol":m.removeAttribute(x);return;case"boolean":var z=x.toLowerCase().slice(0,5);if(z!=="data-"&&z!=="aria-"){m.removeAttribute(x);return}}m.setAttribute(x,""+C)}}function li(m,x,C){if(C===null)m.removeAttribute(x);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(x);return}m.setAttribute(x,""+C)}}function wi(m,x,C,z){if(z===null)m.removeAttribute(C);else{switch(typeof z){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(C);return}m.setAttributeNS(x,C,""+z)}}function sa(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function bo(m){var x=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Ja(m,x,C){var z=Object.getOwnPropertyDescriptor(m.constructor.prototype,x);if(!m.hasOwnProperty(x)&&typeof z<"u"&&typeof z.get=="function"&&typeof z.set=="function"){var Y=z.get,ne=z.set;return Object.defineProperty(m,x,{configurable:!0,get:function(){return Y.call(this)},set:function(Te){C=""+Te,ne.call(this,Te)}}),Object.defineProperty(m,x,{enumerable:z.enumerable}),{getValue:function(){return C},setValue:function(Te){C=""+Te},stopTracking:function(){m._valueTracker=null,delete m[x]}}}}function Ec(m){if(!m._valueTracker){var x=bo(m)?"checked":"value";m._valueTracker=Ja(m,x,""+m[x])}}function as(m){if(!m)return!1;var x=m._valueTracker;if(!x)return!0;var C=x.getValue(),z="";return m&&(z=bo(m)?m.checked?"true":"false":m.value),m=z,m!==C?(x.setValue(m),!0):!1}function bs(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var ru=/[\n"\\]/g;function so(m){return m.replace(ru,function(x){return"\\"+x.charCodeAt(0).toString(16)+" "})}function Ns(m,x,C,z,Y,ne,Te,Xe){m.name="",Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"?m.type=Te:m.removeAttribute("type"),x!=null?Te==="number"?(x===0&&m.value===""||m.value!=x)&&(m.value=""+sa(x)):m.value!==""+sa(x)&&(m.value=""+sa(x)):Te!=="submit"&&Te!=="reset"||m.removeAttribute("value"),x!=null?Fu(m,Te,sa(x)):C!=null?Fu(m,Te,sa(C)):z!=null&&m.removeAttribute("value"),Y==null&&ne!=null&&(m.defaultChecked=!!ne),Y!=null&&(m.checked=Y&&typeof Y!="function"&&typeof Y!="symbol"),Xe!=null&&typeof Xe!="function"&&typeof Xe!="symbol"&&typeof Xe!="boolean"?m.name=""+sa(Xe):m.removeAttribute("name")}function xs(m,x,C,z,Y,ne,Te,Xe){if(ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"&&(m.type=ne),x!=null||C!=null){if(!(ne!=="submit"&&ne!=="reset"||x!=null)){Ec(m);return}C=C!=null?""+sa(C):"",x=x!=null?""+sa(x):C,Xe||x===m.value||(m.value=x),m.defaultValue=x}z=z??Y,z=typeof z!="function"&&typeof z!="symbol"&&!!z,m.checked=Xe?m.checked:!!z,m.defaultChecked=!!z,Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"&&(m.name=Te),Ec(m)}function Fu(m,x,C){x==="number"&&bs(m.ownerDocument)===m||m.defaultValue===""+C||(m.defaultValue=""+C)}function iu(m,x,C,z){if(m=m.options,x){x={};for(var Y=0;Y<C.length;Y++)x["$"+C[Y]]=!0;for(C=0;C<m.length;C++)Y=x.hasOwnProperty("$"+m[C].value),m[C].selected!==Y&&(m[C].selected=Y),Y&&z&&(m[C].defaultSelected=!0)}else{for(C=""+sa(C),x=null,Y=0;Y<m.length;Y++){if(m[Y].value===C){m[Y].selected=!0,z&&(m[Y].defaultSelected=!0);return}x!==null||m[Y].disabled||(x=m[Y])}x!==null&&(x.selected=!0)}}function Sl(m,x,C){if(x!=null&&(x=""+sa(x),x!==m.value&&(m.value=x),C==null)){m.defaultValue!==x&&(m.defaultValue=x);return}m.defaultValue=C!=null?""+sa(C):""}function kp(m,x,C,z){if(x==null){if(z!=null){if(C!=null)throw Error(r(92));if(Be(z)){if(1<z.length)throw Error(r(93));z=z[0]}C=z}C==null&&(C=""),x=C}C=sa(x),m.defaultValue=C,z=m.textContent,z===C&&z!==""&&z!==null&&(m.value=z),Ec(m)}function Ac(m,x){if(x){var C=m.firstChild;if(C&&C===m.lastChild&&C.nodeType===3){C.nodeValue=x;return}}m.textContent=x}var Zx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function g0(m,x,C){var z=x.indexOf("--")===0;C==null||typeof C=="boolean"||C===""?z?m.setProperty(x,""):x==="float"?m.cssFloat="":m[x]="":z?m.setProperty(x,C):typeof C!="number"||C===0||Zx.has(x)?x==="float"?m.cssFloat=C:m[x]=(""+C).trim():m[x]=C+"px"}function w_(m,x,C){if(x!=null&&typeof x!="object")throw Error(r(62));if(m=m.style,C!=null){for(var z in C)!C.hasOwnProperty(z)||x!=null&&x.hasOwnProperty(z)||(z.indexOf("--")===0?m.setProperty(z,""):z==="float"?m.cssFloat="":m[z]="");for(var Y in x)z=x[Y],x.hasOwnProperty(Y)&&C[Y]!==z&&g0(m,Y,z)}else for(var ne in x)x.hasOwnProperty(ne)&&g0(m,ne,x[ne])}function bg(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function au(m){return jl.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function xo(){}var ou=null;function oh(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Bu=null,su=null;function ff(m){var x=Rn(m);if(x&&(m=x.stateNode)){var C=m[ze]||null;e:switch(m=x.stateNode,x.type){case"input":if(Ns(m,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name),x=C.name,C.type==="radio"&&x!=null){for(C=m;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll('input[name="'+so(""+x)+'"][type="radio"]'),x=0;x<C.length;x++){var z=C[x];if(z!==m&&z.form===m.form){var Y=z[ze]||null;if(!Y)throw Error(r(90));Ns(z,Y.value,Y.defaultValue,Y.defaultValue,Y.checked,Y.defaultChecked,Y.type,Y.name)}}for(x=0;x<C.length;x++)z=C[x],z.form===m.form&&as(z)}break e;case"textarea":Sl(m,C.value,C.defaultValue);break e;case"select":x=C.value,x!=null&&iu(m,!!C.multiple,x,!1)}}}var Lp=!1;function y0(m,x,C){if(Lp)return m(x,C);Lp=!0;try{var z=m(x);return z}finally{if(Lp=!1,(Bu!==null||su!==null)&&(_i(),Bu&&(x=Bu,m=su,su=Bu=null,ff(x),m)))for(x=0;x<m.length;x++)ff(m[x])}}function zp(m,x){var C=m.stateNode;if(C===null)return null;var z=C[ze]||null;if(z===null)return null;C=z[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(z=!z.disabled)||(m=m.type,z=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!z;break e;default:m=!1}if(m)return null;if(C&&typeof C!="function")throw Error(r(231,x,typeof C));return C}var eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),md=!1;if(eo)try{var hf={};Object.defineProperty(hf,"passive",{get:function(){md=!0}}),window.addEventListener("test",hf,hf),window.removeEventListener("test",hf,hf)}catch{md=!1}var Fs=null,gd=null,S_=null;function T_(){if(S_)return S_;var m,x=gd,C=x.length,z,Y="value"in Fs?Fs.value:Fs.textContent,ne=Y.length;for(m=0;m<C&&x[m]===Y[m];m++);var Te=C-m;for(z=1;z<=Te&&x[C-z]===Y[ne-z];z++);return S_=Y.slice(m,1<z?1-z:void 0)}function Cr(m){var x=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&x===13&&(m=13)):m=x,m===10&&(m=13),32<=m||m===13?m:0}function df(){return!0}function xg(){return!1}function el(m){function x(C,z,Y,ne,Te){this._reactName=C,this._targetInst=Y,this.type=z,this.nativeEvent=ne,this.target=Te,this.currentTarget=null;for(var Xe in m)m.hasOwnProperty(Xe)&&(C=m[Xe],this[Xe]=C?C(ne):ne[Xe]);return this.isDefaultPrevented=(ne.defaultPrevented!=null?ne.defaultPrevented:ne.returnValue===!1)?df:xg,this.isPropagationStopped=xg,this}return E(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=df)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=df)},persist:function(){},isPersistent:df}),x}var sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lh=el(sh),lu=E({},sh,{view:0,detail:0}),wg=el(lu),Np,_0,Oc,uu=E({},lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Oc&&(Oc&&m.type==="mousemove"?(Np=m.screenX-Oc.screenX,_0=m.screenY-Oc.screenY):_0=Np=0,Oc=m),Np)},movementY:function(m){return"movementY"in m?m.movementY:_0}}),Fp=el(uu),Kx=E({},uu,{dataTransfer:0}),yd=el(Kx),pf=E({},lu,{relatedTarget:0}),ws=el(pf),cu=E({},sh,{animationName:0,elapsedTime:0,pseudoElement:0}),E_=el(cu),Qx=E({},sh,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),Qr=el(Qx),v0=E({},sh,{data:0}),b0=el(v0),Jx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _d(m){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(m):(m=x0[m])?!!x[m]:!1}function os(){return _d}var A_=E({},lu,{key:function(m){if(m.key){var x=Jx[m.key]||m.key;if(x!=="Unidentified")return x}return m.type==="keypress"?(m=Cr(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Vn[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(m){return m.type==="keypress"?Cr(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?Cr(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),tl=el(A_),Mn=E({},uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yr=el(Mn),Vr=E({},lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),Bs=el(Vr),Bp=E({},sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),ii=el(Bp),O_=E({},uu,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),jp=el(O_),vd=E({},sh,{newState:0,oldState:0}),Ss=el(vd),Oa=[9,13,27,32],w0=eo&&"CompositionEvent"in window,mf=null;eo&&"documentMode"in document&&(mf=document.documentMode);var S0=eo&&"TextEvent"in window&&!mf,Up=eo&&(!w0||mf&&8<mf&&11>=mf),Sg=" ",C_=!1;function Tg(m,x){switch(m){case"keyup":return Oa.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ss(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Bo=!1;function nl(m,x){switch(m){case"compositionend":return ss(x);case"keypress":return x.which!==32?null:(C_=!0,Sg);case"textInput":return m=x.data,m===Sg&&C_?null:m;default:return null}}function T0(m,x){if(Bo)return m==="compositionend"||!w0&&Tg(m,x)?(m=T_(),S_=gd=Fs=null,Bo=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Up&&x.locale!=="ko"?null:x.data;default:return null}}var uh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function to(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x==="input"?!!uh[m.type]:x==="textarea"}function ju(m,x,C,z){Bu?su?su.push(z):su=[z]:Bu=z,x=sb(x,"onChange"),0<x.length&&(C=new lh("onChange","change",null,C,z),m.push({event:C,listeners:x}))}var Ul=null,Ca=null;function ch(m){ib(m,0)}function Gn(m){var x=Zn(m);if(as(x))return m}function On(m,x){if(m==="change")return x}var bd=!1;if(eo){var qn;if(eo){var $p="oninput"in document;if(!$p){var Vp=document.createElement("div");Vp.setAttribute("oninput","return;"),$p=typeof Vp.oninput=="function"}qn=$p}else qn=!1;bd=qn&&(!document.documentMode||9<document.documentMode)}function jn(){Ul&&(Ul.detachEvent("onpropertychange",M_),Ca=Ul=null)}function M_(m){if(m.propertyName==="value"&&Gn(Ca)){var x=[];ju(x,Ca,m,oh(m)),y0(ch,x)}}function E0(m,x,C){m==="focusin"?(jn(),Ul=x,Ca=C,Ul.attachEvent("onpropertychange",M_)):m==="focusout"&&jn()}function Cc(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Gn(Ca)}function e1(m,x){if(m==="click")return Gn(x)}function qp(m,x){if(m==="input"||m==="change")return Gn(x)}function rl(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var il=typeof Object.is=="function"?Object.is:rl;function Tl(m,x){if(il(m,x))return!0;if(typeof m!="object"||m===null||typeof x!="object"||x===null)return!1;var C=Object.keys(m),z=Object.keys(x);if(C.length!==z.length)return!1;for(z=0;z<C.length;z++){var Y=C[z];if(!Nr.call(x,Y)||!il(m[Y],x[Y]))return!1}return!0}function Eg(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function $l(m,x){var C=Eg(m);m=0;for(var z;C;){if(C.nodeType===3){if(z=m+C.textContent.length,m<=x&&z>=x)return{node:C,offset:x-m};m=z}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=Eg(C)}}function gf(m,x){return m&&x?m===x?!0:m&&m.nodeType===3?!1:x&&x.nodeType===3?gf(m,x.parentNode):"contains"in m?m.contains(x):m.compareDocumentPosition?!!(m.compareDocumentPosition(x)&16):!1:!1}function t1(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var x=bs(m.document);x instanceof m.HTMLIFrameElement;){try{var C=typeof x.contentWindow.location.href=="string"}catch{C=!1}if(C)m=x.contentWindow;else break;x=bs(m.document)}return x}function xd(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x&&(x==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||x==="textarea"||m.contentEditable==="true")}var Ag=eo&&"documentMode"in document&&11>=document.documentMode,yf=null,D_=null,js=null,I_=!1;function Og(m,x,C){var z=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;I_||yf==null||yf!==bs(z)||(z=yf,"selectionStart"in z&&xd(z)?z={start:z.selectionStart,end:z.selectionEnd}:(z=(z.ownerDocument&&z.ownerDocument.defaultView||window).getSelection(),z={anchorNode:z.anchorNode,anchorOffset:z.anchorOffset,focusNode:z.focusNode,focusOffset:z.focusOffset}),js&&Tl(js,z)||(js=z,z=sb(D_,"onSelect"),0<z.length&&(x=new lh("onSelect","select",null,x,C),m.push({event:x,listeners:z}),x.target=yf)))}function Uu(m,x){var C={};return C[m.toLowerCase()]=x.toLowerCase(),C["Webkit"+m]="webkit"+x,C["Moz"+m]="moz"+x,C}var Vl={animationend:Uu("Animation","AnimationEnd"),animationiteration:Uu("Animation","AnimationIteration"),animationstart:Uu("Animation","AnimationStart"),transitionrun:Uu("Transition","TransitionRun"),transitionstart:Uu("Transition","TransitionStart"),transitioncancel:Uu("Transition","TransitionCancel"),transitionend:Uu("Transition","TransitionEnd")},A0={},O0={};eo&&(O0=document.createElement("div").style,"AnimationEvent"in window||(delete Vl.animationend.animation,delete Vl.animationiteration.animation,delete Vl.animationstart.animation),"TransitionEvent"in window||delete Vl.transitionend.transition);function wd(m){if(A0[m])return A0[m];if(!Vl[m])return m;var x=Vl[m],C;for(C in x)if(x.hasOwnProperty(C)&&C in O0)return A0[m]=x[C];return m}var P_=wd("animationend"),n1=wd("animationiteration"),Mc=wd("animationstart"),r1=wd("transitionrun"),i1=wd("transitionstart"),R_=wd("transitioncancel"),k_=wd("transitionend"),_f=new Map,Us="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Us.push("scrollEnd");function ql(m,x){_f.set(m,x),oa(x,[m])}var Hp=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var x=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(x))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},Ts=[],$u=0,Cg=0;function Sd(){for(var m=$u,x=Cg=$u=0;x<m;){var C=Ts[x];Ts[x++]=null;var z=Ts[x];Ts[x++]=null;var Y=Ts[x];Ts[x++]=null;var ne=Ts[x];if(Ts[x++]=null,z!==null&&Y!==null){var Te=z.pending;Te===null?Y.next=Y:(Y.next=Te.next,Te.next=Y),z.pending=Y}ne!==0&&L_(C,Y,ne)}}function $s(m,x,C,z){Ts[$u++]=m,Ts[$u++]=x,Ts[$u++]=C,Ts[$u++]=z,Cg|=z,m.lanes|=z,m=m.alternate,m!==null&&(m.lanes|=z)}function Td(m,x,C,z){return $s(m,x,C,z),Gp(m)}function Jt(m,x){return $s(m,null,null,x),Gp(m)}function L_(m,x,C){m.lanes|=C;var z=m.alternate;z!==null&&(z.lanes|=C);for(var Y=!1,ne=m.return;ne!==null;)ne.childLanes|=C,z=ne.alternate,z!==null&&(z.childLanes|=C),ne.tag===22&&(m=ne.stateNode,m===null||m._visibility&1||(Y=!0)),m=ne,ne=ne.return;return m.tag===3?(ne=m.stateNode,Y&&x!==null&&(Y=31-Ri(C),m=ne.hiddenUpdates,z=m[Y],z===null?m[Y]=[x]:z.push(x),x.lane=C|536870912),ne):null}function Gp(m){if(50<Rr)throw Rr=0,Pi=null,Error(r(185));for(var x=m.return;x!==null;)m=x,x=m.return;return m.tag===3?m.stateNode:null}var Dc={};function Ic(m,x,C,z){this.tag=m,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function al(m,x,C,z){return new Ic(m,x,C,z)}function vf(m){return m=m.prototype,!(!m||!m.isReactComponent)}function ol(m,x){var C=m.alternate;return C===null?(C=al(m.tag,x,m.key,m.mode),C.elementType=m.elementType,C.type=m.type,C.stateNode=m.stateNode,C.alternate=m,m.alternate=C):(C.pendingProps=x,C.type=m.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=m.flags&65011712,C.childLanes=m.childLanes,C.lanes=m.lanes,C.child=m.child,C.memoizedProps=m.memoizedProps,C.memoizedState=m.memoizedState,C.updateQueue=m.updateQueue,x=m.dependencies,C.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},C.sibling=m.sibling,C.index=m.index,C.ref=m.ref,C.refCleanup=m.refCleanup,C}function bf(m,x){m.flags&=65011714;var C=m.alternate;return C===null?(m.childLanes=0,m.lanes=x,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=C.childLanes,m.lanes=C.lanes,m.child=C.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=C.memoizedProps,m.memoizedState=C.memoizedState,m.updateQueue=C.updateQueue,m.type=C.type,x=C.dependencies,m.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),m}function Ed(m,x,C,z,Y,ne){var Te=0;if(z=m,typeof m=="function")vf(m)&&(Te=1);else if(typeof m=="string")Te=aC(m,C,jt.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case ae:return m=al(31,C,x,Y),m.elementType=ae,m.lanes=ne,m;case j:return fh(C.children,Y,ne,x);case k:Te=8,Y|=24;break;case V:return m=al(12,C,x,Y|2),m.elementType=V,m.lanes=ne,m;case Q:return m=al(13,C,x,Y),m.elementType=Q,m.lanes=ne,m;case W:return m=al(19,C,x,Y),m.elementType=W,m.lanes=ne,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case J:Te=10;break e;case K:Te=9;break e;case ie:Te=11;break e;case te:Te=14;break e;case X:Te=16,z=null;break e}Te=29,C=Error(r(130,m===null?"null":typeof m,"")),z=null}return x=al(Te,C,x,Y),x.elementType=m,x.type=z,x.lanes=ne,x}function fh(m,x,C,z){return m=al(7,m,z,x),m.lanes=C,m}function Yp(m,x,C){return m=al(6,m,null,x),m.lanes=C,m}function a1(m){var x=al(18,null,null,0);return x.stateNode=m,x}function z_(m,x,C){return x=al(4,m.children!==null?m.children:[],m.key,x),x.lanes=C,x.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},x}var N_=new WeakMap;function Wo(m,x){if(typeof m=="object"&&m!==null){var C=N_.get(m);return C!==void 0?C:(x={value:m,source:x,stack:or(x)},N_.set(m,x),x)}return{value:m,source:x,stack:or(x)}}var br=[],Wp=0,F_=null,Mg=0,El=[],fu=0,ci=null,Pc=1,Vu="";function qu(m,x){br[Wp++]=Mg,br[Wp++]=F_,F_=m,Mg=x}function Dg(m,x,C){El[fu++]=Pc,El[fu++]=Vu,El[fu++]=ci,ci=m;var z=Pc;m=Vu;var Y=32-Ri(z)-1;z&=~(1<<Y),C+=1;var ne=32-Ri(x)+Y;if(30<ne){var Te=Y-Y%5;ne=(z&(1<<Te)-1).toString(32),z>>=Te,Y-=Te,Pc=1<<32-Ri(x)+Y|C<<Y|z,Vu=ne+m}else Pc=1<<ne|C<<Y|z,Vu=m}function Ig(m){m.return!==null&&(qu(m,1),Dg(m,1,0))}function xf(m){for(;m===F_;)F_=br[--Wp],br[Wp]=null,Mg=br[--Wp],br[Wp]=null;for(;m===ci;)ci=El[--fu],El[fu]=null,Vu=El[--fu],El[fu]=null,Pc=El[--fu],El[fu]=null}function Ad(m,x){El[fu++]=Pc,El[fu++]=Vu,El[fu++]=ci,Pc=x.id,Vu=x.overflow,ci=m}var wo=null,la=null,Di=!1,Rc=null,Hl=!1,hh=Error(r(519));function Hu(m){var x=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xp(Wo(x,m)),hh}function Pg(m){var x=m.stateNode,C=m.type,z=m.memoizedProps;switch(x[Qe]=m,x[ze]=z,C){case"dialog":Oi("cancel",x),Oi("close",x);break;case"iframe":case"object":case"embed":Oi("load",x);break;case"video":case"audio":for(C=0;C<Am.length;C++)Oi(Am[C],x);break;case"source":Oi("error",x);break;case"img":case"image":case"link":Oi("error",x),Oi("load",x);break;case"details":Oi("toggle",x);break;case"input":Oi("invalid",x),xs(x,z.value,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name,!0);break;case"select":Oi("invalid",x);break;case"textarea":Oi("invalid",x),kp(x,z.value,z.defaultValue,z.children)}C=z.children,typeof C!="string"&&typeof C!="number"&&typeof C!="bigint"||x.textContent===""+C||z.suppressHydrationWarning===!0||ZO(x.textContent,C)?(z.popover!=null&&(Oi("beforetoggle",x),Oi("toggle",x)),z.onScroll!=null&&Oi("scroll",x),z.onScrollEnd!=null&&Oi("scrollend",x),z.onClick!=null&&(x.onclick=xo),x=!0):x=!1,x||Hu(m,!0)}function B_(m){for(wo=m.return;wo;)switch(wo.tag){case 5:case 31:case 13:Hl=!1;return;case 27:case 3:Hl=!0;return;default:wo=wo.return}}function wf(m){if(m!==wo)return!1;if(!Di)return B_(m),Di=!0,!1;var x=m.tag,C;if((C=x!==3&&x!==27)&&((C=x===5)&&(C=m.type,C=!(C!=="form"&&C!=="button")||Ph(m.type,m.memoizedProps)),C=!C),C&&la&&Hu(m),B_(m),x===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));la=nC(m)}else if(x===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));la=nC(m)}else x===27?(x=la,ac(m.type)?(m=ub,ub=null,la=m):la=x):la=wo?Gc(m.stateNode.nextSibling):null;return!0}function Gu(){la=wo=null,Di=!1}function j_(){var m=Rc;return m!==null&&(rn===null?rn=m:rn.push.apply(rn,m),Rc=null),m}function Xp(m){Rc===null?Rc=[m]:Rc.push(m)}var U_=Ke(null),hu=null,kc=null;function dh(m,x,C){Pe(U_,x._currentValue),x._currentValue=C}function Sf(m){m._currentValue=U_.current,it(U_)}function C0(m,x,C){for(;m!==null;){var z=m.alternate;if((m.childLanes&x)!==x?(m.childLanes|=x,z!==null&&(z.childLanes|=x)):z!==null&&(z.childLanes&x)!==x&&(z.childLanes|=x),m===C)break;m=m.return}}function Rg(m,x,C,z){var Y=m.child;for(Y!==null&&(Y.return=m);Y!==null;){var ne=Y.dependencies;if(ne!==null){var Te=Y.child;ne=ne.firstContext;e:for(;ne!==null;){var Xe=ne;ne=Y;for(var St=0;St<x.length;St++)if(Xe.context===x[St]){ne.lanes|=C,Xe=ne.alternate,Xe!==null&&(Xe.lanes|=C),C0(ne.return,C,m),z||(Te=null);break e}ne=Xe.next}}else if(Y.tag===18){if(Te=Y.return,Te===null)throw Error(r(341));Te.lanes|=C,ne=Te.alternate,ne!==null&&(ne.lanes|=C),C0(Te,C,m),Te=null}else Te=Y.child;if(Te!==null)Te.return=Y;else for(Te=Y;Te!==null;){if(Te===m){Te=null;break}if(Y=Te.sibling,Y!==null){Y.return=Te.return,Te=Y;break}Te=Te.return}Y=Te}}function ph(m,x,C,z){m=null;for(var Y=x,ne=!1;Y!==null;){if(!ne){if((Y.flags&524288)!==0)ne=!0;else if((Y.flags&262144)!==0)break}if(Y.tag===10){var Te=Y.alternate;if(Te===null)throw Error(r(387));if(Te=Te.memoizedProps,Te!==null){var Xe=Y.type;il(Y.pendingProps.value,Te.value)||(m!==null?m.push(Xe):m=[Xe])}}else if(Y===Tn.current){if(Te=Y.alternate,Te===null)throw Error(r(387));Te.memoizedState.memoizedState!==Y.memoizedState.memoizedState&&(m!==null?m.push(Wc):m=[Wc])}Y=Y.return}m!==null&&Rg(x,m,C,z),x.flags|=262144}function Zp(m){for(m=m.firstContext;m!==null;){if(!il(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function Tf(m){hu=m,kc=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function ls(m){return kg(hu,m)}function Od(m,x){return hu===null&&Tf(m),kg(m,x)}function kg(m,x){var C=x._currentValue;if(x={context:x,memoizedValue:C,next:null},kc===null){if(m===null)throw Error(r(308));kc=x,m.dependencies={lanes:0,firstContext:x},m.flags|=524288}else kc=kc.next=x;return C}var Kp=typeof AbortController<"u"?AbortController:function(){var m=[],x=this.signal={aborted:!1,addEventListener:function(C,z){m.push(z)}};this.abort=function(){x.aborted=!0,m.forEach(function(C){return C()})}},Lg=e.unstable_scheduleCallback,o1=e.unstable_NormalPriority,Yi={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qp(){return{controller:new Kp,data:new Map,refCount:0}}function Ef(m){m.refCount--,m.refCount===0&&Lg(o1,function(){m.controller.abort()})}var Gl=null,Jp=0,Af=0,mh=null;function em(m,x){if(Gl===null){var C=Gl=[];Jp=0,Af=nb(),mh={status:"pending",value:void 0,then:function(z){C.push(z)}}}return Jp++,x.then(tm,tm),x}function tm(){if(--Jp===0&&Gl!==null){mh!==null&&(mh.status="fulfilled");var m=Gl;Gl=null,Af=0,mh=null;for(var x=0;x<m.length;x++)(0,m[x])()}}function zg(m,x){var C=[],z={status:"pending",value:null,reason:null,then:function(Y){C.push(Y)}};return m.then(function(){z.status="fulfilled",z.value=x;for(var Y=0;Y<C.length;Y++)(0,C[Y])(x)},function(Y){for(z.status="rejected",z.reason=Y,Y=0;Y<C.length;Y++)(0,C[Y])(void 0)}),z}var Ng=Ee.S;Ee.S=function(m,x){Un=Fr(),typeof x=="object"&&x!==null&&typeof x.then=="function"&&em(m,x),Ng!==null&&Ng(m,x)};var Of=Ke(null);function Fg(){var m=Of.current;return m!==null?m:st.pooledCache}function nm(m,x){x===null?Pe(Of,Of.current):Pe(Of,x.pool)}function Cd(){var m=Fg();return m===null?null:{parent:Yi._currentValue,pool:m}}var rm=Error(r(460)),M0=Error(r(474)),Bg=Error(r(542)),jg={then:function(){}};function Ug(m){return m=m.status,m==="fulfilled"||m==="rejected"}function s1(m,x,C){switch(C=m[C],C===void 0?m.push(x):C!==x&&(x.then(xo,xo),x=C),x.status){case"fulfilled":return x.value;case"rejected":throw m=x.reason,gh(m),m;default:if(typeof x.status=="string")x.then(xo,xo);else{if(m=st,m!==null&&100<m.shellSuspendCounter)throw Error(r(482));m=x,m.status="pending",m.then(function(z){if(x.status==="pending"){var Y=x;Y.status="fulfilled",Y.value=z}},function(z){if(x.status==="pending"){var Y=x;Y.status="rejected",Y.reason=z}})}switch(x.status){case"fulfilled":return x.value;case"rejected":throw m=x.reason,gh(m),m}throw Cf=x,rm}}function Lc(m){try{var x=m._init;return x(m._payload)}catch(C){throw C!==null&&typeof C=="object"&&typeof C.then=="function"?(Cf=C,rm):C}}var Cf=null;function D0(){if(Cf===null)throw Error(r(459));var m=Cf;return Cf=null,m}function gh(m){if(m===rm||m===Bg)throw Error(r(483))}var yh=null,im=0;function $g(m){var x=im;return im+=1,yh===null&&(yh=[]),s1(yh,m,x)}function Md(m,x){x=x.props.ref,m.ref=x!==void 0?x:null}function Yu(m,x){throw x.$$typeof===I?Error(r(525)):(m=Object.prototype.toString.call(x),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":m)))}function _h(m){function x(Bt,Ot){if(m){var Zt=Bt.deletions;Zt===null?(Bt.deletions=[Ot],Bt.flags|=16):Zt.push(Ot)}}function C(Bt,Ot){if(!m)return null;for(;Ot!==null;)x(Bt,Ot),Ot=Ot.sibling;return null}function z(Bt){for(var Ot=new Map;Bt!==null;)Bt.key!==null?Ot.set(Bt.key,Bt):Ot.set(Bt.index,Bt),Bt=Bt.sibling;return Ot}function Y(Bt,Ot){return Bt=ol(Bt,Ot),Bt.index=0,Bt.sibling=null,Bt}function ne(Bt,Ot,Zt){return Bt.index=Zt,m?(Zt=Bt.alternate,Zt!==null?(Zt=Zt.index,Zt<Ot?(Bt.flags|=67108866,Ot):Zt):(Bt.flags|=67108866,Ot)):(Bt.flags|=1048576,Ot)}function Te(Bt){return m&&Bt.alternate===null&&(Bt.flags|=67108866),Bt}function Xe(Bt,Ot,Zt,bn){return Ot===null||Ot.tag!==6?(Ot=Yp(Zt,Bt.mode,bn),Ot.return=Bt,Ot):(Ot=Y(Ot,Zt),Ot.return=Bt,Ot)}function St(Bt,Ot,Zt,bn){var Dr=Zt.type;return Dr===j?mn(Bt,Ot,Zt.props.children,bn,Zt.key):Ot!==null&&(Ot.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===X&&Lc(Dr)===Ot.type)?(Ot=Y(Ot,Zt.props),Md(Ot,Zt),Ot.return=Bt,Ot):(Ot=Ed(Zt.type,Zt.key,Zt.props,null,Bt.mode,bn),Md(Ot,Zt),Ot.return=Bt,Ot)}function Qt(Bt,Ot,Zt,bn){return Ot===null||Ot.tag!==4||Ot.stateNode.containerInfo!==Zt.containerInfo||Ot.stateNode.implementation!==Zt.implementation?(Ot=z_(Zt,Bt.mode,bn),Ot.return=Bt,Ot):(Ot=Y(Ot,Zt.children||[]),Ot.return=Bt,Ot)}function mn(Bt,Ot,Zt,bn,Dr){return Ot===null||Ot.tag!==7?(Ot=fh(Zt,Bt.mode,bn,Dr),Ot.return=Bt,Ot):(Ot=Y(Ot,Zt),Ot.return=Bt,Ot)}function wn(Bt,Ot,Zt){if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint")return Ot=Yp(""+Ot,Bt.mode,Zt),Ot.return=Bt,Ot;if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case L:return Zt=Ed(Ot.type,Ot.key,Ot.props,null,Bt.mode,Zt),Md(Zt,Ot),Zt.return=Bt,Zt;case N:return Ot=z_(Ot,Bt.mode,Zt),Ot.return=Bt,Ot;case X:return Ot=Lc(Ot),wn(Bt,Ot,Zt)}if(Be(Ot)||ye(Ot))return Ot=fh(Ot,Bt.mode,Zt,null),Ot.return=Bt,Ot;if(typeof Ot.then=="function")return wn(Bt,$g(Ot),Zt);if(Ot.$$typeof===J)return wn(Bt,Od(Bt,Ot),Zt);Yu(Bt,Ot)}return null}function en(Bt,Ot,Zt,bn){var Dr=Ot!==null?Ot.key:null;if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return Dr!==null?null:Xe(Bt,Ot,""+Zt,bn);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case L:return Zt.key===Dr?St(Bt,Ot,Zt,bn):null;case N:return Zt.key===Dr?Qt(Bt,Ot,Zt,bn):null;case X:return Zt=Lc(Zt),en(Bt,Ot,Zt,bn)}if(Be(Zt)||ye(Zt))return Dr!==null?null:mn(Bt,Ot,Zt,bn,null);if(typeof Zt.then=="function")return en(Bt,Ot,$g(Zt),bn);if(Zt.$$typeof===J)return en(Bt,Ot,Od(Bt,Zt),bn);Yu(Bt,Zt)}return null}function ln(Bt,Ot,Zt,bn,Dr){if(typeof bn=="string"&&bn!==""||typeof bn=="number"||typeof bn=="bigint")return Bt=Bt.get(Zt)||null,Xe(Ot,Bt,""+bn,Dr);if(typeof bn=="object"&&bn!==null){switch(bn.$$typeof){case L:return Bt=Bt.get(bn.key===null?Zt:bn.key)||null,St(Ot,Bt,bn,Dr);case N:return Bt=Bt.get(bn.key===null?Zt:bn.key)||null,Qt(Ot,Bt,bn,Dr);case X:return bn=Lc(bn),ln(Bt,Ot,Zt,bn,Dr)}if(Be(bn)||ye(bn))return Bt=Bt.get(Zt)||null,mn(Ot,Bt,bn,Dr,null);if(typeof bn.then=="function")return ln(Bt,Ot,Zt,$g(bn),Dr);if(bn.$$typeof===J)return ln(Bt,Ot,Zt,Od(Ot,bn),Dr);Yu(Ot,bn)}return null}function cr(Bt,Ot,Zt,bn){for(var Dr=null,ea=null,_r=Ot,vi=Ot=0,Ni=null;_r!==null&&vi<Zt.length;vi++){_r.index>vi?(Ni=_r,_r=null):Ni=_r.sibling;var Zi=en(Bt,_r,Zt[vi],bn);if(Zi===null){_r===null&&(_r=Ni);break}m&&_r&&Zi.alternate===null&&x(Bt,_r),Ot=ne(Zi,Ot,vi),ea===null?Dr=Zi:ea.sibling=Zi,ea=Zi,_r=Ni}if(vi===Zt.length)return C(Bt,_r),Di&&qu(Bt,vi),Dr;if(_r===null){for(;vi<Zt.length;vi++)_r=wn(Bt,Zt[vi],bn),_r!==null&&(Ot=ne(_r,Ot,vi),ea===null?Dr=_r:ea.sibling=_r,ea=_r);return Di&&qu(Bt,vi),Dr}for(_r=z(_r);vi<Zt.length;vi++)Ni=ln(_r,Bt,vi,Zt[vi],bn),Ni!==null&&(m&&Ni.alternate!==null&&_r.delete(Ni.key===null?vi:Ni.key),Ot=ne(Ni,Ot,vi),ea===null?Dr=Ni:ea.sibling=Ni,ea=Ni);return m&&_r.forEach(function(Bf){return x(Bt,Bf)}),Di&&qu(Bt,vi),Dr}function Sr(Bt,Ot,Zt,bn){if(Zt==null)throw Error(r(151));for(var Dr=null,ea=null,_r=Ot,vi=Ot=0,Ni=null,Zi=Zt.next();_r!==null&&!Zi.done;vi++,Zi=Zt.next()){_r.index>vi?(Ni=_r,_r=null):Ni=_r.sibling;var Bf=en(Bt,_r,Zi.value,bn);if(Bf===null){_r===null&&(_r=Ni);break}m&&_r&&Bf.alternate===null&&x(Bt,_r),Ot=ne(Bf,Ot,vi),ea===null?Dr=Bf:ea.sibling=Bf,ea=Bf,_r=Ni}if(Zi.done)return C(Bt,_r),Di&&qu(Bt,vi),Dr;if(_r===null){for(;!Zi.done;vi++,Zi=Zt.next())Zi=wn(Bt,Zi.value,bn),Zi!==null&&(Ot=ne(Zi,Ot,vi),ea===null?Dr=Zi:ea.sibling=Zi,ea=Zi);return Di&&qu(Bt,vi),Dr}for(_r=z(_r);!Zi.done;vi++,Zi=Zt.next())Zi=ln(_r,Bt,vi,Zi.value,bn),Zi!==null&&(m&&Zi.alternate!==null&&_r.delete(Zi.key===null?vi:Zi.key),Ot=ne(Zi,Ot,vi),ea===null?Dr=Zi:ea.sibling=Zi,ea=Zi);return m&&_r.forEach(function(_C){return x(Bt,_C)}),Di&&qu(Bt,vi),Dr}function ha(Bt,Ot,Zt,bn){if(typeof Zt=="object"&&Zt!==null&&Zt.type===j&&Zt.key===null&&(Zt=Zt.props.children),typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case L:e:{for(var Dr=Zt.key;Ot!==null;){if(Ot.key===Dr){if(Dr=Zt.type,Dr===j){if(Ot.tag===7){C(Bt,Ot.sibling),bn=Y(Ot,Zt.props.children),bn.return=Bt,Bt=bn;break e}}else if(Ot.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===X&&Lc(Dr)===Ot.type){C(Bt,Ot.sibling),bn=Y(Ot,Zt.props),Md(bn,Zt),bn.return=Bt,Bt=bn;break e}C(Bt,Ot);break}else x(Bt,Ot);Ot=Ot.sibling}Zt.type===j?(bn=fh(Zt.props.children,Bt.mode,bn,Zt.key),bn.return=Bt,Bt=bn):(bn=Ed(Zt.type,Zt.key,Zt.props,null,Bt.mode,bn),Md(bn,Zt),bn.return=Bt,Bt=bn)}return Te(Bt);case N:e:{for(Dr=Zt.key;Ot!==null;){if(Ot.key===Dr)if(Ot.tag===4&&Ot.stateNode.containerInfo===Zt.containerInfo&&Ot.stateNode.implementation===Zt.implementation){C(Bt,Ot.sibling),bn=Y(Ot,Zt.children||[]),bn.return=Bt,Bt=bn;break e}else{C(Bt,Ot);break}else x(Bt,Ot);Ot=Ot.sibling}bn=z_(Zt,Bt.mode,bn),bn.return=Bt,Bt=bn}return Te(Bt);case X:return Zt=Lc(Zt),ha(Bt,Ot,Zt,bn)}if(Be(Zt))return cr(Bt,Ot,Zt,bn);if(ye(Zt)){if(Dr=ye(Zt),typeof Dr!="function")throw Error(r(150));return Zt=Dr.call(Zt),Sr(Bt,Ot,Zt,bn)}if(typeof Zt.then=="function")return ha(Bt,Ot,$g(Zt),bn);if(Zt.$$typeof===J)return ha(Bt,Ot,Od(Bt,Zt),bn);Yu(Bt,Zt)}return typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint"?(Zt=""+Zt,Ot!==null&&Ot.tag===6?(C(Bt,Ot.sibling),bn=Y(Ot,Zt),bn.return=Bt,Bt=bn):(C(Bt,Ot),bn=Yp(Zt,Bt.mode,bn),bn.return=Bt,Bt=bn),Te(Bt)):C(Bt,Ot)}return function(Bt,Ot,Zt,bn){try{im=0;var Dr=ha(Bt,Ot,Zt,bn);return yh=null,Dr}catch(_r){if(_r===rm||_r===Bg)throw _r;var ea=al(29,_r,null,Bt.mode);return ea.lanes=bn,ea.return=Bt,ea}finally{}}}var zc=_h(!0),I0=_h(!1),sl=!1;function Vg(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function am(m,x){m=m.updateQueue,x.updateQueue===m&&(x.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function Nc(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function Mf(m,x,C){var z=m.updateQueue;if(z===null)return null;if(z=z.shared,(nt&2)!==0){var Y=z.pending;return Y===null?x.next=x:(x.next=Y.next,Y.next=x),z.pending=x,x=Gp(m),L_(m,null,C),x}return $s(m,z,x,C),Gp(m)}function Dd(m,x,C){if(x=x.updateQueue,x!==null&&(x=x.shared,(C&4194048)!==0)){var z=x.lanes;z&=m.pendingLanes,C|=z,x.lanes=C,x_(m,C)}}function om(m,x){var C=m.updateQueue,z=m.alternate;if(z!==null&&(z=z.updateQueue,C===z)){var Y=null,ne=null;if(C=C.firstBaseUpdate,C!==null){do{var Te={lane:C.lane,tag:C.tag,payload:C.payload,callback:null,next:null};ne===null?Y=ne=Te:ne=ne.next=Te,C=C.next}while(C!==null);ne===null?Y=ne=x:ne=ne.next=x}else Y=ne=x;C={baseState:z.baseState,firstBaseUpdate:Y,lastBaseUpdate:ne,shared:z.shared,callbacks:z.callbacks},m.updateQueue=C;return}m=C.lastBaseUpdate,m===null?C.firstBaseUpdate=x:m.next=x,C.lastBaseUpdate=x}var $_=!1;function Id(){if($_){var m=mh;if(m!==null)throw m}}function Df(m,x,C,z){$_=!1;var Y=m.updateQueue;sl=!1;var ne=Y.firstBaseUpdate,Te=Y.lastBaseUpdate,Xe=Y.shared.pending;if(Xe!==null){Y.shared.pending=null;var St=Xe,Qt=St.next;St.next=null,Te===null?ne=Qt:Te.next=Qt,Te=St;var mn=m.alternate;mn!==null&&(mn=mn.updateQueue,Xe=mn.lastBaseUpdate,Xe!==Te&&(Xe===null?mn.firstBaseUpdate=Qt:Xe.next=Qt,mn.lastBaseUpdate=St))}if(ne!==null){var wn=Y.baseState;Te=0,mn=Qt=St=null,Xe=ne;do{var en=Xe.lane&-536870913,ln=en!==Xe.lane;if(ln?(ft&en)===en:(z&en)===en){en!==0&&en===Af&&($_=!0),mn!==null&&(mn=mn.next={lane:0,tag:Xe.tag,payload:Xe.payload,callback:null,next:null});e:{var cr=m,Sr=Xe;en=x;var ha=C;switch(Sr.tag){case 1:if(cr=Sr.payload,typeof cr=="function"){wn=cr.call(ha,wn,en);break e}wn=cr;break e;case 3:cr.flags=cr.flags&-65537|128;case 0:if(cr=Sr.payload,en=typeof cr=="function"?cr.call(ha,wn,en):cr,en==null)break e;wn=E({},wn,en);break e;case 2:sl=!0}}en=Xe.callback,en!==null&&(m.flags|=64,ln&&(m.flags|=8192),ln=Y.callbacks,ln===null?Y.callbacks=[en]:ln.push(en))}else ln={lane:en,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null},mn===null?(Qt=mn=ln,St=wn):mn=mn.next=ln,Te|=en;if(Xe=Xe.next,Xe===null){if(Xe=Y.shared.pending,Xe===null)break;ln=Xe,Xe=ln.next,ln.next=null,Y.lastBaseUpdate=ln,Y.shared.pending=null}}while(!0);mn===null&&(St=wn),Y.baseState=St,Y.firstBaseUpdate=Qt,Y.lastBaseUpdate=mn,ne===null&&(Y.shared.lanes=0),qt|=Te,m.lanes=Te,m.memoizedState=wn}}function Pd(m,x){if(typeof m!="function")throw Error(r(191,m));m.call(x)}function l1(m,x){var C=m.callbacks;if(C!==null)for(m.callbacks=null,m=0;m<C.length;m++)Pd(C[m],x)}var Rd=Ke(null),V_=Ke(0);function qg(m,x){m=gt,Pe(V_,m),Pe(Rd,x),gt=m|x.baseLanes}function kd(){Pe(V_,gt),Pe(Rd,Rd.current)}function Fc(){gt=V_.current,it(Rd),it(V_)}var Es=Ke(null),us=null;function Wu(m){var x=m.alternate;Pe(So,So.current&1),Pe(Es,m),us===null&&(x===null||Rd.current!==null||x.memoizedState!==null)&&(us=m)}function Ld(m){Pe(So,So.current),Pe(Es,m),us===null&&(us=m)}function Hg(m){m.tag===22?(Pe(So,So.current),Pe(Es,m),us===null&&(us=m)):As()}function As(){Pe(So,So.current),Pe(Es,Es.current)}function Al(m){it(Es),us===m&&(us=null),it(So)}var So=Ke(0);function Bc(m){for(var x=m;x!==null;){if(x.tag===13){var C=x.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||CT(C)||MT(C)))return x}else if(x.tag===19&&(x.memoizedProps.revealOrder==="forwards"||x.memoizedProps.revealOrder==="backwards"||x.memoizedProps.revealOrder==="unstable_legacy-backwards"||x.memoizedProps.revealOrder==="together")){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var du=0,Kt=null,ua=null,ca=null,pu=!1,zd=!1,vh=!1,Nd=0,bh=0,xh=null,P0=0;function Ma(){throw Error(r(321))}function wh(m,x){if(x===null)return!1;for(var C=0;C<x.length&&C<m.length;C++)if(!il(m[C],x[C]))return!1;return!0}function Fd(m,x,C,z,Y,ne){return du=ne,Kt=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Ee.H=m===null||m.memoizedState===null?nv:ny,vh=!1,ne=C(z,Y),vh=!1,zd&&(ne=R0(x,C,z,Y)),Xu(m),ne}function Xu(m){Ee.H=Ku;var x=ua!==null&&ua.next!==null;if(du=0,ca=ua=Kt=null,pu=!1,bh=0,xh=null,x)throw Error(r(300));m===null||lo||(m=m.dependencies,m!==null&&Zp(m)&&(lo=!0))}function R0(m,x,C,z){Kt=m;var Y=0;do{if(zd&&(xh=null),bh=0,zd=!1,25<=Y)throw Error(r(301));if(Y+=1,ca=ua=null,m.updateQueue!=null){var ne=m.updateQueue;ne.lastEffect=null,ne.events=null,ne.stores=null,ne.memoCache!=null&&(ne.memoCache.index=0)}Ee.H=H0,ne=x(C,z)}while(zd);return ne}function u1(){var m=Ee.H,x=m.useState()[0];return x=typeof x.then=="function"?Sh(x):x,m=m.useState()[0],(ua!==null?ua.memoizedState:null)!==m&&(Kt.flags|=1024),x}function q_(){var m=Nd!==0;return Nd=0,m}function H_(m,x,C){x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~C}function Gg(m){if(pu){for(m=m.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}pu=!1}du=0,ca=ua=Kt=null,zd=!1,bh=Nd=0,xh=null}function jo(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ca===null?Kt.memoizedState=ca=m:ca=ca.next=m,ca}function Wa(){if(ua===null){var m=Kt.alternate;m=m!==null?m.memoizedState:null}else m=ua.next;var x=ca===null?Kt.memoizedState:ca.next;if(x!==null)ca=x,ua=m;else{if(m===null)throw Kt.alternate===null?Error(r(467)):Error(r(310));ua=m,m={memoizedState:ua.memoizedState,baseState:ua.baseState,baseQueue:ua.baseQueue,queue:ua.queue,next:null},ca===null?Kt.memoizedState=ca=m:ca=ca.next=m}return ca}function sm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sh(m){var x=bh;return bh+=1,xh===null&&(xh=[]),m=s1(xh,m,x),x=Kt,(ca===null?x.memoizedState:ca.next)===null&&(x=x.alternate,Ee.H=x===null||x.memoizedState===null?nv:ny),m}function Yg(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return Sh(m);if(m.$$typeof===J)return ls(m)}throw Error(r(438,String(m)))}function G_(m){var x=null,C=Kt.updateQueue;if(C!==null&&(x=C.memoCache),x==null){var z=Kt.alternate;z!==null&&(z=z.updateQueue,z!==null&&(z=z.memoCache,z!=null&&(x={data:z.data.map(function(Y){return Y.slice()}),index:0})))}if(x==null&&(x={data:[],index:0}),C===null&&(C=sm(),Kt.updateQueue=C),C.memoCache=x,C=x.data[x.index],C===void 0)for(C=x.data[x.index]=Array(m),z=0;z<m;z++)C[z]=le;return x.index++,C}function Zu(m,x){return typeof x=="function"?x(m):x}function Wg(m){var x=Wa();return Xg(x,ua,m)}function Xg(m,x,C){var z=m.queue;if(z===null)throw Error(r(311));z.lastRenderedReducer=C;var Y=m.baseQueue,ne=z.pending;if(ne!==null){if(Y!==null){var Te=Y.next;Y.next=ne.next,ne.next=Te}x.baseQueue=Y=ne,z.pending=null}if(ne=m.baseState,Y===null)m.memoizedState=ne;else{x=Y.next;var Xe=Te=null,St=null,Qt=x,mn=!1;do{var wn=Qt.lane&-536870913;if(wn!==Qt.lane?(ft&wn)===wn:(du&wn)===wn){var en=Qt.revertLane;if(en===0)St!==null&&(St=St.next={lane:0,revertLane:0,gesture:null,action:Qt.action,hasEagerState:Qt.hasEagerState,eagerState:Qt.eagerState,next:null}),wn===Af&&(mn=!0);else if((du&en)===en){Qt=Qt.next,en===Af&&(mn=!0);continue}else wn={lane:0,revertLane:Qt.revertLane,gesture:null,action:Qt.action,hasEagerState:Qt.hasEagerState,eagerState:Qt.eagerState,next:null},St===null?(Xe=St=wn,Te=ne):St=St.next=wn,Kt.lanes|=en,qt|=en;wn=Qt.action,vh&&C(ne,wn),ne=Qt.hasEagerState?Qt.eagerState:C(ne,wn)}else en={lane:wn,revertLane:Qt.revertLane,gesture:Qt.gesture,action:Qt.action,hasEagerState:Qt.hasEagerState,eagerState:Qt.eagerState,next:null},St===null?(Xe=St=en,Te=ne):St=St.next=en,Kt.lanes|=wn,qt|=wn;Qt=Qt.next}while(Qt!==null&&Qt!==x);if(St===null?Te=ne:St.next=Xe,!il(ne,m.memoizedState)&&(lo=!0,mn&&(C=mh,C!==null)))throw C;m.memoizedState=ne,m.baseState=Te,m.baseQueue=St,z.lastRenderedState=ne}return Y===null&&(z.lanes=0),[m.memoizedState,z.dispatch]}function Y_(m){var x=Wa(),C=x.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=m;var z=C.dispatch,Y=C.pending,ne=x.memoizedState;if(Y!==null){C.pending=null;var Te=Y=Y.next;do ne=m(ne,Te.action),Te=Te.next;while(Te!==Y);il(ne,x.memoizedState)||(lo=!0),x.memoizedState=ne,x.baseQueue===null&&(x.baseState=ne),C.lastRenderedState=ne}return[ne,z]}function W_(m,x,C){var z=Kt,Y=Wa(),ne=Di;if(ne){if(C===void 0)throw Error(r(407));C=C()}else C=x();var Te=!il((ua||Y).memoizedState,C);if(Te&&(Y.memoizedState=C,lo=!0),Y=Y.queue,Bd(c1.bind(null,z,Y,m),[m]),Y.getSnapshot!==x||Te||ca!==null&&ca.memoizedState.tag&1){if(z.flags|=2048,Th(9,{destroy:void 0},Z_.bind(null,z,Y,C,x),null),st===null)throw Error(r(349));ne||(du&127)!==0||X_(z,x,C)}return C}function X_(m,x,C){m.flags|=16384,m={getSnapshot:x,value:C},x=Kt.updateQueue,x===null?(x=sm(),Kt.updateQueue=x,x.stores=[m]):(C=x.stores,C===null?x.stores=[m]:C.push(m))}function Z_(m,x,C,z){x.value=C,x.getSnapshot=z,f1(x)&&k0(m)}function c1(m,x,C){return C(function(){f1(x)&&k0(m)})}function f1(m){var x=m.getSnapshot;m=m.value;try{var C=x();return!il(m,C)}catch{return!0}}function k0(m){var x=Jt(m,2);x!==null&&Kn(x,m,2)}function jc(m){var x=jo();if(typeof m=="function"){var C=m;if(m=C(),vh){Qi(!0);try{C()}finally{Qi(!1)}}}return x.memoizedState=x.baseState=m,x.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zu,lastRenderedState:m},x}function L0(m,x,C,z){return m.baseState=C,Xg(m,ua,typeof z=="function"?z:Zu)}function z0(m,x,C,z,Y){if(ey(m))throw Error(r(485));if(m=x.action,m!==null){var ne={payload:Y,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Te){ne.listeners.push(Te)}};Ee.T!==null?C(!0):ne.isTransition=!1,z(ne),C=x.pending,C===null?(ne.next=x.pending=ne,Zg(x,ne)):(ne.next=C.next,x.pending=C.next=ne)}}function Zg(m,x){var C=x.action,z=x.payload,Y=m.state;if(x.isTransition){var ne=Ee.T,Te={};Ee.T=Te;try{var Xe=C(Y,z),St=Ee.S;St!==null&&St(Te,Xe),N0(m,x,Xe)}catch(Qt){Uc(m,x,Qt)}finally{ne!==null&&Te.types!==null&&(ne.types=Te.types),Ee.T=ne}}else try{ne=C(Y,z),N0(m,x,ne)}catch(Qt){Uc(m,x,Qt)}}function N0(m,x,C){C!==null&&typeof C=="object"&&typeof C.then=="function"?C.then(function(z){h1(m,x,z)},function(z){return Uc(m,x,z)}):h1(m,x,C)}function h1(m,x,C){x.status="fulfilled",x.value=C,Vs(x),m.state=C,x=m.pending,x!==null&&(C=x.next,C===x?m.pending=null:(C=C.next,x.next=C,Zg(m,C)))}function Uc(m,x,C){var z=m.pending;if(m.pending=null,z!==null){z=z.next;do x.status="rejected",x.reason=C,Vs(x),x=x.next;while(x!==z)}m.action=null}function Vs(m){m=m.listeners;for(var x=0;x<m.length;x++)(0,m[x])()}function If(m,x){return x}function Os(m,x){if(Di){var C=st.formState;if(C!==null){e:{var z=Kt;if(Di){if(la){t:{for(var Y=la,ne=Hl;Y.nodeType!==8;){if(!ne){Y=null;break t}if(Y=Gc(Y.nextSibling),Y===null){Y=null;break t}}ne=Y.data,Y=ne==="F!"||ne==="F"?Y:null}if(Y){la=Gc(Y.nextSibling),z=Y.data==="F!";break e}}Hu(z)}z=!1}z&&(x=C[0])}}return C=jo(),C.memoizedState=C.baseState=x,z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:If,lastRenderedState:x},C.queue=z,C=cm.bind(null,Kt,z),z.dispatch=C,z=jc(!1),ne=Jg.bind(null,Kt,!1,z.queue),z=jo(),Y={state:x,dispatch:null,action:m,pending:null},z.queue=Y,C=z0.bind(null,Kt,Y,ne,C),Y.dispatch=C,z.memoizedState=m,[x,C,!1]}function Pf(m){var x=Wa();return F0(x,ua,m)}function F0(m,x,C){if(x=Xg(m,x,If)[0],m=Wg(Zu)[0],typeof x=="object"&&x!==null&&typeof x.then=="function")try{var z=Sh(x)}catch(Te){throw Te===rm?Bg:Te}else z=x;x=Wa();var Y=x.queue,ne=Y.dispatch;return C!==x.memoizedState&&(Kt.flags|=2048,Th(9,{destroy:void 0},B0.bind(null,Y,C),null)),[z,ne,m]}function B0(m,x){m.action=x}function K_(m){var x=Wa(),C=ua;if(C!==null)return F0(x,C,m);Wa(),x=x.memoizedState,C=Wa();var z=C.queue.dispatch;return C.memoizedState=m,[x,z,!1]}function Th(m,x,C,z){return m={tag:m,create:C,deps:z,inst:x,next:null},x=Kt.updateQueue,x===null&&(x=sm(),Kt.updateQueue=x),C=x.lastEffect,C===null?x.lastEffect=m.next=m:(z=C.next,C.next=m,m.next=z,x.lastEffect=m),m}function Q_(){return Wa().memoizedState}function Ol(m,x,C,z){var Y=jo();Kt.flags|=m,Y.memoizedState=Th(1|x,{destroy:void 0},C,z===void 0?null:z)}function Jr(m,x,C,z){var Y=Wa();z=z===void 0?null:z;var ne=Y.memoizedState.inst;ua!==null&&z!==null&&wh(z,ua.memoizedState.deps)?Y.memoizedState=Th(x,ne,C,z):(Kt.flags|=m,Y.memoizedState=Th(1|x,ne,C,z))}function lm(m,x){Ol(8390656,8,m,x)}function Bd(m,x){Jr(2048,8,m,x)}function um(m){Kt.flags|=4;var x=Kt.updateQueue;if(x===null)x=sm(),Kt.updateQueue=x,x.events=[m];else{var C=x.events;C===null?x.events=[m]:C.push(m)}}function j0(m){var x=Wa().memoizedState;return um({ref:x,nextImpl:m}),function(){if((nt&2)!==0)throw Error(r(440));return x.impl.apply(void 0,arguments)}}function U0(m,x){return Jr(4,2,m,x)}function J_(m,x){return Jr(4,4,m,x)}function Eh(m,x){if(typeof x=="function"){m=m();var C=x(m);return function(){typeof C=="function"?C():x(null)}}if(x!=null)return m=m(),x.current=m,function(){x.current=null}}function Cs(m,x,C){C=C!=null?C.concat([m]):null,Jr(4,4,Eh.bind(null,x,m),C)}function Xt(){}function on(m,x){var C=Wa();x=x===void 0?null:x;var z=C.memoizedState;return x!==null&&wh(x,z[1])?z[0]:(C.memoizedState=[m,x],m)}function jd(m,x){var C=Wa();x=x===void 0?null:x;var z=C.memoizedState;if(x!==null&&wh(x,z[1]))return z[0];if(z=m(),vh){Qi(!0);try{m()}finally{Qi(!1)}}return C.memoizedState=[z,x],z}function Ui(m,x,C){return C===void 0||(du&1073741824)!==0&&(ft&261930)===0?m.memoizedState=x:(m.memoizedState=C,m=qr(),Kt.lanes|=m,qt|=m,C)}function ht(m,x,C,z){return il(C,x)?C:Rd.current!==null?(m=Ui(m,C,z),il(m,x)||(lo=!0),m):(du&42)===0||(du&1073741824)!==0&&(ft&261930)===0?(lo=!0,m.memoizedState=C):(m=qr(),Kt.lanes|=m,qt|=m,x)}function $0(m,x,C,z,Y){var ne=Fe.p;Fe.p=ne!==0&&8>ne?ne:8;var Te=Ee.T,Xe={};Ee.T=Xe,Jg(m,!1,x,C);try{var St=Y(),Qt=Ee.S;if(Qt!==null&&Qt(Xe,St),St!==null&&typeof St=="object"&&typeof St.then=="function"){var mn=zg(St,z);Cl(m,x,mn,ti(m))}else Cl(m,x,z,ti(m))}catch(wn){Cl(m,x,{then:function(){},status:"rejected",reason:wn},ti())}finally{Fe.p=ne,Te!==null&&Xe.types!==null&&(Te.types=Xe.types),Ee.T=Te}}function ev(){}function Kg(m,x,C,z){if(m.tag!==5)throw Error(r(476));var Y=tv(m).queue;$0(m,Y,x,at,C===null?ev:function(){return V0(m),C(z)})}function tv(m){var x=m.memoizedState;if(x!==null)return x;x={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zu,lastRenderedState:at},next:null};var C={};return x.next={memoizedState:C,baseState:C,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zu,lastRenderedState:C},next:null},m.memoizedState=x,m=m.alternate,m!==null&&(m.memoizedState=x),x}function V0(m){var x=tv(m);x.next===null&&(x=m.alternate.memoizedState),Cl(m,x.next.queue,{},ti())}function Qg(){return ls(Wc)}function Ud(){return Wa().memoizedState}function d1(){return Wa().memoizedState}function yT(m){for(var x=m.return;x!==null;){switch(x.tag){case 24:case 3:var C=ti();m=Nc(C);var z=Mf(x,m,C);z!==null&&(Kn(z,x,C),Dd(z,x,C)),x={cache:Qp()},m.payload=x;return}x=x.return}}function q0(m,x,C){var z=ti();C={lane:z,revertLane:0,gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},ey(m)?ty(x,C):(C=Td(m,x,C,z),C!==null&&(Kn(C,m,z),fm(C,x,z)))}function cm(m,x,C){var z=ti();Cl(m,x,C,z)}function Cl(m,x,C,z){var Y={lane:z,revertLane:0,gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null};if(ey(m))ty(x,Y);else{var ne=m.alternate;if(m.lanes===0&&(ne===null||ne.lanes===0)&&(ne=x.lastRenderedReducer,ne!==null))try{var Te=x.lastRenderedState,Xe=ne(Te,C);if(Y.hasEagerState=!0,Y.eagerState=Xe,il(Xe,Te))return $s(m,x,Y,0),st===null&&Sd(),!1}catch{}finally{}if(C=Td(m,x,Y,z),C!==null)return Kn(C,m,z),fm(C,x,z),!0}return!1}function Jg(m,x,C,z){if(z={lane:2,revertLane:nb(),gesture:null,action:z,hasEagerState:!1,eagerState:null,next:null},ey(m)){if(x)throw Error(r(479))}else x=Td(m,C,z,2),x!==null&&Kn(x,m,2)}function ey(m){var x=m.alternate;return m===Kt||x!==null&&x===Kt}function ty(m,x){zd=pu=!0;var C=m.pending;C===null?x.next=x:(x.next=C.next,C.next=x),m.pending=x}function fm(m,x,C){if((C&4194048)!==0){var z=x.lanes;z&=m.pendingLanes,C|=z,x.lanes=C,x_(m,C)}}var Ku={readContext:ls,use:Yg,useCallback:Ma,useContext:Ma,useEffect:Ma,useImperativeHandle:Ma,useLayoutEffect:Ma,useInsertionEffect:Ma,useMemo:Ma,useReducer:Ma,useRef:Ma,useState:Ma,useDebugValue:Ma,useDeferredValue:Ma,useTransition:Ma,useSyncExternalStore:Ma,useId:Ma,useHostTransitionStatus:Ma,useFormState:Ma,useActionState:Ma,useOptimistic:Ma,useMemoCache:Ma,useCacheRefresh:Ma};Ku.useEffectEvent=Ma;var nv={readContext:ls,use:Yg,useCallback:function(m,x){return jo().memoizedState=[m,x===void 0?null:x],m},useContext:ls,useEffect:lm,useImperativeHandle:function(m,x,C){C=C!=null?C.concat([m]):null,Ol(4194308,4,Eh.bind(null,x,m),C)},useLayoutEffect:function(m,x){return Ol(4194308,4,m,x)},useInsertionEffect:function(m,x){Ol(4,2,m,x)},useMemo:function(m,x){var C=jo();x=x===void 0?null:x;var z=m();if(vh){Qi(!0);try{m()}finally{Qi(!1)}}return C.memoizedState=[z,x],z},useReducer:function(m,x,C){var z=jo();if(C!==void 0){var Y=C(x);if(vh){Qi(!0);try{C(x)}finally{Qi(!1)}}}else Y=x;return z.memoizedState=z.baseState=Y,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:Y},z.queue=m,m=m.dispatch=q0.bind(null,Kt,m),[z.memoizedState,m]},useRef:function(m){var x=jo();return m={current:m},x.memoizedState=m},useState:function(m){m=jc(m);var x=m.queue,C=cm.bind(null,Kt,x);return x.dispatch=C,[m.memoizedState,C]},useDebugValue:Xt,useDeferredValue:function(m,x){var C=jo();return Ui(C,m,x)},useTransition:function(){var m=jc(!1);return m=$0.bind(null,Kt,m.queue,!0,!1),jo().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,x,C){var z=Kt,Y=jo();if(Di){if(C===void 0)throw Error(r(407));C=C()}else{if(C=x(),st===null)throw Error(r(349));(ft&127)!==0||X_(z,x,C)}Y.memoizedState=C;var ne={value:C,getSnapshot:x};return Y.queue=ne,lm(c1.bind(null,z,ne,m),[m]),z.flags|=2048,Th(9,{destroy:void 0},Z_.bind(null,z,ne,C,x),null),C},useId:function(){var m=jo(),x=st.identifierPrefix;if(Di){var C=Vu,z=Pc;C=(z&~(1<<32-Ri(z)-1)).toString(32)+C,x="_"+x+"R_"+C,C=Nd++,0<C&&(x+="H"+C.toString(32)),x+="_"}else C=P0++,x="_"+x+"r_"+C.toString(32)+"_";return m.memoizedState=x},useHostTransitionStatus:Qg,useFormState:Os,useActionState:Os,useOptimistic:function(m){var x=jo();x.memoizedState=x.baseState=m;var C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return x.queue=C,x=Jg.bind(null,Kt,!0,C),C.dispatch=x,[m,x]},useMemoCache:G_,useCacheRefresh:function(){return jo().memoizedState=yT.bind(null,Kt)},useEffectEvent:function(m){var x=jo(),C={impl:m};return x.memoizedState=C,function(){if((nt&2)!==0)throw Error(r(440));return C.impl.apply(void 0,arguments)}}},ny={readContext:ls,use:Yg,useCallback:on,useContext:ls,useEffect:Bd,useImperativeHandle:Cs,useInsertionEffect:U0,useLayoutEffect:J_,useMemo:jd,useReducer:Wg,useRef:Q_,useState:function(){return Wg(Zu)},useDebugValue:Xt,useDeferredValue:function(m,x){var C=Wa();return ht(C,ua.memoizedState,m,x)},useTransition:function(){var m=Wg(Zu)[0],x=Wa().memoizedState;return[typeof m=="boolean"?m:Sh(m),x]},useSyncExternalStore:W_,useId:Ud,useHostTransitionStatus:Qg,useFormState:Pf,useActionState:Pf,useOptimistic:function(m,x){var C=Wa();return L0(C,ua,m,x)},useMemoCache:G_,useCacheRefresh:d1};ny.useEffectEvent=j0;var H0={readContext:ls,use:Yg,useCallback:on,useContext:ls,useEffect:Bd,useImperativeHandle:Cs,useInsertionEffect:U0,useLayoutEffect:J_,useMemo:jd,useReducer:Y_,useRef:Q_,useState:function(){return Y_(Zu)},useDebugValue:Xt,useDeferredValue:function(m,x){var C=Wa();return ua===null?Ui(C,m,x):ht(C,ua.memoizedState,m,x)},useTransition:function(){var m=Y_(Zu)[0],x=Wa().memoizedState;return[typeof m=="boolean"?m:Sh(m),x]},useSyncExternalStore:W_,useId:Ud,useHostTransitionStatus:Qg,useFormState:K_,useActionState:K_,useOptimistic:function(m,x){var C=Wa();return ua!==null?L0(C,ua,m,x):(C.baseState=m,[m,C.queue.dispatch])},useMemoCache:G_,useCacheRefresh:d1};H0.useEffectEvent=j0;function rv(m,x,C,z){x=m.memoizedState,C=C(z,x),C=C==null?x:E({},x,C),m.memoizedState=C,m.lanes===0&&(m.updateQueue.baseState=C)}var iv={enqueueSetState:function(m,x,C){m=m._reactInternals;var z=ti(),Y=Nc(z);Y.payload=x,C!=null&&(Y.callback=C),x=Mf(m,Y,z),x!==null&&(Kn(x,m,z),Dd(x,m,z))},enqueueReplaceState:function(m,x,C){m=m._reactInternals;var z=ti(),Y=Nc(z);Y.tag=1,Y.payload=x,C!=null&&(Y.callback=C),x=Mf(m,Y,z),x!==null&&(Kn(x,m,z),Dd(x,m,z))},enqueueForceUpdate:function(m,x){m=m._reactInternals;var C=ti(),z=Nc(C);z.tag=2,x!=null&&(z.callback=x),x=Mf(m,z,C),x!==null&&(Kn(x,m,C),Dd(x,m,C))}};function Ms(m,x,C,z,Y,ne,Te){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(z,ne,Te):x.prototype&&x.prototype.isPureReactComponent?!Tl(C,z)||!Tl(Y,ne):!0}function G0(m,x,C,z){m=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(C,z),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(C,z),x.state!==m&&iv.enqueueReplaceState(x,x.state,null)}function Ml(m,x){var C=x;if("ref"in x){C={};for(var z in x)z!=="ref"&&(C[z]=x[z])}if(m=m.defaultProps){C===x&&(C=E({},C));for(var Y in m)C[Y]===void 0&&(C[Y]=m[Y])}return C}function p1(m){Hp(m)}function Ei(m){console.error(m)}function gr(m){Hp(m)}function ry(m,x){try{var C=m.onUncaughtError;C(x.value,{componentStack:x.stack})}catch(z){setTimeout(function(){throw z})}}function Rf(m,x,C){try{var z=m.onCaughtError;z(C.value,{componentStack:C.stack,errorBoundary:x.tag===1?x.stateNode:null})}catch(Y){setTimeout(function(){throw Y})}}function Qu(m,x,C){return C=Nc(C),C.tag=3,C.payload={element:null},C.callback=function(){ry(m,x)},C}function $c(m){return m=Nc(m),m.tag=3,m}function To(m,x,C,z){var Y=C.type.getDerivedStateFromError;if(typeof Y=="function"){var ne=z.value;m.payload=function(){return Y(ne)},m.callback=function(){Rf(x,C,z)}}var Te=C.stateNode;Te!==null&&typeof Te.componentDidCatch=="function"&&(m.callback=function(){Rf(x,C,z),typeof Y!="function"&&($n===null?$n=new Set([this]):$n.add(this));var Xe=z.stack;this.componentDidCatch(z.value,{componentStack:Xe!==null?Xe:""})})}function hm(m,x,C,z,Y){if(C.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){if(x=C.alternate,x!==null&&ph(x,C,Y,!0),C=Es.current,C!==null){switch(C.tag){case 31:case 13:return us===null?Zo():C.alternate===null&&Dt===0&&(Dt=3),C.flags&=-257,C.flags|=65536,C.lanes=Y,z===jg?C.flags|=16384:(x=C.updateQueue,x===null?C.updateQueue=new Set([z]):x.add(z),Nf(m,z,Y)),!1;case 22:return C.flags|=65536,z===jg?C.flags|=16384:(x=C.updateQueue,x===null?(x={transitions:null,markerInstances:null,retryQueue:new Set([z])},C.updateQueue=x):(C=x.retryQueue,C===null?x.retryQueue=new Set([z]):C.add(z)),Nf(m,z,Y)),!1}throw Error(r(435,C.tag))}return Nf(m,z,Y),Zo(),!1}if(Di)return x=Es.current,x!==null?((x.flags&65536)===0&&(x.flags|=256),x.flags|=65536,x.lanes=Y,z!==hh&&(m=Error(r(422),{cause:z}),Xp(Wo(m,C)))):(z!==hh&&(x=Error(r(423),{cause:z}),Xp(Wo(x,C))),m=m.current.alternate,m.flags|=65536,Y&=-Y,m.lanes|=Y,z=Wo(z,C),Y=Qu(m.stateNode,z,Y),om(m,Y),Dt!==4&&(Dt=2)),!1;var ne=Error(r(520),{cause:z});if(ne=Wo(ne,C),yn===null?yn=[ne]:yn.push(ne),Dt!==4&&(Dt=2),x===null)return!0;z=Wo(z,C),C=x;do{switch(C.tag){case 3:return C.flags|=65536,m=Y&-Y,C.lanes|=m,m=Qu(C.stateNode,z,m),om(C,m),!1;case 1:if(x=C.type,ne=C.stateNode,(C.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&($n===null||!$n.has(ne))))return C.flags|=65536,Y&=-Y,C.lanes|=Y,Y=$c(Y),To(Y,m,C,z),om(C,Y),!1}C=C.return}while(C!==null);return!1}var iy=Error(r(461)),lo=!1;function Xo(m,x,C,z){x.child=m===null?I0(x,null,C,z):zc(x,m.child,C,z)}function Yl(m,x,C,z,Y){C=C.render;var ne=x.ref;if("ref"in z){var Te={};for(var Xe in z)Xe!=="ref"&&(Te[Xe]=z[Xe])}else Te=z;return Tf(x),z=Fd(m,x,C,Te,ne,Y),Xe=q_(),m!==null&&!lo?(H_(m,x,Y),tc(m,x,Y)):(Di&&Xe&&Ig(x),x.flags|=1,Xo(m,x,z,Y),x.child)}function Ju(m,x,C,z,Y){if(m===null){var ne=C.type;return typeof ne=="function"&&!vf(ne)&&ne.defaultProps===void 0&&C.compare===null?(x.tag=15,x.type=ne,$d(m,x,ne,z,Y)):(m=Ed(C.type,null,z,x,x.mode,Y),m.ref=x.ref,m.return=x,x.child=m)}if(ne=m.child,!Yd(m,Y)){var Te=ne.memoizedProps;if(C=C.compare,C=C!==null?C:Tl,C(Te,z)&&m.ref===x.ref)return tc(m,x,Y)}return x.flags|=1,m=ol(ne,z),m.ref=x.ref,m.return=x,x.child=m}function $d(m,x,C,z,Y){if(m!==null){var ne=m.memoizedProps;if(Tl(ne,z)&&m.ref===x.ref)if(lo=!1,x.pendingProps=z=ne,Yd(m,Y))(m.flags&131072)!==0&&(lo=!0);else return x.lanes=m.lanes,tc(m,x,Y)}return dm(m,x,C,z,Y)}function Vd(m,x,C,z){var Y=z.children,ne=m!==null?m.memoizedState:null;if(m===null&&x.stateNode===null&&(x.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),z.mode==="hidden"){if((x.flags&128)!==0){if(ne=ne!==null?ne.baseLanes|C:C,m!==null){for(z=x.child=m.child,Y=0;z!==null;)Y=Y|z.lanes|z.childLanes,z=z.sibling;z=Y&~ne}else z=0,x.child=null;return av(m,x,ne,C,z)}if((C&536870912)!==0)x.memoizedState={baseLanes:0,cachePool:null},m!==null&&nm(x,ne!==null?ne.cachePool:null),ne!==null?qg(x,ne):kd(),Hg(x);else return z=x.lanes=536870912,av(m,x,ne!==null?ne.baseLanes|C:C,C,z)}else ne!==null?(nm(x,ne.cachePool),qg(x,ne),As(),x.memoizedState=null):(m!==null&&nm(x,null),kd(),As());return Xo(m,x,Y,C),x.child}function qd(m,x){return m!==null&&m.tag===22||x.stateNode!==null||(x.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.sibling}function av(m,x,C,z,Y){var ne=Fg();return ne=ne===null?null:{parent:Yi._currentValue,pool:ne},x.memoizedState={baseLanes:C,cachePool:ne},m!==null&&nm(x,null),kd(),Hg(x),m!==null&&ph(m,x,z,!0),x.childLanes=Y,null}function ec(m,x){return x=gm({mode:x.mode,children:x.children},m.mode),x.ref=m.ref,m.child=x,x.return=m,x}function ov(m,x,C){return zc(x,m.child,null,C),m=ec(x,x.pendingProps),m.flags|=2,Al(x),x.memoizedState=null,m}function Wl(m,x,C){var z=x.pendingProps,Y=(x.flags&128)!==0;if(x.flags&=-129,m===null){if(Di){if(z.mode==="hidden")return m=ec(x,z),x.lanes=536870912,qd(null,m);if(Ld(x),(m=la)?(m=tC(m,Hl),m=m!==null&&m.data==="&"?m:null,m!==null&&(x.memoizedState={dehydrated:m,treeContext:ci!==null?{id:Pc,overflow:Vu}:null,retryLane:536870912,hydrationErrors:null},C=a1(m),C.return=x,x.child=C,wo=x,la=null)):m=null,m===null)throw Hu(x);return x.lanes=536870912,null}return ec(x,z)}var ne=m.memoizedState;if(ne!==null){var Te=ne.dehydrated;if(Ld(x),Y)if(x.flags&256)x.flags&=-257,x=ov(m,x,C);else if(x.memoizedState!==null)x.child=m.child,x.flags|=128,x=null;else throw Error(r(558));else if(lo||ph(m,x,C,!1),Y=(C&m.childLanes)!==0,lo||Y){if(z=st,z!==null&&(Te=Rp(z,C),Te!==0&&Te!==ne.retryLane))throw ne.retryLane=Te,Jt(m,Te),Kn(z,m,Te),iy;Zo(),x=ov(m,x,C)}else m=ne.treeContext,la=Gc(Te.nextSibling),wo=x,Di=!0,Rc=null,Hl=!1,m!==null&&Ad(x,m),x=ec(x,z),x.flags|=4096;return x}return m=ol(m.child,{mode:z.mode,children:z.children}),m.ref=x.ref,x.child=m,m.return=x,m}function Ah(m,x){var C=x.ref;if(C===null)m!==null&&m.ref!==null&&(x.flags|=4194816);else{if(typeof C!="function"&&typeof C!="object")throw Error(r(284));(m===null||m.ref!==C)&&(x.flags|=4194816)}}function dm(m,x,C,z,Y){return Tf(x),C=Fd(m,x,C,z,void 0,Y),z=q_(),m!==null&&!lo?(H_(m,x,Y),tc(m,x,Y)):(Di&&z&&Ig(x),x.flags|=1,Xo(m,x,C,Y),x.child)}function ay(m,x,C,z,Y,ne){return Tf(x),x.updateQueue=null,C=R0(x,z,C,Y),Xu(m),z=q_(),m!==null&&!lo?(H_(m,x,ne),tc(m,x,ne)):(Di&&z&&Ig(x),x.flags|=1,Xo(m,x,C,ne),x.child)}function oy(m,x,C,z,Y){if(Tf(x),x.stateNode===null){var ne=Dc,Te=C.contextType;typeof Te=="object"&&Te!==null&&(ne=ls(Te)),ne=new C(z,ne),x.memoizedState=ne.state!==null&&ne.state!==void 0?ne.state:null,ne.updater=iv,x.stateNode=ne,ne._reactInternals=x,ne=x.stateNode,ne.props=z,ne.state=x.memoizedState,ne.refs={},Vg(x),Te=C.contextType,ne.context=typeof Te=="object"&&Te!==null?ls(Te):Dc,ne.state=x.memoizedState,Te=C.getDerivedStateFromProps,typeof Te=="function"&&(rv(x,C,Te,z),ne.state=x.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof ne.getSnapshotBeforeUpdate=="function"||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(Te=ne.state,typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount(),Te!==ne.state&&iv.enqueueReplaceState(ne,ne.state,null),Df(x,z,ne,Y),Id(),ne.state=x.memoizedState),typeof ne.componentDidMount=="function"&&(x.flags|=4194308),z=!0}else if(m===null){ne=x.stateNode;var Xe=x.memoizedProps,St=Ml(C,Xe);ne.props=St;var Qt=ne.context,mn=C.contextType;Te=Dc,typeof mn=="object"&&mn!==null&&(Te=ls(mn));var wn=C.getDerivedStateFromProps;mn=typeof wn=="function"||typeof ne.getSnapshotBeforeUpdate=="function",Xe=x.pendingProps!==Xe,mn||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(Xe||Qt!==Te)&&G0(x,ne,z,Te),sl=!1;var en=x.memoizedState;ne.state=en,Df(x,z,ne,Y),Id(),Qt=x.memoizedState,Xe||en!==Qt||sl?(typeof wn=="function"&&(rv(x,C,wn,z),Qt=x.memoizedState),(St=sl||Ms(x,C,St,z,en,Qt,Te))?(mn||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(x.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=z,x.memoizedState=Qt),ne.props=z,ne.state=Qt,ne.context=Te,z=St):(typeof ne.componentDidMount=="function"&&(x.flags|=4194308),z=!1)}else{ne=x.stateNode,am(m,x),Te=x.memoizedProps,mn=Ml(C,Te),ne.props=mn,wn=x.pendingProps,en=ne.context,Qt=C.contextType,St=Dc,typeof Qt=="object"&&Qt!==null&&(St=ls(Qt)),Xe=C.getDerivedStateFromProps,(Qt=typeof Xe=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(Te!==wn||en!==St)&&G0(x,ne,z,St),sl=!1,en=x.memoizedState,ne.state=en,Df(x,z,ne,Y),Id();var ln=x.memoizedState;Te!==wn||en!==ln||sl||m!==null&&m.dependencies!==null&&Zp(m.dependencies)?(typeof Xe=="function"&&(rv(x,C,Xe,z),ln=x.memoizedState),(mn=sl||Ms(x,C,mn,z,en,ln,St)||m!==null&&m.dependencies!==null&&Zp(m.dependencies))?(Qt||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(z,ln,St),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(z,ln,St)),typeof ne.componentDidUpdate=="function"&&(x.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof ne.componentDidUpdate!="function"||Te===m.memoizedProps&&en===m.memoizedState||(x.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||Te===m.memoizedProps&&en===m.memoizedState||(x.flags|=1024),x.memoizedProps=z,x.memoizedState=ln),ne.props=z,ne.state=ln,ne.context=St,z=mn):(typeof ne.componentDidUpdate!="function"||Te===m.memoizedProps&&en===m.memoizedState||(x.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||Te===m.memoizedProps&&en===m.memoizedState||(x.flags|=1024),z=!1)}return ne=z,Ah(m,x),z=(x.flags&128)!==0,ne||z?(ne=x.stateNode,C=z&&typeof C.getDerivedStateFromError!="function"?null:ne.render(),x.flags|=1,m!==null&&z?(x.child=zc(x,m.child,null,Y),x.child=zc(x,null,C,Y)):Xo(m,x,C,Y),x.memoizedState=ne.state,m=x.child):m=tc(m,x,Y),m}function Xa(m,x,C,z){return Gu(),x.flags|=256,Xo(m,x,C,z),x.child}var Hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Oh(m){return{baseLanes:m,cachePool:Cd()}}function pm(m,x,C){return m=m!==null?m.childLanes&~C:0,x&&(m|=Ht),m}function Ch(m,x,C){var z=x.pendingProps,Y=!1,ne=(x.flags&128)!==0,Te;if((Te=ne)||(Te=m!==null&&m.memoizedState===null?!1:(So.current&2)!==0),Te&&(Y=!0,x.flags&=-129),Te=(x.flags&32)!==0,x.flags&=-33,m===null){if(Di){if(Y?Wu(x):As(),(m=la)?(m=tC(m,Hl),m=m!==null&&m.data!=="&"?m:null,m!==null&&(x.memoizedState={dehydrated:m,treeContext:ci!==null?{id:Pc,overflow:Vu}:null,retryLane:536870912,hydrationErrors:null},C=a1(m),C.return=x,x.child=C,wo=x,la=null)):m=null,m===null)throw Hu(x);return MT(m)?x.lanes=32:x.lanes=536870912,null}var Xe=z.children;return z=z.fallback,Y?(As(),Y=x.mode,Xe=gm({mode:"hidden",children:Xe},Y),z=fh(z,Y,C,null),Xe.return=x,z.return=x,Xe.sibling=z,x.child=Xe,z=x.child,z.memoizedState=Oh(C),z.childLanes=pm(m,Te,C),x.memoizedState=Hd,qd(null,z)):(Wu(x),mm(x,Xe))}var St=m.memoizedState;if(St!==null&&(Xe=St.dehydrated,Xe!==null)){if(ne)x.flags&256?(Wu(x),x.flags&=-257,x=Gd(m,x,C)):x.memoizedState!==null?(As(),x.child=m.child,x.flags|=128,x=null):(As(),Xe=z.fallback,Y=x.mode,z=gm({mode:"visible",children:z.children},Y),Xe=fh(Xe,Y,C,null),Xe.flags|=2,z.return=x,Xe.return=x,z.sibling=Xe,x.child=z,zc(x,m.child,null,C),z=x.child,z.memoizedState=Oh(C),z.childLanes=pm(m,Te,C),x.memoizedState=Hd,x=qd(null,z));else if(Wu(x),MT(Xe)){if(Te=Xe.nextSibling&&Xe.nextSibling.dataset,Te)var Qt=Te.dgst;Te=Qt,z=Error(r(419)),z.stack="",z.digest=Te,Xp({value:z,source:null,stack:null}),x=Gd(m,x,C)}else if(lo||ph(m,x,C,!1),Te=(C&m.childLanes)!==0,lo||Te){if(Te=st,Te!==null&&(z=Rp(Te,C),z!==0&&z!==St.retryLane))throw St.retryLane=z,Jt(m,z),Kn(Te,m,z),iy;CT(Xe)||Zo(),x=Gd(m,x,C)}else CT(Xe)?(x.flags|=192,x.child=m.child,x=null):(m=St.treeContext,la=Gc(Xe.nextSibling),wo=x,Di=!0,Rc=null,Hl=!1,m!==null&&Ad(x,m),x=mm(x,z.children),x.flags|=4096);return x}return Y?(As(),Xe=z.fallback,Y=x.mode,St=m.child,Qt=St.sibling,z=ol(St,{mode:"hidden",children:z.children}),z.subtreeFlags=St.subtreeFlags&65011712,Qt!==null?Xe=ol(Qt,Xe):(Xe=fh(Xe,Y,C,null),Xe.flags|=2),Xe.return=x,z.return=x,z.sibling=Xe,x.child=z,qd(null,z),z=x.child,Xe=m.child.memoizedState,Xe===null?Xe=Oh(C):(Y=Xe.cachePool,Y!==null?(St=Yi._currentValue,Y=Y.parent!==St?{parent:St,pool:St}:Y):Y=Cd(),Xe={baseLanes:Xe.baseLanes|C,cachePool:Y}),z.memoizedState=Xe,z.childLanes=pm(m,Te,C),x.memoizedState=Hd,qd(m.child,z)):(Wu(x),C=m.child,m=C.sibling,C=ol(C,{mode:"visible",children:z.children}),C.return=x,C.sibling=null,m!==null&&(Te=x.deletions,Te===null?(x.deletions=[m],x.flags|=16):Te.push(m)),x.child=C,x.memoizedState=null,C)}function mm(m,x){return x=gm({mode:"visible",children:x},m.mode),x.return=m,m.child=x}function gm(m,x){return m=al(22,m,null,x),m.lanes=0,m}function Gd(m,x,C){return zc(x,m.child,null,C),m=mm(x,x.pendingProps.children),m.flags|=2,x.memoizedState=null,m}function Mh(m,x,C){m.lanes|=x;var z=m.alternate;z!==null&&(z.lanes|=x),C0(m.return,x,C)}function sy(m,x,C,z,Y,ne){var Te=m.memoizedState;Te===null?m.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:z,tail:C,tailMode:Y,treeForkCount:ne}:(Te.isBackwards=x,Te.rendering=null,Te.renderingStartTime=0,Te.last=z,Te.tail=C,Te.tailMode=Y,Te.treeForkCount=ne)}function ym(m,x,C){var z=x.pendingProps,Y=z.revealOrder,ne=z.tail;z=z.children;var Te=So.current,Xe=(Te&2)!==0;if(Xe?(Te=Te&1|2,x.flags|=128):Te&=1,Pe(So,Te),Xo(m,x,z,C),z=Di?Mg:0,!Xe&&m!==null&&(m.flags&128)!==0)e:for(m=x.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&Mh(m,C,x);else if(m.tag===19)Mh(m,C,x);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===x)break e;for(;m.sibling===null;){if(m.return===null||m.return===x)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(Y){case"forwards":for(C=x.child,Y=null;C!==null;)m=C.alternate,m!==null&&Bc(m)===null&&(Y=C),C=C.sibling;C=Y,C===null?(Y=x.child,x.child=null):(Y=C.sibling,C.sibling=null),sy(x,!1,Y,C,ne,z);break;case"backwards":case"unstable_legacy-backwards":for(C=null,Y=x.child,x.child=null;Y!==null;){if(m=Y.alternate,m!==null&&Bc(m)===null){x.child=Y;break}m=Y.sibling,Y.sibling=C,C=Y,Y=m}sy(x,!0,C,null,ne,z);break;case"together":sy(x,!1,null,null,void 0,z);break;default:x.memoizedState=null}return x.child}function tc(m,x,C){if(m!==null&&(x.dependencies=m.dependencies),qt|=x.lanes,(C&x.childLanes)===0)if(m!==null){if(ph(m,x,C,!1),(C&x.childLanes)===0)return null}else return null;if(m!==null&&x.child!==m.child)throw Error(r(153));if(x.child!==null){for(m=x.child,C=ol(m,m.pendingProps),x.child=C,C.return=x;m.sibling!==null;)m=m.sibling,C=C.sibling=ol(m,m.pendingProps),C.return=x;C.sibling=null}return x.child}function Yd(m,x){return(m.lanes&x)!==0?!0:(m=m.dependencies,!!(m!==null&&Zp(m)))}function Y0(m,x,C){switch(x.tag){case 3:Ut(x,x.stateNode.containerInfo),dh(x,Yi,m.memoizedState.cache),Gu();break;case 27:case 5:Ye(x);break;case 4:Ut(x,x.stateNode.containerInfo);break;case 10:dh(x,x.type,x.memoizedProps.value);break;case 31:if(x.memoizedState!==null)return x.flags|=128,Ld(x),null;break;case 13:var z=x.memoizedState;if(z!==null)return z.dehydrated!==null?(Wu(x),x.flags|=128,null):(C&x.child.childLanes)!==0?Ch(m,x,C):(Wu(x),m=tc(m,x,C),m!==null?m.sibling:null);Wu(x);break;case 19:var Y=(m.flags&128)!==0;if(z=(C&x.childLanes)!==0,z||(ph(m,x,C,!1),z=(C&x.childLanes)!==0),Y){if(z)return ym(m,x,C);x.flags|=128}if(Y=x.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),Pe(So,So.current),z)break;return null;case 22:return x.lanes=0,Vd(m,x,C,x.pendingProps);case 24:dh(x,Yi,m.memoizedState.cache)}return tc(m,x,C)}function ly(m,x,C){if(m!==null)if(m.memoizedProps!==x.pendingProps)lo=!0;else{if(!Yd(m,C)&&(x.flags&128)===0)return lo=!1,Y0(m,x,C);lo=(m.flags&131072)!==0}else lo=!1,Di&&(x.flags&1048576)!==0&&Dg(x,Mg,x.index);switch(x.lanes=0,x.tag){case 16:e:{var z=x.pendingProps;if(m=Lc(x.elementType),x.type=m,typeof m=="function")vf(m)?(z=Ml(m,z),x.tag=1,x=oy(null,x,m,z,C)):(x.tag=0,x=dm(null,x,m,z,C));else{if(m!=null){var Y=m.$$typeof;if(Y===ie){x.tag=11,x=Yl(null,x,m,z,C);break e}else if(Y===te){x.tag=14,x=Ju(null,x,m,z,C);break e}}throw x=He(m)||m,Error(r(306,x,""))}}return x;case 0:return dm(m,x,x.type,x.pendingProps,C);case 1:return z=x.type,Y=Ml(z,x.pendingProps),oy(m,x,z,Y,C);case 3:e:{if(Ut(x,x.stateNode.containerInfo),m===null)throw Error(r(387));z=x.pendingProps;var ne=x.memoizedState;Y=ne.element,am(m,x),Df(x,z,null,C);var Te=x.memoizedState;if(z=Te.cache,dh(x,Yi,z),z!==ne.cache&&Rg(x,[Yi],C,!0),Id(),z=Te.element,ne.isDehydrated)if(ne={element:z,isDehydrated:!1,cache:Te.cache},x.updateQueue.baseState=ne,x.memoizedState=ne,x.flags&256){x=Xa(m,x,z,C);break e}else if(z!==Y){Y=Wo(Error(r(424)),x),Xp(Y),x=Xa(m,x,z,C);break e}else{switch(m=x.stateNode.containerInfo,m.nodeType){case 9:m=m.body;break;default:m=m.nodeName==="HTML"?m.ownerDocument.body:m}for(la=Gc(m.firstChild),wo=x,Di=!0,Rc=null,Hl=!0,C=I0(x,null,z,C),x.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling}else{if(Gu(),z===Y){x=tc(m,x,C);break e}Xo(m,x,z,C)}x=x.child}return x;case 26:return Ah(m,x),m===null?(C=Rh(x.type,null,x.pendingProps,null))?x.memoizedState=C:Di||(C=x.type,m=x.pendingProps,z=lb(dn.current).createElement(C),z[Qe]=x,z[ze]=m,hl(z,C,m),Pn(z),x.stateNode=z):x.memoizedState=Rh(x.type,m.memoizedProps,x.pendingProps,m.memoizedState),null;case 27:return Ye(x),m===null&&Di&&(z=x.stateNode=pv(x.type,x.pendingProps,dn.current),wo=x,Hl=!0,Y=la,ac(x.type)?(ub=Y,la=Gc(z.firstChild)):la=Y),Xo(m,x,x.pendingProps.children,C),Ah(m,x),m===null&&(x.flags|=4194304),x.child;case 5:return m===null&&Di&&((Y=z=la)&&(z=qk(z,x.type,x.pendingProps,Hl),z!==null?(x.stateNode=z,wo=x,la=Gc(z.firstChild),Hl=!1,Y=!0):Y=!1),Y||Hu(x)),Ye(x),Y=x.type,ne=x.pendingProps,Te=m!==null?m.memoizedProps:null,z=ne.children,Ph(Y,ne)?z=null:Te!==null&&Ph(Y,Te)&&(x.flags|=32),x.memoizedState!==null&&(Y=Fd(m,x,u1,null,null,C),Wc._currentValue=Y),Ah(m,x),Xo(m,x,z,C),x.child;case 6:return m===null&&Di&&((m=C=la)&&(C=Hk(C,x.pendingProps,Hl),C!==null?(x.stateNode=C,wo=x,la=null,m=!0):m=!1),m||Hu(x)),null;case 13:return Ch(m,x,C);case 4:return Ut(x,x.stateNode.containerInfo),z=x.pendingProps,m===null?x.child=zc(x,null,z,C):Xo(m,x,z,C),x.child;case 11:return Yl(m,x,x.type,x.pendingProps,C);case 7:return Xo(m,x,x.pendingProps,C),x.child;case 8:return Xo(m,x,x.pendingProps.children,C),x.child;case 12:return Xo(m,x,x.pendingProps.children,C),x.child;case 10:return z=x.pendingProps,dh(x,x.type,z.value),Xo(m,x,z.children,C),x.child;case 9:return Y=x.type._context,z=x.pendingProps.children,Tf(x),Y=ls(Y),z=z(Y),x.flags|=1,Xo(m,x,z,C),x.child;case 14:return Ju(m,x,x.type,x.pendingProps,C);case 15:return $d(m,x,x.type,x.pendingProps,C);case 19:return ym(m,x,C);case 31:return Wl(m,x,C);case 22:return Vd(m,x,C,x.pendingProps);case 24:return Tf(x),z=ls(Yi),m===null?(Y=Fg(),Y===null&&(Y=st,ne=Qp(),Y.pooledCache=ne,ne.refCount++,ne!==null&&(Y.pooledCacheLanes|=C),Y=ne),x.memoizedState={parent:z,cache:Y},Vg(x),dh(x,Yi,Y)):((m.lanes&C)!==0&&(am(m,x),Df(x,null,null,C),Id()),Y=m.memoizedState,ne=x.memoizedState,Y.parent!==z?(Y={parent:z,cache:z},x.memoizedState=Y,x.lanes===0&&(x.memoizedState=x.updateQueue.baseState=Y),dh(x,Yi,z)):(z=ne.cache,dh(x,Yi,z),z!==Y.cache&&Rg(x,[Yi],C,!0))),Xo(m,x,x.pendingProps.children,C),x.child;case 29:throw x.pendingProps}throw Error(r(156,x.tag))}function Vc(m){m.flags|=4}function sv(m,x,C,z,Y){if((x=(m.mode&32)!==0)&&(x=!1),x){if(m.flags|=16777216,(Y&335544128)===Y)if(m.stateNode.complete)m.flags|=8192;else if(Hr())m.flags|=8192;else throw Cf=jg,M0}else m.flags&=-16777217}function W0(m,x){if(x.type!=="stylesheet"||(x.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!BT(x))if(Hr())m.flags|=8192;else throw Cf=jg,M0}function uy(m,x){x!==null&&(m.flags|=4),m.flags&16384&&(x=m.tag!==22?wl():536870912,m.lanes|=x,xn|=x)}function _m(m,x){if(!Di)switch(m.tailMode){case"hidden":x=m.tail;for(var C=null;x!==null;)x.alternate!==null&&(C=x),x=x.sibling;C===null?m.tail=null:C.sibling=null;break;case"collapsed":C=m.tail;for(var z=null;C!==null;)C.alternate!==null&&(z=C),C=C.sibling;z===null?x||m.tail===null?m.tail=null:m.tail.sibling=null:z.sibling=null}}function ja(m){var x=m.alternate!==null&&m.alternate.child===m.child,C=0,z=0;if(x)for(var Y=m.child;Y!==null;)C|=Y.lanes|Y.childLanes,z|=Y.subtreeFlags&65011712,z|=Y.flags&65011712,Y.return=m,Y=Y.sibling;else for(Y=m.child;Y!==null;)C|=Y.lanes|Y.childLanes,z|=Y.subtreeFlags,z|=Y.flags,Y.return=m,Y=Y.sibling;return m.subtreeFlags|=z,m.childLanes=C,x}function cy(m,x,C){var z=x.pendingProps;switch(xf(x),x.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ja(x),null;case 1:return ja(x),null;case 3:return C=x.stateNode,z=null,m!==null&&(z=m.memoizedState.cache),x.memoizedState.cache!==z&&(x.flags|=2048),Sf(Yi),xe(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(m===null||m.child===null)&&(wf(x)?Vc(x):m===null||m.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,j_())),ja(x),null;case 26:var Y=x.type,ne=x.memoizedState;return m===null?(Vc(x),ne!==null?(ja(x),W0(x,ne)):(ja(x),sv(x,Y,null,z,C))):ne?ne!==m.memoizedState?(Vc(x),ja(x),W0(x,ne)):(ja(x),x.flags&=-16777217):(m=m.memoizedProps,m!==z&&Vc(x),ja(x),sv(x,Y,m,z,C)),null;case 27:if(ct(x),C=dn.current,Y=x.type,m!==null&&x.stateNode!=null)m.memoizedProps!==z&&Vc(x);else{if(!z){if(x.stateNode===null)throw Error(r(166));return ja(x),null}m=jt.current,wf(x)?Pg(x):(m=pv(Y,z,C),x.stateNode=m,Vc(x))}return ja(x),null;case 5:if(ct(x),Y=x.type,m!==null&&x.stateNode!=null)m.memoizedProps!==z&&Vc(x);else{if(!z){if(x.stateNode===null)throw Error(r(166));return ja(x),null}if(ne=jt.current,wf(x))Pg(x);else{var Te=lb(dn.current);switch(ne){case 1:ne=Te.createElementNS("http://www.w3.org/2000/svg",Y);break;case 2:ne=Te.createElementNS("http://www.w3.org/1998/Math/MathML",Y);break;default:switch(Y){case"svg":ne=Te.createElementNS("http://www.w3.org/2000/svg",Y);break;case"math":ne=Te.createElementNS("http://www.w3.org/1998/Math/MathML",Y);break;case"script":ne=Te.createElement("div"),ne.innerHTML="<script><\/script>",ne=ne.removeChild(ne.firstChild);break;case"select":ne=typeof z.is=="string"?Te.createElement("select",{is:z.is}):Te.createElement("select"),z.multiple?ne.multiple=!0:z.size&&(ne.size=z.size);break;default:ne=typeof z.is=="string"?Te.createElement(Y,{is:z.is}):Te.createElement(Y)}}ne[Qe]=x,ne[ze]=z;e:for(Te=x.child;Te!==null;){if(Te.tag===5||Te.tag===6)ne.appendChild(Te.stateNode);else if(Te.tag!==4&&Te.tag!==27&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===x)break e;for(;Te.sibling===null;){if(Te.return===null||Te.return===x)break e;Te=Te.return}Te.sibling.return=Te.return,Te=Te.sibling}x.stateNode=ne;e:switch(hl(ne,Y,z),Y){case"button":case"input":case"select":case"textarea":z=!!z.autoFocus;break e;case"img":z=!0;break e;default:z=!1}z&&Vc(x)}}return ja(x),sv(x,x.type,m===null?null:m.memoizedProps,x.pendingProps,C),null;case 6:if(m&&x.stateNode!=null)m.memoizedProps!==z&&Vc(x);else{if(typeof z!="string"&&x.stateNode===null)throw Error(r(166));if(m=dn.current,wf(x)){if(m=x.stateNode,C=x.memoizedProps,z=null,Y=wo,Y!==null)switch(Y.tag){case 27:case 5:z=Y.memoizedProps}m[Qe]=x,m=!!(m.nodeValue===C||z!==null&&z.suppressHydrationWarning===!0||ZO(m.nodeValue,C)),m||Hu(x,!0)}else m=lb(m).createTextNode(z),m[Qe]=x,x.stateNode=m}return ja(x),null;case 31:if(C=x.memoizedState,m===null||m.memoizedState!==null){if(z=wf(x),C!==null){if(m===null){if(!z)throw Error(r(318));if(m=x.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(557));m[Qe]=x}else Gu(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;ja(x),m=!1}else C=j_(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=C),m=!0;if(!m)return x.flags&256?(Al(x),x):(Al(x),null);if((x.flags&128)!==0)throw Error(r(558))}return ja(x),null;case 13:if(z=x.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(Y=wf(x),z!==null&&z.dehydrated!==null){if(m===null){if(!Y)throw Error(r(318));if(Y=x.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(r(317));Y[Qe]=x}else Gu(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;ja(x),Y=!1}else Y=j_(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=Y),Y=!0;if(!Y)return x.flags&256?(Al(x),x):(Al(x),null)}return Al(x),(x.flags&128)!==0?(x.lanes=C,x):(C=z!==null,m=m!==null&&m.memoizedState!==null,C&&(z=x.child,Y=null,z.alternate!==null&&z.alternate.memoizedState!==null&&z.alternate.memoizedState.cachePool!==null&&(Y=z.alternate.memoizedState.cachePool.pool),ne=null,z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(ne=z.memoizedState.cachePool.pool),ne!==Y&&(z.flags|=2048)),C!==m&&C&&(x.child.flags|=8192),uy(x,x.updateQueue),ja(x),null);case 4:return xe(),m===null&&_1(x.stateNode.containerInfo),ja(x),null;case 10:return Sf(x.type),ja(x),null;case 19:if(it(So),z=x.memoizedState,z===null)return ja(x),null;if(Y=(x.flags&128)!==0,ne=z.rendering,ne===null)if(Y)_m(z,!1);else{if(Dt!==0||m!==null&&(m.flags&128)!==0)for(m=x.child;m!==null;){if(ne=Bc(m),ne!==null){for(x.flags|=128,_m(z,!1),m=ne.updateQueue,x.updateQueue=m,uy(x,m),x.subtreeFlags=0,m=C,C=x.child;C!==null;)bf(C,m),C=C.sibling;return Pe(So,So.current&1|2),Di&&qu(x,z.treeForkCount),x.child}m=m.sibling}z.tail!==null&&Fr()>Qn&&(x.flags|=128,Y=!0,_m(z,!1),x.lanes=4194304)}else{if(!Y)if(m=Bc(ne),m!==null){if(x.flags|=128,Y=!0,m=m.updateQueue,x.updateQueue=m,uy(x,m),_m(z,!0),z.tail===null&&z.tailMode==="hidden"&&!ne.alternate&&!Di)return ja(x),null}else 2*Fr()-z.renderingStartTime>Qn&&C!==536870912&&(x.flags|=128,Y=!0,_m(z,!1),x.lanes=4194304);z.isBackwards?(ne.sibling=x.child,x.child=ne):(m=z.last,m!==null?m.sibling=ne:x.child=ne,z.last=ne)}return z.tail!==null?(m=z.tail,z.rendering=m,z.tail=m.sibling,z.renderingStartTime=Fr(),m.sibling=null,C=So.current,Pe(So,Y?C&1|2:C&1),Di&&qu(x,z.treeForkCount),m):(ja(x),null);case 22:case 23:return Al(x),Fc(),z=x.memoizedState!==null,m!==null?m.memoizedState!==null!==z&&(x.flags|=8192):z&&(x.flags|=8192),z?(C&536870912)!==0&&(x.flags&128)===0&&(ja(x),x.subtreeFlags&6&&(x.flags|=8192)):ja(x),C=x.updateQueue,C!==null&&uy(x,C.retryQueue),C=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),z=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(z=x.memoizedState.cachePool.pool),z!==C&&(x.flags|=2048),m!==null&&it(Of),null;case 24:return C=null,m!==null&&(C=m.memoizedState.cache),x.memoizedState.cache!==C&&(x.flags|=2048),Sf(Yi),ja(x),null;case 25:return null;case 30:return null}throw Error(r(156,x.tag))}function m1(m,x){switch(xf(x),x.tag){case 1:return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 3:return Sf(Yi),xe(),m=x.flags,(m&65536)!==0&&(m&128)===0?(x.flags=m&-65537|128,x):null;case 26:case 27:case 5:return ct(x),null;case 31:if(x.memoizedState!==null){if(Al(x),x.alternate===null)throw Error(r(340));Gu()}return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 13:if(Al(x),m=x.memoizedState,m!==null&&m.dehydrated!==null){if(x.alternate===null)throw Error(r(340));Gu()}return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 19:return it(So),null;case 4:return xe(),null;case 10:return Sf(x.type),null;case 22:case 23:return Al(x),Fc(),m!==null&&it(Of),m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 24:return Sf(Yi),null;case 25:return null;default:return null}}function X0(m,x){switch(xf(x),x.tag){case 3:Sf(Yi),xe();break;case 26:case 27:case 5:ct(x);break;case 4:xe();break;case 31:x.memoizedState!==null&&Al(x);break;case 13:Al(x);break;case 19:it(So);break;case 10:Sf(x.type);break;case 22:case 23:Al(x),Fc(),m!==null&&it(Of);break;case 24:Sf(Yi)}}function kf(m,x){try{var C=x.updateQueue,z=C!==null?C.lastEffect:null;if(z!==null){var Y=z.next;C=Y;do{if((C.tag&m)===m){z=void 0;var ne=C.create,Te=C.inst;z=ne(),Te.destroy=z}C=C.next}while(C!==Y)}}catch(Xe){Ai(x,x.return,Xe)}}function Lf(m,x,C){try{var z=x.updateQueue,Y=z!==null?z.lastEffect:null;if(Y!==null){var ne=Y.next;z=ne;do{if((z.tag&m)===m){var Te=z.inst,Xe=Te.destroy;if(Xe!==void 0){Te.destroy=void 0,Y=x;var St=C,Qt=Xe;try{Qt()}catch(mn){Ai(Y,St,mn)}}}z=z.next}while(z!==ne)}}catch(mn){Ai(x,x.return,mn)}}function lv(m){var x=m.updateQueue;if(x!==null){var C=m.stateNode;try{l1(x,C)}catch(z){Ai(m,m.return,z)}}}function Z0(m,x,C){C.props=Ml(m.type,m.memoizedProps),C.state=m.memoizedState;try{C.componentWillUnmount()}catch(z){Ai(m,x,z)}}function vm(m,x){try{var C=m.ref;if(C!==null){switch(m.tag){case 26:case 27:case 5:var z=m.stateNode;break;case 30:z=m.stateNode;break;default:z=m.stateNode}typeof C=="function"?m.refCleanup=C(z):C.current=z}}catch(Y){Ai(m,x,Y)}}function nc(m,x){var C=m.ref,z=m.refCleanup;if(C!==null)if(typeof z=="function")try{z()}catch(Y){Ai(m,x,Y)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof C=="function")try{C(null)}catch(Y){Ai(m,x,Y)}else C.current=null}function K0(m){var x=m.type,C=m.memoizedProps,z=m.stateNode;try{e:switch(x){case"button":case"input":case"select":case"textarea":C.autoFocus&&z.focus();break e;case"img":C.src?z.src=C.src:C.srcSet&&(z.srcset=C.srcSet)}}catch(Y){Ai(m,m.return,Y)}}function Ii(m,x,C){try{var z=m.stateNode;KO(z,m.type,C,x),z[ze]=x}catch(Y){Ai(m,m.return,Y)}}function Q0(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&ac(m.type)||m.tag===4}function uv(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Q0(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&ac(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function J0(m,x,C){var z=m.tag;if(z===5||z===6)m=m.stateNode,x?(C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C).insertBefore(m,x):(x=C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C,x.appendChild(m),C=C._reactRootContainer,C!=null||x.onclick!==null||(x.onclick=xo));else if(z!==4&&(z===27&&ac(m.type)&&(C=m.stateNode,x=null),m=m.child,m!==null))for(J0(m,x,C),m=m.sibling;m!==null;)J0(m,x,C),m=m.sibling}function cv(m,x,C){var z=m.tag;if(z===5||z===6)m=m.stateNode,x?C.insertBefore(m,x):C.appendChild(m);else if(z!==4&&(z===27&&ac(m.type)&&(C=m.stateNode),m=m.child,m!==null))for(cv(m,x,C),m=m.sibling;m!==null;)cv(m,x,C),m=m.sibling}function bm(m){var x=m.stateNode,C=m.memoizedProps;try{for(var z=m.type,Y=x.attributes;Y.length;)x.removeAttributeNode(Y[0]);hl(x,z,C),x[Qe]=m,x[ze]=C}catch(ne){Ai(m,m.return,ne)}}var qc=!1,uo=!1,Wd=!1,mu=typeof WeakSet=="function"?WeakSet:Set,fa=null;function Ua(m,x){if(m=m.containerInfo,b1=gb,m=t1(m),xd(m)){if("selectionStart"in m)var C={start:m.selectionStart,end:m.selectionEnd};else e:{C=(C=m.ownerDocument)&&C.defaultView||window;var z=C.getSelection&&C.getSelection();if(z&&z.rangeCount!==0){C=z.anchorNode;var Y=z.anchorOffset,ne=z.focusNode;z=z.focusOffset;try{C.nodeType,ne.nodeType}catch{C=null;break e}var Te=0,Xe=-1,St=-1,Qt=0,mn=0,wn=m,en=null;t:for(;;){for(var ln;wn!==C||Y!==0&&wn.nodeType!==3||(Xe=Te+Y),wn!==ne||z!==0&&wn.nodeType!==3||(St=Te+z),wn.nodeType===3&&(Te+=wn.nodeValue.length),(ln=wn.firstChild)!==null;)en=wn,wn=ln;for(;;){if(wn===m)break t;if(en===C&&++Qt===Y&&(Xe=Te),en===ne&&++mn===z&&(St=Te),(ln=wn.nextSibling)!==null)break;wn=en,en=wn.parentNode}wn=ln}C=Xe===-1||St===-1?null:{start:Xe,end:St}}else C=null}C=C||{start:0,end:0}}else C=null;for(x1={focusedElem:m,selectionRange:C},gb=!1,fa=x;fa!==null;)if(x=fa,m=x.child,(x.subtreeFlags&1028)!==0&&m!==null)m.return=x,fa=m;else for(;fa!==null;){switch(x=fa,ne=x.alternate,m=x.flags,x.tag){case 0:if((m&4)!==0&&(m=x.updateQueue,m=m!==null?m.events:null,m!==null))for(C=0;C<m.length;C++)Y=m[C],Y.ref.impl=Y.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&ne!==null){m=void 0,C=x,Y=ne.memoizedProps,ne=ne.memoizedState,z=C.stateNode;try{var cr=Ml(C.type,Y);m=z.getSnapshotBeforeUpdate(cr,ne),z.__reactInternalSnapshotBeforeUpdate=m}catch(Sr){Ai(C,C.return,Sr)}}break;case 3:if((m&1024)!==0){if(m=x.stateNode.containerInfo,C=m.nodeType,C===9)hy(m);else if(C===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":hy(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(r(163))}if(m=x.sibling,m!==null){m.return=x.return,fa=m;break}fa=x.return}}function Dl(m,x,C){var z=C.flags;switch(C.tag){case 0:case 11:case 15:F(m,C),z&4&&kf(5,C);break;case 1:if(F(m,C),z&4)if(m=C.stateNode,x===null)try{m.componentDidMount()}catch(Te){Ai(C,C.return,Te)}else{var Y=Ml(C.type,x.memoizedProps);x=x.memoizedState;try{m.componentDidUpdate(Y,x,m.__reactInternalSnapshotBeforeUpdate)}catch(Te){Ai(C,C.return,Te)}}z&64&&lv(C),z&512&&vm(C,C.return);break;case 3:if(F(m,C),z&64&&(m=C.updateQueue,m!==null)){if(x=null,C.child!==null)switch(C.child.tag){case 27:case 5:x=C.child.stateNode;break;case 1:x=C.child.stateNode}try{l1(m,x)}catch(Te){Ai(C,C.return,Te)}}break;case 27:x===null&&z&4&&bm(C);case 26:case 5:F(m,C),x===null&&z&4&&K0(C),z&512&&vm(C,C.return);break;case 12:F(m,C);break;case 31:F(m,C),z&4&&_T(m,C);break;case 13:F(m,C),z&4&&_(m,C),z&64&&(m=C.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(C=$O.bind(null,C),Gk(m,C))));break;case 22:if(z=C.memoizedState!==null||qc,!z){x=x!==null&&x.memoizedState!==null||uo,Y=qc;var ne=uo;qc=z,(uo=x)&&!ne?H(m,C,(C.subtreeFlags&8772)!==0):F(m,C),qc=Y,uo=ne}break;case 30:break;default:F(m,C)}}function xm(m){var x=m.alternate;x!==null&&(m.alternate=null,xm(x)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(x=m.stateNode,x!==null&&hn(x)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var Da=null,ll=!1;function zf(m,x,C){for(C=C.child;C!==null;)Xd(m,x,C),C=C.sibling}function Xd(m,x,C){if(Aa&&typeof Aa.onCommitFiberUnmount=="function")try{Aa.onCommitFiberUnmount(Yo,C)}catch{}switch(C.tag){case 26:uo||nc(C,x),zf(m,x,C),C.memoizedState?C.memoizedState.count--:C.stateNode&&(C=C.stateNode,C.parentNode.removeChild(C));break;case 27:uo||nc(C,x);var z=Da,Y=ll;ac(C.type)&&(Da=C.stateNode,ll=!1),zf(m,x,C),cb(C.stateNode),Da=z,ll=Y;break;case 5:uo||nc(C,x);case 6:if(z=Da,Y=ll,Da=null,zf(m,x,C),Da=z,ll=Y,Da!==null)if(ll)try{(Da.nodeType===9?Da.body:Da.nodeName==="HTML"?Da.ownerDocument.body:Da).removeChild(C.stateNode)}catch(ne){Ai(C,x,ne)}else try{Da.removeChild(C.stateNode)}catch(ne){Ai(C,x,ne)}break;case 18:Da!==null&&(ll?(m=Da,OT(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,C.stateNode),bv(m)):OT(Da,C.stateNode));break;case 4:z=Da,Y=ll,Da=C.stateNode.containerInfo,ll=!0,zf(m,x,C),Da=z,ll=Y;break;case 0:case 11:case 14:case 15:Lf(2,C,x),uo||Lf(4,C,x),zf(m,x,C);break;case 1:uo||(nc(C,x),z=C.stateNode,typeof z.componentWillUnmount=="function"&&Z0(C,x,z)),zf(m,x,C);break;case 21:zf(m,x,C);break;case 22:uo=(z=uo)||C.memoizedState!==null,zf(m,x,C),uo=z;break;default:zf(m,x,C)}}function _T(m,x){if(x.memoizedState===null&&(m=x.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{bv(m)}catch(C){Ai(x,x.return,C)}}}function _(m,x){if(x.memoizedState===null&&(m=x.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{bv(m)}catch(C){Ai(x,x.return,C)}}function l(m){switch(m.tag){case 31:case 13:case 19:var x=m.stateNode;return x===null&&(x=m.stateNode=new mu),x;case 22:return m=m.stateNode,x=m._retryCache,x===null&&(x=m._retryCache=new mu),x;default:throw Error(r(435,m.tag))}}function d(m,x){var C=l(m);x.forEach(function(z){if(!C.has(z)){C.add(z);var Y=VO.bind(null,m,z);z.then(Y,Y)}})}function v(m,x){var C=x.deletions;if(C!==null)for(var z=0;z<C.length;z++){var Y=C[z],ne=m,Te=x,Xe=Te;e:for(;Xe!==null;){switch(Xe.tag){case 27:if(ac(Xe.type)){Da=Xe.stateNode,ll=!1;break e}break;case 5:Da=Xe.stateNode,ll=!1;break e;case 3:case 4:Da=Xe.stateNode.containerInfo,ll=!0;break e}Xe=Xe.return}if(Da===null)throw Error(r(160));Xd(ne,Te,Y),Da=null,ll=!1,ne=Y.alternate,ne!==null&&(ne.return=null),Y.return=null}if(x.subtreeFlags&13886)for(x=x.child;x!==null;)O(x,m),x=x.sibling}var T=null;function O(m,x){var C=m.alternate,z=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:v(x,m),M(m),z&4&&(Lf(3,m,m.return),kf(3,m),Lf(5,m,m.return));break;case 1:v(x,m),M(m),z&512&&(uo||C===null||nc(C,C.return)),z&64&&qc&&(m=m.updateQueue,m!==null&&(z=m.callbacks,z!==null&&(C=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=C===null?z:C.concat(z))));break;case 26:var Y=T;if(v(x,m),M(m),z&512&&(uo||C===null||nc(C,C.return)),z&4){var ne=C!==null?C.memoizedState:null;if(z=m.memoizedState,C===null)if(z===null)if(m.stateNode===null){e:{z=m.type,C=m.memoizedProps,Y=Y.ownerDocument||Y;t:switch(z){case"title":ne=Y.getElementsByTagName("title")[0],(!ne||ne[Ft]||ne[Qe]||ne.namespaceURI==="http://www.w3.org/2000/svg"||ne.hasAttribute("itemprop"))&&(ne=Y.createElement(z),Y.head.insertBefore(ne,Y.querySelector("head > title"))),hl(ne,z,C),ne[Qe]=m,Pn(ne),z=ne;break e;case"link":var Te=gy("link","href",Y).get(z+(C.href||""));if(Te){for(var Xe=0;Xe<Te.length;Xe++)if(ne=Te[Xe],ne.getAttribute("href")===(C.href==null||C.href===""?null:C.href)&&ne.getAttribute("rel")===(C.rel==null?null:C.rel)&&ne.getAttribute("title")===(C.title==null?null:C.title)&&ne.getAttribute("crossorigin")===(C.crossOrigin==null?null:C.crossOrigin)){Te.splice(Xe,1);break t}}ne=Y.createElement(z),hl(ne,z,C),Y.head.appendChild(ne);break;case"meta":if(Te=gy("meta","content",Y).get(z+(C.content||""))){for(Xe=0;Xe<Te.length;Xe++)if(ne=Te[Xe],ne.getAttribute("content")===(C.content==null?null:""+C.content)&&ne.getAttribute("name")===(C.name==null?null:C.name)&&ne.getAttribute("property")===(C.property==null?null:C.property)&&ne.getAttribute("http-equiv")===(C.httpEquiv==null?null:C.httpEquiv)&&ne.getAttribute("charset")===(C.charSet==null?null:C.charSet)){Te.splice(Xe,1);break t}}ne=Y.createElement(z),hl(ne,z,C),Y.head.appendChild(ne);break;default:throw Error(r(468,z))}ne[Qe]=m,Pn(ne),z=ne}m.stateNode=z}else FT(Y,m.type,m.stateNode);else m.stateNode=zT(Y,z,m.memoizedProps);else ne!==z?(ne===null?C.stateNode!==null&&(C=C.stateNode,C.parentNode.removeChild(C)):ne.count--,z===null?FT(Y,m.type,m.stateNode):zT(Y,z,m.memoizedProps)):z===null&&m.stateNode!==null&&Ii(m,m.memoizedProps,C.memoizedProps)}break;case 27:v(x,m),M(m),z&512&&(uo||C===null||nc(C,C.return)),C!==null&&z&4&&Ii(m,m.memoizedProps,C.memoizedProps);break;case 5:if(v(x,m),M(m),z&512&&(uo||C===null||nc(C,C.return)),m.flags&32){Y=m.stateNode;try{Ac(Y,"")}catch(cr){Ai(m,m.return,cr)}}z&4&&m.stateNode!=null&&(Y=m.memoizedProps,Ii(m,Y,C!==null?C.memoizedProps:Y)),z&1024&&(Wd=!0);break;case 6:if(v(x,m),M(m),z&4){if(m.stateNode===null)throw Error(r(162));z=m.memoizedProps,C=m.stateNode;try{C.nodeValue=z}catch(cr){Ai(m,m.return,cr)}}break;case 3:if(Mm=null,Y=T,T=fb(x.containerInfo),v(x,m),T=Y,M(m),z&4&&C!==null&&C.memoizedState.isDehydrated)try{bv(x.containerInfo)}catch(cr){Ai(m,m.return,cr)}Wd&&(Wd=!1,R(m));break;case 4:z=T,T=fb(m.stateNode.containerInfo),v(x,m),M(m),T=z;break;case 12:v(x,m),M(m);break;case 31:v(x,m),M(m),z&4&&(z=m.updateQueue,z!==null&&(m.updateQueue=null,d(m,z)));break;case 13:v(x,m),M(m),m.child.flags&8192&&m.memoizedState!==null!=(C!==null&&C.memoizedState!==null)&&(In=Fr()),z&4&&(z=m.updateQueue,z!==null&&(m.updateQueue=null,d(m,z)));break;case 22:Y=m.memoizedState!==null;var St=C!==null&&C.memoizedState!==null,Qt=qc,mn=uo;if(qc=Qt||Y,uo=mn||St,v(x,m),uo=mn,qc=Qt,M(m),z&8192)e:for(x=m.stateNode,x._visibility=Y?x._visibility&-2:x._visibility|1,Y&&(C===null||St||qc||uo||q(m)),C=null,x=m;;){if(x.tag===5||x.tag===26){if(C===null){St=C=x;try{if(ne=St.stateNode,Y)Te=ne.style,typeof Te.setProperty=="function"?Te.setProperty("display","none","important"):Te.display="none";else{Xe=St.stateNode;var wn=St.memoizedProps.style,en=wn!=null&&wn.hasOwnProperty("display")?wn.display:null;Xe.style.display=en==null||typeof en=="boolean"?"":(""+en).trim()}}catch(cr){Ai(St,St.return,cr)}}}else if(x.tag===6){if(C===null){St=x;try{St.stateNode.nodeValue=Y?"":St.memoizedProps}catch(cr){Ai(St,St.return,cr)}}}else if(x.tag===18){if(C===null){St=x;try{var ln=St.stateNode;Y?Om(ln,!0):Om(St.stateNode,!1)}catch(cr){Ai(St,St.return,cr)}}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===m)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break e;for(;x.sibling===null;){if(x.return===null||x.return===m)break e;C===x&&(C=null),x=x.return}C===x&&(C=null),x.sibling.return=x.return,x=x.sibling}z&4&&(z=m.updateQueue,z!==null&&(C=z.retryQueue,C!==null&&(z.retryQueue=null,d(m,C))));break;case 19:v(x,m),M(m),z&4&&(z=m.updateQueue,z!==null&&(m.updateQueue=null,d(m,z)));break;case 30:break;case 21:break;default:v(x,m),M(m)}}function M(m){var x=m.flags;if(x&2){try{for(var C,z=m.return;z!==null;){if(Q0(z)){C=z;break}z=z.return}if(C==null)throw Error(r(160));switch(C.tag){case 27:var Y=C.stateNode,ne=uv(m);cv(m,ne,Y);break;case 5:var Te=C.stateNode;C.flags&32&&(Ac(Te,""),C.flags&=-33);var Xe=uv(m);cv(m,Xe,Te);break;case 3:case 4:var St=C.stateNode.containerInfo,Qt=uv(m);J0(m,Qt,St);break;default:throw Error(r(161))}}catch(mn){Ai(m,m.return,mn)}m.flags&=-3}x&4096&&(m.flags&=-4097)}function R(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var x=m;R(x),x.tag===5&&x.flags&1024&&x.stateNode.reset(),m=m.sibling}}function F(m,x){if(x.subtreeFlags&8772)for(x=x.child;x!==null;)Dl(m,x.alternate,x),x=x.sibling}function q(m){for(m=m.child;m!==null;){var x=m;switch(x.tag){case 0:case 11:case 14:case 15:Lf(4,x,x.return),q(x);break;case 1:nc(x,x.return);var C=x.stateNode;typeof C.componentWillUnmount=="function"&&Z0(x,x.return,C),q(x);break;case 27:cb(x.stateNode);case 26:case 5:nc(x,x.return),q(x);break;case 22:x.memoizedState===null&&q(x);break;case 30:q(x);break;default:q(x)}m=m.sibling}}function H(m,x,C){for(C=C&&(x.subtreeFlags&8772)!==0,x=x.child;x!==null;){var z=x.alternate,Y=m,ne=x,Te=ne.flags;switch(ne.tag){case 0:case 11:case 15:H(Y,ne,C),kf(4,ne);break;case 1:if(H(Y,ne,C),z=ne,Y=z.stateNode,typeof Y.componentDidMount=="function")try{Y.componentDidMount()}catch(Qt){Ai(z,z.return,Qt)}if(z=ne,Y=z.updateQueue,Y!==null){var Xe=z.stateNode;try{var St=Y.shared.hiddenCallbacks;if(St!==null)for(Y.shared.hiddenCallbacks=null,Y=0;Y<St.length;Y++)Pd(St[Y],Xe)}catch(Qt){Ai(z,z.return,Qt)}}C&&Te&64&&lv(ne),vm(ne,ne.return);break;case 27:bm(ne);case 26:case 5:H(Y,ne,C),C&&z===null&&Te&4&&K0(ne),vm(ne,ne.return);break;case 12:H(Y,ne,C);break;case 31:H(Y,ne,C),C&&Te&4&&_T(Y,ne);break;case 13:H(Y,ne,C),C&&Te&4&&_(Y,ne);break;case 22:ne.memoizedState===null&&H(Y,ne,C),vm(ne,ne.return);break;case 30:break;default:H(Y,ne,C)}x=x.sibling}}function re(m,x){var C=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),m=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(m=x.memoizedState.cachePool.pool),m!==C&&(m!=null&&m.refCount++,C!=null&&Ef(C))}function ee(m,x){m=null,x.alternate!==null&&(m=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==m&&(x.refCount++,m!=null&&Ef(m))}function oe(m,x,C,z){if(x.subtreeFlags&10256)for(x=x.child;x!==null;)he(m,x,C,z),x=x.sibling}function he(m,x,C,z){var Y=x.flags;switch(x.tag){case 0:case 11:case 15:oe(m,x,C,z),Y&2048&&kf(9,x);break;case 1:oe(m,x,C,z);break;case 3:oe(m,x,C,z),Y&2048&&(m=null,x.alternate!==null&&(m=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==m&&(x.refCount++,m!=null&&Ef(m)));break;case 12:if(Y&2048){oe(m,x,C,z),m=x.stateNode;try{var ne=x.memoizedProps,Te=ne.id,Xe=ne.onPostCommit;typeof Xe=="function"&&Xe(Te,x.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(St){Ai(x,x.return,St)}}else oe(m,x,C,z);break;case 31:oe(m,x,C,z);break;case 13:oe(m,x,C,z);break;case 23:break;case 22:ne=x.stateNode,Te=x.alternate,x.memoizedState!==null?ne._visibility&2?oe(m,x,C,z):de(m,x):ne._visibility&2?oe(m,x,C,z):(ne._visibility|=2,ce(m,x,C,z,(x.subtreeFlags&10256)!==0||!1)),Y&2048&&re(Te,x);break;case 24:oe(m,x,C,z),Y&2048&&ee(x.alternate,x);break;default:oe(m,x,C,z)}}function ce(m,x,C,z,Y){for(Y=Y&&((x.subtreeFlags&10256)!==0||!1),x=x.child;x!==null;){var ne=m,Te=x,Xe=C,St=z,Qt=Te.flags;switch(Te.tag){case 0:case 11:case 15:ce(ne,Te,Xe,St,Y),kf(8,Te);break;case 23:break;case 22:var mn=Te.stateNode;Te.memoizedState!==null?mn._visibility&2?ce(ne,Te,Xe,St,Y):de(ne,Te):(mn._visibility|=2,ce(ne,Te,Xe,St,Y)),Y&&Qt&2048&&re(Te.alternate,Te);break;case 24:ce(ne,Te,Xe,St,Y),Y&&Qt&2048&&ee(Te.alternate,Te);break;default:ce(ne,Te,Xe,St,Y)}x=x.sibling}}function de(m,x){if(x.subtreeFlags&10256)for(x=x.child;x!==null;){var C=m,z=x,Y=z.flags;switch(z.tag){case 22:de(C,z),Y&2048&&re(z.alternate,z);break;case 24:de(C,z),Y&2048&&ee(z.alternate,z);break;default:de(C,z)}x=x.sibling}}var _e=8192;function Me(m,x,C){if(m.subtreeFlags&_e)for(m=m.child;m!==null;)Ce(m,x,C),m=m.sibling}function Ce(m,x,C){switch(m.tag){case 26:Me(m,x,C),m.flags&_e&&m.memoizedState!==null&&Zl(C,T,m.memoizedState,m.memoizedProps);break;case 5:Me(m,x,C);break;case 3:case 4:var z=T;T=fb(m.stateNode.containerInfo),Me(m,x,C),T=z;break;case 22:m.memoizedState===null&&(z=m.alternate,z!==null&&z.memoizedState!==null?(z=_e,_e=16777216,Me(m,x,C),_e=z):Me(m,x,C));break;default:Me(m,x,C)}}function Ae(m){var x=m.alternate;if(x!==null&&(m=x.child,m!==null)){x.child=null;do x=m.sibling,m.sibling=null,m=x;while(m!==null)}}function We(m){var x=m.deletions;if((m.flags&16)!==0){if(x!==null)for(var C=0;C<x.length;C++){var z=x[C];fa=z,Ne(z,m)}Ae(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)$e(m),m=m.sibling}function $e(m){switch(m.tag){case 0:case 11:case 15:We(m),m.flags&2048&&Lf(9,m,m.return);break;case 3:We(m);break;case 12:We(m);break;case 22:var x=m.stateNode;m.memoizedState!==null&&x._visibility&2&&(m.return===null||m.return.tag!==13)?(x._visibility&=-3,Ge(m)):We(m);break;default:We(m)}}function Ge(m){var x=m.deletions;if((m.flags&16)!==0){if(x!==null)for(var C=0;C<x.length;C++){var z=x[C];fa=z,Ne(z,m)}Ae(m)}for(m=m.child;m!==null;){switch(x=m,x.tag){case 0:case 11:case 15:Lf(8,x,x.return),Ge(x);break;case 22:C=x.stateNode,C._visibility&2&&(C._visibility&=-3,Ge(x));break;default:Ge(x)}m=m.sibling}}function Ne(m,x){for(;fa!==null;){var C=fa;switch(C.tag){case 0:case 11:case 15:Lf(8,C,x);break;case 23:case 22:if(C.memoizedState!==null&&C.memoizedState.cachePool!==null){var z=C.memoizedState.cachePool.pool;z!=null&&z.refCount++}break;case 24:Ef(C.memoizedState.cache)}if(z=C.child,z!==null)z.return=C,fa=z;else e:for(C=m;fa!==null;){z=fa;var Y=z.sibling,ne=z.return;if(xm(z),z===C){fa=null;break e}if(Y!==null){Y.return=ne,fa=Y;break e}fa=ne}}}var Re={getCacheForType:function(m){var x=ls(Yi),C=x.data.get(m);return C===void 0&&(C=m(),x.data.set(m,C)),C},cacheSignal:function(){return ls(Yi).controller.signal}},Je=typeof WeakMap=="function"?WeakMap:Map,nt=0,st=null,dt=null,ft=0,wt=0,It=null,pt=!1,et=!1,At=!1,gt=0,Dt=0,qt=0,tn=0,Wt=0,Ht=0,xn=0,yn=null,rn=null,_n=!1,In=0,Un=0,Qn=1/0,yr=null,$n=null,Jn=0,Yn=null,jr=null,Mr=0,ei=0,wr=null,er=null,Rr=0,Pi=null;function ti(){return(nt&2)!==0&&ft!==0?ft&-ft:Ee.T!==null?nb():me()}function qr(){if(Ht===0)if((ft&536870912)===0||Di){var m=Nu;Nu<<=1,(Nu&3932160)===0&&(Nu=262144),Ht=m}else Ht=536870912;return m=Es.current,m!==null&&(m.flags|=32),Ht}function Kn(m,x,C){(m===st&&(wt===2||wt===9)||m.cancelPendingCommit!==null)&&(Uo(m,0),ai(m,ft,Ht,!1)),Sc(m,C),((nt&2)===0||m!==st)&&(m===st&&((nt&2)===0&&(tn|=C),Dt===4&&ai(m,ft,Ht,!1)),Dh(m))}function tr(m,x,C){if((nt&6)!==0)throw Error(r(327));var z=!C&&(x&127)===0&&(x&m.expiredLanes)===0||ah(m,x),Y=z?$i(m,x):Il(m,x,!0),ne=z;do{if(Y===0){et&&!z&&ai(m,x,0,!1);break}else{if(C=m.current.alternate,ne&&!Ji(C)){Y=Il(m,x,!1),ne=!1;continue}if(Y===2){if(ne=x,m.errorRecoveryDisabledLanes&ne)var Te=0;else Te=m.pendingLanes&-536870913,Te=Te!==0?Te:Te&536870912?536870912:0;if(Te!==0){x=Te;e:{var Xe=m;Y=yn;var St=Xe.current.memoizedState.isDehydrated;if(St&&(Uo(Xe,Te).flags|=256),Te=Il(Xe,Te,!1),Te!==2){if(At&&!St){Xe.errorRecoveryDisabledLanes|=ne,tn|=ne,Y=4;break e}ne=rn,rn=Y,ne!==null&&(rn===null?rn=ne:rn.push.apply(rn,ne))}Y=Te}if(ne=!1,Y!==2)continue}}if(Y===1){Uo(m,0),ai(m,x,0,!0);break}e:{switch(z=m,ne=Y,ne){case 0:case 1:throw Error(r(345));case 4:if((x&4194048)!==x)break;case 6:ai(z,x,Ht,!pt);break e;case 2:rn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((x&62914560)===x&&(Y=In+300-Fr(),10<Y)){if(ai(z,x,Ht,!pt),oo(z,0,!0)!==0)break e;Mr=x,z.timeoutHandle=dv(yi.bind(null,z,C,rn,yr,_n,x,Ht,tn,xn,pt,ne,"Throttled",-0,0),Y);break e}yi(z,C,rn,yr,_n,x,Ht,tn,xn,pt,ne,null,-0,0)}}break}while(!0);Dh(m)}function yi(m,x,C,z,Y,ne,Te,Xe,St,Qt,mn,wn,en,ln){if(m.timeoutHandle=-1,wn=x.subtreeFlags,wn&8192||(wn&16785408)===16785408){wn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xo},Ce(x,ne,wn);var cr=(ne&62914560)===ne?In-Fr():(ne&4194048)===ne?Un-Fr():0;if(cr=oC(wn,cr),cr!==null){Mr=ne,m.cancelPendingCommit=cr(wm.bind(null,m,x,ne,C,z,Y,Te,Xe,St,mn,wn,null,en,ln)),ai(m,ne,Te,!Qt);return}}wm(m,x,ne,C,z,Y,Te,Xe,St)}function Ji(m){for(var x=m;;){var C=x.tag;if((C===0||C===11||C===15)&&x.flags&16384&&(C=x.updateQueue,C!==null&&(C=C.stores,C!==null)))for(var z=0;z<C.length;z++){var Y=C[z],ne=Y.getSnapshot;Y=Y.value;try{if(!il(ne(),Y))return!1}catch{return!1}}if(C=x.child,x.subtreeFlags&16384&&C!==null)C.return=x,x=C;else{if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function ai(m,x,C,z){x&=~Wt,x&=~tn,m.suspendedLanes|=x,m.pingedLanes&=~x,z&&(m.warmLanes|=x),z=m.expirationTimes;for(var Y=x;0<Y;){var ne=31-Ri(Y),Te=1<<ne;z[ne]=-1,Y&=~Te}C!==0&&Tc(m,C,x)}function _i(){return(nt&6)===0?(Em(0),!1):!0}function cs(){if(dt!==null){if(wt===0)var m=dt.return;else m=dt,kc=hu=null,Gg(m),yh=null,im=0,m=dt;for(;m!==null;)X0(m.alternate,m),m=m.return;dt=null}}function Uo(m,x){var C=m.timeoutHandle;C!==-1&&(m.timeoutHandle=-1,Uk(C)),C=m.cancelPendingCommit,C!==null&&(m.cancelPendingCommit=null,C()),Mr=0,cs(),st=m,dt=C=ol(m.current,null),ft=x,wt=0,It=null,pt=!1,et=ah(m,x),At=!1,xn=Ht=Wt=tn=qt=Dt=0,rn=yn=null,_n=!1,(x&8)!==0&&(x|=x&32);var z=m.entangledLanes;if(z!==0)for(m=m.entanglements,z&=x;0<z;){var Y=31-Ri(z),ne=1<<Y;x|=m[Y],z&=~ne}return gt=x,Sd(),C}function co(m,x){Kt=null,Ee.H=Ku,x===rm||x===Bg?(x=D0(),wt=3):x===M0?(x=D0(),wt=4):wt=x===iy?8:x!==null&&typeof x=="object"&&typeof x.then=="function"?6:1,It=x,dt===null&&(Dt=1,ry(m,Wo(x,m.current)))}function Hr(){var m=Es.current;return m===null?!0:(ft&4194048)===ft?us===null:(ft&62914560)===ft||(ft&536870912)!==0?m===us:!1}function ul(){var m=Ee.H;return Ee.H=Ku,m===null?Ku:m}function $o(){var m=Ee.A;return Ee.A=Re,m}function Zo(){Dt=4,pt||(ft&4194048)!==ft&&Es.current!==null||(et=!0),(qt&134217727)===0&&(tn&134217727)===0||st===null||ai(st,ft,Ht,!1)}function Il(m,x,C){var z=nt;nt|=2;var Y=ul(),ne=$o();(st!==m||ft!==x)&&(yr=null,Uo(m,x)),x=!1;var Te=Dt;e:do try{if(wt!==0&&dt!==null){var Xe=dt,St=It;switch(wt){case 8:cs(),Te=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(x=!0);var Qt=wt;if(wt=0,It=null,no(m,Xe,St,Qt),C&&et){Te=0;break e}break;default:Qt=wt,wt=0,It=null,no(m,Xe,St,Qt)}}qs(),Te=Dt;break}catch(mn){co(m,mn)}while(!0);return x&&m.shellSuspendCounter++,kc=hu=null,nt=z,Ee.H=Y,Ee.A=ne,dt===null&&(st=null,ft=0,Sd()),Te}function qs(){for(;dt!==null;)Si(dt)}function $i(m,x){var C=nt;nt|=2;var z=ul(),Y=$o();st!==m||ft!==x?(yr=null,Qn=Fr()+500,Uo(m,x)):et=ah(m,x);e:do try{if(wt!==0&&dt!==null){x=dt;var ne=It;t:switch(wt){case 1:wt=0,It=null,no(m,x,ne,1);break;case 2:case 9:if(Ug(ne)){wt=0,It=null,Ia(x);break}x=function(){wt!==2&&wt!==9||st!==m||(wt=7),Dh(m)},ne.then(x,x);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:Ug(ne)?(wt=0,It=null,Ia(x)):(wt=0,It=null,no(m,x,ne,7));break;case 5:var Te=null;switch(dt.tag){case 26:Te=dt.memoizedState;case 5:case 27:var Xe=dt;if(Te?BT(Te):Xe.stateNode.complete){wt=0,It=null;var St=Xe.sibling;if(St!==null)dt=St;else{var Qt=Xe.return;Qt!==null?(dt=Qt,Wi(Qt)):dt=null}break t}}wt=0,It=null,no(m,x,ne,5);break;case 6:wt=0,It=null,no(m,x,ne,6);break;case 8:cs(),Dt=6;break e;default:throw Error(r(462))}}ba();break}catch(mn){co(m,mn)}while(!0);return kc=hu=null,Ee.H=z,Ee.A=Y,nt=C,dt!==null?0:(st=null,ft=0,Sd(),Dt)}function ba(){for(;dt!==null&&!Tr();)Si(dt)}function Si(m){var x=ly(m.alternate,m,gt);m.memoizedProps=m.pendingProps,x===null?Wi(m):dt=x}function Ia(m){var x=m,C=x.alternate;switch(x.tag){case 15:case 0:x=ay(C,x,x.pendingProps,x.type,void 0,ft);break;case 11:x=ay(C,x,x.pendingProps,x.type.render,x.ref,ft);break;case 5:Gg(x);default:X0(C,x),x=dt=bf(x,gt),x=ly(C,x,gt)}m.memoizedProps=m.pendingProps,x===null?Wi(m):dt=x}function no(m,x,C,z){kc=hu=null,Gg(x),yh=null,im=0;var Y=x.return;try{if(hm(m,Y,x,C,ft)){Dt=1,ry(m,Wo(C,m.current)),dt=null;return}}catch(ne){if(Y!==null)throw dt=Y,ne;Dt=1,ry(m,Wo(C,m.current)),dt=null;return}x.flags&32768?(Di||z===1?m=!0:et||(ft&536870912)!==0?m=!1:(pt=m=!0,(z===2||z===9||z===3||z===6)&&(z=Es.current,z!==null&&z.tag===13&&(z.flags|=16384))),cl(x,m)):Wi(x)}function Wi(m){var x=m;do{if((x.flags&32768)!==0){cl(x,pt);return}m=x.return;var C=cy(x.alternate,x,gt);if(C!==null){dt=C;return}if(x=x.sibling,x!==null){dt=x;return}dt=x=m}while(x!==null);Dt===0&&(Dt=5)}function cl(m,x){do{var C=m1(m.alternate,m);if(C!==null){C.flags&=32767,dt=C;return}if(C=m.return,C!==null&&(C.flags|=32768,C.subtreeFlags=0,C.deletions=null),!x&&(m=m.sibling,m!==null)){dt=m;return}dt=m=C}while(m!==null);Dt=6,dt=null}function wm(m,x,C,z,Y,ne,Te,Xe,St){m.cancelPendingCommit=null;do Xl();while(Jn!==0);if((nt&6)!==0)throw Error(r(327));if(x!==null){if(x===m.current)throw Error(r(177));if(ne=x.lanes|x.childLanes,ne|=Cg,Vt(m,C,ne,Te,Xe,St),m===st&&(dt=st=null,ft=0),jr=x,Yn=m,Mr=C,ei=ne,wr=Y,er=z,(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,qO(ur,function(){return ic(),null})):(m.callbackNode=null,m.callbackPriority=0),z=(x.flags&13878)!==0,(x.subtreeFlags&13878)!==0||z){z=Ee.T,Ee.T=null,Y=Fe.p,Fe.p=2,Te=nt,nt|=4;try{Ua(m,x,C)}finally{nt=Te,Fe.p=Y,Ee.T=z}}Jn=1,rc(),Zd(),Kd()}}function rc(){if(Jn===1){Jn=0;var m=Yn,x=jr,C=(x.flags&13878)!==0;if((x.subtreeFlags&13878)!==0||C){C=Ee.T,Ee.T=null;var z=Fe.p;Fe.p=2;var Y=nt;nt|=4;try{O(x,m);var ne=x1,Te=t1(m.containerInfo),Xe=ne.focusedElem,St=ne.selectionRange;if(Te!==Xe&&Xe&&Xe.ownerDocument&&gf(Xe.ownerDocument.documentElement,Xe)){if(St!==null&&xd(Xe)){var Qt=St.start,mn=St.end;if(mn===void 0&&(mn=Qt),"selectionStart"in Xe)Xe.selectionStart=Qt,Xe.selectionEnd=Math.min(mn,Xe.value.length);else{var wn=Xe.ownerDocument||document,en=wn&&wn.defaultView||window;if(en.getSelection){var ln=en.getSelection(),cr=Xe.textContent.length,Sr=Math.min(St.start,cr),ha=St.end===void 0?Sr:Math.min(St.end,cr);!ln.extend&&Sr>ha&&(Te=ha,ha=Sr,Sr=Te);var Bt=$l(Xe,Sr),Ot=$l(Xe,ha);if(Bt&&Ot&&(ln.rangeCount!==1||ln.anchorNode!==Bt.node||ln.anchorOffset!==Bt.offset||ln.focusNode!==Ot.node||ln.focusOffset!==Ot.offset)){var Zt=wn.createRange();Zt.setStart(Bt.node,Bt.offset),ln.removeAllRanges(),Sr>ha?(ln.addRange(Zt),ln.extend(Ot.node,Ot.offset)):(Zt.setEnd(Ot.node,Ot.offset),ln.addRange(Zt))}}}}for(wn=[],ln=Xe;ln=ln.parentNode;)ln.nodeType===1&&wn.push({element:ln,left:ln.scrollLeft,top:ln.scrollTop});for(typeof Xe.focus=="function"&&Xe.focus(),Xe=0;Xe<wn.length;Xe++){var bn=wn[Xe];bn.element.scrollLeft=bn.left,bn.element.scrollTop=bn.top}}gb=!!b1,x1=b1=null}finally{nt=Y,Fe.p=z,Ee.T=C}}m.current=x,Jn=2}}function Zd(){if(Jn===2){Jn=0;var m=Yn,x=jr,C=(x.flags&8772)!==0;if((x.subtreeFlags&8772)!==0||C){C=Ee.T,Ee.T=null;var z=Fe.p;Fe.p=2;var Y=nt;nt|=4;try{Dl(m,x.alternate,x)}finally{nt=Y,Fe.p=z,Ee.T=C}}Jn=3}}function Kd(){if(Jn===4||Jn===3){Jn=0,pi();var m=Yn,x=jr,C=Mr,z=er;(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?Jn=5:(Jn=0,jr=Yn=null,fl(m,m.pendingLanes));var Y=m.pendingLanes;if(Y===0&&($n=null),ut(C),x=x.stateNode,Aa&&typeof Aa.onCommitFiberRoot=="function")try{Aa.onCommitFiberRoot(Yo,x,void 0,(x.current.flags&128)===128)}catch{}if(z!==null){x=Ee.T,Y=Fe.p,Fe.p=2,Ee.T=null;try{for(var ne=m.onRecoverableError,Te=0;Te<z.length;Te++){var Xe=z[Te];ne(Xe.value,{componentStack:Xe.stack})}}finally{Ee.T=x,Fe.p=Y}}(Mr&3)!==0&&Xl(),Dh(m),Y=m.pendingLanes,(C&261930)!==0&&(Y&42)!==0?m===Pi?Rr++:(Rr=0,Pi=m):Rr=0,Em(0)}}function fl(m,x){(m.pooledCacheLanes&=x)===0&&(x=m.pooledCache,x!=null&&(m.pooledCache=null,Ef(x)))}function Xl(){return rc(),Zd(),Kd(),ic()}function ic(){if(Jn!==5)return!1;var m=Yn,x=ei;ei=0;var C=ut(Mr),z=Ee.T,Y=Fe.p;try{Fe.p=32>C?32:C,Ee.T=null,C=wr,wr=null;var ne=Yn,Te=Mr;if(Jn=0,jr=Yn=null,Mr=0,(nt&6)!==0)throw Error(r(331));var Xe=nt;if(nt|=4,$e(ne.current),he(ne,ne.current,Te,C),nt=Xe,Em(0,!1),Aa&&typeof Aa.onPostCommitFiberRoot=="function")try{Aa.onPostCommitFiberRoot(Yo,ne)}catch{}return!0}finally{Fe.p=Y,Ee.T=z,fl(m,x)}}function Pl(m,x,C){x=Wo(C,x),x=Qu(m.stateNode,x,2),m=Mf(m,x,2),m!==null&&(Sc(m,2),Dh(m))}function Ai(m,x,C){if(m.tag===3)Pl(m,m,C);else for(;x!==null;){if(x.tag===3){Pl(x,m,C);break}else if(x.tag===1){var z=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&($n===null||!$n.has(z))){m=Wo(C,m),C=$c(2),z=Mf(x,C,2),z!==null&&(To(C,z,x,m),Sc(z,2),Dh(z));break}}x=x.return}}function Nf(m,x,C){var z=m.pingCache;if(z===null){z=m.pingCache=new Je;var Y=new Set;z.set(x,Y)}else Y=z.get(x),Y===void 0&&(Y=new Set,z.set(x,Y));Y.has(C)||(At=!0,Y.add(C),m=fv.bind(null,m,x,C),x.then(m,m))}function fv(m,x,C){var z=m.pingCache;z!==null&&z.delete(x),m.pingedLanes|=m.suspendedLanes&C,m.warmLanes&=~C,st===m&&(ft&C)===C&&(Dt===4||Dt===3&&(ft&62914560)===ft&&300>Fr()-In?(nt&2)===0&&Uo(m,0):Wt|=C,xn===ft&&(xn=0)),Dh(m)}function vT(m,x){x===0&&(x=wl()),m=Jt(m,x),m!==null&&(Sc(m,x),Dh(m))}function $O(m){var x=m.memoizedState,C=0;x!==null&&(C=x.retryLane),vT(m,C)}function VO(m,x){var C=0;switch(m.tag){case 31:case 13:var z=m.stateNode,Y=m.memoizedState;Y!==null&&(C=Y.retryLane);break;case 19:z=m.stateNode;break;case 22:z=m.stateNode._retryCache;break;default:throw Error(r(314))}z!==null&&z.delete(x),vT(m,C)}function qO(m,x){return Pr(m,x)}var eb=null,Hc=null,g1=!1,Ko=!1,Sm=!1,Tm=0;function Dh(m){m!==Hc&&m.next===null&&(Hc===null?eb=Hc=m:Hc=Hc.next=m),Ko=!0,g1||(g1=!0,Fk())}function Em(m,x){if(!Sm&&Ko){Sm=!0;do for(var C=!1,z=eb;z!==null;){if(m!==0){var Y=z.pendingLanes;if(Y===0)var ne=0;else{var Te=z.suspendedLanes,Xe=z.pingedLanes;ne=(1<<31-Ri(42|m)+1)-1,ne&=Y&~(Te&~Xe),ne=ne&201326741?ne&201326741|1:ne?ne|2:0}ne!==0&&(C=!0,xT(z,ne))}else ne=ft,ne=oo(z,z===st?ne:0,z.cancelPendingCommit!==null||z.timeoutHandle!==-1),(ne&3)===0||ah(z,ne)||(C=!0,xT(z,ne));z=z.next}while(C);Sm=!1}}function Nk(){bT()}function bT(){Ko=g1=!1;var m=0;Tm!==0&&JO()&&(m=Tm);for(var x=Fr(),C=null,z=eb;z!==null;){var Y=z.next,ne=tb(z,x);ne===0?(z.next=null,C===null?eb=Y:C.next=Y,Y===null&&(Hc=C)):(C=z,(m!==0||(ne&3)!==0)&&(Ko=!0)),z=Y}Jn!==0&&Jn!==5||Em(m),Tm!==0&&(Tm=0)}function tb(m,x){for(var C=m.suspendedLanes,z=m.pingedLanes,Y=m.expirationTimes,ne=m.pendingLanes&-62914561;0<ne;){var Te=31-Ri(ne),Xe=1<<Te,St=Y[Te];St===-1?((Xe&C)===0||(Xe&z)!==0)&&(Y[Te]=Pp(Xe,x)):St<=x&&(m.expiredLanes|=Xe),ne&=~Xe}if(x=st,C=ft,C=oo(m,m===x?C:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),z=m.callbackNode,C===0||m===x&&(wt===2||wt===9)||m.cancelPendingCommit!==null)return z!==null&&z!==null&&Er(z),m.callbackNode=null,m.callbackPriority=0;if((C&3)===0||ah(m,C)){if(x=C&-C,x===m.callbackPriority)return x;switch(z!==null&&Er(z),ut(C)){case 2:case 8:C=En;break;case 32:C=ur;break;case 268435456:C=Br;break;default:C=ur}return z=HO.bind(null,m),C=Pr(C,z),m.callbackPriority=x,m.callbackNode=C,x}return z!==null&&z!==null&&Er(z),m.callbackPriority=2,m.callbackNode=null,2}function HO(m,x){if(Jn!==0&&Jn!==5)return m.callbackNode=null,m.callbackPriority=0,null;var C=m.callbackNode;if(Xl()&&m.callbackNode!==C)return null;var z=ft;return z=oo(m,m===st?z:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),z===0?null:(tr(m,z,x),tb(m,Fr()),m.callbackNode!=null&&m.callbackNode===C?HO.bind(null,m):null)}function xT(m,x){if(Xl())return null;tr(m,x,!0)}function Fk(){$k(function(){(nt&6)!==0?Pr($t,Nk):bT()})}function nb(){if(Tm===0){var m=Af;m===0&&(m=zu,zu<<=1,(zu&261888)===0&&(zu=256)),Tm=m}return Tm}function Ff(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:au(""+m)}function Ih(m,x){var C=x.ownerDocument.createElement("input");return C.name=x.name,C.value=x.value,m.id&&C.setAttribute("form",m.id),x.parentNode.insertBefore(C,x),m=new FormData(m),C.parentNode.removeChild(C),m}function GO(m,x,C,z,Y){if(x==="submit"&&C&&C.stateNode===Y){var ne=Ff((Y[ze]||null).action),Te=z.submitter;Te&&(x=(x=Te[ze]||null)?Ff(x.formAction):Te.getAttribute("formAction"),x!==null&&(ne=x,Te=null));var Xe=new lh("action","action",null,z,Y);m.push({event:Xe,listeners:[{instance:null,listener:function(){if(z.defaultPrevented){if(Tm!==0){var St=Te?Ih(Y,Te):new FormData(Y);Kg(C,{pending:!0,data:St,method:Y.method,action:ne},null,St)}}else typeof ne=="function"&&(Xe.preventDefault(),St=Te?Ih(Y,Te):new FormData(Y),Kg(C,{pending:!0,data:St,method:Y.method,action:ne},ne,St))},currentTarget:Y}]})}}for(var y1=0;y1<Us.length;y1++){var hv=Us[y1],wT=hv.toLowerCase(),rb=hv[0].toUpperCase()+hv.slice(1);ql(wT,"on"+rb)}ql(P_,"onAnimationEnd"),ql(n1,"onAnimationIteration"),ql(Mc,"onAnimationStart"),ql("dblclick","onDoubleClick"),ql("focusin","onFocus"),ql("focusout","onBlur"),ql(r1,"onTransitionRun"),ql(i1,"onTransitionStart"),ql(R_,"onTransitionCancel"),ql(k_,"onTransitionEnd"),zi("onMouseEnter",["mouseout","mouseover"]),zi("onMouseLeave",["mouseout","mouseover"]),zi("onPointerEnter",["pointerout","pointerover"]),zi("onPointerLeave",["pointerout","pointerover"]),oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oa("onBeforeInput",["compositionend","keypress","textInput","paste"]),oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Am="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Am));function ib(m,x){x=(x&4)!==0;for(var C=0;C<m.length;C++){var z=m[C],Y=z.event;z=z.listeners;e:{var ne=void 0;if(x)for(var Te=z.length-1;0<=Te;Te--){var Xe=z[Te],St=Xe.instance,Qt=Xe.currentTarget;if(Xe=Xe.listener,St!==ne&&Y.isPropagationStopped())break e;ne=Xe,Y.currentTarget=Qt;try{ne(Y)}catch(mn){Hp(mn)}Y.currentTarget=null,ne=St}else for(Te=0;Te<z.length;Te++){if(Xe=z[Te],St=Xe.instance,Qt=Xe.currentTarget,Xe=Xe.listener,St!==ne&&Y.isPropagationStopped())break e;ne=Xe,Y.currentTarget=Qt;try{ne(Y)}catch(mn){Hp(mn)}Y.currentTarget=null,ne=St}}}}function Oi(m,x){var C=x[_t];C===void 0&&(C=x[_t]=new Set);var z=m+"__bubble";C.has(z)||(Qd(x,m,2,!1),C.add(z))}function ab(m,x,C){var z=0;x&&(z|=4),Qd(C,m,z,x)}var ob="_reactListening"+Math.random().toString(36).slice(2);function _1(m){if(!m[ob]){m[ob]=!0,Hn.forEach(function(C){C!=="selectionchange"&&(YO.has(C)||ab(C,!1,m),ab(C,!0,m))});var x=m.nodeType===9?m:m.ownerDocument;x===null||x[ob]||(x[ob]=!0,ab("selectionchange",!1,x))}}function Qd(m,x,C,z){switch(fC(x)){case 2:var Y=O1;break;case 8:Y=cC;break;default:Y=yv}C=Y.bind(null,x,C,m),Y=void 0,!md||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(Y=!0),z?Y!==void 0?m.addEventListener(x,C,{capture:!0,passive:Y}):m.addEventListener(x,C,!0):Y!==void 0?m.addEventListener(x,C,{passive:Y}):m.addEventListener(x,C,!1)}function v1(m,x,C,z,Y){var ne=z;if((x&1)===0&&(x&2)===0&&z!==null)e:for(;;){if(z===null)return;var Te=z.tag;if(Te===3||Te===4){var Xe=z.stateNode.containerInfo;if(Xe===Y)break;if(Te===4)for(Te=z.return;Te!==null;){var St=Te.tag;if((St===3||St===4)&&Te.stateNode.containerInfo===Y)return;Te=Te.return}for(;Xe!==null;){if(Te=Dn(Xe),Te===null)return;if(St=Te.tag,St===5||St===6||St===26||St===27){z=ne=Te;continue e}Xe=Xe.parentNode}}z=z.return}y0(function(){var Qt=ne,mn=oh(C),wn=[];e:{var en=_f.get(m);if(en!==void 0){var ln=lh,cr=m;switch(m){case"keypress":if(Cr(C)===0)break e;case"keydown":case"keyup":ln=tl;break;case"focusin":cr="focus",ln=ws;break;case"focusout":cr="blur",ln=ws;break;case"beforeblur":case"afterblur":ln=ws;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ln=Fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ln=yd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ln=Bs;break;case P_:case n1:case Mc:ln=E_;break;case k_:ln=ii;break;case"scroll":case"scrollend":ln=wg;break;case"wheel":ln=jp;break;case"copy":case"cut":case"paste":ln=Qr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ln=Yr;break;case"toggle":case"beforetoggle":ln=Ss}var Sr=(x&4)!==0,ha=!Sr&&(m==="scroll"||m==="scrollend"),Bt=Sr?en!==null?en+"Capture":null:en;Sr=[];for(var Ot=Qt,Zt;Ot!==null;){var bn=Ot;if(Zt=bn.stateNode,bn=bn.tag,bn!==5&&bn!==26&&bn!==27||Zt===null||Bt===null||(bn=zp(Ot,Bt),bn!=null&&Sr.push(fy(Ot,bn,Zt))),ha)break;Ot=Ot.return}0<Sr.length&&(en=new ln(en,cr,null,C,mn),wn.push({event:en,listeners:Sr}))}}if((x&7)===0){e:{if(en=m==="mouseover"||m==="pointerover",ln=m==="mouseout"||m==="pointerout",en&&C!==ou&&(cr=C.relatedTarget||C.fromElement)&&(Dn(cr)||cr[ot]))break e;if((ln||en)&&(en=mn.window===mn?mn:(en=mn.ownerDocument)?en.defaultView||en.parentWindow:window,ln?(cr=C.relatedTarget||C.toElement,ln=Qt,cr=cr?Dn(cr):null,cr!==null&&(ha=s(cr),Sr=cr.tag,cr!==ha||Sr!==5&&Sr!==27&&Sr!==6)&&(cr=null)):(ln=null,cr=Qt),ln!==cr)){if(Sr=Fp,bn="onMouseLeave",Bt="onMouseEnter",Ot="mouse",(m==="pointerout"||m==="pointerover")&&(Sr=Yr,bn="onPointerLeave",Bt="onPointerEnter",Ot="pointer"),ha=ln==null?en:Zn(ln),Zt=cr==null?en:Zn(cr),en=new Sr(bn,Ot+"leave",ln,C,mn),en.target=ha,en.relatedTarget=Zt,bn=null,Dn(mn)===Qt&&(Sr=new Sr(Bt,Ot+"enter",cr,C,mn),Sr.target=Zt,Sr.relatedTarget=ha,bn=Sr),ha=bn,ln&&cr)t:{for(Sr=Bk,Bt=ln,Ot=cr,Zt=0,bn=Bt;bn;bn=Sr(bn))Zt++;bn=0;for(var Dr=Ot;Dr;Dr=Sr(Dr))bn++;for(;0<Zt-bn;)Bt=Sr(Bt),Zt--;for(;0<bn-Zt;)Ot=Sr(Ot),bn--;for(;Zt--;){if(Bt===Ot||Ot!==null&&Bt===Ot.alternate){Sr=Bt;break t}Bt=Sr(Bt),Ot=Sr(Ot)}Sr=null}else Sr=null;ln!==null&&WO(wn,en,ln,Sr,!1),cr!==null&&ha!==null&&WO(wn,ha,cr,Sr,!0)}}e:{if(en=Qt?Zn(Qt):window,ln=en.nodeName&&en.nodeName.toLowerCase(),ln==="select"||ln==="input"&&en.type==="file")var ea=On;else if(to(en))if(bd)ea=qp;else{ea=Cc;var _r=E0}else ln=en.nodeName,!ln||ln.toLowerCase()!=="input"||en.type!=="checkbox"&&en.type!=="radio"?Qt&&bg(Qt.elementType)&&(ea=On):ea=e1;if(ea&&(ea=ea(m,Qt))){ju(wn,ea,C,mn);break e}_r&&_r(m,en,Qt),m==="focusout"&&Qt&&en.type==="number"&&Qt.memoizedProps.value!=null&&Fu(en,"number",en.value)}switch(_r=Qt?Zn(Qt):window,m){case"focusin":(to(_r)||_r.contentEditable==="true")&&(yf=_r,D_=Qt,js=null);break;case"focusout":js=D_=yf=null;break;case"mousedown":I_=!0;break;case"contextmenu":case"mouseup":case"dragend":I_=!1,Og(wn,C,mn);break;case"selectionchange":if(Ag)break;case"keydown":case"keyup":Og(wn,C,mn)}var vi;if(w0)e:{switch(m){case"compositionstart":var Ni="onCompositionStart";break e;case"compositionend":Ni="onCompositionEnd";break e;case"compositionupdate":Ni="onCompositionUpdate";break e}Ni=void 0}else Bo?Tg(m,C)&&(Ni="onCompositionEnd"):m==="keydown"&&C.keyCode===229&&(Ni="onCompositionStart");Ni&&(Up&&C.locale!=="ko"&&(Bo||Ni!=="onCompositionStart"?Ni==="onCompositionEnd"&&Bo&&(vi=T_()):(Fs=mn,gd="value"in Fs?Fs.value:Fs.textContent,Bo=!0)),_r=sb(Qt,Ni),0<_r.length&&(Ni=new b0(Ni,m,null,C,mn),wn.push({event:Ni,listeners:_r}),vi?Ni.data=vi:(vi=ss(C),vi!==null&&(Ni.data=vi)))),(vi=S0?nl(m,C):T0(m,C))&&(Ni=sb(Qt,"onBeforeInput"),0<Ni.length&&(_r=new b0("onBeforeInput","beforeinput",null,C,mn),wn.push({event:_r,listeners:Ni}),_r.data=vi)),GO(wn,m,Qt,C,mn)}ib(wn,x)})}function fy(m,x,C){return{instance:m,listener:x,currentTarget:C}}function sb(m,x){for(var C=x+"Capture",z=[];m!==null;){var Y=m,ne=Y.stateNode;if(Y=Y.tag,Y!==5&&Y!==26&&Y!==27||ne===null||(Y=zp(m,C),Y!=null&&z.unshift(fy(m,Y,ne)),Y=zp(m,x),Y!=null&&z.push(fy(m,Y,ne))),m.tag===3)return z;m=m.return}return[]}function Bk(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function WO(m,x,C,z,Y){for(var ne=x._reactName,Te=[];C!==null&&C!==z;){var Xe=C,St=Xe.alternate,Qt=Xe.stateNode;if(Xe=Xe.tag,St!==null&&St===z)break;Xe!==5&&Xe!==26&&Xe!==27||Qt===null||(St=Qt,Y?(Qt=zp(C,ne),Qt!=null&&Te.unshift(fy(C,Qt,St))):Y||(Qt=zp(C,ne),Qt!=null&&Te.push(fy(C,Qt,St)))),C=C.return}Te.length!==0&&m.push({event:x,listeners:Te})}var jk=/\r\n?/g,XO=/\u0000|\uFFFD/g;function ST(m){return(typeof m=="string"?m:""+m).replace(jk,`
`).replace(XO,"")}function ZO(m,x){return x=ST(x),ST(m)===x}function Pa(m,x,C,z,Y,ne){switch(C){case"children":typeof z=="string"?x==="body"||x==="textarea"&&z===""||Ac(m,z):(typeof z=="number"||typeof z=="bigint")&&x!=="body"&&Ac(m,""+z);break;case"className":li(m,"class",z);break;case"tabIndex":li(m,"tabindex",z);break;case"dir":case"role":case"viewBox":case"width":case"height":li(m,C,z);break;case"style":w_(m,z,ne);break;case"data":if(x!=="object"){li(m,"data",z);break}case"src":case"href":if(z===""&&(x!=="a"||C!=="href")){m.removeAttribute(C);break}if(z==null||typeof z=="function"||typeof z=="symbol"||typeof z=="boolean"){m.removeAttribute(C);break}z=au(""+z),m.setAttribute(C,z);break;case"action":case"formAction":if(typeof z=="function"){m.setAttribute(C,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ne=="function"&&(C==="formAction"?(x!=="input"&&Pa(m,x,"name",Y.name,Y,null),Pa(m,x,"formEncType",Y.formEncType,Y,null),Pa(m,x,"formMethod",Y.formMethod,Y,null),Pa(m,x,"formTarget",Y.formTarget,Y,null)):(Pa(m,x,"encType",Y.encType,Y,null),Pa(m,x,"method",Y.method,Y,null),Pa(m,x,"target",Y.target,Y,null)));if(z==null||typeof z=="symbol"||typeof z=="boolean"){m.removeAttribute(C);break}z=au(""+z),m.setAttribute(C,z);break;case"onClick":z!=null&&(m.onclick=xo);break;case"onScroll":z!=null&&Oi("scroll",m);break;case"onScrollEnd":z!=null&&Oi("scrollend",m);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(r(61));if(C=z.__html,C!=null){if(Y.children!=null)throw Error(r(60));m.innerHTML=C}}break;case"multiple":m.multiple=z&&typeof z!="function"&&typeof z!="symbol";break;case"muted":m.muted=z&&typeof z!="function"&&typeof z!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(z==null||typeof z=="function"||typeof z=="boolean"||typeof z=="symbol"){m.removeAttribute("xlink:href");break}C=au(""+z),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":z!=null&&typeof z!="function"&&typeof z!="symbol"?m.setAttribute(C,""+z):m.removeAttribute(C);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":z&&typeof z!="function"&&typeof z!="symbol"?m.setAttribute(C,""):m.removeAttribute(C);break;case"capture":case"download":z===!0?m.setAttribute(C,""):z!==!1&&z!=null&&typeof z!="function"&&typeof z!="symbol"?m.setAttribute(C,z):m.removeAttribute(C);break;case"cols":case"rows":case"size":case"span":z!=null&&typeof z!="function"&&typeof z!="symbol"&&!isNaN(z)&&1<=z?m.setAttribute(C,z):m.removeAttribute(C);break;case"rowSpan":case"start":z==null||typeof z=="function"||typeof z=="symbol"||isNaN(z)?m.removeAttribute(C):m.setAttribute(C,z);break;case"popover":Oi("beforetoggle",m),Oi("toggle",m),si(m,"popover",z);break;case"xlinkActuate":wi(m,"http://www.w3.org/1999/xlink","xlink:actuate",z);break;case"xlinkArcrole":wi(m,"http://www.w3.org/1999/xlink","xlink:arcrole",z);break;case"xlinkRole":wi(m,"http://www.w3.org/1999/xlink","xlink:role",z);break;case"xlinkShow":wi(m,"http://www.w3.org/1999/xlink","xlink:show",z);break;case"xlinkTitle":wi(m,"http://www.w3.org/1999/xlink","xlink:title",z);break;case"xlinkType":wi(m,"http://www.w3.org/1999/xlink","xlink:type",z);break;case"xmlBase":wi(m,"http://www.w3.org/XML/1998/namespace","xml:base",z);break;case"xmlLang":wi(m,"http://www.w3.org/XML/1998/namespace","xml:lang",z);break;case"xmlSpace":wi(m,"http://www.w3.org/XML/1998/namespace","xml:space",z);break;case"is":si(m,"is",z);break;case"innerText":case"textContent":break;default:(!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(C=Fo.get(C)||C,si(m,C,z))}}function TT(m,x,C,z,Y,ne){switch(C){case"style":w_(m,z,ne);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(r(61));if(C=z.__html,C!=null){if(Y.children!=null)throw Error(r(60));m.innerHTML=C}}break;case"children":typeof z=="string"?Ac(m,z):(typeof z=="number"||typeof z=="bigint")&&Ac(m,""+z);break;case"onScroll":z!=null&&Oi("scroll",m);break;case"onScrollEnd":z!=null&&Oi("scrollend",m);break;case"onClick":z!=null&&(m.onclick=xo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xi.hasOwnProperty(C))e:{if(C[0]==="o"&&C[1]==="n"&&(Y=C.endsWith("Capture"),x=C.slice(2,Y?C.length-7:void 0),ne=m[ze]||null,ne=ne!=null?ne[C]:null,typeof ne=="function"&&m.removeEventListener(x,ne,Y),typeof z=="function")){typeof ne!="function"&&ne!==null&&(C in m?m[C]=null:m.hasAttribute(C)&&m.removeAttribute(C)),m.addEventListener(x,z,Y);break e}C in m?m[C]=z:z===!0?m.setAttribute(C,""):si(m,C,z)}}}function hl(m,x,C){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oi("error",m),Oi("load",m);var z=!1,Y=!1,ne;for(ne in C)if(C.hasOwnProperty(ne)){var Te=C[ne];if(Te!=null)switch(ne){case"src":z=!0;break;case"srcSet":Y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,x));default:Pa(m,x,ne,Te,C,null)}}Y&&Pa(m,x,"srcSet",C.srcSet,C,null),z&&Pa(m,x,"src",C.src,C,null);return;case"input":Oi("invalid",m);var Xe=ne=Te=Y=null,St=null,Qt=null;for(z in C)if(C.hasOwnProperty(z)){var mn=C[z];if(mn!=null)switch(z){case"name":Y=mn;break;case"type":Te=mn;break;case"checked":St=mn;break;case"defaultChecked":Qt=mn;break;case"value":ne=mn;break;case"defaultValue":Xe=mn;break;case"children":case"dangerouslySetInnerHTML":if(mn!=null)throw Error(r(137,x));break;default:Pa(m,x,z,mn,C,null)}}xs(m,ne,Xe,St,Qt,Te,Y,!1);return;case"select":Oi("invalid",m),z=Te=ne=null;for(Y in C)if(C.hasOwnProperty(Y)&&(Xe=C[Y],Xe!=null))switch(Y){case"value":ne=Xe;break;case"defaultValue":Te=Xe;break;case"multiple":z=Xe;default:Pa(m,x,Y,Xe,C,null)}x=ne,C=Te,m.multiple=!!z,x!=null?iu(m,!!z,x,!1):C!=null&&iu(m,!!z,C,!0);return;case"textarea":Oi("invalid",m),ne=Y=z=null;for(Te in C)if(C.hasOwnProperty(Te)&&(Xe=C[Te],Xe!=null))switch(Te){case"value":z=Xe;break;case"defaultValue":Y=Xe;break;case"children":ne=Xe;break;case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(r(91));break;default:Pa(m,x,Te,Xe,C,null)}kp(m,z,Y,ne);return;case"option":for(St in C)if(C.hasOwnProperty(St)&&(z=C[St],z!=null))switch(St){case"selected":m.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Pa(m,x,St,z,C,null)}return;case"dialog":Oi("beforetoggle",m),Oi("toggle",m),Oi("cancel",m),Oi("close",m);break;case"iframe":case"object":Oi("load",m);break;case"video":case"audio":for(z=0;z<Am.length;z++)Oi(Am[z],m);break;case"image":Oi("error",m),Oi("load",m);break;case"details":Oi("toggle",m);break;case"embed":case"source":case"link":Oi("error",m),Oi("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Qt in C)if(C.hasOwnProperty(Qt)&&(z=C[Qt],z!=null))switch(Qt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,x));default:Pa(m,x,Qt,z,C,null)}return;default:if(bg(x)){for(mn in C)C.hasOwnProperty(mn)&&(z=C[mn],z!==void 0&&TT(m,x,mn,z,C,void 0));return}}for(Xe in C)C.hasOwnProperty(Xe)&&(z=C[Xe],z!=null&&Pa(m,x,Xe,z,C,null))}function KO(m,x,C,z){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Y=null,ne=null,Te=null,Xe=null,St=null,Qt=null,mn=null;for(ln in C){var wn=C[ln];if(C.hasOwnProperty(ln)&&wn!=null)switch(ln){case"checked":break;case"value":break;case"defaultValue":St=wn;default:z.hasOwnProperty(ln)||Pa(m,x,ln,null,z,wn)}}for(var en in z){var ln=z[en];if(wn=C[en],z.hasOwnProperty(en)&&(ln!=null||wn!=null))switch(en){case"type":ne=ln;break;case"name":Y=ln;break;case"checked":Qt=ln;break;case"defaultChecked":mn=ln;break;case"value":Te=ln;break;case"defaultValue":Xe=ln;break;case"children":case"dangerouslySetInnerHTML":if(ln!=null)throw Error(r(137,x));break;default:ln!==wn&&Pa(m,x,en,ln,z,wn)}}Ns(m,Te,Xe,St,Qt,mn,ne,Y);return;case"select":ln=Te=Xe=en=null;for(ne in C)if(St=C[ne],C.hasOwnProperty(ne)&&St!=null)switch(ne){case"value":break;case"multiple":ln=St;default:z.hasOwnProperty(ne)||Pa(m,x,ne,null,z,St)}for(Y in z)if(ne=z[Y],St=C[Y],z.hasOwnProperty(Y)&&(ne!=null||St!=null))switch(Y){case"value":en=ne;break;case"defaultValue":Xe=ne;break;case"multiple":Te=ne;default:ne!==St&&Pa(m,x,Y,ne,z,St)}x=Xe,C=Te,z=ln,en!=null?iu(m,!!C,en,!1):!!z!=!!C&&(x!=null?iu(m,!!C,x,!0):iu(m,!!C,C?[]:"",!1));return;case"textarea":ln=en=null;for(Xe in C)if(Y=C[Xe],C.hasOwnProperty(Xe)&&Y!=null&&!z.hasOwnProperty(Xe))switch(Xe){case"value":break;case"children":break;default:Pa(m,x,Xe,null,z,Y)}for(Te in z)if(Y=z[Te],ne=C[Te],z.hasOwnProperty(Te)&&(Y!=null||ne!=null))switch(Te){case"value":en=Y;break;case"defaultValue":ln=Y;break;case"children":break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(91));break;default:Y!==ne&&Pa(m,x,Te,Y,z,ne)}Sl(m,en,ln);return;case"option":for(var cr in C)if(en=C[cr],C.hasOwnProperty(cr)&&en!=null&&!z.hasOwnProperty(cr))switch(cr){case"selected":m.selected=!1;break;default:Pa(m,x,cr,null,z,en)}for(St in z)if(en=z[St],ln=C[St],z.hasOwnProperty(St)&&en!==ln&&(en!=null||ln!=null))switch(St){case"selected":m.selected=en&&typeof en!="function"&&typeof en!="symbol";break;default:Pa(m,x,St,en,z,ln)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Sr in C)en=C[Sr],C.hasOwnProperty(Sr)&&en!=null&&!z.hasOwnProperty(Sr)&&Pa(m,x,Sr,null,z,en);for(Qt in z)if(en=z[Qt],ln=C[Qt],z.hasOwnProperty(Qt)&&en!==ln&&(en!=null||ln!=null))switch(Qt){case"children":case"dangerouslySetInnerHTML":if(en!=null)throw Error(r(137,x));break;default:Pa(m,x,Qt,en,z,ln)}return;default:if(bg(x)){for(var ha in C)en=C[ha],C.hasOwnProperty(ha)&&en!==void 0&&!z.hasOwnProperty(ha)&&TT(m,x,ha,void 0,z,en);for(mn in z)en=z[mn],ln=C[mn],!z.hasOwnProperty(mn)||en===ln||en===void 0&&ln===void 0||TT(m,x,mn,en,z,ln);return}}for(var Bt in C)en=C[Bt],C.hasOwnProperty(Bt)&&en!=null&&!z.hasOwnProperty(Bt)&&Pa(m,x,Bt,null,z,en);for(wn in z)en=z[wn],ln=C[wn],!z.hasOwnProperty(wn)||en===ln||en==null&&ln==null||Pa(m,x,wn,en,z,ln)}function ET(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function QO(){if(typeof performance.getEntriesByType=="function"){for(var m=0,x=0,C=performance.getEntriesByType("resource"),z=0;z<C.length;z++){var Y=C[z],ne=Y.transferSize,Te=Y.initiatorType,Xe=Y.duration;if(ne&&Xe&&ET(Te)){for(Te=0,Xe=Y.responseEnd,z+=1;z<C.length;z++){var St=C[z],Qt=St.startTime;if(Qt>Xe)break;var mn=St.transferSize,wn=St.initiatorType;mn&&ET(wn)&&(St=St.responseEnd,Te+=mn*(St<Xe?1:(Xe-Qt)/(St-Qt)))}if(--z,x+=8*(ne+Te)/(Y.duration/1e3),m++,10<m)break}}if(0<m)return x/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var b1=null,x1=null;function lb(m){return m.nodeType===9?m:m.ownerDocument}function AT(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w1(m,x){if(m===0)switch(x){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&x==="foreignObject"?0:m}function Ph(m,x){return m==="textarea"||m==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.children=="bigint"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var Vo=null;function JO(){var m=window.event;return m&&m.type==="popstate"?m===Vo?!1:(Vo=m,!0):(Vo=null,!1)}var dv=typeof setTimeout=="function"?setTimeout:void 0,Uk=typeof clearTimeout=="function"?clearTimeout:void 0,eC=typeof Promise=="function"?Promise:void 0,$k=typeof queueMicrotask=="function"?queueMicrotask:typeof eC<"u"?function(m){return eC.resolve(null).then(m).catch(Vk)}:dv;function Vk(m){setTimeout(function(){throw m})}function ac(m){return m==="head"}function OT(m,x){var C=x,z=0;do{var Y=C.nextSibling;if(m.removeChild(C),Y&&Y.nodeType===8)if(C=Y.data,C==="/$"||C==="/&"){if(z===0){m.removeChild(Y),bv(x);return}z--}else if(C==="$"||C==="$?"||C==="$~"||C==="$!"||C==="&")z++;else if(C==="html")cb(m.ownerDocument.documentElement);else if(C==="head"){C=m.ownerDocument.head,cb(C);for(var ne=C.firstChild;ne;){var Te=ne.nextSibling,Xe=ne.nodeName;ne[Ft]||Xe==="SCRIPT"||Xe==="STYLE"||Xe==="LINK"&&ne.rel.toLowerCase()==="stylesheet"||C.removeChild(ne),ne=Te}}else C==="body"&&cb(m.ownerDocument.body);C=Y}while(C);bv(x)}function Om(m,x){var C=m;m=0;do{var z=C.nextSibling;if(C.nodeType===1?x?(C._stashedDisplay=C.style.display,C.style.display="none"):(C.style.display=C._stashedDisplay||"",C.getAttribute("style")===""&&C.removeAttribute("style")):C.nodeType===3&&(x?(C._stashedText=C.nodeValue,C.nodeValue=""):C.nodeValue=C._stashedText||""),z&&z.nodeType===8)if(C=z.data,C==="/$"){if(m===0)break;m--}else C!=="$"&&C!=="$?"&&C!=="$~"&&C!=="$!"||m++;C=z}while(C)}function hy(m){var x=m.firstChild;for(x&&x.nodeType===10&&(x=x.nextSibling);x;){var C=x;switch(x=x.nextSibling,C.nodeName){case"HTML":case"HEAD":case"BODY":hy(C),hn(C);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(C.rel.toLowerCase()==="stylesheet")continue}m.removeChild(C)}}function qk(m,x,C,z){for(;m.nodeType===1;){var Y=C;if(m.nodeName.toLowerCase()!==x.toLowerCase()){if(!z&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(z){if(!m[Ft])switch(x){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(ne=m.getAttribute("rel"),ne==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(ne!==Y.rel||m.getAttribute("href")!==(Y.href==null||Y.href===""?null:Y.href)||m.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin)||m.getAttribute("title")!==(Y.title==null?null:Y.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(ne=m.getAttribute("src"),(ne!==(Y.src==null?null:Y.src)||m.getAttribute("type")!==(Y.type==null?null:Y.type)||m.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin))&&ne&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(x==="input"&&m.type==="hidden"){var ne=Y.name==null?null:""+Y.name;if(Y.type==="hidden"&&m.getAttribute("name")===ne)return m}else return m;if(m=Gc(m.nextSibling),m===null)break}return null}function Hk(m,x,C){if(x==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!C||(m=Gc(m.nextSibling),m===null))return null;return m}function tC(m,x){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!x||(m=Gc(m.nextSibling),m===null))return null;return m}function CT(m){return m.data==="$?"||m.data==="$~"}function MT(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function Gk(m,x){var C=m.ownerDocument;if(m.data==="$~")m._reactRetry=x;else if(m.data!=="$?"||C.readyState!=="loading")x();else{var z=function(){x(),C.removeEventListener("DOMContentLoaded",z)};C.addEventListener("DOMContentLoaded",z),m._reactRetry=z}}function Gc(m){for(;m!=null;m=m.nextSibling){var x=m.nodeType;if(x===1||x===3)break;if(x===8){if(x=m.data,x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"||x==="F!"||x==="F")break;if(x==="/$"||x==="/&")return null}}return m}var ub=null;function nC(m){m=m.nextSibling;for(var x=0;m;){if(m.nodeType===8){var C=m.data;if(C==="/$"||C==="/&"){if(x===0)return Gc(m.nextSibling);x--}else C!=="$"&&C!=="$!"&&C!=="$?"&&C!=="$~"&&C!=="&"||x++}m=m.nextSibling}return null}function DT(m){m=m.previousSibling;for(var x=0;m;){if(m.nodeType===8){var C=m.data;if(C==="$"||C==="$!"||C==="$?"||C==="$~"||C==="&"){if(x===0)return m;x--}else C!=="/$"&&C!=="/&"||x++}m=m.previousSibling}return null}function pv(m,x,C){switch(x=lb(C),m){case"html":if(m=x.documentElement,!m)throw Error(r(452));return m;case"head":if(m=x.head,!m)throw Error(r(453));return m;case"body":if(m=x.body,!m)throw Error(r(454));return m;default:throw Error(r(451))}}function cb(m){for(var x=m.attributes;x.length;)m.removeAttributeNode(x[0]);hn(m)}var Xi=new Map,dy=new Set;function fb(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var Yc=Fe.d;Fe.d={f:S1,r:hb,D:db,C:PT,L:pb,m:Yk,X:RT,S:rC,M:kT};function S1(){var m=Yc.f(),x=_i();return m||x}function hb(m){var x=Rn(m);x!==null&&x.tag===5&&x.type==="form"?V0(x):Yc.r(m)}var py=typeof document>"u"?null:document;function IT(m,x,C){var z=py;if(z&&typeof x=="string"&&x){var Y=so(x);Y='link[rel="'+m+'"][href="'+Y+'"]',typeof C=="string"&&(Y+='[crossorigin="'+C+'"]'),dy.has(Y)||(dy.add(Y),m={rel:m,crossOrigin:C,href:x},z.querySelector(Y)===null&&(x=z.createElement("link"),hl(x,"link",m),Pn(x),z.head.appendChild(x)))}}function db(m){Yc.D(m),IT("dns-prefetch",m,null)}function PT(m,x){Yc.C(m,x),IT("preconnect",m,x)}function pb(m,x,C){Yc.L(m,x,C);var z=py;if(z&&m&&x){var Y='link[rel="preload"][as="'+so(x)+'"]';x==="image"&&C&&C.imageSrcSet?(Y+='[imagesrcset="'+so(C.imageSrcSet)+'"]',typeof C.imageSizes=="string"&&(Y+='[imagesizes="'+so(C.imageSizes)+'"]')):Y+='[href="'+so(m)+'"]';var ne=Y;switch(x){case"style":ne=mv(m);break;case"script":ne=Cm(m)}Xi.has(ne)||(m=E({rel:"preload",href:x==="image"&&C&&C.imageSrcSet?void 0:m,as:x},C),Xi.set(ne,m),z.querySelector(Y)!==null||x==="style"&&z.querySelector(Ds(ne))||x==="script"&&z.querySelector(my(ne))||(x=z.createElement("link"),hl(x,"link",m),Pn(x),z.head.appendChild(x)))}}function Yk(m,x){Yc.m(m,x);var C=py;if(C&&m){var z=x&&typeof x.as=="string"?x.as:"script",Y='link[rel="modulepreload"][as="'+so(z)+'"][href="'+so(m)+'"]',ne=Y;switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ne=Cm(m)}if(!Xi.has(ne)&&(m=E({rel:"modulepreload",href:m},x),Xi.set(ne,m),C.querySelector(Y)===null)){switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(C.querySelector(my(ne)))return}z=C.createElement("link"),hl(z,"link",m),Pn(z),C.head.appendChild(z)}}}function rC(m,x,C){Yc.S(m,x,C);var z=py;if(z&&m){var Y=rr(z).hoistableStyles,ne=mv(m);x=x||"default";var Te=Y.get(ne);if(!Te){var Xe={loading:0,preload:null};if(Te=z.querySelector(Ds(ne)))Xe.loading=5;else{m=E({rel:"stylesheet",href:m,"data-precedence":x},C),(C=Xi.get(ne))&&NT(m,C);var St=Te=z.createElement("link");Pn(St),hl(St,"link",m),St._p=new Promise(function(Qt,mn){St.onload=Qt,St.onerror=mn}),St.addEventListener("load",function(){Xe.loading|=1}),St.addEventListener("error",function(){Xe.loading|=2}),Xe.loading|=4,Is(Te,x,z)}Te={type:"stylesheet",instance:Te,count:1,state:Xe},Y.set(ne,Te)}}}function RT(m,x){Yc.X(m,x);var C=py;if(C&&m){var z=rr(C).hoistableScripts,Y=Cm(m),ne=z.get(Y);ne||(ne=C.querySelector(my(Y)),ne||(m=E({src:m,async:!0},x),(x=Xi.get(Y))&&mb(m,x),ne=C.createElement("script"),Pn(ne),hl(ne,"link",m),C.head.appendChild(ne)),ne={type:"script",instance:ne,count:1,state:null},z.set(Y,ne))}}function kT(m,x){Yc.M(m,x);var C=py;if(C&&m){var z=rr(C).hoistableScripts,Y=Cm(m),ne=z.get(Y);ne||(ne=C.querySelector(my(Y)),ne||(m=E({src:m,async:!0,type:"module"},x),(x=Xi.get(Y))&&mb(m,x),ne=C.createElement("script"),Pn(ne),hl(ne,"link",m),C.head.appendChild(ne)),ne={type:"script",instance:ne,count:1,state:null},z.set(Y,ne))}}function Rh(m,x,C,z){var Y=(Y=dn.current)?fb(Y):null;if(!Y)throw Error(r(446));switch(m){case"meta":case"title":return null;case"style":return typeof C.precedence=="string"&&typeof C.href=="string"?(x=mv(C.href),C=rr(Y).hoistableStyles,z=C.get(x),z||(z={type:"style",instance:null,count:0,state:null},C.set(x,z)),z):{type:"void",instance:null,count:0,state:null};case"link":if(C.rel==="stylesheet"&&typeof C.href=="string"&&typeof C.precedence=="string"){m=mv(C.href);var ne=rr(Y).hoistableStyles,Te=ne.get(m);if(Te||(Y=Y.ownerDocument||Y,Te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ne.set(m,Te),(ne=Y.querySelector(Ds(m)))&&!ne._p&&(Te.instance=ne,Te.state.loading=5),Xi.has(m)||(C={rel:"preload",as:"style",href:C.href,crossOrigin:C.crossOrigin,integrity:C.integrity,media:C.media,hrefLang:C.hrefLang,referrerPolicy:C.referrerPolicy},Xi.set(m,C),ne||LT(Y,m,C,Te.state))),x&&z===null)throw Error(r(528,""));return Te}if(x&&z!==null)throw Error(r(529,""));return null;case"script":return x=C.async,C=C.src,typeof C=="string"&&x&&typeof x!="function"&&typeof x!="symbol"?(x=Cm(C),C=rr(Y).hoistableScripts,z=C.get(x),z||(z={type:"script",instance:null,count:0,state:null},C.set(x,z)),z):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,m))}}function mv(m){return'href="'+so(m)+'"'}function Ds(m){return'link[rel="stylesheet"]['+m+"]"}function iC(m){return E({},m,{"data-precedence":m.precedence,precedence:null})}function LT(m,x,C,z){m.querySelector('link[rel="preload"][as="style"]['+x+"]")?z.loading=1:(x=m.createElement("link"),z.preload=x,x.addEventListener("load",function(){return z.loading|=1}),x.addEventListener("error",function(){return z.loading|=2}),hl(x,"link",C),Pn(x),m.head.appendChild(x))}function Cm(m){return'[src="'+so(m)+'"]'}function my(m){return"script[async]"+m}function zT(m,x,C){if(x.count++,x.instance===null)switch(x.type){case"style":var z=m.querySelector('style[data-href~="'+so(C.href)+'"]');if(z)return x.instance=z,Pn(z),z;var Y=E({},C,{"data-href":C.href,"data-precedence":C.precedence,href:null,precedence:null});return z=(m.ownerDocument||m).createElement("style"),Pn(z),hl(z,"style",Y),Is(z,C.precedence,m),x.instance=z;case"stylesheet":Y=mv(C.href);var ne=m.querySelector(Ds(Y));if(ne)return x.state.loading|=4,x.instance=ne,Pn(ne),ne;z=iC(C),(Y=Xi.get(Y))&&NT(z,Y),ne=(m.ownerDocument||m).createElement("link"),Pn(ne);var Te=ne;return Te._p=new Promise(function(Xe,St){Te.onload=Xe,Te.onerror=St}),hl(ne,"link",z),x.state.loading|=4,Is(ne,C.precedence,m),x.instance=ne;case"script":return ne=Cm(C.src),(Y=m.querySelector(my(ne)))?(x.instance=Y,Pn(Y),Y):(z=C,(Y=Xi.get(ne))&&(z=E({},C),mb(z,Y)),m=m.ownerDocument||m,Y=m.createElement("script"),Pn(Y),hl(Y,"link",z),m.head.appendChild(Y),x.instance=Y);case"void":return null;default:throw Error(r(443,x.type))}else x.type==="stylesheet"&&(x.state.loading&4)===0&&(z=x.instance,x.state.loading|=4,Is(z,C.precedence,m));return x.instance}function Is(m,x,C){for(var z=C.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Y=z.length?z[z.length-1]:null,ne=Y,Te=0;Te<z.length;Te++){var Xe=z[Te];if(Xe.dataset.precedence===x)ne=Xe;else if(ne!==Y)break}ne?ne.parentNode.insertBefore(m,ne.nextSibling):(x=C.nodeType===9?C.head:C,x.insertBefore(m,x.firstChild))}function NT(m,x){m.crossOrigin==null&&(m.crossOrigin=x.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=x.referrerPolicy),m.title==null&&(m.title=x.title)}function mb(m,x){m.crossOrigin==null&&(m.crossOrigin=x.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=x.referrerPolicy),m.integrity==null&&(m.integrity=x.integrity)}var Mm=null;function gy(m,x,C){if(Mm===null){var z=new Map,Y=Mm=new Map;Y.set(C,z)}else Y=Mm,z=Y.get(C),z||(z=new Map,Y.set(C,z));if(z.has(m))return z;for(z.set(m,null),C=C.getElementsByTagName(m),Y=0;Y<C.length;Y++){var ne=C[Y];if(!(ne[Ft]||ne[Qe]||m==="link"&&ne.getAttribute("rel")==="stylesheet")&&ne.namespaceURI!=="http://www.w3.org/2000/svg"){var Te=ne.getAttribute(x)||"";Te=m+Te;var Xe=z.get(Te);Xe?Xe.push(ne):z.set(Te,[ne])}}return z}function FT(m,x,C){m=m.ownerDocument||m,m.head.insertBefore(C,x==="title"?m.querySelector("head > title"):null)}function aC(m,x,C){if(C===1||x.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof x.precedence!="string"||typeof x.href!="string"||x.href==="")break;return!0;case"link":if(typeof x.rel!="string"||typeof x.href!="string"||x.href===""||x.onLoad||x.onError)break;switch(x.rel){case"stylesheet":return m=x.disabled,typeof x.precedence=="string"&&m==null;default:return!0}case"script":if(x.async&&typeof x.async!="function"&&typeof x.async!="symbol"&&!x.onLoad&&!x.onError&&x.src&&typeof x.src=="string")return!0}return!1}function BT(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function Zl(m,x,C,z){if(C.type==="stylesheet"&&(typeof z.media!="string"||matchMedia(z.media).matches!==!1)&&(C.state.loading&4)===0){if(C.instance===null){var Y=mv(z.href),ne=x.querySelector(Ds(Y));if(ne){x=ne._p,x!==null&&typeof x=="object"&&typeof x.then=="function"&&(m.count++,m=Jd.bind(m),x.then(m,m)),C.state.loading|=4,C.instance=ne,Pn(ne);return}ne=x.ownerDocument||x,z=iC(z),(Y=Xi.get(Y))&&NT(z,Y),ne=ne.createElement("link"),Pn(ne);var Te=ne;Te._p=new Promise(function(Xe,St){Te.onload=Xe,Te.onerror=St}),hl(ne,"link",z),C.instance=ne}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(C,x),(x=C.state.preload)&&(C.state.loading&3)===0&&(m.count++,C=Jd.bind(m),x.addEventListener("load",C),x.addEventListener("error",C))}}var yy=0;function oC(m,x){return m.stylesheets&&m.count===0&&gv(m,m.stylesheets),0<m.count||0<m.imgCount?function(C){var z=setTimeout(function(){if(m.stylesheets&&gv(m,m.stylesheets),m.unsuspend){var ne=m.unsuspend;m.unsuspend=null,ne()}},6e4+x);0<m.imgBytes&&yy===0&&(yy=62500*QO());var Y=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&gv(m,m.stylesheets),m.unsuspend)){var ne=m.unsuspend;m.unsuspend=null,ne()}},(m.imgBytes>yy?50:800)+x);return m.unsuspend=C,function(){m.unsuspend=null,clearTimeout(z),clearTimeout(Y)}}:null}function Jd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gv(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var oc=null;function gv(m,x){m.stylesheets=null,m.unsuspend!==null&&(m.count++,oc=new Map,x.forEach(Dm,m),oc=null,Jd.call(m))}function Dm(m,x){if(!(x.state.loading&4)){var C=oc.get(m);if(C)var z=C.get(null);else{C=new Map,oc.set(m,C);for(var Y=m.querySelectorAll("link[data-precedence],style[data-precedence]"),ne=0;ne<Y.length;ne++){var Te=Y[ne];(Te.nodeName==="LINK"||Te.getAttribute("media")!=="not all")&&(C.set(Te.dataset.precedence,Te),z=Te)}z&&C.set(null,z)}Y=x.instance,Te=Y.getAttribute("data-precedence"),ne=C.get(Te)||z,ne===z&&C.set(null,Y),C.set(Te,Y),this.count++,z=Jd.bind(this),Y.addEventListener("load",z),Y.addEventListener("error",z),ne?ne.parentNode.insertBefore(Y,ne.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(Y,m.firstChild)),x.state.loading|=4}}var Wc={$$typeof:J,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function T1(m,x,C,z,Y,ne,Te,Xe,St){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vg(0),this.hiddenUpdates=vg(null),this.identifierPrefix=z,this.onUncaughtError=Y,this.onCaughtError=ne,this.onRecoverableError=Te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=St,this.incompleteTransitions=new Map}function E1(m,x,C,z,Y,ne,Te,Xe,St,Qt,mn,wn){return m=new T1(m,x,C,Te,St,Qt,mn,wn,Xe),x=1,ne===!0&&(x|=24),ne=al(3,null,null,x),m.current=ne,ne.stateNode=m,x=Qp(),x.refCount++,m.pooledCache=x,x.refCount++,ne.memoizedState={element:z,isDehydrated:C,cache:x},Vg(ne),m}function A1(m){return m?(m=Dc,m):Dc}function sC(m,x,C,z,Y,ne){Y=A1(Y),z.context===null?z.context=Y:z.pendingContext=Y,z=Nc(x),z.payload={element:C},ne=ne===void 0?null:ne,ne!==null&&(z.callback=ne),C=Mf(m,z,x),C!==null&&(Kn(C,m,x),Dd(C,m,x))}function lC(m,x){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var C=m.retryLane;m.retryLane=C!==0&&C<x?C:x}}function jT(m,x){lC(m,x),(m=m.alternate)&&lC(m,x)}function uC(m){if(m.tag===13||m.tag===31){var x=Jt(m,67108864);x!==null&&Kn(x,m,67108864),jT(m,67108864)}}function UT(m){if(m.tag===13||m.tag===31){var x=ti();x=Ar(x);var C=Jt(m,x);C!==null&&Kn(C,m,x),jT(m,x)}}var gb=!0;function O1(m,x,C,z){var Y=Ee.T;Ee.T=null;var ne=Fe.p;try{Fe.p=2,yv(m,x,C,z)}finally{Fe.p=ne,Ee.T=Y}}function cC(m,x,C,z){var Y=Ee.T;Ee.T=null;var ne=Fe.p;try{Fe.p=8,yv(m,x,C,z)}finally{Fe.p=ne,Ee.T=Y}}function yv(m,x,C,z){if(gb){var Y=C1(z);if(Y===null)v1(m,x,z,_y,C),_b(m,z);else if(dC(Y,m,x,C,z))z.stopPropagation();else if(_b(m,z),x&4&&-1<hC.indexOf(m)){for(;Y!==null;){var ne=Rn(Y);if(ne!==null)switch(ne.tag){case 3:if(ne=ne.stateNode,ne.current.memoizedState.isDehydrated){var Te=mi(ne.pendingLanes);if(Te!==0){var Xe=ne;for(Xe.pendingLanes|=2,Xe.entangledLanes|=2;Te;){var St=1<<31-Ri(Te);Xe.entanglements[1]|=St,Te&=~St}Dh(ne),(nt&6)===0&&(Qn=Fr()+500,Em(0))}}break;case 31:case 13:Xe=Jt(ne,2),Xe!==null&&Kn(Xe,ne,2),_i(),jT(ne,2)}if(ne=C1(z),ne===null&&v1(m,x,z,_y,C),ne===Y)break;Y=ne}Y!==null&&z.stopPropagation()}else v1(m,x,z,null,C)}}function C1(m){return m=oh(m),$T(m)}var _y=null;function $T(m){if(_y=null,m=Dn(m),m!==null){var x=s(m);if(x===null)m=null;else{var C=x.tag;if(C===13){if(m=f(x),m!==null)return m;m=null}else if(C===31){if(m=a(x),m!==null)return m;m=null}else if(C===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;m=null}else x!==m&&(m=null)}}return _y=m,null}function fC(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hi()){case $t:return 2;case En:return 8;case ur:case $r:return 32;case Br:return 268435456;default:return 32}default:return 32}}var yb=!1,ep=null,kh=null,Lh=null,_v=new Map,vv=new Map,tp=[],hC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _b(m,x){switch(m){case"focusin":case"focusout":ep=null;break;case"dragenter":case"dragleave":kh=null;break;case"mouseover":case"mouseout":Lh=null;break;case"pointerover":case"pointerout":_v.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":vv.delete(x.pointerId)}}function gu(m,x,C,z,Y,ne){return m===null||m.nativeEvent!==ne?(m={blockedOn:x,domEventName:C,eventSystemFlags:z,nativeEvent:ne,targetContainers:[Y]},x!==null&&(x=Rn(x),x!==null&&uC(x)),m):(m.eventSystemFlags|=z,x=m.targetContainers,Y!==null&&x.indexOf(Y)===-1&&x.push(Y),m)}function dC(m,x,C,z,Y){switch(x){case"focusin":return ep=gu(ep,m,x,C,z,Y),!0;case"dragenter":return kh=gu(kh,m,x,C,z,Y),!0;case"mouseover":return Lh=gu(Lh,m,x,C,z,Y),!0;case"pointerover":var ne=Y.pointerId;return _v.set(ne,gu(_v.get(ne)||null,m,x,C,z,Y)),!0;case"gotpointercapture":return ne=Y.pointerId,vv.set(ne,gu(vv.get(ne)||null,m,x,C,z,Y)),!0}return!1}function pC(m){var x=Dn(m.target);if(x!==null){var C=s(x);if(C!==null){if(x=C.tag,x===13){if(x=f(C),x!==null){m.blockedOn=x,we(m.priority,function(){UT(C)});return}}else if(x===31){if(x=a(C),x!==null){m.blockedOn=x,we(m.priority,function(){UT(C)});return}}else if(x===3&&C.stateNode.current.memoizedState.isDehydrated){m.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}m.blockedOn=null}function M1(m){if(m.blockedOn!==null)return!1;for(var x=m.targetContainers;0<x.length;){var C=C1(m.nativeEvent);if(C===null){C=m.nativeEvent;var z=new C.constructor(C.type,C);ou=z,C.target.dispatchEvent(z),ou=null}else return x=Rn(C),x!==null&&uC(x),m.blockedOn=C,!1;x.shift()}return!0}function mC(m,x,C){M1(m)&&C.delete(x)}function Wk(){yb=!1,ep!==null&&M1(ep)&&(ep=null),kh!==null&&M1(kh)&&(kh=null),Lh!==null&&M1(Lh)&&(Lh=null),_v.forEach(mC),vv.forEach(mC)}function D1(m,x){m.blockedOn===x&&(m.blockedOn=null,yb||(yb=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wk)))}var I1=null;function gC(m){I1!==m&&(I1=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){I1===m&&(I1=null);for(var x=0;x<m.length;x+=3){var C=m[x],z=m[x+1],Y=m[x+2];if(typeof z!="function"){if($T(z||C)===null)continue;break}var ne=Rn(C);ne!==null&&(m.splice(x,3),x-=3,Kg(ne,{pending:!0,data:Y,method:C.method,action:z},z,Y))}}))}function bv(m){function x(St){return D1(St,m)}ep!==null&&D1(ep,m),kh!==null&&D1(kh,m),Lh!==null&&D1(Lh,m),_v.forEach(x),vv.forEach(x);for(var C=0;C<tp.length;C++){var z=tp[C];z.blockedOn===m&&(z.blockedOn=null)}for(;0<tp.length&&(C=tp[0],C.blockedOn===null);)pC(C),C.blockedOn===null&&tp.shift();if(C=(m.ownerDocument||m).$$reactFormReplay,C!=null)for(z=0;z<C.length;z+=3){var Y=C[z],ne=C[z+1],Te=Y[ze]||null;if(typeof ne=="function")Te||gC(C);else if(Te){var Xe=null;if(ne&&ne.hasAttribute("formAction")){if(Y=ne,Te=ne[ze]||null)Xe=Te.formAction;else if($T(Y)!==null)continue}else Xe=Te.action;typeof Xe=="function"?C[z+1]=Xe:(C.splice(z,3),z-=3),gC(C)}}}function xv(){function m(ne){ne.canIntercept&&ne.info==="react-transition"&&ne.intercept({handler:function(){return new Promise(function(Te){return Y=Te})},focusReset:"manual",scroll:"manual"})}function x(){Y!==null&&(Y(),Y=null),z||setTimeout(C,20)}function C(){if(!z&&!navigation.transition){var ne=navigation.currentEntry;ne&&ne.url!=null&&navigation.navigate(ne.url,{state:ne.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var z=!1,Y=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",x),navigation.addEventListener("navigateerror",x),setTimeout(C,100),function(){z=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",x),navigation.removeEventListener("navigateerror",x),Y!==null&&(Y(),Y=null)}}}function VT(m){this._internalRoot=m}vb.prototype.render=VT.prototype.render=function(m){var x=this._internalRoot;if(x===null)throw Error(r(409));var C=x.current,z=ti();sC(C,z,m,x,null,null)},vb.prototype.unmount=VT.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var x=m.containerInfo;sC(m.current,2,null,m,null,null),_i(),x[ot]=null}};function vb(m){this._internalRoot=m}vb.prototype.unstable_scheduleHydration=function(m){if(m){var x=me();m={blockedOn:null,target:m,priority:x};for(var C=0;C<tp.length&&x!==0&&x<tp[C].priority;C++);tp.splice(C,0,m),C===0&&pC(m)}};var bb=t.version;if(bb!=="19.2.4")throw Error(r(527,bb,"19.2.4"));Fe.findDOMNode=function(m){var x=m._reactInternals;if(x===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=y(x),m=m!==null?S(m):null,m=m===null?null:m.stateNode,m};var yC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wv.isDisabled&&wv.supportsFiber)try{Yo=wv.inject(yC),Aa=wv}catch{}}return wE.createRoot=function(m,x){if(!i(m))throw Error(r(299));var C=!1,z="",Y=p1,ne=Ei,Te=gr;return x!=null&&(x.unstable_strictMode===!0&&(C=!0),x.identifierPrefix!==void 0&&(z=x.identifierPrefix),x.onUncaughtError!==void 0&&(Y=x.onUncaughtError),x.onCaughtError!==void 0&&(ne=x.onCaughtError),x.onRecoverableError!==void 0&&(Te=x.onRecoverableError)),x=E1(m,1,!1,null,null,C,z,null,Y,ne,Te,xv),m[ot]=x.current,_1(m),new VT(x)},wE.hydrateRoot=function(m,x,C){if(!i(m))throw Error(r(299));var z=!1,Y="",ne=p1,Te=Ei,Xe=gr,St=null;return C!=null&&(C.unstable_strictMode===!0&&(z=!0),C.identifierPrefix!==void 0&&(Y=C.identifierPrefix),C.onUncaughtError!==void 0&&(ne=C.onUncaughtError),C.onCaughtError!==void 0&&(Te=C.onCaughtError),C.onRecoverableError!==void 0&&(Xe=C.onRecoverableError),C.formState!==void 0&&(St=C.formState)),x=E1(m,1,!0,x,C??null,z,Y,St,ne,Te,Xe,xv),x.context=A1(null),C=x.current,z=ti(),z=Ar(z),Y=Nc(z),Y.callback=null,Mf(C,Y,z),C=z,x.current.lanes=C,Sc(x,C),Dh(x),m[ot]=x.current,_1(m),new vb(x)},wE.version="19.2.4",wE}var S7;function X0e(){if(S7)return n3.exports;S7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),n3.exports=W0e(),n3.exports}var Eae=X0e(),be=kP();const tt=ma(be),ID=j0e({__proto__:null,default:tt},[be]);var s3={exports:{}},l3={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T7;function Z0e(){if(T7)return l3;T7=1;var e=kP();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,f=e.useMemo,a=e.useDebugValue;return l3.useSyncExternalStoreWithSelector=function(p,y,S,E,I){var L=i(null);if(L.current===null){var N={hasValue:!1,value:null};L.current=N}else N=L.current;L=f(function(){function k(Q){if(!V){if(V=!0,K=Q,Q=E(Q),I!==void 0&&N.hasValue){var W=N.value;if(I(W,Q))return J=W}return J=Q}if(W=J,n(K,Q))return W;var te=E(Q);return I!==void 0&&I(W,te)?(K=Q,W):(K=Q,J=te)}var V=!1,K,J,ie=S===void 0?null:S;return[function(){return k(y())},ie===null?void 0:function(){return k(ie())}]},[y,S,E,I]);var j=r(p,L[0],L[1]);return s(function(){N.hasValue=!0,N.value=j},[j]),a(j),j},l3}var E7;function K0e(){return E7||(E7=1,s3.exports=Z0e()),s3.exports}K0e();var Q0e=be.version.startsWith("19"),J0e=Symbol.for(Q0e?"react.transitional.element":"react.element"),ebe=Symbol.for("react.portal"),tbe=Symbol.for("react.fragment"),nbe=Symbol.for("react.strict_mode"),rbe=Symbol.for("react.profiler"),ibe=Symbol.for("react.consumer"),abe=Symbol.for("react.context"),Aae=Symbol.for("react.forward_ref"),obe=Symbol.for("react.suspense"),sbe=Symbol.for("react.suspense_list"),BU=Symbol.for("react.memo"),lbe=Symbol.for("react.lazy"),ube=Aae,cbe=BU;function fbe(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case J0e:switch(e=e.type,e){case tbe:case rbe:case nbe:case obe:case sbe:return e;default:switch(e=e&&e.$$typeof,e){case abe:case Aae:case lbe:case BU:return e;case ibe:return e;default:return t}}case ebe:return t}}}function hbe(e){return fbe(e)===BU}function dbe(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:s,areStatePropsEqual:f}){let a=!1,p,y,S,E,I;function L(K,J){return p=K,y=J,S=e(p,y),E=t(r,y),I=n(S,E,y),a=!0,I}function N(){return S=e(p,y),t.dependsOnOwnProps&&(E=t(r,y)),I=n(S,E,y),I}function j(){return e.dependsOnOwnProps&&(S=e(p,y)),t.dependsOnOwnProps&&(E=t(r,y)),I=n(S,E,y),I}function k(){const K=e(p,y),J=!f(K,S);return S=K,J&&(I=n(S,E,y)),I}function V(K,J){const ie=!s(J,y),Q=!i(K,p,J,y);return p=K,y=J,ie&&Q?N():ie?j():Q?k():I}return function(J,ie){return a?V(J,ie):L(J,ie)}}function pbe(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...i}){const s=t(e,i),f=n(e,i),a=r(e,i);return dbe(s,f,a,e,i)}function mbe(e,t){const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=(...s)=>t(i(...s)))}return n}function M4(e){return function(n){const r=e(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function A7(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function Oae(e,t){return function(r,{displayName:i}){const s=function(a,p){return s.dependsOnOwnProps?s.mapToProps(a,p):s.mapToProps(a,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(a,p){s.mapToProps=e,s.dependsOnOwnProps=A7(e);let y=s(a,p);return typeof y=="function"&&(s.mapToProps=y,s.dependsOnOwnProps=A7(y),y=s(a,p)),y},s}}function jU(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function gbe(e){return e&&typeof e=="object"?M4(t=>mbe(e,t)):e?typeof e=="function"?Oae(e):jU(e,"mapDispatchToProps"):M4(t=>({dispatch:t}))}function ybe(e){return e?typeof e=="function"?Oae(e):jU(e,"mapStateToProps"):M4(()=>({}))}function _be(e,t,n){return{...n,...e,...t}}function vbe(e){return function(n,{displayName:r,areMergedPropsEqual:i}){let s=!1,f;return function(p,y,S){const E=e(p,y,S);return s?i(E,f)||(f=E):(s=!0,f=E),f}}}function bbe(e){return e?typeof e=="function"?vbe(e):jU(e,"mergeProps"):()=>_be}function xbe(e){e()}function wbe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){xbe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var O7={notify(){},get:()=>[]};function Cae(e,t){let n,r=O7,i=0,s=!1;function f(j){S();const k=r.subscribe(j);let V=!1;return()=>{V||(V=!0,k(),E())}}function a(){r.notify()}function p(){N.onStateChange&&N.onStateChange()}function y(){return s}function S(){i++,n||(n=t?t.addNestedSub(p):e.subscribe(p),r=wbe())}function E(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=O7)}function I(){s||(s=!0,S())}function L(){s&&(s=!1,E())}const N={addNestedSub:f,notifyNestedSubs:a,handleChangeWrapper:p,isSubscribed:y,trySubscribe:I,tryUnsubscribe:L,getListeners:()=>r};return N}var Sbe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Tbe=Sbe(),Ebe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Abe=Ebe(),Obe=()=>Tbe||Abe?be.useLayoutEffect:be.useEffect,PD=Obe();function C7(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function u3(e,t){if(C7(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!C7(e[n[i]],t[n[i]]))return!1;return!0}var Cbe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Mbe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Dbe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Mae={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ibe={[ube]:Dbe,[cbe]:Mae};function M7(e){return hbe(e)?Mae:Ibe[e.$$typeof]||Cbe}var Pbe=Object.defineProperty,Rbe=Object.getOwnPropertyNames,D7=Object.getOwnPropertySymbols,kbe=Object.getOwnPropertyDescriptor,Lbe=Object.getPrototypeOf,I7=Object.prototype;function D4(e,t){if(typeof t!="string"){if(I7){const s=Lbe(t);s&&s!==I7&&D4(e,s)}let n=Rbe(t);D7&&(n=n.concat(D7(t)));const r=M7(e),i=M7(t);for(let s=0;s<n.length;++s){const f=n[s];if(!Mbe[f]&&!(i&&i[f])&&!(r&&r[f])){const a=kbe(t,f);try{Pbe(e,f,a)}catch{}}}}return e}var c3=Symbol.for("react-redux-context"),f3=typeof globalThis<"u"?globalThis:{};function zbe(){if(!be.createContext)return{};const e=f3[c3]??(f3[c3]=new Map);let t=e.get(be.createContext);return t||(t=be.createContext(null),e.set(be.createContext,t)),t}var Dae=zbe(),Nbe=[null,null];function Fbe(e,t,n){PD(()=>e(...t),n)}function Bbe(e,t,n,r,i,s){e.current=r,n.current=!1,i.current&&(i.current=null,s())}function jbe(e,t,n,r,i,s,f,a,p,y,S){if(!e)return()=>{};let E=!1,I=null;const L=()=>{if(E||!a.current)return;const j=t.getState();let k,V;try{k=r(j,i.current)}catch(K){V=K,I=K}V||(I=null),k===s.current?f.current||y():(s.current=k,p.current=k,f.current=!0,S())};return n.onStateChange=L,n.trySubscribe(),L(),()=>{if(E=!0,n.tryUnsubscribe(),n.onStateChange=null,I)throw I}}function Ube(e,t){return e===t}function $be(e,t,n,{pure:r,areStatesEqual:i=Ube,areOwnPropsEqual:s=u3,areStatePropsEqual:f=u3,areMergedPropsEqual:a=u3,forwardRef:p=!1,context:y=Dae}={}){const S=y,E=ybe(e),I=gbe(t),L=bbe(n),N=!!e;return k=>{const V=k.displayName||k.name||"Component",K=`Connect(${V})`,J={shouldHandleStateChanges:N,displayName:K,wrappedComponentName:V,WrappedComponent:k,initMapStateToProps:E,initMapDispatchToProps:I,initMergeProps:L,areStatesEqual:i,areStatePropsEqual:f,areOwnPropsEqual:s,areMergedPropsEqual:a};function ie(te){const[X,ae,le]=be.useMemo(()=>{const{reactReduxForwardedRef:mt,...Ct}=te;return[te.context,mt,Ct]},[te]),ge=be.useMemo(()=>{let mt=S;return X!=null&&X.Consumer,mt},[X,S]),ye=be.useContext(ge),De=!!te.store&&!!te.store.getState&&!!te.store.dispatch,He=!!ye&&!!ye.store,Be=De?te.store:ye.store,Ee=He?ye.getServerState:Be.getState,Fe=be.useMemo(()=>pbe(Be.dispatch,J),[Be]),[at,yt]=be.useMemo(()=>{if(!N)return Nbe;const mt=Cae(Be,De?void 0:ye.subscription),Ct=mt.notifyNestedSubs.bind(mt);return[mt,Ct]},[Be,De,ye]),je=be.useMemo(()=>De?ye:{...ye,subscription:at},[De,ye,at]),Ke=be.useRef(void 0),it=be.useRef(le),Pe=be.useRef(void 0),jt=be.useRef(!1),sn=be.useRef(!1),dn=be.useRef(void 0);PD(()=>(sn.current=!0,()=>{sn.current=!1}),[]);const Tn=be.useMemo(()=>()=>Pe.current&&le===it.current?Pe.current:Fe(Be.getState(),le),[Be,le]),Ut=be.useMemo(()=>Ct=>at?jbe(N,Be,at,Fe,it,Ke,jt,sn,Pe,yt,Ct):()=>{},[at]);Fbe(Bbe,[it,Ke,jt,le,Pe,yt]);let xe;try{xe=be.useSyncExternalStore(Ut,Tn,Ee?()=>Fe(Ee(),le):Tn)}catch(mt){throw dn.current&&(mt.message+=`
The error may be correlated with this previous error:
${dn.current.stack}

`),mt}PD(()=>{dn.current=void 0,Pe.current=void 0,Ke.current=xe});const Ye=be.useMemo(()=>be.createElement(k,{...xe,ref:ae}),[ae,k,xe]);return be.useMemo(()=>N?be.createElement(ge.Provider,{value:je},Ye):Ye,[ge,Ye,je])}const W=be.memo(ie);if(W.WrappedComponent=k,W.displayName=ie.displayName=K,p){const X=be.forwardRef(function(le,ge){return be.createElement(W,{...le,reactReduxForwardedRef:ge})});return X.displayName=K,X.WrappedComponent=k,D4(X,k)}return D4(W,k)}}var of=$be;function Vbe(e){const{children:t,context:n,serverState:r,store:i}=e,s=be.useMemo(()=>{const p=Cae(i);return{store:i,subscription:p,getServerState:r?()=>r:void 0}},[i,r]),f=be.useMemo(()=>i.getState(),[i]);PD(()=>{const{subscription:p}=s;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),f!==i.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[s,f]);const a=n||Dae;return be.createElement(a.Provider,{value:s},t)}var qbe=Vbe,h3={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var P7;function Hbe(){return P7||(P7=1,(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var f=typeof s;if(f==="string"||f==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&r.push(a)}}else if(f==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var p in s)t.call(s,p)&&s[p]&&r.push(p)}}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(h3)),h3.exports}var Gbe=Hbe();const sr=ma(Gbe);function Kr(){return Kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kr.apply(null,arguments)}function UU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function R7(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Ybe(e){var t=Wbe(e,"string");return typeof t=="symbol"?t:String(t)}function Wbe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Iae(e,t,n){var r=be.useRef(e!==void 0),i=be.useState(t),s=i[0],f=i[1],a=e!==void 0,p=r.current;return r.current=a,!a&&p&&s!==t&&f(t),[a?e:s,be.useCallback(function(y){for(var S=arguments.length,E=new Array(S>1?S-1:0),I=1;I<S;I++)E[I-1]=arguments[I];n&&n.apply(void 0,[y].concat(E)),f(y)},[n])]}function jA(e,t){return Object.keys(t).reduce(function(n,r){var i,s=n,f=s[R7(r)],a=s[r],p=UU(s,[R7(r),r].map(Ybe)),y=t[r],S=Iae(a,f,e[y]),E=S[0],I=S[1];return Kr({},p,(i={},i[r]=E,i[y]=I,i))},e)}function RD(e,t){return RD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},RD(e,t)}function Xbe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,RD(e,t)}const Zbe=["xxl","xl","lg","md","sm","xs"],Kbe="xs",UA=be.createContext({prefixes:{},breakpoints:Zbe,minBreakpoint:Kbe}),{Consumer:Jdt,Provider:ept}=UA;function xr(e,t){const{prefixes:n}=be.useContext(UA);return e||n[t]||t}function Pae(){const{breakpoints:e}=be.useContext(UA);return e}function Rae(){const{minBreakpoint:e}=be.useContext(UA);return e}function $U(){const{dir:e}=be.useContext(UA);return e==="rtl"}function NS(e){return e&&e.ownerDocument||document}function Qbe(e){var t=NS(e);return t&&t.defaultView||window}function Jbe(e,t){return Qbe(e).getComputedStyle(e,t)}var exe=/([A-Z])/g;function txe(e){return e.replace(exe,"-$1").toLowerCase()}var nxe=/^ms-/;function nM(e){return txe(e).replace(nxe,"-ms-")}var rxe=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function ixe(e){return!!(e&&rxe.test(e))}function Ny(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue(nM(t))||Jbe(e).getPropertyValue(nM(t));Object.keys(t).forEach(function(i){var s=t[i];!s&&s!==0?e.style.removeProperty(nM(i)):ixe(i)?r+=i+"("+s+") ":n+=nM(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}var d3={exports:{}},p3,k7;function axe(){if(k7)return p3;k7=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return p3=e,p3}var m3,L7;function oxe(){if(L7)return m3;L7=1;var e=axe();function t(){}function n(){}return n.resetWarningCache=t,m3=function(){function r(f,a,p,y,S,E){if(E!==e){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},m3}var z7;function sxe(){return z7||(z7=1,d3.exports=oxe()()),d3.exports}var lxe=sxe();const Bn=ma(lxe);var VU=Tae();const Fv=ma(VU),N7={disabled:!1},kae=tt.createContext(null);var uxe=function(t){return t.scrollTop},KE="unmounted",Pv="exited",cp="entering",My="entered",O2="exiting",c_=(function(e){Xbe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var f=i,a=f&&!f.isMounting?r.enter:r.appear,p;return s.appearStatus=null,r.in?a?(p=Pv,s.appearStatus=cp):p=My:r.unmountOnExit||r.mountOnEnter?p=KE:p=Pv,s.state={status:p},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var f=i.in;return f&&s.status===KE?{status:Pv}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var f=this.state.status;this.props.in?f!==cp&&f!==My&&(s=cp):(f===cp||f===My)&&(s=O2)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,f,a;return s=f=a=i,i!=null&&typeof i!="number"&&(s=i.exit,f=i.enter,a=i.appear!==void 0?i.appear:f),{exit:s,enter:f,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===cp){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:Fv.findDOMNode(this);f&&uxe(f)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Pv&&this.setState({status:KE})},n.performEnter=function(i){var s=this,f=this.props.enter,a=this.context?this.context.isMounting:i,p=this.props.nodeRef?[a]:[Fv.findDOMNode(this),a],y=p[0],S=p[1],E=this.getTimeouts(),I=a?E.appear:E.enter;if(!i&&!f||N7.disabled){this.safeSetState({status:My},function(){s.props.onEntered(y)});return}this.props.onEnter(y,S),this.safeSetState({status:cp},function(){s.props.onEntering(y,S),s.onTransitionEnd(I,function(){s.safeSetState({status:My},function(){s.props.onEntered(y,S)})})})},n.performExit=function(){var i=this,s=this.props.exit,f=this.getTimeouts(),a=this.props.nodeRef?void 0:Fv.findDOMNode(this);if(!s||N7.disabled){this.safeSetState({status:Pv},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:O2},function(){i.props.onExiting(a),i.onTransitionEnd(f.exit,function(){i.safeSetState({status:Pv},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,f=!0;return this.nextCallback=function(a){f&&(f=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var f=this.props.nodeRef?this.props.nodeRef.current:Fv.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!f||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var p=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],y=p[0],S=p[1];this.props.addEndListener(y,S)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===KE)return null;var s=this.props,f=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=UU(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return tt.createElement(kae.Provider,{value:null},typeof f=="function"?f(i,a):tt.cloneElement(tt.Children.only(f),a))},t})(tt.Component);c_.contextType=kae;c_.propTypes={};function Q1(){}c_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Q1,onEntering:Q1,onEntered:Q1,onExit:Q1,onExiting:Q1,onExited:Q1};c_.UNMOUNTED=KE;c_.EXITED=Pv;c_.ENTERING=cp;c_.ENTERED=My;c_.EXITING=O2;function Lae(e){return e.code==="Escape"||e.keyCode===27}function cxe(){const e=be.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function Px(e){if(!e||typeof e=="function")return null;const{major:t}=cxe();return t>=19?e.props.ref:e.ref}const FS=!!(typeof window<"u"&&window.document&&window.document.createElement);var I4=!1,P4=!1;try{var g3={get passive(){return I4=!0},get once(){return P4=I4=!0}};FS&&(window.addEventListener("test",g3,g3),window.removeEventListener("test",g3,!0))}catch{}function zae(e,t,n,r){if(r&&typeof r!="boolean"&&!P4){var i=r.once,s=r.capture,f=n;!P4&&i&&(f=n.__once||function a(p){this.removeEventListener(t,a,s),n.call(this,p)},n.__once=f),e.addEventListener(t,f,I4?r:s)}e.addEventListener(t,n,r)}function R4(e,t,n,r){var i=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)}function Dy(e,t,n,r){return zae(e,t,n,r),function(){R4(e,t,n,r)}}function fxe(e,t,n,r){if(r===void 0&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}function hxe(e){var t=Ny(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function dxe(e,t,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||fxe(e,"transitionend",!0)},t+n),s=Dy(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function Nae(e,t,n,r){n==null&&(n=hxe(e)||0);var i=dxe(e,n,r),s=Dy(e,"transitionend",t);return function(){i(),s()}}function F7(e,t){const n=Ny(e,t)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function qU(e,t){const n=F7(e,"transitionDuration"),r=F7(e,"transitionDelay"),i=Nae(e,s=>{s.target===e&&(i(),t(s))},n+r)}function SE(...e){return e.filter(t=>t!=null).reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?n:function(...i){t.apply(this,i),n.apply(this,i)}},null)}function Fae(e){e.offsetHeight}var B7=function(t){return!t||typeof t=="function"?t:function(n){t.current=n}};function pxe(e,t){var n=B7(e),r=B7(t);return function(i){n&&n(i),r&&r(i)}}function LP(e,t){return be.useMemo(function(){return pxe(e,t)},[e,t])}function kD(e){return e&&"setState"in e?Fv.findDOMNode(e):e??null}const zP=tt.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:f,children:a,childRef:p,...y},S)=>{const E=be.useRef(null),I=LP(E,p),L=W=>{I(kD(W))},N=W=>te=>{W&&E.current&&W(E.current,te)},j=be.useCallback(N(e),[e]),k=be.useCallback(N(t),[t]),V=be.useCallback(N(n),[n]),K=be.useCallback(N(r),[r]),J=be.useCallback(N(i),[i]),ie=be.useCallback(N(s),[s]),Q=be.useCallback(N(f),[f]);return Oe.jsx(c_,{ref:S,...y,onEnter:j,onEntered:V,onEntering:k,onExit:K,onExited:ie,onExiting:J,addEndListener:Q,nodeRef:E,children:typeof a=="function"?(W,te)=>a(W,{...te,ref:L}):tt.cloneElement(a,{ref:L})})});zP.displayName="TransitionWrapper";const mxe={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function gxe(e,t){const n=`offset${e[0].toUpperCase()}${e.slice(1)}`,r=t[n],i=mxe[e];return r+parseInt(Ny(t,i[0]),10)+parseInt(Ny(t,i[1]),10)}const yxe={[Pv]:"collapse",[O2]:"collapsing",[cp]:"collapsing",[My]:"collapse show"},Bae=tt.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:i,className:s,children:f,dimension:a="height",in:p=!1,timeout:y=300,mountOnEnter:S=!1,unmountOnExit:E=!1,appear:I=!1,getDimensionValue:L=gxe,...N},j)=>{const k=typeof a=="function"?a():a,V=be.useMemo(()=>SE(W=>{W.style[k]="0"},e),[k,e]),K=be.useMemo(()=>SE(W=>{const te=`scroll${k[0].toUpperCase()}${k.slice(1)}`;W.style[k]=`${W[te]}px`},t),[k,t]),J=be.useMemo(()=>SE(W=>{W.style[k]=null},n),[k,n]),ie=be.useMemo(()=>SE(W=>{W.style[k]=`${L(k,W)}px`,Fae(W)},r),[r,L,k]),Q=be.useMemo(()=>SE(W=>{W.style[k]=null},i),[k,i]);return Oe.jsx(zP,{ref:j,addEndListener:qU,...N,"aria-expanded":N.role?p:null,onEnter:V,onEntering:K,onEntered:J,onExit:ie,onExiting:Q,childRef:Px(f),in:p,timeout:y,mountOnEnter:S,unmountOnExit:E,appear:I,children:(W,te)=>tt.cloneElement(f,{...te,className:sr(s,f.props.className,yxe[W],k==="width"&&"collapse-horizontal")})})});Bae.displayName="Collapse";function _xe(e){var t=be.useRef(e);return be.useEffect(function(){t.current=e},[e]),t}function Zy(e){var t=_xe(e);return be.useCallback(function(){return t.current&&t.current.apply(t,arguments)},[t])}const $A=(e=>be.forwardRef((t,n)=>Oe.jsx("div",{...t,ref:n,className:sr(t.className,e)}))),jae=$A("h4");jae.displayName="DivStyledAsH4";const Uae=be.forwardRef(({className:e,bsPrefix:t,as:n=jae,...r},i)=>(t=xr(t,"alert-heading"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Uae.displayName="AlertHeading";function j7(){return be.useState(null)}function vxe(e){const t=be.useRef(e);return be.useEffect(()=>{t.current=e},[e]),t}function Wh(e){const t=vxe(e);return be.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function $ae(){const e=be.useRef(!0),t=be.useRef(()=>e.current);return be.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function bxe(e){const t=be.useRef(null);return be.useEffect(()=>{t.current=e}),t.current}const xxe=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",wxe=typeof document<"u",U7=wxe||xxe?be.useLayoutEffect:be.useEffect,Sxe=["as","disabled"];function Txe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Exe(e){return!e||e.trim()==="#"}function HU({tagName:e,disabled:t,href:n,target:r,rel:i,role:s,onClick:f,tabIndex:a=0,type:p}){e||(n!=null||r!=null||i!=null?e="a":e="button");const y={tagName:e};if(e==="button")return[{type:p||"button",disabled:t},y];const S=I=>{if((t||e==="a"&&Exe(n))&&I.preventDefault(),t){I.stopPropagation();return}f==null||f(I)},E=I=>{I.key===" "&&(I.preventDefault(),S(I))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:t?void 0:a,href:n,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?i:void 0,onClick:S,onKeyDown:E},y]}const Vae=be.forwardRef((e,t)=>{let{as:n,disabled:r}=e,i=Txe(e,Sxe);const[s,{tagName:f}]=HU(Object.assign({tagName:n,disabled:r},i));return Oe.jsx(f,Object.assign({},i,s,{ref:t}))});Vae.displayName="Button";const Axe=["onKeyDown"];function Oxe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Cxe(e){return!e||e.trim()==="#"}const GU=be.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=Oxe(e,Axe);const[i]=HU(Object.assign({tagName:"a"},r)),s=Wh(f=>{i.onKeyDown(f),n==null||n(f)});return Cxe(r.href)||r.role==="button"?Oe.jsx("a",Object.assign({ref:t},r,i,{onKeyDown:s})):Oe.jsx("a",Object.assign({ref:t},r,{onKeyDown:n}))});GU.displayName="Anchor";const qae=be.forwardRef(({className:e,bsPrefix:t,as:n=GU,...r},i)=>(t=xr(t,"alert-link"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));qae.displayName="AlertLink";const Mxe={[cp]:"show",[My]:"show"},sg=be.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:r,...i},s)=>{const f={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},a=be.useCallback((p,y)=>{Fae(p),r==null||r(p,y)},[r]);return Oe.jsx(zP,{ref:s,addEndListener:qU,...f,onEnter:a,childRef:Px(t),children:(p,y)=>be.cloneElement(t,{...y,className:sr("fade",e,t.props.className,Mxe[p],n[p])})})});sg.displayName="Fade";const Dxe={"aria-label":Bn.string,onClick:Bn.func,variant:Bn.oneOf(["white"])},VA=be.forwardRef(({className:e,variant:t,"aria-label":n="Close",...r},i)=>Oe.jsx("button",{ref:i,type:"button",className:sr("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...r}));VA.displayName="CloseButton";VA.propTypes=Dxe;const Hae=be.forwardRef((e,t)=>{const{bsPrefix:n,show:r=!0,closeLabel:i="Close alert",closeVariant:s,className:f,children:a,variant:p="primary",onClose:y,dismissible:S,transition:E=sg,...I}=jA(e,{show:"onClose"}),L=xr(n,"alert"),N=Zy(V=>{y&&y(!1,V)}),j=E===!0?sg:E,k=Oe.jsxs("div",{role:"alert",...j?void 0:I,ref:t,className:sr(f,L,p&&`${L}-${p}`,S&&`${L}-dismissible`),children:[S&&Oe.jsx(VA,{onClick:N,"aria-label":i,variant:s}),a]});return j?Oe.jsx(j,{unmountOnExit:!0,...I,ref:void 0,in:r,children:k}):r?k:null});Hae.displayName="Alert";const k4=Object.assign(Hae,{Link:qae,Heading:Uae}),LD=be.forwardRef(({bsPrefix:e,bg:t="primary",pill:n=!1,text:r,className:i,as:s="span",...f},a)=>{const p=xr(e,"badge");return Oe.jsx(s,{ref:a,...f,className:sr(i,p,n&&"rounded-pill",r&&`text-${r}`,t&&`bg-${t}`)})});LD.displayName="Badge";const hc=be.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:r,active:i=!1,disabled:s=!1,className:f,...a},p)=>{const y=xr(t,"btn"),[S,{tagName:E}]=HU({tagName:e,disabled:s,...a}),I=E;return Oe.jsx(I,{...S,...a,ref:p,disabled:s,className:sr(f,y,i&&"active",n&&`${y}-${n}`,r&&`${y}-${r}`,a.href&&s&&"disabled")})});hc.displayName="Button";const YU=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=xr(t,"card-body"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));YU.displayName="CardBody";const Gae=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=xr(t,"card-footer"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Gae.displayName="CardFooter";const WU=be.createContext(null);WU.displayName="CardHeaderContext";const Yae=be.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},i)=>{const s=xr(e,"card-header"),f=be.useMemo(()=>({cardHeaderBsPrefix:s}),[s]);return Oe.jsx(WU.Provider,{value:f,children:Oe.jsx(n,{ref:i,...r,className:sr(t,s)})})});Yae.displayName="CardHeader";const Wae=be.forwardRef(({bsPrefix:e,className:t,variant:n,as:r="img",...i},s)=>{const f=xr(e,"card-img");return Oe.jsx(r,{ref:s,className:sr(n?`${f}-${n}`:f,t),...i})});Wae.displayName="CardImg";const Xae=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=xr(t,"card-img-overlay"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Xae.displayName="CardImgOverlay";const Zae=be.forwardRef(({className:e,bsPrefix:t,as:n="a",...r},i)=>(t=xr(t,"card-link"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Zae.displayName="CardLink";const Ixe=$A("h6"),Kae=be.forwardRef(({className:e,bsPrefix:t,as:n=Ixe,...r},i)=>(t=xr(t,"card-subtitle"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Kae.displayName="CardSubtitle";const Qae=be.forwardRef(({className:e,bsPrefix:t,as:n="p",...r},i)=>(t=xr(t,"card-text"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Qae.displayName="CardText";const Pxe=$A("h5"),Jae=be.forwardRef(({className:e,bsPrefix:t,as:n=Pxe,...r},i)=>(t=xr(t,"card-title"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Jae.displayName="CardTitle";const eoe=be.forwardRef(({bsPrefix:e,className:t,bg:n,text:r,border:i,body:s=!1,children:f,as:a="div",...p},y)=>{const S=xr(e,"card");return Oe.jsx(a,{ref:y,...p,className:sr(t,S,n&&`bg-${n}`,r&&`text-${r}`,i&&`border-${i}`),children:s?Oe.jsx(YU,{children:f}):f})});eoe.displayName="Card";const $b=Object.assign(eoe,{Img:Wae,Title:Jae,Subtitle:Kae,Body:YU,Link:Zae,Text:Qae,Header:Yae,Footer:Gae,ImgOverlay:Xae});function Rxe(){var e=be.useRef(!0),t=be.useRef(function(){return e.current});return be.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),t.current}function kxe(e){var t=be.useRef(e);return t.current=e,t}function toe(e){var t=kxe(e);be.useEffect(function(){return function(){return t.current()}},[])}var L4=Math.pow(2,31)-1;function noe(e,t,n){var r=n-Date.now();e.current=r<=L4?setTimeout(t,r):setTimeout(function(){return noe(e,t,n)},L4)}function Lxe(){var e=Rxe(),t=be.useRef();return toe(function(){return clearTimeout(t.current)}),be.useMemo(function(){var n=function(){return clearTimeout(t.current)};function r(i,s){s===void 0&&(s=0),e()&&(n(),s<=L4?t.current=setTimeout(i,s):noe(t,i,Date.now()+s))}return{set:r,clear:n}},[])}function $7(e,t){let n=0;return be.Children.map(e,r=>be.isValidElement(r)?t(r,n++):r)}function zxe(e,t){let n=0;be.Children.forEach(e,r=>{be.isValidElement(r)&&t(r,n++)})}function Nxe(e,t){return be.Children.toArray(e).some(n=>be.isValidElement(n)&&n.type===t)}function Fxe({as:e,bsPrefix:t,className:n,...r}){t=xr(t,"col");const i=Pae(),s=Rae(),f=[],a=[];return i.forEach(p=>{const y=r[p];delete r[p];let S,E,I;typeof y=="object"&&y!=null?{span:S,offset:E,order:I}=y:S=y;const L=p!==s?`-${p}`:"";S&&f.push(S===!0?`${t}${L}`:`${t}${L}-${S}`),I!=null&&a.push(`order${L}-${I}`),E!=null&&a.push(`offset${L}-${E}`)}),[{...r,className:sr(n,...f,...a)},{as:e,bsPrefix:t,spans:f}]}const Gr=be.forwardRef((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:f}]=Fxe(e);return Oe.jsx(i,{...r,ref:t,className:sr(n,!f.length&&s)})});Gr.displayName="Col";const roe=be.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:r,...i},s)=>{const f=xr(e,"container"),a=typeof t=="string"?`-${t}`:"-fluid";return Oe.jsx(n,{ref:s,...i,className:sr(r,t?`${f}${a}`:f)})});roe.displayName="Container";var Bxe=Function.prototype.bind.call(Function.prototype.call,[].slice);function Lb(e,t){return Bxe(e.querySelectorAll(t))}function jxe(e,t,n){const r=be.useRef(e!==void 0),[i,s]=be.useState(t),f=e!==void 0,a=r.current;return r.current=f,!f&&a&&i!==t&&s(t),[f?e:i,be.useCallback((...p)=>{const[y,...S]=p;let E=n==null?void 0:n(y,...S);return s(y),E},[n])]}function Uxe(){const[,e]=be.useReducer(t=>t+1,0);return e}var V7=Object.prototype.hasOwnProperty;function q7(e,t,n){for(n of e.keys())if(c2(n,t))return n}function c2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&c2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=q7(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=q7(t,i),!i)||!c2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(V7.call(e,n)&&++r&&!V7.call(t,n)||!(n in t)||!c2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function $xe(e){const t=$ae();return[e[0],be.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var Jc="top",nd="bottom",rd="right",ef="left",XU="auto",qA=[Jc,nd,rd,ef],Bw="start",C2="end",Vxe="clippingParents",ioe="viewport",TE="popper",qxe="reference",H7=qA.reduce(function(e,t){return e.concat([t+"-"+Bw,t+"-"+C2])},[]),aoe=[].concat(qA,[XU]).reduce(function(e,t){return e.concat([t,t+"-"+Bw,t+"-"+C2])},[]),Hxe="beforeRead",Gxe="read",Yxe="afterRead",Wxe="beforeMain",Xxe="main",Zxe="afterMain",Kxe="beforeWrite",Qxe="write",Jxe="afterWrite",e1e=[Hxe,Gxe,Yxe,Wxe,Xxe,Zxe,Kxe,Qxe,Jxe];function Zm(e){return e.split("-")[0]}function th(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function fx(e){var t=th(e).Element;return e instanceof t||e instanceof Element}function Km(e){var t=th(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function ZU(e){if(typeof ShadowRoot>"u")return!1;var t=th(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var Jb=Math.max,zD=Math.min,jw=Math.round;function z4(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ooe(){return!/^((?!chrome|android).)*safari/i.test(z4())}function Uw(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&Km(e)&&(i=e.offsetWidth>0&&jw(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&jw(r.height)/e.offsetHeight||1);var f=fx(e)?th(e):window,a=f.visualViewport,p=!ooe()&&n,y=(r.left+(p&&a?a.offsetLeft:0))/i,S=(r.top+(p&&a?a.offsetTop:0))/s,E=r.width/i,I=r.height/s;return{width:E,height:I,top:S,right:y+E,bottom:S+I,left:y,x:y,y:S}}function KU(e){var t=Uw(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function soe(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&ZU(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Zv(e){return e?(e.nodeName||"").toLowerCase():null}function Ky(e){return th(e).getComputedStyle(e)}function t1e(e){return["table","td","th"].indexOf(Zv(e))>=0}function o0(e){return((fx(e)?e.ownerDocument:e.document)||window.document).documentElement}function NP(e){return Zv(e)==="html"?e:e.assignedSlot||e.parentNode||(ZU(e)?e.host:null)||o0(e)}function G7(e){return!Km(e)||Ky(e).position==="fixed"?null:e.offsetParent}function n1e(e){var t=/firefox/i.test(z4()),n=/Trident/i.test(z4());if(n&&Km(e)){var r=Ky(e);if(r.position==="fixed")return null}var i=NP(e);for(ZU(i)&&(i=i.host);Km(i)&&["html","body"].indexOf(Zv(i))<0;){var s=Ky(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function HA(e){for(var t=th(e),n=G7(e);n&&t1e(n)&&Ky(n).position==="static";)n=G7(n);return n&&(Zv(n)==="html"||Zv(n)==="body"&&Ky(n).position==="static")?t:n||n1e(e)||t}function QU(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function f2(e,t,n){return Jb(e,zD(t,n))}function r1e(e,t,n){var r=f2(e,t,n);return r>n?n:r}function loe(){return{top:0,right:0,bottom:0,left:0}}function uoe(e){return Object.assign({},loe(),e)}function coe(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var i1e=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,uoe(typeof t!="number"?t:coe(t,qA))};function a1e(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,f=n.modifiersData.popperOffsets,a=Zm(n.placement),p=QU(a),y=[ef,rd].indexOf(a)>=0,S=y?"height":"width";if(!(!s||!f)){var E=i1e(i.padding,n),I=KU(s),L=p==="y"?Jc:ef,N=p==="y"?nd:rd,j=n.rects.reference[S]+n.rects.reference[p]-f[p]-n.rects.popper[S],k=f[p]-n.rects.reference[p],V=HA(s),K=V?p==="y"?V.clientHeight||0:V.clientWidth||0:0,J=j/2-k/2,ie=E[L],Q=K-I[S]-E[N],W=K/2-I[S]/2+J,te=f2(ie,W,Q),X=p;n.modifiersData[r]=(t={},t[X]=te,t.centerOffset=te-W,t)}}function o1e(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||soe(t.elements.popper,i)&&(t.elements.arrow=i))}const s1e={name:"arrow",enabled:!0,phase:"main",fn:a1e,effect:o1e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $w(e){return e.split("-")[1]}var l1e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function u1e(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:jw(n*i)/i||0,y:jw(r*i)/i||0}}function Y7(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,f=e.offsets,a=e.position,p=e.gpuAcceleration,y=e.adaptive,S=e.roundOffsets,E=e.isFixed,I=f.x,L=I===void 0?0:I,N=f.y,j=N===void 0?0:N,k=typeof S=="function"?S({x:L,y:j}):{x:L,y:j};L=k.x,j=k.y;var V=f.hasOwnProperty("x"),K=f.hasOwnProperty("y"),J=ef,ie=Jc,Q=window;if(y){var W=HA(n),te="clientHeight",X="clientWidth";if(W===th(n)&&(W=o0(n),Ky(W).position!=="static"&&a==="absolute"&&(te="scrollHeight",X="scrollWidth")),W=W,i===Jc||(i===ef||i===rd)&&s===C2){ie=nd;var ae=E&&W===Q&&Q.visualViewport?Q.visualViewport.height:W[te];j-=ae-r.height,j*=p?1:-1}if(i===ef||(i===Jc||i===nd)&&s===C2){J=rd;var le=E&&W===Q&&Q.visualViewport?Q.visualViewport.width:W[X];L-=le-r.width,L*=p?1:-1}}var ge=Object.assign({position:a},y&&l1e),ye=S===!0?u1e({x:L,y:j},th(n)):{x:L,y:j};if(L=ye.x,j=ye.y,p){var De;return Object.assign({},ge,(De={},De[ie]=K?"0":"",De[J]=V?"0":"",De.transform=(Q.devicePixelRatio||1)<=1?"translate("+L+"px, "+j+"px)":"translate3d("+L+"px, "+j+"px, 0)",De))}return Object.assign({},ge,(t={},t[ie]=K?j+"px":"",t[J]=V?L+"px":"",t.transform="",t))}function c1e(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,f=s===void 0?!0:s,a=n.roundOffsets,p=a===void 0?!0:a,y={placement:Zm(t.placement),variation:$w(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Y7(Object.assign({},y,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:p})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Y7(Object.assign({},y,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const f1e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:c1e,data:{}};var rM={passive:!0};function h1e(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=i===void 0?!0:i,f=r.resize,a=f===void 0?!0:f,p=th(t.elements.popper),y=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&y.forEach(function(S){S.addEventListener("scroll",n.update,rM)}),a&&p.addEventListener("resize",n.update,rM),function(){s&&y.forEach(function(S){S.removeEventListener("scroll",n.update,rM)}),a&&p.removeEventListener("resize",n.update,rM)}}const d1e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:h1e,data:{}};var p1e={left:"right",right:"left",bottom:"top",top:"bottom"};function JM(e){return e.replace(/left|right|bottom|top/g,function(t){return p1e[t]})}var m1e={start:"end",end:"start"};function W7(e){return e.replace(/start|end/g,function(t){return m1e[t]})}function JU(e){var t=th(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function e$(e){return Uw(o0(e)).left+JU(e).scrollLeft}function g1e(e,t){var n=th(e),r=o0(e),i=n.visualViewport,s=r.clientWidth,f=r.clientHeight,a=0,p=0;if(i){s=i.width,f=i.height;var y=ooe();(y||!y&&t==="fixed")&&(a=i.offsetLeft,p=i.offsetTop)}return{width:s,height:f,x:a+e$(e),y:p}}function y1e(e){var t,n=o0(e),r=JU(e),i=(t=e.ownerDocument)==null?void 0:t.body,s=Jb(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),f=Jb(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+e$(e),p=-r.scrollTop;return Ky(i||n).direction==="rtl"&&(a+=Jb(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:f,x:a,y:p}}function t$(e){var t=Ky(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function foe(e){return["html","body","#document"].indexOf(Zv(e))>=0?e.ownerDocument.body:Km(e)&&t$(e)?e:foe(NP(e))}function h2(e,t){var n;t===void 0&&(t=[]);var r=foe(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=th(r),f=i?[s].concat(s.visualViewport||[],t$(r)?r:[]):r,a=t.concat(f);return i?a:a.concat(h2(NP(f)))}function N4(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function _1e(e,t){var n=Uw(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function X7(e,t,n){return t===ioe?N4(g1e(e,n)):fx(t)?_1e(t,n):N4(y1e(o0(e)))}function v1e(e){var t=h2(NP(e)),n=["absolute","fixed"].indexOf(Ky(e).position)>=0,r=n&&Km(e)?HA(e):e;return fx(r)?t.filter(function(i){return fx(i)&&soe(i,r)&&Zv(i)!=="body"}):[]}function b1e(e,t,n,r){var i=t==="clippingParents"?v1e(e):[].concat(t),s=[].concat(i,[n]),f=s[0],a=s.reduce(function(p,y){var S=X7(e,y,r);return p.top=Jb(S.top,p.top),p.right=zD(S.right,p.right),p.bottom=zD(S.bottom,p.bottom),p.left=Jb(S.left,p.left),p},X7(e,f,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function hoe(e){var t=e.reference,n=e.element,r=e.placement,i=r?Zm(r):null,s=r?$w(r):null,f=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,p;switch(i){case Jc:p={x:f,y:t.y-n.height};break;case nd:p={x:f,y:t.y+t.height};break;case rd:p={x:t.x+t.width,y:a};break;case ef:p={x:t.x-n.width,y:a};break;default:p={x:t.x,y:t.y}}var y=i?QU(i):null;if(y!=null){var S=y==="y"?"height":"width";switch(s){case Bw:p[y]=p[y]-(t[S]/2-n[S]/2);break;case C2:p[y]=p[y]+(t[S]/2-n[S]/2);break}}return p}function M2(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,s=n.strategy,f=s===void 0?e.strategy:s,a=n.boundary,p=a===void 0?Vxe:a,y=n.rootBoundary,S=y===void 0?ioe:y,E=n.elementContext,I=E===void 0?TE:E,L=n.altBoundary,N=L===void 0?!1:L,j=n.padding,k=j===void 0?0:j,V=uoe(typeof k!="number"?k:coe(k,qA)),K=I===TE?qxe:TE,J=e.rects.popper,ie=e.elements[N?K:I],Q=b1e(fx(ie)?ie:ie.contextElement||o0(e.elements.popper),p,S,f),W=Uw(e.elements.reference),te=hoe({reference:W,element:J,placement:i}),X=N4(Object.assign({},J,te)),ae=I===TE?X:W,le={top:Q.top-ae.top+V.top,bottom:ae.bottom-Q.bottom+V.bottom,left:Q.left-ae.left+V.left,right:ae.right-Q.right+V.right},ge=e.modifiersData.offset;if(I===TE&&ge){var ye=ge[i];Object.keys(le).forEach(function(De){var He=[rd,nd].indexOf(De)>=0?1:-1,Be=[Jc,nd].indexOf(De)>=0?"y":"x";le[De]+=ye[Be]*He})}return le}function x1e(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,f=n.padding,a=n.flipVariations,p=n.allowedAutoPlacements,y=p===void 0?aoe:p,S=$w(r),E=S?a?H7:H7.filter(function(N){return $w(N)===S}):qA,I=E.filter(function(N){return y.indexOf(N)>=0});I.length===0&&(I=E);var L=I.reduce(function(N,j){return N[j]=M2(e,{placement:j,boundary:i,rootBoundary:s,padding:f})[Zm(j)],N},{});return Object.keys(L).sort(function(N,j){return L[N]-L[j]})}function w1e(e){if(Zm(e)===XU)return[];var t=JM(e);return[W7(e),t,W7(t)]}function S1e(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,f=n.altAxis,a=f===void 0?!0:f,p=n.fallbackPlacements,y=n.padding,S=n.boundary,E=n.rootBoundary,I=n.altBoundary,L=n.flipVariations,N=L===void 0?!0:L,j=n.allowedAutoPlacements,k=t.options.placement,V=Zm(k),K=V===k,J=p||(K||!N?[JM(k)]:w1e(k)),ie=[k].concat(J).reduce(function(jt,sn){return jt.concat(Zm(sn)===XU?x1e(t,{placement:sn,boundary:S,rootBoundary:E,padding:y,flipVariations:N,allowedAutoPlacements:j}):sn)},[]),Q=t.rects.reference,W=t.rects.popper,te=new Map,X=!0,ae=ie[0],le=0;le<ie.length;le++){var ge=ie[le],ye=Zm(ge),De=$w(ge)===Bw,He=[Jc,nd].indexOf(ye)>=0,Be=He?"width":"height",Ee=M2(t,{placement:ge,boundary:S,rootBoundary:E,altBoundary:I,padding:y}),Fe=He?De?rd:ef:De?nd:Jc;Q[Be]>W[Be]&&(Fe=JM(Fe));var at=JM(Fe),yt=[];if(s&&yt.push(Ee[ye]<=0),a&&yt.push(Ee[Fe]<=0,Ee[at]<=0),yt.every(function(jt){return jt})){ae=ge,X=!1;break}te.set(ge,yt)}if(X)for(var je=N?3:1,Ke=function(sn){var dn=ie.find(function(Tn){var Ut=te.get(Tn);if(Ut)return Ut.slice(0,sn).every(function(xe){return xe})});if(dn)return ae=dn,"break"},it=je;it>0;it--){var Pe=Ke(it);if(Pe==="break")break}t.placement!==ae&&(t.modifiersData[r]._skip=!0,t.placement=ae,t.reset=!0)}}const T1e={name:"flip",enabled:!0,phase:"main",fn:S1e,requiresIfExists:["offset"],data:{_skip:!1}};function Z7(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function K7(e){return[Jc,rd,nd,ef].some(function(t){return e[t]>=0})}function E1e(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,f=M2(t,{elementContext:"reference"}),a=M2(t,{altBoundary:!0}),p=Z7(f,r),y=Z7(a,i,s),S=K7(p),E=K7(y);t.modifiersData[n]={referenceClippingOffsets:p,popperEscapeOffsets:y,isReferenceHidden:S,hasPopperEscaped:E},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":S,"data-popper-escaped":E})}const A1e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:E1e};function O1e(e,t,n){var r=Zm(e),i=[ef,Jc].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,f=s[0],a=s[1];return f=f||0,a=(a||0)*i,[ef,rd].indexOf(r)>=0?{x:a,y:f}:{x:f,y:a}}function C1e(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=i===void 0?[0,0]:i,f=aoe.reduce(function(S,E){return S[E]=O1e(E,t.rects,s),S},{}),a=f[t.placement],p=a.x,y=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=p,t.modifiersData.popperOffsets.y+=y),t.modifiersData[r]=f}const M1e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:C1e};function D1e(e){var t=e.state,n=e.name;t.modifiersData[n]=hoe({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const I1e={name:"popperOffsets",enabled:!0,phase:"read",fn:D1e,data:{}};function P1e(e){return e==="x"?"y":"x"}function R1e(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=i===void 0?!0:i,f=n.altAxis,a=f===void 0?!1:f,p=n.boundary,y=n.rootBoundary,S=n.altBoundary,E=n.padding,I=n.tether,L=I===void 0?!0:I,N=n.tetherOffset,j=N===void 0?0:N,k=M2(t,{boundary:p,rootBoundary:y,padding:E,altBoundary:S}),V=Zm(t.placement),K=$w(t.placement),J=!K,ie=QU(V),Q=P1e(ie),W=t.modifiersData.popperOffsets,te=t.rects.reference,X=t.rects.popper,ae=typeof j=="function"?j(Object.assign({},t.rects,{placement:t.placement})):j,le=typeof ae=="number"?{mainAxis:ae,altAxis:ae}:Object.assign({mainAxis:0,altAxis:0},ae),ge=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,ye={x:0,y:0};if(W){if(s){var De,He=ie==="y"?Jc:ef,Be=ie==="y"?nd:rd,Ee=ie==="y"?"height":"width",Fe=W[ie],at=Fe+k[He],yt=Fe-k[Be],je=L?-X[Ee]/2:0,Ke=K===Bw?te[Ee]:X[Ee],it=K===Bw?-X[Ee]:-te[Ee],Pe=t.elements.arrow,jt=L&&Pe?KU(Pe):{width:0,height:0},sn=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:loe(),dn=sn[He],Tn=sn[Be],Ut=f2(0,te[Ee],jt[Ee]),xe=J?te[Ee]/2-je-Ut-dn-le.mainAxis:Ke-Ut-dn-le.mainAxis,Ye=J?-te[Ee]/2+je+Ut+Tn+le.mainAxis:it+Ut+Tn+le.mainAxis,ct=t.elements.arrow&&HA(t.elements.arrow),mt=ct?ie==="y"?ct.clientTop||0:ct.clientLeft||0:0,Ct=(De=ge==null?void 0:ge[ie])!=null?De:0,Yt=Fe+xe-Ct-mt,gn=Fe+Ye-Ct,An=f2(L?zD(at,Yt):at,Fe,L?Jb(yt,gn):yt);W[ie]=An,ye[ie]=An-Fe}if(a){var ar,or=ie==="x"?Jc:ef,Nr=ie==="x"?nd:rd,Pr=W[Q],Er=Q==="y"?"height":"width",Tr=Pr+k[or],pi=Pr-k[Nr],Fr=[Jc,ef].indexOf(V)!==-1,hi=(ar=ge==null?void 0:ge[Q])!=null?ar:0,$t=Fr?Tr:Pr-te[Er]-X[Er]-hi+le.altAxis,En=Fr?Pr+te[Er]+X[Er]-hi-le.altAxis:pi,ur=L&&Fr?r1e($t,Pr,En):f2(L?$t:Tr,Pr,L?En:pi);W[Q]=ur,ye[Q]=ur-Pr}t.modifiersData[r]=ye}}const k1e={name:"preventOverflow",enabled:!0,phase:"main",fn:R1e,requiresIfExists:["offset"]};function L1e(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function z1e(e){return e===th(e)||!Km(e)?JU(e):L1e(e)}function N1e(e){var t=e.getBoundingClientRect(),n=jw(t.width)/e.offsetWidth||1,r=jw(t.height)/e.offsetHeight||1;return n!==1||r!==1}function F1e(e,t,n){n===void 0&&(n=!1);var r=Km(t),i=Km(t)&&N1e(t),s=o0(t),f=Uw(e,i,n),a={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(r||!r&&!n)&&((Zv(t)!=="body"||t$(s))&&(a=z1e(t)),Km(t)?(p=Uw(t,!0),p.x+=t.clientLeft,p.y+=t.clientTop):s&&(p.x=e$(s))),{x:f.left+a.scrollLeft-p.x,y:f.top+a.scrollTop-p.y,width:f.width,height:f.height}}function B1e(e){var t=new Map,n=new Set,r=[];e.forEach(function(s){t.set(s.name,s)});function i(s){n.add(s.name);var f=[].concat(s.requires||[],s.requiresIfExists||[]);f.forEach(function(a){if(!n.has(a)){var p=t.get(a);p&&i(p)}}),r.push(s)}return e.forEach(function(s){n.has(s.name)||i(s)}),r}function j1e(e){var t=B1e(e);return e1e.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function U1e(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function $1e(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var Q7={placement:"bottom",modifiers:[],strategy:"absolute"};function J7(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function V1e(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,s=i===void 0?Q7:i;return function(a,p,y){y===void 0&&(y=s);var S={placement:"bottom",orderedModifiers:[],options:Object.assign({},Q7,s),modifiersData:{},elements:{reference:a,popper:p},attributes:{},styles:{}},E=[],I=!1,L={state:S,setOptions:function(V){var K=typeof V=="function"?V(S.options):V;j(),S.options=Object.assign({},s,S.options,K),S.scrollParents={reference:fx(a)?h2(a):a.contextElement?h2(a.contextElement):[],popper:h2(p)};var J=j1e($1e([].concat(r,S.options.modifiers)));return S.orderedModifiers=J.filter(function(ie){return ie.enabled}),N(),L.update()},forceUpdate:function(){if(!I){var V=S.elements,K=V.reference,J=V.popper;if(J7(K,J)){S.rects={reference:F1e(K,HA(J),S.options.strategy==="fixed"),popper:KU(J)},S.reset=!1,S.placement=S.options.placement,S.orderedModifiers.forEach(function(le){return S.modifiersData[le.name]=Object.assign({},le.data)});for(var ie=0;ie<S.orderedModifiers.length;ie++){if(S.reset===!0){S.reset=!1,ie=-1;continue}var Q=S.orderedModifiers[ie],W=Q.fn,te=Q.options,X=te===void 0?{}:te,ae=Q.name;typeof W=="function"&&(S=W({state:S,options:X,name:ae,instance:L})||S)}}}},update:U1e(function(){return new Promise(function(k){L.forceUpdate(),k(S)})}),destroy:function(){j(),I=!0}};if(!J7(a,p))return L;L.setOptions(y).then(function(k){!I&&y.onFirstUpdate&&y.onFirstUpdate(k)});function N(){S.orderedModifiers.forEach(function(k){var V=k.name,K=k.options,J=K===void 0?{}:K,ie=k.effect;if(typeof ie=="function"){var Q=ie({state:S,name:V,instance:L,options:J}),W=function(){};E.push(Q||W)}})}function j(){E.forEach(function(k){return k()}),E=[]}return L}}const q1e=V1e({defaultModifiers:[A1e,I1e,f1e,d1e,M1e,T1e,k1e,s1e]}),H1e=["enabled","placement","strategy","modifiers"];function G1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const Y1e={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},W1e={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const r=(t.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==n.id);r.length?t.setAttribute("aria-describedby",r.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:r}=e.elements,i=(t=n.getAttribute("role"))==null?void 0:t.toLowerCase();if(n.id&&i==="tooltip"&&"setAttribute"in r){const s=r.getAttribute("aria-describedby");if(s&&s.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",s?`${s},${n.id}`:n.id)}}},X1e=[];function Z1e(e,t,n={}){let{enabled:r=!0,placement:i="bottom",strategy:s="absolute",modifiers:f=X1e}=n,a=G1e(n,H1e);const p=be.useRef(f),y=be.useRef(),S=be.useCallback(()=>{var k;(k=y.current)==null||k.update()},[]),E=be.useCallback(()=>{var k;(k=y.current)==null||k.forceUpdate()},[]),[I,L]=$xe(be.useState({placement:i,update:S,forceUpdate:E,attributes:{},styles:{popper:{},arrow:{}}})),N=be.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:k})=>{const V={},K={};Object.keys(k.elements).forEach(J=>{V[J]=k.styles[J],K[J]=k.attributes[J]}),L({state:k,styles:V,attributes:K,update:S,forceUpdate:E,placement:k.placement})}}),[S,E,L]),j=be.useMemo(()=>(c2(p.current,f)||(p.current=f),p.current),[f]);return be.useEffect(()=>{!y.current||!r||y.current.setOptions({placement:i,strategy:s,modifiers:[...j,N,Y1e]})},[s,i,N,r,j]),be.useEffect(()=>{if(!(!r||e==null||t==null))return y.current=q1e(e,t,Object.assign({},a,{placement:i,strategy:s,modifiers:[...j,W1e,N]})),()=>{y.current!=null&&(y.current.destroy(),y.current=void 0,L(k=>Object.assign({},k,{attributes:{},styles:{popper:{}}})))}},[r,e,t]),I}function D2(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}var y3,eY;function K1e(){if(eY)return y3;eY=1;var e=function(){};return y3=e,y3}var Q1e=K1e();const J1e=ma(Q1e),tY=()=>{};function ewe(e){return e.button===0}function twe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const eD=e=>e&&("current"in e?e.current:e),nY={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function nwe(e,t=tY,{disabled:n,clickTrigger:r="click"}={}){const i=be.useRef(!1),s=be.useRef(!1),f=be.useCallback(y=>{const S=eD(e);J1e(!!S,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!S||twe(y)||!ewe(y)||!!D2(S,y.target)||s.current,s.current=!1},[e]),a=Wh(y=>{const S=eD(e);S&&D2(S,y.target)?s.current=!0:s.current=!1}),p=Wh(y=>{i.current||t(y)});be.useEffect(()=>{var y,S;if(n||e==null)return;const E=NS(eD(e)),I=E.defaultView||window;let L=(y=I.event)!=null?y:(S=I.parent)==null?void 0:S.event,N=null;nY[r]&&(N=Dy(E,nY[r],a,!0));const j=Dy(E,r,f,!0),k=Dy(E,r,K=>{if(K===L){L=void 0;return}p(K)});let V=[];return"ontouchstart"in E.documentElement&&(V=[].slice.call(E.body.children).map(K=>Dy(K,"mousemove",tY))),()=>{N==null||N(),j(),k(),V.forEach(K=>K())}},[e,n,r,f,a,p])}function rwe(e){const t={};return Array.isArray(e)?(e==null||e.forEach(n=>{t[n.name]=n}),t):e||t}function iwe(e={}){return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function awe({enabled:e,enableEvents:t,placement:n,flip:r,offset:i,fixed:s,containerPadding:f,arrowElement:a,popperConfig:p={}}){var y,S,E,I;const L=rwe(p.modifiers);return Object.assign({},p,{placement:n,enabled:e,strategy:s?"fixed":p.strategy,modifiers:iwe(Object.assign({},L,{eventListeners:{enabled:t,options:(y=L.eventListeners)==null?void 0:y.options},preventOverflow:Object.assign({},L.preventOverflow,{options:Object.assign({padding:f},(S=L.preventOverflow)==null?void 0:S.options)}),offset:{options:Object.assign({offset:i},(E=L.offset)==null?void 0:E.options)},arrow:Object.assign({},L.arrow,{enabled:!!a,options:Object.assign({},(I=L.arrow)==null?void 0:I.options,{element:a})}),flip:Object.assign({enabled:!!r},L.flip)}))})}const doe={prefix:String(Math.round(Math.random()*1e10)),current:0},poe=tt.createContext(doe),owe=tt.createContext(!1);let _3=new WeakMap;function swe(e=!1){let t=be.useContext(poe),n=be.useRef(null);if(n.current===null&&!e){var r,i;let s=(i=tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(s){let f=_3.get(s);f==null?_3.set(s,{id:t.current,state:s.memoizedState}):s.memoizedState!==f.state&&(t.current=f.id,_3.delete(s))}n.current=++t.current}return n.current}function lwe(e){let t=be.useContext(poe),n=swe(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`}function uwe(e){let t=tt.useId(),[n]=be.useState(pwe()),r=n?"react-aria":`react-aria${doe.prefix}`;return e||`${r}-${t}`}const cwe=typeof tt.useId=="function"?uwe:lwe;function fwe(){return!1}function hwe(){return!0}function dwe(e){return()=>{}}function pwe(){return typeof tt.useSyncExternalStore=="function"?tt.useSyncExternalStore(dwe,fwe,hwe):be.useContext(owe)}const hx=be.createContext(null),Vw=(e,t=null)=>e!=null?String(e):t||null,n$=be.createContext(null);n$.displayName="NavContext";const mwe="data-rr-ui-",gwe="rrUi";function FP(e){return`${mwe}${e}`}function ywe(e){return`${gwe}${e}`}const moe=be.createContext(FS?window:void 0);moe.Provider;function r$(){return be.useContext(moe)}var _we=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",vwe=typeof document<"u";const goe=vwe||_we?be.useLayoutEffect:be.useEffect,yoe=be.createContext(null);yoe.displayName="InputGroupContext";const BS=be.createContext(null);BS.displayName="NavbarContext";Bn.string,Bn.bool,Bn.bool,Bn.bool,Bn.bool;const tD=be.forwardRef(({bsPrefix:e,className:t,fluid:n=!1,rounded:r=!1,roundedCircle:i=!1,thumbnail:s=!1,...f},a)=>(e=xr(e,"img"),Oe.jsx("img",{ref:a,...f,className:sr(t,n&&`${e}-fluid`,r&&"rounded",i&&"rounded-circle",s&&`${e}-thumbnail`)})));tD.displayName="Image";const bwe={type:Bn.string,tooltip:Bn.bool,as:Bn.elementType},BP=be.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:r=!1,...i},s)=>Oe.jsx(e,{...i,ref:s,className:sr(t,`${n}-${r?"tooltip":"feedback"}`)}));BP.displayName="Feedback";BP.propTypes=bwe;const Qy=be.createContext({}),GA=be.forwardRef(({id:e,bsPrefix:t,className:n,type:r="checkbox",isValid:i=!1,isInvalid:s=!1,as:f="input",...a},p)=>{const{controlId:y}=be.useContext(Qy);return t=xr(t,"form-check-input"),Oe.jsx(f,{...a,ref:p,type:r,id:e||y,className:sr(n,t,i&&"is-valid",s&&"is-invalid")})});GA.displayName="FormCheckInput";const ND=be.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...r},i)=>{const{controlId:s}=be.useContext(Qy);return e=xr(e,"form-check-label"),Oe.jsx("label",{...r,ref:i,htmlFor:n||s,className:sr(t,e)})});ND.displayName="FormCheckLabel";const _oe=be.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:r=!1,reverse:i=!1,disabled:s=!1,isValid:f=!1,isInvalid:a=!1,feedbackTooltip:p=!1,feedback:y,feedbackType:S,className:E,style:I,title:L="",type:N="checkbox",label:j,children:k,as:V="input",...K},J)=>{t=xr(t,"form-check"),n=xr(n,"form-switch");const{controlId:ie}=be.useContext(Qy),Q=be.useMemo(()=>({controlId:e||ie}),[ie,e]),W=!k&&j!=null&&j!==!1||Nxe(k,ND),te=Oe.jsx(GA,{...K,type:N==="switch"?"checkbox":N,ref:J,isValid:f,isInvalid:a,disabled:s,as:V});return Oe.jsx(Qy.Provider,{value:Q,children:Oe.jsx("div",{style:I,className:sr(E,W&&t,r&&`${t}-inline`,i&&`${t}-reverse`,N==="switch"&&n),children:k||Oe.jsxs(Oe.Fragment,{children:[te,W&&Oe.jsx(ND,{title:L,children:j}),y&&Oe.jsx(BP,{type:S,tooltip:p,children:y})]})})})});_oe.displayName="FormCheck";const FD=Object.assign(_oe,{Input:GA,Label:ND}),voe=be.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:r,id:i,className:s,isValid:f=!1,isInvalid:a=!1,plaintext:p,readOnly:y,as:S="input",...E},I)=>{const{controlId:L}=be.useContext(Qy);return e=xr(e,"form-control"),Oe.jsx(S,{...E,type:t,size:r,ref:I,readOnly:y,id:i||L,className:sr(s,p?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,f&&"is-valid",a&&"is-invalid")})});voe.displayName="FormControl";const boe=Object.assign(voe,{Feedback:BP}),xoe=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=xr(t,"form-floating"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));xoe.displayName="FormFloating";const i$=be.forwardRef(({controlId:e,as:t="div",...n},r)=>{const i=be.useMemo(()=>({controlId:e}),[e]);return Oe.jsx(Qy.Provider,{value:i,children:Oe.jsx(t,{...n,ref:r})})});i$.displayName="FormGroup";const woe=be.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:r=!1,className:i,htmlFor:s,...f},a)=>{const{controlId:p}=be.useContext(Qy);t=xr(t,"form-label");let y="col-form-label";typeof n=="string"&&(y=`${y} ${y}-${n}`);const S=sr(i,t,r&&"visually-hidden",n&&y);return s=s||p,n?Oe.jsx(Gr,{ref:a,as:"label",className:S,htmlFor:s,...f}):Oe.jsx(e,{ref:a,className:S,htmlFor:s,...f})});woe.displayName="FormLabel";const Soe=be.forwardRef(({bsPrefix:e,className:t,id:n,...r},i)=>{const{controlId:s}=be.useContext(Qy);return e=xr(e,"form-range"),Oe.jsx("input",{...r,type:"range",ref:i,className:sr(t,e),id:n||s})});Soe.displayName="FormRange";const Toe=be.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:r,isValid:i=!1,isInvalid:s=!1,id:f,...a},p)=>{const{controlId:y}=be.useContext(Qy);return e=xr(e,"form-select"),Oe.jsx("select",{...a,size:n,ref:p,className:sr(r,e,t&&`${e}-${t}`,i&&"is-valid",s&&"is-invalid"),id:f||y})});Toe.displayName="FormSelect";const Eoe=be.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:r,...i},s)=>(e=xr(e,"form-text"),Oe.jsx(n,{...i,ref:s,className:sr(t,e,r&&"text-muted")})));Eoe.displayName="FormText";const Aoe=be.forwardRef((e,t)=>Oe.jsx(FD,{...e,ref:t,type:"switch"}));Aoe.displayName="Switch";const xwe=Object.assign(Aoe,{Input:FD.Input,Label:FD.Label}),Ooe=be.forwardRef(({bsPrefix:e,className:t,children:n,controlId:r,label:i,...s},f)=>(e=xr(e,"form-floating"),Oe.jsxs(i$,{ref:f,className:sr(t,e),controlId:r,...s,children:[n,Oe.jsx("label",{htmlFor:r,children:i})]})));Ooe.displayName="FloatingLabel";const wwe={_ref:Bn.any,validated:Bn.bool,as:Bn.elementType},a$=be.forwardRef(({className:e,validated:t,as:n="form",...r},i)=>Oe.jsx(n,{...r,ref:i,className:sr(e,t&&"was-validated")}));a$.displayName="Form";a$.propTypes=wwe;const Vb=Object.assign(a$,{Group:i$,Control:boe,Floating:xoe,Check:FD,Switch:xwe,Label:woe,Text:Eoe,Range:Soe,Select:Toe,FloatingLabel:Ooe}),jP=be.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},i)=>(t=xr(t,"input-group-text"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));jP.displayName="InputGroupText";const Swe=e=>Oe.jsx(jP,{children:Oe.jsx(GA,{type:"checkbox",...e})}),Twe=e=>Oe.jsx(jP,{children:Oe.jsx(GA,{type:"radio",...e})}),Coe=be.forwardRef(({bsPrefix:e,size:t,hasValidation:n,className:r,as:i="div",...s},f)=>{e=xr(e,"input-group");const a=be.useMemo(()=>({}),[]);return Oe.jsx(yoe.Provider,{value:a,children:Oe.jsx(i,{ref:f,...s,className:sr(r,e,t&&`${e}-${t}`,n&&"has-validation")})})});Coe.displayName="InputGroup";const Ewe=Object.assign(Coe,{Text:jP,Radio:Twe,Checkbox:Swe}),rY=e=>!e||typeof e=="function"?e:t=>{e.current=t};function Awe(e,t){const n=rY(e),r=rY(t);return i=>{n&&n(i),r&&r(i)}}function YA(e,t){return be.useMemo(()=>Awe(e,t),[e,t])}const jS=be.createContext(null),Owe=["as","active","eventKey"];function Cwe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function o$({key:e,onClick:t,active:n,id:r,role:i,disabled:s}){const f=be.useContext(hx),a=be.useContext(n$),p=be.useContext(jS);let y=n;const S={role:i};if(a){!i&&a.role==="tablist"&&(S.role="tab");const E=a.getControllerId(e??null),I=a.getControlledId(e??null);S[FP("event-key")]=e,S.id=E||r,y=n==null&&e!=null?a.activeKey===e:n,(y||!(p!=null&&p.unmountOnExit)&&!(p!=null&&p.mountOnEnter))&&(S["aria-controls"]=I)}return S.role==="tab"&&(S["aria-selected"]=y,y||(S.tabIndex=-1),s&&(S.tabIndex=-1,S["aria-disabled"]=!0)),S.onClick=Wh(E=>{s||(t==null||t(E),e!=null&&f&&!E.isPropagationStopped()&&f(e,E))}),[S,{isActive:y}]}const Moe=be.forwardRef((e,t)=>{let{as:n=Vae,active:r,eventKey:i}=e,s=Cwe(e,Owe);const[f,a]=o$(Object.assign({key:Vw(i,s.href),active:r},s));return f[FP("active")]=a.isActive,Oe.jsx(n,Object.assign({},s,f,{ref:t}))});Moe.displayName="NavItem";const Mwe=["as","onSelect","activeKey","role","onKeyDown"];function Dwe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const iY=()=>{},aY=FP("event-key"),Doe=be.forwardRef((e,t)=>{let{as:n="div",onSelect:r,activeKey:i,role:s,onKeyDown:f}=e,a=Dwe(e,Mwe);const p=Uxe(),y=be.useRef(!1),S=be.useContext(hx),E=be.useContext(jS);let I,L;E&&(s=s||"tablist",i=E.activeKey,I=E.getControlledId,L=E.getControllerId);const N=be.useRef(null),j=J=>{const ie=N.current;if(!ie)return null;const Q=Lb(ie,`[${aY}]:not([aria-disabled=true])`),W=ie.querySelector("[aria-selected=true]");if(!W||W!==document.activeElement)return null;const te=Q.indexOf(W);if(te===-1)return null;let X=te+J;return X>=Q.length&&(X=0),X<0&&(X=Q.length-1),Q[X]},k=(J,ie)=>{J!=null&&(r==null||r(J,ie),S==null||S(J,ie))},V=J=>{if(f==null||f(J),!E)return;let ie;switch(J.key){case"ArrowLeft":case"ArrowUp":ie=j(-1);break;case"ArrowRight":case"ArrowDown":ie=j(1);break;default:return}ie&&(J.preventDefault(),k(ie.dataset[ywe("EventKey")]||null,J),y.current=!0,p())};be.useEffect(()=>{if(N.current&&y.current){const J=N.current.querySelector(`[${aY}][aria-selected=true]`);J==null||J.focus()}y.current=!1});const K=YA(t,N);return Oe.jsx(hx.Provider,{value:k,children:Oe.jsx(n$.Provider,{value:{role:s,activeKey:Vw(i),getControlledId:I||iY,getControllerId:L||iY},children:Oe.jsx(n,Object.assign({},a,{onKeyDown:V,ref:K,role:s}))})})});Doe.displayName="Nav";const Ioe=Object.assign(Doe,{Item:Moe}),Poe=be.forwardRef(({bsPrefix:e,active:t,disabled:n,eventKey:r,className:i,variant:s,action:f,as:a,...p},y)=>{e=xr(e,"list-group-item");const[S,E]=o$({key:Vw(r,p.href),active:t,...p}),I=Zy(N=>{if(n){N.preventDefault(),N.stopPropagation();return}S.onClick(N)});n&&p.tabIndex===void 0&&(p.tabIndex=-1,p["aria-disabled"]=!0);const L=a||(f?p.href?"a":"button":"div");return Oe.jsx(L,{ref:y,...p,...S,onClick:I,className:sr(i,e,E.isActive&&"active",n&&"disabled",s&&`${e}-${s}`,f&&`${e}-action`)})});Poe.displayName="ListGroupItem";const Roe=be.forwardRef((e,t)=>{const{className:n,bsPrefix:r,variant:i,horizontal:s,numbered:f,as:a="div",...p}=jA(e,{activeKey:"onSelect"}),y=xr(r,"list-group");let S;return s&&(S=s===!0?"horizontal":`horizontal-${s}`),Oe.jsx(Ioe,{ref:t,...p,as:a,className:sr(n,y,i&&`${y}-${i}`,S&&`${y}-${S}`,f&&`${y}-numbered`)})});Roe.displayName="ListGroup";const BD=Object.assign(Roe,{Item:Poe});var iM;function oY(e){if((!iM&&iM!==0||e)&&FS){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),iM=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return iM}function Iwe(){return be.useState(null)}function v3(e){e===void 0&&(e=NS());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function Pwe(e){const t=be.useRef(e);return t.current=e,t}function Rwe(e){const t=Pwe(e);be.useEffect(()=>()=>t.current(),[])}function kwe(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const sY=FP("modal-open");class s${constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return kwe(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();t.style={overflow:i.style.overflow,[r]:i.style[r]},t.scrollBarWidth&&(n[r]=`${parseInt(Ny(i,r)||"0",10)+t.scrollBarWidth}px`),i.setAttribute(sY,""),Ny(i,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(sY),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const b3=(e,t)=>FS?e==null?(t||NS()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function F4(e,t){const n=r$(),[r,i]=be.useState(()=>b3(e,n==null?void 0:n.document));if(!r){const s=b3(e);s&&i(s)}return be.useEffect(()=>{},[t,r]),be.useEffect(()=>{const s=b3(e);s!==r&&i(s)},[e,r]),r}function l$({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=be.useRef(null),f=be.useRef(t),a=Wh(n);be.useEffect(()=>{t?f.current=!0:a(s.current)},[t,a]);const p=YA(s,Px(e)),y=be.cloneElement(e,{ref:p});return t?y:i||!f.current&&r?null:y}const Lwe=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function zwe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Nwe(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:i,onExiting:s,onExited:f,addEndListener:a,children:p}=e,y=zwe(e,Lwe);const S=be.useRef(null),E=YA(S,Px(p)),I=ie=>Q=>{ie&&S.current&&ie(S.current,Q)},L=be.useCallback(I(t),[t]),N=be.useCallback(I(n),[n]),j=be.useCallback(I(r),[r]),k=be.useCallback(I(i),[i]),V=be.useCallback(I(s),[s]),K=be.useCallback(I(f),[f]),J=be.useCallback(I(a),[a]);return Object.assign({},y,{nodeRef:S},t&&{onEnter:L},n&&{onEntering:N},r&&{onEntered:j},i&&{onExit:k},s&&{onExiting:V},f&&{onExited:K},a&&{addEndListener:J},{children:typeof p=="function"?(ie,Q)=>p(ie,Object.assign({},Q,{ref:E})):be.cloneElement(p,{ref:E})})}const Fwe=["component"];function Bwe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const jwe=be.forwardRef((e,t)=>{let{component:n}=e,r=Bwe(e,Fwe);const i=Nwe(r);return Oe.jsx(n,Object.assign({ref:t},i))});function Uwe({in:e,onTransition:t}){const n=be.useRef(null),r=be.useRef(!0),i=Wh(t);return U7(()=>{if(!n.current)return;let s=!1;return i({in:e,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[e,i]),U7(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function $we({children:e,in:t,onExited:n,onEntered:r,transition:i}){const[s,f]=be.useState(!t);t&&s&&f(!1);const a=Uwe({in:!!t,onTransition:y=>{const S=()=>{y.isStale()||(y.in?r==null||r(y.element,y.initial):(f(!0),n==null||n(y.element)))};Promise.resolve(i(y)).then(S,E=>{throw y.in||f(!0),E})}}),p=YA(a,Px(e));return s&&!t?null:be.cloneElement(e,{ref:p})}function B4(e,t,n){return e?Oe.jsx(jwe,Object.assign({},n,{component:e})):t?Oe.jsx($we,Object.assign({},n,{transition:t})):Oe.jsx(l$,Object.assign({},n))}const Vwe=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function qwe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}let x3;function Hwe(e){return x3||(x3=new s$({ownerDocument:e==null?void 0:e.document})),x3}function Gwe(e){const t=r$(),n=e||Hwe(t),r=be.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:be.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:be.useCallback(i=>{r.current.backdrop=i},[])})}const koe=be.forwardRef((e,t)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:f,backdrop:a=!0,keyboard:p=!0,onBackdropClick:y,onEscapeKeyDown:S,transition:E,runTransition:I,backdropTransition:L,runBackdropTransition:N,autoFocus:j=!0,enforceFocus:k=!0,restoreFocus:V=!0,restoreFocusOptions:K,renderDialog:J,renderBackdrop:ie=gn=>Oe.jsx("div",Object.assign({},gn)),manager:Q,container:W,onShow:te,onHide:X=()=>{},onExit:ae,onExited:le,onExiting:ge,onEnter:ye,onEntering:De,onEntered:He}=e,Be=qwe(e,Vwe);const Ee=r$(),Fe=F4(W),at=Gwe(Q),yt=$ae(),je=bxe(n),[Ke,it]=be.useState(!n),Pe=be.useRef(null);be.useImperativeHandle(t,()=>at,[at]),FS&&!je&&n&&(Pe.current=v3(Ee==null?void 0:Ee.document)),n&&Ke&&it(!1);const jt=Wh(()=>{if(at.add(),Ye.current=Dy(document,"keydown",Ut),xe.current=Dy(document,"focus",()=>setTimeout(dn),!0),te&&te(),j){var gn,An;const ar=v3((gn=(An=at.dialog)==null?void 0:An.ownerDocument)!=null?gn:Ee==null?void 0:Ee.document);at.dialog&&ar&&!D2(at.dialog,ar)&&(Pe.current=ar,at.dialog.focus())}}),sn=Wh(()=>{if(at.remove(),Ye.current==null||Ye.current(),xe.current==null||xe.current(),V){var gn;(gn=Pe.current)==null||gn.focus==null||gn.focus(K),Pe.current=null}});be.useEffect(()=>{!n||!Fe||jt()},[n,Fe,jt]),be.useEffect(()=>{Ke&&sn()},[Ke,sn]),Rwe(()=>{sn()});const dn=Wh(()=>{if(!k||!yt()||!at.isTopModal())return;const gn=v3(Ee==null?void 0:Ee.document);at.dialog&&gn&&!D2(at.dialog,gn)&&at.dialog.focus()}),Tn=Wh(gn=>{gn.target===gn.currentTarget&&(y==null||y(gn),a===!0&&X())}),Ut=Wh(gn=>{p&&Lae(gn)&&at.isTopModal()&&(S==null||S(gn),gn.defaultPrevented||X())}),xe=be.useRef(),Ye=be.useRef(),ct=(...gn)=>{it(!0),le==null||le(...gn)};if(!Fe)return null;const mt=Object.assign({role:r,ref:at.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},Be,{style:s,className:i,tabIndex:-1});let Ct=J?J(mt):Oe.jsx("div",Object.assign({},mt,{children:be.cloneElement(f,{role:"document"})}));Ct=B4(E,I,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:ae,onExiting:ge,onExited:ct,onEnter:ye,onEntering:De,onEntered:He,children:Ct});let Yt=null;return a&&(Yt=ie({ref:at.setBackdropRef,onClick:Tn}),Yt=B4(L,N,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Yt})),Oe.jsx(Oe.Fragment,{children:Fv.createPortal(Oe.jsxs(Oe.Fragment,{children:[Yt,Ct]}),Fe)})});koe.displayName="Modal";const Loe=Object.assign(koe,{Manager:s$});function j4(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Ywe(e,t){e.classList?e.classList.add(t):j4(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function lY(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Wwe(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=lY(e.className,t):e.setAttribute("class",lY(e.className&&e.className.baseVal||"",t))}const J1={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class zoe extends s${adjustAndStore(t,n,r){const i=n.style[t];n.dataset[t]=i,Ny(n,{[t]:`${parseFloat(Ny(n,t))+r}px`})}restore(t,n){const r=n.dataset[t];r!==void 0&&(delete n.dataset[t],Ny(n,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(Ywe(n,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Lb(n,J1.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,t.scrollBarWidth)),Lb(n,J1.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-t.scrollBarWidth)),Lb(n,J1.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();Wwe(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Lb(n,J1.FIXED_CONTENT).forEach(s=>this.restore(r,s)),Lb(n,J1.STICKY_CONTENT).forEach(s=>this.restore(i,s)),Lb(n,J1.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let w3;function Noe(e){return w3||(w3=new zoe(e)),w3}const Foe=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=xr(t,"modal-body"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Foe.displayName="ModalBody";const u$=be.createContext({onHide(){}}),c$=be.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:r,size:i,fullscreen:s,children:f,scrollable:a,...p},y)=>{e=xr(e,"modal");const S=`${e}-dialog`,E=typeof s=="string"?`${e}-fullscreen-${s}`:`${e}-fullscreen`;return Oe.jsx("div",{...p,ref:y,className:sr(S,t,i&&`${e}-${i}`,r&&`${S}-centered`,a&&`${S}-scrollable`,s&&E),children:Oe.jsx("div",{className:sr(`${e}-content`,n),children:f})})});c$.displayName="ModalDialog";const Boe=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=xr(t,"modal-footer"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Boe.displayName="ModalFooter";const f$=be.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:r,children:i,...s},f)=>{const a=be.useContext(u$),p=Zy(()=>{a==null||a.onHide(),r==null||r()});return Oe.jsxs("div",{ref:f,...s,children:[i,n&&Oe.jsx(VA,{"aria-label":e,variant:t,onClick:p})]})});f$.displayName="AbstractModalHeader";const joe=be.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(e=xr(e,"modal-header"),Oe.jsx(f$,{ref:s,...i,className:sr(t,e),closeLabel:n,closeButton:r})));joe.displayName="ModalHeader";const Xwe=$A("h4"),Uoe=be.forwardRef(({className:e,bsPrefix:t,as:n=Xwe,...r},i)=>(t=xr(t,"modal-title"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Uoe.displayName="ModalTitle";function Zwe(e){return Oe.jsx(sg,{...e,timeout:null})}function Kwe(e){return Oe.jsx(sg,{...e,timeout:null})}const $oe=be.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:r,contentClassName:i,children:s,dialogAs:f=c$,"data-bs-theme":a,"aria-labelledby":p,"aria-describedby":y,"aria-label":S,show:E=!1,animation:I=!0,backdrop:L=!0,keyboard:N=!0,onEscapeKeyDown:j,onShow:k,onHide:V,container:K,autoFocus:J=!0,enforceFocus:ie=!0,restoreFocus:Q=!0,restoreFocusOptions:W,onEntered:te,onExit:X,onExiting:ae,onEnter:le,onEntering:ge,onExited:ye,backdropClassName:De,manager:He,...Be},Ee)=>{const[Fe,at]=be.useState({}),[yt,je]=be.useState(!1),Ke=be.useRef(!1),it=be.useRef(!1),Pe=be.useRef(null),[jt,sn]=Iwe(),dn=LP(Ee,sn),Tn=Zy(V),Ut=$U();e=xr(e,"modal");const xe=be.useMemo(()=>({onHide:Tn}),[Tn]);function Ye(){return He||Noe({isRTL:Ut})}function ct($t){if(!FS)return;const En=Ye().getScrollbarWidth()>0,ur=$t.scrollHeight>NS($t).documentElement.clientHeight;at({paddingRight:En&&!ur?oY():void 0,paddingLeft:!En&&ur?oY():void 0})}const mt=Zy(()=>{jt&&ct(jt.dialog)});toe(()=>{R4(window,"resize",mt),Pe.current==null||Pe.current()});const Ct=()=>{Ke.current=!0},Yt=$t=>{Ke.current&&jt&&$t.target===jt.dialog&&(it.current=!0),Ke.current=!1},gn=()=>{je(!0),Pe.current=Nae(jt.dialog,()=>{je(!1)})},An=$t=>{$t.target===$t.currentTarget&&gn()},ar=$t=>{if(L==="static"){An($t);return}if(it.current||$t.target!==$t.currentTarget){it.current=!1;return}V==null||V()},or=$t=>{N?j==null||j($t):($t.preventDefault(),L==="static"&&gn())},Nr=($t,En)=>{$t&&ct($t),le==null||le($t,En)},Pr=$t=>{Pe.current==null||Pe.current(),X==null||X($t)},Er=($t,En)=>{ge==null||ge($t,En),zae(window,"resize",mt)},Tr=$t=>{$t&&($t.style.display=""),ye==null||ye($t),R4(window,"resize",mt)},pi=be.useCallback($t=>Oe.jsx("div",{...$t,className:sr(`${e}-backdrop`,De,!I&&"show")}),[I,De,e]),Fr={...n,...Fe};Fr.display="block";const hi=$t=>Oe.jsx("div",{role:"dialog",...$t,style:Fr,className:sr(t,e,yt&&`${e}-static`,!I&&"show"),onClick:L?ar:void 0,onMouseUp:Yt,"data-bs-theme":a,"aria-label":S,"aria-labelledby":p,"aria-describedby":y,children:Oe.jsx(f,{...Be,onMouseDown:Ct,className:r,contentClassName:i,children:s})});return Oe.jsx(u$.Provider,{value:xe,children:Oe.jsx(Loe,{show:E,ref:dn,backdrop:L,container:K,keyboard:!0,autoFocus:J,enforceFocus:ie,restoreFocus:Q,restoreFocusOptions:W,onEscapeKeyDown:or,onShow:k,onHide:V,onEnter:Nr,onEntering:Er,onEntered:te,onExit:Pr,onExiting:ae,onExited:Tr,manager:Ye(),transition:I?Zwe:void 0,backdropTransition:I?Kwe:void 0,renderBackdrop:pi,renderDialog:hi})})});$oe.displayName="Modal";const Zs=Object.assign($oe,{Body:Foe,Header:joe,Title:Uoe,Footer:Boe,Dialog:c$,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),h$=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=xr(t,"nav-item"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));h$.displayName="NavItem";const d$=be.forwardRef(({bsPrefix:e,className:t,as:n=GU,active:r,eventKey:i,disabled:s=!1,...f},a)=>{e=xr(e,"nav-link");const[p,y]=o$({key:Vw(i,f.href),active:r,disabled:s,...f});return Oe.jsx(n,{...f,...p,ref:a,disabled:s,className:sr(t,e,s&&"disabled",y.isActive&&"active")})});d$.displayName="NavLink";const Voe=be.forwardRef((e,t)=>{const{as:n="div",bsPrefix:r,variant:i,fill:s=!1,justify:f=!1,navbar:a,navbarScroll:p,className:y,activeKey:S,...E}=jA(e,{activeKey:"onSelect"}),I=xr(r,"nav");let L,N,j=!1;const k=be.useContext(BS),V=be.useContext(WU);return k?(L=k.bsPrefix,j=a??!0):V&&({cardHeaderBsPrefix:N}=V),Oe.jsx(Ioe,{as:n,ref:t,activeKey:S,className:sr(y,{[I]:!j,[`${L}-nav`]:j,[`${L}-nav-scroll`]:j&&p,[`${N}-${i}`]:!!N,[`${I}-${i}`]:!!i,[`${I}-fill`]:s,[`${I}-justified`]:f}),...E})});Voe.displayName="Nav";const sp=Object.assign(Voe,{Item:h$,Link:d$}),qoe=be.forwardRef(({bsPrefix:e,className:t,as:n,...r},i)=>{e=xr(e,"navbar-brand");const s=n||(r.href?"a":"span");return Oe.jsx(s,{...r,ref:i,className:sr(t,e)})});qoe.displayName="NavbarBrand";const Hoe=be.forwardRef(({children:e,bsPrefix:t,...n},r)=>{t=xr(t,"navbar-collapse");const i=be.useContext(BS);return Oe.jsx(Bae,{in:!!(i&&i.expanded),...n,children:Oe.jsx("div",{ref:r,className:t,children:e})})});Hoe.displayName="NavbarCollapse";const Goe=be.forwardRef(({bsPrefix:e,className:t,children:n,label:r="Toggle navigation",as:i="button",onClick:s,...f},a)=>{e=xr(e,"navbar-toggler");const{onToggle:p,expanded:y}=be.useContext(BS)||{},S=Zy(E=>{s&&s(E),p&&p()});return i==="button"&&(f.type="button"),Oe.jsx(i,{...f,ref:a,onClick:S,"aria-label":r,className:sr(t,e,!y&&"collapsed"),children:n||Oe.jsx("span",{className:`${e}-icon`})})});Goe.displayName="NavbarToggle";var U4=new WeakMap,uY=function(t,n){if(!(!t||!n)){var r=U4.get(n)||new Map;U4.set(n,r);var i=r.get(t);return i||(i=n.matchMedia(t),i.refCount=0,r.set(i.media,i)),i}};function Qwe(e,t){t===void 0&&(t=typeof window>"u"?void 0:window);var n=uY(e,t),r=be.useState(function(){return n?n.matches:!1}),i=r[0],s=r[1];return goe(function(){var f=uY(e,t);if(!f)return s(!1);var a=U4.get(t),p=function(){s(f.matches)};return f.refCount++,f.addListener(p),p(),function(){f.removeListener(p),f.refCount--,f.refCount<=0&&(a==null||a.delete(f.media)),f=void 0}},[e]),i}function Jwe(e){var t=Object.keys(e);function n(a,p){return a===p?p:a?a+" and "+p:p}function r(a){return t[Math.min(t.indexOf(a)+1,t.length-1)]}function i(a){var p=r(a),y=e[p];return typeof y=="number"?y=y-.2+"px":y="calc("+y+" - 0.2px)","(max-width: "+y+")"}function s(a){var p=e[a];return typeof p=="number"&&(p=p+"px"),"(min-width: "+p+")"}function f(a,p,y){var S;if(typeof a=="object")S=a,y=p,p=!0;else{var E;p=p||!0,S=(E={},E[a]=p,E)}var I=be.useMemo(function(){return Object.entries(S).reduce(function(L,N){var j=N[0],k=N[1];return(k==="up"||k===!0)&&(L=n(L,s(j))),(k==="down"||k===!0)&&(L=n(L,i(j))),L},"")},[JSON.stringify(S)]);return Qwe(I,y)}return f}var eSe=Jwe({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});const Yoe=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=xr(t,"offcanvas-body"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Yoe.displayName="OffcanvasBody";const tSe={[cp]:"show",[My]:"show"},Woe=be.forwardRef(({bsPrefix:e,className:t,children:n,in:r=!1,mountOnEnter:i=!1,unmountOnExit:s=!1,appear:f=!1,...a},p)=>(e=xr(e,"offcanvas"),Oe.jsx(zP,{ref:p,addEndListener:qU,in:r,mountOnEnter:i,unmountOnExit:s,appear:f,...a,childRef:Px(n),children:(y,S)=>be.cloneElement(n,{...S,className:sr(t,n.props.className,(y===cp||y===O2)&&`${e}-toggling`,tSe[y])})})));Woe.displayName="OffcanvasToggling";const Xoe=be.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(e=xr(e,"offcanvas-header"),Oe.jsx(f$,{ref:s,...i,className:sr(t,e),closeLabel:n,closeButton:r})));Xoe.displayName="OffcanvasHeader";const nSe=$A("h5"),Zoe=be.forwardRef(({className:e,bsPrefix:t,as:n=nSe,...r},i)=>(t=xr(t,"offcanvas-title"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Zoe.displayName="OffcanvasTitle";function rSe(e){return Oe.jsx(Woe,{...e})}function iSe(e){return Oe.jsx(sg,{...e})}const Koe=be.forwardRef(({bsPrefix:e,className:t,children:n,"aria-labelledby":r,placement:i="start",responsive:s,show:f=!1,backdrop:a=!0,keyboard:p=!0,scroll:y=!1,onEscapeKeyDown:S,onShow:E,onHide:I,container:L,autoFocus:N=!0,enforceFocus:j=!0,restoreFocus:k=!0,restoreFocusOptions:V,onEntered:K,onExit:J,onExiting:ie,onEnter:Q,onEntering:W,onExited:te,backdropClassName:X,manager:ae,renderStaticNode:le=!1,...ge},ye)=>{const De=be.useRef();e=xr(e,"offcanvas");const[He,Be]=be.useState(!1),Ee=Zy(I),Fe=eSe(s||"xs","up");be.useEffect(()=>{Be(s?f&&!Fe:f)},[f,s,Fe]);const at=be.useMemo(()=>({onHide:Ee}),[Ee]);function yt(){return ae||(y?(De.current||(De.current=new zoe({handleContainerOverflow:!1})),De.current):Noe())}const je=(jt,...sn)=>{jt&&(jt.style.visibility="visible"),Q==null||Q(jt,...sn)},Ke=(jt,...sn)=>{jt&&(jt.style.visibility=""),te==null||te(...sn)},it=be.useCallback(jt=>Oe.jsx("div",{...jt,className:sr(`${e}-backdrop`,X)}),[X,e]),Pe=jt=>Oe.jsx("div",{...jt,...ge,className:sr(t,s?`${e}-${s}`:e,`${e}-${i}`),"aria-labelledby":r,children:n});return Oe.jsxs(Oe.Fragment,{children:[!He&&(s||le)&&Pe({}),Oe.jsx(u$.Provider,{value:at,children:Oe.jsx(Loe,{show:He,ref:ye,backdrop:a,container:L,keyboard:p,autoFocus:N,enforceFocus:j&&!y,restoreFocus:k,restoreFocusOptions:V,onEscapeKeyDown:S,onShow:E,onHide:Ee,onEnter:je,onEntering:W,onEntered:K,onExit:J,onExiting:ie,onExited:Ke,manager:yt(),transition:rSe,backdropTransition:iSe,renderBackdrop:it,renderDialog:Pe})})]})});Koe.displayName="Offcanvas";const aSe=Object.assign(Koe,{Body:Yoe,Header:Xoe,Title:Zoe}),Qoe=be.forwardRef(({onHide:e,...t},n)=>{const r=be.useContext(BS),i=Zy(()=>{r==null||r.onToggle==null||r.onToggle(),e==null||e()});return Oe.jsx(aSe,{ref:n,show:!!(r!=null&&r.expanded),...t,renderStaticNode:!0,onHide:i})});Qoe.displayName="NavbarOffcanvas";const Joe=be.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},i)=>(t=xr(t,"navbar-text"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));Joe.displayName="NavbarText";const ese=be.forwardRef((e,t)=>{const{bsPrefix:n,expand:r=!0,variant:i="light",bg:s,fixed:f,sticky:a,className:p,as:y="nav",expanded:S,onToggle:E,onSelect:I,collapseOnSelect:L=!1,...N}=jA(e,{expanded:"onToggle"}),j=xr(n,"navbar"),k=be.useCallback((...J)=>{I==null||I(...J),L&&S&&(E==null||E(!1))},[I,L,S,E]);N.role===void 0&&y!=="nav"&&(N.role="navigation");let V=`${j}-expand`;typeof r=="string"&&(V=`${V}-${r}`);const K=be.useMemo(()=>({onToggle:()=>E==null?void 0:E(!S),bsPrefix:j,expanded:!!S,expand:r}),[j,S,r,E]);return Oe.jsx(BS.Provider,{value:K,children:Oe.jsx(hx.Provider,{value:k,children:Oe.jsx(y,{ref:t,...N,className:sr(p,j,r&&V,i&&`${j}-${i}`,s&&`bg-${s}`,a&&`sticky-${a}`,f&&`fixed-${f}`)})})})});ese.displayName="Navbar";const EE=Object.assign(ese,{Brand:qoe,Collapse:Hoe,Offcanvas:Qoe,Text:Joe,Toggle:Goe}),oSe=()=>{};function sSe(e,t,{disabled:n,clickTrigger:r}={}){const i=t||oSe;nwe(e,i,{disabled:n,clickTrigger:r});const s=Wh(f=>{Lae(f)&&i(f)});be.useEffect(()=>{if(n||e==null)return;const f=NS(eD(e));let a=(f.defaultView||window).event;const p=Dy(f,"keyup",y=>{if(y===a){a=void 0;return}s(y)});return()=>{p()}},[e,n,s])}const tse=be.forwardRef((e,t)=>{const{flip:n,offset:r,placement:i,containerPadding:s,popperConfig:f={},transition:a,runTransition:p}=e,[y,S]=j7(),[E,I]=j7(),L=YA(S,t),N=F4(e.container),j=F4(e.target),[k,V]=be.useState(!e.show),K=Z1e(j,y,awe({placement:i,enableEvents:!!e.show,containerPadding:s||5,flip:n,offset:r,arrowElement:E,popperConfig:f}));e.show&&k&&V(!1);const J=(...ge)=>{V(!0),e.onExited&&e.onExited(...ge)},ie=e.show||!k;if(sSe(y,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!ie)return null;const{onExit:Q,onExiting:W,onEnter:te,onEntering:X,onEntered:ae}=e;let le=e.children(Object.assign({},K.attributes.popper,{style:K.styles.popper,ref:L}),{popper:K,placement:i,show:!!e.show,arrowProps:Object.assign({},K.attributes.arrow,{style:K.styles.arrow,ref:I})});return le=B4(a,p,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:le,onExit:Q,onExiting:W,onExited:J,onEnter:te,onEntering:X,onEntered:ae}),N?Fv.createPortal(le,N):null});tse.displayName="Overlay";const nse=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=xr(t,"popover-header"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));nse.displayName="PopoverHeader";const p$=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=xr(t,"popover-body"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));p$.displayName="PopoverBody";function rse(e,t){let n=e;return e==="left"?n=t?"end":"start":e==="right"&&(n=t?"start":"end"),n}function ise(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const ase=be.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:r,children:i,body:s,arrowProps:f,hasDoneInitialMeasure:a,popper:p,show:y,...S},E)=>{const I=xr(e,"popover"),L=$U(),[N]=(t==null?void 0:t.split("-"))||[],j=rse(N,L);let k=r;return y&&!a&&(k={...r,...ise(p==null?void 0:p.strategy)}),Oe.jsxs("div",{ref:E,role:"tooltip",style:k,"x-placement":N,className:sr(n,I,N&&`bs-popover-${j}`),...S,children:[Oe.jsx("div",{className:"popover-arrow",...f}),s?Oe.jsx(p$,{children:i}):i]})});ase.displayName="Popover";const ex=Object.assign(ase,{Header:nse,Body:p$,POPPER_OFFSET:[0,8]}),ose=be.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:r,children:i,arrowProps:s,hasDoneInitialMeasure:f,popper:a,show:p,...y},S)=>{e=xr(e,"tooltip");const E=$U(),[I]=(t==null?void 0:t.split("-"))||[],L=rse(I,E);let N=r;return p&&!f&&(N={...r,...ise(a==null?void 0:a.strategy)}),Oe.jsxs("div",{ref:S,style:N,role:"tooltip","x-placement":I,className:sr(n,e,`bs-tooltip-${L}`),...y,children:[Oe.jsx("div",{className:"tooltip-arrow",...s}),Oe.jsx("div",{className:`${e}-inner`,children:i})]})});ose.displayName="Tooltip";const lSe=Object.assign(ose,{TOOLTIP_OFFSET:[0,6]});function uSe(e){const t=be.useRef(null),n=xr(void 0,"popover"),r=xr(void 0,"tooltip"),i=be.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(j4(t.current,n))return ex.POPPER_OFFSET;if(j4(t.current,r))return lSe.TOOLTIP_OFFSET}return[0,0]}}}),[e,n,r]);return[t,[i]]}function cSe(e,t){const{ref:n}=e,{ref:r}=t;e.ref=n.__wrapped||(n.__wrapped=i=>n(kD(i))),t.ref=r.__wrapped||(r.__wrapped=i=>r(kD(i)))}const sse=be.forwardRef(({children:e,transition:t=sg,popperConfig:n={},rootClose:r=!1,placement:i="top",show:s=!1,...f},a)=>{const p=be.useRef({}),[y,S]=be.useState(null),[E,I]=uSe(f.offset),L=LP(a,E),N=t===!0?sg:t||void 0,j=Zy(k=>{S(k),n==null||n.onFirstUpdate==null||n.onFirstUpdate(k)});return goe(()=>{y&&f.target&&(p.current.scheduleUpdate==null||p.current.scheduleUpdate())},[y,f.target]),be.useEffect(()=>{s||S(null)},[s]),Oe.jsx(tse,{...f,ref:L,popperConfig:{...n,modifiers:I.concat(n.modifiers||[]),onFirstUpdate:j},transition:N,rootClose:r,placement:i,show:s,children:(k,{arrowProps:V,popper:K,show:J})=>{var ie;cSe(k,V);const Q=K==null?void 0:K.placement,W=Object.assign(p.current,{state:K==null?void 0:K.state,scheduleUpdate:K==null?void 0:K.update,placement:Q,outOfBoundaries:(K==null||(ie=K.state)==null||(ie=ie.modifiersData.hide)==null?void 0:ie.isReferenceHidden)||!1,strategy:n.strategy}),te=!!y;return typeof e=="function"?e({...k,placement:Q,show:J,...!t&&J&&{className:"show"},popper:W,arrowProps:V,hasDoneInitialMeasure:te}):be.cloneElement(e,{...k,placement:Q,arrowProps:V,popper:W,hasDoneInitialMeasure:te,className:sr(e.props.className,!t&&J&&"show"),style:{...e.props.style,...k.style}})}})});sse.displayName="Overlay";function fSe(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function cY(e,t,n){const[r]=t,i=r.currentTarget,s=r.relatedTarget||r.nativeEvent[n];(!s||s!==i)&&!D2(i,s)&&e(...t)}Bn.oneOf(["click","hover","focus"]);const lse=({trigger:e=["hover","focus"],overlay:t,children:n,popperConfig:r={},show:i,defaultShow:s=!1,onToggle:f,delay:a,placement:p,flip:y=p&&p.indexOf("auto")!==-1,...S})=>{const E=be.useRef(null),I=LP(E,Px(n)),L=Lxe(),N=be.useRef(""),[j,k]=Iae(i,s,f),V=fSe(a),{onFocus:K,onBlur:J,onClick:ie}=typeof n!="function"?be.Children.only(n).props:{},Q=Be=>{I(kD(Be))},W=be.useCallback(()=>{if(L.clear(),N.current="show",!V.show){k(!0);return}L.set(()=>{N.current==="show"&&k(!0)},V.show)},[V.show,k,L]),te=be.useCallback(()=>{if(L.clear(),N.current="hide",!V.hide){k(!1);return}L.set(()=>{N.current==="hide"&&k(!1)},V.hide)},[V.hide,k,L]),X=be.useCallback((...Be)=>{W(),K==null||K(...Be)},[W,K]),ae=be.useCallback((...Be)=>{te(),J==null||J(...Be)},[te,J]),le=be.useCallback((...Be)=>{k(!j),ie==null||ie(...Be)},[ie,k,j]),ge=be.useCallback((...Be)=>{cY(W,Be,"fromElement")},[W]),ye=be.useCallback((...Be)=>{cY(te,Be,"toElement")},[te]),De=e==null?[]:[].concat(e),He={ref:Q};return De.indexOf("click")!==-1&&(He.onClick=le),De.indexOf("focus")!==-1&&(He.onFocus=X,He.onBlur=ae),De.indexOf("hover")!==-1&&(He.onMouseOver=ge,He.onMouseOut=ye),Oe.jsxs(Oe.Fragment,{children:[typeof n=="function"?n(He):be.cloneElement(n,He),Oe.jsx(sse,{...S,show:j,onHide:te,flip:y,placement:p,popperConfig:r,target:E.current,children:t})]})},xa=be.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},i)=>{const s=xr(e,"row"),f=Pae(),a=Rae(),p=`${s}-cols`,y=[];return f.forEach(S=>{const E=r[S];delete r[S];let I;E!=null&&typeof E=="object"?{cols:I}=E:I=E;const L=S!==a?`-${S}`:"";I!=null&&y.push(`${p}${L}-${I}`)}),Oe.jsx(n,{ref:i,...r,className:sr(t,s,...y)})});xa.displayName="Row";const m$=be.forwardRef(({bsPrefix:e,variant:t,animation:n="border",size:r,as:i="div",className:s,...f},a)=>{e=xr(e,"spinner");const p=`${e}-${n}`;return Oe.jsx(i,{ref:a,...f,className:sr(s,p,r&&`${p}-${r}`,t&&`text-${t}`)})});m$.displayName="Spinner";const hSe=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],dSe=["activeKey","getControlledId","getControllerId"],pSe=["as"];function $4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function use(e){let{active:t,eventKey:n,mountOnEnter:r,transition:i,unmountOnExit:s,role:f="tabpanel",onEnter:a,onEntering:p,onEntered:y,onExit:S,onExiting:E,onExited:I}=e,L=$4(e,hSe);const N=be.useContext(jS);if(!N)return[Object.assign({},L,{role:f}),{eventKey:n,isActive:t,mountOnEnter:r,transition:i,unmountOnExit:s,onEnter:a,onEntering:p,onEntered:y,onExit:S,onExiting:E,onExited:I}];const{activeKey:j,getControlledId:k,getControllerId:V}=N,K=$4(N,dSe),J=Vw(n);return[Object.assign({},L,{role:f,id:k(n),"aria-labelledby":V(n)}),{eventKey:n,isActive:t==null&&J!=null?Vw(j)===J:t,transition:i||K.transition,mountOnEnter:r??K.mountOnEnter,unmountOnExit:s??K.unmountOnExit,onEnter:a,onEntering:p,onEntered:y,onExit:S,onExiting:E,onExited:I}]}const cse=be.forwardRef((e,t)=>{let{as:n="div"}=e,r=$4(e,pSe);const[i,{isActive:s,onEnter:f,onEntering:a,onEntered:p,onExit:y,onExiting:S,onExited:E,mountOnEnter:I,unmountOnExit:L,transition:N=l$}]=use(r);return Oe.jsx(jS.Provider,{value:null,children:Oe.jsx(hx.Provider,{value:null,children:Oe.jsx(N,{in:s,onEnter:f,onEntering:a,onEntered:p,onExit:y,onExiting:S,onExited:E,mountOnEnter:I,unmountOnExit:L,children:Oe.jsx(n,Object.assign({},i,{ref:t,hidden:!s,"aria-hidden":!s}))})})})});cse.displayName="TabPanel";const g$=e=>{const{id:t,generateChildId:n,onSelect:r,activeKey:i,defaultActiveKey:s,transition:f,mountOnEnter:a,unmountOnExit:p,children:y}=e,[S,E]=jxe(i,s,r),I=cwe(t),L=be.useMemo(()=>n||((j,k)=>I?`${I}-${k}-${j}`:null),[I,n]),N=be.useMemo(()=>({onSelect:E,activeKey:S,transition:f,mountOnEnter:a||!1,unmountOnExit:p||!1,getControlledId:j=>L(j,"tabpane"),getControllerId:j=>L(j,"tab")}),[E,S,f,a,p,L]);return Oe.jsx(jS.Provider,{value:N,children:Oe.jsx(hx.Provider,{value:E||null,children:y})})};g$.Panel=cse;function y$(e){return typeof e=="boolean"?e?sg:l$:e}const fse=({transition:e,...t})=>Oe.jsx(g$,{...t,transition:y$(e)});fse.displayName="TabContainer";const UP=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=xr(t,"tab-content"),Oe.jsx(n,{ref:i,className:sr(e,t),...r})));UP.displayName="TabContent";const Ew=be.forwardRef(({bsPrefix:e,transition:t,...n},r)=>{const[{className:i,as:s="div",...f},{isActive:a,onEnter:p,onEntering:y,onEntered:S,onExit:E,onExiting:I,onExited:L,mountOnEnter:N,unmountOnExit:j,transition:k=sg}]=use({...n,transition:y$(t)}),V=xr(e,"tab-pane");return Oe.jsx(jS.Provider,{value:null,children:Oe.jsx(hx.Provider,{value:null,children:Oe.jsx(k,{in:a,onEnter:p,onEntering:y,onEntered:S,onExit:E,onExiting:I,onExited:L,mountOnEnter:N,unmountOnExit:j,children:Oe.jsx(s,{...f,ref:r,className:sr(i,V,a&&"active")})})})})});Ew.displayName="TabPane";const mSe={eventKey:Bn.oneOfType([Bn.string,Bn.number]),title:Bn.node.isRequired,disabled:Bn.bool,tabClassName:Bn.string,tabAttrs:Bn.object},hse=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};hse.propTypes=mSe;const jb=Object.assign(hse,{Container:fse,Content:UP,Pane:Ew}),dse=be.forwardRef(({bsPrefix:e,className:t,striped:n,bordered:r,borderless:i,hover:s,size:f,variant:a,responsive:p,...y},S)=>{const E=xr(e,"table"),I=sr(t,E,a&&`${E}-${a}`,f&&`${E}-${f}`,n&&`${E}-${typeof n=="string"?`striped-${n}`:"striped"}`,r&&`${E}-bordered`,i&&`${E}-borderless`,s&&`${E}-hover`),L=Oe.jsx("table",{...y,className:I,ref:S});if(p){let N=`${E}-responsive`;return typeof p=="string"&&(N=`${N}-${p}`),Oe.jsx("div",{className:N,children:L})}return L});dse.displayName="Table";function gSe(e){let t;return zxe(e,n=>{t==null&&(t=n.props.eventKey)}),t}function ySe(e){const{title:t,eventKey:n,disabled:r,tabClassName:i,tabAttrs:s,id:f}=e.props;return t==null?null:Oe.jsx(h$,{as:"li",role:"presentation",children:Oe.jsx(d$,{as:"button",type:"button",eventKey:n,disabled:r,id:f,className:i,...s,children:t})})}const _$=e=>{const{id:t,onSelect:n,transition:r,mountOnEnter:i=!1,unmountOnExit:s=!1,variant:f="tabs",children:a,activeKey:p=gSe(a),...y}=jA(e,{activeKey:"onSelect"});return Oe.jsxs(g$,{id:t,activeKey:p,onSelect:n,transition:y$(r),mountOnEnter:i,unmountOnExit:s,children:[Oe.jsx(sp,{id:t,...y,role:"tablist",as:"ul",variant:f,children:$7(a,ySe)}),Oe.jsx(UP,{children:$7(a,S=>{const E={...S.props};return delete E.title,delete E.disabled,delete E.tabClassName,delete E.tabAttrs,Oe.jsx(Ew,{...E})})})]})};_$.displayName="Tabs";/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function _Se(e,t,n){return(t=bSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fY(Object(n),!0).forEach(function(r){_Se(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bSe(e){var t=vSe(e,"string");return typeof t=="symbol"?t:t+""}const hY=()=>{};let v$={},pse={},mse=null,gse={mark:hY,measure:hY};try{typeof window<"u"&&(v$=window),typeof document<"u"&&(pse=document),typeof MutationObserver<"u"&&(mse=MutationObserver),typeof performance<"u"&&(gse=performance)}catch{}const{userAgent:dY=""}=v$.navigator||{},Kv=v$,Po=pse,pY=mse,aM=gse;Kv.document;const f_=!!Po.documentElement&&!!Po.head&&typeof Po.addEventListener=="function"&&typeof Po.createElement=="function",yse=~dY.indexOf("MSIE")||~dY.indexOf("Trident/");var xSe=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,wSe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,_se={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},SSe={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},vse=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Pu="classic",$P="duotone",TSe="sharp",ESe="sharp-duotone",bse=[Pu,$P,TSe,ESe],ASe={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},OSe={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},CSe=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),MSe={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},DSe=["fak","fa-kit","fakd","fa-kit-duotone"],mY={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},ISe=["kit"],PSe={kit:{"fa-kit":"fak"}},RSe=["fak","fakd"],kSe={kit:{fak:"fa-kit"}},gY={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},oM={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},LSe=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],zSe=["fak","fa-kit","fakd","fa-kit-duotone"],NSe={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},FSe={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},BSe={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},V4={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},jSe=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],q4=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...LSe,...jSe],USe=["solid","regular","light","thin","duotone","brands"],xse=[1,2,3,4,5,6,7,8,9,10],$Se=xse.concat([11,12,13,14,15,16,17,18,19,20]),VSe=[...Object.keys(BSe),...USe,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",oM.GROUP,oM.SWAP_OPACITY,oM.PRIMARY,oM.SECONDARY].concat(xse.map(e=>"".concat(e,"x"))).concat($Se.map(e=>"w-".concat(e))),qSe={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Jy="___FONT_AWESOME___",H4=16,wse="fa",Sse="svg-inline--fa",dx="data-fa-i2svg",G4="data-fa-pseudo-element",HSe="data-fa-pseudo-element-pending",b$="data-prefix",x$="data-icon",yY="fontawesome-i2svg",GSe="async",YSe=["HTML","HEAD","STYLE","SCRIPT"],Tse=(()=>{try{return!0}catch{return!1}})();function WA(e){return new Proxy(e,{get(t,n){return n in t?t[n]:t[Pu]}})}const Ese=Ln({},_se);Ese[Pu]=Ln(Ln(Ln(Ln({},{"fa-duotone":"duotone"}),_se[Pu]),mY.kit),mY["kit-duotone"]);const WSe=WA(Ese),Y4=Ln({},MSe);Y4[Pu]=Ln(Ln(Ln(Ln({},{duotone:"fad"}),Y4[Pu]),gY.kit),gY["kit-duotone"]);const _Y=WA(Y4),W4=Ln({},V4);W4[Pu]=Ln(Ln({},W4[Pu]),kSe.kit);const w$=WA(W4),X4=Ln({},FSe);X4[Pu]=Ln(Ln({},X4[Pu]),PSe.kit);WA(X4);const XSe=xSe,Ase="fa-layers-text",ZSe=wSe,KSe=Ln({},ASe);WA(KSe);const QSe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],S3=SSe,JSe=[...ISe,...VSe],d2=Kv.FontAwesomeConfig||{};function eTe(e){var t=Po.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function tTe(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}Po&&typeof Po.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(t=>{let[n,r]=t;const i=tTe(eTe(n));i!=null&&(d2[r]=i)});const Ose={styleDefault:"solid",familyDefault:Pu,cssPrefix:wse,replacementClass:Sse,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};d2.familyPrefix&&(d2.cssPrefix=d2.familyPrefix);const qw=Ln(Ln({},Ose),d2);qw.autoReplaceSvg||(qw.observeMutations=!1);const Ir={};Object.keys(Ose).forEach(e=>{Object.defineProperty(Ir,e,{enumerable:!0,set:function(t){qw[e]=t,p2.forEach(n=>n(Ir))},get:function(){return qw[e]}})});Object.defineProperty(Ir,"familyPrefix",{enumerable:!0,set:function(e){qw.cssPrefix=e,p2.forEach(t=>t(Ir))},get:function(){return qw.cssPrefix}});Kv.FontAwesomeConfig=Ir;const p2=[];function nTe(e){return p2.push(e),()=>{p2.splice(p2.indexOf(e),1)}}const Mv=H4,Gm={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function rTe(e){if(!e||!f_)return;const t=Po.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const n=Po.head.childNodes;let r=null;for(let i=n.length-1;i>-1;i--){const s=n[i],f=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(f)>-1&&(r=s)}return Po.head.insertBefore(t,r),e}const iTe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function I2(){let e=12,t="";for(;e-- >0;)t+=iTe[Math.random()*62|0];return t}function US(e){const t=[];for(let n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function S$(e){return e.classList?US(e.classList):(e.getAttribute("class")||"").split(" ").filter(t=>t)}function Cse(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function aTe(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,'="').concat(Cse(e[n]),'" '),"").trim()}function VP(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,": ").concat(e[n].trim(),";"),"")}function T$(e){return e.size!==Gm.size||e.x!==Gm.x||e.y!==Gm.y||e.rotate!==Gm.rotate||e.flipX||e.flipY}function oTe(e){let{transform:t,containerWidth:n,iconWidth:r}=e;const i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(t.x*32,", ").concat(t.y*32,") "),f="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)"),p={transform:"".concat(s," ").concat(f," ").concat(a)},y={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:p,path:y}}function sTe(e){let{transform:t,width:n=H4,height:r=H4,startCentered:i=!1}=e,s="";return i&&yse?s+="translate(".concat(t.x/Mv-n/2,"em, ").concat(t.y/Mv-r/2,"em) "):i?s+="translate(calc(-50% + ".concat(t.x/Mv,"em), calc(-50% + ").concat(t.y/Mv,"em)) "):s+="translate(".concat(t.x/Mv,"em, ").concat(t.y/Mv,"em) "),s+="scale(".concat(t.size/Mv*(t.flipX?-1:1),", ").concat(t.size/Mv*(t.flipY?-1:1),") "),s+="rotate(".concat(t.rotate,"deg) "),s}var lTe=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function Mse(){const e=wse,t=Sse,n=Ir.cssPrefix,r=Ir.replacementClass;let i=lTe;if(n!==e||r!==t){const s=new RegExp("\\.".concat(e,"\\-"),"g"),f=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");i=i.replace(s,".".concat(n,"-")).replace(f,"--".concat(n,"-")).replace(a,".".concat(r))}return i}let vY=!1;function T3(){Ir.autoAddCss&&!vY&&(rTe(Mse()),vY=!0)}var uTe={mixout(){return{dom:{css:Mse,insertCss:T3}}},hooks(){return{beforeDOMElementCreation(){T3()},beforeI2svg(){T3()}}}};const e_=Kv||{};e_[Jy]||(e_[Jy]={});e_[Jy].styles||(e_[Jy].styles={});e_[Jy].hooks||(e_[Jy].hooks={});e_[Jy].shims||(e_[Jy].shims=[]);var Ym=e_[Jy];const Dse=[],Ise=function(){Po.removeEventListener("DOMContentLoaded",Ise),jD=1,Dse.map(e=>e())};let jD=!1;f_&&(jD=(Po.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Po.readyState),jD||Po.addEventListener("DOMContentLoaded",Ise));function cTe(e){f_&&(jD?setTimeout(e,0):Dse.push(e))}function XA(e){const{tag:t,attributes:n={},children:r=[]}=e;return typeof e=="string"?Cse(e):"<".concat(t," ").concat(aTe(n),">").concat(r.map(XA).join(""),"</").concat(t,">")}function bY(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var E3=function(t,n,r,i){var s=Object.keys(t),f=s.length,a=n,p,y,S;for(r===void 0?(p=1,S=t[s[0]]):(p=0,S=r);p<f;p++)y=s[p],S=a(S,t[y],y,t);return S};function fTe(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=e.charCodeAt(n++);(s&64512)==56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}function Z4(e){const t=fTe(e);return t.length===1?t[0].toString(16):null}function hTe(e,t){const n=e.length;let r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&n>t+1&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function xY(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t},{})}function K4(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=n,i=xY(t);typeof Ym.hooks.addPack=="function"&&!r?Ym.hooks.addPack(e,xY(t)):Ym.styles[e]=Ln(Ln({},Ym.styles[e]||{}),i),e==="fas"&&K4("fa",t)}const{styles:P2,shims:dTe}=Ym,Pse=Object.keys(w$),pTe=Pse.reduce((e,t)=>(e[t]=Object.keys(w$[t]),e),{});let E$=null,Rse={},kse={},Lse={},zse={},Nse={};function mTe(e){return~JSe.indexOf(e)}function gTe(e,t){const n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r===e&&i!==""&&!mTe(i)?i:null}const Fse=()=>{const e=r=>E3(P2,(i,s,f)=>(i[f]=E3(s,r,{}),i),{});Rse=e((r,i,s)=>(i[3]&&(r[i[3]]=s),i[2]&&i[2].filter(a=>typeof a=="number").forEach(a=>{r[a.toString(16)]=s}),r)),kse=e((r,i,s)=>(r[s]=s,i[2]&&i[2].filter(a=>typeof a=="string").forEach(a=>{r[a]=s}),r)),Nse=e((r,i,s)=>{const f=i[2];return r[s]=s,f.forEach(a=>{r[a]=s}),r});const t="far"in P2||Ir.autoFetchSvg,n=E3(dTe,(r,i)=>{const s=i[0];let f=i[1];const a=i[2];return f==="far"&&!t&&(f="fas"),typeof s=="string"&&(r.names[s]={prefix:f,iconName:a}),typeof s=="number"&&(r.unicodes[s.toString(16)]={prefix:f,iconName:a}),r},{names:{},unicodes:{}});Lse=n.names,zse=n.unicodes,E$=qP(Ir.styleDefault,{family:Ir.familyDefault})};nTe(e=>{E$=qP(e.styleDefault,{family:Ir.familyDefault})});Fse();function A$(e,t){return(Rse[e]||{})[t]}function yTe(e,t){return(kse[e]||{})[t]}function qb(e,t){return(Nse[e]||{})[t]}function Bse(e){return Lse[e]||{prefix:null,iconName:null}}function _Te(e){const t=zse[e],n=A$("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Qv(){return E$}const jse=()=>({prefix:null,iconName:null,rest:[]});function vTe(e){let t=Pu;const n=Pse.reduce((r,i)=>(r[i]="".concat(Ir.cssPrefix,"-").concat(i),r),{});return bse.forEach(r=>{(e.includes(n[r])||e.some(i=>pTe[r].includes(i)))&&(t=r)}),t}function qP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=Pu}=t,r=WSe[n][e];if(n===$P&&!e)return"fad";const i=_Y[n][e]||_Y[n][r],s=e in Ym.styles?e:null;return i||s||null}function bTe(e){let t=[],n=null;return e.forEach(r=>{const i=gTe(Ir.cssPrefix,r);i?n=i:r&&t.push(r)}),{iconName:n,rest:t}}function wY(e){return e.sort().filter((t,n,r)=>r.indexOf(t)===n)}function HP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=t;let r=null;const i=q4.concat(zSe),s=wY(e.filter(E=>i.includes(E))),f=wY(e.filter(E=>!q4.includes(E))),a=s.filter(E=>(r=E,!vse.includes(E))),[p=null]=a,y=vTe(s),S=Ln(Ln({},bTe(f)),{},{prefix:qP(p,{family:y})});return Ln(Ln(Ln({},S),TTe({values:e,family:y,styles:P2,config:Ir,canonical:S,givenPrefix:r})),xTe(n,r,S))}function xTe(e,t,n){let{prefix:r,iconName:i}=n;if(e||!r||!i)return{prefix:r,iconName:i};const s=t==="fa"?Bse(i):{},f=qb(r,i);return i=s.iconName||f||i,r=s.prefix||r,r==="far"&&!P2.far&&P2.fas&&!Ir.autoFetchSvg&&(r="fas"),{prefix:r,iconName:i}}const wTe=bse.filter(e=>e!==Pu||e!==$P),STe=Object.keys(V4).filter(e=>e!==Pu).map(e=>Object.keys(V4[e])).flat();function TTe(e){const{values:t,family:n,canonical:r,givenPrefix:i="",styles:s={},config:f={}}=e,a=n===$P,p=t.includes("fa-duotone")||t.includes("fad"),y=f.familyDefault==="duotone",S=r.prefix==="fad"||r.prefix==="fa-duotone";if(!a&&(p||y||S)&&(r.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(r.prefix="fab"),!r.prefix&&wTe.includes(n)&&(Object.keys(s).find(I=>STe.includes(I))||f.autoFetchSvg)){const I=CSe.get(n).defaultShortPrefixId;r.prefix=I,r.iconName=qb(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||i==="fa")&&(r.prefix=Qv()||"fas"),r}class ETe{constructor(){this.definitions={}}add(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(s=>{this.definitions[s]=Ln(Ln({},this.definitions[s]||{}),i[s]),K4(s,i[s]);const f=w$[Pu][s];f&&K4(f,i[s]),Fse()})}reset(){this.definitions={}}_pullDefinitions(t,n){const r=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(r).map(i=>{const{prefix:s,iconName:f,icon:a}=r[i],p=a[2];t[s]||(t[s]={}),p.length>0&&p.forEach(y=>{typeof y=="string"&&(t[s][y]=a)}),t[s][f]=a}),t}}let SY=[],_w={};const Aw={},ATe=Object.keys(Aw);function OTe(e,t){let{mixoutsTo:n}=t;return SY=e,_w={},Object.keys(Aw).forEach(r=>{ATe.indexOf(r)===-1&&delete Aw[r]}),SY.forEach(r=>{const i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(s=>{typeof i[s]=="function"&&(n[s]=i[s]),typeof i[s]=="object"&&Object.keys(i[s]).forEach(f=>{n[s]||(n[s]={}),n[s][f]=i[s][f]})}),r.hooks){const s=r.hooks();Object.keys(s).forEach(f=>{_w[f]||(_w[f]=[]),_w[f].push(s[f])})}r.provides&&r.provides(Aw)}),n}function Q4(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(_w[e]||[]).forEach(f=>{t=f.apply(null,[t,...r])}),t}function px(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(_w[e]||[]).forEach(s=>{s.apply(null,n)})}function Jv(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Aw[e]?Aw[e].apply(null,t):void 0}function J4(e){e.prefix==="fa"&&(e.prefix="fas");let{iconName:t}=e;const n=e.prefix||Qv();if(t)return t=qb(n,t)||t,bY(Use.definitions,n,t)||bY(Ym.styles,n,t)}const Use=new ETe,CTe=()=>{Ir.autoReplaceSvg=!1,Ir.observeMutations=!1,px("noAuto")},MTe={i2svg:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return f_?(px("beforeI2svg",e),Jv("pseudoElements2svg",e),Jv("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;Ir.autoReplaceSvg===!1&&(Ir.autoReplaceSvg=!0),Ir.observeMutations=!0,cTe(()=>{ITe({autoReplaceSvgRoot:t}),px("watch",e)})}},DTe={icon:e=>{if(e===null)return null;if(typeof e=="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:qb(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){const t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],n=qP(e[0]);return{prefix:n,iconName:qb(n,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(Ir.cssPrefix,"-"))>-1||e.match(XSe))){const t=HP(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||Qv(),iconName:qb(t.prefix,t.iconName)||t.iconName}}if(typeof e=="string"){const t=Qv();return{prefix:t,iconName:qb(t,e)||e}}}},rh={noAuto:CTe,config:Ir,dom:MTe,parse:DTe,library:Use,findIconDefinition:J4,toHtml:XA},ITe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t=Po}=e;(Object.keys(Ym.styles).length>0||Ir.autoFetchSvg)&&f_&&Ir.autoReplaceSvg&&rh.dom.i2svg({node:t})};function GP(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(n=>XA(n))}}),Object.defineProperty(e,"node",{get:function(){if(!f_)return;const n=Po.createElement("div");return n.innerHTML=e.html,n.children}}),e}function PTe(e){let{children:t,main:n,mask:r,attributes:i,styles:s,transform:f}=e;if(T$(f)&&n.found&&!r.found){const{width:a,height:p}=n,y={x:a/p/2,y:.5};i.style=VP(Ln(Ln({},s),{},{"transform-origin":"".concat(y.x+f.x/16,"em ").concat(y.y+f.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}function RTe(e){let{prefix:t,iconName:n,children:r,attributes:i,symbol:s}=e;const f=s===!0?"".concat(t,"-").concat(Ir.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ln(Ln({},i),{},{id:f}),children:r}]}]}function O$(e){const{icons:{main:t,mask:n},prefix:r,iconName:i,transform:s,symbol:f,title:a,maskId:p,titleId:y,extra:S,watchable:E=!1}=e,{width:I,height:L}=n.found?n:t,N=RSe.includes(r),j=[Ir.replacementClass,i?"".concat(Ir.cssPrefix,"-").concat(i):""].filter(Q=>S.classes.indexOf(Q)===-1).filter(Q=>Q!==""||!!Q).concat(S.classes).join(" ");let k={children:[],attributes:Ln(Ln({},S.attributes),{},{"data-prefix":r,"data-icon":i,class:j,role:S.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(I," ").concat(L)})};const V=N&&!~S.classes.indexOf("fa-fw")?{width:"".concat(I/L*16*.0625,"em")}:{};E&&(k.attributes[dx]=""),a&&(k.children.push({tag:"title",attributes:{id:k.attributes["aria-labelledby"]||"title-".concat(y||I2())},children:[a]}),delete k.attributes.title);const K=Ln(Ln({},k),{},{prefix:r,iconName:i,main:t,mask:n,maskId:p,transform:s,symbol:f,styles:Ln(Ln({},V),S.styles)}),{children:J,attributes:ie}=n.found&&t.found?Jv("generateAbstractMask",K)||{children:[],attributes:{}}:Jv("generateAbstractIcon",K)||{children:[],attributes:{}};return K.children=J,K.attributes=ie,f?RTe(K):PTe(K)}function TY(e){const{content:t,width:n,height:r,transform:i,title:s,extra:f,watchable:a=!1}=e,p=Ln(Ln(Ln({},f.attributes),s?{title:s}:{}),{},{class:f.classes.join(" ")});a&&(p[dx]="");const y=Ln({},f.styles);T$(i)&&(y.transform=sTe({transform:i,startCentered:!0,width:n,height:r}),y["-webkit-transform"]=y.transform);const S=VP(y);S.length>0&&(p.style=S);const E=[];return E.push({tag:"span",attributes:p,children:[t]}),s&&E.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),E}function kTe(e){const{content:t,title:n,extra:r}=e,i=Ln(Ln(Ln({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=VP(r.styles);s.length>0&&(i.style=s);const f=[];return f.push({tag:"span",attributes:i,children:[t]}),n&&f.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),f}const{styles:A3}=Ym;function ej(e){const t=e[0],n=e[1],[r]=e.slice(4);let i=null;return Array.isArray(r)?i={tag:"g",attributes:{class:"".concat(Ir.cssPrefix,"-").concat(S3.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ir.cssPrefix,"-").concat(S3.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Ir.cssPrefix,"-").concat(S3.PRIMARY),fill:"currentColor",d:r[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:t,height:n,icon:i}}const LTe={found:!1,width:512,height:512};function zTe(e,t){!Tse&&!Ir.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function tj(e,t){let n=t;return t==="fa"&&Ir.styleDefault!==null&&(t=Qv()),new Promise((r,i)=>{if(n==="fa"){const s=Bse(e)||{};e=s.iconName||e,t=s.prefix||t}if(e&&t&&A3[t]&&A3[t][e]){const s=A3[t][e];return r(ej(s))}zTe(e,t),r(Ln(Ln({},LTe),{},{icon:Ir.showMissingIcons&&e?Jv("missingIconAbstract")||{}:{}}))})}const EY=()=>{},nj=Ir.measurePerformance&&aM&&aM.mark&&aM.measure?aM:{mark:EY,measure:EY},QE='FA "6.7.2"',NTe=e=>(nj.mark("".concat(QE," ").concat(e," begins")),()=>$se(e)),$se=e=>{nj.mark("".concat(QE," ").concat(e," ends")),nj.measure("".concat(QE," ").concat(e),"".concat(QE," ").concat(e," begins"),"".concat(QE," ").concat(e," ends"))};var C$={begin:NTe,end:$se};const nD=()=>{};function AY(e){return typeof(e.getAttribute?e.getAttribute(dx):null)=="string"}function FTe(e){const t=e.getAttribute?e.getAttribute(b$):null,n=e.getAttribute?e.getAttribute(x$):null;return t&&n}function BTe(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(Ir.replacementClass)}function jTe(){return Ir.autoReplaceSvg===!0?rD.replace:rD[Ir.autoReplaceSvg]||rD.replace}function UTe(e){return Po.createElementNS("http://www.w3.org/2000/svg",e)}function $Te(e){return Po.createElement(e)}function Vse(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=e.tag==="svg"?UTe:$Te}=t;if(typeof e=="string")return Po.createTextNode(e);const r=n(e.tag);return Object.keys(e.attributes||[]).forEach(function(s){r.setAttribute(s,e.attributes[s])}),(e.children||[]).forEach(function(s){r.appendChild(Vse(s,{ceFn:n}))}),r}function VTe(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}const rD={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach(n=>{t.parentNode.insertBefore(Vse(n),t)}),t.getAttribute(dx)===null&&Ir.keepOriginalSource){let n=Po.createComment(VTe(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){const t=e[0],n=e[1];if(~S$(t).indexOf(Ir.replacementClass))return rD.replace(e);const r=new RegExp("".concat(Ir.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((f,a)=>(a===Ir.replacementClass||a.match(r)?f.toSvg.push(a):f.toNode.push(a),f),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}const i=n.map(s=>XA(s)).join(`
`);t.setAttribute(dx,""),t.innerHTML=i}};function OY(e){e()}function qse(e,t){const n=typeof t=="function"?t:nD;if(e.length===0)n();else{let r=OY;Ir.mutateApproach===GSe&&(r=Kv.requestAnimationFrame||OY),r(()=>{const i=jTe(),s=C$.begin("mutate");e.map(i),s(),n()})}}let M$=!1;function Hse(){M$=!0}function rj(){M$=!1}let UD=null;function CY(e){if(!pY||!Ir.observeMutations)return;const{treeCallback:t=nD,nodeCallback:n=nD,pseudoElementsCallback:r=nD,observeMutationsRoot:i=Po}=e;UD=new pY(s=>{if(M$)return;const f=Qv();US(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!AY(a.addedNodes[0])&&(Ir.searchPseudoElements&&r(a.target),t(a.target)),a.type==="attributes"&&a.target.parentNode&&Ir.searchPseudoElements&&r(a.target.parentNode),a.type==="attributes"&&AY(a.target)&&~QSe.indexOf(a.attributeName))if(a.attributeName==="class"&&FTe(a.target)){const{prefix:p,iconName:y}=HP(S$(a.target));a.target.setAttribute(b$,p||f),y&&a.target.setAttribute(x$,y)}else BTe(a.target)&&n(a.target)})}),f_&&UD.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function qTe(){UD&&UD.disconnect()}function HTe(e){const t=e.getAttribute("style");let n=[];return t&&(n=t.split(";").reduce((r,i)=>{const s=i.split(":"),f=s[0],a=s.slice(1);return f&&a.length>0&&(r[f]=a.join(":").trim()),r},{})),n}function GTe(e){const t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=e.innerText!==void 0?e.innerText.trim():"";let i=HP(S$(e));return i.prefix||(i.prefix=Qv()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=yTe(i.prefix,e.innerText)||A$(i.prefix,Z4(e.innerText))),!i.iconName&&Ir.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function YTe(e){const t=US(e.attributes).reduce((i,s)=>(i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return Ir.autoA11y&&(n?t["aria-labelledby"]="".concat(Ir.replacementClass,"-title-").concat(r||I2()):(t["aria-hidden"]="true",t.focusable="false")),t}function WTe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Gm,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function MY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:i}=GTe(e),s=YTe(e),f=Q4("parseNodeAttributes",{},e);let a=t.styleParser?HTe(e):[];return Ln({iconName:n,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:r,transform:Gm,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:a,attributes:s}},f)}const{styles:XTe}=Ym;function Gse(e){const t=Ir.autoReplaceSvg==="nest"?MY(e,{styleParser:!1}):MY(e);return~t.extra.classes.indexOf(Ase)?Jv("generateLayersText",e,t):Jv("generateSvgReplacementMutation",e,t)}function ZTe(){return[...DSe,...q4]}function DY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!f_)return Promise.resolve();const n=Po.documentElement.classList,r=S=>n.add("".concat(yY,"-").concat(S)),i=S=>n.remove("".concat(yY,"-").concat(S)),s=Ir.autoFetchSvg?ZTe():vse.concat(Object.keys(XTe));s.includes("fa")||s.push("fa");const f=[".".concat(Ase,":not([").concat(dx,"])")].concat(s.map(S=>".".concat(S,":not([").concat(dx,"])"))).join(", ");if(f.length===0)return Promise.resolve();let a=[];try{a=US(e.querySelectorAll(f))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();const p=C$.begin("onTree"),y=a.reduce((S,E)=>{try{const I=Gse(E);I&&S.push(I)}catch(I){Tse||I.name==="MissingIcon"&&console.error(I)}return S},[]);return new Promise((S,E)=>{Promise.all(y).then(I=>{qse(I,()=>{r("active"),r("complete"),i("pending"),typeof t=="function"&&t(),p(),S()})}).catch(I=>{p(),E(I)})})}function KTe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Gse(e).then(n=>{n&&qse([n],t)})}function QTe(e){return function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(t||{}).icon?t:J4(t||{});let{mask:i}=n;return i&&(i=(i||{}).icon?i:J4(i||{})),e(r,Ln(Ln({},n),{},{mask:i}))}}const JTe=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Gm,symbol:r=!1,mask:i=null,maskId:s=null,title:f=null,titleId:a=null,classes:p=[],attributes:y={},styles:S={}}=t;if(!e)return;const{prefix:E,iconName:I,icon:L}=e;return GP(Ln({type:"icon"},e),()=>(px("beforeDOMElementCreation",{iconDefinition:e,params:t}),Ir.autoA11y&&(f?y["aria-labelledby"]="".concat(Ir.replacementClass,"-title-").concat(a||I2()):(y["aria-hidden"]="true",y.focusable="false")),O$({icons:{main:ej(L),mask:i?ej(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:E,iconName:I,transform:Ln(Ln({},Gm),n),symbol:r,title:f,maskId:s,titleId:a,extra:{attributes:y,styles:S,classes:p}})))};var eEe={mixout(){return{icon:QTe(JTe)}},hooks(){return{mutationObserverCallbacks(e){return e.treeCallback=DY,e.nodeCallback=KTe,e}}},provides(e){e.i2svg=function(t){const{node:n=Po,callback:r=()=>{}}=t;return DY(n,r)},e.generateSvgReplacementMutation=function(t,n){const{iconName:r,title:i,titleId:s,prefix:f,transform:a,symbol:p,mask:y,maskId:S,extra:E}=n;return new Promise((I,L)=>{Promise.all([tj(r,f),y.iconName?tj(y.iconName,y.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(N=>{let[j,k]=N;I([t,O$({icons:{main:j,mask:k},prefix:f,iconName:r,transform:a,symbol:p,maskId:S,title:i,titleId:s,extra:E,watchable:!0})])}).catch(L)})},e.generateAbstractIcon=function(t){let{children:n,attributes:r,main:i,transform:s,styles:f}=t;const a=VP(f);a.length>0&&(r.style=a);let p;return T$(s)&&(p=Jv("generateAbstractTransformGrouping",{main:i,transform:s,containerWidth:i.width,iconWidth:i.width})),n.push(p||i.icon),{children:n,attributes:r}}}},tEe={mixout(){return{layer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=t;return GP({type:"layer"},()=>{px("beforeDOMElementCreation",{assembler:e,params:t});let r=[];return e(i=>{Array.isArray(i)?i.map(s=>{r=r.concat(s.abstract)}):r=r.concat(i.abstract)}),[{tag:"span",attributes:{class:["".concat(Ir.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}}}},nEe={mixout(){return{counter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:r=[],attributes:i={},styles:s={}}=t;return GP({type:"counter",content:e},()=>(px("beforeDOMElementCreation",{content:e,params:t}),kTe({content:e.toString(),title:n,extra:{attributes:i,styles:s,classes:["".concat(Ir.cssPrefix,"-layers-counter"),...r]}})))}}}},rEe={mixout(){return{text(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Gm,title:r=null,classes:i=[],attributes:s={},styles:f={}}=t;return GP({type:"text",content:e},()=>(px("beforeDOMElementCreation",{content:e,params:t}),TY({content:e,transform:Ln(Ln({},Gm),n),title:r,extra:{attributes:s,styles:f,classes:["".concat(Ir.cssPrefix,"-layers-text"),...i]}})))}}},provides(e){e.generateLayersText=function(t,n){const{title:r,transform:i,extra:s}=n;let f=null,a=null;if(yse){const p=parseInt(getComputedStyle(t).fontSize,10),y=t.getBoundingClientRect();f=y.width/p,a=y.height/p}return Ir.autoA11y&&!r&&(s.attributes["aria-hidden"]="true"),Promise.resolve([t,TY({content:t.innerHTML,width:f,height:a,transform:i,title:r,extra:s,watchable:!0})])}}};const iEe=new RegExp('"',"ug"),IY=[1105920,1112319],PY=Ln(Ln(Ln(Ln({},{FontAwesome:{normal:"fas",400:"fas"}}),OSe),qSe),NSe),ij=Object.keys(PY).reduce((e,t)=>(e[t.toLowerCase()]=PY[t],e),{}),aEe=Object.keys(ij).reduce((e,t)=>{const n=ij[t];return e[t]=n[900]||[...Object.entries(n)][0][1],e},{});function oEe(e){const t=e.replace(iEe,""),n=hTe(t,0),r=n>=IY[0]&&n<=IY[1],i=t.length===2?t[0]===t[1]:!1;return{value:Z4(i?t[0]:t),isSecondary:r||i}}function sEe(e,t){const n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(t),i=isNaN(r)?"normal":r;return(ij[n]||{})[i]||aEe[n]}function RY(e,t){const n="".concat(HSe).concat(t.replace(":","-"));return new Promise((r,i)=>{if(e.getAttribute(n)!==null)return r();const f=US(e.children).filter(I=>I.getAttribute(G4)===t)[0],a=Kv.getComputedStyle(e,t),p=a.getPropertyValue("font-family"),y=p.match(ZSe),S=a.getPropertyValue("font-weight"),E=a.getPropertyValue("content");if(f&&!y)return e.removeChild(f),r();if(y&&E!=="none"&&E!==""){const I=a.getPropertyValue("content");let L=sEe(p,S);const{value:N,isSecondary:j}=oEe(I),k=y[0].startsWith("FontAwesome");let V=A$(L,N),K=V;if(k){const J=_Te(N);J.iconName&&J.prefix&&(V=J.iconName,L=J.prefix)}if(V&&!j&&(!f||f.getAttribute(b$)!==L||f.getAttribute(x$)!==K)){e.setAttribute(n,K),f&&e.removeChild(f);const J=WTe(),{extra:ie}=J;ie.attributes[G4]=t,tj(V,L).then(Q=>{const W=O$(Ln(Ln({},J),{},{icons:{main:Q,mask:jse()},prefix:L,iconName:K,extra:ie,watchable:!0})),te=Po.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(te,e.firstChild):e.appendChild(te),te.outerHTML=W.map(X=>XA(X)).join(`
`),e.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function lEe(e){return Promise.all([RY(e,"::before"),RY(e,"::after")])}function uEe(e){return e.parentNode!==document.head&&!~YSe.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(G4)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function kY(e){if(f_)return new Promise((t,n)=>{const r=US(e.querySelectorAll("*")).filter(uEe).map(lEe),i=C$.begin("searchPseudoElements");Hse(),Promise.all(r).then(()=>{i(),rj(),t()}).catch(()=>{i(),rj(),n()})})}var cEe={hooks(){return{mutationObserverCallbacks(e){return e.pseudoElementsCallback=kY,e}}},provides(e){e.pseudoElements2svg=function(t){const{node:n=Po}=t;Ir.searchPseudoElements&&kY(n)}}};let LY=!1;var fEe={mixout(){return{dom:{unwatch(){Hse(),LY=!0}}}},hooks(){return{bootstrap(){CY(Q4("mutationObserverCallbacks",{}))},noAuto(){qTe()},watch(e){const{observeMutationsRoot:t}=e;LY?rj():CY(Q4("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}};const zY=e=>{let t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce((n,r)=>{const i=r.toLowerCase().split("-"),s=i[0];let f=i.slice(1).join("-");if(s&&f==="h")return n.flipX=!0,n;if(s&&f==="v")return n.flipY=!0,n;if(f=parseFloat(f),isNaN(f))return n;switch(s){case"grow":n.size=n.size+f;break;case"shrink":n.size=n.size-f;break;case"left":n.x=n.x-f;break;case"right":n.x=n.x+f;break;case"up":n.y=n.y-f;break;case"down":n.y=n.y+f;break;case"rotate":n.rotate=n.rotate+f;break}return n},t)};var hEe={mixout(){return{parse:{transform:e=>zY(e)}}},hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-transform");return n&&(e.transform=zY(n)),e}}},provides(e){e.generateAbstractTransformGrouping=function(t){let{main:n,transform:r,containerWidth:i,iconWidth:s}=t;const f={transform:"translate(".concat(i/2," 256)")},a="translate(".concat(r.x*32,", ").concat(r.y*32,") "),p="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),y="rotate(".concat(r.rotate," 0 0)"),S={transform:"".concat(a," ").concat(p," ").concat(y)},E={transform:"translate(".concat(s/2*-1," -256)")},I={outer:f,inner:S,path:E};return{tag:"g",attributes:Ln({},I.outer),children:[{tag:"g",attributes:Ln({},I.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:Ln(Ln({},n.icon.attributes),I.path)}]}]}}}};const O3={x:0,y:0,width:"100%",height:"100%"};function NY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function dEe(e){return e.tag==="g"?e.children:[e]}var pEe={hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-mask"),r=n?HP(n.split(" ").map(i=>i.trim())):jse();return r.prefix||(r.prefix=Qv()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides(e){e.generateAbstractMask=function(t){let{children:n,attributes:r,main:i,mask:s,maskId:f,transform:a}=t;const{width:p,icon:y}=i,{width:S,icon:E}=s,I=oTe({transform:a,containerWidth:S,iconWidth:p}),L={tag:"rect",attributes:Ln(Ln({},O3),{},{fill:"white"})},N=y.children?{children:y.children.map(NY)}:{},j={tag:"g",attributes:Ln({},I.inner),children:[NY(Ln({tag:y.tag,attributes:Ln(Ln({},y.attributes),I.path)},N))]},k={tag:"g",attributes:Ln({},I.outer),children:[j]},V="mask-".concat(f||I2()),K="clip-".concat(f||I2()),J={tag:"mask",attributes:Ln(Ln({},O3),{},{id:V,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[L,k]},ie={tag:"defs",children:[{tag:"clipPath",attributes:{id:K},children:dEe(E)},J]};return n.push(ie,{tag:"rect",attributes:Ln({fill:"currentColor","clip-path":"url(#".concat(K,")"),mask:"url(#".concat(V,")")},O3)}),{children:n,attributes:r}}}},mEe={provides(e){let t=!1;Kv.matchMedia&&(t=Kv.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const n=[],r={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:Ln(Ln({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=Ln(Ln({},i),{},{attributeName:"opacity"}),f={tag:"circle",attributes:Ln(Ln({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||f.children.push({tag:"animate",attributes:Ln(Ln({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Ln(Ln({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(f),n.push({tag:"path",attributes:Ln(Ln({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Ln(Ln({},s),{},{values:"1;0;0;0;0;1;"})}]}),t||n.push({tag:"path",attributes:Ln(Ln({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Ln(Ln({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},gEe={hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-symbol"),r=n===null?!1:n===""?!0:n;return e.symbol=r,e}}}},yEe=[uTe,eEe,tEe,nEe,rEe,cEe,fEe,hEe,pEe,mEe,gEe];OTe(yEe,{mixoutsTo:rh});rh.noAuto;rh.config;rh.library;rh.dom;const aj=rh.parse;rh.findIconDefinition;rh.toHtml;const _Ee=rh.icon;rh.layer;rh.text;rh.counter;var vEe={};function oj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function bEe(e){if(Array.isArray(e))return e}function xEe(e){if(Array.isArray(e))return oj(e)}function Rv(e,t,n){return(t=MEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function SEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function TEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FY(Object(n),!0).forEach(function(r){Rv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AEe(e,t){if(e==null)return{};var n,r,i=OEe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function OEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function BY(e,t){return bEe(e)||SEe(e,t)||Yse(e,t)||TEe()}function sj(e){return xEe(e)||wEe(e)||Yse(e)||EEe()}function CEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MEe(e){var t=CEe(e,"string");return typeof t=="symbol"?t:t+""}function $D(e){"@babel/helpers - typeof";return $D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$D(e)}function Yse(e,t){if(e){if(typeof e=="string")return oj(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oj(e,t):void 0}}var DEe="7.0.0",lj;try{var IEe=require("@fortawesome/fontawesome-svg-core/package.json");lj=IEe.version}catch{lj=typeof process<"u"&&vEe.FA_VERSION||"7.0.0"}function PEe(e){var t=e.beat,n=e.fade,r=e.beatFade,i=e.bounce,s=e.shake,f=e.flash,a=e.spin,p=e.spinPulse,y=e.spinReverse,S=e.pulse,E=e.fixedWidth,I=e.inverse,L=e.border,N=e.listItem,j=e.flip,k=e.size,V=e.rotation,K=e.pull,J=e.swapOpacity,ie=e.rotateBy,Q=e.widthAuto,W=REe(lj,DEe),te=Rv(Rv(Rv(Rv(Rv(Rv({"fa-beat":t,"fa-fade":n,"fa-beat-fade":r,"fa-bounce":i,"fa-shake":s,"fa-flash":f,"fa-spin":a,"fa-spin-reverse":y,"fa-spin-pulse":p,"fa-pulse":S,"fa-fw":E,"fa-inverse":I,"fa-border":L,"fa-li":N,"fa-flip":j===!0,"fa-flip-horizontal":j==="horizontal"||j==="both","fa-flip-vertical":j==="vertical"||j==="both"},"fa-".concat(k),typeof k<"u"&&k!==null),"fa-rotate-".concat(V),typeof V<"u"&&V!==null&&V!==0),"fa-pull-".concat(K),typeof K<"u"&&K!==null),"fa-swap-opacity",J),"fa-rotate-by",W&&ie),"fa-width-auto",W&&Q);return Object.keys(te).map(function(X){return te[X]?X:null}).filter(function(X){return X})}function REe(e,t){for(var n=e.split("-"),r=BY(n,2),i=r[0],s=r[1],f=t.split("-"),a=BY(f,2),p=a[0],y=a[1],S=i.split("."),E=p.split("."),I=0;I<Math.max(S.length,E.length);I++){var L=S[I]||"0",N=E[I]||"0",j=parseInt(L,10),k=parseInt(N,10);if(j!==k)return j>k}for(var V=0;V<Math.max(S.length,E.length);V++){var K=S[V]||"0",J=E[V]||"0";if(K!==J&&K.length!==J.length)return K.length<J.length}return!(s&&!y)}function kEe(e){return e=e-0,e===e}function Wse(e){return kEe(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,n){return n?n.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var LEe=["style"];function zEe(e){return e.charAt(0).toUpperCase()+e.slice(1)}function NEe(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,n){var r=n.indexOf(":"),i=Wse(n.slice(0,r)),s=n.slice(r+1).trim();return i.startsWith("webkit")?t[zEe(i)]=s:t[i]=s,t},{})}function Xse(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(p){return Xse(e,p)}),i=Object.keys(t.attributes||{}).reduce(function(p,y){var S=t.attributes[y];switch(y){case"class":p.attrs.className=S,delete t.attributes.class;break;case"style":p.attrs.style=NEe(S);break;default:y.indexOf("aria-")===0||y.indexOf("data-")===0?p.attrs[y.toLowerCase()]=S:p.attrs[Wse(y)]=S}return p},{attrs:{}}),s=n.style,f=s===void 0?{}:s,a=AEe(n,LEe);return i.attrs.style=Fm(Fm({},i.attrs.style),f),e.apply(void 0,[t.tag,Fm(Fm({},i.attrs),a)].concat(sj(r)))}var Zse=!1;try{Zse=!0}catch{}function FEe(){if(!Zse&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function jY(e){if(e&&$D(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(aj.icon)return aj.icon(e);if(e===null)return null;if(e&&$D(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function C3(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Rv({},e,t):{}}var UY={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,rotateBy:!1,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1,widthAuto:!1},mx=tt.forwardRef(function(e,t){var n=Fm(Fm({},UY),e),r=n.icon,i=n.mask,s=n.symbol,f=n.className,a=n.title,p=n.titleId,y=n.maskId,S=jY(r),E=C3("classes",[].concat(sj(PEe(n)),sj((f||"").split(" ")))),I=C3("transform",typeof n.transform=="string"?aj.transform(n.transform):n.transform),L=C3("mask",jY(i)),N=_Ee(S,Fm(Fm(Fm(Fm({},E),I),L),{},{symbol:s,title:a,titleId:p,maskId:y}));if(!N)return FEe("Could not find icon",S),null;var j=N.abstract,k={ref:t};return Object.keys(n).forEach(function(V){UY.hasOwnProperty(V)||(k[V]=n[V])}),BEe(j[0],k)});mx.displayName="FontAwesomeIcon";mx.propTypes={beat:Bn.bool,border:Bn.bool,beatFade:Bn.bool,bounce:Bn.bool,className:Bn.string,fade:Bn.bool,flash:Bn.bool,mask:Bn.oneOfType([Bn.object,Bn.array,Bn.string]),maskId:Bn.string,fixedWidth:Bn.bool,inverse:Bn.bool,flip:Bn.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Bn.oneOfType([Bn.object,Bn.array,Bn.string]),listItem:Bn.bool,pull:Bn.oneOf(["right","left"]),pulse:Bn.bool,rotation:Bn.oneOf([0,90,180,270]),rotateBy:Bn.bool,shake:Bn.bool,size:Bn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Bn.bool,spinPulse:Bn.bool,spinReverse:Bn.bool,symbol:Bn.oneOfType([Bn.bool,Bn.string]),title:Bn.string,titleId:Bn.string,transform:Bn.oneOfType([Bn.string,Bn.object]),swapOpacity:Bn.bool,widthAuto:Bn.bool};var BEe=Xse.bind(null,tt.createElement);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const jEe={prefix:"fas",iconName:"calendar-days",icon:[448,512,["calendar-alt"],"f073","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm64 80l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm128 0l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM64 400l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zm112 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16z"]},UEe=jEe,$Ee={prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"]},VEe={prefix:"fas",iconName:"cloud-rain",icon:[512,512,[127783,9926],"f73d","M96 320c-53 0-96-43-96-96c0-42.5 27.6-78.6 65.9-91.2C64.7 126.1 64 119.1 64 112C64 50.1 114.1 0 176 0c43.1 0 80.5 24.3 99.2 60c14.7-17.1 36.5-28 60.8-28c44.2 0 80 35.8 80 80c0 5.5-.6 10.8-1.6 16c.5 0 1.1 0 1.6 0c53 0 96 43 96 96s-43 96-96 96L96 320zm-6.8 52c1.3-2.5 3.9-4 6.8-4s5.4 1.5 6.8 4l35.1 64.6c4.1 7.5 6.2 15.8 6.2 24.3l0 3c0 26.5-21.5 48-48 48s-48-21.5-48-48l0-3c0-8.5 2.1-16.9 6.2-24.3L89.2 372zm160 0c1.3-2.5 3.9-4 6.8-4s5.4 1.5 6.8 4l35.1 64.6c4.1 7.5 6.2 15.8 6.2 24.3l0 3c0 26.5-21.5 48-48 48s-48-21.5-48-48l0-3c0-8.5 2.1-16.9 6.2-24.3L249.2 372zm124.9 64.6L409.2 372c1.3-2.5 3.9-4 6.8-4s5.4 1.5 6.8 4l35.1 64.6c4.1 7.5 6.2 15.8 6.2 24.3l0 3c0 26.5-21.5 48-48 48s-48-21.5-48-48l0-3c0-8.5 2.1-16.9 6.2-24.3z"]},qEe={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},HEe={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},GEe=HEe;function YEe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const WEe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,XEe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ZEe={};function $Y(e,t){return(ZEe.jsx?XEe:WEe).test(e)}const KEe=/[ \t\n\f\r]/g;function QEe(e){return typeof e=="object"?e.type==="text"?VY(e.value):!1:VY(e)}function VY(e){return e.replace(KEe,"")===""}class ZA{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}ZA.prototype.normal={};ZA.prototype.property={};ZA.prototype.space=void 0;function Kse(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new ZA(n,r,t)}function uj(e){return e.toLowerCase()}class sf{constructor(t,n){this.attribute=n,this.property=t}}sf.prototype.attribute="";sf.prototype.booleanish=!1;sf.prototype.boolean=!1;sf.prototype.commaOrSpaceSeparated=!1;sf.prototype.commaSeparated=!1;sf.prototype.defined=!1;sf.prototype.mustUseProperty=!1;sf.prototype.number=!1;sf.prototype.overloadedBoolean=!1;sf.prototype.property="";sf.prototype.spaceSeparated=!1;sf.prototype.space=void 0;let JEe=0;const Ci=Rx(),Ws=Rx(),cj=Rx(),Fn=Rx(),mo=Rx(),Ow=Rx(),Vf=Rx();function Rx(){return 2**++JEe}const fj=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ci,booleanish:Ws,commaOrSpaceSeparated:Vf,commaSeparated:Ow,number:Fn,overloadedBoolean:cj,spaceSeparated:mo},Symbol.toStringTag,{value:"Module"})),M3=Object.keys(fj);class D$ extends sf{constructor(t,n,r,i){let s=-1;if(super(t,n),qY(this,"space",i),typeof r=="number")for(;++s<M3.length;){const f=M3[s];qY(this,M3[s],(r&fj[f])===fj[f])}}}D$.prototype.defined=!0;function qY(e,t,n){n&&(e[t]=n)}function $S(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new D$(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[uj(r)]=r,n[uj(s.attribute)]=r}return new ZA(t,n,e.space)}const Qse=$S({properties:{ariaActiveDescendant:null,ariaAtomic:Ws,ariaAutoComplete:null,ariaBusy:Ws,ariaChecked:Ws,ariaColCount:Fn,ariaColIndex:Fn,ariaColSpan:Fn,ariaControls:mo,ariaCurrent:null,ariaDescribedBy:mo,ariaDetails:null,ariaDisabled:Ws,ariaDropEffect:mo,ariaErrorMessage:null,ariaExpanded:Ws,ariaFlowTo:mo,ariaGrabbed:Ws,ariaHasPopup:null,ariaHidden:Ws,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:mo,ariaLevel:Fn,ariaLive:null,ariaModal:Ws,ariaMultiLine:Ws,ariaMultiSelectable:Ws,ariaOrientation:null,ariaOwns:mo,ariaPlaceholder:null,ariaPosInSet:Fn,ariaPressed:Ws,ariaReadOnly:Ws,ariaRelevant:null,ariaRequired:Ws,ariaRoleDescription:mo,ariaRowCount:Fn,ariaRowIndex:Fn,ariaRowSpan:Fn,ariaSelected:Ws,ariaSetSize:Fn,ariaSort:null,ariaValueMax:Fn,ariaValueMin:Fn,ariaValueNow:Fn,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Jse(e,t){return t in e?e[t]:t}function ele(e,t){return Jse(e,t.toLowerCase())}const e2e=$S({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ow,acceptCharset:mo,accessKey:mo,action:null,allow:null,allowFullScreen:Ci,allowPaymentRequest:Ci,allowUserMedia:Ci,alt:null,as:null,async:Ci,autoCapitalize:null,autoComplete:mo,autoFocus:Ci,autoPlay:Ci,blocking:mo,capture:null,charSet:null,checked:Ci,cite:null,className:mo,cols:Fn,colSpan:null,content:null,contentEditable:Ws,controls:Ci,controlsList:mo,coords:Fn|Ow,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ci,defer:Ci,dir:null,dirName:null,disabled:Ci,download:cj,draggable:Ws,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ci,formTarget:null,headers:mo,height:Fn,hidden:cj,high:Fn,href:null,hrefLang:null,htmlFor:mo,httpEquiv:mo,id:null,imageSizes:null,imageSrcSet:null,inert:Ci,inputMode:null,integrity:null,is:null,isMap:Ci,itemId:null,itemProp:mo,itemRef:mo,itemScope:Ci,itemType:mo,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ci,low:Fn,manifest:null,max:null,maxLength:Fn,media:null,method:null,min:null,minLength:Fn,multiple:Ci,muted:Ci,name:null,nonce:null,noModule:Ci,noValidate:Ci,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ci,optimum:Fn,pattern:null,ping:mo,placeholder:null,playsInline:Ci,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ci,referrerPolicy:null,rel:mo,required:Ci,reversed:Ci,rows:Fn,rowSpan:Fn,sandbox:mo,scope:null,scoped:Ci,seamless:Ci,selected:Ci,shadowRootClonable:Ci,shadowRootDelegatesFocus:Ci,shadowRootMode:null,shape:null,size:Fn,sizes:null,slot:null,span:Fn,spellCheck:Ws,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Fn,step:null,style:null,tabIndex:Fn,target:null,title:null,translate:null,type:null,typeMustMatch:Ci,useMap:null,value:Ws,width:Fn,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:mo,axis:null,background:null,bgColor:null,border:Fn,borderColor:null,bottomMargin:Fn,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ci,declare:Ci,event:null,face:null,frame:null,frameBorder:null,hSpace:Fn,leftMargin:Fn,link:null,longDesc:null,lowSrc:null,marginHeight:Fn,marginWidth:Fn,noResize:Ci,noHref:Ci,noShade:Ci,noWrap:Ci,object:null,profile:null,prompt:null,rev:null,rightMargin:Fn,rules:null,scheme:null,scrolling:Ws,standby:null,summary:null,text:null,topMargin:Fn,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Fn,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ci,disableRemotePlayback:Ci,prefix:null,property:null,results:Fn,security:null,unselectable:null},space:"html",transform:ele}),t2e=$S({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Vf,accentHeight:Fn,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Fn,amplitude:Fn,arabicForm:null,ascent:Fn,attributeName:null,attributeType:null,azimuth:Fn,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Fn,by:null,calcMode:null,capHeight:Fn,className:mo,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Fn,diffuseConstant:Fn,direction:null,display:null,dur:null,divisor:Fn,dominantBaseline:null,download:Ci,dx:null,dy:null,edgeMode:null,editable:null,elevation:Fn,enableBackground:null,end:null,event:null,exponent:Fn,externalResourcesRequired:null,fill:null,fillOpacity:Fn,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ow,g2:Ow,glyphName:Ow,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Fn,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Fn,horizOriginX:Fn,horizOriginY:Fn,id:null,ideographic:Fn,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Fn,k:Fn,k1:Fn,k2:Fn,k3:Fn,k4:Fn,kernelMatrix:Vf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Fn,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Fn,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Fn,overlineThickness:Fn,paintOrder:null,panose1:null,path:null,pathLength:Fn,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:mo,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Fn,pointsAtY:Fn,pointsAtZ:Fn,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Vf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Vf,rev:Vf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Vf,requiredFeatures:Vf,requiredFonts:Vf,requiredFormats:Vf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Fn,specularExponent:Fn,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Fn,strikethroughThickness:Fn,string:null,stroke:null,strokeDashArray:Vf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Fn,strokeOpacity:Fn,strokeWidth:null,style:null,surfaceScale:Fn,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Vf,tabIndex:Fn,tableValues:null,target:null,targetX:Fn,targetY:Fn,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Vf,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Fn,underlineThickness:Fn,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Fn,values:null,vAlphabetic:Fn,vMathematical:Fn,vectorEffect:null,vHanging:Fn,vIdeographic:Fn,version:null,vertAdvY:Fn,vertOriginX:Fn,vertOriginY:Fn,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Fn,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Jse}),tle=$S({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),nle=$S({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:ele}),rle=$S({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),n2e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},r2e=/[A-Z]/g,HY=/-[a-z]/g,i2e=/^data[-\w.:]+$/i;function a2e(e,t){const n=uj(t);let r=t,i=sf;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&i2e.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(HY,s2e);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!HY.test(s)){let f=s.replace(r2e,o2e);f.charAt(0)!=="-"&&(f="-"+f),t="data"+f}}i=D$}return new i(r,t)}function o2e(e){return"-"+e.toLowerCase()}function s2e(e){return e.charAt(1).toUpperCase()}const l2e=Kse([Qse,e2e,tle,nle,rle],"html"),I$=Kse([Qse,t2e,tle,nle,rle],"svg");function u2e(e){return e.join(" ").trim()}var ew={},D3,GY;function c2e(){if(GY)return D3;GY=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,f=/^[;\s]*/,a=/^\s+|\s+$/g,p=`
`,y="/",S="*",E="",I="comment",L="declaration";function N(k,V){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];V=V||{};var K=1,J=1;function ie(He){var Be=He.match(t);Be&&(K+=Be.length);var Ee=He.lastIndexOf(p);J=~Ee?He.length-Ee:J+He.length}function Q(){var He={line:K,column:J};return function(Be){return Be.position=new W(He),ae(),Be}}function W(He){this.start=He,this.end={line:K,column:J},this.source=V.source}W.prototype.content=k;function te(He){var Be=new Error(V.source+":"+K+":"+J+": "+He);if(Be.reason=He,Be.filename=V.source,Be.line=K,Be.column=J,Be.source=k,!V.silent)throw Be}function X(He){var Be=He.exec(k);if(Be){var Ee=Be[0];return ie(Ee),k=k.slice(Ee.length),Be}}function ae(){X(n)}function le(He){var Be;for(He=He||[];Be=ge();)Be!==!1&&He.push(Be);return He}function ge(){var He=Q();if(!(y!=k.charAt(0)||S!=k.charAt(1))){for(var Be=2;E!=k.charAt(Be)&&(S!=k.charAt(Be)||y!=k.charAt(Be+1));)++Be;if(Be+=2,E===k.charAt(Be-1))return te("End of comment missing");var Ee=k.slice(2,Be-2);return J+=2,ie(Ee),k=k.slice(Be),J+=2,He({type:I,comment:Ee})}}function ye(){var He=Q(),Be=X(r);if(Be){if(ge(),!X(i))return te("property missing ':'");var Ee=X(s),Fe=He({type:L,property:j(Be[0].replace(e,E)),value:Ee?j(Ee[0].replace(e,E)):E});return X(f),Fe}}function De(){var He=[];le(He);for(var Be;Be=ye();)Be!==!1&&(He.push(Be),le(He));return He}return ae(),De()}function j(k){return k?k.replace(a,E):E}return D3=N,D3}var YY;function f2e(){if(YY)return ew;YY=1;var e=ew&&ew.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ew,"__esModule",{value:!0}),ew.default=n;const t=e(c2e());function n(r,i){let s=null;if(!r||typeof r!="string")return s;const f=(0,t.default)(r),a=typeof i=="function";return f.forEach(p=>{if(p.type!=="declaration")return;const{property:y,value:S}=p;a?i(y,S,p):S&&(s=s||{},s[y]=S)}),s}return ew}var AE={},WY;function h2e(){if(WY)return AE;WY=1,Object.defineProperty(AE,"__esModule",{value:!0}),AE.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(y){return!y||n.test(y)||e.test(y)},f=function(y,S){return S.toUpperCase()},a=function(y,S){return"".concat(S,"-")},p=function(y,S){return S===void 0&&(S={}),s(y)?y:(y=y.toLowerCase(),S.reactCompat?y=y.replace(i,a):y=y.replace(r,a),y.replace(t,f))};return AE.camelCase=p,AE}var OE,XY;function d2e(){if(XY)return OE;XY=1;var e=OE&&OE.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(f2e()),n=h2e();function r(i,s){var f={};return!i||typeof i!="string"||(0,t.default)(i,function(a,p){a&&p&&(f[(0,n.camelCase)(a,s)]=p)}),f}return r.default=r,OE=r,OE}var p2e=d2e();const m2e=ma(p2e),ile=ale("end"),P$=ale("start");function ale(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function g2e(e){const t=P$(e),n=ile(e);if(t&&n)return{start:t,end:n}}function m2(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?ZY(e.position):"start"in e||"end"in e?ZY(e):"line"in e||"column"in e?hj(e):""}function hj(e){return KY(e&&e.line)+":"+KY(e&&e.column)}function ZY(e){return hj(e&&e.start)+"-"+hj(e&&e.end)}function KY(e){return e&&typeof e=="number"?e:1}class Lu extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},f=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(f=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const p=r.indexOf(":");p===-1?s.ruleId=r:(s.source=r.slice(0,p),s.ruleId=r.slice(p+1))}if(!s.place&&s.ancestors&&s.ancestors){const p=s.ancestors[s.ancestors.length-1];p&&(s.place=p.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=m2(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=f&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Lu.prototype.file="";Lu.prototype.name="";Lu.prototype.reason="";Lu.prototype.message="";Lu.prototype.stack="";Lu.prototype.column=void 0;Lu.prototype.line=void 0;Lu.prototype.ancestors=void 0;Lu.prototype.cause=void 0;Lu.prototype.fatal=void 0;Lu.prototype.place=void 0;Lu.prototype.ruleId=void 0;Lu.prototype.source=void 0;const R$={}.hasOwnProperty,y2e=new Map,_2e=/[A-Z]/g,v2e=new Set(["table","tbody","thead","tfoot","tr"]),b2e=new Set(["td","th"]),ole="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function x2e(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=M2e(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=C2e(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?I$:l2e,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=sle(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function sle(e,t,n){if(t.type==="element")return w2e(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return S2e(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return E2e(e,t,n);if(t.type==="mdxjsEsm")return T2e(e,t);if(t.type==="root")return A2e(e,t,n);if(t.type==="text")return O2e(e,t)}function w2e(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=I$,e.schema=i),e.ancestors.push(t);const s=ule(e,t.tagName,!1),f=D2e(e,t);let a=L$(e,t);return v2e.has(t.tagName)&&(a=a.filter(function(p){return typeof p=="string"?!QEe(p):!0})),lle(e,f,s,t),k$(f,a),e.ancestors.pop(),e.schema=r,e.create(t,s,f,n)}function S2e(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}R2(e,t.position)}function T2e(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);R2(e,t.position)}function E2e(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=I$,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:ule(e,t.name,!0),f=I2e(e,t),a=L$(e,t);return lle(e,f,s,t),k$(f,a),e.ancestors.pop(),e.schema=r,e.create(t,s,f,n)}function A2e(e,t,n){const r={};return k$(r,L$(e,t)),e.create(t,e.Fragment,r,n)}function O2e(e,t){return t.value}function lle(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function k$(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function C2e(e,t,n){return r;function r(i,s,f,a){const y=Array.isArray(f.children)?n:t;return a?y(s,f,a):y(s,f)}}function M2e(e,t){return n;function n(r,i,s,f){const a=Array.isArray(s.children),p=P$(r);return t(i,s,f,a,{columnNumber:p?p.column-1:void 0,fileName:e,lineNumber:p?p.line:void 0},void 0)}}function D2e(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&R$.call(t.properties,i)){const s=P2e(e,i,t.properties[i]);if(s){const[f,a]=s;e.tableCellAlignToStyle&&f==="align"&&typeof a=="string"&&b2e.has(t.tagName)?r=a:n[f]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function I2e(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const f=s.expression;f.type;const a=f.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else R2(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else R2(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function L$(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:y2e;for(;++r<t.children.length;){const s=t.children[r];let f;if(e.passKeys){const p=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(p){const y=i.get(p)||0;f=p+"-"+y,i.set(p,y+1)}}const a=sle(e,s,f);a!==void 0&&n.push(a)}return n}function P2e(e,t,n){const r=a2e(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?YEe(n):u2e(n)),r.property==="style"){let i=typeof n=="object"?n:R2e(e,String(n));return e.stylePropertyNameCase==="css"&&(i=k2e(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?n2e[r.property]||r.property:r.attribute,n]}}function R2e(e,t){try{return m2e(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new Lu("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=ole+"#cannot-parse-style-attribute",i}}function ule(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,f;for(;++s<i.length;){const a=$Y(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};f=f?{type:"MemberExpression",object:f,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=f}else r=$Y(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return R$.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);R2(e)}function R2(e,t){const n=new Lu("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ole+"#cannot-handle-mdx-estrees-without-createevaluater",n}function k2e(e){const t={};let n;for(n in e)R$.call(e,n)&&(t[L2e(n)]=e[n]);return t}function L2e(e){let t=e.replace(_2e,z2e);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function z2e(e){return"-"+e.toLowerCase()}const I3={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},N2e={};function z$(e,t){const n=N2e,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return cle(e,r,i)}function cle(e,t,n){if(F2e(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return QY(e.children,t,n)}return Array.isArray(e)?QY(e,t,n):""}function QY(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=cle(e[i],t,n);return r.join("")}function F2e(e){return!!(e&&typeof e=="object")}const JY=document.createElement("i");function N$(e){const t="&"+e+";";JY.innerHTML=t;const n=JY.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Qf(e,t,n,r){const i=e.length;let s=0,f;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)f=Array.from(r),f.unshift(t,n),e.splice(...f);else for(n&&e.splice(t,n);s<r.length;)f=r.slice(s,s+1e4),f.unshift(t,0),e.splice(...f),s+=1e4,t+=1e4}function qh(e,t){return e.length>0?(Qf(e,e.length,0,t),e):t}const eW={}.hasOwnProperty;function fle(e){const t={};let n=-1;for(;++n<e.length;)B2e(t,e[n]);return t}function B2e(e,t){let n;for(n in t){const i=(eW.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let f;if(s)for(f in s){eW.call(i,f)||(i[f]=[]);const a=s[f];j2e(i[f],Array.isArray(a)?a:a?[a]:[])}}}function j2e(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Qf(e,0,0,r)}function hle(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function _p(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const dc=s0(/[A-Za-z]/),Ou=s0(/[\dA-Za-z]/),U2e=s0(/[#-'*+\--9=?A-Z^-~]/);function VD(e){return e!==null&&(e<32||e===127)}const dj=s0(/\d/),$2e=s0(/[\dA-Fa-f]/),V2e=s0(/[!-/:-@[-`{-~]/);function Wr(e){return e!==null&&e<-2}function ao(e){return e!==null&&(e<0||e===32)}function Hi(e){return e===-2||e===-1||e===32}const YP=s0(new RegExp("\\p{P}|\\p{S}","u")),gx=s0(/\s/);function s0(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function VS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let f="";if(s===37&&Ou(e.charCodeAt(n+1))&&Ou(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(f=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(f=String.fromCharCode(s,a),i=1):f=""}else f=String.fromCharCode(s);f&&(t.push(e.slice(r,n),encodeURIComponent(f)),r=n+i+1,f=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function pa(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return f;function f(p){return Hi(p)?(e.enter(n),a(p)):t(p)}function a(p){return Hi(p)&&s++<i?(e.consume(p),a):(e.exit(n),t(p))}}const q2e={tokenize:H2e};function H2e(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),pa(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const p=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=p),n=p,f(a)}function f(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Wr(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),f)}}const G2e={tokenize:Y2e},tW={tokenize:W2e};function Y2e(e){const t=this,n=[];let r=0,i,s,f;return a;function a(J){if(r<n.length){const ie=n[r];return t.containerState=ie[1],e.attempt(ie[0].continuation,p,y)(J)}return y(J)}function p(J){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&K();const ie=t.events.length;let Q=ie,W;for(;Q--;)if(t.events[Q][0]==="exit"&&t.events[Q][1].type==="chunkFlow"){W=t.events[Q][1].end;break}V(r);let te=ie;for(;te<t.events.length;)t.events[te][1].end={...W},te++;return Qf(t.events,Q+1,0,t.events.slice(ie)),t.events.length=te,y(J)}return a(J)}function y(J){if(r===n.length){if(!i)return I(J);if(i.currentConstruct&&i.currentConstruct.concrete)return N(J);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(tW,S,E)(J)}function S(J){return i&&K(),V(r),I(J)}function E(J){return t.parser.lazy[t.now().line]=r!==n.length,f=t.now().offset,N(J)}function I(J){return t.containerState={},e.attempt(tW,L,N)(J)}function L(J){return r++,n.push([t.currentConstruct,t.containerState]),I(J)}function N(J){if(J===null){i&&K(),V(0),e.consume(J);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),j(J)}function j(J){if(J===null){k(e.exit("chunkFlow"),!0),V(0),e.consume(J);return}return Wr(J)?(e.consume(J),k(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(J),j)}function k(J,ie){const Q=t.sliceStream(J);if(ie&&Q.push(null),J.previous=s,s&&(s.next=J),s=J,i.defineSkip(J.start),i.write(Q),t.parser.lazy[J.start.line]){let W=i.events.length;for(;W--;)if(i.events[W][1].start.offset<f&&(!i.events[W][1].end||i.events[W][1].end.offset>f))return;const te=t.events.length;let X=te,ae,le;for(;X--;)if(t.events[X][0]==="exit"&&t.events[X][1].type==="chunkFlow"){if(ae){le=t.events[X][1].end;break}ae=!0}for(V(r),W=te;W<t.events.length;)t.events[W][1].end={...le},W++;Qf(t.events,X+1,0,t.events.slice(te)),t.events.length=W}}function V(J){let ie=n.length;for(;ie-- >J;){const Q=n[ie];t.containerState=Q[1],Q[0].exit.call(t,e)}n.length=J}function K(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function W2e(e,t,n){return pa(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Hw(e){if(e===null||ao(e)||gx(e))return 1;if(YP(e))return 2}function WP(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const pj={name:"attention",resolveAll:X2e,tokenize:Z2e};function X2e(e,t){let n=-1,r,i,s,f,a,p,y,S;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;p=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const E={...e[r][1].end},I={...e[n][1].start};nW(E,-p),nW(I,p),f={type:p>1?"strongSequence":"emphasisSequence",start:E,end:{...e[r][1].end}},a={type:p>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:I},s={type:p>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:p>1?"strong":"emphasis",start:{...f.start},end:{...a.end}},e[r][1].end={...f.start},e[n][1].start={...a.end},y=[],e[r][1].end.offset-e[r][1].start.offset&&(y=qh(y,[["enter",e[r][1],t],["exit",e[r][1],t]])),y=qh(y,[["enter",i,t],["enter",f,t],["exit",f,t],["enter",s,t]]),y=qh(y,WP(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),y=qh(y,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(S=2,y=qh(y,[["enter",e[n][1],t],["exit",e[n][1],t]])):S=0,Qf(e,r-1,n-r+3,y),n=r+y.length-S-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Z2e(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Hw(r);let s;return f;function f(p){return s=p,e.enter("attentionSequence"),a(p)}function a(p){if(p===s)return e.consume(p),a;const y=e.exit("attentionSequence"),S=Hw(p),E=!S||S===2&&i||n.includes(p),I=!i||i===2&&S||n.includes(r);return y._open=!!(s===42?E:E&&(i||!I)),y._close=!!(s===42?I:I&&(S||!E)),t(p)}}function nW(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const K2e={name:"autolink",tokenize:Q2e};function Q2e(e,t,n){let r=0;return i;function i(L){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(L),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(L){return dc(L)?(e.consume(L),f):L===64?n(L):y(L)}function f(L){return L===43||L===45||L===46||Ou(L)?(r=1,a(L)):y(L)}function a(L){return L===58?(e.consume(L),r=0,p):(L===43||L===45||L===46||Ou(L))&&r++<32?(e.consume(L),a):(r=0,y(L))}function p(L){return L===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(L),e.exit("autolinkMarker"),e.exit("autolink"),t):L===null||L===32||L===60||VD(L)?n(L):(e.consume(L),p)}function y(L){return L===64?(e.consume(L),S):U2e(L)?(e.consume(L),y):n(L)}function S(L){return Ou(L)?E(L):n(L)}function E(L){return L===46?(e.consume(L),r=0,S):L===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(L),e.exit("autolinkMarker"),e.exit("autolink"),t):I(L)}function I(L){if((L===45||Ou(L))&&r++<63){const N=L===45?I:E;return e.consume(L),N}return n(L)}}const KA={partial:!0,tokenize:J2e};function J2e(e,t,n){return r;function r(s){return Hi(s)?pa(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Wr(s)?t(s):n(s)}}const dle={continuation:{tokenize:tAe},exit:nAe,name:"blockQuote",tokenize:eAe};function eAe(e,t,n){const r=this;return i;function i(f){if(f===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(f),e.exit("blockQuoteMarker"),s}return n(f)}function s(f){return Hi(f)?(e.enter("blockQuotePrefixWhitespace"),e.consume(f),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(f))}}function tAe(e,t,n){const r=this;return i;function i(f){return Hi(f)?pa(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(f):s(f)}function s(f){return e.attempt(dle,t,n)(f)}}function nAe(e){e.exit("blockQuote")}const ple={name:"characterEscape",tokenize:rAe};function rAe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return V2e(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const mle={name:"characterReference",tokenize:iAe};function iAe(e,t,n){const r=this;let i=0,s,f;return a;function a(E){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(E),e.exit("characterReferenceMarker"),p}function p(E){return E===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(E),e.exit("characterReferenceMarkerNumeric"),y):(e.enter("characterReferenceValue"),s=31,f=Ou,S(E))}function y(E){return E===88||E===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(E),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,f=$2e,S):(e.enter("characterReferenceValue"),s=7,f=dj,S(E))}function S(E){if(E===59&&i){const I=e.exit("characterReferenceValue");return f===Ou&&!N$(r.sliceSerialize(I))?n(E):(e.enter("characterReferenceMarker"),e.consume(E),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return f(E)&&i++<s?(e.consume(E),S):n(E)}}const rW={partial:!0,tokenize:oAe},iW={concrete:!0,name:"codeFenced",tokenize:aAe};function aAe(e,t,n){const r=this,i={partial:!0,tokenize:Q};let s=0,f=0,a;return p;function p(W){return y(W)}function y(W){const te=r.events[r.events.length-1];return s=te&&te[1].type==="linePrefix"?te[2].sliceSerialize(te[1],!0).length:0,a=W,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),S(W)}function S(W){return W===a?(f++,e.consume(W),S):f<3?n(W):(e.exit("codeFencedFenceSequence"),Hi(W)?pa(e,E,"whitespace")(W):E(W))}function E(W){return W===null||Wr(W)?(e.exit("codeFencedFence"),r.interrupt?t(W):e.check(rW,j,ie)(W)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),I(W))}function I(W){return W===null||Wr(W)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),E(W)):Hi(W)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),pa(e,L,"whitespace")(W)):W===96&&W===a?n(W):(e.consume(W),I)}function L(W){return W===null||Wr(W)?E(W):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),N(W))}function N(W){return W===null||Wr(W)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),E(W)):W===96&&W===a?n(W):(e.consume(W),N)}function j(W){return e.attempt(i,ie,k)(W)}function k(W){return e.enter("lineEnding"),e.consume(W),e.exit("lineEnding"),V}function V(W){return s>0&&Hi(W)?pa(e,K,"linePrefix",s+1)(W):K(W)}function K(W){return W===null||Wr(W)?e.check(rW,j,ie)(W):(e.enter("codeFlowValue"),J(W))}function J(W){return W===null||Wr(W)?(e.exit("codeFlowValue"),K(W)):(e.consume(W),J)}function ie(W){return e.exit("codeFenced"),t(W)}function Q(W,te,X){let ae=0;return le;function le(Be){return W.enter("lineEnding"),W.consume(Be),W.exit("lineEnding"),ge}function ge(Be){return W.enter("codeFencedFence"),Hi(Be)?pa(W,ye,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Be):ye(Be)}function ye(Be){return Be===a?(W.enter("codeFencedFenceSequence"),De(Be)):X(Be)}function De(Be){return Be===a?(ae++,W.consume(Be),De):ae>=f?(W.exit("codeFencedFenceSequence"),Hi(Be)?pa(W,He,"whitespace")(Be):He(Be)):X(Be)}function He(Be){return Be===null||Wr(Be)?(W.exit("codeFencedFence"),te(Be)):X(Be)}}}function oAe(e,t,n){const r=this;return i;function i(f){return f===null?n(f):(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),s)}function s(f){return r.parser.lazy[r.now().line]?n(f):t(f)}}const P3={name:"codeIndented",tokenize:lAe},sAe={partial:!0,tokenize:uAe};function lAe(e,t,n){const r=this;return i;function i(y){return e.enter("codeIndented"),pa(e,s,"linePrefix",5)(y)}function s(y){const S=r.events[r.events.length-1];return S&&S[1].type==="linePrefix"&&S[2].sliceSerialize(S[1],!0).length>=4?f(y):n(y)}function f(y){return y===null?p(y):Wr(y)?e.attempt(sAe,f,p)(y):(e.enter("codeFlowValue"),a(y))}function a(y){return y===null||Wr(y)?(e.exit("codeFlowValue"),f(y)):(e.consume(y),a)}function p(y){return e.exit("codeIndented"),t(y)}}function uAe(e,t,n){const r=this;return i;function i(f){return r.parser.lazy[r.now().line]?n(f):Wr(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),i):pa(e,s,"linePrefix",5)(f)}function s(f){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(f):Wr(f)?i(f):n(f)}}const cAe={name:"codeText",previous:hAe,resolve:fAe,tokenize:dAe};function fAe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function hAe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function dAe(e,t,n){let r=0,i,s;return f;function f(E){return e.enter("codeText"),e.enter("codeTextSequence"),a(E)}function a(E){return E===96?(e.consume(E),r++,a):(e.exit("codeTextSequence"),p(E))}function p(E){return E===null?n(E):E===32?(e.enter("space"),e.consume(E),e.exit("space"),p):E===96?(s=e.enter("codeTextSequence"),i=0,S(E)):Wr(E)?(e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),p):(e.enter("codeTextData"),y(E))}function y(E){return E===null||E===32||E===96||Wr(E)?(e.exit("codeTextData"),p(E)):(e.consume(E),y)}function S(E){return E===96?(e.consume(E),i++,S):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(E)):(s.type="codeTextData",y(E))}}class pAe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&CE(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),CE(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),CE(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);CE(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);CE(this.left,n.reverse())}}}function CE(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function gle(e){const t={};let n=-1,r,i,s,f,a,p,y;const S=new pAe(e);for(;++n<S.length;){for(;n in t;)n=t[n];if(r=S.get(n),n&&r[1].type==="chunkFlow"&&S.get(n-1)[1].type==="listItemPrefix"&&(p=r[1]._tokenizer.events,s=0,s<p.length&&p[s][1].type==="lineEndingBlank"&&(s+=2),s<p.length&&p[s][1].type==="content"))for(;++s<p.length&&p[s][1].type!=="content";)p[s][1].type==="chunkText"&&(p[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,mAe(S,n)),n=t[n],y=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(f=S.get(s),f[1].type==="lineEnding"||f[1].type==="lineEndingBlank")f[0]==="enter"&&(i&&(S.get(i)[1].type="lineEndingBlank"),f[1].type="lineEnding",i=s);else if(!(f[1].type==="linePrefix"||f[1].type==="listItemIndent"))break;i&&(r[1].end={...S.get(i)[1].start},a=S.slice(i,n),a.unshift(r),S.splice(i,n-i+1,a))}}return Qf(e,0,Number.POSITIVE_INFINITY,S.slice(0)),!y}function mAe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let f=n._tokenizer;f||(f=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(f._contentTypeTextTrailing=!0));const a=f.events,p=[],y={};let S,E,I=-1,L=n,N=0,j=0;const k=[j];for(;L;){for(;e.get(++i)[1]!==L;);s.push(i),L._tokenizer||(S=r.sliceStream(L),L.next||S.push(null),E&&f.defineSkip(L.start),L._isInFirstContentOfListItem&&(f._gfmTasklistFirstContentOfListItem=!0),f.write(S),L._isInFirstContentOfListItem&&(f._gfmTasklistFirstContentOfListItem=void 0)),E=L,L=L.next}for(L=n;++I<a.length;)a[I][0]==="exit"&&a[I-1][0]==="enter"&&a[I][1].type===a[I-1][1].type&&a[I][1].start.line!==a[I][1].end.line&&(j=I+1,k.push(j),L._tokenizer=void 0,L.previous=void 0,L=L.next);for(f.events=[],L?(L._tokenizer=void 0,L.previous=void 0):k.pop(),I=k.length;I--;){const V=a.slice(k[I],k[I+1]),K=s.pop();p.push([K,K+V.length-1]),e.splice(K,2,V)}for(p.reverse(),I=-1;++I<p.length;)y[N+p[I][0]]=N+p[I][1],N+=p[I][1]-p[I][0]-1;return y}const gAe={resolve:_Ae,tokenize:vAe},yAe={partial:!0,tokenize:bAe};function _Ae(e){return gle(e),e}function vAe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Wr(a)?e.check(yAe,f,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function f(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function bAe(e,t,n){const r=this;return i;function i(f){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),pa(e,s,"linePrefix")}function s(f){if(f===null||Wr(f))return n(f);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(f):e.interrupt(r.parser.constructs.flow,n,t)(f)}}function yle(e,t,n,r,i,s,f,a,p){const y=p||Number.POSITIVE_INFINITY;let S=0;return E;function E(V){return V===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(V),e.exit(s),I):V===null||V===32||V===41||VD(V)?n(V):(e.enter(r),e.enter(f),e.enter(a),e.enter("chunkString",{contentType:"string"}),j(V))}function I(V){return V===62?(e.enter(s),e.consume(V),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),L(V))}function L(V){return V===62?(e.exit("chunkString"),e.exit(a),I(V)):V===null||V===60||Wr(V)?n(V):(e.consume(V),V===92?N:L)}function N(V){return V===60||V===62||V===92?(e.consume(V),L):L(V)}function j(V){return!S&&(V===null||V===41||ao(V))?(e.exit("chunkString"),e.exit(a),e.exit(f),e.exit(r),t(V)):S<y&&V===40?(e.consume(V),S++,j):V===41?(e.consume(V),S--,j):V===null||V===32||V===40||VD(V)?n(V):(e.consume(V),V===92?k:j)}function k(V){return V===40||V===41||V===92?(e.consume(V),j):j(V)}}function _le(e,t,n,r,i,s){const f=this;let a=0,p;return y;function y(L){return e.enter(r),e.enter(i),e.consume(L),e.exit(i),e.enter(s),S}function S(L){return a>999||L===null||L===91||L===93&&!p||L===94&&!a&&"_hiddenFootnoteSupport"in f.parser.constructs?n(L):L===93?(e.exit(s),e.enter(i),e.consume(L),e.exit(i),e.exit(r),t):Wr(L)?(e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),S):(e.enter("chunkString",{contentType:"string"}),E(L))}function E(L){return L===null||L===91||L===93||Wr(L)||a++>999?(e.exit("chunkString"),S(L)):(e.consume(L),p||(p=!Hi(L)),L===92?I:E)}function I(L){return L===91||L===92||L===93?(e.consume(L),a++,E):E(L)}}function vle(e,t,n,r,i,s){let f;return a;function a(I){return I===34||I===39||I===40?(e.enter(r),e.enter(i),e.consume(I),e.exit(i),f=I===40?41:I,p):n(I)}function p(I){return I===f?(e.enter(i),e.consume(I),e.exit(i),e.exit(r),t):(e.enter(s),y(I))}function y(I){return I===f?(e.exit(s),p(f)):I===null?n(I):Wr(I)?(e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),pa(e,y,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),S(I))}function S(I){return I===f||I===null||Wr(I)?(e.exit("chunkString"),y(I)):(e.consume(I),I===92?E:S)}function E(I){return I===f||I===92?(e.consume(I),S):S(I)}}function g2(e,t){let n;return r;function r(i){return Wr(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Hi(i)?pa(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const xAe={name:"definition",tokenize:SAe},wAe={partial:!0,tokenize:TAe};function SAe(e,t,n){const r=this;let i;return s;function s(L){return e.enter("definition"),f(L)}function f(L){return _le.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(L)}function a(L){return i=_p(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),L===58?(e.enter("definitionMarker"),e.consume(L),e.exit("definitionMarker"),p):n(L)}function p(L){return ao(L)?g2(e,y)(L):y(L)}function y(L){return yle(e,S,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(L)}function S(L){return e.attempt(wAe,E,E)(L)}function E(L){return Hi(L)?pa(e,I,"whitespace")(L):I(L)}function I(L){return L===null||Wr(L)?(e.exit("definition"),r.parser.defined.push(i),t(L)):n(L)}}function TAe(e,t,n){return r;function r(a){return ao(a)?g2(e,i)(a):n(a)}function i(a){return vle(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Hi(a)?pa(e,f,"whitespace")(a):f(a)}function f(a){return a===null||Wr(a)?t(a):n(a)}}const EAe={name:"hardBreakEscape",tokenize:AAe};function AAe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Wr(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const OAe={name:"headingAtx",resolve:CAe,tokenize:MAe};function CAe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Qf(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function MAe(e,t,n){let r=0;return i;function i(S){return e.enter("atxHeading"),s(S)}function s(S){return e.enter("atxHeadingSequence"),f(S)}function f(S){return S===35&&r++<6?(e.consume(S),f):S===null||ao(S)?(e.exit("atxHeadingSequence"),a(S)):n(S)}function a(S){return S===35?(e.enter("atxHeadingSequence"),p(S)):S===null||Wr(S)?(e.exit("atxHeading"),t(S)):Hi(S)?pa(e,a,"whitespace")(S):(e.enter("atxHeadingText"),y(S))}function p(S){return S===35?(e.consume(S),p):(e.exit("atxHeadingSequence"),a(S))}function y(S){return S===null||S===35||ao(S)?(e.exit("atxHeadingText"),a(S)):(e.consume(S),y)}}const DAe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],aW=["pre","script","style","textarea"],IAe={concrete:!0,name:"htmlFlow",resolveTo:kAe,tokenize:LAe},PAe={partial:!0,tokenize:NAe},RAe={partial:!0,tokenize:zAe};function kAe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function LAe(e,t,n){const r=this;let i,s,f,a,p;return y;function y(Pe){return S(Pe)}function S(Pe){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Pe),E}function E(Pe){return Pe===33?(e.consume(Pe),I):Pe===47?(e.consume(Pe),s=!0,j):Pe===63?(e.consume(Pe),i=3,r.interrupt?t:je):dc(Pe)?(e.consume(Pe),f=String.fromCharCode(Pe),k):n(Pe)}function I(Pe){return Pe===45?(e.consume(Pe),i=2,L):Pe===91?(e.consume(Pe),i=5,a=0,N):dc(Pe)?(e.consume(Pe),i=4,r.interrupt?t:je):n(Pe)}function L(Pe){return Pe===45?(e.consume(Pe),r.interrupt?t:je):n(Pe)}function N(Pe){const jt="CDATA[";return Pe===jt.charCodeAt(a++)?(e.consume(Pe),a===jt.length?r.interrupt?t:ye:N):n(Pe)}function j(Pe){return dc(Pe)?(e.consume(Pe),f=String.fromCharCode(Pe),k):n(Pe)}function k(Pe){if(Pe===null||Pe===47||Pe===62||ao(Pe)){const jt=Pe===47,sn=f.toLowerCase();return!jt&&!s&&aW.includes(sn)?(i=1,r.interrupt?t(Pe):ye(Pe)):DAe.includes(f.toLowerCase())?(i=6,jt?(e.consume(Pe),V):r.interrupt?t(Pe):ye(Pe)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(Pe):s?K(Pe):J(Pe))}return Pe===45||Ou(Pe)?(e.consume(Pe),f+=String.fromCharCode(Pe),k):n(Pe)}function V(Pe){return Pe===62?(e.consume(Pe),r.interrupt?t:ye):n(Pe)}function K(Pe){return Hi(Pe)?(e.consume(Pe),K):le(Pe)}function J(Pe){return Pe===47?(e.consume(Pe),le):Pe===58||Pe===95||dc(Pe)?(e.consume(Pe),ie):Hi(Pe)?(e.consume(Pe),J):le(Pe)}function ie(Pe){return Pe===45||Pe===46||Pe===58||Pe===95||Ou(Pe)?(e.consume(Pe),ie):Q(Pe)}function Q(Pe){return Pe===61?(e.consume(Pe),W):Hi(Pe)?(e.consume(Pe),Q):J(Pe)}function W(Pe){return Pe===null||Pe===60||Pe===61||Pe===62||Pe===96?n(Pe):Pe===34||Pe===39?(e.consume(Pe),p=Pe,te):Hi(Pe)?(e.consume(Pe),W):X(Pe)}function te(Pe){return Pe===p?(e.consume(Pe),p=null,ae):Pe===null||Wr(Pe)?n(Pe):(e.consume(Pe),te)}function X(Pe){return Pe===null||Pe===34||Pe===39||Pe===47||Pe===60||Pe===61||Pe===62||Pe===96||ao(Pe)?Q(Pe):(e.consume(Pe),X)}function ae(Pe){return Pe===47||Pe===62||Hi(Pe)?J(Pe):n(Pe)}function le(Pe){return Pe===62?(e.consume(Pe),ge):n(Pe)}function ge(Pe){return Pe===null||Wr(Pe)?ye(Pe):Hi(Pe)?(e.consume(Pe),ge):n(Pe)}function ye(Pe){return Pe===45&&i===2?(e.consume(Pe),Ee):Pe===60&&i===1?(e.consume(Pe),Fe):Pe===62&&i===4?(e.consume(Pe),Ke):Pe===63&&i===3?(e.consume(Pe),je):Pe===93&&i===5?(e.consume(Pe),yt):Wr(Pe)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(PAe,it,De)(Pe)):Pe===null||Wr(Pe)?(e.exit("htmlFlowData"),De(Pe)):(e.consume(Pe),ye)}function De(Pe){return e.check(RAe,He,it)(Pe)}function He(Pe){return e.enter("lineEnding"),e.consume(Pe),e.exit("lineEnding"),Be}function Be(Pe){return Pe===null||Wr(Pe)?De(Pe):(e.enter("htmlFlowData"),ye(Pe))}function Ee(Pe){return Pe===45?(e.consume(Pe),je):ye(Pe)}function Fe(Pe){return Pe===47?(e.consume(Pe),f="",at):ye(Pe)}function at(Pe){if(Pe===62){const jt=f.toLowerCase();return aW.includes(jt)?(e.consume(Pe),Ke):ye(Pe)}return dc(Pe)&&f.length<8?(e.consume(Pe),f+=String.fromCharCode(Pe),at):ye(Pe)}function yt(Pe){return Pe===93?(e.consume(Pe),je):ye(Pe)}function je(Pe){return Pe===62?(e.consume(Pe),Ke):Pe===45&&i===2?(e.consume(Pe),je):ye(Pe)}function Ke(Pe){return Pe===null||Wr(Pe)?(e.exit("htmlFlowData"),it(Pe)):(e.consume(Pe),Ke)}function it(Pe){return e.exit("htmlFlow"),t(Pe)}}function zAe(e,t,n){const r=this;return i;function i(f){return Wr(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),s):n(f)}function s(f){return r.parser.lazy[r.now().line]?n(f):t(f)}}function NAe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(KA,t,n)}}const FAe={name:"htmlText",tokenize:BAe};function BAe(e,t,n){const r=this;let i,s,f;return a;function a(je){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(je),p}function p(je){return je===33?(e.consume(je),y):je===47?(e.consume(je),Q):je===63?(e.consume(je),J):dc(je)?(e.consume(je),X):n(je)}function y(je){return je===45?(e.consume(je),S):je===91?(e.consume(je),s=0,N):dc(je)?(e.consume(je),K):n(je)}function S(je){return je===45?(e.consume(je),L):n(je)}function E(je){return je===null?n(je):je===45?(e.consume(je),I):Wr(je)?(f=E,Fe(je)):(e.consume(je),E)}function I(je){return je===45?(e.consume(je),L):E(je)}function L(je){return je===62?Ee(je):je===45?I(je):E(je)}function N(je){const Ke="CDATA[";return je===Ke.charCodeAt(s++)?(e.consume(je),s===Ke.length?j:N):n(je)}function j(je){return je===null?n(je):je===93?(e.consume(je),k):Wr(je)?(f=j,Fe(je)):(e.consume(je),j)}function k(je){return je===93?(e.consume(je),V):j(je)}function V(je){return je===62?Ee(je):je===93?(e.consume(je),V):j(je)}function K(je){return je===null||je===62?Ee(je):Wr(je)?(f=K,Fe(je)):(e.consume(je),K)}function J(je){return je===null?n(je):je===63?(e.consume(je),ie):Wr(je)?(f=J,Fe(je)):(e.consume(je),J)}function ie(je){return je===62?Ee(je):J(je)}function Q(je){return dc(je)?(e.consume(je),W):n(je)}function W(je){return je===45||Ou(je)?(e.consume(je),W):te(je)}function te(je){return Wr(je)?(f=te,Fe(je)):Hi(je)?(e.consume(je),te):Ee(je)}function X(je){return je===45||Ou(je)?(e.consume(je),X):je===47||je===62||ao(je)?ae(je):n(je)}function ae(je){return je===47?(e.consume(je),Ee):je===58||je===95||dc(je)?(e.consume(je),le):Wr(je)?(f=ae,Fe(je)):Hi(je)?(e.consume(je),ae):Ee(je)}function le(je){return je===45||je===46||je===58||je===95||Ou(je)?(e.consume(je),le):ge(je)}function ge(je){return je===61?(e.consume(je),ye):Wr(je)?(f=ge,Fe(je)):Hi(je)?(e.consume(je),ge):ae(je)}function ye(je){return je===null||je===60||je===61||je===62||je===96?n(je):je===34||je===39?(e.consume(je),i=je,De):Wr(je)?(f=ye,Fe(je)):Hi(je)?(e.consume(je),ye):(e.consume(je),He)}function De(je){return je===i?(e.consume(je),i=void 0,Be):je===null?n(je):Wr(je)?(f=De,Fe(je)):(e.consume(je),De)}function He(je){return je===null||je===34||je===39||je===60||je===61||je===96?n(je):je===47||je===62||ao(je)?ae(je):(e.consume(je),He)}function Be(je){return je===47||je===62||ao(je)?ae(je):n(je)}function Ee(je){return je===62?(e.consume(je),e.exit("htmlTextData"),e.exit("htmlText"),t):n(je)}function Fe(je){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(je),e.exit("lineEnding"),at}function at(je){return Hi(je)?pa(e,yt,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(je):yt(je)}function yt(je){return e.enter("htmlTextData"),f(je)}}const F$={name:"labelEnd",resolveAll:VAe,resolveTo:qAe,tokenize:HAe},jAe={tokenize:GAe},UAe={tokenize:YAe},$Ae={tokenize:WAe};function VAe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Qf(e,0,e.length,n),e}function qAe(e,t){let n=e.length,r=0,i,s,f,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(f){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(f=n);const p={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},y={type:"label",start:{...e[s][1].start},end:{...e[f][1].end}},S={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[f-2][1].start}};return a=[["enter",p,t],["enter",y,t]],a=qh(a,e.slice(s+1,s+r+3)),a=qh(a,[["enter",S,t]]),a=qh(a,WP(t.parser.constructs.insideSpan.null,e.slice(s+r+4,f-3),t)),a=qh(a,[["exit",S,t],e[f-2],e[f-1],["exit",y,t]]),a=qh(a,e.slice(f+1)),a=qh(a,[["exit",p,t]]),Qf(e,s,e.length,a),e}function HAe(e,t,n){const r=this;let i=r.events.length,s,f;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(I){return s?s._inactive?E(I):(f=r.parser.defined.includes(_p(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(I),e.exit("labelMarker"),e.exit("labelEnd"),p):n(I)}function p(I){return I===40?e.attempt(jAe,S,f?S:E)(I):I===91?e.attempt(UAe,S,f?y:E)(I):f?S(I):E(I)}function y(I){return e.attempt($Ae,S,E)(I)}function S(I){return t(I)}function E(I){return s._balanced=!0,n(I)}}function GAe(e,t,n){return r;function r(E){return e.enter("resource"),e.enter("resourceMarker"),e.consume(E),e.exit("resourceMarker"),i}function i(E){return ao(E)?g2(e,s)(E):s(E)}function s(E){return E===41?S(E):yle(e,f,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(E)}function f(E){return ao(E)?g2(e,p)(E):S(E)}function a(E){return n(E)}function p(E){return E===34||E===39||E===40?vle(e,y,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(E):S(E)}function y(E){return ao(E)?g2(e,S)(E):S(E)}function S(E){return E===41?(e.enter("resourceMarker"),e.consume(E),e.exit("resourceMarker"),e.exit("resource"),t):n(E)}}function YAe(e,t,n){const r=this;return i;function i(a){return _le.call(r,e,s,f,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(_p(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function f(a){return n(a)}}function WAe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const XAe={name:"labelStartImage",resolveAll:F$.resolveAll,tokenize:ZAe};function ZAe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),f):n(a)}function f(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const KAe={name:"labelStartLink",resolveAll:F$.resolveAll,tokenize:QAe};function QAe(e,t,n){const r=this;return i;function i(f){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelLink"),s}function s(f){return f===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(f):t(f)}}const R3={name:"lineEnding",tokenize:JAe};function JAe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),pa(e,t,"linePrefix")}}const iD={name:"thematicBreak",tokenize:eOe};function eOe(e,t,n){let r=0,i;return s;function s(y){return e.enter("thematicBreak"),f(y)}function f(y){return i=y,a(y)}function a(y){return y===i?(e.enter("thematicBreakSequence"),p(y)):r>=3&&(y===null||Wr(y))?(e.exit("thematicBreak"),t(y)):n(y)}function p(y){return y===i?(e.consume(y),r++,p):(e.exit("thematicBreakSequence"),Hi(y)?pa(e,a,"whitespace")(y):a(y))}}const Xc={continuation:{tokenize:iOe},exit:oOe,name:"list",tokenize:rOe},tOe={partial:!0,tokenize:sOe},nOe={partial:!0,tokenize:aOe};function rOe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,f=0;return a;function a(L){const N=r.containerState.type||(L===42||L===43||L===45?"listUnordered":"listOrdered");if(N==="listUnordered"?!r.containerState.marker||L===r.containerState.marker:dj(L)){if(r.containerState.type||(r.containerState.type=N,e.enter(N,{_container:!0})),N==="listUnordered")return e.enter("listItemPrefix"),L===42||L===45?e.check(iD,n,y)(L):y(L);if(!r.interrupt||L===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),p(L)}return n(L)}function p(L){return dj(L)&&++f<10?(e.consume(L),p):(!r.interrupt||f<2)&&(r.containerState.marker?L===r.containerState.marker:L===41||L===46)?(e.exit("listItemValue"),y(L)):n(L)}function y(L){return e.enter("listItemMarker"),e.consume(L),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||L,e.check(KA,r.interrupt?n:S,e.attempt(tOe,I,E))}function S(L){return r.containerState.initialBlankLine=!0,s++,I(L)}function E(L){return Hi(L)?(e.enter("listItemPrefixWhitespace"),e.consume(L),e.exit("listItemPrefixWhitespace"),I):n(L)}function I(L){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(L)}}function iOe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(KA,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,pa(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Hi(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,f(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(nOe,t,f)(a))}function f(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,pa(e,e.attempt(Xc,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function aOe(e,t,n){const r=this;return pa(e,i,"listItemIndent",r.containerState.size+1);function i(s){const f=r.events[r.events.length-1];return f&&f[1].type==="listItemIndent"&&f[2].sliceSerialize(f[1],!0).length===r.containerState.size?t(s):n(s)}}function oOe(e){e.exit(this.containerState.type)}function sOe(e,t,n){const r=this;return pa(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const f=r.events[r.events.length-1];return!Hi(s)&&f&&f[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const oW={name:"setextUnderline",resolveTo:lOe,tokenize:uOe};function lOe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const f={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",f,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=f,e.push(["exit",f,t]),e}function uOe(e,t,n){const r=this;let i;return s;function s(y){let S=r.events.length,E;for(;S--;)if(r.events[S][1].type!=="lineEnding"&&r.events[S][1].type!=="linePrefix"&&r.events[S][1].type!=="content"){E=r.events[S][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||E)?(e.enter("setextHeadingLine"),i=y,f(y)):n(y)}function f(y){return e.enter("setextHeadingLineSequence"),a(y)}function a(y){return y===i?(e.consume(y),a):(e.exit("setextHeadingLineSequence"),Hi(y)?pa(e,p,"lineSuffix")(y):p(y))}function p(y){return y===null||Wr(y)?(e.exit("setextHeadingLine"),t(y)):n(y)}}const cOe={tokenize:fOe};function fOe(e){const t=this,n=e.attempt(KA,r,e.attempt(this.parser.constructs.flowInitial,i,pa(e,e.attempt(this.parser.constructs.flow,i,e.attempt(gAe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const hOe={resolveAll:xle()},dOe=ble("string"),pOe=ble("text");function ble(e){return{resolveAll:xle(e==="text"?mOe:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,f,a);return f;function f(S){return y(S)?s(S):a(S)}function a(S){if(S===null){n.consume(S);return}return n.enter("data"),n.consume(S),p}function p(S){return y(S)?(n.exit("data"),s(S)):(n.consume(S),p)}function y(S){if(S===null)return!0;const E=i[S];let I=-1;if(E)for(;++I<E.length;){const L=E[I];if(!L.previous||L.previous.call(r,r.previous))return!0}return!1}}}function xle(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function mOe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,f=-1,a=0,p;for(;s--;){const y=i[s];if(typeof y=="string"){for(f=y.length;y.charCodeAt(f-1)===32;)a++,f--;if(f)break;f=-1}else if(y===-2)p=!0,a++;else if(y!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const y={type:n===e.length||p||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?f:r.start._bufferIndex+f,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...y.start},r.start.offset===r.end.offset?Object.assign(r,y):(e.splice(n,0,["enter",y,t],["exit",y,t]),n+=2)}n++}return e}const gOe={42:Xc,43:Xc,45:Xc,48:Xc,49:Xc,50:Xc,51:Xc,52:Xc,53:Xc,54:Xc,55:Xc,56:Xc,57:Xc,62:dle},yOe={91:xAe},_Oe={[-2]:P3,[-1]:P3,32:P3},vOe={35:OAe,42:iD,45:[oW,iD],60:IAe,61:oW,95:iD,96:iW,126:iW},bOe={38:mle,92:ple},xOe={[-5]:R3,[-4]:R3,[-3]:R3,33:XAe,38:mle,42:pj,60:[K2e,FAe],91:KAe,92:[EAe,ple],93:F$,95:pj,96:cAe},wOe={null:[pj,hOe]},SOe={null:[42,95]},TOe={null:[]},EOe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:SOe,contentInitial:yOe,disable:TOe,document:gOe,flow:vOe,flowInitial:_Oe,insideSpan:wOe,string:bOe,text:xOe},Symbol.toStringTag,{value:"Module"}));function AOe(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let f=[],a=[];const p={attempt:te(Q),check:te(W),consume:K,enter:J,exit:ie,interrupt:te(W,{interrupt:!0})},y={code:null,containerState:{},defineSkip:j,events:[],now:N,parser:e,previous:null,sliceSerialize:I,sliceStream:L,write:E};let S=t.tokenize.call(y,p);return t.resolveAll&&s.push(t),y;function E(ge){return f=qh(f,ge),k(),f[f.length-1]!==null?[]:(X(t,0),y.events=WP(s,y.events,y),y.events)}function I(ge,ye){return COe(L(ge),ye)}function L(ge){return OOe(f,ge)}function N(){const{_bufferIndex:ge,_index:ye,line:De,column:He,offset:Be}=r;return{_bufferIndex:ge,_index:ye,line:De,column:He,offset:Be}}function j(ge){i[ge.line]=ge.column,le()}function k(){let ge;for(;r._index<f.length;){const ye=f[r._index];if(typeof ye=="string")for(ge=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===ge&&r._bufferIndex<ye.length;)V(ye.charCodeAt(r._bufferIndex));else V(ye)}}function V(ge){S=S(ge)}function K(ge){Wr(ge)?(r.line++,r.column=1,r.offset+=ge===-3?2:1,le()):ge!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===f[r._index].length&&(r._bufferIndex=-1,r._index++)),y.previous=ge}function J(ge,ye){const De=ye||{};return De.type=ge,De.start=N(),y.events.push(["enter",De,y]),a.push(De),De}function ie(ge){const ye=a.pop();return ye.end=N(),y.events.push(["exit",ye,y]),ye}function Q(ge,ye){X(ge,ye.from)}function W(ge,ye){ye.restore()}function te(ge,ye){return De;function De(He,Be,Ee){let Fe,at,yt,je;return Array.isArray(He)?it(He):"tokenize"in He?it([He]):Ke(He);function Ke(dn){return Tn;function Tn(Ut){const xe=Ut!==null&&dn[Ut],Ye=Ut!==null&&dn.null,ct=[...Array.isArray(xe)?xe:xe?[xe]:[],...Array.isArray(Ye)?Ye:Ye?[Ye]:[]];return it(ct)(Ut)}}function it(dn){return Fe=dn,at=0,dn.length===0?Ee:Pe(dn[at])}function Pe(dn){return Tn;function Tn(Ut){return je=ae(),yt=dn,dn.partial||(y.currentConstruct=dn),dn.name&&y.parser.constructs.disable.null.includes(dn.name)?sn():dn.tokenize.call(ye?Object.assign(Object.create(y),ye):y,p,jt,sn)(Ut)}}function jt(dn){return ge(yt,je),Be}function sn(dn){return je.restore(),++at<Fe.length?Pe(Fe[at]):Ee}}}function X(ge,ye){ge.resolveAll&&!s.includes(ge)&&s.push(ge),ge.resolve&&Qf(y.events,ye,y.events.length-ye,ge.resolve(y.events.slice(ye),y)),ge.resolveTo&&(y.events=ge.resolveTo(y.events,y))}function ae(){const ge=N(),ye=y.previous,De=y.currentConstruct,He=y.events.length,Be=Array.from(a);return{from:He,restore:Ee};function Ee(){r=ge,y.previous=ye,y.currentConstruct=De,y.events.length=He,a=Be,le()}}function le(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function OOe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let f;if(n===i)f=[e[n].slice(r,s)];else{if(f=e.slice(n,i),r>-1){const a=f[0];typeof a=="string"?f[0]=a.slice(r):f.shift()}s>0&&f.push(e[i].slice(0,s))}return f}function COe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let f;if(typeof s=="string")f=s;else switch(s){case-5:{f="\r";break}case-4:{f=`
`;break}case-3:{f=`\r
`;break}case-2:{f=t?" ":"	";break}case-1:{if(!t&&i)continue;f=" ";break}default:f=String.fromCharCode(s)}i=s===-2,r.push(f)}return r.join("")}function MOe(e){const r={constructs:fle([EOe,...(e||{}).extensions||[]]),content:i(q2e),defined:[],document:i(G2e),flow:i(cOe),lazy:{},string:i(dOe),text:i(pOe)};return r;function i(s){return f;function f(a){return AOe(r,s,a)}}}function DOe(e){for(;!gle(e););return e}const sW=/[\0\t\n\r]/g;function IOe(){let e=1,t="",n=!0,r;return i;function i(s,f,a){const p=[];let y,S,E,I,L;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(f||void 0).decode(s)),E=0,t="",n&&(s.charCodeAt(0)===65279&&E++,n=void 0);E<s.length;){if(sW.lastIndex=E,y=sW.exec(s),I=y&&y.index!==void 0?y.index:s.length,L=s.charCodeAt(I),!y){t=s.slice(E);break}if(L===10&&E===I&&r)p.push(-3),r=void 0;else switch(r&&(p.push(-5),r=void 0),E<I&&(p.push(s.slice(E,I)),e+=I-E),L){case 0:{p.push(65533),e++;break}case 9:{for(S=Math.ceil(e/4)*4,p.push(-2);e++<S;)p.push(-1);break}case 10:{p.push(-4),e=1;break}default:r=!0,e=1}E=I+1}return a&&(r&&p.push(-5),t&&p.push(t),p.push(null)),p}}const POe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ROe(e){return e.replace(POe,kOe)}function kOe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return hle(n.slice(s?2:1),s?16:10)}return N$(n)||e}const wle={}.hasOwnProperty;function LOe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),zOe(n)(DOe(MOe(n).document().write(IOe()(e,t,!0))))}function zOe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Nr),autolinkProtocol:ae,autolinkEmail:ae,atxHeading:s(gn),blockQuote:s(Ye),characterEscape:ae,characterReference:ae,codeFenced:s(ct),codeFencedFenceInfo:f,codeFencedFenceMeta:f,codeIndented:s(ct,f),codeText:s(mt,f),codeTextData:ae,data:ae,codeFlowValue:ae,definition:s(Ct),definitionDestinationString:f,definitionLabelString:f,definitionTitleString:f,emphasis:s(Yt),hardBreakEscape:s(An),hardBreakTrailing:s(An),htmlFlow:s(ar,f),htmlFlowData:ae,htmlText:s(ar,f),htmlTextData:ae,image:s(or),label:f,link:s(Nr),listItem:s(Er),listItemValue:I,listOrdered:s(Pr,E),listUnordered:s(Pr),paragraph:s(Tr),reference:Pe,referenceString:f,resourceDestinationString:f,resourceTitleString:f,setextHeading:s(gn),strong:s(pi),thematicBreak:s(hi)},exit:{atxHeading:p(),atxHeadingSequence:Q,autolink:p(),autolinkEmail:xe,autolinkProtocol:Ut,blockQuote:p(),characterEscapeValue:le,characterReferenceMarkerHexadecimal:sn,characterReferenceMarkerNumeric:sn,characterReferenceValue:dn,characterReference:Tn,codeFenced:p(k),codeFencedFence:j,codeFencedFenceInfo:L,codeFencedFenceMeta:N,codeFlowValue:le,codeIndented:p(V),codeText:p(Be),codeTextData:le,data:le,definition:p(),definitionDestinationString:ie,definitionLabelString:K,definitionTitleString:J,emphasis:p(),hardBreakEscape:p(ye),hardBreakTrailing:p(ye),htmlFlow:p(De),htmlFlowData:le,htmlText:p(He),htmlTextData:le,image:p(Fe),label:yt,labelText:at,lineEnding:ge,link:p(Ee),listItem:p(),listOrdered:p(),listUnordered:p(),paragraph:p(),referenceString:jt,resourceDestinationString:je,resourceTitleString:Ke,resource:it,setextHeading:p(X),setextHeadingLineSequence:te,setextHeadingText:W,strong:p(),thematicBreak:p()}};Sle(t,(e||{}).mdastExtensions||[]);const n={};return r;function r($t){let En={type:"root",children:[]};const ur={stack:[En],tokenStack:[],config:t,enter:a,exit:y,buffer:f,resume:S,data:n},$r=[];let Br=-1;for(;++Br<$t.length;)if($t[Br][1].type==="listOrdered"||$t[Br][1].type==="listUnordered")if($t[Br][0]==="enter")$r.push(Br);else{const Ya=$r.pop();Br=i($t,Ya,Br)}for(Br=-1;++Br<$t.length;){const Ya=t[$t[Br][0]];wle.call(Ya,$t[Br][1].type)&&Ya[$t[Br][1].type].call(Object.assign({sliceSerialize:$t[Br][2].sliceSerialize},ur),$t[Br][1])}if(ur.tokenStack.length>0){const Ya=ur.tokenStack[ur.tokenStack.length-1];(Ya[1]||lW).call(ur,void 0,Ya[0])}for(En.position={start:Dv($t.length>0?$t[0][1].start:{line:1,column:1,offset:0}),end:Dv($t.length>0?$t[$t.length-2][1].end:{line:1,column:1,offset:0})},Br=-1;++Br<t.transforms.length;)En=t.transforms[Br](En)||En;return En}function i($t,En,ur){let $r=En-1,Br=-1,Ya=!1,vo,Yo,Aa,Qi;for(;++$r<=ur;){const Ri=$t[$r];switch(Ri[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ri[0]==="enter"?Br++:Br--,Qi=void 0;break}case"lineEndingBlank":{Ri[0]==="enter"&&(vo&&!Qi&&!Br&&!Aa&&(Aa=$r),Qi=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Qi=void 0}if(!Br&&Ri[0]==="enter"&&Ri[1].type==="listItemPrefix"||Br===-1&&Ri[0]==="exit"&&(Ri[1].type==="listUnordered"||Ri[1].type==="listOrdered")){if(vo){let zs=$r;for(Yo=void 0;zs--;){const is=$t[zs];if(is[1].type==="lineEnding"||is[1].type==="lineEndingBlank"){if(is[0]==="exit")continue;Yo&&($t[Yo][1].type="lineEndingBlank",Ya=!0),is[1].type="lineEnding",Yo=zs}else if(!(is[1].type==="linePrefix"||is[1].type==="blockQuotePrefix"||is[1].type==="blockQuotePrefixWhitespace"||is[1].type==="blockQuoteMarker"||is[1].type==="listItemIndent"))break}Aa&&(!Yo||Aa<Yo)&&(vo._spread=!0),vo.end=Object.assign({},Yo?$t[Yo][1].start:Ri[1].end),$t.splice(Yo||$r,0,["exit",vo,Ri[2]]),$r++,ur++}if(Ri[1].type==="listItemPrefix"){const zs={type:"listItem",_spread:!1,start:Object.assign({},Ri[1].start),end:void 0};vo=zs,$t.splice($r,0,["enter",zs,Ri[2]]),$r++,ur++,Aa=void 0,Qi=!0}}}return $t[En][1]._spread=Ya,ur}function s($t,En){return ur;function ur($r){a.call(this,$t($r),$r),En&&En.call(this,$r)}}function f(){this.stack.push({type:"fragment",children:[]})}function a($t,En,ur){this.stack[this.stack.length-1].children.push($t),this.stack.push($t),this.tokenStack.push([En,ur||void 0]),$t.position={start:Dv(En.start),end:void 0}}function p($t){return En;function En(ur){$t&&$t.call(this,ur),y.call(this,ur)}}function y($t,En){const ur=this.stack.pop(),$r=this.tokenStack.pop();if($r)$r[0].type!==$t.type&&(En?En.call(this,$t,$r[0]):($r[1]||lW).call(this,$t,$r[0]));else throw new Error("Cannot close `"+$t.type+"` ("+m2({start:$t.start,end:$t.end})+"): its not open");ur.position.end=Dv($t.end)}function S(){return z$(this.stack.pop())}function E(){this.data.expectingFirstListItemValue=!0}function I($t){if(this.data.expectingFirstListItemValue){const En=this.stack[this.stack.length-2];En.start=Number.parseInt(this.sliceSerialize($t),10),this.data.expectingFirstListItemValue=void 0}}function L(){const $t=this.resume(),En=this.stack[this.stack.length-1];En.lang=$t}function N(){const $t=this.resume(),En=this.stack[this.stack.length-1];En.meta=$t}function j(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const $t=this.resume(),En=this.stack[this.stack.length-1];En.value=$t.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function V(){const $t=this.resume(),En=this.stack[this.stack.length-1];En.value=$t.replace(/(\r?\n|\r)$/g,"")}function K($t){const En=this.resume(),ur=this.stack[this.stack.length-1];ur.label=En,ur.identifier=_p(this.sliceSerialize($t)).toLowerCase()}function J(){const $t=this.resume(),En=this.stack[this.stack.length-1];En.title=$t}function ie(){const $t=this.resume(),En=this.stack[this.stack.length-1];En.url=$t}function Q($t){const En=this.stack[this.stack.length-1];if(!En.depth){const ur=this.sliceSerialize($t).length;En.depth=ur}}function W(){this.data.setextHeadingSlurpLineEnding=!0}function te($t){const En=this.stack[this.stack.length-1];En.depth=this.sliceSerialize($t).codePointAt(0)===61?1:2}function X(){this.data.setextHeadingSlurpLineEnding=void 0}function ae($t){const ur=this.stack[this.stack.length-1].children;let $r=ur[ur.length-1];(!$r||$r.type!=="text")&&($r=Fr(),$r.position={start:Dv($t.start),end:void 0},ur.push($r)),this.stack.push($r)}function le($t){const En=this.stack.pop();En.value+=this.sliceSerialize($t),En.position.end=Dv($t.end)}function ge($t){const En=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ur=En.children[En.children.length-1];ur.position.end=Dv($t.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(En.type)&&(ae.call(this,$t),le.call(this,$t))}function ye(){this.data.atHardBreak=!0}function De(){const $t=this.resume(),En=this.stack[this.stack.length-1];En.value=$t}function He(){const $t=this.resume(),En=this.stack[this.stack.length-1];En.value=$t}function Be(){const $t=this.resume(),En=this.stack[this.stack.length-1];En.value=$t}function Ee(){const $t=this.stack[this.stack.length-1];if(this.data.inReference){const En=this.data.referenceType||"shortcut";$t.type+="Reference",$t.referenceType=En,delete $t.url,delete $t.title}else delete $t.identifier,delete $t.label;this.data.referenceType=void 0}function Fe(){const $t=this.stack[this.stack.length-1];if(this.data.inReference){const En=this.data.referenceType||"shortcut";$t.type+="Reference",$t.referenceType=En,delete $t.url,delete $t.title}else delete $t.identifier,delete $t.label;this.data.referenceType=void 0}function at($t){const En=this.sliceSerialize($t),ur=this.stack[this.stack.length-2];ur.label=ROe(En),ur.identifier=_p(En).toLowerCase()}function yt(){const $t=this.stack[this.stack.length-1],En=this.resume(),ur=this.stack[this.stack.length-1];if(this.data.inReference=!0,ur.type==="link"){const $r=$t.children;ur.children=$r}else ur.alt=En}function je(){const $t=this.resume(),En=this.stack[this.stack.length-1];En.url=$t}function Ke(){const $t=this.resume(),En=this.stack[this.stack.length-1];En.title=$t}function it(){this.data.inReference=void 0}function Pe(){this.data.referenceType="collapsed"}function jt($t){const En=this.resume(),ur=this.stack[this.stack.length-1];ur.label=En,ur.identifier=_p(this.sliceSerialize($t)).toLowerCase(),this.data.referenceType="full"}function sn($t){this.data.characterReferenceType=$t.type}function dn($t){const En=this.sliceSerialize($t),ur=this.data.characterReferenceType;let $r;ur?($r=hle(En,ur==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):$r=N$(En);const Br=this.stack[this.stack.length-1];Br.value+=$r}function Tn($t){const En=this.stack.pop();En.position.end=Dv($t.end)}function Ut($t){le.call(this,$t);const En=this.stack[this.stack.length-1];En.url=this.sliceSerialize($t)}function xe($t){le.call(this,$t);const En=this.stack[this.stack.length-1];En.url="mailto:"+this.sliceSerialize($t)}function Ye(){return{type:"blockquote",children:[]}}function ct(){return{type:"code",lang:null,meta:null,value:""}}function mt(){return{type:"inlineCode",value:""}}function Ct(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Yt(){return{type:"emphasis",children:[]}}function gn(){return{type:"heading",depth:0,children:[]}}function An(){return{type:"break"}}function ar(){return{type:"html",value:""}}function or(){return{type:"image",title:null,url:"",alt:null}}function Nr(){return{type:"link",title:null,url:"",children:[]}}function Pr($t){return{type:"list",ordered:$t.type==="listOrdered",start:null,spread:$t._spread,children:[]}}function Er($t){return{type:"listItem",spread:$t._spread,checked:null,children:[]}}function Tr(){return{type:"paragraph",children:[]}}function pi(){return{type:"strong",children:[]}}function Fr(){return{type:"text",value:""}}function hi(){return{type:"thematicBreak"}}}function Dv(e){return{line:e.line,column:e.column,offset:e.offset}}function Sle(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Sle(e,r):NOe(e,r)}}function NOe(e,t){let n;for(n in t)if(wle.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function lW(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+m2({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+m2({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+m2({start:t.start,end:t.end})+") is still open")}function FOe(e){const t=this;t.parser=n;function n(r){return LOe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function BOe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function jOe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function UOe(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function $Oe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function VOe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function qOe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=VS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let f,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),f=e.footnoteOrder.length):f=s+1,a+=1,e.footnoteCounts.set(r,a);const p={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(f)}]};e.patch(t,p);const y={type:"element",tagName:"sup",properties:{},children:[p]};return e.patch(t,y),e.applyData(t,y)}function HOe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function GOe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Tle(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const f=i[i.length-1];return f&&f.type==="text"?f.value+=r:i.push({type:"text",value:r}),i}function YOe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Tle(e,t);const i={src:VS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function WOe(e,t){const n={src:VS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function XOe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function ZOe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Tle(e,t);const i={href:VS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function KOe(e,t){const n={href:VS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function QOe(e,t,n){const r=e.all(t),i=n?JOe(n):Ele(t),s={},f=[];if(typeof t.checked=="boolean"){const S=r[0];let E;S&&S.type==="element"&&S.tagName==="p"?E=S:(E={type:"element",tagName:"p",properties:{},children:[]},r.unshift(E)),E.children.length>0&&E.children.unshift({type:"text",value:" "}),E.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const S=r[a];(i||a!==0||S.type!=="element"||S.tagName!=="p")&&f.push({type:"text",value:`
`}),S.type==="element"&&S.tagName==="p"&&!i?f.push(...S.children):f.push(S)}const p=r[r.length-1];p&&(i||p.type!=="element"||p.tagName!=="p")&&f.push({type:"text",value:`
`});const y={type:"element",tagName:"li",properties:s,children:f};return e.patch(t,y),e.applyData(t,y)}function JOe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Ele(n[r])}return t}function Ele(e){const t=e.spread;return t??e.children.length>1}function eCe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const f=r[i];if(f.type==="element"&&f.tagName==="li"&&f.properties&&Array.isArray(f.properties.className)&&f.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function tCe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function nCe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function rCe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function iCe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const f={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],f),i.push(f)}if(n.length>0){const f={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=P$(t.children[1]),p=ile(t.children[t.children.length-1]);a&&p&&(f.position={start:a,end:p}),i.push(f)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function aCe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",f=n&&n.type==="table"?n.align:void 0,a=f?f.length:t.children.length;let p=-1;const y=[];for(;++p<a;){const E=t.children[p],I={},L=f?f[p]:void 0;L&&(I.align=L);let N={type:"element",tagName:s,properties:I,children:[]};E&&(N.children=e.all(E),e.patch(E,N),N=e.applyData(E,N)),y.push(N)}const S={type:"element",tagName:"tr",properties:{},children:e.wrap(y,!0)};return e.patch(t,S),e.applyData(t,S)}function oCe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const uW=9,cW=32;function sCe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(fW(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(fW(t.slice(i),i>0,!1)),s.join("")}function fW(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===uW||s===cW;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===uW||s===cW;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function lCe(e,t){const n={type:"text",value:sCe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function uCe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const cCe={blockquote:BOe,break:jOe,code:UOe,delete:$Oe,emphasis:VOe,footnoteReference:qOe,heading:HOe,html:GOe,imageReference:YOe,image:WOe,inlineCode:XOe,linkReference:ZOe,link:KOe,listItem:QOe,list:eCe,paragraph:tCe,root:nCe,strong:rCe,table:iCe,tableCell:oCe,tableRow:aCe,text:lCe,thematicBreak:uCe,toml:sM,yaml:sM,definition:sM,footnoteDefinition:sM};function sM(){}const Ale=-1,XP=0,y2=1,qD=2,B$=3,j$=4,U$=5,$$=6,Ole=7,Cle=8,hW=typeof self=="object"?self:globalThis,fCe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,f]=t[i];switch(s){case XP:case Ale:return n(f,i);case y2:{const a=n([],i);for(const p of f)a.push(r(p));return a}case qD:{const a=n({},i);for(const[p,y]of f)a[r(p)]=r(y);return a}case B$:return n(new Date(f),i);case j$:{const{source:a,flags:p}=f;return n(new RegExp(a,p),i)}case U$:{const a=n(new Map,i);for(const[p,y]of f)a.set(r(p),r(y));return a}case $$:{const a=n(new Set,i);for(const p of f)a.add(r(p));return a}case Ole:{const{name:a,message:p}=f;return n(new hW[a](p),i)}case Cle:return n(BigInt(f),i);case"BigInt":return n(Object(BigInt(f)),i);case"ArrayBuffer":return n(new Uint8Array(f).buffer,f);case"DataView":{const{buffer:a}=new Uint8Array(f);return n(new DataView(a),f)}}return n(new hW[s](f),i)};return r},dW=e=>fCe(new Map,e)(0),tw="",{toString:hCe}={},{keys:dCe}=Object,ME=e=>{const t=typeof e;if(t!=="object"||!e)return[XP,t];const n=hCe.call(e).slice(8,-1);switch(n){case"Array":return[y2,tw];case"Object":return[qD,tw];case"Date":return[B$,tw];case"RegExp":return[j$,tw];case"Map":return[U$,tw];case"Set":return[$$,tw];case"DataView":return[y2,n]}return n.includes("Array")?[y2,n]:n.includes("Error")?[Ole,n]:[qD,n]},lM=([e,t])=>e===XP&&(t==="function"||t==="symbol"),pCe=(e,t,n,r)=>{const i=(f,a)=>{const p=r.push(f)-1;return n.set(a,p),p},s=f=>{if(n.has(f))return n.get(f);let[a,p]=ME(f);switch(a){case XP:{let S=f;switch(p){case"bigint":a=Cle,S=f.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+p);S=null;break;case"undefined":return i([Ale],f)}return i([a,S],f)}case y2:{if(p){let I=f;return p==="DataView"?I=new Uint8Array(f.buffer):p==="ArrayBuffer"&&(I=new Uint8Array(f)),i([p,[...I]],f)}const S=[],E=i([a,S],f);for(const I of f)S.push(s(I));return E}case qD:{if(p)switch(p){case"BigInt":return i([p,f.toString()],f);case"Boolean":case"Number":case"String":return i([p,f.valueOf()],f)}if(t&&"toJSON"in f)return s(f.toJSON());const S=[],E=i([a,S],f);for(const I of dCe(f))(e||!lM(ME(f[I])))&&S.push([s(I),s(f[I])]);return E}case B$:return i([a,f.toISOString()],f);case j$:{const{source:S,flags:E}=f;return i([a,{source:S,flags:E}],f)}case U$:{const S=[],E=i([a,S],f);for(const[I,L]of f)(e||!(lM(ME(I))||lM(ME(L))))&&S.push([s(I),s(L)]);return E}case $$:{const S=[],E=i([a,S],f);for(const I of f)(e||!lM(ME(I)))&&S.push(s(I));return E}}const{message:y}=f;return i([a,{name:p,message:y}],f)};return s},pW=(e,{json:t,lossy:n}={})=>{const r=[];return pCe(!(t||n),!!t,new Map,r)(e),r},HD=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?dW(pW(e,t)):structuredClone(e):(e,t)=>dW(pW(e,t));function mCe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function gCe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function yCe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||mCe,r=e.options.footnoteBackLabel||gCe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",f=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let p=-1;for(;++p<e.footnoteOrder.length;){const y=e.footnoteById.get(e.footnoteOrder[p]);if(!y)continue;const S=e.all(y),E=String(y.identifier).toUpperCase(),I=VS(E.toLowerCase());let L=0;const N=[],j=e.footnoteCounts.get(E);for(;j!==void 0&&++L<=j;){N.length>0&&N.push({type:"text",value:" "});let K=typeof n=="string"?n:n(p,L);typeof K=="string"&&(K={type:"text",value:K}),N.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+I+(L>1?"-"+L:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(p,L),className:["data-footnote-backref"]},children:Array.isArray(K)?K:[K]})}const k=S[S.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const K=k.children[k.children.length-1];K&&K.type==="text"?K.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...N)}else S.push(...N);const V={type:"element",tagName:"li",properties:{id:t+"fn-"+I},children:e.wrap(S,!0)};e.patch(y,V),a.push(V)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...HD(f),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const ZP=(function(e){if(e==null)return xCe;if(typeof e=="function")return KP(e);if(typeof e=="object")return Array.isArray(e)?_Ce(e):vCe(e);if(typeof e=="string")return bCe(e);throw new Error("Expected function, string, or object as test")});function _Ce(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ZP(e[n]);return KP(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function vCe(e){const t=e;return KP(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function bCe(e){return KP(t);function t(n){return n&&n.type===e}}function KP(e){return t;function t(n,r,i){return!!(wCe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function xCe(){return!0}function wCe(e){return e!==null&&typeof e=="object"&&"type"in e}const Mle=[],SCe=!0,mj=!1,TCe="skip";function Dle(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=ZP(i),f=r?-1:1;a(e,void 0,[])();function a(p,y,S){const E=p&&typeof p=="object"?p:{};if(typeof E.type=="string"){const L=typeof E.tagName=="string"?E.tagName:typeof E.name=="string"?E.name:void 0;Object.defineProperty(I,"name",{value:"node ("+(p.type+(L?"<"+L+">":""))+")"})}return I;function I(){let L=Mle,N,j,k;if((!t||s(p,y,S[S.length-1]||void 0))&&(L=ECe(n(p,S)),L[0]===mj))return L;if("children"in p&&p.children){const V=p;if(V.children&&L[0]!==TCe)for(j=(r?V.children.length:-1)+f,k=S.concat(V);j>-1&&j<V.children.length;){const K=V.children[j];if(N=a(K,j,k)(),N[0]===mj)return N;j=typeof N[1]=="number"?N[1]:j+f}}return L}}}function ECe(e){return Array.isArray(e)?e:typeof e=="number"?[SCe,e]:e==null?Mle:[e]}function V$(e,t,n,r){let i,s,f;typeof t=="function"&&typeof n!="function"?(s=void 0,f=t,i=n):(s=t,f=n,i=r),Dle(e,s,a,i);function a(p,y){const S=y[y.length-1],E=S?S.children.indexOf(p):void 0;return f(p,E,S)}}const gj={}.hasOwnProperty,ACe={};function OCe(e,t){const n=t||ACe,r=new Map,i=new Map,s=new Map,f={...cCe,...n.handlers},a={all:y,applyData:MCe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:f,one:p,options:n,patch:CCe,wrap:ICe};return V$(e,function(S){if(S.type==="definition"||S.type==="footnoteDefinition"){const E=S.type==="definition"?r:i,I=String(S.identifier).toUpperCase();E.has(I)||E.set(I,S)}}),a;function p(S,E){const I=S.type,L=a.handlers[I];if(gj.call(a.handlers,I)&&L)return L(a,S,E);if(a.options.passThrough&&a.options.passThrough.includes(I)){if("children"in S){const{children:j,...k}=S,V=HD(k);return V.children=a.all(S),V}return HD(S)}return(a.options.unknownHandler||DCe)(a,S,E)}function y(S){const E=[];if("children"in S){const I=S.children;let L=-1;for(;++L<I.length;){const N=a.one(I[L],S);if(N){if(L&&I[L-1].type==="break"&&(!Array.isArray(N)&&N.type==="text"&&(N.value=mW(N.value)),!Array.isArray(N)&&N.type==="element")){const j=N.children[0];j&&j.type==="text"&&(j.value=mW(j.value))}Array.isArray(N)?E.push(...N):E.push(N)}}}return E}}function CCe(e,t){e.position&&(t.position=g2e(e))}function MCe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const f="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:f}}n.type==="element"&&s&&Object.assign(n.properties,HD(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function DCe(e,t){const n=t.data||{},r="value"in t&&!(gj.call(n,"hProperties")||gj.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ICe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function mW(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function gW(e,t){const n=OCe(e,t),r=n.one(e,void 0),i=yCe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function PCe(e,t){return e&&"run"in e?async function(n,r){const i=gW(n,{file:r,...t});await e.run(i,r)}:function(n,r){return gW(n,{file:r,...e||t})}}function yW(e){if(e)throw e}var k3,_W;function RCe(){if(_W)return k3;_W=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(y){return typeof Array.isArray=="function"?Array.isArray(y):t.call(y)==="[object Array]"},s=function(y){if(!y||t.call(y)!=="[object Object]")return!1;var S=e.call(y,"constructor"),E=y.constructor&&y.constructor.prototype&&e.call(y.constructor.prototype,"isPrototypeOf");if(y.constructor&&!S&&!E)return!1;var I;for(I in y);return typeof I>"u"||e.call(y,I)},f=function(y,S){n&&S.name==="__proto__"?n(y,S.name,{enumerable:!0,configurable:!0,value:S.newValue,writable:!0}):y[S.name]=S.newValue},a=function(y,S){if(S==="__proto__")if(e.call(y,S)){if(r)return r(y,S).value}else return;return y[S]};return k3=function p(){var y,S,E,I,L,N,j=arguments[0],k=1,V=arguments.length,K=!1;for(typeof j=="boolean"&&(K=j,j=arguments[1]||{},k=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});k<V;++k)if(y=arguments[k],y!=null)for(S in y)E=a(j,S),I=a(y,S),j!==I&&(K&&I&&(s(I)||(L=i(I)))?(L?(L=!1,N=E&&i(E)?E:[]):N=E&&s(E)?E:{},f(j,{name:S,newValue:p(K,N,I)})):typeof I<"u"&&f(j,{name:S,newValue:I}));return j},k3}var kCe=RCe();const L3=ma(kCe);function yj(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function LCe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const f=i.pop();if(typeof f!="function")throw new TypeError("Expected function as last argument, not "+f);a(null,...i);function a(p,...y){const S=e[++s];let E=-1;if(p){f(p);return}for(;++E<i.length;)(y[E]===null||y[E]===void 0)&&(y[E]=i[E]);i=y,S?zCe(S,a)(...y):f(null,...y)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function zCe(e,t){let n;return r;function r(...f){const a=e.length>f.length;let p;a&&f.push(i);try{p=e.apply(this,f)}catch(y){const S=y;if(a&&n)throw S;return i(S)}a||(p&&p.then&&typeof p.then=="function"?p.then(s,i):p instanceof Error?i(p):s(p))}function i(f,...a){n||(n=!0,t(f,...a))}function s(f){i(null,f)}}const Lm={basename:NCe,dirname:FCe,extname:BCe,join:jCe,sep:"/"};function NCe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');QA(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let f=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else f<0&&(s=!0,f=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=f));return n===r?r=f:r<0&&(r=e.length),e.slice(n,r)}function FCe(e){if(QA(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function BCe(e){QA(e);let t=e.length,n=-1,r=0,i=-1,s=0,f;for(;t--;){const a=e.codePointAt(t);if(a===47){if(f){r=t+1;break}continue}n<0&&(f=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function jCe(...e){let t=-1,n;for(;++t<e.length;)QA(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":UCe(n)}function UCe(e){QA(e);const t=e.codePointAt(0)===47;let n=$Ce(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function $Ce(e,t){let n="",r=0,i=-1,s=0,f=-1,a,p;for(;++f<=e.length;){if(f<e.length)a=e.codePointAt(f);else{if(a===47)break;a=47}if(a===47){if(!(i===f-1||s===1))if(i!==f-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(p=n.lastIndexOf("/"),p!==n.length-1){p<0?(n="",r=0):(n=n.slice(0,p),r=n.length-1-n.lastIndexOf("/")),i=f,s=0;continue}}else if(n.length>0){n="",r=0,i=f,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,f):n=e.slice(i+1,f),r=f-i-1;i=f,s=0}else a===46&&s>-1?s++:s=-1}return n}function QA(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const VCe={cwd:qCe};function qCe(){return"/"}function _j(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function HCe(e){if(typeof e=="string")e=new URL(e);else if(!_j(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return GCe(e)}function GCe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const z3=["history","path","basename","stem","extname","dirname"];class Ile{constructor(t){let n;t?_j(t)?n={path:t}:typeof t=="string"||YCe(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":VCe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<z3.length;){const s=z3[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)z3.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Lm.basename(this.path):void 0}set basename(t){F3(t,"basename"),N3(t,"basename"),this.path=Lm.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Lm.dirname(this.path):void 0}set dirname(t){vW(this.basename,"dirname"),this.path=Lm.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Lm.extname(this.path):void 0}set extname(t){if(N3(t,"extname"),vW(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Lm.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){_j(t)&&(t=HCe(t)),F3(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Lm.basename(this.path,this.extname):void 0}set stem(t){F3(t,"stem"),N3(t,"stem"),this.path=Lm.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Lu(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function N3(e,t){if(e&&e.includes(Lm.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Lm.sep+"`")}function F3(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function vW(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function YCe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const WCe=(function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),XCe={}.hasOwnProperty;class q$ extends WCe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=LCe()}copy(){const t=new q$;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(L3(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(U3("data",this.frozen),this.namespace[t]=n,this):XCe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(U3("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=uM(t),r=this.parser||this.Parser;return B3("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),B3("process",this.parser||this.Parser),j3("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,f){const a=uM(t),p=r.parse(a);r.run(p,a,function(S,E,I){if(S||!E||!I)return y(S);const L=E,N=r.stringify(L,I);QCe(N)?I.value=N:I.result=N,y(S,I)});function y(S,E){S||!E?f(S):s?s(E):n(void 0,E)}}}processSync(t){let n=!1,r;return this.freeze(),B3("processSync",this.parser||this.Parser),j3("processSync",this.compiler||this.Compiler),this.process(t,i),xW("processSync","process",n),r;function i(s,f){n=!0,yW(s),r=f}}run(t,n,r){bW(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(f,a){const p=uM(n);i.run(t,p,y);function y(S,E,I){const L=E||t;S?a(S):f?f(L):r(void 0,L,I)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),xW("runSync","run",r),i;function s(f,a){yW(f),i=a,r=!0}}stringify(t,n){this.freeze();const r=uM(n),i=this.compiler||this.Compiler;return j3("stringify",i),bW(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(U3("use",this.frozen),t!=null)if(typeof t=="function")p(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):f(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(y){if(typeof y=="function")p(y,[]);else if(typeof y=="object")if(Array.isArray(y)){const[S,...E]=y;p(S,E)}else f(y);else throw new TypeError("Expected usable value, not `"+y+"`")}function f(y){if(!("plugins"in y)&&!("settings"in y))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(y.plugins),y.settings&&(i.settings=L3(!0,i.settings,y.settings))}function a(y){let S=-1;if(y!=null)if(Array.isArray(y))for(;++S<y.length;){const E=y[S];s(E)}else throw new TypeError("Expected a list of plugins, not `"+y+"`")}function p(y,S){let E=-1,I=-1;for(;++E<r.length;)if(r[E][0]===y){I=E;break}if(I===-1)r.push([y,...S]);else if(S.length>0){let[L,...N]=S;const j=r[I][1];yj(j)&&yj(L)&&(L=L3(!0,j,L)),r[I]=[y,L,...N]}}}}const ZCe=new q$().freeze();function B3(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function j3(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function U3(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function bW(e){if(!yj(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function xW(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function uM(e){return KCe(e)?e:new Ile(e)}function KCe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function QCe(e){return typeof e=="string"||JCe(e)}function JCe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const eMe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",wW=[],SW={allowDangerousHtml:!0},tMe=/^(https?|ircs?|mailto|xmpp)$/i,nMe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function cM(e){const t=rMe(e),n=iMe(e);return aMe(t.runSync(t.parse(n),n),e)}function rMe(e){const t=e.rehypePlugins||wW,n=e.remarkPlugins||wW,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...SW}:SW;return ZCe().use(FOe).use(n).use(PCe,r).use(t)}function iMe(e){const t=e.children||"",n=new Ile;return typeof t=="string"&&(n.value=t),n}function aMe(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,f=t.skipHtml,a=t.unwrapDisallowed,p=t.urlTransform||oMe;for(const S of nMe)Object.hasOwn(t,S.from)&&(""+S.from+(S.to?"use `"+S.to+"` instead":"remove it")+eMe+S.id,void 0);return V$(e,y),x2e(e,{Fragment:Oe.Fragment,components:i,ignoreInvalidStyle:!0,jsx:Oe.jsx,jsxs:Oe.jsxs,passKeys:!0,passNode:!0});function y(S,E,I){if(S.type==="raw"&&I&&typeof E=="number")return f?I.children.splice(E,1):I.children[E]={type:"text",value:S.value},E;if(S.type==="element"){let L;for(L in I3)if(Object.hasOwn(I3,L)&&Object.hasOwn(S.properties,L)){const N=S.properties[L],j=I3[L];(j===null||j.includes(S.tagName))&&(S.properties[L]=p(String(N||""),L,S))}}if(S.type==="element"){let L=n?!n.includes(S.tagName):s?s.includes(S.tagName):!1;if(!L&&r&&typeof E=="number"&&(L=!r(S,E,I)),L&&I&&typeof E=="number")return a&&S.children?I.children.splice(E,1,...S.children):I.children.splice(E,1),E}}}function oMe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||tMe.test(e.slice(0,t))?e:""}function TW(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function sMe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function lMe(e,t,n){const i=ZP((n||{}).ignore||[]),s=uMe(t);let f=-1;for(;++f<s.length;)Dle(e,"text",a);function a(y,S){let E=-1,I;for(;++E<S.length;){const L=S[E],N=I?I.children:void 0;if(i(L,N?N.indexOf(L):void 0,I))return;I=L}if(I)return p(y,S)}function p(y,S){const E=S[S.length-1],I=s[f][0],L=s[f][1];let N=0;const k=E.children.indexOf(y);let V=!1,K=[];I.lastIndex=0;let J=I.exec(y.value);for(;J;){const ie=J.index,Q={index:J.index,input:J.input,stack:[...S,y]};let W=L(...J,Q);if(typeof W=="string"&&(W=W.length>0?{type:"text",value:W}:void 0),W===!1?I.lastIndex=ie+1:(N!==ie&&K.push({type:"text",value:y.value.slice(N,ie)}),Array.isArray(W)?K.push(...W):W&&K.push(W),N=ie+J[0].length,V=!0),!I.global)break;J=I.exec(y.value)}return V?(N<y.value.length&&K.push({type:"text",value:y.value.slice(N)}),E.children.splice(k,1,...K)):K=[y],k+K.length}}function uMe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([cMe(i[0]),fMe(i[1])])}return t}function cMe(e){return typeof e=="string"?new RegExp(sMe(e),"g"):e}function fMe(e){return typeof e=="function"?e:function(){return e}}const $3="phrasing",V3=["autolink","link","image","label"];function hMe(){return{transforms:[vMe],enter:{literalAutolink:pMe,literalAutolinkEmail:q3,literalAutolinkHttp:q3,literalAutolinkWww:q3},exit:{literalAutolink:_Me,literalAutolinkEmail:yMe,literalAutolinkHttp:mMe,literalAutolinkWww:gMe}}}function dMe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:$3,notInConstruct:V3},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:$3,notInConstruct:V3},{character:":",before:"[ps]",after:"\\/",inConstruct:$3,notInConstruct:V3}]}}function pMe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function q3(e){this.config.enter.autolinkProtocol.call(this,e)}function mMe(e){this.config.exit.autolinkProtocol.call(this,e)}function gMe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function yMe(e){this.config.exit.autolinkEmail.call(this,e)}function _Me(e){this.exit(e)}function vMe(e){lMe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,bMe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),xMe]],{ignore:["link","linkReference"]})}function bMe(e,t,n,r,i){let s="";if(!Ple(i)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!wMe(n)))return!1;const f=SMe(n+r);if(!f[0])return!1;const a={type:"link",title:null,url:s+t+f[0],children:[{type:"text",value:t+f[0]}]};return f[1]?[a,{type:"text",value:f[1]}]:a}function xMe(e,t,n,r){return!Ple(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function wMe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function SMe(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=TW(e,"(");let s=TW(e,")");for(;r!==-1&&i>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function Ple(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||gx(n)||YP(n))&&(!t||n!==47)}Rle.peek=PMe;function TMe(){this.buffer()}function EMe(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function AMe(){this.buffer()}function OMe(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function CMe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=_p(this.sliceSerialize(e)).toLowerCase(),n.label=t}function MMe(e){this.exit(e)}function DMe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=_p(this.sliceSerialize(e)).toLowerCase(),n.label=t}function IMe(e){this.exit(e)}function PMe(){return"["}function Rle(e,t,n,r){const i=n.createTracker(r);let s=i.move("[^");const f=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(e),{after:"]",before:s})),a(),f(),s+=i.move("]"),s}function RMe(){return{enter:{gfmFootnoteCallString:TMe,gfmFootnoteCall:EMe,gfmFootnoteDefinitionLabelString:AMe,gfmFootnoteDefinition:OMe},exit:{gfmFootnoteCallString:CMe,gfmFootnoteCall:MMe,gfmFootnoteDefinitionLabelString:DMe,gfmFootnoteDefinition:IMe}}}function kMe(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Rle},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,f){const a=s.createTracker(f);let p=a.move("[^");const y=s.enter("footnoteDefinition"),S=s.enter("label");return p+=a.move(s.safe(s.associationId(r),{before:p,after:"]"})),S(),p+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),p+=a.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),t?kle:LMe))),y(),p}}function LMe(e,t,n){return t===0?e:kle(e,t,n)}function kle(e,t,n){return(n?"":"    ")+e}const zMe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Lle.peek=UMe;function NMe(){return{canContainEols:["delete"],enter:{strikethrough:BMe},exit:{strikethrough:jMe}}}function FMe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:zMe}],handlers:{delete:Lle}}}function BMe(e){this.enter({type:"delete",children:[]},e)}function jMe(e){this.exit(e)}function Lle(e,t,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let f=i.move("~~");return f+=n.containerPhrasing(e,{...i.current(),before:f,after:"~"}),f+=i.move("~~"),s(),f}function UMe(){return"~"}function $Me(e){return e.length}function VMe(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||$Me,s=[],f=[],a=[],p=[];let y=0,S=-1;for(;++S<e.length;){const j=[],k=[];let V=-1;for(e[S].length>y&&(y=e[S].length);++V<e[S].length;){const K=qMe(e[S][V]);if(n.alignDelimiters!==!1){const J=i(K);k[V]=J,(p[V]===void 0||J>p[V])&&(p[V]=J)}j.push(K)}f[S]=j,a[S]=k}let E=-1;if(typeof r=="object"&&"length"in r)for(;++E<y;)s[E]=EW(r[E]);else{const j=EW(r);for(;++E<y;)s[E]=j}E=-1;const I=[],L=[];for(;++E<y;){const j=s[E];let k="",V="";j===99?(k=":",V=":"):j===108?k=":":j===114&&(V=":");let K=n.alignDelimiters===!1?1:Math.max(1,p[E]-k.length-V.length);const J=k+"-".repeat(K)+V;n.alignDelimiters!==!1&&(K=k.length+K+V.length,K>p[E]&&(p[E]=K),L[E]=K),I[E]=J}f.splice(1,0,I),a.splice(1,0,L),S=-1;const N=[];for(;++S<f.length;){const j=f[S],k=a[S];E=-1;const V=[];for(;++E<y;){const K=j[E]||"";let J="",ie="";if(n.alignDelimiters!==!1){const Q=p[E]-(k[E]||0),W=s[E];W===114?J=" ".repeat(Q):W===99?Q%2?(J=" ".repeat(Q/2+.5),ie=" ".repeat(Q/2-.5)):(J=" ".repeat(Q/2),ie=J):ie=" ".repeat(Q)}n.delimiterStart!==!1&&!E&&V.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&K==="")&&(n.delimiterStart!==!1||E)&&V.push(" "),n.alignDelimiters!==!1&&V.push(J),V.push(K),n.alignDelimiters!==!1&&V.push(ie),n.padding!==!1&&V.push(" "),(n.delimiterEnd!==!1||E!==y-1)&&V.push("|")}N.push(n.delimiterEnd===!1?V.join("").replace(/ +$/,""):V.join(""))}return N.join(`
`)}function qMe(e){return e==null?"":String(e)}function EW(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function HMe(e,t,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const f=n.indentLines(n.containerFlow(e,s.current()),GMe);return i(),f}function GMe(e,t,n){return">"+(n?"":" ")+e}function YMe(e,t){return AW(e,t.inConstruct,!0)&&!AW(e,t.notInConstruct,!1)}function AW(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function OW(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&YMe(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function WMe(e,t){const n=String(e);let r=n.indexOf(t),i=r,s=0,f=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>f&&(f=s):s=1,i=r+t.length,r=n.indexOf(t,i);return f}function XMe(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function ZMe(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function KMe(e,t,n,r){const i=ZMe(n),s=e.value||"",f=i==="`"?"GraveAccent":"Tilde";if(XMe(e,n)){const E=n.enter("codeIndented"),I=n.indentLines(s,QMe);return E(),I}const a=n.createTracker(r),p=i.repeat(Math.max(WMe(s,i)+1,3)),y=n.enter("codeFenced");let S=a.move(p);if(e.lang){const E=n.enter(`codeFencedLang${f}`);S+=a.move(n.safe(e.lang,{before:S,after:" ",encode:["`"],...a.current()})),E()}if(e.lang&&e.meta){const E=n.enter(`codeFencedMeta${f}`);S+=a.move(" "),S+=a.move(n.safe(e.meta,{before:S,after:`
`,encode:["`"],...a.current()})),E()}return S+=a.move(`
`),s&&(S+=a.move(s+`
`)),S+=a.move(p),y(),S}function QMe(e,t,n){return(n?"":"    ")+e}function H$(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function JMe(e,t,n,r){const i=H$(n),s=i==='"'?"Quote":"Apostrophe",f=n.enter("definition");let a=n.enter("label");const p=n.createTracker(r);let y=p.move("[");return y+=p.move(n.safe(n.associationId(e),{before:y,after:"]",...p.current()})),y+=p.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),y+=p.move("<"),y+=p.move(n.safe(e.url,{before:y,after:">",...p.current()})),y+=p.move(">")):(a=n.enter("destinationRaw"),y+=p.move(n.safe(e.url,{before:y,after:e.title?" ":`
`,...p.current()}))),a(),e.title&&(a=n.enter(`title${s}`),y+=p.move(" "+i),y+=p.move(n.safe(e.title,{before:y,after:i,...p.current()})),y+=p.move(i),a()),f(),y}function eDe(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function k2(e){return"&#x"+e.toString(16).toUpperCase()+";"}function GD(e,t,n){const r=Hw(e),i=Hw(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}zle.peek=tDe;function zle(e,t,n,r){const i=eDe(n),s=n.enter("emphasis"),f=n.createTracker(r),a=f.move(i);let p=f.move(n.containerPhrasing(e,{after:i,before:a,...f.current()}));const y=p.charCodeAt(0),S=GD(r.before.charCodeAt(r.before.length-1),y,i);S.inside&&(p=k2(y)+p.slice(1));const E=p.charCodeAt(p.length-1),I=GD(r.after.charCodeAt(0),E,i);I.inside&&(p=p.slice(0,-1)+k2(E));const L=f.move(i);return s(),n.attentionEncodeSurroundingInfo={after:I.outside,before:S.outside},a+p+L}function tDe(e,t,n){return n.options.emphasis||"*"}function nDe(e,t){let n=!1;return V$(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,mj}),!!((!e.depth||e.depth<3)&&z$(e)&&(t.options.setext||n))}function rDe(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(nDe(e,n)){const S=n.enter("headingSetext"),E=n.enter("phrasing"),I=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return E(),S(),I+`
`+(i===1?"=":"-").repeat(I.length-(Math.max(I.lastIndexOf("\r"),I.lastIndexOf(`
`))+1))}const f="#".repeat(i),a=n.enter("headingAtx"),p=n.enter("phrasing");s.move(f+" ");let y=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(y)&&(y=k2(y.charCodeAt(0))+y.slice(1)),y=y?f+" "+y:f,n.options.closeAtx&&(y+=" "+f),p(),a(),y}Nle.peek=iDe;function Nle(e){return e.value||""}function iDe(){return"<"}Fle.peek=aDe;function Fle(e,t,n,r){const i=H$(n),s=i==='"'?"Quote":"Apostrophe",f=n.enter("image");let a=n.enter("label");const p=n.createTracker(r);let y=p.move("![");return y+=p.move(n.safe(e.alt,{before:y,after:"]",...p.current()})),y+=p.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),y+=p.move("<"),y+=p.move(n.safe(e.url,{before:y,after:">",...p.current()})),y+=p.move(">")):(a=n.enter("destinationRaw"),y+=p.move(n.safe(e.url,{before:y,after:e.title?" ":")",...p.current()}))),a(),e.title&&(a=n.enter(`title${s}`),y+=p.move(" "+i),y+=p.move(n.safe(e.title,{before:y,after:i,...p.current()})),y+=p.move(i),a()),y+=p.move(")"),f(),y}function aDe(){return"!"}Ble.peek=oDe;function Ble(e,t,n,r){const i=e.referenceType,s=n.enter("imageReference");let f=n.enter("label");const a=n.createTracker(r);let p=a.move("![");const y=n.safe(e.alt,{before:p,after:"]",...a.current()});p+=a.move(y+"]["),f();const S=n.stack;n.stack=[],f=n.enter("reference");const E=n.safe(n.associationId(e),{before:p,after:"]",...a.current()});return f(),n.stack=S,s(),i==="full"||!y||y!==E?p+=a.move(E+"]"):i==="shortcut"?p=p.slice(0,-1):p+=a.move("]"),p}function oDe(){return"!"}jle.peek=sDe;function jle(e,t,n){let r=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const f=n.unsafe[s],a=n.compilePattern(f);let p;if(f.atBreak)for(;p=a.exec(r);){let y=p.index;r.charCodeAt(y)===10&&r.charCodeAt(y-1)===13&&y--,r=r.slice(0,y)+" "+r.slice(p.index+1)}}return i+r+i}function sDe(){return"`"}function Ule(e,t){const n=z$(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}$le.peek=lDe;function $le(e,t,n,r){const i=H$(n),s=i==='"'?"Quote":"Apostrophe",f=n.createTracker(r);let a,p;if(Ule(e,n)){const S=n.stack;n.stack=[],a=n.enter("autolink");let E=f.move("<");return E+=f.move(n.containerPhrasing(e,{before:E,after:">",...f.current()})),E+=f.move(">"),a(),n.stack=S,E}a=n.enter("link"),p=n.enter("label");let y=f.move("[");return y+=f.move(n.containerPhrasing(e,{before:y,after:"](",...f.current()})),y+=f.move("]("),p(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(p=n.enter("destinationLiteral"),y+=f.move("<"),y+=f.move(n.safe(e.url,{before:y,after:">",...f.current()})),y+=f.move(">")):(p=n.enter("destinationRaw"),y+=f.move(n.safe(e.url,{before:y,after:e.title?" ":")",...f.current()}))),p(),e.title&&(p=n.enter(`title${s}`),y+=f.move(" "+i),y+=f.move(n.safe(e.title,{before:y,after:i,...f.current()})),y+=f.move(i),p()),y+=f.move(")"),a(),y}function lDe(e,t,n){return Ule(e,n)?"<":"["}Vle.peek=uDe;function Vle(e,t,n,r){const i=e.referenceType,s=n.enter("linkReference");let f=n.enter("label");const a=n.createTracker(r);let p=a.move("[");const y=n.containerPhrasing(e,{before:p,after:"]",...a.current()});p+=a.move(y+"]["),f();const S=n.stack;n.stack=[],f=n.enter("reference");const E=n.safe(n.associationId(e),{before:p,after:"]",...a.current()});return f(),n.stack=S,s(),i==="full"||!y||y!==E?p+=a.move(E+"]"):i==="shortcut"?p=p.slice(0,-1):p+=a.move("]"),p}function uDe(){return"["}function G$(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function cDe(e){const t=G$(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function fDe(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function qle(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function hDe(e,t,n,r){const i=n.enter("list"),s=n.bulletCurrent;let f=e.ordered?fDe(n):G$(n);const a=e.ordered?f==="."?")":".":cDe(n);let p=t&&n.bulletLastUsed?f===n.bulletLastUsed:!1;if(!e.ordered){const S=e.children?e.children[0]:void 0;if((f==="*"||f==="-")&&S&&(!S.children||!S.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(p=!0),qle(n)===f&&S){let E=-1;for(;++E<e.children.length;){const I=e.children[E];if(I&&I.type==="listItem"&&I.children&&I.children[0]&&I.children[0].type==="thematicBreak"){p=!0;break}}}}p&&(f=a),n.bulletCurrent=f;const y=n.containerFlow(e,r);return n.bulletLastUsed=f,n.bulletCurrent=s,i(),y}function dDe(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function pDe(e,t,n,r){const i=dDe(n);let s=n.bulletCurrent||G$(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let f=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(f=Math.ceil(f/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(f-s.length)),a.shift(f);const p=n.enter("listItem"),y=n.indentLines(n.containerFlow(e,a.current()),S);return p(),y;function S(E,I,L){return I?(L?"":" ".repeat(f))+E:(L?s:s+" ".repeat(f-s.length))+E}}function mDe(e,t,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),f=n.containerPhrasing(e,r);return s(),i(),f}const gDe=ZP(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function yDe(e,t,n,r){return(e.children.some(function(f){return gDe(f)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function _De(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Hle.peek=vDe;function Hle(e,t,n,r){const i=_De(n),s=n.enter("strong"),f=n.createTracker(r),a=f.move(i+i);let p=f.move(n.containerPhrasing(e,{after:i,before:a,...f.current()}));const y=p.charCodeAt(0),S=GD(r.before.charCodeAt(r.before.length-1),y,i);S.inside&&(p=k2(y)+p.slice(1));const E=p.charCodeAt(p.length-1),I=GD(r.after.charCodeAt(0),E,i);I.inside&&(p=p.slice(0,-1)+k2(E));const L=f.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:I.outside,before:S.outside},a+p+L}function vDe(e,t,n){return n.options.strong||"*"}function bDe(e,t,n,r){return n.safe(e.value,r)}function xDe(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function wDe(e,t,n){const r=(qle(n)+(n.options.ruleSpaces?" ":"")).repeat(xDe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Gle={blockquote:HMe,break:OW,code:KMe,definition:JMe,emphasis:zle,hardBreak:OW,heading:rDe,html:Nle,image:Fle,imageReference:Ble,inlineCode:jle,link:$le,linkReference:Vle,list:hDe,listItem:pDe,paragraph:mDe,root:yDe,strong:Hle,text:bDe,thematicBreak:wDe};function SDe(){return{enter:{table:TDe,tableData:CW,tableHeader:CW,tableRow:ADe},exit:{codeText:ODe,table:EDe,tableData:H3,tableHeader:H3,tableRow:H3}}}function TDe(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function EDe(e){this.exit(e),this.data.inTable=void 0}function ADe(e){this.enter({type:"tableRow",children:[]},e)}function H3(e){this.exit(e)}function CW(e){this.enter({type:"tableCell",children:[]},e)}function ODe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,CDe));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function CDe(e,t){return t==="|"?t:e}function MDe(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:I,table:f,tableCell:p,tableRow:a}};function f(L,N,j,k){return y(S(L,j,k),L.align)}function a(L,N,j,k){const V=E(L,j,k),K=y([V]);return K.slice(0,K.indexOf(`
`))}function p(L,N,j,k){const V=j.enter("tableCell"),K=j.enter("phrasing"),J=j.containerPhrasing(L,{...k,before:s,after:s});return K(),V(),J}function y(L,N){return VMe(L,{align:N,alignDelimiters:r,padding:n,stringLength:i})}function S(L,N,j){const k=L.children;let V=-1;const K=[],J=N.enter("table");for(;++V<k.length;)K[V]=E(k[V],N,j);return J(),K}function E(L,N,j){const k=L.children;let V=-1;const K=[],J=N.enter("tableRow");for(;++V<k.length;)K[V]=p(k[V],L,N,j);return J(),K}function I(L,N,j){let k=Gle.inlineCode(L,N,j);return j.stack.includes("tableCell")&&(k=k.replace(/\|/g,"\\$&")),k}}function DDe(){return{exit:{taskListCheckValueChecked:MW,taskListCheckValueUnchecked:MW,paragraph:PDe}}}function IDe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:RDe}}}function MW(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function PDe(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let s=-1,f;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){f=a;break}}f===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function RDe(e,t,n,r){const i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",f="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(f);let p=Gle.listItem(e,t,n,{...r,...a.current()});return s&&(p=p.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,y)),p;function y(S){return S+f}}function kDe(){return[hMe(),RMe(),NMe(),SDe(),DDe()]}function LDe(e){return{extensions:[dMe(),kMe(e),FMe(),MDe(e),IDe()]}}const zDe={tokenize:$De,partial:!0},Yle={tokenize:VDe,partial:!0},Wle={tokenize:qDe,partial:!0},Xle={tokenize:HDe,partial:!0},NDe={tokenize:GDe,partial:!0},Zle={name:"wwwAutolink",tokenize:jDe,previous:Qle},Kle={name:"protocolAutolink",tokenize:UDe,previous:Jle},h_={name:"emailAutolink",tokenize:BDe,previous:eue},dg={};function FDe(){return{text:dg}}let Db=48;for(;Db<123;)dg[Db]=h_,Db++,Db===58?Db=65:Db===91&&(Db=97);dg[43]=h_;dg[45]=h_;dg[46]=h_;dg[95]=h_;dg[72]=[h_,Kle];dg[104]=[h_,Kle];dg[87]=[h_,Zle];dg[119]=[h_,Zle];function BDe(e,t,n){const r=this;let i,s;return f;function f(E){return!vj(E)||!eue.call(r,r.previous)||Y$(r.events)?n(E):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(E))}function a(E){return vj(E)?(e.consume(E),a):E===64?(e.consume(E),p):n(E)}function p(E){return E===46?e.check(NDe,S,y)(E):E===45||E===95||Ou(E)?(s=!0,e.consume(E),p):S(E)}function y(E){return e.consume(E),i=!0,p}function S(E){return s&&i&&dc(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(E)):n(E)}}function jDe(e,t,n){const r=this;return i;function i(f){return f!==87&&f!==119||!Qle.call(r,r.previous)||Y$(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(zDe,e.attempt(Yle,e.attempt(Wle,s),n),n)(f))}function s(f){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(f)}}function UDe(e,t,n){const r=this;let i="",s=!1;return f;function f(E){return(E===72||E===104)&&Jle.call(r,r.previous)&&!Y$(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(E),e.consume(E),a):n(E)}function a(E){if(dc(E)&&i.length<5)return i+=String.fromCodePoint(E),e.consume(E),a;if(E===58){const I=i.toLowerCase();if(I==="http"||I==="https")return e.consume(E),p}return n(E)}function p(E){return E===47?(e.consume(E),s?y:(s=!0,p)):n(E)}function y(E){return E===null||VD(E)||ao(E)||gx(E)||YP(E)?n(E):e.attempt(Yle,e.attempt(Wle,S),n)(E)}function S(E){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(E)}}function $De(e,t,n){let r=0;return i;function i(f){return(f===87||f===119)&&r<3?(r++,e.consume(f),i):f===46&&r===3?(e.consume(f),s):n(f)}function s(f){return f===null?n(f):t(f)}}function VDe(e,t,n){let r,i,s;return f;function f(y){return y===46||y===95?e.check(Xle,p,a)(y):y===null||ao(y)||gx(y)||y!==45&&YP(y)?p(y):(s=!0,e.consume(y),f)}function a(y){return y===95?r=!0:(i=r,r=void 0),e.consume(y),f}function p(y){return i||r||!s?n(y):t(y)}}function qDe(e,t){let n=0,r=0;return i;function i(f){return f===40?(n++,e.consume(f),i):f===41&&r<n?s(f):f===33||f===34||f===38||f===39||f===41||f===42||f===44||f===46||f===58||f===59||f===60||f===63||f===93||f===95||f===126?e.check(Xle,t,s)(f):f===null||ao(f)||gx(f)?t(f):(e.consume(f),i)}function s(f){return f===41&&r++,e.consume(f),i}}function HDe(e,t,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),r):a===38?(e.consume(a),s):a===93?(e.consume(a),i):a===60||a===null||ao(a)||gx(a)?t(a):n(a)}function i(a){return a===null||a===40||a===91||ao(a)||gx(a)?t(a):r(a)}function s(a){return dc(a)?f(a):n(a)}function f(a){return a===59?(e.consume(a),r):dc(a)?(e.consume(a),f):n(a)}}function GDe(e,t,n){return r;function r(s){return e.consume(s),i}function i(s){return Ou(s)?n(s):t(s)}}function Qle(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||ao(e)}function Jle(e){return!dc(e)}function eue(e){return!(e===47||vj(e))}function vj(e){return e===43||e===45||e===46||e===95||Ou(e)}function Y$(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const YDe={tokenize:tIe,partial:!0};function WDe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:QDe,continuation:{tokenize:JDe},exit:eIe}},text:{91:{name:"gfmFootnoteCall",tokenize:KDe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:XDe,resolveTo:ZDe}}}}function XDe(e,t,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let f;for(;i--;){const p=r.events[i][1];if(p.type==="labelImage"){f=p;break}if(p.type==="gfmFootnoteCall"||p.type==="labelLink"||p.type==="label"||p.type==="image"||p.type==="link")break}return a;function a(p){if(!f||!f._balanced)return n(p);const y=_p(r.sliceSerialize({start:f.end,end:r.now()}));return y.codePointAt(0)!==94||!s.includes(y.slice(1))?n(p):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),t(p))}}function ZDe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},f={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",f,t],["exit",f,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function KDe(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,f;return a;function a(E){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(E),e.exit("gfmFootnoteCallLabelMarker"),p}function p(E){return E!==94?n(E):(e.enter("gfmFootnoteCallMarker"),e.consume(E),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",y)}function y(E){if(s>999||E===93&&!f||E===null||E===91||ao(E))return n(E);if(E===93){e.exit("chunkString");const I=e.exit("gfmFootnoteCallString");return i.includes(_p(r.sliceSerialize(I)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(E),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(E)}return ao(E)||(f=!0),s++,e.consume(E),E===92?S:y}function S(E){return E===91||E===92||E===93?(e.consume(E),s++,y):y(E)}}function QDe(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,f=0,a;return p;function p(N){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(N),e.exit("gfmFootnoteDefinitionLabelMarker"),y}function y(N){return N===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(N),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",S):n(N)}function S(N){if(f>999||N===93&&!a||N===null||N===91||ao(N))return n(N);if(N===93){e.exit("chunkString");const j=e.exit("gfmFootnoteDefinitionLabelString");return s=_p(r.sliceSerialize(j)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(N),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),I}return ao(N)||(a=!0),f++,e.consume(N),N===92?E:S}function E(N){return N===91||N===92||N===93?(e.consume(N),f++,S):S(N)}function I(N){return N===58?(e.enter("definitionMarker"),e.consume(N),e.exit("definitionMarker"),i.includes(s)||i.push(s),pa(e,L,"gfmFootnoteDefinitionWhitespace")):n(N)}function L(N){return t(N)}}function JDe(e,t,n){return e.check(KA,t,e.attempt(YDe,t,n))}function eIe(e){e.exit("gfmFootnoteDefinition")}function tIe(e,t,n){const r=this;return pa(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const f=r.events[r.events.length-1];return f&&f[1].type==="gfmFootnoteDefinitionIndent"&&f[2].sliceSerialize(f[1],!0).length===4?t(s):n(s)}}function nIe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(f,a){let p=-1;for(;++p<f.length;)if(f[p][0]==="enter"&&f[p][1].type==="strikethroughSequenceTemporary"&&f[p][1]._close){let y=p;for(;y--;)if(f[y][0]==="exit"&&f[y][1].type==="strikethroughSequenceTemporary"&&f[y][1]._open&&f[p][1].end.offset-f[p][1].start.offset===f[y][1].end.offset-f[y][1].start.offset){f[p][1].type="strikethroughSequence",f[y][1].type="strikethroughSequence";const S={type:"strikethrough",start:Object.assign({},f[y][1].start),end:Object.assign({},f[p][1].end)},E={type:"strikethroughText",start:Object.assign({},f[y][1].end),end:Object.assign({},f[p][1].start)},I=[["enter",S,a],["enter",f[y][1],a],["exit",f[y][1],a],["enter",E,a]],L=a.parser.constructs.insideSpan.null;L&&Qf(I,I.length,0,WP(L,f.slice(y+1,p),a)),Qf(I,I.length,0,[["exit",E,a],["enter",f[p][1],a],["exit",f[p][1],a],["exit",S,a]]),Qf(f,y-1,p-y+3,I),p=y+I.length-2;break}}for(p=-1;++p<f.length;)f[p][1].type==="strikethroughSequenceTemporary"&&(f[p][1].type="data");return f}function s(f,a,p){const y=this.previous,S=this.events;let E=0;return I;function I(N){return y===126&&S[S.length-1][1].type!=="characterEscape"?p(N):(f.enter("strikethroughSequenceTemporary"),L(N))}function L(N){const j=Hw(y);if(N===126)return E>1?p(N):(f.consume(N),E++,L);if(E<2&&!n)return p(N);const k=f.exit("strikethroughSequenceTemporary"),V=Hw(N);return k._open=!V||V===2&&!!j,k._close=!j||j===2&&!!V,a(N)}}}class rIe{constructor(){this.map=[]}add(t,n,r){iIe(this,t,n,r)}consume(t){if(this.map.sort(function(s,f){return s[0]-f[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const s of i)t.push(s);i=r.pop()}this.map.length=0}}function iIe(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function aIe(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function oIe(){return{flow:{null:{name:"table",tokenize:sIe,resolveAll:lIe}}}}function sIe(e,t,n){const r=this;let i=0,s=0,f;return a;function a(le){let ge=r.events.length-1;for(;ge>-1;){const He=r.events[ge][1].type;if(He==="lineEnding"||He==="linePrefix")ge--;else break}const ye=ge>-1?r.events[ge][1].type:null,De=ye==="tableHead"||ye==="tableRow"?W:p;return De===W&&r.parser.lazy[r.now().line]?n(le):De(le)}function p(le){return e.enter("tableHead"),e.enter("tableRow"),y(le)}function y(le){return le===124||(f=!0,s+=1),S(le)}function S(le){return le===null?n(le):Wr(le)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(le),e.exit("lineEnding"),L):n(le):Hi(le)?pa(e,S,"whitespace")(le):(s+=1,f&&(f=!1,i+=1),le===124?(e.enter("tableCellDivider"),e.consume(le),e.exit("tableCellDivider"),f=!0,S):(e.enter("data"),E(le)))}function E(le){return le===null||le===124||ao(le)?(e.exit("data"),S(le)):(e.consume(le),le===92?I:E)}function I(le){return le===92||le===124?(e.consume(le),E):E(le)}function L(le){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(le):(e.enter("tableDelimiterRow"),f=!1,Hi(le)?pa(e,N,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(le):N(le))}function N(le){return le===45||le===58?k(le):le===124?(f=!0,e.enter("tableCellDivider"),e.consume(le),e.exit("tableCellDivider"),j):Q(le)}function j(le){return Hi(le)?pa(e,k,"whitespace")(le):k(le)}function k(le){return le===58?(s+=1,f=!0,e.enter("tableDelimiterMarker"),e.consume(le),e.exit("tableDelimiterMarker"),V):le===45?(s+=1,V(le)):le===null||Wr(le)?ie(le):Q(le)}function V(le){return le===45?(e.enter("tableDelimiterFiller"),K(le)):Q(le)}function K(le){return le===45?(e.consume(le),K):le===58?(f=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(le),e.exit("tableDelimiterMarker"),J):(e.exit("tableDelimiterFiller"),J(le))}function J(le){return Hi(le)?pa(e,ie,"whitespace")(le):ie(le)}function ie(le){return le===124?N(le):le===null||Wr(le)?!f||i!==s?Q(le):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(le)):Q(le)}function Q(le){return n(le)}function W(le){return e.enter("tableRow"),te(le)}function te(le){return le===124?(e.enter("tableCellDivider"),e.consume(le),e.exit("tableCellDivider"),te):le===null||Wr(le)?(e.exit("tableRow"),t(le)):Hi(le)?pa(e,te,"whitespace")(le):(e.enter("data"),X(le))}function X(le){return le===null||le===124||ao(le)?(e.exit("data"),te(le)):(e.consume(le),le===92?ae:X)}function ae(le){return le===92||le===124?(e.consume(le),X):X(le)}}function lIe(e,t){let n=-1,r=!0,i=0,s=[0,0,0,0],f=[0,0,0,0],a=!1,p=0,y,S,E;const I=new rIe;for(;++n<e.length;){const L=e[n],N=L[1];L[0]==="enter"?N.type==="tableHead"?(a=!1,p!==0&&(DW(I,t,p,y,S),S=void 0,p=0),y={type:"table",start:Object.assign({},N.start),end:Object.assign({},N.end)},I.add(n,0,[["enter",y,t]])):N.type==="tableRow"||N.type==="tableDelimiterRow"?(r=!0,E=void 0,s=[0,0,0,0],f=[0,n+1,0,0],a&&(a=!1,S={type:"tableBody",start:Object.assign({},N.start),end:Object.assign({},N.end)},I.add(n,0,[["enter",S,t]])),i=N.type==="tableDelimiterRow"?2:S?3:1):i&&(N.type==="data"||N.type==="tableDelimiterMarker"||N.type==="tableDelimiterFiller")?(r=!1,f[2]===0&&(s[1]!==0&&(f[0]=f[1],E=fM(I,t,s,i,void 0,E),s=[0,0,0,0]),f[2]=n)):N.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(f[0]=f[1],E=fM(I,t,s,i,void 0,E)),s=f,f=[s[1],n,0,0])):N.type==="tableHead"?(a=!0,p=n):N.type==="tableRow"||N.type==="tableDelimiterRow"?(p=n,s[1]!==0?(f[0]=f[1],E=fM(I,t,s,i,n,E)):f[1]!==0&&(E=fM(I,t,f,i,n,E)),i=0):i&&(N.type==="data"||N.type==="tableDelimiterMarker"||N.type==="tableDelimiterFiller")&&(f[3]=n)}for(p!==0&&DW(I,t,p,y,S),I.consume(t.events),n=-1;++n<t.events.length;){const L=t.events[n];L[0]==="enter"&&L[1].type==="table"&&(L[1]._align=aIe(t.events,n))}return e}function fM(e,t,n,r,i,s){const f=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},pw(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const p=pw(t.events,n[1]);if(s={type:f,start:Object.assign({},p),end:Object.assign({},p)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const y=pw(t.events,n[2]),S=pw(t.events,n[3]),E={type:a,start:Object.assign({},y),end:Object.assign({},S)};if(e.add(n[2],0,[["enter",E,t]]),r!==2){const I=t.events[n[2]],L=t.events[n[3]];if(I[1].end=Object.assign({},L[1].end),I[1].type="chunkText",I[1].contentType="text",n[3]>n[2]+1){const N=n[2]+1,j=n[3]-n[2]-1;e.add(N,j,[])}}e.add(n[3]+1,0,[["exit",E,t]])}return i!==void 0&&(s.end=Object.assign({},pw(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function DW(e,t,n,r,i){const s=[],f=pw(t.events,n);i&&(i.end=Object.assign({},f),s.push(["exit",i,t])),r.end=Object.assign({},f),s.push(["exit",r,t]),e.add(n+1,0,s)}function pw(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const uIe={name:"tasklistCheck",tokenize:fIe};function cIe(){return{text:{91:uIe}}}function fIe(e,t,n){const r=this;return i;function i(p){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(p):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(p),e.exit("taskListCheckMarker"),s)}function s(p){return ao(p)?(e.enter("taskListCheckValueUnchecked"),e.consume(p),e.exit("taskListCheckValueUnchecked"),f):p===88||p===120?(e.enter("taskListCheckValueChecked"),e.consume(p),e.exit("taskListCheckValueChecked"),f):n(p)}function f(p){return p===93?(e.enter("taskListCheckMarker"),e.consume(p),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(p)}function a(p){return Wr(p)?t(p):Hi(p)?e.check({tokenize:hIe},t,n)(p):n(p)}}function hIe(e,t,n){return pa(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function dIe(e){return fle([FDe(),WDe(),nIe(e),oIe(),cIe()])}const pIe={};function hM(e){const t=this,n=e||pIe,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),f=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(dIe(n)),s.push(kDe()),f.push(LDe(n))}const mIe=e=>e.endsWith("/")?e:`${e}/`,gIe=e=>{const t=e.trim();return t.startsWith("mapbox://styles/")||t.startsWith("http://")||t.startsWith("https://")?t:/^[^/]+\/[^/]+$/.test(t)?`mapbox://styles/${t}`:t},tue=(e,t=!1)=>typeof e!="string"?t:["true","1","yes","on"].includes(e.trim().toLowerCase()),Vv="/rainfall/",e0=mIe("https://trwwapi.herokuapp.com/rainfall/"),yIe="pk.eyJ1IjoiY2l2aWNtYXBwZXIiLCJhIjoiY21rem9hc2NyMDN5ZzNkcHZ1Ymt1Z29iMCJ9.jbnLEUoBE1XbZ6K6EqmDVQ",_Ie=gIe("mapbox://styles/mapbox/light-v11"),QP=tue("false",!1),vIe=tue("true",!1),bIe=`${Vv}static/config.json`,xIe=`${e0}rainfall-events/?format=json`,wIe=`${e0}v2/latest-observations/?format=json`,SIe=`${e0}pixels/`,TIe=`${e0}gauges/`,EIe=`${Vv}static/data/geography-lookup.json`,AIe=1500,IW=["15-minute","Hourly","Daily","Total"],YD="5-minute",W$="2018-07-01",Qm={historic:"historic",realtime:"realtime"},zl={pixel:"pixel",gauge:"gauge"},fi={legacyRealtime:"legacyRealtime",legacyGauge:"legacyGauge",legacyGarr:"legacyGarr"},nue=e=>e===fi.legacyGauge?[zl.gauge]:e===fi.legacyGarr?[zl.pixel]:[zl.pixel,zl.gauge],rue=e=>e===fi.legacyGauge||e===fi.legacyGarr,OIe=e=>rue(e)?[YD,...IW]:IW,iue=({contextType:e,rainfallDataType:t,rollup:n})=>rue(e)&&t===Qm.historic&&n===YD?"historic5":t,CIe=({contextType:e,rainfallDataType:t,rollup:n})=>iue({contextType:e,rainfallDataType:t,rollup:n})!=="historic5",Gw="HOVER",G3="HIGHLIGHT",MIe=[{INDEX:8,id:"pixel",type:"line",source:"pixel",layout:{},paint:{"line-color":"hsl(209, 25%, 55%)","line-width":.5,"line-opacity":.2}},{INDEX:68,id:`${G3}-pixel-fill`,type:"fill",source:"pixel",layout:{},paint:{"fill-color":"#2196f3","fill-opacity":["case",["boolean",["get","selected"],!1],.2,0]}},{INDEX:70,id:`${G3}-pixel`,type:"line",source:"pixel",layout:{},paint:{"line-color":"#2196f3","line-width":1,"line-opacity":["case",["boolean",["get","selected"],!1],1,0]}},{INDEX:69,id:"pixel-results",type:"fill",source:"pixel",layout:{},paint:{"fill-color":["match",["get","total"],"","#fff",["interpolate",["linear"],["get","total"],0,"#fafa6e",10,"#2A4858"]],"fill-opacity":["match",["get","total"],"",0,.8]}},{INDEX:71,id:`${Gw}-pixel`,type:"fill",source:"pixel",layout:{},paint:{"fill-color":"#cad2d3","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.8,0]}},{INDEX:72,id:`${G3}-gauge`,type:"circle",source:"gauge",layout:{},paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,6,18,12],"circle-color":"#2196f3","circle-stroke-color":"#fff","circle-stroke-width":2,"circle-opacity":["case",["boolean",["get","selected"],!1],.4,0],"circle-stroke-opacity":["case",["boolean",["get","selected"],!1],1,0]}},{INDEX:73,id:`${Gw}-gauge`,type:"circle",source:"gauge",layout:{},paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,6,18,12],"circle-color":"hsl(209, 25%, 55%)","circle-stroke-color":"#fff","circle-stroke-width":2,"circle-opacity":["case",["boolean",["feature-state","hover"],!1],1,0],"circle-stroke-opacity":["case",["boolean",["feature-state","hover"],!1],1,0]}},{id:"pixel-points",type:"circle",source:"pixel",layout:{visibility:"none"},paint:{"circle-color":"hsl(209, 25%, 55%)","circle-opacity":0,"circle-stroke-width":1,"circle-stroke-color":"hsl(0, 0%, 31%)","circle-radius":0}},{id:"gauges",type:"circle",source:"gauge",paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,3,18,9],"circle-stroke-color":"hsl(0, 100%, 100%)","circle-stroke-opacity":.5,"circle-color":"#708da9"}},{id:"gauge-results",type:"circle",source:"gauge",layout:{},paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,8,18,14],"circle-stroke-color":"#fff","circle-stroke-width":2,"circle-color":["match",["get","total"],"","#fff",["interpolate",["linear"],["get","total"],0,"#fafa6e",10,"#2A4858"]],"circle-opacity":["match",["get","total"],"",0,1],"circle-stroke-opacity":["match",["get","total"],"",0,1]}},{id:"gauges-labels",type:"symbol",source:"gauge",layout:{"text-field":["to-string",["get","name"]],"text-anchor":"top","text-size":["interpolate",["linear"],["zoom"],8,12,18,18],"text-offset":[0,.75]},paint:{"text-color":"#708da9","text-halo-width":2,"text-halo-color":"hsl(0, 0%, 100%)"}}],DIe=[[`${Gw}-pixel`,"pixel"],[`${Gw}-gauge`,"gauge"]],Y3=e=>{const t={[zl.pixel]:`${Gw}-pixel`,[zl.gauge]:`${Gw}-gauge`};return nue(e).map(n=>t[n]).filter(n=>n!==void 0)},IIe=["pixel-results","gauge-results"],aue=["#fde725","#5dc962","#20908d","#3a528b","#440154"],oue="lch",PIe=7,RIe=[.01,.02,.04,.06,.08,.1,.12,.15,.2,.25,.3,.35,.4,.45,.5],X$=[.1,.2,.4,.6,.8,1,1.5,2,2.5,3,3.5,4,4.5,5],kIe=[.2,.4,.8,1,1.2,1.6,2,2.4,3,4,5,6,7,8,9,10],sue={breaks_005:RIe,breaks_050:X$,breaks_100:kIe},LIe=`
Have you ever wondered how rainfall is actually measured? Technical instruments, called rain gauges, are designed to collect and accurately measure rainfall during wet weather events. However, a rain gauge can only provide a specific rainfall measurement for the limited geographic area where the gauge is located.

On the flip side, radar systems, often used in weather reports, do not measure rainfall directly, but rather they detect the intensity of microwave energy reflected by raindrops, called reflectivity. Through the use of a mathematical formula, the reflectivity of the raindrops can be converted by the radar system into rainfall estimates for a particular defined area.

Neither measurement technique is perfect, but when the two are combinedwhen radar estimates are calibrated with actual rain gauge dataa highly accurate and valuable source of rainfall data can be calculated over large geographic areas.

Because engineers and planners addressing the wet weather issue need this level of accuracy, 3 Rivers Wet Weather created the calibrated radar rainfall system in 2001. Communities throughout Allegheny County use this dataprovided in both real-time and historical formatsto design more cost-effective solutions to reduce or eliminate sewage overflows and improve stormwater management.

The NEXRAD radar (located in Moon Township) data is calibrated with the rain gauge measurements collected during the same time period and rain event for every square kilometer in Allegheny County. The resulting rainfall data is equivalent in accuracy to having 2,313 rain gauges placed across the County.
`,zIe=`

Currently, this site offers rainfall data in three buckets:

* **Real-time Rainfall** data: provisional rainfall data from both rain gauges and radar pixels, updated every 15 minutes.
* **Historical Rain Gauge** data: QA/QC'd rain gauge data, updated by the month within 30-60 days
* **Calibrated Radar Rainfall** data: QA/QC'd, gauge-adjusted radar rainfall observations, updated by the month within 30-60 days

### Real-time Rainfall Data

Provisional data from 3RWW's 33 rain gauges and NEXRAD radar pixels is collected and updated every 15 minutes to provide accurate, quality rainfall information as it is occurring. This includes both gauge and radar rainfall data, provided by [DataWise](https://datawise.software/) and [Vieux Associates](https://www.vieuxinc.com/), respectively.

> *Data users are cautioned to consider carefully the provisional nature of the information before using it for decisions. Information concerning the accuracy and appropriate uses of these data or concerning other hydrologic data may be obtained from the 3RWW.*

### Historical Rain Gauge

The data from 33 rain gauges, which typically is updated to include data points not transmitted by the gauges in real-time, is available in this section. The data may be retrieved for any combination of the rain gauges during a specified time span. The data may also be displayed in 15-minute increments or aggregated to hourly or daily data points. [ALCOSAN](https://www.alcosan.org/) provides QA/QC'd rain gauge data.

### Calibrated Radar Rainfall

The calibrated radar rainfall section allows the retrieval of archived gauge-adjusted radar rainfall data for each of the 2313 pixels mapped by the NEXRAD radar cross-section. Calibration is performed by [Vieux Associates](https://www.vieuxinc.com/).

---

# Need something more powerful?

For technical users requiring a more powerful visualization, querying, and data exploration capability, Vieux Associates provides an advanced internal tool at [vip.vieuxinc.com](https://vip.vieuxinc.com/). To request access, please email [info@3rww.org](mailto:info@3rww.org).
`,NIe=`
## Querying Rainfall

Querying the rainfall data requires selecting the "when" and the "where".

* First, select the start and end date/time. The available calendar selector provides pre-defined time ranges to help select time periods of interest. For historic gauge and calibrated radar rainfall data, a list of documented rainfall events provides another shortcut to selected date/time ranges.
* Next, select the gauges or radar pixels. You can do this by 
  * clicking on the map;
  * under "Where" in the "By Sensor" tab: selecting or typing (If you know the name or ID of the sensor) in the dropdown menus.
  * under "Where" in the "By Geography" tab: selecting an ALCOSAN Planning Basin, Municipality, or Watershed, which will in turn select all coincident pixels for you
* Then, optionally select the time interval to aggregate the results on: 15-minute (default), hourly, daily, or sum total. Rainfall data is collected and stored in 15-minute increments, which allows for 15-minute, hourly, and daily aggregations to be calculated. Note that if a daily interval is selected, the start and end selections will begin at midnight and the start and end hour will be ignored.
* Finally, Press "Get Rainfall Data" button to get the data.

Query results will be listed in a panel below on each page and shown on the map. The tabular data output may be viewed and downloaded on the page by selecting the 'View and Download Results' Button. Download formats currently include a CSV tabular format, for use in spreadsheet software. Spatial formats will be included in the future.

The output table for each query result contains:

* a gauge or pixel ID
* date/time columns formatted for spreadsheet compatibility as 'MM/DD/YYYY HH:mm:ss'. For hourly and daily aggregations, the observation window is exported as separate \`start_ts\` and \`end_ts\` columns.
* a rainfall amount (in inches) 
* a source code, which indicates where the rainfall measurement came from. While all results include this, only Calibrated Radar Rainfall data will potentially indicate different codes, depending on the calibration methodology.

The following table describes the source code.

| Source |	Description |
| --- | --- |
| R |	Calibrated radar rainfall data |
| G-0 | No gauge or calibrated radar rainfall data is available, but not for the reasons given for N/D below |
| G-1 |	Derived from inverse distance squared weighting based on one rain gauge |
| G-2 |	Derived from inverse distance squared weighting based on two rain gauges |
| G-3 |	Derived from inverse distance squared weighting based on three rain gauges |
| N/D |	No data was collected for this data point. This may be because no data was collected at the time or the pixel may be outside of the data collection boundary. |
| RTRR | Real-time radar rainfall. Data shown are provisional.|
| RTRG | Real-time rain gauge data. Data shown are provisional. |

> Note that the source code only appears for the 15-minute increments. Hourly or daily increment may include different source codes, depending on calibration method.
`,FIe=`
## 3RWW Data API

The rainfall data is served up from 3RWW's Data **A**pplication **P**rogramming **I**nterface (API). Currently a few functions are documented and available through [${e0}](${e0}).

For API usage examples, see [this Jupyter notebook](https://github.com/3rww/notebooks/blob/master/rainfall/Engaging%20Rain%20Gauges.ipynb).

## Project Roadmap

You can view the project roadmap on [Github](https://github.com/3rww/rainfall/projects/1). 

Encounter a bug or want to make a feature request? Submit an [issue](https://github.com/3rww/rainfall/issues) or email [3rww@civicmapper.com](mailto:3rww@civicmapper.com)


`,BIe=()=>Oe.jsxs(_$,{defaultActiveKey:"what2",id:"about-tabs",variant:"pills",mountOnEnter:!0,children:[Oe.jsx(jb,{eventKey:"what2",title:"Overview",children:Oe.jsxs("div",{className:"about-body",children:[Oe.jsxs("p",{className:"big-lead my-5",children:[Oe.jsx("strong",{children:"3RWW Rainfall"})," provides public access to high-resolution rainfall data downloads from gauges system and NEXRAD radar to support engineers and planners addressing wet weather issues in Allegheny County."]}),Oe.jsxs($b,{body:!0,className:"about-logo-background mb-5",children:[Oe.jsx("p",{children:"This app is made possible with support from:"}),Oe.jsxs(xa,{className:"g-0",children:[Oe.jsx(Gr,{sm:5,children:Oe.jsx(tD,{className:"about-logo mx-auto",src:`${Vv}static/assets/vieux-logo-white-300.png`,placeholder:"Vieux Associates",alt:"Vieux Associates",fluid:!0})}),Oe.jsx(Gr,{sm:2,children:Oe.jsx(tD,{className:"about-logo mx-auto",src:`${Vv}static/assets/alcosan-logo.svg`,placeholder:"ALCOSAN",alt:"ALCOSAN",fluid:!0})}),Oe.jsx(Gr,{sm:5,children:Oe.jsx(tD,{className:"about-logo mx-auto",src:`${Vv}static/assets/DataWise.png`,placeholder:"DataWise",alt:"DataWise",fluid:!0})})]})]}),Oe.jsx(cM,{remarkPlugins:[hM],children:zIe})]})}),Oe.jsx(jb,{eventKey:"what1",title:"Methods",children:Oe.jsx("div",{className:"about-body",children:Oe.jsx(cM,{remarkPlugins:[hM],children:LIe})})}),Oe.jsx(jb,{eventKey:"how1",title:"Getting Data",children:Oe.jsx("div",{className:"about-body",children:Oe.jsx(cM,{remarkPlugins:[hM],children:NIe})})}),Oe.jsx(jb,{eventKey:"more",title:"Demos",children:Oe.jsxs("div",{className:"about-body",children:[Oe.jsx("h3",{children:"2021 Webinar"}),Oe.jsx("p",{children:"Our January 2021 webinar provides an overview of the rainfall system and a how-to for using this site."}),Oe.jsx("div",{className:"ratio ratio-16x9",children:Oe.jsx("iframe",{src:"https://www.youtube.com/embed/mwOu2QRx6oU",title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),Oe.jsx("hr",{}),Oe.jsx("h3",{children:"Boundary-based selections"}),Oe.jsx("p",{children:"A quick demo of the boundary-based selection feature:"}),Oe.jsx("div",{className:"ratio ratio-16x9",children:Oe.jsx("iframe",{src:"https://capture.dropbox.com/embed/XSWyyjHt6nXx2PdN?source=copy-embed",title:"Boundary-based selections demo",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}),Oe.jsx(jb,{eventKey:"how2",title:"Under the Hood",children:Oe.jsx("div",{className:"about-body",children:Oe.jsx(cM,{remarkPlugins:[hM],children:FIe})})})]});function lue(e,t){return function(){return e.apply(t,arguments)}}const{toString:jIe}=Object.prototype,{getPrototypeOf:Z$}=Object,{iterator:JP,toStringTag:uue}=Symbol,eR=(e=>t=>{const n=jIe.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Cp=e=>(e=e.toLowerCase(),t=>eR(t)===e),tR=e=>t=>typeof t===e,{isArray:qS}=Array,Yw=tR("undefined");function JA(e){return e!==null&&!Yw(e)&&e.constructor!==null&&!Yw(e.constructor)&&tf(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const cue=Cp("ArrayBuffer");function UIe(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&cue(e.buffer),t}const $Ie=tR("string"),tf=tR("function"),fue=tR("number"),eO=e=>e!==null&&typeof e=="object",VIe=e=>e===!0||e===!1,aD=e=>{if(eR(e)!=="object")return!1;const t=Z$(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(uue in e)&&!(JP in e)},qIe=e=>{if(!eO(e)||JA(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},HIe=Cp("Date"),GIe=Cp("File"),YIe=Cp("Blob"),WIe=Cp("FileList"),XIe=e=>eO(e)&&tf(e.pipe),ZIe=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||tf(e.append)&&((t=eR(e))==="formdata"||t==="object"&&tf(e.toString)&&e.toString()==="[object FormData]"))},KIe=Cp("URLSearchParams"),[QIe,JIe,ePe,tPe]=["ReadableStream","Request","Response","Headers"].map(Cp),nPe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tO(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),qS(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(JA(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),f=s.length;let a;for(r=0;r<f;r++)a=s[r],t.call(null,e[a],a,e)}}function hue(e,t){if(JA(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Hb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,due=e=>!Yw(e)&&e!==Hb;function bj(){const{caseless:e,skipUndefined:t}=due(this)&&this||{},n={},r=(i,s)=>{if(s==="__proto__"||s==="constructor"||s==="prototype")return;const f=e&&hue(n,s)||s;aD(n[f])&&aD(i)?n[f]=bj(n[f],i):aD(i)?n[f]=bj({},i):qS(i)?n[f]=i.slice():(!t||!Yw(i))&&(n[f]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&tO(arguments[i],r);return n}const rPe=(e,t,n,{allOwnKeys:r}={})=>(tO(t,(i,s)=>{n&&tf(i)?Object.defineProperty(e,s,{value:lue(i,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,s,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),e),iPe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),aPe=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},oPe=(e,t,n,r)=>{let i,s,f;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)f=i[s],(!r||r(f,e,t))&&!a[f]&&(t[f]=e[f],a[f]=!0);e=n!==!1&&Z$(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},sPe=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},lPe=e=>{if(!e)return null;if(qS(e))return e;let t=e.length;if(!fue(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},uPe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Z$(Uint8Array)),cPe=(e,t)=>{const r=(e&&e[JP]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},fPe=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},hPe=Cp("HTMLFormElement"),dPe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),PW=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),pPe=Cp("RegExp"),pue=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};tO(n,(i,s)=>{let f;(f=t(i,s,e))!==!1&&(r[s]=f||i)}),Object.defineProperties(e,r)},mPe=e=>{pue(e,(t,n)=>{if(tf(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(tf(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},gPe=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return qS(e)?r(e):r(String(e).split(t)),n},yPe=()=>{},_Pe=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function vPe(e){return!!(e&&tf(e.append)&&e[uue]==="FormData"&&e[JP])}const bPe=e=>{const t=new Array(10),n=(r,i)=>{if(eO(r)){if(t.indexOf(r)>=0)return;if(JA(r))return r;if(!("toJSON"in r)){t[i]=r;const s=qS(r)?[]:{};return tO(r,(f,a)=>{const p=n(f,i+1);!Yw(p)&&(s[a]=p)}),t[i]=void 0,s}}return r};return n(e,0)},xPe=Cp("AsyncFunction"),wPe=e=>e&&(eO(e)||tf(e))&&tf(e.then)&&tf(e.catch),mue=((e,t)=>e?setImmediate:t?((n,r)=>(Hb.addEventListener("message",({source:i,data:s})=>{i===Hb&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Hb.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",tf(Hb.postMessage)),SPe=typeof queueMicrotask<"u"?queueMicrotask.bind(Hb):typeof process<"u"&&process.nextTick||mue,TPe=e=>e!=null&&tf(e[JP]),un={isArray:qS,isArrayBuffer:cue,isBuffer:JA,isFormData:ZIe,isArrayBufferView:UIe,isString:$Ie,isNumber:fue,isBoolean:VIe,isObject:eO,isPlainObject:aD,isEmptyObject:qIe,isReadableStream:QIe,isRequest:JIe,isResponse:ePe,isHeaders:tPe,isUndefined:Yw,isDate:HIe,isFile:GIe,isBlob:YIe,isRegExp:pPe,isFunction:tf,isStream:XIe,isURLSearchParams:KIe,isTypedArray:uPe,isFileList:WIe,forEach:tO,merge:bj,extend:rPe,trim:nPe,stripBOM:iPe,inherits:aPe,toFlatObject:oPe,kindOf:eR,kindOfTest:Cp,endsWith:sPe,toArray:lPe,forEachEntry:cPe,matchAll:fPe,isHTMLForm:hPe,hasOwnProperty:PW,hasOwnProp:PW,reduceDescriptors:pue,freezeMethods:mPe,toObjectSet:gPe,toCamelCase:dPe,noop:yPe,toFiniteNumber:_Pe,findKey:hue,global:Hb,isContextDefined:due,isSpecCompliantForm:vPe,toJSONObject:bPe,isAsyncFn:xPe,isThenable:wPe,setImmediate:mue,asap:SPe,isIterable:TPe};let oi=class gue extends Error{static from(t,n,r,i,s,f){const a=new gue(t.message,n||t.code,r,i,s);return a.cause=t,a.name=t.name,f&&Object.assign(a,f),a}constructor(t,n,r,i,s){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),r&&(this.config=r),i&&(this.request=i),s&&(this.response=s,this.status=s.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:un.toJSONObject(this.config),code:this.code,status:this.status}}};oi.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";oi.ERR_BAD_OPTION="ERR_BAD_OPTION";oi.ECONNABORTED="ECONNABORTED";oi.ETIMEDOUT="ETIMEDOUT";oi.ERR_NETWORK="ERR_NETWORK";oi.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";oi.ERR_DEPRECATED="ERR_DEPRECATED";oi.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";oi.ERR_BAD_REQUEST="ERR_BAD_REQUEST";oi.ERR_CANCELED="ERR_CANCELED";oi.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";oi.ERR_INVALID_URL="ERR_INVALID_URL";const EPe=null;function xj(e){return un.isPlainObject(e)||un.isArray(e)}function yue(e){return un.endsWith(e,"[]")?e.slice(0,-2):e}function RW(e,t,n){return e?e.concat(t).map(function(i,s){return i=yue(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function APe(e){return un.isArray(e)&&!e.some(xj)}const OPe=un.toFlatObject(un,{},null,function(t){return/^is[A-Z]/.test(t)});function nR(e,t,n){if(!un.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=un.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,k){return!un.isUndefined(k[j])});const r=n.metaTokens,i=n.visitor||S,s=n.dots,f=n.indexes,p=(n.Blob||typeof Blob<"u"&&Blob)&&un.isSpecCompliantForm(t);if(!un.isFunction(i))throw new TypeError("visitor must be a function");function y(N){if(N===null)return"";if(un.isDate(N))return N.toISOString();if(un.isBoolean(N))return N.toString();if(!p&&un.isBlob(N))throw new oi("Blob is not supported. Use a Buffer instead.");return un.isArrayBuffer(N)||un.isTypedArray(N)?p&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function S(N,j,k){let V=N;if(N&&!k&&typeof N=="object"){if(un.endsWith(j,"{}"))j=r?j:j.slice(0,-2),N=JSON.stringify(N);else if(un.isArray(N)&&APe(N)||(un.isFileList(N)||un.endsWith(j,"[]"))&&(V=un.toArray(N)))return j=yue(j),V.forEach(function(J,ie){!(un.isUndefined(J)||J===null)&&t.append(f===!0?RW([j],ie,s):f===null?j:j+"[]",y(J))}),!1}return xj(N)?!0:(t.append(RW(k,j,s),y(N)),!1)}const E=[],I=Object.assign(OPe,{defaultVisitor:S,convertValue:y,isVisitable:xj});function L(N,j){if(!un.isUndefined(N)){if(E.indexOf(N)!==-1)throw Error("Circular reference detected in "+j.join("."));E.push(N),un.forEach(N,function(V,K){(!(un.isUndefined(V)||V===null)&&i.call(t,V,un.isString(K)?K.trim():K,j,I))===!0&&L(V,j?j.concat(K):[K])}),E.pop()}}if(!un.isObject(e))throw new TypeError("data must be an object");return L(e),t}function kW(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function K$(e,t){this._pairs=[],e&&nR(e,this,t)}const _ue=K$.prototype;_ue.append=function(t,n){this._pairs.push([t,n])};_ue.toString=function(t){const n=t?function(r){return t.call(this,r,kW)}:kW;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function CPe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function vue(e,t,n){if(!t)return e;const r=n&&n.encode||CPe,i=un.isFunction(n)?{serialize:n}:n,s=i&&i.serialize;let f;if(s?f=s(t,i):f=un.isURLSearchParams(t)?t.toString():new K$(t,i).toString(r),f){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class LW{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){un.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Q$={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},MPe=typeof URLSearchParams<"u"?URLSearchParams:K$,DPe=typeof FormData<"u"?FormData:null,IPe=typeof Blob<"u"?Blob:null,PPe={isBrowser:!0,classes:{URLSearchParams:MPe,FormData:DPe,Blob:IPe},protocols:["http","https","file","blob","url","data"]},J$=typeof window<"u"&&typeof document<"u",wj=typeof navigator=="object"&&navigator||void 0,RPe=J$&&(!wj||["ReactNative","NativeScript","NS"].indexOf(wj.product)<0),kPe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",LPe=J$&&window.location.href||"http://localhost",zPe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:J$,hasStandardBrowserEnv:RPe,hasStandardBrowserWebWorkerEnv:kPe,navigator:wj,origin:LPe},Symbol.toStringTag,{value:"Module"})),Eu={...zPe,...PPe};function NPe(e,t){return nR(e,new Eu.classes.URLSearchParams,{visitor:function(n,r,i,s){return Eu.isNode&&un.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function FPe(e){return un.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function BPe(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function bue(e){function t(n,r,i,s){let f=n[s++];if(f==="__proto__")return!0;const a=Number.isFinite(+f),p=s>=n.length;return f=!f&&un.isArray(i)?i.length:f,p?(un.hasOwnProp(i,f)?i[f]=[i[f],r]:i[f]=r,!a):((!i[f]||!un.isObject(i[f]))&&(i[f]=[]),t(n,r,i[f],s)&&un.isArray(i[f])&&(i[f]=BPe(i[f])),!a)}if(un.isFormData(e)&&un.isFunction(e.entries)){const n={};return un.forEachEntry(e,(r,i)=>{t(FPe(r),i,n,0)}),n}return null}function jPe(e,t,n){if(un.isString(e))try{return(t||JSON.parse)(e),un.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const nO={transitional:Q$,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=un.isObject(t);if(s&&un.isHTMLForm(t)&&(t=new FormData(t)),un.isFormData(t))return i?JSON.stringify(bue(t)):t;if(un.isArrayBuffer(t)||un.isBuffer(t)||un.isStream(t)||un.isFile(t)||un.isBlob(t)||un.isReadableStream(t))return t;if(un.isArrayBufferView(t))return t.buffer;if(un.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return NPe(t,this.formSerializer).toString();if((a=un.isFileList(t))||r.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return nR(a?{"files[]":t}:t,p&&new p,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),jPe(t)):t}],transformResponse:[function(t){const n=this.transitional||nO.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(un.isResponse(t)||un.isReadableStream(t))return t;if(t&&un.isString(t)&&(r&&!this.responseType||i)){const f=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(a){if(f)throw a.name==="SyntaxError"?oi.from(a,oi.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Eu.classes.FormData,Blob:Eu.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};un.forEach(["delete","get","head","post","put","patch"],e=>{nO.headers[e]={}});const UPe=un.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$Pe=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(f){i=f.indexOf(":"),n=f.substring(0,i).trim().toLowerCase(),r=f.substring(i+1).trim(),!(!n||t[n]&&UPe[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},zW=Symbol("internals");function DE(e){return e&&String(e).trim().toLowerCase()}function oD(e){return e===!1||e==null?e:un.isArray(e)?e.map(oD):String(e)}function VPe(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const qPe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function W3(e,t,n,r,i){if(un.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!un.isString(t)){if(un.isString(r))return t.indexOf(r)!==-1;if(un.isRegExp(r))return r.test(t)}}function HPe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function GPe(e,t){const n=un.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,f){return this[r].call(this,t,i,s,f)},configurable:!0})})}let nf=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(a,p,y){const S=DE(p);if(!S)throw new Error("header name must be a non-empty string");const E=un.findKey(i,S);(!E||i[E]===void 0||y===!0||y===void 0&&i[E]!==!1)&&(i[E||p]=oD(a))}const f=(a,p)=>un.forEach(a,(y,S)=>s(y,S,p));if(un.isPlainObject(t)||t instanceof this.constructor)f(t,n);else if(un.isString(t)&&(t=t.trim())&&!qPe(t))f($Pe(t),n);else if(un.isObject(t)&&un.isIterable(t)){let a={},p,y;for(const S of t){if(!un.isArray(S))throw TypeError("Object iterator must return a key-value pair");a[y=S[0]]=(p=a[y])?un.isArray(p)?[...p,S[1]]:[p,S[1]]:S[1]}f(a,n)}else t!=null&&s(n,t,r);return this}get(t,n){if(t=DE(t),t){const r=un.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return VPe(i);if(un.isFunction(n))return n.call(this,i,r);if(un.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=DE(t),t){const r=un.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||W3(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(f){if(f=DE(f),f){const a=un.findKey(r,f);a&&(!n||W3(r,r[a],a,n))&&(delete r[a],i=!0)}}return un.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||W3(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return un.forEach(this,(i,s)=>{const f=un.findKey(r,s);if(f){n[f]=oD(i),delete n[s];return}const a=t?HPe(s):String(s).trim();a!==s&&delete n[s],n[a]=oD(i),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return un.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&un.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[zW]=this[zW]={accessors:{}}).accessors,i=this.prototype;function s(f){const a=DE(f);r[a]||(GPe(i,f),r[a]=!0)}return un.isArray(t)?t.forEach(s):s(t),this}};nf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);un.reduceDescriptors(nf.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});un.freezeMethods(nf);function X3(e,t){const n=this||nO,r=t||n,i=nf.from(r.headers);let s=r.data;return un.forEach(e,function(a){s=a.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function xue(e){return!!(e&&e.__CANCEL__)}let rO=class extends oi{constructor(t,n,r){super(t??"canceled",oi.ERR_CANCELED,n,r),this.name="CanceledError",this.__CANCEL__=!0}};function wue(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new oi("Request failed with status code "+n.status,[oi.ERR_BAD_REQUEST,oi.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function YPe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function WPe(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,f;return t=t!==void 0?t:1e3,function(p){const y=Date.now(),S=r[s];f||(f=y),n[i]=p,r[i]=y;let E=s,I=0;for(;E!==i;)I+=n[E++],E=E%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),y-f<t)return;const L=S&&y-S;return L?Math.round(I*1e3/L):void 0}}function XPe(e,t){let n=0,r=1e3/t,i,s;const f=(y,S=Date.now())=>{n=S,i=null,s&&(clearTimeout(s),s=null),e(...y)};return[(...y)=>{const S=Date.now(),E=S-n;E>=r?f(y,S):(i=y,s||(s=setTimeout(()=>{s=null,f(i)},r-E)))},()=>i&&f(i)]}const WD=(e,t,n=3)=>{let r=0;const i=WPe(50,250);return XPe(s=>{const f=s.loaded,a=s.lengthComputable?s.total:void 0,p=f-r,y=i(p),S=f<=a;r=f;const E={loaded:f,total:a,progress:a?f/a:void 0,bytes:p,rate:y||void 0,estimated:y&&a&&S?(a-f)/y:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(E)},n)},NW=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},FW=e=>(...t)=>un.asap(()=>e(...t)),ZPe=Eu.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Eu.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Eu.origin),Eu.navigator&&/(msie|trident)/i.test(Eu.navigator.userAgent)):()=>!0,KPe=Eu.hasStandardBrowserEnv?{write(e,t,n,r,i,s,f){if(typeof document>"u")return;const a=[`${e}=${encodeURIComponent(t)}`];un.isNumber(n)&&a.push(`expires=${new Date(n).toUTCString()}`),un.isString(r)&&a.push(`path=${r}`),un.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),un.isString(f)&&a.push(`SameSite=${f}`),document.cookie=a.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function QPe(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function JPe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Sue(e,t,n){let r=!QPe(t);return e&&(r||n==!1)?JPe(e,t):t}const BW=e=>e instanceof nf?{...e}:e;function yx(e,t){t=t||{};const n={};function r(y,S,E,I){return un.isPlainObject(y)&&un.isPlainObject(S)?un.merge.call({caseless:I},y,S):un.isPlainObject(S)?un.merge({},S):un.isArray(S)?S.slice():S}function i(y,S,E,I){if(un.isUndefined(S)){if(!un.isUndefined(y))return r(void 0,y,E,I)}else return r(y,S,E,I)}function s(y,S){if(!un.isUndefined(S))return r(void 0,S)}function f(y,S){if(un.isUndefined(S)){if(!un.isUndefined(y))return r(void 0,y)}else return r(void 0,S)}function a(y,S,E){if(E in t)return r(y,S);if(E in e)return r(void 0,y)}const p={url:s,method:s,data:s,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:a,headers:(y,S,E)=>i(BW(y),BW(S),E,!0)};return un.forEach(Object.keys({...e,...t}),function(S){if(S==="__proto__"||S==="constructor"||S==="prototype")return;const E=un.hasOwnProp(p,S)?p[S]:i,I=E(e[S],t[S],S);un.isUndefined(I)&&E!==a||(n[S]=I)}),n}const Tue=e=>{const t=yx({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:f,auth:a}=t;if(t.headers=f=nf.from(f),t.url=vue(Sue(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&f.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),un.isFormData(n)){if(Eu.hasStandardBrowserEnv||Eu.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(un.isFunction(n.getHeaders)){const p=n.getHeaders(),y=["content-type","content-length"];Object.entries(p).forEach(([S,E])=>{y.includes(S.toLowerCase())&&f.set(S,E)})}}if(Eu.hasStandardBrowserEnv&&(r&&un.isFunction(r)&&(r=r(t)),r||r!==!1&&ZPe(t.url))){const p=i&&s&&KPe.read(s);p&&f.set(i,p)}return t},eRe=typeof XMLHttpRequest<"u",tRe=eRe&&function(e){return new Promise(function(n,r){const i=Tue(e);let s=i.data;const f=nf.from(i.headers).normalize();let{responseType:a,onUploadProgress:p,onDownloadProgress:y}=i,S,E,I,L,N;function j(){L&&L(),N&&N(),i.cancelToken&&i.cancelToken.unsubscribe(S),i.signal&&i.signal.removeEventListener("abort",S)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function V(){if(!k)return;const J=nf.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),Q={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:J,config:e,request:k};wue(function(te){n(te),j()},function(te){r(te),j()},Q),k=null}"onloadend"in k?k.onloadend=V:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(V)},k.onabort=function(){k&&(r(new oi("Request aborted",oi.ECONNABORTED,e,k)),k=null)},k.onerror=function(ie){const Q=ie&&ie.message?ie.message:"Network Error",W=new oi(Q,oi.ERR_NETWORK,e,k);W.event=ie||null,r(W),k=null},k.ontimeout=function(){let ie=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const Q=i.transitional||Q$;i.timeoutErrorMessage&&(ie=i.timeoutErrorMessage),r(new oi(ie,Q.clarifyTimeoutError?oi.ETIMEDOUT:oi.ECONNABORTED,e,k)),k=null},s===void 0&&f.setContentType(null),"setRequestHeader"in k&&un.forEach(f.toJSON(),function(ie,Q){k.setRequestHeader(Q,ie)}),un.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),a&&a!=="json"&&(k.responseType=i.responseType),y&&([I,N]=WD(y,!0),k.addEventListener("progress",I)),p&&k.upload&&([E,L]=WD(p),k.upload.addEventListener("progress",E),k.upload.addEventListener("loadend",L)),(i.cancelToken||i.signal)&&(S=J=>{k&&(r(!J||J.type?new rO(null,e,k):J),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(S),i.signal&&(i.signal.aborted?S():i.signal.addEventListener("abort",S)));const K=YPe(i.url);if(K&&Eu.protocols.indexOf(K)===-1){r(new oi("Unsupported protocol "+K+":",oi.ERR_BAD_REQUEST,e));return}k.send(s||null)})},nRe=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(y){if(!i){i=!0,a();const S=y instanceof Error?y:this.reason;r.abort(S instanceof oi?S:new rO(S instanceof Error?S.message:S))}};let f=t&&setTimeout(()=>{f=null,s(new oi(`timeout of ${t}ms exceeded`,oi.ETIMEDOUT))},t);const a=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(y=>{y.unsubscribe?y.unsubscribe(s):y.removeEventListener("abort",s)}),e=null)};e.forEach(y=>y.addEventListener("abort",s));const{signal:p}=r;return p.unsubscribe=()=>un.asap(a),p}},rRe=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},iRe=async function*(e,t){for await(const n of aRe(e))yield*rRe(n,t)},aRe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},jW=(e,t,n,r)=>{const i=iRe(e,t);let s=0,f,a=p=>{f||(f=!0,r&&r(p))};return new ReadableStream({async pull(p){try{const{done:y,value:S}=await i.next();if(y){a(),p.close();return}let E=S.byteLength;if(n){let I=s+=E;n(I)}p.enqueue(new Uint8Array(S))}catch(y){throw a(y),y}},cancel(p){return a(p),i.return()}},{highWaterMark:2})},UW=64*1024,{isFunction:dM}=un,oRe=(({Request:e,Response:t})=>({Request:e,Response:t}))(un.global),{ReadableStream:$W,TextEncoder:VW}=un.global,qW=(e,...t)=>{try{return!!e(...t)}catch{return!1}},sRe=e=>{e=un.merge.call({skipUndefined:!0},oRe,e);const{fetch:t,Request:n,Response:r}=e,i=t?dM(t):typeof fetch=="function",s=dM(n),f=dM(r);if(!i)return!1;const a=i&&dM($W),p=i&&(typeof VW=="function"?(N=>j=>N.encode(j))(new VW):async N=>new Uint8Array(await new n(N).arrayBuffer())),y=s&&a&&qW(()=>{let N=!1;const j=new n(Eu.origin,{body:new $W,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!j}),S=f&&a&&qW(()=>un.isReadableStream(new r("").body)),E={stream:S&&(N=>N.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!E[N]&&(E[N]=(j,k)=>{let V=j&&j[N];if(V)return V.call(j);throw new oi(`Response type '${N}' is not supported`,oi.ERR_NOT_SUPPORT,k)})});const I=async N=>{if(N==null)return 0;if(un.isBlob(N))return N.size;if(un.isSpecCompliantForm(N))return(await new n(Eu.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(un.isArrayBufferView(N)||un.isArrayBuffer(N))return N.byteLength;if(un.isURLSearchParams(N)&&(N=N+""),un.isString(N))return(await p(N)).byteLength},L=async(N,j)=>{const k=un.toFiniteNumber(N.getContentLength());return k??I(j)};return async N=>{let{url:j,method:k,data:V,signal:K,cancelToken:J,timeout:ie,onDownloadProgress:Q,onUploadProgress:W,responseType:te,headers:X,withCredentials:ae="same-origin",fetchOptions:le}=Tue(N),ge=t||fetch;te=te?(te+"").toLowerCase():"text";let ye=nRe([K,J&&J.toAbortSignal()],ie),De=null;const He=ye&&ye.unsubscribe&&(()=>{ye.unsubscribe()});let Be;try{if(W&&y&&k!=="get"&&k!=="head"&&(Be=await L(X,V))!==0){let Ke=new n(j,{method:"POST",body:V,duplex:"half"}),it;if(un.isFormData(V)&&(it=Ke.headers.get("content-type"))&&X.setContentType(it),Ke.body){const[Pe,jt]=NW(Be,WD(FW(W)));V=jW(Ke.body,UW,Pe,jt)}}un.isString(ae)||(ae=ae?"include":"omit");const Ee=s&&"credentials"in n.prototype,Fe={...le,signal:ye,method:k.toUpperCase(),headers:X.normalize().toJSON(),body:V,duplex:"half",credentials:Ee?ae:void 0};De=s&&new n(j,Fe);let at=await(s?ge(De,le):ge(j,Fe));const yt=S&&(te==="stream"||te==="response");if(S&&(Q||yt&&He)){const Ke={};["status","statusText","headers"].forEach(sn=>{Ke[sn]=at[sn]});const it=un.toFiniteNumber(at.headers.get("content-length")),[Pe,jt]=Q&&NW(it,WD(FW(Q),!0))||[];at=new r(jW(at.body,UW,Pe,()=>{jt&&jt(),He&&He()}),Ke)}te=te||"text";let je=await E[un.findKey(E,te)||"text"](at,N);return!yt&&He&&He(),await new Promise((Ke,it)=>{wue(Ke,it,{data:je,headers:nf.from(at.headers),status:at.status,statusText:at.statusText,config:N,request:De})})}catch(Ee){throw He&&He(),Ee&&Ee.name==="TypeError"&&/Load failed|fetch/i.test(Ee.message)?Object.assign(new oi("Network Error",oi.ERR_NETWORK,N,De,Ee&&Ee.response),{cause:Ee.cause||Ee}):oi.from(Ee,Ee&&Ee.code,N,De,Ee&&Ee.response)}}},lRe=new Map,Eue=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:i}=t,s=[r,i,n];let f=s.length,a=f,p,y,S=lRe;for(;a--;)p=s[a],y=S.get(p),y===void 0&&S.set(p,y=a?new Map:sRe(t)),S=y;return y};Eue();const eV={http:EPe,xhr:tRe,fetch:{get:Eue}};un.forEach(eV,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const HW=e=>`- ${e}`,uRe=e=>un.isFunction(e)||e===null||e===!1;function cRe(e,t){e=un.isArray(e)?e:[e];const{length:n}=e;let r,i;const s={};for(let f=0;f<n;f++){r=e[f];let a;if(i=r,!uRe(r)&&(i=eV[(a=String(r)).toLowerCase()],i===void 0))throw new oi(`Unknown adapter '${a}'`);if(i&&(un.isFunction(i)||(i=i.get(t))))break;s[a||"#"+f]=i}if(!i){const f=Object.entries(s).map(([p,y])=>`adapter ${p} `+(y===!1?"is not supported by the environment":"is not available in the build"));let a=n?f.length>1?`since :
`+f.map(HW).join(`
`):" "+HW(f[0]):"as no adapter specified";throw new oi("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const Aue={getAdapter:cRe,adapters:eV};function Z3(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rO(null,e)}function GW(e){return Z3(e),e.headers=nf.from(e.headers),e.data=X3.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Aue.getAdapter(e.adapter||nO.adapter,e)(e).then(function(r){return Z3(e),r.data=X3.call(e,e.transformResponse,r),r.headers=nf.from(r.headers),r},function(r){return xue(r)||(Z3(e),r&&r.response&&(r.response.data=X3.call(e,e.transformResponse,r.response),r.response.headers=nf.from(r.response.headers))),Promise.reject(r)})}const Oue="1.13.5",rR={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{rR[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const YW={};rR.transitional=function(t,n,r){function i(s,f){return"[Axios v"+Oue+"] Transitional option '"+s+"'"+f+(r?". "+r:"")}return(s,f,a)=>{if(t===!1)throw new oi(i(f," has been removed"+(n?" in "+n:"")),oi.ERR_DEPRECATED);return n&&!YW[f]&&(YW[f]=!0,console.warn(i(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,f,a):!0}};rR.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function fRe(e,t,n){if(typeof e!="object")throw new oi("options must be an object",oi.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],f=t[s];if(f){const a=e[s],p=a===void 0||f(a,s,e);if(p!==!0)throw new oi("option "+s+" must be "+p,oi.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new oi("Unknown option "+s,oi.ERR_BAD_OPTION)}}const sD={assertOptions:fRe,validators:rR},Bh=sD.validators;let tx=class{constructor(t){this.defaults=t||{},this.interceptors={request:new LW,response:new LW}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=yx(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&sD.assertOptions(r,{silentJSONParsing:Bh.transitional(Bh.boolean),forcedJSONParsing:Bh.transitional(Bh.boolean),clarifyTimeoutError:Bh.transitional(Bh.boolean),legacyInterceptorReqResOrdering:Bh.transitional(Bh.boolean)},!1),i!=null&&(un.isFunction(i)?n.paramsSerializer={serialize:i}:sD.assertOptions(i,{encode:Bh.function,serialize:Bh.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),sD.assertOptions(n,{baseUrl:Bh.spelling("baseURL"),withXsrfToken:Bh.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=s&&un.merge(s.common,s[n.method]);s&&un.forEach(["delete","get","head","post","put","patch","common"],N=>{delete s[N]}),n.headers=nf.concat(f,s);const a=[];let p=!0;this.interceptors.request.forEach(function(j){if(typeof j.runWhen=="function"&&j.runWhen(n)===!1)return;p=p&&j.synchronous;const k=n.transitional||Q$;k&&k.legacyInterceptorReqResOrdering?a.unshift(j.fulfilled,j.rejected):a.push(j.fulfilled,j.rejected)});const y=[];this.interceptors.response.forEach(function(j){y.push(j.fulfilled,j.rejected)});let S,E=0,I;if(!p){const N=[GW.bind(this),void 0];for(N.unshift(...a),N.push(...y),I=N.length,S=Promise.resolve(n);E<I;)S=S.then(N[E++],N[E++]);return S}I=a.length;let L=n;for(;E<I;){const N=a[E++],j=a[E++];try{L=N(L)}catch(k){j.call(this,k);break}}try{S=GW.call(this,L)}catch(N){return Promise.reject(N)}for(E=0,I=y.length;E<I;)S=S.then(y[E++],y[E++]);return S}getUri(t){t=yx(this.defaults,t);const n=Sue(t.baseURL,t.url,t.allowAbsoluteUrls);return vue(n,t.params,t.paramsSerializer)}};un.forEach(["delete","get","head","options"],function(t){tx.prototype[t]=function(n,r){return this.request(yx(r||{},{method:t,url:n,data:(r||{}).data}))}});un.forEach(["post","put","patch"],function(t){function n(r){return function(s,f,a){return this.request(yx(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:f}))}}tx.prototype[t]=n(),tx.prototype[t+"Form"]=n(!0)});let hRe=class Cue{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const f=new Promise(a=>{r.subscribe(a),s=a}).then(i);return f.cancel=function(){r.unsubscribe(s)},f},t(function(s,f,a){r.reason||(r.reason=new rO(s,f,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Cue(function(i){t=i}),cancel:t}}};function dRe(e){return function(n){return e.apply(null,n)}}function pRe(e){return un.isObject(e)&&e.isAxiosError===!0}const Sj={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Sj).forEach(([e,t])=>{Sj[t]=e});function Mue(e){const t=new tx(e),n=lue(tx.prototype.request,t);return un.extend(n,tx.prototype,t,{allOwnKeys:!0}),un.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return Mue(yx(e,i))},n}const _s=Mue(nO);_s.Axios=tx;_s.CanceledError=rO;_s.CancelToken=hRe;_s.isCancel=xue;_s.VERSION=Oue;_s.toFormData=nR;_s.AxiosError=oi;_s.Cancel=_s.CanceledError;_s.all=function(t){return Promise.all(t)};_s.spread=dRe;_s.isAxiosError=pRe;_s.mergeConfig=yx;_s.AxiosHeaders=nf;_s.formToJSON=e=>bue(un.isHTMLForm(e)?new FormData(e):e);_s.getAdapter=Aue.getAdapter;_s.HttpStatusCode=Sj;_s.default=_s;const{Axios:ipt,AxiosError:apt,CanceledError:opt,isCancel:spt,CancelToken:lpt,VERSION:upt,all:cpt,Cancel:fpt,isAxiosError:hpt,spread:dpt,toFormData:ppt,AxiosHeaders:mpt,HttpStatusCode:gpt,formToJSON:ypt,getAdapter:_pt,mergeConfig:vpt}=_s;function pM(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var K3={exports:{}},WW;function mRe(){return WW||(WW=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(r,i,s){function f(y,S){if(!i[y]){if(!r[y]){var E=typeof pM=="function"&&pM;if(!S&&E)return E(y,!0);if(a)return a(y,!0);throw new Error("Cannot find module '"+y+"'")}S=i[y]={exports:{}},r[y][0].call(S.exports,function(I){var L=r[y][1][I];return f(L||I)},S,S.exports,n,r,i,s)}return i[y].exports}for(var a=typeof pM=="function"&&pM,p=0;p<s.length;p++)f(s[p]);return f})({1:[function(n,r,i){(function(s,f,a,p,y,S,E,I,L){var N=n("crypto");function j(W,te){te=K(W,te);var X;return(X=te.algorithm!=="passthrough"?N.createHash(te.algorithm):new Q).write===void 0&&(X.write=X.update,X.end=X.update),ie(te,X).dispatch(W),X.update||X.end(""),X.digest?X.digest(te.encoding==="buffer"?void 0:te.encoding):(W=X.read(),te.encoding!=="buffer"?W.toString(te.encoding):W)}(i=r.exports=j).sha1=function(W){return j(W)},i.keys=function(W){return j(W,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(W){return j(W,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(W){return j(W,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var k=N.getHashes?N.getHashes().slice():["sha1","md5"],V=(k.push("passthrough"),["buffer","hex","binary","base64"]);function K(W,te){var X={};if(X.algorithm=(te=te||{}).algorithm||"sha1",X.encoding=te.encoding||"hex",X.excludeValues=!!te.excludeValues,X.algorithm=X.algorithm.toLowerCase(),X.encoding=X.encoding.toLowerCase(),X.ignoreUnknown=te.ignoreUnknown===!0,X.respectType=te.respectType!==!1,X.respectFunctionNames=te.respectFunctionNames!==!1,X.respectFunctionProperties=te.respectFunctionProperties!==!1,X.unorderedArrays=te.unorderedArrays===!0,X.unorderedSets=te.unorderedSets!==!1,X.unorderedObjects=te.unorderedObjects!==!1,X.replacer=te.replacer||void 0,X.excludeKeys=te.excludeKeys||void 0,W===void 0)throw new Error("Object argument required.");for(var ae=0;ae<k.length;++ae)k[ae].toLowerCase()===X.algorithm.toLowerCase()&&(X.algorithm=k[ae]);if(k.indexOf(X.algorithm)===-1)throw new Error('Algorithm "'+X.algorithm+'"  not supported. supported values: '+k.join(", "));if(V.indexOf(X.encoding)===-1&&X.algorithm!=="passthrough")throw new Error('Encoding "'+X.encoding+'"  not supported. supported values: '+V.join(", "));return X}function J(W){if(typeof W=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(W))!=null}function ie(W,te,X){X=X||[];function ae(le){return te.update?te.update(le,"utf8"):te.write(le,"utf8")}return{dispatch:function(le){return this["_"+((le=W.replacer?W.replacer(le):le)===null?"null":typeof le)](le)},_object:function(le){var ge,ye=Object.prototype.toString.call(le),De=/\[object (.*)\]/i.exec(ye);if(De=(De=De?De[1]:"unknown:["+ye+"]").toLowerCase(),0<=(ye=X.indexOf(le)))return this.dispatch("[CIRCULAR:"+ye+"]");if(X.push(le),a!==void 0&&a.isBuffer&&a.isBuffer(le))return ae("buffer:"),ae(le);if(De==="object"||De==="function"||De==="asyncfunction")return ye=Object.keys(le),W.unorderedObjects&&(ye=ye.sort()),W.respectType===!1||J(le)||ye.splice(0,0,"prototype","__proto__","constructor"),W.excludeKeys&&(ye=ye.filter(function(He){return!W.excludeKeys(He)})),ae("object:"+ye.length+":"),ge=this,ye.forEach(function(He){ge.dispatch(He),ae(":"),W.excludeValues||ge.dispatch(le[He]),ae(",")});if(!this["_"+De]){if(W.ignoreUnknown)return ae("["+De+"]");throw new Error('Unknown object type "'+De+'"')}this["_"+De](le)},_array:function(le,He){He=He!==void 0?He:W.unorderedArrays!==!1;var ye=this;if(ae("array:"+le.length+":"),!He||le.length<=1)return le.forEach(function(Be){return ye.dispatch(Be)});var De=[],He=le.map(function(Be){var Ee=new Q,Fe=X.slice();return ie(W,Ee,Fe).dispatch(Be),De=De.concat(Fe.slice(X.length)),Ee.read().toString()});return X=X.concat(De),He.sort(),this._array(He,!1)},_date:function(le){return ae("date:"+le.toJSON())},_symbol:function(le){return ae("symbol:"+le.toString())},_error:function(le){return ae("error:"+le.toString())},_boolean:function(le){return ae("bool:"+le.toString())},_string:function(le){ae("string:"+le.length+":"),ae(le.toString())},_function:function(le){ae("fn:"),J(le)?this.dispatch("[native]"):this.dispatch(le.toString()),W.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(le.name)),W.respectFunctionProperties&&this._object(le)},_number:function(le){return ae("number:"+le.toString())},_xml:function(le){return ae("xml:"+le.toString())},_null:function(){return ae("Null")},_undefined:function(){return ae("Undefined")},_regexp:function(le){return ae("regex:"+le.toString())},_uint8array:function(le){return ae("uint8array:"),this.dispatch(Array.prototype.slice.call(le))},_uint8clampedarray:function(le){return ae("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(le))},_int8array:function(le){return ae("int8array:"),this.dispatch(Array.prototype.slice.call(le))},_uint16array:function(le){return ae("uint16array:"),this.dispatch(Array.prototype.slice.call(le))},_int16array:function(le){return ae("int16array:"),this.dispatch(Array.prototype.slice.call(le))},_uint32array:function(le){return ae("uint32array:"),this.dispatch(Array.prototype.slice.call(le))},_int32array:function(le){return ae("int32array:"),this.dispatch(Array.prototype.slice.call(le))},_float32array:function(le){return ae("float32array:"),this.dispatch(Array.prototype.slice.call(le))},_float64array:function(le){return ae("float64array:"),this.dispatch(Array.prototype.slice.call(le))},_arraybuffer:function(le){return ae("arraybuffer:"),this.dispatch(new Uint8Array(le))},_url:function(le){return ae("url:"+le.toString())},_map:function(le){return ae("map:"),le=Array.from(le),this._array(le,W.unorderedSets!==!1)},_set:function(le){return ae("set:"),le=Array.from(le),this._array(le,W.unorderedSets!==!1)},_file:function(le){return ae("file:"),this.dispatch([le.name,le.size,le.type,le.lastModfied])},_blob:function(){if(W.ignoreUnknown)return ae("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return ae("domwindow")},_bigint:function(le){return ae("bigint:"+le.toString())},_process:function(){return ae("process")},_timer:function(){return ae("timer")},_pipe:function(){return ae("pipe")},_tcp:function(){return ae("tcp")},_udp:function(){return ae("udp")},_tty:function(){return ae("tty")},_statwatcher:function(){return ae("statwatcher")},_securecontext:function(){return ae("securecontext")},_connection:function(){return ae("connection")},_zlib:function(){return ae("zlib")},_context:function(){return ae("context")},_nodescript:function(){return ae("nodescript")},_httpparser:function(){return ae("httpparser")},_dataview:function(){return ae("dataview")},_signal:function(){return ae("signal")},_fsevent:function(){return ae("fsevent")},_tlswrap:function(){return ae("tlswrap")}}}function Q(){return{buf:"",write:function(W){this.buf+=W},end:function(W){this.buf+=W},read:function(){return this.buf}}}i.writeToStream=function(W,te,X){return X===void 0&&(X=te,te={}),ie(te=K(W,te),X).dispatch(W)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(n,r,i){(function(s,f,a,p,y,S,E,I,L){(function(N){var j=typeof Uint8Array<"u"?Uint8Array:Array,k=43,V=47,K=48,J=97,ie=65,Q=45,W=95;function te(X){return X=X.charCodeAt(0),X===k||X===Q?62:X===V||X===W?63:X<K?-1:X<K+10?X-K+26+26:X<ie+26?X-ie:X<J+26?X-J+26:void 0}N.toByteArray=function(X){var ae,le;if(0<X.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var ge=X.length,ge=X.charAt(ge-2)==="="?2:X.charAt(ge-1)==="="?1:0,ye=new j(3*X.length/4-ge),De=0<ge?X.length-4:X.length,He=0;function Be(Ee){ye[He++]=Ee}for(ae=0;ae<De;ae+=4,0)Be((16711680&(le=te(X.charAt(ae))<<18|te(X.charAt(ae+1))<<12|te(X.charAt(ae+2))<<6|te(X.charAt(ae+3))))>>16),Be((65280&le)>>8),Be(255&le);return ge==2?Be(255&(le=te(X.charAt(ae))<<2|te(X.charAt(ae+1))>>4)):ge==1&&(Be((le=te(X.charAt(ae))<<10|te(X.charAt(ae+1))<<4|te(X.charAt(ae+2))>>2)>>8&255),Be(255&le)),ye},N.fromByteArray=function(X){var ae,le,ge,ye,De=X.length%3,He="";function Be(Ee){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Ee)}for(ae=0,ge=X.length-De;ae<ge;ae+=3)le=(X[ae]<<16)+(X[ae+1]<<8)+X[ae+2],He+=Be((ye=le)>>18&63)+Be(ye>>12&63)+Be(ye>>6&63)+Be(63&ye);switch(De){case 1:He=(He+=Be((le=X[X.length-1])>>2))+Be(le<<4&63)+"==";break;case 2:He=(He=(He+=Be((le=(X[X.length-2]<<8)+X[X.length-1])>>10))+Be(le>>4&63))+Be(le<<2&63)+"="}return He}})(i===void 0?this.base64js={}:i)}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(n,r,i){(function(s,f,k,p,y,S,E,I,L){var N=n("base64-js"),j=n("ieee754");function k(xe,Ye,ct){if(!(this instanceof k))return new k(xe,Ye,ct);var mt,Ct,Yt,gn,An=typeof xe;if(Ye==="base64"&&An=="string")for(xe=(gn=xe).trim?gn.trim():gn.replace(/^\s+|\s+$/g,"");xe.length%4!=0;)xe+="=";if(An=="number")mt=at(xe);else if(An=="string")mt=k.byteLength(xe,Ye);else{if(An!="object")throw new Error("First argument needs to be a number, array or string.");mt=at(xe.length)}if(k._useTypedArrays?Ct=k._augment(new Uint8Array(mt)):((Ct=this).length=mt,Ct._isBuffer=!0),k._useTypedArrays&&typeof xe.byteLength=="number")Ct._set(xe);else if(yt(gn=xe)||k.isBuffer(gn)||gn&&typeof gn=="object"&&typeof gn.length=="number")for(Yt=0;Yt<mt;Yt++)k.isBuffer(xe)?Ct[Yt]=xe.readUInt8(Yt):Ct[Yt]=xe[Yt];else if(An=="string")Ct.write(xe,0,Ye);else if(An=="number"&&!k._useTypedArrays&&!ct)for(Yt=0;Yt<mt;Yt++)Ct[Yt]=0;return Ct}function V(xe,Ye,ct,mt){return k._charsWritten=Pe((function(Ct){for(var Yt=[],gn=0;gn<Ct.length;gn++)Yt.push(255&Ct.charCodeAt(gn));return Yt})(Ye),xe,ct,mt)}function K(xe,Ye,ct,mt){return k._charsWritten=Pe((function(Ct){for(var Yt,gn,An=[],ar=0;ar<Ct.length;ar++)gn=Ct.charCodeAt(ar),Yt=gn>>8,gn=gn%256,An.push(gn),An.push(Yt);return An})(Ye),xe,ct,mt)}function J(xe,Ye,ct){var mt="";ct=Math.min(xe.length,ct);for(var Ct=Ye;Ct<ct;Ct++)mt+=String.fromCharCode(xe[Ct]);return mt}function ie(xe,Ye,ct,Yt){Yt||(Ut(typeof ct=="boolean","missing or invalid endian"),Ut(Ye!=null,"missing offset"),Ut(Ye+1<xe.length,"Trying to read beyond buffer length"));var Ct,Yt=xe.length;if(!(Yt<=Ye))return ct?(Ct=xe[Ye],Ye+1<Yt&&(Ct|=xe[Ye+1]<<8)):(Ct=xe[Ye]<<8,Ye+1<Yt&&(Ct|=xe[Ye+1])),Ct}function Q(xe,Ye,ct,Yt){Yt||(Ut(typeof ct=="boolean","missing or invalid endian"),Ut(Ye!=null,"missing offset"),Ut(Ye+3<xe.length,"Trying to read beyond buffer length"));var Ct,Yt=xe.length;if(!(Yt<=Ye))return ct?(Ye+2<Yt&&(Ct=xe[Ye+2]<<16),Ye+1<Yt&&(Ct|=xe[Ye+1]<<8),Ct|=xe[Ye],Ye+3<Yt&&(Ct+=xe[Ye+3]<<24>>>0)):(Ye+1<Yt&&(Ct=xe[Ye+1]<<16),Ye+2<Yt&&(Ct|=xe[Ye+2]<<8),Ye+3<Yt&&(Ct|=xe[Ye+3]),Ct+=xe[Ye]<<24>>>0),Ct}function W(xe,Ye,ct,mt){if(mt||(Ut(typeof ct=="boolean","missing or invalid endian"),Ut(Ye!=null,"missing offset"),Ut(Ye+1<xe.length,"Trying to read beyond buffer length")),!(xe.length<=Ye))return mt=ie(xe,Ye,ct,!0),32768&mt?-1*(65535-mt+1):mt}function te(xe,Ye,ct,mt){if(mt||(Ut(typeof ct=="boolean","missing or invalid endian"),Ut(Ye!=null,"missing offset"),Ut(Ye+3<xe.length,"Trying to read beyond buffer length")),!(xe.length<=Ye))return mt=Q(xe,Ye,ct,!0),2147483648&mt?-1*(4294967295-mt+1):mt}function X(xe,Ye,ct,mt){return mt||(Ut(typeof ct=="boolean","missing or invalid endian"),Ut(Ye+3<xe.length,"Trying to read beyond buffer length")),j.read(xe,Ye,ct,23,4)}function ae(xe,Ye,ct,mt){return mt||(Ut(typeof ct=="boolean","missing or invalid endian"),Ut(Ye+7<xe.length,"Trying to read beyond buffer length")),j.read(xe,Ye,ct,52,8)}function le(xe,Ye,ct,mt,Ct){if(Ct||(Ut(Ye!=null,"missing value"),Ut(typeof mt=="boolean","missing or invalid endian"),Ut(ct!=null,"missing offset"),Ut(ct+1<xe.length,"trying to write beyond buffer length"),sn(Ye,65535)),Ct=xe.length,!(Ct<=ct))for(var Yt=0,gn=Math.min(Ct-ct,2);Yt<gn;Yt++)xe[ct+Yt]=(Ye&255<<8*(mt?Yt:1-Yt))>>>8*(mt?Yt:1-Yt)}function ge(xe,Ye,ct,mt,Ct){if(Ct||(Ut(Ye!=null,"missing value"),Ut(typeof mt=="boolean","missing or invalid endian"),Ut(ct!=null,"missing offset"),Ut(ct+3<xe.length,"trying to write beyond buffer length"),sn(Ye,4294967295)),Ct=xe.length,!(Ct<=ct))for(var Yt=0,gn=Math.min(Ct-ct,4);Yt<gn;Yt++)xe[ct+Yt]=Ye>>>8*(mt?Yt:3-Yt)&255}function ye(xe,Ye,ct,mt,Ct){Ct||(Ut(Ye!=null,"missing value"),Ut(typeof mt=="boolean","missing or invalid endian"),Ut(ct!=null,"missing offset"),Ut(ct+1<xe.length,"Trying to write beyond buffer length"),dn(Ye,32767,-32768)),xe.length<=ct||le(xe,0<=Ye?Ye:65535+Ye+1,ct,mt,Ct)}function De(xe,Ye,ct,mt,Ct){Ct||(Ut(Ye!=null,"missing value"),Ut(typeof mt=="boolean","missing or invalid endian"),Ut(ct!=null,"missing offset"),Ut(ct+3<xe.length,"Trying to write beyond buffer length"),dn(Ye,2147483647,-2147483648)),xe.length<=ct||ge(xe,0<=Ye?Ye:4294967295+Ye+1,ct,mt,Ct)}function He(xe,Ye,ct,mt,Ct){Ct||(Ut(Ye!=null,"missing value"),Ut(typeof mt=="boolean","missing or invalid endian"),Ut(ct!=null,"missing offset"),Ut(ct+3<xe.length,"Trying to write beyond buffer length"),Tn(Ye,34028234663852886e22,-34028234663852886e22)),xe.length<=ct||j.write(xe,Ye,ct,mt,23,4)}function Be(xe,Ye,ct,mt,Ct){Ct||(Ut(Ye!=null,"missing value"),Ut(typeof mt=="boolean","missing or invalid endian"),Ut(ct!=null,"missing offset"),Ut(ct+7<xe.length,"Trying to write beyond buffer length"),Tn(Ye,17976931348623157e292,-17976931348623157e292)),xe.length<=ct||j.write(xe,Ye,ct,mt,52,8)}i.Buffer=k,i.SlowBuffer=k,i.INSPECT_MAX_BYTES=50,k.poolSize=8192,k._useTypedArrays=(function(){try{var xe=new ArrayBuffer(0),Ye=new Uint8Array(xe);return Ye.foo=function(){return 42},Ye.foo()===42&&typeof Ye.subarray=="function"}catch{return!1}})(),k.isEncoding=function(xe){switch(String(xe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},k.isBuffer=function(xe){return!(xe==null||!xe._isBuffer)},k.byteLength=function(xe,Ye){var ct;switch(xe+="",Ye||"utf8"){case"hex":ct=xe.length/2;break;case"utf8":case"utf-8":ct=Ke(xe).length;break;case"ascii":case"binary":case"raw":ct=xe.length;break;case"base64":ct=it(xe).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ct=2*xe.length;break;default:throw new Error("Unknown encoding")}return ct},k.concat=function(xe,Ye){if(Ut(yt(xe),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),xe.length===0)return new k(0);if(xe.length===1)return xe[0];if(typeof Ye!="number")for(Ct=Ye=0;Ct<xe.length;Ct++)Ye+=xe[Ct].length;for(var ct=new k(Ye),mt=0,Ct=0;Ct<xe.length;Ct++){var Yt=xe[Ct];Yt.copy(ct,mt),mt+=Yt.length}return ct},k.prototype.write=function(xe,Ye,ct,mt){isFinite(Ye)?isFinite(ct)||(mt=ct,ct=void 0):(ar=mt,mt=Ye,Ye=ct,ct=ar),Ye=Number(Ye)||0;var Ct,Yt,gn,An,ar=this.length-Ye;switch((!ct||ar<(ct=Number(ct)))&&(ct=ar),mt=String(mt||"utf8").toLowerCase()){case"hex":Ct=(function(or,Nr,Pr,Er){Pr=Number(Pr)||0;var Tr=or.length-Pr;(!Er||Tr<(Er=Number(Er)))&&(Er=Tr),Ut((Tr=Nr.length)%2==0,"Invalid hex string"),Tr/2<Er&&(Er=Tr/2);for(var pi=0;pi<Er;pi++){var Fr=parseInt(Nr.substr(2*pi,2),16);Ut(!isNaN(Fr),"Invalid hex string"),or[Pr+pi]=Fr}return k._charsWritten=2*pi,pi})(this,xe,Ye,ct);break;case"utf8":case"utf-8":Yt=this,gn=Ye,An=ct,Ct=k._charsWritten=Pe(Ke(xe),Yt,gn,An);break;case"ascii":case"binary":Ct=V(this,xe,Ye,ct);break;case"base64":Yt=this,gn=Ye,An=ct,Ct=k._charsWritten=Pe(it(xe),Yt,gn,An);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Ct=K(this,xe,Ye,ct);break;default:throw new Error("Unknown encoding")}return Ct},k.prototype.toString=function(xe,Ye,ct){var mt,Ct,Yt,gn,An=this;if(xe=String(xe||"utf8").toLowerCase(),Ye=Number(Ye)||0,(ct=ct!==void 0?Number(ct):An.length)===Ye)return"";switch(xe){case"hex":mt=(function(ar,or,Nr){var Pr=ar.length;(!or||or<0)&&(or=0),(!Nr||Nr<0||Pr<Nr)&&(Nr=Pr);for(var Er="",Tr=or;Tr<Nr;Tr++)Er+=je(ar[Tr]);return Er})(An,Ye,ct);break;case"utf8":case"utf-8":mt=(function(ar,or,Nr){var Pr="",Er="";Nr=Math.min(ar.length,Nr);for(var Tr=or;Tr<Nr;Tr++)ar[Tr]<=127?(Pr+=jt(Er)+String.fromCharCode(ar[Tr]),Er=""):Er+="%"+ar[Tr].toString(16);return Pr+jt(Er)})(An,Ye,ct);break;case"ascii":case"binary":mt=J(An,Ye,ct);break;case"base64":Ct=An,gn=ct,mt=(Yt=Ye)===0&&gn===Ct.length?N.fromByteArray(Ct):N.fromByteArray(Ct.slice(Yt,gn));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":mt=(function(ar,or,Nr){for(var Pr=ar.slice(or,Nr),Er="",Tr=0;Tr<Pr.length;Tr+=2)Er+=String.fromCharCode(Pr[Tr]+256*Pr[Tr+1]);return Er})(An,Ye,ct);break;default:throw new Error("Unknown encoding")}return mt},k.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},k.prototype.copy=function(xe,Ye,ct,mt){if(Ye=Ye||0,(mt=mt||mt===0?mt:this.length)!==(ct=ct||0)&&xe.length!==0&&this.length!==0){Ut(ct<=mt,"sourceEnd < sourceStart"),Ut(0<=Ye&&Ye<xe.length,"targetStart out of bounds"),Ut(0<=ct&&ct<this.length,"sourceStart out of bounds"),Ut(0<=mt&&mt<=this.length,"sourceEnd out of bounds"),mt>this.length&&(mt=this.length);var Ct=(mt=xe.length-Ye<mt-ct?xe.length-Ye+ct:mt)-ct;if(Ct<100||!k._useTypedArrays)for(var Yt=0;Yt<Ct;Yt++)xe[Yt+Ye]=this[Yt+ct];else xe._set(this.subarray(ct,ct+Ct),Ye)}},k.prototype.slice=function(xe,Ye){var ct=this.length;if(xe=Fe(xe,ct,0),Ye=Fe(Ye,ct,ct),k._useTypedArrays)return k._augment(this.subarray(xe,Ye));for(var mt=Ye-xe,Ct=new k(mt,void 0,!0),Yt=0;Yt<mt;Yt++)Ct[Yt]=this[Yt+xe];return Ct},k.prototype.get=function(xe){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(xe)},k.prototype.set=function(xe,Ye){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(xe,Ye)},k.prototype.readUInt8=function(xe,Ye){if(Ye||(Ut(xe!=null,"missing offset"),Ut(xe<this.length,"Trying to read beyond buffer length")),!(xe>=this.length))return this[xe]},k.prototype.readUInt16LE=function(xe,Ye){return ie(this,xe,!0,Ye)},k.prototype.readUInt16BE=function(xe,Ye){return ie(this,xe,!1,Ye)},k.prototype.readUInt32LE=function(xe,Ye){return Q(this,xe,!0,Ye)},k.prototype.readUInt32BE=function(xe,Ye){return Q(this,xe,!1,Ye)},k.prototype.readInt8=function(xe,Ye){if(Ye||(Ut(xe!=null,"missing offset"),Ut(xe<this.length,"Trying to read beyond buffer length")),!(xe>=this.length))return 128&this[xe]?-1*(255-this[xe]+1):this[xe]},k.prototype.readInt16LE=function(xe,Ye){return W(this,xe,!0,Ye)},k.prototype.readInt16BE=function(xe,Ye){return W(this,xe,!1,Ye)},k.prototype.readInt32LE=function(xe,Ye){return te(this,xe,!0,Ye)},k.prototype.readInt32BE=function(xe,Ye){return te(this,xe,!1,Ye)},k.prototype.readFloatLE=function(xe,Ye){return X(this,xe,!0,Ye)},k.prototype.readFloatBE=function(xe,Ye){return X(this,xe,!1,Ye)},k.prototype.readDoubleLE=function(xe,Ye){return ae(this,xe,!0,Ye)},k.prototype.readDoubleBE=function(xe,Ye){return ae(this,xe,!1,Ye)},k.prototype.writeUInt8=function(xe,Ye,ct){ct||(Ut(xe!=null,"missing value"),Ut(Ye!=null,"missing offset"),Ut(Ye<this.length,"trying to write beyond buffer length"),sn(xe,255)),Ye>=this.length||(this[Ye]=xe)},k.prototype.writeUInt16LE=function(xe,Ye,ct){le(this,xe,Ye,!0,ct)},k.prototype.writeUInt16BE=function(xe,Ye,ct){le(this,xe,Ye,!1,ct)},k.prototype.writeUInt32LE=function(xe,Ye,ct){ge(this,xe,Ye,!0,ct)},k.prototype.writeUInt32BE=function(xe,Ye,ct){ge(this,xe,Ye,!1,ct)},k.prototype.writeInt8=function(xe,Ye,ct){ct||(Ut(xe!=null,"missing value"),Ut(Ye!=null,"missing offset"),Ut(Ye<this.length,"Trying to write beyond buffer length"),dn(xe,127,-128)),Ye>=this.length||(0<=xe?this.writeUInt8(xe,Ye,ct):this.writeUInt8(255+xe+1,Ye,ct))},k.prototype.writeInt16LE=function(xe,Ye,ct){ye(this,xe,Ye,!0,ct)},k.prototype.writeInt16BE=function(xe,Ye,ct){ye(this,xe,Ye,!1,ct)},k.prototype.writeInt32LE=function(xe,Ye,ct){De(this,xe,Ye,!0,ct)},k.prototype.writeInt32BE=function(xe,Ye,ct){De(this,xe,Ye,!1,ct)},k.prototype.writeFloatLE=function(xe,Ye,ct){He(this,xe,Ye,!0,ct)},k.prototype.writeFloatBE=function(xe,Ye,ct){He(this,xe,Ye,!1,ct)},k.prototype.writeDoubleLE=function(xe,Ye,ct){Be(this,xe,Ye,!0,ct)},k.prototype.writeDoubleBE=function(xe,Ye,ct){Be(this,xe,Ye,!1,ct)},k.prototype.fill=function(xe,Ye,ct){if(Ye=Ye||0,ct=ct||this.length,Ut(typeof(xe=typeof(xe=xe||0)=="string"?xe.charCodeAt(0):xe)=="number"&&!isNaN(xe),"value is not a number"),Ut(Ye<=ct,"end < start"),ct!==Ye&&this.length!==0){Ut(0<=Ye&&Ye<this.length,"start out of bounds"),Ut(0<=ct&&ct<=this.length,"end out of bounds");for(var mt=Ye;mt<ct;mt++)this[mt]=xe}},k.prototype.inspect=function(){for(var xe=[],Ye=this.length,ct=0;ct<Ye;ct++)if(xe[ct]=je(this[ct]),ct===i.INSPECT_MAX_BYTES){xe[ct+1]="...";break}return"<Buffer "+xe.join(" ")+">"},k.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(k._useTypedArrays)return new k(this).buffer;for(var xe=new Uint8Array(this.length),Ye=0,ct=xe.length;Ye<ct;Ye+=1)xe[Ye]=this[Ye];return xe.buffer};var Ee=k.prototype;function Fe(xe,Ye,ct){return typeof xe!="number"?ct:Ye<=(xe=~~xe)?Ye:0<=xe||0<=(xe+=Ye)?xe:0}function at(xe){return(xe=~~Math.ceil(+xe))<0?0:xe}function yt(xe){return(Array.isArray||function(Ye){return Object.prototype.toString.call(Ye)==="[object Array]"})(xe)}function je(xe){return xe<16?"0"+xe.toString(16):xe.toString(16)}function Ke(xe){for(var Ye=[],ct=0;ct<xe.length;ct++){var mt=xe.charCodeAt(ct);if(mt<=127)Ye.push(xe.charCodeAt(ct));else for(var Ct=ct,Yt=(55296<=mt&&mt<=57343&&ct++,encodeURIComponent(xe.slice(Ct,ct+1)).substr(1).split("%")),gn=0;gn<Yt.length;gn++)Ye.push(parseInt(Yt[gn],16))}return Ye}function it(xe){return N.toByteArray(xe)}function Pe(xe,Ye,ct,mt){for(var Ct=0;Ct<mt&&!(Ct+ct>=Ye.length||Ct>=xe.length);Ct++)Ye[Ct+ct]=xe[Ct];return Ct}function jt(xe){try{return decodeURIComponent(xe)}catch{return""}}function sn(xe,Ye){Ut(typeof xe=="number","cannot write a non-number as a number"),Ut(0<=xe,"specified a negative value for writing an unsigned value"),Ut(xe<=Ye,"value is larger than maximum value for type"),Ut(Math.floor(xe)===xe,"value has a fractional component")}function dn(xe,Ye,ct){Ut(typeof xe=="number","cannot write a non-number as a number"),Ut(xe<=Ye,"value larger than maximum allowed value"),Ut(ct<=xe,"value smaller than minimum allowed value"),Ut(Math.floor(xe)===xe,"value has a fractional component")}function Tn(xe,Ye,ct){Ut(typeof xe=="number","cannot write a non-number as a number"),Ut(xe<=Ye,"value larger than maximum allowed value"),Ut(ct<=xe,"value smaller than minimum allowed value")}function Ut(xe,Ye){if(!xe)throw new Error(Ye||"Failed assertion")}k._augment=function(xe){return xe._isBuffer=!0,xe._get=xe.get,xe._set=xe.set,xe.get=Ee.get,xe.set=Ee.set,xe.write=Ee.write,xe.toString=Ee.toString,xe.toLocaleString=Ee.toString,xe.toJSON=Ee.toJSON,xe.copy=Ee.copy,xe.slice=Ee.slice,xe.readUInt8=Ee.readUInt8,xe.readUInt16LE=Ee.readUInt16LE,xe.readUInt16BE=Ee.readUInt16BE,xe.readUInt32LE=Ee.readUInt32LE,xe.readUInt32BE=Ee.readUInt32BE,xe.readInt8=Ee.readInt8,xe.readInt16LE=Ee.readInt16LE,xe.readInt16BE=Ee.readInt16BE,xe.readInt32LE=Ee.readInt32LE,xe.readInt32BE=Ee.readInt32BE,xe.readFloatLE=Ee.readFloatLE,xe.readFloatBE=Ee.readFloatBE,xe.readDoubleLE=Ee.readDoubleLE,xe.readDoubleBE=Ee.readDoubleBE,xe.writeUInt8=Ee.writeUInt8,xe.writeUInt16LE=Ee.writeUInt16LE,xe.writeUInt16BE=Ee.writeUInt16BE,xe.writeUInt32LE=Ee.writeUInt32LE,xe.writeUInt32BE=Ee.writeUInt32BE,xe.writeInt8=Ee.writeInt8,xe.writeInt16LE=Ee.writeInt16LE,xe.writeInt16BE=Ee.writeInt16BE,xe.writeInt32LE=Ee.writeInt32LE,xe.writeInt32BE=Ee.writeInt32BE,xe.writeFloatLE=Ee.writeFloatLE,xe.writeFloatBE=Ee.writeFloatBE,xe.writeDoubleLE=Ee.writeDoubleLE,xe.writeDoubleBE=Ee.writeDoubleBE,xe.fill=Ee.fill,xe.inspect=Ee.inspect,xe.toArrayBuffer=Ee.toArrayBuffer,xe}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(n,r,i){(function(s,f,N,p,y,S,E,I,L){var N=n("buffer").Buffer,j=4,k=new N(j);k.fill(0),r.exports={hash:function(V,K,J,ie){for(var Q=K((function(le,ge){le.length%j!=0&&(ye=le.length+(j-le.length%j),le=N.concat([le,k],ye));for(var ye,De=[],He=ge?le.readInt32BE:le.readInt32LE,Be=0;Be<le.length;Be+=j)De.push(He.call(le,Be));return De})(V=N.isBuffer(V)?V:new N(V),ie),8*V.length),K=ie,W=new N(J),te=K?W.writeInt32BE:W.writeInt32LE,X=0;X<Q.length;X++)te.call(W,Q[X],4*X,!0);return W}}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(n,r,i){(function(s,f,N,p,y,S,E,I,L){var N=n("buffer").Buffer,j=n("./sha"),k=n("./sha256"),V=n("./rng"),K={sha1:j,sha256:k,md5:n("./md5")},J=64,ie=new N(J);function Q(le,ge){var ye=K[le=le||"sha1"],De=[];return ye||W("algorithm:",le,"is not yet supported"),{update:function(He){return N.isBuffer(He)||(He=new N(He)),De.push(He),He.length,this},digest:function(He){var Be=N.concat(De),Be=ge?(function(Ee,Fe,at){N.isBuffer(Fe)||(Fe=new N(Fe)),N.isBuffer(at)||(at=new N(at)),Fe.length>J?Fe=Ee(Fe):Fe.length<J&&(Fe=N.concat([Fe,ie],J));for(var yt=new N(J),je=new N(J),Ke=0;Ke<J;Ke++)yt[Ke]=54^Fe[Ke],je[Ke]=92^Fe[Ke];return at=Ee(N.concat([yt,at])),Ee(N.concat([je,at]))})(ye,ge,Be):ye(Be);return De=null,He?Be.toString(He):Be}}}function W(){var le=[].slice.call(arguments).join(" ");throw new Error([le,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}ie.fill(0),i.createHash=function(le){return Q(le)},i.createHmac=Q,i.randomBytes=function(le,ge){if(!ge||!ge.call)return new N(V(le));try{ge.call(this,void 0,new N(V(le)))}catch(ye){ge(ye)}};var te,X=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],ae=function(le){i[le]=function(){W("sorry,",le,"is not implemented yet")}};for(te in X)ae(X[te])}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(n,r,i){(function(s,f,a,p,y,S,E,I,L){var N=n("./helpers");function j(W,te){W[te>>5]|=128<<te%32,W[14+(te+64>>>9<<4)]=te;for(var X=1732584193,ae=-271733879,le=-1732584194,ge=271733878,ye=0;ye<W.length;ye+=16){var De=X,He=ae,Be=le,Ee=ge,X=V(X,ae,le,ge,W[ye+0],7,-680876936),ge=V(ge,X,ae,le,W[ye+1],12,-389564586),le=V(le,ge,X,ae,W[ye+2],17,606105819),ae=V(ae,le,ge,X,W[ye+3],22,-1044525330);X=V(X,ae,le,ge,W[ye+4],7,-176418897),ge=V(ge,X,ae,le,W[ye+5],12,1200080426),le=V(le,ge,X,ae,W[ye+6],17,-1473231341),ae=V(ae,le,ge,X,W[ye+7],22,-45705983),X=V(X,ae,le,ge,W[ye+8],7,1770035416),ge=V(ge,X,ae,le,W[ye+9],12,-1958414417),le=V(le,ge,X,ae,W[ye+10],17,-42063),ae=V(ae,le,ge,X,W[ye+11],22,-1990404162),X=V(X,ae,le,ge,W[ye+12],7,1804603682),ge=V(ge,X,ae,le,W[ye+13],12,-40341101),le=V(le,ge,X,ae,W[ye+14],17,-1502002290),X=K(X,ae=V(ae,le,ge,X,W[ye+15],22,1236535329),le,ge,W[ye+1],5,-165796510),ge=K(ge,X,ae,le,W[ye+6],9,-1069501632),le=K(le,ge,X,ae,W[ye+11],14,643717713),ae=K(ae,le,ge,X,W[ye+0],20,-373897302),X=K(X,ae,le,ge,W[ye+5],5,-701558691),ge=K(ge,X,ae,le,W[ye+10],9,38016083),le=K(le,ge,X,ae,W[ye+15],14,-660478335),ae=K(ae,le,ge,X,W[ye+4],20,-405537848),X=K(X,ae,le,ge,W[ye+9],5,568446438),ge=K(ge,X,ae,le,W[ye+14],9,-1019803690),le=K(le,ge,X,ae,W[ye+3],14,-187363961),ae=K(ae,le,ge,X,W[ye+8],20,1163531501),X=K(X,ae,le,ge,W[ye+13],5,-1444681467),ge=K(ge,X,ae,le,W[ye+2],9,-51403784),le=K(le,ge,X,ae,W[ye+7],14,1735328473),X=J(X,ae=K(ae,le,ge,X,W[ye+12],20,-1926607734),le,ge,W[ye+5],4,-378558),ge=J(ge,X,ae,le,W[ye+8],11,-2022574463),le=J(le,ge,X,ae,W[ye+11],16,1839030562),ae=J(ae,le,ge,X,W[ye+14],23,-35309556),X=J(X,ae,le,ge,W[ye+1],4,-1530992060),ge=J(ge,X,ae,le,W[ye+4],11,1272893353),le=J(le,ge,X,ae,W[ye+7],16,-155497632),ae=J(ae,le,ge,X,W[ye+10],23,-1094730640),X=J(X,ae,le,ge,W[ye+13],4,681279174),ge=J(ge,X,ae,le,W[ye+0],11,-358537222),le=J(le,ge,X,ae,W[ye+3],16,-722521979),ae=J(ae,le,ge,X,W[ye+6],23,76029189),X=J(X,ae,le,ge,W[ye+9],4,-640364487),ge=J(ge,X,ae,le,W[ye+12],11,-421815835),le=J(le,ge,X,ae,W[ye+15],16,530742520),X=ie(X,ae=J(ae,le,ge,X,W[ye+2],23,-995338651),le,ge,W[ye+0],6,-198630844),ge=ie(ge,X,ae,le,W[ye+7],10,1126891415),le=ie(le,ge,X,ae,W[ye+14],15,-1416354905),ae=ie(ae,le,ge,X,W[ye+5],21,-57434055),X=ie(X,ae,le,ge,W[ye+12],6,1700485571),ge=ie(ge,X,ae,le,W[ye+3],10,-1894986606),le=ie(le,ge,X,ae,W[ye+10],15,-1051523),ae=ie(ae,le,ge,X,W[ye+1],21,-2054922799),X=ie(X,ae,le,ge,W[ye+8],6,1873313359),ge=ie(ge,X,ae,le,W[ye+15],10,-30611744),le=ie(le,ge,X,ae,W[ye+6],15,-1560198380),ae=ie(ae,le,ge,X,W[ye+13],21,1309151649),X=ie(X,ae,le,ge,W[ye+4],6,-145523070),ge=ie(ge,X,ae,le,W[ye+11],10,-1120210379),le=ie(le,ge,X,ae,W[ye+2],15,718787259),ae=ie(ae,le,ge,X,W[ye+9],21,-343485551),X=Q(X,De),ae=Q(ae,He),le=Q(le,Be),ge=Q(ge,Ee)}return Array(X,ae,le,ge)}function k(W,te,X,ae,le,ge){return Q((te=Q(Q(te,W),Q(ae,ge)))<<le|te>>>32-le,X)}function V(W,te,X,ae,le,ge,ye){return k(te&X|~te&ae,W,te,le,ge,ye)}function K(W,te,X,ae,le,ge,ye){return k(te&ae|X&~ae,W,te,le,ge,ye)}function J(W,te,X,ae,le,ge,ye){return k(te^X^ae,W,te,le,ge,ye)}function ie(W,te,X,ae,le,ge,ye){return k(X^(te|~ae),W,te,le,ge,ye)}function Q(W,te){var X=(65535&W)+(65535&te);return(W>>16)+(te>>16)+(X>>16)<<16|65535&X}r.exports=function(W){return N.hash(W,j,16)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(n,r,i){(function(s,f,a,p,y,S,E,I,L){r.exports=function(N){for(var j,k=new Array(N),V=0;V<N;V++)(3&V)==0&&(j=4294967296*Math.random()),k[V]=j>>>((3&V)<<3)&255;return k}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(n,r,i){(function(s,f,a,p,y,S,E,I,L){var N=n("./helpers");function j(K,J){K[J>>5]|=128<<24-J%32,K[15+(J+64>>9<<4)]=J;for(var ie,Q,W,te=Array(80),X=1732584193,ae=-271733879,le=-1732584194,ge=271733878,ye=-1009589776,De=0;De<K.length;De+=16){for(var He=X,Be=ae,Ee=le,Fe=ge,at=ye,yt=0;yt<80;yt++){te[yt]=yt<16?K[De+yt]:V(te[yt-3]^te[yt-8]^te[yt-14]^te[yt-16],1);var je=k(k(V(X,5),(je=ae,Q=le,W=ge,(ie=yt)<20?je&Q|~je&W:!(ie<40)&&ie<60?je&Q|je&W|Q&W:je^Q^W)),k(k(ye,te[yt]),(ie=yt)<20?1518500249:ie<40?1859775393:ie<60?-1894007588:-899497514)),ye=ge,ge=le,le=V(ae,30),ae=X,X=je}X=k(X,He),ae=k(ae,Be),le=k(le,Ee),ge=k(ge,Fe),ye=k(ye,at)}return Array(X,ae,le,ge,ye)}function k(K,J){var ie=(65535&K)+(65535&J);return(K>>16)+(J>>16)+(ie>>16)<<16|65535&ie}function V(K,J){return K<<J|K>>>32-J}r.exports=function(K){return N.hash(K,j,20,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(n,r,i){(function(s,f,a,p,y,S,E,I,L){function N(J,ie){var Q=(65535&J)+(65535&ie);return(J>>16)+(ie>>16)+(Q>>16)<<16|65535&Q}function j(J,ie){var Q,W=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),te=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),X=new Array(64);J[ie>>5]|=128<<24-ie%32,J[15+(ie+64>>9<<4)]=ie;for(var ae,le,ge=0;ge<J.length;ge+=16){for(var ye=te[0],De=te[1],He=te[2],Be=te[3],Ee=te[4],Fe=te[5],at=te[6],yt=te[7],je=0;je<64;je++)X[je]=je<16?J[je+ge]:N(N(N((le=X[je-2],V(le,17)^V(le,19)^K(le,10)),X[je-7]),(le=X[je-15],V(le,7)^V(le,18)^K(le,3))),X[je-16]),Q=N(N(N(N(yt,V(le=Ee,6)^V(le,11)^V(le,25)),Ee&Fe^~Ee&at),W[je]),X[je]),ae=N(V(ae=ye,2)^V(ae,13)^V(ae,22),ye&De^ye&He^De&He),yt=at,at=Fe,Fe=Ee,Ee=N(Be,Q),Be=He,He=De,De=ye,ye=N(Q,ae);te[0]=N(ye,te[0]),te[1]=N(De,te[1]),te[2]=N(He,te[2]),te[3]=N(Be,te[3]),te[4]=N(Ee,te[4]),te[5]=N(Fe,te[5]),te[6]=N(at,te[6]),te[7]=N(yt,te[7])}return te}var k=n("./helpers"),V=function(J,ie){return J>>>ie|J<<32-ie},K=function(J,ie){return J>>>ie};r.exports=function(J){return k.hash(J,j,32,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(n,r,i){(function(s,f,a,p,y,S,E,I,L){i.read=function(N,j,k,V,ge){var J,ie,Q=8*ge-V-1,W=(1<<Q)-1,te=W>>1,X=-7,ae=k?ge-1:0,le=k?-1:1,ge=N[j+ae];for(ae+=le,J=ge&(1<<-X)-1,ge>>=-X,X+=Q;0<X;J=256*J+N[j+ae],ae+=le,X-=8);for(ie=J&(1<<-X)-1,J>>=-X,X+=V;0<X;ie=256*ie+N[j+ae],ae+=le,X-=8);if(J===0)J=1-te;else{if(J===W)return ie?NaN:1/0*(ge?-1:1);ie+=Math.pow(2,V),J-=te}return(ge?-1:1)*ie*Math.pow(2,J-V)},i.write=function(N,j,k,V,K,ye){var ie,Q,W=8*ye-K-1,te=(1<<W)-1,X=te>>1,ae=K===23?Math.pow(2,-24)-Math.pow(2,-77):0,le=V?0:ye-1,ge=V?1:-1,ye=j<0||j===0&&1/j<0?1:0;for(j=Math.abs(j),isNaN(j)||j===1/0?(Q=isNaN(j)?1:0,ie=te):(ie=Math.floor(Math.log(j)/Math.LN2),j*(V=Math.pow(2,-ie))<1&&(ie--,V*=2),2<=(j+=1<=ie+X?ae/V:ae*Math.pow(2,1-X))*V&&(ie++,V/=2),te<=ie+X?(Q=0,ie=te):1<=ie+X?(Q=(j*V-1)*Math.pow(2,K),ie+=X):(Q=j*Math.pow(2,X-1)*Math.pow(2,K),ie=0));8<=K;N[k+le]=255&Q,le+=ge,Q/=256,K-=8);for(ie=ie<<K|Q,W+=K;0<W;N[k+le]=255&ie,le+=ge,ie/=256,W-=8);N[k+le-ge]|=128*ye}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(n,r,i){(function(s,f,a,p,y,S,E,I,L){var N,j,k;function V(){}(s=r.exports={}).nextTick=(j=typeof window<"u"&&window.setImmediate,k=typeof window<"u"&&window.postMessage&&window.addEventListener,j?function(K){return window.setImmediate(K)}:k?(N=[],window.addEventListener("message",function(K){var J=K.source;J!==window&&J!==null||K.data!=="process-tick"||(K.stopPropagation(),0<N.length&&N.shift()())},!0),function(K){N.push(K),window.postMessage("process-tick","*")}):function(K){setTimeout(K,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=V,s.addListener=V,s.once=V,s.off=V,s.removeListener=V,s.removeAllListeners=V,s.emit=V,s.binding=function(K){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(K){throw new Error("process.chdir is not supported")}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(K3)),K3.exports}var gRe=mRe(),Due=typeof global=="object"&&global&&global.Object===Object&&global,yRe=typeof self=="object"&&self&&self.Object===Object&&self,Mp=Due||yRe||Function("return this")(),id=Mp.Symbol,Iue=Object.prototype,_Re=Iue.hasOwnProperty,vRe=Iue.toString,IE=id?id.toStringTag:void 0;function bRe(e){var t=_Re.call(e,IE),n=e[IE];try{e[IE]=void 0;var r=!0}catch{}var i=vRe.call(e);return r&&(t?e[IE]=n:delete e[IE]),i}var xRe=Object.prototype,wRe=xRe.toString;function SRe(e){return wRe.call(e)}var TRe="[object Null]",ERe="[object Undefined]",XW=id?id.toStringTag:void 0;function kx(e){return e==null?e===void 0?ERe:TRe:XW&&XW in Object(e)?bRe(e):SRe(e)}function lg(e){return e!=null&&typeof e=="object"}var ARe="[object Symbol]";function iR(e){return typeof e=="symbol"||lg(e)&&kx(e)==ARe}function Lx(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Ru=Array.isArray,ZW=id?id.prototype:void 0,KW=ZW?ZW.toString:void 0;function Pue(e){if(typeof e=="string")return e;if(Ru(e))return Lx(e,Pue)+"";if(iR(e))return KW?KW.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var ORe=/\s/;function CRe(e){for(var t=e.length;t--&&ORe.test(e.charAt(t)););return t}var MRe=/^\s+/;function DRe(e){return e&&e.slice(0,CRe(e)+1).replace(MRe,"")}function t_(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var QW=NaN,IRe=/^[-+]0x[0-9a-f]+$/i,PRe=/^0b[01]+$/i,RRe=/^0o[0-7]+$/i,kRe=parseInt;function Rue(e){if(typeof e=="number")return e;if(iR(e))return QW;if(t_(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=t_(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=DRe(e);var n=PRe.test(e);return n||RRe.test(e)?kRe(e.slice(2),n?2:8):IRe.test(e)?QW:+e}var JW=1/0,LRe=17976931348623157e292;function zRe(e){if(!e)return e===0?e:0;if(e=Rue(e),e===JW||e===-JW){var t=e<0?-1:1;return t*LRe}return e===e?e:0}function kue(e){var t=zRe(e),n=t%1;return t===t?n?t-n:t:0}function aR(e){return e}var NRe="[object AsyncFunction]",FRe="[object Function]",BRe="[object GeneratorFunction]",jRe="[object Proxy]";function Lue(e){if(!t_(e))return!1;var t=kx(e);return t==FRe||t==BRe||t==NRe||t==jRe}var Q3=Mp["__core-js_shared__"],eX=(function(){var e=/[^.]+$/.exec(Q3&&Q3.keys&&Q3.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function URe(e){return!!eX&&eX in e}var $Re=Function.prototype,VRe=$Re.toString;function zx(e){if(e!=null){try{return VRe.call(e)}catch{}try{return e+""}catch{}}return""}var qRe=/[\\^$.*+?()[\]{}|]/g,HRe=/^\[object .+?Constructor\]$/,GRe=Function.prototype,YRe=Object.prototype,WRe=GRe.toString,XRe=YRe.hasOwnProperty,ZRe=RegExp("^"+WRe.call(XRe).replace(qRe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function KRe(e){if(!t_(e)||URe(e))return!1;var t=Lue(e)?ZRe:HRe;return t.test(zx(e))}function QRe(e,t){return e==null?void 0:e[t]}function Nx(e,t){var n=QRe(e,t);return KRe(n)?n:void 0}var Tj=Nx(Mp,"WeakMap"),tX=Object.create,JRe=(function(){function e(){}return function(t){if(!t_(t))return{};if(tX)return tX(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}})();function eke(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function tke(){}var nke=800,rke=16,ike=Date.now;function ake(e){var t=0,n=0;return function(){var r=ike(),i=rke-(r-n);if(n=r,i>0){if(++t>=nke)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function oke(e){return function(){return e}}var XD=(function(){try{var e=Nx(Object,"defineProperty");return e({},"",{}),e}catch{}})(),ske=XD?function(e,t){return XD(e,"toString",{configurable:!0,enumerable:!1,value:oke(t),writable:!0})}:aR,lke=ake(ske);function zue(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function uke(e,t,n,r){for(var i=e.length,s=n+-1;++s<i;)if(t(e[s],s,e))return s;return-1}function cke(e){return e!==e}function fke(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function Nue(e,t,n){return t===t?fke(e,t,n):uke(e,cke,n)}function tV(e,t){var n=e==null?0:e.length;return!!n&&Nue(e,t,0)>-1}var hke=9007199254740991,dke=/^(?:0|[1-9]\d*)$/;function nV(e,t){var n=typeof e;return t=t??hke,!!t&&(n=="number"||n!="symbol"&&dke.test(e))&&e>-1&&e%1==0&&e<t}function Fue(e,t,n){t=="__proto__"&&XD?XD(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function rV(e,t){return e===t||e!==e&&t!==t}var pke=Object.prototype,mke=pke.hasOwnProperty;function Bue(e,t,n){var r=e[t];(!(mke.call(e,t)&&rV(r,n))||n===void 0&&!(t in e))&&Fue(e,t,n)}var nX=Math.max;function gke(e,t,n){return t=nX(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=nX(r.length-t,0),f=Array(s);++i<s;)f[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(f),eke(e,this,a)}}function oR(e,t){return lke(gke(e,t,aR),e+"")}var yke=9007199254740991;function iV(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=yke}function HS(e){return e!=null&&iV(e.length)&&!Lue(e)}var _ke=Object.prototype;function aV(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||_ke;return e===n}function jue(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var vke="[object Arguments]";function rX(e){return lg(e)&&kx(e)==vke}var Uue=Object.prototype,bke=Uue.hasOwnProperty,xke=Uue.propertyIsEnumerable,sR=rX((function(){return arguments})())?rX:function(e){return lg(e)&&bke.call(e,"callee")&&!xke.call(e,"callee")};function wke(){return!1}var $ue=typeof Kf=="object"&&Kf&&!Kf.nodeType&&Kf,iX=$ue&&typeof Mu=="object"&&Mu&&!Mu.nodeType&&Mu,Ske=iX&&iX.exports===$ue,aX=Ske?Mp.Buffer:void 0,Tke=aX?aX.isBuffer:void 0,L2=Tke||wke,Eke="[object Arguments]",Ake="[object Array]",Oke="[object Boolean]",Cke="[object Date]",Mke="[object Error]",Dke="[object Function]",Ike="[object Map]",Pke="[object Number]",Rke="[object Object]",kke="[object RegExp]",Lke="[object Set]",zke="[object String]",Nke="[object WeakMap]",Fke="[object ArrayBuffer]",Bke="[object DataView]",jke="[object Float32Array]",Uke="[object Float64Array]",$ke="[object Int8Array]",Vke="[object Int16Array]",qke="[object Int32Array]",Hke="[object Uint8Array]",Gke="[object Uint8ClampedArray]",Yke="[object Uint16Array]",Wke="[object Uint32Array]",Mo={};Mo[jke]=Mo[Uke]=Mo[$ke]=Mo[Vke]=Mo[qke]=Mo[Hke]=Mo[Gke]=Mo[Yke]=Mo[Wke]=!0;Mo[Eke]=Mo[Ake]=Mo[Fke]=Mo[Oke]=Mo[Bke]=Mo[Cke]=Mo[Mke]=Mo[Dke]=Mo[Ike]=Mo[Pke]=Mo[Rke]=Mo[kke]=Mo[Lke]=Mo[zke]=Mo[Nke]=!1;function Xke(e){return lg(e)&&iV(e.length)&&!!Mo[kx(e)]}function iO(e){return function(t){return e(t)}}var Vue=typeof Kf=="object"&&Kf&&!Kf.nodeType&&Kf,_2=Vue&&typeof Mu=="object"&&Mu&&!Mu.nodeType&&Mu,Zke=_2&&_2.exports===Vue,J3=Zke&&Due.process,Ww=(function(){try{var e=_2&&_2.require&&_2.require("util").types;return e||J3&&J3.binding&&J3.binding("util")}catch{}})(),oX=Ww&&Ww.isTypedArray,oV=oX?iO(oX):Xke,Kke=Object.prototype,Qke=Kke.hasOwnProperty;function Jke(e,t){var n=Ru(e),r=!n&&sR(e),i=!n&&!r&&L2(e),s=!n&&!r&&!i&&oV(e),f=n||r||i||s,a=f?jue(e.length,String):[],p=a.length;for(var y in e)Qke.call(e,y)&&!(f&&(y=="length"||i&&(y=="offset"||y=="parent")||s&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||nV(y,p)))&&a.push(y);return a}function que(e,t){return function(n){return e(t(n))}}var eLe=que(Object.keys,Object),tLe=Object.prototype,nLe=tLe.hasOwnProperty;function Hue(e){if(!aV(e))return eLe(e);var t=[];for(var n in Object(e))nLe.call(e,n)&&n!="constructor"&&t.push(n);return t}function wu(e){return HS(e)?Jke(e):Hue(e)}var rLe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,iLe=/^\w*$/;function sV(e,t){if(Ru(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||iR(e)?!0:iLe.test(e)||!rLe.test(e)||t!=null&&e in Object(t)}var z2=Nx(Object,"create");function aLe(){this.__data__=z2?z2(null):{},this.size=0}function oLe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var sLe="__lodash_hash_undefined__",lLe=Object.prototype,uLe=lLe.hasOwnProperty;function cLe(e){var t=this.__data__;if(z2){var n=t[e];return n===sLe?void 0:n}return uLe.call(t,e)?t[e]:void 0}var fLe=Object.prototype,hLe=fLe.hasOwnProperty;function dLe(e){var t=this.__data__;return z2?t[e]!==void 0:hLe.call(t,e)}var pLe="__lodash_hash_undefined__";function mLe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=z2&&t===void 0?pLe:t,this}function _x(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_x.prototype.clear=aLe;_x.prototype.delete=oLe;_x.prototype.get=cLe;_x.prototype.has=dLe;_x.prototype.set=mLe;function gLe(){this.__data__=[],this.size=0}function lR(e,t){for(var n=e.length;n--;)if(rV(e[n][0],t))return n;return-1}var yLe=Array.prototype,_Le=yLe.splice;function vLe(e){var t=this.__data__,n=lR(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():_Le.call(t,n,1),--this.size,!0}function bLe(e){var t=this.__data__,n=lR(t,e);return n<0?void 0:t[n][1]}function xLe(e){return lR(this.__data__,e)>-1}function wLe(e,t){var n=this.__data__,r=lR(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function d_(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}d_.prototype.clear=gLe;d_.prototype.delete=vLe;d_.prototype.get=bLe;d_.prototype.has=xLe;d_.prototype.set=wLe;var N2=Nx(Mp,"Map");function SLe(){this.size=0,this.__data__={hash:new _x,map:new(N2||d_),string:new _x}}function TLe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function uR(e,t){var n=e.__data__;return TLe(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ELe(e){var t=uR(this,e).delete(e);return this.size-=t?1:0,t}function ALe(e){return uR(this,e).get(e)}function OLe(e){return uR(this,e).has(e)}function CLe(e,t){var n=uR(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function p_(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}p_.prototype.clear=SLe;p_.prototype.delete=ELe;p_.prototype.get=ALe;p_.prototype.has=OLe;p_.prototype.set=CLe;var MLe="Expected a function";function lV(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(MLe);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var f=e.apply(this,r);return n.cache=s.set(i,f)||s,f};return n.cache=new(lV.Cache||p_),n}lV.Cache=p_;var DLe=500;function ILe(e){var t=lV(e,function(r){return n.size===DLe&&n.clear(),r}),n=t.cache;return t}var PLe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,RLe=/\\(\\)?/g,kLe=ILe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(PLe,function(n,r,i,s){t.push(i?s.replace(RLe,"$1"):r||n)}),t});function Ej(e){return e==null?"":Pue(e)}function uV(e,t){return Ru(e)?e:sV(e,t)?[e]:kLe(Ej(e))}function aO(e){if(typeof e=="string"||iR(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Gue(e,t){t=uV(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[aO(t[n++])];return n&&n==r?e:void 0}function rf(e,t,n){var r=e==null?void 0:Gue(e,t);return r===void 0?n:r}function Yue(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var sX=id?id.isConcatSpreadable:void 0;function LLe(e){return Ru(e)||sR(e)||!!(sX&&e&&e[sX])}function cV(e,t,n,r,i){var s=-1,f=e.length;for(n||(n=LLe),i||(i=[]);++s<f;){var a=e[s];n(a)?Yue(i,a):r||(i[i.length]=a)}return i}var zLe=que(Object.getPrototypeOf,Object),NLe=Mp.isFinite,FLe=Math.min;function BLe(e){var t=Math[e];return function(n,r){if(n=Rue(n),r=r==null?0:FLe(kue(r),292),r&&NLe(n)){var i=(Ej(n)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+r));return i=(Ej(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}function jLe(){this.__data__=new d_,this.size=0}function ULe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function $Le(e){return this.__data__.get(e)}function VLe(e){return this.__data__.has(e)}var qLe=200;function HLe(e,t){var n=this.__data__;if(n instanceof d_){var r=n.__data__;if(!N2||r.length<qLe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new p_(r)}return n.set(e,t),this.size=n.size,this}function Jm(e){var t=this.__data__=new d_(e);this.size=t.size}Jm.prototype.clear=jLe;Jm.prototype.delete=ULe;Jm.prototype.get=$Le;Jm.prototype.has=VLe;Jm.prototype.set=HLe;var Wue=typeof Kf=="object"&&Kf&&!Kf.nodeType&&Kf,lX=Wue&&typeof Mu=="object"&&Mu&&!Mu.nodeType&&Mu,GLe=lX&&lX.exports===Wue,uX=GLe?Mp.Buffer:void 0;uX&&uX.allocUnsafe;function YLe(e,t){return e.slice()}function fV(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var f=e[n];t(f,n,e)&&(s[i++]=f)}return s}function WLe(){return[]}var XLe=Object.prototype,ZLe=XLe.propertyIsEnumerable,cX=Object.getOwnPropertySymbols,KLe=cX?function(e){return e==null?[]:(e=Object(e),fV(cX(e),function(t){return ZLe.call(e,t)}))}:WLe;function QLe(e,t,n){var r=t(e);return Ru(e)?r:Yue(r,n(e))}function Aj(e){return QLe(e,wu,KLe)}var Oj=Nx(Mp,"DataView"),Cj=Nx(Mp,"Promise"),Cw=Nx(Mp,"Set"),fX="[object Map]",JLe="[object Object]",hX="[object Promise]",dX="[object Set]",pX="[object WeakMap]",mX="[object DataView]",e3e=zx(Oj),t3e=zx(N2),n3e=zx(Cj),r3e=zx(Cw),i3e=zx(Tj),Hh=kx;(Oj&&Hh(new Oj(new ArrayBuffer(1)))!=mX||N2&&Hh(new N2)!=fX||Cj&&Hh(Cj.resolve())!=hX||Cw&&Hh(new Cw)!=dX||Tj&&Hh(new Tj)!=pX)&&(Hh=function(e){var t=kx(e),n=t==JLe?e.constructor:void 0,r=n?zx(n):"";if(r)switch(r){case e3e:return mX;case t3e:return fX;case n3e:return hX;case r3e:return dX;case i3e:return pX}return t});var a3e=Object.prototype,o3e=a3e.hasOwnProperty;function s3e(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&o3e.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var ZD=Mp.Uint8Array;function hV(e){var t=new e.constructor(e.byteLength);return new ZD(t).set(new ZD(e)),t}function l3e(e,t){var n=hV(e.buffer);return new e.constructor(n,e.byteOffset,e.byteLength)}var u3e=/\w*$/;function c3e(e){var t=new e.constructor(e.source,u3e.exec(e));return t.lastIndex=e.lastIndex,t}var gX=id?id.prototype:void 0,yX=gX?gX.valueOf:void 0;function f3e(e){return yX?Object(yX.call(e)):{}}function h3e(e,t){var n=hV(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}var d3e="[object Boolean]",p3e="[object Date]",m3e="[object Map]",g3e="[object Number]",y3e="[object RegExp]",_3e="[object Set]",v3e="[object String]",b3e="[object Symbol]",x3e="[object ArrayBuffer]",w3e="[object DataView]",S3e="[object Float32Array]",T3e="[object Float64Array]",E3e="[object Int8Array]",A3e="[object Int16Array]",O3e="[object Int32Array]",C3e="[object Uint8Array]",M3e="[object Uint8ClampedArray]",D3e="[object Uint16Array]",I3e="[object Uint32Array]";function P3e(e,t,n){var r=e.constructor;switch(t){case x3e:return hV(e);case d3e:case p3e:return new r(+e);case w3e:return l3e(e);case S3e:case T3e:case E3e:case A3e:case O3e:case C3e:case M3e:case D3e:case I3e:return h3e(e);case m3e:return new r;case g3e:case v3e:return new r(e);case y3e:return c3e(e);case _3e:return new r;case b3e:return f3e(e)}}function R3e(e){return typeof e.constructor=="function"&&!aV(e)?JRe(zLe(e)):{}}var k3e="[object Map]";function L3e(e){return lg(e)&&Hh(e)==k3e}var _X=Ww&&Ww.isMap,z3e=_X?iO(_X):L3e,N3e="[object Set]";function F3e(e){return lg(e)&&Hh(e)==N3e}var vX=Ww&&Ww.isSet,B3e=vX?iO(vX):F3e,Xue="[object Arguments]",j3e="[object Array]",U3e="[object Boolean]",$3e="[object Date]",V3e="[object Error]",Zue="[object Function]",q3e="[object GeneratorFunction]",H3e="[object Map]",G3e="[object Number]",Kue="[object Object]",Y3e="[object RegExp]",W3e="[object Set]",X3e="[object String]",Z3e="[object Symbol]",K3e="[object WeakMap]",Q3e="[object ArrayBuffer]",J3e="[object DataView]",eze="[object Float32Array]",tze="[object Float64Array]",nze="[object Int8Array]",rze="[object Int16Array]",ize="[object Int32Array]",aze="[object Uint8Array]",oze="[object Uint8ClampedArray]",sze="[object Uint16Array]",lze="[object Uint32Array]",po={};po[Xue]=po[j3e]=po[Q3e]=po[J3e]=po[U3e]=po[$3e]=po[eze]=po[tze]=po[nze]=po[rze]=po[ize]=po[H3e]=po[G3e]=po[Kue]=po[Y3e]=po[W3e]=po[X3e]=po[Z3e]=po[aze]=po[oze]=po[sze]=po[lze]=!0;po[V3e]=po[Zue]=po[K3e]=!1;function lD(e,t,n,r,i,s){var f;if(f!==void 0)return f;if(!t_(e))return e;var a=Ru(e);if(a)f=s3e(e);else{var p=Hh(e),y=p==Zue||p==q3e;if(L2(e))return YLe(e);if(p==Kue||p==Xue||y&&!i)f=y?{}:R3e(e);else{if(!po[p])return i?e:{};f=P3e(e,p)}}s||(s=new Jm);var S=s.get(e);if(S)return S;s.set(e,f),B3e(e)?e.forEach(function(L){f.add(lD(L,t,n,L,e,s))}):z3e(e)&&e.forEach(function(L,N){f.set(N,lD(L,t,n,N,e,s))});var E=Aj,I=a?void 0:E(e);return zue(I||e,function(L,N){I&&(N=L,L=e[N]),Bue(f,N,lD(L,t,n,N,e,s))}),f}var uze=1,cze=4;function ez(e){return lD(e,uze|cze)}var fze="__lodash_hash_undefined__";function hze(e){return this.__data__.set(e,fze),this}function dze(e){return this.__data__.has(e)}function vx(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new p_;++t<n;)this.add(e[t])}vx.prototype.add=vx.prototype.push=hze;vx.prototype.has=dze;function pze(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function F2(e,t){return e.has(t)}var mze=1,gze=2;function Que(e,t,n,r,i,s){var f=n&mze,a=e.length,p=t.length;if(a!=p&&!(f&&p>a))return!1;var y=s.get(e),S=s.get(t);if(y&&S)return y==t&&S==e;var E=-1,I=!0,L=n&gze?new vx:void 0;for(s.set(e,t),s.set(t,e);++E<a;){var N=e[E],j=t[E];if(r)var k=f?r(j,N,E,t,e,s):r(N,j,E,e,t,s);if(k!==void 0){if(k)continue;I=!1;break}if(L){if(!pze(t,function(V,K){if(!F2(L,K)&&(N===V||i(N,V,n,r,s)))return L.push(K)})){I=!1;break}}else if(!(N===j||i(N,j,n,r,s))){I=!1;break}}return s.delete(e),s.delete(t),I}function yze(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function dV(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var _ze=1,vze=2,bze="[object Boolean]",xze="[object Date]",wze="[object Error]",Sze="[object Map]",Tze="[object Number]",Eze="[object RegExp]",Aze="[object Set]",Oze="[object String]",Cze="[object Symbol]",Mze="[object ArrayBuffer]",Dze="[object DataView]",bX=id?id.prototype:void 0,tz=bX?bX.valueOf:void 0;function Ize(e,t,n,r,i,s,f){switch(n){case Dze:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Mze:return!(e.byteLength!=t.byteLength||!s(new ZD(e),new ZD(t)));case bze:case xze:case Tze:return rV(+e,+t);case wze:return e.name==t.name&&e.message==t.message;case Eze:case Oze:return e==t+"";case Sze:var a=yze;case Aze:var p=r&_ze;if(a||(a=dV),e.size!=t.size&&!p)return!1;var y=f.get(e);if(y)return y==t;r|=vze,f.set(e,t);var S=Que(a(e),a(t),r,i,s,f);return f.delete(e),S;case Cze:if(tz)return tz.call(e)==tz.call(t)}return!1}var Pze=1,Rze=Object.prototype,kze=Rze.hasOwnProperty;function Lze(e,t,n,r,i,s){var f=n&Pze,a=Aj(e),p=a.length,y=Aj(t),S=y.length;if(p!=S&&!f)return!1;for(var E=p;E--;){var I=a[E];if(!(f?I in t:kze.call(t,I)))return!1}var L=s.get(e),N=s.get(t);if(L&&N)return L==t&&N==e;var j=!0;s.set(e,t),s.set(t,e);for(var k=f;++E<p;){I=a[E];var V=e[I],K=t[I];if(r)var J=f?r(K,V,I,t,e,s):r(V,K,I,e,t,s);if(!(J===void 0?V===K||i(V,K,n,r,s):J)){j=!1;break}k||(k=I=="constructor")}if(j&&!k){var ie=e.constructor,Q=t.constructor;ie!=Q&&"constructor"in e&&"constructor"in t&&!(typeof ie=="function"&&ie instanceof ie&&typeof Q=="function"&&Q instanceof Q)&&(j=!1)}return s.delete(e),s.delete(t),j}var zze=1,xX="[object Arguments]",wX="[object Array]",mM="[object Object]",Nze=Object.prototype,SX=Nze.hasOwnProperty;function Fze(e,t,n,r,i,s){var f=Ru(e),a=Ru(t),p=f?wX:Hh(e),y=a?wX:Hh(t);p=p==xX?mM:p,y=y==xX?mM:y;var S=p==mM,E=y==mM,I=p==y;if(I&&L2(e)){if(!L2(t))return!1;f=!0,S=!1}if(I&&!S)return s||(s=new Jm),f||oV(e)?Que(e,t,n,r,i,s):Ize(e,t,p,n,r,i,s);if(!(n&zze)){var L=S&&SX.call(e,"__wrapped__"),N=E&&SX.call(t,"__wrapped__");if(L||N){var j=L?e.value():e,k=N?t.value():t;return s||(s=new Jm),i(j,k,n,r,s)}}return I?(s||(s=new Jm),Lze(e,t,n,r,i,s)):!1}function cR(e,t,n,r,i){return e===t?!0:e==null||t==null||!lg(e)&&!lg(t)?e!==e&&t!==t:Fze(e,t,n,r,cR,i)}var Bze=1,jze=2;function Uze(e,t,n,r){var i=n.length,s=i;if(e==null)return!s;for(e=Object(e);i--;){var f=n[i];if(f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++i<s;){f=n[i];var a=f[0],p=e[a],y=f[1];if(f[2]){if(p===void 0&&!(a in e))return!1}else{var S=new Jm,E;if(!(E===void 0?cR(y,p,Bze|jze,r,S):E))return!1}}return!0}function Jue(e){return e===e&&!t_(e)}function $ze(e){for(var t=wu(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Jue(i)]}return t}function ece(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function Vze(e){var t=$ze(e);return t.length==1&&t[0][2]?ece(t[0][0],t[0][1]):function(n){return n===e||Uze(n,e,t)}}function qze(e,t){return e!=null&&t in Object(e)}function tce(e,t,n){t=uV(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var f=aO(t[r]);if(!(s=e!=null&&n(e,f)))break;e=e[f]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&iV(i)&&nV(f,i)&&(Ru(e)||sR(e)))}function Hze(e,t){return e!=null&&tce(e,t,qze)}var Gze=1,Yze=2;function Wze(e,t){return sV(e)&&Jue(t)?ece(aO(e),t):function(n){var r=rf(n,e);return r===void 0&&r===t?Hze(n,e):cR(t,r,Gze|Yze)}}function nce(e){return function(t){return t==null?void 0:t[e]}}function Xze(e){return function(t){return Gue(t,e)}}function Zze(e){return sV(e)?nce(aO(e)):Xze(e)}function oO(e){return typeof e=="function"?e:e==null?aR:typeof e=="object"?Ru(e)?Wze(e[0],e[1]):Vze(e):Zze(e)}function Kze(e,t,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;){var f=e[i];t(r,f,n(f),e)}return r}function Qze(e){return function(t,n,r){for(var i=-1,s=Object(t),f=r(t),a=f.length;a--;){var p=f[++i];if(n(s[p],p,s)===!1)break}return t}}var Jze=Qze();function eNe(e,t){return e&&Jze(e,t,wu)}function tNe(e,t){return function(n,r){if(n==null)return n;if(!HS(n))return e(n,r);for(var i=n.length,s=-1,f=Object(n);++s<i&&r(f[s],s,f)!==!1;);return n}}var pV=tNe(eNe);function nNe(e,t,n,r){return pV(e,function(i,s,f){t(r,i,n(i),f)}),r}function rNe(e,t){return function(n,r){var i=Ru(n)?Kze:nNe,s=t?t():{};return i(n,e,oO(r),s)}}function Xw(e){return lg(e)&&HS(e)}var iNe=200;function aNe(e,t,n,r){var i=-1,s=tV,f=!0,a=e.length,p=[],y=t.length;if(!a)return p;n&&(t=Lx(t,iO(n))),t.length>=iNe&&(s=F2,f=!1,t=new vx(t));e:for(;++i<a;){var S=e[i],E=n==null?S:n(S);if(S=S!==0?S:0,f&&E===E){for(var I=y;I--;)if(t[I]===E)continue e;p.push(S)}else s(t,E,r)||p.push(S)}return p}function KD(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function oNe(e){return typeof e=="function"?e:aR}function fR(e,t){var n=Ru(e)?zue:pV;return n(e,oNe(t))}function sNe(e,t){var n=-1,r=HS(e)?Array(e.length):[];return pV(e,function(i,s,f){r[++n]=t(i,s,f)}),r}function lNe(e,t){var n=Ru(e)?Lx:sNe;return n(e,oO(t))}function TX(e,t){return cV(lNe(e,t))}var uNe=Object.prototype,cNe=uNe.hasOwnProperty,fNe=rNe(function(e,t,n){cNe.call(e,n)?e[n].push(t):Fue(e,n,[t])}),hNe=Object.prototype,dNe=hNe.hasOwnProperty;function pNe(e,t){return e!=null&&dNe.call(e,t)}function vw(e,t){return e!=null&&tce(e,t,pNe)}var mNe="[object String]";function gNe(e){return typeof e=="string"||!Ru(e)&&lg(e)&&kx(e)==mNe}function yNe(e,t){return Lx(t,function(n){return e[n]})}function _Ne(e){return e==null?[]:yNe(e,wu(e))}var vNe=Math.max;function Fy(e,t,n,r){e=HS(e)?e:_Ne(e),n=n?kue(n):0;var i=e.length;return n<0&&(n=vNe(i+n,0)),gNe(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Nue(e,t,n)>-1}var bNe=Math.min;function xNe(e,t,n){for(var r=tV,i=e[0].length,s=e.length,f=s,a=Array(s),p=1/0,y=[];f--;){var S=e[f];f&&t&&(S=Lx(S,iO(t))),p=bNe(S.length,p),a[f]=t||i>=120&&S.length>=120?new vx(f&&S):void 0}S=e[0];var E=-1,I=a[0];e:for(;++E<i&&y.length<p;){var L=S[E],N=t?t(L):L;if(L=L!==0?L:0,!(I?F2(I,N):r(y,N))){for(f=s;--f;){var j=a[f];if(!(j?F2(j,N):r(e[f],N)))continue e}I&&I.push(N),y.push(L)}}return y}function wNe(e){return Xw(e)?e:[]}var SNe=oR(function(e){var t=KD(e),n=Lx(e,wNe);return t===KD(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?xNe(n,oO(t)):[]}),TNe="[object Map]",ENe="[object Set]",ANe=Object.prototype,ONe=ANe.hasOwnProperty;function Mj(e){if(e==null)return!0;if(HS(e)&&(Ru(e)||typeof e=="string"||typeof e.splice=="function"||L2(e)||oV(e)||sR(e)))return!e.length;var t=Hh(e);if(t==TNe||t==ENe)return!e.size;if(aV(e))return!Hue(e).length;for(var n in e)if(ONe.call(e,n))return!1;return!0}function ts(e,t){return cR(e,t)}function CNe(e,t,n,r){if(!t_(e))return e;t=uV(t,e);for(var i=-1,s=t.length,f=s-1,a=e;a!=null&&++i<s;){var p=aO(t[i]),y=n;if(p==="__proto__"||p==="constructor"||p==="prototype")return e;if(i!=f){var S=a[p];y=void 0,y===void 0&&(y=t_(S)?S:nV(t[i+1])?[]:{})}Bue(a,p,y),a=a[p]}return e}var MNe=BLe("round");function Ib(e,t,n){return e==null?e:CNe(e,t,n)}var DNe=1/0,INe=Cw&&1/dV(new Cw([,-0]))[1]==DNe?function(e){return new Cw(e)}:tke,PNe=200;function Dj(e,t,n){var r=-1,i=tV,s=e.length,f=!0,a=[],p=a;if(s>=PNe){var y=t?null:INe(e);if(y)return dV(y);f=!1,i=F2,p=new vx}else p=t?[]:a;e:for(;++r<s;){var S=e[r],E=t?t(S):S;if(S=S!==0?S:0,f&&E===E){for(var I=p.length;I--;)if(p[I]===E)continue e;t&&p.push(E),a.push(S)}else i(p,E,n)||(p!==a&&p.push(E),a.push(S))}return a}var RNe=oR(function(e){var t=KD(e);return Xw(t)&&(t=void 0),Dj(cV(e,1,Xw,!0),oO(t))}),kNe=Math.max;function LNe(e){if(!(e&&e.length))return[];var t=0;return e=fV(e,function(n){if(Xw(n))return t=kNe(n.length,t),!0}),jue(t,function(n){return Lx(e,nce(n))})}function zNe(e,t,n){var r=e.length;if(r<2)return r?Dj(e[0]):[];for(var i=-1,s=Array(r);++i<r;)for(var f=e[i],a=-1;++a<r;)a!=i&&(s[i]=aNe(s[i]||f,e[a],t,n));return Dj(cV(s),t,n)}var NNe=oR(function(e){var t=KD(e);return Xw(t)&&(t=void 0),zNe(fV(e,Xw),oO(t))}),FNe=oR(LNe);//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var rce;function Sn(){return rce.apply(null,arguments)}function BNe(e){rce=e}function wp(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function nx(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function wa(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function mV(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(wa(e,t))return!1;return!0}function Zc(e){return e===void 0}function n_(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function sO(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function ice(e,t){var n=[],r,i=e.length;for(r=0;r<i;++r)n.push(t(e[r],r));return n}function Bv(e,t){for(var n in t)wa(t,n)&&(e[n]=t[n]);return wa(t,"toString")&&(e.toString=t.toString),wa(t,"valueOf")&&(e.valueOf=t.valueOf),e}function pg(e,t,n,r){return Oce(e,t,n,r,!0).utc()}function jNe(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Mi(e){return e._pf==null&&(e._pf=jNe()),e._pf}var Ij;Array.prototype.some?Ij=Array.prototype.some:Ij=function(e){var t=Object(this),n=t.length>>>0,r;for(r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function gV(e){var t=null,n=!1,r=e._d&&!isNaN(e._d.getTime());if(r&&(t=Mi(e),n=Ij.call(t.parsedDateParts,function(i){return i!=null}),r=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=r;else return r;return e._isValid}function hR(e){var t=pg(NaN);return e!=null?Bv(Mi(t),e):Mi(t).userInvalidated=!0,t}var EX=Sn.momentProperties=[],nz=!1;function yV(e,t){var n,r,i,s=EX.length;if(Zc(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Zc(t._i)||(e._i=t._i),Zc(t._f)||(e._f=t._f),Zc(t._l)||(e._l=t._l),Zc(t._strict)||(e._strict=t._strict),Zc(t._tzm)||(e._tzm=t._tzm),Zc(t._isUTC)||(e._isUTC=t._isUTC),Zc(t._offset)||(e._offset=t._offset),Zc(t._pf)||(e._pf=Mi(t)),Zc(t._locale)||(e._locale=t._locale),s>0)for(n=0;n<s;n++)r=EX[n],i=t[r],Zc(i)||(e[r]=i);return e}function lO(e){yV(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),nz===!1&&(nz=!0,Sn.updateOffset(this),nz=!1)}function Sp(e){return e instanceof lO||e!=null&&e._isAMomentObject!=null}function ace(e){Sn.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function ud(e,t){var n=!0;return Bv(function(){if(Sn.deprecationHandler!=null&&Sn.deprecationHandler(null,e),n){var r=[],i,s,f,a=arguments.length;for(s=0;s<a;s++){if(i="",typeof arguments[s]=="object"){i+=`
[`+s+"] ";for(f in arguments[0])wa(arguments[0],f)&&(i+=f+": "+arguments[0][f]+", ");i=i.slice(0,-2)}else i=arguments[s];r.push(i)}ace(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var AX={};function oce(e,t){Sn.deprecationHandler!=null&&Sn.deprecationHandler(e,t),AX[e]||(ace(t),AX[e]=!0)}Sn.suppressDeprecationWarnings=!1;Sn.deprecationHandler=null;function mg(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function UNe(e){var t,n;for(n in e)wa(e,n)&&(t=e[n],mg(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Pj(e,t){var n=Bv({},e),r;for(r in t)wa(t,r)&&(nx(e[r])&&nx(t[r])?(n[r]={},Bv(n[r],e[r]),Bv(n[r],t[r])):t[r]!=null?n[r]=t[r]:delete n[r]);for(r in e)wa(e,r)&&!wa(t,r)&&nx(e[r])&&(n[r]=Bv({},n[r]));return n}function _V(e){e!=null&&this.set(e)}var Rj;Object.keys?Rj=Object.keys:Rj=function(e){var t,n=[];for(t in e)wa(e,t)&&n.push(t);return n};var $Ne={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function VNe(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return mg(r)?r.call(t,n):r}function ug(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var vV=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,gM=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,rz={},Mw={};function zr(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(Mw[e]=i),t&&(Mw[t[0]]=function(){return ug(i.apply(this,arguments),t[1],t[2])}),n&&(Mw[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function qNe(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function HNe(e){var t=e.match(vV),n,r;for(n=0,r=t.length;n<r;n++)Mw[t[n]]?t[n]=Mw[t[n]]:t[n]=qNe(t[n]);return function(i){var s="",f;for(f=0;f<r;f++)s+=mg(t[f])?t[f].call(i,e):t[f];return s}}function uD(e,t){return e.isValid()?(t=sce(t,e.localeData()),rz[t]=rz[t]||HNe(t),rz[t](e)):e.localeData().invalidDate()}function sce(e,t){var n=5;function r(i){return t.longDateFormat(i)||i}for(gM.lastIndex=0;n>=0&&gM.test(e);)e=e.replace(gM,r),gM.lastIndex=0,n-=1;return e}var GNe={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function YNe(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(vV).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[e])}var WNe="Invalid date";function XNe(){return this._invalidDate}var ZNe="%d",KNe=/\d{1,2}/;function QNe(e){return this._ordinal.replace("%d",e)}var JNe={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function eFe(e,t,n,r){var i=this._relativeTime[n];return mg(i)?i(e,t,n,r):i.replace(/%d/i,e)}function tFe(e,t){var n=this._relativeTime[e>0?"future":"past"];return mg(n)?n(t):n.replace(/%s/i,t)}var OX={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function cd(e){return typeof e=="string"?OX[e]||OX[e.toLowerCase()]:void 0}function bV(e){var t={},n,r;for(r in e)wa(e,r)&&(n=cd(r),n&&(t[n]=e[r]));return t}var nFe={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function rFe(e){var t=[],n;for(n in e)wa(e,n)&&t.push({unit:n,priority:nFe[n]});return t.sort(function(r,i){return r.priority-i.priority}),t}var lce=/\d/,ih=/\d\d/,uce=/\d{3}/,xV=/\d{4}/,dR=/[+-]?\d{6}/,No=/\d\d?/,cce=/\d\d\d\d?/,fce=/\d\d\d\d\d\d?/,pR=/\d{1,3}/,wV=/\d{1,4}/,mR=/[+-]?\d{1,6}/,GS=/\d+/,gR=/[+-]?\d+/,iFe=/Z|[+-]\d\d:?\d\d/gi,yR=/Z|[+-]\d\d(?::?\d\d)?/gi,aFe=/[+-]?\d+(\.\d{1,3})?/,uO=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,YS=/^[1-9]\d?/,SV=/^([1-9]\d|\d)/,QD;QD={};function hr(e,t,n){QD[e]=mg(t)?t:function(r,i){return r&&n?n:t}}function oFe(e,t){return wa(QD,e)?QD[e](t._strict,t._locale):new RegExp(sFe(e))}function sFe(e){return By(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,r,i,s){return n||r||i||s}))}function By(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Gh(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Ki(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=Gh(t)),n}var kj={};function Qa(e,t){var n,r=t,i;for(typeof e=="string"&&(e=[e]),n_(t)&&(r=function(s,f){f[t]=Ki(s)}),i=e.length,n=0;n<i;n++)kj[e[n]]=r}function cO(e,t){Qa(e,function(n,r,i,s){i._w=i._w||{},t(n,i._w,i,s)})}function lFe(e,t,n){t!=null&&wa(kj,e)&&kj[e](t,n._a,n,e)}function _R(e){return e%4===0&&e%100!==0||e%400===0}var Du=0,Iy=1,$m=2,_l=3,gp=4,Py=5,Gb=6,uFe=7,cFe=8;zr("Y",0,0,function(){var e=this.year();return e<=9999?ug(e,4):"+"+e});zr(0,["YY",2],0,function(){return this.year()%100});zr(0,["YYYY",4],0,"year");zr(0,["YYYYY",5],0,"year");zr(0,["YYYYYY",6,!0],0,"year");hr("Y",gR);hr("YY",No,ih);hr("YYYY",wV,xV);hr("YYYYY",mR,dR);hr("YYYYYY",mR,dR);Qa(["YYYYY","YYYYYY"],Du);Qa("YYYY",function(e,t){t[Du]=e.length===2?Sn.parseTwoDigitYear(e):Ki(e)});Qa("YY",function(e,t){t[Du]=Sn.parseTwoDigitYear(e)});Qa("Y",function(e,t){t[Du]=parseInt(e,10)});function v2(e){return _R(e)?366:365}Sn.parseTwoDigitYear=function(e){return Ki(e)+(Ki(e)>68?1900:2e3)};var hce=WS("FullYear",!0);function fFe(){return _R(this.year())}function WS(e,t){return function(n){return n!=null?(dce(this,e,n),Sn.updateOffset(this,t),this):B2(this,e)}}function B2(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function dce(e,t,n){var r,i,s,f,a;if(!(!e.isValid()||isNaN(n))){switch(r=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}s=n,f=e.month(),a=e.date(),a=a===29&&f===1&&!_R(s)?28:a,i?r.setUTCFullYear(s,f,a):r.setFullYear(s,f,a)}}function hFe(e){return e=cd(e),mg(this[e])?this[e]():this}function dFe(e,t){if(typeof e=="object"){e=bV(e);var n=rFe(e),r,i=n.length;for(r=0;r<i;r++)this[n[r].unit](e[n[r].unit])}else if(e=cd(e),mg(this[e]))return this[e](t);return this}function pFe(e,t){return(e%t+t)%t}var Ps;Array.prototype.indexOf?Ps=Array.prototype.indexOf:Ps=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function TV(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=pFe(t,12);return e+=(t-n)/12,n===1?_R(e)?29:28:31-n%7%2}zr("M",["MM",2],"Mo",function(){return this.month()+1});zr("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});zr("MMMM",0,0,function(e){return this.localeData().months(this,e)});hr("M",No,YS);hr("MM",No,ih);hr("MMM",function(e,t){return t.monthsShortRegex(e)});hr("MMMM",function(e,t){return t.monthsRegex(e)});Qa(["M","MM"],function(e,t){t[Iy]=Ki(e)-1});Qa(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[Iy]=i:Mi(n).invalidMonth=e});var mFe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pce="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mce=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,gFe=uO,yFe=uO;function _Fe(e,t){return e?wp(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||mce).test(t)?"format":"standalone"][e.month()]:wp(this._months)?this._months:this._months.standalone}function vFe(e,t){return e?wp(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[mce.test(t)?"format":"standalone"][e.month()]:wp(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function bFe(e,t,n){var r,i,s,f=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=pg([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?t==="MMM"?(i=Ps.call(this._shortMonthsParse,f),i!==-1?i:null):(i=Ps.call(this._longMonthsParse,f),i!==-1?i:null):t==="MMM"?(i=Ps.call(this._shortMonthsParse,f),i!==-1?i:(i=Ps.call(this._longMonthsParse,f),i!==-1?i:null)):(i=Ps.call(this._longMonthsParse,f),i!==-1?i:(i=Ps.call(this._shortMonthsParse,f),i!==-1?i:null))}function xFe(e,t,n){var r,i,s;if(this._monthsParseExact)return bFe.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=pg([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function gce(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Ki(t);else if(t=e.localeData().monthsParse(t),!n_(t))return e}var n=t,r=e.date();return r=r<29?r:Math.min(r,TV(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function yce(e){return e!=null?(gce(this,e),Sn.updateOffset(this,!0),this):B2(this,"Month")}function wFe(){return TV(this.year(),this.month())}function SFe(e){return this._monthsParseExact?(wa(this,"_monthsRegex")||_ce.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(wa(this,"_monthsShortRegex")||(this._monthsShortRegex=gFe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function TFe(e){return this._monthsParseExact?(wa(this,"_monthsRegex")||_ce.call(this),e?this._monthsStrictRegex:this._monthsRegex):(wa(this,"_monthsRegex")||(this._monthsRegex=yFe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function _ce(){function e(p,y){return y.length-p.length}var t=[],n=[],r=[],i,s,f,a;for(i=0;i<12;i++)s=pg([2e3,i]),f=By(this.monthsShort(s,"")),a=By(this.months(s,"")),t.push(f),n.push(a),r.push(a),r.push(f);t.sort(e),n.sort(e),r.sort(e),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function EFe(e,t,n,r,i,s,f){var a;return e<100&&e>=0?(a=new Date(e+400,t,n,r,i,s,f),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,n,r,i,s,f),a}function j2(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function JD(e,t,n){var r=7+t-n,i=(7+j2(e,0,r).getUTCDay()-t)%7;return-i+r-1}function vce(e,t,n,r,i){var s=(7+n-r)%7,f=JD(e,r,i),a=1+7*(t-1)+s+f,p,y;return a<=0?(p=e-1,y=v2(p)+a):a>v2(e)?(p=e+1,y=a-v2(e)):(p=e,y=a),{year:p,dayOfYear:y}}function U2(e,t,n){var r=JD(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,s,f;return i<1?(f=e.year()-1,s=i+jy(f,t,n)):i>jy(e.year(),t,n)?(s=i-jy(e.year(),t,n),f=e.year()+1):(f=e.year(),s=i),{week:s,year:f}}function jy(e,t,n){var r=JD(e,t,n),i=JD(e+1,t,n);return(v2(e)-r+i)/7}zr("w",["ww",2],"wo","week");zr("W",["WW",2],"Wo","isoWeek");hr("w",No,YS);hr("ww",No,ih);hr("W",No,YS);hr("WW",No,ih);cO(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=Ki(e)});function AFe(e){return U2(e,this._week.dow,this._week.doy).week}var OFe={dow:0,doy:6};function CFe(){return this._week.dow}function MFe(){return this._week.doy}function DFe(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function IFe(e){var t=U2(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}zr("d",0,"do","day");zr("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});zr("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});zr("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});zr("e",0,0,"weekday");zr("E",0,0,"isoWeekday");hr("d",No);hr("e",No);hr("E",No);hr("dd",function(e,t){return t.weekdaysMinRegex(e)});hr("ddd",function(e,t){return t.weekdaysShortRegex(e)});hr("dddd",function(e,t){return t.weekdaysRegex(e)});cO(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);i!=null?t.d=i:Mi(n).invalidWeekday=e});cO(["d","e","E"],function(e,t,n,r){t[r]=Ki(e)});function PFe(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function RFe(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function EV(e,t){return e.slice(t,7).concat(e.slice(0,t))}var kFe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),bce="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),LFe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),zFe=uO,NFe=uO,FFe=uO;function BFe(e,t){var n=wp(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?EV(n,this._week.dow):e?n[e.day()]:n}function jFe(e){return e===!0?EV(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function UFe(e){return e===!0?EV(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function $Fe(e,t,n){var r,i,s,f=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=pg([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?t==="dddd"?(i=Ps.call(this._weekdaysParse,f),i!==-1?i:null):t==="ddd"?(i=Ps.call(this._shortWeekdaysParse,f),i!==-1?i:null):(i=Ps.call(this._minWeekdaysParse,f),i!==-1?i:null):t==="dddd"?(i=Ps.call(this._weekdaysParse,f),i!==-1||(i=Ps.call(this._shortWeekdaysParse,f),i!==-1)?i:(i=Ps.call(this._minWeekdaysParse,f),i!==-1?i:null)):t==="ddd"?(i=Ps.call(this._shortWeekdaysParse,f),i!==-1||(i=Ps.call(this._weekdaysParse,f),i!==-1)?i:(i=Ps.call(this._minWeekdaysParse,f),i!==-1?i:null)):(i=Ps.call(this._minWeekdaysParse,f),i!==-1||(i=Ps.call(this._weekdaysParse,f),i!==-1)?i:(i=Ps.call(this._shortWeekdaysParse,f),i!==-1?i:null))}function VFe(e,t,n){var r,i,s;if(this._weekdaysParseExact)return $Fe.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=pg([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function qFe(e){if(!this.isValid())return e!=null?this:NaN;var t=B2(this,"Day");return e!=null?(e=PFe(e,this.localeData()),this.add(e-t,"d")):t}function HFe(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function GFe(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=RFe(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function YFe(e){return this._weekdaysParseExact?(wa(this,"_weekdaysRegex")||AV.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(wa(this,"_weekdaysRegex")||(this._weekdaysRegex=zFe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function WFe(e){return this._weekdaysParseExact?(wa(this,"_weekdaysRegex")||AV.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(wa(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=NFe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function XFe(e){return this._weekdaysParseExact?(wa(this,"_weekdaysRegex")||AV.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(wa(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=FFe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function AV(){function e(S,E){return E.length-S.length}var t=[],n=[],r=[],i=[],s,f,a,p,y;for(s=0;s<7;s++)f=pg([2e3,1]).day(s),a=By(this.weekdaysMin(f,"")),p=By(this.weekdaysShort(f,"")),y=By(this.weekdays(f,"")),t.push(a),n.push(p),r.push(y),i.push(a),i.push(p),i.push(y);t.sort(e),n.sort(e),r.sort(e),i.sort(e),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function OV(){return this.hours()%12||12}function ZFe(){return this.hours()||24}zr("H",["HH",2],0,"hour");zr("h",["hh",2],0,OV);zr("k",["kk",2],0,ZFe);zr("hmm",0,0,function(){return""+OV.apply(this)+ug(this.minutes(),2)});zr("hmmss",0,0,function(){return""+OV.apply(this)+ug(this.minutes(),2)+ug(this.seconds(),2)});zr("Hmm",0,0,function(){return""+this.hours()+ug(this.minutes(),2)});zr("Hmmss",0,0,function(){return""+this.hours()+ug(this.minutes(),2)+ug(this.seconds(),2)});function xce(e,t){zr(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}xce("a",!0);xce("A",!1);function wce(e,t){return t._meridiemParse}hr("a",wce);hr("A",wce);hr("H",No,SV);hr("h",No,YS);hr("k",No,YS);hr("HH",No,ih);hr("hh",No,ih);hr("kk",No,ih);hr("hmm",cce);hr("hmmss",fce);hr("Hmm",cce);hr("Hmmss",fce);Qa(["H","HH"],_l);Qa(["k","kk"],function(e,t,n){var r=Ki(e);t[_l]=r===24?0:r});Qa(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});Qa(["h","hh"],function(e,t,n){t[_l]=Ki(e),Mi(n).bigHour=!0});Qa("hmm",function(e,t,n){var r=e.length-2;t[_l]=Ki(e.substr(0,r)),t[gp]=Ki(e.substr(r)),Mi(n).bigHour=!0});Qa("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[_l]=Ki(e.substr(0,r)),t[gp]=Ki(e.substr(r,2)),t[Py]=Ki(e.substr(i)),Mi(n).bigHour=!0});Qa("Hmm",function(e,t,n){var r=e.length-2;t[_l]=Ki(e.substr(0,r)),t[gp]=Ki(e.substr(r))});Qa("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[_l]=Ki(e.substr(0,r)),t[gp]=Ki(e.substr(r,2)),t[Py]=Ki(e.substr(i))});function KFe(e){return(e+"").toLowerCase().charAt(0)==="p"}var QFe=/[ap]\.?m?\.?/i,JFe=WS("Hours",!0);function eBe(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var Sce={calendar:$Ne,longDateFormat:GNe,invalidDate:WNe,ordinal:ZNe,dayOfMonthOrdinalParse:KNe,relativeTime:JNe,months:mFe,monthsShort:pce,week:OFe,weekdays:kFe,weekdaysMin:LFe,weekdaysShort:bce,meridiemParse:QFe},Ho={},PE={},$2;function tBe(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function CX(e){return e&&e.toLowerCase().replace("_","-")}function nBe(e){for(var t=0,n,r,i,s;t<e.length;){for(s=CX(e[t]).split("-"),n=s.length,r=CX(e[t+1]),r=r?r.split("-"):null;n>0;){if(i=vR(s.slice(0,n).join("-")),i)return i;if(r&&r.length>=n&&tBe(s,r)>=n-1)break;n--}t++}return $2}function rBe(e){return!!(e&&e.match("^[^/\\\\]*$"))}function vR(e){var t=null,n;if(Ho[e]===void 0&&typeof Mu<"u"&&Mu&&Mu.exports&&rBe(e))try{t=$2._abbr,n=require,n("./locale/"+e),qv(t)}catch{Ho[e]=null}return Ho[e]}function qv(e,t){var n;return e&&(Zc(t)?n=m_(e):n=CV(e,t),n?$2=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),$2._abbr}function CV(e,t){if(t!==null){var n,r=Sce;if(t.abbr=e,Ho[e]!=null)oce("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Ho[e]._config;else if(t.parentLocale!=null)if(Ho[t.parentLocale]!=null)r=Ho[t.parentLocale]._config;else if(n=vR(t.parentLocale),n!=null)r=n._config;else return PE[t.parentLocale]||(PE[t.parentLocale]=[]),PE[t.parentLocale].push({name:e,config:t}),null;return Ho[e]=new _V(Pj(r,t)),PE[e]&&PE[e].forEach(function(i){CV(i.name,i.config)}),qv(e),Ho[e]}else return delete Ho[e],null}function iBe(e,t){if(t!=null){var n,r,i=Sce;Ho[e]!=null&&Ho[e].parentLocale!=null?Ho[e].set(Pj(Ho[e]._config,t)):(r=vR(e),r!=null&&(i=r._config),t=Pj(i,t),r==null&&(t.abbr=e),n=new _V(t),n.parentLocale=Ho[e],Ho[e]=n),qv(e)}else Ho[e]!=null&&(Ho[e].parentLocale!=null?(Ho[e]=Ho[e].parentLocale,e===qv()&&qv(e)):Ho[e]!=null&&delete Ho[e]);return Ho[e]}function m_(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return $2;if(!wp(e)){if(t=vR(e),t)return t;e=[e]}return nBe(e)}function aBe(){return Rj(Ho)}function MV(e){var t,n=e._a;return n&&Mi(e).overflow===-2&&(t=n[Iy]<0||n[Iy]>11?Iy:n[$m]<1||n[$m]>TV(n[Du],n[Iy])?$m:n[_l]<0||n[_l]>24||n[_l]===24&&(n[gp]!==0||n[Py]!==0||n[Gb]!==0)?_l:n[gp]<0||n[gp]>59?gp:n[Py]<0||n[Py]>59?Py:n[Gb]<0||n[Gb]>999?Gb:-1,Mi(e)._overflowDayOfYear&&(t<Du||t>$m)&&(t=$m),Mi(e)._overflowWeeks&&t===-1&&(t=uFe),Mi(e)._overflowWeekday&&t===-1&&(t=cFe),Mi(e).overflow=t),e}var oBe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sBe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,lBe=/Z|[+-]\d\d(?::?\d\d)?/,yM=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],iz=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],uBe=/^\/?Date\((-?\d+)/i,cBe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,fBe={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Tce(e){var t,n,r=e._i,i=oBe.exec(r)||sBe.exec(r),s,f,a,p,y=yM.length,S=iz.length;if(i){for(Mi(e).iso=!0,t=0,n=y;t<n;t++)if(yM[t][1].exec(i[1])){f=yM[t][0],s=yM[t][2]!==!1;break}if(f==null){e._isValid=!1;return}if(i[3]){for(t=0,n=S;t<n;t++)if(iz[t][1].exec(i[3])){a=(i[2]||" ")+iz[t][0];break}if(a==null){e._isValid=!1;return}}if(!s&&a!=null){e._isValid=!1;return}if(i[4])if(lBe.exec(i[4]))p="Z";else{e._isValid=!1;return}e._f=f+(a||"")+(p||""),IV(e)}else e._isValid=!1}function hBe(e,t,n,r,i,s){var f=[dBe(e),pce.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return s&&f.push(parseInt(s,10)),f}function dBe(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function pBe(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function mBe(e,t,n){if(e){var r=bce.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(r!==i)return Mi(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function gBe(e,t,n){if(e)return fBe[e];if(t)return 0;var r=parseInt(n,10),i=r%100,s=(r-i)/100;return s*60+i}function Ece(e){var t=cBe.exec(pBe(e._i)),n;if(t){if(n=hBe(t[4],t[3],t[2],t[5],t[6],t[7]),!mBe(t[1],n,e))return;e._a=n,e._tzm=gBe(t[8],t[9],t[10]),e._d=j2.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Mi(e).rfc2822=!0}else e._isValid=!1}function yBe(e){var t=uBe.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(Tce(e),e._isValid===!1)delete e._isValid;else return;if(Ece(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Sn.createFromInputFallback(e)}Sn.createFromInputFallback=ud("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function mw(e,t,n){return e??t??n}function _Be(e){var t=new Date(Sn.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function DV(e){var t,n,r=[],i,s,f;if(!e._d){for(i=_Be(e),e._w&&e._a[$m]==null&&e._a[Iy]==null&&vBe(e),e._dayOfYear!=null&&(f=mw(e._a[Du],i[Du]),(e._dayOfYear>v2(f)||e._dayOfYear===0)&&(Mi(e)._overflowDayOfYear=!0),n=j2(f,0,e._dayOfYear),e._a[Iy]=n.getUTCMonth(),e._a[$m]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[_l]===24&&e._a[gp]===0&&e._a[Py]===0&&e._a[Gb]===0&&(e._nextDay=!0,e._a[_l]=0),e._d=(e._useUTC?j2:EFe).apply(null,r),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[_l]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==s&&(Mi(e).weekdayMismatch=!0)}}function vBe(e){var t,n,r,i,s,f,a,p,y;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,f=4,n=mw(t.GG,e._a[Du],U2(Lo(),1,4).year),r=mw(t.W,1),i=mw(t.E,1),(i<1||i>7)&&(p=!0)):(s=e._locale._week.dow,f=e._locale._week.doy,y=U2(Lo(),s,f),n=mw(t.gg,e._a[Du],y.year),r=mw(t.w,y.week),t.d!=null?(i=t.d,(i<0||i>6)&&(p=!0)):t.e!=null?(i=t.e+s,(t.e<0||t.e>6)&&(p=!0)):i=s),r<1||r>jy(n,s,f)?Mi(e)._overflowWeeks=!0:p!=null?Mi(e)._overflowWeekday=!0:(a=vce(n,r,i,s,f),e._a[Du]=a.year,e._dayOfYear=a.dayOfYear)}Sn.ISO_8601=function(){};Sn.RFC_2822=function(){};function IV(e){if(e._f===Sn.ISO_8601){Tce(e);return}if(e._f===Sn.RFC_2822){Ece(e);return}e._a=[],Mi(e).empty=!0;var t=""+e._i,n,r,i,s,f,a=t.length,p=0,y,S;for(i=sce(e._f,e._locale).match(vV)||[],S=i.length,n=0;n<S;n++)s=i[n],r=(t.match(oFe(s,e))||[])[0],r&&(f=t.substr(0,t.indexOf(r)),f.length>0&&Mi(e).unusedInput.push(f),t=t.slice(t.indexOf(r)+r.length),p+=r.length),Mw[s]?(r?Mi(e).empty=!1:Mi(e).unusedTokens.push(s),lFe(s,r,e)):e._strict&&!r&&Mi(e).unusedTokens.push(s);Mi(e).charsLeftOver=a-p,t.length>0&&Mi(e).unusedInput.push(t),e._a[_l]<=12&&Mi(e).bigHour===!0&&e._a[_l]>0&&(Mi(e).bigHour=void 0),Mi(e).parsedDateParts=e._a.slice(0),Mi(e).meridiem=e._meridiem,e._a[_l]=bBe(e._locale,e._a[_l],e._meridiem),y=Mi(e).era,y!==null&&(e._a[Du]=e._locale.erasConvertYear(y,e._a[Du])),DV(e),MV(e)}function bBe(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0)),t)}function xBe(e){var t,n,r,i,s,f,a=!1,p=e._f.length;if(p===0){Mi(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<p;i++)s=0,f=!1,t=yV({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],IV(t),gV(t)&&(f=!0),s+=Mi(t).charsLeftOver,s+=Mi(t).unusedTokens.length*10,Mi(t).score=s,a?s<r&&(r=s,n=t):(r==null||s<r||f)&&(r=s,n=t,f&&(a=!0));Bv(e,n||t)}function wBe(e){if(!e._d){var t=bV(e._i),n=t.day===void 0?t.date:t.day;e._a=ice([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(r){return r&&parseInt(r,10)}),DV(e)}}function SBe(e){var t=new lO(MV(Ace(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Ace(e){var t=e._i,n=e._f;return e._locale=e._locale||m_(e._l),t===null||n===void 0&&t===""?hR({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Sp(t)?new lO(MV(t)):(sO(t)?e._d=t:wp(n)?xBe(e):n?IV(e):TBe(e),gV(e)||(e._d=null),e))}function TBe(e){var t=e._i;Zc(t)?e._d=new Date(Sn.now()):sO(t)?e._d=new Date(t.valueOf()):typeof t=="string"?yBe(e):wp(t)?(e._a=ice(t.slice(0),function(n){return parseInt(n,10)}),DV(e)):nx(t)?wBe(e):n_(t)?e._d=new Date(t):Sn.createFromInputFallback(e)}function Oce(e,t,n,r,i){var s={};return(t===!0||t===!1)&&(r=t,t=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(nx(e)&&mV(e)||wp(e)&&e.length===0)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,SBe(s)}function Lo(e,t,n,r){return Oce(e,t,n,r,!1)}var EBe=ud("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Lo.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:hR()}),ABe=ud("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Lo.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:hR()});function Cce(e,t){var n,r;if(t.length===1&&wp(t[0])&&(t=t[0]),!t.length)return Lo();for(n=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](n))&&(n=t[r]);return n}function OBe(){var e=[].slice.call(arguments,0);return Cce("isBefore",e)}function CBe(){var e=[].slice.call(arguments,0);return Cce("isAfter",e)}var MBe=function(){return Date.now?Date.now():+new Date},RE=["year","quarter","month","week","day","hour","minute","second","millisecond"];function DBe(e){var t,n=!1,r,i=RE.length;for(t in e)if(wa(e,t)&&!(Ps.call(RE,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(r=0;r<i;++r)if(e[RE[r]]){if(n)return!1;parseFloat(e[RE[r]])!==Ki(e[RE[r]])&&(n=!0)}return!0}function IBe(){return this._isValid}function PBe(){return Dp(NaN)}function bR(e){var t=bV(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||t.isoWeek||0,f=t.day||0,a=t.hour||0,p=t.minute||0,y=t.second||0,S=t.millisecond||0;this._isValid=DBe(t),this._milliseconds=+S+y*1e3+p*6e4+a*1e3*60*60,this._days=+f+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=m_(),this._bubble()}function cD(e){return e instanceof bR}function Lj(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function RBe(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,f;for(f=0;f<r;f++)Ki(e[f])!==Ki(t[f])&&s++;return s+i}function Mce(e,t){zr(e,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+ug(~~(n/60),2)+t+ug(~~n%60,2)})}Mce("Z",":");Mce("ZZ","");hr("Z",yR);hr("ZZ",yR);Qa(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=PV(yR,e)});var kBe=/([\+\-]|\d\d)/gi;function PV(e,t){var n=(t||"").match(e),r,i,s;return n===null?null:(r=n[n.length-1]||[],i=(r+"").match(kBe)||["-",0,0],s=+(i[1]*60)+Ki(i[2]),s===0?0:i[0]==="+"?s:-s)}function RV(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(Sp(e)||sO(e)?e.valueOf():Lo(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),Sn.updateOffset(n,!1),n):Lo(e).local()}function zj(e){return-Math.round(e._d.getTimezoneOffset())}Sn.updateOffset=function(){};function LBe(e,t,n){var r=this._offset||0,i;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=PV(yR,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(i=zj(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?Pce(this,Dp(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Sn.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:zj(this)}function zBe(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function NBe(e){return this.utcOffset(0,e)}function FBe(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(zj(this),"m")),this}function BBe(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=PV(iFe,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function jBe(e){return this.isValid()?(e=e?Lo(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function UBe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function $Be(){if(!Zc(this._isDSTShifted))return this._isDSTShifted;var e={},t;return yV(e,this),e=Ace(e),e._a?(t=e._isUTC?pg(e._a):Lo(e._a),this._isDSTShifted=this.isValid()&&RBe(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function VBe(){return this.isValid()?!this._isUTC:!1}function qBe(){return this.isValid()?this._isUTC:!1}function Dce(){return this.isValid()?this._isUTC&&this._offset===0:!1}var HBe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,GBe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Dp(e,t){var n=e,r=null,i,s,f;return cD(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:n_(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(r=HBe.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:Ki(r[$m])*i,h:Ki(r[_l])*i,m:Ki(r[gp])*i,s:Ki(r[Py])*i,ms:Ki(Lj(r[Gb]*1e3))*i}):(r=GBe.exec(e))?(i=r[1]==="-"?-1:1,n={y:Pb(r[2],i),M:Pb(r[3],i),w:Pb(r[4],i),d:Pb(r[5],i),h:Pb(r[6],i),m:Pb(r[7],i),s:Pb(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(f=YBe(Lo(n.from),Lo(n.to)),n={},n.ms=f.milliseconds,n.M=f.months),s=new bR(n),cD(e)&&wa(e,"_locale")&&(s._locale=e._locale),cD(e)&&wa(e,"_isValid")&&(s._isValid=e._isValid),s}Dp.fn=bR.prototype;Dp.invalid=PBe;function Pb(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function MX(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function YBe(e,t){var n;return e.isValid()&&t.isValid()?(t=RV(t,e),e.isBefore(t)?n=MX(e,t):(n=MX(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ice(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(oce(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),i=Dp(n,r),Pce(this,i,e),this}}function Pce(e,t,n,r){var i=t._milliseconds,s=Lj(t._days),f=Lj(t._months);e.isValid()&&(r=r??!0,f&&gce(e,B2(e,"Month")+f*n),s&&dce(e,"Date",B2(e,"Date")+s*n),i&&e._d.setTime(e._d.valueOf()+i*n),r&&Sn.updateOffset(e,s||f))}var WBe=Ice(1,"add"),XBe=Ice(-1,"subtract");function Rce(e){return typeof e=="string"||e instanceof String}function ZBe(e){return Sp(e)||sO(e)||Rce(e)||n_(e)||QBe(e)||KBe(e)||e===null||e===void 0}function KBe(e){var t=nx(e)&&!mV(e),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,s,f=r.length;for(i=0;i<f;i+=1)s=r[i],n=n||wa(e,s);return t&&n}function QBe(e){var t=wp(e),n=!1;return t&&(n=e.filter(function(r){return!n_(r)&&Rce(e)}).length===0),t&&n}function JBe(e){var t=nx(e)&&!mV(e),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,s;for(i=0;i<r.length;i+=1)s=r[i],n=n||wa(e,s);return t&&n}function e5e(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function t5e(e,t){arguments.length===1&&(arguments[0]?ZBe(arguments[0])?(e=arguments[0],t=void 0):JBe(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Lo(),r=RV(n,this).startOf("day"),i=Sn.calendarFormat(this,r)||"sameElse",s=t&&(mg(t[i])?t[i].call(this,n):t[i]);return this.format(s||this.localeData().calendar(i,this,Lo(n)))}function n5e(){return new lO(this)}function r5e(e,t){var n=Sp(e)?e:Lo(e);return this.isValid()&&n.isValid()?(t=cd(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function i5e(e,t){var n=Sp(e)?e:Lo(e);return this.isValid()&&n.isValid()?(t=cd(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function a5e(e,t,n,r){var i=Sp(e)?e:Lo(e),s=Sp(t)?t:Lo(t);return this.isValid()&&i.isValid()&&s.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(r[1]===")"?this.isBefore(s,n):!this.isAfter(s,n))):!1}function o5e(e,t){var n=Sp(e)?e:Lo(e),r;return this.isValid()&&n.isValid()?(t=cd(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf())):!1}function s5e(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function l5e(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function u5e(e,t,n){var r,i,s;if(!this.isValid())return NaN;if(r=RV(e,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,t=cd(t),t){case"year":s=fD(this,r)/12;break;case"month":s=fD(this,r);break;case"quarter":s=fD(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:Gh(s)}function fD(e,t){if(e.date()<t.date())return-fD(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)||0}Sn.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Sn.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function c5e(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function f5e(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?uD(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):mg(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",uD(n,"Z")):uD(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function h5e(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,r,i,s;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",s=t+'[")]',this.format(n+r+i+s)}function d5e(e){e||(e=this.isUtc()?Sn.defaultFormatUtc:Sn.defaultFormat);var t=uD(this,e);return this.localeData().postformat(t)}function p5e(e,t){return this.isValid()&&(Sp(e)&&e.isValid()||Lo(e).isValid())?Dp({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function m5e(e){return this.from(Lo(),e)}function g5e(e,t){return this.isValid()&&(Sp(e)&&e.isValid()||Lo(e).isValid())?Dp({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function y5e(e){return this.to(Lo(),e)}function kce(e){var t;return e===void 0?this._locale._abbr:(t=m_(e),t!=null&&(this._locale=t),this)}var Lce=ud("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function zce(){return this._locale}var eI=1e3,Dw=60*eI,tI=60*Dw,Nce=(365*400+97)*24*tI;function Iw(e,t){return(e%t+t)%t}function Fce(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-Nce:new Date(e,t,n).valueOf()}function Bce(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-Nce:Date.UTC(e,t,n)}function _5e(e){var t,n;if(e=cd(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Bce:Fce,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Iw(t+(this._isUTC?0:this.utcOffset()*Dw),tI);break;case"minute":t=this._d.valueOf(),t-=Iw(t,Dw);break;case"second":t=this._d.valueOf(),t-=Iw(t,eI);break}return this._d.setTime(t),Sn.updateOffset(this,!0),this}function v5e(e){var t,n;if(e=cd(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Bce:Fce,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=tI-Iw(t+(this._isUTC?0:this.utcOffset()*Dw),tI)-1;break;case"minute":t=this._d.valueOf(),t+=Dw-Iw(t,Dw)-1;break;case"second":t=this._d.valueOf(),t+=eI-Iw(t,eI)-1;break}return this._d.setTime(t),Sn.updateOffset(this,!0),this}function b5e(){return this._d.valueOf()-(this._offset||0)*6e4}function x5e(){return Math.floor(this.valueOf()/1e3)}function w5e(){return new Date(this.valueOf())}function S5e(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function T5e(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function E5e(){return this.isValid()?this.toISOString():null}function A5e(){return gV(this)}function O5e(){return Bv({},Mi(this))}function C5e(){return Mi(this).overflow}function M5e(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}zr("N",0,0,"eraAbbr");zr("NN",0,0,"eraAbbr");zr("NNN",0,0,"eraAbbr");zr("NNNN",0,0,"eraName");zr("NNNNN",0,0,"eraNarrow");zr("y",["y",1],"yo","eraYear");zr("y",["yy",2],0,"eraYear");zr("y",["yyy",3],0,"eraYear");zr("y",["yyyy",4],0,"eraYear");hr("N",kV);hr("NN",kV);hr("NNN",kV);hr("NNNN",j5e);hr("NNNNN",U5e);Qa(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?Mi(n).era=i:Mi(n).invalidEra=e});hr("y",GS);hr("yy",GS);hr("yyy",GS);hr("yyyy",GS);hr("yo",$5e);Qa(["y","yy","yyy","yyyy"],Du);Qa(["yo"],function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Du]=n._locale.eraYearOrdinalParse(e,i):t[Du]=parseInt(e,10)});function D5e(e,t){var n,r,i,s=this._eras||m_("en")._eras;for(n=0,r=s.length;n<r;++n){switch(typeof s[n].since){case"string":i=Sn(s[n].since).startOf("day"),s[n].since=i.valueOf();break}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":i=Sn(s[n].until).startOf("day").valueOf(),s[n].until=i.valueOf();break}}return s}function I5e(e,t,n){var r,i,s=this.eras(),f,a,p;for(e=e.toUpperCase(),r=0,i=s.length;r<i;++r)if(f=s[r].name.toUpperCase(),a=s[r].abbr.toUpperCase(),p=s[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return s[r];break;case"NNNN":if(f===e)return s[r];break;case"NNNNN":if(p===e)return s[r];break}else if([f,a,p].indexOf(e)>=0)return s[r]}function P5e(e,t){var n=e.since<=e.until?1:-1;return t===void 0?Sn(e.since).year():Sn(e.since).year()+(t-e.offset)*n}function R5e(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].name;return""}function k5e(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].narrow;return""}function L5e(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].abbr;return""}function z5e(){var e,t,n,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=i[e].since<=i[e].until?1:-1,r=this.clone().startOf("day").valueOf(),i[e].since<=r&&r<=i[e].until||i[e].until<=r&&r<=i[e].since)return(this.year()-Sn(i[e].since).year())*n+i[e].offset;return this.year()}function N5e(e){return wa(this,"_erasNameRegex")||LV.call(this),e?this._erasNameRegex:this._erasRegex}function F5e(e){return wa(this,"_erasAbbrRegex")||LV.call(this),e?this._erasAbbrRegex:this._erasRegex}function B5e(e){return wa(this,"_erasNarrowRegex")||LV.call(this),e?this._erasNarrowRegex:this._erasRegex}function kV(e,t){return t.erasAbbrRegex(e)}function j5e(e,t){return t.erasNameRegex(e)}function U5e(e,t){return t.erasNarrowRegex(e)}function $5e(e,t){return t._eraYearOrdinalRegex||GS}function LV(){var e=[],t=[],n=[],r=[],i,s,f,a,p,y=this.eras();for(i=0,s=y.length;i<s;++i)f=By(y[i].name),a=By(y[i].abbr),p=By(y[i].narrow),t.push(f),e.push(a),n.push(p),r.push(f),r.push(a),r.push(p);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}zr(0,["gg",2],0,function(){return this.weekYear()%100});zr(0,["GG",2],0,function(){return this.isoWeekYear()%100});function xR(e,t){zr(0,[e,e.length],0,t)}xR("gggg","weekYear");xR("ggggg","weekYear");xR("GGGG","isoWeekYear");xR("GGGGG","isoWeekYear");hr("G",gR);hr("g",gR);hr("GG",No,ih);hr("gg",No,ih);hr("GGGG",wV,xV);hr("gggg",wV,xV);hr("GGGGG",mR,dR);hr("ggggg",mR,dR);cO(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=Ki(e)});cO(["gg","GG"],function(e,t,n,r){t[r]=Sn.parseTwoDigitYear(e)});function V5e(e){return jce.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function q5e(e){return jce.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function H5e(){return jy(this.year(),1,4)}function G5e(){return jy(this.isoWeekYear(),1,4)}function Y5e(){var e=this.localeData()._week;return jy(this.year(),e.dow,e.doy)}function W5e(){var e=this.localeData()._week;return jy(this.weekYear(),e.dow,e.doy)}function jce(e,t,n,r,i){var s;return e==null?U2(this,r,i).year:(s=jy(e,r,i),t>s&&(t=s),X5e.call(this,e,t,n,r,i))}function X5e(e,t,n,r,i){var s=vce(e,t,n,r,i),f=j2(s.year,0,s.dayOfYear);return this.year(f.getUTCFullYear()),this.month(f.getUTCMonth()),this.date(f.getUTCDate()),this}zr("Q",0,"Qo","quarter");hr("Q",lce);Qa("Q",function(e,t){t[Iy]=(Ki(e)-1)*3});function Z5e(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}zr("D",["DD",2],"Do","date");hr("D",No,YS);hr("DD",No,ih);hr("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Qa(["D","DD"],$m);Qa("Do",function(e,t){t[$m]=Ki(e.match(No)[0])});var Uce=WS("Date",!0);zr("DDD",["DDDD",3],"DDDo","dayOfYear");hr("DDD",pR);hr("DDDD",uce);Qa(["DDD","DDDD"],function(e,t,n){n._dayOfYear=Ki(e)});function K5e(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}zr("m",["mm",2],0,"minute");hr("m",No,SV);hr("mm",No,ih);Qa(["m","mm"],gp);var Q5e=WS("Minutes",!1);zr("s",["ss",2],0,"second");hr("s",No,SV);hr("ss",No,ih);Qa(["s","ss"],Py);var J5e=WS("Seconds",!1);zr("S",0,0,function(){return~~(this.millisecond()/100)});zr(0,["SS",2],0,function(){return~~(this.millisecond()/10)});zr(0,["SSS",3],0,"millisecond");zr(0,["SSSS",4],0,function(){return this.millisecond()*10});zr(0,["SSSSS",5],0,function(){return this.millisecond()*100});zr(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});zr(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});zr(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});zr(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});hr("S",pR,lce);hr("SS",pR,ih);hr("SSS",pR,uce);var jv,$ce;for(jv="SSSS";jv.length<=9;jv+="S")hr(jv,GS);function e4e(e,t){t[Gb]=Ki(("0."+e)*1e3)}for(jv="S";jv.length<=9;jv+="S")Qa(jv,e4e);$ce=WS("Milliseconds",!1);zr("z",0,0,"zoneAbbr");zr("zz",0,0,"zoneName");function t4e(){return this._isUTC?"UTC":""}function n4e(){return this._isUTC?"Coordinated Universal Time":""}var Nn=lO.prototype;Nn.add=WBe;Nn.calendar=t5e;Nn.clone=n5e;Nn.diff=u5e;Nn.endOf=v5e;Nn.format=d5e;Nn.from=p5e;Nn.fromNow=m5e;Nn.to=g5e;Nn.toNow=y5e;Nn.get=hFe;Nn.invalidAt=C5e;Nn.isAfter=r5e;Nn.isBefore=i5e;Nn.isBetween=a5e;Nn.isSame=o5e;Nn.isSameOrAfter=s5e;Nn.isSameOrBefore=l5e;Nn.isValid=A5e;Nn.lang=Lce;Nn.locale=kce;Nn.localeData=zce;Nn.max=ABe;Nn.min=EBe;Nn.parsingFlags=O5e;Nn.set=dFe;Nn.startOf=_5e;Nn.subtract=XBe;Nn.toArray=S5e;Nn.toObject=T5e;Nn.toDate=w5e;Nn.toISOString=f5e;Nn.inspect=h5e;typeof Symbol<"u"&&Symbol.for!=null&&(Nn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Nn.toJSON=E5e;Nn.toString=c5e;Nn.unix=x5e;Nn.valueOf=b5e;Nn.creationData=M5e;Nn.eraName=R5e;Nn.eraNarrow=k5e;Nn.eraAbbr=L5e;Nn.eraYear=z5e;Nn.year=hce;Nn.isLeapYear=fFe;Nn.weekYear=V5e;Nn.isoWeekYear=q5e;Nn.quarter=Nn.quarters=Z5e;Nn.month=yce;Nn.daysInMonth=wFe;Nn.week=Nn.weeks=DFe;Nn.isoWeek=Nn.isoWeeks=IFe;Nn.weeksInYear=Y5e;Nn.weeksInWeekYear=W5e;Nn.isoWeeksInYear=H5e;Nn.isoWeeksInISOWeekYear=G5e;Nn.date=Uce;Nn.day=Nn.days=qFe;Nn.weekday=HFe;Nn.isoWeekday=GFe;Nn.dayOfYear=K5e;Nn.hour=Nn.hours=JFe;Nn.minute=Nn.minutes=Q5e;Nn.second=Nn.seconds=J5e;Nn.millisecond=Nn.milliseconds=$ce;Nn.utcOffset=LBe;Nn.utc=NBe;Nn.local=FBe;Nn.parseZone=BBe;Nn.hasAlignedHourOffset=jBe;Nn.isDST=UBe;Nn.isLocal=VBe;Nn.isUtcOffset=qBe;Nn.isUtc=Dce;Nn.isUTC=Dce;Nn.zoneAbbr=t4e;Nn.zoneName=n4e;Nn.dates=ud("dates accessor is deprecated. Use date instead.",Uce);Nn.months=ud("months accessor is deprecated. Use month instead",yce);Nn.years=ud("years accessor is deprecated. Use year instead",hce);Nn.zone=ud("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",zBe);Nn.isDSTShifted=ud("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",$Be);function r4e(e){return Lo(e*1e3)}function i4e(){return Lo.apply(null,arguments).parseZone()}function Vce(e){return e}var Ea=_V.prototype;Ea.calendar=VNe;Ea.longDateFormat=YNe;Ea.invalidDate=XNe;Ea.ordinal=QNe;Ea.preparse=Vce;Ea.postformat=Vce;Ea.relativeTime=eFe;Ea.pastFuture=tFe;Ea.set=UNe;Ea.eras=D5e;Ea.erasParse=I5e;Ea.erasConvertYear=P5e;Ea.erasAbbrRegex=F5e;Ea.erasNameRegex=N5e;Ea.erasNarrowRegex=B5e;Ea.months=_Fe;Ea.monthsShort=vFe;Ea.monthsParse=xFe;Ea.monthsRegex=TFe;Ea.monthsShortRegex=SFe;Ea.week=AFe;Ea.firstDayOfYear=MFe;Ea.firstDayOfWeek=CFe;Ea.weekdays=BFe;Ea.weekdaysMin=UFe;Ea.weekdaysShort=jFe;Ea.weekdaysParse=VFe;Ea.weekdaysRegex=YFe;Ea.weekdaysShortRegex=WFe;Ea.weekdaysMinRegex=XFe;Ea.isPM=KFe;Ea.meridiem=eBe;function nI(e,t,n,r){var i=m_(),s=pg().set(r,t);return i[n](s,e)}function qce(e,t,n){if(n_(e)&&(t=e,e=void 0),e=e||"",t!=null)return nI(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=nI(e,r,n,"month");return i}function zV(e,t,n,r){typeof e=="boolean"?(n_(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,n_(t)&&(n=t,t=void 0),t=t||"");var i=m_(),s=e?i._week.dow:0,f,a=[];if(n!=null)return nI(t,(n+s)%7,r,"day");for(f=0;f<7;f++)a[f]=nI(t,(f+s)%7,r,"day");return a}function a4e(e,t){return qce(e,t,"months")}function o4e(e,t){return qce(e,t,"monthsShort")}function s4e(e,t,n){return zV(e,t,n,"weekdays")}function l4e(e,t,n){return zV(e,t,n,"weekdaysShort")}function u4e(e,t,n){return zV(e,t,n,"weekdaysMin")}qv("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=Ki(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});Sn.lang=ud("moment.lang is deprecated. Use moment.locale instead.",qv);Sn.langData=ud("moment.langData is deprecated. Use moment.localeData instead.",m_);var wy=Math.abs;function c4e(){var e=this._data;return this._milliseconds=wy(this._milliseconds),this._days=wy(this._days),this._months=wy(this._months),e.milliseconds=wy(e.milliseconds),e.seconds=wy(e.seconds),e.minutes=wy(e.minutes),e.hours=wy(e.hours),e.months=wy(e.months),e.years=wy(e.years),this}function Hce(e,t,n,r){var i=Dp(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function f4e(e,t){return Hce(this,e,t,1)}function h4e(e,t){return Hce(this,e,t,-1)}function DX(e){return e<0?Math.floor(e):Math.ceil(e)}function d4e(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,f,a,p;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=DX(Nj(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,i=Gh(e/1e3),r.seconds=i%60,s=Gh(i/60),r.minutes=s%60,f=Gh(s/60),r.hours=f%24,t+=Gh(f/24),p=Gh(Gce(t)),n+=p,t-=DX(Nj(p)),a=Gh(n/12),n%=12,r.days=t,r.months=n,r.years=a,this}function Gce(e){return e*4800/146097}function Nj(e){return e*146097/4800}function p4e(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if(e=cd(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+r/864e5,n=this._months+Gce(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Nj(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function g_(e){return function(){return this.as(e)}}var Yce=g_("ms"),m4e=g_("s"),g4e=g_("m"),y4e=g_("h"),_4e=g_("d"),v4e=g_("w"),b4e=g_("M"),x4e=g_("Q"),w4e=g_("y"),S4e=Yce;function T4e(){return Dp(this)}function E4e(e){return e=cd(e),this.isValid()?this[e+"s"]():NaN}function Fx(e){return function(){return this.isValid()?this._data[e]:NaN}}var A4e=Fx("milliseconds"),O4e=Fx("seconds"),C4e=Fx("minutes"),M4e=Fx("hours"),D4e=Fx("days"),I4e=Fx("months"),P4e=Fx("years");function R4e(){return Gh(this.days()/7)}var Ey=Math.round,bw={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function k4e(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function L4e(e,t,n,r){var i=Dp(e).abs(),s=Ey(i.as("s")),f=Ey(i.as("m")),a=Ey(i.as("h")),p=Ey(i.as("d")),y=Ey(i.as("M")),S=Ey(i.as("w")),E=Ey(i.as("y")),I=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||f<=1&&["m"]||f<n.m&&["mm",f]||a<=1&&["h"]||a<n.h&&["hh",a]||p<=1&&["d"]||p<n.d&&["dd",p];return n.w!=null&&(I=I||S<=1&&["w"]||S<n.w&&["ww",S]),I=I||y<=1&&["M"]||y<n.M&&["MM",y]||E<=1&&["y"]||["yy",E],I[2]=t,I[3]=+e>0,I[4]=r,k4e.apply(null,I)}function z4e(e){return e===void 0?Ey:typeof e=="function"?(Ey=e,!0):!1}function N4e(e,t){return bw[e]===void 0?!1:t===void 0?bw[e]:(bw[e]=t,e==="s"&&(bw.ss=t-1),!0)}function F4e(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=bw,i,s;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(r=Object.assign({},bw,t),t.s!=null&&t.ss==null&&(r.ss=t.s-1)),i=this.localeData(),s=L4e(this,!n,r,i),n&&(s=i.pastFuture(+this,s)),i.postformat(s)}var az=Math.abs;function nw(e){return(e>0)-(e<0)||+e}function wR(){if(!this.isValid())return this.localeData().invalidDate();var e=az(this._milliseconds)/1e3,t=az(this._days),n=az(this._months),r,i,s,f,a=this.asSeconds(),p,y,S,E;return a?(r=Gh(e/60),i=Gh(r/60),e%=60,r%=60,s=Gh(n/12),n%=12,f=e?e.toFixed(3).replace(/\.?0+$/,""):"",p=a<0?"-":"",y=nw(this._months)!==nw(a)?"-":"",S=nw(this._days)!==nw(a)?"-":"",E=nw(this._milliseconds)!==nw(a)?"-":"",p+"P"+(s?y+s+"Y":"")+(n?y+n+"M":"")+(t?S+t+"D":"")+(i||r||e?"T":"")+(i?E+i+"H":"")+(r?E+r+"M":"")+(e?E+f+"S":"")):"P0D"}var ga=bR.prototype;ga.isValid=IBe;ga.abs=c4e;ga.add=f4e;ga.subtract=h4e;ga.as=p4e;ga.asMilliseconds=Yce;ga.asSeconds=m4e;ga.asMinutes=g4e;ga.asHours=y4e;ga.asDays=_4e;ga.asWeeks=v4e;ga.asMonths=b4e;ga.asQuarters=x4e;ga.asYears=w4e;ga.valueOf=S4e;ga._bubble=d4e;ga.clone=T4e;ga.get=E4e;ga.milliseconds=A4e;ga.seconds=O4e;ga.minutes=C4e;ga.hours=M4e;ga.days=D4e;ga.weeks=R4e;ga.months=I4e;ga.years=P4e;ga.humanize=F4e;ga.toISOString=wR;ga.toString=wR;ga.toJSON=wR;ga.locale=kce;ga.localeData=zce;ga.toIsoString=ud("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",wR);ga.lang=Lce;zr("X",0,0,"unix");zr("x",0,0,"valueOf");hr("x",gR);hr("X",aFe);Qa("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});Qa("x",function(e,t,n){n._d=new Date(Ki(e))});//! moment.js
Sn.version="2.30.1";BNe(Lo);Sn.fn=Nn;Sn.min=OBe;Sn.max=CBe;Sn.now=MBe;Sn.utc=pg;Sn.unix=r4e;Sn.months=a4e;Sn.isDate=sO;Sn.locale=qv;Sn.invalid=hR;Sn.duration=Dp;Sn.isMoment=Sp;Sn.weekdays=s4e;Sn.parseZone=i4e;Sn.localeData=m_;Sn.isDuration=cD;Sn.monthsShort=o4e;Sn.weekdaysMin=u4e;Sn.defineLocale=CV;Sn.updateLocale=iBe;Sn.locales=aBe;Sn.weekdaysShort=l4e;Sn.normalizeUnits=cd;Sn.relativeTimeRounding=z4e;Sn.relativeTimeThreshold=N4e;Sn.calendarFormat=e5e;Sn.prototype=Nn;Sn.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Ql(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var B4e=typeof Symbol=="function"&&Symbol.observable||"@@observable",IX=B4e,oz=()=>Math.random().toString(36).substring(7).split("").join("."),j4e={INIT:`@@redux/INIT${oz()}`,REPLACE:`@@redux/REPLACE${oz()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${oz()}`},rI=j4e;function NV(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Wce(e,t,n){if(typeof e!="function")throw new Error(Ql(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ql(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ql(1));return n(Wce)(e,t)}let r=e,i=t,s=new Map,f=s,a=0,p=!1;function y(){f===s&&(f=new Map,s.forEach((k,V)=>{f.set(V,k)}))}function S(){if(p)throw new Error(Ql(3));return i}function E(k){if(typeof k!="function")throw new Error(Ql(4));if(p)throw new Error(Ql(5));let V=!0;y();const K=a++;return f.set(K,k),function(){if(V){if(p)throw new Error(Ql(6));V=!1,y(),f.delete(K),s=null}}}function I(k){if(!NV(k))throw new Error(Ql(7));if(typeof k.type>"u")throw new Error(Ql(8));if(typeof k.type!="string")throw new Error(Ql(17));if(p)throw new Error(Ql(9));try{p=!0,i=r(i,k)}finally{p=!1}return(s=f).forEach(K=>{K()}),k}function L(k){if(typeof k!="function")throw new Error(Ql(10));r=k,I({type:rI.REPLACE})}function N(){const k=E;return{subscribe(V){if(typeof V!="object"||V===null)throw new Error(Ql(11));function K(){const ie=V;ie.next&&ie.next(S())}return K(),{unsubscribe:k(K)}},[IX](){return this}}}return I({type:rI.INIT}),{dispatch:I,subscribe:E,getState:S,replaceReducer:L,[IX]:N}}function U4e(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:rI.INIT})>"u")throw new Error(Ql(12));if(typeof n(void 0,{type:rI.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ql(13))})}function $4e(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const f=t[s];typeof e[f]=="function"&&(n[f]=e[f])}const r=Object.keys(n);let i;try{U4e(n)}catch(s){i=s}return function(f={},a){if(i)throw i;let p=!1;const y={};for(let S=0;S<r.length;S++){const E=r[S],I=n[E],L=f[E],N=I(L,a);if(typeof N>"u")throw a&&a.type,new Error(Ql(14));y[E]=N,p=p||N!==L}return p=p||r.length!==Object.keys(f).length,p?y:f}}function iI(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function V4e(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Ql(15))};const f={getState:i.getState,dispatch:(p,...y)=>s(p,...y)},a=e.map(p=>p(f));return s=iI(...a)(i.dispatch),{...i,dispatch:s}}}function q4e(e){return NV(e)&&"type"in e&&typeof e.type=="string"}var Xce=Symbol.for("immer-nothing"),PX=Symbol.for("immer-draftable"),_c=Symbol.for("immer-state");function hp(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zf=Object,Zw=Zf.getPrototypeOf,aI="constructor",SR="prototype",Fj="configurable",oI="enumerable",hD="writable",V2="value",r_=e=>!!e&&!!e[_c];function Tp(e){var t;return e?Zce(e)||ER(e)||!!e[PX]||!!((t=e[aI])!=null&&t[PX])||AR(e)||OR(e):!1}var H4e=Zf[SR][aI].toString(),RX=new WeakMap;function Zce(e){if(!e||!FV(e))return!1;const t=Zw(e);if(t===null||t===Zf[SR])return!0;const n=Zf.hasOwnProperty.call(t,aI)&&t[aI];if(n===Object)return!0;if(!gw(n))return!1;let r=RX.get(n);return r===void 0&&(r=Function.toString.call(n),RX.set(n,r)),r===H4e}function TR(e,t,n=!0){fO(e)===0?(n?Reflect.ownKeys(e):Zf.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function fO(e){const t=e[_c];return t?t.type_:ER(e)?1:AR(e)?2:OR(e)?3:0}var kX=(e,t,n=fO(e))=>n===2?e.has(t):Zf[SR].hasOwnProperty.call(e,t),Bj=(e,t,n=fO(e))=>n===2?e.get(t):e[t],sI=(e,t,n,r=fO(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function G4e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var ER=Array.isArray,AR=e=>e instanceof Map,OR=e=>e instanceof Set,FV=e=>typeof e=="object",gw=e=>typeof e=="function",sz=e=>typeof e=="boolean";function Y4e(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Ay=e=>e.copy_||e.base_,BV=e=>e.modified_?e.copy_:e.base_;function jj(e,t){if(AR(e))return new Map(e);if(OR(e))return new Set(e);if(ER(e))return Array[SR].slice.call(e);const n=Zce(e);if(t===!0||t==="class_only"&&!n){const r=Zf.getOwnPropertyDescriptors(e);delete r[_c];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const f=i[s],a=r[f];a[hD]===!1&&(a[hD]=!0,a[Fj]=!0),(a.get||a.set)&&(r[f]={[Fj]:!0,[hD]:!0,[oI]:a[oI],[V2]:e[f]})}return Zf.create(Zw(e),r)}else{const r=Zw(e);if(r!==null&&n)return{...e};const i=Zf.create(r);return Zf.assign(i,e)}}function jV(e,t=!1){return CR(e)||r_(e)||!Tp(e)||(fO(e)>1&&Zf.defineProperties(e,{set:_M,add:_M,clear:_M,delete:_M}),Zf.freeze(e),t&&TR(e,(n,r)=>{jV(r,!0)},!1)),e}function W4e(){hp(2)}var _M={[V2]:W4e};function CR(e){return e===null||!FV(e)?!0:Zf.isFrozen(e)}var lI="MapSet",Uj="Patches",LX="ArrayMethods",Kce={};function bx(e){const t=Kce[e];return t||hp(0,e),t}var zX=e=>!!Kce[e],q2,Qce=()=>q2,X4e=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:zX(lI)?bx(lI):void 0,arrayMethodsPlugin_:zX(LX)?bx(LX):void 0});function NX(e,t){t&&(e.patchPlugin_=bx(Uj),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function $j(e){Vj(e),e.drafts_.forEach(Z4e),e.drafts_=null}function Vj(e){e===q2&&(q2=e.parent_)}var FX=e=>q2=X4e(q2,e);function Z4e(e){const t=e[_c];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function BX(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[_c].modified_&&($j(t),hp(4)),Tp(e)&&(e=jX(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[_c].base_,e,t)}else e=jX(t,n);return K4e(t,e,!0),$j(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Xce?e:void 0}function jX(e,t){if(CR(t))return t;const n=t[_c];if(!n)return uI(t,e.handledSet_,e);if(!MR(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);tfe(n,e)}return n.copy_}function K4e(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jV(t,n)}function Jce(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var MR=(e,t)=>e.scope_===t,Q4e=[];function efe(e,t,n,r){const i=Ay(e),s=e.type_;if(r!==void 0&&Bj(i,r,s)===t){sI(i,r,n,s);return}if(!e.draftLocations_){const a=e.draftLocations_=new Map;TR(i,(p,y)=>{if(r_(y)){const S=a.get(y)||[];S.push(p),a.set(y,S)}})}const f=e.draftLocations_.get(t)??Q4e;for(const a of f)sI(i,a,n,s)}function J4e(e,t,n){e.callbacks_.push(function(i){var a;const s=t;if(!s||!MR(s,i))return;(a=i.mapSetPlugin_)==null||a.fixSetContents(s);const f=BV(s);efe(e,s.draft_??s,f,n),tfe(s,i)})}function tfe(e,t){var r;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((r=e.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const s=i.getPath(e);s&&i.generatePatches_(e,s,t)}Jce(e)}}function eje(e,t,n){const{scope_:r}=e;if(r_(n)){const i=n[_c];MR(i,r)&&i.callbacks_.push(function(){dD(e);const f=BV(i);efe(e,n,f,t)})}else Tp(n)&&e.callbacks_.push(function(){const s=Ay(e);e.type_===3?s.has(n)&&uI(n,r.handledSet_,r):Bj(s,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&uI(Bj(e.copy_,t,e.type_),r.handledSet_,r)})}function uI(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||r_(e)||t.has(e)||!Tp(e)||CR(e)||(t.add(e),TR(e,(r,i)=>{if(r_(i)){const s=i[_c];if(MR(s,n)){const f=BV(s);sI(e,r,f,e.type_),Jce(s)}}else Tp(i)&&uI(i,t,n)})),e}function tje(e,t){const n=ER(e),r={type_:n?1:0,scope_:t?t.scope_:Qce(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=cI;n&&(i=[r],s=H2);const{revoke:f,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=f,[a,r]}var cI={get(e,t){if(t===_c)return e;let n=e.scope_.arrayMethodsPlugin_;const r=e.type_===1&&typeof t=="string";if(r&&n!=null&&n.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const i=Ay(e);if(!kX(i,t,e.type_))return nje(e,i,t);const s=i[t];if(e.finalized_||!Tp(s)||r&&e.operationMethod&&(n!=null&&n.isMutatingArrayMethod(e.operationMethod))&&Y4e(t))return s;if(s===lz(e.base_,t)){dD(e);const f=e.type_===1?+t:t,a=Hj(e.scope_,s,e,f);return e.copy_[f]=a}return s},has(e,t){return t in Ay(e)},ownKeys(e){return Reflect.ownKeys(Ay(e))},set(e,t,n){const r=nfe(Ay(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=lz(Ay(e),t),s=i==null?void 0:i[_c];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(G4e(n,i)&&(n!==void 0||kX(e.base_,t,e.type_)))return!0;dD(e),qj(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),eje(e,t,n)),!0},deleteProperty(e,t){return dD(e),lz(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),qj(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ay(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[hD]:!0,[Fj]:e.type_!==1||t!=="length",[oI]:r[oI],[V2]:n[t]}},defineProperty(){hp(11)},getPrototypeOf(e){return Zw(e.base_)},setPrototypeOf(){hp(12)}},H2={};for(let e in cI){let t=cI[e];H2[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}H2.deleteProperty=function(e,t){return H2.set.call(this,e,t,void 0)};H2.set=function(e,t,n){return cI.set.call(this,e[0],t,n,e[0])};function lz(e,t){const n=e[_c];return(n?Ay(n):e)[t]}function nje(e,t,n){var i;const r=nfe(t,n);return r?V2 in r?r[V2]:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function nfe(e,t){if(!(t in e))return;let n=Zw(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Zw(n)}}function qj(e){e.modified_||(e.modified_=!0,e.parent_&&qj(e.parent_))}function dD(e){e.copy_||(e.assigned_=new Map,e.copy_=jj(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var rje=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(gw(t)&&!gw(n)){const s=n;n=t;const f=this;return function(p=s,...y){return f.produce(p,S=>n.call(this,S,...y))}}gw(n)||hp(6),r!==void 0&&!gw(r)&&hp(7);let i;if(Tp(t)){const s=FX(this),f=Hj(s,t,void 0);let a=!0;try{i=n(f),a=!1}finally{a?$j(s):Vj(s)}return NX(s,r),BX(i,s)}else if(!t||!FV(t)){if(i=n(t),i===void 0&&(i=t),i===Xce&&(i=void 0),this.autoFreeze_&&jV(i,!0),r){const s=[],f=[];bx(Uj).generateReplacementPatches_(t,i,{patches_:s,inversePatches_:f}),r(s,f)}return i}else hp(1,t)},this.produceWithPatches=(t,n)=>{if(gw(t))return(f,...a)=>this.produceWithPatches(f,p=>t(p,...a));let r,i;return[this.produce(t,n,(f,a)=>{r=f,i=a}),r,i]},sz(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),sz(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),sz(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Tp(e)||hp(8),r_(e)&&(e=ije(e));const t=FX(this),n=Hj(t,e,void 0);return n[_c].isManual_=!0,Vj(t),n}finishDraft(e,t){const n=e&&e[_c];(!n||!n.isManual_)&&hp(9);const{scope_:r}=n;return NX(r,t),BX(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=bx(Uj).applyPatches_;return r_(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Hj(e,t,n,r){const[i,s]=AR(t)?bx(lI).proxyMap_(t,n):OR(t)?bx(lI).proxySet_(t,n):tje(t,n);return((n==null?void 0:n.scope_)??Qce()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?J4e(n,s,r):s.callbacks_.push(function(p){var S;(S=p.mapSetPlugin_)==null||S.fixSetContents(s);const{patchPlugin_:y}=p;s.modified_&&y&&y.generatePatches_(s,[],p)}),i}function ije(e){return r_(e)||hp(10,e),rfe(e)}function rfe(e){if(!Tp(e)||CR(e))return e;const t=e[_c];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=jj(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=jj(e,!0);return TR(n,(i,s)=>{sI(n,i,rfe(s))},r),t&&(t.finalized_=!1),n}var aje=new rje,ife=aje.produce;function afe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var oje=afe(),sje=afe,lje=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?iI:iI.apply(null,arguments)};function Fa(e,t){function n(...r){return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>q4e(r)&&r.type===e,n}var ofe=class JE extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,JE.prototype)}static get[Symbol.species](){return JE}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new JE(...t[0].concat(this)):new JE(...t.concat(this))}};function UX(e){return Tp(e)?ife(e,()=>{}):e}function uje(e){return typeof e=="boolean"}var cje=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let f=new ofe;return n&&(uje(n)?f.push(oje):f.push(sje(n.extraArgument))),f},fje="RTK_autoBatch",$X=e=>t=>{setTimeout(t,e)},hje=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,f=!1;const a=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$X(10):e.type==="callback"?e.queueNotification:$X(e.timeout),y=()=>{f=!1,s&&(s=!1,a.forEach(S=>S()))};return Object.assign({},r,{subscribe(S){const E=()=>i&&S(),I=r.subscribe(E);return a.add(S),()=>{I(),a.delete(S)}},dispatch(S){var E;try{return i=!((E=S==null?void 0:S.meta)!=null&&E[fje]),s=!i,s&&(f||(f=!0,p(y))),r.dispatch(S)}finally{i=!0}}})},dje=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new ofe(e);return r&&i.push(hje(typeof r=="object"?r:void 0)),i};function pje(e){const t=cje(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:f=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(NV(n))a=$4e(n);else throw new Error(Gj(1));let p;typeof r=="function"?p=r(t):p=t();let y=iI;i&&(y=lje({trace:!1,...typeof i=="object"&&i}));const S=V4e(...p),E=dje(S);let I=typeof f=="function"?f(E):E();const L=y(...I);return Wce(a,s,L)}function mje(e){const t={},n=[];let r;const i={addCase(s,f){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Gj(28));if(a in t)throw new Error(Gj(29));return t[a]=f,i},addAsyncThunk(s,f){return f.pending&&(t[s.pending.type]=f.pending),f.rejected&&(t[s.rejected.type]=f.rejected),f.fulfilled&&(t[s.fulfilled.type]=f.fulfilled),f.settled&&n.push({matcher:s.settled,reducer:f.settled}),i},addMatcher(s,f){return n.push({matcher:s,reducer:f}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function gje(e){return typeof e=="function"}function yje(e,t){let[n,r,i]=mje(t),s;if(gje(e))s=()=>UX(e());else{const a=UX(e);s=()=>a}function f(a=s(),p){let y=[n[p.type],...r.filter(({matcher:S})=>S(p)).map(({reducer:S})=>S)];return y.filter(S=>!!S).length===0&&(y=[i]),y.reduce((S,E)=>{if(E)if(r_(S)){const L=E(S,p);return L===void 0?S:L}else{if(Tp(S))return ife(S,I=>E(I,p));{const I=E(S,p);if(I===void 0){if(S===null)return S;throw Error("A case reducer on a non-draftable value must not return undefined")}return I}}return S},a)}return f.getInitialState=s,f}function Gj(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const sfe=Fa("MAP_LOADED"),lfe=Fa("SET_STYLE"),ufe=Fa("LOAD_REF_LAYERS"),UV=Fa("SWITCH_TAB"),cfe=Fa("ASYNC_START"),ffe=Fa("ASYNC_SUCCESS"),hfe=Fa("ASYNC_FAIL"),_je=Fa("FETCHING"),DR=Fa("THINKING_1"),IR=Fa("THINKING_0"),vje=Fa("CALC_EVENT_STATS"),dfe=Fa("PICK_EVENT"),$V=Fa("PICK_DATETIME_RANGE"),fI=Fa("PICK_SENSOR"),pfe=Fa("PICK_INTERVAL"),XS=Fa("PICK_ACTIVE_RESULT"),mfe=Fa("GETTING_RAINFALL");Fa("GETTING_RAINFALL_INVALID");const gfe=Fa("GETTING_RAINFALL_SUCCESS"),zb=Fa("GETTING_RAINFALL_FAIL"),yfe=Fa("REMOVE_FETCH_HISTORY_ITEM"),bje=Fa("FILTER_EVENT_BY_HOUR"),G2=Fa("HIGHLIGHT_SENSOR"),VV=Fa("APPLY_COLOR_STRETCH"),xje=Fa("SET_LAYER_STYLE"),wje=Fa("BUILD_LAYER_STYLE"),qV=Fa("RESET_LAYER_SRCS");Fa("START_ANIMATION");Fa("STOP_ANIMATION");Fa("RESTART_ANIMATION");const Sje=Fa("SET_STATE"),_fe=e=>e.progress.tab,dp=(e,t)=>e.fetchKwargs[t].active,Tje=(e,t)=>{let n={};return fR(dp(e,t).sensorLocations,(r,i)=>{r.length>0&&(n[i]=r)}),n},t0=(e,t)=>e.fetchKwargs[t].history,Eje=e=>e.fetchKwargs[_fe(e)].history,Aje=e=>Eje(e).find(t=>t.isActive===!0),xw=(e,t,n)=>t0(e,n).find(i=>i.requestId==t),Oje=(e,t,n)=>t0(e,n).filter(r=>r.requestId==t),Cje=(e,t,n)=>t0(e,n).filter(r=>r.requestId!==t),Mje=(e,t)=>{let n;return fR(e.fetchKwargs,(r,i)=>{let s=r.history.find(f=>f.requestId==t);s!==void 0&&(n=s)}),n},uz=(e,t,n)=>{let r=e.fetchKwargs[t].active.sensorLocations[n];return r===void 0?[]:r},Dje=e=>e.mapStyle.sources,cz=(e,t)=>Dje(e)[t],Ije=e=>e.mapStyle.layers,VX=(e,t)=>Ije(e).filter(n=>Fy(t,n.id)),Kw=(e,t)=>vw(e.mapStyle,["sources",t,"data","features"])?e.mapStyle.sources[t].data.features:[],Pje=(e,t)=>rf(e.refData.lookups,t,{}),Rje=e=>{let t=rf(e,"refData.lookups",{});return wu(t).map(n=>({label:n,options:wu(t[n]).map(r=>({value:`${n}.${r}`,label:r}))}))},hO=e=>e.rainfallEvents,kje=(e,t)=>hO(e).list.find(n=>n.eventid===t),Lje=(e,t)=>hO(e).list.filter(n=>n.eventid!==t),zje=e=>hO(e).list.find(t=>t.selected),Nje=e=>e.stats.latest,Fje=e=>`${(e==null?void 0:e.eventid)??""}|${(e==null?void 0:e.startDt)??""}|${(e==null?void 0:e.endDt)??""}`,Bje=(e=[])=>{const t=new Set;return e.filter(n=>{const r=Fje(n);return t.has(r)?!1:(t.add(r),!0)})},jje=e=>({type:"geojson",data:{type:"FeatureCollection",features:e.features.map(n=>({properties:{id:n.properties.pixel_id.toString(),label:`Virtual Gauge ${n.properties.pixel_id.toString()}`,data:[],total:"",selected:!1,...n.properties},id:n.properties.pixel_id.toString(),geometry:n.geometry}))}}),Uje=e=>({type:"geojson",data:{type:"FeatureCollection",features:e.features.filter(n=>n.properties.active).map(n=>{let{id:r,...i}=n.properties;return{properties:{id:i.web_id,label:`Gauge ${i.web_id}: ${i.name}`,data:[],total:"",selected:!1,dwid:i.ext_id,active:i.active,...i},id:i.web_id,geometry:n.geometry}})}}),$je=e=>{const t=e.map((n,r)=>({...n,startDt:n.start_dt,endDt:n.end_dt,hours:n.duration,isFetching:!1,selected:!1,eventid:n.event_label})).map(n=>{let{start_dt:r,end_dt:i,event_label:s,duration:f,...a}=n;return a}).filter(n=>n.hours>0);return Bje(t)},Vje=(e,t,n,r,i)=>({type:"FeatureCollection",features:e.features.map(f=>{let a=t.find(p=>rf(p,r)===rf(f,n));return a===void 0?f:{id:f.id,geometry:f.geometry,properties:{...f.properties,...a}}})}),qX=e=>e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"rainfall"),qje=e=>Array.isArray(e)&&e.some(t=>Array.isArray(t==null?void 0:t.data)?t.data.some(n=>qX(n)):qX(t)),Hje=(e,t)=>e==="legacyGauge"?"G":e==="legacyGarr"?null:(t==null?void 0:t.src)??null,HX=(e,t,n={})=>{const r=(e==null?void 0:e.id)??t,i=(e==null?void 0:e.rainfall)??(e==null?void 0:e.val);return r==null||r===""?[]:i===void 0?[]:[{sensorId:r,sensorIdKey:`${typeof r}:${r}`,point:{ts:e==null?void 0:e.ts,val:i,src:Hje(n.contextType,e)}}]},Gje=(e,t={})=>{const n=TX(e.data??[],s=>Array.isArray(s==null?void 0:s.data)?TX(s.data,f=>HX(f,s==null?void 0:s.id,t)):HX(s,s==null?void 0:s.id,t)),r=fNe(n,"sensorIdKey"),i=new Set;return n.forEach(s=>{i.add(s.sensorIdKey)}),e.data=[...i].map(s=>{const f=r[s]??[];return{id:f[0].sensorId,data:f.map(a=>a.point)}}),e},Yje=(e,t={})=>Array.isArray(e==null?void 0:e.data)?(qje(e.data)&&(e=Gje(e,t)),e.data.forEach(n=>{if(!Array.isArray(n==null?void 0:n.data)){n.data=[],n.total=0;return}let r=0,i=n.data.length;if(i===0){n.total=0;return}let s=i>1?n.data.filter(f=>f.val>=0).map(f=>f.val).reduce((f,a)=>f+a,r):n.data[0].val;n.total=s}),e):(e.data=[],e),HV=(e,t,n)=>{n===void 0&&(n="properties.id"),t===void 0&&(t="properties.name");let r=rf(e,n,!1),i=rf(e,t,!1),s;return i?s={value:r,label:`${e.id}: ${i}`}:s={value:r,label:`${e.id}`},s},ms=e=>{if(Sn.isMoment(e))return e.isValid()?e.clone():null;if(e==null||e===!1)return null;const t=Sn(e);return t.isValid()?t:null},Wje=(...e)=>{const t=e.map(n=>ms(n)).filter(n=>n!==null);return t.length===0?null:t.reduce((n,r)=>r.isAfter(n)?r:n)},GX=(e,t,n)=>{const r=ms(t),i=ms(n),s=ms(e);return!r||!i?s:s?s.isBefore(r)?r.clone():s.isAfter(i)?i.clone():s:null},kv=({start:e,end:t,min:n,max:r})=>{const i=ms(n),s=ms(r);if(!i||!s)return{start:ms(e),end:ms(t),min:i,max:s};let f=i,a=s;f.isAfter(a)&&(f=a.clone());let p=ms(e)||f.clone(),y=ms(t)||a.clone();return p=GX(p,f,a)||f.clone(),y=GX(y,f,a)||a.clone(),y.isBefore(p)&&(y=p.clone()),{start:p,end:y,min:f,max:a}},Xje=({start:e,end:t,min:n,max:r})=>{const i=ms(e),s=ms(t),f=ms(n),a=ms(r);return!i||!s||!f||!a||s.isBefore(i)?!1:!i.isBefore(f)&&!s.isAfter(a)},vfe=({contextType:e,rainfallDataType:t,rollup:n,latest:r,rainfallMinDate:i,now:s})=>{const f=r||{},a=ms(s)||Sn(),p=ms(i)||Sn("2000-04-01"),y=a.clone().subtract(60,"days").endOf("month"),S=a.clone().subtract(60,"days").endOf("month");let E=p.clone(),I=a.clone();if(e===fi.legacyRealtime)I=Wje(f["realtime-radar"],f["realtime-gauge"])||a.clone(),E=I.clone().subtract(1,"year").startOf("month");else if(e===fi.legacyGauge){const L=ms(f["calibrated-gauge"]);n===YD?(E=ms(f["earliest-5min-calibrated-gauge"])||p.clone(),I=ms(f["latest-5min-calibrated-gauge"])||L||a.clone()):(E=p.clone(),I=L||y)}else if(e===fi.legacyGarr){const L=ms(f["calibrated-radar"]);n===YD?(E=ms(f["earliest-5min-calibrated-radar"])||p.clone(),I=ms(f["latest-5min-calibrated-radar"])||L||a.clone()):(E=p.clone(),I=L||S)}return E.isAfter(I)&&(E=I.clone()),{min:E,max:I}},Yj="s",bfe="state",Wj=1,xfe=new Set([fi.legacyRealtime,fi.legacyGauge,fi.legacyGarr]);let kE=null,fz=Promise.resolve(),pD=null;const Zje=new TextEncoder,YX=new TextDecoder,PR=()=>typeof window<"u"&&typeof window.location<"u"&&typeof window.history<"u",WX=e=>Array.isArray(e)?[...new Set(e.map(t=>t==null?"":`${t}`.trim()).filter(t=>t!==""))].sort():[],wfe=e=>{try{return JSON.parse(e)}catch{return null}},RR=e=>{if(e===null||typeof e!="object")return null;const t=e.c??e.context;if(!xfe.has(t))return null;let n=WX(e.g??e.gauge??[]),r=WX(e.p??e.pixel??[]);return t===fi.legacyGauge&&(r=[]),t===fi.legacyGarr&&(n=[]),{v:Wj,c:t,g:n,p:r}},Kje=e=>{if(typeof Buffer<"u")return Buffer.from(e).toString("base64");let t="";const n=32768;for(let r=0;r<e.length;r+=n)t+=String.fromCharCode(...e.subarray(r,r+n));return btoa(t)},Qje=e=>{if(typeof Buffer<"u")return new Uint8Array(Buffer.from(e,"base64"));const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n},Jje=e=>e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,""),e6e=e=>{const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return`${t}${"=".repeat(n)}`},t6e=async e=>{if(typeof CompressionStream>"u")return e;const t=new CompressionStream("deflate"),n=t.writable.getWriter();n.write(e),n.close();const r=await new Response(t.readable).arrayBuffer();return new Uint8Array(r)},n6e=async e=>{if(typeof DecompressionStream>"u")return e;const t=new DecompressionStream("deflate"),n=t.writable.getWriter();n.write(e),n.close();const r=await new Response(t.readable).arrayBuffer();return new Uint8Array(r)},r6e=()=>{if(!PR())return null;const e=window.location.hash.startsWith("#")?window.location.hash.slice(1):window.location.hash;return new URLSearchParams(e).get(Yj)},Sfe=e=>{if(!PR())return;const t=window.location.hash.startsWith("#")?window.location.hash.slice(1):window.location.hash,n=new URLSearchParams(t);e&&e.length>0?n.set(Yj,e):n.delete(Yj);const r=new URLSearchParams(window.location.search);r.delete(bfe);const i=r.toString(),s=n.toString(),f=`${window.location.pathname}${i?`?${i}`:""}${s?`#${s}`:""}`;window.history.replaceState(window.history.state,"",f)},XX=(e,t,n)=>{if(!Array.isArray(n)||n.length===0)return[];const r=new Map(Kw(e,t).map(i=>{var s;return[`${((s=i==null?void 0:i.properties)==null?void 0:s.id)??(i==null?void 0:i.id)}`,i]}));return n.map(i=>r.get(`${i}`)).filter(i=>i!==void 0).map(i=>HV(i))},i6e=()=>{if(!PR())return null;const t=new URLSearchParams(window.location.search).get(bfe);if(!t)return null;const n=wfe(t);return RR(n)},Tfe=e=>{var s,f,a;const t=(s=e==null?void 0:e.progress)==null?void 0:s.tab;if(!xfe.has(t))return{v:Wj,c:fi.legacyRealtime,g:[],p:[]};const r=(((a=(f=e==null?void 0:e.fetchKwargs)==null?void 0:f[t])==null?void 0:a.active)??{}).sensorLocations??{};return RR({c:t,g:(r.gauge??[]).map(p=>p==null?void 0:p.value),p:(r.pixel??[]).map(p=>p==null?void 0:p.value)})??{v:Wj,c:fi.legacyRealtime,g:[],p:[]}},Efe=async e=>{const t=RR(e);if(!t)return"";const n=Zje.encode(JSON.stringify(t)),r=await t6e(n);return Jje(Kje(r))},a6e=async e=>{if(!e||typeof e!="string")return null;let t;try{t=Qje(e6e(e))}catch{return null}const n=[];try{const r=YX.decode(t);n.push(r)}catch{}try{const r=await n6e(t),i=YX.decode(r);n.includes(i)||n.unshift(i)}catch{}for(const r of n){const i=wfe(r),s=RR(i);if(s)return s}return null},o6e=async()=>{const e=r6e();return a6e(e)},s6e=async e=>{if(!QP)return"";const t=await Efe(e);return Sfe(t),t},l6e=async({dispatch:e,getState:t})=>{if(!QP||typeof e!="function"||typeof t!="function")return!1;let n=await o6e();if(n||(n=i6e()),!n)return!1;const r=n.c;e(UV(r));const i=t(),s=XX(i,"gauge",n.g),f=XX(i,"pixel",n.p),a={contextType:r,sensorLocationType:"gauge",selectedOptions:s},p={contextType:r,sensorLocationType:"pixel",selectedOptions:f};e(fI(a)),e(G2(a)),e(fI(p)),e(G2(p));const y=Tfe(t());return pD=await s6e(y),!0},u6e=e=>{if(!QP)return()=>{};if(kE!==null)return kE;if(!e||typeof e.subscribe!="function"||typeof e.getState!="function")return()=>{};const t=()=>{PR()&&(fz=fz.then(async()=>{const r=Tfe(e.getState()),i=await Efe(r);i!==pD&&(Sfe(i),pD=i)}).catch(r=>{console.warn("[urlShareState] failed to sync share state",r)}))},n=e.subscribe(t);return kE=()=>{n(),kE=null,fz=Promise.resolve(),pD=null},t(),kE},c6e={progress:{tab:fi.legacyRealtime,mapLoaded:!1,initialStyleLoaded:!1,isFetching:!0,isThinking:0,messages:[]},globalConfig:{globalNotice:{show:!1,title:"System Maintenance",content:"The rainfall database is currently undergoing maintenance. Queries may be slow or unresponsive during this time. We apologize for any inconvenience.",level:"info"}},fetchKwargs:{[fi.legacyRealtime]:{active:{startDt:null,endDt:null,sensorLocations:{gauge:[],geographies:[],pixel:[]},rollup:"15-minute",zerofill:!0,f:"sensor"},history:[]},[fi.legacyGauge]:{active:{startDt:null,endDt:null,sensorLocations:{gauge:[],geographies:[],pixel:[]},rollup:"15-minute",zerofill:!0,f:"sensor"},history:[]},[fi.legacyGarr]:{active:{startDt:null,endDt:null,sensorLocations:{gauge:[],geographies:[],pixel:[]},rollup:"15-minute",zerofill:!0,f:"sensor"},history:[]}},rainfallEvents:{list:[],stats:{latest:null,longest:null,maxDate:null,minDate:W$},filters:{maxHours:24}},stats:{latest:{}},refData:{},initMap:{token:yIe,latitude:40.4481524,longitude:-79.9864242,zoom:10,mapboxSources:{"3rww-rainfall-base":{type:"vector",url:_Ie}},sourcesToAdd:[],layersToAdd:[],attribution:'<a href="https://www.3riverswetweather.org" target="_blank">3RWW</a>, <a href="https://www.civicmapper.com" target="_blank">CivicMapper</a>.'},mapStyle:{},mapLegend:{}},{min:f6e,max:h6e}=Math,rx=(e,t=0,n=1)=>f6e(h6e(t,e),n),GV=e=>{e._clipped=!1,e._unclipped=e.slice(0);for(let t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=rx(e[t],0,255)):t===3&&(e[t]=rx(e[t],0,1));return e},Afe={};for(let e of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])Afe[`[object ${e}]`]=e.toLowerCase();function Bi(e){return Afe[Object.prototype.toString.call(e)]||"object"}const Ti=(e,t=null)=>e.length>=3?Array.prototype.slice.call(e):Bi(e[0])=="object"&&t?t.split("").filter(n=>e[0][n]!==void 0).map(n=>e[0][n]):e[0].slice(0),ZS=e=>{if(e.length<2)return null;const t=e.length-1;return Bi(e[t])=="string"?e[t].toLowerCase():null},{PI:kR,min:Ofe,max:Cfe}=Math,Qh=e=>Math.round(e*100)/100,Xj=e=>Math.round(e*100)/100,Oy=kR*2,hz=kR/3,d6e=kR/180,p6e=180/kR;function Mfe(e){return[...e.slice(0,3).reverse(),...e.slice(3)]}const bi={format:{},autodetect:[]};let zn=class{constructor(...t){const n=this;if(Bi(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];let r=ZS(t),i=!1;if(!r){i=!0,bi.sorted||(bi.autodetect=bi.autodetect.sort((s,f)=>f.p-s.p),bi.sorted=!0);for(let s of bi.autodetect)if(r=s.test(...t),r)break}if(bi.format[r]){const s=bi.format[r].apply(null,i?t:t.slice(0,-1));n._rgb=GV(s)}else throw new Error("unknown format: "+t);n._rgb.length===3&&n._rgb.push(1)}toString(){return Bi(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}};const m6e="3.2.0",qi=(...e)=>new zn(...e);qi.version=m6e;const Qw={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},g6e=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,y6e=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Dfe=e=>{if(e.match(g6e)){(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16),n=t>>16,r=t>>8&255,i=t&255;return[n,r,i,1]}if(e.match(y6e)){(e.length===5||e.length===9)&&(e=e.substr(1)),e.length===4&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16),n=t>>24&255,r=t>>16&255,i=t>>8&255,s=Math.round((t&255)/255*100)/100;return[n,r,i,s]}throw new Error(`unknown hex color: ${e}`)},{round:vM}=Math,Ife=(...e)=>{let[t,n,r,i]=Ti(e,"rgba"),s=ZS(e)||"auto";i===void 0&&(i=1),s==="auto"&&(s=i<1?"rgba":"rgb"),t=vM(t),n=vM(n),r=vM(r);let a="000000"+(t<<16|n<<8|r).toString(16);a=a.substr(a.length-6);let p="0"+vM(i*255).toString(16);switch(p=p.substr(p.length-2),s.toLowerCase()){case"rgba":return`#${a}${p}`;case"argb":return`#${p}${a}`;default:return`#${a}`}};zn.prototype.name=function(){const e=Ife(this._rgb,"rgb");for(let t of Object.keys(Qw))if(Qw[t]===e)return t.toLowerCase();return e};bi.format.named=e=>{if(e=e.toLowerCase(),Qw[e])return Dfe(Qw[e]);throw new Error("unknown color name: "+e)};bi.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&Bi(e)==="string"&&Qw[e.toLowerCase()])return"named"}});zn.prototype.alpha=function(e,t=!1){return e!==void 0&&Bi(e)==="number"?t?(this._rgb[3]=e,this):new zn([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};zn.prototype.clipped=function(){return this._rgb._clipped||!1};const eg={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},_6e=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Ry(e){const t=_6e.get(String(e).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+e);eg.labWhitePoint=e,eg.Xn=t[0],eg.Zn=t[1]}function Y2(){return eg.labWhitePoint}const YV=(...e)=>{e=Ti(e,"lab");const[t,n,r]=e,[i,s,f]=v6e(t,n,r),[a,p,y]=Pfe(i,s,f);return[a,p,y,e.length>3?e[3]:1]},v6e=(e,t,n)=>{const{kE:r,kK:i,kKE:s,Xn:f,Yn:a,Zn:p}=eg,y=(e+16)/116,S=.002*t+y,E=y-.005*n,I=S*S*S,L=E*E*E,N=I>r?I:(116*S-16)/i,j=e>s?Math.pow((e+16)/116,3):e/i,k=L>r?L:(116*E-16)/i,V=N*f,K=j*a,J=k*p;return[V,K,J]},dz=e=>{const t=Math.sign(e);return e=Math.abs(e),(e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055)*t},Pfe=(e,t,n)=>{const{MtxAdaptMa:r,MtxAdaptMaI:i,MtxXYZ2RGB:s,RefWhiteRGB:f,Xn:a,Yn:p,Zn:y}=eg,S=a*r.m00+p*r.m10+y*r.m20,E=a*r.m01+p*r.m11+y*r.m21,I=a*r.m02+p*r.m12+y*r.m22,L=f.X*r.m00+f.Y*r.m10+f.Z*r.m20,N=f.X*r.m01+f.Y*r.m11+f.Z*r.m21,j=f.X*r.m02+f.Y*r.m12+f.Z*r.m22,k=(e*r.m00+t*r.m10+n*r.m20)*(L/S),V=(e*r.m01+t*r.m11+n*r.m21)*(N/E),K=(e*r.m02+t*r.m12+n*r.m22)*(j/I),J=k*i.m00+V*i.m10+K*i.m20,ie=k*i.m01+V*i.m11+K*i.m21,Q=k*i.m02+V*i.m12+K*i.m22,W=dz(J*s.m00+ie*s.m10+Q*s.m20),te=dz(J*s.m01+ie*s.m11+Q*s.m21),X=dz(J*s.m02+ie*s.m12+Q*s.m22);return[W*255,te*255,X*255]},WV=(...e)=>{const[t,n,r,...i]=Ti(e,"rgb"),[s,f,a]=Rfe(t,n,r),[p,y,S]=b6e(s,f,a);return[p,y,S,...i.length>0&&i[0]<1?[i[0]]:[]]};function b6e(e,t,n){const{Xn:r,Yn:i,Zn:s,kE:f,kK:a}=eg,p=e/r,y=t/i,S=n/s,E=p>f?Math.pow(p,1/3):(a*p+16)/116,I=y>f?Math.pow(y,1/3):(a*y+16)/116,L=S>f?Math.pow(S,1/3):(a*S+16)/116;return[116*I-16,500*(E-I),200*(I-L)]}function pz(e){const t=Math.sign(e);return e=Math.abs(e),(e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4))*t}const Rfe=(e,t,n)=>{e=pz(e/255),t=pz(t/255),n=pz(n/255);const{MtxRGB2XYZ:r,MtxAdaptMa:i,MtxAdaptMaI:s,Xn:f,Yn:a,Zn:p,As:y,Bs:S,Cs:E}=eg;let I=e*r.m00+t*r.m10+n*r.m20,L=e*r.m01+t*r.m11+n*r.m21,N=e*r.m02+t*r.m12+n*r.m22;const j=f*i.m00+a*i.m10+p*i.m20,k=f*i.m01+a*i.m11+p*i.m21,V=f*i.m02+a*i.m12+p*i.m22;let K=I*i.m00+L*i.m10+N*i.m20,J=I*i.m01+L*i.m11+N*i.m21,ie=I*i.m02+L*i.m12+N*i.m22;return K*=j/y,J*=k/S,ie*=V/E,I=K*s.m00+J*s.m10+ie*s.m20,L=K*s.m01+J*s.m11+ie*s.m21,N=K*s.m02+J*s.m12+ie*s.m22,[I,L,N]};zn.prototype.lab=function(){return WV(this._rgb)};const x6e=(...e)=>new zn(...e,"lab");Object.assign(qi,{lab:x6e,getLabWhitePoint:Y2,setLabWhitePoint:Ry});bi.format.lab=YV;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"lab"),Bi(e)==="array"&&e.length===3)return"lab"}});zn.prototype.darken=function(e=1){const t=this,n=t.lab();return n[0]-=eg.Kn*e,new zn(n,"lab").alpha(t.alpha(),!0)};zn.prototype.brighten=function(e=1){return this.darken(-e)};zn.prototype.darker=zn.prototype.darken;zn.prototype.brighter=zn.prototype.brighten;zn.prototype.get=function(e){const[t,n]=e.split("."),r=this[t]();if(n){const i=t.indexOf(n)-(t.substr(0,2)==="ok"?2:0);if(i>-1)return r[i];throw new Error(`unknown channel ${n} in mode ${t}`)}else return r};const{pow:w6e}=Math,S6e=1e-7,T6e=20;zn.prototype.luminance=function(e,t="rgb"){if(e!==void 0&&Bi(e)==="number"){if(e===0)return new zn([0,0,0,this._rgb[3]],"rgb");if(e===1)return new zn([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),r=T6e;const i=(f,a)=>{const p=f.interpolate(a,.5,t),y=p.luminance();return Math.abs(e-y)<S6e||!r--?p:y>e?i(f,p):i(p,a)},s=(n>e?i(new zn([0,0,0]),this):i(this,new zn([255,255,255]))).rgb();return new zn([...s,this._rgb[3]])}return E6e(...this._rgb.slice(0,3))};const E6e=(e,t,n)=>(e=mz(e),t=mz(t),n=mz(n),.2126*e+.7152*t+.0722*n),mz=e=>(e/=255,e<=.03928?e/12.92:w6e((e+.055)/1.055,2.4)),Cu={},Jw=(e,t,n=.5,...r)=>{let i=r[0]||"lrgb";if(!Cu[i]&&!r.length&&(i=Object.keys(Cu)[0]),!Cu[i])throw new Error(`interpolation mode ${i} is not defined`);return Bi(e)!=="object"&&(e=new zn(e)),Bi(t)!=="object"&&(t=new zn(t)),Cu[i](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))};zn.prototype.mix=zn.prototype.interpolate=function(e,t=.5,...n){return Jw(this,e,t,...n)};zn.prototype.premultiply=function(e=!1){const t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new zn([t[0]*n,t[1]*n,t[2]*n,n],"rgb")};const{sin:A6e,cos:O6e}=Math,kfe=(...e)=>{let[t,n,r]=Ti(e,"lch");return isNaN(r)&&(r=0),r=r*d6e,[t,O6e(r)*n,A6e(r)*n]},XV=(...e)=>{e=Ti(e,"lch");const[t,n,r]=e,[i,s,f]=kfe(t,n,r),[a,p,y]=YV(i,s,f);return[a,p,y,e.length>3?e[3]:1]},C6e=(...e)=>{const t=Mfe(Ti(e,"hcl"));return XV(...t)},{sqrt:M6e,atan2:D6e,round:I6e}=Math,Lfe=(...e)=>{const[t,n,r]=Ti(e,"lab"),i=M6e(n*n+r*r);let s=(D6e(r,n)*p6e+360)%360;return I6e(i*1e4)===0&&(s=Number.NaN),[t,i,s]},ZV=(...e)=>{const[t,n,r,...i]=Ti(e,"rgb"),[s,f,a]=WV(t,n,r),[p,y,S]=Lfe(s,f,a);return[p,y,S,...i.length>0&&i[0]<1?[i[0]]:[]]};zn.prototype.lch=function(){return ZV(this._rgb)};zn.prototype.hcl=function(){return Mfe(ZV(this._rgb))};const P6e=(...e)=>new zn(...e,"lch"),R6e=(...e)=>new zn(...e,"hcl");Object.assign(qi,{lch:P6e,hcl:R6e});bi.format.lch=XV;bi.format.hcl=C6e;["lch","hcl"].forEach(e=>bi.autodetect.push({p:2,test:(...t)=>{if(t=Ti(t,e),Bi(t)==="array"&&t.length===3)return e}}));zn.prototype.saturate=function(e=1){const t=this,n=t.lch();return n[1]+=eg.Kn*e,n[1]<0&&(n[1]=0),new zn(n,"lch").alpha(t.alpha(),!0)};zn.prototype.desaturate=function(e=1){return this.saturate(-e)};zn.prototype.set=function(e,t,n=!1){const[r,i]=e.split("."),s=this[r]();if(i){const f=r.indexOf(i)-(r.substr(0,2)==="ok"?2:0);if(f>-1){if(Bi(t)=="string")switch(t.charAt(0)){case"+":s[f]+=+t;break;case"-":s[f]+=+t;break;case"*":s[f]*=+t.substr(1);break;case"/":s[f]/=+t.substr(1);break;default:s[f]=+t}else if(Bi(t)==="number")s[f]=t;else throw new Error("unsupported value for Color.set");const a=new zn(s,r);return n?(this._rgb=a._rgb,this):a}throw new Error(`unknown channel ${i} in mode ${r}`)}else return s};zn.prototype.tint=function(e=.5,...t){return Jw(this,"white",e,...t)};zn.prototype.shade=function(e=.5,...t){return Jw(this,"black",e,...t)};const k6e=(e,t,n)=>{const r=e._rgb,i=t._rgb;return new zn(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"rgb")};Cu.rgb=k6e;const{sqrt:gz,pow:rw}=Math,L6e=(e,t,n)=>{const[r,i,s]=e._rgb,[f,a,p]=t._rgb;return new zn(gz(rw(r,2)*(1-n)+rw(f,2)*n),gz(rw(i,2)*(1-n)+rw(a,2)*n),gz(rw(s,2)*(1-n)+rw(p,2)*n),"rgb")};Cu.lrgb=L6e;const z6e=(e,t,n)=>{const r=e.lab(),i=t.lab();return new zn(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"lab")};Cu.lab=z6e;const KS=(e,t,n,r)=>{let i,s;r==="hsl"?(i=e.hsl(),s=t.hsl()):r==="hsv"?(i=e.hsv(),s=t.hsv()):r==="hcg"?(i=e.hcg(),s=t.hcg()):r==="hsi"?(i=e.hsi(),s=t.hsi()):r==="lch"||r==="hcl"?(r="hcl",i=e.hcl(),s=t.hcl()):r==="oklch"&&(i=e.oklch().reverse(),s=t.oklch().reverse());let f,a,p,y,S,E;(r.substr(0,1)==="h"||r==="oklch")&&([f,p,S]=i,[a,y,E]=s);let I,L,N,j;return!isNaN(f)&&!isNaN(a)?(a>f&&a-f>180?j=a-(f+360):a<f&&f-a>180?j=a+360-f:j=a-f,L=f+n*j):isNaN(f)?isNaN(a)?L=Number.NaN:(L=a,(S==1||S==0)&&r!="hsv"&&(I=y)):(L=f,(E==1||E==0)&&r!="hsv"&&(I=p)),I===void 0&&(I=p+n*(y-p)),N=S+n*(E-S),r==="oklch"?new zn([N,I,L],r):new zn([L,I,N],r)},zfe=(e,t,n)=>KS(e,t,n,"lch");Cu.lch=zfe;Cu.hcl=zfe;const N6e=e=>{if(Bi(e)=="number"&&e>=0&&e<=16777215){const t=e>>16,n=e>>8&255,r=e&255;return[t,n,r,1]}throw new Error("unknown num color: "+e)},F6e=(...e)=>{const[t,n,r]=Ti(e,"rgb");return(t<<16)+(n<<8)+r};zn.prototype.num=function(){return F6e(this._rgb)};const B6e=(...e)=>new zn(...e,"num");Object.assign(qi,{num:B6e});bi.format.num=N6e;bi.autodetect.push({p:5,test:(...e)=>{if(e.length===1&&Bi(e[0])==="number"&&e[0]>=0&&e[0]<=16777215)return"num"}});const j6e=(e,t,n)=>{const r=e.num(),i=t.num();return new zn(r+n*(i-r),"num")};Cu.num=j6e;const{floor:U6e}=Math,$6e=(...e)=>{e=Ti(e,"hcg");let[t,n,r]=e,i,s,f;r=r*255;const a=n*255;if(n===0)i=s=f=r;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const p=U6e(t),y=t-p,S=r*(1-n),E=S+a*(1-y),I=S+a*y,L=S+a;switch(p){case 0:[i,s,f]=[L,I,S];break;case 1:[i,s,f]=[E,L,S];break;case 2:[i,s,f]=[S,L,I];break;case 3:[i,s,f]=[S,E,L];break;case 4:[i,s,f]=[I,S,L];break;case 5:[i,s,f]=[L,S,E];break}}return[i,s,f,e.length>3?e[3]:1]},V6e=(...e)=>{const[t,n,r]=Ti(e,"rgb"),i=Ofe(t,n,r),s=Cfe(t,n,r),f=s-i,a=f*100/255,p=i/(255-f)*100;let y;return f===0?y=Number.NaN:(t===s&&(y=(n-r)/f),n===s&&(y=2+(r-t)/f),r===s&&(y=4+(t-n)/f),y*=60,y<0&&(y+=360)),[y,a,p]};zn.prototype.hcg=function(){return V6e(this._rgb)};const q6e=(...e)=>new zn(...e,"hcg");qi.hcg=q6e;bi.format.hcg=$6e;bi.autodetect.push({p:1,test:(...e)=>{if(e=Ti(e,"hcg"),Bi(e)==="array"&&e.length===3)return"hcg"}});const H6e=(e,t,n)=>KS(e,t,n,"hcg");Cu.hcg=H6e;const{cos:iw}=Math,G6e=(...e)=>{e=Ti(e,"hsi");let[t,n,r]=e,i,s,f;return isNaN(t)&&(t=0),isNaN(n)&&(n=0),t>360&&(t-=360),t<0&&(t+=360),t/=360,t<1/3?(f=(1-n)/3,i=(1+n*iw(Oy*t)/iw(hz-Oy*t))/3,s=1-(f+i)):t<2/3?(t-=1/3,i=(1-n)/3,s=(1+n*iw(Oy*t)/iw(hz-Oy*t))/3,f=1-(i+s)):(t-=2/3,s=(1-n)/3,f=(1+n*iw(Oy*t)/iw(hz-Oy*t))/3,i=1-(s+f)),i=rx(r*i*3),s=rx(r*s*3),f=rx(r*f*3),[i*255,s*255,f*255,e.length>3?e[3]:1]},{min:Y6e,sqrt:W6e,acos:X6e}=Math,Z6e=(...e)=>{let[t,n,r]=Ti(e,"rgb");t/=255,n/=255,r/=255;let i;const s=Y6e(t,n,r),f=(t+n+r)/3,a=f>0?1-s/f:0;return a===0?i=NaN:(i=(t-n+(t-r))/2,i/=W6e((t-n)*(t-n)+(t-r)*(n-r)),i=X6e(i),r>n&&(i=Oy-i),i/=Oy),[i*360,a,f]};zn.prototype.hsi=function(){return Z6e(this._rgb)};const K6e=(...e)=>new zn(...e,"hsi");qi.hsi=K6e;bi.format.hsi=G6e;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"hsi"),Bi(e)==="array"&&e.length===3)return"hsi"}});const Q6e=(e,t,n)=>KS(e,t,n,"hsi");Cu.hsi=Q6e;const Zj=(...e)=>{e=Ti(e,"hsl");const[t,n,r]=e;let i,s,f;if(n===0)i=s=f=r*255;else{const a=[0,0,0],p=[0,0,0],y=r<.5?r*(1+n):r+n-r*n,S=2*r-y,E=t/360;a[0]=E+1/3,a[1]=E,a[2]=E-1/3;for(let I=0;I<3;I++)a[I]<0&&(a[I]+=1),a[I]>1&&(a[I]-=1),6*a[I]<1?p[I]=S+(y-S)*6*a[I]:2*a[I]<1?p[I]=y:3*a[I]<2?p[I]=S+(y-S)*(2/3-a[I])*6:p[I]=S;[i,s,f]=[p[0]*255,p[1]*255,p[2]*255]}return e.length>3?[i,s,f,e[3]]:[i,s,f,1]},Nfe=(...e)=>{e=Ti(e,"rgba");let[t,n,r]=e;t/=255,n/=255,r/=255;const i=Ofe(t,n,r),s=Cfe(t,n,r),f=(s+i)/2;let a,p;return s===i?(a=0,p=Number.NaN):a=f<.5?(s-i)/(s+i):(s-i)/(2-s-i),t==s?p=(n-r)/(s-i):n==s?p=2+(r-t)/(s-i):r==s&&(p=4+(t-n)/(s-i)),p*=60,p<0&&(p+=360),e.length>3&&e[3]!==void 0?[p,a,f,e[3]]:[p,a,f]};zn.prototype.hsl=function(){return Nfe(this._rgb)};const J6e=(...e)=>new zn(...e,"hsl");qi.hsl=J6e;bi.format.hsl=Zj;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"hsl"),Bi(e)==="array"&&e.length===3)return"hsl"}});const eUe=(e,t,n)=>KS(e,t,n,"hsl");Cu.hsl=eUe;const{floor:tUe}=Math,nUe=(...e)=>{e=Ti(e,"hsv");let[t,n,r]=e,i,s,f;if(r*=255,n===0)i=s=f=r;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const a=tUe(t),p=t-a,y=r*(1-n),S=r*(1-n*p),E=r*(1-n*(1-p));switch(a){case 0:[i,s,f]=[r,E,y];break;case 1:[i,s,f]=[S,r,y];break;case 2:[i,s,f]=[y,r,E];break;case 3:[i,s,f]=[y,S,r];break;case 4:[i,s,f]=[E,y,r];break;case 5:[i,s,f]=[r,y,S];break}}return[i,s,f,e.length>3?e[3]:1]},{min:rUe,max:iUe}=Math,aUe=(...e)=>{e=Ti(e,"rgb");let[t,n,r]=e;const i=rUe(t,n,r),s=iUe(t,n,r),f=s-i;let a,p,y;return y=s/255,s===0?(a=Number.NaN,p=0):(p=f/s,t===s&&(a=(n-r)/f),n===s&&(a=2+(r-t)/f),r===s&&(a=4+(t-n)/f),a*=60,a<0&&(a+=360)),[a,p,y]};zn.prototype.hsv=function(){return aUe(this._rgb)};const oUe=(...e)=>new zn(...e,"hsv");qi.hsv=oUe;bi.format.hsv=nUe;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"hsv"),Bi(e)==="array"&&e.length===3)return"hsv"}});const sUe=(e,t,n)=>KS(e,t,n,"hsv");Cu.hsv=sUe;function hI(e,t){let n=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(f=>[f]));let r=t[0].length,i=t[0].map((f,a)=>t.map(p=>p[a])),s=e.map(f=>i.map(a=>Array.isArray(f)?f.reduce((p,y,S)=>p+y*(a[S]||0),0):a.reduce((p,y)=>p+y*f,0)));return n===1&&(s=s[0]),r===1?s.map(f=>f[0]):s}const KV=(...e)=>{e=Ti(e,"lab");const[t,n,r,...i]=e,[s,f,a]=lUe([t,n,r]),[p,y,S]=Pfe(s,f,a);return[p,y,S,...i.length>0&&i[0]<1?[i[0]]:[]]};function lUe(e){var t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],n=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],r=hI(n,e);return hI(t,r.map(i=>i**3))}const QV=(...e)=>{const[t,n,r,...i]=Ti(e,"rgb"),s=Rfe(t,n,r);return[...uUe(s),...i.length>0&&i[0]<1?[i[0]]:[]]};function uUe(e){const t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],n=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=hI(t,e);return hI(n,r.map(i=>Math.cbrt(i)))}zn.prototype.oklab=function(){return QV(this._rgb)};const cUe=(...e)=>new zn(...e,"oklab");Object.assign(qi,{oklab:cUe});bi.format.oklab=KV;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"oklab"),Bi(e)==="array"&&e.length===3)return"oklab"}});const fUe=(e,t,n)=>{const r=e.oklab(),i=t.oklab();return new zn(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"oklab")};Cu.oklab=fUe;const hUe=(e,t,n)=>KS(e,t,n,"oklch");Cu.oklch=hUe;const{pow:yz,sqrt:_z,PI:vz,cos:ZX,sin:KX,atan2:dUe}=Math,pUe=(e,t="lrgb",n=null)=>{const r=e.length;n||(n=Array.from(new Array(r)).map(()=>1));const i=r/n.reduce(function(E,I){return E+I});if(n.forEach((E,I)=>{n[I]*=i}),e=e.map(E=>new zn(E)),t==="lrgb")return mUe(e,n);const s=e.shift(),f=s.get(t),a=[];let p=0,y=0;for(let E=0;E<f.length;E++)if(f[E]=(f[E]||0)*n[0],a.push(isNaN(f[E])?0:n[0]),t.charAt(E)==="h"&&!isNaN(f[E])){const I=f[E]/180*vz;p+=ZX(I)*n[0],y+=KX(I)*n[0]}let S=s.alpha()*n[0];e.forEach((E,I)=>{const L=E.get(t);S+=E.alpha()*n[I+1];for(let N=0;N<f.length;N++)if(!isNaN(L[N]))if(a[N]+=n[I+1],t.charAt(N)==="h"){const j=L[N]/180*vz;p+=ZX(j)*n[I+1],y+=KX(j)*n[I+1]}else f[N]+=L[N]*n[I+1]});for(let E=0;E<f.length;E++)if(t.charAt(E)==="h"){let I=dUe(y/a[E],p/a[E])/vz*180;for(;I<0;)I+=360;for(;I>=360;)I-=360;f[E]=I}else f[E]=f[E]/a[E];return S/=r,new zn(f,t).alpha(S>.99999?1:S,!0)},mUe=(e,t)=>{const n=e.length,r=[0,0,0,0];for(let i=0;i<e.length;i++){const s=e[i],f=t[i]/n,a=s._rgb;r[0]+=yz(a[0],2)*f,r[1]+=yz(a[1],2)*f,r[2]+=yz(a[2],2)*f,r[3]+=a[3]*f}return r[0]=_z(r[0]),r[1]=_z(r[1]),r[2]=_z(r[2]),r[3]>.9999999&&(r[3]=1),new zn(GV(r))},{pow:gUe}=Math;function xx(e){let t="rgb",n=qi("#ccc"),r=0,i=[0,1],s=[0,1],f=[],a=[0,0],p=!1,y=[],S=!1,E=0,I=1,L=!1,N={},j=!0,k=1;const V=function(X){if(X=X||["#fff","#000"],X&&Bi(X)==="string"&&qi.brewer&&qi.brewer[X.toLowerCase()]&&(X=qi.brewer[X.toLowerCase()]),Bi(X)==="array"){X.length===1&&(X=[X[0],X[0]]),X=X.slice(0);for(let ae=0;ae<X.length;ae++)X[ae]=qi(X[ae]);f.length=0;for(let ae=0;ae<X.length;ae++)f.push(ae/(X.length-1))}return W(),y=X},K=function(X){if(p!=null){const ae=p.length-1;let le=0;for(;le<ae&&X>=p[le];)le++;return le-1}return 0};let J=X=>X,ie=X=>X;const Q=function(X,ae){let le,ge;if(ae==null&&(ae=!1),isNaN(X)||X===null)return n;ae?ge=X:p&&p.length>2?ge=K(X)/(p.length-2):I!==E?ge=(X-E)/(I-E):ge=1,ge=ie(ge),ae||(ge=J(ge)),k!==1&&(ge=gUe(ge,k)),ge=a[0]+ge*(1-a[0]-a[1]),ge=rx(ge,0,1);const ye=Math.floor(ge*1e4);if(j&&N[ye])le=N[ye];else{if(Bi(y)==="array")for(let De=0;De<f.length;De++){const He=f[De];if(ge<=He){le=y[De];break}if(ge>=He&&De===f.length-1){le=y[De];break}if(ge>He&&ge<f[De+1]){ge=(ge-He)/(f[De+1]-He),le=qi.interpolate(y[De],y[De+1],ge,t);break}}else Bi(y)==="function"&&(le=y(ge));j&&(N[ye]=le)}return le};var W=()=>N={};V(e);const te=function(X){const ae=qi(Q(X));return S&&ae[S]?ae[S]():ae};return te.classes=function(X){if(X!=null){if(Bi(X)==="array")p=X,i=[X[0],X[X.length-1]];else{const ae=qi.analyze(i);X===0?p=[ae.min,ae.max]:p=qi.limits(ae,"e",X)}return te}return p},te.domain=function(X){if(!arguments.length)return s;s=X.slice(0),E=X[0],I=X[X.length-1],f=[];const ae=y.length;if(X.length===ae&&E!==I)for(let le of Array.from(X))f.push((le-E)/(I-E));else{for(let le=0;le<ae;le++)f.push(le/(ae-1));if(X.length>2){const le=X.map((ye,De)=>De/(X.length-1)),ge=X.map(ye=>(ye-E)/(I-E));ge.every((ye,De)=>le[De]===ye)||(ie=ye=>{if(ye<=0||ye>=1)return ye;let De=0;for(;ye>=ge[De+1];)De++;const He=(ye-ge[De])/(ge[De+1]-ge[De]);return le[De]+He*(le[De+1]-le[De])})}}return i=[E,I],te},te.mode=function(X){return arguments.length?(t=X,W(),te):t},te.range=function(X,ae){return V(X),te},te.out=function(X){return S=X,te},te.spread=function(X){return arguments.length?(r=X,te):r},te.correctLightness=function(X){return X==null&&(X=!0),L=X,W(),L?J=function(ae){const le=Q(0,!0).lab()[0],ge=Q(1,!0).lab()[0],ye=le>ge;let De=Q(ae,!0).lab()[0];const He=le+(ge-le)*ae;let Be=De-He,Ee=0,Fe=1,at=20;for(;Math.abs(Be)>.01&&at-- >0;)(function(){return ye&&(Be*=-1),Be<0?(Ee=ae,ae+=(Fe-ae)*.5):(Fe=ae,ae+=(Ee-ae)*.5),De=Q(ae,!0).lab()[0],Be=De-He})();return ae}:J=ae=>ae,te},te.padding=function(X){return X!=null?(Bi(X)==="number"&&(X=[X,X]),a=X,te):a},te.colors=function(X,ae){arguments.length<2&&(ae="hex");let le=[];if(arguments.length===0)le=y.slice(0);else if(X===1)le=[te(.5)];else if(X>1){const ge=i[0],ye=i[1]-ge;le=yUe(0,X).map(De=>te(ge+De/(X-1)*ye))}else{e=[];let ge=[];if(p&&p.length>2)for(let ye=1,De=p.length,He=1<=De;He?ye<De:ye>De;He?ye++:ye--)ge.push((p[ye-1]+p[ye])*.5);else ge=i;le=ge.map(ye=>te(ye))}return qi[ae]&&(le=le.map(ge=>ge[ae]())),le},te.cache=function(X){return X!=null?(j=X,te):j},te.gamma=function(X){return X!=null?(k=X,te):k},te.nodata=function(X){return X!=null?(n=qi(X),te):n},te}function yUe(e,t,n){let r=[],i=e<t,s=t;for(let f=e;i?f<s:f>s;i?f++:f--)r.push(f);return r}const _Ue=function(e){let t=[1,1];for(let n=1;n<e;n++){let r=[1];for(let i=1;i<=t.length;i++)r[i]=(t[i]||0)+t[i-1];t=r}return t},vUe=function(e){let t,n,r,i;if(e=e.map(s=>new zn(s)),e.length===2)[n,r]=e.map(s=>s.lab()),t=function(s){const f=[0,1,2].map(a=>n[a]+s*(r[a]-n[a]));return new zn(f,"lab")};else if(e.length===3)[n,r,i]=e.map(s=>s.lab()),t=function(s){const f=[0,1,2].map(a=>(1-s)*(1-s)*n[a]+2*(1-s)*s*r[a]+s*s*i[a]);return new zn(f,"lab")};else if(e.length===4){let s;[n,r,i,s]=e.map(f=>f.lab()),t=function(f){const a=[0,1,2].map(p=>(1-f)*(1-f)*(1-f)*n[p]+3*(1-f)*(1-f)*f*r[p]+3*(1-f)*f*f*i[p]+f*f*f*s[p]);return new zn(a,"lab")}}else if(e.length>=5){let s,f,a;s=e.map(p=>p.lab()),a=e.length-1,f=_Ue(a),t=function(p){const y=1-p,S=[0,1,2].map(E=>s.reduce((I,L,N)=>I+f[N]*y**(a-N)*p**N*L[E],0));return new zn(S,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return t},bUe=e=>{const t=vUe(e);return t.scale=()=>xx(t),t},{round:Ffe}=Math;zn.prototype.rgb=function(e=!0){return e===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Ffe)};zn.prototype.rgba=function(e=!0){return this._rgb.slice(0,4).map((t,n)=>n<3?e===!1?t:Ffe(t):t)};const xUe=(...e)=>new zn(...e,"rgb");Object.assign(qi,{rgb:xUe});bi.format.rgb=(...e)=>{const t=Ti(e,"rgba");return t[3]===void 0&&(t[3]=1),t};bi.autodetect.push({p:3,test:(...e)=>{if(e=Ti(e,"rgba"),Bi(e)==="array"&&(e.length===3||e.length===4&&Bi(e[3])=="number"&&e[3]>=0&&e[3]<=1))return"rgb"}});const Ep=(e,t,n)=>{if(!Ep[n])throw new Error("unknown blend mode "+n);return Ep[n](e,t)},l0=e=>(t,n)=>{const r=qi(n).rgb(),i=qi(t).rgb();return qi.rgb(e(r,i))},u0=e=>(t,n)=>{const r=[];return r[0]=e(t[0],n[0]),r[1]=e(t[1],n[1]),r[2]=e(t[2],n[2]),r},wUe=e=>e,SUe=(e,t)=>e*t/255,TUe=(e,t)=>e>t?t:e,EUe=(e,t)=>e>t?e:t,AUe=(e,t)=>255*(1-(1-e/255)*(1-t/255)),OUe=(e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)),CUe=(e,t)=>255*(1-(1-t/255)/(e/255)),MUe=(e,t)=>e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e);Ep.normal=l0(u0(wUe));Ep.multiply=l0(u0(SUe));Ep.screen=l0(u0(AUe));Ep.overlay=l0(u0(OUe));Ep.darken=l0(u0(TUe));Ep.lighten=l0(u0(EUe));Ep.dodge=l0(u0(MUe));Ep.burn=l0(u0(CUe));const{pow:DUe,sin:IUe,cos:PUe}=Math;function RUe(e=300,t=-1.5,n=1,r=1,i=[0,1]){let s=0,f;Bi(i)==="array"?f=i[1]-i[0]:(f=0,i=[i,i]);const a=function(p){const y=Oy*((e+120)/360+t*p),S=DUe(i[0]+f*p,r),I=(s!==0?n[0]+p*s:n)*S*(1-S)/2,L=PUe(y),N=IUe(y),j=S+I*(-.14861*L+1.78277*N),k=S+I*(-.29227*L-.90649*N),V=S+I*(1.97294*L);return qi(GV([j*255,k*255,V*255,1]))};return a.start=function(p){return p==null?e:(e=p,a)},a.rotations=function(p){return p==null?t:(t=p,a)},a.gamma=function(p){return p==null?r:(r=p,a)},a.hue=function(p){return p==null?n:(n=p,Bi(n)==="array"?(s=n[1]-n[0],s===0&&(n=n[1])):s=0,a)},a.lightness=function(p){return p==null?i:(Bi(p)==="array"?(i=p,f=p[1]-p[0]):(i=[p,p],f=0),a)},a.scale=()=>qi.scale(a),a.hue(n),a}const kUe="0123456789abcdef",{floor:LUe,random:zUe}=Math,NUe=(e=zUe)=>{let t="#";for(let n=0;n<6;n++)t+=kUe.charAt(LUe(e()*16));return new zn(t,"hex")},{log:QX,pow:FUe,floor:BUe,abs:jUe}=Math;function Bfe(e,t=null){const n={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Bi(e)==="object"&&(e=Object.values(e)),e.forEach(r=>{t&&Bi(r)==="object"&&(r=r[t]),r!=null&&!isNaN(r)&&(n.values.push(r),n.sum+=r,r<n.min&&(n.min=r),r>n.max&&(n.max=r),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(r,i)=>JV(n,r,i),n}function JV(e,t="equal",n=7){Bi(e)=="array"&&(e=Bfe(e));const{min:r,max:i}=e,s=e.values.sort((a,p)=>a-p);if(n===1)return[r,i];const f=[];if(t.substr(0,1)==="c"&&(f.push(r),f.push(i)),t.substr(0,1)==="e"){f.push(r);for(let a=1;a<n;a++)f.push(r+a/n*(i-r));f.push(i)}else if(t.substr(0,1)==="l"){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const a=Math.LOG10E*QX(r),p=Math.LOG10E*QX(i);f.push(r);for(let y=1;y<n;y++)f.push(FUe(10,a+y/n*(p-a)));f.push(i)}else if(t.substr(0,1)==="q"){f.push(r);for(let a=1;a<n;a++){const p=(s.length-1)*a/n,y=BUe(p);if(y===p)f.push(s[y]);else{const S=p-y;f.push(s[y]*(1-S)+s[y+1]*S)}}f.push(i)}else if(t.substr(0,1)==="k"){let a;const p=s.length,y=new Array(p),S=new Array(n);let E=!0,I=0,L=null;L=[],L.push(r);for(let k=1;k<n;k++)L.push(r+k/n*(i-r));for(L.push(i);E;){for(let V=0;V<n;V++)S[V]=0;for(let V=0;V<p;V++){const K=s[V];let J=Number.MAX_VALUE,ie;for(let Q=0;Q<n;Q++){const W=jUe(L[Q]-K);W<J&&(J=W,ie=Q),S[ie]++,y[V]=ie}}const k=new Array(n);for(let V=0;V<n;V++)k[V]=null;for(let V=0;V<p;V++)a=y[V],k[a]===null?k[a]=s[V]:k[a]+=s[V];for(let V=0;V<n;V++)k[V]*=1/S[V];E=!1;for(let V=0;V<n;V++)if(k[V]!==L[V]){E=!0;break}L=k,I++,I>200&&(E=!1)}const N={};for(let k=0;k<n;k++)N[k]=[];for(let k=0;k<p;k++)a=y[k],N[a].push(s[k]);let j=[];for(let k=0;k<n;k++)j.push(N[k][0]),j.push(N[k][N[k].length-1]);j=j.sort((k,V)=>k-V),f.push(j[0]);for(let k=1;k<j.length;k+=2){const V=j[k];!isNaN(V)&&f.indexOf(V)===-1&&f.push(V)}}return f}const UUe=(e,t)=>{e=new zn(e),t=new zn(t);const n=e.luminance(),r=t.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const JX=.027,$Ue=5e-4,VUe=.1,eZ=1.14,bM=.022,tZ=1.414,qUe=(e,t)=>{e=new zn(e),t=new zn(t),e.alpha()<1&&(e=Jw(t,e,e.alpha(),"rgb"));const n=nZ(...e.rgb()),r=nZ(...t.rgb()),i=n>=bM?n:n+Math.pow(bM-n,tZ),s=r>=bM?r:r+Math.pow(bM-r,tZ),f=Math.pow(s,.56)-Math.pow(i,.57),a=Math.pow(s,.65)-Math.pow(i,.62),p=Math.abs(s-i)<$Ue?0:i<s?f*eZ:a*eZ;return(Math.abs(p)<VUe?0:p>0?p-JX:p+JX)*100};function nZ(e,t,n){return .2126729*Math.pow(e/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(n/255,2.4)}const{sqrt:Sy,pow:Gs,min:HUe,max:GUe,atan2:rZ,abs:iZ,cos:xM,sin:aZ,exp:YUe,PI:oZ}=Math;function WUe(e,t,n=1,r=1,i=1){var s=function(Pe){return 360*Pe/(2*oZ)},f=function(Pe){return 2*oZ*Pe/360};e=new zn(e),t=new zn(t);const[a,p,y]=Array.from(e.lab()),[S,E,I]=Array.from(t.lab()),L=(a+S)/2,N=Sy(Gs(p,2)+Gs(y,2)),j=Sy(Gs(E,2)+Gs(I,2)),k=(N+j)/2,V=.5*(1-Sy(Gs(k,7)/(Gs(k,7)+Gs(25,7)))),K=p*(1+V),J=E*(1+V),ie=Sy(Gs(K,2)+Gs(y,2)),Q=Sy(Gs(J,2)+Gs(I,2)),W=(ie+Q)/2,te=s(rZ(y,K)),X=s(rZ(I,J)),ae=te>=0?te:te+360,le=X>=0?X:X+360,ge=iZ(ae-le)>180?(ae+le+360)/2:(ae+le)/2,ye=1-.17*xM(f(ge-30))+.24*xM(f(2*ge))+.32*xM(f(3*ge+6))-.2*xM(f(4*ge-63));let De=le-ae;De=iZ(De)<=180?De:le<=ae?De+360:De-360,De=2*Sy(ie*Q)*aZ(f(De)/2);const He=S-a,Be=Q-ie,Ee=1+.015*Gs(L-50,2)/Sy(20+Gs(L-50,2)),Fe=1+.045*W,at=1+.015*W*ye,yt=30*YUe(-Gs((ge-275)/25,2)),Ke=-(2*Sy(Gs(W,7)/(Gs(W,7)+Gs(25,7))))*aZ(2*f(yt)),it=Sy(Gs(He/(n*Ee),2)+Gs(Be/(r*Fe),2)+Gs(De/(i*at),2)+Ke*(Be/(r*Fe))*(De/(i*at)));return GUe(0,HUe(100,it))}function XUe(e,t,n="lab"){e=new zn(e),t=new zn(t);const r=e.get(n),i=t.get(n);let s=0;for(let f in r){const a=(r[f]||0)-(i[f]||0);s+=a*a}return Math.sqrt(s)}const ZUe=(...e)=>{try{return new zn(...e),!0}catch{return!1}},KUe={cool(){return xx([qi.hsl(180,1,.9),qi.hsl(250,.7,.4)])},hot(){return xx(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Kj={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},jfe=Object.keys(Kj),sZ=new Map(jfe.map(e=>[e.toLowerCase(),e])),QUe=typeof Proxy=="function"?new Proxy(Kj,{get(e,t){const n=t.toLowerCase();if(sZ.has(n))return e[sZ.get(n)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(jfe)}}):Kj,JUe=(...e)=>{e=Ti(e,"cmyk");const[t,n,r,i]=e,s=e.length>4?e[4]:1;return i===1?[0,0,0,s]:[t>=1?0:255*(1-t)*(1-i),n>=1?0:255*(1-n)*(1-i),r>=1?0:255*(1-r)*(1-i),s]},{max:lZ}=Math,e$e=(...e)=>{let[t,n,r]=Ti(e,"rgb");t=t/255,n=n/255,r=r/255;const i=1-lZ(t,lZ(n,r)),s=i<1?1/(1-i):0,f=(1-t-i)*s,a=(1-n-i)*s,p=(1-r-i)*s;return[f,a,p,i]};zn.prototype.cmyk=function(){return e$e(this._rgb)};const t$e=(...e)=>new zn(...e,"cmyk");Object.assign(qi,{cmyk:t$e});bi.format.cmyk=JUe;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"cmyk"),Bi(e)==="array"&&e.length===4)return"cmyk"}});const n$e=(...e)=>{const t=Ti(e,"hsla");let n=ZS(e)||"lsa";return t[0]=Qh(t[0]||0)+"deg",t[1]=Qh(t[1]*100)+"%",t[2]=Qh(t[2]*100)+"%",n==="hsla"||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),n="hsla"):t.length=3,`${n.substr(0,3)}(${t.join(" ")})`},r$e=(...e)=>{const t=Ti(e,"lab");let n=ZS(e)||"lab";return t[0]=Qh(t[0])+"%",t[1]=Qh(t[1]),t[2]=Qh(t[2]),n==="laba"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`},i$e=(...e)=>{const t=Ti(e,"lch");let n=ZS(e)||"lab";return t[0]=Qh(t[0])+"%",t[1]=Qh(t[1]),t[2]=isNaN(t[2])?"none":Qh(t[2])+"deg",n==="lcha"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`},a$e=(...e)=>{const t=Ti(e,"lab");return t[0]=Qh(t[0]*100)+"%",t[1]=Xj(t[1]),t[2]=Xj(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`},Ufe=(...e)=>{const[t,n,r,...i]=Ti(e,"rgb"),[s,f,a]=QV(t,n,r),[p,y,S]=Lfe(s,f,a);return[p,y,S,...i.length>0&&i[0]<1?[i[0]]:[]]},o$e=(...e)=>{const t=Ti(e,"lch");return t[0]=Qh(t[0]*100)+"%",t[1]=Xj(t[1]),t[2]=isNaN(t[2])?"none":Qh(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`},{round:bz}=Math,s$e=(...e)=>{const t=Ti(e,"rgba");let n=ZS(e)||"rgb";if(n.substr(0,3)==="hsl")return n$e(Nfe(t),n);if(n.substr(0,3)==="lab"){const r=Y2();Ry("d50");const i=r$e(WV(t),n);return Ry(r),i}if(n.substr(0,3)==="lch"){const r=Y2();Ry("d50");const i=i$e(ZV(t),n);return Ry(r),i}return n.substr(0,5)==="oklab"?a$e(QV(t)):n.substr(0,5)==="oklch"?o$e(Ufe(t)):(t[0]=bz(t[0]),t[1]=bz(t[1]),t[2]=bz(t[2]),(n==="rgba"||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),n="rgba"),`${n.substr(0,3)}(${t.slice(0,n==="rgb"?3:4).join(" ")})`)},$fe=(...e)=>{e=Ti(e,"lch");const[t,n,r,...i]=e,[s,f,a]=kfe(t,n,r),[p,y,S]=KV(s,f,a);return[p,y,S,...i.length>0&&i[0]<1?[i[0]]:[]]},Uy=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,vp=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,dI=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,ad=/\s*/.source,QS=/\s+/.source,e8=/\s*,\s*/.source,LR=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,JS=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,Vfe=new RegExp("^rgba?\\("+ad+[Uy,Uy,Uy].join(QS)+JS+"\\)$"),qfe=new RegExp("^rgb\\("+ad+[Uy,Uy,Uy].join(e8)+ad+"\\)$"),Hfe=new RegExp("^rgba\\("+ad+[Uy,Uy,Uy,vp].join(e8)+ad+"\\)$"),Gfe=new RegExp("^hsla?\\("+ad+[LR,dI,dI].join(QS)+JS+"\\)$"),Yfe=new RegExp("^hsl?\\("+ad+[LR,dI,dI].join(e8)+ad+"\\)$"),Wfe=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Xfe=new RegExp("^lab\\("+ad+[vp,vp,vp].join(QS)+JS+"\\)$"),Zfe=new RegExp("^lch\\("+ad+[vp,vp,LR].join(QS)+JS+"\\)$"),Kfe=new RegExp("^oklab\\("+ad+[vp,vp,vp].join(QS)+JS+"\\)$"),Qfe=new RegExp("^oklch\\("+ad+[vp,vp,LR].join(QS)+JS+"\\)$"),{round:Jfe}=Math,aw=e=>e.map((t,n)=>n<=2?rx(Jfe(t),0,255):t),Ys=(e,t=0,n=100,r=!1)=>(typeof e=="string"&&e.endsWith("%")&&(e=parseFloat(e.substring(0,e.length-1))/100,r?e=t+(e+1)*.5*(n-t):e=t+e*(n-t)),+e),cc=(e,t)=>e==="none"?t:e,t8=e=>{if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];let t;if(bi.format.named)try{return bi.format.named(e)}catch{}if((t=e.match(Vfe))||(t=e.match(qfe))){let n=t.slice(1,4);for(let i=0;i<3;i++)n[i]=+Ys(cc(n[i],0),0,255);n=aw(n);const r=t[4]!==void 0?+Ys(t[4],0,1):1;return n[3]=r,n}if(t=e.match(Hfe)){const n=t.slice(1,5);for(let r=0;r<4;r++)n[r]=+Ys(n[r],0,255);return n}if((t=e.match(Gfe))||(t=e.match(Yfe))){const n=t.slice(1,4);n[0]=+cc(n[0].replace("deg",""),0),n[1]=+Ys(cc(n[1],0),0,100)*.01,n[2]=+Ys(cc(n[2],0),0,100)*.01;const r=aw(Zj(n)),i=t[4]!==void 0?+Ys(t[4],0,1):1;return r[3]=i,r}if(t=e.match(Wfe)){const n=t.slice(1,4);n[1]*=.01,n[2]*=.01;const r=Zj(n);for(let i=0;i<3;i++)r[i]=Jfe(r[i]);return r[3]=+t[4],r}if(t=e.match(Xfe)){const n=t.slice(1,4);n[0]=Ys(cc(n[0],0),0,100),n[1]=Ys(cc(n[1],0),-125,125,!0),n[2]=Ys(cc(n[2],0),-125,125,!0);const r=Y2();Ry("d50");const i=aw(YV(n));Ry(r);const s=t[4]!==void 0?+Ys(t[4],0,1):1;return i[3]=s,i}if(t=e.match(Zfe)){const n=t.slice(1,4);n[0]=Ys(n[0],0,100),n[1]=Ys(cc(n[1],0),0,150,!1),n[2]=+cc(n[2].replace("deg",""),0);const r=Y2();Ry("d50");const i=aw(XV(n));Ry(r);const s=t[4]!==void 0?+Ys(t[4],0,1):1;return i[3]=s,i}if(t=e.match(Kfe)){const n=t.slice(1,4);n[0]=Ys(cc(n[0],0),0,1),n[1]=Ys(cc(n[1],0),-.4,.4,!0),n[2]=Ys(cc(n[2],0),-.4,.4,!0);const r=aw(KV(n)),i=t[4]!==void 0?+Ys(t[4],0,1):1;return r[3]=i,r}if(t=e.match(Qfe)){const n=t.slice(1,4);n[0]=Ys(cc(n[0],0),0,1),n[1]=Ys(cc(n[1],0),0,.4,!1),n[2]=+cc(n[2].replace("deg",""),0);const r=aw($fe(n)),i=t[4]!==void 0?+Ys(t[4],0,1):1;return r[3]=i,r}};t8.test=e=>Vfe.test(e)||Gfe.test(e)||Xfe.test(e)||Zfe.test(e)||Kfe.test(e)||Qfe.test(e)||qfe.test(e)||Hfe.test(e)||Yfe.test(e)||Wfe.test(e)||e==="transparent";zn.prototype.css=function(e){return s$e(this._rgb,e)};const l$e=(...e)=>new zn(...e,"css");qi.css=l$e;bi.format.css=t8;bi.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&Bi(e)==="string"&&t8.test(e))return"css"}});bi.format.gl=(...e)=>{const t=Ti(e,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t};const u$e=(...e)=>new zn(...e,"gl");qi.gl=u$e;zn.prototype.gl=function(){const e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};zn.prototype.hex=function(e){return Ife(this._rgb,e)};const c$e=(...e)=>new zn(...e,"hex");qi.hex=c$e;bi.format.hex=Dfe;bi.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&Bi(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});const{log:wM}=Math,ehe=e=>{const t=e/100;let n,r,i;return t<66?(n=255,r=t<6?0:-155.25485562709179-.44596950469579133*(r=t-2)+104.49216199393888*wM(r),i=t<20?0:-254.76935184120902+.8274096064007395*(i=t-10)+115.67994401066147*wM(i)):(n=351.97690566805693+.114206453784165*(n=t-55)-40.25366309332127*wM(n),r=325.4494125711974+.07943456536662342*(r=t-50)-28.0852963507957*wM(r),i=255),[n,r,i,1]},{round:f$e}=Math,h$e=(...e)=>{const t=Ti(e,"rgb"),n=t[0],r=t[2];let i=1e3,s=4e4;const f=.4;let a;for(;s-i>f;){a=(s+i)*.5;const p=ehe(a);p[2]/p[0]>=r/n?s=a:i=a}return f$e(a)};zn.prototype.temp=zn.prototype.kelvin=zn.prototype.temperature=function(){return h$e(this._rgb)};const xz=(...e)=>new zn(...e,"temp");Object.assign(qi,{temp:xz,kelvin:xz,temperature:xz});bi.format.temp=bi.format.kelvin=bi.format.temperature=ehe;zn.prototype.oklch=function(){return Ufe(this._rgb)};const d$e=(...e)=>new zn(...e,"oklch");Object.assign(qi,{oklch:d$e});bi.format.oklch=$fe;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"oklch"),Bi(e)==="array"&&e.length===3)return"oklch"}});Object.assign(qi,{analyze:Bfe,average:pUe,bezier:bUe,blend:Ep,brewer:QUe,Color:zn,colors:Qw,contrast:UUe,contrastAPCA:qUe,cubehelix:RUe,deltaE:WUe,distance:XUe,input:bi,interpolate:Jw,limits:JV,mix:Jw,random:NUe,scale:xx,scales:KUe,valid:ZUe});const the=(e,t)=>{let n=e.map(r=>r[t]).filter(r=>r>=0);return{maxValue:Math.max(...n),minValue:Math.min(...n),maxRank:n.length}},nhe=(e,t,n,r,i,s)=>{t===void 0&&(t=X$),r===void 0&&(r=aue),i===void 0&&(i=oue);let f;f=xx(r).mode(i).domain([0,Math.max(...t)]),s===void 0&&(s="linear");let a=["interpolate",[s],["get",e]],p=[];return t.forEach(y=>{var S=f(y).hex("rgb");a.push(y),a.push(S),p.push([y,S])}),{colorExp:a,legendContent:p}},p$e=(e,t,n,r,i,s,f,a)=>{let p=xx(r);p=p.mode(i);var y=["match",["get",n]],S=["match",["get",n]];let E=[],I=[];a===void 0?(a=the(e,t),console.log("minMax on the fly",a)):console.log("minMax provided",a),a.maxValue,a.minValue,E=JV(e.map(N=>N[t]),f,s).slice(1),I=E.map(N=>{let j=E.indexOf(E.filter(V=>N<=V)[0])/E.length;return xx(r).classes(s)(j).brighten(.25).saturate(.25).hex("rgb")}),e.forEach(N=>{let j=E.indexOf(E.filter(V=>N[t]<=V)[0])/E.length,k=p.classes(s)(j).brighten(.25).saturate(.25).hex("rgb");y.push(N[n],k)}),e.forEach(N=>{let j=N[t]*500;S.push(N[n],j)});let L={method:f,content:FNe(E,I)};return y.push("rgba(255,255,255,0)"),S.push(0),{styleExp:y,legendContent:L,heightExp:S}},m$e={[UV.type]:(e,t)=>{e.progress.tab=t.payload},[cfe.type]:(e,t)=>{e.progress.isFetching=!0},[ffe.type]:(e,t)=>{e.progress.isFetching=!1;const{data:n,pathArray:r,keepACopy:i}=t.payload;if(Ib(e,r,n),i===!0){let s=["refData",r[r.length-1]];Ib(e,s,n)}},[hfe.type]:(e,t)=>{e.progress.isFetching=!1,console.log(t.payload)},[_je.type]:(e,t)=>{e.progress.isFetching=t.payload.isFetching},[DR.type]:(e,t)=>{t.payload!==void 0&&(console.log(t.payload),e.progress.messages.push(t.payload)),e.progress.isThinking=e.progress.isThinking+1},[IR.type]:(e,t)=>{t.payload!==void 0&&(console.log(t.payload),e.progress.messages.push(t.payload)),e.progress.isThinking=e.progress.isThinking-1},[vje.type]:(e,t)=>{const n=e.rainfallEvents.list;let r=n.map(i=>i.endDt).sort()[n.length-1];e.rainfallEvents.stats.latest=r,e.rainfallEvents.stats.longest=Math.max(...n.map(i=>i.hours)),e.rainfallEvents.stats.maxDate=Sn(r).endOf("month").format()},[$V.type]:(e,t)=>{const{contextType:n,startDt:r,endDt:i}=t.payload;let s=dp(e,n);s.startDt=r,s.endDt=i,hO(e).list.filter(f=>f.selected).forEach(f=>f.selected=!1)},[dfe.type]:(e,t)=>{let{eventid:n,contextType:r}=t.payload,i=kje(e,n);i.selected=!0,Lje(e,n).forEach((a,p)=>a.selected=!1);let f=dp(e,r);f.startDt=i.startDt,f.endDt=i.endDt},[fI.type]:(e,t)=>{const{contextType:n,sensorLocationType:r,selectedOptions:i}=t.payload;i!==null?dp(e,n).sensorLocations[r]=i.filter(s=>s!==null):dp(e,n).sensorLocations[r]=[]},[G2.type]:(e,t)=>{const{contextType:n,sensorLocationType:r,selectedOptions:i}=t.payload;let s=i.map(f=>f.value);i!==null?Kw(e,r).forEach((f,a)=>{Fy(s,f.id)?f.properties.selected=!0:f.properties.selected=!1}):Kw(e,r).forEach((f,a)=>{f.properties.selected=!1})},[pfe.type]:(e,t)=>{let{rollup:n,contextType:r}=t.payload;dp(e,r).rollup=n},[mfe.type]:(e,t)=>{let{fetchKwargs:n,requestId:r,contextType:i,status:s,messages:f}=t.payload,a=xw(e,r,i);a==null?t0(e,i).push({fetchKwargs:n,requestId:r,isFetching:1,isActive:!1,results:!1,status:s,messages:f}):a.isFetching=a.isFetching+1},[yfe.type]:(e,t)=>{let{contextType:n,requestId:r}=t.payload;e.fetchKwargs[n].history=t0(e,n).filter(i=>i.requestId!==r)},[gfe.type]:(e,t)=>{let{requestId:n,contextType:r,results:i,processedKwargs:s,status:f,messages:a}=t.payload;console.log("request",n,f),Oje(e,n,r).forEach(p=>{p.isFetching=p.isFetching-1,p.results={...i,...p.results},p.processedKwargs=s,p.status=f,p.messages=a})},[zb.type]:(e,t)=>{let{requestId:n,results:r,status:i,messages:s}=t.payload;console.log(n,i);let f=Mje(e,n);f!==void 0&&(f.isFetching=f.isFetching-1,f.status=i,f.messages=s)},[XS.type]:(e,t)=>{let{requestId:n,contextType:r}=t.payload,i=xw(e,n,r);i!==void 0&&(Cje(e,n,r).forEach(s=>s.isActive=!1),i.isActive=!0,wu(i.results).forEach(s=>{console.log(`getting reference ${s} layer`);let f=ez(e.refData[s].data),a=i.results[s];console.log(`joining ${s} results to layer`);let p=Vje(f,a,"properties.id","id");console.log(`pushing udpated ${s} results layer to map`),cz(e,s).data=p}),wu(zl).filter(s=>!Fy(wu(i.results),s)).forEach(s=>{console.log(s);let f=ez(e.refData[s].data);cz(e,s).data=f}))},[qV.type]:(e,t)=>{let{lyrSrcNames:n}=t.payload;n===void 0&&(n=wu(zl)),n.length>0&&n.forEach(r=>{if(vw(e.refData,r)){let i=ez(e.refData[r].data);cz(e,r).data=i}})},[bje.type]:(e,t)=>{e.eventFilters.maxHours=t.payload.maxHours},[sfe.type]:(e,t)=>(e.progress.mapLoaded||(e.progress.mapLoaded=!0),e),[lfe.type]:(e,t)=>(e.mapStyle=t.payload,e.progress.initialStyleLoaded||(e.progress.initialStyleLoaded=!0),e),[ufe.type]:(e,t)=>{fR(t.payload,(n,r)=>{if(vw(n,"INDEX")){let{INDEX:i,...s}=n,f=[...e.mapStyle.layers];f.splice(i,0,s),e.mapStyle.layers=f}else e.mapStyle.layers.push(n)})},[Sje.type]:(e,t)=>{const{data:n,path:r,how:i}=t.payload;if(i==="replace")Ib(e,r,n);else if(i==="append"){let s=rf(e,r);Ib(e,r,[...s,...n])}},[wje.type]:(e,t)=>{let{requestId:n,contextType:r,sensor:i}=t.payload,s=xw(e,n,r),f=wu(s.results),a=[];f.forEach(S=>{a=a.concat(s.results[S])});let p=the(a,"total");console.log(p);let y=p$e(a,"total","id",aue,oue,PIe,"e",p);Ib(s,["styleExp",i],y.styleExp),Ib(s,["heightExp",i],y.heightExp),Ib(s,["legendContent",i],y.legendContent),s.stats=p},[xje.type]:(e,t)=>{let{requestId:n,contextType:r,sensor:i}=t.payload,s=xw(e,n,r),f=wu(s.results),a=wu(zl).filter(p=>!Fy(f,p));f.forEach(p=>{if(vw(s,["styleExp",p])&&vw(s,["heightExp",p])){let y=s.styleExp[p],S=s.heightExp[p],E=[`${p}-results`,`${p}-results-3d`];VX(e,E).forEach(I=>{I.paint[`${I.type}-color`]=y,I.type=="fill-extrusion"?(I.paint[`${I.type}-base`]=0,I.paint[`${I.type}-height`]=S,I.paint[`${I.type}-opacity`]=1):I.paint[`${I.type}-opacity`]=.5})}else console.log("style and legend not previously calculated.")}),a.forEach(p=>{let y=[`${p}-results`];VX(e,y).forEach(S=>{S.paint[`${S.type}-color`]="#fff",S.paint[`${S.type}-opacity`]=0})})},[VV.type]:(e,t)=>{const{breaks:n}=t.payload||{},{colorExp:r,legendContent:i}=nhe("total",n),s=rf(e,["mapStyle","layers"],[]);IIe.forEach(f=>{if(!Array.isArray(s))return;const a=s.find(p=>p.id===f);if(!a||!a.type||!a.paint){console.debug(`[applyColorStretch] skipping missing/unready layer "${f}"`);return}a.paint[`${a.type}-color`]=r}),e.mapLegend||(e.mapLegend={}),e.mapLegend.content=Array.isArray(i)?i:[]}},g$e=yje(c6e,e=>{Object.entries(m$e).forEach(([t,n])=>{e.addCase(t,n)})}),Hv=pje({reducer:g$e,devTools:!0});function ow(e){return function(t){const{url:n,pathArray:r,transformer:i,keepACopy:s}=e;t(DR(`getting data from "${n}"`)),t(cfe(n));let f;return _s({url:n,method:"GET"}).then(a=>(i?f=i(a.data):f=a.data,t(ffe({data:f,pathArray:r,keepACopy:s})),!0),a=>(console.log("An error occurred.",a),t(hfe("An error occurred.")),!1)).finally(()=>t(IR(`data from "${n}" loaded to ${r.join(".")}`)))}}function y$e(e){return Promise.all([new Promise((t,n)=>{let r=e(ow({url:bIe,pathArray:["globalConfig"],transformer:!1,keepACopy:!1}));t(r)}),new Promise((t,n)=>{let r=e(ow({url:xIe,pathArray:["rainfallEvents","list"],transformer:$je,keepACopy:!1}));t(r)}),new Promise((t,n)=>{let r=e(ow({url:wIe,pathArray:["stats","latest"],transformer:!1,keepACopy:!1}));t(r)}),new Promise((t,n)=>{let r=e(ow({url:EIe,pathArray:["refData","lookups"],transformer:!1,keepACopy:!1}));t(r)}),new Promise((t,n)=>{let r=e(ow({url:TIe,pathArray:["mapStyle","sources","gauge"],transformer:Uje,keepACopy:!0}));t(r)}),new Promise((t,n)=>{let r=e(ow({url:SIe,pathArray:["mapStyle","sources","pixel"],transformer:jje,keepACopy:!0}));t(r)})])}function _$e(e){return function(t){t(DR("Loading reference data and map layers")),y$e(t).then(n=>{t(ufe(MIe)),t(VV({breaks:X$}))}).then(()=>{const n=Hv.getState(),r=rf(n,"stats.latest",{}),i=Sn().toISOString(),s=({contextType:f,rainfallDataType:a,lookbackAmount:p,lookbackUnit:y})=>{const S=dp(n,f),E=vfe({contextType:f,rainfallDataType:a,rollup:S.rollup,latest:r,rainfallMinDate:W$,now:i}),I=kv({start:E.max.clone().subtract(p,y),end:E.max,min:E.min,max:E.max});t($V({contextType:f,startDt:I.start.toISOString(),endDt:I.end.toISOString()}))};s({contextType:fi.legacyRealtime,rainfallDataType:Qm.realtime,lookbackAmount:2,lookbackUnit:"hour"}),s({contextType:fi.legacyGauge,rainfallDataType:Qm.historic,lookbackAmount:1,lookbackUnit:"month"}),s({contextType:fi.legacyGarr,rainfallDataType:Qm.historic,lookbackAmount:1,lookbackUnit:"month"})}).then(async()=>{QP&&(await l6e({dispatch:t,getState:Hv.getState}),u6e(Hv))}).then(()=>t(IR("Initial data load complete.")))}}const rhe=(e,t,n,r,i,s)=>{let f={url:i,method:"POST"};s!==!1&&(f.data=s),_s(f).then(a=>{let p=a.data;if(console.log(`job ${p.meta.jobId} ${p.status} - ${n}`),Fy(["queued","started"],p.status))setTimeout(()=>rhe(e,t,n,r,p.meta.jobUrl,!1),AIe);else if(Fy(["deferred","failed"],p.status))e(zb({requestId:t,contextType:r,results:{[n]:!1},status:p.status,messages:p.messages}));else if(p.status==="finished")try{p.data===null?(console.log("No data was returned."),e(zb({requestId:t,contextType:r,results:{[n]:!1},status:"error",messages:p.messages}))):(p=Yje(p,{contextType:r,sensor:n}),e(gfe({requestId:t,contextType:r,results:{[n]:p.data},processedKwargs:p.args,status:p.status,messages:p.messages})),e(XS({requestId:t,contextType:r})))}catch(y){console.log("An error occurred processing the result.",y),e(zb({requestId:t,contextType:r,results:{[n]:!1},status:"error",messages:p.messages}))}else p.status==="does not exist"&&(console.log("Job was cancelled."),e(zb({requestId:t,contextType:r,results:{[n]:!1},status:p.status,messages:p.messages})))},a=>{console.log("An error occurred.",a),e(zb({requestId:t,contextType:r,results:{[n]:!1},status:"error",messages:["An error occurred when trying to fetch the rainfall data.",a]}))}).catch(a=>{console.error("An error occurred.",a),e(zb({requestId:t,contextType:r,results:{[n]:!1},status:"error",messages:["An error occurred when trying to fetch the rainfall data.",a]}))})};function v$e(e){let t=Hv.getState();return function(n){let{contextType:r,rainfallDataType:i}=e,s=dp(t,r),f=iue({contextType:r,rainfallDataType:i,rollup:s.rollup}),a=CIe({contextType:r,rainfallDataType:i,rollup:s.rollup}),p=gRe.MD5(s),y=xw(t,p,r);y!==void 0&&(console.log("This exact request was already made. Keeping existing data from request",y.requestId),y.isActive===!1&&n(XS({requestId:y.requestId,contextType:r}))),["gauge","basin"].forEach((E,I)=>{let L=E==="basin"?["pixel","pixels"]:["gauge","gauges"];if(s.sensorLocations[L[0]].length===0)return;let N={start_dt:s.startDt,end_dt:s.endDt,f:s.f};a&&(N.rollup=s.rollup),N[L[1]]=s.sensorLocations[L[0]].map(V=>V.value).join(","),n(mfe({fetchKwargs:s,requestId:p,contextType:r}));let j=`${e0}v2/${L[0]}/${f}/`,k=N;rhe(n,p,L[0],r,j,k)})}}function ihe(e){let{contextType:t,...n}=e;return function(r){let i=n.requestId;n.isActive||r(XS({requestId:i,contextType:t}))}}function b$e(e){let{contextType:t,requestId:n}=e;return function(r,i){let s=i(),f=xw(s,n,t);if(f===void 0)return;let a=f.isActive===!0;if(r(yfe({contextType:t,requestId:n})),!a)return;let p=i(),y=t0(p,t);if(y.length>0){let S=y[y.length-1];r(XS({requestId:S.requestId,contextType:t}))}else{r(qV({lyrSrcNames:wu(zl)}));let S=dp(p,t);wu(zl).forEach(E=>{var L;let I=((L=S==null?void 0:S.sensorLocations)==null?void 0:L[E])||[];I.length>0&&r(G2({contextType:t,sensorLocationType:E,selectedOptions:I}))})}}}function ahe(e){let t=e;return function(n){n(UV(t));let r=Aje(Hv.getState());n(r===void 0?qV({lyrSrcNames:wu(zl)}):XS({requestId:r.requestId,contextType:t}))}}function Pw(e,t=!0){let n=Hv.getState();const{contextType:r,sensorLocationType:i,selectedOptions:s,inputType:f}=e;return async function(a){let p=[],y=[],S=[];(s!==null||rf(s,"length",0)!==0)&&(p=s.filter(I=>I!==null),y=[...dp(n,r).sensorLocations[i]],console.log(i,"existing selection",y.map(I=>I.label)),console.log(i,"incoming selection",p.map(I=>I.label)),f==="geomPicker"?p.length<y.length?S=SNe(y,p,"value"):S=RNe(y,p,"value"):S=NNe(y,p,"value"),console.log(i,"new selection",S.map(I=>I.label)));let E={contextType:r,sensorLocationType:i,selectedOptions:S};a(fI(E)),t&&a(G2(E))}}function x$e(e){let t=Hv.getState();const{selectedOptions:n,contextType:r,inputType:i}=e;return async function(s){Pw(e,!1);const f=nue(r);[zl.gauge,zl.pixel].filter(y=>!f.includes(y)).forEach(y=>{s(Pw({contextType:r,sensorLocationType:y,selectedOptions:[],inputType:i}))}),f.forEach(y=>{let S=new Set;(n!==null||rf(n,"length",0)!==0)&&n.forEach((j,k)=>{let V=Pje(t,j.value);rf(V,y,[]).forEach(K=>S.add(K.toString()))});let E=[...S],L=Kw(t,y).filter(j=>Fy(E,j.properties.id)).map(j=>HV(j));s(Pw({contextType:r,sensorLocationType:y,selectedOptions:L,inputType:i}))})}}class w$e extends be.Component{constructor(t,n){super(t,n),this.handleContextSwitch=this.handleContextSwitch.bind(this),this.handleShow=this.handleShow.bind(this),this.handleClose=this.handleClose.bind(this),this.state={show:!0,showWhich:"AboutButton",content:{AboutButton:{title:Oe.jsxs(xa,{children:[Oe.jsxs(Gr,{lg:8,children:[Oe.jsx("h1",{children:"3RWW Rainfall"}),Oe.jsx("p",{className:"lead",children:"Map and download hyper-local rainfall measurements for Allegheny County"})]}),Oe.jsxs(Gr,{children:[Oe.jsx("small",{children:"A project by "}),Oe.jsx("br",{}),Oe.jsx("img",{className:"brand-logo",src:`${Vv}static/assets/3rww_logo_full_inverse_transparent_blue.png`,placeholder:"3 River Wet Weather",alt:"3RWW Logo"})]})]}),content:Oe.jsx(BIe,{})}}}}handleClose(t){this.setState({show:!1,showWhich:null})}handleShow(t){console.log(t.target.id),this.setState({show:!0,showWhich:t.target.id})}handleContextSwitch(t,n){n&&typeof n.preventDefault=="function"&&n.preventDefault(),this.props.switchContext(t)}render(){return Oe.jsxs("div",{className:"nav-container",children:[Oe.jsxs(EE,{bg:"primary",variant:"dark",expand:"md",children:[Oe.jsxs(EE.Brand,{className:"d-none d-sm-block",children:[Oe.jsx("img",{className:"nav-brand-logo",src:`${Vv}static/assets/3rww_logo_full_inverse_transparent.png`,alt:"3RWW Logo"})," Rainfall"]}),Oe.jsxs(EE.Brand,{className:"d-block d-sm-none",style:{fontSize:.9+"rem"},children:[Oe.jsx("img",{className:"nav-brand-logo-xs",src:`${Vv}static/assets/3rww_logo_full_inverse_transparent.png`,alt:"3RWW Logo"})," Rainfall"]}),Oe.jsx(EE.Toggle,{"aria-controls":"basic-navbar-nav"}),Oe.jsxs(EE.Collapse,{id:"basic-navbar-nav",children:[Oe.jsxs(sp,{variant:"pills",className:"me-auto py-2",defaultActiveKey:fi.legacyRealtime,children:[Oe.jsx(sp.Item,{children:Oe.jsx(sp.Link,{active:this.props.tab===fi.legacyRealtime,eventKey:fi.legacyRealtime,onClick:t=>this.handleContextSwitch(fi.legacyRealtime,t),children:"Real-Time Rainfall"})}),Oe.jsx(sp.Item,{children:Oe.jsx(sp.Link,{active:this.props.tab===fi.legacyGauge,eventKey:fi.legacyGauge,onClick:t=>this.handleContextSwitch(fi.legacyGauge,t),children:"Historical Rain Gauge"})}),Oe.jsx(sp.Item,{children:Oe.jsx(sp.Link,{active:this.props.tab===fi.legacyGarr,eventKey:fi.legacyGarr,onClick:t=>this.handleContextSwitch(fi.legacyGarr,t),children:"Calibrated Radar Rainfall"})})]}),Oe.jsxs(sp,{className:"ms-auto",children:[this.props.globalNotice.show?Oe.jsx(lse,{trigger:"click",placement:"bottom",overlay:Oe.jsxs(ex,{id:"global-notice-popover",children:[Oe.jsx(ex.Header,{as:"h3",children:this.props.globalNotice.title}),Oe.jsx(ex.Body,{children:this.props.globalNotice.content})]}),children:Oe.jsx(sp.Item,{as:"button",className:`mx-3 btn btn-sm text-light btn-${this.props.globalNotice.level}`,id:"noticePopover",children:Oe.jsx(mx,{icon:GEe})})}):null,Oe.jsx(sp.Item,{className:"btn btn-outline-light btn-sm",id:"AboutButton",onClick:this.handleShow,children:"About"})]})]})]}),Oe.jsxs(Zs,{show:this.state.show,onHide:this.handleClose,size:"xl",children:[Oe.jsx(Zs.Header,{closeButton:!0,children:Oe.jsx(Zs.Title,{className:"w-100",children:this.state.showWhich?this.state.content[this.state.showWhich].title:null})}),Oe.jsxs(Zs.Body,{children:[this.props.globalNotice.show?Oe.jsx(xa,{className:"my-3",children:Oe.jsx(Gr,{children:Oe.jsxs(k4,{variant:this.props.globalNotice.level,children:[Oe.jsx(k4.Heading,{children:this.props.globalNotice.title}),Oe.jsx("p",{children:this.props.globalNotice.content})]})})}):"",this.state.showWhich?this.state.content[this.state.showWhich].content:null]}),Oe.jsx(Zs.Footer,{children:Oe.jsx(hc,{variant:"secondary",onClick:this.handleClose,children:"Close"})})]})]})}}function S$e(e){return{isThinking:e.progress.isThinking>0,mapLoaded:e.progress.mapLoaded,tab:e.progress.tab,globalNotice:e.globalConfig.globalNotice}}const T$e={switchContext:ahe},E$e=of(S$e,T$e)(w$e);var dO="delete",Io=5,Xh=1<<Io,pc=Xh-1,ia={};function Qj(){return{value:!1}}function Zh(e){e&&(e.value=!0)}function n8(){}function eS(e){return e.size===void 0&&(e.size=e.__iterate(ohe)),e.size}function n0(e,t){if(typeof t!="number"){var n=t>>>0;if(""+n!==t||n===4294967295)return NaN;t=n}return t<0?eS(e)+t:t}function ohe(){return!0}function pO(e,t,n){return(e===0&&!lhe(e)||n!==void 0&&e<=-n)&&(t===void 0||n!==void 0&&t>=n)}function eT(e,t){return she(e,t,0)}function mO(e,t){return she(e,t,t)}function she(e,t,n){return e===void 0?n:lhe(e)?t===1/0?t:Math.max(0,t+e)|0:t===void 0||t===e?e:Math.min(t,e)|0}function lhe(e){return e<0||e===0&&1/e===-1/0}var uhe="@@__IMMUTABLE_ITERABLE__@@";function vc(e){return!!(e&&e[uhe])}var che="@@__IMMUTABLE_KEYED__@@";function yo(e){return!!(e&&e[che])}var fhe="@@__IMMUTABLE_INDEXED__@@";function Iu(e){return!!(e&&e[fhe])}function gO(e){return yo(e)||Iu(e)}var rs=function(t){return vc(t)?t:xc(t)},fd=(function(e){function t(n){return yo(n)?n:c0(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t})(rs),Bx=(function(e){function t(n){return Iu(n)?n:dd(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t})(rs),tT=(function(e){function t(n){return vc(n)&&!gO(n)?n:iT(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t})(rs);rs.Keyed=fd;rs.Indexed=Bx;rs.Set=tT;var hhe="@@__IMMUTABLE_SEQ__@@";function zR(e){return!!(e&&e[hhe])}var dhe="@@__IMMUTABLE_RECORD__@@";function jx(e){return!!(e&&e[dhe])}function hd(e){return vc(e)||jx(e)}var nT="@@__IMMUTABLE_ORDERED__@@";function Jh(e){return!!(e&&e[nT])}var yO=0,Ap=1,od=2,Jj=typeof Symbol=="function"&&Symbol.iterator,phe="@@iterator",NR=Jj||phe,Sa=function(t){this.next=t};Sa.prototype.toString=function(){return"[Iterator]"};Sa.KEYS=yO;Sa.VALUES=Ap;Sa.ENTRIES=od;Sa.prototype.inspect=Sa.prototype.toSource=function(){return this.toString()};Sa.prototype[NR]=function(){return this};function ko(e,t,n,r){var i=e===0?t:e===1?n:[t,n];return r?r.value=i:r={value:i,done:!1},r}function bc(){return{value:void 0,done:!0}}function r8(e){return Array.isArray(e)?!0:!!FR(e)}function uZ(e){return e&&typeof e.next=="function"}function e6(e){var t=FR(e);return t&&t.call(e)}function FR(e){var t=e&&(Jj&&e[Jj]||e[phe]);if(typeof t=="function")return t}function A$e(e){var t=FR(e);return t&&t===e.entries}function O$e(e){var t=FR(e);return t&&t===e.keys}var rT=Object.prototype.hasOwnProperty;function i8(e){return Array.isArray(e)||typeof e=="string"?!0:e&&typeof e=="object"&&Number.isInteger(e.length)&&e.length>=0&&(e.length===0?Object.keys(e).length===1:e.hasOwnProperty(e.length-1))}var xc=(function(e){function t(n){return n==null?o8():hd(n)?n.toSeq():M$e(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(r,i){var s=this._cache;if(s){for(var f=s.length,a=0;a!==f;){var p=s[i?f-++a:a++];if(r(p[1],p[0],this)===!1)break}return a}return this.__iterateUncached(r,i)},t.prototype.__iterator=function(r,i){var s=this._cache;if(s){var f=s.length,a=0;return new Sa(function(){if(a===f)return bc();var p=s[i?f-++a:a++];return ko(r,p[0],p[1])})}return this.__iteratorUncached(r,i)},t})(rs),c0=(function(e){function t(n){return n==null?o8().toKeyedSeq():vc(n)?yo(n)?n.toSeq():n.fromEntrySeq():jx(n)?n.toSeq():s8(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t})(xc),dd=(function(e){function t(n){return n==null?o8():vc(n)?yo(n)?n.entrySeq():n.toIndexedSeq():jx(n)?n.toSeq().entrySeq():mhe(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t})(xc),iT=(function(e){function t(n){return(vc(n)&&!gO(n)?n:dd(n)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t})(xc);xc.isSeq=zR;xc.Keyed=c0;xc.Set=iT;xc.Indexed=dd;xc.prototype[hhe]=!0;var wx=(function(e){function t(n){this._array=n,this.size=n.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r,i){return this.has(r)?this._array[n0(this,r)]:i},t.prototype.__iterate=function(r,i){for(var s=this._array,f=s.length,a=0;a!==f;){var p=i?f-++a:a++;if(r(s[p],p,this)===!1)break}return a},t.prototype.__iterator=function(r,i){var s=this._array,f=s.length,a=0;return new Sa(function(){if(a===f)return bc();var p=i?f-++a:a++;return ko(r,p,s[p])})},t})(dd),a8=(function(e){function t(n){var r=Object.keys(n).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n):[]);this._object=n,this._keys=r,this.size=r.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r,i){return i!==void 0&&!this.has(r)?i:this._object[r]},t.prototype.has=function(r){return rT.call(this._object,r)},t.prototype.__iterate=function(r,i){for(var s=this._object,f=this._keys,a=f.length,p=0;p!==a;){var y=f[i?a-++p:p++];if(r(s[y],y,this)===!1)break}return p},t.prototype.__iterator=function(r,i){var s=this._object,f=this._keys,a=f.length,p=0;return new Sa(function(){if(p===a)return bc();var y=f[i?a-++p:p++];return ko(r,y,s[y])})},t})(c0);a8.prototype[nT]=!0;var C$e=(function(e){function t(n){this._collection=n,this.size=n.length||n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(r,i){if(i)return this.cacheResult().__iterate(r,i);var s=this._collection,f=e6(s),a=0;if(uZ(f))for(var p;!(p=f.next()).done&&r(p.value,a++,this)!==!1;);return a},t.prototype.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var s=this._collection,f=e6(s);if(!uZ(f))return new Sa(bc);var a=0;return new Sa(function(){var p=f.next();return p.done?p:ko(r,a++,p.value)})},t})(dd),cZ;function o8(){return cZ||(cZ=new wx([]))}function s8(e){var t=l8(e);if(t)return t.fromEntrySeq();if(typeof e=="object")return new a8(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function mhe(e){var t=l8(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function M$e(e){var t=l8(e);if(t)return A$e(e)?t.fromEntrySeq():O$e(e)?t.toSetSeq():t;if(typeof e=="object")return new a8(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}function l8(e){return i8(e)?new wx(e):r8(e)?new C$e(e):void 0}var ghe="@@__IMMUTABLE_MAP__@@";function BR(e){return!!(e&&e[ghe])}function u8(e){return BR(e)&&Jh(e)}function t6(e){return!!(e&&typeof e.equals=="function"&&typeof e.hashCode=="function")}function Nl(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if(typeof e.valueOf=="function"&&typeof t.valueOf=="function"){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!!(t6(e)&&t6(t)&&e.equals(t))}var LE=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(t,n){t|=0,n|=0;var r=t&65535,i=n&65535;return r*i+((t>>>16)*i+r*(n>>>16)<<16>>>0)|0};function jR(e){return e>>>1&1073741824|e&3221225471}var D$e=Object.prototype.valueOf;function Kc(e){if(e==null)return fZ(e);if(typeof e.hashCode=="function")return jR(e.hashCode(e));var t=z$e(e);if(t==null)return fZ(t);switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return I$e(t);case"string":return t.length>N$e?P$e(t):n6(t);case"object":case"function":return k$e(t);case"symbol":return R$e(t);default:if(typeof t.toString=="function")return n6(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function fZ(e){return e===null?1108378658:1108378659}function I$e(e){if(e!==e||e===1/0)return 0;var t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)e/=4294967295,t^=e;return jR(t)}function P$e(e){var t=Tz[e];return t===void 0&&(t=n6(e),Sz===F$e&&(Sz=0,Tz={}),Sz++,Tz[e]=t),t}function n6(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return jR(t)}function R$e(e){var t=pZ[e];return t!==void 0||(t=yhe(),pZ[e]=t),t}function k$e(e){var t;if(r6&&(t=i6.get(e),t!==void 0)||(t=e[Ub],t!==void 0)||!dZ&&(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Ub],t!==void 0||(t=L$e(e),t!==void 0)))return t;if(t=yhe(),r6)i6.set(e,t);else{if(hZ!==void 0&&hZ(e)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(dZ)Object.defineProperty(e,Ub,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(e.propertyIsEnumerable!==void 0&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Ub]=t;else if(e.nodeType!==void 0)e[Ub]=t;else throw new Error("Unable to set a non-enumerable property on object.")}return t}var hZ=Object.isExtensible,dZ=(function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}})();function L$e(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function z$e(e){return e.valueOf!==D$e&&typeof e.valueOf=="function"?e.valueOf(e):e}function yhe(){var e=++wz;return wz&1073741824&&(wz=0),e}var r6=typeof WeakMap=="function",i6;r6&&(i6=new WeakMap);var pZ=Object.create(null),wz=0,Ub="__immutablehash__";typeof Symbol=="function"&&(Ub=Symbol(Ub));var N$e=16,F$e=255,Sz=0,Tz={},UR=(function(e){function t(n,r){this._iter=n,this._useKeys=r,this.size=n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r,i){return this._iter.get(r,i)},t.prototype.has=function(r){return this._iter.has(r)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var r=this,i=c8(this,!0);return this._useKeys||(i.valueSeq=function(){return r._iter.toSeq().reverse()}),i},t.prototype.map=function(r,i){var s=this,f=whe(this,r,i);return this._useKeys||(f.valueSeq=function(){return s._iter.toSeq().map(r,i)}),f},t.prototype.__iterate=function(r,i){var s=this;return this._iter.__iterate(function(f,a){return r(f,a,s)},i)},t.prototype.__iterator=function(r,i){return this._iter.__iterator(r,i)},t})(c0);UR.prototype[nT]=!0;var _he=(function(e){function t(n){this._iter=n,this.size=n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(r){return this._iter.includes(r)},t.prototype.__iterate=function(r,i){var s=this,f=0;return i&&eS(this),this._iter.__iterate(function(a){return r(a,i?s.size-++f:f++,s)},i)},t.prototype.__iterator=function(r,i){var s=this,f=this._iter.__iterator(Ap,i),a=0;return i&&eS(this),new Sa(function(){var p=f.next();return p.done?p:ko(r,i?s.size-++a:a++,p.value,p)})},t})(dd),vhe=(function(e){function t(n){this._iter=n,this.size=n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(r){return this._iter.includes(r)},t.prototype.__iterate=function(r,i){var s=this;return this._iter.__iterate(function(f){return r(f,f,s)},i)},t.prototype.__iterator=function(r,i){var s=this._iter.__iterator(Ap,i);return new Sa(function(){var f=s.next();return f.done?f:ko(r,f.value,f.value,f)})},t})(iT),bhe=(function(e){function t(n){this._iter=n,this.size=n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(r,i){var s=this;return this._iter.__iterate(function(f){if(f){gZ(f);var a=vc(f);return r(a?f.get(1):f[1],a?f.get(0):f[0],s)}},i)},t.prototype.__iterator=function(r,i){var s=this._iter.__iterator(Ap,i);return new Sa(function(){for(;;){var f=s.next();if(f.done)return f;var a=f.value;if(a){gZ(a);var p=vc(a);return ko(r,p?a.get(0):a[0],p?a.get(1):a[1],f)}}})},t})(c0);_he.prototype.cacheResult=UR.prototype.cacheResult=vhe.prototype.cacheResult=bhe.prototype.cacheResult=d8;function xhe(e){var t=gg(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var n=e.reverse.apply(this);return n.flip=function(){return e.reverse()},n},t.has=function(n){return e.includes(n)},t.includes=function(n){return e.has(n)},t.cacheResult=d8,t.__iterateUncached=function(n,r){var i=this;return e.__iterate(function(s,f){return n(f,s,i)!==!1},r)},t.__iteratorUncached=function(n,r){if(n===od){var i=e.__iterator(n,r);return new Sa(function(){var s=i.next();if(!s.done){var f=s.value[0];s.value[0]=s.value[1],s.value[1]=f}return s})}return e.__iterator(n===Ap?yO:Ap,r)},t}function whe(e,t,n){var r=gg(e);return r.size=e.size,r.has=function(i){return e.has(i)},r.get=function(i,s){var f=e.get(i,ia);return f===ia?s:t.call(n,f,i,e)},r.__iterateUncached=function(i,s){var f=this;return e.__iterate(function(a,p,y){return i(t.call(n,a,p,y),p,f)!==!1},s)},r.__iteratorUncached=function(i,s){var f=e.__iterator(od,s);return new Sa(function(){var a=f.next();if(a.done)return a;var p=a.value,y=p[0];return ko(i,y,t.call(n,p[1],y,e),a)})},r}function c8(e,t){var n=this,r=gg(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var i=xhe(e);return i.reverse=function(){return e.flip()},i}),r.get=function(i,s){return e.get(t?i:-1-i,s)},r.has=function(i){return e.has(t?i:-1-i)},r.includes=function(i){return e.includes(i)},r.cacheResult=d8,r.__iterate=function(i,s){var f=this,a=0;return s&&eS(e),e.__iterate(function(p,y){return i(p,t?y:s?f.size-++a:a++,f)},!s)},r.__iterator=function(i,s){var f=0;s&&eS(e);var a=e.__iterator(od,!s);return new Sa(function(){var p=a.next();if(p.done)return p;var y=p.value;return ko(i,t?y[0]:s?n.size-++f:f++,y[1],p)})},r}function She(e,t,n,r){var i=gg(e);return r&&(i.has=function(s){var f=e.get(s,ia);return f!==ia&&!!t.call(n,f,s,e)},i.get=function(s,f){var a=e.get(s,ia);return a!==ia&&t.call(n,a,s,e)?a:f}),i.__iterateUncached=function(s,f){var a=this,p=0;return e.__iterate(function(y,S,E){if(t.call(n,y,S,E))return p++,s(y,r?S:p-1,a)},f),p},i.__iteratorUncached=function(s,f){var a=e.__iterator(od,f),p=0;return new Sa(function(){for(;;){var y=a.next();if(y.done)return y;var S=y.value,E=S[0],I=S[1];if(t.call(n,I,E,e))return ko(s,r?E:p++,I,y)}})},i}function B$e(e,t,n){var r=$x().asMutable();return e.__iterate(function(i,s){r.update(t.call(n,i,s,e),0,function(f){return f+1})}),r.asImmutable()}function j$e(e,t,n){var r=yo(e),i=(Jh(e)?cg():$x()).asMutable();e.__iterate(function(f,a){i.update(t.call(n,f,a,e),function(p){return p=p||[],p.push(r?[a,f]:f),p})});var s=h8(e);return i.map(function(f){return ro(e,s(f))}).asImmutable()}function U$e(e,t,n){var r=yo(e),i=[[],[]];e.__iterate(function(f,a){i[t.call(n,f,a,e)?1:0].push(r?[a,f]:f)});var s=h8(e);return i.map(function(f){return ro(e,s(f))})}function f8(e,t,n,r){var i=e.size;if(pO(t,n,i))return e;if(typeof i>"u"&&(t<0||n<0))return f8(e.toSeq().cacheResult(),t,n,r);var s=eT(t,i),f=mO(n,i),a=f-s,p;a===a&&(p=a<0?0:a);var y=gg(e);return y.size=p===0?p:e.size&&p||void 0,!r&&zR(e)&&p>=0&&(y.get=function(S,E){return S=n0(this,S),S>=0&&S<p?e.get(S+s,E):E}),y.__iterateUncached=function(S,E){var I=this;if(p===0)return 0;if(E)return this.cacheResult().__iterate(S,E);var L=0,N=!0,j=0;return e.__iterate(function(k,V){if(!(N&&(N=L++<s)))return j++,S(k,r?V:j-1,I)!==!1&&j!==p}),j},y.__iteratorUncached=function(S,E){if(p!==0&&E)return this.cacheResult().__iterator(S,E);if(p===0)return new Sa(bc);var I=e.__iterator(S,E),L=0,N=0;return new Sa(function(){for(;L++<s;)I.next();if(++N>p)return bc();var j=I.next();return r||S===Ap||j.done?j:S===yO?ko(S,N-1,void 0,j):ko(S,N-1,j.value[1],j)})},y}function $$e(e,t,n){var r=gg(e);return r.__iterateUncached=function(i,s){var f=this;if(s)return this.cacheResult().__iterate(i,s);var a=0;return e.__iterate(function(p,y,S){return t.call(n,p,y,S)&&++a&&i(p,y,f)}),a},r.__iteratorUncached=function(i,s){var f=this;if(s)return this.cacheResult().__iterator(i,s);var a=e.__iterator(od,s),p=!0;return new Sa(function(){if(!p)return bc();var y=a.next();if(y.done)return y;var S=y.value,E=S[0],I=S[1];return t.call(n,I,E,f)?i===od?y:ko(i,E,I,y):(p=!1,bc())})},r}function The(e,t,n,r){var i=gg(e);return i.__iterateUncached=function(s,f){var a=this;if(f)return this.cacheResult().__iterate(s,f);var p=!0,y=0;return e.__iterate(function(S,E,I){if(!(p&&(p=t.call(n,S,E,I))))return y++,s(S,r?E:y-1,a)}),y},i.__iteratorUncached=function(s,f){var a=this;if(f)return this.cacheResult().__iterator(s,f);var p=e.__iterator(od,f),y=!0,S=0;return new Sa(function(){var E,I,L;do{if(E=p.next(),E.done)return r||s===Ap?E:s===yO?ko(s,S++,void 0,E):ko(s,S++,E.value[1],E);var N=E.value;I=N[0],L=N[1],y&&(y=t.call(n,L,I,a))}while(y);return s===od?E:ko(s,I,L,E)})},i}function V$e(e,t){var n=yo(e),r=[e].concat(t).map(function(f){return vc(f)?n&&(f=fd(f)):f=n?s8(f):mhe(Array.isArray(f)?f:[f]),f}).filter(function(f){return f.size!==0});if(r.length===0)return e;if(r.length===1){var i=r[0];if(i===e||n&&yo(i)||Iu(e)&&Iu(i))return i}var s=new wx(r);return n?s=s.toKeyedSeq():Iu(e)||(s=s.toSetSeq()),s=s.flatten(!0),s.size=r.reduce(function(f,a){if(f!==void 0){var p=a.size;if(p!==void 0)return f+p}},0),s}function Ehe(e,t,n){var r=gg(e);return r.__iterateUncached=function(i,s){if(s)return this.cacheResult().__iterate(i,s);var f=0,a=!1;function p(y,S){y.__iterate(function(E,I){return(!t||S<t)&&vc(E)?p(E,S+1):(f++,i(E,n?I:f-1,r)===!1&&(a=!0)),!a},s)}return p(e,0),f},r.__iteratorUncached=function(i,s){if(s)return this.cacheResult().__iterator(i,s);var f=e.__iterator(i,s),a=[],p=0;return new Sa(function(){for(;f;){var y=f.next();if(y.done!==!1){f=a.pop();continue}var S=y.value;if(i===od&&(S=S[1]),(!t||a.length<t)&&vc(S))a.push(f),f=S.__iterator(i,s);else return n?y:ko(i,p++,S,y)}return bc()})},r}function q$e(e,t,n){var r=h8(e);return e.toSeq().map(function(i,s){return r(t.call(n,i,s,e))}).flatten(!0)}function H$e(e,t){var n=gg(e);return n.size=e.size&&e.size*2-1,n.__iterateUncached=function(r,i){var s=this,f=0;return e.__iterate(function(a){return(!f||r(t,f++,s)!==!1)&&r(a,f++,s)!==!1},i),f},n.__iteratorUncached=function(r,i){var s=e.__iterator(Ap,i),f=0,a;return new Sa(function(){return(!a||f%2)&&(a=s.next(),a.done)?a:f%2?ko(r,f++,t):ko(r,f++,a.value,a)})},n}function tS(e,t,n){t||(t=Ahe);var r=yo(e),i=0,s=e.toSeq().map(function(f,a){return[a,f,i++,n?n(f,a,e):f]}).valueSeq().toArray();return s.sort(function(f,a){return t(f[3],a[3])||f[2]-a[2]}).forEach(r?function(f,a){s[a].length=2}:function(f,a){s[a]=f[1]}),r?c0(s):Iu(e)?dd(s):iT(s)}function SM(e,t,n){if(t||(t=Ahe),n){var r=e.toSeq().map(function(i,s){return[i,n(i,s,e)]}).reduce(function(i,s){return mZ(t,i[1],s[1])?s:i});return r&&r[0]}return e.reduce(function(i,s){return mZ(t,i,s)?s:i})}function mZ(e,t,n){var r=e(n,t);return r===0&&n!==t&&(n==null||n!==n)||r>0}function TM(e,t,n,r){var i=gg(e),s=new wx(n).map(function(f){return f.size});return i.size=r?s.max():s.min(),i.__iterate=function(f,a){for(var p=this.__iterator(Ap,a),y,S=0;!(y=p.next()).done&&f(y.value,S++,this)!==!1;);return S},i.__iteratorUncached=function(f,a){var p=n.map(function(E){return E=rs(E),e6(a?E.reverse():E)}),y=0,S=!1;return new Sa(function(){var E;return S||(E=p.map(function(I){return I.next()}),S=r?E.every(function(I){return I.done}):E.some(function(I){return I.done})),S?bc():ko(f,y++,t.apply(null,E.map(function(I){return I.value})))})},i}function ro(e,t){return e===t?e:zR(e)?t:e.constructor(t)}function gZ(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function h8(e){return yo(e)?fd:Iu(e)?Bx:tT}function gg(e){return Object.create((yo(e)?c0:Iu(e)?dd:iT).prototype)}function d8(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):xc.prototype.cacheResult.call(this)}function Ahe(e,t){return e===void 0&&t===void 0?0:e===void 0?1:t===void 0?-1:e>t?1:e<t?-1:0}function Vm(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),i=0;i<n;i++)r[i]=e[i+t];return r}function p8(e,t){if(!e)throw new Error(t)}function Wf(e){p8(e!==1/0,"Cannot perform this action with an infinite size.")}function Ohe(e){if(i8(e)&&typeof e!="string")return e;if(Jh(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}var G$e=Object.prototype.toString;function m8(e){if(!e||typeof e!="object"||G$e.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t,r=Object.getPrototypeOf(t);r!==null;)n=r,r=Object.getPrototypeOf(n);return n===t}function r0(e){return typeof e=="object"&&(hd(e)||Array.isArray(e)||m8(e))}function W2(e){try{return typeof e=="string"?JSON.stringify(e):String(e)}catch{return JSON.stringify(e)}}function Che(e,t){return hd(e)?e.has(t):r0(e)&&rT.call(e,t)}function g8(e,t,n){return hd(e)?e.get(t,n):Che(e,t)?typeof e.get=="function"?e.get(t):e[t]:n}function pI(e){if(Array.isArray(e))return Vm(e);var t={};for(var n in e)rT.call(e,n)&&(t[n]=e[n]);return t}function Mhe(e,t){if(!r0(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(hd(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!rT.call(e,t))return e;var n=pI(e);return Array.isArray(n)?n.splice(t,1):delete n[t],n}function Dhe(e,t,n){if(!r0(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(hd(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,n)}if(rT.call(e,t)&&n===e[t])return e;var r=pI(e);return r[t]=n,r}function Ux(e,t,n,r){r||(r=n,n=void 0);var i=Ihe(hd(e),e,Ohe(t),0,n,r);return i===ia?n:i}function Ihe(e,t,n,r,i,s){var f=t===ia;if(r===n.length){var a=f?i:t,p=s(a);return p===a?t:p}if(!f&&!r0(t))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,r).map(W2)+"]: "+t);var y=n[r],S=f?ia:g8(t,y,ia),E=Ihe(S===ia?e:hd(S),S,n,r+1,i,s);return E===S?t:E===ia?Mhe(t,y):Dhe(f?e?pp():{}:t,y,E)}function Phe(e,t,n){return Ux(e,t,ia,function(){return n})}function y8(e,t){return Phe(this,e,t)}function Rhe(e,t){return Ux(e,t,function(){return ia})}function _8(e){return Rhe(this,e)}function v8(e,t,n,r){return Ux(e,[t],n,r)}function b8(e,t,n){return arguments.length===1?e(this):v8(this,e,t,n)}function x8(e,t,n){return Ux(this,e,t,n)}function khe(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return zhe(this,e)}function Lhe(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(typeof e!="function")throw new TypeError("Invalid merger function: "+e);return zhe(this,t,e)}function zhe(e,t,n){for(var r=[],i=0;i<t.length;i++){var s=fd(t[i]);s.size!==0&&r.push(s)}return r.length===0?e:e.toSeq().size===0&&!e.__ownerID&&r.length===1?e.constructor(r[0]):e.withMutations(function(f){for(var a=n?function(y,S){v8(f,S,ia,function(E){return E===ia?y:n(E,y,S)})}:function(y,S){f.set(S,y)},p=0;p<r.length;p++)r[p].forEach(a)})}function Y$e(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return vO(e,t)}function W$e(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return vO(t,n,e)}function X$e(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return _O(e,t)}function Z$e(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return _O(t,n,e)}function _O(e,t,n){return vO(e,t,K$e(n))}function vO(e,t,n){if(!r0(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(hd(e))return typeof n=="function"&&e.mergeWith?e.mergeWith.apply(e,[n].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var r=Array.isArray(e),i=e,s=r?Bx:fd,f=r?function(p){i===e&&(i=pI(i)),i.push(p)}:function(p,y){var S=rT.call(i,y),E=S&&n?n(i[y],p,y):p;(!S||E!==i[y])&&(i===e&&(i=pI(i)),i[y]=E)},a=0;a<t.length;a++)s(t[a]).forEach(f);return i}function K$e(e){function t(n,r,i){return r0(n)&&r0(r)&&Q$e(n,r)?vO(n,[r],t):e?e(n,r,i):r}return t}function Q$e(e,t){var n=xc(e),r=xc(t);return Iu(n)===Iu(r)&&yo(n)===yo(r)}function Nhe(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return _O(this,e)}function Fhe(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return _O(this,t,e)}function w8(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Ux(this,e,pp(),function(r){return vO(r,t)})}function S8(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Ux(this,e,pp(),function(r){return _O(r,t)})}function bO(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function xO(){return this.__ownerID?this:this.__ensureOwner(new n8)}function wO(){return this.__ensureOwner()}function T8(){return this.__altered}var $x=(function(e){function t(n){return n==null?pp():BR(n)&&!Jh(n)?n:pp().withMutations(function(r){var i=e(n);Wf(i.size),i.forEach(function(s,f){return r.set(f,s)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return pp().withMutations(function(s){for(var f=0;f<r.length;f+=2){if(f+1>=r.length)throw new Error("Missing value for key: "+r[f]);s.set(r[f],r[f+1])}})},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(r,i){return this._root?this._root.get(0,void 0,r,i):i},t.prototype.set=function(r,i){return vZ(this,r,i)},t.prototype.remove=function(r){return vZ(this,r,ia)},t.prototype.deleteAll=function(r){var i=rs(r);return i.size===0?this:this.withMutations(function(s){i.forEach(function(f){return s.remove(f)})})},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):pp()},t.prototype.sort=function(r){return cg(tS(this,r))},t.prototype.sortBy=function(r,i){return cg(tS(this,i,r))},t.prototype.map=function(r,i){var s=this;return this.withMutations(function(f){f.forEach(function(a,p){f.set(p,r.call(i,a,p,s))})})},t.prototype.__iterator=function(r,i){return new J$e(this,r,i)},t.prototype.__iterate=function(r,i){var s=this,f=0;return this._root&&this._root.iterate(function(a){return f++,r(a[1],a[0],s)},i),f},t.prototype.__ensureOwner=function(r){return r===this.__ownerID?this:r?E8(this.size,this._root,r,this.__hash):this.size===0?pp():(this.__ownerID=r,this.__altered=!1,this)},t})(fd);$x.isMap=BR;var zo=$x.prototype;zo[ghe]=!0;zo[dO]=zo.remove;zo.removeAll=zo.deleteAll;zo.setIn=y8;zo.removeIn=zo.deleteIn=_8;zo.update=b8;zo.updateIn=x8;zo.merge=zo.concat=khe;zo.mergeWith=Lhe;zo.mergeDeep=Nhe;zo.mergeDeepWith=Fhe;zo.mergeIn=w8;zo.mergeDeepIn=S8;zo.withMutations=bO;zo.wasAltered=T8;zo.asImmutable=wO;zo["@@transducer/init"]=zo.asMutable=xO;zo["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])};zo["@@transducer/result"]=function(e){return e.asImmutable()};var X2=function(t,n){this.ownerID=t,this.entries=n};X2.prototype.get=function(t,n,r,i){for(var s=this.entries,f=0,a=s.length;f<a;f++)if(Nl(r,s[f][0]))return s[f][1];return i};X2.prototype.update=function(t,n,r,i,s,f,a){for(var p=s===ia,y=this.entries,S=0,E=y.length;S<E&&!Nl(i,y[S][0]);S++);var I=S<E;if(I?y[S][1]===s:p)return this;if(Zh(a),(p||!I)&&Zh(f),!(p&&y.length===1)){if(!I&&!p&&y.length>=aVe)return eVe(t,y,i,s);var L=t&&t===this.ownerID,N=L?y:Vm(y);return I?p?S===E-1?N.pop():N[S]=N.pop():N[S]=[i,s]:N.push([i,s]),L?(this.entries=N,this):new X2(t,N)}};var nS=function(t,n,r){this.ownerID=t,this.bitmap=n,this.nodes=r};nS.prototype.get=function(t,n,r,i){n===void 0&&(n=Kc(r));var s=1<<((t===0?n:n>>>t)&pc),f=this.bitmap;return(f&s)===0?i:this.nodes[Bhe(f&s-1)].get(t+Io,n,r,i)};nS.prototype.update=function(t,n,r,i,s,f,a){r===void 0&&(r=Kc(i));var p=(n===0?r:r>>>n)&pc,y=1<<p,S=this.bitmap,E=(S&y)!==0;if(!E&&s===ia)return this;var I=Bhe(S&y-1),L=this.nodes,N=E?L[I]:void 0,j=A8(N,t,n+Io,r,i,s,f,a);if(j===N)return this;if(!E&&j&&L.length>=oVe)return nVe(t,L,S,p,j);if(E&&!j&&L.length===2&&bZ(L[I^1]))return L[I^1];if(E&&j&&L.length===1&&bZ(j))return j;var k=t&&t===this.ownerID,V=E?j?S:S^y:S|y,K=E?j?jhe(L,I,j,k):iVe(L,I,k):rVe(L,I,j,k);return k?(this.bitmap=V,this.nodes=K,this):new nS(t,V,K)};var Z2=function(t,n,r){this.ownerID=t,this.count=n,this.nodes=r};Z2.prototype.get=function(t,n,r,i){n===void 0&&(n=Kc(r));var s=(t===0?n:n>>>t)&pc,f=this.nodes[s];return f?f.get(t+Io,n,r,i):i};Z2.prototype.update=function(t,n,r,i,s,f,a){r===void 0&&(r=Kc(i));var p=(n===0?r:r>>>n)&pc,y=s===ia,S=this.nodes,E=S[p];if(y&&!E)return this;var I=A8(E,t,n+Io,r,i,s,f,a);if(I===E)return this;var L=this.count;if(!E)L++;else if(!I&&(L--,L<sVe))return tVe(t,S,L,p);var N=t&&t===this.ownerID,j=jhe(S,p,I,N);return N?(this.count=L,this.nodes=j,this):new Z2(t,L,j)};var rS=function(t,n,r){this.ownerID=t,this.keyHash=n,this.entries=r};rS.prototype.get=function(t,n,r,i){for(var s=this.entries,f=0,a=s.length;f<a;f++)if(Nl(r,s[f][0]))return s[f][1];return i};rS.prototype.update=function(t,n,r,i,s,f,a){r===void 0&&(r=Kc(i));var p=s===ia;if(r!==this.keyHash)return p?this:(Zh(a),Zh(f),O8(this,t,n,r,[i,s]));for(var y=this.entries,S=0,E=y.length;S<E&&!Nl(i,y[S][0]);S++);var I=S<E;if(I?y[S][1]===s:p)return this;if(Zh(a),(p||!I)&&Zh(f),p&&E===2)return new i_(t,this.keyHash,y[S^1]);var L=t&&t===this.ownerID,N=L?y:Vm(y);return I?p?S===E-1?N.pop():N[S]=N.pop():N[S]=[i,s]:N.push([i,s]),L?(this.entries=N,this):new rS(t,this.keyHash,N)};var i_=function(t,n,r){this.ownerID=t,this.keyHash=n,this.entry=r};i_.prototype.get=function(t,n,r,i){return Nl(r,this.entry[0])?this.entry[1]:i};i_.prototype.update=function(t,n,r,i,s,f,a){var p=s===ia,y=Nl(i,this.entry[0]);if(y?s===this.entry[1]:p)return this;if(Zh(a),p){Zh(f);return}return y?t&&t===this.ownerID?(this.entry[1]=s,this):new i_(t,this.keyHash,[i,s]):(Zh(f),O8(this,t,n,Kc(i),[i,s]))};X2.prototype.iterate=rS.prototype.iterate=function(e,t){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(e(n[t?i-r:r])===!1)return!1};nS.prototype.iterate=Z2.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var s=n[t?i-r:r];if(s&&s.iterate(e,t)===!1)return!1}};i_.prototype.iterate=function(e,t){return e(this.entry)};var J$e=(function(e){function t(n,r,i){this._type=r,this._reverse=i,this._stack=n._root&&yZ(n._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var r=this._type,i=this._stack;i;){var s=i.node,f=i.index++,a=void 0;if(s.entry){if(f===0)return Ez(r,s.entry)}else if(s.entries){if(a=s.entries.length-1,f<=a)return Ez(r,s.entries[this._reverse?a-f:f])}else if(a=s.nodes.length-1,f<=a){var p=s.nodes[this._reverse?a-f:f];if(p){if(p.entry)return Ez(r,p.entry);i=this._stack=yZ(p,i)}continue}i=this._stack=this._stack.__prev}return bc()},t})(Sa);function Ez(e,t){return ko(e,t[0],t[1])}function yZ(e,t){return{node:e,index:0,__prev:t}}function E8(e,t,n,r){var i=Object.create(zo);return i.size=e,i._root=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}var _Z;function pp(){return _Z||(_Z=E8(0))}function vZ(e,t,n){var r,i;if(e._root){var s=Qj(),f=Qj();if(r=A8(e._root,e.__ownerID,0,void 0,t,n,s,f),!f.value)return e;i=e.size+(s.value?n===ia?-1:1:0)}else{if(n===ia)return e;i=1,r=new X2(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=i,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?E8(i,r):pp()}function A8(e,t,n,r,i,s,f,a){return e?e.update(t,n,r,i,s,f,a):s===ia?e:(Zh(a),Zh(f),new i_(t,r,[i,s]))}function bZ(e){return e.constructor===i_||e.constructor===rS}function O8(e,t,n,r,i){if(e.keyHash===r)return new rS(t,r,[e.entry,i]);var s=(n===0?e.keyHash:e.keyHash>>>n)&pc,f=(n===0?r:r>>>n)&pc,a,p=s===f?[O8(e,t,n+Io,r,i)]:(a=new i_(t,r,i),s<f?[e,a]:[a,e]);return new nS(t,1<<s|1<<f,p)}function eVe(e,t,n,r){e||(e=new n8);for(var i=new i_(e,Kc(n),[n,r]),s=0;s<t.length;s++){var f=t[s];i=i.update(e,0,void 0,f[0],f[1])}return i}function tVe(e,t,n,r){for(var i=0,s=0,f=new Array(n),a=0,p=1,y=t.length;a<y;a++,p<<=1){var S=t[a];S!==void 0&&a!==r&&(i|=p,f[s++]=S)}return new nS(e,i,f)}function nVe(e,t,n,r,i){for(var s=0,f=new Array(Xh),a=0;n!==0;a++,n>>>=1)f[a]=n&1?t[s++]:void 0;return f[r]=i,new Z2(e,s+1,f)}function Bhe(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function jhe(e,t,n,r){var i=r?e:Vm(e);return i[t]=n,i}function rVe(e,t,n,r){var i=e.length+1;if(r&&t+1===i)return e[t]=n,e;for(var s=new Array(i),f=0,a=0;a<i;a++)a===t?(s[a]=n,f=-1):s[a]=e[a+f];return s}function iVe(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var i=new Array(r),s=0,f=0;f<r;f++)f===t&&(s=1),i[f]=e[f+s];return i}var aVe=Xh/4,oVe=Xh/2,sVe=Xh/4,Uhe="@@__IMMUTABLE_LIST__@@";function C8(e){return!!(e&&e[Uhe])}var SO=(function(e){function t(n){var r=mD();if(n==null)return r;if(C8(n))return n;var i=e(n),s=i.size;return s===0?r:(Wf(s),s>0&&s<Xh?K2(0,s,Io,null,new Gv(i.toArray())):r.withMutations(function(f){f.setSize(s),i.forEach(function(a,p){return f.set(p,a)})}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(r,i){if(r=n0(this,r),r>=0&&r<this.size){r+=this._origin;var s=$he(this,r);return s&&s.array[r&pc]}return i},t.prototype.set=function(r,i){return lVe(this,r,i)},t.prototype.remove=function(r){return this.has(r)?r===0?this.shift():r===this.size-1?this.pop():this.splice(r,1):this},t.prototype.insert=function(r,i){return this.splice(r,0,i)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Io,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):mD()},t.prototype.push=function(){var r=arguments,i=this.size;return this.withMutations(function(s){Lv(s,0,i+r.length);for(var f=0;f<r.length;f++)s.set(i+f,r[f])})},t.prototype.pop=function(){return Lv(this,0,-1)},t.prototype.unshift=function(){var r=arguments;return this.withMutations(function(i){Lv(i,-r.length);for(var s=0;s<r.length;s++)i.set(s,r[s])})},t.prototype.shift=function(){return Lv(this,1)},t.prototype.concat=function(){for(var r=arguments,i=[],s=0;s<arguments.length;s++){var f=r[s],a=e(typeof f!="string"&&r8(f)?f:[f]);a.size!==0&&i.push(a)}return i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(p){i.forEach(function(y){return y.forEach(function(S){return p.push(S)})})})},t.prototype.setSize=function(r){return Lv(this,0,r)},t.prototype.map=function(r,i){var s=this;return this.withMutations(function(f){for(var a=0;a<s.size;a++)f.set(a,r.call(i,f.get(a),a,s))})},t.prototype.slice=function(r,i){var s=this.size;return pO(r,i,s)?this:Lv(this,eT(r,s),mO(i,s))},t.prototype.__iterator=function(r,i){var s=i?this.size:0,f=xZ(this,i);return new Sa(function(){var a=f();return a===b2?bc():ko(r,i?--s:s++,a)})},t.prototype.__iterate=function(r,i){for(var s=i?this.size:0,f=xZ(this,i),a;(a=f())!==b2&&r(a,i?--s:s++,this)!==!1;);return s},t.prototype.__ensureOwner=function(r){return r===this.__ownerID?this:r?K2(this._origin,this._capacity,this._level,this._root,this._tail,r,this.__hash):this.size===0?mD():(this.__ownerID=r,this.__altered=!1,this)},t})(Bx);SO.isList=C8;var Js=SO.prototype;Js[Uhe]=!0;Js[dO]=Js.remove;Js.merge=Js.concat;Js.setIn=y8;Js.deleteIn=Js.removeIn=_8;Js.update=b8;Js.updateIn=x8;Js.mergeIn=w8;Js.mergeDeepIn=S8;Js.withMutations=bO;Js.wasAltered=T8;Js.asImmutable=wO;Js["@@transducer/init"]=Js.asMutable=xO;Js["@@transducer/step"]=function(e,t){return e.push(t)};Js["@@transducer/result"]=function(e){return e.asImmutable()};var Gv=function(t,n){this.array=t,this.ownerID=n};Gv.prototype.removeBefore=function(t,n,r){if(r===n?1<<n:this.array.length===0)return this;var i=r>>>n&pc;if(i>=this.array.length)return new Gv([],t);var s=i===0,f;if(n>0){var a=this.array[i];if(f=a&&a.removeBefore(t,n-Io,r),f===a&&s)return this}if(s&&!f)return this;var p=iS(this,t);if(!s)for(var y=0;y<i;y++)p.array[y]=void 0;return f&&(p.array[i]=f),p};Gv.prototype.removeAfter=function(t,n,r){if(r===(n?1<<n:0)||this.array.length===0)return this;var i=r-1>>>n&pc;if(i>=this.array.length)return this;var s;if(n>0){var f=this.array[i];if(s=f&&f.removeAfter(t,n-Io,r),s===f&&i===this.array.length-1)return this}var a=iS(this,t);return a.array.splice(i+1),s&&(a.array[i]=s),a};var b2={};function xZ(e,t){var n=e._origin,r=e._capacity,i=Q2(r),s=e._tail;return f(e._root,e._level,0);function f(y,S,E){return S===0?a(y,E):p(y,S,E)}function a(y,S){var E=S===i?s&&s.array:y&&y.array,I=S>n?0:n-S,L=r-S;return L>Xh&&(L=Xh),function(){if(I===L)return b2;var N=t?--L:I++;return E&&E[N]}}function p(y,S,E){var I,L=y&&y.array,N=E>n?0:n-E>>S,j=(r-E>>S)+1;return j>Xh&&(j=Xh),function(){for(;;){if(I){var k=I();if(k!==b2)return k;I=null}if(N===j)return b2;var V=t?--j:N++;I=f(L&&L[V],S-Io,E+(V<<S))}}}}function K2(e,t,n,r,i,s,f){var a=Object.create(Js);return a.size=t-e,a._origin=e,a._capacity=t,a._level=n,a._root=r,a._tail=i,a.__ownerID=s,a.__hash=f,a.__altered=!1,a}var wZ;function mD(){return wZ||(wZ=K2(0,0,Io))}function lVe(e,t,n){if(t=n0(e,t),t!==t)return e;if(t>=e.size||t<0)return e.withMutations(function(f){t<0?Lv(f,t).set(0,n):Lv(f,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,i=e._root,s=Qj();return t>=Q2(e._capacity)?r=a6(r,e.__ownerID,0,t,n,s):i=a6(i,e.__ownerID,e._level,t,n,s),s.value?e.__ownerID?(e._root=i,e._tail=r,e.__hash=void 0,e.__altered=!0,e):K2(e._origin,e._capacity,e._level,i,r):e}function a6(e,t,n,r,i,s){var f=r>>>n&pc,a=e&&f<e.array.length;if(!a&&i===void 0)return e;var p;if(n>0){var y=e&&e.array[f],S=a6(y,t,n-Io,r,i,s);return S===y?e:(p=iS(e,t),p.array[f]=S,p)}return a&&e.array[f]===i?e:(s&&Zh(s),p=iS(e,t),i===void 0&&f===p.array.length-1?p.array.pop():p.array[f]=i,p)}function iS(e,t){return t&&e&&t===e.ownerID?e:new Gv(e?e.array.slice():[],t)}function $he(e,t){if(t>=Q2(e._capacity))return e._tail;if(t<1<<e._level+Io){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&pc],r-=Io;return n}}function Lv(e,t,n){t!==void 0&&(t|=0),n!==void 0&&(n|=0);var r=e.__ownerID||new n8,i=e._origin,s=e._capacity,f=i+t,a=n===void 0?s:n<0?s+n:i+n;if(f===i&&a===s)return e;if(f>=a)return e.clear();for(var p=e._level,y=e._root,S=0;f+S<0;)y=new Gv(y&&y.array.length?[void 0,y]:[],r),p+=Io,S+=1<<p;S&&(f+=S,i+=S,a+=S,s+=S);for(var E=Q2(s),I=Q2(a);I>=1<<p+Io;)y=new Gv(y&&y.array.length?[y]:[],r),p+=Io;var L=e._tail,N=I<E?$he(e,a-1):I>E?new Gv([],r):L;if(L&&I>E&&f<s&&L.array.length){y=iS(y,r);for(var j=y,k=p;k>Io;k-=Io){var V=E>>>k&pc;j=j.array[V]=iS(j.array[V],r)}j.array[E>>>Io&pc]=L}if(a<s&&(N=N&&N.removeAfter(r,0,a)),f>=I)f-=I,a-=I,p=Io,y=null,N=N&&N.removeBefore(r,0,f);else if(f>i||I<E){for(S=0;y;){var K=f>>>p&pc;if(K!==I>>>p&pc)break;K&&(S+=(1<<p)*K),p-=Io,y=y.array[K]}y&&f>i&&(y=y.removeBefore(r,p,f-S)),y&&I<E&&(y=y.removeAfter(r,p,I-S)),S&&(f-=S,a-=S)}return e.__ownerID?(e.size=a-f,e._origin=f,e._capacity=a,e._level=p,e._root=y,e._tail=N,e.__hash=void 0,e.__altered=!0,e):K2(f,a,p,y,N)}function Q2(e){return e<Xh?0:e-1>>>Io<<Io}var cg=(function(e){function t(n){return n==null?e2():u8(n)?n:e2().withMutations(function(r){var i=fd(n);Wf(i.size),i.forEach(function(s,f){return r.set(f,s)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(r,i){var s=this._map.get(r);return s!==void 0?this._list.get(s)[1]:i},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):e2()},t.prototype.set=function(r,i){return TZ(this,r,i)},t.prototype.remove=function(r){return TZ(this,r,ia)},t.prototype.__iterate=function(r,i){var s=this;return this._list.__iterate(function(f){return f&&r(f[1],f[0],s)},i)},t.prototype.__iterator=function(r,i){return this._list.fromEntrySeq().__iterator(r,i)},t.prototype.__ensureOwner=function(r){if(r===this.__ownerID)return this;var i=this._map.__ensureOwner(r),s=this._list.__ensureOwner(r);return r?M8(i,s,r,this.__hash):this.size===0?e2():(this.__ownerID=r,this.__altered=!1,this._map=i,this._list=s,this)},t})($x);cg.isOrderedMap=u8;cg.prototype[nT]=!0;cg.prototype[dO]=cg.prototype.remove;function M8(e,t,n,r){var i=Object.create(cg.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}var SZ;function e2(){return SZ||(SZ=M8(pp(),mD()))}function TZ(e,t,n){var r=e._map,i=e._list,s=r.get(t),f=s!==void 0,a,p;if(n===ia){if(!f)return e;i.size>=Xh&&i.size>=r.size*2?(p=i.filter(function(y,S){return y!==void 0&&s!==S}),a=p.toKeyedSeq().map(function(y){return y[0]}).flip().toMap(),e.__ownerID&&(a.__ownerID=p.__ownerID=e.__ownerID)):(a=r.remove(t),p=s===i.size-1?i.pop():i.set(s,void 0))}else if(f){if(n===i.get(s)[1])return e;a=r,p=i.set(s,[t,n])}else a=r.set(t,i.size),p=i.set(i.size,[t,n]);return e.__ownerID?(e.size=a.size,e._map=a,e._list=p,e.__hash=void 0,e.__altered=!0,e):M8(a,p)}var Vhe="@@__IMMUTABLE_STACK__@@";function mI(e){return!!(e&&e[Vhe])}var $R=(function(e){function t(n){return n==null?EM():mI(n)?n:EM().pushAll(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(r,i){var s=this._head;for(r=n0(this,r);s&&r--;)s=s.next;return s?s.value:i},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var r=arguments;if(arguments.length===0)return this;for(var i=this.size+arguments.length,s=this._head,f=arguments.length-1;f>=0;f--)s={value:r[f],next:s};return this.__ownerID?(this.size=i,this._head=s,this.__hash=void 0,this.__altered=!0,this):t2(i,s)},t.prototype.pushAll=function(r){if(r=e(r),r.size===0)return this;if(this.size===0&&mI(r))return r;Wf(r.size);var i=this.size,s=this._head;return r.__iterate(function(f){i++,s={value:f,next:s}},!0),this.__ownerID?(this.size=i,this._head=s,this.__hash=void 0,this.__altered=!0,this):t2(i,s)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):EM()},t.prototype.slice=function(r,i){if(pO(r,i,this.size))return this;var s=eT(r,this.size),f=mO(i,this.size);if(f!==this.size)return e.prototype.slice.call(this,r,i);for(var a=this.size-s,p=this._head;s--;)p=p.next;return this.__ownerID?(this.size=a,this._head=p,this.__hash=void 0,this.__altered=!0,this):t2(a,p)},t.prototype.__ensureOwner=function(r){return r===this.__ownerID?this:r?t2(this.size,this._head,r,this.__hash):this.size===0?EM():(this.__ownerID=r,this.__altered=!1,this)},t.prototype.__iterate=function(r,i){var s=this;if(i)return new wx(this.toArray()).__iterate(function(p,y){return r(p,y,s)},i);for(var f=0,a=this._head;a&&r(a.value,f++,this)!==!1;)a=a.next;return f},t.prototype.__iterator=function(r,i){if(i)return new wx(this.toArray()).__iterator(r,i);var s=0,f=this._head;return new Sa(function(){if(f){var a=f.value;return f=f.next,ko(r,s++,a)}return bc()})},t})(Bx);$R.isStack=mI;var wc=$R.prototype;wc[Vhe]=!0;wc.shift=wc.pop;wc.unshift=wc.push;wc.unshiftAll=wc.pushAll;wc.withMutations=bO;wc.wasAltered=T8;wc.asImmutable=wO;wc["@@transducer/init"]=wc.asMutable=xO;wc["@@transducer/step"]=function(e,t){return e.unshift(t)};wc["@@transducer/result"]=function(e){return e.asImmutable()};function t2(e,t,n,r){var i=Object.create(wc);return i.size=e,i._head=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}var EZ;function EM(){return EZ||(EZ=t2(0))}var qhe="@@__IMMUTABLE_SET__@@";function VR(e){return!!(e&&e[qhe])}function D8(e){return VR(e)&&Jh(e)}function I8(e,t){if(e===t)return!0;if(!vc(t)||e.size!==void 0&&t.size!==void 0&&e.size!==t.size||e.__hash!==void 0&&t.__hash!==void 0&&e.__hash!==t.__hash||yo(e)!==yo(t)||Iu(e)!==Iu(t)||Jh(e)!==Jh(t))return!1;if(e.size===0&&t.size===0)return!0;var n=!gO(e);if(Jh(e)){var r=e.entries();return t.every(function(p,y){var S=r.next().value;return S&&Nl(S[1],p)&&(n||Nl(S[0],y))})&&r.next().done}var i=!1;if(e.size===void 0)if(t.size===void 0)typeof e.cacheResult=="function"&&e.cacheResult();else{i=!0;var s=e;e=t,t=s}var f=!0,a=t.__iterate(function(p,y){if(n?!e.has(p):i?!Nl(p,e.get(y,ia)):!Nl(e.get(y,ia),p))return f=!1,!1});return f&&e.size===a}function Vx(e,t){var n=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function gI(e){if(!e||typeof e!="object")return e;if(!vc(e)){if(!r0(e))return e;e=xc(e)}if(yo(e)){var t={};return e.__iterate(function(r,i){t[i]=gI(r)}),t}var n=[];return e.__iterate(function(r){n.push(gI(r))}),n}var TO=(function(e){function t(n){return n==null?n2():VR(n)&&!Jh(n)?n:n2().withMutations(function(r){var i=e(n);Wf(i.size),i.forEach(function(s){return r.add(s)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(r){return this(fd(r).keySeq())},t.intersect=function(r){return r=rs(r).toArray(),r.length?nu.intersect.apply(t(r.pop()),r):n2()},t.union=function(r){return r=rs(r).toArray(),r.length?nu.union.apply(t(r.pop()),r):n2()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(r){return this._map.has(r)},t.prototype.add=function(r){return AM(this,this._map.set(r,r))},t.prototype.remove=function(r){return AM(this,this._map.remove(r))},t.prototype.clear=function(){return AM(this,this._map.clear())},t.prototype.map=function(r,i){var s=this,f=!1,a=AM(this,this._map.mapEntries(function(p){var y=p[1],S=r.call(i,y,y,s);return S!==y&&(f=!0),[S,S]},i));return f?a:this},t.prototype.union=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return r=r.filter(function(s){return s.size!==0}),r.length===0?this:this.size===0&&!this.__ownerID&&r.length===1?this.constructor(r[0]):this.withMutations(function(s){for(var f=0;f<r.length;f++)typeof r[f]=="string"?s.add(r[f]):e(r[f]).forEach(function(a){return s.add(a)})})},t.prototype.intersect=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];if(r.length===0)return this;r=r.map(function(f){return e(f)});var s=[];return this.forEach(function(f){r.every(function(a){return a.includes(f)})||s.push(f)}),this.withMutations(function(f){s.forEach(function(a){f.remove(a)})})},t.prototype.subtract=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];if(r.length===0)return this;r=r.map(function(f){return e(f)});var s=[];return this.forEach(function(f){r.some(function(a){return a.includes(f)})&&s.push(f)}),this.withMutations(function(f){s.forEach(function(a){f.remove(a)})})},t.prototype.sort=function(r){return oS(tS(this,r))},t.prototype.sortBy=function(r,i){return oS(tS(this,i,r))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(r,i){var s=this;return this._map.__iterate(function(f){return r(f,f,s)},i)},t.prototype.__iterator=function(r,i){return this._map.__iterator(r,i)},t.prototype.__ensureOwner=function(r){if(r===this.__ownerID)return this;var i=this._map.__ensureOwner(r);return r?this.__make(i,r):this.size===0?this.__empty():(this.__ownerID=r,this._map=i,this)},t})(tT);TO.isSet=VR;var nu=TO.prototype;nu[qhe]=!0;nu[dO]=nu.remove;nu.merge=nu.concat=nu.union;nu.withMutations=bO;nu.asImmutable=wO;nu["@@transducer/init"]=nu.asMutable=xO;nu["@@transducer/step"]=function(e,t){return e.add(t)};nu["@@transducer/result"]=function(e){return e.asImmutable()};nu.__empty=n2;nu.__make=Hhe;function AM(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:t.size===0?e.__empty():e.__make(t)}function Hhe(e,t){var n=Object.create(nu);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}var AZ;function n2(){return AZ||(AZ=Hhe(pp()))}var Ghe=(function(e){function t(n,r,i){if(!(this instanceof t))return new t(n,r,i);if(p8(i!==0,"Cannot step a Range by 0"),n=n||0,r===void 0&&(r=1/0),i=i===void 0?1:Math.abs(i),r<n&&(i=-i),this._start=n,this._end=r,this._step=i,this.size=Math.max(0,Math.ceil((r-n)/i-1)+1),this.size===0){if(Az)return Az;Az=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},t.prototype.get=function(r,i){return this.has(r)?this._start+n0(this,r)*this._step:i},t.prototype.includes=function(r){var i=(r-this._start)/this._step;return i>=0&&i<this.size&&i===Math.floor(i)},t.prototype.slice=function(r,i){return pO(r,i,this.size)?this:(r=eT(r,this.size),i=mO(i,this.size),i<=r?new t(0,0):new t(this.get(r,this._end),this.get(i,this._end),this._step))},t.prototype.indexOf=function(r){var i=r-this._start;if(i%this._step===0){var s=i/this._step;if(s>=0&&s<this.size)return s}return-1},t.prototype.lastIndexOf=function(r){return this.indexOf(r)},t.prototype.__iterate=function(r,i){for(var s=this.size,f=this._step,a=i?this._start+(s-1)*f:this._start,p=0;p!==s&&r(a,i?s-++p:p++,this)!==!1;)a+=i?-f:f;return p},t.prototype.__iterator=function(r,i){var s=this.size,f=this._step,a=i?this._start+(s-1)*f:this._start,p=0;return new Sa(function(){if(p===s)return bc();var y=a;return a+=i?-f:f,ko(r,i?s-++p:p++,y)})},t.prototype.equals=function(r){return r instanceof t?this._start===r._start&&this._end===r._end&&this._step===r._step:I8(this,r)},t})(dd),Az;function P8(e,t,n){for(var r=Ohe(t),i=0;i!==r.length;)if(e=g8(e,r[i++],ia),e===ia)return n;return e}function Yhe(e,t){return P8(this,e,t)}function Whe(e,t){return P8(e,t,ia)!==ia}function uVe(e){return Whe(this,e)}function Xhe(){Wf(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e}rs.isIterable=vc;rs.isKeyed=yo;rs.isIndexed=Iu;rs.isAssociative=gO;rs.isOrdered=Jh;rs.Iterator=Sa;Vx(rs,{toArray:function(){Wf(this.size);var t=new Array(this.size||0),n=yo(this),r=0;return this.__iterate(function(i,s){t[r++]=n?[s,i]:i}),t},toIndexedSeq:function(){return new _he(this)},toJS:function(){return gI(this)},toKeyedSeq:function(){return new UR(this,!0)},toMap:function(){return $x(this.toKeyedSeq())},toObject:Xhe,toOrderedMap:function(){return cg(this.toKeyedSeq())},toOrderedSet:function(){return oS(yo(this)?this.valueSeq():this)},toSet:function(){return TO(yo(this)?this.valueSeq():this)},toSetSeq:function(){return new vhe(this)},toSeq:function(){return Iu(this)?this.toIndexedSeq():yo(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return $R(yo(this)?this.valueSeq():this)},toList:function(){return SO(yo(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,n){return this.size===0?t+n:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+n},concat:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return ro(this,V$e(this,t))},includes:function(t){return this.some(function(n){return Nl(n,t)})},entries:function(){return this.__iterator(od)},every:function(t,n){Wf(this.size);var r=!0;return this.__iterate(function(i,s,f){if(!t.call(n,i,s,f))return r=!1,!1}),r},filter:function(t,n){return ro(this,She(this,t,n,!0))},partition:function(t,n){return U$e(this,t,n)},find:function(t,n,r){var i=this.findEntry(t,n);return i?i[1]:r},forEach:function(t,n){return Wf(this.size),this.__iterate(n?t.bind(n):t)},join:function(t){Wf(this.size),t=t!==void 0?""+t:",";var n="",r=!0;return this.__iterate(function(i){r?r=!1:n+=t,n+=i!=null?i.toString():""}),n},keys:function(){return this.__iterator(yO)},map:function(t,n){return ro(this,whe(this,t,n))},reduce:function(t,n,r){return OZ(this,t,n,r,arguments.length<2,!1)},reduceRight:function(t,n,r){return OZ(this,t,n,r,arguments.length<2,!0)},reverse:function(){return ro(this,c8(this,!0))},slice:function(t,n){return ro(this,f8(this,t,n,!0))},some:function(t,n){Wf(this.size);var r=!1;return this.__iterate(function(i,s,f){if(t.call(n,i,s,f))return r=!0,!1}),r},sort:function(t){return ro(this,tS(this,t))},values:function(){return this.__iterator(Ap)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,n){return eS(t?this.toSeq().filter(t,n):this)},countBy:function(t,n){return B$e(this,t,n)},equals:function(t){return I8(this,t)},entrySeq:function(){var t=this;if(t._cache)return new wx(t._cache);var n=t.toSeq().map(fVe).toIndexedSeq();return n.fromEntrySeq=function(){return t.toSeq()},n},filterNot:function(t,n){return this.filter(Oz(t),n)},findEntry:function(t,n,r){var i=r;return this.__iterate(function(s,f,a){if(t.call(n,s,f,a))return i=[f,s],!1}),i},findKey:function(t,n){var r=this.findEntry(t,n);return r&&r[0]},findLast:function(t,n,r){return this.toKeyedSeq().reverse().find(t,n,r)},findLastEntry:function(t,n,r){return this.toKeyedSeq().reverse().findEntry(t,n,r)},findLastKey:function(t,n){return this.toKeyedSeq().reverse().findKey(t,n)},first:function(t){return this.find(ohe,null,t)},flatMap:function(t,n){return ro(this,q$e(this,t,n))},flatten:function(t){return ro(this,Ehe(this,t,!0))},fromEntrySeq:function(){return new bhe(this)},get:function(t,n){return this.find(function(r,i){return Nl(i,t)},void 0,n)},getIn:Yhe,groupBy:function(t,n){return j$e(this,t,n)},has:function(t){return this.get(t,ia)!==ia},hasIn:uVe,isSubset:function(t){return t=typeof t.includes=="function"?t:rs(t),this.every(function(n){return t.includes(n)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:rs(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(n){return Nl(n,t)})},keySeq:function(){return this.toSeq().map(cVe).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return SM(this,t)},maxBy:function(t,n){return SM(this,n,t)},min:function(t){return SM(this,t?CZ(t):DZ)},minBy:function(t,n){return SM(this,n?CZ(n):DZ,t)},rest:function(){return this.slice(1)},skip:function(t){return t===0?this:this.slice(Math.max(0,t))},skipLast:function(t){return t===0?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,n){return ro(this,The(this,t,n,!0))},skipUntil:function(t,n){return this.skipWhile(Oz(t),n)},sortBy:function(t,n){return ro(this,tS(this,n,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,n){return ro(this,$$e(this,t,n))},takeUntil:function(t,n){return this.takeWhile(Oz(t),n)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=hVe(this))}});var ku=rs.prototype;ku[uhe]=!0;ku[NR]=ku.values;ku.toJSON=ku.toArray;ku.__toStringMapper=W2;ku.inspect=ku.toSource=function(){return this.toString()};ku.chain=ku.flatMap;ku.contains=ku.includes;Vx(fd,{flip:function(){return ro(this,xhe(this))},mapEntries:function(t,n){var r=this,i=0;return ro(this,this.toSeq().map(function(s,f){return t.call(n,[f,s],i++,r)}).fromEntrySeq())},mapKeys:function(t,n){var r=this;return ro(this,this.toSeq().flip().map(function(i,s){return t.call(n,i,s,r)}).flip())}});var EO=fd.prototype;EO[che]=!0;EO[NR]=ku.entries;EO.toJSON=Xhe;EO.__toStringMapper=function(e,t){return W2(t)+": "+W2(e)};Vx(Bx,{toKeyedSeq:function(){return new UR(this,!1)},filter:function(t,n){return ro(this,She(this,t,n,!1))},findIndex:function(t,n){var r=this.findEntry(t,n);return r?r[0]:-1},indexOf:function(t){var n=this.keyOf(t);return n===void 0?-1:n},lastIndexOf:function(t){var n=this.lastKeyOf(t);return n===void 0?-1:n},reverse:function(){return ro(this,c8(this,!1))},slice:function(t,n){return ro(this,f8(this,t,n,!1))},splice:function(t,n){var r=arguments.length;if(n=Math.max(n||0,0),r===0||r===2&&!n)return this;t=eT(t,t<0?this.count():this.size);var i=this.slice(0,t);return ro(this,r===1?i:i.concat(Vm(arguments,2),this.slice(t+n)))},findLastIndex:function(t,n){var r=this.findLastEntry(t,n);return r?r[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return ro(this,Ehe(this,t,!1))},get:function(t,n){return t=n0(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?n:this.find(function(r,i){return i===t},void 0,n)},has:function(t){return t=n0(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return ro(this,H$e(this,t))},interleave:function(){var t=[this].concat(Vm(arguments)),n=TM(this.toSeq(),dd.of,t),r=n.flatten(!0);return n.size&&(r.size=n.size*t.length),ro(this,r)},keySeq:function(){return Ghe(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,n){return ro(this,The(this,t,n,!1))},zip:function(){var t=[this].concat(Vm(arguments));return ro(this,TM(this,MZ,t))},zipAll:function(){var t=[this].concat(Vm(arguments));return ro(this,TM(this,MZ,t,!0))},zipWith:function(t){var n=Vm(arguments);return n[0]=this,ro(this,TM(this,t,n))}});var aT=Bx.prototype;aT[fhe]=!0;aT[nT]=!0;Vx(tT,{get:function(t,n){return this.has(t)?t:n},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var aS=tT.prototype;aS.has=ku.includes;aS.contains=aS.includes;aS.keys=aS.values;Vx(c0,EO);Vx(dd,aT);Vx(iT,aS);function OZ(e,t,n,r,i,s){return Wf(e.size),e.__iterate(function(f,a,p){i?(i=!1,n=f):n=t.call(r,n,f,a,p)},s),n}function cVe(e,t){return t}function fVe(e,t){return[t,e]}function Oz(e){return function(){return!e.apply(this,arguments)}}function CZ(e){return function(){return-e.apply(this,arguments)}}function MZ(){return Vm(arguments)}function DZ(e,t){return e<t?1:e>t?-1:0}function hVe(e){if(e.size===1/0)return 0;var t=Jh(e),n=yo(e),r=t?1:0,i=e.__iterate(n?t?function(s,f){r=31*r+IZ(Kc(s),Kc(f))|0}:function(s,f){r=r+IZ(Kc(s),Kc(f))|0}:t?function(s){r=31*r+Kc(s)|0}:function(s){r=r+Kc(s)|0});return dVe(i,r)}function dVe(e,t){return t=LE(t,3432918353),t=LE(t<<15|t>>>-15,461845907),t=LE(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=LE(t^t>>>16,2246822507),t=LE(t^t>>>13,3266489909),t=jR(t^t>>>16),t}function IZ(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var oS=(function(e){function t(n){return n==null?o6():D8(n)?n:o6().withMutations(function(r){var i=tT(n);Wf(i.size),i.forEach(function(s){return r.add(s)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(r){return this(fd(r).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t})(TO);oS.isOrderedSet=D8;var qx=oS.prototype;qx[nT]=!0;qx.zip=aT.zip;qx.zipWith=aT.zipWith;qx.zipAll=aT.zipAll;qx.__empty=o6;qx.__make=Zhe;function Zhe(e,t){var n=Object.create(qx);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}var PZ;function o6(){return PZ||(PZ=Zhe(e2()))}var pVe={LeftThenRight:-1,RightThenLeft:1};function mVe(e){if(jx(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(hd(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(e===null||typeof e!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var bl=function(t,n){var r;mVe(t);var i=function(a){var p=this;if(a instanceof i)return a;if(!(this instanceof i))return new i(a);if(!r){r=!0;var y=Object.keys(t),S=s._indices={};s._name=n,s._keys=y,s._defaultValues=t;for(var E=0;E<y.length;E++){var I=y[E];S[I]=E,s[I]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+k8(this)+' with property "'+I+'" since that property name is part of the Record API.'):gVe(s,I)}}return this.__ownerID=void 0,this._values=SO().withMutations(function(L){L.setSize(p._keys.length),fd(a).forEach(function(N,j){L.set(p._indices[j],N===p._defaultValues[j]?void 0:N)})}),this},s=i.prototype=Object.create(_o);return s.constructor=i,n&&(i.displayName=n),i};bl.prototype.toString=function(){for(var t=k8(this)+" { ",n=this._keys,r,i=0,s=n.length;i!==s;i++)r=n[i],t+=(i?", ":"")+r+": "+W2(this.get(r));return t+" }"};bl.prototype.equals=function(t){return this===t||jx(t)&&sS(this).equals(sS(t))};bl.prototype.hashCode=function(){return sS(this).hashCode()};bl.prototype.has=function(t){return this._indices.hasOwnProperty(t)};bl.prototype.get=function(t,n){if(!this.has(t))return n;var r=this._indices[t],i=this._values.get(r);return i===void 0?this._defaultValues[t]:i};bl.prototype.set=function(t,n){if(this.has(t)){var r=this._values.set(this._indices[t],n===this._defaultValues[t]?void 0:n);if(r!==this._values&&!this.__ownerID)return R8(this,r)}return this};bl.prototype.remove=function(t){return this.set(t)};bl.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:R8(this,t)};bl.prototype.wasAltered=function(){return this._values.wasAltered()};bl.prototype.toSeq=function(){return sS(this)};bl.prototype.toJS=function(){return gI(this)};bl.prototype.entries=function(){return this.__iterator(od)};bl.prototype.__iterator=function(t,n){return sS(this).__iterator(t,n)};bl.prototype.__iterate=function(t,n){return sS(this).__iterate(t,n)};bl.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var n=this._values.__ensureOwner(t);return t?R8(this,n,t):(this.__ownerID=t,this._values=n,this)};bl.isRecord=jx;bl.getDescriptiveName=k8;var _o=bl.prototype;_o[dhe]=!0;_o[dO]=_o.remove;_o.deleteIn=_o.removeIn=_8;_o.getIn=Yhe;_o.hasIn=ku.hasIn;_o.merge=khe;_o.mergeWith=Lhe;_o.mergeIn=w8;_o.mergeDeep=Nhe;_o.mergeDeepWith=Fhe;_o.mergeDeepIn=S8;_o.setIn=y8;_o.update=b8;_o.updateIn=x8;_o.withMutations=bO;_o.asMutable=xO;_o.asImmutable=wO;_o[NR]=_o.entries;_o.toJSON=_o.toObject=ku.toObject;_o.inspect=_o.toSource=function(){return this.toString()};function R8(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._values=t,r.__ownerID=n,r}function k8(e){return e.constructor.displayName||e.constructor.name||"Record"}function sS(e){return s8(e._keys.map(function(t){return[t,e.get(t)]}))}function gVe(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(n){p8(this.__ownerID,"Cannot set on an immutable record."),this.set(t,n)}})}catch{}}var yVe=(function(e){function t(n,r){if(!(this instanceof t))return new t(n,r);if(this._value=n,this.size=r===void 0?1/0:Math.max(0,r),this.size===0){if(Cz)return Cz;Cz=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},t.prototype.get=function(r,i){return this.has(r)?this._value:i},t.prototype.includes=function(r){return Nl(this._value,r)},t.prototype.slice=function(r,i){var s=this.size;return pO(r,i,s)?this:new t(this._value,mO(i,s)-eT(r,s))},t.prototype.reverse=function(){return this},t.prototype.indexOf=function(r){return Nl(this._value,r)?0:-1},t.prototype.lastIndexOf=function(r){return Nl(this._value,r)?this.size:-1},t.prototype.__iterate=function(r,i){for(var s=this.size,f=0;f!==s&&r(this._value,i?s-++f:f++,this)!==!1;);return f},t.prototype.__iterator=function(r,i){var s=this,f=this.size,a=0;return new Sa(function(){return a===f?bc():ko(r,i?f-++a:a++,s._value)})},t.prototype.equals=function(r){return r instanceof t?Nl(this._value,r._value):I8(this,r)},t})(dd),Cz;function _Ve(e,t){return Khe([],t||vVe,e,"",t&&t.length>2?[]:void 0,{"":e})}function Khe(e,t,n,r,i,s){if(typeof n!="string"&&!hd(n)&&(i8(n)||r8(n)||m8(n))){if(~e.indexOf(n))throw new TypeError("Cannot convert circular structure to Immutable");e.push(n),i&&r!==""&&i.push(r);var f=t.call(s,r,xc(n).map(function(a,p){return Khe(e,t,a,p,i,n)}),i&&i.slice());return e.pop(),i&&i.pop(),f}return n}function vVe(e,t){return Iu(t)?t.toList():yo(t)?t.toMap():t.toSet()}var bVe="4.3.7",Mz={version:bVe,Collection:rs,Iterable:rs,Seq:xc,Map:$x,OrderedMap:cg,List:SO,Stack:$R,Set:TO,OrderedSet:oS,PairSorting:pVe,Record:bl,Range:Ghe,Repeat:yVe,is:Nl,fromJS:_Ve,hash:Kc,isImmutable:hd,isCollection:vc,isKeyed:yo,isIndexed:Iu,isAssociative:gO,isOrdered:Jh,isValueObject:t6,isPlainObject:m8,isSeq:zR,isList:C8,isMap:BR,isOrderedMap:u8,isStack:mI,isSet:VR,isOrderedSet:D8,isRecord:jx,get:g8,getIn:P8,has:Che,hasIn:Whe,merge:Y$e,mergeDeep:X$e,mergeWith:W$e,mergeDeepWith:Z$e,remove:Mhe,removeIn:Rhe,set:Dhe,setIn:Phe,update:v8,updateIn:Ux},gD={exports:{}},xVe=gD.exports,RZ;function wVe(){return RZ||(RZ=1,(function(e,t){(function(n,r){e.exports=r()})(xVe,(function(){var n,r,i;function s(a,p){if(!n)n=p;else if(!r)r=p;else{var y="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",S={};n(S),i=p(S),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(i.workerUrl=window.URL.createObjectURL(new Blob([y],{type:"text/javascript"})))}}s(["exports"],function(a){var p=1e-6,y=typeof Float32Array<"u"?Float32Array:Array;function S(c,o){var u=o[0],h=o[1],g=o[2],b=o[3],w=u*b-g*h;return w?(c[0]=b*(w=1/w),c[1]=-h*w,c[2]=-g*w,c[3]=u*w,c):null}function E(){var c=new y(9);return y!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function I(c,o){var u=o[0],h=o[1],g=o[2],b=o[3],w=o[4],A=o[5],D=o[6],P=o[7],B=o[8];return c[0]=w*B-A*P,c[1]=g*P-h*B,c[2]=h*A-g*w,c[3]=A*D-b*B,c[4]=u*B-g*D,c[5]=g*b-u*A,c[6]=b*P-w*D,c[7]=h*D-u*P,c[8]=u*w-h*b,c}function L(c,o,u){var h=o[0],g=o[1],b=o[2],w=o[3],A=o[4],D=o[5],P=o[6],B=o[7],U=o[8],$=u[0],G=u[1],Z=u[2],se=u[3],fe=u[4],ue=u[5],pe=u[6],ve=u[7],Se=u[8];return c[0]=$*h+G*w+Z*P,c[1]=$*g+G*A+Z*B,c[2]=$*b+G*D+Z*U,c[3]=se*h+fe*w+ue*P,c[4]=se*g+fe*A+ue*B,c[5]=se*b+fe*D+ue*U,c[6]=pe*h+ve*w+Se*P,c[7]=pe*g+ve*A+Se*B,c[8]=pe*b+ve*D+Se*U,c}function N(){var c=new y(16);return y!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c}function j(c){var o=new y(16);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o}function k(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function V(c,o){var u=o[0],h=o[1],g=o[2],b=o[3],w=o[4],A=o[5],D=o[6],P=o[7],B=o[8],U=o[9],$=o[10],G=o[11],Z=o[12],se=o[13],fe=o[14],ue=o[15],pe=u*A-h*w,ve=u*D-g*w,Se=u*P-b*w,ke=h*D-g*A,Ie=h*P-b*A,Ve=g*P-b*D,qe=B*se-U*Z,Ue=B*fe-$*Z,Ze=B*ue-G*Z,rt=U*fe-$*se,Et=U*ue-G*se,xt=$*ue-G*fe,Tt=pe*xt-ve*Et+Se*rt+ke*Ze-Ie*Ue+Ve*qe;return Tt?(c[0]=(A*xt-D*Et+P*rt)*(Tt=1/Tt),c[1]=(g*Et-h*xt-b*rt)*Tt,c[2]=(se*Ve-fe*Ie+ue*ke)*Tt,c[3]=($*Ie-U*Ve-G*ke)*Tt,c[4]=(D*Ze-w*xt-P*Ue)*Tt,c[5]=(u*xt-g*Ze+b*Ue)*Tt,c[6]=(fe*Se-Z*Ve-ue*ve)*Tt,c[7]=(B*Ve-$*Se+G*ve)*Tt,c[8]=(w*Et-A*Ze+P*qe)*Tt,c[9]=(h*Ze-u*Et-b*qe)*Tt,c[10]=(Z*Ie-se*Se+ue*pe)*Tt,c[11]=(U*Se-B*Ie-G*pe)*Tt,c[12]=(A*Ue-w*rt-D*qe)*Tt,c[13]=(u*rt-h*Ue+g*qe)*Tt,c[14]=(se*ve-Z*ke-fe*pe)*Tt,c[15]=(B*ke-U*ve+$*pe)*Tt,c):null}function K(c,o,u){var h=o[0],g=o[1],b=o[2],w=o[3],A=o[4],D=o[5],P=o[6],B=o[7],U=o[8],$=o[9],G=o[10],Z=o[11],se=o[12],fe=o[13],ue=o[14],pe=o[15],ve=u[0],Se=u[1],ke=u[2],Ie=u[3];return c[0]=ve*h+Se*A+ke*U+Ie*se,c[1]=ve*g+Se*D+ke*$+Ie*fe,c[2]=ve*b+Se*P+ke*G+Ie*ue,c[3]=ve*w+Se*B+ke*Z+Ie*pe,c[4]=(ve=u[4])*h+(Se=u[5])*A+(ke=u[6])*U+(Ie=u[7])*se,c[5]=ve*g+Se*D+ke*$+Ie*fe,c[6]=ve*b+Se*P+ke*G+Ie*ue,c[7]=ve*w+Se*B+ke*Z+Ie*pe,c[8]=(ve=u[8])*h+(Se=u[9])*A+(ke=u[10])*U+(Ie=u[11])*se,c[9]=ve*g+Se*D+ke*$+Ie*fe,c[10]=ve*b+Se*P+ke*G+Ie*ue,c[11]=ve*w+Se*B+ke*Z+Ie*pe,c[12]=(ve=u[12])*h+(Se=u[13])*A+(ke=u[14])*U+(Ie=u[15])*se,c[13]=ve*g+Se*D+ke*$+Ie*fe,c[14]=ve*b+Se*P+ke*G+Ie*ue,c[15]=ve*w+Se*B+ke*Z+Ie*pe,c}function J(c,o,u){var h,g,b,w,A,D,P,B,U,$,G,Z,se=u[0],fe=u[1],ue=u[2];return o===c?(c[12]=o[0]*se+o[4]*fe+o[8]*ue+o[12],c[13]=o[1]*se+o[5]*fe+o[9]*ue+o[13],c[14]=o[2]*se+o[6]*fe+o[10]*ue+o[14],c[15]=o[3]*se+o[7]*fe+o[11]*ue+o[15]):(g=o[1],b=o[2],w=o[3],A=o[4],D=o[5],P=o[6],B=o[7],U=o[8],$=o[9],G=o[10],Z=o[11],c[0]=h=o[0],c[1]=g,c[2]=b,c[3]=w,c[4]=A,c[5]=D,c[6]=P,c[7]=B,c[8]=U,c[9]=$,c[10]=G,c[11]=Z,c[12]=h*se+A*fe+U*ue+o[12],c[13]=g*se+D*fe+$*ue+o[13],c[14]=b*se+P*fe+G*ue+o[14],c[15]=w*se+B*fe+Z*ue+o[15]),c}function ie(c,o,u){var h=u[0],g=u[1],b=u[2];return c[0]=o[0]*h,c[1]=o[1]*h,c[2]=o[2]*h,c[3]=o[3]*h,c[4]=o[4]*g,c[5]=o[5]*g,c[6]=o[6]*g,c[7]=o[7]*g,c[8]=o[8]*b,c[9]=o[9]*b,c[10]=o[10]*b,c[11]=o[11]*b,c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c}function Q(c,o,u){var h=Math.sin(u),g=Math.cos(u),b=o[4],w=o[5],A=o[6],D=o[7],P=o[8],B=o[9],U=o[10],$=o[11];return o!==c&&(c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[4]=b*g+P*h,c[5]=w*g+B*h,c[6]=A*g+U*h,c[7]=D*g+$*h,c[8]=P*g-b*h,c[9]=B*g-w*h,c[10]=U*g-A*h,c[11]=$*g-D*h,c}function W(c,o,u){var h=Math.sin(u),g=Math.cos(u),b=o[0],w=o[1],A=o[2],D=o[3],P=o[8],B=o[9],U=o[10],$=o[11];return o!==c&&(c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=b*g-P*h,c[1]=w*g-B*h,c[2]=A*g-U*h,c[3]=D*g-$*h,c[8]=b*h+P*g,c[9]=w*h+B*g,c[10]=A*h+U*g,c[11]=D*h+$*g,c}function te(c,o,u){var h=Math.sin(u),g=Math.cos(u),b=o[0],w=o[1],A=o[2],D=o[3],P=o[4],B=o[5],U=o[6],$=o[7];return o!==c&&(c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=b*g+P*h,c[1]=w*g+B*h,c[2]=A*g+U*h,c[3]=D*g+$*h,c[4]=P*g-b*h,c[5]=B*g-w*h,c[6]=U*g-A*h,c[7]=$*g-D*h,c}function X(c,o){return c[0]=o[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=o[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function ae(c,o,u){var h,g,b,w=u[0],A=u[1],D=u[2],P=Math.sqrt(w*w+A*A+D*D);return P<p?null:(w*=P=1/P,A*=P,D*=P,h=Math.sin(o),g=Math.cos(o),c[0]=w*w*(b=1-g)+g,c[1]=A*w*b+D*h,c[2]=D*w*b-A*h,c[3]=0,c[4]=w*A*b-D*h,c[5]=A*A*b+g,c[6]=D*A*b+w*h,c[7]=0,c[8]=w*D*b+A*h,c[9]=A*D*b-w*h,c[10]=D*D*b+g,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}function le(c,o){var u=o[0],h=o[1],g=o[2],b=o[4],w=o[5],A=o[6],D=o[8],P=o[9],B=o[10];return c[0]=Math.sqrt(u*u+h*h+g*g),c[1]=Math.sqrt(b*b+w*w+A*A),c[2]=Math.sqrt(D*D+P*P+B*B),c}function ge(c,o){var u=o[0],h=o[1],g=o[2],b=o[3],w=u+u,A=h+h,D=g+g,P=u*w,B=h*w,U=h*A,$=g*w,G=g*A,Z=g*D,se=b*w,fe=b*A,ue=b*D;return c[0]=1-U-Z,c[1]=B+ue,c[2]=$-fe,c[3]=0,c[4]=B-ue,c[5]=1-P-Z,c[6]=G+se,c[7]=0,c[8]=$+fe,c[9]=G-se,c[10]=1-P-U,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}var ye=K;function De(){var c=new y(3);return y!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function He(c){var o=new y(3);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o}function Be(c){var o=c[0],u=c[1],h=c[2];return Math.sqrt(o*o+u*u+h*h)}function Ee(c,o,u){var h=new y(3);return h[0]=c,h[1]=o,h[2]=u,h}function Fe(c,o,u,h){return c[0]=o,c[1]=u,c[2]=h,c}function at(c,o,u){return c[0]=o[0]+u[0],c[1]=o[1]+u[1],c[2]=o[2]+u[2],c}function yt(c,o,u){return c[0]=o[0]-u[0],c[1]=o[1]-u[1],c[2]=o[2]-u[2],c}function je(c,o,u){return c[0]=o[0]*u[0],c[1]=o[1]*u[1],c[2]=o[2]*u[2],c}function Ke(c,o,u){return c[0]=Math.min(o[0],u[0]),c[1]=Math.min(o[1],u[1]),c[2]=Math.min(o[2],u[2]),c}function it(c,o,u){return c[0]=Math.max(o[0],u[0]),c[1]=Math.max(o[1],u[1]),c[2]=Math.max(o[2],u[2]),c}function Pe(c,o,u){return c[0]=o[0]*u,c[1]=o[1]*u,c[2]=o[2]*u,c}function jt(c,o,u,h){return c[0]=o[0]+u[0]*h,c[1]=o[1]+u[1]*h,c[2]=o[2]+u[2]*h,c}function sn(c,o){var u=o[0]-c[0],h=o[1]-c[1],g=o[2]-c[2];return Math.sqrt(u*u+h*h+g*g)}function dn(c,o){var u=o[0]-c[0],h=o[1]-c[1],g=o[2]-c[2];return u*u+h*h+g*g}function Tn(c){var o=c[0],u=c[1],h=c[2];return o*o+u*u+h*h}function Ut(c,o){return c[0]=-o[0],c[1]=-o[1],c[2]=-o[2],c}function xe(c,o){var u=o[0],h=o[1],g=o[2],b=u*u+h*h+g*g;return b>0&&(b=1/Math.sqrt(b)),c[0]=o[0]*b,c[1]=o[1]*b,c[2]=o[2]*b,c}function Ye(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]}function ct(c,o,u){var h=o[0],g=o[1],b=o[2],w=u[0],A=u[1],D=u[2];return c[0]=g*D-b*A,c[1]=b*w-h*D,c[2]=h*A-g*w,c}function mt(c,o,u,h){var g=o[0],b=o[1],w=o[2];return c[0]=g+h*(u[0]-g),c[1]=b+h*(u[1]-b),c[2]=w+h*(u[2]-w),c}function Ct(c,o,u){var h=o[0],g=o[1],b=o[2],w=u[3]*h+u[7]*g+u[11]*b+u[15];return c[0]=(u[0]*h+u[4]*g+u[8]*b+u[12])/(w=w||1),c[1]=(u[1]*h+u[5]*g+u[9]*b+u[13])/w,c[2]=(u[2]*h+u[6]*g+u[10]*b+u[14])/w,c}function Yt(c,o,u){var h=o[0],g=o[1],b=o[2];return c[0]=h*u[0]+g*u[3]+b*u[6],c[1]=h*u[1]+g*u[4]+b*u[7],c[2]=h*u[2]+g*u[5]+b*u[8],c}function gn(c,o,u){var h=u[0],g=u[1],b=u[2],w=u[3],A=o[0],D=o[1],P=o[2],B=g*P-b*D,U=b*A-h*P,$=h*D-g*A;return c[0]=A+w*(B+=B)+g*($+=$)-b*(U+=U),c[1]=D+w*U+b*B-h*$,c[2]=P+w*$+h*U-g*B,c}function An(c){return c[0]=0,c[1]=0,c[2]=0,c}function ar(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]}var or=yt,Nr=je,Pr=Be;function Er(){var c=new y(4);return y!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0,c[3]=0),c}function Tr(c,o,u){return c[0]=o[0]*u,c[1]=o[1]*u,c[2]=o[2]*u,c[3]=o[3]*u,c}function pi(c,o){var u=o[0],h=o[1],g=o[2],b=o[3],w=u*u+h*h+g*g+b*b;return w>0&&(w=1/Math.sqrt(w)),c[0]=u*w,c[1]=h*w,c[2]=g*w,c[3]=b*w,c}function Fr(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]+c[3]*o[3]}function hi(c,o,u){var h=o[0],g=o[1],b=o[2],w=o[3];return c[0]=u[0]*h+u[4]*g+u[8]*b+u[12]*w,c[1]=u[1]*h+u[5]*g+u[9]*b+u[13]*w,c[2]=u[2]*h+u[6]*g+u[10]*b+u[14]*w,c[3]=u[3]*h+u[7]*g+u[11]*b+u[15]*w,c}function $t(){var c=new y(4);return y!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function En(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c}function ur(c,o,u){u*=.5;var h=o[0],g=o[1],b=o[2],w=o[3],A=Math.sin(u),D=Math.cos(u);return c[0]=h*D+w*A,c[1]=g*D+b*A,c[2]=b*D-g*A,c[3]=w*D-h*A,c}function $r(c,o,u){u*=.5;var h=o[0],g=o[1],b=o[2],w=o[3],A=Math.sin(u),D=Math.cos(u);return c[0]=h*D-b*A,c[1]=g*D+w*A,c[2]=b*D+h*A,c[3]=w*D-g*A,c}De(),Er();var Br,Ya,vo,Yo=pi,Aa=(Br=De(),Ya=Ee(1,0,0),vo=Ee(0,1,0),function(c,o,u){var h=Ye(o,u);return h<-.999999?(ct(Br,Ya,o),Pr(Br)<1e-6&&ct(Br,vo,o),xe(Br,Br),(function(g,b,w){w*=.5;var A=Math.sin(w);g[0]=A*b[0],g[1]=A*b[1],g[2]=A*b[2],g[3]=Math.cos(w)})(c,Br,Math.PI),c):h>.999999?(c[0]=0,c[1]=0,c[2]=0,c[3]=1,c):(ct(Br,o,u),c[0]=Br[0],c[1]=Br[1],c[2]=Br[2],c[3]=1+h,Yo(c,c))});function Qi(){var c=new y(2);return y!=Float32Array&&(c[0]=0,c[1]=0),c}function Ri(c,o){var u=new y(2);return u[0]=c,u[1]=o,u}function zs(c,o,u){return c[0]=o,c[1]=u,c}function is(c,o,u){return c[0]=o[0]+u[0],c[1]=o[1]+u[1],c}function uf(c,o,u){return c[0]=o[0]-u[0],c[1]=o[1]-u[1],c}function zu(c,o,u){return c[0]=o[0]*u,c[1]=o[1]*u,c}function Nu(c){var o=c[0],u=c[1];return Math.sqrt(o*o+u*u)}function cf(c,o){var u=o[0],h=o[1],g=u*u+h*h;return g>0&&(g=1/Math.sqrt(g)),c[0]=o[0]*g,c[1]=o[1]*g,c}function mi(c,o){return c[0]*o[0]+c[1]*o[1]}$t(),$t(),E();var oo,ah,Pp=uf;function wl(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}Qi();var vg=(function(){if(ah)return oo;function c(o,u,h,g){this.cx=3*o,this.bx=3*(h-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(g-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=u,this.p2x=h,this.p2y=g}return ah=1,oo=c,c.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,u){if(u===void 0&&(u=1e-6),o<0)return 0;if(o>1)return 1;for(var h=o,g=0;g<8;g++){var b=this.sampleCurveX(h)-o;if(Math.abs(b)<u)return h;var w=this.sampleCurveDerivativeX(h);if(Math.abs(w)<1e-6)break;h-=b/w}var A=0,D=1;for(h=o,g=0;g<20&&(b=this.sampleCurveX(h),!(Math.abs(b-o)<u));g++)o>b?A=h:D=h,h=.5*(D-A)+A;return h},solve:function(o,u){return this.sampleCurveY(this.solveCurveX(o,u))}},oo})(),Sc=wl(vg);function Vt(c,o){this.x=c,this.y=o}function Tc(c,o){if(Array.isArray(c)){if(!Array.isArray(o)||c.length!==o.length)return!1;for(let u=0;u<c.length;u++)if(!Tc(c[u],o[u]))return!1;return!0}if(typeof c=="object"&&c!==null&&o!==null){if(typeof o!="object"||Object.keys(c).length!==Object.keys(o).length)return!1;for(const u in c)if(!Tc(c[u],o[u]))return!1;return!0}return c===o}Vt.prototype={clone(){return new Vt(this.x,this.y)},add(c){return this.clone()._add(c)},sub(c){return this.clone()._sub(c)},multByPoint(c){return this.clone()._multByPoint(c)},divByPoint(c){return this.clone()._divByPoint(c)},mult(c){return this.clone()._mult(c)},div(c){return this.clone()._div(c)},rotate(c){return this.clone()._rotate(c)},rotateAround(c,o){return this.clone()._rotateAround(c,o)},matMult(c){return this.clone()._matMult(c)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(c){return this.x===c.x&&this.y===c.y},dist(c){return Math.sqrt(this.distSqr(c))},distSqr(c){const o=c.x-this.x,u=c.y-this.y;return o*o+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith(c){return this.angleWithSep(c.x,c.y)},angleWithSep(c,o){return Math.atan2(this.x*o-this.y*c,this.x*c+this.y*o)},_matMult(c){const o=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=o,this},_add(c){return this.x+=c.x,this.y+=c.y,this},_sub(c){return this.x-=c.x,this.y-=c.y,this},_mult(c){return this.x*=c,this.y*=c,this},_div(c){return this.x/=c,this.y/=c,this},_multByPoint(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint(c){return this.x/=c.x,this.y/=c.y,this},_unit(){return this._div(this.mag()),this},_perp(){const c=this.y;return this.y=this.x,this.x=-c,this},_rotate(c){const o=Math.cos(c),u=Math.sin(c),h=u*this.x+o*this.y;return this.x=o*this.x-u*this.y,this.y=h,this},_rotateAround(c,o){const u=Math.cos(c),h=Math.sin(c),g=o.y+h*(this.x-o.x)+u*(this.y-o.y);return this.x=o.x+u*(this.x-o.x)-h*(this.y-o.y),this.y=g,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Vt},Vt.convert=function(c){if(c instanceof Vt)return c;if(Array.isArray(c))return new Vt(+c[0],+c[1]);if(c.x!==void 0&&c.y!==void 0)return new Vt(+c.x,+c.y);throw new Error("Expected [x, y] or {x, y} point format")};const x_=Math.PI/180,Rp=180/Math.PI;function Ar(c){return c*x_}function ut(c){return c*Rp}const me=[[0,0],[1,0],[1,1],[0,1]];function we(c){if(c<=0)return 0;if(c>=1)return 1;const o=c*c,u=o*c;return 4*(c<.5?u:3*(c-o)+u-.75)}function Le(c,o,u,h){const g=new Sc(c,o,u,h);return function(b){return g.solve(b)}}const Qe=Le(.25,.1,.25,1);function ze(c,o,u){return Math.min(u,Math.max(o,c))}function ot(c,o,u){return(u=ze((u-c)/(o-c),0,1))*u*(3-2*u)}function _t(c,o,u){const h=u-o,g=((c-o)%h+h)%h+o;return g===o?u:g}function lt(c,o,u){if(!c.length)return u(null,[]);let h=c.length;const g=new Array(c.length);let b=null;c.forEach((w,A)=>{o(w,(D,P)=>{D&&(b=D),g[A]=P,--h===0&&u(b,g)})})}let bt=1;function Gt(){return bt++}function Ft(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log2(c)))}function hn(c,o){c.forEach(u=>{o[u]&&(o[u]=o[u].bind(o))})}function Dn(c,o,u){const h={};for(const g in c)h[g]=o.call(this,c[g],g,c);return h}function Rn(c,o,u){const h={};for(const g in c)o.call(this,c[g],g,c)&&(h[g]=c[g]);return h}function Zn(c){return Array.isArray(c)?c.map(Zn):typeof c=="object"&&c?Dn(c,Zn):c}function rr(c,o){for(let u=0;u<c.length;u++)if(o.indexOf(c[u])>=0)return!0;return!1}const Pn={};function Hn(c){Pn[c]||(typeof console<"u"&&console.warn(c),Pn[c]=!0)}function xi(c,o,u){return(u.y-c.y)*(o.x-c.x)>(o.y-c.y)*(u.x-c.x)}function oa(c){let o=0;for(let u,h,g=0,b=c.length,w=b-1;g<b;w=g++)u=c[g],h=c[w],o+=(h.x-u.x)*(u.y+h.y);return o}function zi([c,o,u]){const h=Ar(o+90),g=Ar(u);return{x:c*Math.cos(h)*Math.sin(g),y:c*Math.sin(h)*Math.sin(g),z:c*Math.cos(g),azimuthal:o,polar:u}}function ya(c){return(typeof self<"u"||c!==void 0)&&typeof WorkerGlobalScope<"u"&&(c!==void 0?c:self)instanceof WorkerGlobalScope}function ki(c){const o={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,h,g,b)=>{const w=g||b;return o[h]=!w||w.toLowerCase(),""}),o["max-age"]){const u=parseInt(o["max-age"],10);isNaN(u)?delete o["max-age"]:o["max-age"]=u}return o}let Or=null;function ji(c,o){return[c[4*o],c[4*o+1],c[4*o+2],c[4*o+3]]}function si(c,o,u,h){for(;o<u;){const g=o+u>>1;c[g]<h?o=g+1:u=g}return o}function li(c,o,u,h){for(;o<u;){const g=o+u>>1;c[g]<=h?o=g+1:u=g}return o}function wi(c){return c>0?1/(1.001-c):1+c}function sa(c){return c>0?1-1/(1.001-c):-c}function bo(c,o,u){return(c-o.min)*(u.max-u.min)/(o.max-o.min)+u.min}const Ja={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Ja.API_URL)return null;try{const c=new URL(Ja.API_URL);return c.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":c.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",BUILDING_GEN_URL:"https://api.mapbox.com/mapbox-gl-js/building-gen/building_gen_v1.2.4.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Ec(c){return Ja.API_URL_REGEX.test(c)}function as(c){return Ja.API_SPRITE_REGEX.test(c)}let bs,ru,so,Ns,xs,Fu;function iu(){return bs==null&&(bs=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),bs}const Sl={now:()=>Ns!==void 0?Ns:performance.now(),setNow(c){Ns=c},restoreNow(){Ns=void 0},frame(c){const o=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(c,o=0){const{width:u,height:h}=c;xs||(xs=document.createElement("canvas"));const g=xs.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(u>xs.width||h>xs.height)&&(xs.width=u,xs.height=h),g.clearRect(-o,-o,u+2*o,h+2*o),g.drawImage(c,0,0,u,h),g.getImageData(-o,-o,u+2*o,h+2*o)},resolveURL:c=>(ru||(ru=document.createElement("a")),ru.href=c,ru.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(so==null&&(so=window.matchMedia("(prefers-reduced-motion: reduce)")),so.matches)},hasCanvasFingerprintNoise(){if(Fu!==void 0)return Fu;if(!iu())return Fu=!1,!1;const c=new OffscreenCanvas(85,1),o=c.getContext("2d",{willReadFrequently:!0});let u=0;for(let g=0;g<c.width;++g)o.fillStyle=`rgba(${u++},${u++},${u++}, 255)`,o.fillRect(g,0,1,1);const h=o.getImageData(0,0,c.width,c.height);u=0;for(let g=0;g<h.data.length;++g)if(g%4!=3&&u++!==h.data[g])return Fu=!0,!0;return Fu=!1,!1}};function kp(c,o){const u=c.indexOf("?");if(u<0)return`${c}?${new URLSearchParams(o).toString()}`;const h=new URLSearchParams(c.slice(u));for(const g in o)h.set(g,o[g]);return`${c.slice(0,u)}?${h.toString()}`}function Ac(c,o={persistentParams:[]}){const u=c.indexOf("?");if(u<0)return c;const h=new URLSearchParams,g=new URLSearchParams(c.slice(u));for(const w of o.persistentParams){const A=g.get(w);A&&h.set(w,A)}const b=h.toString();return`${c.slice(0,u)}${b.length>0?`?${b}`:""}`}const Zx="mapbox-tiles";let g0=500,w_=50;const bg=["language","worldview","jobid"];let Fo,jl;function au(){try{return caches}catch{}}function xo(){const c=au();c&&Fo==null&&(Fo=c.open(Zx))}let ou=1/0;const oh={supported:!1,testSupport:function(c){!ff&&su&&(Lp?zp(c):Bu=c)}};let Bu,su,ff=!1,Lp=!1;const y0=typeof self<"u"?self:{};function zp(c){const o=c.createTexture();c.bindTexture(c.TEXTURE_2D,o);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,su),c.isContextLost())return;oh.supported=!0}catch{}c.deleteTexture(o),ff=!0}y0.document&&(su=y0.document.createElement("img"),su.onload=function(){Bu&&zp(Bu),Bu=null,Lp=!0},su.onerror=function(){ff=!0,Bu=null},su.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const eo={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(eo);class md extends Error{constructor(o,u,h){u===401&&Ec(h)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=u,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const hf=ya()?()=>self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Fs=function(c,o){if(!(/^file:/.test(u=c.url)||/^file:/.test(hf())&&!/^\w+:/.test(u))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return(function(h,g){const b=new AbortController,w=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:hf(),referrerPolicy:h.referrerPolicy,signal:b.signal});let A=!1,D=!1;const P=(B=w.url).indexOf("sku=")>0&&Ec(B);var B;h.type==="json"&&w.headers.set("Accept","application/json");const U=(G,Z,se)=>{if(D)return;if(G&&G.message!=="SecurityError"&&Hn(G.toString()),Z&&se)return $(Z);const fe=Date.now();fetch(w).then(ue=>{if(ue.ok){const pe=P?ue.clone():null;return $(ue,pe,fe)}return g(new md(ue.statusText,ue.status,h.url))}).catch(ue=>{ue.name!=="AbortError"&&g(new Error(`${ue.message} ${h.url}`))})},$=(G,Z,se)=>{(h.type==="arrayBuffer"?G.arrayBuffer():h.type==="json"?G.json():G.text()).then(fe=>{D||(Z&&se&&(function(ue,pe,ve){if(xo(),Fo==null)return;const Se=ki(pe.headers.get("Cache-Control")||"");if(Se["no-store"])return;const ke={status:pe.status,statusText:pe.statusText,headers:new Headers};pe.headers.forEach((qe,Ue)=>ke.headers.set(Ue,qe)),Se["max-age"]&&ke.headers.set("Expires",new Date(ve+1e3*Se["max-age"]).toUTCString());const Ie=ke.headers.get("Expires");if(!Ie||new Date(Ie).getTime()-ve<42e4)return;let Ve=Ac(ue.url,{persistentParams:bg});if(pe.status===206){const qe=ue.headers.get("Range");if(!qe)return;ke.status=200,Ve=kp(Ve,{range:qe})}(function(qe,Ue){if(jl===void 0)try{new Response(new ReadableStream),jl=!0}catch{jl=!1}jl?Ue(qe.body):qe.blob().then(Ue).catch(Ze=>Hn(Ze.message))})(pe,qe=>{const Ue=new Response((Ze=pe.status)!==200&&Ze!==404&&[101,103,204,205,304].includes(Ze)?null:qe,ke);var Ze;xo(),Fo!=null&&Fo.then(rt=>rt.put(Ve,Ue)).catch(rt=>Hn(rt.message))})})(w,Z,se),A=!0,g(null,fe,G.headers))}).catch(fe=>{D||g(new Error(fe.message))})};return P?(function(G,Z){if(xo(),Fo==null)return Z(null);Fo.then(se=>{let fe=Ac(G.url,{persistentParams:bg});const ue=G.headers.get("Range");ue&&(fe=kp(fe,{range:ue})),se.match(fe).then(pe=>{const ve=(function(Se){if(!Se)return!1;const ke=new Date(Se.headers.get("Expires")||0),Ie=ki(Se.headers.get("Cache-Control")||"");return Number(ke)>Date.now()&&!Ie["no-cache"]})(pe);se.delete(fe).catch(Z),ve&&se.put(fe,pe.clone()).catch(Z),Z(null,pe,ve)}).catch(Z)}).catch(Z)})(w,U):U(null,null),{cancel:()=>{D=!0,A||b.abort()}}})(c,o);if(ya(self)&&self.worker.actor)return self.worker.actor.send("getResource",c,o,void 0,!0)}var u;return(function(h,g){const b=new XMLHttpRequest;b.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(b.responseType="arraybuffer");for(const w in h.headers)b.setRequestHeader(w,h.headers[w]);return h.type==="json"&&(b.responseType="text",b.setRequestHeader("Accept","application/json")),b.withCredentials=h.credentials==="include",b.onerror=()=>{g(new Error(b.statusText))},b.onload=()=>{if((b.status>=200&&b.status<300||b.status===0)&&b.response!==null){let w=b.response;if(h.type==="json")try{w=JSON.parse(b.response)}catch(D){return g(D)}const A=new Headers;b.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(D=>{const P=D.split(": "),B=P.shift(),U=P.join(": ");A.append(B,U)}),g(null,w,A)}else g(new md(b.statusText,b.status,h.url))},b.send(h.body),{cancel:()=>b.abort()}})(c,o)},gd=function(c,o){return Fs(Object.assign(c,{type:"arrayBuffer"}),o)};function S_(c){const o=document.createElement("a");return o.href=c,o.protocol===location.protocol&&o.host===location.host}const T_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Cr,df;Cr=[],df=0;const xg=function(c,o){if(oh.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),df>=Ja.MAX_PARALLEL_IMAGE_REQUESTS){const b={requestParameters:c,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return Cr.push(b),b}df++;let u=!1;const h=()=>{if(!u)for(u=!0,df--;Cr.length&&df<Ja.MAX_PARALLEL_IMAGE_REQUESTS;){const b=Cr.shift(),{requestParameters:w,callback:A,cancelled:D}=b;D||(b.cancel=xg(w,A).cancel)}},g=gd(c,(b,w,A)=>{h(),b?o(b):w&&(self.createImageBitmap?(function(D,P){const B=new Blob([new Uint8Array(D)],{type:"image/png"});createImageBitmap(B).then(U=>{P(null,U)}).catch(U=>{P(new Error(`Could not load image because of ${U.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})})(w,(D,P)=>o(D,P,A)):(function(D,P){const B=new Image;B.onload=()=>{P(null,B),URL.revokeObjectURL(B.src),B.onload=null,requestAnimationFrame(()=>{B.src=T_})},B.onerror=()=>P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const U=new Blob([new Uint8Array(D)],{type:"image/png"});B.src=D.byteLength?URL.createObjectURL(U):T_})(w,(D,P)=>o(D,P,A)))});return{cancel:()=>{g.cancel(),h()}}};var el,sh,lh,lu={exports:{}},wg={exports:{}},Np={exports:{}},_0=(function(){if(lh)return lu.exports;lh=1;var c=(el||(el=1,wg.exports=function(u,h){var g,b,w,A,D,P,B,U;for(b=u.length-(g=3&u.length),w=h,D=3432918353,P=461845907,U=0;U<b;)B=255&u.charCodeAt(U)|(255&u.charCodeAt(++U))<<8|(255&u.charCodeAt(++U))<<16|(255&u.charCodeAt(++U))<<24,++U,w=27492+(65535&(A=5*(65535&(w=(w^=B=(65535&(B=(B=(65535&B)*D+(((B>>>16)*D&65535)<<16)&4294967295)<<15|B>>>17))*P+(((B>>>16)*P&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+(((A>>>16)+58964&65535)<<16);switch(B=0,g){case 3:B^=(255&u.charCodeAt(U+2))<<16;case 2:B^=(255&u.charCodeAt(U+1))<<8;case 1:w^=B=(65535&(B=(B=(65535&(B^=255&u.charCodeAt(U)))*D+(((B>>>16)*D&65535)<<16)&4294967295)<<15|B>>>17))*P+(((B>>>16)*P&65535)<<16)&4294967295}return w^=u.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),wg.exports),o=(sh||(sh=1,Np.exports=function(u,h){for(var g,b=u.length,w=h^b,A=0;b>=4;)g=1540483477*(65535&(g=255&u.charCodeAt(A)|(255&u.charCodeAt(++A))<<8|(255&u.charCodeAt(++A))<<16|(255&u.charCodeAt(++A))<<24))+((1540483477*(g>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),b-=4,++A;switch(b){case 3:w^=(255&u.charCodeAt(A+2))<<16;case 2:w^=(255&u.charCodeAt(A+1))<<8;case 1:w=1540483477*(65535&(w^=255&u.charCodeAt(A)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),Np.exports);return lu.exports=c,lu.exports.murmur3=c,lu.exports.murmur2=o,lu.exports})(),Oc=wl(_0);class uu{constructor(o,...u){Object.assign(this,u[0]||{}),this.type=o}}class Fp extends uu{constructor(o,u={}){super("error",Object.assign({error:o},u))}}function Kx(c,o,u){u[c]&&u[c].indexOf(o)!==-1||(u[c]=u[c]||[],u[c].push(o))}function yd(c,o,u){if(u&&u[c]){const h=u[c].indexOf(o);h!==-1&&u[c].splice(h,1)}}class pf{on(o,u){return this._listeners=this._listeners||{},Kx(o,u,this._listeners),this}off(o,u){return yd(o,u,this._listeners),yd(o,u,this._oneTimeListeners),this}once(o,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Kx(o,u,this._oneTimeListeners),this):new Promise(h=>{this.once(o,h)})}fire(o,u){const h=typeof o=="string"?new uu(o,u):o,g=h.type;if(this.listens(g)){h.target=this;const b=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const D of b)D.call(this,h);const w=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const D of w)yd(g,D,this._oneTimeListeners),D.call(this,h);const A=this._eventedParent;if(A){const D=typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData;Object.assign(h,D),A.fire(h)}}else h instanceof Fp&&console.error(h.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,u){return this._eventedParent=o,this._eventedParentData=u,this}}class ws{constructor(o){typeof o=="string"?this.name=o:(this.name=o.name,this.iconsetId=o.iconsetId)}static from(o){return new ws(o)}static toString(o){return o.iconsetId?`${o.name}${o.iconsetId}`:o.name}static parse(o){const[u,h]=o.split("");return new ws({name:u,iconsetId:h})}static isEqual(o,u){return o.name===u.name&&o.iconsetId===u.iconsetId}toString(){return ws.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var cu,E_={},Qx=(function(){if(cu)return E_;cu=1;var c={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(b){return(b=Math.round(b))<0?0:b>255?255:b}function u(b){return o(b[b.length-1]==="%"?parseFloat(b)/100*255:parseInt(b))}function h(b){return(w=b[b.length-1]==="%"?parseFloat(b)/100:parseFloat(b))<0?0:w>1?1:w;var w}function g(b,w,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?b+(w-b)*A*6:2*A<1?w:3*A<2?b+(w-b)*(2/3-A)*6:b}try{E_.parseCSSColor=function(b){var w,A=b.replace(/ /g,"").toLowerCase();if(A in c)return c[A].slice();if(A[0]==="#")return A.length===4?(w=parseInt(A.substr(1),16))>=0&&w<=4095?[(3840&w)>>4|(3840&w)>>8,240&w|(240&w)>>4,15&w|(15&w)<<4,1]:null:A.length===7&&(w=parseInt(A.substr(1),16))>=0&&w<=16777215?[(16711680&w)>>16,(65280&w)>>8,255&w,1]:null;var D=A.indexOf("("),P=A.indexOf(")");if(D!==-1&&P+1===A.length){var B=A.substr(0,D),U=A.substr(D+1,P-(D+1)).split(","),$=1;switch(B){case"rgba":if(U.length!==4)return null;$=h(U.pop());case"rgb":return U.length!==3?null:[u(U[0]),u(U[1]),u(U[2]),$];case"hsla":if(U.length!==4)return null;$=h(U.pop());case"hsl":if(U.length!==3)return null;var G=(parseFloat(U[0])%360+360)%360/360,Z=h(U[1]),se=h(U[2]),fe=se<=.5?se*(Z+1):se+Z-se*Z,ue=2*se-fe;return[o(255*g(ue,fe,G+1/3)),o(255*g(ue,fe,G)),o(255*g(ue,fe,G-1/3)),$];default:return null}}return null}}catch{}return E_})();class Qr{constructor(o,u,h,g=1){this.r=o,this.g=u,this.b=h,this.a=g}static parse(o){if(!o)return;if(o instanceof Qr)return o;if(typeof o!="string")return;const u=Qx.parseCSSColor(o);return u?new Qr(u[0]/255,u[1]/255,u[2]/255,u[3]):void 0}toString(){const[o,u,h,g]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*o)},${Math.round(255*u)},${Math.round(255*h)},${g})`}toNonPremultipliedRenderColor(o){const{r:u,g:h,b:g,a:b}=this;return new b0(o,u,h,g,b)}toPremultipliedRenderColor(o){const{r:u,g:h,b:g,a:b}=this;return new Jx(o,u*b,h*b,g*b,b)}clone(){return new Qr(this.r,this.g,this.b,this.a)}}class v0{constructor(o,u,h,g,b,w=!1){if(this.premultiplied=!1,this.premultiplied=w,o){const A=o.image.height,D=A*A;this.premultiplied?(u=b===0?0:u/b*(A-1),h=b===0?0:h/b*(A-1),g=b===0?0:g/b*(A-1)):(u*=A-1,h*=A-1,g*=A-1),u=Math.max(0,Math.min(A-1,u)),h=Math.max(0,Math.min(A-1,h)),g=Math.max(0,Math.min(A-1,g));const P=Math.floor(u),B=Math.floor(h),U=Math.floor(g),$=Math.ceil(u),G=Math.ceil(h),Z=Math.ceil(g),se=u-P,fe=h-B,ue=g-U,pe=o.image.data,ve=4*(P+B*D+U*A),Se=4*(P+B*D+Z*A),ke=4*(P+G*D+U*A),Ie=4*(P+G*D+Z*A),Ve=4*($+B*D+U*A),qe=4*($+B*D+Z*A),Ue=4*($+G*D+U*A),Ze=4*($+G*D+Z*A);this.r=Vn(Vn(Vn(pe[ve],pe[Se],ue),Vn(pe[ke],pe[Ie],ue),fe),Vn(Vn(pe[Ve],pe[qe],ue),Vn(pe[Ue],pe[Ze],ue),fe),se)/255*(this.premultiplied?b:1),this.g=Vn(Vn(Vn(pe[ve+1],pe[Se+1],ue),Vn(pe[ke+1],pe[Ie+1],ue),fe),Vn(Vn(pe[Ve+1],pe[qe+1],ue),Vn(pe[Ue+1],pe[Ze+1],ue),fe),se)/255*(this.premultiplied?b:1),this.b=Vn(Vn(Vn(pe[ve+2],pe[Se+2],ue),Vn(pe[ke+2],pe[Ie+2],ue),fe),Vn(Vn(pe[Ve+2],pe[qe+2],ue),Vn(pe[Ue+2],pe[Ze+2],ue),fe),se)/255*(this.premultiplied?b:1),this.a=b}else this.r=u,this.g=h,this.b=g,this.a=b}toArray(){const{r:o,g:u,b:h,a:g}=this;return[255*o,255*u,255*h,g]}toHslaArray(){let{r:o,g:u,b:h,a:g}=this;if(this.premultiplied){if(g===0)return[0,0,0,0];const Z=1/g;o*=Z,u*=Z,h*=Z}const b=Math.min(Math.max(o,0),1),w=Math.min(Math.max(u,0),1),A=Math.min(Math.max(h,0),1),D=Math.min(b,w,A),P=Math.max(b,w,A),B=P-D,U=.5*(D+P);if(B===0)return[0,0,100*U,g];const $=U>.5?B/(2-P-D):B/(P+D);let G;switch(P){case b:G=60*((w-A)/B+(w<A?6:0));break;case w:G=60*((A-b)/B+2);break;default:G=60*((b-w)/B+4)}return[G,100*$,100*U,g]}toArray01(){const{r:o,g:u,b:h,a:g}=this;return[o,u,h,g]}toArray01Scaled(o){const{r:u,g:h,b:g}=this;return[u*o,h*o,g*o]}toArray01Linear(){const{r:o,g:u,b:h,a:g}=this;return[Math.pow(o,2.2),Math.pow(u,2.2),Math.pow(h,2.2),g]}}class b0 extends v0{constructor(o,u,h,g,b){super(o,u,h,g,b,!1)}}class Jx extends v0{constructor(o,u,h,g,b){super(o,u,h,g,b,!0)}}function Vn(c,o,u){return c*(1-u)+o*u}function x0(c,o,u){return c.map((h,g)=>Vn(h,o[g],u))}Qr.black=new Qr(0,0,0,1),Qr.white=new Qr(1,1,1,1),Qr.transparent=new Qr(0,0,0,0),Qr.red=new Qr(1,0,0,1),Qr.blue=new Qr(0,0,1,1);var _d=Object.freeze({__proto__:null,array:x0,color:function(c,o,u){return new Qr(Vn(c.r,o.r,u),Vn(c.g,o.g,u),Vn(c.b,o.b,u),Vn(c.a,o.a,u))},number:Vn});class os extends Error{constructor(o,u){super(u),this.message=u,this.key=o}}class A_{constructor(o,u=[]){this.parent=o,this.bindings={};for(const[h,g]of u)this.bindings[h]=g}concat(o){return new A_(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const tl={kind:"null"},Mn={kind:"number"},Yr={kind:"string"},Vr={kind:"boolean"},Bs={kind:"color"},Bp={kind:"object"},ii={kind:"value"},O_={kind:"collator"},jp={kind:"formatted"},vd={kind:"resolvedImage"};function Ss(c,o){return{kind:"array",itemType:c,N:o}}function Oa(c){if(c.kind==="array"){const o=Oa(c.itemType);return typeof c.N=="number"?`array<${o}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${o}>`}return c.kind}const w0=[tl,Mn,Yr,Vr,Bs,jp,Bp,Ss(ii),vd];function mf(c,o){if(o.kind==="error")return null;if(c.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!mf(c.itemType,o.itemType))&&(typeof c.N!="number"||c.N===o.N))return null}else{if(c.kind===o.kind)return null;if(c.kind==="value"){for(const u of w0)if(!mf(u,o))return null}}return`Expected ${Oa(c)} but found ${Oa(o)} instead.`}function S0(c,o){return o.some(u=>u.kind===c.kind)}function Up(c,o){return o.some(u=>u==="null"?c===null:u==="array"?Array.isArray(c):u==="object"?c&&!Array.isArray(c)&&typeof c=="object":u===typeof c)}function Sg(c,o){return c.kind==="array"&&o.kind==="array"?c.N===o.N&&Sg(c.itemType,o.itemType):c.kind===o.kind}class C_{constructor(o,u,h){this.sensitivity=o?u?"variant":"case":u?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,u){return this.collator.compare(o,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Tg{constructor(o,u,h,g,b){this.text=o.normalize?o.normalize():o,this.image=u,this.scale=h,this.fontStack=g,this.textColor=b}}class ss{constructor(o){this.sections=o}static fromString(o){return new ss([new Tg(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||!!o.image&&o.image.hasPrimary())}static factory(o){return o instanceof ss?o:ss.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const u of this.sections){if(u.image){const g=u.image.getPrimary().id.toString();o.push(["image",g]);continue}o.push(u.text);const h={};u.fontStack&&(h["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(h["font-scale"]=u.scale),u.textColor&&(h["text-color"]=["rgba"].concat(u.textColor.toNonPremultipliedRenderColor(null).toArray())),o.push(h)}return o}}class Bo{constructor(o,u={}){this.id=ws.from(o),this.params=u.params,this.sx=u.sx||1,this.sy=u.sy||1}toString(){return JSON.stringify(this)}static parse(o){let u,h,g,b;try{({id:u,params:h,sx:g,sy:b}=JSON.parse(o)||{})}catch{return null}return u?new Bo(u,{params:h,sx:g,sy:b}):null}scaleSelf(o,u=o){return this.sx*=o,this.sy*=u,this}}class nl{constructor(o,u,h,g,b=!1){this.primaryId=ws.from(o),this.primaryOptions=u,h&&(this.secondaryId=ws.from(h)),this.secondaryOptions=g,this.available=b}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new Bo(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new Bo(this.secondaryId,this.secondaryOptions):null}static from(o){return typeof o=="string"?nl.build({name:o}):o}static build(o,u,h,g){return!o||typeof o=="object"&&!("name"in o)?null:new nl(o,h,u,g)}}function T0(c,o,u,h){return typeof c=="number"&&c>=0&&c<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof u=="number"&&u>=0&&u<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[c,o,u,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[c,o,u,h]:[c,o,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function uh(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Qr||c instanceof C_||c instanceof ss||c instanceof nl)return!0;if(Array.isArray(c)){for(const o of c)if(!uh(o))return!1;return!0}if(typeof c=="object"){for(const o in c)if(!uh(c[o]))return!1;return!0}return!1}function to(c){if(c===null)return tl;if(typeof c=="string")return Yr;if(typeof c=="boolean")return Vr;if(typeof c=="number")return Mn;if(c instanceof Qr)return Bs;if(c instanceof C_)return O_;if(c instanceof ss)return jp;if(c instanceof nl)return vd;if(Array.isArray(c)){const o=c.length;let u;for(const h of c){const g=to(h);if(u){if(u===g)continue;u=ii;break}u=g}return Ss(u||ii,o)}return Bp}function ju(c){const o=typeof c;return c===null?"":o==="string"||o==="number"||o==="boolean"?String(c):c instanceof ss||c instanceof nl||c instanceof Qr?c.toString():JSON.stringify(c)}class Ul{constructor(o,u){this.type=o,this.value=u}static parse(o,u){if(o.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!uh(o[1]))return u.error("invalid value");const h=o[1];let g=to(h);const b=u.expectedType;return g.kind!=="array"||g.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(g=b),new Ul(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Qr?["rgba"].concat(this.value.toNonPremultipliedRenderColor(null).toArray()):this.value instanceof ss?this.value.serialize():this.value}}class Ca{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const ch={string:Yr,number:Mn,boolean:Vr,object:Bp};class Gn{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");let h,g=1;const b=o[0];if(b==="array"){let A,D;if(o.length>2){const P=o[1];if(typeof P!="string"||!(P in ch)||P==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);A=ch[P],g++}else A=ii;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return u.error('The length argument to "array" must be a positive integer literal',2);D=o[2],g++}h=Ss(A,D)}else h=ch[b];const w=[];for(;g<o.length;g++){const A=u.parse(o[g],g,ii);if(!A)return null;w.push(A)}return new Gn(h,w)}evaluate(o){for(let u=0;u<this.args.length;u++){const h=this.args[u].evaluate(o);if(!mf(this.type,to(h)))return h;if(u===this.args.length-1)throw new Ca(`The expression ${JSON.stringify(this.args[u].serialize())} evaluated to ${Oa(to(h))} but was expected to be of type ${Oa(this.type)}.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,u=[o.kind];if(o.kind==="array"){const h=o.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){u.push(h.kind);const g=o.N;(typeof g=="number"||this.args.length>1)&&u.push(g)}}return u.concat(this.args.map(h=>h.serialize()))}}class On{constructor(o){this.type=jp,this.sections=o}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const h=o[1];if(!Array.isArray(h)&&typeof h=="object")return u.error("First argument must be an image or text section.");const g=[];let b=!1;for(let w=1;w<=o.length-1;++w){const A=o[w];if(b&&typeof A=="object"&&!Array.isArray(A)){b=!1;let D=null;if(A["font-scale"]&&(D=u.parseObjectValue(A["font-scale"],w,"font-scale",Mn),!D))return null;let P=null;if(A["text-font"]&&(P=u.parseObjectValue(A["text-font"],w,"text-font",Ss(Yr)),!P))return null;let B=null;if(A["text-color"]&&(B=u.parseObjectValue(A["text-color"],w,"text-color",Bs),!B))return null;const U=g[g.length-1];U.scale=D,U.font=P,U.textColor=B}else{const D=u.parse(o[w],w,ii);if(!D)return null;const P=D.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,g.push({content:D,scale:null,font:null,textColor:null})}}return new On(g)}evaluate(o){return new ss(this.sections.map(u=>{const h=u.content.evaluate(o);return Sg(to(h),vd)?new Tg("",h,null,null,null):new Tg(ju(h),null,u.scale?u.scale.evaluate(o):null,u.font?u.font.evaluate(o).join(","):null,u.textColor?u.textColor.evaluate(o):null)}))}eachChild(o){for(const u of this.sections)o(u.content),u.scale&&o(u.scale),u.font&&o(u.font),u.textColor&&o(u.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const u of this.sections){o.push(u.content.serialize());const h={};u.scale&&(h["font-scale"]=u.scale.serialize()),u.font&&(h["text-font"]=u.font.serialize()),u.textColor&&(h["text-color"]=u.textColor.serialize()),o.push(h)}return o}}class bd{constructor(o,u,h,g){this._imageWarnHistory={},this.type=vd,this.namePrimary=o,this.nameSecondary=u,h&&(this.paramsPrimary=h.params,this.iconsetIdPrimary=h.iconset?h.iconset.id:void 0),g&&(this.paramsSecondary=g.params,this.iconsetIdSecondary=g.iconset?g.iconset.id:void 0)}static parse(o,u){if(o.length<2)return u.error("Expected two or more arguments.");let h=1;const g=[];function b(){if(h<o.length){const A=u.parse(o[h],h++,Yr);return A?(g.push({image:A,options:{}}),!0):(u.error(g.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function w(){if(h<o.length){const D=o[h];if((A=D)===null||typeof A!="object"||Array.isArray(A))return!0;const P=D.params,B=D.iconset,U=u.concat(h);if(!P&&!B)return h++,!0;if(P){if(typeof P!="object"||P.constructor!==Object)return U.error('Image options "params" should be an object'),!1;const $={},G=U.concat(void 0,"params");for(const Z in P){if(!Z)return G.error("Image parameter name should be non-empty"),!1;const se=G.concat(void 0,Z).parse(P[Z],void 0,Bs,void 0,{typeAnnotation:"coerce"});if(!se)return!1;$[Z]=se}g[g.length-1].options.params=$}if(B){if(typeof B!="object"||B.constructor!==Object)return U.error('Image options "iconset" should be an object'),!1;if(!B.id)return U.error('Image options "iconset" should have an "id" property'),!1;g[g.length-1].options.iconset=B}return h++,!0}var A;return!0}for(let A=0;A<2;A++)if(!b()||!w())return;return new bd(g[0].image,g[1]?g[1].image:void 0,g[0].options,g[1]?g[1].options:void 0)}evaluateParams(o,u){const h={};if(u){for(const g in u)if(u[g])try{h[g]=u[g].evaluate(o)}catch{continue}if(Object.keys(h).length!==0)return{params:h}}}evaluate(o){const u={name:this.namePrimary.evaluate(o),iconsetId:this.iconsetIdPrimary},h=this.nameSecondary?{name:this.nameSecondary.evaluate(o),iconsetId:this.iconsetIdSecondary}:void 0,g=nl.build(u,h,this.paramsPrimary?this.evaluateParams(o,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(o,this.paramsSecondary):void 0);if(g&&o.availableImages){const b=g.getPrimary().id;if(g.available=o.availableImages.some(w=>ws.isEqual(w,b)),g.available){const w=g.getSecondary()?g.getSecondary().id:null;w&&(g.available=o.availableImages.some(A=>ws.isEqual(A,w)))}}return g}eachChild(o){if(o(this.namePrimary),this.paramsPrimary)for(const u in this.paramsPrimary)this.paramsPrimary[u]&&o(this.paramsPrimary[u]);if(this.nameSecondary&&(o(this.nameSecondary),this.paramsSecondary))for(const u in this.paramsSecondary)this.paramsSecondary[u]&&o(this.paramsSecondary[u])}outputDefined(){return!1}serializeOptions(o,u){const h={};if(u&&(h.iconset={id:u}),o){h.params={};for(const g in o)o[g]&&(h.params[g]=o[g].serialize())}return Object.keys(h).length>0?h:void 0}serialize(){const o=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const u=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);u&&o.push(u)}if(this.nameSecondary&&(o.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const u=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);u&&o.push(u)}return o}}function qn(c){return Vp(c)?"string":jn(c)?"number":M_(c)?"boolean":Array.isArray(c)?"array":c===null?"null":$p(c)?"object":typeof c}function $p(c){return c!=null&&!Array.isArray(c)&&typeof c!="function"&&!(c instanceof String||c instanceof Number||c instanceof Boolean)&&typeof c=="object"}function Vp(c){return typeof c=="string"||c instanceof String}function jn(c){return typeof c=="number"||c instanceof Number}function M_(c){return typeof c=="boolean"||c instanceof Boolean}const E0={"to-boolean":Vr,"to-color":Bs,"to-number":Mn,"to-string":Yr};class Cc{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const h=o[0],g=[];let b=tl;if(h==="to-array"){if(!Array.isArray(o[1]))return null;const w=o[1].length;if(u.expectedType){if(u.expectedType.kind!=="array")return u.error(`Expected ${u.expectedType.kind} but found array.`);b=Ss(u.expectedType.itemType,w)}else{if(!(w>0&&uh(o[1][0])))return null;b=Ss(to(o[1][0]),w)}for(let A=0;A<w;A++){const D=o[1][A];let P;if(Array.isArray(D))P=u.parse(D,void 0,b.itemType);else{const B=qn(D);if(B!==b.itemType.kind)return u.error(`Expected ${b.itemType.kind} but found ${B}.`);P=u.registry.literal.parse(["literal",D===void 0?null:D],u)}if(!P)return null;g.push(P)}}else{if((h==="to-boolean"||h==="to-string")&&o.length!==2)return u.error("Expected one argument.");b=E0[h];for(let w=1;w<o.length;w++){const A=u.parse(o[w],w,ii);if(!A)return null;g.push(A)}}return new Cc(b,g)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let u,h;for(const g of this.args){if(u=g.evaluate(o),h=null,u instanceof Qr)return u;if(typeof u=="string"){const b=o.parseColor(u);if(b)return b}else if(Array.isArray(u)&&(h=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:T0(u[0],u[1],u[2],u[3]),!h))return new Qr(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Ca(h||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const h of this.args){if(u=h.evaluate(o),u===null)return 0;const g=Number(u);if(!isNaN(g))return g}throw new Ca(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?ss.fromString(ju(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?nl.build(ju(this.args[0].evaluate(o))):this.type.kind==="array"?this.args.map(u=>u.evaluate(o)):ju(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if(this.type.kind==="formatted")return new On([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new bd(this.args[0]).serialize();const o=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(u=>{o.push(u.serialize())}),o}}const e1=["Unknown","Point","LineString","Polygon"];class qp{constructor(o,u,h){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=o,this.options=u,this.iconImageUseTheme=h}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?e1[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(o){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,u=this.featureDistanceData.scale,{x:h,y:g}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(h*u-o[0])+this.featureDistanceData.bearing[1]*(g*u-o[1])}return 0}parseColor(o){let u=this._parseColorCache[o];return u||(u=this._parseColorCache[o]=Qr.parse(o)),u}getConfig(o){return this.options?this.options.get(o):null}}class rl{constructor(o,u,h,g,b){this.name=o,this.type=u,this._evaluate=h,this.args=g,this._overloadIndex=b}evaluate(o){if(!this._evaluate){const u=rl.definitions[this.name];this._evaluate=Array.isArray(u)?u[2]:u.overloads[this._overloadIndex][1]}return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,u){const h=o[0],g=rl.definitions[h];if(!g)return u.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,A=[];let D=null,P=-1;for(const[B,U]of w){if(Array.isArray(B)&&B.length!==o.length-1)continue;A.push(B),P++,D=new Pg(u.registry,u.path,null,u.scope,void 0,u._scope,u.options,u.iconImageUseTheme);const $=[];let G=!1;for(let Z=1;Z<o.length;Z++){const se=o[Z],fe=Array.isArray(B)?B[Z-1]:B.type,ue=D.parse(se,1+$.length,fe);if(!ue){G=!0;break}$.push(ue)}if(!G)if(Array.isArray(B)&&B.length!==$.length)D.error(`Expected ${B.length} arguments, but found ${$.length} instead.`);else{for(let Z=0;Z<$.length;Z++){const se=Array.isArray(B)?B[Z]:B.type,fe=$[Z];D.concat(Z+1).checkSubtype(se,fe.type)}if(D.errors.length===0)return new rl(h,b,U,$,P)}}if(A.length===1)u.errors.push(...D.errors);else{const B=(A.length?A:w.map(([$])=>$)).map(il).join(" | "),U=[];for(let $=1;$<o.length;$++){const G=u.parse(o[$],1+U.length);if(!G)return null;U.push(Oa(G.type))}u.error(`Expected arguments of type ${B}, but found (${U.join(", ")}) instead.`)}return null}static register(o,u){rl.definitions=u;for(const h in u)o[h]=rl}}function il(c){return Array.isArray(c)?`(${c.map(Oa).join(", ")})`:`(${Oa(c.type)}...)`}class Tl{constructor(o,u,h){this.type=O_,this.locale=h,this.caseSensitive=o,this.diacriticSensitive=u}static parse(o,u){if(o.length!==2)return u.error("Expected one argument.");const h=o[1];if(typeof h!="object"||Array.isArray(h))return u.error("Collator options argument must be an object.");const g=h["case-sensitive"]===void 0?u.parse(!1,1,Vr):u.parseObjectValue(h["case-sensitive"],1,"case-sensitive",Vr);if(!g)return null;const b=h["diacritic-sensitive"]===void 0?u.parse(!1,1,Vr):u.parseObjectValue(h["diacritic-sensitive"],1,"diacritic-sensitive",Vr);if(!b)return null;let w=null;return h.locale&&(w=u.parseObjectValue(h.locale,1,"locale",Yr),!w)?null:new Tl(g,b,w)}evaluate(o){return new C_(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}function Eg(c,o,u=0,h=c.length-1,g=gf){for(;h>u;){if(h-u>600){const D=h-u+1,P=o-u+1,B=Math.log(D),U=.5*Math.exp(2*B/3),$=.5*Math.sqrt(B*U*(D-U)/D)*(P-D/2<0?-1:1);Eg(c,o,Math.max(u,Math.floor(o-P*U/D+$)),Math.min(h,Math.floor(o+(D-P)*U/D+$)),g)}const b=c[o];let w=u,A=h;for($l(c,u,o),g(c[h],b)>0&&$l(c,u,h);w<A;){for($l(c,w,A),w++,A--;g(c[w],b)<0;)w++;for(;g(c[A],b)>0;)A--}g(c[u],b)===0?$l(c,u,A):(A++,$l(c,A,h)),A<=o&&(u=A+1),o<=A&&(h=A-1)}}function $l(c,o,u){const h=c[o];c[o]=c[u],c[u]=h}function gf(c,o){return c<o?-1:c>o?1:0}function t1(c){let o=0;for(let u,h,g=0,b=c.length,w=b-1;g<b;w=g++)u=c[g],h=c[w],o+=(h.x-u.x)*(u.y+h.y);return o}function xd(c,o){c[0]=Math.min(c[0],o[0]),c[1]=Math.min(c[1],o[1]),c[2]=Math.max(c[2],o[0]),c[3]=Math.max(c[3],o[1])}function Ag(c,o){return!(c[0]<=o[0]||c[2]>=o[2]||c[1]<=o[1]||c[3]>=o[3])}function yf(c,o,u){const h=c[0]-o[0],g=c[1]-o[1],b=c[0]-u[0],w=c[1]-u[1];return h*w-b*g===0&&h*b<=0&&g*w<=0}function D_(c,o,u){return o[1]>c[1]!=u[1]>c[1]&&c[0]<(u[0]-o[0])*(c[1]-o[1])/(u[1]-o[1])+o[0]}function js(c,o,u=!1){let h=!1;for(let g=0,b=o.length;g<b;g++){const w=o[g];for(let A=0,D=w.length,P=D-1;A<D;P=A++){const B=w[P],U=w[A];if(yf(c,B,U))return u;D_(c,B,U)&&(h=!h)}}return h}function I_(c,o,u,h){const g=h[0]-u[0],b=h[1]-u[1],w=(c[0]-u[0])*b-g*(c[1]-u[1]),A=(o[0]-u[0])*b-g*(o[1]-u[1]);return w>0&&A<0||w<0&&A>0}function Og(c,o,u,h){return(g=[h[0]-u[0],h[1]-u[1]])[0]*(b=[o[0]-c[0],o[1]-c[1]])[1]-g[1]*b[0]!==0&&!(!I_(c,o,u,h)||!I_(u,h,c,o));var g,b}function Uu(c){const o=new Vt(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),u=new Vt(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const h of c[0])o.x>h.x&&(o.x=h.x),o.y>h.y&&(o.y=h.y),u.x<h.x&&(u.x=h.x),u.y<h.y&&(u.y=h.y);return{min:o,max:u}}const Vl=8192;function A0(c,o){const u=(180+c[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(u*g*Vl),Math.round(h*g*Vl)]}function O0(c,o){for(let u=0;u<o.length;u++)if(js(c,o[u]))return!0;return!1}function wd(c,o,u){for(const h of u)for(let g=0,b=h.length,w=b-1;g<b;w=g++)if(Og(c,o,h[w],h[g]))return!0;return!1}function P_(c,o){for(let u=0;u<c.length;++u)if(!js(c[u],o))return!1;for(let u=0;u<c.length-1;++u)if(wd(c[u],c[u+1],o))return!1;return!0}function n1(c,o){for(let u=0;u<o.length;u++)if(P_(c,o[u]))return!0;return!1}function Mc(c,o,u){const h=[];for(let g=0;g<c.length;g++){const b=[];for(let w=0;w<c[g].length;w++){const A=A0(c[g][w],u);xd(o,A),b.push(A)}h.push(b)}return h}function r1(c,o,u){const h=[];for(let g=0;g<c.length;g++){const b=Mc(c[g],o,u);h.push(b)}return h}function i1(c,o,u,h){if(c[0]<u[0]||c[0]>u[2]){const g=.5*h;let b=c[0]-u[0]>g?-h:u[0]-c[0]>g?h:0;b===0&&(b=c[0]-u[2]>g?-h:u[2]-c[0]>g?h:0),c[0]+=b}xd(o,c)}function R_(c,o,u,h){const g=Math.pow(2,h.z)*Vl,b=[h.x*Vl,h.y*Vl],w=[];if(!c)return w;for(const A of c)for(const D of A){const P=[D.x+b[0],D.y+b[1]];i1(P,o,u,g),w.push(P)}return w}function k_(c,o,u,h){const g=Math.pow(2,h.z)*Vl,b=[h.x*Vl,h.y*Vl],w=[];if(!c)return w;for(const D of c){const P=[];for(const B of D){const U=[B.x+b[0],B.y+b[1]];xd(o,U),P.push(U)}w.push(P)}if(o[2]-o[0]<=g/2){(A=o)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const D of w)for(const P of D)i1(P,o,u,g)}var A;return w}class _f{constructor(o,u){this.type=Vr,this.geojson=o,this.geometries=u}static parse(o,u){if(o.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(uh(o[1])){const h=o[1];if(h.type==="FeatureCollection")for(let g=0;g<h.features.length;++g){const b=h.features[g].geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new _f(h,h.features[g].geometry)}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new _f(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new _f(h,h)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return(function(u,h){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(!w)return!1;if(h.type==="Polygon"){const A=Mc(h.coordinates,b,w),D=R_(u.geometry(),g,b,w);if(!Ag(g,b))return!1;for(const P of D)if(!js(P,A))return!1}if(h.type==="MultiPolygon"){const A=r1(h.coordinates,b,w),D=R_(u.geometry(),g,b,w);if(!Ag(g,b))return!1;for(const P of D)if(!O0(P,A))return!1}return!0})(o,this.geometries);if(o.geometryType()==="LineString")return(function(u,h){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(!w)return!1;if(h.type==="Polygon"){const A=Mc(h.coordinates,b,w),D=k_(u.geometry(),g,b,w);if(!Ag(g,b))return!1;for(const P of D)if(!P_(P,A))return!1}if(h.type==="MultiPolygon"){const A=r1(h.coordinates,b,w),D=k_(u.geometry(),g,b,w);if(!Ag(g,b))return!1;for(const P of D)if(!n1(P,A))return!1}return!0})(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Us={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},ql=1/298.257223563,Hp=ql*(2-ql),Ts=Math.PI/180;class $u{static fromTile(o,u,h){const g=Math.PI*(1-2*(o+.5)/Math.pow(2,u)),b=Math.atan(.5*(Math.exp(g)-Math.exp(-g)))/Ts;return new $u(b,h)}static get units(){return Us}constructor(o,u){if(o===void 0)throw new Error("No latitude given.");if(u&&!Us[u])throw new Error(`Unknown unit ${u}. Use one of: ${Object.keys(Us).join(", ")}`);const h=6378.137*Ts*(u?Us[u]:1),g=Math.cos(o*Ts),b=1/(1-Hp*(1-g*g)),w=Math.sqrt(b);this.kx=h*w*g,this.ky=h*w*b*(1-Hp)}distance(o,u){const h=$s(o[0]-u[0])*this.kx,g=(o[1]-u[1])*this.ky;return Math.sqrt(h*h+g*g)}bearing(o,u){const h=$s(u[0]-o[0])*this.kx;return Math.atan2(h,(u[1]-o[1])*this.ky)/Ts}destination(o,u,h){const g=h*Ts;return this.offset(o,Math.sin(g)*u,Math.cos(g)*u)}offset(o,u,h){return[o[0]+u/this.kx,o[1]+h/this.ky]}lineDistance(o){let u=0;for(let h=0;h<o.length-1;h++)u+=this.distance(o[h],o[h+1]);return u}area(o){let u=0;for(let h=0;h<o.length;h++){const g=o[h];for(let b=0,w=g.length,A=w-1;b<w;A=b++)u+=$s(g[b][0]-g[A][0])*(g[b][1]+g[A][1])*(h?-1:1)}return Math.abs(u)/2*this.kx*this.ky}along(o,u){let h=0;if(u<=0)return o[0];for(let g=0;g<o.length-1;g++){const b=o[g],w=o[g+1],A=this.distance(b,w);if(h+=A,h>u)return Sd(b,w,(u-(h-A))/A)}return o[o.length-1]}pointToSegmentDistance(o,u,h){let[g,b]=u,w=$s(h[0]-g)*this.kx,A=(h[1]-b)*this.ky;if(w!==0||A!==0){const D=($s(o[0]-g)*this.kx*w+(o[1]-b)*this.ky*A)/(w*w+A*A);D>1?(g=h[0],b=h[1]):D>0&&(g+=w/this.kx*D,b+=A/this.ky*D)}return w=$s(o[0]-g)*this.kx,A=(o[1]-b)*this.ky,Math.sqrt(w*w+A*A)}pointOnLine(o,u){let h=1/0,g=o[0][0],b=o[0][1],w=0,A=0;for(let D=0;D<o.length-1;D++){let P=o[D][0],B=o[D][1],U=$s(o[D+1][0]-P)*this.kx,$=(o[D+1][1]-B)*this.ky,G=0;U===0&&$===0||(G=($s(u[0]-P)*this.kx*U+(u[1]-B)*this.ky*$)/(U*U+$*$),G>1?(P=o[D+1][0],B=o[D+1][1]):G>0&&(P+=U/this.kx*G,B+=$/this.ky*G)),U=$s(u[0]-P)*this.kx,$=(u[1]-B)*this.ky;const Z=U*U+$*$;Z<h&&(h=Z,g=P,b=B,w=D,A=G)}return{point:[g,b],index:w,t:Math.max(0,Math.min(1,A))}}lineSlice(o,u,h){let g=this.pointOnLine(h,o),b=this.pointOnLine(h,u);if(g.index>b.index||g.index===b.index&&g.t>b.t){const P=g;g=b,b=P}const w=[g.point],A=g.index+1,D=b.index;!Cg(h[A],w[0])&&A<=D&&w.push(h[A]);for(let P=A+1;P<=D;P++)w.push(h[P]);return Cg(h[D],b.point)||w.push(b.point),w}lineSliceAlong(o,u,h){let g=0;const b=[];for(let w=0;w<h.length-1;w++){const A=h[w],D=h[w+1],P=this.distance(A,D);if(g+=P,g>o&&b.length===0&&b.push(Sd(A,D,(o-(g-P))/P)),g>=u)return b.push(Sd(A,D,(u-(g-P))/P)),b;g>o&&b.push(D)}return b}bufferPoint(o,u){const h=u/this.ky,g=u/this.kx;return[o[0]-g,o[1]-h,o[0]+g,o[1]+h]}bufferBBox(o,u){const h=u/this.ky,g=u/this.kx;return[o[0]-g,o[1]-h,o[2]+g,o[3]+h]}insideBBox(o,u){return $s(o[0]-u[0])>=0&&$s(o[0]-u[2])<=0&&o[1]>=u[1]&&o[1]<=u[3]}}function Cg(c,o){return c[0]===o[0]&&c[1]===o[1]}function Sd(c,o,u){const h=$s(o[0]-c[0]);return[c[0]+h*u,c[1]+(o[1]-c[1])*u]}function $s(c){for(;c<-180;)c+=360;for(;c>180;)c-=360;return c}class Td{constructor(o=[],u=(h,g)=>h<g?-1:h>g?1:0){if(this.data=o,this.length=this.data.length,this.compare=u,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:u,compare:h}=this,g=u[o];for(;o>0;){const b=o-1>>1,w=u[b];if(h(g,w)>=0)break;u[o]=w,o=b}u[o]=g}_down(o){const{data:u,compare:h}=this,g=this.length>>1,b=u[o];for(;o<g;){let w=1+(o<<1);const A=w+1;if(A<this.length&&h(u[A],u[w])<0&&(w=A),h(u[w],b)>=0)break;u[o]=u[w],o=w}u[o]=b}}var Jt=8192;function L_(c,o){return o.dist-c.dist}function Gp(c){const o=[1/0,1/0,-1/0,-1/0];if(o.length!==c.length)return!1;for(let u=0;u<o.length;u++)if(o[u]!==c[u])return!1;return!0}function Dc(c){return c[1]-c[0]+1}function Ic(c,o){const u=c[1]>=c[0]&&c[1]<o;return u||console.warn("Distance Expression: Index is out of range"),u}function al(c,o){if(c[0]>c[1])return[null,null];const u=Dc(c);if(o){if(u===2)return[c,null];const h=Math.floor(u/2);return[[c[0],c[0]+h],[c[0]+h,c[1]]]}{if(u===1)return[c,null];const h=Math.floor(u/2)-1;return[[c[0],c[0]+h],[c[0]+h+1,c[1]]]}}function vf(c,o){const u=[1/0,1/0,-1/0,-1/0];if(!Ic(o,c.length))return u;for(let h=o[0];h<=o[1];++h)xd(u,c[h]);return u}function ol(c){const o=[1/0,1/0,-1/0,-1/0];for(let u=0;u<c.length;++u)for(let h=0;h<c[u].length;++h)xd(o,c[u][h]);return o}function bf(c,o,u){if(Gp(c)||Gp(o))return NaN;let h=0,g=0;return c[2]<o[0]&&(h=o[0]-c[2]),c[0]>o[2]&&(h=c[0]-o[2]),c[1]>o[3]&&(g=c[1]-o[3]),c[3]<o[1]&&(g=o[1]-c[3]),u.distance([0,0],[h,g])}function Ed(c){return 360*c-180}function fh(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function Yp(c,o){const u=Math.pow(2,o.z),h=(c.y/Jt+o.y)/u;return[Ed((c.x/Jt+o.x)/u),fh(h)]}function a1(c,o){const u=[];for(let h=0;h<c.length;++h)u.push(Yp(c[h],o));return u}function z_(c,o,u){const h=u.pointOnLine(o,c).point;return u.distance(c,h)}function N_(c,o,u,h,g){const b=u.slice(h[0],h[1]+1);let w=1/0;for(let A=o[0];A<=o[1];++A)if((w=Math.min(w,z_(c[A],b,g)))===0)return 0;return w}function Wo(c,o,u,h,g){const b=Math.min(g.pointToSegmentDistance(c,u,h),g.pointToSegmentDistance(o,u,h)),w=Math.min(g.pointToSegmentDistance(u,c,o),g.pointToSegmentDistance(h,c,o));return Math.min(b,w)}function br(c,o,u,h,g){if(!Ic(o,c.length)||!Ic(h,u.length))return NaN;let b=1/0;for(let w=o[0];w<o[1];++w)for(let A=h[0];A<h[1];++A){if(Og(c[w],c[w+1],u[A],u[A+1]))return 0;b=Math.min(b,Wo(c[w],c[w+1],u[A],u[A+1],g))}return b}function Wp(c,o,u,h,g){if(!Ic(o,c.length)||!Ic(h,u.length))return NaN;let b=1/0;for(let w=o[0];w<=o[1];++w)for(let A=h[0];A<=h[1];++A)if((b=Math.min(b,g.distance(c[w],u[A])))===0)return b;return b}function F_(c,o,u){if(js(c,o,!0))return 0;let h=1/0;for(const g of o){const b=g.length;if(b<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(g[0]!==g[b-1]&&(h=Math.min(h,u.pointToSegmentDistance(c,g[b-1],g[0])))===0||(h=Math.min(h,z_(c,g,u)))===0)return h}return h}function Mg(c,o,u,h){if(!Ic(o,c.length))return NaN;for(let b=o[0];b<=o[1];++b)if(js(c[b],u,!0))return 0;let g=1/0;for(let b=o[0];b<o[1];++b)for(const w of u)for(let A=0,D=w.length,P=D-1;A<D;P=A++){if(Og(c[b],c[b+1],w[P],w[A]))return 0;g=Math.min(g,Wo(c[b],c[b+1],w[P],w[A],h))}return g}function El(c,o){for(const u of c)for(let h=0;h<=u.length-1;++h)if(js(u[h],o,!0))return!0;return!1}function fu(c,o,u,h=1/0){const g=ol(c),b=ol(o);if(h!==1/0&&bf(g,b,u)>=h)return h;if(Ag(g,b)){if(El(c,o))return 0}else if(El(o,c))return 0;let w=h;for(const A of c)for(let D=0,P=A.length,B=P-1;D<P;B=D++)for(const U of o)for(let $=0,G=U.length,Z=G-1;$<G;Z=$++){if(Og(A[B],A[D],U[Z],U[$]))return 0;w=Math.min(w,Wo(A[B],A[D],U[Z],U[$],u))}return w}function ci(c,o,u,h,g,b,w){if(b===null||w===null)return;const A=bf(vf(h,b),vf(g,w),u);A<o&&c.push({dist:A,range1:b,range2:w})}function Pc(c,o,u,h,g=1/0){let b=Math.min(h.distance(c[0],u[0][0]),g);if(b===0)return b;const w=new Td([{dist:0,range1:[0,c.length-1],range2:[0,0]}],L_),A=o?50:100,D=ol(u);for(;w.length;){const P=w.pop();if(P.dist>=b)continue;const B=P.range1;if(Dc(B)<=A){if(!Ic(B,c.length))return NaN;if(o){const U=Mg(c,B,u,h);if((b=Math.min(b,U))===0)return b}else for(let U=B[0];U<=B[1];++U){const $=F_(c[U],u,h);if((b=Math.min(b,$))===0)return b}}else{const U=al(B,o);if(U[0]!==null){const $=bf(vf(c,U[0]),D,h);$<b&&w.push({dist:$,range1:U[0],range2:[0,0]})}if(U[1]!==null){const $=bf(vf(c,U[1]),D,h);$<b&&w.push({dist:$,range1:U[1],range2:[0,0]})}}}return b}function Vu(c,o,u,h,g,b=1/0){let w=Math.min(b,g.distance(c[0],u[0]));if(w===0)return w;const A=new Td([{dist:0,range1:[0,c.length-1],range2:[0,u.length-1]}],L_),D=o?50:100,P=h?50:100;for(;A.length;){const B=A.pop();if(B.dist>=w)continue;const U=B.range1,$=B.range2;if(Dc(U)<=D&&Dc($)<=P){if(!Ic(U,c.length)||!Ic($,u.length))return NaN;if(o&&h?w=Math.min(w,br(c,U,u,$,g)):o||h?o&&!h?w=Math.min(w,N_(u,$,c,U,g)):!o&&h&&(w=Math.min(w,N_(c,U,u,$,g))):w=Math.min(w,Wp(c,U,u,$,g)),w===0)return w}else{const G=al(U,o),Z=al($,h);ci(A,w,g,c,u,G[0],Z[0]),ci(A,w,g,c,u,G[0],Z[1]),ci(A,w,g,c,u,G[1],Z[0]),ci(A,w,g,c,u,G[1],Z[1])}}return w}function qu(c,o,u,h,g=1/0){let b=g;const w=vf(c,[0,c.length-1]);for(const A of u)if(!(b!==1/0&&bf(w,vf(A,[0,A.length-1]),h)>=b)&&(b=Math.min(b,Vu(c,o,A,!0,h,b)),b===0))return b;return b}function Dg(c,o,u,h,g=1/0){let b=g;const w=vf(c,[0,c.length-1]);for(const A of u){if(b!==1/0&&bf(w,ol(A),h)>=b)continue;const D=Pc(c,o,A,h,b);if(isNaN(D))return D;if((b=Math.min(b,D))===0)return b}return b}function Ig(c){return c==="Point"||c==="MultiPoint"||c==="LineString"||c==="MultiLineString"||c==="Polygon"||c==="MultiPolygon"}class xf{constructor(o,u){this.type=Mn,this.geojson=o,this.geometries=u}static parse(o,u){if(o.length!==2)return u.error(`'distance' expression requires either one argument, but found ' ${o.length-1} instead.`);if(uh(o[1])){const h=o[1];if(h.type==="FeatureCollection"){for(let g=0;g<h.features.length;++g)if(Ig(h.features[g].geometry.type))return new xf(h,h.features[g].geometry)}else if(h.type==="Feature"){if(Ig(h.geometry.type))return new xf(h,h.geometry)}else if(Ig(h.type))return new xf(h,h)}return u.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(o){const u=o.geometry(),h=o.canonicalID();if(u!=null&&h!=null){if(o.geometryType()==="Point")return(function(g,b,w){const A=[];for(const P of g)for(const B of P)A.push(Yp(B,b));const D=new $u(A[0][1],"meters");return w.type==="Point"||w.type==="MultiPoint"||w.type==="LineString"?Vu(A,!1,w.type==="Point"?[w.coordinates]:w.coordinates,w.type==="LineString",D):w.type==="MultiLineString"?qu(A,!1,w.coordinates,D):w.type==="Polygon"||w.type==="MultiPolygon"?Dg(A,!1,w.type==="Polygon"?[w.coordinates]:w.coordinates,D):null})(u,h,this.geometries);if(o.geometryType()==="LineString")return(function(g,b,w){const A=[];for(const P of g){const B=[];for(const U of P)B.push(Yp(U,b));A.push(B)}const D=new $u(A[0][0][1],"meters");if(w.type==="Point"||w.type==="MultiPoint"||w.type==="LineString")return qu(w.type==="Point"?[w.coordinates]:w.coordinates,w.type==="LineString",A,D);if(w.type==="MultiLineString"){let P=1/0;for(let B=0;B<w.coordinates.length;B++){const U=qu(w.coordinates[B],!0,A,D,P);if(isNaN(U))return U;if((P=Math.min(P,U))===0)return P}return P}if(w.type==="Polygon"||w.type==="MultiPolygon"){let P=1/0;for(let B=0;B<A.length;B++){const U=Dg(A[B],!0,w.type==="Polygon"?[w.coordinates]:w.coordinates,D,P);if(isNaN(U))return U;if((P=Math.min(P,U))===0)return P}return P}return null})(u,h,this.geometries);if(o.geometryType()==="Polygon")return(function(g,b,w){const A=[];for(const P of(function(B){const U=B.length;if(U<=1)return[B];const $=[];let G,Z;for(let se=0;se<U;se++){const fe=t1(B[se]);fe!==0&&(B[se].area=Math.abs(fe),Z===void 0&&(Z=fe<0),Z===fe<0?(G&&$.push(G),G=[B[se]]):G.push(B[se]))}return G&&$.push(G),$})(g)){const B=[];for(let U=0;U<P.length;++U)B.push(a1(P[U],b));A.push(B)}const D=new $u(A[0][0][0][1],"meters");if(w.type==="Point"||w.type==="MultiPoint"||w.type==="LineString")return Dg(w.type==="Point"?[w.coordinates]:w.coordinates,w.type==="LineString",A,D);if(w.type==="MultiLineString"){let P=1/0;for(let B=0;B<w.coordinates.length;B++){const U=Dg(w.coordinates[B],!0,A,D,P);if(isNaN(U))return U;if((P=Math.min(P,U))===0)return P}return P}return w.type==="Polygon"||w.type==="MultiPolygon"?(function(P,B,U){let $=1/0;for(const G of P)for(const Z of B){const se=fu(G,Z,U,$);if(isNaN(se))return se;if(($=Math.min($,se))===0)return $}return $})(w.type==="Polygon"?[w.coordinates]:w.coordinates,A,D):null})(u,h,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Ad(c){if(c instanceof rl&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof _f||c instanceof xf)return!1;if(c instanceof hh)return c.featureConstant;let o=!0;return c.eachChild(u=>{o&&!Ad(u)&&(o=!1)}),o}function wo(c){if(c instanceof rl&&c.name==="feature-state")return!1;let o=!0;return c.eachChild(u=>{o&&!wo(u)&&(o=!1)}),o}function la(c,o){if(c instanceof rl&&o.indexOf(c.name)>=0)return!1;let u=!0;return c.eachChild(h=>{u&&!la(h,o)&&(u=!1)}),u}function Di(c,o,u){return[c,o,u].filter(Boolean).join("")}function Rc(c,o){switch(c){case"string":return ju(o);case"number":return+o;case"boolean":return!!o;case"color":return Qr.parse(o);case"formatted":return ss.fromString(ju(o));case"resolvedImage":return nl.build(ju(o))}return o}function Hl(c,o,u,h){return h!==void 0&&(c=h*Math.round(c/h)),o!==void 0&&c<o&&(c=o),u!==void 0&&c>u&&(c=u),c}class hh{constructor(o,u,h,g=!1){this.type=o,this.key=u,this.scope=h,this.featureConstant=g}static parse(o,u){let h=u.expectedType;if(h==null&&(h=ii),o.length<2||o.length>3)return u.error("Invalid number of arguments for 'config' expression.");const g=u.parse(o[1],1);if(!(g instanceof Ul))return u.error("Key name of 'config' expression must be a string literal.");let b,w=!0;const A=ju(g.value);if(o.length>=3){const D=u.parse(o[2],2);if(!(D instanceof Ul))return u.error("Scope of 'config' expression must be a string literal.");b=ju(D.value)}if(u.options){const D=Di(A,b,u._scope),P=u.options.get(D);P&&(w=Ad(P.value||P.default))}return new hh(h,A,b,w)}evaluate(o){const u=Di(this.key,this.scope,o.scope),h=o.getConfig(u);if(!h)return null;const{type:g,value:b,values:w,minValue:A,maxValue:D,stepValue:P}=h,B=h.default.evaluate(o);let U=B;if(b){const $=o.scope;o.scope=($||"").split("").slice(1).join(""),U=b.evaluate(o),o.scope=$}return g&&(U=Rc(g,U)),U===void 0||A===void 0&&D===void 0&&P===void 0||(typeof U=="number"?U=Hl(U,A,D,P):Array.isArray(U)&&(U=U.map($=>typeof $=="number"?Hl($,A,D,P):$))),b!==void 0&&U!==void 0&&w&&!w.includes(U)&&(U=B,g&&(U=Rc(g,U))),(g&&g!==this.type||U!==void 0&&!Sg(to(U),this.type))&&(U=Rc(this.type.kind,U)),U}eachChild(){}outputDefined(){return!1}serialize(){const o=["config",this.key];return this.scope&&o.concat(this.scope),o}}class Hu{constructor(o,u){this.type=u.type,this.name=o,this.boundExpression=u}static parse(o,u){if(o.length!==2||typeof o[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const h=o[1];return u.scope.has(h)?new Hu(h,u.scope.get(h)):u.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Pg{constructor(o,u=[],h,g=new A_,b=[],w,A,D){this.registry=o,this.path=u,this.key=u.map(P=>typeof P=="string"?`['${P}']`:`[${P}]`).join(""),this.scope=g,this.errors=b,this.expectedType=h,this._scope=w,this.options=A,this.iconImageUseTheme=D}parse(o,u,h,g,b={}){return u||h?this.concat(u,null,h,g)._parse(o,b):this._parse(o,b)}parseObjectValue(o,u,h,g,b,w={}){return this.concat(u,h,g,b)._parse(o,w)}_parse(o,u){function h(g,b,w){return w==="assert"?new Gn(b,[g]):w==="coerce"?new Cc(b,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=typeof o[0]=="string"?this.registry[o[0]]:void 0;if(g){let b=g.parse(o,this);if(!b)return null;if(this.expectedType){const w=this.expectedType,A=b.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||A.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string"){if(this.checkSubtype(w,A))return null}else b=h(b,w,u.typeAnnotation||"coerce");else b=h(b,w,u.typeAnnotation||"assert")}if(!(b instanceof Ul)&&b.type.kind!=="resolvedImage"&&B_(b)){const w=new qp(this._scope,this.options,this.iconImageUseTheme);try{b=new Ul(b.type,b.evaluate(w))}catch(A){return this.error(A.message),null}}return b}return Cc.parse(["to-array",o],this)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,u,h,g){let b=typeof o=="number"?this.path.concat(o):this.path;b=typeof u=="string"?b.concat(u):b;const w=g?this.scope.concat(g):this.scope;return new Pg(this.registry,b,h||null,w,this.errors,this._scope,this.options,this.iconImageUseTheme)}error(o,...u){const h=`${this.key}${u.map(g=>`[${g}]`).join("")}`;this.errors.push(new os(h,o))}checkSubtype(o,u){const h=mf(o,u);return h&&this.error(h),h}}function B_(c){if(c instanceof Hu)return B_(c.boundExpression);if(c instanceof rl&&c.name==="error"||c instanceof Tl||c instanceof _f||c instanceof xf||c instanceof hh)return!1;const o=c instanceof Cc||c instanceof Gn;let u=!0;return c.eachChild(h=>{u=o?u&&B_(h):u&&h instanceof Ul}),!!u&&Ad(c)&&la(c,["zoom","heatmap-density","worldview","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function wf(c,o){const u=c.length-1;let h,g,b=0,w=u,A=0;for(;b<=w;)if(A=Math.floor((b+w)/2),h=c[A],g=c[A+1],h<=o){if(A===u||o<g)return A;b=A+1}else{if(!(h>o))throw new Ca("Input is not a number.");w=A-1}return 0}class Gu{constructor(o,u,h){this.type=o,this.input=u,this.labels=[],this.outputs=[];for(const[g,b]of h)this.labels.push(g),this.outputs.push(b)}static parse(o,u){if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");const h=u.parse(o[1],1,Mn);if(!h)return null;const g=[];let b=null;u.expectedType&&u.expectedType.kind!=="value"&&(b=u.expectedType);for(let w=1;w<o.length;w+=2){const A=w===1?-1/0:o[w],D=o[w+1],P=w,B=w+1;if(typeof A!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(g.length&&g[g.length-1][0]>=A)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const U=u.parse(D,B,b);if(!U)return null;b=b||U.type,g.push([A,U])}return new Gu(b,h,g)}evaluate(o){const u=this.labels,h=this.outputs;if(u.length===1)return h[0].evaluate(o);const g=this.input.evaluate(o);if(g<=u[0])return h[0].evaluate(o);const b=u.length;return g>=u[b-1]?h[b-1].evaluate(o):h[wf(u,g)].evaluate(o)}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&o.push(this.labels[u]),o.push(this.outputs[u].serialize());return o}}const j_=.95047,Xp=1.08883,U_=4/29,hu=6/29,kc=3*hu*hu,dh=hu*hu*hu,Sf=Math.PI/180,C0=180/Math.PI;function Rg(c){return c>dh?Math.pow(c,1/3):c/kc+U_}function ph(c){return c>hu?c*c*c:kc*(c-U_)}function Zp(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function Tf(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function ls(c){const o=Tf(c.r),u=Tf(c.g),h=Tf(c.b),g=Rg((.4124564*o+.3575761*u+.1804375*h)/j_),b=Rg((.2126729*o+.7151522*u+.072175*h)/1);return{l:116*b-16,a:500*(g-b),b:200*(b-Rg((.0193339*o+.119192*u+.9503041*h)/Xp)),alpha:c.a}}function Od(c){let o=(c.l+16)/116,u=isNaN(c.a)?o:o+c.a/500,h=isNaN(c.b)?o:o-c.b/200;return o=1*ph(o),u=j_*ph(u),h=Xp*ph(h),new Qr(Zp(3.2404542*u-1.5371385*o-.4985314*h),Zp(-.969266*u+1.8760108*o+.041556*h),Zp(.0556434*u-.2040259*o+1.0572252*h),c.alpha)}function kg(c,o,u){const h=o-c;return c+u*(h>180||h<-180?h-360*Math.round(h/360):h)}const Kp={forward:ls,reverse:Od,interpolate:function(c,o,u){return{l:Vn(c.l,o.l,u),a:Vn(c.a,o.a,u),b:Vn(c.b,o.b,u),alpha:Vn(c.alpha,o.alpha,u)}}},Lg={forward:function(c){const{l:o,a:u,b:h}=ls(c),g=Math.atan2(h,u)*C0;return{h:g<0?g+360:g,c:Math.sqrt(u*u+h*h),l:o,alpha:c.a}},reverse:function(c){const o=c.h*Sf,u=c.c;return Od({l:c.l,a:Math.cos(o)*u,b:Math.sin(o)*u,alpha:c.alpha})},interpolate:function(c,o,u){return{h:kg(c.h,o.h,u),c:Vn(c.c,o.c,u),l:Vn(c.l,o.l,u),alpha:Vn(c.alpha,o.alpha,u)}}};var o1=Object.freeze({__proto__:null,hcl:Lg,lab:Kp});class Yi{constructor(o,u,h,g,b){this.type=o,this.operator=u,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[w,A]of b)this.labels.push(w),this.outputs.push(A)}static interpolationFactor(o,u,h,g){let b=0;if(o.name==="exponential")b=Qp(u,o.base,h,g);else if(o.name==="linear")b=Qp(u,1,h,g);else if(o.name==="cubic-bezier"){const w=o.controlPoints;b=new Sc(w[0],w[1],w[2],w[3]).solve(Qp(u,1,h,g))}return b}static parse(o,u){let[h,g,b,...w]=o;if(!Array.isArray(g)||g.length===0)return u.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const P=g[1];if(typeof P!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:P}}else{if(g[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const P=g.slice(1);if(P.length!==4||P.some(B=>typeof B!="number"||B<0||B>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:P}}}if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length-1>3&&(o.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(b=u.parse(b,2,Mn),!b)return null;const A=[];let D=null;h==="interpolate-hcl"||h==="interpolate-lab"?D=Bs:u.expectedType&&u.expectedType.kind!=="value"&&(D=u.expectedType);for(let P=0;P<w.length;P+=2){const B=w[P],U=w[P+1],$=P+3,G=P+4;if(typeof B!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(A.length&&A[A.length-1][0]>=B)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const Z=u.parse(U,G,D);if(!Z)return null;D=D||Z.type,A.push([B,Z])}return D.kind==="number"||D.kind==="color"||D.kind==="array"&&D.itemType.kind==="number"&&typeof D.N=="number"?new Yi(D,h,g,b,A):u.error(`Type ${Oa(D)} is not interpolatable.`)}evaluate(o){const u=this.labels,h=this.outputs;if(u.length===1)return h[0].evaluate(o);const g=this.input.evaluate(o);if(g<=u[0])return h[0].evaluate(o);const b=u.length;if(g>=u[b-1])return h[b-1].evaluate(o);const w=wf(u,g),A=Yi.interpolationFactor(this.interpolation,g,u[w],u[w+1]),D=h[w].evaluate(o),P=h[w+1].evaluate(o);return this.operator==="interpolate"?_d[this.type.kind.toLowerCase()](D,P,A):this.operator==="interpolate-hcl"?Lg.reverse(Lg.interpolate(Lg.forward(D),Lg.forward(P),A)):Kp.reverse(Kp.interpolate(Kp.forward(D),Kp.forward(P),A))}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const u=[this.operator,o,this.input.serialize()];for(let h=0;h<this.labels.length;h++)u.push(this.labels[h],this.outputs[h].serialize());return u}}function Qp(c,o,u,h){const g=h-u,b=c-u;return g===0?0:o===1?b/g:(Math.pow(o,b)-1)/(Math.pow(o,g)-1)}class Ef{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expectected at least one argument.");let h=null;const g=u.expectedType;g&&g.kind!=="value"&&(h=g);const b=[];for(const A of o.slice(1)){const D=u.parse(A,1+b.length,h,void 0,{typeAnnotation:"omit"});if(!D)return null;h=h||D.type,b.push(D)}const w=g&&b.some(A=>mf(g,A.type));return new Ef(w?ii:h,b)}evaluate(o){let u,h=null,g=0;for(const b of this.args){if(g++,h=b.evaluate(o),h&&h instanceof nl&&!h.available&&(u||(u=h),h=null,g===this.args.length))return u;if(h!==null)break}return h}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(u=>{o.push(u.serialize())}),o}}class Gl{constructor(o,u){this.type=u.type,this.bindings=[].concat(o),this.result=u}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const u of this.bindings)o(u[1]);o(this.result)}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const h=[];for(let b=1;b<o.length-1;b+=2){const w=o[b];if(typeof w!="string")return u.error(`Expected string, but found ${typeof w} instead.`,b);if(/[^a-zA-Z0-9_]/.test(w))return u.error("Variable names must contain only alphanumeric characters or '_'.",b);const A=u.parse(o[b+1],b+1);if(!A)return null;h.push([w,A])}const g=u.parse(o[o.length-1],o.length-1,u.expectedType,h);return g?new Gl(h,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[u,h]of this.bindings)o.push(u,h.serialize());return o.push(this.result.serialize()),o}}class Jp{constructor(o,u,h){this.type=o,this.index=u,this.input=h}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=u.parse(o[1],1,Mn),g=u.parse(o[2],2,Ss(u.expectedType||ii));return h&&g?new Jp(g.type.itemType,h,g):null}evaluate(o){const u=this.index.evaluate(o),h=this.input.evaluate(o);if(u<0)throw new Ca("Array index out of bounds: negative index");if(u>=h.length)throw new Ca("Array index out of bounds: index exceeds array size");if(u!==Math.floor(u))throw new Ca("Array index must be an integer. Use at-interpolated for fractional indices");return h[u]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Af{constructor(o,u,h){this.type=o,this.index=u,this.input=h}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=u.parse(o[1],1,Mn),g=u.parse(o[2],2,Ss(u.expectedType||ii));return h&&g?new Af(g.type.itemType,h,g):null}evaluate(o){const u=this.index.evaluate(o),h=this.input.evaluate(o);if(u<0)throw new Ca(`Array index out of bounds: ${u} < 0.`);if(u>h.length-1)throw new Ca(`Array index out of bounds: ${u} > ${h.length-1}.`);if(u===Math.floor(u))return h[u];const g=Math.floor(u),b=Math.ceil(u),w=h[g],A=h[b];if(typeof w!="number"||typeof A!="number")throw new Ca(`Cannot interpolate between non-number values at index ${u}.`);const D=u-g;return w*(1-D)+A*D}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class mh{constructor(o,u){this.type=Vr,this.needle=o,this.haystack=u}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=u.parse(o[1],1,ii),g=u.parse(o[2],2,ii);return h&&g?S0(h.type,[Vr,Yr,Mn,tl,ii])?new mh(h,g):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Oa(h.type)} instead`):null}evaluate(o){const u=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(h==null)return!1;if(!Up(u,["boolean","string","number","null"]))throw new Ca(`Expected first argument to be of type boolean, string, number or null, but found ${Oa(to(u))} instead.`);if(!Up(h,["string","array"]))throw new Ca(`Expected second argument to be of type array or string, but found ${Oa(to(h))} instead.`);return h.indexOf(u)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class em{constructor(o,u,h){this.type=Mn,this.needle=o,this.haystack=u,this.fromIndex=h}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const h=u.parse(o[1],1,ii),g=u.parse(o[2],2,ii);if(!h||!g)return null;if(!S0(h.type,[Vr,Yr,Mn,tl,ii]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Oa(h.type)} instead`);if(o.length===4){const b=u.parse(o[3],3,Mn);return b?new em(h,g,b):null}return new em(h,g)}evaluate(o){const u=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(!Up(u,["boolean","string","number","null"]))throw new Ca(`Expected first argument to be of type boolean, string, number or null, but found ${Oa(to(u))} instead.`);if(!Up(h,["string","array"]))throw new Ca(`Expected second argument to be of type array or string, but found ${Oa(to(h))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(o);return h.indexOf(u,g)}return h.indexOf(u)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class tm{constructor(o,u,h,g,b,w){this.inputType=o,this.type=u,this.input=h,this.cases=g,this.outputs=b,this.otherwise=w}static parse(o,u){if(o.length<5)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return u.error("Expected an even number of arguments.");let h,g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const b={},w=[];for(let P=2;P<o.length-1;P+=2){let B=o[P];const U=o[P+1];Array.isArray(B)||(B=[B]);const $=u.concat(P);if(B.length===0)return $.error("Expected at least one branch label.");for(const Z of B){if(typeof Z!="number"&&typeof Z!="string")return $.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Z=="number"&&Math.floor(Z)!==Z)return $.error("Numeric branch labels must be integer values.");if(h){if($.checkSubtype(h,to(Z)))return null}else h=to(Z);if(b[String(Z)]!==void 0)return $.error("Branch labels must be unique.");b[String(Z)]=w.length}const G=u.parse(U,P,g);if(!G)return null;g=g||G.type,w.push(G)}const A=u.parse(o[1],1,ii);if(!A)return null;const D=u.parse(o[o.length-1],o.length-1,g);return D?A.type.kind!=="value"&&u.concat(1).checkSubtype(h,A.type)?null:new tm(h,g,A,b,w,D):null}evaluate(o){const u=this.input.evaluate(o);return(Sg(to(u),this.inputType)&&this.outputs[this.cases[u]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),h=[],g={};for(const w of u){const A=g[this.cases[w]];A===void 0?(g[this.cases[w]]=h.length,h.push([this.cases[w],[w]])):h[A][1].push(w)}const b=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,A]of h)o.push(A.length===1?b(A[0]):A.map(b)),o.push(this.outputs[w].serialize());return o.push(this.otherwise.serialize()),o}}class zg{constructor(o,u,h){this.type=o,this.branches=u,this.otherwise=h}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return u.error("Expected an odd number of arguments.");let h;u.expectedType&&u.expectedType.kind!=="value"&&(h=u.expectedType);const g=[];for(let w=1;w<o.length-1;w+=2){const A=u.parse(o[w],w,Vr);if(!A)return null;const D=u.parse(o[w+1],w+1,h);if(!D)return null;g.push([A,D]),h=h||D.type}const b=u.parse(o[o.length-1],o.length-1,h);return b?new zg(h,g,b):null}evaluate(o){for(const[u,h]of this.branches)if(u.evaluate(o))return h.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[u,h]of this.branches)o(u),o(h);o(this.otherwise)}outputDefined(){return this.branches.every(([o,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(u=>{o.push(u.serialize())}),o}}class Ng{constructor(o,u,h,g){this.type=o,this.input=u,this.beginIndex=h,this.endIndex=g}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const h=u.parse(o[1],1,ii),g=u.parse(o[2],2,Mn);if(!h||!g)return null;if(!S0(h.type,[Ss(ii),Yr,ii]))return u.error(`Expected first argument to be of type array or string, but found ${Oa(h.type)} instead`);if(o.length===4){const b=u.parse(o[3],3,Mn);return b?new Ng(h.type,h,g,b):null}return new Ng(h.type,h,g)}evaluate(o){const u=this.input.evaluate(o),h=this.beginIndex.evaluate(o);if(!Up(u,["string","array"]))throw new Ca(`Expected first argument to be of type array or string, but found ${Oa(to(u))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(o);return u.slice(h,g)}return u.slice(h)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}class Of{constructor(o,u){this.type=Ss(Yr),this.str=o,this.delimiter=u}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=u.parse(o[1],1,Yr),g=u.parse(o[2],2,Yr);return h&&g?new Of(h,g):void 0}evaluate(o){const u=this.str.evaluate(o),h=this.delimiter.evaluate(o);return u.split(h)}eachChild(o){o(this.str),o(this.delimiter)}outputDefined(){return!1}serialize(){return["split",this.str.serialize(),this.delimiter.serialize()]}}function Fg(c,o){return c==="=="||c==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function nm(c,o,u,h){return h.compare(o,u)===0}function Cd(c,o,u){const h=c!=="=="&&c!=="!=";return class Qhe{constructor(b,w,A){this.type=Vr,this.lhs=b,this.rhs=w,this.collator=A,this.hasUntypedArgument=b.type.kind==="value"||w.type.kind==="value"}static parse(b,w){if(b.length!==3&&b.length!==4)return w.error("Expected two or three arguments.");const A=b[0];let D=w.parse(b[1],1,ii);if(!D)return null;if(!Fg(A,D.type))return w.concat(1).error(`"${A}" comparisons are not supported for type '${Oa(D.type)}'.`);let P=w.parse(b[2],2,ii);if(!P)return null;if(!Fg(A,P.type))return w.concat(2).error(`"${A}" comparisons are not supported for type '${Oa(P.type)}'.`);if(D.type.kind!==P.type.kind&&D.type.kind!=="value"&&P.type.kind!=="value")return w.error(`Cannot compare types '${Oa(D.type)}' and '${Oa(P.type)}'.`);h&&(D.type.kind==="value"&&P.type.kind!=="value"?D=new Gn(P.type,[D]):D.type.kind!=="value"&&P.type.kind==="value"&&(P=new Gn(D.type,[P])));let B=null;if(b.length===4){if(D.type.kind!=="string"&&P.type.kind!=="string"&&D.type.kind!=="value"&&P.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(B=w.parse(b[3],3,O_),!B)return null}return new Qhe(D,P,B)}evaluate(b){const w=this.lhs.evaluate(b),A=this.rhs.evaluate(b);if(h&&this.hasUntypedArgument){const D=to(w),P=to(A);if(D.kind!==P.kind||D.kind!=="string"&&D.kind!=="number")throw new Ca(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${D.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const D=to(w),P=to(A);if(D.kind!=="string"||P.kind!=="string")return o(b,w,A)}return this.collator?u(b,w,A,this.collator.evaluate(b)):o(b,w,A)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}serialize(){const b=[c];return this.eachChild(w=>{b.push(w.serialize())}),b}}}const rm=Cd("==",function(c,o,u){return o===u},nm),M0=Cd("!=",function(c,o,u){return o!==u},function(c,o,u,h){return!nm(0,o,u,h)}),Bg=Cd("<",function(c,o,u){return o<u},function(c,o,u,h){return h.compare(o,u)<0}),jg=Cd(">",function(c,o,u){return o>u},function(c,o,u,h){return h.compare(o,u)>0}),Ug=Cd("<=",function(c,o,u){return o<=u},function(c,o,u,h){return h.compare(o,u)<=0}),s1=Cd(">=",function(c,o,u){return o>=u},function(c,o,u,h){return h.compare(o,u)>=0});class Lc{constructor(o,u,h,g,b,w){this.type=Yr,this.number=o,this.locale=u,this.currency=h,this.unit=g,this.minFractionDigits=b,this.maxFractionDigits=w}static parse(o,u){if(o.length!==3)return u.error("Expected two arguments.");const h=u.parse(o[1],1,Mn);if(!h)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return u.error("NumberFormat options argument must be an object.");let b=null;if(g.locale&&(b=u.parseObjectValue(g.locale,2,"locale",Yr),!b))return null;let w=null;if(g.currency&&(w=u.parseObjectValue(g.currency,2,"currency",Yr),!w))return null;let A=null;if(g.unit&&(A=u.parseObjectValue(g.unit,2,"unit",Yr),!A))return null;let D=null;if(g["min-fraction-digits"]&&(D=u.parseObjectValue(g["min-fraction-digits"],2,"min-fraction-digits",Mn),!D))return null;let P=null;return g["max-fraction-digits"]&&(P=u.parseObjectValue(g["max-fraction-digits"],2,"max-fraction-digits",Mn),!P)?null:new Lc(h,b,w,A,D,P)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class Cf{constructor(o){this.type=Mn,this.input=o}static parse(o,u){if(o.length!==2)return u.error(`Expected 1 argument, but found ${o.length-1} instead.`);const h=u.parse(o[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Oa(h.type)} instead.`):new Cf(h):null}evaluate(o){const u=this.input.evaluate(o);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Ca(`Expected value to be of type string or array, but found ${Oa(to(u))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(u=>{o.push(u.serialize())}),o}}function D0(c){return function(){c=1831565813+(c|=0)|0;let o=Math.imul(c^c>>>15,1|c);return o=o+Math.imul(o^o>>>7,61|o)^o,((o^o>>>14)>>>0)/4294967296}}const gh={"==":rm,"!=":M0,">":jg,"<":Bg,">=":s1,"<=":Ug,array:Gn,at:Jp,"at-interpolated":Af,boolean:Gn,case:zg,coalesce:Ef,collator:Tl,format:On,image:bd,in:mh,"index-of":em,interpolate:Yi,"interpolate-hcl":Yi,"interpolate-lab":Yi,length:Cf,let:Gl,literal:Ul,match:tm,number:Gn,"number-format":Lc,object:Gn,slice:Ng,step:Gu,string:Gn,"to-boolean":Cc,"to-color":Cc,"to-number":Cc,"to-string":Cc,var:Hu,within:_f,distance:xf,config:hh,split:Of};function yh(c,[o,u,h,g]){o=o.evaluate(c),u=u.evaluate(c),h=h.evaluate(c);const b=g?g.evaluate(c):1,w=T0(o,u,h,b);if(w)throw new Ca(w);return new Qr(o/255,u/255,h/255,b)}function im(c,[o,u,h,g]){o=o.evaluate(c),u=u.evaluate(c),h=h.evaluate(c);const b=g?g.evaluate(c):1,w=(function(P,B,U,$){return typeof P=="number"&&P>=0&&P<=360?typeof B=="number"&&B>=0&&B<=100&&typeof U=="number"&&U>=0&&U<=100?$===void 0||typeof $=="number"&&$>=0&&$<=1?null:`Invalid hsla value [${[P,B,U,$].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof $=="number"?[P,B,U,$]:[P,B,U]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof $=="number"?[P,B,U,$]:[P,B,U]).join(", ")}]: 'h' must be between 0 and 360.`})(o,u,h,b);if(w)throw new Ca(w);const A=`hsla(${o}, ${u}%, ${h}%, ${b})`,D=Qr.parse(A);if(!D)throw new Ca(`Failed to parse HSLA color: ${A}`);return D}function $g(c,o){return c in o}function Md(c,o){const u=o[c];return u===void 0?null:u}function Yu(c){return{type:c}}function _h(c){if(c instanceof hh)return new Set([c.key]);let o=new Set;return c.eachChild(u=>{o=new Set([...o,..._h(u)])}),o}function zc(c){if(c instanceof rl&&c.name==="is-active-floor")return!0;let o=!1;return c.eachChild(u=>{!o&&zc(u)&&(o=!0)}),o}function I0(c){return{result:"success",value:c}}function sl(c){return{result:"error",value:c}}function Vg(c,o){return!!c&&!!c.parameters&&c.parameters.indexOf(o)>-1}function am(c){return c["property-type"]==="data-driven"}function Nc(c){return Vg(c.expression,"measure-light")}function Mf(c){return Vg(c.expression,"zoom")}function Dd(c){return!!c.expression&&c.expression.interpolated}function om(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function $_(c){return c}function Id(c,o){const u=o.type==="color",h=c.stops&&typeof c.stops[0][0]=="object",g=h||!(h||c.property!==void 0),b=c.type||(Dd(o)?"exponential":"interval");if(u&&((c=Object.assign({},c)).stops&&(c.stops=c.stops.map(P=>[P[0],Qr.parse(P[1])])),c.default=Qr.parse(c.default?c.default:o.default)),c.colorSpace&&c.colorSpace!=="rgb"&&!o1[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let w,A,D;if(b==="exponential")w=Rd;else if(b==="interval")w=l1;else if(b==="categorical"){w=Pd,A=Object.create(null);for(const P of c.stops)A[P[0]]=P[1];D=typeof c.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);w=V_}if(h){const P={},B=[];for(let G=0;G<c.stops.length;G++){const Z=c.stops[G],se=Z[0].zoom;P[se]===void 0&&(P[se]={zoom:se,type:c.type,property:c.property,default:c.default,stops:[]},B.push(se)),P[se].stops.push([Z[0].value,Z[1]])}const U=[];for(const G of B)U.push([P[G].zoom,Id(P[G],o)]);const $={name:"linear"};return{kind:"composite",interpolationType:$,interpolationFactor:Yi.interpolationFactor.bind(void 0,$),zoomStops:U.map(G=>G[0]),evaluate:({zoom:G},Z)=>Rd({stops:U,base:c.base},o,G).evaluate(G,Z)}}if(g){const P=b==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:Yi.interpolationFactor.bind(void 0,P),zoomStops:c.stops.map(B=>B[0]),evaluate:({zoom:B})=>w(c,o,B,A,D)}}return{kind:"source",evaluate(P,B){const U=B&&B.properties?B.properties[c.property]:void 0;return U===void 0?Df(c.default,o.default):w(c,o,U,A,D)}}}function Df(c,o,u){return c!==void 0?c:o!==void 0?o:u!==void 0?u:void 0}function Pd(c,o,u,h,g){return Df(typeof u===g?h[u]:void 0,c.default,o.default)}function l1(c,o,u){if(!jn(u))return Df(c.default,o.default);const h=c.stops.length;if(h===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[h-1][0])return c.stops[h-1][1];const g=wf(c.stops.map(b=>b[0]),u);return c.stops[g][1]}function Rd(c,o,u){const h=c.base!==void 0?c.base:1;if(!jn(u))return Df(c.default,o.default);const g=c.stops.length;if(g===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[g-1][0])return c.stops[g-1][1];const b=wf(c.stops.map(B=>B[0]),u),w=(function(B,U,$,G){const Z=G-$,se=B-$;return Z===0?0:U===1?se/Z:(Math.pow(U,se)-1)/(Math.pow(U,Z)-1)})(u,h,c.stops[b][0],c.stops[b+1][0]),A=c.stops[b][1],D=c.stops[b+1][1];let P=_d[o.type]||$_;if(c.colorSpace&&c.colorSpace!=="rgb"){const B=o1[c.colorSpace];P=(U,$)=>B.reverse(B.interpolate(B.forward(U),B.forward($),w))}return typeof A.evaluate=="function"?{evaluate(...B){const U=A.evaluate.apply(void 0,B),$=D.evaluate.apply(void 0,B);if(U!==void 0&&$!==void 0)return P(U,$,w)}}:P(A,D,w)}function V_(c,o,u){return o.type==="color"?u=Qr.parse(u):o.type==="formatted"?u=ss.fromString(u.toString()):o.type==="resolvedImage"?u=nl.build(u.toString()):qn(u)===o.type||o.type==="enum"&&o.values[u]||(u=void 0),Df(u,c.default,o.default)}rl.register(gh,{error:[{kind:"error"},[Yr],(c,[o])=>{throw new Ca(o.evaluate(c))}],typeof:[Yr,[ii],(c,[o])=>Oa(to(o.evaluate(c)))],"to-rgba":[Ss(Mn,4),[Bs],(c,[o])=>o.evaluate(c).toNonPremultipliedRenderColor(null).toArray()],"to-hsla":[Ss(Mn,4),[Bs],(c,[o])=>o.evaluate(c).toNonPremultipliedRenderColor(null).toHslaArray()],rgb:[Bs,[Mn,Mn,Mn],yh],rgba:[Bs,[Mn,Mn,Mn,Mn],yh],hsl:[Bs,[Mn,Mn,Mn],im],hsla:[Bs,[Mn,Mn,Mn,Mn],im],has:{type:Vr,overloads:[[[Yr],(c,[o])=>$g(o.evaluate(c),c.properties())],[[Yr,Bp],(c,[o,u])=>$g(o.evaluate(c),u.evaluate(c))]]},get:{type:ii,overloads:[[[Yr],(c,[o])=>Md(o.evaluate(c),c.properties())],[[Yr,Bp],(c,[o,u])=>Md(o.evaluate(c),u.evaluate(c))]]},"feature-state":[ii,[Yr],(c,[o])=>Md(o.evaluate(c),c.featureState||{})],properties:[Bp,[],c=>c.properties()],"geometry-type":[Yr,[],c=>c.geometryType()],worldview:[Yr,[],c=>c.globals.worldview||""],"is-active-floor":[Vr,Yu(Yr),(c,o)=>{if(!(c.globals.activeFloors&&c.globals.activeFloors.size>0))return!1;const u=c.globals.activeFloors;return o.some(h=>{const g=h.evaluate(c);return u.has(g)})}],id:[ii,[],c=>c.id()],zoom:[Mn,[],c=>c.globals.zoom],pitch:[Mn,[],c=>c.globals.pitch||0],"distance-from-center":[Mn,[],c=>c.distanceFromCenter()],"measure-light":[Mn,[Yr],(c,[o])=>c.measureLight(o.evaluate(c))],"heatmap-density":[Mn,[],c=>c.globals.heatmapDensity||0],"line-progress":[Mn,[],c=>c.globals.lineProgress||0],"raster-value":[Mn,[],c=>c.globals.rasterValue||0],"raster-particle-speed":[Mn,[],c=>c.globals.rasterParticleSpeed||0],"sky-radial-progress":[Mn,[],c=>c.globals.skyRadialProgress||0],accumulated:[ii,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Mn,Yu(Mn),(c,o)=>{let u=0;for(const h of o)u+=h.evaluate(c);return u}],"*":[Mn,Yu(Mn),(c,o)=>{let u=1;for(const h of o)u*=h.evaluate(c);return u}],"-":{type:Mn,overloads:[[[Mn,Mn],(c,[o,u])=>o.evaluate(c)-u.evaluate(c)],[[Mn],(c,[o])=>-o.evaluate(c)]]},"/":[Mn,[Mn,Mn],(c,[o,u])=>o.evaluate(c)/u.evaluate(c)],"%":[Mn,[Mn,Mn],(c,[o,u])=>o.evaluate(c)%u.evaluate(c)],ln2:[Mn,[],()=>Math.LN2],pi:[Mn,[],()=>Math.PI],e:[Mn,[],()=>Math.E],"^":[Mn,[Mn,Mn],(c,[o,u])=>Math.pow(o.evaluate(c),u.evaluate(c))],sqrt:[Mn,[Mn],(c,[o])=>Math.sqrt(o.evaluate(c))],log10:[Mn,[Mn],(c,[o])=>Math.log(o.evaluate(c))/Math.LN10],ln:[Mn,[Mn],(c,[o])=>Math.log(o.evaluate(c))],log2:[Mn,[Mn],(c,[o])=>Math.log2(o.evaluate(c))],sin:[Mn,[Mn],(c,[o])=>Math.sin(o.evaluate(c))],cos:[Mn,[Mn],(c,[o])=>Math.cos(o.evaluate(c))],tan:[Mn,[Mn],(c,[o])=>Math.tan(o.evaluate(c))],asin:[Mn,[Mn],(c,[o])=>Math.asin(o.evaluate(c))],acos:[Mn,[Mn],(c,[o])=>Math.acos(o.evaluate(c))],atan:[Mn,[Mn],(c,[o])=>Math.atan(o.evaluate(c))],min:[Mn,Yu(Mn),(c,o)=>Math.min(...o.map(u=>u.evaluate(c)))],max:[Mn,Yu(Mn),(c,o)=>Math.max(...o.map(u=>u.evaluate(c)))],abs:[Mn,[Mn],(c,[o])=>Math.abs(o.evaluate(c))],round:[Mn,[Mn],(c,[o])=>{const u=o.evaluate(c);return u<0?-Math.round(-u):Math.round(u)}],floor:[Mn,[Mn],(c,[o])=>Math.floor(o.evaluate(c))],ceil:[Mn,[Mn],(c,[o])=>Math.ceil(o.evaluate(c))],"filter-==":[Vr,[Yr,ii],(c,[o,u])=>c.properties()[o.value]===u.value],"filter-id-==":[Vr,[ii],(c,[o])=>c.id()===o.value],"filter-type-==":[Vr,[Yr],(c,[o])=>c.geometryType()===o.value],"filter-<":[Vr,[Yr,ii],(c,[o,u])=>{const h=c.properties()[o.value],g=u.value;return typeof h==typeof g&&h<g}],"filter-id-<":[Vr,[ii],(c,[o])=>{const u=c.id(),h=o.value;return typeof u==typeof h&&u<h}],"filter->":[Vr,[Yr,ii],(c,[o,u])=>{const h=c.properties()[o.value],g=u.value;return typeof h==typeof g&&h>g}],"filter-id->":[Vr,[ii],(c,[o])=>{const u=c.id(),h=o.value;return typeof u==typeof h&&u>h}],"filter-<=":[Vr,[Yr,ii],(c,[o,u])=>{const h=c.properties()[o.value],g=u.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[Vr,[ii],(c,[o])=>{const u=c.id(),h=o.value;return typeof u==typeof h&&u<=h}],"filter->=":[Vr,[Yr,ii],(c,[o,u])=>{const h=c.properties()[o.value],g=u.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[Vr,[ii],(c,[o])=>{const u=c.id(),h=o.value;return typeof u==typeof h&&u>=h}],"filter-has":[Vr,[ii],(c,[o])=>o.value in c.properties()],"filter-has-id":[Vr,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Vr,[Ss(Yr)],(c,[o])=>o.value.indexOf(c.geometryType())>=0],"filter-id-in":[Vr,[Ss(ii)],(c,[o])=>o.value.indexOf(c.id())>=0],"filter-in-small":[Vr,[Yr,Ss(ii)],(c,[o,u])=>u.value.indexOf(c.properties()[o.value])>=0],"filter-in-large":[Vr,[Yr,Ss(ii)],(c,[o,u])=>(function(h,g,b,w){for(;b<=w;){const A=b+w>>1;if(g[A]===h)return!0;g[A]>h?w=A-1:b=A+1}return!1})(c.properties()[o.value],u.value,0,u.value.length-1)],all:{type:Vr,overloads:[[[Vr,Vr],(c,[o,u])=>o.evaluate(c)&&u.evaluate(c)],[Yu(Vr),(c,o)=>{for(const u of o)if(!u.evaluate(c))return!1;return!0}]]},any:{type:Vr,overloads:[[[Vr,Vr],(c,[o,u])=>o.evaluate(c)||u.evaluate(c)],[Yu(Vr),(c,o)=>{for(const u of o)if(u.evaluate(c))return!0;return!1}]]},"!":[Vr,[Vr],(c,[o])=>!o.evaluate(c)],"is-supported-script":[Vr,[Yr],(c,[o])=>{const u=c.globals&&c.globals.isSupportedScript;return!u||u(o.evaluate(c))}],upcase:[Yr,[Yr],(c,[o])=>o.evaluate(c).toUpperCase()],downcase:[Yr,[Yr],(c,[o])=>o.evaluate(c).toLowerCase()],concat:[Yr,Yu(ii),(c,o)=>o.map(u=>ju(u.evaluate(c))).join("")],"resolved-locale":[Yr,[O_],(c,[o])=>o.evaluate(c).resolvedLocale()],random:[Mn,[Mn,Mn,ii],(c,o)=>{const[u,h,g]=o.map(w=>w.evaluate(c));if(u>h||u===h)return u;let b;if(typeof g=="string")b=(function(w){let A=0;if(w.length===0)return A;for(let D=0;D<w.length;D++)A=(A<<5)-A+w.charCodeAt(D),A&=A;return A})(g);else{if(typeof g!="number")throw new Ca(`Invalid seed input: ${g}`);b=g}return u+D0(b)()*(h-u)}]});class qg{constructor(o,u,h,g,b){this.expression=o,this._warningHistory={},this._scope=h,this._options=g,this._iconImageUseTheme=b,this._evaluator=new qp(h,g,b),this._defaultValue=u?(function(w){return w.type==="color"&&(om(w.default)||Array.isArray(w.default))?new Qr(0,0,0,0):w.type==="color"?Qr.parse(w.default)||null:w.default===void 0?null:w.default})(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this.configDependencies=_h(o),this.isIndoorDependent=zc(o)}evaluateWithoutErrorHandling(o,u,h,g,b,w,A,D){return this._evaluator.globals=o,this._evaluator.feature=u,this._evaluator.featureState=h,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=A||null,this._evaluator.featureDistanceData=D||null,this.expression.evaluate(this._evaluator)}evaluate(o,u,h,g,b,w,A,D,P){this._evaluator||(this._evaluator=new qp(this._scope,this._options,this._iconImageUseTheme)),this._evaluator.globals=o,this._evaluator.feature=u||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=A||null,this._evaluator.featureDistanceData=D||null,this._evaluator.iconImageUseTheme=P||null;try{const B=this.expression.evaluate(this._evaluator);if(B==null||typeof B=="number"&&B!=B)return this._defaultValue;if(this._enumValues&&!(B in this._enumValues))throw new Ca(`Expected value to be one of ${Object.keys(this._enumValues).map(U=>JSON.stringify(U)).join(", ")}, but found ${JSON.stringify(B)} instead.`);return B}catch(B){const U=B;return this._warningHistory[U.message]||(this._warningHistory[U.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${U.message}`)),this._defaultValue}}}function kd(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in gh}function Fc(c,o,u,h,g){const b=new Pg(gh,[],o?(function(A){const D={color:Bs,string:Yr,number:Mn,enum:Yr,boolean:Vr,formatted:jp,resolvedImage:vd};return A.type==="array"?Ss(D[A.value]||ii,A.length):D[A.type]})(o):void 0,void 0,void 0,u,h,g),w=b.parse(c,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return w?I0(new qg(w,o,u,h,g)):sl(b.errors)}class Es{constructor(o,u,h,g){this.kind=o,this._styleExpression=u,this.isLightConstant=h,this.isLineProgressConstant=g,this.isStateDependent=o!=="constant"&&!wo(u.expression),this.configDependencies=_h(u.expression),this.isIndoorDependent=zc(u.expression)}evaluateWithoutErrorHandling(o,u,h,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,h,g,b,w)}evaluate(o,u,h,g,b,w,A){return this._styleExpression.evaluate(o,u,h,g,b,w,void 0,void 0,A)}}class us{constructor(o,u,h,g,b,w){this.kind=o,this.zoomStops=h,this._styleExpression=u,this.isStateDependent=o!=="camera"&&!wo(u.expression),this.isIndoorDependent=zc(u.expression),this.isLightConstant=b,this.isLineProgressConstant=w,this.configDependencies=_h(u.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,u,h,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,h,g,b,w)}evaluate(o,u,h,g,b,w){return this._styleExpression.evaluate(o,u,h,g,b,w)}interpolationFactor(o,u,h){return this.interpolationType?Yi.interpolationFactor(this.interpolationType,o,u,h):0}}function Wu(c,o,u,h,g){if((c=Fc(c,o,u,h,g)).result==="error")return c;const b=c.value.expression,w=Ad(b);if(!w&&!am(o))return sl([new os("","data expressions not supported")]);const A=la(b,["zoom","pitch","distance-from-center"]);if(!A&&!Mf(o))return sl([new os("","zoom expressions not supported")]);const D=la(b,["measure-light"]);if(!D&&!Nc(o))return sl([new os("","measure-light expression not supported")]);const P=la(b,["line-progress"]);if(!P&&!(function($){return Vg($.expression,"line-progress")})(o))return sl([new os("","line-progress expression not supported")]);const B=o.expression&&o.expression.relaxZoomRestriction,U=Hg(b);return U||A||B?U instanceof os?sl([U]):U instanceof Yi&&!Dd(o)?sl([new os("",'"interpolate" expressions cannot be used with this property')]):I0(U?new us(w&&P?"camera":"composite",c.value,U.labels,U instanceof Yi?U.interpolation:void 0,D,P):new Es(w&&P?"constant":"source",c.value,D,P)):sl([new os("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Ld{constructor(o,u){this._parameters=o,this._specification=u,Object.assign(this,Id(this._parameters,this._specification))}static deserialize(o){return new Ld(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Hg(c){let o=null;if(c instanceof Gl)o=Hg(c.result);else if(c instanceof Ef){for(const u of c.args)if(o=Hg(u),o)break}else(c instanceof Gu||c instanceof Yi)&&c.input instanceof rl&&c.input.name==="zoom"&&(o=c);return o instanceof os||c.eachChild(u=>{const h=Hg(u);h instanceof os?o=h:o&&h&&o!==h&&(o=new os("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}var As,Al,So=(function(){if(Al)return As;Al=1,As=o;var c=3;function o(u,h,g){var b=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var w=new Int32Array(this.arrayBuffer);u=w[0],this.d=(h=w[1])+2*(g=w[2]);for(var A=0;A<this.d*this.d;A++){var D=w[c+A],P=w[c+A+1];b.push(D===P?null:w.subarray(D,P))}var B=w[c+b.length+1];this.keys=w.subarray(w[c+b.length],B),this.bboxes=w.subarray(B),this.insert=this._insertReadonly}else{this.d=h+2*g;for(var U=0;U<this.d*this.d;U++)b.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=u,this.padding=g,this.scale=h/u,this.uid=0;var $=g/h*u;this.min=-$,this.max=u+$}return o.prototype.insert=function(u,h,g,b,w){this._forEachCell(h,g,b,w,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(w)},o.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},o.prototype._insertCell=function(u,h,g,b,w,A){this.cells[w].push(A)},o.prototype.query=function(u,h,g,b,w){var A=this.min,D=this.max;if(u<=A&&h<=A&&D<=g&&D<=b&&!w)return Array.prototype.slice.call(this.keys);var P=[];return this._forEachCell(u,h,g,b,this._queryCell,P,{},w),P},o.prototype._queryCell=function(u,h,g,b,w,A,D,P){var B=this.cells[w];if(B!==null)for(var U=this.keys,$=this.bboxes,G=0;G<B.length;G++){var Z=B[G];if(D[Z]===void 0){var se=4*Z;(P?P($[se+0],$[se+1],$[se+2],$[se+3]):u<=$[se+2]&&h<=$[se+3]&&g>=$[se+0]&&b>=$[se+1])?(D[Z]=!0,A.push(U[Z])):D[Z]=!1}}},o.prototype._forEachCell=function(u,h,g,b,w,A,D,P){for(var B=this._convertToCellCoord(u),U=this._convertToCellCoord(h),$=this._convertToCellCoord(g),G=this._convertToCellCoord(b),Z=B;Z<=$;Z++)for(var se=U;se<=G;se++){var fe=this.d*se+Z;if((!P||P(this._convertFromCellCoord(Z),this._convertFromCellCoord(se),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(se+1)))&&w.call(this,u,h,g,b,fe,A,D,P))return}},o.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},o.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},o.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,h=c+this.cells.length+1+1,g=0,b=0;b<this.cells.length;b++)g+=this.cells[b].length;var w=new Int32Array(h+g+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;for(var A=h,D=0;D<u.length;D++){var P=u[D];w[c+D]=A,w.set(P,A),A+=P.length}return w[c+u.length]=A,w.set(this.keys,A),w[c+u.length+1]=A+=this.keys.length,w.set(this.bboxes,A),A+=this.bboxes.length,w.buffer},As})(),Bc=wl(So);const du={};function Kt(c,o,u={}){Object.defineProperty(c,"_classRegistryKey",{value:o,writable:!1}),du[o]={klass:c,omit:u.omit||[]}}Kt(Object,"Object"),Bc.serialize=function(c,o){const u=c.toArrayBuffer();return o&&o.add(u),{buffer:u}},Bc.deserialize=function(c){return new Bc(c.buffer)},Object.defineProperty(Bc,"name",{value:"Grid"}),Kt(Bc,"Grid"),delete Vt.prototype.constructor,Kt(Qr,"Color"),Kt(Error,"Error"),Kt(ss,"Formatted"),Kt(Tg,"FormattedSection"),Kt(md,"AJAXError"),Kt(nl,"ResolvedImage"),Kt(Ld,"StylePropertyFunction"),Kt(qg,"StyleExpression",{omit:["_evaluator"]}),Kt(ws,"ImageId"),Kt(Bo,"ImageVariant"),Kt(us,"ZoomDependentExpression"),Kt(Es,"ZoomConstantExpression"),Kt(rl,"CompoundExpression",{omit:["_evaluate"]});for(const c in gh)du[gh[c]._classRegistryKey]||Kt(gh[c],`Expression${c}`);function ua(c){return c&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function ca(c,o){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp)return c;if(ua(c)||c instanceof ImageBitmap)return o&&o.add(c),c;if(ArrayBuffer.isView(c))return o&&o.add(c.buffer),c;if(c instanceof ImageData)return o&&o.add(c.data.buffer),c;if(Array.isArray(c)){const u=[];for(const h of c)u.push(ca(h,o));return u}if(c instanceof Map){const u={$name:"Map",entries:[]};for(const[h,g]of c.entries())u.entries.push(ca(h),ca(g,o));return u}if(c instanceof Set){const u={$name:"Set"};let h=0;for(const g of c.values())u[++h]=ca(g);return u}if(typeof c=="bigint")return{$name:"BigInt",value:c.toString()};if(typeof c=="object"){const u=c.constructor,h=u._classRegistryKey;if(!h)throw new Error(`Can't serialize object of unregistered class "${u.name}".`);const g=u.serialize?u.serialize(c,o):{};if(!u.serialize){for(const b in c)c.hasOwnProperty(b)&&(du[h].omit.indexOf(b)>=0||(g[b]=ca(c[b],o)));c instanceof Error&&(g.message=c.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(g.$name=h),g}throw new Error("can't serialize object of type "+typeof c)}function pu(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||ua(c)||c instanceof ImageBitmap||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(pu);if(typeof c=="object"){const o=c.$name||"Object";if(o==="Map"){const g=c.entries||[],b=new Map;for(let w=0;w<g.length;w+=2)b.set(pu(g[w]),pu(g[w+1]));return b}if(o==="Set"){const g=new Set;for(const b of Object.keys(c))b!=="$name"&&g.add(pu(c[b]));return g}if(o==="BigInt")return BigInt(c.value);const{klass:u}=du[o];if(!u)throw new Error(`Can't deserialize unregistered class "${o}".`);if(u.deserialize)return u.deserialize(c);const h=Object.create(u.prototype);for(const g of Object.keys(c))g!=="$name"&&(h[g]=pu(c[g]));return h}throw new Error("can't deserialize object of type "+typeof c)}const zd=c=>c>=1536&&c<=1791,vh=c=>c>=1872&&c<=1919,Nd=c=>c>=2208&&c<=2303,bh=c=>c>=11904&&c<=12031,xh=c=>c>=12032&&c<=12255,P0=c=>c>=12272&&c<=12287,Ma=c=>c>=12288&&c<=12351,wh=c=>c>=12352&&c<=12447,Fd=c=>c>=12448&&c<=12543,Xu=c=>c>=12544&&c<=12591,R0=c=>c>=12704&&c<=12735,u1=c=>c>=12736&&c<=12783,q_=c=>c>=12784&&c<=12799,H_=c=>c>=12800&&c<=13055,Gg=c=>c>=13056&&c<=13311,jo=c=>c>=13312&&c<=19903,Wa=c=>c>=19968&&c<=40959,sm=c=>c>=40960&&c<=42127,Sh=c=>c>=42128&&c<=42191,Yg=c=>c>=44032&&c<=55215,G_=c=>c>=63744&&c<=64255,Zu=c=>c>=64336&&c<=65023,Wg=c=>c>=65040&&c<=65055,Xg=c=>c>=65072&&c<=65103,Y_=c=>c>=65104&&c<=65135,W_=c=>c>=65136&&c<=65279,X_=c=>c>=65280&&c<=65519;function Z_(c){for(const o of c)if(jc(o.charCodeAt(0)))return!0;return!1}function c1(c){for(const o of c)if(!f1(o.charCodeAt(0)))return!1;return!0}function f1(c){return!(zd(c)||vh(c)||Nd(c)||Zu(c)||W_(c))}function k0(c){return!(c<11904||!(R0(c)||Xu(c)||Xg(c)||G_(c)||Gg(c)||bh(c)||u1(c)||Ma(c)||jo(c)||Wa(c)||H_(c)||X_(c)||wh(c)||P0(c)||xh(c)||q_(c)||Fd(c)||Wg(c)||Sh(c)||sm(c)))}function jc(c){return!(c!==746&&c!==747&&(c<4352||!(R0(c)||Xu(c)||Xg(c)&&!(c>=65097&&c<=65103)||G_(c)||Gg(c)||bh(c)||u1(c)||!(!Ma(c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||jo(c)||Wa(c)||H_(c)||(o=>o>=12592&&o<=12687)(c)||(o=>o>=43360&&o<=43391)(c)||(o=>o>=55216&&o<=55295)(c)||(o=>o>=4352&&o<=4607)(c)||Yg(c)||wh(c)||P0(c)||(o=>o>=12688&&o<=12703)(c)||xh(c)||q_(c)||Fd(c)&&c!==12540||!(!X_(c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Y_(c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||(o=>o>=5120&&o<=5759)(c)||(o=>o>=6320&&o<=6399)(c)||Wg(c)||(o=>o>=19904&&o<=19967)(c)||sm(c)||Sh(c))))}function L0(c){return c===12312||c===12313||c===12316||c===12540||c===12448}function z0(c){return!(jc(c)||(function(o){return!!((u=>u>=128&&u<=255)(o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||(u=>u>=8192&&u<=8303)(o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||(u=>u>=8448&&u<=8527)(o)||(u=>u>=8528&&u<=8591)(o)||(u=>u>=8960&&u<=9215)(o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||(u=>u>=9216&&u<=9279)(o)&&o!==9251||(u=>u>=9280&&u<=9311)(o)||(u=>u>=9312&&u<=9471)(o)||(u=>u>=9632&&u<=9727)(o)||(u=>u>=9728&&u<=9983)(o)&&!(o>=9754&&o<=9759)||(u=>u>=11008&&u<=11263)(o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||Ma(o)||Fd(o)||(u=>u>=57344&&u<=63743)(o)||Xg(o)||Y_(o)||X_(o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)})(c))}function Zg(c){return zd(c)||vh(c)||Nd(c)||Zu(c)||W_(c)}function N0(c){return c>=1424&&c<=2303||Zu(c)||W_(c)}function h1(c,o){return!(!o&&N0(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||(u=>u>=6016&&u<=6143)(c))}function Uc(c){for(const o of c)if(N0(o.charCodeAt(0)))return!0;return!1}const Vs={unavailable:"unavailable",deferred:"deferred",loading:"loading",parsing:"parsing",parsed:"parsed",loaded:"loaded",error:"error"};let If=null,Os=Vs.unavailable,Pf=null;const F0=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(Os=Vs.error),If&&If(c)};function B0(){K_.fire(new uu("pluginStateChange",{pluginStatus:Os,pluginURL:Pf}))}const K_=new pf,Th=function(){return Os},Q_=function(){if(Os!==Vs.deferred||!Pf)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Os=Vs.loading,B0(),Pf&&gd({url:Pf},c=>{c?F0(c):(Os=Vs.loaded,B0())})},Ol={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Os===Vs.loaded||Ol.applyArabicShaping!=null,isLoading:()=>Os===Vs.loading,setState(c){Os=c.pluginStatus,Pf=c.pluginURL},isParsing:()=>Os===Vs.parsing,isParsed:()=>Os===Vs.parsed,getPluginURL:()=>Pf};class Jr{constructor(o,u){this.zoom=o,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch,this.brightness=u.brightness,this.worldview=u.worldview,this.activeFloors=u.activeFloors):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(o){return(function(u,h){for(const g of u)if(!h1(g.charCodeAt(0),h))return!1;return!0})(o,Ol.isLoaded())}}class lm{constructor(o,u,h,g,b){this.property=o,this.value=u,this.expression=(function(w,A,D,P,B){if(om(w))return new Ld(w,A);if(kd(w)||Array.isArray(w)&&w.length>0){const U=Wu(w,A,D,P,B);if(U.result==="error")throw new Error(U.value.map($=>`${$.key}: ${$.message}`).join(", "));return U.value}{let U=w;return typeof w=="string"&&A.type==="color"&&(U=Qr.parse(w)),{kind:"constant",configDependencies:new Set,isIndoorDependent:!1,evaluate:()=>U}}})(u===void 0?o.specification.default:u,o.specification,h,g,b)}isIndoorDependent(){return this.expression.isIndoorDependent}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,u,h,g){return this.property.possiblyEvaluate(this,o,u,h,g)}}class Bd{constructor(o,u,h,g){this.property=o,this.value=new lm(o,void 0,u,h,g)}transitioned(o,u){return new j0(this.property,this.value,u,Object.assign({},o.transition,this.transition),o.now)}untransitioned(){return new j0(this.property,this.value,null,{},0)}}class um{constructor(o,u,h,g){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues),this._scope=u,this._options=h,this._iconImageUseTheme=g,this._isIndoorDependent=!1,this.configDependencies=new Set}getValue(o){return Zn(this._values[o].value.value)}setValue(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new Bd(this._values[o].property,this._scope,this._options,this._iconImageUseTheme)),this._values[o].value=new lm(this._values[o].property,u===null?void 0:Zn(u),this._scope,this._options,this._iconImageUseTheme),this._values[o].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[o].value.expression.configDependencies]),this._isIndoorDependent=this._isIndoorDependent||this._values[o].value.isIndoorDependent())}setTransitionOrValue(o,u){u&&(this._options=u);const h=this._properties.properties;if(o)for(const g in o){const b=o[g];if(g.endsWith("-transition")){const w=g.slice(0,-11);h[w]&&this.setTransition(w,b)}else h.hasOwnProperty(g)&&this.setValue(g,b)}}getTransition(o){return Zn(this._values[o].transition)}setTransition(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new Bd(this._values[o].property)),this._values[o].transition=Zn(u)||void 0}serialize(){const o={};for(const u of Object.keys(this._values)){const h=this.getValue(u);h!==void 0&&(o[u]=h);const g=this.getTransition(u);g!==void 0&&(o[`${u}-transition`]=g)}return o}transitioned(o,u){const h=new U0(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(o,u._values[g]);return h}untransitioned(){const o=new U0(this._properties);for(const u of Object.keys(this._values))o._values[u]=this._values[u].untransitioned();return o}isIndoorDependent(){return this._isIndoorDependent}}class j0{constructor(o,u,h,g,b){const w=g.delay||0,A=g.duration||0;b=b||0,this.property=o,this.value=u,this.begin=b+w,this.end=this.begin+A,o.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(o,u,h){const g=o.now||0,b=this.value.possiblyEvaluate(o,u,h),w=this.prior;if(w){if(g>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(g<this.begin)return w.possiblyEvaluate(o,u,h);{const A=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,u,h),b,we(A))}}return b}}class U0{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,u,h){const g=new Cs(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].possiblyEvaluate(o,u,h);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class J_{constructor(o,u,h,g){this._properties=o,this._values=Object.create(o.defaultPropertyValues),this._scope=u,this._options=h,this._iconImageUseTheme=g,this._isIndoorDependent=!1,this.configDependencies=new Set}getValue(o){return Zn(this._values[o].value)}setValue(o,u){this._values[o]=new lm(this._values[o].property,u===null?void 0:Zn(u),this._scope,this._options,this._iconImageUseTheme),this._values[o].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[o].expression.configDependencies]),this._isIndoorDependent=this._isIndoorDependent||this._values[o].isIndoorDependent())}serialize(){const o={};for(const u of Object.keys(this._values)){const h=this.getValue(u);h!==void 0&&(o[u]=h)}return o}possiblyEvaluate(o,u,h,g){const b=new Cs(this._properties);for(const w of Object.keys(this._values))b._values[w]=this._values[w].possiblyEvaluate(o,u,h,g);return b}isIndoorDependent(){return this._isIndoorDependent}}class Eh{constructor(o,u,h,g){this.property=o,this.value=u,this.parameters=h,this.iconImageUseTheme=g}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,u,h,g){return this.property.evaluate(this.value,this.parameters,o,u,h,g,this.iconImageUseTheme)}}class Cs{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Xt{constructor(o){this.specification=o}possiblyEvaluate(o,u){return o.expression.evaluate(u)}interpolate(o,u,h){const g=_d[this.specification.type];return g?g(o,u,h):o}}class on{constructor(o,u){this.specification=o,this.overrides=u}possiblyEvaluate(o,u,h,g,b){return o.expression.kind==="constant"||o.expression.kind==="camera"?new Eh(this,{kind:"constant",value:o.expression.evaluate(u,null,{},h,g,void 0,b)},u):new Eh(this,o.expression,u,b)}interpolate(o,u,h){if(o.value.kind!=="constant"||u.value.kind!=="constant")return o;if(o.value.value===void 0||u.value.value===void 0)return new Eh(this,{kind:"constant",value:void 0},o.parameters);const g=_d[this.specification.type];return g?new Eh(this,{kind:"constant",value:g(o.value.value,u.value.value,h)},o.parameters):o}evaluate(o,u,h,g,b,w,A){return o.kind==="constant"?o.value:o.evaluate(u,h,g,b,w,void 0,A)}}class jd{constructor(o){this.specification=o}possiblyEvaluate(o,u,h,g){return!!o.expression.evaluate(u,null,{},h,g)}interpolate(){return!1}}class Ui{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new Jr(0,{});for(const h in o){const g=o[h];g.specification.overridable&&this.overridableProperties.push(h);const b=this.defaultPropertyValues[h]=new lm(g,void 0),w=this.defaultTransitionablePropertyValues[h]=new Bd(g);this.defaultTransitioningPropertyValues[h]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=b.possiblyEvaluate(u)}}}Kt(on,"DataDrivenProperty"),Kt(Xt,"DataConstantProperty"),Kt(jd,"ColorRampProperty");var ht=JSON.parse('{"$version":8,"$root":{"version":{"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow"},"rain":{"type":"rain"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor"},"imports":{"type":"array","value":"import"},"iconsets":{"type":"iconsets"},"schema":{"type":"schema"},"sources":{"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"type":"featuresets"}},"featuresets":{"*":{"type":"featureset"}},"featureset":{"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"layer":{"type":"string"},"properties":{"type":"selectorProperty"},"featureNamespace":{"type":"string"},"_uniqueFeatureID":{"type":"boolean"}},"selectorProperty":{"*":{"type":"*"}},"model":{"type":"string"},"import":{"id":{"type":"string"},"url":{"type":"string"},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","expression":{}},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string"},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false},"shadow-quality":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]}},"shadow-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"shadow-draw-before-layer":{"type":"string"}},"properties_light_ambient":{"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"type":"enum","values":{"sprite":1}},"url":{"type":"string"}},"iconset_source":{"type":{"type":"enum","values":{"source":1}},"source":{"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"type":"enum","values":{"video":1}},"urls":{"type":"array","value":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"type":"enum","values":{"image":1}},"url":{"type":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"modelNodeOverride":{"orientation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360}},"modelNodeOverrides":{"*":{"type":"modelNodeOverride"}},"modelMaterialOverride":{"model-color":{"type":"color"},"model-color-mix-intensity":{"type":"number"},"model-opacity":{"type":"number"},"model-emissive-strength":{"type":"number"}},"modelMaterialOverrides":{"*":{"type":"modelMaterialOverride"}},"modelSourceModel":{"uri":{"type":"string"},"position":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[-180,-90],"maximum":[180,90]},"orientation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360},"nodeOverrides":{"type":"modelNodeOverrides"},"materialOverrides":{"type":"modelMaterialOverrides"},"nodeOverrideNames":{"type":"array","value":"string"},"materialOverrideNames":{"type":"array","value":"string"},"featureProperties":{"type":"*"}},"modelSourceModels":{"*":{"type":"modelSourceModel"}},"source_model":{"type":{"type":"enum","values":{"model":1,"batched-model":1}},"url":{"type":"string"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"},"models":{"type":"modelSourceModels"}},"layer":{"id":{"type":"string"},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"building":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{},"clip":{}}},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"},"appearances":{"type":"array","value":"appearance","supported-layer-types":["symbol"]}},"appearance":{"condition":{"type":"boolean","expression":{"interpolated":true,"parameters":["zoom","pitch","feature","feature-state","measure-light","distance-from-center"]},"property-type":"data-driven"},"name":{"type":"string"},"properties":{"type":"*"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_building","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"model-allow-density-reduction":{"type":"boolean","default":true}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{}},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","expression":{}},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-extrusion-edge-radius":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}}},"layout_building":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"building-facade":{"type":"boolean","default":false,"expression":{"parameters":["feature"]},"property-type":"data-driven"},"building-facade-floors":{"type":"number","minimum":1,"maximum":200,"default":3,"property-type":"data-driven","expression":{"parameters":["feature"]}},"building-facade-unit-width":{"type":"number","minimum":1,"maximum":20,"default":3.1,"property-type":"data-driven","expression":{"parameters":["feature"]}},"building-facade-window":{"type":"array","length":2,"value":"number","minimum":0.1,"maximum":1,"default":[0.9,0.9],"property-type":"data-driven","expression":{"parameters":["feature"]}},"building-roof-shape":{"type":"enum","values":{"flat":1,"hipped":1,"gabled":1,"parapet":1,"mansard":1,"skillion":1,"pyramidal":1},"default":"flat","expression":{"parameters":["feature"]},"property-type":"data-driven"},"building-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"},"building-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"},"building-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"building-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"building-flip-roof-orientation":{"property-type":"data-driven","type":"boolean","default":false,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","expression":{}},"line-cross-slope":{"type":"number","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","expression":{"parameters":["zoom"]}}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]}},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]}},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]}},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","expression":{"parameters":["zoom"]}},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"icon-size":{"type":"number","default":1,"minimum":0,"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":[0.1,0.1],"maximum":[10,10],"expression":{}},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"appearance":true,"use-theme":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":[0.1,0.1],"maximum":[10,10],"expression":{}},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]}},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]}},"text-rotate":{"type":"number","default":0,"period":360,"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_building":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*"}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"high-color":{"type":"color","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"space-color":{"type":"color","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"horizon-blend":{"type":"number","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"center-thinning":{"type":"number","default":0.4,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","default":0.71,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"opacity":{"type":"number","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"center-thinning":{"type":"number","default":0.57,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","default":0.7,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective"}},"colorTheme":{"data":{"type":"string","expression":{}}},"indoor_source":{"sourceId":{"type":"string"},"sourceLayers":{"type":"array","value":"string"}},"indoor":{"*":{"type":"indoor_source"}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator"},"center":{"type":"array","length":2,"value":"number","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string"},"exaggeration":{"type":"number","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_building","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"flat"},"fill-extrusion-base-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"terrain"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-ambient-occlusion-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"type":"color","default":"#ffffff","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true}},"paint_building":{"building-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-ambient-occlusion-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"parameters":[]},"transition":true},"building-ambient-occlusion-ground-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-cast-shadows":{"type":"boolean","default":true},"building-color":{"type":"color","default":"rgba(193, 154, 127, 1)","use-theme":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"},"building-emissive-strength":{"type":"number","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"},"building-facade-emissive-chance":{"type":"number","default":0.35,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["measure-light","zoom"]}},"building-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"building-flood-light-color":{"type":"color","default":"#ffffff","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"building-flood-light-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"building-flood-light-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-gradient":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["line-progress"]}},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1]},"line-trim-fade-range":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-trim-color":{"type":"color","default":"transparent","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"line-border-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"use-theme":true,"expression":{"interpolated":true,"parameters":["heatmap-density"]}},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-image-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{}},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["raster-value"]}},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]}},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"raster-array-band":{"type":"string"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string"},"raster-particle-count":{"type":"number","default":512,"minimum":1},"raster-particle-color":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["raster-particle-speed"]}},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-shadow-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-accent-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]}},"background-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]}},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]}},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]}},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"use-theme":true,"expression":{"interpolated":true,"parameters":["sky-radial-progress"]}},"sky-atmosphere-halo-color":{"type":"color","default":"white","use-theme":true},"sky-atmosphere-color":{"type":"color","default":"white","use-theme":true},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"use-theme":true,"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d"},"model-cast-shadows":{"type":"boolean","default":true},"model-receive-shadows":{"type":"boolean","default":true},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"model-front-cutoff":{"type":"array","value":"number","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]},"model-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","expression":{}}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"promoteId":{"*":{"type":"*"}}}');function $0(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function ev(c){if(Array.isArray(c))return c.map(ev);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const o={};for(const u in c)o[u]=ev(c[u]);return o}return $0(c)}function Kg(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const o of c.slice(1))if(!Kg(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function tv(c,o="",u=null,h="fill"){if(c==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Kg(c)||(c=cm(c));const g=c;let b=!0;try{b=(function(B){if(!Ud(B))return B;let U=ev(B);return Qg(U),U=V0(U),U})(g)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(g,null,2)}
        `)}let w=null,A=null;if(h!=="background"&&h!=="sky"&&h!=="slot"){A=ht[`filter_${h}`];const B=Fc(b,A,o,u);if(B.result==="error")throw new Error(B.value.map(U=>`${U.key}: ${U.message}`).join(", "));w=(U,$,G)=>B.value.evaluate(U,$,{},G)}let D=null,P=null;if(b!==g){const B=Fc(g,A,o,u);if(B.result==="error")throw new Error(B.value.map(U=>`${U.key}: ${U.message}`).join(", "));D=(U,$,G,Z,se)=>B.value.evaluate(U,$,{},G,void 0,void 0,Z,se),P=!Ad(B.value.expression)}return{filter:w,dynamicFilter:D||void 0,needGeometry:q0(b),needFeature:!!P}}function V0(c){if(!Array.isArray(c))return c;const o=(function(u){if(d1.has(u[0])){for(let h=1;h<u.length;h++)if(Ud(u[h]))return!0}return u})(c);return o===!0?o:o.map(u=>V0(u))}function Qg(c){let o=!1;const u=[];if(c[0]==="case"){for(let h=1;h<c.length-1;h+=2)o=o||Ud(c[h]),u.push(c[h+1]);u.push(c[c.length-1])}else if(c[0]==="match"){o=o||Ud(c[1]);for(let h=2;h<c.length-1;h+=2)u.push(c[h+1]);u.push(c[c.length-1])}else if(c[0]==="step"){o=o||Ud(c[1]);for(let h=1;h<c.length-1;h+=2)u.push(c[h+1])}o&&(c.length=0,c.push("any",...u));for(let h=1;h<c.length;h++)Qg(c[h])}function Ud(c){if(!Array.isArray(c))return!1;if((o=c[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let u=1;u<c.length;u++)if(Ud(c[u]))return!0;return!1}const d1=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function yT(c,o){return c<o?-1:c>o?1:0}function q0(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let o=1;o<c.length;o++)if(q0(c[o]))return!0;return!1}function cm(c){if(!c)return!0;const o=c[0];return c.length<=1?o!=="any":o==="=="?Cl(c[1],c[2],"=="):o==="!="?ty(Cl(c[1],c[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Cl(c[1],c[2],o):o==="any"?(u=c.slice(1),["any"].concat(u.map(cm))):o==="all"?["all"].concat(c.slice(1).map(cm)):o==="none"?["all"].concat(c.slice(1).map(cm).map(ty)):o==="in"?Jg(c[1],c.slice(2)):o==="!in"?ty(Jg(c[1],c.slice(2))):o==="has"?ey(c[1]):o!=="!has"||ty(ey(c[1]));var u}function Cl(c,o,u){switch(c){case"$type":return[`filter-type-${u}`,o];case"$id":return[`filter-id-${u}`,o];default:return[`filter-${u}`,c,o]}}function Jg(c,o){if(o.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(u=>typeof u!=typeof o[0])?["filter-in-large",c,["literal",o.sort(yT)]]:["filter-in-small",c,["literal",o]]}}function ey(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function ty(c){return["!",c]}const fm="";function Ku(c,o){return o?`${c}${fm}${o}`:c}let nv;const ny=()=>nv||(nv=new Ui({"icon-size":new on(ht.layout_symbol["icon-size"]),"icon-image":new on(ht.layout_symbol["icon-image"]),"icon-rotate":new on(ht.layout_symbol["icon-rotate"]),"icon-offset":new on(ht.layout_symbol["icon-offset"]),"text-size":new on(ht.layout_symbol["text-size"]),"text-rotate":new on(ht.layout_symbol["text-rotate"]),"text-offset":new on(ht.layout_symbol["text-offset"])}));class H0{constructor(o,u,h,g,b,w){const A=Fc(o,ht.appearance.condition);if(A.result==="success"&&(this.condition=A.value),this.name=u,h){this.properties=new Cs(ny()),this.unevaluatedLayout=new J_(ny(),g,b,w);for(const D in h)this.unevaluatedLayout.setValue(D,h[D])}}isActive(o){return!(this.condition||!o.isHidden||this.name!=="hidden")||this.condition.evaluate(o.globals,o.feature,o.featureState,o.canonical)}getCondition(){return this.condition}getName(){return this.name}getProperty(o){return this.properties.get(o)}getUnevaluatedProperties(){return this.unevaluatedLayout}getUnevaluatedProperty(o){return this.unevaluatedLayout._values[o]}recalculate(o,u,h){this.unevaluatedLayout&&(this.properties=this.unevaluatedLayout.possiblyEvaluate(o,void 0,u,h))}serialize(){const o={};return o.condition=this.condition.expression.serialize(),this.name&&(o.name=this.name),this.unevaluatedLayout&&(o.properties=this.unevaluatedLayout.serialize()),o}hasIconProperties(){const o=this.hasProperty("icon-image"),u=this.hasProperty("icon-size"),h=this.hasProperty("icon-offset"),g=this.hasProperty("icon-rotate");return o||u||h||g}hasTextProperties(){const o=this.hasProperty("text-size"),u=this.hasProperty("text-offset"),h=this.hasProperty("text-rotate");return o||u||h}hasProperty(o){return this.getUnevaluatedProperty(o).value!==void 0}}const rv="-transition",iv=new Set(["fill","line","background","hillshade","raster"]);class Ms extends pf{constructor(o,u,h,g,b,w){if(super(),this.id=o.id,this.fqid=Ku(this.id,h),this.type=o.type,this.scope=h,this.lut=g,this.options=b,this.iconImageUseTheme=w,this.appearances=new Array,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.expressionDependencies={isIndoorDependent:!1,configDependencies:new Set},o.type!=="custom"){if(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type&&o.type!=="background"&&o.type!=="sky"&&o.type!=="slot"){this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter;const A=Fc(this.filter,ht[`filter_${o.type}`]);A.result!=="error"&&(this.expressionDependencies.configDependencies=new Set([...this.expressionDependencies.configDependencies,...A.value.configDependencies]),this.expressionDependencies.isIndoorDependent=this.expressionDependencies.isIndoorDependent||A.value.isIndoorDependent)}if(o.slot&&(this.slot=o.slot),o.appearances&&this.setAppearances(o.appearances),u.layout&&(this._unevaluatedLayout=new J_(u.layout,this.scope,b,this.iconImageUseTheme),this.expressionDependencies.configDependencies=new Set([...this.expressionDependencies.configDependencies,...this._unevaluatedLayout.configDependencies]),this.expressionDependencies.isIndoorDependent=this.expressionDependencies.isIndoorDependent||this._unevaluatedLayout.isIndoorDependent()),u.paint){this._transitionablePaint=new um(u.paint,this.scope,b);for(const A in o.paint)this.setPaintProperty(A,o.paint[A]);for(const A in o.layout)this.setLayoutProperty(A,o.layout[A]);this.expressionDependencies.configDependencies=new Set([...this.expressionDependencies.configDependencies,...this._transitionablePaint.configDependencies]),this.expressionDependencies.isIndoorDependent=this.expressionDependencies.isIndoorDependent||this._transitionablePaint.isIndoorDependent(),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Cs(u.paint)}}}onAdd(o){}onRemove(o){}isDraped(o){return!this.is3D(!0)&&iv.has(this.type)}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,u){if(this.type==="custom"&&o==="visibility")return void(this.visibility=u);const h=this._unevaluatedLayout;h._properties.properties[o]&&(h.setValue(o,u),this.expressionDependencies.configDependencies=new Set([...this.expressionDependencies.configDependencies,...h.configDependencies]),this.expressionDependencies.isIndoorDependent=this.expressionDependencies.isIndoorDependent||h.isIndoorDependent(),o==="visibility"&&this.possiblyEvaluateVisibility())}setAppearances(o){this.appearances=[],o.forEach(u=>{this.appearances.push(new H0(u.condition,u.name,u.properties,this.scope,this.options,this.iconImageUseTheme))})}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(o){return o.endsWith(rv)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}isPaintProperty(o){return!!this._transitionablePaint._properties.properties[o]}setPaintProperty(o,u){const h=this._transitionablePaint,g=h._properties.properties;if(o.endsWith(rv)){const U=o.slice(0,-11);return g[U]&&h.setTransition(U,u||void 0),!1}if(!g[o])return!1;const b=h._values[o],w=b.value.isDataDriven(),A=b.value;h.setValue(o,u),this.expressionDependencies.configDependencies=new Set([...this.expressionDependencies.configDependencies,...h.configDependencies]),this.expressionDependencies.isIndoorDependent=this.expressionDependencies.isIndoorDependent||h.isIndoorDependent(),this._handleSpecialPaintPropertyUpdate(o);const D=h._values[o].value,P=D.isDataDriven(),B=o.endsWith("pattern")||o==="line-dasharray";return P||w||B||this._handleOverridablePaintPropertyUpdate(o,A,D)}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getDefaultProgramParams(o,u,h){return null}_handleOverridablePaintPropertyUpdate(o,u,h){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,u,this.iconImageUseTheme)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,u)}serialize(){const o={id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.appearances.length!==0&&(o.appearances=this.appearances.map(u=>u.serialize())),Rn(o,(u,h)=>!(u===void 0||h==="layout"&&!Object.keys(u).length||h==="paint"&&!Object.keys(u).length))}is3D(o){return!1}hasElevation(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}_clear(){}isStateDependent(){for(const o in this.paint._values){const u=this.paint.get(o);if(u instanceof Eh&&am(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}for(const o of this.appearances)if(!wo(o.condition.expression))return!0;return!1}compileFilter(o){this._filterCompiled||(this._featureFilter=tv(this.filter,this.scope,o),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(o){this._stats&&(o.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}getAppearances(){return this.appearances}queryRenderedFeatures(o,u,h){return{}}queryRadius(o){}queryIntersectsFeature(o,u,h,g,b,w,A,D,P,B){}}const G0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ml{constructor(o,u){this._structArray=o,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}const p1=new ArrayBuffer(0);class Ei{constructor(){this._reallocCount=0,this.capacity=0,this.length=0}static serialize(o,u){return o._trim(),u&&o.arrayBuffer&&u.add(o.arrayBuffer),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const u=Object.create(this.prototype);return u.arrayBuffer=o.arrayBuffer,u.length=o.length,o.arrayBuffer?u.capacity=o.arrayBuffer.byteLength/u.bytesPerElement:(u.capacity=0,u.arrayBuffer=p1),u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this._reallocCount++,this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}reserveForAdditional(o){this.reserve(this.length+o)}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...o){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...o){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function gr(c,o=1){let u=0,h=0;return{members:c.map(g=>{const b=G0[g.type].BYTES_PER_ELEMENT,w=u=ry(u,Math.max(o,b)),A=g.components||1;return h=Math.max(h,b),u+=b*A,{name:g.name,type:g.type,components:A,offset:w}}),size:ry(u,Math.max(h,o)),alignment:o}}function ry(c,o){return Math.ceil(c/o)*o}class Rf extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u){const h=this.length;return this.resize(h+1),this.emplace(h,o,u)}emplace(o,u,h){const g=2*o;return this.int16[g+0]=u,this.int16[g+1]=h,o}}Rf.prototype.bytesPerElement=4,Kt(Rf,"StructArrayLayout2i4");class Qu extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,h)}emplace(o,u,h,g){const b=3*o;return this.int16[b+0]=u,this.int16[b+1]=h,this.int16[b+2]=g,o}}Qu.prototype.bytesPerElement=6,Kt(Qu,"StructArrayLayout3i6");class $c extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,u,h,g)}emplace(o,u,h,g,b){const w=4*o;return this.int16[w+0]=u,this.int16[w+1]=h,this.int16[w+2]=g,this.int16[w+3]=b,o}}$c.prototype.bytesPerElement=8,Kt($c,"StructArrayLayout4i8");class To extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.float32[1*o+0]=u,o}}To.prototype.bytesPerElement=4,Kt(To,"StructArrayLayout1f4");class hm extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,h)}emplace(o,u,h,g){const b=4*o,w=2*o;return this.int16[b+0]=u,this.int16[b+1]=h,this.float32[w+1]=g,o}}hm.prototype.bytesPerElement=8,Kt(hm,"StructArrayLayout2i1f8");class iy extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,h)}emplace(o,u,h,g){const b=4*o;return this.int16[b+0]=u,this.int16[b+1]=h,this.int16[b+2]=g,o}}iy.prototype.bytesPerElement=8,Kt(iy,"StructArrayLayout3i8");class lo extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,h,g,b)}emplace(o,u,h,g,b,w){const A=5*o;return this.int16[A+0]=u,this.int16[A+1]=h,this.int16[A+2]=g,this.int16[A+3]=b,this.int16[A+4]=w,o}}lo.prototype.bytesPerElement=10,Kt(lo,"StructArrayLayout5i10");class Xo extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A){const D=this.length;return this.resize(D+1),this.emplace(D,o,u,h,g,b,w,A)}emplace(o,u,h,g,b,w,A,D){const P=6*o,B=12*o,U=3*o;return this.int16[P+0]=u,this.int16[P+1]=h,this.uint8[B+4]=g,this.uint8[B+5]=b,this.uint8[B+6]=w,this.uint8[B+7]=A,this.float32[U+2]=D,o}}Xo.prototype.bytesPerElement=12,Kt(Xo,"StructArrayLayout2i4ub1f12");class Yl extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,h)}emplace(o,u,h,g){const b=3*o;return this.float32[b+0]=u,this.float32[b+1]=h,this.float32[b+2]=g,o}}Yl.prototype.bytesPerElement=12,Kt(Yl,"StructArrayLayout3f12");class Ju extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,h,g,b)}emplace(o,u,h,g,b,w){const A=6*o,D=3*o;return this.uint16[A+0]=u,this.uint16[A+1]=h,this.uint16[A+2]=g,this.uint16[A+3]=b,this.float32[D+2]=w,o}}Ju.prototype.bytesPerElement=12,Kt(Ju,"StructArrayLayout4ui1f12");class $d extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,h,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,u,h,g)}emplace(o,u,h,g,b){const w=4*o;return this.uint16[w+0]=u,this.uint16[w+1]=h,this.uint16[w+2]=g,this.uint16[w+3]=b,o}}$d.prototype.bytesPerElement=8,Kt($d,"StructArrayLayout4ui8");class Vd extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w){const A=this.length;return this.resize(A+1),this.emplace(A,o,u,h,g,b,w)}emplace(o,u,h,g,b,w,A){const D=6*o;return this.int16[D+0]=u,this.int16[D+1]=h,this.int16[D+2]=g,this.int16[D+3]=b,this.int16[D+4]=w,this.int16[D+5]=A,o}}Vd.prototype.bytesPerElement=12,Kt(Vd,"StructArrayLayout6i12");class qd extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P,B,U,$){const G=this.length;return this.resize(G+1),this.emplace(G,o,u,h,g,b,w,A,D,P,B,U,$)}emplace(o,u,h,g,b,w,A,D,P,B,U,$,G){const Z=12*o;return this.int16[Z+0]=u,this.int16[Z+1]=h,this.int16[Z+2]=g,this.int16[Z+3]=b,this.uint16[Z+4]=w,this.uint16[Z+5]=A,this.uint16[Z+6]=D,this.uint16[Z+7]=P,this.int16[Z+8]=B,this.int16[Z+9]=U,this.int16[Z+10]=$,this.int16[Z+11]=G,o}}qd.prototype.bytesPerElement=24,Kt(qd,"StructArrayLayout4i4ui4i24");class av extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w){const A=this.length;return this.resize(A+1),this.emplace(A,o,u,h,g,b,w)}emplace(o,u,h,g,b,w,A){const D=10*o,P=5*o;return this.int16[D+0]=u,this.int16[D+1]=h,this.int16[D+2]=g,this.float32[P+2]=b,this.float32[P+3]=w,this.float32[P+4]=A,o}}av.prototype.bytesPerElement=20,Kt(av,"StructArrayLayout3i3f20");class ec extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,u,h,g)}emplace(o,u,h,g,b){const w=4*o;return this.float32[w+0]=u,this.float32[w+1]=h,this.float32[w+2]=g,this.float32[w+3]=b,o}}ec.prototype.bytesPerElement=16,Kt(ec,"StructArrayLayout4f16");class ov extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint32[1*o+0]=u,o}}ov.prototype.bytesPerElement=4,Kt(ov,"StructArrayLayout1ul4");class Wl extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u){const h=this.length;return this.resize(h+1),this.emplace(h,o,u)}emplace(o,u,h){const g=2*o;return this.uint16[g+0]=u,this.uint16[g+1]=h,o}}Wl.prototype.bytesPerElement=4,Kt(Wl,"StructArrayLayout2ui4");class Ah extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P,B,U,$,G){const Z=this.length;return this.resize(Z+1),this.emplace(Z,o,u,h,g,b,w,A,D,P,B,U,$,G)}emplace(o,u,h,g,b,w,A,D,P,B,U,$,G,Z){const se=20*o,fe=10*o;return this.int16[se+0]=u,this.int16[se+1]=h,this.int16[se+2]=g,this.int16[se+3]=b,this.int16[se+4]=w,this.float32[fe+3]=A,this.float32[fe+4]=D,this.float32[fe+5]=P,this.float32[fe+6]=B,this.int16[se+14]=U,this.uint32[fe+8]=$,this.uint16[se+18]=G,this.uint16[se+19]=Z,o}}Ah.prototype.bytesPerElement=40,Kt(Ah,"StructArrayLayout5i4f1i1ul2ui40");class dm extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A){const D=this.length;return this.resize(D+1),this.emplace(D,o,u,h,g,b,w,A)}emplace(o,u,h,g,b,w,A,D){const P=8*o;return this.int16[P+0]=u,this.int16[P+1]=h,this.int16[P+2]=g,this.int16[P+4]=b,this.int16[P+5]=w,this.int16[P+6]=A,this.int16[P+7]=D,o}}dm.prototype.bytesPerElement=16,Kt(dm,"StructArrayLayout3i2i2i16");class ay extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,h,g,b)}emplace(o,u,h,g,b,w){const A=4*o,D=8*o;return this.float32[A+0]=u,this.float32[A+1]=h,this.float32[A+2]=g,this.int16[D+6]=b,this.int16[D+7]=w,o}}ay.prototype.bytesPerElement=16,Kt(ay,"StructArrayLayout2f1f2i16");class oy extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w){const A=this.length;return this.resize(A+1),this.emplace(A,o,u,h,g,b,w)}emplace(o,u,h,g,b,w,A){const D=20*o,P=5*o;return this.uint8[D+0]=u,this.uint8[D+1]=h,this.float32[P+1]=g,this.float32[P+2]=b,this.float32[P+3]=w,this.float32[P+4]=A,o}}oy.prototype.bytesPerElement=20,Kt(oy,"StructArrayLayout2ub4f20");class Xa extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,h)}emplace(o,u,h,g){const b=3*o;return this.uint16[b+0]=u,this.uint16[b+1]=h,this.uint16[b+2]=g,o}}Xa.prototype.bytesPerElement=6,Kt(Xa,"StructArrayLayout3ui6");class Hd extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe,ue,pe,ve,Se,ke){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe,ue,pe,ve,Se,ke)}emplace(o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe,ue,pe,ve,Se,ke,Ie){const Ve=30*o,qe=15*o,Ue=60*o;return this.int16[Ve+0]=u,this.int16[Ve+1]=h,this.int16[Ve+2]=g,this.float32[qe+2]=b,this.float32[qe+3]=w,this.uint16[Ve+8]=A,this.uint16[Ve+9]=D,this.uint32[qe+5]=P,this.uint32[qe+6]=B,this.uint32[qe+7]=U,this.uint16[Ve+16]=$,this.uint16[Ve+17]=G,this.uint16[Ve+18]=Z,this.float32[qe+10]=se,this.float32[qe+11]=fe,this.uint8[Ue+48]=ue,this.uint8[Ue+49]=pe,this.uint8[Ue+50]=ve,this.uint32[qe+13]=Se,this.int16[Ve+28]=ke,this.uint8[Ue+58]=Ie,o}}Hd.prototype.bytesPerElement=60,Kt(Hd,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Oh extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe,ue,pe,ve,Se,ke,Ie,Ve,qe,Ue,Ze,rt,Et,xt,Tt,kt,Pt,Rt){const vt=this.length;return this.resize(vt+1),this.emplace(vt,o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe,ue,pe,ve,Se,ke,Ie,Ve,qe,Ue,Ze,rt,Et,xt,Tt,kt,Pt,Rt)}emplace(o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe,ue,pe,ve,Se,ke,Ie,Ve,qe,Ue,Ze,rt,Et,xt,Tt,kt,Pt,Rt,vt){const zt=20*o,Mt=40*o,Nt=80*o;return this.float32[zt+0]=u,this.float32[zt+1]=h,this.int16[Mt+4]=g,this.int16[Mt+5]=b,this.int16[Mt+6]=w,this.int16[Mt+7]=A,this.int16[Mt+8]=D,this.int16[Mt+9]=P,this.int16[Mt+10]=B,this.int16[Mt+11]=U,this.int16[Mt+12]=$,this.uint16[Mt+13]=G,this.uint16[Mt+14]=Z,this.uint16[Mt+15]=se,this.uint16[Mt+16]=fe,this.uint16[Mt+17]=ue,this.uint16[Mt+18]=pe,this.uint16[Mt+19]=ve,this.uint16[Mt+20]=Se,this.uint16[Mt+21]=ke,this.uint16[Mt+22]=Ie,this.uint16[Mt+23]=Ve,this.uint16[Mt+24]=qe,this.uint16[Mt+25]=Ue,this.uint16[Mt+26]=Ze,this.uint16[Mt+27]=rt,this.uint32[zt+14]=Et,this.float32[zt+15]=xt,this.float32[zt+16]=Tt,this.float32[zt+17]=kt,this.float32[zt+18]=Pt,this.uint8[Nt+76]=Rt,this.uint16[Mt+39]=vt,o}}Oh.prototype.bytesPerElement=80,Kt(Oh,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class pm extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w){const A=this.length;return this.resize(A+1),this.emplace(A,o,u,h,g,b,w)}emplace(o,u,h,g,b,w,A){const D=6*o;return this.float32[D+0]=u,this.float32[D+1]=h,this.float32[D+2]=g,this.float32[D+3]=b,this.float32[D+4]=w,this.float32[D+5]=A,o}}pm.prototype.bytesPerElement=24,Kt(pm,"StructArrayLayout6f24");class Ch extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,h,g,b)}emplace(o,u,h,g,b,w){const A=5*o;return this.float32[A+0]=u,this.float32[A+1]=h,this.float32[A+2]=g,this.float32[A+3]=b,this.float32[A+4]=w,o}}Ch.prototype.bytesPerElement=20,Kt(Ch,"StructArrayLayout5f20");class mm extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A){const D=this.length;return this.resize(D+1),this.emplace(D,o,u,h,g,b,w,A)}emplace(o,u,h,g,b,w,A,D){const P=7*o;return this.float32[P+0]=u,this.float32[P+1]=h,this.float32[P+2]=g,this.float32[P+3]=b,this.float32[P+4]=w,this.float32[P+5]=A,this.float32[P+6]=D,o}}mm.prototype.bytesPerElement=28,Kt(mm,"StructArrayLayout7f28");class gm extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P,B,U){const $=this.length;return this.resize($+1),this.emplace($,o,u,h,g,b,w,A,D,P,B,U)}emplace(o,u,h,g,b,w,A,D,P,B,U,$){const G=11*o;return this.float32[G+0]=u,this.float32[G+1]=h,this.float32[G+2]=g,this.float32[G+3]=b,this.float32[G+4]=w,this.float32[G+5]=A,this.float32[G+6]=D,this.float32[G+7]=P,this.float32[G+8]=B,this.float32[G+9]=U,this.float32[G+10]=$,o}}gm.prototype.bytesPerElement=44,Kt(gm,"StructArrayLayout11f44");class Gd extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P){const B=this.length;return this.resize(B+1),this.emplace(B,o,u,h,g,b,w,A,D,P)}emplace(o,u,h,g,b,w,A,D,P,B){const U=9*o;return this.float32[U+0]=u,this.float32[U+1]=h,this.float32[U+2]=g,this.float32[U+3]=b,this.float32[U+4]=w,this.float32[U+5]=A,this.float32[U+6]=D,this.float32[U+7]=P,this.float32[U+8]=B,o}}Gd.prototype.bytesPerElement=36,Kt(Gd,"StructArrayLayout9f36");class Mh extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u){const h=this.length;return this.resize(h+1),this.emplace(h,o,u)}emplace(o,u,h){const g=2*o;return this.float32[g+0]=u,this.float32[g+1]=h,o}}Mh.prototype.bytesPerElement=8,Kt(Mh,"StructArrayLayout2f8");class sy extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,h,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,u,h,g)}emplace(o,u,h,g,b){const w=6*o;return this.uint32[3*o+0]=u,this.uint16[w+2]=h,this.uint16[w+3]=g,this.uint16[w+4]=b,o}}sy.prototype.bytesPerElement=12,Kt(sy,"StructArrayLayout1ul3ui12");class ym extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint16[1*o+0]=u,o}}ym.prototype.bytesPerElement=2,Kt(ym,"StructArrayLayout1ui2");class tc extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe){const ue=this.length;return this.resize(ue+1),this.emplace(ue,o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe)}emplace(o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe,ue){const pe=16*o;return this.float32[pe+0]=u,this.float32[pe+1]=h,this.float32[pe+2]=g,this.float32[pe+3]=b,this.float32[pe+4]=w,this.float32[pe+5]=A,this.float32[pe+6]=D,this.float32[pe+7]=P,this.float32[pe+8]=B,this.float32[pe+9]=U,this.float32[pe+10]=$,this.float32[pe+11]=G,this.float32[pe+12]=Z,this.float32[pe+13]=se,this.float32[pe+14]=fe,this.float32[pe+15]=ue,o}}tc.prototype.bytesPerElement=64,Kt(tc,"StructArrayLayout16f64");class Yd extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A){const D=this.length;return this.resize(D+1),this.emplace(D,o,u,h,g,b,w,A)}emplace(o,u,h,g,b,w,A,D){const P=10*o,B=5*o;return this.uint16[P+0]=u,this.uint16[P+1]=h,this.uint16[P+2]=g,this.uint16[P+3]=b,this.float32[B+2]=w,this.float32[B+3]=A,this.float32[B+4]=D,o}}Yd.prototype.bytesPerElement=20,Kt(Yd,"StructArrayLayout4ui3f20");class Y0 extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.int16[1*o+0]=u,o}}Y0.prototype.bytesPerElement=2,Kt(Y0,"StructArrayLayout1i2");class ly extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint8[1*o+0]=u,o}}ly.prototype.bytesPerElement=1,Kt(ly,"StructArrayLayout1ub1");class Vc extends Ml{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Vc.prototype.size=40;class sv extends Ah{get(o){return new Vc(this,o)}}Kt(sv,"CollisionBoxArray");class W0 extends Ml{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}W0.prototype.size=60;class uy extends Hd{get(o){return new W0(this,o)}}Kt(uy,"PlacedSymbolArray");class _m extends Ml{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(o){this._structArray.uint32[this._pos4+14]=o}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(o){this._structArray.float32[this._pos4+18]=o}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}_m.prototype.size=80;class ja extends Oh{get(o){return new _m(this,o)}}Kt(ja,"SymbolInstanceArray");class cy extends To{getoffsetX(o){return this.float32[1*o+0]}}Kt(cy,"GlyphOffsetArray");class m1 extends Rf{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}Kt(m1,"SymbolLineVertexArray");class X0 extends Ml{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}X0.prototype.size=12;class kf extends sy{get(o){return new X0(this,o)}}Kt(kf,"FeatureIndexArray");class Lf extends Wl{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}Kt(Lf,"FillExtrusionCentroidArray");class lv extends Ml{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}lv.prototype.size=6;class Z0 extends Qu{get(o){return new lv(this,o)}}Kt(Z0,"FillExtrusionWallArray");const vm=gr([{name:"a_pos",components:2,type:"Int16"}],4),nc=gr([{name:"a_circle_z_offset",components:1,type:"Float32"}],4),K0=gr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ii{constructor(o=[]){this.segments=o}_prepareSegment(o,u,h,g){let b=this.segments[this.segments.length-1];return o>Ii.MAX_VERTEX_ARRAY_LENGTH&&Hn(`Max vertices per segment is ${Ii.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!b||b.vertexLength+o>Ii.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==g)&&(b={vertexOffset:u,primitiveOffset:h,vertexLength:0,primitiveLength:0},g!==void 0&&(b.sortKey=g),this.segments.push(b)),b}prepareSegment(o,u,h,g){return this._prepareSegment(o,u.length,h.length,g)}get(){return this.segments}destroy(){for(const o of this.segments)for(const u in o.vaos)o.vaos[u].destroy()}static simpleSegment(o,u,h,g){return new Ii([{vertexOffset:o,primitiveOffset:u,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function Q0(c,o){return 256*(c=ze(Math.floor(c),0,255))+ze(Math.floor(o),0,255)}Ii.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Kt(Ii,"SegmentVector");const uv=gr([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),J0=gr([{name:"a_pattern_b",components:4,type:"Uint16"}]),cv=gr([{name:"a_dash",components:4,type:"Uint16"}]);class bm{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(o,u,h,g){this.ids.push(qc(o)),this.positions.push(u,h,g)}eachPosition(o,u){const h=qc(o);let g=0,b=this.ids.length-1;for(;g<b;){const w=g+b>>1;this.ids[w]>=h?b=w:g=w+1}for(;this.ids[g]===h;)u(this.positions[3*g],this.positions[3*g+1],this.positions[3*g+2]),g++}static serialize(o,u){const h=new Float64Array(o.ids),g=new Uint32Array(o.positions);return uo(h,g,0,h.length-1),u&&(u.add(h.buffer),u.add(g.buffer)),{ids:h,positions:g}}static deserialize(o){const u=new bm;let h;u.ids=o.ids,u.positions=o.positions;for(const g of u.ids)g!==h&&u.uniqueIds.push(g),h=g;return u.indexed=!0,u}}function qc(c){const o=+c;return Number.isSafeInteger(o)?o:Oc(String(c))}function uo(c,o,u,h){for(;u<h;){const g=c[u+h>>1];let b=u-1,w=h+1;for(;;){do b++;while(c[b]<g);do w--;while(c[w]>g);if(b>=w)break;Wd(c,b,w),Wd(o,3*b,3*w),Wd(o,3*b+1,3*w+1),Wd(o,3*b+2,3*w+2)}w-u<h-w?(uo(c,o,u,w),u=w+1):(uo(c,o,w+1,h),h=w)}}function Wd(c,o,u){const h=c[o];c[o]=c[u],c[u]=h}Kt(bm,"FeaturePositionMap");class mu{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,u),this.initialized=!0),!!this.location}set(o,u,h){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class fa extends mu{constructor(o){super(o),this.current=0}set(o,u,h){this.fetchUniformLocation(o,u)&&this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}}class Ua extends mu{constructor(o){super(o),this.current=0}set(o,u,h){this.fetchUniformLocation(o,u)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class Dl extends mu{constructor(o){super(o),this.current=[0,0]}set(o,u,h){this.fetchUniformLocation(o,u)&&(h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1])))}}class xm extends mu{constructor(o){super(o),this.current=[0,0,0]}set(o,u,h){this.fetchUniformLocation(o,u)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2])))}}class Da extends mu{constructor(o){super(o),this.current=[0,0,0,0]}set(o,u,h){this.fetchUniformLocation(o,u)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class ll extends mu{constructor(o){super(o),this.current=Qr.transparent.toPremultipliedRenderColor(null)}set(o,u,h){this.fetchUniformLocation(o,u)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const zf=new Float32Array(16);class Xd extends mu{constructor(o){super(o),this.current=zf}set(o,u,h){if(this.fetchUniformLocation(o,u)){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let g=1;g<16;g++)if(h[g]!==this.current[g]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}}}const _T=new Float32Array(9),_=new Float32Array(4);class l extends mu{constructor(o){super(o),this.current=_}set(o,u,h){if(this.fetchUniformLocation(o,u)){for(let g=0;g<4;g++)if(h[g]!==this.current[g]){this.current=h,this.gl.uniformMatrix2fv(this.location,!1,h);break}}}}function d(c){return[Q0(255*c.r,255*c.g),Q0(255*c.b,255*c.a)]}function v(c,o,u,h,g,b,w,A){return!!c&&(c.kind==="composite"||c.kind==="source"?c.evaluate(new Jr(0,{brightness:b,worldview:A}),o,u,g,h,w)==="none":c.value==="none")}class T{constructor(o,u,h,g){this.value=o,this.uniformNames=u.map(b=>`u_${b}`),this.type=h,this.context=g}setUniform(o,u,h,g,b){const w=g.constantOr(this.value);u.set(o,b,w instanceof Qr?w.toPremultipliedRenderColor(this.lutExpression&&this.lutExpression.kind==="constant"&&this.lutExpression.value==="none"?null:this.context.lut):w)}getBinding(o,u){return this.type==="color"?new ll(o):new Ua(o)}}class O{constructor(o,u){this.uniformNames=u.map(h=>`u_${h}`),this.pattern=null,this.patternTransition=null,this.pixelRatio=1}setConstantPatternPositions(o,u){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br),this.patternTransition=u?u.tl.concat(u.br):this.pattern}setUniform(o,u,h,g,b){let w=null;b!=="u_pattern"&&b!=="u_dash"||(w=this.pattern),b==="u_pattern_b"&&(w=this.patternTransition),b==="u_pixel_ratio"&&(w=this.pixelRatio),w&&u.set(o,b,w)}getBinding(o,u){return u==="u_pattern"||u==="u_pattern_b"||u==="u_dash"?new Da(o):new Ua(o)}}class M{constructor(o,u,h,g){this.expression=o,this.type=h,this.maxValue=0,this.paintVertexAttributes=u.map(b=>({name:`a_${b}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(o,u,h,g,b,w,A,D){const P=this.paintVertexArray.length,B=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new Jr(0,{brightness:w,worldview:D}),u,{},b,g,A):this.expression.kind==="constant"&&this.expression.value,U=v(this.lutExpression,u,{},g,b,w,A,D);this.paintVertexArray.resize(o),this._setPaintValue(P,o,B,U?null:this.context.lut)}updatePaintArray(o,u,h,g,b,w,A,D){const P=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:A,worldview:D},h,g,void 0,b):this.expression.kind==="constant"&&this.expression.value,B=v(this.lutExpression,h,g,b,void 0,A,void 0,D);this._setPaintValue(o,u,P,B?null:this.context.lut)}_setPaintValue(o,u,h,g){if(this.type==="color"){const b=d(h.toPremultipliedRenderColor(g));for(let w=o;w<u;w++)this.paintVertexArray.emplace(w,b[0],b[1])}else{for(let b=o;b<u;b++)this.paintVertexArray.emplace(b,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class R{constructor(o,u,h,g,b,w){this.expression=o,this.uniformNames=u.map(A=>`u_${A}_t`),this.type=h,this.useIntegerZoom=g,this.context=b,this.maxValue=0,this.paintVertexAttributes=u.map(A=>({name:`a_${A}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(o,u,h,g,b,w,A,D){const P=this.expression.evaluate(new Jr(this.context.zoom,{brightness:w,worldview:D}),u,{},b,g,A),B=this.expression.evaluate(new Jr(this.context.zoom+1,{brightness:w,worldview:D}),u,{},b,g,A),U=v(this.lutExpression,u,{},g,b,w,A,D),$=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue($,o,P,B,U?null:this.context.lut)}updatePaintArray(o,u,h,g,b,w,A,D){const P=this.expression.evaluate({zoom:this.context.zoom,brightness:A,worldview:D},h,g,void 0,b),B=this.expression.evaluate({zoom:this.context.zoom+1,brightness:A,worldview:D},h,g,void 0,b),U=v(this.lutExpression,h,g,b,void 0,A,void 0,D);this._setPaintValue(o,u,P,B,U?null:this.context.lut)}_setPaintValue(o,u,h,g,b){if(this.type==="color"){const w=d(h.toPremultipliedRenderColor(b)),A=d(g.toPremultipliedRenderColor(b));for(let D=o;D<u;D++)this.paintVertexArray.emplace(D,w[0],w[1],A[0],A[1])}else{for(let w=o;w<u;w++)this.paintVertexArray.emplace(w,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,u,h,g,b){const w=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,A=ze(this.expression.interpolationFactor(w,this.context.zoom,this.context.zoom+1),0,1);u.set(o,b,A)}getBinding(o,u){return new Ua(o)}}class F{constructor(o,u,h,g,b){this.expression=o,this.layerId=b,this.paintVertexAttributes=(h==="array"?cv:uv).members;for(let w=0;w<u.length;++w);this.paintVertexArray=new g,this.paintTransitionVertexArray=new $d}populatePaintArray(o,u,h,g){const b=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(b,o,u.patterns&&u.patterns[this.layerId],h)}updatePaintArray(o,u,h,g,b,w,A){this._setPaintValues(o,u,h.patterns&&h.patterns[this.layerId],w)}_setPaintValues(o,u,h,g){if(!g||!h)return;const b=g[h[0]],w=g[h[1]];if(b){if(b){const{tl:A,br:D,pixelRatio:P}=b;for(let B=o;B<u;B++)this.paintVertexArray.emplace(B,A[0],A[1],D[0],D[1],P)}if(w){this.paintTransitionVertexArray.resize(this.paintVertexArray.length);const{tl:A,br:D}=w;for(let P=o;P<u;P++)this.paintTransitionVertexArray.emplace(P,A[0],A[1],D[0],D[1])}}}upload(o){const u=this.expression.isStateDependent||!this.expression.isLightConstant;this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,u)),this.paintTransitionVertexArray&&this.paintTransitionVertexArray.length&&(this.paintTransitionVertexBuffer=o.createVertexBuffer(this.paintTransitionVertexArray,J0.members,u))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy(),this.paintTransitionVertexBuffer&&this.paintTransitionVertexBuffer.destroy()}}class q{constructor(o,u,h=()=>!0){this.binders={},this._buffers=[],this.context=u;const g=[];for(const b in o.paint._values){const w=o.paint.get(b);if(b.endsWith("-use-theme")||!h(b)||!(w instanceof Eh&&am(w.property.specification)))continue;const A=ee(b,o.type),D=w.value,P=w.property.specification.type,B=!!w.property.useIntegerZoom,U=b==="line-dasharray"||b.endsWith("pattern"),$=o.paint.get(`${b}-use-theme`),G=b==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant"||$&&$.value.kind!=="constant";if(D.kind!=="constant"||G)if(D.kind==="source"||G||U){const Z=ce(b,P,"source");this.binders[b]=U?new F(D,A,P,Z,o.id):new M(D,A,P,Z),g.push(`/a_${b}`)}else{const Z=ce(b,P,"composite");this.binders[b]=new R(D,A,P,B,u,Z),g.push(`/z_${b}`)}else this.binders[b]=U?new O(D.value,A):new T(D.value,A,P,u),g.push(`/u_${b}`);$&&(this.binders[b].lutExpression=$.value)}this.cacheKey=g.sort().join("")}getMaxValue(o){const u=this.binders[o];return u instanceof M||u instanceof R?u.maxValue:0}populatePaintArrays(o,u,h,g,b,w,A,D){for(const P in this.binders){const B=this.binders[P];B.context=this.context,(B instanceof M||B instanceof R||B instanceof F)&&B.populatePaintArray(o,u,h,g,b,w,A,D)}}setConstantPatternPositions(o,u){for(const h in this.binders){const g=this.binders[h];g instanceof O&&g.setConstantPatternPositions(o,u)}}getPatternTransitionVertexBuffer(o){const u=this.binders[o];return u instanceof F?u.paintTransitionVertexBuffer:null}updatePaintArrays(o,u,h,g,b,w,A,D,P,B){let U=!1;const $=Object.keys(o),G=$.length!==0&&!D,Z=G?$:u.uniqueIds;this.context.lut=b.lut;for(const se in this.binders){const fe=this.binders[se];if(fe.context=this.context,(fe instanceof M||fe instanceof R||fe instanceof F)&&fe.expression&&fe.expression.kind&&fe.expression.kind!=="constant"&&(fe.expression.isStateDependent===!0||fe.expression.isLightConstant===!1)){const ue=b.paint.get(se);fe.expression=ue.value;for(const pe of Z){const ve=o[pe.toString()];u.eachPosition(pe,(Se,ke,Ie)=>{const Ve=g.feature(Se);fe.updatePaintArray(ke,Ie,Ve,ve,w,A,P,B)})}if(!G)for(const pe of h.uniqueIds){const ve=o[pe.toString()];h.eachPosition(pe,(Se,ke,Ie)=>{const Ve=g.feature(Se);fe.updatePaintArray(ke,Ie,Ve,ve,w,A,P,B)})}U=!0}}return U}defines(){const o=[];for(const u in this.binders){const h=this.binders[u];(h instanceof T||h instanceof O)&&o.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const u=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof T||g instanceof O||g instanceof R)for(const b of g.uniformNames)u.push({name:b,property:h,binding:g.getBinding(o,b)})}return u}setUniforms(o,u,h,g,b){for(const{name:w,property:A,binding:D}of h)this.binders[A].setUniform(o,D,b,g.get(A),w)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const u=this.binders[o];(u instanceof M||u instanceof R||u instanceof F)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer),u instanceof F&&u.paintTransitionVertexBuffer&&this._buffers.push(u.paintTransitionVertexBuffer)}}upload(o){for(const u in this.binders){const h=this.binders[u];(h instanceof M||h instanceof R||h instanceof F)&&h.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const u=this.binders[o];(u instanceof M||u instanceof R||u instanceof F)&&u.destroy()}}}class H{constructor(o,u,h=()=>!0){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new q(g,u,h);this.needsUpload=!1,this._featureMap=new bm,this._featureMapWithoutIds=new bm,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(o,u,h,g,b,w,A,D,P){for(const B in this.programConfigurations)this.programConfigurations[B].populatePaintArrays(o,u,g,b,w,A,D,P);u.id!==void 0?this._featureMap.add(u.id,h,this._bufferOffset,o):(this._featureMapWithoutIds.add(this._idlessCounter,h,this._bufferOffset,o),this._idlessCounter+=1),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,u,h,g,b,w,A,D){for(const P of h)this.needsUpload=this.programConfigurations[P.id].updatePaintArrays(o,this._featureMap,this._featureMapWithoutIds,u,P,g,b,w,A||0,D)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const re={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio","pattern_b"],"fill-pattern":["pattern","pixel_ratio","pattern_b"],"fill-extrusion-pattern":["pattern","pixel_ratio","pattern_b"],"line-dasharray":["dash"],"fill-bridge-guard-rail-color":["structure_color"],"fill-tunnel-structure-color":["structure_color"]};function ee(c,o){return re[c]||[c.replace(`${o}-`,"").replace(/-/g,"_")]}const oe={"line-pattern":{source:Ju,composite:Ju},"fill-pattern":{source:Ju,composite:Ju},"fill-extrusion-pattern":{source:Ju,composite:Ju},"line-dasharray":{source:$d,composite:$d}},he={color:{source:Mh,composite:ec},number:{source:To,composite:Mh}};function ce(c,o,u){const h=oe[c];return h&&h[u]||he[o][u]}Kt(T,"ConstantBinder"),Kt(O,"PatternConstantBinder"),Kt(M,"SourceExpressionBinder"),Kt(F,"PatternCompositeBinder"),Kt(R,"CompositeExpressionBinder"),Kt(q,"ProgramConfiguration",{omit:["_buffers"]}),Kt(H,"ProgramConfigurationSet");const de=Jt/Math.PI/2,_e=64,Me=[_e,32,16],Ce=-de,Ae=de;function We(c,o,u,h=de){return u=Ar(u),[c*Math.sin(u)*h,-o*h,c*Math.cos(u)*h]}function $e(c,o,u){return We(Math.cos(Ar(c)),Math.sin(Ar(c)),o,u)}const Ge=63710088e-1,Ne=2*Math.PI*Ge;class Re{constructor(o,u){if(isNaN(o)||isNaN(u))throw new Error(`Invalid LngLat object: (${o}, ${u})`);if(this.lng=+o,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Re(_t(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const u=Math.PI/180,h=this.lat*u,g=o.lat*u,b=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((o.lng-this.lng)*u);return Ge*Math.acos(Math.min(b,1))}toBounds(o=0){const u=360*o/40075017,h=u/Math.cos(Math.PI/180*this.lat);return new Je({lng:this.lng-h,lat:this.lat-u},{lng:this.lng+h,lat:this.lat+u})}toEcef(o){return $e(this.lat,this.lng,de+o*de/Ge)}static convert(o){if(o instanceof Re)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Re(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Re(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Je{constructor(o,u){o&&(u?this.setSouthWest(o).setNorthEast(u):Array.isArray(o)&&o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof Re?new Re(o.lng,o.lat):Re.convert(o),this}setSouthWest(o){return this._sw=o instanceof Re?new Re(o.lng,o.lat):Re.convert(o),this}extend(o){const u=this._sw,h=this._ne;let g,b;if(o instanceof Re)g=o,b=o;else{if(!(o instanceof Je))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Je.convert(o)):this.extend(Re.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(Re.convert(o)):this;if(g=o._sw,b=o._ne,!g||!b)return this}return u||h?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),h.lng=Math.max(b.lng,h.lng),h.lat=Math.max(b.lat,h.lat)):(this._sw=new Re(g.lng,g.lat),this._ne=new Re(b.lng,b.lat)),this}getCenter(){return new Re((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Re(this.getWest(),this.getNorth())}getSouthEast(){return new Re(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:u,lat:h}=Re.convert(o);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&g}static convert(o){if(o)return o instanceof Je?o:new Je(o)}}function nt(c){return Ne*Math.cos(c*Math.PI/180)}function st(c){return(180+c)/360}function dt(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function ft(c,o){return c/nt(o)}function wt(c){return 360*c-180}function It(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function pt(c,o){return c*nt(It(o))}const et=85.051129;function At(c){return Math.cos(Ar(ze(c,-85.051129,et)))}function gt(c,o){const u=ze(o,0,25.5),h=Math.pow(2,u);return At(c)*Ne/(512*h)}function Dt(c){return 1/Math.cos(c*Math.PI/180)}function qt(c,o=0){const u=Math.exp(Math.PI*(1-(c.y+o/Jt)/(1<<c.z)*2));return 80150034*u/(u*u+1)/Jt/(1<<c.z)}class tn{constructor(o,u,h=0){this.x=+o,this.y=+u,this.z=+h}static fromLngLat(o,u=0){const h=Re.convert(o);return new tn(st(h.lng),dt(h.lat),ft(u,h.lat))}toLngLat(){return new Re(wt(this.x),It(this.y))}toAltitude(){return pt(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ne*Dt(It(this.y))}}function Wt(c,o,u,h,g,b,w,A,D){const P=(o+h)/2,B=(u+g)/2,U=new Vt(P,B);A(U),(function($,G,Z,se,fe,ue){const pe=Z-fe,ve=se-ue;return Math.abs((se-G)*pe-(Z-$)*ve)/Math.hypot(pe,ve)})(U.x,U.y,b.x,b.y,w.x,w.y)>=D?(Wt(c,o,u,P,B,b,U,A,D),Wt(c,P,B,h,g,U,w,A,D)):c.push(w)}function Ht(c,o,u){let h=c[0],g=h.x,b=h.y;o(h);const w=[h];for(let A=1;A<c.length;A++){const D=c[A],{x:P,y:B}=D;o(D),Wt(w,g,b,P,B,h,D,o,u),g=P,b=B,h=D}return w}function xn(c,o,u,h){if(h(o,u)){const g=o.add(u)._mult(.5);xn(c,o,g,h),xn(c,g,u,h)}else c.push(u)}function yn(c,o){let u=c[0];const h=[u];for(let g=1;g<c.length;g++){const b=c[g];xn(h,u,b,o),u=b}return h}const rn=Math.pow(2,14)-1,_n=-rn-1;function In(c,o){const u=Math.round(c.x*o),h=Math.round(c.y*o);return c.x=ze(u,_n,rn),c.y=ze(h,_n,rn),(u<c.x||u>c.x+1||h<c.y||h>c.y+1)&&Hn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),c}function Un(c,o,u){const h=c.loadGeometry(),g=c.extent,b=Jt/g;if(o&&u&&u.projection.isReprojectedInTileSpace){const w=1<<o.z,{scale:A,x:D,y:P,projection:B}=u,U=$=>{const G=wt((o.x+$.x/g)/w),Z=It((o.y+$.y/g)/w),se=B.project(G,Z);$.x=(se.x*A-D)*g,$.y=(se.y*A-P)*g};for(let $=0;$<h.length;$++)if(c.type!==1)h[$]=Ht(h[$],U,1);else{const G=[];for(const Z of h[$])Z.x<0||Z.x>=g||Z.y<0||Z.y>=g||(U(Z),G.push(Z));h[$]=G}}for(const w of h)for(const A of w)In(A,b);return h}function Qn(c,o){return{type:c.type,id:c.id,properties:c.properties,geometry:o?Un(c):[]}}class yr{constructor(o,u,h,g,b){this.properties={},this.extent=h,this.type=0,this.id=void 0,this._pbf=o,this._geometry=-1,this._keys=g,this._values=b,o.readFields($n,this,u)}loadGeometry(){const o=this._pbf;o.pos=this._geometry;const u=o.readVarint()+o.pos,h=[];let g,b=1,w=0,A=0,D=0;for(;o.pos<u;){if(w<=0){const P=o.readVarint();b=7&P,w=P>>3}if(w--,b===1||b===2)A+=o.readSVarint(),D+=o.readSVarint(),b===1&&(g&&h.push(g),g=[]),g&&g.push(new Vt(A,D));else{if(b!==7)throw new Error(`unknown command ${b}`);g&&g.push(g[0].clone())}}return g&&h.push(g),h}bbox(){const o=this._pbf;o.pos=this._geometry;const u=o.readVarint()+o.pos;let h=1,g=0,b=0,w=0,A=1/0,D=-1/0,P=1/0,B=-1/0;for(;o.pos<u;){if(g<=0){const U=o.readVarint();h=7&U,g=U>>3}if(g--,h===1||h===2)b+=o.readSVarint(),w+=o.readSVarint(),b<A&&(A=b),b>D&&(D=b),w<P&&(P=w),w>B&&(B=w);else if(h!==7)throw new Error(`unknown command ${h}`)}return[A,P,D,B]}toGeoJSON(o,u,h){const g=this.extent*Math.pow(2,h),b=this.extent*o,w=this.extent*u,A=this.loadGeometry();function D($){return[360*($.x+b)/g-180,360/Math.PI*Math.atan(Math.exp((1-2*($.y+w)/g)*Math.PI))-90]}function P($){return $.map(D)}let B;if(this.type===1){const $=[];for(const Z of A)$.push(Z[0]);const G=P($);B=$.length===1?{type:"Point",coordinates:G[0]}:{type:"MultiPoint",coordinates:G}}else if(this.type===2){const $=A.map(P);B=$.length===1?{type:"LineString",coordinates:$[0]}:{type:"MultiLineString",coordinates:$}}else{if(this.type!==3)throw new Error("unknown feature type");{const $=(function(Z){const se=Z.length;if(se<=1)return[Z];const fe=[];let ue,pe;for(let ve=0;ve<se;ve++){const Se=Jn(Z[ve]);Se!==0&&(pe===void 0&&(pe=Se<0),pe===Se<0?(ue&&fe.push(ue),ue=[Z[ve]]):ue&&ue.push(Z[ve]))}return ue&&fe.push(ue),fe})(A),G=[];for(const Z of $)G.push(Z.map(P));B=G.length===1?{type:"Polygon",coordinates:G[0]}:{type:"MultiPolygon",coordinates:G}}}const U={type:"Feature",geometry:B,properties:this.properties};return this.id!=null&&(U.id=this.id),U}}function $n(c,o,u){c===1?o.id=u.readVarint():c===2?(function(h,g){const b=h.readVarint()+h.pos;for(;h.pos<b;){const w=g._keys[h.readVarint()],A=g._values[h.readVarint()];g.properties[w]=A}})(u,o):c===3?o.type=u.readVarint():c===4&&(o._geometry=u.pos)}function Jn(c){let o=0;for(let u,h,g=0,b=c.length,w=b-1;g<b;w=g++)u=c[g],h=c[w],o+=(h.x-u.x)*(u.y+h.y);return o}yr.types=["Unknown","Point","LineString","Polygon"];class Yn{constructor(o,u){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(jr,this,u),this.length=this._features.length}feature(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];const u=this._pbf.readVarint()+this._pbf.pos;return new yr(this._pbf,u,this.extent,this._keys,this._values)}}function jr(c,o,u){c===15?o.version=u.readVarint():c===1?o.name=u.readString():c===5?o.extent=u.readVarint():c===2?o._features.push(u.pos):c===3?o._keys.push(u.readString()):c===4&&o._values.push((function(h){let g=null;const b=h.readVarint()+h.pos;for(;h.pos<b;){const w=h.readVarint()>>3;g=w===1?h.readString():w===2?h.readFloat():w===3?h.readDouble():w===4?h.readVarint64():w===5?h.readVarint():w===6?h.readSVarint():w===7?h.readBoolean():null}if(g==null)throw new Error("unknown feature value");return g})(u))}class Mr{constructor(o,u){this.layers=o.readFields(ei,{},u)}}function ei(c,o,u){if(c===3){const h=new Yn(u,u.readVarint()+u.pos);h.length&&(o[h.name]=h)}}const wr="3d_elevation_id",er="level";class Rr{constructor(){this._valid=!1}reset(o){return this.feature=o,this._valid=!0,this._geometry=o.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(o,u){return this._valid&&o(u(this._geometry)),this}require(o,u,h){return this.get(o,!0,u,h)}optional(o,u,h){return this.get(o,!1,u,h)}success(){return this._valid}get(o,u,h,g){const b=this.feature.properties.hasOwnProperty(o)?+this.feature.properties[o]:void 0;return this._valid&&b!==void 0&&!Number.isNaN(b)?h(g?g(b):b):u&&(this._valid=!1),this}}class Pi{constructor(o,u){this.featureFunc=o,this.vertexFunc=u}parseFeature(o,u,h){return this.featureFunc(o,u,h)}parseVertex(o,u,h){return this.vertexFunc(o,u,h)}}const ti=new Pi((c,o,u)=>c.reset(o).require(wr,h=>{u.id=h}).optional("fixed_height_relative",h=>{u.constantHeight=h},Kn.decodeRelativeHeight).geometry(h=>{u.bounds=h},Uu).success(),(c,o,u)=>c.reset(o).require(wr,h=>{u.id=h}).require("elevation_idx",h=>{u.idx=h}).require("extent",h=>{u.extent=h}).require("height_relative",h=>{u.height=h},Kn.decodeRelativeHeight).geometry(h=>{u.position=h},Kn.getPoint).success()),qr=new Pi((c,o,u)=>c.reset(o).require(wr,h=>{u.id=h}).optional("fixed_height",h=>{u.constantHeight=h},Kn.decodeMetricHeight).geometry(h=>{u.bounds=h},Uu).success(),(c,o,u)=>c.reset(o).require(wr,h=>{u.id=h}).require("elevation_idx",h=>{u.idx=h}).require("extent",h=>{u.extent=h}).require("height",h=>{u.height=h},Kn.decodeMetricHeight).geometry(h=>{u.position=h},Kn.getPoint).success());class Kn{static getPoint(o){return Ri(o[0][0].x,o[0][0].y)}static decodeRelativeHeight(o){return 1e-4*o*5}static decodeMetricHeight(o){return 1e-4*o}static getVersionSchema(o){return o?o==="1.0.1"?qr:void 0:ti}static parse(o){const u=[],h=[],g=o.length,b=new Rr;for(let w=0;w<g;w++){const A=o.feature(w),D=A.properties.version,P=Kn.getVersionSchema(D);if(P===void 0){Hn(`Unknown elevation feature version number ${D||"(unknown)"}`);continue}const B=A.properties.type;if(!B)continue;const U=yr.types[A.type];if(U==="Point"&&B==="curve_point"){const $={};P.parseVertex(b,A,$)&&u.push($)}else if(U==="Polygon"&&B==="curve_meta"){const $={};P.parseFeature(b,A,$)&&h.push($)}}return{vertices:u,features:h}}}class tr{constructor(o,u){this.pos=o,this.dir=u}intersectsPlane(o,u,h){const g=mi(u,this.dir);if(Math.abs(g)<1e-6)return!1;const b=((o[0]-this.pos[0])*u[0]+(o[1]-this.pos[1])*u[1])/g;return h[0]=this.pos[0]+this.dir[0]*b,h[1]=this.pos[1]+this.dir[1]*b,!0}}class yi{constructor(o,u){this.pos=o,this.dir=u}intersectsPlane(o,u,h){const g=Ye(u,this.dir);if(Math.abs(g)<1e-6)return!1;const b=((o[0]-this.pos[0])*u[0]+(o[1]-this.pos[1])*u[1]+(o[2]-this.pos[2])*u[2])/g;return h[0]=this.pos[0]+this.dir[0]*b,h[1]=this.pos[1]+this.dir[1]*b,h[2]=this.pos[2]+this.dir[2]*b,!0}closestPointOnSphere(o,u,h){if((function(G,Z){var se=G[0],fe=G[1],ue=G[2],pe=Z[0],ve=Z[1],Se=Z[2];return Math.abs(se-pe)<=p*Math.max(1,Math.abs(se),Math.abs(pe))&&Math.abs(fe-ve)<=p*Math.max(1,Math.abs(fe),Math.abs(ve))&&Math.abs(ue-Se)<=p*Math.max(1,Math.abs(ue),Math.abs(Se))})(this.pos,o)||u===0)return h[0]=h[1]=h[2]=0,!1;const[g,b,w]=this.dir,A=this.pos[0]-o[0],D=this.pos[1]-o[1],P=this.pos[2]-o[2],B=g*g+b*b+w*w,U=2*(A*g+D*b+P*w),$=U*U-4*B*(A*A+D*D+P*P-u*u);if($<0){const G=Math.max(-U/2,0),Z=A+g*G,se=D+b*G,fe=P+w*G,ue=Math.hypot(Z,se,fe);return h[0]=Z*u/ue,h[1]=se*u/ue,h[2]=fe*u/ue,!1}{const G=(-U-Math.sqrt($))/(2*B);if(G<0){const Z=Math.hypot(A,D,P);return h[0]=A*u/Z,h[1]=D*u/Z,h[2]=P*u/Z,!1}return h[0]=A+g*G,h[1]=D+b*G,h[2]=P+w*G,!0}}}class Ji{constructor(o,u,h,g,b){this.TL=o,this.TR=u,this.BR=h,this.BL=g,this.horizon=b}static fromInvProjectionMatrix(o,u,h){const g=[-1,1,1],b=[1,1,1],w=[1,-1,1],A=[-1,-1,1],D=Ct(g,g,o),P=Ct(b,b,o),B=Ct(w,w,o),U=Ct(A,A,o);return new Ji(D,P,B,U,u/h)}}function ai(c,o,u){let h=1/0,g=-1/0;const b=[];for(const w of c){or(b,w,o);const A=Ye(b,u);h=Math.min(h,A),g=Math.max(g,A)}return[h,g]}function _i(c,o){let u=!0;for(let h=0;h<c.planes.length;h++){const g=c.planes[h];let b=0;for(let w=0;w<o.length;w++)b+=+(Ye(g,o[w])+g[3]>=0);if(b===0)return 0;b!==o.length&&(u=!1)}return u?2:1}function cs(c,o){for(const u of c.projections){const h=ai(o,c.points[0],u.axis);if(u.projection[1]<h[0]||u.projection[0]>h[1])return 0}return 1}function Uo(c,o){let u=0;const h=[0,0,0,0];for(let g=0;g<c.length;g++)h[0]=c[g][0],h[1]=c[g][1],h[2]=c[g][2],h[3]=1,Fr(h,o)>=0&&u++;return u}class co{constructor(o,u){this.points=o||new Array(8).fill([0,0,0]),this.planes=u||new Array(6).fill([0,0,0,0]),this.bounds=Hr.fromPoints(this.points),this.projections=[],this.frustumEdges=[or([],this.points[2],this.points[3]),or([],this.points[0],this.points[3]),or([],this.points[4],this.points[0]),or([],this.points[5],this.points[1]),or([],this.points[6],this.points[2]),or([],this.points[7],this.points[3])];for(const h of this.frustumEdges){const g=[0,-h[2],h[1]],b=[h[2],0,-h[0]];this.projections.push({axis:g,projection:ai(this.points,this.points[0],g)}),this.projections.push({axis:b,projection:ai(this.points,this.points[0],b)})}}static fromInvProjectionMatrix(o,u,h,g){const b=Math.pow(2,h),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const B=hi([],P,o),U=1/B[3]/u*b;return($=B)[0]=(G=B)[0]*(Z=[U,U,g?1/B[3]:U,U])[0],$[1]=G[1]*Z[1],$[2]=G[2]*Z[2],$[3]=G[3]*Z[3],$;var $,G,Z}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const B=xe([],ct([],or([],w[P[0]],w[P[1]]),or([],w[P[2]],w[P[1]]))),U=-Ye(B,w[P[1]]);return B.concat(U)}),D=[];for(let P=0;P<w.length;P++)D.push([w[P][0],w[P][1],w[P][2]]);return new co(D,A)}intersectsPrecise(o,u,h){for(let g=0;g<u.length;g++)if(!Uo(o,u[g]))return 0;for(let g=0;g<this.planes.length;g++)if(!Uo(o,this.planes[g]))return 0;for(const g of h)for(const b of this.frustumEdges){const w=ct([],g,b),A=Be(w);if(A===0)continue;Pe(w,w,1/A);const D=ai(this.points,this.points[0],w),P=ai(o,this.points[0],w);if(D[0]>P[1]||P[0]>D[1])return 0}return 1}containsPoint(o){for(const u of this.planes){const h=u[3];if(Ye([u[0],u[1],u[2]],o)+h<0)return!1}return!0}}class Hr{static fromPoints(o){const u=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0];for(const g of o)Ke(u,u,g),it(h,h,g);return new Hr(u,h)}static fromTileIdAndHeight(o,u,h){const g=1<<o.canonical.z,b=o.canonical.x,w=o.canonical.y;return new Hr([b/g,w/g,u],[(b+1)/g,(w+1)/g,h])}static applyTransform(o,u){const h=o.getCorners();for(let g=0;g<h.length;++g)Ct(h[g],h[g],u);return Hr.fromPoints(h)}static applyTransformFast(o,u){const h=[u[12],u[13],u[14]],g=[...h];for(let b=0;b<3;b++)for(let w=0;w<3;w++){const A=u[4*w+b],D=A*o.min[w],P=A*o.max[w];h[b]+=Math.min(D,P),g[b]+=Math.max(D,P)}return new Hr(h,g)}static projectAabbCorners(o,u){const h=o.getCorners();for(let g=0;g<h.length;++g)Ct(h[g],h[g],u);return h}constructor(o,u){this.min=o,this.max=u,this.center=Pe([],at([],this.min,this.max),.5)}quadrant(o){const u=[o%2==0,o<2],h=He(this.min),g=He(this.max);for(let b=0;b<u.length;b++)h[b]=u[b]?this.min[b]:this.center[b],g[b]=u[b]?this.center[b]:this.max[b];return g[2]=this.max[2],new Hr(h,g)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,u=this.max;return[[o[0],o[1],o[2]],[u[0],o[1],o[2]],[u[0],u[1],o[2]],[o[0],u[1],o[2]],[o[0],o[1],u[2]],[u[0],o[1],u[2]],[u[0],u[1],u[2]],[o[0],u[1],u[2]]]}intersects(o){return this.intersectsAabb(o.bounds)?_i(o,this.getCorners()):0}intersectsFlat(o){return this.intersectsAabb(o.bounds)?_i(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(o,u){return u||this.intersects(o)?cs(o,this.getCorners()):0}intersectsPreciseFlat(o,u){return u||this.intersectsFlat(o)?cs(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(o){for(let u=0;u<3;++u)if(this.min[u]>o.max[u]||o.min[u]>this.max[u])return!1;return!0}intersectsAabbXY(o){return!(this.min[0]>o.max[0]||o.min[0]>this.max[0]||this.min[1]>o.max[1]||o.min[1]>this.max[1])}encapsulate(o){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],o.min[u]),this.max[u]=Math.max(this.max[u],o.max[u])}encapsulatePoint(o){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],o[u]),this.max[u]=Math.max(this.max[u],o[u])}closestPoint(o){return[Math.max(Math.min(this.max[0],o[0]),this.min[0]),Math.max(Math.min(this.max[1],o[1]),this.min[1]),Math.max(Math.min(this.max[2],o[2]),this.min[2])]}}Kt(Hr,"Aabb");class ul{constructor(o,u){this.feature=o,this.metersToTile=u,this.index=0}get(){const o=this.feature.vertices[this.index],u=this.feature.vertexProps[this.index].dir,h=u[1],g=-u[0],b=(o.extent+1)*this.metersToTile;return[new Vt(Math.trunc(o.position[0]+h*b),Math.trunc(o.position[1]+g*b)),new Vt(Math.trunc(o.position[0]-h*b),Math.trunc(o.position[1]-g*b))]}next(){this.index++}valid(){return this.index<this.feature.vertices.length}}class $o{constructor(o,u,h,g,b,w){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this._tmpVec2=[Qi(),Qi(),Qi(),Qi(),Qi(),Qi(),Qi()],this.id=o,this.heightRange={min:h,max:h},this.safeArea=u,this.constantHeight=h,this.constantHeight==null&&(this.constantHeight!=null||g.length!==0)){this.vertices=g,this.edges=b,this.edges=this.edges.filter(A=>{return A.a<this.vertices.length&&A.b<this.vertices.length&&!((D=this.vertices[A.a].position)[0]===(P=this.vertices[A.b].position)[0]&&D[1]===P[1]);var D,P}),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const A of this.vertices)this.vertexProps.push({dir:Ri(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,A.height),this.heightRange.max=Math.max(this.heightRange.max,A.height);for(const A of this.edges){const D=this.vertices[A.a].position,P=this.vertices[A.b].position,B=uf(Qi(),P,D),U=Nu(B),$=zu(Qi(),B,1/U);this.edgeProps.push({vec:B,dir:$,len:U});const G=this.vertexProps[A.a].dir,Z=this.vertexProps[A.b].dir;is(G,G,$),is(Z,Z,$)}for(const A of this.vertexProps)A.dir[0]===0&&A.dir[1]===0||cf(A.dir,A.dir);this.tessellate(w)}}pointElevation(o){if(this.constantHeight!=null)return this.constantHeight;const u=this.getClosestEdge(o);if(u==null)return 0;const[h,g]=u;return Vn(this.vertices[this.edges[h].a].height,this.vertices[this.edges[h].b].height,g)}computeSlopeNormal(o,u){const h=this.getClosestEdge(o);if(!h)return Ee(0,0,1);const g=h[0],b=this.edges[g],w=this.edgeProps[g].vec,A=Ee(w[0],w[1],(this.vertices[b.b].height-this.vertices[b.a].height)*u),D=Ee(A[1],-A[0],0);ct(D,D,A);const P=Be(D);return P>0?Pe(D,D,1/P):Fe(D,0,0,1)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(o){if(this.edges.length===0)return;let u=0,h=Number.POSITIVE_INFINITY,g=0;const[b,w,A,D,P,B,U]=this._tmpVec2;zs(U,o.x,o.y);const $=new tr(U,null);for(let G=0;G<this.edges.length;G++){const Z=this.edges[G],se=this.edgeProps[G].dir;$.dir=se;const fe=this.vertices[Z.a].position,ue=this.vertices[Z.b].position,pe=$.intersectsPlane(fe,this.vertexProps[Z.a].dir,b),ve=$.intersectsPlane(ue,this.vertexProps[Z.b].dir,w);if(!pe||!ve)continue;uf(A,w,b),uf(D,U,b);const Se=mi(A,A),ke=Se>0?mi(D,A)/Se:0,Ie=ze(ke,0,1),Ve=Math.abs((ke-Ie)*this.edgeProps[G].len);uf(P,U,fe),zs(B,se[1],-se[0]);const qe=Ve+Math.abs(mi(P,B));qe<h&&(u=G,h=qe,g=Ie)}return[u,g]}tessellate(o){const u=De(),h=De(),g=De(),b=De();for(let w=this.edges.length-1;w>=0;--w){const A=this.edges[w].a,D=this.edges[w].b,{position:P,height:B,extent:U}=this.vertices[A],{position:$,height:G,extent:Z}=this.vertices[D],se=this.vertexProps[A].dir,fe=this.vertexProps[D].dir;if(Fe(u,P[0]/o,P[1]/o,B),Fe(h,$[0]/o,$[1]/o,G),Fe(g,se[1],-se[0],0),Pe(g,g,U),Fe(b,fe[1],-fe[0],0),Pe(b,b,Z),this.distSqLines(Ee(u[0]+.5*g[0],u[1]+.5*g[1],u[2]+.5*g[2]),Ee(h[0]-.5*b[0],h[1]-.5*b[1],h[2]-.5*b[2]),Ee(u[0]-.5*g[0],u[1]-.5*g[1],u[2]-.5*g[2]),Ee(h[0]+.5*b[0],h[1]+.5*b[1],h[2]+.5*b[2]))<=.0025000000000000005)continue;const ue=this.vertices.length,pe=is(Qi(),P,$);this.vertices.push({position:zu(pe,pe,.5),height:.5*(B+G),extent:.5*(U+Z)});const ve=is(Qi(),se,fe);this.vertexProps.push({dir:cf(ve,ve)}),this.edges.splice(w,1),this.edgeProps.splice(w,1),this.edges.push({a:A,b:ue}),this.edges.push({a:ue,b:D});const Se=uf(Qi(),this.vertices[ue].position,P),ke=Nu(Se),Ie={vec:Se,dir:zu(Qi(),Se,1/ke),len:ke};this.edgeProps.push(Ie),this.edgeProps.push(Ie)}}distSqLines(o,u,h,g){const b=yt(De(),u,o),w=yt(De(),g,h),A=yt(De(),o,h),D=Ye(b,b),P=Ye(b,w),B=Ye(b,A),U=Ye(w,w),$=Ye(w,A),G=D*U-P*P;if(G===0)return dn(mt(b,h,g,Ye(A,w)/Ye(w,w)),o);const Z=(D*$-P*B)/G;return dn(mt(b,o,u,(P*$-B*U)/G),mt(w,h,g,Z))}}class Zo{static parseFrom(o,u){const h=Kn.parse(o);if(!h)return[];let{vertices:g,features:b}=h;const w=1/qt(u);b.sort((B,U)=>B.id-U.id),g.sort((B,U)=>B.id-U.id||B.idx-U.idx),g=g.filter((B,U,$)=>U===$.findIndex(G=>G.id===B.id&&G.idx===B.idx));const A=new Array;let D=0;const P=g.length;for(const B of b){if(B.constantHeight){A.push(new $o(B.id,B.bounds,B.constantHeight));continue}for(;D!==P&&g[D].id<B.id;)D++;if(D===P||g[D].id!==B.id)continue;const U=new Array,$=new Array,G=D;for(;D!==P&&g[D].id===B.id;){const Z=g[D];if(U.push({position:Z.position,height:Z.height,extent:Z.extent}),D!==G&&g[D-1].idx===Z.idx-1){const se=D-G;$.push({a:se-1,b:se})}D++}A.push(new $o(B.id,B.bounds,void 0,U,$,w))}return A}static getElevationFeature(o,u){if(!u)return;const h=+o.properties[wr];return Number.isNaN(h)?void 0:u.find(g=>g.id===h)}}class Il{constructor(o,u){this.zScale=1,this.xOffset=0,this.yOffset=0,o.equals(u)||(this.zScale=Math.pow(2,u.z-o.z),this.xOffset=(o.x*this.zScale-u.x)*Jt,this.yOffset=(o.y*this.zScale-u.y)*Jt)}constantElevation(o,u){if(o.constantHeight!=null)return this.computeBiasedHeight(o.constantHeight,u)}pointElevation(o,u,h){const g=this.constantElevation(u,h);return g??(o.x=o.x*this.zScale+this.xOffset,o.y=o.y*this.zScale+this.yOffset,this.computeBiasedHeight(u.pointElevation(o),h))}computeBiasedHeight(o,u){return u<=0?o:o+u*ot(0,u,o>=0?o:Math.abs(.5*o))}}Kt($o,"ElevationFeature");class qs{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new Rf,this.indexArray=new Xa,this.segments=new Ii,this.programConfigurations=new H(o.layers,{zoom:o.zoom,lut:o.lut}),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.elevationMode=this.layers[0].layout.get("circle-elevation-reference"),this.hasElevation=!1,this.elevationMode!=="none"&&(this.elevatedLayoutVertexArray=new To),this.worldview=o.worldview,this.hasAppearances=null}updateFootprints(o,u){}updateAppearances(o,u,h,g){}populate(o,u,h,g){const b=this.layers[0],w=[];let A=null;b.type==="circle"&&(A=b.layout.get("circle-sort-key"));for(const{feature:P,id:B,index:U,sourceLayerIndex:$}of o){const G=this.layers[0]._featureFilter.needGeometry,Z=Qn(P,G);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),Z,h))continue;const se=A?A.evaluate(Z,{},h):void 0,fe={id:B,properties:P.properties,type:P.type,sourceLayerIndex:$,index:U,geometry:G?Z.geometry:Un(P,h,g),patterns:{},sortKey:se};w.push(fe)}A&&w.sort((P,B)=>P.sortKey-B.sortKey);let D=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new Vd,D=g.projection);for(const P of w){const{geometry:B,index:U,sourceLayerIndex:$}=P,G=o[U].feature;this.addFeature(P,B,U,u.availableImages,h,D,u.brightness,u.elevationFeatures),u.featureIndex.insert(G,B,U,$,this.index)}this.hasElevation||(this.elevatedLayoutVertexArray=void 0)}update(o,u,h,g,b,w,A){this.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A,this.worldview)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,vm.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,K0.members)),this.elevatedLayoutVertexArray&&(this.elevatedLayoutVertexBuffer=o.createVertexBuffer(this.elevatedLayoutVertexArray,nc.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy())}addFeature(o,u,h,g,b,w,A,D){let P;this.elevationMode!=="none"&&(P=Zo.getElevationFeature(o,D));for(const B of u)for(const U of B){const $=U.x,G=U.y;if($<0||$>=Jt||G<0||G>=Jt)continue;if(w){const fe=w.projectTilePoint($,G,b),ue=w.upVector(b,$,G);this.addGlobeExtVertex(fe,ue),this.addGlobeExtVertex(fe,ue),this.addGlobeExtVertex(fe,ue),this.addGlobeExtVertex(fe,ue)}const Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),se=Z.vertexLength;if(this.addCircleVertex($,G,-1,-1),this.addCircleVertex($,G,1,-1),this.addCircleVertex($,G,1,1),this.addCircleVertex($,G,-1,1),this.elevationMode!=="none"){const fe=P?P.pointElevation(new Vt($,G)):0;this.hasElevation=this.hasElevation||fe!==0;for(let ue=0;ue<4;ue++)this.elevatedLayoutVertexArray.emplaceBack(fe)}this.indexArray.emplaceBack(se,se+1,se+2),this.indexArray.emplaceBack(se,se+2,se+3),Z.vertexLength+=4,Z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,{},g,b,A,void 0,this.worldview)}addCircleVertex(o,u,h,g){this.layoutVertexArray.emplaceBack(2*o+(h+1)/2,2*u+(g+1)/2)}addGlobeExtVertex(o,u){this.globeExtVertexArray.emplaceBack(o.x,o.y,o.z,u[0]*16384,u[1]*16384,u[2]*16384)}}function $i(c,o){for(let u=0;u<c.length;u++)if(fl(o,c[u]))return!0;for(let u=0;u<o.length;u++)if(fl(c,o[u]))return!0;return!!no(c,o)}function ba(c,o,u){return!!fl(c,o)||!!rc(o,c,u)}function Si(c,o){if(c.length===1)return Kd(o,c[0]);for(let u=0;u<o.length;u++){const h=o[u];for(let g=0;g<h.length;g++)if(fl(c,h[g]))return!0}for(let u=0;u<c.length;u++)if(Kd(o,c[u]))return!0;for(let u=0;u<o.length;u++)if(no(c,o[u]))return!0;return!1}function Ia(c,o,u){if(c.length>1){if(no(c,o))return!0;for(let h=0;h<o.length;h++)if(rc(o[h],c,u))return!0}for(let h=0;h<c.length;h++)if(rc(c[h],o,u))return!0;return!1}function no(c,o){if(c.length===0||o.length===0)return!1;for(let u=0;u<c.length-1;u++){const h=c[u],g=c[u+1];for(let b=0;b<o.length-1;b++)if(Wi(h,g,o[b],o[b+1]))return!0}return!1}function Wi(c,o,u,h){return xi(c,u,h)!==xi(o,u,h)&&xi(c,o,u)!==xi(c,o,h)}function cl(c,o,u){return(c.x-u.x)*(o.y-u.y)-(c.y-u.y)*(o.x-u.x)}function wm(c,o,u,h){const g=cl(c,o,h),b=cl(c,o,u);if(Math.sign(g)===Math.sign(b))return;const w=cl(u,h,c),A=w+b-g;return Math.sign(w)!==Math.sign(A)?[w/(w-A),b/(b-g)]:void 0}function rc(c,o,u){const h=u*u;if(o.length===1)return c.distSqr(o[0])<h;for(let g=1;g<o.length;g++)if(Zd(c,o[g-1],o[g])<h)return!0;return!1}function Zd(c,o,u){const h=o.distSqr(u);if(h===0)return c.distSqr(o);const g=((c.x-o.x)*(u.x-o.x)+(c.y-o.y)*(u.y-o.y))/h;return c.distSqr(g<0?o:g>1?u:u.sub(o)._mult(g)._add(o))}function Kd(c,o){let u,h,g,b=!1;for(let w=0;w<c.length;w++){u=c[w];for(let A=0,D=u.length-1;A<u.length;D=A++)h=u[A],g=u[D],h.y>o.y!=g.y>o.y&&o.x<(g.x-h.x)*(o.y-h.y)/(g.y-h.y)+h.x&&(b=!b)}return b}function fl(c,o){let u=!1;for(let h=0,g=c.length-1;h<c.length;g=h++){const b=c[h],w=c[g];b.y>o.y!=w.y>o.y&&o.x<(w.x-b.x)*(o.y-b.y)/(w.y-b.y)+b.x&&(u=!u)}return u}function Xl(c,o,u,h,g){for(const w of c)if(o<=w.x&&u<=w.y&&h>=w.x&&g>=w.y)return!0;const b=[new Vt(o,u),new Vt(o,g),new Vt(h,g),new Vt(h,u)];if(c.length>2){for(const w of b)if(fl(c,w))return!0}for(let w=0;w<c.length-1;w++)if(ic(c[w],c[w+1],b))return!0;return!1}function ic(c,o,u){const h=u[0],g=u[2];if(c.x<h.x&&o.x<h.x||c.x>g.x&&o.x>g.x||c.y<h.y&&o.y<h.y||c.y>g.y&&o.y>g.y)return!1;const b=xi(c,o,u[0]);return b!==xi(c,o,u[1])||b!==xi(c,o,u[2])||b!==xi(c,o,u[3])}function Pl(c,o,u,h,g,b){let w=o.y-c.y,A=c.x-o.x;if(b=b||0){const D=w*w+A*A;if(D===0)return!0;const P=Math.sqrt(D);w/=P,A/=P}return!((u.x-c.x)*w+(u.y-c.y)*A-b<0||(h.x-c.x)*w+(h.y-c.y)*A-b<0||(g.x-c.x)*w+(g.y-c.y)*A-b<0)}function Ai(c,o,u,h,g,b,w){return!(Pl(c,o,h,g,b,w)||Pl(o,u,h,g,b,w)||Pl(u,c,h,g,b,w)||Pl(h,g,c,o,u,w)||Pl(g,b,c,o,u,w)||Pl(b,h,c,o,u,w))}function Nf(c,o,u){const h=o.paint.get(c).value;return h.kind==="constant"?h.value:u.programConfigurations.get(o.id).getMaxValue(c)}function fv(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function vT(c,o,u,h,g){if(!o[0]&&!o[1])return c;const b=Vt.convert(o)._mult(g);u==="viewport"&&b._rotate(-h);const w=[];for(let A=0;A<c.length;A++)w.push(c[A].sub(b));return w}function $O(c,o,u,h){const g=Vt.convert(c)._mult(h);return o==="viewport"&&g._rotate(-u),g}let VO,qO;function eb(c,o,u){var h=2*Math.PI*6378137/256/Math.pow(2,u);return[c*h-2*Math.PI*6378137/2,o*h-2*Math.PI*6378137/2]}Kt(qs,"CircleBucket",{omit:["layers"]});class Hc{constructor(o,u,h){this.z=o,this.x=u,this.y=h,this.key=Sm(0,o,o,u,h)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}isChildOf(o){const u=this.z-o.z;return o.z===0||o.z<this.z&&o.x===this.x>>u&&o.y===this.y>>u}url(o,u){const h=(function(b,w,A){var D=eb(256*b,256*(w=Math.pow(2,A)-w-1),A),P=eb(256*(b+1),256*(w+1),A);return D[0]+","+D[1]+","+P[0]+","+P[1]})(this.x,this.y,this.z),g=(function(b,w,A){let D,P="";for(let B=b;B>0;B--)D=1<<B-1,P+=(w&D?1:0)+(A&D?2:0);return P})(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class g1{constructor(o,u){this.wrap=o,this.canonical=u,this.key=Sm(o,u.z,u.z,u.x,u.y)}}class Ko{constructor(o,u,h,g,b){this.overscaledZ=o,this.wrap=u,this.canonical=new Hc(h,+g,+b),this.key=u===0&&o===h?this.canonical.key:Sm(u,o,h,g,b)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const u=this.canonical.z-o;return o>this.canonical.z?new Ko(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ko(o,this.wrap,o,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(o,u=!0){if(this.overscaledZ===o&&u)return this.key;if(o>this.canonical.z)return Sm(this.wrap*+u,o,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-o;return Sm(this.wrap*+u,o,o,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const u=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.z<this.canonical.z&&o.canonical.x===this.canonical.x>>u&&o.canonical.y===this.canonical.y>>u}children(o){if(this.overscaledZ>=o)return[new Ko(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Ko(u,this.wrap,u,h,g),new Ko(u,this.wrap,u,h+1,g),new Ko(u,this.wrap,u,h,g+1),new Ko(u,this.wrap,u,h+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Ko(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Ko(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new g1(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Sm(c,o,u,h,g){const b=1<<Math.min(u,22);let w=b*(g%b)+h%b;return c&&u<22&&(w+=b*b*((c<0?-2*c-1:2*c)%(1<<2*(22-u)))),16*(32*w+u)+(o-u)}const Tm=[c=>{let o=c.canonical.x-1,u=c.wrap;return o<0&&(o=(1<<c.canonical.z)-1,u--),new Ko(c.overscaledZ,u,c.canonical.z,o,c.canonical.y)},c=>{let o=c.canonical.x+1,u=c.wrap;return o===1<<c.canonical.z&&(o=0,u++),new Ko(c.overscaledZ,u,c.canonical.z,o,c.canonical.y)},c=>new Ko(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,(c.canonical.y===0?1<<c.canonical.z:c.canonical.y)-1),c=>new Ko(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y===(1<<c.canonical.z)-1?0:c.canonical.y+1)];Kt(Hc,"CanonicalTileID"),Kt(Ko,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Dh=gr([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Em}=Dh,Nk=gr([{name:"a_pos_3",components:3,type:"Int16"}]);var bT=gr([{name:"a_pos",type:"Int16",components:2}]);function tb(c){return c*de/Ge}const HO=[new Hr([Ce,Ce,Ce],[Ae,Ae,Ae]),new Hr([Ce,Ce,Ce],[0,0,Ae]),new Hr([0,Ce,Ce],[Ae,0,Ae]),new Hr([Ce,0,Ce],[0,Ae,Ae]),new Hr([0,0,Ce],[Ae,Ae,Ae])];function xT(c,o,u,h=!0){const g=Pe([],c._camera.position,c.worldSize),b=[o,u,1,1];hi(b,b,c.pixelMatrixInverse),Tr(b,b,1/b[3]);const w=xe([],or([],b,g)),A=c.globeMatrix,D=[A[12],A[13],A[14]],P=or([],D,g),B=Be(P),U=xe([],P),$=c.worldSize/(2*Math.PI),G=Ye(U,w),Z=Math.asin($/B);if(Z<Math.acos(G)){if(!h)return null;const Ze=[],rt=[];Pe(Ze,w,B/G),xe(rt,or(rt,Ze,P)),xe(w,at(w,P,Pe(w,rt,Math.tan(Z)*B)))}const se=[];new yi(g,w).closestPointOnSphere(D,$,se);const fe=xe([],ji(A,0)),ue=xe([],ji(A,1)),pe=xe([],ji(A,2)),ve=Ye(fe,se),Se=Ye(ue,se),ke=Ye(pe,se),Ie=ut(Math.asin(-Se/$));let Ve=ut(Math.atan2(ve,ke));Ve=c.center.lng+(function(Ze,rt){const Et=(rt-Ze+180)%360-180;return Et<-180?Et+360:Et})(c.center.lng,Ve);const qe=st(Ve),Ue=ze(dt(Ie),0,1);return new tn(qe,Ue)}class Fk{constructor(o,u,h){this.a=or([],o,h),this.b=or([],u,h),this.center=h;const g=xe([],this.a),b=xe([],this.b);this.angle=Math.acos(Ye(g,b))}}function nb(c,o){if(c.angle===0)return null;let u;return u=c.a[o]===0?1/c.angle*.5*Math.PI:1/c.angle*Math.atan(c.b[o]/c.a[o]/Math.sin(c.angle)-1/Math.tan(c.angle)),u<0||u>1?null:(function(h,g,b,w){const A=Math.sin(b);return h*(Math.sin((1-w)*b)/A)+g*(Math.sin(w*b)/A)})(c.a[o],c.b[o],c.angle,ze(u,0,1))+c.center[o]}function Ff(c){if(c.z<=1)return HO[c.z+2*c.y+c.x];const o=wT(hv(c));return Hr.fromPoints(o)}function Ih(c,o,u){return Pe(c,c,1-u),jt(c,c,o,u)}function GO(c,o,u){for(const h of c)Ct(h,h,o),Pe(h,h,u)}function y1(c,o,u,h){const g=o/c.worldSize,b=c.globeMatrix;if(u.z<=1){const Ue=Ff(u).getCorners();return GO(Ue,b,g),Hr.fromPoints(Ue)}const w=hv(u,h),A=wT(w,de+tb(c._tileCoverLift));GO(A,b,g);const D=Number.MAX_VALUE,P=[-D,-D,-D],B=[D,D,D];if(w.contains(c.center)){for(const rt of A)Ke(B,B,rt),it(P,P,rt);P[2]=0;const Ue=c.point,Ze=[Ue.x*g,Ue.y*g,0];return Ke(B,B,Ze),it(P,P,Ze),new Hr(B,P)}if(c._tileCoverLift>0){for(const Ue of A)Ke(B,B,Ue),it(P,P,Ue);return new Hr(B,P)}const U=[b[12]*g,b[13]*g,b[14]*g],$=w.getCenter(),G=ze(c.center.lat,-85.051129,et),Z=ze($.lat,-85.051129,et),se=st(c.center.lng),fe=dt(G);let ue=se-st($.lng);const pe=fe-dt(Z);ue>.5?ue-=1:ue<-.5&&(ue+=1);let ve=0;Math.abs(ue)>Math.abs(pe)?ve=ue>=0?1:3:(ve=pe>=0?0:2,jt(U,U,[b[4]*g,b[5]*g,b[6]*g],-Math.sin(Ar(pe>=0?w.getSouth():w.getNorth()))*de));const Se=A[ve],ke=A[(ve+1)%4],Ie=new Fk(Se,ke,U),Ve=[nb(Ie,0)||Se[0],nb(Ie,1)||Se[1],nb(Ie,2)||Se[2]],qe=Qd(c.zoom);if(qe>0){const Ue=(function({x:rt,y:Et,z:xt},Tt,kt,Pt,Rt){const vt=1/(1<<xt);let zt=rt*vt,Mt=zt+vt,Nt=Et*vt,Lt=Nt+vt,fn=0;const pn=(zt+Mt)/2-Pt;return pn>.5?fn=-1:pn<-.5&&(fn=1),zt=((zt+fn)*Tt-(Pt*=Tt))*kt+Pt,Mt=((Mt+fn)*Tt-Pt)*kt+Pt,Nt=(Nt*Tt-(Rt*=Tt))*kt+Rt,Lt=(Lt*Tt-Rt)*kt+Rt,[[zt,Lt,0],[Mt,Lt,0],[Mt,Nt,0],[zt,Nt,0]]})(u,o,c._pixelsPerMercatorPixel,se,fe);for(let rt=0;rt<A.length;rt++)Ih(A[rt],Ue[rt],qe);const Ze=at([],Ue[ve],Ue[(ve+1)%4]);Pe(Ze,Ze,.5),Ih(Ve,Ze,qe)}for(const Ue of A)Ke(B,B,Ue),it(P,P,Ue);return B[2]=Math.min(Se[2],ke[2]),Ke(B,B,Ve),it(P,P,Ve),new Hr(B,P)}function hv({x:c,y:o,z:u},h=!1){const g=1/(1<<u),b=new Re(wt(c*g),o===(1<<u)-1&&h?-90:It((o+1)*g)),w=new Re(wt((c+1)*g),o===0&&h?90:It(o*g));return new Je(b,w)}function wT(c,o=de){const u=Ar(c.getNorth()),h=Ar(c.getSouth()),g=Math.cos(u),b=Math.cos(h),w=Math.sin(u),A=Math.sin(h),D=c.getWest(),P=c.getEast();return[We(b,A,D,o),We(b,A,P,o),We(g,w,P,o),We(g,w,D,o)]}function rb(c,o,u,h){const g=1<<u.z,b=(c/Jt+u.x)/g;return $e(It((o/Jt+u.y)/g),wt(b),h)}function Am({min:c,max:o}){return 16383/Math.max(o[0]-c[0],o[1]-c[1],o[2]-c[2])}const YO=new Float64Array(16);function ib(c){const o=Am(c),u=X(YO,[o,o,o]);return J(u,u,Ut([],c.min))}function Oi(c){const o=(function(h,g){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=g[0],h[13]=g[1],h[14]=g[2],h[15]=1,h})(YO,c.min),u=1/Am(c);return ie(o,o,[u,u,u])}function ab(c){const o=Jt/(2*Math.PI);return c/(2*Math.PI)/o}function ob(c,o){return Jt/(512*Math.pow(2,c))*Am(Ff(o))}function _1(c,o,u,h,g){const b=ab(u),w=[c,o,-u/(2*Math.PI)],A=k(new Float64Array(16));return J(A,A,w),ie(A,A,[b,b,b]),Q(A,A,Ar(-g)),W(A,A,Ar(-h)),A}function Qd(c){return ot(5,6,c)}function v1(c,o){const u=$e(o.lat,o.lng),h=(function(Z){const se=$e(Z._center.lat,Z._center.lng);let fe=ct([],Ee(0,1,0),se);const ue=ae([],-Z.angle,se);fe=Ct(fe,fe,ue),ae(ue,-Z._pitch,fe);const pe=xe([],se);return Pe(pe,pe,tb(Z.cameraToCenterDistance/Z.pixelsPerMeter)),Ct(pe,pe,ue),at([],se,pe)})(c);return w=(g=yt([],h,u))[0],A=g[1],D=g[2],P=(b=u)[0],B=b[1],U=b[2],G=($=Math.sqrt((w*w+A*A+D*D)*(P*P+B*B+U*U)))&&Ye(g,b)/$,Math.acos(Math.min(Math.max(G,-1),1));var g,b,w,A,D,P,B,U,$,G}function fy(c,o){return v1(c,o)>Math.PI/2*1.01}const sb=Ar(85),Bk=Math.cos(sb),WO=Math.sin(sb),jk=N(),XO=c=>{const o=[];return c.paint.get("circle-pitch-alignment")==="map"&&o.push("PITCH_WITH_MAP"),c.paint.get("circle-pitch-scale")==="map"&&o.push("SCALE_WITH_MAP"),o};function ST(c,o,u,h,g,b,w,A,D){if(b&&c.queryGeometry.isAboveHorizon)return!1;b&&(D*=c.pixelToTileUnitsFactor);const P=c.tileID.canonical,B=u.projection.upVectorScale(P,u.center.lat,u.worldSize).metersToTile;for(const U of o)for(const $ of U){const G=$.add(A),Z=g&&u.elevation?u.elevation.exaggeration()*g.getElevationAt(G.x,G.y,!0):0,se=u.projection.projectTilePoint(G.x,G.y,P);if(Z>0){const ve=u.projection.upVector(P,G.x,G.y);se.x+=ve[0]*B*Z,se.y+=ve[1]*B*Z,se.z+=ve[2]*B*Z}const fe=b?G:ZO(se.x,se.y,se.z,h),ue=b?c.tilespaceRays.map(ve=>hl(ve,Z)):c.queryGeometry.screenGeometry,pe=hi([],[se.x,se.y,se.z,1],h);if(!w&&b?D*=pe[3]/u.cameraToCenterDistance:w&&!b&&(D*=u.cameraToCenterDistance/pe[3]),b){const ve=It(($.y/Jt+P.y)/(1<<P.z));D/=u.projection.pixelsPerMeter(ve,1)/ft(1,ve)}if(ba(ue,fe,D))return!0}return!1}function ZO(c,o,u,h){const g=hi([],[c,o,u,1],h);return new Vt(g[0]/g[3],g[1]/g[3])}const Pa=Ee(0,0,0),TT=Ee(0,0,1);function hl(c,o){const u=De();return Pa[2]=o,c.intersectsPlane(Pa,TT,u),new Vt(u[0],u[1])}class KO extends qs{}let ET,QO,b1,x1;function lb(c,{width:o,height:u},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*u*h)throw new RangeError("mismatched image size")}else g=new Uint8Array(o*u*h);return c.width=o,c.height=u,c.data=g,c}function AT(c,o,u){const{width:h,height:g}=o;h===c.width&&g===c.height||(w1(c,o,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,h),height:Math.min(c.height,g)},u,null),c.width=h,c.height=g,c.data=o.data)}function w1(c,o,u,h,g,b,w,A){if(g.width===0||g.height===0)return o;if(g.width>c.width||g.height>c.height||u.x>c.width-g.width||u.y>c.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||h.x>o.width-g.width||h.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const D=c.data,P=o.data,B=b===4&&A;for(let U=0;U<g.height;U++){const $=((u.y+U)*c.width+u.x)*b,G=((h.y+U)*o.width+h.x)*b;if(B)for(let Z=0;Z<g.width;Z++){const se=$+Z*b+3,fe=G+Z*b;P[fe+0]=255,P[fe+1]=255,P[fe+2]=255,P[fe+3]=D[se]}else if(w)for(let Z=0;Z<g.width;Z++){const se=$+Z*b,fe=G+Z*b,ue=new Qr(D[se+0]/255,D[se+1]/255,D[se+2]/255,D[se+3]).toNonPremultipliedRenderColor(w).toArray();P[fe+0]=ue[0],P[fe+1]=ue[1],P[fe+2]=ue[2],P[fe+3]=ue[3]}else for(let Z=0;Z<g.width*b;Z++)P[G+Z]=D[$+Z]}return o}Kt(KO,"HeatmapBucket",{omit:["layers"]});class Ph{constructor(o,u){lb(this,o,1,u)}resize(o){AT(this,new Ph(o),1)}clone(){return new Ph({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,h,g,b){w1(o,u,h,g,b,1,null)}}class Vo{constructor(o,u){lb(this,o,4,u)}resize(o){AT(this,new Vo(o),4)}replace(o,u){u?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Vo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,h,g,b,w,A){w1(o,u,h,g,b,4,w,A)}}class JO{constructor(o,u){this.width=o.width,this.height=o.height,this.data=u instanceof Uint8Array?new Float32Array(u.buffer):u}}function dv(c){const o={},u=c.resolution||256,h=c.clips?c.clips.length:1,g=c.image||new Vo({width:u,height:h}),b=(w,A,D)=>{o[c.evaluationKey]=D;const P=c.expression.evaluate(o),B=P?P.toNonPremultipliedRenderColor(null):null;B&&(g.data[w+A+0]=Math.floor(255*B.r),g.data[w+A+1]=Math.floor(255*B.g),g.data[w+A+2]=Math.floor(255*B.b),g.data[w+A+3]=Math.floor(255*B.a))};if(c.clips)for(let w=0,A=0;w<h;++w,A+=4*u)for(let D=0,P=0;D<u;D++,P+=4){const B=D/(u-1),{start:U,end:$}=c.clips[w];b(A,P,U*(1-B)+$*B)}else for(let w=0,A=0;w<u;w++,A+=4)b(0,A,w/(u-1));return g}Kt(Ph,"AlphaImage"),Kt(Vo,"RGBAImage");const Uk=gr([{name:"a_pos",components:2,type:"Int16"}],4),eC=gr([{name:"a_road_z_offset",components:1,type:"Float32"}],4),$k=gr([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),Vk=gr([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function ac(c,o,u=2){const h=o&&o.length,g=h?o[0]*u:c.length;let b=OT(c,0,g,u,!0);const w=[];if(!b||b.next===b.prev)return w;let A,D,P;if(h&&(b=(function(B,U,$,G){const Z=[];for(let se=0,fe=U.length;se<fe;se++){const ue=OT(B,U[se]*G,se<fe-1?U[se+1]*G:B.length,G,!1);ue===ue.next&&(ue.steiner=!0),Z.push(nC(ue))}Z.sort(MT);for(let se=0;se<Z.length;se++)$=Gk(Z[se],$);return $})(c,o,b,u)),c.length>80*u){A=c[0],D=c[1];let B=A,U=D;for(let $=u;$<g;$+=u){const G=c[$],Z=c[$+1];G<A&&(A=G),Z<D&&(D=Z),G>B&&(B=G),Z>U&&(U=Z)}P=Math.max(B-A,U-D),P=P!==0?32767/P:0}return hy(b,w,u,A,D,P,0),w}function OT(c,o,u,h,g){let b;if(g===(function(w,A,D,P){let B=0;for(let U=A,$=D-P;U<D;U+=P)B+=(w[$]-w[U])*(w[U+1]+w[$+1]),$=U;return B})(c,o,u,h)>0)for(let w=o;w<u;w+=h)b=IT(w/h|0,c[w],c[w+1],b);else for(let w=u-h;w>=o;w-=h)b=IT(w/h|0,c[w],c[w+1],b);return b&&dy(b,b.next)&&(db(b),b=b.next),b}function Om(c,o){if(!c)return c;o||(o=c);let u,h=c;do if(u=!1,h.steiner||!dy(h,h.next)&&Xi(h.prev,h,h.next)!==0)h=h.next;else{if(db(h),h=o=h.prev,h===h.next)break;u=!0}while(u||h!==o);return o}function hy(c,o,u,h,g,b,w){if(!c)return;!w&&b&&(function(D,P,B,U){let $=D;do $.z===0&&($.z=ub($.x,$.y,P,B,U)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next;while($!==D);$.prevZ.nextZ=null,$.prevZ=null,(function(G){let Z,se=1;do{let fe,ue=G;G=null;let pe=null;for(Z=0;ue;){Z++;let ve=ue,Se=0;for(let Ie=0;Ie<se&&(Se++,ve=ve.nextZ,ve);Ie++);let ke=se;for(;Se>0||ke>0&&ve;)Se!==0&&(ke===0||!ve||ue.z<=ve.z)?(fe=ue,ue=ue.nextZ,Se--):(fe=ve,ve=ve.nextZ,ke--),pe?pe.nextZ=fe:G=fe,fe.prevZ=pe,pe=fe;ue=ve}pe.nextZ=null,se*=2}while(Z>1)})($)})(c,h,g,b);let A=c;for(;c.prev!==c.next;){const D=c.prev,P=c.next;if(b?Hk(c,h,g,b):qk(c))o.push(D.i,c.i,P.i),db(c),c=P.next,A=P.next;else if((c=P)===A){w?w===1?hy(c=tC(Om(c),o),o,u,h,g,b,2):w===2&&CT(c,o,u,h,g,b):hy(Om(c),o,u,h,g,b,1);break}}}function qk(c){const o=c.prev,u=c,h=c.next;if(Xi(o,u,h)>=0)return!1;const g=o.x,b=u.x,w=h.x,A=o.y,D=u.y,P=h.y,B=Math.min(g,b,w),U=Math.min(A,D,P),$=Math.max(g,b,w),G=Math.max(A,D,P);let Z=h.next;for(;Z!==o;){if(Z.x>=B&&Z.x<=$&&Z.y>=U&&Z.y<=G&&pv(g,A,b,D,w,P,Z.x,Z.y)&&Xi(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function Hk(c,o,u,h){const g=c.prev,b=c,w=c.next;if(Xi(g,b,w)>=0)return!1;const A=g.x,D=b.x,P=w.x,B=g.y,U=b.y,$=w.y,G=Math.min(A,D,P),Z=Math.min(B,U,$),se=Math.max(A,D,P),fe=Math.max(B,U,$),ue=ub(G,Z,o,u,h),pe=ub(se,fe,o,u,h);let ve=c.prevZ,Se=c.nextZ;for(;ve&&ve.z>=ue&&Se&&Se.z<=pe;){if(ve.x>=G&&ve.x<=se&&ve.y>=Z&&ve.y<=fe&&ve!==g&&ve!==w&&pv(A,B,D,U,P,$,ve.x,ve.y)&&Xi(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,Se.x>=G&&Se.x<=se&&Se.y>=Z&&Se.y<=fe&&Se!==g&&Se!==w&&pv(A,B,D,U,P,$,Se.x,Se.y)&&Xi(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;ve&&ve.z>=ue;){if(ve.x>=G&&ve.x<=se&&ve.y>=Z&&ve.y<=fe&&ve!==g&&ve!==w&&pv(A,B,D,U,P,$,ve.x,ve.y)&&Xi(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;Se&&Se.z<=pe;){if(Se.x>=G&&Se.x<=se&&Se.y>=Z&&Se.y<=fe&&Se!==g&&Se!==w&&pv(A,B,D,U,P,$,Se.x,Se.y)&&Xi(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function tC(c,o){let u=c;do{const h=u.prev,g=u.next.next;!dy(h,g)&&fb(h,u,u.next,g)&&hb(h,g)&&hb(g,h)&&(o.push(h.i,u.i,g.i),db(u),db(u.next),u=c=g),u=u.next}while(u!==c);return Om(u)}function CT(c,o,u,h,g,b){let w=c;do{let A=w.next.next;for(;A!==w.prev;){if(w.i!==A.i&&cb(w,A)){let D=py(w,A);return w=Om(w,w.next),D=Om(D,D.next),hy(w,o,u,h,g,b,0),void hy(D,o,u,h,g,b,0)}A=A.next}w=w.next}while(w!==c)}function MT(c,o){let u=c.x-o.x;return u===0&&(u=c.y-o.y,u===0)&&(u=(c.next.y-c.y)/(c.next.x-c.x)-(o.next.y-o.y)/(o.next.x-o.x)),u}function Gk(c,o){const u=(function(g,b){let w=b;const A=g.x,D=g.y;let P,B=-1/0;if(dy(g,w))return w;do{if(dy(g,w.next))return w.next;if(D<=w.y&&D>=w.next.y&&w.next.y!==w.y){const se=w.x+(D-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(se<=A&&se>B&&(B=se,P=w.x<w.next.x?w:w.next,se===A))return P}w=w.next}while(w!==b);if(!P)return null;const U=P,$=P.x,G=P.y;let Z=1/0;w=P;do{if(A>=w.x&&w.x>=$&&A!==w.x&&DT(D<G?A:B,D,$,G,D<G?B:A,D,w.x,w.y)){const se=Math.abs(D-w.y)/(A-w.x);hb(w,g)&&(se<Z||se===Z&&(w.x>P.x||w.x===P.x&&Gc(P,w)))&&(P=w,Z=se)}w=w.next}while(w!==U);return P})(c,o);if(!u)return o;const h=py(u,c);return Om(h,h.next),Om(u,u.next)}function Gc(c,o){return Xi(c.prev,c,o.prev)<0&&Xi(o.next,c,c.next)<0}function ub(c,o,u,h,g){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-u)*g|0)|c<<8))|c<<4))|c<<2))|c<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-h)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function nC(c){let o=c,u=c;do(o.x<u.x||o.x===u.x&&o.y<u.y)&&(u=o),o=o.next;while(o!==c);return u}function DT(c,o,u,h,g,b,w,A){return(g-w)*(o-A)>=(c-w)*(b-A)&&(c-w)*(h-A)>=(u-w)*(o-A)&&(u-w)*(b-A)>=(g-w)*(h-A)}function pv(c,o,u,h,g,b,w,A){return!(c===w&&o===A)&&DT(c,o,u,h,g,b,w,A)}function cb(c,o){return c.next.i!==o.i&&c.prev.i!==o.i&&!(function(u,h){let g=u;do{if(g.i!==u.i&&g.next.i!==u.i&&g.i!==h.i&&g.next.i!==h.i&&fb(g,g.next,u,h))return!0;g=g.next}while(g!==u);return!1})(c,o)&&(hb(c,o)&&hb(o,c)&&(function(u,h){let g=u,b=!1;const w=(u.x+h.x)/2,A=(u.y+h.y)/2;do g.y>A!=g.next.y>A&&g.next.y!==g.y&&w<(g.next.x-g.x)*(A-g.y)/(g.next.y-g.y)+g.x&&(b=!b),g=g.next;while(g!==u);return b})(c,o)&&(Xi(c.prev,c,o.prev)||Xi(c,o.prev,o))||dy(c,o)&&Xi(c.prev,c,c.next)>0&&Xi(o.prev,o,o.next)>0)}function Xi(c,o,u){return(o.y-c.y)*(u.x-o.x)-(o.x-c.x)*(u.y-o.y)}function dy(c,o){return c.x===o.x&&c.y===o.y}function fb(c,o,u,h){const g=S1(Xi(c,o,u)),b=S1(Xi(c,o,h)),w=S1(Xi(u,h,c)),A=S1(Xi(u,h,o));return g!==b&&w!==A||!(g!==0||!Yc(c,u,o))||!(b!==0||!Yc(c,h,o))||!(w!==0||!Yc(u,c,h))||!(A!==0||!Yc(u,o,h))}function Yc(c,o,u){return o.x<=Math.max(c.x,u.x)&&o.x>=Math.min(c.x,u.x)&&o.y<=Math.max(c.y,u.y)&&o.y>=Math.min(c.y,u.y)}function S1(c){return c>0?1:c<0?-1:0}function hb(c,o){return Xi(c.prev,c,c.next)<0?Xi(c,o,c.next)>=0&&Xi(c,c.prev,o)>=0:Xi(c,o,c.prev)<0||Xi(c,c.next,o)<0}function py(c,o){const u=PT(c.i,c.x,c.y),h=PT(o.i,o.x,o.y),g=c.next,b=o.prev;return c.next=o,o.prev=c,u.next=g,g.prev=u,h.next=u,u.prev=h,b.next=h,h.prev=b,h}function IT(c,o,u,h){const g=PT(c,o,u);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function db(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function PT(c,o,u){return{i:c,x:o,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function pb(c,o){const u=c.length;if(u<=1)return[c];const h=[];let g,b;for(let w=0;w<u;w++){const A=oa(c[w]);A!==0&&(c[w].area=Math.abs(A),b===void 0&&(b=A<0),b===A<0?(g&&h.push(g),g=[c[w]]):g.push(c[w]))}if(g&&h.push(g),o>1)for(let w=0;w<h.length;w++)h[w].length<=o||(Eg(h[w],o,1,h[w].length-1,Yk),h[w]=h[w].slice(0,o));return h}function Yk(c,o){return o.area-c.area}function rC(c,o,u=1){if(!c)return null;const h=typeof c=="string"?nl.from(c).getPrimary():c.getPrimary(),g=typeof c=="string"?null:c.getSecondary();for(const b of[h,g]){if(!b)continue;const w=b.id.toString();o.has(w)||o.set(w,[]),b.scaleSelf(u),o.get(w).push(b)}return{primary:h.toString(),secondary:g?g.toString():null}}function RT(c,o,u,h){const g=h.patternDependencies;let b=!1;for(const w of o){const A=w.paint.get(`${c}-pattern`);A.isConstant()||(b=!0),rC(A.constantOr(null),g,u)&&(b=!0)}return b}function kT(c,o,u,h,g,b){const w=b.patternDependencies;for(const A of o){const D=A.paint.get(`${c}-pattern`).value;if(D.kind!=="constant"){let P=D.evaluate({zoom:h},u,{},b.availableImages);P=P&&P.name?P.name:P;const B=rC(P,w,g);if(!B)continue;const{primary:U,secondary:$}=B;U&&(u.patterns[A.id]=[U,$].filter(Boolean))}}return u}class Rh{constructor(){this.portals=[]}static isOnBorder(o,u){return o<=0&&u<=0||o>=Jt&&u>=Jt}static evaluate(o){if(o.length===0)return new Rh;let u=[];for(const D of o)u.push(...D.portals);if(u.length===0)return new Rh;for(const D of u){const P=D.va,B=D.vb;(Rh.isOnBorder(P.x,B.x)||Rh.isOnBorder(P.y,B.y))&&(D.type="border")}const h=u.filter(D=>D.type!=="unevaluated"),g=u.filter(D=>D.type==="unevaluated");if(g.length===0)return new Rh;g.sort((D,P)=>D.hash===P.hash?D.isTunnel===P.isTunnel?0:D.isTunnel?-1:1:D.hash<P.hash?1:-1),u=h.concat(g);let b=h.length,w=b,A=b;do if(w++,w===u.length||u[b].hash!==u[w].hash){if(w-b===2){A<b&&(u[A]=u[b],u[b]=null);const D=u[A],P=u[w-1];D.type=D.isTunnel!==P.isTunnel?"tunnel":"polygon",D.connection={a:D.connection.a,b:P.connection.a},A++}b=w}while(b!==u.length);return u.splice(A),u.sort((D,P)=>D.hash<P.hash?1:-1),{portals:u}}}Kt(Rh,"ElevationPortalGraph");class mv{constructor(o,u,h){this.outPositions=o,this.outNormals=u,this.outIndices=h,this.vertexLookup=new Map}addVertex(o,u,h){let g=o[2];h!=null&&(g*=h);const b=`${o[0]},${o[1]},${o[2]},${u[0]},${u[1]},${u[2]}`,w=this.vertexLookup.get(b);if(w!=null)return w;const A=this.outPositions.length;this.vertexLookup.set(b,A);const D=Math.trunc(16384*u[0]),P=Math.trunc(16384*u[1]),B=Math.trunc(16384*u[2]);return this.outPositions.emplaceBack(o[0],o[1],g),this.outNormals.emplaceBack(D,P,B),A}addTriangle(o,u,h){this.outIndices.emplaceBack(o,u,h)}addTriangles(o,u,h){if(o.length===0)return;const g=h.length===1,b=De(),w=De();for(let A=0;A<o.length;A+=3){const D=u[o[A+0]],P=u[o[A+1]],B=u[o[A+2]],U=g?h[0]:h[o[A+1]],$=g?h[0]:h[o[A+2]];Fe(b,D.x,D.y,g?h[0]:h[o[A+0]]);const G=this.addVertex(b,w);Fe(b,P.x,P.y,U);const Z=this.addVertex(b,w);Fe(b,B.x,B.y,$);const se=this.addVertex(b,w);this.outIndices.emplaceBack(G,Z,se)}}addQuad(o,u,h,g,b,w){const A=this.addVertex(o,b,w),D=this.addVertex(u,b,w),P=this.addVertex(h,b,w),B=this.addVertex(g,b,w);this.addTriangle(A,D,P),this.addTriangle(P,B,A)}getVertexCount(){return this.outPositions.length}clearVertexLookup(){this.vertexLookup.clear()}}class Ds{constructor(o,u,h,g){this.unevaluatedPortals=new Rh,this.bridgeFeatureSections=[],this.tunnelFeatureSections=[],this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new hm,this.vertexNormals=new iy,this.indexArray=new Xa,this.tileToMeters=qt(o),this.bridgeProgramConfigurations=new H(u,{zoom:h,lut:g},b=>b!=="fill-tunnel-structure-color"),this.tunnelProgramConfigurations=new H(u,{zoom:h,lut:g},b=>b!=="fill-bridge-guard-rail-color")}addVertices(o,u){const h=this.unevalVertices.length;for(let g=0;g<o.length;g++)this.unevalVertices.push(o[g]),this.unevalHeights.push(u[g]);return h}addTriangles(o,u,h){const g=h?this.unevalTunnelTriangles:this.unevalTriangles;for(const b of o)g.push(b+u)}addRenderableRing(o,u,h,g,b,w){const A=[new Vt(b.min.x,b.min.y),new Vt(b.max.x,b.min.y),new Vt(b.max.x,b.max.y),new Vt(b.min.x,b.max.y)];for(let D=0;D<h-1;D++){const P=u+D,B=P+1,U=this.unevalVertices[P],$=this.unevalVertices[B];if(!(U.x>=b.min.x&&U.x<=b.max.x&&U.y>=b.min.y&&U.y<=b.max.y||$.x>=b.min.x&&$.x<=b.max.x&&$.y>=b.min.y&&$.y<=b.max.y||ic(U,$,A))||this.isOnBorder(U.x,$.x)||this.isOnBorder(U.y,$.y))continue;const G=Ds.computeEdgeHash(this.unevalVertices[P],this.unevalVertices[B]);let Z,se=this.vertexHashLookup.get(Ds.computePosHash(U));se!=null?Z=se.next:(se=this.vertexHashLookup.get(Ds.computePosHash($)),Z=se!=null?se.prev:G),this.unevalEdges.push({polygonIdx:o,a:P,b:B,hash:G,portalHash:Z,isTunnel:g,type:"unevaluated",featureInfo:w})}}addPortalCandidates(o,u,h,g,b){if(u.length!==0){this.vertexHashLookup.clear();for(const w of u){if(w.length===0)continue;const A=w[0];let D=Ds.computeEdgeHash(A[A.length-2],A[A.length-1]);for(let P=0;P<A.length-1;P++){const B=A[P+0],U=A[P+1],$=Ri(U.x-B.x,U.y-B.y),G=Nu($);if(G===0)continue;let Z="unevaluated";const se=g.pointElevation(B),fe=g.pointElevation(U);Math.abs(se)<.01&&Math.abs(fe)<.01?Z="entrance":(this.isOnBorder(B.x,U.x)||this.isOnBorder(B.y,U.y))&&(Z="border");const ue=Ds.computeEdgeHash(B,U);this.unevaluatedPortals.portals.push({connection:{a:o,b:void 0},va:B,vb:U,vab:$,length:G,hash:ue,isTunnel:h,type:Z});const pe=Ds.computePosHash(B);this.vertexHashLookup.set(pe,{prev:D,next:ue}),D=ue}}}}construct(o){if(this.unevalVertices.length===0)return;const u=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),h=$=>{$.primitiveLength=this.indexArray.length-$.primitiveOffset},g=new mv(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(o.portals,this.unevalEdges);const b=u(),w=u(),A=u(),D=($,G)=>{$.sort((se,fe)=>se.type===G&&fe.type!==G?-1:se.type!==G&&fe.type===G?1:0);const Z=$.findIndex(se=>se.type!==G);return Z>=0?Z:$.length};let P=0;this.unevalEdges.length>0&&(P=D(this.unevalEdges,"none"),this.constructBridgeStructures(g,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:P},this.tileToMeters)),h(A);const B=u(),U=u();if(this.unevalEdges.length>0){const $=this.unevalEdges.splice(P),G=D($,"tunnel")+P;this.unevalEdges.push(...$),this.constructTunnelStructures(g,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:P},{min:P,max:G})}h(B),g.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),h(U),g.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),h(w),g.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),h(b),this.maskSegments=Ii.simpleSegment(0,U.primitiveOffset,0,U.primitiveLength),this.depthSegments=Ii.simpleSegment(0,w.primitiveOffset,0,w.primitiveLength),this.renderableBridgeSegments=Ii.simpleSegment(0,A.primitiveOffset,0,A.primitiveLength),this.renderableTunnelSegments=Ii.simpleSegment(0,B.primitiveOffset,0,B.primitiveLength),this.shadowCasterSegments=Ii.simpleSegment(0,b.primitiveOffset,0,b.primitiveLength)}update(o,u,h,g,b,w,A,D){this.bridgeProgramConfigurations.updatePaintArrays(o,u,b,h,g,w,A,D),this.tunnelProgramConfigurations.updatePaintArrays(o,u,b,h,g,w,A,D)}upload(o){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=o.createVertexBuffer(this.vertexPositions,$k.members),this.vertexBufferNormal=o.createVertexBuffer(this.vertexNormals,Vk.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.bridgeProgramConfigurations.upload(o),this.tunnelProgramConfigurations.upload(o))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableBridgeSegments.destroy(),this.renderableTunnelSegments.destroy(),this.shadowCasterSegments.destroy()),this.bridgeProgramConfigurations.destroy(),this.tunnelProgramConfigurations.destroy()}populatePaintArrays(o,u,h,g,b){const w=(A,D)=>{for(let P=0;P<D.length-1;P++){const B=D[P].featureIndex,U=D[P+1].vertexStart,$=o.feature(B);A.populatePaintArrays(U,$,B,{},h,u,g,void 0,b)}};w(this.bridgeProgramConfigurations,this.bridgeFeatureSections),w(this.tunnelProgramConfigurations,this.tunnelFeatureSections)}computeVertexConnections(o,u,h,g,b){const w=new Map;for(let A=g;A<b;A++){const D=h[A],P=D.a,B=D.b,U=Ds.computePosHash(o[P]),$=Ds.computePosHash(o[B]);let G=w.get(U);G||(G={},w.set(U,G));let Z=w.get($);Z||(Z={},w.set($,Z)),u[P]<=0&&u[B]<=0||(G.to=B,Z.from=P)}return w}isTerminalVertex(o,u){const h=Ds.computePosHash(this.unevalVertices[o]),g=u.get(h);return!g||!g.from||!g.to}constructBridgeStructures(o,u,h,g,b,w){o.clearVertexLookup();const A=this.computeVertexConnections(u,h,g,b.min,b.max),D=1/w,P=.5*D,B=(kt,Pt)=>Fe(kt,u[Pt].x,u[Pt].y,h[Pt]*D),U=De(),$=De(),G=De(),Z=De(),se=De(),fe=(kt,Pt)=>{const Rt=A.get(Ds.computePosHash(u[Pt])),vt=Rt.from,zt=Rt.to;if(!vt||!zt)return;B(U,vt),B($,Pt),B(G,zt),An(Z),ar(U,$)||(or(se,$,U),xe(Z,se)),ar(G,$)||(or(se,G,$),at(Z,Z,xe(se,se)));const Mt=Pr(Z);return Mt>0?Pe(kt,Z,1/Mt):void 0};let ue=Number.POSITIVE_INFINITY;this.sortSubarray(g,b.min,b.max,(kt,Pt)=>kt.featureInfo.featureIndex-Pt.featureInfo.featureIndex);const pe=De(),ve=De(),Se=De(),ke=De(),Ie=De(),Ve=De(),qe=De(),Ue=De(),Ze=De(),rt=[De(),De(),De(),De()],Et=[De(),De(),De(),De()],xt=[{coord:new Vt(0,0),height:0},{coord:new Vt(0,0),height:0}],Tt=(kt,Pt)=>kt>Pt;for(let kt=b.min;kt<b.max;kt++){const Pt=g[kt];if(!Pt.featureInfo.guardRailEnabled||!this.prepareEdgePoints(xt,u,h,Pt,Tt))continue;const[Rt,vt]=xt;if(Fe(pe,Rt.coord.x,Rt.coord.y,D*Rt.height),Fe(ve,vt.coord.x,vt.coord.y,D*vt.height),ar(pe,ve))continue;or(Se,ve,pe),xe(Se,Se);const zt=fe(Ue,Pt.a)||Se,Mt=fe(Ze,Pt.b)||Se;Fe(ke,zt[1],-zt[0],0),xe(ke,ke),Fe(Ie,Mt[1],-Mt[0],0),xe(Ie,Ie),ct(Ue,ke,zt),xe(Ve,Ue),ct(Ue,Ie,Mt),xe(qe,Ue),at(rt[0],pe,Pe(Ue,or(Ue,ke,Ve),P)),at(rt[1],pe,Pe(Ue,at(Ue,ke,Ve),P)),at(rt[2],pe,Pe(Ue,Ve,P)),rt[3]=pe,at(Et[0],ve,Pe(Ue,or(Ue,Ie,qe),P)),at(Et[1],ve,Pe(Ue,at(Ue,Ie,qe),P)),at(Et[2],ve,Pe(Ue,qe,P)),Et[3]=ve,ue=this.addFeatureSection(Pt.featureInfo.featureIndex,ue,this.bridgeFeatureSections,o);const Nt=o.addVertex(rt[0],ke,w),Lt=o.addVertex(rt[1],ke,w),fn=o.addVertex(Et[0],Ie,w),pn=o.addVertex(Et[1],Ie,w);o.addTriangle(Nt,Lt,fn),o.addTriangle(Lt,pn,fn);const nn=o.addVertex(rt[1],Ve,w),an=o.addVertex(rt[2],Ve,w),kn=o.addVertex(Et[1],qe,w),Cn=o.addVertex(Et[2],qe,w);o.addTriangle(nn,an,kn),o.addTriangle(an,Cn,kn),Ut(ke,ke),Ut(Ie,Ie);const cn=o.addVertex(rt[2],ke,w),Wn=o.addVertex(rt[3],ke,w),vr=o.addVertex(Et[2],Ie,w),Zr=o.addVertex(Et[3],Ie,w);o.addTriangle(cn,Wn,vr),o.addTriangle(Wn,Zr,vr);const pr=this.isTerminalVertex(Pt.a,A),di=this.isTerminalVertex(Pt.b,A);Rt.height<.01&&pr&&o.addQuad(rt[3],rt[2],rt[1],rt[0],Ut(zt,zt),w),vt.height<.01&&di&&o.addQuad(Et[0],Et[1],Et[2],Et[3],Mt,w)}this.bridgeFeatureSections.push({featureIndex:Number.POSITIVE_INFINITY,vertexStart:o.getVertexCount()})}constructTunnelStructures(o,u,h,g,b,w){o.clearVertexLookup();let A=Number.POSITIVE_INFINITY;const D=(ue,pe)=>ue.featureInfo.featureIndex-pe.featureInfo.featureIndex;this.sortSubarray(g,b.min,b.max,D),this.sortSubarray(g,w.min,w.max,D);const P=ue=>xe(ue,ue),B=[{coord:new Vt(0,0),height:0},{coord:new Vt(0,0),height:0}],U=(ue,pe)=>ue<pe,$=De(),G=De(),Z=De(),se=De(),fe=De();for(let ue=b.min;ue<b.max;ue++){if(!this.prepareEdgePoints(B,u,h,g[ue],U))continue;const[pe,ve]=B,Se=P(Fe(fe,-(ve.coord.y-pe.coord.y),ve.coord.x-pe.coord.x,0));A=this.addFeatureSection(g[ue].featureInfo.featureIndex,A,this.tunnelFeatureSections,o),o.addQuad(Fe($,pe.coord.x,pe.coord.y,pe.height),Fe(G,ve.coord.x,ve.coord.y,ve.height),Fe(Z,ve.coord.x,ve.coord.y,g[ue].isTunnel?-.1:0),Fe(se,pe.coord.x,pe.coord.y,g[ue].isTunnel?-.1:0),Se)}for(let ue=w.min;ue<w.max;ue++){const pe=g[ue];pe.isTunnel&&([pe.a,pe.b]=[pe.b,pe.a]);const ve=u[pe.a],Se=u[pe.b],ke=P(Fe(fe,-(Se.y-ve.y),Se.x-ve.x,0));A=this.addFeatureSection(pe.featureInfo.featureIndex,A,this.tunnelFeatureSections,o),o.addQuad(Fe($,Se.x,Se.y,0),Fe(G,ve.x,ve.y,0),Fe(Z,ve.x,ve.y,h[pe.a]+4),Fe(se,Se.x,Se.y,h[pe.b]+4),ke),o.addQuad(Fe($,ve.x,ve.y,0),Fe(G,Se.x,Se.y,0),Fe(Z,Se.x,Se.y,h[pe.b]+4),Fe(se,ve.x,ve.y,h[pe.a]+4),ke)}this.tunnelFeatureSections.push({featureIndex:Number.POSITIVE_INFINITY,vertexStart:o.getVertexCount()})}setElevatedPoint(o,u,h,g){o.coord.x=u,o.coord.y=h,o.height=g}prepareEdgePoints(o,u,h,g,b){let w=u[g.a].x,A=u[g.a].y,D=u[g.b].x,P=u[g.b].y,B=h[g.a],U=h[g.b];const $=b(B,0),G=b(U,0);if($&&G)return this.setElevatedPoint(o[0],w,A,B),this.setElevatedPoint(o[1],D,P,U),!0;if(!$&&!G)return!1;if($){if(!G){const Z=U/(U-B);D=Vn(D,w,Z),P=Vn(P,A,Z),U=Vn(U,B,Z)}}else{const Z=B/(B-U);w=Vn(w,D,Z),A=Vn(A,P,Z),B=Vn(B,U,Z)}return this.setElevatedPoint(o[0],w,A,B),this.setElevatedPoint(o[1],D,P,U),!0}prepareEdges(o,u){if(u.length===0)return;u.sort((A,D)=>A.hash===D.hash?D.polygonIdx-A.polygonIdx:D.hash>A.hash?1:-1);let h=0,g=0,b=0,w=u[h].polygonIdx;do g++,(g===u.length||u[h].hash!==u[g].hash)&&((g-h===1||u[g-1].polygonIdx!==w)&&(b<h&&(u[b]=u[h],u[h]=null),u[b].type="none",b++),h=g,h!==u.length&&(w=u[h].polygonIdx));while(h!==u.length);if(u.splice(b),u.length!==0&&o.length!==0){u.sort((P,B)=>P.portalHash<B.portalHash?1:-1);let A=0,D=0;for(;A!==u.length&&D!==o.length;){const P=u[A],B=o[D];P.portalHash>B.hash?A++:B.hash>P.portalHash?D++:(P.type=B.type,A++)}}}isOnBorder(o,u){return o<=0&&u<=0||o>=Jt&&u>=Jt}addFeatureSection(o,u,h,g){return o!==u&&(u=o,h.push({featureIndex:o,vertexStart:g.getVertexCount()}),g.clearVertexLookup()),u}sortSubarray(o,u,h,g){const b=o.slice(u,h);b.sort(g),o.splice(u,b.length,...b)}static computeEdgeHash(o,u){return(o.y===u.y&&o.x>u.x||o.y>u.y)&&([o,u]=[u,o]),BigInt(Ds.computePosHash(o))<<32n|BigInt(Ds.computePosHash(u))}static computePosHash(o){return((65535&o.x)<<16|65535&o.y)>>>0}}function iC(c,o){return c>o?1:c<o?-1:0}class LT{constructor(o=iC,u=!1){this._compare=o,this._root=null,this._size=0,this._noDuplicates=!!u}rotateLeft(o){var u=o.right;u&&(o.right=u.left,u.left&&(u.left.parent=o),u.parent=o.parent),o.parent?o===o.parent.left?o.parent.left=u:o.parent.right=u:this._root=u,u&&(u.left=o),o.parent=u}rotateRight(o){var u=o.left;u&&(o.left=u.right,u.right&&(u.right.parent=o),u.parent=o.parent),o.parent?o===o.parent.left?o.parent.left=u:o.parent.right=u:this._root=u,u&&(u.right=o),o.parent=u}_splay(o){for(;o.parent;){var u=o.parent;u.parent?u.left===o&&u.parent.left===u?(this.rotateRight(u.parent),this.rotateRight(u)):u.right===o&&u.parent.right===u?(this.rotateLeft(u.parent),this.rotateLeft(u)):u.left===o&&u.parent.right===u?(this.rotateRight(u),this.rotateLeft(u)):(this.rotateLeft(u),this.rotateRight(u)):u.left===o?this.rotateRight(u):this.rotateLeft(u)}}splay(o){for(var u,h,g,b,w;o.parent;)(h=(u=o.parent).parent)&&h.parent?((g=h.parent).left===h?g.left=o:g.right=o,o.parent=g):(o.parent=null,this._root=o),b=o.left,w=o.right,o===u.left?(h&&(h.left===u?(u.right?(h.left=u.right,h.left.parent=h):h.left=null,u.right=h,h.parent=u):(b?(h.right=b,b.parent=h):h.right=null,o.left=h,h.parent=o)),w?(u.left=w,w.parent=u):u.left=null,o.right=u,u.parent=o):(h&&(h.right===u?(u.left?(h.right=u.left,h.right.parent=h):h.right=null,u.left=h,h.parent=u):(w?(h.left=w,w.parent=h):h.left=null,o.right=h,h.parent=o)),b?(u.right=b,b.parent=u):u.right=null,o.left=u,u.parent=o)}replace(o,u){o.parent?o===o.parent.left?o.parent.left=u:o.parent.right=u:this._root=u,u&&(u.parent=o.parent)}minNode(o=this._root){if(o)for(;o.left;)o=o.left;return o}maxNode(o=this._root){if(o)for(;o.right;)o=o.right;return o}insert(o,u){var h=this._root,g=null,b=this._compare;if(this._noDuplicates)for(;h;){if(g=h,b(h.key,o)===0)return;h=b(h.key,o)<0?h.right:h.left}else for(;h;)g=h,h=b(h.key,o)<0?h.right:h.left;return h={key:o,data:u,left:null,right:null,parent:g},g?b(g.key,h.key)<0?g.right=h:g.left=h:this._root=h,this.splay(h),this._size++,h}find(o){for(var u=this._root,h=this._compare;u;){var g=h(u.key,o);if(g<0)u=u.right;else{if(!(g>0))return u;u=u.left}}return null}contains(o){for(var u=this._root,h=this._compare;u;){var g=h(o,u.key);if(g===0)return!0;u=g<0?u.left:u.right}return!1}remove(o){var u=this.find(o);if(!u)return!1;if(this.splay(u),u.left)if(u.right){var h=this.minNode(u.right);h.parent!==u&&(this.replace(h,h.right),h.right=u.right,h.right.parent=h),this.replace(u,h),h.left=u.left,h.left.parent=h}else this.replace(u,u.left);else this.replace(u,u.right);return this._size--,!0}removeNode(o){if(!o)return!1;if(this.splay(o),o.left)if(o.right){var u=this.minNode(o.right);u.parent!==o&&(this.replace(u,u.right),u.right=o.right,u.right.parent=u),this.replace(o,u),u.left=o.left,u.left.parent=u}else this.replace(o,o.left);else this.replace(o,o.right);return this._size--,!0}erase(o){var u=this.find(o);if(u){this.splay(u);var h=u.left,g=u.right,b=null;h&&(h.parent=null,b=this.maxNode(h),this.splay(b),this._root=b),g&&(h?b.right=g:this._root=g,g.parent=b),this._size--}}pop(){var o=this._root,u=null;if(o){for(;o.left;)o=o.left;u={key:o.key,data:o.data},this.remove(o.key)}return u}next(o){var u=o;if(u)if(u.right)for(u=u.right;u&&u.left;)u=u.left;else for(u=o.parent;u&&u.right===o;)o=u,u=u.parent;return u}prev(o){var u=o;if(u)if(u.left)for(u=u.left;u&&u.right;)u=u.right;else for(u=o.parent;u&&u.left===o;)o=u,u=u.parent;return u}forEach(o){for(var u=this._root,h=[],g=!1,b=0;!g;)u?(h.push(u),u=u.left):h.length>0?(o(u=h.pop(),b++),u=u.right):g=!0;return this}range(o,u,h,g){const b=[],w=this._compare;let A,D=this._root;for(;b.length!==0||D;)if(D)b.push(D),D=D.left;else{if(D=b.pop(),A=w(D.key,u),A>0)break;if(w(D.key,o)>=0&&h.call(g,D))return this;D=D.right}return this}keys(){for(var o=this._root,u=[],h=[],g=!1;!g;)o?(u.push(o),o=o.left):u.length>0?(o=u.pop(),h.push(o.key),o=o.right):g=!0;return h}values(){for(var o=this._root,u=[],h=[],g=!1;!g;)o?(u.push(o),o=o.left):u.length>0?(o=u.pop(),h.push(o.data),o=o.right):g=!0;return h}at(o){for(var u=this._root,h=[],g=!1,b=0;!g;)if(u)h.push(u),u=u.left;else if(h.length>0){if(u=h.pop(),b===o)return u;b++,u=u.right}else g=!0;return null}load(o=[],u=[],h=!1){if(this._size!==0)throw new Error("bulk-load: tree is not empty");const g=o.length;return h&&my(o,u,0,g-1,this._compare),this._root=Cm(null,o,u,0,g),this._size=g,this}min(){var o=this.minNode(this._root);return o?o.key:null}max(){var o=this.maxNode(this._root);return o?o.key:null}isEmpty(){return this._root===null}get size(){return this._size}static createTree(o,u,h,g,b){return new LT(h,b).load(o,u,g)}}function Cm(c,o,u,h,g){const b=g-h;if(b>0){const w=h+Math.floor(b/2),A={key:o[w],data:u[w],parent:c};return A.left=Cm(A,o,u,h,w),A.right=Cm(A,o,u,w+1,g),A}return null}function my(c,o,u,h,g){if(u>=h)return;const b=c[u+h>>1];let w=u-1,A=h+1;for(;;){do w++;while(g(c[w],b)<0);do A--;while(g(c[A],b)>0);if(w>=A)break;let D=c[w];c[w]=c[A],c[A]=D,D=o[w],o[w]=o[A],o[A]=D}my(c,o,u,A,g),my(c,o,A+1,h,g)}const zT=11102230246251565e-32,Is=134217729,NT=(3+8*zT)*zT;function mb(c,o,u,h,g){let b,w,A,D,P=o[0],B=h[0],U=0,$=0;B>P==B>-P?(b=P,P=o[++U]):(b=B,B=h[++$]);let G=0;if(U<c&&$<u)for(B>P==B>-P?(w=P+b,A=b-(w-P),P=o[++U]):(w=B+b,A=b-(w-B),B=h[++$]),b=w,A!==0&&(g[G++]=A);U<c&&$<u;)B>P==B>-P?(w=b+P,D=w-b,A=b-(w-D)+(P-D),P=o[++U]):(w=b+B,D=w-b,A=b-(w-D)+(B-D),B=h[++$]),b=w,A!==0&&(g[G++]=A);for(;U<c;)w=b+P,D=w-b,A=b-(w-D)+(P-D),P=o[++U],b=w,A!==0&&(g[G++]=A);for(;$<u;)w=b+B,D=w-b,A=b-(w-D)+(B-D),B=h[++$],b=w,A!==0&&(g[G++]=A);return b===0&&G!==0||(g[G++]=b),G}function Mm(c){return new Float64Array(c)}const gy=Mm(4),FT=Mm(8),aC=Mm(12),BT=Mm(16),Zl=Mm(4);function yy(c,o,u){o===null?(c.inOut=!1,c.otherInOut=!0):(c.isSubject===o.isSubject?(c.inOut=!o.inOut,c.otherInOut=o.otherInOut):(c.inOut=!o.otherInOut,c.otherInOut=o.isVertical()?!o.inOut:o.inOut),o&&(c.prevInResult=!oC(o,u)||o.isVertical()?o.prevInResult:o)),c.resultTransition=oC(c,u)?(function(h,g){let b,w=!h.inOut,A=!h.otherInOut;switch(g){case 0:b=w&&A;break;case 1:b=w||A;break;case 3:b=w!==A;break;case 2:b=h.isSubject?w&&!A:A&&!w}return b?1:-1})(c,u):0}function oC(c,o){switch(c.type){case 0:switch(o){case 0:return!c.otherInOut;case 1:return c.otherInOut;case 2:return c.isSubject&&c.otherInOut||!c.isSubject&&!c.otherInOut;case 3:return!0}break;case 2:return o===0||o===1;case 3:return o===2;case 1:return!1}return!1}class Jd{constructor(o,u,h,g,b){this.left=u,this.point=o,this.otherEvent=h,this.isSubject=g??!1,this.type=b||0,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0}isBelow(o){const u=this.point,h=this.otherEvent.point;return this.left?(u[0]-o[0])*(h[1]-o[1])-(h[0]-o[0])*(u[1]-o[1])>0:(h[0]-o[0])*(u[1]-o[1])-(u[0]-o[0])*(h[1]-o[1])>0}isAbove(o){return!this.isBelow(o)}isVertical(){return this.point[0]===this.otherEvent.point[0]}get inResult(){return this.resultTransition!==0}clone(){const o=new Jd(this.point,this.left,this.otherEvent,this.isSubject,this.type);return o.contourId=this.contourId,o.resultTransition=this.resultTransition,o.prevInResult=this.prevInResult,o.isExteriorRing=this.isExteriorRing,o.inOut=this.inOut,o.otherInOut=this.otherInOut,o}}function oc(c,o){return c[0]===o[0]&&c[1]===o[1]}function gv(c,o,u){const h=(function(g,b,w,A,D,P){const B=(b-P)*(w-D),U=(g-D)*(A-P),$=B-U;if(B===0||U===0||B>0!=U>0)return $;const G=Math.abs(B+U);return Math.abs($)>=33306690738754716e-32*G?$:-(function(Z,se,fe,ue,pe,ve,Se){let ke,Ie,Ve,qe,Ue,Ze,rt,Et,xt,Tt,kt,Pt,Rt,vt,zt,Mt,Nt,Lt;const fn=Z-pe,pn=fe-pe,nn=se-ve,an=ue-ve;vt=fn*an,Ze=Is*fn,rt=Ze-(Ze-fn),Et=fn-rt,Ze=Is*an,xt=Ze-(Ze-an),Tt=an-xt,zt=Et*Tt-(vt-rt*xt-Et*xt-rt*Tt),Mt=nn*pn,Ze=Is*nn,rt=Ze-(Ze-nn),Et=nn-rt,Ze=Is*pn,xt=Ze-(Ze-pn),Tt=pn-xt,Nt=Et*Tt-(Mt-rt*xt-Et*xt-rt*Tt),kt=zt-Nt,Ue=zt-kt,gy[0]=zt-(kt+Ue)+(Ue-Nt),Pt=vt+kt,Ue=Pt-vt,Rt=vt-(Pt-Ue)+(kt-Ue),kt=Rt-Mt,Ue=Rt-kt,gy[1]=Rt-(kt+Ue)+(Ue-Mt),Lt=Pt+kt,Ue=Lt-Pt,gy[2]=Pt-(Lt-Ue)+(kt-Ue),gy[3]=Lt;let kn=(function(Zr,pr){let di=pr[0];for(let kr=1;kr<4;kr++)di+=pr[kr];return di})(0,gy),Cn=22204460492503146e-32*Se;if(kn>=Cn||-kn>=Cn||(Ue=Z-fn,ke=Z-(fn+Ue)+(Ue-pe),Ue=fe-pn,Ve=fe-(pn+Ue)+(Ue-pe),Ue=se-nn,Ie=se-(nn+Ue)+(Ue-ve),Ue=ue-an,qe=ue-(an+Ue)+(Ue-ve),ke===0&&Ie===0&&Ve===0&&qe===0)||(Cn=11093356479670487e-47*Se+NT*Math.abs(kn),kn+=fn*qe+an*ke-(nn*Ve+pn*Ie),kn>=Cn||-kn>=Cn))return kn;vt=ke*an,Ze=Is*ke,rt=Ze-(Ze-ke),Et=ke-rt,Ze=Is*an,xt=Ze-(Ze-an),Tt=an-xt,zt=Et*Tt-(vt-rt*xt-Et*xt-rt*Tt),Mt=Ie*pn,Ze=Is*Ie,rt=Ze-(Ze-Ie),Et=Ie-rt,Ze=Is*pn,xt=Ze-(Ze-pn),Tt=pn-xt,Nt=Et*Tt-(Mt-rt*xt-Et*xt-rt*Tt),kt=zt-Nt,Ue=zt-kt,Zl[0]=zt-(kt+Ue)+(Ue-Nt),Pt=vt+kt,Ue=Pt-vt,Rt=vt-(Pt-Ue)+(kt-Ue),kt=Rt-Mt,Ue=Rt-kt,Zl[1]=Rt-(kt+Ue)+(Ue-Mt),Lt=Pt+kt,Ue=Lt-Pt,Zl[2]=Pt-(Lt-Ue)+(kt-Ue),Zl[3]=Lt;const cn=mb(4,gy,4,Zl,FT);vt=fn*qe,Ze=Is*fn,rt=Ze-(Ze-fn),Et=fn-rt,Ze=Is*qe,xt=Ze-(Ze-qe),Tt=qe-xt,zt=Et*Tt-(vt-rt*xt-Et*xt-rt*Tt),Mt=nn*Ve,Ze=Is*nn,rt=Ze-(Ze-nn),Et=nn-rt,Ze=Is*Ve,xt=Ze-(Ze-Ve),Tt=Ve-xt,Nt=Et*Tt-(Mt-rt*xt-Et*xt-rt*Tt),kt=zt-Nt,Ue=zt-kt,Zl[0]=zt-(kt+Ue)+(Ue-Nt),Pt=vt+kt,Ue=Pt-vt,Rt=vt-(Pt-Ue)+(kt-Ue),kt=Rt-Mt,Ue=Rt-kt,Zl[1]=Rt-(kt+Ue)+(Ue-Mt),Lt=Pt+kt,Ue=Lt-Pt,Zl[2]=Pt-(Lt-Ue)+(kt-Ue),Zl[3]=Lt;const Wn=mb(cn,FT,4,Zl,aC);vt=ke*qe,Ze=Is*ke,rt=Ze-(Ze-ke),Et=ke-rt,Ze=Is*qe,xt=Ze-(Ze-qe),Tt=qe-xt,zt=Et*Tt-(vt-rt*xt-Et*xt-rt*Tt),Mt=Ie*Ve,Ze=Is*Ie,rt=Ze-(Ze-Ie),Et=Ie-rt,Ze=Is*Ve,xt=Ze-(Ze-Ve),Tt=Ve-xt,Nt=Et*Tt-(Mt-rt*xt-Et*xt-rt*Tt),kt=zt-Nt,Ue=zt-kt,Zl[0]=zt-(kt+Ue)+(Ue-Nt),Pt=vt+kt,Ue=Pt-vt,Rt=vt-(Pt-Ue)+(kt-Ue),kt=Rt-Mt,Ue=Rt-kt,Zl[1]=Rt-(kt+Ue)+(Ue-Mt),Lt=Pt+kt,Ue=Lt-Pt,Zl[2]=Pt-(Lt-Ue)+(kt-Ue),Zl[3]=Lt;const vr=mb(Wn,aC,4,Zl,BT);return BT[vr-1]})(g,b,w,A,D,P,G)})(c[0],c[1],o[0],o[1],u[0],u[1]);return h>0?-1:h<0?1:0}function Dm(c,o){const u=c.point,h=o.point;return u[0]>h[0]?1:u[0]<h[0]?-1:u[1]!==h[1]?u[1]>h[1]?1:-1:(function(g,b,w){return g.left!==b.left?g.left?1:-1:gv(w,g.otherEvent.point,b.otherEvent.point)!==0?g.isBelow(b.otherEvent.point)?-1:1:!g.isSubject&&b.isSubject?1:-1})(c,o,u)}function Wc(c,o,u){const h=new Jd(o,!1,c,c.isSubject),g=new Jd(o,!0,c.otherEvent,c.isSubject);return oc(c.point,c.otherEvent.point)&&console.warn("what is that, a collapsed segment?",c),h.contourId=g.contourId=c.contourId,Dm(g,c.otherEvent)>0&&(c.otherEvent.left=!0,g.left=!1),c.otherEvent.otherEvent=g,c.otherEvent=h,u.push(g),u.push(h),u}function T1(c,o){return c[0]*o[1]-c[1]*o[0]}function E1(c,o){return c[0]*o[0]+c[1]*o[1]}function A1(c,o,u){const h=(function(D,P,B,U){const $=[P[0]-D[0],P[1]-D[1]],G=[U[0]-B[0],U[1]-B[1]];function Z(Ve,qe,Ue){return[Ve[0]+qe*Ue[0],Ve[1]+qe*Ue[1]]}const se=[B[0]-D[0],B[1]-D[1]];let fe=T1($,G),ue=fe*fe;const pe=E1($,$);if(ue>0){const Ve=T1(se,G)/fe;if(Ve<0||Ve>1)return null;const qe=T1(se,$)/fe;return qe<0||qe>1?null:Ve===0||Ve===1?[Z(D,Ve,$)]:qe===0||qe===1?[Z(B,qe,G)]:[Z(D,Ve,$)]}if(fe=T1(se,$),ue=fe*fe,ue>0)return null;const ve=E1($,se)/pe,Se=ve+E1($,G)/pe,ke=Math.min(ve,Se),Ie=Math.max(ve,Se);return ke<=1&&Ie>=0?ke===1?[Z(D,ke>0?ke:0,$)]:Ie===0?[Z(D,Ie<1?Ie:1,$)]:[Z(D,ke>0?ke:0,$),Z(D,Ie<1?Ie:1,$)]:null})(c.point,c.otherEvent.point,o.point,o.otherEvent.point),g=h?h.length:0;if(g===0||g===1&&(oc(c.point,o.point)||oc(c.otherEvent.point,o.otherEvent.point))||g===2&&c.isSubject===o.isSubject)return 0;if(g===1)return!oc(c.point,h[0])&&!oc(c.otherEvent.point,h[0])&&Wc(c,h[0],u),!oc(o.point,h[0])&&!oc(o.otherEvent.point,h[0])&&Wc(o,h[0],u),1;const b=[];let w=!1,A=!1;return oc(c.point,o.point)?w=!0:Dm(c,o)===1?b.push(o,c):b.push(c,o),oc(c.otherEvent.point,o.otherEvent.point)?A=!0:Dm(c.otherEvent,o.otherEvent)===1?b.push(o.otherEvent,c.otherEvent):b.push(c.otherEvent,o.otherEvent),w&&A||w?(o.type=1,c.type=o.inOut===c.inOut?2:3,w&&!A&&Wc(b[1].otherEvent,b[0].point,u),2):A?(Wc(b[0],b[1].point,u),3):b[0]!==b[3].otherEvent?(Wc(b[0],b[1].point,u),Wc(b[1],b[2].point,u),3):(Wc(b[0],b[1].point,u),Wc(b[3].otherEvent,b[2].point,u),3)}function sC(c,o){if(c===o)return 0;if(gv(c.point,c.otherEvent.point,o.point)!==0||gv(c.point,c.otherEvent.point,o.otherEvent.point)!==0)return oc(c.point,o.point)?c.isBelow(o.otherEvent.point)?-1:1:c.point[0]===o.point[0]?c.point[1]<o.point[1]?-1:1:Dm(c,o)===1?o.isAbove(c.point)?-1:1:c.isBelow(o.point)?-1:1;if(c.isSubject!==o.isSubject)return c.isSubject?-1:1;{let u=c.point,h=o.point;if(u[0]===h[0]&&u[1]===h[1])return u=c.otherEvent.point,h=o.otherEvent.point,u[0]===h[0]&&u[1]===h[1]?0:(c.contourId??0)>(o.contourId??0)?1:-1}return Dm(c,o)===1?1:-1}class lC{constructor(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null}isExterior(){return this.holeOf==null}}function jT(c,o,u,h){let g,b=c+1,w=o[c].point;const A=o.length;for(b<A&&(g=o[b].point);b<A&&g[0]===w[0]&&g[1]===w[1];){if(!u[b])return b;b++,b<A&&(g=o[b].point)}for(b=c-1;u[b]&&b>h;)b--;return b}function uC(c,o,u){const h=new lC;if(c.prevInResult!=null){const g=c.prevInResult,b=g.outputContourId;if(g.resultTransition>0){const w=o[b];if(w.holeOf!=null){const A=w.holeOf;o[A].holeIds.push(u),h.holeOf=A,h.depth=o[b].depth}else o[b].holeIds.push(u),h.holeOf=b,h.depth=o[b].depth+1}else h.holeOf=null,h.depth=o[b].depth}else h.holeOf=null,h.depth=0;return h}const UT=Math.max,gb=Math.min;let O1=0;function cC(c,o,u,h,g,b){let w,A,D,P,B,U;for(w=0,A=c.length-1;w<A;w++){if(D=c[w],P=c[w+1],B=new Jd(D,!1,void 0,o),U=new Jd(P,!1,B,o),B.otherEvent=U,D[0]===P[0]&&D[1]===P[1])continue;B.contourId=U.contourId=u,b||(B.isExteriorRing=!1,U.isExteriorRing=!1),Dm(B,U)>0?U.left=!0:B.left=!0;const $=D[0],G=D[1];g[0]=gb(g[0],$),g[1]=gb(g[1],G),g[2]=UT(g[2],$),g[3]=UT(g[3],G),h.push(B),h.push(U)}}const yv=[];function C1(c,o,u){let h=c,g=o;typeof c[0][0][0]=="number"&&(h=[c]),typeof o[0][0][0]=="number"&&(g=[o]);let b=(function($,G,Z){let se=null;return $.length*G.length===0&&(Z===0?se=yv:Z===2?se=$:(Z===1||Z===3)&&(se=$.length===0?G:$)),se})(h,g,u);if(b)return b===yv?null:b;const w=[1/0,1/0,-1/0,-1/0],A=[1/0,1/0,-1/0,-1/0],D=(function($,G,Z,se,fe){const ue=new Td(void 0,Dm);let pe,ve,Se,ke,Ie,Ve;for(Se=0,ke=$.length;Se<ke;Se++)for(pe=$[Se],Ie=0,Ve=pe.length;Ie<Ve;Ie++)ve=Ie===0,ve&&O1++,cC(pe[Ie],!0,O1,ue,Z,ve);for(Se=0,ke=G.length;Se<ke;Se++)for(pe=G[Se],Ie=0,Ve=pe.length;Ie<Ve;Ie++)ve=Ie===0,fe===2&&(ve=!1),ve&&O1++,cC(pe[Ie],!1,O1,ue,se,ve);return ue})(h,g,w,A,u);if(b=(function($,G,Z,se,fe){let ue=null;return(Z[0]>se[2]||se[0]>Z[2]||Z[1]>se[3]||se[1]>Z[3])&&(fe===0?ue=yv:fe===2?ue=$:(fe===1||fe===3)&&(ue=$.concat(G))),ue})(h,g,w,A,u),b)return b===yv?null:b;const P=(function($,G,Z,se,fe,ue){const pe=new LT(sC),ve=[],Se=Math.min(se[2],fe[2]);let ke,Ie,Ve;for(;$.length!==0;){let qe=$.pop();if(ve.push(qe),ue===0&&qe.point[0]>Se||ue===2&&qe.point[0]>se[2])break;if(qe.left){Ie=ke=pe.insert(qe),Ve=pe.minNode(),ke=ke!==Ve?pe.prev(ke):null,Ie=pe.next(Ie);const Ue=ke?ke.key:null;let Ze;if(yy(qe,Ue,ue),Ie&&A1(qe,Ie.key,$)===2&&(yy(qe,Ue,ue),yy(Ie.key,qe,ue)),ke&&A1(ke.key,qe,$)===2){let rt=ke;rt=rt!==Ve?pe.prev(rt):null,Ze=rt?rt.key:null,yy(Ue,Ze,ue),yy(qe,Ue,ue)}}else qe=qe.otherEvent,Ie=ke=pe.find(qe),ke&&Ie&&(ke=ke!==Ve?pe.prev(ke):null,Ie=pe.next(Ie),pe.remove(qe),Ie&&ke&&A1(ke.key,Ie.key,$))}return ve})(D,0,0,w,A,u),B=(function($){let G,Z;const se=(function(pe){let ve,Se,ke,Ie,Ve;const qe=[];for(Se=0,ke=pe.length;Se<ke;Se++)ve=pe[Se],(ve.left&&ve.inResult||!ve.left&&ve.otherEvent.inResult)&&qe.push(ve);let Ue=!1;for(;!Ue;)for(Ue=!0,Se=0,ke=qe.length;Se<ke;Se++)Se+1<ke&&Dm(qe[Se],qe[Se+1])===1&&(Ie=qe[Se],qe[Se]=qe[Se+1],qe[Se+1]=Ie,Ue=!1);for(Se=0,ke=qe.length;Se<ke;Se++)ve=qe[Se],ve.otherPos=Se;for(Se=0,ke=qe.length;Se<ke;Se++)ve=qe[Se],ve.left||(Ve=ve.otherPos,ve.otherPos=ve.otherEvent.otherPos,ve.otherEvent.otherPos=Ve);return qe})($),fe={},ue=[];for(G=0,Z=se.length;G<Z;G++){if(fe[G])continue;const pe=ue.length,ve=uC(se[G],ue,pe),Se=Ve=>{fe[Ve]=!0,Ve<se.length&&se[Ve]&&(se[Ve].outputContourId=pe)};let ke=G,Ie=G;for(ve.points.push(se[G].point);Se(ke),ke=se[ke].otherPos,Se(ke),ve.points.push(se[ke].point),ke=jT(ke,se,fe,Ie),!(ke==Ie||ke>=se.length)&&se[ke];);ue.push(ve)}return ue})(P),U=[];for(let $=0;$<B.length;$++){let G=B[$];if(G.isExterior()){let Z=[G.points];for(let se=0;se<G.holeIds.length;se++)Z.push(B[G.holeIds[se]].points);U.push(Z)}}return U}function _y(c,o,u,h){const g=[],b=h===0?(w,A,D,P,B,U)=>{w.push(new Vt(U,D+(U-A)/(P-A)*(B-D)))}:(w,A,D,P,B,U)=>{w.push(new Vt(A+(U-D)/(B-D)*(P-A),U))};for(const w of c){const A=[];for(const D of w){if(D.length<=2)continue;const P=[];for(let $=0;$<D.length-1;$++){const G=D[$].x,Z=D[$].y,se=D[$+1].x,fe=D[$+1].y,ue=h===0?G:Z,pe=h===0?se:fe;ue<o?pe>o&&b(P,G,Z,se,fe,o):ue>u?pe<u&&b(P,G,Z,se,fe,u):P.push(D[$]),pe<o&&ue>=o&&b(P,G,Z,se,fe,o),pe>u&&ue<=u&&b(P,G,Z,se,fe,u)}let B=D[D.length-1];const U=h===0?B.x:B.y;U>=o&&U<=u&&P.push(B),P.length&&(B=P[P.length-1],P[0].x===B.x&&P[0].y===B.y||P.push(P[0]),A.push(P))}A.length&&g.push(A)}return g}function $T(c,o){const u=C1(yb(c),yb([o]),0);return u==null?[]:ep(u)}function fC(c,o){let h=yb(c,65536);const g=[];for(;o.valid();o.next()){const[b,w]=o.get(),A=b.x*65536,D=b.y*65536,P=w.x*65536,B=w.y*65536,U=P-A,$=B-D,G=Math.hypot(U,$);if(G===0)continue;const Z=Math.trunc($/G*3),se=-Math.trunc(U/G*3);g.push([[[A,D],[P,B],[P+Z,B+se],[A+Z,D+se],[A,D]]])}return g.length>0&&(h=C1(h,g,2)),ep(h,1/65536,128)}function yb(c,o=1){return[c.map(u=>u.map(h=>[h.x*o,h.y*o]))]}function ep(c,o=1,u){return c.map(h=>h.map((g,b)=>{const w=g.map(A=>{let D=A[0],P=A[1];return u&&(D=Math.round(D/u)*u,P=Math.round(P/u)*u),new Vt(D*o,P*o)._round()});return b>0&&w.reverse(),w}))}class kh{constructor(o,u){this.layoutVertexArray=new Rf,this.indexArray=new Xa,this.lineIndexArray=new Wl,this.triangleSegments=new Ii,this.lineSegments=new Ii,this.programConfigurations=new H(o.layers,{zoom:o.zoom,lut:o.lut}),this.uploaded=!1,u&&(this.elevatedLayoutVertexArray=new To)}update(o,u,h,g,b,w,A,D){this.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A,D)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Uk.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.lineIndexBuffer=o.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=o.createVertexBuffer(this.elevatedLayoutVertexArray,eC.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(o,u,h,g,b,w,A){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,u,h,g,b,w,void 0,A)}}class Lh{constructor(o){this.zoom=o.zoom,this.pixelRatio=o.pixelRatio,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lut=o.lut,this.bufferData=new kh(o,!1),this.elevationBufferData=new kh(o,!0),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=o.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference"),this.sourceLayerIndex=o.sourceLayerIndex,this.worldview=o.worldview,this.hasAppearances=null}updateFootprints(o,u){}updateAppearances(o,u,h,g){}populate(o,u,h,g){this.hasPattern=RT("fill",this.layers,this.pixelRatio,u);const b=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:A,id:D,index:P,sourceLayerIndex:B}of o){const U=this.layers[0]._featureFilter.needGeometry,$=Qn(A,U);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),$,h))continue;const G=b?b.evaluate($,{},h,u.availableImages):void 0,Z={id:D,properties:A.properties,type:A.type,sourceLayerIndex:B,index:P,geometry:U?$.geometry:Un(A,h,g),patterns:{},sortKey:G};w.push(Z)}b&&w.sort((A,D)=>A.sortKey-D.sortKey);for(const A of w){const{geometry:D,index:P,sourceLayerIndex:B}=A;if(this.hasPattern){const U=kT("fill",this.layers,A,this.zoom,this.pixelRatio,u);this.patternFeatures.push(U)}else this.addFeature(A,D,P,h,{},u.availableImages,u.brightness,u.elevationFeatures);u.featureIndex.insert(o[P].feature,D,P,B,this.index)}}update(o,u,h,g,b,w,A){this.bufferData.update(o,u,h,g,b,w,A,this.worldview),this.elevationBufferData.update(o,u,h,g,b,w,A,this.worldview),this.elevatedStructures&&this.elevatedStructures.update(o,u,h,g,b,w,A,this.worldview)}addFeatures(o,u,h,g,b,w){for(const A of this.patternFeatures)this.addFeature(A,A.geometry,A.index,u,h,g,w,o.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(o){this.bufferData.upload(o),this.elevationBufferData.upload(o),this.elevatedStructures&&this.elevatedStructures.upload(o)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(o,u,h,g,b,w=[],A,D){const P=pb(u,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(o,P,g,h,D):this.addGeometry(P,this.bufferData),this.bufferData.populatePaintArrays(o,h,b,w,g,A,this.worldview),this.elevationBufferData.populatePaintArrays(o,h,b,w,g,A,this.worldview)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}setEvaluatedPortalGraph(o,u,h,g,b){this.elevatedStructures&&(this.elevatedStructures.construct(o),this.elevatedStructures.populatePaintArrays(u,h,g,b,this.worldview))}addElevatedRoadFeature(o,u,h,g,b){const w=new Array,A=Zo.getElevationFeature(o,b);if(!A)return void this.addGeometry(u,this.bufferData);{const P=this.clipPolygonsToTile(u,1);P.length>0&&w.push({polygons:P,elevationFeature:A,elevationTileID:h})}const D={guardRailEnabled:this.layers[0].layout.get("fill-construct-bridge-guard-rail").evaluate(o,{},h),featureIndex:g};for(const P of w)if(P.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new Ds(P.elevationTileID,this.layers,this.zoom,this.lut));const U=P.elevationFeature.isTunnel();let $=0;o.properties.hasOwnProperty(er)&&($=+o.properties[er]),this.elevatedStructures.addPortalCandidates(P.elevationFeature.id,P.polygons,U,P.elevationFeature,$)}P.elevationFeature.constantHeight==null&&(P.polygons=this.prepareElevatedPolygons(P.polygons,P.elevationFeature,P.elevationTileID));const B=new Il(h,P.elevationTileID);this.addElevatedGeometry(P.polygons,B,P.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,g,D)}}addElevatedGeometry(o,u,h,g,b,w){const A={elevation:h,elevationSampler:u,bias:g,index:b,featureInfo:w},[D,P]=this.addGeometry(o,this.elevationBufferData,A);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:D,max:P}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,D),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,P))}addGeometry(o,u,h){let g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,w=null;h&&(w=h.elevationSampler.constantElevation(h.elevation,h.bias),w!=null&&(g=w,b=w));const A=(D,P,B)=>{if(h!=null)if(P.push(D),w!=null)u.elevatedLayoutVertexArray.emplaceBack(w),B.push(w);else{const U=h.elevationSampler.pointElevation(D,h.elevation,h.bias);u.elevatedLayoutVertexArray.emplaceBack(U),B.push(U),g=Math.min(g,U),b=Math.max(b,U)}};for(const D of o){let P=0;for(const ve of D)P+=ve.length;const B=u.triangleSegments.prepareSegment(P,u.layoutVertexArray,u.indexArray),U=B.vertexLength,$=[],G=[],Z=[],se=[],fe=[],ue=u.layoutVertexArray.length;for(const ve of D){if(ve.length===0)continue;ve!==D[0]&&G.push($.length/2);const Se=u.lineSegments.prepareSegment(ve.length,u.layoutVertexArray,u.lineIndexArray),ke=Se.vertexLength;h&&fe.push(u.layoutVertexArray.length-ue),A(ve[0],Z,se),u.layoutVertexArray.emplaceBack(ve[0].x,ve[0].y),u.lineIndexArray.emplaceBack(ke+ve.length-1,ke),$.push(ve[0].x),$.push(ve[0].y);for(let Ie=1;Ie<ve.length;Ie++)A(ve[Ie],Z,se),u.layoutVertexArray.emplaceBack(ve[Ie].x,ve[Ie].y),u.lineIndexArray.emplaceBack(ke+Ie-1,ke+Ie),$.push(ve[Ie].x),$.push(ve[Ie].y);Se.vertexLength+=ve.length,Se.primitiveLength+=ve.length}const pe=ac($,G);for(let ve=0;ve<pe.length;ve+=3)u.indexArray.emplaceBack(U+pe[ve],U+pe[ve+1],U+pe[ve+2]);if(pe.length>0&&h&&this.elevationMode==="hd-road-base"){const ve=h.elevation.isTunnel(),Se=h.elevation.safeArea,ke=this.elevatedStructures.addVertices(Z,se);this.elevatedStructures.addTriangles(pe,ke,ve);const Ie=fe.length;if(Ie>0){for(let Ve=0;Ve<Ie-1;Ve++)this.elevatedStructures.addRenderableRing(h.index,fe[Ve]+ke,fe[Ve+1]-fe[Ve],ve,Se,h.featureInfo);this.elevatedStructures.addRenderableRing(h.index,fe[Ie-1]+ke,Z.length-fe[Ie-1],ve,Se,h.featureInfo)}}B.vertexLength+=P,B.primitiveLength+=pe.length/3}return[g,b]}prepareElevatedPolygons(o,u,h){const g=1/qt(h),b=[];for(const w of o){const A=fC(w,new ul(u,g));b.push(...A)}return b}clipPolygonsToTile(o,u){const h=-u,g=-u,b=Jt+u,w=Jt+u;let A=0;const D=[],P=[];for(;A<o.length;A++){const $=o[A],G=Uu($);(G.min.x>=h&&G.max.x<=b&&G.min.y>=g&&G.max.y<=w?D:P).push($)}if(D.length===o.length)return o;const B=[new Vt(h,g),new Vt(b,g),new Vt(b,w),new Vt(h,w),new Vt(h,g)],U=D;for(const $ of P)U.push(...$T($,B));return U}}let _v,vv,tp,hC;Kt(Lh,"FillBucket",{omit:["layers","patternFeatures"]}),Kt(kh,"FillBufferData"),Kt(Ds,"ElevatedStructures");class _b{constructor(o,u,h,g){if(this.triangleCount=u.length/3,this.min=new Vt(0,0),this.max=new Vt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||o.length===0)return;const[b,w]=[o[0].clone(),o[0].clone()];for(let U=1;U<o.length;++U){const $=o[U];b.x=Math.min(b.x,$.x),b.y=Math.min(b.y,$.y),w.x=Math.max(w.x,$.x),w.y=Math.max(w.y,$.y)}if(g){const U=Math.ceil(Math.max(w.x-b.x,w.y-b.y)/g);h=Math.max(h,U)}if(h===0)return;this.min=b,this.max=w;const A=this.max.sub(this.min);A.x=Math.max(A.x,1),A.y=Math.max(A.y,1);const D=Math.max(A.x,A.y)/h;this.cellsX=Math.max(1,Math.ceil(A.x/D)),this.cellsY=Math.max(1,Math.ceil(A.y/D)),this.xScale=1/D,this.yScale=1/D;const P=[];for(let U=0;U<this.triangleCount;U++){const $=o[u[3*U+0]].sub(this.min),G=o[u[3*U+1]].sub(this.min),Z=o[u[3*U+2]].sub(this.min),se=gu(Math.floor(Math.min($.x,G.x,Z.x)),this.xScale,this.cellsX),fe=gu(Math.floor(Math.max($.x,G.x,Z.x)),this.xScale,this.cellsX),ue=gu(Math.floor(Math.min($.y,G.y,Z.y)),this.yScale,this.cellsY),pe=gu(Math.floor(Math.max($.y,G.y,Z.y)),this.yScale,this.cellsY),ve=new Vt(0,0),Se=new Vt(0,0),ke=new Vt(0,0),Ie=new Vt(0,0);for(let Ve=ue;Ve<=pe;++Ve){ve.y=Se.y=Ve*D,ke.y=Ie.y=(Ve+1)*D;for(let qe=se;qe<=fe;++qe)ve.x=ke.x=qe*D,Se.x=Ie.x=(qe+1)*D,(Ai($,G,Z,ve,Se,Ie)||Ai($,G,Z,ve,Ie,ke))&&P.push({cellIdx:Ve*this.cellsX+qe,triIdx:U})}}if(P.length===0)return;P.sort((U,$)=>U.cellIdx-$.cellIdx||U.triIdx-$.triIdx);let B=0;for(;B<P.length;){const U=P[B].cellIdx,$={start:this.payload.length,len:0};for(;B<P.length&&P[B].cellIdx===U;)++$.len,this.payload.push(P[B++].triIdx);this.cells[U]=$}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(o,u){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>o.x||o.y>this.max.y||this.min.y>o.y)return;const h=gu(o.x-this.min.x,this.xScale,this.cellsX),g=gu(o.y-this.min.y,this.yScale,this.cellsY),b=this.cells[g*this.cellsX+h];if(b){this._lazyInitLookup();for(let w=0;w<b.len;w++){const A=this.payload[b.start+w],D=Math.floor(A/8),P=1<<A%8;if(!(this.lookup[D]&P)&&(this.lookup[D]|=P,u.push(A),u.length===this.triangleCount))return}}}query(o,u,h){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>u.x||o.y>this.max.y||this.min.y>u.y)return;this._lazyInitLookup();const g=gu(o.x-this.min.x,this.xScale,this.cellsX),b=gu(u.x-this.min.x,this.xScale,this.cellsX),w=gu(o.y-this.min.y,this.yScale,this.cellsY),A=gu(u.y-this.min.y,this.yScale,this.cellsY);for(let D=w;D<=A;D++)for(let P=g;P<=b;P++){const B=this.cells[D*this.cellsX+P];if(B)for(let U=0;U<B.len;U++){const $=this.payload[B.start+U],G=Math.floor($/8),Z=1<<$%8;if(!(this.lookup[G]&Z)&&(this.lookup[G]|=Z,h.push($),h.length===this.triangleCount))return}}}}function gu(c,o,u){return Math.max(0,Math.min(u-1,Math.floor(c*o)))}Kt(_b,"TriangleGridIndex");class dC{constructor(o){this.zoom=o.zoom,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.footprints=[],this.worldview=o.worldview,this.hasAppearances=null}updateFootprints(o,u){for(const h of this.footprints)u.push({footprint:h,id:o})}updateAppearances(o,u,h,g){}populate(o,u,h,g){const b=[];for(const{feature:w,id:A,index:D,sourceLayerIndex:P}of o){const B=this.layers[0]._featureFilter.needGeometry,U=Qn(w,B);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),U,h))continue;const $={id:A,properties:w.properties,type:w.type,sourceLayerIndex:P,index:D,geometry:B?U.geometry:Un(w,h,g),patterns:{}};b.push($)}for(const w of b){const{geometry:A,index:D,sourceLayerIndex:P}=w;this.addFeature(w,A,D,h,{},u.availableImages,u.brightness),u.featureIndex.insert(o[D].feature,A,D,P,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(o){}update(o,u,h,g,b,w,A){}destroy(){}addFeature(o,u,h,g,b,w=[],A){for(const D of pb(u,2)){const P=[],B=[],U=[],$=new Vt(1/0,1/0),G=new Vt(-1/0,-1/0);for(const fe of D)if(fe.length!==0){fe!==D[0]&&U.push(B.length/2);for(let ue=0;ue<fe.length;ue++)B.push(fe[ue].x),B.push(fe[ue].y),P.push(fe[ue]),$.x=Math.min($.x,fe[ue].x),$.y=Math.min($.y,fe[ue].y),G.x=Math.max(G.x,fe[ue].x),G.y=Math.max(G.y,fe[ue].y)}const Z=ac(B,U),se=new _b(P,Z,8,256);this.footprints.push({vertices:P,indices:Z,grid:se,min:$,max:G})}}}Kt(dC,"ClipBucket",{omit:["layers"]});const pC=gr([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),M1=gr([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),mC=gr([{name:"a_flood_light_ground_radius",components:1,type:"Float32"}]),Wk=gr([{name:"a_centroid_pos",components:2,type:"Uint16"}]),D1=gr([{name:"a_join_normal_inside",components:3,type:"Int16"}]),I1=gr([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),gC=gr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:bv}=pC,xv=Number.MAX_SAFE_INTEGER,VT=xv-1;function vb(c,o,u,h){return c.order<o||c.order===xv||!(c.clipMask&u)||(function(g,b){return b.length!==0&&b.find(w=>w===g)===void 0})(h,c.clipScope)}function bb(c,o){return c.x-o.x||c.y-o.y}function yC(c,o){return bb(c.min,o.min)===0&&bb(c.max,o.max)===0}function wv(c,o){return!(c.min.x>o.max.x||c.max.x<o.min.x||c.min.y>o.max.y||c.max.y<o.min.y)}function m(c,o){if(c.length!==o.length)return!1;for(let u=0;u<c.length;u++)if(c[u].sourceId!==o[u].sourceId||!yC(c[u],o[u])||c[u].order!==o[u].order||c[u].clipMask!==o[u].clipMask||!Tc(c[u].clipScope,o[u].clipScope))return!1;return!0}function x(c,o,u){const h=1/Jt,g=1/(1<<u.canonical.z),b=(o.x*h+u.canonical.x)*g+u.wrap,w=(o.y*h+u.canonical.y)*g;return{min:new Vt((c.x*h+u.canonical.x)*g+u.wrap,(c.y*h+u.canonical.y)*g),max:new Vt(b,w)}}function C(c,o,u){const h=1<<u.canonical.z,g=((o.x-u.wrap)*h-u.canonical.x)*Jt,b=(o.y*h-u.canonical.y)*Jt;return{min:new Vt(((c.x-u.wrap)*h-u.canonical.x)*Jt,(c.y*h-u.canonical.y)*Jt),max:new Vt(g,b)}}function z(c,o,u,h,g,b,w){const A=c.indices,D=c.vertices,P=[];for(let B=h;B<h+g;B+=3){const U=o[u[B+0]+b],$=o[u[B+1]+b],G=o[u[B+2]+b],Z=Math.min(U.x,$.x,G.x),se=Math.max(U.x,$.x,G.x),fe=Math.min(U.y,$.y,G.y),ue=Math.max(U.y,$.y,G.y);P.length=0,c.grid.query(new Vt(Z,fe),new Vt(se,ue),P);for(let pe=0;pe<P.length;pe++){const ve=P[pe];if(Ai(D[A[3*ve+0]],D[A[3*ve+1]],D[A[3*ve+2]],U,$,G,w))return!0}}return!1}function Y(c,o,u,h){if(!c||!u)return!1;let g=c.vertices;if(!o.canonical.equals(h.canonical)||o.wrap!==h.wrap){if(u.vertices.length<c.vertices.length)return Y(u,h,c,o);const b=o.canonical,w=h.canonical,A=Math.pow(2,w.z-b.z);g=c.vertices.map(D=>new Vt((D.x+b.x*Jt)*A-w.x*Jt,(D.y+b.y*Jt)*A-w.y*Jt))}return z(u,g,c.indices,0,c.indices.length,0,0)}function ne(c,o,u,h){const g=Math.pow(2,h.z-u.z);return new Vt((c+u.x*Jt)*g-h.x*Jt,(o+u.y*Jt)*g-h.y*Jt)}function Te(c,o){const u=[];o.grid.queryPoint(c,u);const h=o.indices,g=o.vertices;for(let b=0;b<u.length;b++){const w=u[b];if(fl([g[h[3*w+0]],g[h[3*w+1]],g[h[3*w+2]]],c))return!0}return!1}const Xe=[new Vt(0,0),new Vt(Jt,0),new Vt(Jt,Jt),new Vt(0,Jt)];function St(c,o){const u=[];let h=[];if(!o||c.length<2)return[c];if(c.length===2)return ic(c[0],c[1],Xe)?[c]:[];for(let g=0;g<c.length+2;g++){const b=c[g%c.length],w=c[(g+1)%c.length],A=ic(g===0?c[c.length-1]:c[(g-1)%c.length],b,Xe),D=ic(b,w,Xe),P=A||D;P&&h.push(b),P&&D||h.length>0&&(h.length>1&&u.push(h),h=[])}return h.length>1&&u.push(h),u}const Qt=yr.types,mn=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],wn=["fill-extrusion-flood-light-ground-radius"],en=Math.pow(2,13),ln=Math.pow(2,15)-1,cr=new Vt(0,1),Sr=2147483648;function ha(c,o,u,h,g,b,w,A){c.emplaceBack((o<<1)+w,(u<<1)+b,(Math.floor(h*en)<<1)+g,Math.round(A))}function Bt(c,o,u){c.emplaceBack(o.x*Jt,o.y*Jt,u?1:0)}function Ot(c,o,u,h,g,b){c.emplaceBack(o.x,o.y,(u.x<<1)+h,(u.y<<1)+g,b)}function Zt(c,o,u){c.emplaceBack(o.x,o.y,o.z,u[0]*16384,u[1]*16384,u[2]*16384)}class bn{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class Dr{constructor(){this.centroidXY=new Vt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Vt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Vt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0,this.buildingId=0}span(){return new Vt(this.max.x-this.min.x,this.max.y-this.min.y)}}class ea{constructor(){this.acc=new Vt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(o,u){o.min.x===Number.MAX_VALUE&&(o.min.x=o.max.x=u.x,o.min.y=o.max.y=u.y)}appendEdge(o,u,h){this.accCount++,this.acc._add(u);let g=!!this.borders;u.x<o.min.x?(o.min.x=u.x,g=!0):u.x>o.max.x&&(o.max.x=u.x,g=!0),u.y<o.min.y?(o.min.y=u.y,g=!0):u.y>o.max.y&&(o.max.y=u.y,g=!0),((u.x===0||u.x===Jt)&&u.x===h.x)!=((u.y===0||u.y===Jt)&&u.y===h.y)&&this.processBorderOverlap(u,h),g&&this.checkBorderIntersection(u,h)}checkBorderIntersection(o,u){u.x<0!=o.x<0&&this.addBorderIntersection(0,Vn(u.y,o.y,(0-u.x)/(o.x-u.x))),u.x>Jt!=o.x>Jt&&this.addBorderIntersection(1,Vn(u.y,o.y,(Jt-u.x)/(o.x-u.x))),u.y<0!=o.y<0&&this.addBorderIntersection(2,Vn(u.x,o.x,(0-u.y)/(o.y-u.y))),u.y>Jt!=o.y>Jt&&this.addBorderIntersection(3,Vn(u.x,o.x,(Jt-u.y)/(o.y-u.y)))}addBorderIntersection(o,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[o];u<h[0]&&(h[0]=u),u>h[1]&&(h[1]=u)}processBorderOverlap(o,u){if(o.x===u.x){if(o.y===u.y)return;const h=o.x===0?0:1;this.addBorderIntersection(h,u.y),this.addBorderIntersection(h,o.y)}else{const h=o.y===0?2:3;this.addBorderIntersection(h,u.x),this.addBorderIntersection(h,o.x)}}centroid(){return this.accCount===0?new Vt(0,0):new Vt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((o,u)=>o+ +(u[0]!==Number.MAX_VALUE),0):0}}function _r(c,o){const u=c.add(o)._unit(),h=ze(c.x*u.x+c.y*u.y,-1,1);var g,b,w;return w=Math.acos(h),Math.min(4,Math.max(-4,Math.tan(w)))/4*ln*((g=c).x*(b=o).y-g.y*b.x<0?-1:1)}const vi=[c=>c.x<0,c=>c.x>Jt,c=>c.y<0,c=>c.y>Jt];function Ni(c,o,u,h){const g=[4];if(h===0)return g;u._mult(h);const b=c.sub(u),w=o.sub(u),A=[c,o,b,w];for(let D=0;D<4;D++)for(const P of A)if(vi[D](P)){g.push(D);break}return g}class Zi{constructor(o){this.groundRadiusArray=null,this.groundRadiusBuffer=null,this.vertexArray=new lo,this.indexArray=new Xa,this.programConfigurations=new H(o.layers,{zoom:o.zoom,lut:o.lut},u=>wn.includes(u)),this._segments=new Ii,this.hiddenByLandmarkVertexArray=new ly,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Ii}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(o,u,h,g=!1){const b=o.length;if(b>2){let w=Math.max(0,this._segments.get().length-1);const A=this._segments._prepareSegment(4*b,this.vertexArray.length,2*this._segmentToGroundQuads[w].length);let D;w!==this._segments.get().length-1&&(w++,this._segmentToGroundQuads[w]=[],this._segmentToRegionTriCounts[w]=[0,0,0,0,0]);{const P=o[0],B=o[1];D=_r(P.sub(o[b-1])._perp()._unit(),B.sub(P)._perp()._unit())}for(let P=0;P<b;P++){const B=P===b-1?0:P+1,U=o[P],$=o[B],G=o[B===b-1?0:B+1],Z=$.sub(U)._perp()._unit(),se=_r(Z,G.sub($)._perp()._unit()),fe=D,ue=se;if(Xk(U,$,u)||g&&s9(U,u)&&s9($,u)){D=se;continue}const pe=A.vertexLength;Ot(this.vertexArray,U,$,1,1,fe),Ot(this.vertexArray,U,$,1,0,fe),Ot(this.vertexArray,U,$,0,1,ue),Ot(this.vertexArray,U,$,0,0,ue),A.vertexLength+=4;const ve=Ni(U,$,Z,h);for(const Se of ve)this._segmentToGroundQuads[w].push({id:pe,region:Se}),this._segmentToRegionTriCounts[w][Se]+=2,A.primitiveLength+=2;D=se}}}prepareBorderSegments(){if(!this.hasData())return;const o=this._segments.get(),u=o.length;for(let h=0;h<u;h++)this._segmentToGroundQuads[h].sort((g,b)=>g.region-b.region);for(let h=0;h<u;h++){const g=this._segmentToGroundQuads[h],b=o[h],w=this._segmentToRegionTriCounts[h];w.reduce((D,P)=>D+P,0);let A=0;for(let D=0;D<=4;D++){const P=w[D];if(P!==0){let B=this.regionSegments[D];B||(B=this.regionSegments[D]=new Ii);const U={vertexOffset:b.vertexOffset,primitiveOffset:b.primitiveOffset+A,vertexLength:b.vertexLength,primitiveLength:P};B.get().push(U)}A+=P}for(let D=0;D<g.length;D++){const P=g[D].id;this.indexArray.emplaceBack(P,P+1,P+3),this.indexArray.emplaceBack(P,P+3,P+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(o,u,h,g,b,w,A){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,o,u,h,g,b,w,void 0,A)}upload(o){this.hasData()&&(this.vertexBuffer=o.createVertexBuffer(this.vertexArray,M1.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.groundRadiusArray!=null&&(this.groundRadiusBuffer=o.createVertexBuffer(this.groundRadiusArray,mC.members)))}uploadPaintProperties(o){this.hasData()&&this.programConfigurations.upload(o)}update(o,u,h,g,b,w,A,D){this.hasData()&&this.programConfigurations.updatePaintArrays(o,u,h,g,b,w,A,D)}updateHiddenByLandmark(o){this.updateHiddenByLandmarkRange(o.groundVertexArrayOffset,o.groundVertexCount,!!(o.flags&Sr))}updateHiddenByLandmarkRange(o,u,h){if(!this.hasData())return;const g=u+o;if(u!==0){for(let b=o;b<g;++b)this.hiddenByLandmarkVertexArray.emplace(b,h?1:0);this._needsHiddenByLandmarkUpdate=!0}}uploadHiddenByLandmark(o){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=o.createVertexBuffer(this.hiddenByLandmarkVertexArray,I1.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this.groundRadiusBuffer&&this.groundRadiusBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let o=0;o<=4;o++){const u=this.regionSegments[o];u&&u.destroy()}}}}class Bf{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.pixelRatio=o.pixelRatio,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Xa,this.footprintVertices=new Rf,this.footprintSegments=[],this.layoutVertexArray=new $c,this.centroidVertexArray=new Lf,this.wallVertexArray=new Z0,this.indexArray=new Xa,this.programConfigurations=new H(o.layers,{zoom:o.zoom,lut:o.lut},u=>mn.includes(u)),this.segments=new Ii,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.groundEffect=new Zi(o),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[],this.worldview=o.worldview,this.hasAppearances=null}updateFootprints(o,u){}updateAppearances(o,u,h,g){}populate(o,u,h,g){this.features=[],this.hasPattern=RT("fill-extrusion",this.layers,this.pixelRatio,u),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=qt(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:b,id:w,index:A,sourceLayerIndex:D}of o){const P=this.layers[0]._featureFilter.needGeometry,B=Qn(b,P);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),B,h))continue;const U={id:w,sourceLayerIndex:D,index:A,geometry:P?B.geometry:Un(b,h,g),properties:b.properties,type:b.type,patterns:{}},$=this.layoutVertexArray.length,G=Qt[U.type]==="Polygon";if(this.hasPattern)this.features.push({featureId:b.id,feature:kT("fill-extrusion",this.layers,U,this.zoom,this.pixelRatio,u)});else if(this.wallMode)for(const Z of U.geometry)for(const se of St(Z,G))this.addFeature(b.id,U,[se],A,h,{},u.availableImages,g,u.brightness);else this.addFeature(b.id,U,U.geometry,A,h,{},u.availableImages,g,u.brightness);u.featureIndex.insert(b,U.geometry,A,D,this.index,$)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(o,u,h,g,b,w){for(const{featureId:A,feature:D}of this.features){const P=Qt[D.type]==="Polygon",{geometry:B}=D;if(this.wallMode)for(const U of B)for(const $ of St(U,P))this.addFeature(A,D,[$],D.index,u,h,g,b,w);else this.addFeature(A,D,B,D.index,u,h,g,b,w)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(o,u,h,g,b,w,A){this.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A,this.worldview),this.groundEffect.update(o,u,b,h,g,w,A,this.worldview)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,bv),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.wallVertexBuffer=o.createVertexBuffer(this.wallVertexArray,D1.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,gC.members,!0)),this.groundEffect.upload(o)),this.groundEffect.uploadPaintProperties(o),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.groundEffect.uploadHiddenByLandmark(o),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,Wk.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,u,h,g,b,w,A,D,P){const B=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(u,{})/this.tileToMeter,U=[new Vt(0,0),new Vt(Jt,Jt)],$=D.projection,G=$.name==="globe",Z=this.wallMode||Qt[u.type]==="Polygon",se=new ea;se.centroidDataIndex=this.centroidData.length;const fe=new Dr;fe.buildingId=o,u.properties&&u.properties.hasOwnProperty("building_id")&&(fe.buildingId=Number(u.properties.building_id));const ue=this.layers[0].paint.get("fill-extrusion-base").evaluate(u,{},b)<=0,pe=this.layers[0].paint.get("fill-extrusion-height").evaluate(u,{},b);let ve;if(fe.height=pe,fe.vertexArrayOffset=this.layoutVertexArray.length,fe.groundVertexArrayOffset=this.groundEffect.vertexArray.length,G&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Vd),this.wallMode){if(G)return void Hn("Non zero fill-extrusion-line-width is not yet supported on globe.");if(h.length!==1)return;ve=(function(Ze){const rt=Ze[0].x===Ze[Ze.length-1].x&&Ze[0].y===Ze[Ze.length-1].y;(function(nn){let an=0;const kn=nn.length;for(let Cn=0;Cn<kn;Cn++)an+=(nn[(Cn+1)%kn].x-nn[Cn].x)*(nn[(Cn+1)%kn].y+nn[Cn].y);return an>=0})(Ze)||(Ze=Ze.reverse());const xt={geometry:[],joinNormals:[],indices:[]},Tt=[],kt=[],Pt=[];let Rt=Ze.length;for(;Rt>=2&&Ze[Rt-1].equals(Ze[Rt-2]);)Rt--;if(Rt<(rt?3:2))return xt;let vt,zt,Mt,Nt,Lt,fn=0;for(;fn<Rt-1&&Ze[fn].equals(Ze[fn+1]);)fn++;rt&&(vt=Ze[Rt-2],Lt=Ze[fn].sub(vt)._unit()._perp());for(let nn=fn;nn<Rt;nn++){if(Mt=nn===Rt-1?rt?Ze[fn+1]:void 0:Ze[nn+1],Mt&&Ze[nn].equals(Mt))continue;Lt&&(Nt=Lt),vt&&(zt=vt),vt=Ze[nn],Lt=Mt?Mt.sub(vt)._unit()._perp():Nt,Nt=Nt||Lt;let an=Nt.add(Lt);an.x===0&&an.y===0||an._unit();const kn=an.x*Lt.x+an.y*Lt.y,Cn=kn!==0?1/kn:1/0,cn=Nt.x*Lt.y-Nt.y*Lt.x>0;let Wn="miter";const vr=2;Wn==="miter"&&Cn>vr&&(Wn="bevel"),Wn==="bevel"&&(Cn>100&&(Wn="flipbevel"),Cn<vr&&(Wn="miter"));const Zr=(pr,di,kr,Ra)=>{const Ur=new Vt(pr.x,pr.y),ui=new Vt(pr.x,pr.y);Ur.x+=di.x*Ra,Ur.y+=di.y*Ra,ui.x-=di.x*Math.max(kr,1),ui.y-=di.y*Math.max(kr,1),Pt.push(di),Tt.push(Ur),kt.push(ui)};if(Wn==="miter")an._mult(Cn),Zr(vt,an,0,0);else if(Wn==="flipbevel")an=Lt.mult(-1),Zr(vt,an,0,0),Zr(vt,an.mult(-1),0,0);else{const pr=-Math.sqrt(Cn*Cn-1),di=cn?pr:0,kr=cn?0:pr;zt&&Zr(vt,Nt,di,kr),Mt&&Zr(vt,Lt,di,kr)}}xt.geometry=[...Tt,...kt.reverse(),Tt[0]],xt.joinNormals=[...Pt,...Pt.reverse(),Pt[Pt.length-1]];const pn=xt.geometry.length-1;for(let nn=0;nn<pn/2;nn++)if(nn+1<pn/2){let an=nn,kn=nn+1,Cn=pn-1-nn,cn=pn-2-nn;an=an===0?pn-1:an-1,kn=kn===0?pn-1:kn-1,Cn=Cn===0?pn-1:Cn-1,cn=cn===0?pn-1:cn-1,xt.indices.push(Cn),xt.indices.push(kn),xt.indices.push(an),xt.indices.push(Cn),xt.indices.push(cn),xt.indices.push(kn)}return xt})(h[0]),h=[ve.geometry]}const Se=(Ze,rt)=>Ze<(rt.length-1)/2||Ze===rt.length-1,ke=this.wallMode?[h]:pb(h,500);for(let Ze=ke.length-1;Ze>=0;Ze--){const rt=ke[Ze];(rt.length===0||Lye(rt[0]))&&ke.splice(Ze,1)}let Ie;if(G)Ie=f9(ke,U,b);else{Ie=[];for(const Ze of ke)Ie.push({polygon:Ze,bounds:U})}const Ve=Z?this.edgeRadius:0,qe=Ve>0&&this.zoom<17,Ue=(Ze,rt)=>{if(Ze.length===0)return!1;const Et=Ze[Ze.length-1];return rt.x===Et.x&&rt.y===Et.y};for(const{polygon:Ze,bounds:rt}of Ie){let Et=0,xt=0;for(const Rt of Ze)Z&&!Rt[0].equals(Rt[Rt.length-1])&&Rt.push(Rt[0]),xt+=Z?Rt.length-1:Rt.length;const Tt=this.segments.prepareSegment((Z?5:4)*xt,this.layoutVertexArray,this.indexArray);fe.footprintSegIdx<0&&(fe.footprintSegIdx=this.footprintSegments.length),fe.polygonSegIdx<0&&(fe.polygonSegIdx=this.polygonSegments.length);const kt={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Pt=new bn;if(Pt.vertexOffset=this.footprintVertices.length,Pt.indexOffset=3*this.footprintIndices.length,Pt.ringIndices=[],Z){const Rt=[],vt=[];Et=Tt.vertexLength;for(let Mt=0;Mt<Ze.length;Mt++){const Nt=Ze[Mt];Nt.length&&Mt!==0&&vt.push(Rt.length/2);const Lt=[];let fn,pn;fn=Nt[1].sub(Nt[0])._perp()._unit(),Pt.ringIndices.push(Nt.length-1);for(let nn=1;nn<Nt.length;nn++){const an=Nt[nn],kn=Nt[nn===Nt.length-1?1:nn+1],Cn=an.clone();if(Ve){pn=kn.sub(an)._perp()._unit();const cn=fn.add(pn)._unit(),Wn=Ve*Math.min(4,1/(fn.x*cn.x+fn.y*cn.y));Cn.x+=Wn*cn.x,Cn.y+=Wn*cn.y,Cn.x=Math.round(Cn.x),Cn.y=Math.round(Cn.y),fn=pn}if(!ue||Ve!==0&&!qe||Ue(Lt,Cn)||Lt.push(Cn),ha(this.layoutVertexArray,Cn.x,Cn.y,0,0,1,1,0),this.wallMode){const cn=Se(nn,Nt);Bt(this.wallVertexArray,ve.joinNormals[nn],!cn)}Tt.vertexLength++,this.footprintVertices.emplaceBack(an.x,an.y),Rt.push(an.x,an.y),G&&Zt(this.layoutVertexExtArray,$.projectTilePoint(Cn.x,Cn.y,b),$.upVector(b,Cn.x,Cn.y))}ue&&(Ve===0||qe)&&(Lt.length!==0&&Ue(Lt,Lt[0])&&Lt.pop(),this.groundEffect.addData(Lt,rt,B))}const zt=this.wallMode?ve.indices:ac(Rt,vt);for(let Mt=0;Mt<zt.length;Mt+=3)this.footprintIndices.emplaceBack(Pt.vertexOffset+zt[Mt+0],Pt.vertexOffset+zt[Mt+1],Pt.vertexOffset+zt[Mt+2]),this.indexArray.emplaceBack(Et+zt[Mt],Et+zt[Mt+2],Et+zt[Mt+1]),Tt.primitiveLength++;Pt.indexCount+=zt.length,Pt.vertexCount+=this.footprintVertices.length-Pt.vertexOffset}for(let Rt=0;Rt<Ze.length;Rt++){const vt=Ze[Rt];se.startRing(fe,vt[0]);let zt=vt.length>4&&l9(vt[vt.length-2],vt[0],vt[1]),Mt=Ve?kye(vt[vt.length-2],vt[0],vt[1],Ve):0;const Nt=[];let Lt,fn,pn;fn=vt[1].sub(vt[0])._perp()._unit();let nn=!0;for(let an=1,kn=0;an<vt.length;an++){let Cn=vt[an-1],cn=vt[an];const Wn=vt[an===vt.length-1?1:an+1];if(se.appendEdge(fe,cn,Cn),Xk(cn,Cn,rt)){Ve&&(fn=Wn.sub(cn)._perp()._unit(),nn=!nn);continue}const vr=cn.sub(Cn)._perp(),Zr=vr.x/(Math.abs(vr.x)+Math.abs(vr.y)),pr=vr.y>0?1:0,di=Cn.dist(cn);if(kn+di>32768&&(kn=0),Ve){pn=Wn.sub(cn)._perp()._unit();let ui=o9(Cn,cn,Wn,_C(fn,pn),Ve);isNaN(ui)&&(ui=0);const Vi=cn.sub(Cn)._unit();Cn=Cn.add(Vi.mult(Mt))._round(),cn=cn.add(Vi.mult(-ui))._round(),Mt=ui,fn=pn,ue&&this.zoom>=17&&(Ue(Nt,Cn)||Nt.push(Cn),Ue(Nt,cn)||Nt.push(cn))}const kr=Tt.vertexLength,Ra=vt.length>4&&l9(Cn,cn,Wn);let Ur=u9(kn,zt,nn);if(ha(this.layoutVertexArray,Cn.x,Cn.y,Zr,pr,0,0,Ur),ha(this.layoutVertexArray,Cn.x,Cn.y,Zr,pr,0,1,Ur),this.wallMode){const ui=Se(an-1,vt),Vi=ve.joinNormals[an-1];Bt(this.wallVertexArray,Vi,ui),Bt(this.wallVertexArray,Vi,ui)}if(kn+=di,Ur=u9(kn,Ra,!nn),zt=Ra,ha(this.layoutVertexArray,cn.x,cn.y,Zr,pr,0,0,Ur),ha(this.layoutVertexArray,cn.x,cn.y,Zr,pr,0,1,Ur),this.wallMode){const ui=Se(an,vt),Vi=ve.joinNormals[an];Bt(this.wallVertexArray,Vi,ui),Bt(this.wallVertexArray,Vi,ui)}if(Tt.vertexLength+=4,this.indexArray.emplaceBack(kr+0,kr+1,kr+2),this.indexArray.emplaceBack(kr+1,kr+3,kr+2),Tt.primitiveLength+=2,Ve){const ui=Et+(an===1?vt.length-2:an-2),Vi=an===1?Et:ui+1;if(this.indexArray.emplaceBack(kr+1,ui,kr+3),this.indexArray.emplaceBack(ui,Vi,kr+3),Tt.primitiveLength+=2,Lt===void 0&&(Lt=kr),!Xk(Wn,vt[an],rt)){const ta=an===vt.length-1?Lt:Tt.vertexLength;this.indexArray.emplaceBack(kr+2,kr+3,ta),this.indexArray.emplaceBack(kr+3,ta+1,ta),this.indexArray.emplaceBack(kr+3,Vi,ta+1),Tt.primitiveLength+=3}nn=!nn}if(G){const ui=this.layoutVertexExtArray,Vi=$.projectTilePoint(Cn.x,Cn.y,b),ta=$.projectTilePoint(cn.x,cn.y,b),na=$.upVector(b,Cn.x,Cn.y),ka=$.upVector(b,cn.x,cn.y);Zt(ui,Vi,na),Zt(ui,Vi,na),Zt(ui,ta,ka),Zt(ui,ta,ka)}}Z&&(Et+=vt.length-1),ue&&Ve&&this.zoom>=17&&(Nt.length!==0&&Ue(Nt,Nt[0])&&Nt.pop(),this.groundEffect.addData(Nt,rt,B,Ve>0))}this.footprintSegments.push(Pt),kt.triangleCount=this.indexArray.length-kt.triangleArrayOffset,this.polygonSegments.push(kt),++fe.footprintSegLen,++fe.polygonSegLen}if(fe.vertexCount=this.layoutVertexArray.length-fe.vertexArrayOffset,fe.groundVertexCount=this.groundEffect.vertexArray.length-fe.groundVertexArrayOffset,fe.vertexCount!==0){if(fe.centroidXY=se.borders?cr:this.encodeCentroid(se,fe),this.centroidData.push(fe),se.borders){this.featuresOnBorder.push(se);const Ze=this.featuresOnBorder.length-1;for(let rt=0;rt<se.borders.length;rt++)se.borders[rt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[rt].push(Ze)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,w,A,b,P,void 0,this.worldview),this.groundEffect.addPaintPropertiesData(u,g,w,A,b,P,this.worldview),this.maxHeight=Math.max(this.maxHeight,pe)}}sortBorders(){for(let o=0;o<this.borderFeatureIndices.length;o++)this.borderFeatureIndices[o].sort((u,h)=>this.featuresOnBorder[u].borders[o][0]-this.featuresOnBorder[h].borders[o][0])}splitToSubtiles(){const o=[];for(let A=0;A<this.centroidData.length;A++){const D=this.centroidData[A],P=+(D.min.y+D.max.y>Jt),B=2*P+(+(D.min.x+D.max.x>Jt)^P);for(let U=0;U<D.polygonSegLen;U++){const $=D.polygonSegIdx+U;o.push({centroidIdx:A,subtile:B,polygonSegmentIdx:$,triangleSegmentIdx:this.polygonSegments[$].triangleSegIdx})}}const u=new Xa;o.sort((A,D)=>A.triangleSegmentIdx===D.triangleSegmentIdx?A.subtile-D.subtile:A.triangleSegmentIdx-D.triangleSegmentIdx);let h=0,g=0,b=0;for(const A of o){if(A.triangleSegmentIdx!==h)break;b++}const w=o.length;for(;g!==o.length;){h=o[g].triangleSegmentIdx;let A=0,D=g,P=g;for(let B=D;B<b&&o[B].subtile===A;B++)P++;for(;D!==b;){const B=o[D];A=B.subtile;const U=this.centroidData[B.centroidIdx].min.clone(),$=this.centroidData[B.centroidIdx].max.clone(),G={vertexOffset:this.segments.segments[h].vertexOffset,primitiveOffset:u.length,vertexLength:this.segments.segments[h].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let Z=D;Z<P;Z++){const se=o[Z],fe=this.polygonSegments[se.polygonSegmentIdx],ue=this.centroidData[se.centroidIdx].min,pe=this.centroidData[se.centroidIdx].max,ve=this.indexArray.uint16;for(let Se=fe.triangleArrayOffset;Se<fe.triangleArrayOffset+fe.triangleCount;Se++)u.emplaceBack(ve[3*Se],ve[3*Se+1],ve[3*Se+2]);G.primitiveLength+=fe.triangleCount,U.x=Math.min(U.x,ue.x),U.y=Math.min(U.y,ue.y),$.x=Math.max($.x,pe.x),$.y=Math.max($.y,pe.y)}G.primitiveLength>0&&this.triangleSubSegments.push({segment:G,min:U,max:$}),D=P;for(let Z=D;Z<b&&o[Z].subtile===o[D].subtile;Z++)P++}g=b;for(let B=g;B<w&&o[B].triangleSegmentIdx===o[g].triangleSegmentIdx;B++)b++}u._trim(),this.indexArray=u}getVisibleSegments(o,u,h){const g=new Ii;if(this.wallMode){for(const se of this.triangleSubSegments)g.segments.push(se.segment);return g}let b=0,w=0;const A=1<<o.canonical.z;if(u){const se=u.getMinMaxForTile(o);se&&(b=se.min,w=se.max)}w+=this.maxHeight;const D=o.toUnwrapped();let P;const B=[D.canonical.x/A+D.wrap,D.canonical.y/A],U=[(D.canonical.x+1)/A+D.wrap,(D.canonical.y+1)/A],$=(se,fe,ue)=>[se[0]*(1-ue[0])+fe[0]*ue[0],se[1]*(1-ue[1])+fe[1]*ue[1]],G=[],Z=[];for(const se of this.triangleSubSegments){G[0]=se.min.x/Jt,G[1]=se.min.y/Jt,Z[0]=se.max.x/Jt,Z[1]=se.max.y/Jt;const fe=$(B,U,G),ue=$(B,U,Z);if(new Hr([fe[0],fe[1],b],[ue[0],ue[1],w]).intersectsPrecise(h)===0){P&&(g.segments.push(P),P=void 0);continue}const pe=se.segment;P&&P.vertexOffset!==pe.vertexOffset&&(g.segments.push(P),P=void 0),P?(P.vertexLength+=pe.vertexLength,P.primitiveLength+=pe.primitiveLength):P={vertexOffset:pe.vertexOffset,primitiveLength:pe.primitiveLength,vertexLength:pe.vertexLength,primitiveOffset:pe.primitiveOffset,sortKey:void 0,vaos:{}}}return P&&g.segments.push(P),g}encodeCentroid(o,u){const h=o.centroid(),g=u.span(),b=Math.min(7,Math.round(g.x*this.tileToMeter/10)),w=Math.min(7,Math.round(g.y*this.tileToMeter/10));return new Vt(ze(h.x,1,8191)<<3|b,ze(h.y,1,8191)<<3|w)}encodeBorderCentroid(o){if(!o.borders)return new Vt(0,0);const u=o.borders,h=Number.MAX_VALUE;if(u[0][0]!==h||u[1][0]!==h){const g=u[0][0]!==h?0:1;return new Vt(6|(u[0][0]!==h?0:65528),(u[g][0]+u[g][1])/2<<3|6)}{const g=u[2][0]!==h?2:3;return new Vt((u[g][0]+u[g][1])/2<<3|6,6|(u[2][0]!==h?0:65528))}}showCentroid(o){const u=this.centroidData[o.centroidDataIndex];u.flags&=2147483647,u.centroidXY.x=0,u.centroidXY.y=0,this.writeCentroidToBuffer(u)}writeCentroidToBuffer(o){this.groundEffect.updateHiddenByLandmark(o);const u=o.vertexArrayOffset,h=o.vertexCount+o.vertexArrayOffset,g=o.flags&Sr?cr:o.centroidXY,b=this.centroidVertexArray.geta_centroid_pos0(u);if(this.centroidVertexArray.geta_centroid_pos1(u)!==g.y||b!==g.x){for(let w=u;w<h;++w)this.centroidVertexArray.emplace(w,g.x,g.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const o of this.centroidData)this.writeCentroidToBuffer(o)}updateReplacement(o,u,h){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const g=u.getReplacementRegionsForTile(o.toUnwrapped());if(m(this.activeReplacements,g))return;if(this.activeReplacements=g,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const w of this.centroidData)w.flags&=2147483647;const b=[];for(const w of this.activeReplacements){if(w.order<h)continue;const A=Math.max(1,Math.pow(2,w.footprintTileId.canonical.z-o.canonical.z));if(w.footprint.buildingIds)for(const D of this.centroidData)D.flags&Sr||w.min.x>D.max.x||D.min.x>w.max.x||w.min.y>D.max.y||D.min.y>w.max.y||w.footprint.buildingIds.has(D.buildingId)&&(D.flags|=Sr);else for(const D of this.centroidData)if(!(D.flags&Sr||w.min.x>D.max.x||D.min.x>w.max.x||w.min.y>D.max.y||D.min.y>w.max.y))for(let P=0;P<D.footprintSegLen;P++){const B=this.footprintSegments[D.footprintSegIdx+P];if(b.length=0,zye(this.footprintVertices,B.vertexOffset,B.vertexCount,w.footprintTileId.canonical,o.canonical,b),z(w.footprint,b,this.footprintIndices.uint16,B.indexOffset,B.indexCount,-B.vertexOffset,-A)){D.flags|=Sr;break}}}for(const w of this.centroidData)this.writeCentroidToBuffer(w);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(o,u,h){let g=!1;for(let b=0;b<h.footprintSegLen;b++){const w=this.footprintSegments[h.footprintSegIdx+b];let A=0;for(const D of w.ringIndices){for(let P=A,B=D+A-1;P<D+A;B=P++){const U=this.footprintVertices.int16[2*(P+w.vertexOffset)+0],$=this.footprintVertices.int16[2*(P+w.vertexOffset)+1],G=this.footprintVertices.int16[2*(B+w.vertexOffset)+1];$>u!=G>u&&o<(this.footprintVertices.int16[2*(B+w.vertexOffset)+0]-U)*(u-$)/(G-$)+U&&(g=!g)}A=D}}return g}getHeightAtTileCoord(o,u){let h=Number.NEGATIVE_INFINITY,g=!0;const b=4*(o+Jt)*Jt+(u+Jt);if(this.partLookup.hasOwnProperty(b)){const w=this.partLookup[b];return w?{height:w.height,hidden:!!(w.flags&Sr)}:void 0}for(const w of this.centroidData)o>w.max.x||w.min.x>o||u>w.max.y||w.min.y>u||w.height<=h||this.footprintContainsPoint(o,u,w)&&(h=w.height,this.partLookup[b]=w,g=!!(w.flags&Sr));if(h!==Number.NEGATIVE_INFINITY)return{height:h,hidden:g};this.partLookup[b]=void 0}}function _C(c,o){const u=c.add(o)._unit();return c.x*u.x+c.y*u.y}function kye(c,o,u,h){const g=o.sub(c)._perp()._unit(),b=u.sub(o)._perp()._unit();return o9(c,o,u,_C(g,b),h)}function o9(c,o,u,h,g){const b=Math.sqrt(1-h*h);return Math.min(c.dist(o)/3,o.dist(u)/3,g*b/h)}function Xk(c,o,u){return c.x<u[0].x&&o.x<u[0].x||c.x>u[1].x&&o.x>u[1].x||c.y<u[0].y&&o.y<u[0].y||c.y>u[1].y&&o.y>u[1].y}function s9(c,o){return c.x<o[0].x||c.x>o[1].x||c.y<o[0].y||c.y>o[1].y}function Lye(c){return c.every(o=>o.x<=0)||c.every(o=>o.x>=Jt)||c.every(o=>o.y<=0)||c.every(o=>o.y>=Jt)}function l9(c,o,u){if(c.x<0||c.x>=Jt||o.x<0||o.x>=Jt||u.x<0||u.x>=Jt)return!1;const h=u.sub(o),g=h.perp(),b=c.sub(o);return(h.x*b.x+h.y*b.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(b.x*b.x+b.y*b.y))>-.866&&g.x*b.x+g.y*b.y<0}function u9(c,o,u){const h=o?2|c:-3&c;return u?1|h:-2&h}function c9(){const c=Math.PI/32,o=Math.tan(c),u=Ge;return u*Math.sqrt(1+2*o*o)-u}function f9(c,o,u){const h=1<<u.z,g=wt(u.x/h),b=wt((u.x+1)/h),w=It(u.y/h),A=It((u.y+1)/h);return(function(D,P,B,U,$=0,G){const Z=[];if(!D.length||!B||!U)return Z;const se=(Ie,Ve)=>{for(const qe of Ie)Z.push({polygon:qe,bounds:Ve})},fe=Math.ceil(Math.log2(B)),ue=Math.ceil(Math.log2(U)),pe=fe-ue,ve=[];for(let Ie=0;Ie<Math.abs(pe);Ie++)ve.push(pe>0?0:1);for(let Ie=0;Ie<Math.min(fe,ue);Ie++)ve.push(0),ve.push(1);let Se=D;if(Se=_y(Se,P[0].y-$,P[1].y+$,1),Se=_y(Se,P[0].x-$,P[1].x+$,0),!Se.length)return Z;const ke=[];for(ve.length?ke.push({polygons:Se,bounds:P,depth:0}):se(Se,P);ke.length;){const Ie=ke.pop(),Ve=Ie.depth,qe=ve[Ve],Ue=Ie.bounds[0],Ze=Ie.bounds[1],rt=qe===0?Ue.x:Ue.y,Et=qe===0?Ze.x:Ze.y,xt=G?G(qe,rt,Et):.5*(rt+Et),Tt=_y(Ie.polygons,rt-$,xt+$,qe),kt=_y(Ie.polygons,xt-$,Et+$,qe);if(Tt.length){const Pt=[Ue,new Vt(qe===0?xt:Ze.x,qe===1?xt:Ze.y)];ve.length>Ve+1?ke.push({polygons:Tt,bounds:Pt,depth:Ve+1}):se(Tt,Pt)}if(kt.length){const Pt=[new Vt(qe===0?xt:Ue.x,qe===1?xt:Ue.y),Ze];ve.length>Ve+1?ke.push({polygons:kt,bounds:Pt,depth:Ve+1}):se(kt,Pt)}}return Z})(c,o,Math.ceil((b-g)/11.25),Math.ceil((w-A)/11.25),1,(D,P,B)=>{if(D===0)return .5*(P+B);{const U=It((u.y+P/Jt)/h);return(dt(.5*(It((u.y+B/Jt)/h)+U))*h-u.y)*Jt}})}function zye(c,o,u,h,g,b){const w=Math.pow(2,h.z-g.z);for(let A=0;A<u;A++){let D=c.int16[2*(A+o)+0],P=c.int16[2*(A+o)+1];D=(D+g.x*Jt)*w-h.x*Jt,P=(P+g.y*Jt)*w-h.y*Jt,b.push(new Vt(D,P))}}let h9,d9;Kt(Bf,"FillExtrusionBucket",{omit:["layers","features"]}),Kt(Dr,"PartData"),Kt(bn,"FootprintSegment"),Kt(ea,"BorderCentroidData"),Kt(Zi,"GroundEffect");class xb extends Vt{constructor(o,u,h){super(o,u),this.z=h}}class p9 extends xb{constructor(o,u,h,g){super(o,u,h),this.w=g}}function m9(c,o,u,h){const g=u==="x"?"y":"x",b=(h-c[u])/(o[u]-c[u]);c[g]=Math.round(c[g]+(o[g]-c[g])*b),c[u]=h,c.hasOwnProperty("z")&&(c.z=Vn(c.z,o.z,b)),c.hasOwnProperty("w")&&(c.w=Vn(c.w,o.w,b))}function g9(c,o,u,h){const g=u,b=h;for(const w of["x","y"]){let A=c,D=o;A[w]>=D[w]&&(A=o,D=c),A[w]<g&&D[w]>g&&m9(A,D,w,g),A[w]<b&&D[w]>b&&m9(D,A,w,b)}}function vC(c,o,u,h,g,b){const w=[];for(let A=0;A<c.length;A++){const D=c[A];let P;const B=w.length;let U=0;for(let $=0;$<D.length-1;$++){let G=D[$],Z=D[$+1],se=0;const fe=U;let ue,pe;b&&(se=Math.hypot(Z.x-G.x,Z.y-G.y),U+=se,ue=G,pe=Z),G.x<o&&Z.x<o||(G.x<o?G=new Vt(o,G.y+(o-G.x)/(Z.x-G.x)*(Z.y-G.y))._round():Z.x<o&&(Z=new Vt(o,G.y+(o-G.x)/(Z.x-G.x)*(Z.y-G.y))._round()),G.y<u&&Z.y<u||(G.y<u?G=new Vt(G.x+(u-G.y)/(Z.y-G.y)*(Z.x-G.x),u)._round():Z.y<u&&(Z=new Vt(G.x+(u-G.y)/(Z.y-G.y)*(Z.x-G.x),u)._round()),G.x>=h&&Z.x>=h||(G.x>=h?G=new Vt(h,G.y+(h-G.x)/(Z.x-G.x)*(Z.y-G.y))._round():Z.x>=h&&(Z=new Vt(h,G.y+(h-G.x)/(Z.x-G.x)*(Z.y-G.y))._round()),G.y>=g&&Z.y>=g||(G.y>=g?G=new Vt(G.x+(g-G.y)/(Z.y-G.y)*(Z.x-G.x),g)._round():Z.y>=g&&(Z=new Vt(G.x+(g-G.y)/(Z.y-G.y)*(Z.x-G.x),g)._round()),P&&G.equals(P[P.length-1])||(P=[G],w.push(P),b&&b.push({progress:{min:fe+y9(ue,pe,G)*se,max:1},parentIndex:A,prevPoint:ue,nextPoint:pe})),P.push(Z),b&&(b[b.length-1].progress.max=fe+y9(ue,pe,Z)*se,b[b.length-1].nextPoint=pe)))))}if(b&&U>0)for(let $=B;$<w.length;$++)b[$].progress.min/=U,b[$].progress.max/=U}return w}function Nye(c,o,u,h,g){if(c.length<2)return void h.push(c);const b=[];for(;o.valid();){const[P,B]=o.get();for(let U=0;U<c.length-1;U++){const $=c[U],G=c[U+1],Z=wm($,G,P,B);if(Z){const[se]=Z,fe=new Vt(Vn($.x,G.x,se),Vn($.y,G.y,se));b.push({t:U+se,distance:0,point:fe})}}o.next()}if(b.length===0)return void h.push(c);b.sort((P,B)=>P.t-B.t);let w=0,A=0,D=[];for(h.push(D);w!==c.length;){if(A===b.length){for(;w!==c.length;)D.length!==0&&D[D.length-1].equals(c[w])||D.push(c[w]),w++;break}b[A].t<=w?(D.length!==0&&D[D.length-1].equals(b[A].point)||D.push(b[A].point),Math.trunc(b[A].t),A++):(D.length!==0&&D[D.length-1].equals(c[w])||D.push(c[w]),w++)}}function y9(c,o,u){return c.x!==o.x?(u.x-c.x)/(o.x-c.x):c.y!==o.y?(u.y-c.y)/(o.y-c.y):0}function qT(c,o){return c.x*o.x+c.y*o.y}function _9(c,o){if(c.length===1){let u=0;const h=o[u++];let g;for(;!g||h.equals(g);)if(g=o[u++],!g)return 1/0;for(;u<o.length;u++){const b=o[u],w=c[0],A=g.sub(h),D=b.sub(h),P=w.sub(h),B=qT(A,A),U=qT(A,D),$=qT(D,D),G=qT(P,A),Z=qT(P,D),se=B*$-U*U,fe=($*G-U*Z)/se,ue=(B*Z-U*G)/se,pe=h.z*(1-fe-ue)+g.z*fe+b.z*ue;if(isFinite(pe))return pe}return 1/0}{let u=1/0;for(const h of o)u=Math.min(u,h.z);return u}}function v9(c,o,u){let h=1/0;Si(u,o)&&(h=_9(u,o[0]));for(let g=0;g<o.length;g++){const b=o[g],w=c[g];for(let A=0;A<b.length-1;A++){const D=b[A],P=[D,b[A+1],w[A+1],w[A],D];$i(u,P)&&(h=Math.min(h,_9(u,P)))}}return h!==1/0&&h}function b9(c,o,u,h,g,b,w,A,D,P,B){return c.projection.name==="globe"?(function(U,$,G,Z,se,fe,ue,pe,ve,Se,ke){const Ie=[],Ve=[],qe=U.projection.upVectorScale(ke,U.center.lat,U.worldSize).metersToTile,Ue=[0,0,0,1],Ze=[0,0,0,1],rt=(xt,Tt,kt,Pt)=>{xt[0]=Tt,xt[1]=kt,xt[2]=Pt,xt[3]=1},Et=c9();G>0&&(G+=Et),Z+=Et;for(const xt of $){const Tt=[],kt=[];for(const Pt of xt){const Rt=Pt.x+se.x,vt=Pt.y+se.y,zt=U.projection.projectTilePoint(Rt,vt,ke),Mt=U.projection.upVector(ke,Pt.x,Pt.y);let Nt=G,Lt=Z;if(ue){const fn=x9(Rt,vt,G,Z,ue,pe,ve,Se);Nt+=fn.base,Lt+=fn.top}G!==0?rt(Ue,zt.x+Mt[0]*qe*Nt,zt.y+Mt[1]*qe*Nt,zt.z+Mt[2]*qe*Nt):rt(Ue,zt.x,zt.y,zt.z),rt(Ze,zt.x+Mt[0]*qe*Lt,zt.y+Mt[1]*qe*Lt,zt.z+Mt[2]*qe*Lt),Ct(Ue,Ue,fe),Ct(Ze,Ze,fe),Tt.push(new xb(Ue[0],Ue[1],Ue[2])),kt.push(new xb(Ze[0],Ze[1],Ze[2]))}Ie.push(Tt),Ve.push(kt)}return[Ie,Ve]})(c,o,u,h,g,b,w,A,D,P,B):w?(function(U,$,G,Z,se,fe,ue,pe,ve){const Se=[],ke=[],Ie=[0,0,0,1];for(const Ve of U){const qe=[],Ue=[];for(const Ze of Ve){const rt=Ze.x+Z.x,Et=Ze.y+Z.y,xt=x9(rt,Et,$,G,fe,ue,pe,ve);Ie[0]=rt,Ie[1]=Et,Ie[2]=xt.base,Ie[3]=1,hi(Ie,Ie,se),Ie[3]=Math.max(Ie[3],1e-5);const Tt=new xb(Ie[0]/Ie[3],Ie[1]/Ie[3],Ie[2]/Ie[3]);Ie[0]=rt,Ie[1]=Et,Ie[2]=xt.top,Ie[3]=1,hi(Ie,Ie,se),Ie[3]=Math.max(Ie[3],1e-5);const kt=new xb(Ie[0]/Ie[3],Ie[1]/Ie[3],Ie[2]/Ie[3]);qe.push(Tt),Ue.push(kt)}Se.push(qe),ke.push(Ue)}return[Se,ke]})(o,u,h,g,b,w,A,D,P):(function(U,$,G,Z,se){const fe=[],ue=[],pe=se[8]*$,ve=se[9]*$,Se=se[10]*$,ke=se[11]*$,Ie=se[8]*G,Ve=se[9]*G,qe=se[10]*G,Ue=se[11]*G;for(const Ze of U){const rt=[],Et=[];for(const xt of Ze){const Tt=xt.x+Z.x,kt=xt.y+Z.y,Pt=se[0]*Tt+se[4]*kt+se[12],Rt=se[1]*Tt+se[5]*kt+se[13],vt=se[2]*Tt+se[6]*kt+se[14],zt=se[3]*Tt+se[7]*kt+se[15],Mt=Pt+pe,Nt=Rt+ve,Lt=vt+Se,fn=Math.max(zt+ke,1e-5),pn=Pt+Ie,nn=Rt+Ve,an=vt+qe,kn=Math.max(zt+Ue,1e-5);rt.push(new xb(Mt/fn,Nt/fn,Lt/fn)),Et.push(new xb(pn/kn,nn/kn,an/kn))}fe.push(rt),ue.push(Et)}return[fe,ue]})(o,u,h,g,b)}function x9(c,o,u,h,g,b,w,A){const D=w*g.getElevationAt(c,o,!0,!0),P=b[0]!==0,B=P?b[1]===0?w*(b[0]/7-450):w*(function(U,$,G){const Z=Math.floor($[0]/8),se=Math.floor($[1]/8),fe=10*($[0]-8*Z),ue=10*($[1]-8*se),pe=U.getElevationAt(Z,se,!0,!0),ve=U.getMeterToDEM(G),Se=Math.floor(.5*(fe*ve-1)),ke=Math.floor(.5*(ue*ve-1)),Ie=U.tileCoordToPixel(Z,se),Ve=2*Se+1,qe=2*ke+1,Ue=(function(kt,Pt,Rt,vt,zt){return[kt.getElevationAtPixel(Pt,Rt,!0),kt.getElevationAtPixel(Pt+zt,Rt,!0),kt.getElevationAtPixel(Pt,Rt+zt,!0),kt.getElevationAtPixel(Pt+vt,Rt+zt,!0)]})(U,Ie.x-Se,Ie.y-ke,Ve,qe),Ze=Math.abs(Ue[0]-Ue[1]),rt=Math.abs(Ue[2]-Ue[3]),Et=Math.abs(Ue[0]-Ue[2])+Math.abs(Ue[1]-Ue[3]),xt=Math.min(.25,.5*ve*(Ze+rt)/Ve),Tt=Math.min(.25,.5*ve*Et/qe);return pe+Math.max(xt*fe,Tt*ue)})(g,b,A):D;return{base:D+(u===0?-1:u),top:P?Math.max(B+h,D+u+2):D+h}}class Fye{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Bye{constructor(){this.tasks={},this.taskQueue=[],hn(["process"],this),this.invoker=new Fye(this.process),this.nextId=0}add(o,u){const h=this.nextId++,g=(function({type:b,isSymbolTile:w,zoom:A}){return A=A||0,b==="message"?0:b!=="maybePrepare"||w?b!=="parseTile"||w?b==="parseTile"&&w?300-A:b==="maybePrepare"&&w?400-A:500:200-A:100-A})(u);if(g===0){try{o()}finally{}return null}return this.tasks[h]={fn:o,metadata:u,priority:g,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const u=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let o=null,u=1/0;for(let g=0;g<this.taskQueue.length;g++){const b=this.tasks[this.taskQueue[g]];b.priority<u&&(u=b.priority,o=g)}if(o===null)return null;const h=this.taskQueue[o];return this.taskQueue.splice(o,1),h}remove(){this.invoker.remove()}}class w9{constructor(o,u,h){this.target=o,this.parent=u,this.mapId=h,this.callbacks={},this.cancelCallbacks={},hn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new Bye}send(o,u,h,g,b=!1,w){const A=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(h.metadata=w,this.callbacks[A]=h);const D=new Set;return this.target.postMessage({id:A,type:o,hasCallback:!!h,targetMapId:g,mustQueue:b,sourceMapId:this.mapId,data:ca(u,D)},D),{cancel:()=>{h&&delete this.callbacks[A],this.target.postMessage({id:A,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(o){const u=o.data;if(!u)return;const h=u.id;if(h&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){const g=this.cancelCallbacks[h];delete this.cancelCallbacks[h],g&&g.cancel()}else if(u.mustQueue||ya(self)){const g=this.callbacks[h],b=this.scheduler.add(()=>this.processTask(h,u),g&&g.metadata||{type:"message"});b&&(this.cancelCallbacks[h]=b)}else this.processTask(h,u)}processTask(o,u){if(delete this.cancelCallbacks[o],u.type==="<response>"){const h=this.callbacks[o];delete this.callbacks[o],h&&(u.error?h(pu(u.error)):h(null,pu(u.data)))}else{const h=new Set,g=u.hasCallback?(w,A)=>{this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:w?ca(w):null,data:ca(A,h)},h)}:()=>{},b=pu(u.data);if(this.parent[u.type])this.parent[u.type](u.sourceMapId,b,g);else if(this.parent.getWorkerSource){const w=u.type.split("."),{source:A,scope:D}=b;this.parent.getWorkerSource(u.sourceMapId,w[0],A,D)[w[1]](b,g)}else g(new Error(`Could not find function ${u.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var HT={workerUrl:"",workerClass:null,workerParams:void 0};function jye(c){return HT.workerClass!=null?new HT.workerClass:new self.Worker(HT.workerUrl,Object.assign({name:c},HT.workerParams))}const Zk="mapboxgl_preloaded_worker_pool";class wb{constructor(o){this.active={},this.name=o}acquire(o,u=wb.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<u;){const h=jye(`${this.name||""}WorkerPool: ${o}-${this.workers.length}`);this.workers.push(h)}return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.workers&&this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Zk]}numActive(){return Object.keys(this.active).length}}wb.workerCount=2;class P1{constructor(o,u,h="Worker",g=wb.workerCount){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=Gt();const b=this.workerPool.acquire(this.id,g);for(let w=0;w<b.length;w++){const A=new P1.Actor(b[w],u,this.id);A.name=`${h} ${w}`,this.actors.push(A)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,u,h){lt(this.actors,(g,b)=>{g.send(o,u,b)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}let GT,Kk;function bC(){return GT||(GT=new wb),GT}P1.Actor=w9;const Qk=4096;class Uye{constructor(o){this.module=o,this.memoryStack=this.module.malloc(Qk),this.memoryStackNextFree=this.memoryStack}createIntArray(o){const u=this.memoryStackNextFree;return this.memoryStackNextFree+=o.length*Int32Array.BYTES_PER_ELEMENT,this.memoryStackNextFree-this.memoryStack>Qk?-1:(new Int32Array(this.module.heap32.buffer,u,o.length).set(o),u)}createFloatArray(o){const u=this.memoryStackNextFree;return this.memoryStackNextFree+=o.length*Float32Array.BYTES_PER_ELEMENT,this.memoryStackNextFree-this.memoryStack>Qk?-1:(new Float32Array(this.module.heapF32.buffer,u,o.length).set(o),u)}readStringBuffer(o){let u="";for(;this.module.heapU8[o]!==0;)u+=String.fromCharCode(this.module.heapU8[o]),++o;return u}setStyle(o){const u=o.normalScale;this.module.setStyle(u[0],u[1],u[2],o.tileToMeters)}setAOOptions(o,u){this.module.setAOOptions(o?1:0,u)}setMetricOptions(o,u){this.module.setMetricOptions(o?1:0,u)}setStructuralOptions(o){this.module.setStructuralOptions(o?1:0)}setFacadeOptions(o,u){this.module.setFacadeOptions(o,u?1:0)}setFauxFacadeOptions(o,u,h){this.module.setFauxFacadeOptions(o?1:0,u?1:0,h)}setFacadeClassifierOptions(o){this.module.setFacadeClassifierOptions(o)}generateMesh(o,u){this.memoryStackNextFree=this.memoryStack;for(const A of o){const D=this.createIntArray(A.ringIndices),P=this.createFloatArray(A.coordinates);if(D===-1||P===-1)return`building_gen: Out of stack memory: ${this.memoryStackNextFree-this.memoryStack}/4096`;this.module.addFeature(A.id,A.sourceId,A.minHeight,A.height,A.roofType,P,D,A.ringIndices.length-1)}for(const A of u){let D;D=A.entrances?JSON.parse(A.entrances):[];const P=this.createFloatArray(D),B=this.createFloatArray(A.coordinates);if(P===-1||B===-1)return`building_gen: Out of stack memory: ${this.memoryStackNextFree-this.memoryStack}/4096`;this.module.addFacade(A.sourceId,A.crossPerc,A.distanceToRoad,P,D.length,B,A.coordinates.length)}if(!this.module.generateMesh()){const A=this.module.getLastError();return this.readStringBuffer(A)}const h=this.module.getMeshCount(),g=new Array(h);for(let A=0;A<h;A++){const D=this.module.getPositionsPtr(A),P=this.module.getPositionsLength(A),B=new Float32Array(this.module.heapF32.buffer,D,P),U=this.module.getNormalsPtr(A),$=this.module.getNormalsLength(A),G=new Float32Array(this.module.heapF32.buffer,U,$),Z=this.module.getAOPtr(A),se=this.module.getAOLength(A),fe=new Float32Array(this.module.heapF32.buffer,Z,se),ue=this.module.getUVPtr(A),pe=this.module.getUVLength(A),ve=new Float32Array(this.module.heapF32.buffer,ue,pe),Se=this.module.getFauxFacadePtr(A),ke=this.module.getFauxFacadeLength(A),Ie=new Uint8Array(this.module.heapU8.buffer,Se,ke),Ve=this.module.getIndicesPtr(A),qe=this.module.getIndicesLength(A),Ue=new Int16Array(this.module.heap16.buffer,Ve,qe),Ze=this.module.getBuildingPart(A);g[A]={positions:B,normals:G,ao:fe,uv:ve,isFauxFacade:Ie,indices:Ue,buildingPart:Ze}}const b=this.module.getRingCount(),w=[];for(let A=0;A<b;A++){const D=this.module.getRingPtr(A),P=this.module.getRingLength(A),B=new Float32Array(this.module.heapF32.buffer,D,P);w.push(B)}return{meshes:g,outerRingLength:this.module.getOuterRingLength(),modifiedPolygonRings:w}}}let YT,Jk,np,R1,eL,k1=null,L1=null,S9=null,xC=null;function T9(){return ya(self)&&self.worker.dracoUrl?self.worker.dracoUrl:Jk||Ja.DRACO_URL}function E9(){if(ya(self)&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(R1)return R1;const c=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return R1=WebAssembly.validate(c)?Ja.MESHOPT_SIMD_URL:Ja.MESHOPT_URL,R1}function $ye(){return xC}const A9=5120,O9=5121,C9=5122,M9=5123,D9=5125,I9=5126,wC={[A9]:Int8Array,[O9]:Uint8Array,[C9]:Int16Array,[M9]:Uint16Array,[D9]:Uint32Array,[I9]:Float32Array},Vye={[A9]:"DT_INT8",[O9]:"DT_UINT8",[C9]:"DT_INT16",[M9]:"DT_UINT16",[D9]:"DT_UINT32",[I9]:"DT_FLOAT32"},WT={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function P9(c,o,u){const h=u.json.bufferViews.length,g=u.buffers.length;o.bufferView=h,u.json.bufferViews[h]={buffer:g,byteLength:c.byteLength},u.buffers[g]=c}const tL="KHR_draco_mesh_compression";function qye(c,o){const u=c.extensions&&c.extensions[tL];if(!u)return;const h=new np.Decoder,g=z9(o,u.bufferView),b=new np.Mesh;if(!h.DecodeArrayToMesh(g,g.byteLength,b))throw new Error("Failed to decode Draco mesh");const w=o.json.accessors[c.indices],A=wC[w.componentType],D=w.count*A.BYTES_PER_ELEMENT,P=np._malloc(D);A===Uint16Array?h.GetTrianglesUInt16Array(b,D,P):h.GetTrianglesUInt32Array(b,D,P),P9(np.memory.buffer.slice(P,P+D),w,o),np._free(P);for(const B of Object.keys(u.attributes)){const U=h.GetAttributeByUniqueId(b,u.attributes[B]),$=o.json.accessors[c.attributes[B]],G=Vye[$.componentType],Z=$.count*WT[$.type]*wC[$.componentType].BYTES_PER_ELEMENT,se=np._malloc(Z);h.GetAttributeDataArrayForAllPoints(b,U,np[G],Z,se),P9(np.memory.buffer.slice(se,se+Z),$,o),np._free(se)}h.destroy(),b.destroy(),delete c.extensions[tL]}const SC="EXT_meshopt_compression";function Hye(c,o){if(!c.extensions||!c.extensions[SC])return;const u=c.extensions[SC],h=new Uint8Array(o.buffers[u.buffer],u.byteOffset||0,u.byteLength||0),g=new Uint8Array(u.count*u.byteStride);eL.decodeGltfBuffer(g,u.count,u.byteStride,h,u.mode,u.filter),c.buffer=o.buffers.length,c.byteOffset=0,o.buffers[c.buffer]=g.buffer,delete c.extensions[SC]}const R9=1179937895,k9=new TextDecoder("utf8");function L9(c,o){return new URL(c,o).href}function Gye(c,o,u,h){return fetch(L9(c.uri,h)).then(g=>g.arrayBuffer()).then(g=>{o.buffers[u]=g})}function z9(c,o){const u=c.json.bufferViews[o];return new Uint8Array(c.buffers[u.buffer],u.byteOffset||0,u.byteLength)}function Yye(c,o,u,h){if(c.uri){const g=L9(c.uri,h);return fetch(g).then(b=>b.blob()).then(b=>createImageBitmap(b)).then(b=>{o.images[u]=b})}if(c.bufferView!==void 0){const g=z9(o,c.bufferView),b=new Blob([g],{type:c.mimeType});return createImageBitmap(b).then(w=>{o.images[u]=w})}}function N9(c,o=0,u){const h={json:null,images:[],buffers:[]};if(new Uint32Array(c,o,1)[0]===R9){const B=new Uint32Array(c,o);let U=2;const $=(B[U++]>>2)-3,G=B[U++]>>2;if(U++,h.json=JSON.parse(k9.decode(B.subarray(U,U+G))),U+=G,U<$){const Z=B[U++];U++;const se=o+(U<<2);h.buffers[0]=c.slice(se,se+Z)}}else h.json=JSON.parse(k9.decode(new Uint8Array(c,o)));const{buffers:g,images:b,meshes:w,extensionsUsed:A,bufferViews:D}=h.json;let P=Promise.resolve();if(g){const B=[];for(let U=0;U<g.length;U++){const $=g[U];$.uri?B.push(Gye($,h,U,u)):h.buffers[U]||(h.buffers[U]=null)}P=Promise.all(B)}return P.then(()=>{const B=[],U=A&&A.includes(tL),$=A&&A.includes(SC);if(U&&B.push((function(){if(!np)return YT??(YT=(function(G){let Z,se=null;function fe(){Z=new Uint8Array(se.buffer)}function ue(){throw new Error("Unexpected Draco error.")}const pe={a:{a:ue,d:function(ve,Se,ke){return Z.copyWithin(ve,Se,Se+ke)},c:function(ve){const Se=Z.length,ke=Math.max(ve>>>0,Math.ceil(1.2*Se)),Ie=Math.ceil((ke-Se)/65536);try{return se.grow(Ie),fe(),!0}catch{return!1}},b:ue}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(G,pe):G.then(ve=>ve.arrayBuffer()).then(ve=>WebAssembly.instantiate(ve,pe))).then(ve=>{const{Rb:Se,Qb:ke,P:Ie,T:Ve,X:qe,Ja:Ue,La:Ze,Qa:rt,Va:Et,Wa:xt,eb:Tt,jb:kt,f:Pt,e:Rt,yb:vt,zb:zt,Ab:Mt,Bb:Nt,Db:Lt,Gb:fn}=ve.instance.exports;se=Rt;const pn=(()=>{let nn=0,an=0,kn=0,Cn=0;return cn=>{kn&&(Se(Cn),Se(nn),an+=kn,kn=nn=0),nn||(an+=128,nn=ke(an));const Wn=cn.length+7&-8;let vr=nn;Wn>=an&&(kn=Wn,vr=Cn=ke(Wn));for(let Zr=0;Zr<cn.length;Zr++)Z[vr+Zr]=cn[Zr];return vr}})();return fe(),Pt(),{memory:Rt,_free:Se,_malloc:ke,Mesh:class{constructor(){this.ptr=Ie()}destroy(){Ve(this.ptr)}},Decoder:class{constructor(){this.ptr=Ue()}destroy(){kt(this.ptr)}DecodeArrayToMesh(nn,an,kn){const Cn=pn(nn),cn=Ze(this.ptr,Cn,an,kn.ptr);return!!qe(cn)}GetAttributeByUniqueId(nn,an){return{ptr:rt(this.ptr,nn.ptr,an)}}GetTrianglesUInt16Array(nn,an,kn){Et(this.ptr,nn.ptr,an,kn)}GetTrianglesUInt32Array(nn,an,kn){xt(this.ptr,nn.ptr,an,kn)}GetAttributeDataArrayForAllPoints(nn,an,kn,Cn,cn){Tt(this.ptr,nn.ptr,an.ptr,kn,Cn,cn)}},DT_INT8:vt(),DT_UINT8:zt(),DT_INT16:Mt(),DT_UINT16:Nt(),DT_UINT32:Lt(),DT_FLOAT32:fn()}})})(fetch(T9())),YT.then(G=>{np=G,YT=void 0}))})()),$&&B.push((function(){if(eL)return;const G=(function(Z){let se;const fe=WebAssembly.instantiateStreaming(Z,{}).then(ve=>{se=ve.instance,se.exports.__wasm_call_ctors()}),ue={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},pe={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:fe,supported:!0,decodeGltfBuffer(ve,Se,ke,Ie,Ve,qe){(function(Ue,Ze,rt,Et,xt,Tt,kt){const Pt=Ue.exports.sbrk,Rt=Et+3&-4,vt=Pt(Rt*xt),zt=Pt(Tt.length),Mt=new Uint8Array(Ue.exports.memory.buffer);Mt.set(Tt,zt);const Nt=Ze(vt,Et,xt,zt,Tt.length);if(Nt===0&&kt&&kt(vt,Rt,xt),rt.set(Mt.subarray(vt,vt+Et*xt)),Pt(vt-Pt(0)),Nt!==0)throw new Error(`Malformed buffer data: ${Nt}`)})(se,se.exports[pe[Ve]],ve,Se,ke,Ie,se.exports[ue[qe]])}}})(fetch(E9()));return G.ready.then(()=>{eL=G})})()),b)for(let G=0;G<b.length;G++)B.push(Yye(b[G],h,G,u));return(B.length?Promise.all(B):Promise.resolve()).then(()=>{if(U&&w)for(const{primitives:G}of w)for(const Z of G)qye(Z,h);if($&&w&&D)for(const G of D)Hye(G,h);return h})})}function F9(c){return fetch(c).then(o=>o.arrayBuffer()).then(o=>N9(o,0,c))}function nL(c){switch(c){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function rL(c){switch(c){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class iL{constructor(o,u,h,g){this.context=o,this.format=h,this.useMipmap=g&&g.useMipmap,this.texture=o.gl.createTexture(),this.update(u,{premultiply:g&&g.premultiply})}update(o,u){const h=o&&o instanceof HTMLVideoElement&&o.width===0?o.videoWidth:o.width,g=o&&o instanceof HTMLVideoElement&&o.height===0?o.videoHeight:o.height,{context:b}=this,{gl:w}=b,{x:A,y:D}=u&&u.position?u.position:{x:0,y:0},P=A+h,B=D+g;!this.size||this.size[0]===P&&this.size[1]===B||(w.bindTexture(w.TEXTURE_2D,null),w.deleteTexture(this.texture),this.texture=w.createTexture(),this.size=null),w.bindTexture(w.TEXTURE_2D,this.texture),b.pixelStoreUnpackFlipY.set(!1),b.pixelStoreUnpack.set(1),b.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA8&&(!u||u.premultiply!==!1));const U=o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||ImageBitmap&&o instanceof ImageBitmap;if(!this.size&&P>0&&B>0){const $=this.useMipmap?Math.floor(Math.log2(Math.max(P,B)))+1:1;w.texStorage2D(w.TEXTURE_2D,$,this.format,P,B),this.size=[P,B]}this.size&&(U?w.texSubImage2D(w.TEXTURE_2D,0,A,D,nL(this.format),rL(this.format),o):"data"in o&&o.data&&w.texSubImage2D(w.TEXTURE_2D,0,A,D,h,g,nL(this.format),rL(this.format),o.data)),this.useMipmap&&w.generateMipmap(w.TEXTURE_2D)}bind(o,u,h=!1){const{context:g}=this,{gl:b}=g;b.bindTexture(b.TEXTURE_2D,this.texture),o!==this.minFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,o),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,this.useMipmap&&!h?o===b.NEAREST?b.NEAREST_MIPMAP_NEAREST:b.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),u!==this.wrapS&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,u),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,u),this.wrapS=u)}bindExtraParam(o,u,h,g,b){const{context:w}=this,{gl:A}=w;A.bindTexture(A.TEXTURE_2D,this.texture),u!==this.magFilter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,u),this.magFilter=u),o!==this.minFilter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,this.useMipmap?o===A.NEAREST?A.NEAREST_MIPMAP_NEAREST:A.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),h!==this.wrapS&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,h),this.wrapS=h),g!==this.wrapT&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,g),this.wrapT=g),b!==this.compareMode&&(b?(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_COMPARE_MODE,A.COMPARE_REF_TO_TEXTURE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_COMPARE_FUNC,b)):A.texParameteri(A.TEXTURE_2D,A.TEXTURE_COMPARE_MODE,A.NONE),this.compareMode=b)}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class XT{constructor(o,u){this.context=o,this.texture=u}bind(o,u){const{context:h}=this,{gl:g}=h;g.bindTexture(g.TEXTURE_2D,this.texture),o!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,o),this.minFilter=o),u!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,u),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,u),this.wrapS=u)}}const Wye=gr([{name:"a_pos_3f",components:3,type:"Float32"}]),Xye=gr([{name:"a_color_3f",components:3,type:"Float32"}]),Zye=gr([{name:"a_color_4f",components:4,type:"Float32"}]),Kye=gr([{name:"a_uv_2f",components:2,type:"Float32"}]),Qye=gr([{name:"a_normal_3f",components:3,type:"Float32"}]),Jye=gr([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),e_e=gr([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);function B9(c,o){const u=TC(c.projection,c.zoom,c.width,c.height),h=(function(b,w,A,D,P){const B=new Re(A.lng-180*Sv,A.lat),U=new Re(A.lng+180*Sv,A.lat),$=b.project(B.lng,B.lat),G=b.project(U.lng,U.lat),Z=-Math.atan2(G.y-$.y,G.x-$.x),se=tn.fromLngLat(A);se.y=ze(se.y,-1+Sv,1-Sv);const fe=se.toLngLat(),ue=b.project(fe.lng,fe.lat),pe=tn.fromLngLat(fe);pe.x+=Sv;const ve=pe.toLngLat(),Se=b.project(ve.lng,ve.lat),ke=U9(Se.x-ue.x,Se.y-ue.y,Z),Ie=tn.fromLngLat(fe);Ie.y+=Sv;const Ve=Ie.toLngLat(),qe=b.project(Ve.lng,Ve.lat),Ue=U9(qe.x-ue.x,qe.y-ue.y,Z),Ze=Math.abs(ke.x)/Math.abs(Ue.y),rt=k([]);te(rt,rt,-Z*(1-(P?0:D)));const Et=k([]);return ie(Et,Et,[1,1-(1-Ze)*D,1]),Et[4]=-Ue.x/Ue.y*D,te(Et,Et,Z),K(Et,rt,Et),Et})(c.projection,0,c.center,u,o),g=j9(c);return ie(h,h,[g,g,1]),h}function j9(c){const o=c.projection,u=TC(c.projection,c.zoom,c.width,c.height),h=aL(o,c.center),g=aL(o,Re.convert(o.center));return Math.pow(2,h*u+(1-u)*g)}function TC(c,o,u,h,g=1/0){const b=c.range;if(!b)return 0;const w=Math.min(g,Math.max(u,h)),A=Math.log2(w/1024);return ot(b[0]+A,b[1]+A,o)}const Sv=1/4e4;function aL(c,o){const u=ze(o.lat,-85.051129,et),h=new Re(o.lng-180*Sv,u),g=new Re(o.lng+180*Sv,u),b=c.project(h.lng,u),w=c.project(g.lng,u),A=tn.fromLngLat(h),D=tn.fromLngLat(g),P=w.x-b.x,B=w.y-b.y,U=D.x-A.x,$=D.y-A.y,G=Math.sqrt((U*U+$*$)/(P*P+B*B));return Math.log2(G)}function U9(c,o,u){const h=Math.cos(u),g=Math.sin(u);return{x:c*h-o*g,y:c*g+o*h}}function $9(c,o,u){k(c),te(c,c,Ar(o[2])),Q(c,c,Ar(o[0])),W(c,c,Ar(o[1])),ie(c,c,u),K(c,c,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function EC(c,o,u,h,g,b,w,A){const D=[u[0]-o[0],u[1]-o[1],0],P=[h[0]-o[0],h[1]-o[1],0];if(Be(D)<1e-12||Be(P)<1e-12)return En(c);const B=ct([],D,P);xe(B,B),yt(P,h,o),D[2]=(b-g)*A,P[2]=(w-g)*A;const U=D;return ct(U,D,P),xe(U,U),Aa(c,B,U)}function AC(c,o,u=!1){const h=Qd(o.zoom),g=(function(b,w,A){const D=w.worldSize,P=[b[12],b[13],b[14]],B=It(P[1]/D),U=wt(P[0]/D),$=k([]),G=ft(1,B)*D,Z=ft(1,0)*D*gt(B,w.zoom),se=1/ab(D);let fe=Z*se;if(A){const Se=TC(w.projection,w.zoom,w.width,w.height,1024);fe=se*w.projection.pixelSpaceConversion(w.center.lat,D,Se)}const ue=$e(B,U);at(ue,ue,Pe([],xe([],ue),G*fe*P[2]));const pe=(function(Se){const ke=[Se[0],Se[1],Se[2]];let Ie=[0,1,0];const Ve=ct([],Ie,ke);return ct(Ie,ke,Ve),Tn(Ie)===0&&(Ie=[0,1,0],ct(Ve,ke,Ie)),xe(Ve,Ve),xe(Ie,Ie),xe(ke,ke),[Ve[0],Ve[1],Ve[2],0,Ie[0],Ie[1],Ie[2],0,ke[0],ke[1],ke[2],0,Se[0],Se[1],Se[2],1]})(ue);ie($,$,[fe,fe,fe*G]),J($,$,[-P[0],-P[1],-P[2]]);const ve=K([],w.globeMatrix,pe);return K(ve,ve,$),K(ve,ve,b),ve})(c,o,u);if(h>0){const b=(function(w,A){const D=A.worldSize,P=ft(1,0)*D*gt(A.center.lat,A.zoom)/ab(D),B=ft(1,A.center.lat)*D,U=k([]);W(U,U,Ar(A.center.lng)),Q(U,U,Ar(A.center.lat)),J(U,U,[0,0,de]),ie(U,U,[P,P,P*B]);const $=A.point;return J(U,U,[-$.x,-$.y,0]),K(U,U,w),K(U,A.globeMatrix,U)})(c,o);return(function(w,A,D){const P=(Z,se,fe)=>{const ue=Be(Z),pe=Be(se),ve=Ih(Z,se,fe);return Pe(ve,ve,1/Be(ve)*Vn(ue,pe,fe))},B=P([w[0],w[1],w[2]],[A[0],A[1],A[2]],D),U=P([w[4],w[5],w[6]],[A[4],A[5],A[6]],D),$=P([w[8],w[9],w[10]],[A[8],A[9],A[10]],D),G=Ih([w[12],w[13],w[14]],[A[12],A[13],A[14]],D);return[B[0],B[1],B[2],0,U[0],U[1],U[2],0,$[0],$[1],$[2],0,G[0],G[1],G[2],1]})(g,b,h)}return g}function oL(c,o,u,h){const g=Hr.projectAabbCorners(h,u);let b=Number.MAX_VALUE;for(let A=0;A<g.length;++A){const D=g[A];D[0]=(.5*D[0]+.5)*o.width,D[1]=(.5-.5*D[1])*o.height,D[2]<b&&(b=D[2])}const w=(function(A){const D=[];let P=0;for(let G=1;G<A.length;G++)(A[G][0]<A[P][0]||A[G][0]===A[P][0]&&A[G][1]<A[P][1])&&(P=G);let B,U=P;const $=new Uint8Array(A.length);do{if($[U])break;D.push(new Vt(A[U][0],A[U][1])),$[U]=1,B=(U+1)%A.length;for(let G=0;G<A.length;G++){if(A[G][0]===A[B][0]&&A[G][1]===A[B][1]||A[G][0]===A[U][0]&&A[G][1]===A[U][1])continue;const Z=[A[G][0]-A[U][0],A[G][1]-A[U][1]],se=[A[B][0]-A[U][0],A[B][1]-A[U][1]],fe=Z[0]*se[1]-Z[1]*se[0];(fe>0||fe===0&&Z[0]*se[0]+Z[1]*se[1]>=0&&Z[0]*Z[0]+Z[1]*Z[1]>se[0]*se[0]+se[1]*se[1])&&(B=G)}U=B}while(U!==P);return D.length>0&&D.push(D[0]),D})(g);if($i(c,w))return b}const Sb=64,z1={CoordinateSpaceTile:1,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function OC(c,o,u,h,g,b,w,A,D,P=!1){const B=u.zoom,U=u.project(h),$=gt(h.lat,B),G=1/$;k(c),J(c,c,[U.x+w[0]*G,U.y+w[1]*G,w[2]]);let Z=1,se=1;const fe=u.worldSize;if(P){if(u.projection.name==="mercator"){let Se=0;u.elevation&&(Se=u.elevation.getAtPointOrZero(new tn(U.x/fe,U.y/fe),0));const ke=hi([],[U.x,U.y,Se,1],u.projMatrix)[3]/u.cameraToCenterDistance;Z=ke,se=ke*gt(u.center.lat,B)}else if(u.projection.name==="globe"){const Se=AC(c,u),ke=[0,0,0,1];hi(ke,ke,K([],u.projMatrix,Se));const Ie=ke[3]/u.cameraToCenterDistance,Ve=Qd(B),qe=u.projection.pixelsPerMeter(h.lat,fe)*gt(h.lat,B),Ue=u.projection.pixelsPerMeter(u.center.lat,fe)*gt(u.center.lat,B);Z=Ie/Vn(qe,At(u.center.lat),Ve),se=Ie*$/qe,Z*=Ue,se*=Ue}}else Z=G;ie(c,c,[Z,Z,se]);const ue=[...c],pe=o.orientation,ve=[];if($9(ve,[pe[0]+(g?g[0]:0),pe[1]+(g?g[1]:0),pe[2]+(g?g[2]:0)],b),K(c,ue,ve),A&&u.elevation){let Se=0;const ke=[];if(D&&u.elevation){Se=(function(Ve,qe,Ue,Ze,rt){const Et=qe.elevation;if(!Et)return 0;const xt=Hr.projectAabbCorners(Ue,Ze),Tt=ft(1,rt.lat)*qe.worldSize,kt=(function(an,kn){const Cn=[0,0,1],cn=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Wn of cn){const vr=an[Wn.corners[0]],Zr=an[Wn.corners[1]],pr=an[Wn.corners[2]],di=[Zr[0]-vr[0],Zr[1]-vr[1],kn*(Zr[2]-vr[2])],kr=ct(di,di,[pr[0]-vr[0],pr[1]-vr[1],kn*(pr[2]-vr[2])]);xe(kr,kr),Wn.dotProductWithUp=Ye(kr,Cn)}return cn.sort((Wn,vr)=>Wn.dotProductWithUp-vr.dotProductWithUp),cn[0].corners})(xt,Tt),Pt=xt[kt[0]],Rt=xt[kt[1]],vt=xt[kt[2]],zt=xt[kt[3]],Mt=Et.getAtPointOrZero(new tn(Pt[0]/qe.worldSize,Pt[1]/qe.worldSize),0),Nt=Et.getAtPointOrZero(new tn(Rt[0]/qe.worldSize,Rt[1]/qe.worldSize),0),Lt=Et.getAtPointOrZero(new tn(vt[0]/qe.worldSize,vt[1]/qe.worldSize),0),fn=Et.getAtPointOrZero(new tn(zt[0]/qe.worldSize,zt[1]/qe.worldSize),0),pn=(Mt+fn)/2,nn=(Nt+Lt)/2;return pn>nn?Nt<Lt?EC(Ve,Rt,zt,Pt,Nt,fn,Mt,Tt):EC(Ve,vt,Pt,zt,Lt,Mt,fn,Tt):Mt<fn?EC(Ve,Pt,Rt,vt,Mt,Nt,Lt,Tt):EC(Ve,zt,vt,Rt,fn,Lt,Nt,Tt),Math.max(pn,nn)})(ke,u,o.aabb,c,h);const Ie=K([],ge([],ke),ve);K(c,ue,Ie)}else Se=u.elevation.getAtPointOrZero(new tn(U.x/fe,U.y/fe),0);Se!==0&&(c[14]+=Se)}}class V9{constructor(o,u,h,g,b){this.materialOverrides=new Map,this.nodeOverrides=new Map,this.materialOverrideNames=[],this.nodeOverrideNames=[],this.featureProperties={},this.id=o,this.uri=u,this.position=h!=null?new Re(h[0],h[1]):new Re(0,0),this.orientation=g??[0,0,0],this.nodes=b,this.uploaded=!1,this.aabb=new Hr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(o,u){K(o.globalMatrix,u,o.localMatrix);const h=this.nodeOverrides.get(o.name);if(h!==void 0){const w=[];b=h.orientation,k(g=w),W(g,g,Ar(b[1])),te(g,g,Ar(b[2])),Q(g,g,Ar(b[0])),K(o.globalMatrix,o.globalMatrix,w)}var g,b;if(o.meshes)for(const w of o.meshes){const A=Hr.applyTransformFast(w.aabb,o.globalMatrix);this.aabb.encapsulate(A)}if(o.children)for(const w of o.children)this._applyTransformations(w,o.globalMatrix)}computeBoundsAndApplyParent(){const o=k([]);this.aabb=new Hr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const u of this.nodes)this._applyTransformations(u,o)}computeModelMatrix(o,u,h,g,b,w,A=!1){OC(this.matrix,this,o.transform,this.position,u,h,g,b,w,A)}upload(o){if(!this.uploaded){for(const u of this.nodes)sL(u,o);for(const u of this.nodes)CC(u);this.uploaded=!0}}destroy(){for(const o of this.nodes)lL(o)}}function ZT(c,o,u=!1){c.uploaded||(c.gfxTexture=new iL(o,c.image,u?o.gl.R8:o.gl.RGBA8,{useMipmap:c.sampler.minFilter>=o.gl.NEAREST_MIPMAP_NEAREST}),c.uploaded=!0,c.image=null)}function t_e(c,o,u){c.indexBuffer=o.createIndexBuffer(c.indexArray,!1,!0),c.vertexBuffer=o.createVertexBuffer(c.vertexArray,Wye.members,!1,!0),c.normalArray&&(c.normalBuffer=o.createVertexBuffer(c.normalArray,Qye.members,!1,!0)),c.texcoordArray&&(c.texcoordBuffer=o.createVertexBuffer(c.texcoordArray,Kye.members,!1,!0)),c.colorArray&&(c.colorBuffer=o.createVertexBuffer(c.colorArray,(c.colorArray.bytesPerElement===12?Xye:Zye).members,!1,!0)),c.featureArray&&(c.pbrBuffer=o.createVertexBuffer(c.featureArray,e_e.members,!0)),c.segments=Ii.simpleSegment(0,0,c.vertexArray.length,c.indexArray.length);const h=c.material;h.pbrMetallicRoughness.baseColorTexture&&ZT(h.pbrMetallicRoughness.baseColorTexture,o),h.pbrMetallicRoughness.metallicRoughnessTexture&&ZT(h.pbrMetallicRoughness.metallicRoughnessTexture,o),h.normalTexture&&ZT(h.normalTexture,o),h.occlusionTexture&&ZT(h.occlusionTexture,o,u),h.emissionTexture&&ZT(h.emissionTexture,o)}function sL(c,o,u){if(c.meshes)for(const h of c.meshes)t_e(h,o,u);if(c.children)for(const h of c.children)sL(h,o,u)}function CC(c){if(c.meshes)for(const o of c.meshes)o.indexArray.destroy(),o.vertexArray.destroy(),o.colorArray&&o.colorArray.destroy(),o.normalArray&&o.normalArray.destroy(),o.texcoordArray&&o.texcoordArray.destroy(),o.featureArray&&o.featureArray.destroy();if(c.children)for(const o of c.children)CC(o)}function n_e(c){c.pbrMetallicRoughness.baseColorTexture&&c.pbrMetallicRoughness.baseColorTexture.gfxTexture&&c.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),c.pbrMetallicRoughness.metallicRoughnessTexture&&c.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&c.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),c.normalTexture&&c.normalTexture.gfxTexture&&c.normalTexture.gfxTexture.destroy(),c.emissionTexture&&c.emissionTexture.gfxTexture&&c.emissionTexture.gfxTexture.destroy(),c.occlusionTexture&&c.occlusionTexture.gfxTexture&&c.occlusionTexture.gfxTexture.destroy()}function lL(c){if(c.meshes)for(const o of c.meshes)o.vertexBuffer&&(o.vertexBuffer.destroy(),o.indexBuffer.destroy(),o.normalBuffer&&o.normalBuffer.destroy(),o.texcoordBuffer&&o.texcoordBuffer.destroy(),o.colorBuffer&&o.colorBuffer.destroy(),o.pbrBuffer&&o.pbrBuffer.destroy(),o.segments.destroy(),o.material&&n_e(o.material));if(c.children)for(const o of c.children)lL(o)}function Tb(c,o){const u=c.json.bufferViews[o.bufferView],h=wC[o.componentType];return new h(c.buffers[u.buffer],(o.byteOffset||0)+(u.byteOffset||0),o.count*(u.byteStride&&u.byteStride!==WT[o.type]*h.BYTES_PER_ELEMENT?u.byteStride/h.BYTES_PER_ELEMENT:WT[o.type]))}function uL(c,o,u,h){const g=wC[o.componentType],b=(function(B){switch(B){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}})(g),w=c.json.bufferViews[o.bufferView],A=w.byteStride?w.byteStride/g.BYTES_PER_ELEMENT:WT[o.type],D=u.float32,P=D.length/u.capacity;for(let B=0,U=0;B<o.count*A;B+=A,U+=P)for(let $=0;$<P;$++)D[U+$]=h[B+$]*b;u._trim()}function r_e(c,o,u){const h=c.indices,g=c.attributes,b={};b.indexArray=new Xa;const w=o.json.accessors[h],A=w.count/3;b.indexArray.reserve(A);const D=Tb(o,w);for(let $=0;$<A;$++)b.indexArray.emplaceBack(D[3*$],D[3*$+1],D[3*$+2]);b.indexArray._trim(),b.vertexArray=new Yl;const P=o.json.accessors[g.POSITION];b.vertexArray.reserve(P.count);const B=Tb(o,P);for(let $=0;$<P.count;$++)b.vertexArray.emplaceBack(B[3*$],B[3*$+1],B[3*$+2]);if(b.vertexArray._trim(),b.aabb=new Hr(P.min,P.max),b.centroid=(function($,G){const Z=[0,0,0],se=$.length;if(se>0){for(let fe=0;fe<se;fe++){const ue=3*$[fe];Z[0]+=G[ue],Z[1]+=G[ue+1],Z[2]+=G[ue+2]}Z[0]/=se,Z[1]/=se,Z[2]/=se}return Z})(D,B),g.COLOR_0!==void 0){const $=o.json.accessors[g.COLOR_0],G=WT[$.type],Z=Tb(o,$);b.colorArray=G===3?new Yl:new ec,b.colorArray.resize($.count),uL(o,$,b.colorArray,Z)}if(g.NORMAL!==void 0){b.normalArray=new Yl;const $=o.json.accessors[g.NORMAL];b.normalArray.resize($.count);const G=Tb(o,$);uL(o,$,b.normalArray,G)}if(g.TEXCOORD_0!==void 0&&u.length>0){b.texcoordArray=new Mh;const $=o.json.accessors[g.TEXCOORD_0];b.texcoordArray.resize($.count);const G=Tb(o,$);uL(o,$,b.texcoordArray,G)}if(g._FEATURE_ID_RGBA4444!==void 0){const $=o.json.accessors[g._FEATURE_ID_RGBA4444];o.json.extensionsUsed&&o.json.extensionsUsed.includes("EXT_meshopt_compression")&&(b.featureData=Tb(o,$))}g._FEATURE_RGBA4444!==void 0&&(b.featureData=new Uint32Array(Tb(o,o.json.accessors[g._FEATURE_RGBA4444]).buffer));const U=c.material;return b.material=(function($,G){const{emissiveFactor:Z=[0,0,0],alphaMode:se="OPAQUE",alphaCutoff:fe=.5,normalTexture:ue,occlusionTexture:pe,emissiveTexture:ve,doubleSided:Se,name:ke}=$,{baseColorFactor:Ie=[1,1,1,1],metallicFactor:Ve=1,roughnessFactor:qe=1,baseColorTexture:Ue,metallicRoughnessTexture:Ze}=$.pbrMetallicRoughness||{},rt=pe?G[pe.index]:void 0;if(pe&&pe.extensions&&pe.extensions.KHR_texture_transform&&rt){const Et=pe.extensions.KHR_texture_transform;rt.offsetScale=[Et.offset[0],Et.offset[1],Et.scale[0],Et.scale[1]]}return{name:ke,pbrMetallicRoughness:{baseColorFactor:new Qr(...Ie),metallicFactor:Ve,roughnessFactor:qe,baseColorTexture:Ue?G[Ue.index]:void 0,metallicRoughnessTexture:Ze?G[Ze.index]:void 0},doubleSided:Se,emissiveFactor:new Qr(...Z),alphaMode:se,alphaCutoff:fe,normalTexture:ue?G[ue.index]:void 0,occlusionTexture:rt,emissionTexture:ve?G[ve.index]:void 0,defined:$.defined===void 0}})(U!==void 0?o.json.materials[U]:{defined:!1},u),b}function q9(c,o,u){const{matrix:h,rotation:g,translation:b,scale:w,mesh:A,extras:D,children:P,name:B}=c,U={};if(U.name=B,U.localMatrix=h||(function($,G,Z,se){var fe=G[0],ue=G[1],pe=G[2],ve=G[3],Se=fe+fe,ke=ue+ue,Ie=pe+pe,Ve=fe*Se,qe=fe*ke,Ue=fe*Ie,Ze=ue*ke,rt=ue*Ie,Et=pe*Ie,xt=ve*Se,Tt=ve*ke,kt=ve*Ie,Pt=se[0],Rt=se[1],vt=se[2];return $[0]=(1-(Ze+Et))*Pt,$[1]=(qe+kt)*Pt,$[2]=(Ue-Tt)*Pt,$[3]=0,$[4]=(qe-kt)*Rt,$[5]=(1-(Ve+Et))*Rt,$[6]=(rt+xt)*Rt,$[7]=0,$[8]=(Ue+Tt)*vt,$[9]=(rt-xt)*vt,$[10]=(1-(Ve+Ze))*vt,$[11]=0,$[12]=Z[0],$[13]=Z[1],$[14]=Z[2],$[15]=1,$})([],g||[0,0,0,1],b||[0,0,0],w||[1,1,1]),U.globalMatrix=j(U.localMatrix),A!==void 0){U.meshes=u[A];const $=U.anchor=[0,0];for(const G of U.meshes){const{min:Z,max:se}=G.aabb;$[0]+=Z[0]+se[0],$[1]+=Z[1]+se[1]}$[0]=Math.floor($[0]/U.meshes.length/2),$[1]=Math.floor($[1]/U.meshes.length/2)}if(D&&(D.id&&(U.id=D.id),D.lights&&(U.lights=(function($){if(!$.length)return[];const G=(function(pe){const ve=atob(pe),Se=new Uint8Array(ve.length);for(let ke=0;ke<ve.length;ke++)Se[ke]=ve.codePointAt(ke);return Se})($),Z=[],se=G.length/24,fe=new Uint16Array(G.buffer),ue=new Float32Array(G.buffer);for(let pe=0;pe<se;pe++){const ve=fe[2*pe*6]/30,Se=fe[2*pe*6+1]/30,ke=fe[2*pe*6+10]/100,Ie=ue[6*pe+1],Ve=ue[6*pe+2],qe=ue[6*pe+3],Ue=ue[6*pe+4],Ze=qe-Ie,rt=Ue-Ve,Et=Math.hypot(Ze,rt);Z.push({pos:[Ie+.5*Ze,Ve+.5*rt,Se],normal:[rt/Et,-Ze/Et,0],width:Et,height:ve,depth:ke,points:[Ie,Ve,qe,Ue]})}return Z})(D.lights)),D.MAPBOX_geometry_bloom&&(U.isGeometryBloom=D.MAPBOX_geometry_bloom)),P){const $=[];for(const G of P)$.push(q9(o.json.nodes[G],o,u));U.children=$}return U}function i_e(c){if(c.vertices.length===0||c.indices.length===0)return null;const o=new _b(c.vertices,c.indices,8,256),[u,h]=[o.min.clone(),o.max.clone()];return{vertices:c.vertices,indices:c.indices,grid:o,min:u,max:h}}function a_e(c){if(!c.extras||!c.extras.ground)return null;const o=c.extras.ground;if(!o||!Array.isArray(o)||o.length===0)return null;const u=o[0];if(!u||!Array.isArray(u)||u.length===0)return null;const h=[];for(const w of u){if(!Array.isArray(w)||w.length!==2)continue;const A=w[0],D=w[1];typeof A=="number"&&typeof D=="number"&&h.push(new Vt(A,D))}if(h.length<3)return null;h.length>1&&h[h.length-1].equals(h[0])&&h.pop();let g=0;for(let w=0;w<h.length;w++){const A=h[w],D=h[(w+1)%h.length],P=h[(w+2)%h.length];g+=(A.x-D.x)*(P.y-D.y)-(P.x-D.x)*(A.y-D.y)}g>0&&h.reverse();const b=ac(h.flatMap(w=>[w.x,w.y]),[]);return b.length===0?null:{vertices:h,indices:b}}function o_e(c,o){const u=[],h=[];let g=0;const b=[];for(const w of c){g=u.length;const A=w.vertexArray.float32,D=w.indexArray.uint16;for(let P=0;P<w.vertexArray.length;P++)b[0]=A[3*P+0],b[1]=A[3*P+1],b[2]=A[3*P+2],Ct(b,b,o),u.push(new Vt(b[0],b[1]));for(let P=0;P<3*w.indexArray.length;P++)h.push(D[P]+g)}if(h.length%3!=0)return null;for(let w=0;w<h.length;w+=3){const A=u[h[w+0]],D=u[h[w+1]],P=u[h[w+2]];(A.x-D.x)*(P.y-D.y)-(P.x-D.x)*(A.y-D.y)>0&&([h[w+1],h[w+2]]=[h[w+2],h[w+1]])}return{vertices:u,indices:h}}function cL(c){const o=(function(D,P){const B=[],U=WebGL2RenderingContext;if(D.json.textures)for(const $ of D.json.textures){const G={magFilter:U.LINEAR,minFilter:U.NEAREST,wrapS:U.REPEAT,wrapT:U.REPEAT};$.sampler!==void 0&&Object.assign(G,D.json.samplers[$.sampler]),B.push({image:P[$.source],sampler:G,uploaded:!1})}return B})(c,c.images),u=(function(D,P){const B=[];for(const U of D.json.meshes){const $=[];for(const G of U.primitives)$.push(r_e(G,D,P));B.push($)}return B})(c,o),{scenes:h,scene:g,nodes:b}=c.json,w=h?h[g||0].nodes:[...b.keys()],A=[];for(const D of w)A.push(q9(b[D],c,u));return(function(D,P,B){const U={},$=new Set;for(let G=0;G<D.length;G++){const Z=B[P[G]];if(!Z.extras)continue;const se=Z.extras["mapbox:footprint:version"],fe=Z.extras["mapbox:footprint:id"];(se||fe)&&$.add(G),se==="1.0.0"&&fe&&(U[fe]=G)}for(let G=0;G<D.length;G++){if($.has(G))continue;const Z=D[G],se=B[P[G]];if(!se.extras)continue;let fe=null;Z.id in U&&(fe=o_e(D[U[Z.id]].meshes,Z.localMatrix)),fe||(fe=a_e(se)),fe&&(Z.footprint=i_e(fe))}if($.size>0){const G=Array.from($.values()).sort((Z,se)=>Z-se);for(let Z=G.length-1;Z>=0;Z--)D.splice(G[Z],1)}})(A,w,c.json.nodes),A}function s_e(c){c.heightmap=new Float32Array(4096),c.heightmap.fill(-1);const o=c.vertexArray.float32,u=c.aabb.min[0]-1,h=c.aabb.min[1]-1,g=Sb/(c.aabb.max[0]-u+2),b=Sb/(c.aabb.max[1]-h+2);for(let w=0;w<o.length;w+=3){const A=o[w+2],D=(o[w+0]-u)*g|0,P=(o[w+1]-h)*b|0;A>c.heightmap[P*Sb+D]&&(c.heightmap[P*Sb+D]=A)}}function H9(c,o,u,h,g){u.reserve(u.length+4*c.length),h.reserve(h.length+10*c.length),g.reserve(g.length+10*c.length);let b=h.length;for(const w of c){const A=Math.min(10,Math.max(4,1.3*w.height))*o,D=[-w.normal[1],w.normal[0],0],P=Math.min(.29,.1*w.width/w.depth),B=w.width-2*w.depth*o*(P+.01),U=jt([],w.pos,D,B/2),$=jt([],w.pos,D,-B/2),G=[U[0],U[1],U[2]+w.height],Z=[$[0],$[1],$[2]+w.height],se=jt([],w.normal,D,P);Pe(se,se,A);const fe=jt([],w.normal,D,-P);Pe(fe,fe,A),at(se,U,se),at(fe,$,fe),U[2]+=.1,$[2]+=.1,h.emplaceBack(se[0],se[1],se[2]),h.emplaceBack(fe[0],fe[1],fe[2]),h.emplaceBack(U[0],U[1],U[2]),h.emplaceBack($[0],$[1],$[2]),h.emplaceBack(G[0],G[1],G[2]),h.emplaceBack(Z[0],Z[1],Z[2]),h.emplaceBack(U[0],U[1],U[2]),h.emplaceBack($[0],$[1],$[2]),h.emplaceBack(se[0],se[1],se[2]),h.emplaceBack(fe[0],fe[1],fe[2]);const ue=B/A/2;g.emplaceBack(-ue-P,-1,ue,.8),g.emplaceBack(ue+P,-1,ue,.8),g.emplaceBack(-ue,0,ue,1.3),g.emplaceBack(ue,0,ue,1.3),g.emplaceBack(ue+P,-.8,ue,.7),g.emplaceBack(ue+P,-.8,ue,.7),g.emplaceBack(0,0,ue,1.3),g.emplaceBack(0,0,ue,1.3),g.emplaceBack(ue+P,-1.2,ue,.8),g.emplaceBack(ue+P,-1.2,ue,.8),u.emplaceBack(6+b,4+b,8+b),u.emplaceBack(7+b,9+b,5+b),u.emplaceBack(0+b,1+b,2+b),u.emplaceBack(1+b,3+b,2+b),b+=10}}function l_e(c,o){const u={};u.indexArray=new Xa,u.vertexArray=new Yl,u.colorArray=new ec,H9(c,o,u.indexArray,u.vertexArray,u.colorArray);const h={defined:!0};h.emissiveFactor=Qr.black;const g={};return g.baseColorFactor=Qr.white,h.pbrMetallicRoughness=g,u.material=h,u.aabb=new Hr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),u}const G9=gr([{name:"a_pos_3f",components:3,type:"Float32"}]),u_e=gr([{name:"a_normal_3",components:3,type:"Int16"}]),c_e=gr([{name:"a_centroid_3",components:3,type:"Int16"}]),Y9=gr([{name:"a_part_color_emissive",components:2,type:"Uint16"}]),f_e=gr([{name:"a_faux_facade_color_emissive",components:2,type:"Uint16"}]),h_e=gr([{name:"a_faux_facade_data",components:4,type:"Uint16"}]),d_e=gr([{name:"a_faux_facade_vertical_range",components:2,type:"Uint16"}]),p_e=gr([{name:"a_bloom_attenuation",components:4,type:"Float32"}]),m_e=gr([{name:"a_flood_light_wall_radius_1i16",components:1,type:"Uint16"}]),W9=yr.types,MC=32767;function g_e(c,o){const u=Jt+o;for(const h of c)for(const g of h)if(g.x<-o||g.x>u||g.y<-o||g.y>u)return!1;return!0}function y_e(c){switch(c){case"flat":return 3;case"hipped":return 1;case"gabled":return 2;case"parapet":return 0;case"mansard":return 4;case"skillion":return 5;case"pyramidal":return 6;default:throw new Error(`Unknown roof shape: ${c}`)}}class fL{constructor(){this.layoutVertexArray=new Yl,this.layoutAttenuationArray=new ec,this.layoutColorArray=new Wl,this.indexArray=new Xa,this.indexArrayForConflation=new Xa,this.segmentsBucket=new Ii}}class hL{constructor(o){this.layoutFacadePaintArray=null,this.layoutFacadeDataArray=null,this.layoutFacadeVerticalRangeArray=null,this.segmentsBucket=new Ii,this.entranceBloom=new fL;const u=66560;this.layoutVertexArray=new Yl,this.layoutVertexArray.reserve(u),this.layoutNormalArray=new Qu,this.layoutNormalArray.reserve(u),this.layoutCentroidArray=new Qu,this.layoutCentroidArray.reserve(u),this.layoutColorArray=new Wl,this.layoutColorArray.reserve(u),this.layoutFloodLightDataArray=new ym,this.layoutFloodLightDataArray.reserve(u),this.layoutAOArray=new ly,this.layoutAOArray.reserve(u),this.indexArray=new Xa,this.indexArray.reserve(66560),this.indexArrayForConflation=new Xa,this.segmentsBucket=new Ii,this.entranceBloom=new fL,o&&(this.layoutFacadePaintArray=new Wl,this.layoutFacadeDataArray=new $d,this.layoutFacadeVerticalRangeArray=new Wl)}reserve(o,u,h){this.layoutVertexArray.reserveForAdditional(o),this.layoutCentroidArray.reserveForAdditional(o),this.layoutFloodLightDataArray.reserveForAdditional(o),this.layoutNormalArray.reserveForAdditional(o),this.layoutAOArray.reserveForAdditional(o),this.layoutColorArray.reserveForAdditional(o),this.indexArray.reserveForAdditional(u),h&&(this.layoutFacadePaintArray.reserveForAdditional(o),this.layoutFacadeDataArray.reserveForAdditional(o),this.layoutFacadeVerticalRangeArray.reserveForAdditional(o))}}class X9{constructor(o){this.colorBufferUploaded=!1,this.maxHeight=0,this.replacementUpdateTime=0,this.activeReplacements=[],this.footprints=[],this.footprintsVertices=new Mh,this.footprintsIndices=new ym,this.footprintsMin=new Vt(1/0,1/0),this.footprintsMax=new Vt(-1/0,-1/0),this.featuresOnBorder=[],this.buildingWithoutFacade=new hL(!1),this.buildingWithFacade=new hL(!0),this.indexArrayForConflationUploaded=!1,this.featureFootprintLookup=new Map,this.buildingIds=new Set,this.footprintLookup={},this.zoom=o.zoom,this.canonical=o.canonical,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.worldview=o.worldview,this.lut=o.lut,this.programConfigurations=new H(o.layers,{zoom:o.zoom,lut:o.lut}),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=o.projection,this.groundEffect=new Zi(o),this.groundEffect.groundRadiusArray=new To,this.hasAppearances=null}updateFootprints(o,u){const h=new _b([],[],1),g={vertices:[],indices:new Uint32Array(0),grid:h,min:this.footprintsMin,max:this.footprintsMax,buildingIds:this.buildingIds};u.push({footprint:g,id:o})}updateAppearances(o,u,h,g){}prepare(){return(function(){if(xC!=null||S9!=null)return null;if(L1!=null)return L1;const o=fetch(Ja.BUILDING_GEN_URL);return L1=(function(u){let h,g,b,w,A;function D(){h=new Uint8Array(A.buffer),g=new Int16Array(A.buffer),b=new Int32Array(A.buffer),w=new Float32Array(A.buffer)}function P(){throw new Error("Unexpected BuildingGen error.")}const B=()=>{},U={a:{a:P,f:function($){const G=h.length,Z=Math.max($>>>0,Math.ceil(1.2*G)),se=Math.ceil((Z-G)/65536);try{return A.grow(se),D(),!0}catch{return!1}},g:P,b:B,c:B,d:B,e:B}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(u,U):u.then($=>$.arrayBuffer()).then($=>WebAssembly.instantiate($,U))).then($=>{const G=$.instance.exports;return(0,G.g)(),A=G.f,D(),new Uye({setStyle:G.h,setAOOptions:G.i,setMetricOptions:G.j,setStructuralOptions:G.k,setFacadeOptions:G.l,setFauxFacadeOptions:G.m,setFacadeClassifierOptions:G.n,addFeature:G.o,addFacade:G.p,generateMesh:G.q,getLastError:G.r,getOuterRingLength:G.s,getMeshCount:G.t,getPositionsPtr:G.u,getPositionsLength:G.v,getNormalsPtr:G.w,getNormalsLength:G.x,getAOPtr:G.y,getAOLength:G.z,getUVPtr:G.A,getUVLength:G.B,getFauxFacadePtr:G.C,getFauxFacadeLength:G.D,getIndicesPtr:G.E,getIndicesLength:G.F,getBuildingPart:G.G,getRingCount:G.H,getRingPtr:G.I,getRingLength:G.J,malloc:G.K,free:G.L,heapU8:h,heap16:g,heap32:b,heapF32:w})})})(o).then(u=>(L1=null,xC=u,xC)).catch(u=>{Hn("Could not load building-gen"),L1=null,S9=u}),L1})()}populate(o,u,h,g){const b=$ye();if(!b)return;const w=qt(h);this.tileToMeter=w,this.brightness=u.brightness,b.setStyle({normalScale:[1,-1,w],tileToMeters:w}),b.setAOOptions(!1,.3),b.setMetricOptions(!1,16),b.setStructuralOptions(!0),b.setFacadeClassifierOptions(3);const A=new Map,D=new Map;let P=0;for(const{feature:ue}of o){if(W9[ue.type]!=="LineString"){A.set(ue.id,ue.properties.source_id);continue}const pe=this.layers[0]._featureFilter.needGeometry;if(pe&&!this.layers[0]._featureFilter.filter(new Jr(this.zoom),ue,h))continue;const ve=Qn(ue,pe);if(!pe&&!this.layers[0]._featureFilter.filter(new Jr(this.zoom),ve,h))continue;const Se=pe?ve.geometry:Un(ue,h,g),ke=[];for(const Ue of Se)for(const Ze of Ue)ke.push(Ze.x),ke.push(Ze.y);const Ie={coordinates:ke,crossPerc:ue.properties.cross_perc,distanceToRoad:ue.properties.distance_to_road,entrances:ue.properties.entrances,sourceId:0},Ve=ue.properties.source_id;let qe=D.get(Ve);qe||(qe=[],D.set(Ve,qe)),qe.push(Ie),++P}this.maxHeight=0;const B=new Array,U=new Set,$=ue=>{ue!=null&&U.add(ue)},G=(ue,pe)=>{ue!=null&&B.push({buildingId:ue,footprintIndex:pe})},Z=64*(o.length-P),se=Z/2;this.buildingWithFacade.reserve(Z,se,!0),this.buildingWithoutFacade.reserve(2*Z,2*se,!1),this.footprintsIndices.reserve(16*(o.length-P)),this.footprintsVertices.reserve(8*(o.length-P));for(const{feature:ue,id:pe,index:ve,sourceLayerIndex:Se}of o){if(W9[ue.type]==="LineString")continue;const ke=this.layers[0]._featureFilter.needGeometry;if(ke&&!this.layers[0]._featureFilter.filter(new Jr(this.zoom),ue,h))continue;let Ie=null;if(ue.properties&&ue.properties.hasOwnProperty("building_id")&&(Ie=Number(ue.properties.building_id),U.has(Ie)))continue;const Ve=Qn(ue,ke);if(!ke&&!this.layers[0]._featureFilter.filter(new Jr(this.zoom),Ve,h))continue;const qe=ke?Ve.geometry:Un(ue,h,g),Ue=pb(qe,500);let Ze=!1;for(const mr of Ue)if(mr.length!==1){Ze=!0;break}if(Ze){$(Ie);continue}if(!g_e(qe,163)){$(Ie);continue}const rt=this.layers[0],Et=y_e(rt.layout.get("building-roof-shape").evaluate(ue,{},h)),xt=rt.layout.get("building-base").evaluate(ue,{},h),Tt=rt.layout.get("building-height").evaluate(ue,{},h),kt=rt.layout.get("building-flood-light-ground-radius").evaluate(ue,{},h),Pt=rt.paint.get("building-ambient-occlusion-intensity"),Rt=kt/this.tileToMeter;ue.properties["building-part"]="roof";const vt=rt.paint.get("building-color").evaluate(ue,{},this.canonical).toPremultipliedRenderColor(this.lut),zt=rt.paint.get("building-emissive-strength").evaluate(ue,{},this.canonical);ue.properties["building-part"]="wall";const Mt=rt.paint.get("building-color").evaluate(ue,{},this.canonical).toPremultipliedRenderColor(this.lut),Nt=rt.paint.get("building-emissive-strength").evaluate(ue,{},this.canonical);ue.properties["building-part"]="window";const Lt=rt.paint.get("building-color").evaluate(ue,{},this.canonical).toPremultipliedRenderColor(this.lut),fn=rt.paint.get("building-emissive-strength").evaluate(ue,{},this.canonical);ue.properties["building-part"]="door";const pn=rt.paint.get("building-color").evaluate(ue,{},this.canonical).toPremultipliedRenderColor(this.lut),nn=rt.paint.get("building-emissive-strength").evaluate(ue,{},this.canonical);let an=rt.layout.get("building-flood-light-wall-radius").evaluate(ue,{},h);an=ze(an,0,2048);const kn=an/2048*MC,Cn=A.get(pe),cn=D.get(Cn)||[],Wn=cn.length!==0&&rt.layout.get("building-facade").evaluate(ue,{},h);b.setFacadeOptions(4,!0),b.setFauxFacadeOptions(Wn,!1,1);let vr=0,Zr=0,pr=0,di=0,kr=0,Ra=0,Ur=0,ui=0,Vi=0,ta=0,na=0;if(Wn){let mr=Math.round(rt.layout.get("building-facade-floors").evaluate(ue,{},h));if(xt===0){mr=Math.max(1,mr-(cn.length>0?1:0));let La=4;if(Tt>100){const Oo=[10,13,15];La=Oo[ue.id?ue.id%Oo.length:0]}else Tt<=10&&(La=3);b.setFacadeOptions(La,!0),kr=(Tt<15?1.3:1.61803)*La/w}else kr=xt/w;Ra=Tt/w,kr=Math.min(kr,Ra),pr=rt.layout.get("building-facade-unit-width").evaluate(ue,{},h)/w,di=(Ra-kr)/mr,b.setFauxFacadeOptions(!0,!0,pr);const Jo=rt.layout.get("building-facade-window").evaluate(ue,{},h);vr=Jo[0],Zr=Jo[1],Ur=Math.floor(65535*Math.min(1,kr/Jt)),ui=Math.floor(65535*Math.min(1,Ra/Jt)),Vi=Math.floor(255*vr)<<8|Math.floor(255*Zr),ta=Math.floor(65535*Math.min(1,pr/Jt)),na=Math.floor(65535*Math.min(1,di/Jt))}const ka=Array(Ue.length),fs={x:1/0,y:1/0},Hs={x:-1/0,y:-1/0},fo={x:0,y:0};let Ao=0;for(let mr=0;mr<Ue.length;mr++){const Jo=Ue[mr];if(Jo.length>0){const La=[],Oo=Array(Jo.length+1);Oo[0]=0;for(let $f=0;$f<Jo.length;$f++){const yu=Jo[$f];for(let uc=0;uc<yu.length;uc++){const es=yu[yu.length-uc-1];fs.x=Math.min(fs.x,es.x),fs.y=Math.min(fs.y,es.y),Hs.x=Math.max(Hs.x,es.x),Hs.y=Math.max(Hs.y,es.y),fo.x+=es.x,fo.y+=es.y,Ao++,La.push(es.x),La.push(es.y)}Oo[$f+1]=La.length}ka[mr]={id:ue.id?ue.id:0,height:Tt,minHeight:xt,sourceId:0,roofType:Et,coordinates:La,ringIndices:Oo}}}fo.x/=Ao||1,fo.y/=Ao||1;const qo=b.generateMesh(ka,cn);if(typeof qo=="string"){Hn(`Unable to generate building ${ue.id}: ${qo}`),$(Ie);continue}if(qo.meshes.length===0||qo.modifiedPolygonRings.length===0){$(Ie);continue}const fr=Wn?this.buildingWithFacade:this.buildingWithoutFacade;let ra=0;for(const mr of qo.meshes)ra+=mr.positions.length/3;const _a=fr.segmentsBucket.prepareSegment(ra,fr.layoutVertexArray,fr.indexArray),lc=[];let Rl=null,hs=0,kl=-1;const Im=fr.layoutVertexArray.length,dl=Im+ra;fr.layoutVertexArray.resize(dl),fr.layoutCentroidArray.resize(dl),fr.layoutNormalArray.resize(dl),fr.layoutAOArray.resize(dl),fr.layoutColorArray.resize(dl),fr.layoutFloodLightDataArray.resize(dl),Wn&&(fr.layoutFacadePaintArray.resize(dl),fr.layoutFacadeDataArray.resize(dl),fr.layoutFacadeVerticalRangeArray.resize(dl));const eM=fr.indexArray.length;let W1=0,Kl=Im;for(const mr of qo.meshes){let Jo,La;if(mr.buildingPart===1)Jo=vt,La=zt;else if(mr.buildingPart===0)Jo=Mt,La=Nt;else if(mr.buildingPart===2)Jo=Lt,La=fn;else{if(mr.buildingPart!==3)continue;Jo=pn,La=nn}if(La=ze(La,0,1),mr.buildingPart===3){const ho=new Array;for(let ml=0;ml<mr.positions.length;ml+=12){const Cv=mr.positions[ml+0],ps=mr.positions[ml+1],_u=mr.positions[ml+3],Fh=mr.positions[ml+4],km=mr.positions[ml+2],KL=mr.positions[ml+8]-km,QL=1,bE=_u-Cv,Z1=Fh-ps,ap=Math.hypot(bE,Z1);ho.push({pos:[Cv+.5*bE,ps+.5*Z1,km],normal:[Z1/ap,-bE/ap,0],width:ap,height:KL,depth:QL,points:[Cv,ps,_u,Fh]})}const ds=fr.entranceBloom.segmentsBucket.prepareSegment(10*ho.length,fr.entranceBloom.layoutVertexArray,fr.entranceBloom.indexArray),Co=fr.entranceBloom.layoutVertexArray.length;hs=fr.entranceBloom.indexArray.length,H9(ho,.5/this.tileToMeter,fr.entranceBloom.indexArray,fr.entranceBloom.layoutVertexArray,fr.entranceBloom.layoutAttenuationArray);const pl=fr.entranceBloom.layoutVertexArray.length-Co;kl=fr.entranceBloom.indexArray.length-hs;for(let ml=0;ml<pl;ml++)fr.entranceBloom.layoutColorArray.emplaceBack(255*pn.r<<8|255*pn.g,255*pn.b<<8|51*nn);ds.vertexLength+=pl,ds.primitiveLength+=kl,Rl={part:mr.buildingPart,vertexOffset:Co,vertexLength:pl}}fr.layoutVertexArray.float32.set(mr.positions,3*Kl);const Oo=mr.positions.length/3;for(let ho=0;ho<Oo;++ho){const ds=3*ho;W1=Math.max(W1,mr.positions[ds+2]);const Co=mr.normals[ds+1]*MC,pl=mr.normals[ds+2]*MC,ml=3*(Kl+ho);fr.layoutNormalArray.int16[ml]=mr.normals[ds]*MC,fr.layoutNormalArray.int16[ml+1]=Co,fr.layoutNormalArray.int16[ml+2]=pl;const Cv=mr.ao[ho];fr.layoutAOArray.uint8[Kl+ho]=255*Cv;const ps=1+(Cv-1)*Pt,_u=255*Jo.b*ps<<8|255*La;fr.layoutColorArray.uint16[2*(Kl+ho)]=255*Jo.r*ps<<8|255*Jo.g*ps,fr.layoutColorArray.uint16[2*(Kl+ho)+1]=_u}const $f=Math.floor(fo.x),yu=Math.floor(fo.y),uc=Math.floor(Tt);for(let ho=0;ho<Oo;++ho){const ds=3*(Kl+ho);fr.layoutCentroidArray.int16[ds]=$f,fr.layoutCentroidArray.int16[ds+1]=yu,fr.layoutCentroidArray.int16[ds+2]=uc}if(fr.layoutFloodLightDataArray.uint16.fill(mr.buildingPart===0?kn:0,Kl,Kl+Oo),Wn){const ho=255*Lt.r<<8|255*Lt.g,ds=255*Lt.b<<8|255*fn;for(let Co=0;Co<Oo;++Co){const pl=2*(Kl+Co);fr.layoutFacadePaintArray.uint16[pl]=ho,fr.layoutFacadePaintArray.uint16[pl+1]=ds}for(let Co=0;Co<Oo;++Co)if(mr.isFauxFacade[Co]){const pl=Math.min(65535,Math.floor(mr.uv[2*Co]*qo.outerRingLength));fr.layoutFacadeDataArray.emplace(Kl+Co,1|pl,Vi,ta,na),fr.layoutFacadeVerticalRangeArray.emplace(Kl+Co,Ur,ui)}else fr.layoutFacadeDataArray.emplace(Kl+Co,0,0,0,0),fr.layoutFacadeVerticalRangeArray.emplace(Kl+Co,0,0)}const es=_a.vertexLength,vE=mr.indices.length/3,Rm=fr.indexArray.length;fr.indexArray.resize(Rm+vE);for(let ho=0;ho<vE;++ho){const ds=3*ho,Co=3*Rm+ds;fr.indexArray.uint16[Co]=es+mr.indices[ds],fr.indexArray.uint16[Co+1]=es+mr.indices[ds+1],fr.indexArray.uint16[Co+2]=es+mr.indices[ds+2]}mr.buildingPart!==1&&mr.buildingPart!==0&&mr.buildingPart!==2&&mr.buildingPart!==3||lc.push({part:mr.buildingPart,vertexOffset:Kl,vertexLength:mr.positions.length/3}),Kl+=Oo,_a.vertexLength+=Oo,_a.primitiveLength+=mr.indices.length/3}this.maxHeight=Math.max(this.maxHeight,W1);const tM=fr.indexArray.length-eM,Pm=this.footprintsIndices.length,xy=this.footprintsVertices.length,Ov=[],Uf=new Vt(1/0,1/0),Nh=new Vt(-1/0,-1/0),_E=this.groundEffect.vertexArray.length;for(const mr of qo.modifiedPolygonRings){const Jo=[],La=new Vt(1/0,1/0),Oo=new Vt(-1/0,-1/0);for(let $f=0;$f<mr.length;$f+=2){const yu=mr.length-$f-2;La.x=Math.min(La.x,mr[yu]),La.y=Math.min(La.y,mr[yu+1]),Oo.x=Math.max(Oo.x,mr[yu]),Oo.y=Math.max(Oo.y,mr[yu+1]);const uc=new Vt(mr[yu],mr[yu+1]);Jo.push(uc),Ov.push(uc.x,uc.y),this.footprintsVertices.emplaceBack(uc.x,uc.y)}Uf.x=Math.min(Uf.x,La.x),Uf.y=Math.min(Uf.y,La.y),Nh.x=Math.max(Nh.x,Oo.x),Nh.y=Math.max(Nh.y,Oo.y),this.groundEffect.addData(Jo,[La,Oo],Rt)}const X1=this.groundEffect.vertexArray.length-_E;this.groundEffect.groundRadiusArray.reserveForAdditional(X1);for(let mr=0;mr<X1;mr++)this.groundEffect.groundRadiusArray.emplaceBack(kt);(fs.x<0||Hs.x>Jt||fs.y<0||Hs.y>Jt)&&this.featuresOnBorder.push({featureId:ue.id,footprintIndex:this.footprints.length});{const mr=ac(Ov,null,2);this.footprintsIndices.resize(this.footprintsIndices.length+mr.length),this.footprintsIndices.uint16.set(mr,Pm),this.buildingIds.add(Ie??ue.id),this.footprintsMin.x=Math.min(this.footprintsMin.x,Uf.x),this.footprintsMin.y=Math.min(this.footprintsMin.y,Uf.y),this.footprintsMax.x=Math.max(this.footprintsMax.x,Nh.x),this.footprintsMax.y=Math.max(this.footprintsMax.y,Nh.y);const Jo={footprintVertexOffset:xy,footprintVertexLength:this.footprintsVertices.length-xy,footprintIndexOffset:Pm,footprintIndexLength:this.footprintsIndices.length-Pm,min:Uf,max:Nh,hiddenFlags:0,indicesOffset:eM,indicesLength:tM,bloomIndicesOffset:hs,bloomIndicesLength:kl,groundEffectVertexOffset:_E,groundEffectVertexLength:X1,hasFauxFacade:Wn,height:W1,promoteId:pe,feature:Ve,parts:lc,buildingBloom:Rl},La=this.footprints.length;ue.id!==void 0&&this.featureFootprintLookup.set(ue.id,La),G(Ie,La),this.footprints.push(Jo)}this.programConfigurations.populatePaintArrays(fr.layoutVertexArray.length,ue,ve,{},u.availableImages,h,u.brightness),this.groundEffect.addPaintPropertiesData(ue,ve,{},u.availableImages,h,u.brightness),u.featureIndex.insert(ue,qe,ve,Se,this.index,Im)}B.forEach(({buildingId:ue,footprintIndex:pe})=>{U.has(ue)&&(this.footprints[pe].hiddenFlags|=4)});const fe=new Set;this.buildingIds.forEach((ue,pe,ve)=>{U.has(ue)||fe.add(ue)}),this.buildingIds=fe,this.groundEffect.prepareBorderSegments()}update(o,u,h,g,b,w,A){this.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A),this.groundEffect.update(o,u,b,h,g,w,A),this.evaluate(this.layers[0],o),this.colorBufferUploaded=!1}isEmpty(){return this.buildingWithoutFacade.layoutVertexArray.length===0&&this.buildingWithFacade.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(o){const u=h=>{h.layoutVertexBuffer=o.createVertexBuffer(h.layoutVertexArray,G9.members),h.layoutNormalBuffer=o.createVertexBuffer(h.layoutNormalArray,u_e.members),h.layoutCentroidBuffer=o.createVertexBuffer(h.layoutCentroidArray,c_e.members),h.layoutFloodLightDataBuffer=o.createVertexBuffer(h.layoutFloodLightDataArray,m_e.members),h.layoutFacadeDataArray&&h.layoutFacadeDataArray.length&&(h.layoutFacadeDataBuffer=o.createVertexBuffer(h.layoutFacadeDataArray,h_e.members)),h.layoutFacadeVerticalRangeArray&&h.layoutFacadeVerticalRangeArray.length&&(h.layoutFacadeVerticalRangeBuffer=o.createVertexBuffer(h.layoutFacadeVerticalRangeArray,d_e.members)),h.entranceBloom.layoutVertexArray.length&&(h.entranceBloom.layoutVertexBuffer=o.createVertexBuffer(h.entranceBloom.layoutVertexArray,G9.members),h.entranceBloom.layoutAttenuationBuffer=o.createVertexBuffer(h.entranceBloom.layoutAttenuationArray,p_e.members)),this.uploadUpdatedColorBuffer(o),this.uploadUpdatedIndexBuffer(o)};this.uploaded||(u(this.buildingWithoutFacade),u(this.buildingWithFacade),this.groundEffect.upload(o)),this.groundEffect.uploadPaintProperties(o),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){const o=u=>{u.layoutVertexBuffer&&(u.layoutVertexBuffer.destroy(),u.layoutNormalBuffer.destroy(),u.layoutColorBuffer.destroy(),u.segmentsBucket.destroy(),u.indexBuffer&&u.indexBuffer.destroy(),u.entranceBloom.layoutVertexBuffer&&(u.entranceBloom.layoutVertexBuffer.destroy(),u.entranceBloom.layoutColorBuffer.destroy(),u.entranceBloom.layoutAttenuationBuffer.destroy(),u.entranceBloom.indexBuffer.destroy(),u.entranceBloom.segmentsBucket.destroy()))};o(this.buildingWithoutFacade),o(this.buildingWithFacade),this.groundEffect.destroy(),this.programConfigurations.destroy()}updateFootprintHiddenFlags(o,u,h=!0){let g=!1;const b=h?u:0,w=0|(h?-1:~u);this.groundEffect.hiddenByLandmarkVertexArray.length===0&&this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const A of o){const D=this.footprints[A],P=D.hiddenFlags&w|b;D.hiddenFlags!==P&&(D.hiddenFlags=P,g=!0,this.groundEffect.updateHiddenByLandmarkRange(D.groundEffectVertexOffset,D.groundEffectVertexLength,D.hiddenFlags!==0))}return g&&(this.indexArrayForConflationUploaded=!1),g}uploadUpdatedIndexBuffer(o){if(this.groundEffect.uploadHiddenByLandmark(o),this.indexArrayForConflationUploaded)return;const u=g=>{g.indexArray.length!==0&&(g.indexArrayForConflation.resize(g.indexArray.length),g.indexArrayForConflation.uint16.set(g.indexArray.uint16),g.entranceBloom.indexArrayForConflation.resize(g.entranceBloom.indexArray.length),g.entranceBloom.indexArrayForConflation.uint16.set(g.entranceBloom.indexArray.uint16))};u(this.buildingWithoutFacade),u(this.buildingWithFacade);for(const g of this.footprints){const b=g.hasFauxFacade?this.buildingWithFacade:this.buildingWithoutFacade,w=g.indicesOffset+g.indicesLength;if(g.hiddenFlags!==0){for(let D=g.indicesOffset;D<w;D++)b.indexArrayForConflation.uint16[3*D+0]=0,b.indexArrayForConflation.uint16[3*D+1]=0,b.indexArrayForConflation.uint16[3*D+2]=0;const A=g.bloomIndicesOffset+g.bloomIndicesLength;for(let D=g.bloomIndicesOffset;D<A;D++)b.entranceBloom.indexArrayForConflation.uint16[3*D+0]=0,b.entranceBloom.indexArrayForConflation.uint16[3*D+1]=0,b.entranceBloom.indexArrayForConflation.uint16[3*D+2]=0}}const h=g=>{g.indexArray.length!==0&&(g.indexBuffer?g.indexBuffer.updateData(g.indexArrayForConflation):g.indexBuffer=o.createIndexBuffer(g.indexArrayForConflation,!0),g.entranceBloom.indexBuffer?g.entranceBloom.indexBuffer.updateData(g.entranceBloom.indexArrayForConflation):g.entranceBloom.indexBuffer=o.createIndexBuffer(g.entranceBloom.indexArrayForConflation,!0))};h(this.buildingWithoutFacade),h(this.buildingWithFacade),this.indexArrayForConflationUploaded=!0}uploadUpdatedColorBuffer(o){const u=h=>{h.layoutColorBuffer?h.layoutColorBuffer.updateData(h.layoutColorArray):h.layoutColorBuffer=o.createVertexBuffer(h.layoutColorArray,Y9.members,!0),h.layoutFacadePaintArray&&(h.layoutFacadePaintBuffer?h.layoutFacadePaintBuffer.updateData(h.layoutFacadePaintArray):h.layoutFacadePaintBuffer=o.createVertexBuffer(h.layoutFacadePaintArray,f_e.members,!0)),h.entranceBloom.layoutColorBuffer?h.entranceBloom.layoutColorBuffer.updateData(h.entranceBloom.layoutColorArray):h.entranceBloom.layoutColorBuffer=o.createVertexBuffer(h.entranceBloom.layoutColorArray,Y9.members,!0)};u(this.buildingWithoutFacade),u(this.buildingWithFacade),this.colorBufferUploaded=!0}evaluate(o,u){const h=o.paint.get("building-ambient-occlusion-intensity");for(const g of this.footprints){if(4&g.hiddenFlags)continue;const b=u[g.promoteId],w=g.feature;w.properties["building-part"]="roof";const A=o.paint.get("building-color").evaluate(w,b,this.canonical).toPremultipliedRenderColor(this.lut),D=o.paint.get("building-emissive-strength").evaluate(w,b,this.canonical);w.properties["building-part"]="wall";const P=o.paint.get("building-color").evaluate(w,b,this.canonical).toPremultipliedRenderColor(this.lut),B=o.paint.get("building-emissive-strength").evaluate(w,b,this.canonical);w.properties["building-part"]="window";const U=o.paint.get("building-color").evaluate(w,b,this.canonical).toPremultipliedRenderColor(this.lut),$=o.paint.get("building-emissive-strength").evaluate(w,b,this.canonical);w.properties["building-part"]="door";const G=o.paint.get("building-color").evaluate(w,b,this.canonical).toPremultipliedRenderColor(this.lut),Z=o.paint.get("building-emissive-strength").evaluate(w,b,this.canonical),se=g.hasFauxFacade?this.buildingWithFacade:this.buildingWithoutFacade;for(const ue of g.parts){let pe,ve=A;ue.part===1?(ve=A,pe=D):ue.part===0?(ve=P,pe=B):ue.part===2?(ve=U,pe=$):ue.part===3&&(ve=G,pe=Z),pe=ze(pe,0,1);for(let Se=0;Se<ue.vertexLength;Se++){const ke=ue.vertexOffset+Se,Ie=1+(se.layoutAOArray.uint8[ke]/255-1)*h;se.layoutColorArray.emplace(ke,ve.r*Ie*255<<8|ve.g*Ie*255,ve.b*Ie*255<<8|255*pe),g.hasFauxFacade&&se.layoutFacadePaintArray.emplace(ke,255*U.r<<8|255*U.g,255*U.b<<8|255*$)}}const fe=g.buildingBloom;if(fe)for(let ue=0;ue<fe.vertexLength;ue++)se.entranceBloom.layoutColorArray.emplace(fe.vertexOffset+ue,255*G.r<<8|255*G.g,255*G.b<<8|51*Z)}}needsEvaluation(){return!this.colorBufferUploaded}updateReplacement(o,u,h){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const g=u.getReplacementRegionsForTile(o.toUnwrapped());if(m(this.activeReplacements,g))return;this.activeReplacements=g;for(const w of this.footprints)w.hiddenFlags&=-2;const b=[];for(const w of this.activeReplacements){if(w.order<h)continue;const A=Math.max(1,Math.pow(2,w.footprintTileId.canonical.z-o.canonical.z));for(const D of this.footprints)D.min.x>w.max.x||D.max.x<w.min.x||D.min.y>w.max.y||D.max.y<w.min.y||(b.length=0,v_e(this.footprintsVertices,D.footprintVertexOffset,D.footprintVertexLength,w.footprintTileId.canonical,o.canonical,b),z(w.footprint,b,this.footprintsIndices.uint16,D.footprintIndexOffset,D.footprintIndexLength,0,-A)&&(D.hiddenFlags|=1))}this.groundEffect.hiddenByLandmarkVertexArray.length===0&&this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const w of this.footprints)this.groundEffect.updateHiddenByLandmarkRange(w.groundEffectVertexOffset,w.groundEffectVertexLength,w.hiddenFlags!==0);this.indexArrayForConflationUploaded=!1}getFootprint(o){if(o.id!==void 0){const u=this.featureFootprintLookup.get(o.id);return this.footprints[u]}return null}getHeightAtTileCoord(o,u){let h=Number.NEGATIVE_INFINITY,g=!0;const b=4*(o+Jt)*Jt+(u+Jt);if(this.footprintLookup.hasOwnProperty(b)){const A=this.footprintLookup[b];return A?{height:A.height,hidden:A.hiddenFlags!==0}:void 0}const w=new Vt(o,u);for(const A of this.footprints)o>A.max.x||A.min.x>o||u>A.max.y||A.min.y>u||A.height<=h||__e(w,this.footprintsVertices.float32.subarray(2*A.footprintVertexOffset,2*(A.footprintVertexOffset+A.footprintVertexLength)),this.footprintsIndices.uint16.subarray(A.footprintIndexOffset,A.footprintIndexOffset+A.footprintIndexLength))&&(h=A.height,this.footprintLookup[b]=A,g=A.hiddenFlags!==0);if(h!==Number.NEGATIVE_INFINITY)return{height:h,hidden:g};this.footprintLookup[b]=void 0}}function __e(c,o,u){for(let h=0;h<u.length;h+=3){const g=u[h],b=u[h+1],w=u[h+2],A=o[2*g+0],D=o[2*g+1],P=o[2*b+0],B=o[2*b+1],U=o[2*w+0],$=o[2*w+1],G=(A-U)*(c.y-$)-(D-$)*(c.x-U),Z=(P-A)*(c.y-D)-(B-D)*(c.x-A);if(G<0!=Z<0&&G!==0&&Z!==0)continue;const se=(U-P)*(c.y-B)-($-B)*(c.x-P);if(se===0||se<0==G+Z<=0)return!0}return!1}function v_e(c,o,u,h,g,b){const w=Math.pow(2,h.z-g.z);for(let A=0;A<u;A++){let D=c.float32[2*(A+o)+0],P=c.float32[2*(A+o)+1];D=(D+g.x*Jt)*w-h.x*Jt,P=(P+g.y*Jt)*w-h.y*Jt,b.push(new Vt(D,P))}}let Z9,K9;Kt(X9,"BuildingBucket",{omit:["layers"]}),Kt(hL,"BuildingGeometry"),Kt(fL,"BuildingBloomGeometry");const b_e=gr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),x_e=gr([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:w_e}=b_e,S_e=gr([{name:"a_packed",components:3,type:"Float32"}]),{members:T_e}=S_e,E_e=gr([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:A_e}=E_e;class Q9{constructor(o,u){this.width=o,this.height=u,this.nextRow=0,this.image=new Ph({width:o,height:u}),this.positions={},this.uploaded=!1}getDash(o,u){const h=this.getKey(o,u);return this.positions[h]}trim(){const o=this.width,u=this.height=Ft(this.nextRow);this.image.resize({width:o,height:u})}getKey(o,u){return o.join(",")+u}getDashRanges(o,u,h){const g=[];let b=o.length%2==1?-o[o.length-1]*h:0,w=o[0]*h,A=!0;g.push({left:b,right:w,isDash:A,zeroLength:o[0]===0});let D=o[0];for(let P=1;P<o.length;P++){A=!A;const B=o[P];b=D*h,D+=B,w=D*h,g.push({left:b,right:w,isDash:A,zeroLength:B===0})}return g}addRoundDash(o,u,h){const g=u/2;for(let b=-h;b<=h;b++){const w=this.width*(this.nextRow+h+b);let A=0,D=o[A];for(let P=0;P<this.width;P++){P/D.right>1&&(D=o[++A]);const B=Math.abs(P-D.left),U=Math.abs(P-D.right),$=Math.min(B,U);let G;const Z=b/h*(g+1);if(D.isDash){const se=g-Math.abs(Z);G=Math.sqrt($*$+se*se)}else G=g-Math.sqrt($*$+Z*Z);this.image.data[w+P]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(o,u){for(let D=o.length-1;D>=0;--D){const P=o[D],B=o[D+1];P.zeroLength?o.splice(D,1):B&&B.isDash===P.isDash&&(B.left=P.left,o.splice(D,1))}const h=o[0],g=o[o.length-1];h.isDash===g.isDash&&(h.left=g.left-this.width,g.right=h.right+this.width);const b=this.width*this.nextRow;let w=0,A=o[w];for(let D=0;D<this.width;D++){D/A.right>1&&(A=o[++w]);const P=Math.abs(D-A.left),B=Math.abs(D-A.right),U=Math.min(P,B);this.image.data[b+D]=Math.max(0,Math.min(255,(A.isDash?U:-U)+u+128))}}addDash(o,u){const h=this.getKey(o,u);if(this.positions[h])return this.positions[h];const g=u==="round",b=g?7:0,w=2*b+1;if(this.nextRow+w>this.height)return Hn("LineAtlas out of space"),null;o.length===0&&o.push(1);let A=0;for(let B=0;B<o.length;B++)o[B]<0&&(Hn("Negative value is found in line dasharray, replacing values with 0"),o[B]=0),A+=o[B];if(A!==0){const B=this.width/A,U=this.getDashRanges(o,this.width,B);g?this.addRoundDash(U,B,b):this.addRegularDash(U,u==="square"?.5*B:0)}const D=this.nextRow+b;this.nextRow+=w;const P={tl:[D,b],br:[A,0]};return this.positions[h]=P,P}}Kt(Q9,"LineAtlas");const O_e=yr.types,C_e=Math.cos(Math.PI/180*37.5),M_e=Math.cos(Math.PI/180*5);class dL{constructor(o){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.elevationType="none",this.zoom=o.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=o.overscaling,this.pixelRatio=o.pixelRatio,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Xo,this.layoutVertexArray2=new Yl,this.patternVertexArray=new Yl,this.indexArray=new Xa,this.programConfigurations=new H(o.layers,{zoom:o.zoom,lut:o.lut}),this.segments=new Ii,this.maxLineLength=0,this.zOffsetVertexArray=new Yl,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.tessellationStep=o.tessellationStep?o.tessellationStep:128,this.worldview=o.worldview,this.hasAppearances=null}updateFootprints(o,u){}updateAppearances(o,u,h,g){}populate(o,u,h,g){this.hasPattern=RT("line",this.layers,this.pixelRatio,u);const b=this.layers[0].layout.get("line-sort-key");this.tileToMeter=qt(h);const w=this.layers[0].layout.get("line-elevation-reference");if(w==="hd-road-markup")this.elevationType="road";else{const $=this.layers[0].layout.get("line-z-offset"),G=$.isConstant()&&!$.constantOr(0);this.elevationType=w!=="sea"&&w!=="ground"&&G?"none":"offset",this.elevationType==="offset"&&w==="none"&&Hn(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`)}const A=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.elevationType==="offset"&&A!==void 0;const D=[];for(const{feature:$,id:G,index:Z,sourceLayerIndex:se}of o){const fe=this.layers[0]._featureFilter.needGeometry,ue=Qn($,fe);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),ue,h))continue;const pe=b?b.evaluate(ue,{},h):void 0,ve={id:G,properties:$.properties,type:$.type,sourceLayerIndex:se,index:Z,geometry:fe?ue.geometry:Un($,h,g),patterns:{},sortKey:pe};D.push(ve)}b&&D.sort(($,G)=>$.sortKey-G.sortKey);const{lineAtlas:P,featureIndex:B}=u,U=this.addConstantDashes(P);for(const $ of D){const{geometry:G,index:Z,sourceLayerIndex:se}=$;if(U&&this.addFeatureDashes($,P),this.hasPattern){const fe=kT("line",this.layers,$,this.zoom,this.pixelRatio,u);this.patternFeatures.push(fe)}else this.addFeature($,G,Z,h,P.positions,u.availableImages,u.brightness,u.elevationFeatures);B.insert(o[Z].feature,G,Z,se,this.index)}}addConstantDashes(o){let u=!1;for(const h of this.layers){const g=h.paint.get("line-dasharray").value,b=h.layout.get("line-cap").value;if(g.kind!=="constant"||b.kind!=="constant")u=!0;else{const w=b.value,A=g.value;if(!A)continue;o.addDash(A,w)}}return u}addFeatureDashes(o,u){const h=this.zoom;for(const g of this.layers){const b=g.paint.get("line-dasharray").value,w=g.layout.get("line-cap").value;if(b.kind==="constant"&&w.kind==="constant")continue;let A,D;if(b.kind==="constant"){if(A=b.value,!A)continue}else A=b.evaluate({zoom:h},o);D=w.kind==="constant"?w.value:w.evaluate({zoom:h},o),u.addDash(A,D),o.patterns[g.id]=[u.getKey(A,D)]}}update(o,u,h,g,b,w,A,D){this.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A,D)}addFeatures(o,u,h,g,b,w){for(const A of this.patternFeatures)this.addFeature(A,A.geometry,A.index,u,h,g,w,o.elevationFeatures)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,T_e)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=o.createVertexBuffer(this.patternVertexArray,A_e)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,x_e.members,!0)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,w_e),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o,u){let h,g;if(u&&u>0?(h=`mapbox_clip_start_${u}`,g=`mapbox_clip_end_${u}`):(h="mapbox_clip_start",g="mapbox_clip_end"),o.properties&&o.properties.hasOwnProperty(h)&&o.properties.hasOwnProperty(g))return{start:+o.properties[h],end:+o.properties[g]}}addFeature(o,u,h,g,b,w,A,D){const P=this.layers[0].layout,B=P.get("line-join").evaluate(o,{}),U=P.get("line-cap").evaluate(o,{}),$=P.get("line-miter-limit"),G=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(o),this.lineFeature=o;const Z=!(!o.properties||!o.properties.hasOwnProperty("mapbox_line_metrics"))&&o.properties.mapbox_line_metrics;this.zOffsetValue=P.get("line-z-offset").value;const se=this.layers[0].paint.get("line-width").value;if(se.kind!=="constant"&&se.isLineProgressConstant===!1&&(this.variableWidthValue=se),this.elevationType==="road"){const fe=this.layoutVertexArray.length;if(!this.addElevatedRoadFeature(o,u,g,D,B,U,$,G)){const[ue,pe]=this.clipRuntimeLinesToTile(u,1);for(let ve=0;ve<ue.length;ve++){const Se=ue[ve],ke=pe[ve],Ie={progress:{min:ke.progress.min,max:ke.progress.max},nextDir:this.computeSegNextDir(ke,Se),prevDir:this.computeSegPrevDir(ke,Se)};this.addLine(Se,o,g,B,U,$,G,Ie,Z&&ke.parentIndex>0?ke.parentIndex:null)}this.fillNonElevatedRoadSegment(fe)}}else for(let fe=0;fe<u.length;fe++)this.addLine(u[fe],o,g,B,U,$,G,void 0,Z&&fe>0?fe:null);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,b,w,g,A,void 0,this.worldview)}computeSegNextDir(o,u){return o.nextPoint.sub(u.at(-2)).unit()}computeSegPrevDir(o,u){return u[1].sub(o.prevPoint).unit()}clipLinesToTile(o,u){return vC(o,-u,-u,Jt+u,Jt+u)}clipRuntimeLinesToTile(o,u){const h=[];return[vC(o,-u,-u,Jt+u,Jt+u,h),h]}addElevatedRoadFeature(o,u,h,g,b,w,A,D){const P=[],B=Zo.getElevationFeature(o,g);if(B){const U=this.clipLinesToTile(u,1),$=this.prepareElevatedLines(U,B,h);for(const G of $)P.push({geometry:G,elevation:B,elevationTileID:h,segment:{progress:{min:0,max:1},nextDir:void 0,prevDir:void 0}})}if(P.length===0)return!1;for(const U of P){const $=this.layoutVertexArray.length;this.addLine(U.geometry,o,h,b,w,A,D);const G=new Il(h,U.elevationTileID);if(U.elevation)for(let Z=$;Z<this.layoutVertexArray.length;Z++){const se=new Vt(this.layoutVertexArray.int16[6*Z]>>1,this.layoutVertexArray.int16[6*Z+1]>>1),fe=G.pointElevation(se,U.elevation,.05);this.updateHeightRange(fe),this.zOffsetVertexArray.emplaceBack(fe,0,0)}else this.fillNonElevatedRoadSegment($)}return!0}prepareElevatedLines(o,u,h){if(u.constantHeight!=null)return o;const g=[],b=1/qt(h);for(const w of o)Nye(w,new ul(u,b),0,g);return g}fillNonElevatedRoadSegment(o){for(let u=o;u<this.layoutVertexArray.length;u++)this.zOffsetVertexArray.emplaceBack(0,0,0)}updateHeightRange(o){this.heightRange?(this.heightRange.min=Math.min(this.heightRange.min,o),this.heightRange.max=Math.max(this.heightRange.max,o)):this.heightRange={min:o,max:o}}addLine(o,u,h,g,b,w,A,D,P){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0,this.lineClips=P?this.lineFeatureClips(u,P):this.lineClips;const B=g==="none";this.patternJoinNone=this.hasPattern&&B,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[];const U=D&&D.progress.min>0,$=D&&D.progress.max<1;if(this.lineClips){let Ue={min:this.lineClips.start,max:this.lineClips.end},Ze=1;if(D){const xt=this.lineClips.end-this.lineClips.start;Ue=(function(Tt,kt,Pt){return{min:bo(Tt.min,kt,Pt),max:bo(Tt.max,kt,Pt)}})(D.progress,{min:0,max:1},Ue),xt>0&&(Ze=(Ue.max-Ue.min)/xt)}const rt=+u.properties.mapbox_clip_feature_len,Et=+u.properties.mapbox_clip_seg_len;if(Number.isNaN(rt)||Number.isNaN(Et)){for(let Tt=0;Tt<o.length-1;Tt++)this.totalDistance+=o[Tt].dist(o[Tt+1]);const xt=this.totalDistance/(Ue.max-Ue.min);this.totalFeatureLength=Number.isFinite(xt)?xt:0,this.lineClips.start=Ue.min,this.lineClips.end=Ue.max,this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}else this.totalFeatureLength=rt,this.distance=Et*Ze,this.lineClips.start=Ue.min,this.lineClips.end=Ue.max,this.maxLineLength=Math.max(this.maxLineLength,this.distance);this.lineClipsArray.push(this.lineClips),this.updateScaledDistance()}const G=O_e[u.type]==="Polygon";let Z=o.length;for(;Z>=2&&o[Z-1].equals(o[Z-2]);)Z--;let se=0;for(;se<Z-1&&o[se].equals(o[se+1]);)se++;if(Z<(G?3:2))return;g==="bevel"&&(w=1.05);const fe=this.segments.prepareSegment(10*Z,this.layoutVertexArray,this.indexArray);let ue,pe,ve,Se,ke,Ie,Ve,qe;D&&D.prevDir&&(Ie=D.prevDir.perp()),D&&D.nextDir&&(Ve=D.nextDir.perp()),this.e1=this.e2=-1,G&&(ue=o[Z-2],ke=o[se].sub(ue)._unit()._perp());for(let Ue=se;Ue<Z;Ue++){if(ve=Ue===Z-1?G?o[se+1]:void 0:o[Ue+1],ve&&o[Ue].equals(ve))continue;ke&&(Se=ke),ue&&(pe=ue),ue=o[Ue],qe=this.evaluateLineProgressFeatures(pe?pe.dist(ue):0),ke=ve?ve.sub(ue)._unit()._perp():Se,Se=Se||ke;const Ze=pe&&ve;let rt=Ze?g:G||B?"butt":b;const Et=Se.x*ke.x+Se.y*ke.y;if(B){const Mt=function(Nt){if(Nt.patternJoinNone){const Lt=Nt.segmentPoints.length/2,fn=Nt.lineSoFar-Nt.segmentStart;for(let pn=0;pn<Lt;++pn){const nn=Nt.segmentPoints[2*pn+1],an=Math.round(Nt.segmentPoints[2*pn])+.5+.25*nn;Nt.patternVertexArray.emplaceBack(an,fn,Nt.segmentStart),Nt.patternVertexArray.emplaceBack(an,fn,Nt.segmentStart)}Nt.segmentPoints.length=0}Nt.e1=Nt.e2=-1};if(Ze&&Et<M_e){this.updateDistance(pe,ue),this.addCurrentVertex(ue,Se,1,1,fe,qe),Mt(this),this.addCurrentVertex(ue,ke,-1,-1,fe,qe);continue}if(pe){if(!ve){this.updateDistance(pe,ue),this.addCurrentVertex(ue,Se,1,1,fe,qe),Mt(this);continue}rt="miter"}}let xt=Se.add(ke);xt.x===0&&xt.y===0||xt._unit();const Tt=xt.x*ke.x+xt.y*ke.y,kt=Tt!==0?1/Tt:1/0,Pt=2*Math.sqrt(2-2*Tt),Rt=Tt<C_e&&pe&&ve,vt=Se.x*ke.y-Se.y*ke.x>0,zt=this.overscaling<=16?122880/(512*this.overscaling):0;if(Ze&&rt==="round"){if(kt<A)rt="miter";else if(kt<=2){const Mt=pL(ue,-10,8202);rt=this.elevationType==="offset"&&(Mt||this.hasCrossSlope)?"miter":"fakeround"}}if(rt==="miter"&&kt>w&&(rt="bevel"),rt==="bevel"&&(kt>2&&(rt="flipbevel"),kt<w&&(rt="miter")),pe&&!(rt==="miter"&&Rt)&&this.updateDistance(pe,ue),rt==="miter")if(Rt){const Mt=ue.dist(pe);if(Mt>2*zt){const Lt=ue.sub(ue.sub(pe)._mult(zt/Mt)._round());this.updateDistance(pe,Lt),this.addCurrentVertex(Lt,Se,0,0,fe,qe),pe=Lt}this.updateDistance(pe,ue),xt._mult(kt),this.addCurrentVertex(ue,xt,0,0,fe,qe);const Nt=ue.dist(ve);if(Nt>2*zt){const Lt=ue.add(ve.sub(ue)._mult(zt/Nt)._round());this.updateDistance(ue,Lt),this.addCurrentVertex(Lt,ke,0,0,fe,qe),ue=Lt}}else xt._mult(kt),this.addCurrentVertex(ue,xt,0,0,fe,qe);else if(rt==="flipbevel"){if(kt>100)xt=ke.mult(-1);else{const Mt=kt*Se.add(ke).mag()/Se.sub(ke).mag();xt._perp()._mult(Mt*(vt?-1:1))}this.addCurrentVertex(ue,xt,0,0,fe,qe),this.addCurrentVertex(ue,xt.mult(-1),0,0,fe,qe)}else if(rt==="bevel"||rt==="fakeround"){qe!=null&&pe&&this.addCurrentVertex(ue,Ve||Se,-1,-1,fe,qe);const Mt=ue.dist(pe)<=2*zt&&rt!=="bevel",Nt=xt.mult(vt?1:-1);Nt._mult(kt);const Lt=ke.mult(vt?-1:1),fn=Se.mult(vt?-1:1),pn=this.evaluateLineProgressFeatures(this.distance);if(qe==null&&(this.addHalfVertex(ue,Nt.x,Nt.y,!1,!vt,0,fe,pn),Mt||this.addHalfVertex(ue,Nt.x+2*fn.x,Nt.y+2*fn.y,!1,vt,0,fe,pn)),rt==="fakeround"){const nn=Math.round(180*Pt/Math.PI/20);this.addHalfVertex(ue,fn.x,fn.y,!1,vt,0,fe,pn);for(let an=0;an<nn;an++){let kn=an/nn;if(kn!==.5){const cn=kn-.5;kn+=kn*cn*(kn-1)*((1.0904+Et*(Et*(3.55645-1.43519*Et)-3.2452))*cn*cn+(.848013+Et*(.215638*Et-1.06021)))}const Cn=Lt.sub(fn)._mult(kn)._add(fn)._unit();this.addHalfVertex(ue,Cn.x,Cn.y,!1,vt,0,fe,pn)}this.addHalfVertex(ue,Lt.x,Lt.y,!1,vt,0,fe,pn)}Mt||qe!=null||this.addHalfVertex(ue,Nt.x+2*Lt.x,Nt.y+2*Lt.y,!1,vt,0,fe,pn),qe!=null&&ve&&this.addCurrentVertex(ue,Ie||ke,1,1,fe,qe)}else if(rt==="butt")this.addCurrentVertex(ue,xt,0,0,fe,qe);else if(rt==="square"){if(!pe){const Mt=U?0:-1;this.addCurrentVertex(ue,xt,Mt,Mt,fe,qe)}if(this.addCurrentVertex(ue,xt,0,0,fe,qe),pe){const Mt=$?0:1;this.addCurrentVertex(ue,xt,Mt,Mt,fe,qe)}}else if(rt==="round"){if(pe){const Mt=!Ze&&Ve?Ve:Se;this.addCurrentVertex(ue,Mt,0,0,fe,qe),!Ze&&$||this.addCurrentVertex(ue,Mt,1,1,fe,qe,!0)}if(ve){const Mt=!Ze&&Ie?Ie:ke;!Ze&&U||this.addCurrentVertex(ue,Mt,-1,-1,fe,qe,!0),this.addCurrentVertex(ue,Mt,0,0,fe,qe)}}}}addVerticesTo(o,u,h,g,b,w,A,D,P,B){const U=(u.w-o.w)/this.tessellationStep|0;let $=0;const G=this.scaledDistance;if(U>1){this.lineSoFar=o.w;const se=(u.x-o.x)/U,fe=(u.y-o.y)/U,ue=(u.z-o.z)/U,pe=(u.w-o.w)/U;for(let ve=1;ve<U;++ve){o.x+=se,o.y+=fe,o.z+=ue,this.lineSoFar+=pe,$+=pe;const Se=this.evaluateLineProgressFeatures(this.prevDistance+$);this.scaledDistance=(this.prevDistance+$)/this.totalDistance,this.addHalfVertex(o,h,g,B,!1,A,P,Se),this.addHalfVertex(o,b,w,B,!0,-D,P,Se)}}this.lineSoFar=u.w,this.scaledDistance=G;const Z=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(u,h,g,B,!1,A,P,Z),this.addHalfVertex(u,b,w,B,!0,-D,P,Z)}evaluateLineProgressFeatures(o){if(!this.variableWidthValue&&this.elevationType!=="offset")return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+o)/this.totalFeatureLength):Hn(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let u=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(u=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.elevationType!=="offset"?{zOffset:0,variableWidth:u}:this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:u}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:u}}addCurrentVertex(o,u,h,g,b,w,A=!1){const D=u.x+u.y*h,P=u.y-u.x*h,B=u.y*g-u.x,U=-u.y-u.x*g;if(w!=null){const $=this.elevationType==="offset",G=-10,Z=8202,se=w.zOffset,fe=new p9(o.x,o.y,se,this.lineSoFar),ue=!!$&&pL(o,G,Z),pe=this.lineSoFar,ve=this.distance;if(this.currentVertex)if(ue){const Se=this.currentVertexIsOutside,ke=this.currentVertex,Ie=new p9(o.x,o.y,se,this.lineSoFar);if(g9(ke,Ie,G,Z),!pL(Ie,G,Z)){if(Se){this.e1=this.e2=-1,this.distance-=ke.dist(fe),this.lineSoFar=ke.w;const Ve=this.evaluateLineProgressFeatures(ke.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(ke,D,P,A,!1,h,b,Ve),this.addHalfVertex(ke,B,U,A,!0,-g,b,Ve),this.prevDistance=this.distance}this.distance=this.prevDistance+ke.dist(Ie),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(ke,Ie,D,P,B,U,h,g,b,A),this.distance=ve,this.scaledDistance=this.distance/this.totalDistance}}else{const Se=this.currentVertex;if(this.currentVertexIsOutside){g9(Se,fe,G,Z),this.e1=this.e2=-1,this.distance-=Se.dist(fe),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=Se.w;const ke=this.evaluateLineProgressFeatures(Se.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(Se,D,P,A,!1,h,b,ke),this.addHalfVertex(Se,B,U,A,!0,-g,b,ke),this.prevDistance=this.distance,this.distance=ve,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(Se,fe,D,P,B,U,h,g,b,A)}else ue||(this.addHalfVertex(o,D,P,A,!1,h,b,w),this.addHalfVertex(o,B,U,A,!0,-g,b,w));this.currentVertex=fe,this.currentVertexIsOutside=ue,this.lineSoFar=pe}else this.addHalfVertex(o,D,P,A,!1,h,b,w),this.addHalfVertex(o,B,U,A,!0,-g,b,w)}addHalfVertex({x:o,y:u},h,g,b,w,A,D,P){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),w||this.segmentPoints.push(this.lineSoFar-this.segmentStart,A)),this.layoutVertexArray.emplaceBack((o<<1)+(b?1:0),(u<<1)+(w?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(A===0?0:A<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const U=Vn(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,U)}const B=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,B),D.primitiveLength++),w?this.e2=B:this.e1=B,P!=null&&this.zOffsetVertexArray.emplaceBack(P.zOffset,P.variableWidth,P.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(o,u){this.prevDistance=this.distance,this.distance+=o.dist(u),this.updateScaledDistance()}}function pL(c,o,u){return c.x<o||c.x>u||c.y<o||c.y>u}let J9,eH;function tH(c,o,u){return o*(Jt/(c.tileSize*Math.pow(2,u-c.tileID.overscaledZ)))}Kt(dL,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const nH=(c,o,u)=>(1-u)*c+u*o;function rH(c,o){return 1/tH(c,1,o.tileZoom)}function iH(c,o,u,h){return c.translatePosMatrix(h||o.tileID.projMatrix,o,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const aH=c=>{const o=[];oH(c)&&o.push("RENDER_LINE_DASH"),c.paint.get("line-gradient")&&o.push("RENDER_LINE_GRADIENT");const u=c.paint.get("line-trim-offset");u[0]===0&&u[1]===0||o.push("RENDER_LINE_TRIM_OFFSET"),c.paint.get("line-border-width").constantOr(1)!==0&&o.push("RENDER_LINE_BORDER");const h=c.layout.get("line-join").constantOr("miter")==="none",g=!!c.paint.get("line-pattern").constantOr(1);return h&&g&&o.push("LINE_JOIN_NONE"),o};function oH(c){const o=c.paint.get("line-dasharray").value;return o.kind!=="constant"||o.value}let mL;const sH=()=>mL||(mL={layout:J9||(J9=new Ui({"line-cap":new on(ht.layout_line["line-cap"]),"line-join":new on(ht.layout_line["line-join"]),"line-miter-limit":new Xt(ht.layout_line["line-miter-limit"]),"line-round-limit":new Xt(ht.layout_line["line-round-limit"]),"line-sort-key":new on(ht.layout_line["line-sort-key"]),"line-z-offset":new on(ht.layout_line["line-z-offset"]),"line-elevation-reference":new Xt(ht.layout_line["line-elevation-reference"]),"line-cross-slope":new Xt(ht.layout_line["line-cross-slope"]),visibility:new Xt(ht.layout_line.visibility),"line-width-unit":new Xt(ht.layout_line["line-width-unit"])})),paint:eH||(eH=new Ui({"line-opacity":new on(ht.paint_line["line-opacity"]),"line-color":new on(ht.paint_line["line-color"]),"line-translate":new Xt(ht.paint_line["line-translate"]),"line-translate-anchor":new Xt(ht.paint_line["line-translate-anchor"]),"line-width":new on(ht.paint_line["line-width"]),"line-gap-width":new on(ht.paint_line["line-gap-width"]),"line-offset":new on(ht.paint_line["line-offset"]),"line-blur":new on(ht.paint_line["line-blur"]),"line-dasharray":new on(ht.paint_line["line-dasharray"]),"line-pattern":new on(ht.paint_line["line-pattern"]),"line-pattern-cross-fade":new Xt(ht.paint_line["line-pattern-cross-fade"]),"line-gradient":new jd(ht.paint_line["line-gradient"]),"line-trim-offset":new Xt(ht.paint_line["line-trim-offset"]),"line-trim-fade-range":new Xt(ht.paint_line["line-trim-fade-range"]),"line-trim-color":new Xt(ht.paint_line["line-trim-color"]),"line-emissive-strength":new on(ht.paint_line["line-emissive-strength"]),"line-border-width":new on(ht.paint_line["line-border-width"]),"line-border-color":new on(ht.paint_line["line-border-color"]),"line-occlusion-opacity":new Xt(ht.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},mL);class D_e extends on{possiblyEvaluate(o,u){return u=new Jr(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,transition:u.transition,worldview:u.worldview}),super.possiblyEvaluate(o,u)}evaluate(o,u,h,g){return u=Object.assign({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(o,u,h,g)}}let KT;function lH(c,o){return o>0?o+2*c:c}const I_e=gr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),P_e=gr([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),R_e=gr([{name:"a_projected_pos",components:4,type:"Float32"}],4);gr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const k_e=gr([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),L_e=gr([{name:"a_x_axis",components:3,type:"Float32"},{name:"a_y_axis",components:3,type:"Float32"}]),z_e=gr([{name:"a_texb",components:2,type:"Uint16"}]),N_e=gr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),F_e=gr([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);gr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const uH=gr([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),B_e=gr([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);gr([{name:"triangle",components:3,type:"Uint16"}]),gr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),gr([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),gr([{type:"Float32",name:"offsetX"}]),gr([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Qo=24;function j_e(c,o,u){return c.sections.forEach(h=>{h.text=(function(g,b,w){const A=b.layout.get("text-transform").evaluate(w,{});return A==="uppercase"?g=g.toLocaleUpperCase():A==="lowercase"&&(g=g.toLocaleLowerCase()),Ol.applyArabicShaping&&(g=Ol.applyArabicShaping(g)),g})(h.text,o,u)}),c}const QT={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function U_e(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}function $_e(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}const gL=4294967296,cH=1/gL,fH=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");let DC=class{constructor(c=new Uint8Array(16)){this.buf=ArrayBuffer.isView(c)?c:new Uint8Array(c),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(c,o,u=this.length){for(;this.pos<u;){const h=this.readVarint(),g=h>>3,b=this.pos;this.type=7&h,c(g,o,this),this.pos===b&&this.skip(h)}return o}readMessage(c,o){return this.readFields(c,o,this.readVarint()+this.pos)}readFixed32(){const c=this.dataView.getUint32(this.pos,!0);return this.pos+=4,c}readSFixed32(){const c=this.dataView.getInt32(this.pos,!0);return this.pos+=4,c}readFixed64(){const c=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*gL;return this.pos+=8,c}readSFixed64(){const c=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*gL;return this.pos+=8,c}readFloat(){const c=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,c}readDouble(){const c=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,c}readVarint(c){const o=this.buf;let u,h;return h=o[this.pos++],u=127&h,h<128?u:(h=o[this.pos++],u|=(127&h)<<7,h<128?u:(h=o[this.pos++],u|=(127&h)<<14,h<128?u:(h=o[this.pos++],u|=(127&h)<<21,h<128?u:(h=o[this.pos],u|=(15&h)<<28,(function(g,b,w){const A=w.buf;let D,P;if(P=A[w.pos++],D=(112&P)>>4,P<128||(P=A[w.pos++],D|=(127&P)<<3,P<128)||(P=A[w.pos++],D|=(127&P)<<10,P<128)||(P=A[w.pos++],D|=(127&P)<<17,P<128)||(P=A[w.pos++],D|=(127&P)<<24,P<128)||(P=A[w.pos++],D|=(1&P)<<31,P<128))return N1(g,D,b);throw new Error("Expected varint not more than 10 bytes")})(u,c,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const c=this.readVarint();return c%2==1?(c+1)/-2:c/2}readBoolean(){return!!this.readVarint()}readString(){const c=this.readVarint()+this.pos,o=this.pos;return this.pos=c,c-o>=12&&fH?fH.decode(this.buf.subarray(o,c)):(function(u,h,g){let b="",w=h;for(;w<g;){const A=u[w];let D,P,B,U=null,$=A>239?4:A>223?3:A>191?2:1;if(w+$>g)break;$===1?A<128&&(U=A):$===2?(D=u[w+1],(192&D)==128&&(U=(31&A)<<6|63&D,U<=127&&(U=null))):$===3?(D=u[w+1],P=u[w+2],(192&D)==128&&(192&P)==128&&(U=(15&A)<<12|(63&D)<<6|63&P,(U<=2047||U>=55296&&U<=57343)&&(U=null))):$===4&&(D=u[w+1],P=u[w+2],B=u[w+3],(192&D)==128&&(192&P)==128&&(192&B)==128&&(U=(15&A)<<18|(63&D)<<12|(63&P)<<6|63&B,(U<=65535||U>=1114112)&&(U=null))),U===null?(U=65533,$=1):U>65535&&(U-=65536,b+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),b+=String.fromCharCode(U),w+=$}return b})(this.buf,o,c)}readBytes(){const c=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,c);return this.pos=c,o}readPackedVarint(c=[],o){const u=this.readPackedEnd();for(;this.pos<u;)c.push(this.readVarint(o));return c}readPackedSVarint(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readSVarint());return c}readPackedBoolean(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readBoolean());return c}readPackedFloat(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readFloat());return c}readPackedDouble(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readDouble());return c}readPackedFixed32(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readFixed32());return c}readPackedSFixed32(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readSFixed32());return c}readPackedFixed64(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readFixed64());return c}readPackedSFixed64(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readSFixed64());return c}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(c){const o=7&c;if(o===0)for(;this.buf[this.pos++]>127;);else if(o===2)this.pos=this.readVarint()+this.pos;else if(o===5)this.pos+=4;else{if(o!==1)throw new Error(`Unimplemented type: ${o}`);this.pos+=8}}writeTag(c,o){this.writeVarint(c<<3|o)}realloc(c){let o=this.length||16;for(;o<this.pos+c;)o*=2;if(o!==this.length){const u=new Uint8Array(o);u.set(this.buf),this.buf=u,this.dataView=new DataView(u.buffer),this.length=o}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(c){this.realloc(4),this.dataView.setInt32(this.pos,c,!0),this.pos+=4}writeSFixed32(c){this.realloc(4),this.dataView.setInt32(this.pos,c,!0),this.pos+=4}writeFixed64(c){this.realloc(8),this.dataView.setInt32(this.pos,-1&c,!0),this.dataView.setInt32(this.pos+4,Math.floor(c*cH),!0),this.pos+=8}writeSFixed64(c){this.realloc(8),this.dataView.setInt32(this.pos,-1&c,!0),this.dataView.setInt32(this.pos+4,Math.floor(c*cH),!0),this.pos+=8}writeVarint(c){(c=+c||0)>268435455||c<0?(function(o,u){let h,g;if(o>=0?(h=o%4294967296|0,g=o/4294967296|0):(h=~(-o%4294967296),g=~(-o/4294967296),4294967295^h?h=h+1|0:(h=0,g=g+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),(function(b,w,A){A.buf[A.pos++]=127&b|128,b>>>=7,A.buf[A.pos++]=127&b|128,b>>>=7,A.buf[A.pos++]=127&b|128,b>>>=7,A.buf[A.pos++]=127&b|128,A.buf[A.pos]=127&(b>>>=7)})(h,0,u),(function(b,w){const A=(7&b)<<4;w.buf[w.pos++]|=A|((b>>>=3)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b)))))})(g,u)})(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))}writeSVarint(c){this.writeVarint(c<0?2*-c-1:2*c)}writeBoolean(c){this.writeVarint(+c)}writeString(c){c=String(c),this.realloc(4*c.length),this.pos++;const o=this.pos;this.pos=(function(h,g,b){for(let w,A,D=0;D<g.length;D++){if(w=g.charCodeAt(D),w>55295&&w<57344){if(!A){w>56319||D+1===g.length?(h[b++]=239,h[b++]=191,h[b++]=189):A=w;continue}if(w<56320){h[b++]=239,h[b++]=191,h[b++]=189,A=w;continue}w=A-55296<<10|w-56320|65536,A=null}else A&&(h[b++]=239,h[b++]=191,h[b++]=189,A=null);w<128?h[b++]=w:(w<2048?h[b++]=w>>6|192:(w<65536?h[b++]=w>>12|224:(h[b++]=w>>18|240,h[b++]=w>>12&63|128),h[b++]=w>>6&63|128),h[b++]=63&w|128)}return b})(this.buf,c,this.pos);const u=this.pos-o;u>=128&&hH(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u}writeFloat(c){this.realloc(4),this.dataView.setFloat32(this.pos,c,!0),this.pos+=4}writeDouble(c){this.realloc(8),this.dataView.setFloat64(this.pos,c,!0),this.pos+=8}writeBytes(c){const o=c.length;this.writeVarint(o),this.realloc(o);for(let u=0;u<o;u++)this.buf[this.pos++]=c[u]}writeRawMessage(c,o){this.pos++;const u=this.pos;c(o,this);const h=this.pos-u;h>=128&&hH(u,h,this),this.pos=u-1,this.writeVarint(h),this.pos+=h}writeMessage(c,o,u){this.writeTag(c,2),this.writeRawMessage(o,u)}writePackedVarint(c,o){o.length&&this.writeMessage(c,V_e,o)}writePackedSVarint(c,o){o.length&&this.writeMessage(c,q_e,o)}writePackedBoolean(c,o){o.length&&this.writeMessage(c,Y_e,o)}writePackedFloat(c,o){o.length&&this.writeMessage(c,H_e,o)}writePackedDouble(c,o){o.length&&this.writeMessage(c,G_e,o)}writePackedFixed32(c,o){o.length&&this.writeMessage(c,W_e,o)}writePackedSFixed32(c,o){o.length&&this.writeMessage(c,X_e,o)}writePackedFixed64(c,o){o.length&&this.writeMessage(c,Z_e,o)}writePackedSFixed64(c,o){o.length&&this.writeMessage(c,K_e,o)}writeBytesField(c,o){this.writeTag(c,2),this.writeBytes(o)}writeFixed32Field(c,o){this.writeTag(c,5),this.writeFixed32(o)}writeSFixed32Field(c,o){this.writeTag(c,5),this.writeSFixed32(o)}writeFixed64Field(c,o){this.writeTag(c,1),this.writeFixed64(o)}writeSFixed64Field(c,o){this.writeTag(c,1),this.writeSFixed64(o)}writeVarintField(c,o){this.writeTag(c,0),this.writeVarint(o)}writeSVarintField(c,o){this.writeTag(c,0),this.writeSVarint(o)}writeStringField(c,o){this.writeTag(c,2),this.writeString(o)}writeFloatField(c,o){this.writeTag(c,5),this.writeFloat(o)}writeDoubleField(c,o){this.writeTag(c,1),this.writeDouble(o)}writeBooleanField(c,o){this.writeVarintField(c,+o)}};function N1(c,o,u){return u?4294967296*o+(c>>>0):4294967296*(o>>>0)+(c>>>0)}function hH(c,o,u){const h=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));u.realloc(h);for(let g=u.pos-1;g>=c;g--)u.buf[g+h]=u.buf[g]}function V_e(c,o){for(let u=0;u<c.length;u++)o.writeVarint(c[u])}function q_e(c,o){for(let u=0;u<c.length;u++)o.writeSVarint(c[u])}function H_e(c,o){for(let u=0;u<c.length;u++)o.writeFloat(c[u])}function G_e(c,o){for(let u=0;u<c.length;u++)o.writeDouble(c[u])}function Y_e(c,o){for(let u=0;u<c.length;u++)o.writeBoolean(c[u])}function W_e(c,o){for(let u=0;u<c.length;u++)o.writeFixed32(c[u])}function X_e(c,o){for(let u=0;u<c.length;u++)o.writeSFixed32(c[u])}function Z_e(c,o){for(let u=0;u<c.length;u++)o.writeFixed64(c[u])}function K_e(c,o){for(let u=0;u<c.length;u++)o.writeSFixed64(c[u])}function Q_e(c,o,u){o.glyphs=[],c===1&&u.readMessage(J_e,o)}function J_e(c,o,u){if(c===3){const{id:h,bitmap:g,width:b,height:w,left:A,top:D,advance:P}=u.readMessage(eve,{});o.glyphs.push({id:h,bitmap:new Ph({width:b+6,height:w+6},g),metrics:{width:b,height:w,left:A,top:D,advance:P}})}else c===4?o.ascender=u.readSVarint():c===5&&(o.descender=u.readSVarint())}function eve(c,o,u){c===1?o.id=u.readVarint():c===2?o.bitmap=u.readBytes():c===3?o.width=u.readVarint():c===4?o.height=u.readVarint():c===5?o.left=u.readSVarint():c===6?o.top=u.readSVarint():c===7&&(o.advance=u.readVarint())}const sc={horizontal:1,vertical:2,horizontalOnly:3};class JT{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(o,u){const h=new JT;return h.scale=o||1,h.fontStack=u,h}static forImage(o){const u=new JT;return u.image=o,u}}class F1{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,u,h){const g=new F1;for(let b=0;b<o.sections.length;b++){const w=o.sections[b];w.image?g.addImageSection(w,h):g.addTextSection(w,u)}return g}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCodePoint(o){return this.text.codePointAt(o)}verticalizePunctuation(o){this.text=(function(u,h){let g="";for(let b=0;b<u.length;b++){const w=u.charCodeAt(b+1)||null,A=u.charCodeAt(b-1)||null;g+=!h&&(w&&z0(w)&&!QT[u[b+1]]||A&&z0(A)&&!QT[u[b-1]])||!QT[u[b]]?u[b]:QT[u[b]]}return g})(this.text,o)}trim(){let o=0;for(let h=0;h<this.text.length&&IC[this.text.charCodeAt(h)];h++)o++;let u=this.text.length;for(let h=this.text.length-1;h>=0&&h>=o&&IC[this.text.charCodeAt(h)];h--)u--;this.text=this.text.substring(o,u),this.sectionIndex=this.sectionIndex.slice(o,u)}substring(o,u){const h=new F1;return h.text=this.text.substring(o,u),h.sectionIndex=this.sectionIndex.slice(o,u),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,u)=>Math.max(o,this.sections[u].scale),0)}addTextSection(o,u){this.text+=o.text,this.sections.push(JT.forText(o.scale,o.fontStack||u));const h=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(h)}addImageSection(o,u){const h=o.image?o.image.getPrimary():null;if(!h)return void Hn("Can't add FormattedSection with an empty image.");h.scaleSelf(u);const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCodePoint(g),this.sections.push(JT.forImage(h)),this.sectionIndex.push(this.sections.length-1)):Hn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function yL(c,o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se=1){const fe=F1.fromFeature(c,g,se);U===sc.vertical&&fe.verticalizePunctuation($);let ue=[];const pe=(function(Ve,qe,Ue,Ze,rt,Et){if(!Ve)return[];const xt=[],Tt=(function(Rt,vt,zt,Mt,Nt,Lt){let fn=0;for(let pn=0;pn<Rt.length();pn++){const nn=Rt.getSection(pn);fn+=dH(Rt.getCodePoint(pn),nn,Mt,Nt,vt,Lt)}return fn/Math.max(1,Math.ceil(fn/zt))})(Ve,qe,Ue,Ze,rt,Et),kt=Ve.text.indexOf("")>=0;let Pt=0;for(let Rt=0;Rt<Ve.length();Rt++){const vt=Ve.getSection(Rt),zt=Ve.getCodePoint(Rt);if(IC[zt]||(Pt+=dH(zt,vt,Ze,rt,qe,Et)),Rt<Ve.length()-1){const Mt=k0(zt);(tve[zt]||Mt||vt.image)&&xt.push(mH(Rt+1,Pt,Tt,xt,nve(zt,Ve.getCodePoint(Rt+1),Mt&&kt),!1))}}return gH(mH(Ve.length(),Pt,Tt,xt,0,!0))})(fe,P,b,o,h,G),{processBidirectionalText:ve,processStyledBidirectionalText:Se}=Ol;if(ve&&fe.sections.length===1){const Ve=ve(fe.toString(),pe);for(const qe of Ve){const Ue=new F1;Ue.text=qe,Ue.sections=fe.sections;for(let Ze=0;Ze<qe.length;Ze++)Ue.sectionIndex.push(0);ue.push(Ue)}}else if(Se){const Ve=Se(fe.text,fe.sectionIndex,pe);for(const qe of Ve){const Ue=new F1;Ue.text=qe[0],Ue.sectionIndex=qe[1],Ue.sections=fe.sections,ue.push(Ue)}}else ue=(function(Ve,qe){const Ue=[],Ze=Ve.text;let rt=0;for(const Et of qe)Ue.push(Ve.substring(rt,Et)),rt=Et;return rt<Ze.length&&Ue.push(Ve.substring(rt,Ze.length)),Ue})(fe,pe);const ke=[],Ie={positionedLines:ke,text:fe.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:U,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if((function(Ve,qe,Ue,Ze,rt,Et,xt,Tt,kt,Pt,Rt,vt){let zt=0,Mt=0,Nt=0;const Lt=Tt==="right"?1:Tt==="left"?0:.5;let fn=!1;for(const Cn of rt){const cn=Cn.getSections();for(const Wn of cn){if(Wn.image)continue;const vr=qe[Wn.fontStack];if(vr&&(fn=vr.ascender!==void 0&&vr.descender!==void 0,!fn))break}if(!fn)break}let pn=0;for(const Cn of rt){Cn.trim();const cn=Cn.getMaxScale(),Wn=(cn-1)*Qo,vr={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[pn]=vr;const Zr=vr.positionedGlyphs;let pr=0;if(!Cn.length()){Mt+=Et,++pn;continue}let di=0,kr=0;for(let Ur=0;Ur<Cn.length();Ur++){const ui=Cn.getSection(Ur),Vi=Cn.getSectionIndex(Ur),ta=Cn.getCodePoint(Ur);let na=ui.scale,ka=null,fs=null,Hs=null,fo=Qo,Ao=0,qo=kt;qo===sc.vertical&&L0(ta)&&(qo=sc.horizontal);const fr=!(qo===sc.horizontal||!Rt&&!jc(ta)||Rt&&(IC[ta]||Zg(ta)));if(ui.image){const ra=Ze.get(ui.image.toString());if(!ra)continue;Hs=ui.image,Ve.iconsInText=Ve.iconsInText||!0,fs=ra.paddedRect;const _a=ra.displaySize;na=na*Qo/vt,ka={width:_a[0],height:_a[1],left:0,top:-3,advance:fr?_a[1]:_a[0],localGlyph:!1},Ao=fn?-ka.height*na:cn*Qo-17-_a[1]*na,fo=ka.advance;const lc=(fr?_a[0]:_a[1])*na-Qo*cn;lc>0&&lc>pr&&(pr=lc)}else{const ra=Ue[ui.fontStack];if(!ra)continue;ra[ta]&&(fs=ra[ta]);const _a=qe[ui.fontStack];if(!_a)continue;const lc=_a.glyphs[ta];if(!lc)continue;if(ka=lc.metrics,fo=ta!==8203?Qo:0,fn){const Rl=_a.ascender!==void 0?Math.abs(_a.ascender):0,hs=_a.descender!==void 0?Math.abs(_a.descender):0,kl=(Rl+hs)*na;di<kl&&(di=kl,kr=(Rl-hs)/2*na),Ao=-Rl*na}else Ao=(cn-na)*Qo-17}fr?(Ve.verticalizable=!0,Zr.push({glyph:ta,image:Hs,x:zt,y:Mt+Ao,vertical:fr,scale:na,localGlyph:ka.localGlyph,fontStack:ui.fontStack,sectionIndex:Vi,metrics:ka,rect:fs}),zt+=fo*na+Pt):(Zr.push({glyph:ta,image:Hs,x:zt,y:Mt+Ao,vertical:fr,scale:na,localGlyph:ka.localGlyph,fontStack:ui.fontStack,sectionIndex:Vi,metrics:ka,rect:fs}),zt+=ka.advance*na+Pt)}Zr.length!==0&&(Nt=Math.max(zt-Pt,Nt),fn?yH(Zr,Lt,pr,kr,Et*cn/2):yH(Zr,Lt,pr,0,Et/2)),zt=0;const Ra=Et*cn+pr;vr.lineOffset=Math.max(pr,Wn),Mt+=Ra,++pn}const nn=Mt,{horizontalAlign:an,verticalAlign:kn}=_L(xt);(function(Cn,cn,Wn,vr,Zr,pr){const di=(cn-Wn)*Zr,kr=-pr*vr;for(const Ra of Cn)for(const Ur of Ra.positionedGlyphs)Ur.x+=di,Ur.y+=kr})(Ve.positionedLines,Lt,an,kn,Nt,nn),Ve.top+=-kn*nn,Ve.bottom=Ve.top+nn,Ve.left+=-an*Nt,Ve.right=Ve.left+Nt,Ve.hasBaseline=fn})(Ie,o,u,h,ue,w,A,D,U,P,$,Z),!(function(Ve){for(const qe of Ve)if(qe.positionedGlyphs.length!==0)return!1;return!0})(ke))return Ie}const IC={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},tve={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function dH(c,o,u,h,g,b){if(o.image){const w=h.get(o.image.toString());return w?w.displaySize[0]*o.scale*Qo/b+g:0}{const w=u[o.fontStack],A=w&&w.glyphs[c];return A?A.metrics.advance*o.scale+g:0}}function pH(c,o,u,h){const g=Math.pow(c-o,2);return h?c<o?g/2:2*g:g+Math.abs(u)*u}function nve(c,o,u){let h=0;return c===10&&(h-=1e4),u&&(h+=150),c!==40&&c!==65288||(h+=50),o!==41&&o!==65289||(h+=50),h}function mH(c,o,u,h,g,b){let w=null,A=pH(o,u,g,b);for(const D of h){const P=pH(o-D.x,u,g,b)+D.badness;P<=A&&(w=D,A=P)}return{index:c,x:o,priorBreak:w,badness:A}}function gH(c){return c?gH(c.priorBreak).concat(c.index):[]}function _L(c){let o=.5,u=.5;switch(c){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:o,verticalAlign:u}}function yH(c,o,u,h,g){if(!(o||u||h||g))return;const b=c.length-1,w=c[b],A=(w.x+w.metrics.advance*w.scale)*o;for(let D=0;D<=b;D++)c[D].x-=A,c[D].y+=u+h+g}function vL(c){return c.imagePrimary!==void 0&&c.top!==void 0&&c.bottom!==void 0&&c.left!==void 0&&c.right!==void 0}function PC(c,o,u,h){const{horizontalAlign:g,verticalAlign:b}=_L(h),w=u[0]-c.displaySize[0]*g,A=u[1]-c.displaySize[1]*b;return{imagePrimary:c,imageSecondary:o,top:A,bottom:A+c.displaySize[1],left:w,right:w+c.displaySize[0]}}function bL(c,o,u,h,g,b){const w=c.imagePrimary;let A;if(w.content){const fe=w.content,ue=w.pixelRatio||1;A=[fe[0]/ue,fe[1]/ue,w.displaySize[0]-fe[2]/ue,w.displaySize[1]-fe[3]/ue]}const D=o.left*b,P=o.right*b;let B,U,$,G;u==="width"||u==="both"?(G=g[0]+D-h[3],U=g[0]+P+h[1]):(G=g[0]+(D+P-w.displaySize[0])/2,U=G+w.displaySize[0]);const Z=o.top*b,se=o.bottom*b;return u==="height"||u==="both"?(B=g[1]+Z-h[0],$=g[1]+se+h[2]):(B=g[1]+(Z+se-w.displaySize[1])/2,$=B+w.displaySize[1]),{imagePrimary:w,imageSecondary:void 0,top:B,right:U,bottom:$,left:G,collisionPadding:A}}function _H(c){return!c.imagePrimary.stretchX}function vH(c){return!c.imagePrimary.stretchY}function bH(c){return{width:c.right-c.left,height:c.bottom-c.top}}const vy=128;function Eb(c,o,u,h){const{expression:g}=o;if(g.kind==="constant")return{kind:"constant",layoutSize:g.evaluate(new Jr(c+1,{worldview:u}),void 0,void 0,void 0,h)};if(g.kind==="source")return{kind:"source"};{const{zoomStops:b,interpolationType:w}=g;let A=0;for(;A<b.length&&b[A]<=c;)A++;A=Math.max(0,A-1);let D=A;for(;D<b.length&&b[D]<c+1;)D++;D=Math.min(b.length-1,D);const P=b[A],B=b[D];return g.kind==="composite"?{kind:"composite",minZoom:P,maxZoom:B,interpolationType:w}:{kind:"camera",minZoom:P,maxZoom:B,minSize:g.evaluate(new Jr(P,{worldview:u}),void 0,void 0,void 0,h),maxSize:g.evaluate(new Jr(B,{worldview:u}),void 0,void 0,void 0,h),interpolationType:w}}}function xL(c,{uSize:o,uSizeT:u},{lowerSize:h,upperSize:g}){return c.kind==="source"?h/vy:c.kind==="composite"?Vn(h/vy,g/vy,u):o}function B1(c,o,u=1){let h=0,g=0;if(c.kind==="constant")g=c.layoutSize*u;else if(c.kind!=="source"){const{interpolationType:b,minZoom:w,maxZoom:A}=c,D=b?ze(Yi.interpolationFactor(b,o,w,A),0,1):0;c.kind==="camera"?g=Vn(c.minSize,c.maxSize,D)*u:h=D*u}return{uSizeT:h,uSize:g}}class by extends Vt{constructor(o,u,h,g,b){super(o,u),this.angle=g,this.z=h,b!==void 0&&(this.segment=b)}clone(){return new by(this.x,this.y,this.z,this.angle,this.segment)}}function xH(c,o,u,h,g){if(o.segment===void 0)return!0;let b=o,w=o.segment+1,A=0;for(;A>-u/2;){if(w--,w<0)return!1;A-=c[w].dist(b),b=c[w]}A+=c[w].dist(c[w+1]),w++;const D=[];let P=0;for(;A<u/2;){const B=c[w],U=c[w+1];if(!U)return!1;let $=c[w-1].angleTo(B)-B.angleTo(U);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:A,angleDelta:$}),P+=$;A-D[0].distance>h;)P-=D.shift().angleDelta;if(P>g)return!1;w++,A+=B.dist(U)}return!0}function wH(c){let o=0;for(let u=0;u<c.length-1;u++)o+=c[u].dist(c[u+1]);return o}function SH(c,o,u){return c?.6*o*u:0}function TH(c,o){return Math.max(c?c.right-c.left:0,o?o.right-o.left:0)}function rve(c,o,u,h,g,b){const w=SH(u,g,b),A=TH(u,h)*b;let D=0;const P=wH(c)/2;for(let B=0;B<c.length-1;B++){const U=c[B],$=c[B+1],G=U.dist($);if(D+G>P){const Z=(P-D)/G,se=Vn(U.x,$.x,Z),fe=Vn(U.y,$.y,Z),ue=new by(se,fe,0,$.angleTo(U),B);return!w||xH(c,ue,A,w,o)?ue:void 0}D+=G}}function ive(c,o,u,h,g,b,w,A,D){const P=SH(h,b,w),B=TH(h,g),U=B*w,$=c[0].x===0||c[0].x===D||c[0].y===0||c[0].y===D;return o-U<o/4&&(o=U+o/4),EH(c,$?o/2*A%o:(B/2+2*b)*w*A%o,o,P,u,U,$,!1,D)}function EH(c,o,u,h,g,b,w,A,D){const P=b/2,B=wH(c);let U=0,$=o-u,G=[];for(let Z=0;Z<c.length-1;Z++){const se=c[Z],fe=c[Z+1],ue=se.dist(fe),pe=fe.angleTo(se);for(;$+u<U+ue;){$+=u;const ve=($-U)/ue,Se=Vn(se.x,fe.x,ve),ke=Vn(se.y,fe.y,ve);if(Se>=0&&Se<D&&ke>=0&&ke<D&&$-P>=0&&$+P<=B){const Ie=new by(Se,ke,0,pe,Z);h&&!xH(c,Ie,b,h,g)||G.push(Ie)}}U+=ue}return A||G.length||w||(G=EH(c,U/2,u,h,g,b,w,!0,D)),G}function AH(c){let o=0,u=0;for(const w of c)o+=w.w*w.h,u=Math.max(u,w.w);c.sort((w,A)=>A.h-w.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),u),h:1/0}];let g=0,b=0;for(const w of c)for(let A=h.length-1;A>=0;A--){const D=h[A];if(!(w.w>D.w||w.h>D.h)){if(w.x=D.x,w.y=D.y,b=Math.max(b,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===D.w&&w.h===D.h){const P=h.pop();P&&A<h.length&&(h[A]=P)}else w.h===D.h?(D.x+=w.w,D.w-=w.w):w.w===D.w?(D.y+=w.h,D.h-=w.h):(h.push({x:D.x+w.w,y:D.y,w:D.w-w.w,h:w.h}),D.y+=w.h,D.h-=w.h);break}}return{w:g,h:b,fill:o/(g*b)||0}}Kt(by,"Anchor");class eE{static getImagePositionScale(o,u,h){if(u&&o){const{sx:g,sy:b}=o;return{x:g,y:b}}return{x:h,y:h}}constructor(o,u,h,g){this.paddedRect=o;const{pixelRatio:b,version:w,stretchX:A,stretchY:D,content:P,sdf:B,usvg:U}=u;this.pixelRatio=b,this.stretchX=A,this.stretchY=D,this.content=P,this.version=w,this.padding=h,this.sdf=B,this.usvg=U,this.scale=eE.getImagePositionScale(g,U,b)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function wL(c,o,u){const h=Bo.parse(c),g=(function(b,w,A=[1,1]){return{x:0,y:0,w:(b.data?b.data.width:b.width*A[0])+2*w,h:(b.data?b.data.height:b.height*A[1])+2*w}})(o,u,[h.sx,h.sy]);return{bin:g,imagePosition:new eE(g,o,u,h),imageVariant:h}}class OH{constructor(o,u,h){const g=new Map,b=new Map;this.haveRenderCallbacks=[];const w=[];this.addImages(o,g,1,w),this.addImages(u,b,2,w);const{w:A,h:D}=AH(w),P=new Vo({width:A||1,height:D||1});for(const[B,U]of o.entries()){const $=g.get(B).paddedRect;Vo.copy(U.data,P,{x:0,y:0},{x:$.x+1,y:$.y+1},U.data,null,U.sdf)}for(const[B,U]of u.entries()){const $=b.get(B),G=$.paddedRect;let Z=$.padding;const se=G.x+Z,fe=G.y+Z,ue=U.data.width,pe=U.data.height;Z=Z>1?Z-1:Z,Vo.copy(U.data,P,{x:0,y:0},{x:se,y:fe},U.data,h),Vo.copy(U.data,P,{x:0,y:pe-Z},{x:se,y:fe-Z},{width:ue,height:Z},h),Vo.copy(U.data,P,{x:0,y:0},{x:se,y:fe+pe},{width:ue,height:Z},h),Vo.copy(U.data,P,{x:ue-Z,y:0},{x:se-Z,y:fe},{width:Z,height:pe},h),Vo.copy(U.data,P,{x:0,y:0},{x:se+ue,y:fe},{width:Z,height:pe},h),Vo.copy(U.data,P,{x:ue-Z,y:pe-Z},{x:se-Z,y:fe-Z},{width:Z,height:Z},h),Vo.copy(U.data,P,{x:0,y:pe-Z},{x:se+ue,y:fe-Z},{width:Z,height:Z},h),Vo.copy(U.data,P,{x:0,y:0},{x:se+ue,y:fe+pe},{width:Z,height:Z},h),Vo.copy(U.data,P,{x:ue-Z,y:0},{x:se-Z,y:fe+pe},{width:Z,height:Z},h)}this.lut=h,this.image=P,this.iconPositions=g,this.patternPositions=b}addImages(o,u,h,g){for(const[b,w]of o.entries()){const{bin:A,imagePosition:D,imageVariant:P}=wL(b,w,h);u.set(b,D),g.push(A),w.hasRenderCallback&&this.haveRenderCallbacks.push(P.id)}}patchUpdatedImages(o,u,h,g){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(b=>o.hasImage(b,h)),o.dispatchRenderCallbacks(this.haveRenderCallbacks,h);for(const b of o.getUpdatedImages(h)){for(const w of this.iconPositions.keys()){const A=Bo.parse(w);if(ws.isEqual(A.id,b)){const D=o.getImage(b,h);this.patchUpdatedImage(this.iconPositions.get(w),D,u,null)}}for(const w of this.patternPositions.keys()){const A=Bo.parse(w);if(ws.isEqual(A.id,b)){const D=o.getImage(b,h);this.patchUpdatedImage(this.patternPositions.get(w),D,u,g||this.lut)}}}}patchUpdatedImage(o,u,h,g=null){if(!o||!u||o.version===u.version)return;o.version=u.version;const[b,w]=o.tl,A=o.sdf;if(this.lut||A){const D={width:u.data.width,height:u.data.height},P=new Vo(D);Vo.copy(u.data,P,{x:0,y:0},{x:0,y:0},D,g,A),h.update(P,{position:{x:b,y:w}})}else h.update(u.data,{position:{x:b,y:w}})}}Kt(eE,"ImagePosition"),Kt(OH,"ImageAtlas",{omit:["lut"]});const tE=1e20;function CH(c,o,u,h,g,b,w,A,D){for(let P=o;P<o+h;P++)MH(c,u*b+P,b,g,w,A,D);for(let P=u;P<u+g;P++)MH(c,P*b+o,1,h,w,A,D)}function MH(c,o,u,h,g,b,w){b[0]=0,w[0]=-tE,w[1]=tE,g[0]=c[o];for(let A=1,D=0,P=0;A<h;A++){g[A]=c[o+A*u];const B=A*A;do{const U=b[D];P=(g[A]-g[U]+B-U*U)/(A-U)/2}while(P<=w[D]&&--D>-1);D++,b[D]=A,w[D]=P,w[D+1]=tE}for(let A=0,D=0;A<h;A++){for(;w[D+1]<A;)D++;const P=b[D],B=A-P;c[o+A*u]=g[P]+B*B}}const SL={none:0,ideographs:1,all:2};class j1{constructor(o,u,h){this.requestManager=o,this.localGlyphMode=u,this.localFontFamily=h,this.url="",this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o){this.url=o}getGlyphs(o,u){const h=[],g=this.url||Ja.GLYPHS_URL;for(const b in o)for(const w of o[b])h.push({stack:b,id:w});lt(h,({stack:b,id:w},A)=>{let D=this.entries[b];D||(D=this.entries[b]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let P=D.glyphs[w];if(P!==void 0)return void A(null,{stack:b,id:w,glyph:P});if(P=this._tinySDF(D,b,w),P)return D.glyphs[w]=P,void A(null,{stack:b,id:w,glyph:P});const B=Math.floor(w/256);if(256*B>65535)return Hn("glyphs > 65535 not supported"),void A(null,{stack:b,id:w,glyph:P});if(D.ranges[B])return void A(null,{stack:b,id:w,glyph:P});let U=D.requests[B];U||(U=D.requests[B]=[],j1.loadGlyphRange(b,B,g,this.requestManager,($,G)=>{if(G){D.ascender=G.ascender,D.descender=G.descender;for(const Z in G.glyphs)this._doesCharSupportLocalGlyph(+Z)||(D.glyphs[+Z]=G.glyphs[+Z]);D.ranges[B]=!0}for(const Z of U)Z($,G);delete D.requests[B]})),U.push(($,G)=>{$?A($):G&&A(null,{stack:b,id:w,glyph:G.glyphs[w]||null})})},(b,w)=>{if(b)u(b);else if(w){const A={};for(const{stack:D,id:P,glyph:B}of w)A[D]===void 0&&(A[D]={}),A[D].glyphs===void 0&&(A[D].glyphs={}),A[D].glyphs[P]=B&&{id:B.id,bitmap:B.bitmap.clone(),metrics:B.metrics},A[D].ascender=this.entries[D].ascender,A[D].descender=this.entries[D].descender;u(null,A)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==SL.none&&(this.localGlyphMode===SL.all?!!this.localFontFamily:!!this.localFontFamily&&(Wa(o)||Yg(o)||wh(o)||Fd(o)||Ma(o)||jo(o)||(u=o)>=131072&&u<=173791||(h=>h>=66736&&h<=66815)(o)));var u}_tinySDF(o,u,h){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(h))return;let b=o.tinySDF;if(!b){let se="400";/bold/i.test(u)?se="900":/medium/i.test(u)?se="500":/light/i.test(u)&&(se="200"),b=o.tinySDF=new j1.TinySDF({fontFamily:g,fontWeight:se,fontSize:48,buffer:6,radius:16}),b.fontWeight=se}if(this.localGlyphs[b.fontWeight][h])return this.localGlyphs[b.fontWeight][h];const w=String.fromCodePoint(h),{data:A,width:D,height:P,glyphWidth:B,glyphHeight:U,glyphLeft:$,glyphTop:G,glyphAdvance:Z}=b.draw(w);return this.localGlyphs[b.fontWeight][h]={id:h,bitmap:new Ph({width:D,height:P},A),metrics:{width:B/2,height:U/2,left:$/2,top:G/2-27,advance:Z/2,localGlyph:!0}}}}function DH(c,o){return c+o[1]-o[0]}function TL(c,o,u,h,g=1){const b=[],w=c.imagePrimary,A=w.pixelRatio,D=w.paddedRect.w-2,P=w.paddedRect.h-2,B=(c.right-c.left)*g,U=(c.bottom-c.top)*g,$=w.stretchX||[[0,D]],G=w.stretchY||[[0,P]],Z=$.reduce(DH,0),se=G.reduce(DH,0),fe=D-Z,ue=P-se;let pe=0,ve=Z,Se=0,ke=se,Ie=0,Ve=fe,qe=0,Ue=ue;if(w.content&&h){const rt=w.content;pe=RC($,0,rt[0]),Se=RC(G,0,rt[1]),ve=RC($,rt[0],rt[2]),ke=RC(G,rt[1],rt[3]),Ie=rt[0]-pe,qe=rt[1]-Se,Ve=rt[2]-rt[0]-ve,Ue=rt[3]-rt[1]-ke}const Ze=(rt,Et,xt,Tt)=>{const kt=kC(rt.stretch-pe,ve,B,c.left*g),Pt=LC(rt.fixed-Ie,Ve,rt.stretch,Z),Rt=kC(Et.stretch-Se,ke,U,c.top*g),vt=LC(Et.fixed-qe,Ue,Et.stretch,se),zt=kC(xt.stretch-pe,ve,B,c.left*g),Mt=LC(xt.fixed-Ie,Ve,xt.stretch,Z),Nt=kC(Tt.stretch-Se,ke,U,c.top*g),Lt=LC(Tt.fixed-qe,Ue,Tt.stretch,se),fn=new Vt(kt,Rt),pn=new Vt(zt,Rt),nn=new Vt(zt,Nt),an=new Vt(kt,Nt),kn=new Vt(Pt/A,vt/A),Cn=new Vt(Mt/A,Lt/A),cn=o*Math.PI/180;if(cn){const kr=Math.sin(cn),Ra=Math.cos(cn),Ur=[Ra,-kr,kr,Ra];fn._matMult(Ur),pn._matMult(Ur),an._matMult(Ur),nn._matMult(Ur)}const Wn=rt.stretch+rt.fixed,vr=xt.stretch+xt.fixed,Zr=Et.stretch+Et.fixed,pr=Tt.stretch+Tt.fixed,di=c.imageSecondary;return{tl:fn,tr:pn,bl:an,br:nn,texPrimary:{x:w.paddedRect.x+1+Wn,y:w.paddedRect.y+1+Zr,w:vr-Wn,h:pr-Zr},texSecondary:di?{x:di.paddedRect.x+1+Wn,y:di.paddedRect.y+1+Zr,w:vr-Wn,h:pr-Zr}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:kn,pixelOffsetBR:Cn,minFontScaleX:Ve/A/B,minFontScaleY:Ue/A/U,isSDF:u}};if(w.stretchX||w.stretchY){const rt=IH($,fe,Z),Et=IH(G,ue,se);for(let xt=0;xt<rt.length-1;xt++){const Tt=rt[xt],kt=rt[xt+1];for(let Pt=0;Pt<Et.length-1;Pt++)b.push(Ze(Tt,Et[Pt],kt,Et[Pt+1]))}}else b.push(Ze({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:P+1}));return b}function ave(c,o){const u=c.stretchY||[[0,c.paddedRect.h-2]];return c.stretchX||c.stretchY?PH(c.stretchX||[[0,c.paddedRect.w-2]])*PH(u):1}function RC(c,o,u){let h=0;for(const g of c)h+=Math.max(o,Math.min(u,g[1]))-Math.max(o,Math.min(u,g[0]));return h}function IH(c,o,u){const h=[{fixed:-1,stretch:0}];for(const[g,b]of c){const w=h[h.length-1];h.push({fixed:g-w.stretch,stretch:w.stretch}),h.push({fixed:g-w.stretch,stretch:w.stretch+(b-g)})}return h.push({fixed:o+1,stretch:u}),h}function PH(c){return 2*c.length+1}function kC(c,o,u,h){return c/o*u+h}function LC(c,o,u,h){return c-o*u/h}function ove(c,o,u,h){const g=o+c.positionedLines[h].lineOffset;return h===0?u+g/2:u+(g+(o+c.positionedLines[h-1].lineOffset))/2}function RH(c,o,u,h,g,b,w,A,D){const P=[];if(o.positionedLines.length===0)return P;const B=(D!==void 0?D:h.layout.get("text-rotate").evaluate(b,{}))*Math.PI/180,U=(function(fe){const ue=fe[0],pe=fe[1],ve=ue*pe;return ve>0?[ue,-pe]:ve<0?[-ue,pe]:ue===0?[pe,ue]:[pe,-ue]})(u);let $=Math.abs(o.top-o.bottom);for(const fe of o.positionedLines)$-=fe.lineOffset;const G=o.positionedLines.length,Z=$/G;let se=o.top-u[1];for(let fe=0;fe<G;++fe){const ue=o.positionedLines[fe];se=ove(o,Z,se,fe);for(const pe of ue.positionedGlyphs){if(!pe.rect)continue;const ve=pe.rect||{};let Se=4,ke=!0,Ie=1,Ve=0;if(pe.image){const pn=w.get(pe.image.toString());if(!pn)continue;if(pn.sdf){Hn("SDF images are not supported in formatted text and will be ignored.");continue}ke=!1,Ie=pn.pixelRatio,Se=1/Ie}const qe=(g||A)&&pe.vertical,Ue=pe.metrics.advance*pe.scale/2,Ze=pe.metrics,rt=pe.rect;if(rt===null)continue;A&&o.verticalizable&&(Ve=pe.image?Ue-pe.metrics.width*pe.scale/2:0);const Et=g?[pe.x+Ue,pe.y]:[0,0];let xt=[0,0],Tt=[0,0],kt=!1;g||(qe?(Tt=[pe.x+Ue+U[0],pe.y+U[1]-Ve],kt=!0):xt=[pe.x+Ue+u[0],pe.y+u[1]-Ve]);const Pt=rt.w*pe.scale/(Ie*(pe.localGlyph?2:1)),Rt=rt.h*pe.scale/(Ie*(pe.localGlyph?2:1));let vt,zt,Mt,Nt;if(qe){const pn=pe.y-se,nn=new Vt(-Ue,Ue-pn),an=-Math.PI/2,kn=new Vt(...Tt);vt=new Vt(-Ue+xt[0],xt[1]),vt._rotateAround(an,nn)._add(kn),vt.x+=-pn+Ue,vt.y-=(Ze.left-Se)*pe.scale;const Cn=pe.image?Ze.advance*pe.scale:Qo*pe.scale,cn=String.fromCodePoint(pe.glyph);U_e(cn)?vt.x+=(1-Se)*pe.scale:$_e(cn)?vt.x+=Cn-Ze.height*pe.scale+(-Se-1)*pe.scale:vt.x+=pe.image||Ze.width+2*Se===rt.w&&Ze.height+2*Se===rt.h?(Cn-Rt)/2:(Cn-(Ze.height+2*Se)*pe.scale)/2,zt=new Vt(vt.x,vt.y-Pt),Mt=new Vt(vt.x+Rt,vt.y),Nt=new Vt(vt.x+Rt,vt.y-Pt)}else{const pn=(Ze.left-Se)*pe.scale-Ue+xt[0],nn=(-Ze.top-Se)*pe.scale+xt[1],an=pn+Pt,kn=nn+Rt;vt=new Vt(pn,nn),zt=new Vt(an,nn),Mt=new Vt(pn,kn),Nt=new Vt(an,kn)}if(B){let pn;pn=g?new Vt(0,0):kt?new Vt(U[0],U[1]):new Vt(u[0],u[1]),vt._rotateAround(B,pn),zt._rotateAround(B,pn),Mt._rotateAround(B,pn),Nt._rotateAround(B,pn)}const Lt=new Vt(0,0),fn=new Vt(0,0);P.push({tl:vt,tr:zt,bl:Mt,br:Nt,texPrimary:ve,texSecondary:void 0,writingMode:o.writingMode,glyphOffset:Et,sectionIndex:pe.sectionIndex,isSDF:ke,pixelOffsetTL:Lt,pixelOffsetBR:fn,minFontScaleX:0,minFontScaleY:0})}}return P}function sve(c,o=1,u=!1){let h=1/0,g=1/0,b=-1/0,w=-1/0;const A=c[0];for(let G=0;G<A.length;G++){const Z=A[G];(!G||Z.x<h)&&(h=Z.x),(!G||Z.y<g)&&(g=Z.y),(!G||Z.x>b)&&(b=Z.x),(!G||Z.y>w)&&(w=Z.y)}const D=Math.min(b-h,w-g);let P=D/2;const B=new Td([],lve);if(D===0)return new Vt(h,g);for(let G=h;G<b;G+=D)for(let Z=g;Z<w;Z+=D)B.push(new U1(G+P,Z+P,P,c));let U=(function(G){let Z=0,se=0,fe=0;const ue=G[0];for(let pe=0,ve=ue.length,Se=ve-1;pe<ve;Se=pe++){const ke=ue[pe],Ie=ue[Se],Ve=ke.x*Ie.y-Ie.x*ke.y;se+=(ke.x+Ie.x)*Ve,fe+=(ke.y+Ie.y)*Ve,Z+=3*Ve}return new U1(se/Z,fe/Z,0,G)})(c),$=B.length;for(;B.length;){const G=B.pop();(G.d>U.d||!U.d)&&(U=G,u&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,$)),G.max-U.d<=o||(P=G.h/2,B.push(new U1(G.p.x-P,G.p.y-P,P,c)),B.push(new U1(G.p.x+P,G.p.y-P,P,c)),B.push(new U1(G.p.x-P,G.p.y+P,P,c)),B.push(new U1(G.p.x+P,G.p.y+P,P,c)),$+=4)}return u&&(console.log(`num probes: ${$}`),console.log(`best distance: ${U.d}`)),U.p}function lve(c,o){return o.max-c.max}j1.loadGlyphRange=function(c,o,u,h,g){const b=256*o,w=b+255,A=h.transformRequest(h.normalizeGlyphsURL(u).replace("{fontstack}",c).replace("{range}",`${b}-${w}`),eo.Glyphs);gd(A,(D,P)=>{if(D)g(D);else if(P){const B={},U=(function($){return new DC($).readFields(Q_e,{})})(P);for(const $ of U.glyphs)B[$.id]=$;g(null,{glyphs:B,ascender:U.ascender,descender:U.descender})}})},j1.TinySDF=class{constructor({fontSize:c=24,buffer:o=3,radius:u=8,cutoff:h=.25,fontFamily:g="sans-serif",fontWeight:b="normal",fontStyle:w="normal",lang:A=null}={}){this.buffer=o,this.cutoff=h,this.radius=u,this.lang=A;const D=this.size=c+4*o,P=this._createCanvas(D),B=this.ctx=P.getContext("2d",{willReadFrequently:!0});B.font=`${w} ${b} ${c}px ${g}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(D*D),this.gridInner=new Float64Array(D*D),this.f=new Float64Array(D),this.z=new Float64Array(D+1),this.v=new Uint16Array(D)}_createCanvas(c){const o=document.createElement("canvas");return o.width=o.height=c,o}draw(c){const{width:o,actualBoundingBoxAscent:u,actualBoundingBoxDescent:h,actualBoundingBoxLeft:g,actualBoundingBoxRight:b}=this.ctx.measureText(c),w=Math.ceil(u),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-g))),D=Math.min(this.size-this.buffer,w+Math.ceil(h)),P=A+2*this.buffer,B=D+2*this.buffer,U=Math.max(P*B,0),$=new Uint8ClampedArray(U),G={data:$,width:P,height:B,glyphWidth:A,glyphHeight:D,glyphTop:w,glyphLeft:0,glyphAdvance:o};if(A===0||D===0)return G;const{ctx:Z,buffer:se,gridInner:fe,gridOuter:ue}=this;this.lang&&(Z.lang=this.lang),Z.clearRect(se,se,A,D),Z.fillText(c,se,se+w);const pe=Z.getImageData(se,se,A,D);ue.fill(tE,0,U),fe.fill(0,0,U);for(let ve=0;ve<D;ve++)for(let Se=0;Se<A;Se++){const ke=pe.data[4*(ve*A+Se)+3]/255;if(ke===0)continue;const Ie=(ve+se)*P+Se+se;if(ke===1)ue[Ie]=0,fe[Ie]=tE;else{const Ve=.5-ke;ue[Ie]=Ve>0?Ve*Ve:0,fe[Ie]=Ve<0?Ve*Ve:0}}CH(ue,0,0,P,B,P,this.f,this.v,this.z),CH(fe,se,se,A,D,P,this.f,this.v,this.z);for(let ve=0;ve<U;ve++){const Se=Math.sqrt(ue[ve])-Math.sqrt(fe[ve]);$[ve]=Math.round(255-255*(Se/this.radius+this.cutoff))}return G}};class U1{constructor(o,u,h,g){this.p=new Vt(o,u),this.h=h,this.d=(function(b,w){let A=!1,D=1/0;for(let P=0;P<w.length;P++){const B=w[P];for(let U=0,$=B.length,G=$-1;U<$;G=U++){const Z=B[U],se=B[G];Z.y>b.y!=se.y>b.y&&b.x<(se.x-Z.x)*(b.y-Z.y)/(se.y-Z.y)+Z.x&&(A=!A),D=Math.min(D,Zd(b,Z,se))}}return(A?1:-1)*Math.sqrt(D)})(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const uve=Object.keys,EL=Number.POSITIVE_INFINITY,cve=Math.sqrt(2);function Tv(c,o,u,h,g){const b=vL(c)&&c.collisionPadding?c.collisionPadding:[0,0,0,0],w={top:c.top-b[1],bottom:c.bottom+b[3],left:c.left-b[0],right:c.right+b[2],scaled:!1};return h!==void 0&&(function(A,D){A.top*=D,A.bottom*=D,A.left*=D,A.right*=D,A.scaled=!0})(w,h),u&&(function(A,D){if(!D)return;const P=Ar(D),B=new Vt(A.left,A.top),U=new Vt(A.right,A.top),$=new Vt(A.left,A.bottom),G=new Vt(A.right,A.bottom),Z=new Vt(0,0);B._rotateAround(P,Z),U._rotateAround(P,Z),$._rotateAround(P,Z),G._rotateAround(P,Z),A.left=Math.min(B.x,U.x,$.x,G.x),A.right=Math.max(B.x,U.x,$.x,G.x),A.top=Math.min(B.y,U.y,$.y,G.y),A.bottom=Math.max(B.y,U.y,$.y,G.y)})(w,u),g&&(w.left+=g[0],w.right+=g[0],w.top+=g[1],w.bottom+=g[1]),o?{top:Math.min(o.top,w.top),bottom:Math.max(o.bottom,w.bottom),left:Math.min(o.left,w.left),right:Math.max(o.right,w.right),scaled:o.scaled||w.scaled}:w}function kH(c,[o,u]){let h=0,g=0;if(u===EL){o<0&&(o=0);const b=o/cve;switch(c){case"top-right":case"top-left":g=b-7;break;case"bottom-right":case"bottom-left":g=7-b;break;case"bottom":g=7-o;break;case"top":g=o-7}switch(c){case"top-right":case"bottom-right":h=-b;break;case"top-left":case"bottom-left":h=b;break;case"left":h=o;break;case"right":h=-o}}else{switch(o=Math.abs(o),u=Math.abs(u),c){case"top-right":case"top-left":case"top":g=u-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-u}switch(c){case"top-right":case"bottom-right":case"right":h=-o;break;case"top-left":case"bottom-left":case"left":h=o}}return[h,g]}function fve(c,o,u,h,g,b,w,A,D,P,B,U,$,G,Z){const se=c.layers[0],fe=se.appearances;if(fe.length===0)return{iconBBox:null,iconVerticalBBox:null,textBBox:null,textVerticalBBox:null};const ue={iconBBox:null,iconVerticalBBox:null},pe={textBBox:null,textVerticalBBox:null},{baseIconRotate:ve,baseTextRotate:Se,iconScaleFactor:ke}=(function(Ve,qe,Ue){const Ze=Ve.get("icon-rotate").evaluate(qe,{},Ue),rt=Ve.get("text-rotate").evaluate(qe,{},Ue),[Et,xt]=Ve.get("icon-size-scale-range");return{baseIconRotate:Ze,baseTextRotate:rt,iconScaleFactor:ze(1,Et,xt)}})(h,g,b);o&&(ue.iconBBox=Tv(o,ue.iconBBox,ve,w),u)&&(ue.iconVerticalBBox=Tv(u,ue.iconVerticalBBox,ve+90,w));const Ie=NC(U.horizontal);Ie&&(pe.textBBox=Tv(Ie,pe.textBBox,Se,1,G)),U.vertical&&(pe.textVerticalBBox=Tv(U.vertical,pe.textVerticalBBox,Se+90,1,G));for(const Ve of fe)Ve.hasIconProperties()&&hve(ue,c,se,Ve,g,b,A,ve,w,D,o,P,ke,B,Z),Ve.hasTextProperties()&&dve(pe,se,Ve,g,b,G,Se,$,Ie,U.vertical);return{iconBBox:ue.iconBBox,iconVerticalBBox:ue.iconVerticalBBox,textBBox:pe.textBBox,textVerticalBBox:pe.textVerticalBBox}}function hve(c,o,u,h,g,b,w,A,D,P,B,U,$,G,Z){const{appearanceIconOffset:se,appearanceIconRotate:fe,appearanceIconSize:ue}=LH(h,u,g,b,w,A,D,P.iconScaleFactor);let pe=null,ve=null,Se=null;h.hasProperty("icon-image")?Se=(function(ke,Ie,Ve,qe,Ue,Ze,rt,Et){let xt=null;const Tt=Ie.getAppearanceValueAndResolveTokens(Ve,"icon-image",qe,Ue,Et);if(Tt){const kt=ke.getResolvedImageFromTokens(Tt),Pt=Ve.getUnevaluatedProperty("icon-size"),Rt=nE(kt,Eb(ke.zoom,Pt,ke.worldview,Et),Pt,Ue,ke.zoom,qe,ke.pixelRatio,rt,ke.worldview,Et);xt=Ze.get(Rt.iconPrimary.toString())}return xt})(o,u,h,g,b,U,$,Z):B&&(Se=B.imagePrimary),Se&&(pe=PC(Se,null,se,G),o.allowVerticalPlacement&&(ve=PC(Se,null,se,G))),pe&&(c.iconBBox=Tv(pe,c.iconBBox,fe,ue)),ve&&(c.iconVerticalBBox=Tv(ve,c.iconVerticalBBox,fe+90,ue))}function LH(c,o,u,h,g,b,w,A){const D=c.hasProperty("icon-offset")?o.getAppearanceValueAndResolveTokens(c,"icon-offset",u,h,[]):null,P=D&&Array.isArray(D)?D:g,B=c.hasProperty("icon-rotate")?o.getAppearanceValueAndResolveTokens(c,"icon-rotate",u,h,[]):null,U=typeof B=="number"?B:b,$=c.hasProperty("icon-size")?o.getAppearanceValueAndResolveTokens(c,"icon-size",u,h,[]):null;return{appearanceIconOffset:P,appearanceIconRotate:U,appearanceIconSize:typeof $=="number"?$*A:w}}function dve(c,o,u,h,g,b,w,A,D,P){const{appearanceTextOffset:B,appearanceTextRotate:U,appearanceTextSize:$}=zH(u,o,h,g,b,w,A),G=$/A;D&&(c.textBBox=Tv(D,c.textBBox,U,G,B)),P&&(c.textVerticalBBox=Tv(P,c.textVerticalBBox,U+90,G,B))}function zH(c,o,u,h,g,b,w){const A=c.hasProperty("text-offset")?o.getAppearanceValueAndResolveTokens(c,"text-offset",u,h,[]):null,D=A&&Array.isArray(A)?[A[0]*Qo,A[1]*Qo]:g,P=c.hasProperty("text-rotate")?o.getAppearanceValueAndResolveTokens(c,"text-rotate",u,h,[]):null,B=typeof P=="number"?P:b,U=c.hasProperty("text-size")?o.getAppearanceValueAndResolveTokens(c,"text-size",u,h,[]):null;return{appearanceTextOffset:D,appearanceTextRotate:B,appearanceTextSize:typeof U=="number"?U:w}}function zC(c,o,u,h,g,b,w,A,D){if(!o||!o.usvg)return;const P=bH(h),B=bH(g),U=b!=="both"&&b!=="width"||!_H(h)?1:B.width/P.width,$=b!=="both"&&b!=="height"||!vH(h)?1:B.height/P.height;u.scaleSelf(U,$);const G=u.toString();w.set(G,u),A.set(G,o);const{imagePosition:Z}=wL(G,o,1);D.set(G,Z)}function NH(c,o,u,h,g,b,w,A,D,P){if(!c)return;const B=(function(U,$,G,Z,se,fe,ue){if(U.kind==="camera")return U.maxSize;if(U.kind==="composite"){const pe=$.possiblyEvaluate(new Jr(U.maxZoom,{worldview:fe}),G,ue).evaluate(se,{},G,ue),ve=$.possiblyEvaluate(new Jr(U.minZoom,{worldview:fe}),G,ue).evaluate(se,{},G,ue);return Math.max(pe,ve)}return $.possiblyEvaluate(new Jr(Z,{worldview:fe}),G,ue).evaluate(se,{},G,ue)})(o,u,h,g,b,D,P);return c.scaleSelf(B*A*w)}function nE(c,o,u,h,g,b,w,A,D,P){return{iconPrimary:NH(c.getPrimary(),o,u,h,g,b,w,A,D,P),iconSecondary:NH(c.getSecondary(),o,u,h,g,b,w,A,D,P)}}function pve(c,o,u){if(!o)return;const h=u.get(c.toString()),g=u.get(o.toString());h&&g&&(h.paddedRect.w===g.paddedRect.w&&h.paddedRect.h===g.paddedRect.h||Hn(`Mismatch in icon variant sizes: ${c.toString()} and ${o.toString()}`),h.usvg!==g.usvg&&Hn(`Mismatch in icon variant image types: ${c.id} and ${o.id}`))}function FH(c,o,u,h){if(!c)return;const g=o.get(u.toString());if(c.imagePrimary=g,h){const b=o.get(h.toString());c.imageSecondary=b}}function mve(c,o){for(const u in c.horizontal)BH(c.horizontal[u],o);BH(c.vertical,o)}function BH(c,o){if(c){for(const u of c.positionedLines)for(const h of u.positionedGlyphs)if(h.image!==null){const g=h.image.toString();h.rect=o.get(g).paddedRect}}}function AL(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function gve(c,o,u,h,g,b,w,A,D){const P=NC(b.horizontal)||b.vertical,B=u.get("icon-text-fit-padding").evaluate(h,{},g);let U,$=o;return o&&D!=="none"&&(c.allowVerticalPlacement&&b.vertical&&(U=bL(o,b.vertical,D,B,A,w)),P&&($=bL(o,P,D,B,A,w))),{defaultShapedIcon:$,verticallyShapedIcon:U}}function jH(c,o){return c*o/24}function yve(c,o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe,ue,pe,ve,Se,ke,Ie,Ve){let qe=w.textMaxSize.evaluate(o,{},$);qe===void 0?qe=A*w.textScaleFactor:qe*=w.textScaleFactor;const Ue=c.layers[0].layout,Ze=jH(A,w.textScaleFactor),rt=NC(u.horizontal)||u.vertical,Et=c.hasAnyAppearanceProperty(["text-size","text-offset","text-rotate"]);if((fe!=="none"||Et)&&c.appearanceFeatureData&&c.featureToAppearanceIndex[o.index]<c.appearanceFeatureData.length){const nn=c.appearanceFeatureData[c.featureToAppearanceIndex[o.index]];nn&&(nn.textShaping=rt,nn.iconTextFitPadding=Ue.get("icon-text-fit-padding").evaluate(o,{},$),nn.fontScale=Ze,nn.textScaleFactor=w.textScaleFactor)}const xt=G.name==="globe",Tt=c.tilePixelRatio*qe/24,kt=(Nt=c.overscaling,c.zoom>18&&Nt>2&&(Nt>>=1),Math.max(Jt/(512*Nt),1)*Ue.get("symbol-spacing")),Pt=Ue.get("text-padding")*c.tilePixelRatio,Rt=Ue.get("icon-padding")*c.tilePixelRatio,vt=Ar(Ue.get("text-max-angle")),zt=Ue.get("icon-rotation-alignment")==="map"&&ve!=="point",Mt=kt/2;var Nt;c.hasAnyIconTextFit===!1&&fe!=="none"&&(c.hasAnyIconTextFit=!0);const Lt=o.properties?+o.properties[wr]:null,fn=Lt&&c.elevationFeatureIdToIndex?c.elevationFeatureIdToIndex.get(Lt):65535,pn=(nn,an,kn)=>{if(an.x<0||an.x>=Jt||an.y<0||an.y>=Jt)return;let Cn=null;if(xt){const{x:cn,y:Wn,z:vr}=G.projectTilePoint(an.x,an.y,kn);Cn={anchor:new by(cn,Wn,vr,0,void 0),up:G.upVector(kn,an.x,an.y)}}(function(cn,Wn,vr,Zr,pr,di,kr,Ra,Ur,ui,Vi,ta,na,ka,fs,Hs,fo,Ao,qo,fr,ra,_a,lc,Rl,hs,kl,Im,dl,eM,W1,Kl,tM){const Pm=cn.addToLineVertexArray(Wn,Zr);let xy,Ov,Uf,Nh,_E,X1,mr,Jo=0,La=0,Oo=0,$f=0,yu=-1,uc=-1;const es={};let vE=Oc("");const Rm=vr?vr.anchor:Wn,ho=dl!=="none";let ds=0,Co=0;if(Ur._unevaluatedLayout.getValue("text-radial-offset")===void 0){const ps=Ur.layout.get("text-offset").evaluate(ra,{},hs);ds=ps[0]*Qo,Co=ps[1]*Qo}else ds=Ur.layout.get("text-radial-offset").evaluate(ra,{},hs)*Qo,Co=EL;if(cn.allowVerticalPlacement&&pr.vertical){const ps=pr.vertical;if(fs)X1=ML(ps),Ra&&(mr=ML(Ra));else{const _u=Ur.layout.get("text-rotate").evaluate(ra,{},hs)+90;Uf=FC(ui,Rm,Wn,Vi,ta,na,ps,ka,_u,Hs,tM),Ra&&(Nh=FC(ui,Rm,Wn,Vi,ta,na,Ra,Ao,_u,null,Kl))}}if(di){const ps=Ur.layout.get("icon-rotate").evaluate(ra,{},hs),_u=TL(di,ps,lc,ho,_a.iconScaleFactor),Fh=Ra?TL(Ra,ps,lc,ho,_a.iconScaleFactor):void 0;Ov=FC(ui,Rm,Wn,Vi,ta,na,di,Ao,ps,null,W1);const km=(function(ap,M0e,i7,D0e,I0e,a7,o7,P0e,Kdt,JL){const s7=ap.layers[0],l7=s7.appearances;let K1=M0e.length;if(i7&&(K1=Math.max(K1,i7.length)),l7.length===0)return K1;const[R0e,k0e]=D0e.get("icon-size-scale-range"),L0e=ze(1,R0e,k0e);for(const e3 of l7){const u7=e3.getUnevaluatedProperties();if(u7._values["icon-image"].value!==void 0){const c7=s7.getAppearanceValueAndResolveTokens(e3,"icon-image",a7,o7,JL);if(c7){const f7=ap.getResolvedImageFromTokens(c7);if(f7){const h7=e3.hasProperty("icon-size")?u7._values["icon-size"]:I0e._values["icon-size"],z0e=nE(f7,Eb(ap.zoom,h7,ap.worldview,JL),h7,o7,ap.zoom,a7,ap.pixelRatio,L0e,ap.worldview,JL),d7=P0e.get(z0e.iconPrimary.toString());d7&&(K1=Math.max(K1,ave(d7)))}}}}return K1})(cn,_u,Fh,Ur.layout,Ur._unevaluatedLayout,ra,hs,cn.iconAtlasPositions,0,Rl);Jo=4*km;const KL=Ur.layout.get("icon-size").evaluate(ra,{},hs,Rl),QL=_a.compositeIconSizes?_a.compositeIconSizes[0].evaluate(ra,{},hs,Rl):0,bE=_a.compositeIconSizes?_a.compositeIconSizes[1].evaluate(ra,{},hs,Rl):0,Z1=CL(cn.layerIds[0],cn.iconSizeData,KL,_a.iconScaleFactor,QL,bE);cn.addSymbols(cn.icon,_u,Z1,fr,qo,ra,void 0,vr,Wn,Pm.lineStartIndex,Pm.lineLength,-1,Rl,hs,kl,Im,cn.symbolInstances.length,km),yu=cn.icon.placedSymbolArray.length-1,Fh&&(La=4*km,cn.addSymbols(cn.icon,Fh,Z1,fr,qo,ra,sc.vertical,vr,Wn,Pm.lineStartIndex,Pm.lineLength,-1,Rl,hs,kl,Im,cn.symbolInstances.length,km),uc=cn.icon.placedSymbolArray.length-1)}for(const ps in pr.horizontal){const _u=ps,Fh=pr.horizontal[_u];xy||(vE=Oc(Fh.text),fs?_E=ML(Fh):xy=FC(ui,Rm,Wn,Vi,ta,na,Fh,ka,Ur.layout.get("text-rotate").evaluate(ra,{},hs),Hs,tM));const km=Fh.positionedLines.length===1;if(Oo+=UH(cn,vr,Wn,Fh,kr,Ur,fs,ra,Hs,Pm,pr.vertical?sc.horizontal:sc.horizontalOnly,km?uve(pr.horizontal):[_u],es,yu,_a,Rl,hs,cn.symbolInstances.length,kl),km)break}pr.vertical&&($f+=UH(cn,vr,Wn,pr.vertical,kr,Ur,fs,ra,Hs,Pm,sc.vertical,["vertical"],es,uc,_a,Rl,hs,cn.symbolInstances.length,kl));let pl=-1;const ml=(ps,_u)=>ps?Math.max(ps,_u):_u;pl=ml(_E,pl),pl=ml(X1,pl),pl=ml(mr,pl);const Cv=pl>-1?1:0;cn.glyphOffsetArray.length>=65535&&Hn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ra.sortKey!==void 0&&cn.addToSortKeyRanges(cn.symbolInstances.length,ra.sortKey),cn.symbolInstances.emplaceBack(Wn.x,Wn.y,Rm.x,Rm.y,Rm.z,es.right>=0?es.right:-1,es.center>=0?es.center:-1,es.left>=0?es.left:-1,es.vertical>=0?es.vertical:-1,yu,uc,vE,xy!==void 0?xy:cn.collisionBoxArray.length,xy!==void 0?xy+1:cn.collisionBoxArray.length,Uf!==void 0?Uf:cn.collisionBoxArray.length,Uf!==void 0?Uf+1:cn.collisionBoxArray.length,Ov!==void 0?Ov:cn.collisionBoxArray.length,Ov!==void 0?Ov+1:cn.collisionBoxArray.length,Nh||cn.collisionBoxArray.length,Nh?Nh+1:cn.collisionBoxArray.length,Vi,Oo,$f,Jo,La,Cv,0,ds,Co,pl,0,ho?1:0,eM)})(c,an,Cn,nn,u,h,b,g,c.layers[0],c.collisionBoxArray,o.index,o.sourceLayerIndex,c.index,Pt,pe,P,0,Rt,zt,ue,o,w,B,U,$,Z,se,fe,fn,Se,ke,Ie)};if(ve==="line")for(const nn of vC(o.geometry,0,0,Jt,Jt)){const an=ive(nn,kt,vt,u.vertical||rt,h,24,Tt,c.overscaling,Jt);for(const kn of an)rt&&_ve(c,rt.text,Mt,kn)||pn(nn,kn,$)}else if(ve==="line-center"){for(const nn of o.geometry)if(nn.length>1){const an=rve(nn,vt,u.vertical||rt,h,24,Tt);an&&pn(nn,an,$)}}else if(o.type==="Polygon")for(const nn of pb(o.geometry,0)){const an=sve(nn,16);pn(nn[0],new by(an.x,an.y,0,0,void 0),$)}else if(o.type==="LineString")for(const nn of o.geometry)pn(nn,new by(nn[0].x,nn[0].y,0,0,void 0),$);else if(o.type==="Point")for(const nn of o.geometry)for(const an of nn)pn([an],new by(an.x,an.y,0,0,void 0),$)}const OL=255,Ab=OL*vy;function UH(c,o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe,ue,pe){const ve=RH(0,h,D,b,w,A,g,c.allowVerticalPlacement,void 0),Se=b.layout.get("text-size").evaluate(A,{},fe),ke=Z.compositeTextSizes?Z.compositeTextSizes[0].evaluate(A,{},fe):0,Ie=Z.compositeTextSizes?Z.compositeTextSizes[1].evaluate(A,{},fe):0,Ve=CL(c.layerIds[0],c.textSizeData,Se,Z.textScaleFactor,ke,Ie);c.addSymbols(c.text,ve,Ve,D,w,A,B,o,u,P.lineStartIndex,P.lineLength,G,se,fe,pe,!1,ue,ve.length);for(const qe of U)$[qe]=c.text.placedSymbolArray.length-1;return 4*ve.length}function CL(c,o,u,h,g,b){const w=o;let A=null;return w.kind==="source"?(A=[vy*u*h],A[0]>Ab&&Hn(`${c}: Value for "text-size" is >= ${OL}. Reduce your "text-size".`)):w.kind==="composite"&&(A=[vy*g*h,vy*b*h],(A[0]>Ab||A[1]>Ab)&&Hn(`${c}: Value for "text-size" is >= ${OL}. Reduce your "text-size".`)),A}function NC(c){for(const o in c)return c[o];return null}function FC(c,o,u,h,g,b,w,A,D,P,B){let U,$,G,Z;if(U=B?B.top:w.top,$=B?B.bottom:w.bottom,G=B?B.left:w.left,Z=B?B.right:w.right,vL(w)&&w.collisionPadding){const se=w.collisionPadding;G-=se[0],U-=se[1],Z+=se[2],$+=se[3]}if(D){const se=new Vt(G,U),fe=new Vt(Z,U),ue=new Vt(G,$),pe=new Vt(Z,$),ve=Ar(D);let Se=new Vt(0,0);P&&(Se=new Vt(P[0],P[1])),se._rotateAround(ve,Se),fe._rotateAround(ve,Se),ue._rotateAround(ve,Se),pe._rotateAround(ve,Se),G=Math.min(se.x,fe.x,ue.x,pe.x),Z=Math.max(se.x,fe.x,ue.x,pe.x),U=Math.min(se.y,fe.y,ue.y,pe.y),$=Math.max(se.y,fe.y,ue.y,pe.y)}return c.emplaceBack(o.x,o.y,o.z,u.x,u.y,G,U,Z,$,A,h,g,b),c.length-1}function ML(c){vL(c)&&c.collisionPadding&&(c.top-=c.collisionPadding[1],c.bottom+=c.collisionPadding[3]);const o=c.bottom-c.top;return o>0?Math.max(10,o):null}function _ve(c,o,u,h){const g=c.compareText;if(o in g){const b=g[o];for(let w=b.length-1;w>=0;w--)if(h.dist(b[w])<u)return!0}else g[o]=[];return g[o].push(h),!1}function $H(c,o){const u=c.fovAboveCenter,h=c.elevation?c.elevation.getMinElevationBelowMSL()*o:0,g=(c._camera.position[2]*c.worldSize-h)/Math.cos(c._pitch),b=Math.sin(u)*g/Math.sin(Math.max(Math.PI/2-c._pitch-u,.01));let w=Math.sin(c._pitch)*b+g;const A=g*(1/c._horizonShift);if(!c.elevation||c.elevation.exaggeration()===0){let D=Math.max(c.zoom-17,0);c.isOrthographic&&(D/=10),w*=1+D}return Math.min(1.01*w,A)}function rE(c,o){if(!o.isReprojectedInTileSpace)return{scale:1<<c.z,x:c.x,y:c.y,x2:c.x+1,y2:c.y+1,projection:o};const u=Math.pow(2,-c.z),h=c.x*u,g=(c.x+1)*u,b=c.y*u,w=(c.y+1)*u,A=wt(h),D=wt(g),P=It(b),B=It(w),U=o.project(A,P),$=o.project(D,P),G=o.project(D,B),Z=o.project(A,B);let se=Math.min(U.x,$.x,G.x,Z.x),fe=Math.min(U.y,$.y,G.y,Z.y),ue=Math.max(U.x,$.x,G.x,Z.x),pe=Math.max(U.y,$.y,G.y,Z.y);const ve=u/16;function Se(Ie,Ve,qe,Ue,Ze,rt){const Et=(qe+Ze)/2,xt=(Ue+rt)/2,Tt=o.project(wt(Et),It(xt)),kt=Math.max(0,se-Tt.x,fe-Tt.y,Tt.x-ue,Tt.y-pe);se=Math.min(se,Tt.x),ue=Math.max(ue,Tt.x),fe=Math.min(fe,Tt.y),pe=Math.max(pe,Tt.y),kt>ve&&(Se(Ie,Tt,qe,Ue,Et,xt),Se(Tt,Ve,Et,xt,Ze,rt))}Se(U,$,h,b,g,b),Se($,G,g,b,g,w),Se(G,Z,g,w,h,w),Se(Z,U,h,w,h,b),se-=ve,fe-=ve,ue+=ve,pe+=ve;const ke=1/Math.max(ue-se,pe-fe);return{scale:ke,x:se*ke,y:fe*ke,x2:ue*ke,y2:pe*ke,projection:o}}function VH(c,{x:o,y:u},h=0){return new Vt(((o-h)*c.scale-c.x)*Jt,(u*c.scale-c.y)*Jt)}const vve=k(new Float32Array(16));class Ev{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,u){return{x:0,y:0,z:0}}unproject(o,u){return new Re(0,0)}projectTilePoint(o,u,h){return{x:o,y:u,z:0}}locationPoint(o,u,h,g=!0){return o._coordinatePoint(o.locationCoordinate(u,h),g)}pixelsPerMeter(o,u){return ft(1,o)*u}pixelSpaceConversion(o,u,h){return 1}farthestPixelDistance(o){return $H(o,o.pixelsPerMeter)}pointCoordinate(o,u,h,g){const b=o.horizonLineFromTop(!1),w=new Vt(u,Math.max(b,h));return o.rayIntersectionCoordinate(o.pointRayIntersection(w,g))}pointCoordinate3D(o,u,h){const g=new Vt(u,h);if(o.elevation)return o.elevation.pointCoordinate(g);{const b=this.pointCoordinate(o,g.x,g.y,0);return[b.x,b.y,b.z]}}isPointAboveHorizon(o,u){if(o.elevation&&o.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(o,u.x,u.y);const h=o.horizonLineFromTop();return u.y<h}createInversionMatrix(o,u){return vve}createTileMatrix(o,u,h){let g,b,w;const A=h.canonical,D=k(new Float64Array(16));if(this.isReprojectedInTileSpace){const P=rE(A,this);g=1,b=P.x+h.wrap*P.scale,w=P.y,ie(D,D,[g/P.scale,g/P.scale,o.pixelsPerMeter/u])}else g=u/o.zoomScale(A.z),b=(A.x+Math.pow(2,A.z)*h.wrap)*g,w=A.y*g;return J(D,D,[b,w,0]),ie(D,D,[g/Jt,g/Jt,1]),D}upVector(o,u,h){return[0,0,1]}upVectorScale(o,u,h){return{metersToTile:1}}}class bve extends Ev{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[u,h]=this.parallels=o.parallels||[29.5,45.5],g=Math.sin(Ar(u));this.n=(g+Math.sin(Ar(h)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(o,u){const{n:h,c:g,r0:b}=this,w=Ar(o-this.center[0]),A=Ar(u),D=Math.sqrt(g-2*h*Math.sin(A))/h;return{x:D*Math.sin(w*h),y:D*Math.cos(w*h)-b,z:0}}unproject(o,u){const{n:h,c:g,r0:b}=this,w=b+u;let A=Math.atan2(o,Math.abs(w))*Math.sign(w);w*h<0&&(A-=Math.PI*Math.sign(o)*Math.sign(w));const D=Ar(this.center[0])*h;A=_t(A,-Math.PI-D,Math.PI-D);const P=ze(ut(A/h)+this.center[0],-180,180),B=Math.asin(ze((g-(o*o+w*w)*h*h)/(2*h),-1,1)),U=ze(ut(B),-85.051129,et);return new Re(P,U)}}const iE=1.340264,aE=-.081106,oE=893e-6,sE=.003796,BC=Math.sqrt(3)/2;class xve extends Ev{project(o,u){u=u/180*Math.PI,o=o/180*Math.PI;const h=Math.asin(BC*Math.sin(u)),g=h*h,b=g*g*g;return{x:.5*(o*Math.cos(h)/(BC*(iE+3*aE*g+b*(7*oE+9*sE*g)))/Math.PI+.5),y:1-.5*(h*(iE+aE*g+b*(oE+sE*g))/Math.PI+1),z:0}}unproject(o,u){o=(2*o-.5)*Math.PI;let h=u=(2*(1-u)-1)*Math.PI,g=h*h,b=g*g*g;for(let B,U,$,G=0;G<12&&(U=h*(iE+aE*g+b*(oE+sE*g))-u,$=iE+3*aE*g+b*(7*oE+9*sE*g),B=U/$,h=ze(h-B,-Math.PI/3,Math.PI/3),g=h*h,b=g*g*g,!(Math.abs(B)<1e-12));++G);const w=BC*o*(iE+3*aE*g+b*(7*oE+9*sE*g))/Math.cos(h),A=Math.asin(Math.sin(h)/BC),D=ze(180*w/Math.PI,-180,180),P=ze(180*A/Math.PI,-85.051129,et);return new Re(D,P)}}class wve extends Ev{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,u){return{x:.5+o/360,y:.5-u/360,z:0}}unproject(o,u){const h=360*(o-.5),g=ze(360*(.5-u),-85.051129,et);return new Re(h,g)}}const $1=Math.PI/2;function jC(c){return Math.tan(($1+c)/2)}class Sve extends Ev{constructor(o){super(o),this.center=o.center||[0,30];const[u,h]=this.parallels=o.parallels||[30,30];let g=Ar(u),b=Ar(h);this.southernCenter=g+b<0,this.southernCenter&&(g=-g,b=-b);const w=Math.cos(g),A=jC(g);this.n=g===b?Math.sin(g):Math.log(w/Math.cos(b))/Math.log(jC(b)/A),this.f=w*Math.pow(jC(g),this.n)/this.n}project(o,u){u=Ar(u),this.southernCenter&&(u=-u),o=Ar(o-this.center[0]);const h=1e-6,{n:g,f:b}=this;b>0?u<-$1+h&&(u=-$1+h):u>$1-h&&(u=$1-h);const w=b/Math.pow(jC(u),g);let A=w*Math.sin(g*o),D=b-w*Math.cos(g*o);return A=.5*(A/Math.PI+.5),D=.5*(D/Math.PI+.5),{x:A,y:this.southernCenter?D:1-D,z:0}}unproject(o,u){o=(2*o-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:h,f:g}=this,b=g-u,w=Math.sign(b),A=Math.sign(h)*Math.sqrt(o*o+b*b);let D=Math.atan2(o,Math.abs(b))*w;b*h<0&&(D-=Math.PI*Math.sign(o)*w);const P=ze(ut(D/h)+this.center[0],-180,180),B=ze(ut(2*Math.atan(Math.pow(g/A,1/h))-$1),-85.051129,et);return new Re(P,this.southernCenter?-B:B)}}class qH extends Ev{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,u){return{x:st(o),y:dt(u),z:0}}unproject(o,u){const h=wt(o),g=It(u);return new Re(h,g)}}const HH=Ar(et);class Tve extends Ev{project(o,u){const h=(u=Ar(u))*u,g=h*h;return{x:.5*((o=Ar(o))*(.8707-.131979*h+g*(g*(.003971*h-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+h*(.015085+g*(.028874*h-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(o,u){o=(2*o-.5)*Math.PI;let h=u=(2*(1-u)-1)*Math.PI,g=25,b=0,w=h*h;do{w=h*h;const P=w*w;b=(h*(1.007226+w*(.015085+P*(.028874*w-.044475-.005916*P)))-u)/(1.007226+w*(.045255+P*(.259866*w-.311325-.005916*11*P))),h=ze(h-b,-HH,HH)}while(Math.abs(b)>1e-6&&--g>0);w=h*h;const A=ze(ut(o/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),D=ut(h);return new Re(A,D)}}const GH=Ar(et);class Eve extends Ev{project(o,u){u=Ar(u),o=Ar(o);const h=Math.cos(u),g=2/Math.PI,b=Math.acos(h*Math.cos(o/2)),w=Math.sin(b)/b,A=.5*(o*g+2*h*Math.sin(o/2)/w)||0,D=.5*(u+Math.sin(u)/w)||0;return{x:.5*(A/Math.PI+.5),y:1-.5*(D/Math.PI+1),z:0}}unproject(o,u){let h=o=(2*o-.5)*Math.PI,g=u=(2*(1-u)-1)*Math.PI,b=25;const w=1e-6;let A=0,D=0;do{const P=Math.cos(g),B=Math.sin(g),U=2*B*P,$=B*B,G=P*P,Z=Math.cos(h/2),se=Math.sin(h/2),fe=2*Z*se,ue=se*se,pe=1-G*Z*Z,ve=pe?1/pe:0,Se=pe?Math.acos(P*Z)*Math.sqrt(1/pe):0,ke=.5*(2*Se*P*se+2*h/Math.PI)-o,Ie=.5*(Se*B+g)-u,Ve=.5*ve*(G*ue+Se*P*Z*$)+1/Math.PI,qe=ve*(fe*U/4-Se*B*se),Ue=.125*ve*(U*se-Se*B*G*fe),Ze=.5*ve*($*Z+Se*ue*P)+.5,rt=qe*Ue-Ze*Ve;A=(Ie*qe-ke*Ze)/rt,D=(ke*Ue-Ie*Ve)/rt,h=ze(h-A,-Math.PI,Math.PI),g=ze(g-D,-GH,GH)}while((Math.abs(A)>w||Math.abs(D)>w)&&--b>0);return new Re(ut(h),ut(g))}}class YH extends Ev{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Ar(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,u){const{scale:h,cosPhi:g}=this;return{x:Ar(o)*g*h+.5,y:-Math.sin(Ar(u))/g*h+.5,z:0}}unproject(o,u){const{scale:h,cosPhi:g}=this,b=-(u-.5)/h,w=ze(ut((o-.5)/h)/g,-180,180),A=Math.asin(ze(b*g,-1,1)),D=ze(ut(A),-85.051129,et);return new Re(w,D)}}class Ave extends qH{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,u,h){const g=rb(o,u,h);return Ct(g,g,ib(Ff(h))),{x:g[0],y:g[1],z:g[2]}}locationPoint(o,u,h){const g=$e(u.lat,u.lng),b=xe([],g),w=h?o._centerAltitude+h:o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(u),o._centerAltitude):o._centerAltitude;jt(g,g,b,ft(1,0)*Jt*w);const A=k(new Float64Array(16));return K(A,o.pixelMatrix,o.globeMatrix),Ct(g,g,A),new Vt(g[0],g[1])}pixelsPerMeter(o,u){return ft(1,0)*u}pixelSpaceConversion(o,u,h){const g=ft(1,o)*u,b=Vn(ft(1,45)*u,g,h);return this.pixelsPerMeter(o,u)/b}createTileMatrix(o,u,h){const g=Oi(Ff(h.canonical));return K(new Float64Array(16),o.globeMatrix,g)}createInversionMatrix(o,u){const{center:h}=o,g=ib(Ff(u));return W(g,g,Ar(h.lng)),Q(g,g,Ar(h.lat)),ie(g,g,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(o,u,h,g){return xT(o,u,h,!0)||new tn(0,0)}pointCoordinate3D(o,u,h){const g=this.pointCoordinate(o,u,h,0);return[g.x,g.y,g.z]}isPointAboveHorizon(o,u){return!xT(o,u.x,u.y,!1)}farthestPixelDistance(o){const u=(function(g,b){const w=g.cameraToCenterDistance,A=g._centerAltitude*b,D=g._camera,P=g._camera.forward(),B=at([],Pe([],P,-w),[0,0,A]),U=g.worldSize/(2*Math.PI),$=[0,0,-U],G=g.width/g.height,Z=Math.tan(g.fovAboveCenter),se=Pe([],D.up(),Z),fe=Pe([],D.right(),Z*G),ue=xe([],at([],at([],P,se),fe)),pe=[];let ve;if(new yi(B,ue).closestPointOnSphere($,U,pe)){const Se=at([],pe,$),ke=or([],Se,B);ve=Math.cos(g.fovAboveCenter)*Be(ke)}else{const Se=or([],B,$),ke=or([],$,B);xe(ke,ke);const Ie=Be(Se)-U;ve=Math.sqrt(Ie*(Ie+2*U));const Ve=Math.acos(ve/(U+Ie))-Math.acos(Ye(P,ke));ve*=Math.cos(Ve)}return 1.01*ve})(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),h=Qd(o.zoom);if(h>0){const g=$H(o,ft(1,o.center.lat)*o.worldSize),b=o.worldSize/(2*Math.PI),w=Math.max(o.width,o.height)/o.worldSize*Math.PI;return Vn(u,g+b*(1-Math.cos(w)),Math.pow(h,10))}return u}upVector(o,u,h){return rb(u,h,o,1)}upVectorScale(o){return{metersToTile:tb(Am(Ff(o)))}}}function WH(c){const o=c.parallels,u=!!o&&Math.abs(o[0]+o[1])<.01;switch(c.name){case"mercator":return new qH(c);case"equirectangular":return new wve(c);case"naturalEarth":return new Tve(c);case"equalEarth":return new xve(c);case"winkelTripel":return new Eve(c);case"albers":return u?new YH(c):new bve(c);case"lambertConformalConic":return u?new YH(c):new Sve(c);case"globe":return new Ave(c)}throw new Error(`Invalid projection name: ${c.name}`)}const Ove=yr.types,Cve=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lE(c,o,u,h,g,b,w,A,D,P,B,U,$){const G=A?Math.min(Ab,Math.round(A[0])):0,Z=A?Math.min(Ab,Math.round(A[1])):0;c.emplaceBack(o,u,Math.round(32*h),Math.round(32*g),b,w,(G<<1)+(D?1:0),0+(Z<<1),16*P,16*B,256*U,256*$)}function uE(c,o,u){c.emplaceBack(o,u)}function cE(c,o,u,h,g,b,w){c.emplaceBack(o,u,h,g,b,w)}const UC=(c,o,u,h)=>{for(let g=0;g<o;g++)c.emplaceBack(u[0],u[1],u[2],h[0],h[1],h[2])};function V1(c,o,u,h,g){c.emplaceBack(o,u,h,g),c.emplaceBack(o,u,h,g),c.emplaceBack(o,u,h,g),c.emplaceBack(o,u,h,g)}function Mve(c){for(const o of c.sections)if(Uc(o.text))return!0;return!1}class DL{constructor(o){this.layoutVertexArray=new qd,this.indexArray=new Xa,this.programConfigurations=o,this.segments=new Ii,this.dynamicLayoutVertexArray=new ec,this.opacityVertexArray=new ov,this.placedSymbolArray=new uy,this.iconTransitioningVertexArray=new Wl,this.globeExtVertexArray=new av,this.zOffsetVertexArray=new To,this.orientationVertexArray=new pm,this.symbolInstanceIndices=[]}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}getSymbolVertexData(o,u){const h=[],g=this.layoutVertexArray.uint16;for(let b=0;b<u;++b){const w=12*(o+b);h.push(...g.slice(w,w+12))}return h}updateSymbolVertexData(o,u,h,g,b,w,A,D,P,B,U,$,G){const Z=this.layoutVertexArray.uint16,se=12*o;Z[se]=u,Z[se+1]=h,Z[se+2]=g,Z[se+3]=b,Z[se+4]=w,Z[se+5]=A,Z[se+6]=D,Z[se+7]=P,Z[se+8]=B,Z[se+9]=U,Z[se+10]=$,Z[se+11]=G}upload(o,u,h,g,b,w){this.isEmpty()||(h&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,I_e.members,!!w),this.indexBuffer=o.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,R_e.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,Cve,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=o.createVertexBuffer(this.iconTransitioningVertexArray,z_e.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,P_e.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||b)&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,k_e.members,!0)),!this.orientationVertexBuffer&&this.orientationVertexArray&&this.orientationVertexArray.length>0&&(this.orientationVertexBuffer=o.createVertexBuffer(this.orientationVertexArray,L_e.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.orientationVertexBuffer&&this.orientationVertexBuffer.destroy())}}Kt(DL,"SymbolBuffers");class IL{constructor(o,u,h){this.layoutVertexArray=new o,this.layoutAttributes=u,this.indexArray=new h,this.segments=new Ii,this.collisionVertexArray=new oy,this.collisionVertexArrayExt=new ec}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,N_e.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,F_e.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Kt(IL,"CollisionBuffers");class $C{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(w=>w.fqid),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=k([]),this.placementViewportMatrix=k([]);const u=this.layers[0]._unevaluatedLayout._values;this.worldview=o.worldview,this.localizable=o.localizable,this.textSizeData=Eb(this.zoom,u["text-size"],this.worldview,o.availableImages),this.iconSizeData=Eb(this.zoom,u["icon-size"],this.worldview,o.availableImages);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),b=h.get("symbol-z-order");this.lut=o.lut,this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(w=>sc[w]),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=o.sourceID,this.projection=o.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0,this.hasAnySecondaryIcon=!1,this.hasAppearances=null,this.lastActiveApperance=null,this.featureToAppearanceIndex={}}hasAnyAppearanceProperty(o){const u=this.layers[0].getAppearances();if(!u||u.length===0)return!1;const h=Array.isArray(o)?o:[o];return u.some(g=>h.some(b=>g.getProperty(b)!=null))}createArrays(){this.text=new DL(new H(this.layers,{zoom:this.zoom,lut:this.lut},o=>o.startsWith("text")||o.startsWith("symbol"))),this.icon=new DL(new H(this.layers,{zoom:this.zoom,lut:this.lut},o=>o.startsWith("icon")||o.startsWith("symbol"))),this.glyphOffsetArray=new cy,this.lineVertexArray=new m1,this.symbolInstances=new ja}calculateGlyphDependencies(o,u,h,g,b){for(const w of o){const A=w.codePointAt(0);if(A===void 0)break;if(u[A]=!0,g&&b&&A<=65535){const D=QT[w];D&&(u[D.charCodeAt(0)]=!0)}}}calculateEffectiveAppearanceIconSize(o,u,h,g,b,w,A){if(!o.hasProperty("icon-size"))return A*w;let D=1;const P=o.getUnevaluatedProperties()._values["icon-size"],B=Eb(this.zoom,P,this.worldview,b),U=B1(B,u);if(B.kind!=="constant"&&B.kind!=="camera"||(D=U.uSize),B.kind==="composite"){const{minZoom:$,maxZoom:G}=B,Z=P.possiblyEvaluate(new Jr($,{worldview:this.worldview}),g),se=P.possiblyEvaluate(new Jr(G,{worldview:this.worldview}),g),fe=Z.evaluate(h,{},g,b);D=fe+(se.evaluate(h,{},g,b)-fe)*U.uSizeT}return B.kind==="source"&&(D=P.possiblyEvaluate(new Jr(this.zoom,{worldview:this.worldview}),g).evaluate(h,{},g,b)),D*w}updateFootprints(o,u){}updateReplacement(o,u){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const h=u.getReplacementRegionsForTile(o.toUnwrapped(),!0);return!m(this.activeReplacements,h)&&(this.activeReplacements=h,!0)}getResolvedImageFromTokens(o){return typeof o=="string"?nl.build(o):o}populate(o,u,h,g){const b=this.layers[0],w=b.layout,A=this.projection.name==="globe",D=w.get("text-font"),P=w.get("text-field"),B=w.get("icon-image"),[U,$]=w.get("icon-size-scale-range"),G=ze(u.scaleFactor||1,U,$),Z=(P.value.kind!=="constant"||P.value.value instanceof ss&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(D.value.kind!=="constant"||D.value.value.length>0),se=B.value.kind!=="constant"||!!B.value.value||Object.keys(B.parameters).length>0,fe=this.hasAnyAppearanceProperty("icon-image"),ue=w.get("symbol-sort-key");if(this.features=[],this.appearanceFeatureData=[],!Z&&!se&&!fe)return;const pe=u.iconDependencies,ve=u.glyphDependencies,Se=u.availableImages,ke=new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),Ie=Ve=>{const qe=Ve.id.toString();pe.has(qe)?pe.get(qe).push(Ve):pe.set(qe,[Ve])};for(const Ve of o){const{feature:qe,id:Ue,index:Ze,sourceLayerIndex:rt}=Ve,Et=b._featureFilter.needGeometry,xt=Qn(qe,Et);if(!b._featureFilter.filter(ke,xt,h))continue;if(Et||(xt.geometry=Un(qe,h,g)),A&&qe.type!==1&&h.z<=5){const Nt=xt.geometry,Lt=.98078528056,fn=(pn,nn)=>Ye(rb(pn.x,pn.y,h,1),rb(nn.x,nn.y,h,1))<Lt;for(let pn=0;pn<Nt.length;pn++)Nt[pn]=yn(Nt[pn],fn)}let Tt,kt;if(Z){const Nt=b.getValueAndResolveTokens("text-field",xt,h,Se),Lt=ss.factory(Nt);Mve(Lt)&&(this.hasRTLText=!0),(!this.hasRTLText||Th()==="unavailable"||this.hasRTLText&&Ol.isParsed())&&(Tt=j_e(Lt,b,xt))}if(se){const Nt=b.getValueAndResolveTokens("icon-image",xt,h,Se);kt=this.getResolvedImageFromTokens(Nt)}const Pt=this.layers[0];let Rt=!1;if(!kt&&fe){const Nt=Pt.getAppearances();for(const Lt of Nt)if(Lt.getProperty("icon-image")){const fn=Pt.getAppearanceValueAndResolveTokens(Lt,"icon-image",xt,h,Se);if(fn){kt=this.getResolvedImageFromTokens(fn),Rt=!0;break}}}if(!Tt&&!kt)continue;const vt=this.sortFeaturesByKey?ue.evaluate(xt,{},h):void 0,zt={id:Ue,text:Tt,icon:kt,index:Ze,sourceLayerIndex:rt,geometry:xt.geometry,properties:qe.properties,type:Ove[qe.type],sortKey:vt};if(this.features.push(zt),this.featureToAppearanceIndex[Ze]=this.appearanceFeatureData.length,this.appearanceFeatureData.push({id:Ue,properties:qe.properties,usesAppearanceIconAsPlaceholder:Rt,isUsingAppearanceIconVertexData:!1,isUsingAppearanceTextVertexData:!1,layoutBasedIconVertexData:[],layoutBasedTextVertexData:[],activeAppearance:null}),kt){const Nt=Pt._unevaluatedLayout._values,{iconPrimary:Lt,iconSecondary:fn}=nE(kt,this.iconSizeData,Nt["icon-size"],h,this.zoom,zt,this.pixelRatio,G,this.worldview,Se);Ie(Lt),fn&&(this.hasAnySecondaryIcon=!0,Ie(fn))}const Mt=Pt.getAppearances();if(Mt.length!==0&&Mt.forEach(Nt=>{if(!Nt.getProperty("icon-image"))return;const Lt=this.getCombinedIconPrimary(Nt,Pt,xt,h,Se,zt,G);Lt&&Ie(Lt)}),Tt){const Nt=D.evaluate(xt,{},h).join(","),Lt=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(sc.vertical)>=0;for(const fn of Tt.sections)if(fn.image){const pn=fn.image.getPrimary().scaleSelf(this.pixelRatio),nn=pn.id.toString(),an=pe.get(nn)||[];an.push(pn),pe.set(nn,an)}else{const pn=Z_(Tt.toString()),nn=fn.fontStack||Nt,an=ve[nn]=ve[nn]||{};this.calculateGlyphDependencies(fn.text,an,Lt,this.allowVerticalPlacement,pn)}}}if(w.get("symbol-placement")==="line"&&(this.features=(function(Ve){const qe={},Ue={},Ze=[];let rt=0;function Et(Pt){Ze.push(Ve[Pt]),rt++}function xt(Pt,Rt,vt){const zt=Ue[Pt];return delete Ue[Pt],Ue[Rt]=zt,Ze[zt].geometry[0].pop(),Ze[zt].geometry[0]=Ze[zt].geometry[0].concat(vt[0]),zt}function Tt(Pt,Rt,vt){const zt=qe[Rt];return delete qe[Rt],qe[Pt]=zt,Ze[zt].geometry[0].shift(),Ze[zt].geometry[0]=vt[0].concat(Ze[zt].geometry[0]),zt}function kt(Pt,Rt,vt){const zt=vt?Rt[0][Rt[0].length-1]:Rt[0][0];return`${Pt}:${zt.x}:${zt.y}`}for(let Pt=0;Pt<Ve.length;Pt++){const Rt=Ve[Pt],vt=Rt.geometry,zt=Rt.text?Rt.text.toString():null;if(!zt){Et(Pt);continue}const Mt=kt(zt,vt),Nt=kt(zt,vt,!0);if(Mt in Ue&&Nt in qe&&Ue[Mt]!==qe[Nt]){const Lt=Tt(Mt,Nt,vt),fn=xt(Mt,Nt,Ze[Lt].geometry);delete qe[Mt],delete Ue[Nt],Ue[kt(zt,Ze[fn].geometry,!0)]=fn,Ze[Lt].geometry=null}else Mt in Ue?xt(Mt,Nt,vt):Nt in qe?Tt(Mt,Nt,vt):(Et(Pt),qe[Mt]=rt-1,Ue[Nt]=rt-1)}return Ze.filter(Pt=>Pt.geometry)})(this.features)),w.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",u.elevationFeatures){!this.elevationFeatures&&u.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const Ve of u.elevationFeatures)this.elevationFeatureIdToIndex.set(Ve.id,this.elevationFeatures.length),this.elevationFeatures.push(Ve)}}else w.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((Ve,qe)=>Ve.sortKey-qe.sortKey)}getCombinedIconPrimary(o,u,h,g,b,w,A){let D,P;const B=o.getUnevaluatedProperties();if(B._values["icon-image"].value!==void 0){const U=u.getAppearanceValueAndResolveTokens(o,"icon-image",h,g,b);D=this.getResolvedImageFromTokens(U)}else{const U=u.getValueAndResolveTokens("icon-image",h,g,b);D=this.getResolvedImageFromTokens(U)}if(D){const U=o.hasProperty("icon-size")?B._values["icon-size"]:u._unevaluatedLayout._values["icon-size"];P=nE(D,Eb(this.zoom,U,this.worldview,b),U,g,this.zoom,w,this.pixelRatio,A,this.worldview,b).iconPrimary}return P}updateSymbolInstanceIconVertices(o,u,h,g,b,w,A,D,P,B,U,$,G,Z){if(o.placedIconSymbolIndex<0)return{vertexOffsetDelta:0,hasChanges:!1};if(u.activeAppearance===h)return{vertexOffsetDelta:o.numIconVertices,hasChanges:!1};if(h){const se=this.getCombinedIconPrimary(h,P,g,w,A,{sortKey:void 0,text:void 0,icon:null,index:o.featureIndex,sourceLayerIndex:o.featureIndex,geometry:[],properties:u.properties,type:"Point",id:u.id},B);if(!se)return{vertexOffsetDelta:0,hasChanges:!1};const fe=se.toString(),ue=this.iconAtlasPositions&&this.iconAtlasPositions.get(fe);if(ue){const{appearanceIconOffset:pe,appearanceIconRotate:ve}=LH(h,P,g,w,$,Z,G,B);let Se=PC(ue,void 0,pe,P.layout.get("icon-anchor").evaluate(g,U,w));const ke=ue.sdf,Ie=P.layout.get("icon-text-fit").constantOr("none");Ie!=="none"&&u.textShaping&&u.iconTextFitPadding&&u.fontScale&&(Se=bL(Se,u.textShaping,Ie,u.iconTextFitPadding,pe,u.fontScale));const Ve=this.calculateEffectiveAppearanceIconSize(h,D.zoom,g,w,A,B,G),qe=0,Ue=1+(Math.min(Ab,Math.round(Ve*vy))<<1),Ze=TL(Se,ve,ke,Ie!=="none",B);u.isUsingAppearanceIconVertexData||(u.isUsingAppearanceIconVertexData=!0,u.layoutBasedIconVertexData=this.icon.getSymbolVertexData(b,o.numIconVertices));let rt=b;for(let xt=0;xt<Ze.length;++xt){const Tt=Ze[xt],kt=u.layoutBasedIconVertexData[0]||o.tileAnchorX,Pt=u.layoutBasedIconVertexData[1]||o.tileAnchorY,Rt=16*Tt.pixelOffsetTL.x,vt=16*Tt.pixelOffsetTL.y,zt=16*Tt.pixelOffsetBR.x,Mt=16*Tt.pixelOffsetBR.y,Nt=16*Tt.minFontScaleX,Lt=16*Tt.minFontScaleY;this.icon.updateSymbolVertexData(rt,kt,Pt,Math.round(32*Tt.tl.x),Math.round(32*Tt.tl.y),Tt.texPrimary.x,Tt.texPrimary.y,qe,Ue,Rt,vt,Nt,Lt),this.icon.updateSymbolVertexData(rt+1,kt,Pt,Math.round(32*Tt.tr.x),Math.round(32*Tt.tr.y),Tt.texPrimary.x+Tt.texPrimary.w,Tt.texPrimary.y,qe,Ue,zt,vt,Nt,Lt),this.icon.updateSymbolVertexData(rt+2,kt,Pt,Math.round(32*Tt.bl.x),Math.round(32*Tt.bl.y),Tt.texPrimary.x,Tt.texPrimary.y+Tt.texPrimary.h,qe,Ue,Rt,Mt,Nt,Lt),this.icon.updateSymbolVertexData(rt+3,kt,Pt,Math.round(32*Tt.br.x),Math.round(32*Tt.br.y),Tt.texPrimary.x+Tt.texPrimary.w,Tt.texPrimary.y+Tt.texPrimary.h,qe,Ue,zt,Mt,Nt,Lt),rt+=4}const Et=o.numIconVertices-4*Ze.length;for(let xt=0;xt<Et;++xt)this.icon.updateSymbolVertexData(rt+xt,0,0,0,0,0,0,0,0,0,0,0,0);return{vertexOffsetDelta:o.numIconVertices,hasChanges:!0}}}else if(u.usesAppearanceIconAsPlaceholder){if(this.layers[0].appearances&&this.layers[0].appearances.length>0)return this.icon.updateSymbolVertexData(b,0,0,0,0,0,0,0,0,0,0,0,0),this.icon.updateSymbolVertexData(b+1,0,0,0,0,0,0,0,0,0,0,0,0),this.icon.updateSymbolVertexData(b+2,0,0,0,0,0,0,0,0,0,0,0,0),this.icon.updateSymbolVertexData(b+3,0,0,0,0,0,0,0,0,0,0,0,0),{vertexOffsetDelta:o.numIconVertices,hasChanges:!0}}else if(u.isUsingAppearanceIconVertexData){const fe=u.layoutBasedIconVertexData.length/12;for(let ue=0;ue<fe;++ue){const pe=ue*12;this.icon.updateSymbolVertexData(b+ue,u.layoutBasedIconVertexData[pe+0],u.layoutBasedIconVertexData[pe+1],u.layoutBasedIconVertexData[pe+2],u.layoutBasedIconVertexData[pe+3],u.layoutBasedIconVertexData[pe+4],u.layoutBasedIconVertexData[pe+5],u.layoutBasedIconVertexData[pe+6],u.layoutBasedIconVertexData[pe+7],u.layoutBasedIconVertexData[pe+8],u.layoutBasedIconVertexData[pe+9],u.layoutBasedIconVertexData[pe+10],u.layoutBasedIconVertexData[pe+11])}return u.isUsingAppearanceIconVertexData=!1,{vertexOffsetDelta:fe,hasChanges:!0}}return{vertexOffsetDelta:o.numIconVertices,hasChanges:!1}}updateSymbolInstanceTextVertices(o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe,ue,pe){const ve=o.numHorizontalGlyphVertices>0||o.numVerticalGlyphVertices>0;if(!ve)return{vertexOffsetDelta:ve?o.numHorizontalGlyphVertices+o.numVerticalGlyphVertices:0,hasChanges:!1};if(u.activeAppearance===h)return{vertexOffsetDelta:o.numHorizontalGlyphVertices+o.numVerticalGlyphVertices,hasChanges:!1};if(h&&u.textShaping){const{appearanceTextOffset:Se,appearanceTextRotate:ke,appearanceTextSize:Ie}=zH(h,A,g,w,U,G,$);u.fontScale=jH(Ie,u.textScaleFactor);const Ve=h.getUnevaluatedProperty("text-size");let qe=this.textSizeData,Ue=fe,Ze=ue;h.hasProperty("text-size")&&(qe=Eb(this.zoom,Ve,this.worldview,pe),Ue=this.textSizeData.kind==="composite"?this.textSizeData.minZoom:0,Ze=this.textSizeData.kind==="composite"?this.textSizeData.maxZoom:0);const rt=u.textShaping.bottom-U[1],Et=u.textShaping.left-U[0],xt=u.textShaping.right-U[0];u.textShaping.top=Se[1]+(u.textShaping.top-U[1]),u.textShaping.bottom=Se[1]+rt,u.textShaping.left=Se[0]+Et,u.textShaping.right=Se[0]+xt;const Tt=RH(0,u.textShaping,Se,A,!1,g,P,this.allowVerticalPlacement,ke),kt=Ie&&qe.kind==="composite"?Ve.possiblyEvaluate(new Jr(Ue,{}),w).evaluate(g,B,w):Z,Pt=Ie&&qe.kind==="composite"?Ve.possiblyEvaluate(new Jr(Ze,{}),w).evaluate(g,B,w):se,Rt=CL(h.name,qe,Ie,D,kt,Pt),vt=Array.isArray(Rt)?Rt[1]:Ie,zt=0,Mt=1+(Math.min(Ab,Math.round(vt*vy))<<1);u.isUsingAppearanceTextVertexData||(u.isUsingAppearanceTextVertexData=!0,u.layoutBasedTextVertexData=this.text.getSymbolVertexData(b,o.numHorizontalGlyphVertices+o.numVerticalGlyphVertices));for(let Nt=0;Nt<Tt.length&&Nt<(o.numHorizontalGlyphVertices+o.numVerticalGlyphVertices)/4;++Nt){const Lt=Tt[Nt],fn=Lt.glyphOffset[1],pn=o.tileAnchorX,nn=o.tileAnchorY,an=b+4*Nt;this.text.updateSymbolVertexData(an,pn,nn,Math.round(32*Lt.tl.x),Math.round(32*(fn+Lt.tl.y)),Lt.texPrimary.x,Lt.texPrimary.y,zt,Mt,Lt.pixelOffsetTL.x,Lt.pixelOffsetTL.y,Lt.minFontScaleX,Lt.minFontScaleY),this.text.updateSymbolVertexData(an+1,pn,nn,Math.round(32*Lt.tr.x),Math.round(32*(fn+Lt.tr.y)),Lt.texPrimary.x+Lt.texPrimary.w,Lt.texPrimary.y,zt,Mt,Lt.pixelOffsetBR.x,Lt.pixelOffsetTL.y,Lt.minFontScaleX,Lt.minFontScaleY),this.text.updateSymbolVertexData(an+2,pn,nn,Math.round(32*Lt.bl.x),Math.round(32*(fn+Lt.bl.y)),Lt.texPrimary.x,Lt.texPrimary.y+Lt.texPrimary.h,zt,Mt,Lt.pixelOffsetTL.x,Lt.pixelOffsetBR.y,Lt.minFontScaleX,Lt.minFontScaleY),this.text.updateSymbolVertexData(an+3,pn,nn,Math.round(32*Lt.br.x),Math.round(32*(fn+Lt.br.y)),Lt.texPrimary.x+Lt.texPrimary.w,Lt.texPrimary.y+Lt.texPrimary.h,zt,Mt,Lt.pixelOffsetBR.x,Lt.pixelOffsetBR.y,Lt.minFontScaleX,Lt.minFontScaleY)}return{vertexOffsetDelta:o.numHorizontalGlyphVertices+o.numVerticalGlyphVertices,hasChanges:!0}}if(u.isUsingAppearanceTextVertexData){const ke=u.layoutBasedTextVertexData.length/12;for(let Ie=0;Ie<ke;++Ie){const Ve=Ie*12;this.text.updateSymbolVertexData(b+Ie,u.layoutBasedTextVertexData[Ve+0],u.layoutBasedTextVertexData[Ve+1],u.layoutBasedTextVertexData[Ve+2],u.layoutBasedTextVertexData[Ve+3],u.layoutBasedTextVertexData[Ve+4],u.layoutBasedTextVertexData[Ve+5],u.layoutBasedTextVertexData[Ve+6],u.layoutBasedTextVertexData[Ve+7],u.layoutBasedTextVertexData[Ve+8],u.layoutBasedTextVertexData[Ve+9],u.layoutBasedTextVertexData[Ve+10],u.layoutBasedTextVertexData[Ve+11])}return u.isUsingAppearanceTextVertexData=!1,{vertexOffsetDelta:ke,hasChanges:!0}}return{vertexOffsetDelta:o.numHorizontalGlyphVertices+o.numVerticalGlyphVertices,hasChanges:!1}}update(o,u,h,g,b,w,A){this.text.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A,this.worldview),this.icon.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A,this.worldview)}updateRoadElevation(o){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let u=!1;const h=qt(o),g=1/h;let b=!1,w=!1;for(let A=0;A<this.symbolInstances.length;A++){const D=this.symbolInstances.get(A),P=Ee(1,0,0),B=Ee(0,1,0),{numHorizontalGlyphVertices:U,numVerticalGlyphVertices:$,numIconVertices:G,numVerticalIconVertices:Z}=D,se=U>0||$>0,fe=G>0,ue=this.elevationFeatures[D.elevationFeatureIndex];if(ue){const pe=new Vt(D.tileAnchorX,D.tileAnchorY),ve=.075+ue.pointElevation(pe);D.zOffset!==ve&&(u=!0,D.zOffset=ve),ve!==0&&(this.hasAnyZOffset=!0);const Se=ue.computeSlopeNormal(pe,g),ke=Aa($t(),Ee(0,0,1),Se);gn(P,P,ke),gn(B,B,ke),P[2]*=h,B[2]*=h,P[0]===1&&P[1]===0&&P[2]===0&&B[0]===0&&B[1]===1&&B[2]===0||(b=b||se,w=w||fe)}if(se&&(UC(this.text.orientationVertexArray,U,P,B),UC(this.text.orientationVertexArray,$,P,B)),fe){const{placedIconSymbolIndex:pe,verticalPlacedIconSymbolIndex:ve}=D;pe>=0&&UC(this.icon.orientationVertexArray,G,P,B),ve>=0&&UC(this.icon.orientationVertexArray,Z,P,B)}}b||(this.text.orientationVertexArray=void 0),w||(this.icon.orientationVertexArray=void 0),u&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const o=(b,w,A)=>{h+=w,h>b.length&&b.resize(h);for(let D=-w;D<0;D++)b.emplace(D+h,A)},u=(b,w,A)=>{g+=w,g>b.length&&b.resize(g);for(let D=-w;D<0;D++)b.emplace(D+g,A)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let h=0,g=0;for(let b=0;b<this.symbolInstances.length;b++){const w=this.symbolInstances.get(b),{numHorizontalGlyphVertices:A,numVerticalGlyphVertices:D,numIconVertices:P}=w,B=w.zOffset,U=P>0;if((A>0||D>0)&&(o(this.text.zOffsetVertexArray,A,B),o(this.text.zOffsetVertexArray,D,B)),U){const{placedIconSymbolIndex:$,verticalPlacedIconSymbolIndex:G}=w;$>=0&&u(this.icon.zOffsetVertexArray,P,B),G>=0&&u(this.icon.zOffsetVertexArray,w.numVerticalIconVertices,B)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o,u,h,g,b){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload,this.hasAppearances),this.hasAppearances===null&&(this.hasAppearances=this.layers.some(w=>w.appearances&&w.appearances.length>0)),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload,this.hasAppearances),this.uploaded=!0}updateAppearances(o,u,h,g,b){if(!(o&&u&&h&&this.appearanceFeatureData))return!1;const w=this.icon.layoutVertexArray&&this.icon.layoutVertexArray.length>0&&this.icon.layoutVertexArray.arrayBuffer,A=this.text.layoutVertexArray&&this.text.layoutVertexArray.length>0&&this.text.layoutVertexArray.arrayBuffer;if(!w&&!A)return!1;const D=this.layers[0],P=D.layout;let B=1,U=0,$=!1;if(w){const[ue,pe]=P.get("icon-size-scale-range");B=ze(1,ue,pe)}let G=1,Z=0,se=!1;if(A){const[ue,pe]=P.get("text-size-scale-range");G=ze(1,ue,pe)}const fe=new Map;if(b&&h)for(const ue of h){const pe=b.getImage(ue,D.scope);if(pe){const ve=new Bo(ue.toString());fe.set(ve.toString(),pe)}}for(let ue=0;ue<this.symbolInstances.length;ue++){const pe=this.symbolInstances.get(ue),ve=this.featureToAppearanceIndex[pe.featureIndex],Se=ve!==void 0?this.appearanceFeatureData[ve]:void 0;if(!Se)continue;const ke=Se.id,Ie=u&&ke!==void 0?u[String(ke)]:void 0,Ve={type:"Point",id:Se.id,properties:Se.properties,geometry:[]},qe=D.appearances&&D.appearances.find(Ue=>Ue.isActive({globals:g,feature:Ve,canonical:o,featureState:Ie}));if(A){const Ue=P.get("text-size"),Ze=P.get("text-offset").evaluate(Ve,Ie,o),rt=Ue.evaluate(Ve,Ie,o),Et=P.get("text-rotate").evaluate(Ve,Ie,o),xt=this.textSizeData.kind==="composite"?this.textSizeData.minZoom:0,Tt=this.textSizeData.kind==="composite"?this.textSizeData.maxZoom:0,kt=Ue.evaluate(Ve,{zoom:xt},o),Pt=Ue.evaluate(Ve,{zoom:Tt},o),Rt=this.updateSymbolInstanceTextVertices(pe,Se,qe,Ve,Z,o,D,G,fe,Ie,Ze,rt,Et,kt,Pt,xt,Tt,h);Z+=Rt.vertexOffsetDelta,se=se||Rt.hasChanges}if(w){const Ue=P.get("icon-offset").evaluate(Ve,Ie,o),Ze=P.get("icon-size").evaluate(Ve,Ie,o,h),rt=P.get("icon-rotate").evaluate(Ve,Ie,o),Et=this.updateSymbolInstanceIconVertices(pe,Se,qe,Ve,U,o,h,g,D,B,Ie,Ue,Ze,rt);U+=Et.vertexOffsetDelta,$=$||Et.hasChanges}Se.activeAppearance=qe}return $&&this.icon.layoutVertexBuffer&&this.icon.layoutVertexArray.arrayBuffer!==null&&this.icon.layoutVertexArray.length===this.icon.layoutVertexBuffer.length&&this.icon.layoutVertexBuffer.updateData(this.icon.layoutVertexArray),se&&this.text.layoutVertexBuffer&&this.text.layoutVertexArray.arrayBuffer!==null&&this.text.layoutVertexArray.length===this.text.layoutVertexBuffer.length&&this.text.layoutVertexBuffer.updateData(this.text.layoutVertexArray),$||se}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=WH(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,u){const h=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:g,y:b}of u)this.lineVertexArray.emplaceBack(g,b);return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se,fe,ue,pe){const ve=o.indexArray,Se=o.layoutVertexArray,ke=o.globeExtVertexArray,Ie=o.segments.prepareSegment(4*pe,Se,ve,this.canOverlap?w.sortKey:void 0),Ve=this.glyphOffsetArray.length,qe=Ie.vertexLength,Ue=this.allowVerticalPlacement&&A===sc.vertical?Math.PI/2:0,Ze=w.text&&w.text.sections;for(let xt=0;xt<u.length;xt++){const{tl:Tt,tr:kt,bl:Pt,br:Rt,texPrimary:vt,texSecondary:zt,pixelOffsetTL:Mt,pixelOffsetBR:Nt,minFontScaleX:Lt,minFontScaleY:fn,glyphOffset:pn,isSDF:nn,sectionIndex:an}=u[xt],kn=Ie.vertexLength,Cn=pn[1];if(lE(Se,P.x,P.y,Tt.x,Cn+Tt.y,vt.x,vt.y,h,nn,Mt.x,Mt.y,Lt,fn),lE(Se,P.x,P.y,kt.x,Cn+kt.y,vt.x+vt.w,vt.y,h,nn,Nt.x,Mt.y,Lt,fn),lE(Se,P.x,P.y,Pt.x,Cn+Pt.y,vt.x,vt.y+vt.h,h,nn,Mt.x,Nt.y,Lt,fn),lE(Se,P.x,P.y,Rt.x,Cn+Rt.y,vt.x+vt.w,vt.y+vt.h,h,nn,Nt.x,Nt.y,Lt,fn),D){const{x:cn,y:Wn,z:vr}=D.anchor,[Zr,pr,di]=D.up;cE(ke,cn,Wn,vr,Zr,pr,di),cE(ke,cn,Wn,vr,Zr,pr,di),cE(ke,cn,Wn,vr,Zr,pr,di),cE(ke,cn,Wn,vr,Zr,pr,di),V1(o.dynamicLayoutVertexArray,cn,Wn,vr,Ue)}else V1(o.dynamicLayoutVertexArray,P.x,P.y,P.z,Ue);if(fe){const cn=zt||vt;uE(o.iconTransitioningVertexArray,cn.x,cn.y),uE(o.iconTransitioningVertexArray,cn.x+cn.w,cn.y),uE(o.iconTransitioningVertexArray,cn.x,cn.y+cn.h),uE(o.iconTransitioningVertexArray,cn.x+cn.w,cn.y+cn.h)}ve.emplaceBack(kn,kn+1,kn+2),ve.emplaceBack(kn+1,kn+2,kn+3),Ie.vertexLength+=4,Ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(pn[0]),xt!==u.length-1&&an===u[xt+1].sectionIndex||o.programConfigurations.populatePaintArrays(Se.length,w,w.index,{},G,Z,se,Ze&&Ze[an],this.worldview)}const rt=pe-u.length;rt!==0&&this._addNullVertices(rt,Se,h,D,ke,o,fe,Ie,ve);const Et=D?D.anchor:P;o.placedSymbolArray.emplaceBack(Et.x,Et.y,Et.z,P.x,P.y,Ve,this.glyphOffsetArray.length-Ve,qe,B,U,P.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],A,0,0,0,$,0),o.symbolInstanceIndices.push(ue)}_addNullVertices(o,u,h,g,b,w,A,D,P){for(let B=0;B<o;B++){for(let $=0;$<4;$++)lE(u,0,0,0,0,0,0,h,!1,0,0,0,0),g&&cE(b,0,0,0,0,0,0),V1(w.dynamicLayoutVertexArray,0,0,0,0),A&&uE(w.iconTransitioningVertexArray,0,0);const U=D.vertexLength;P.emplaceBack(U,U+1,U+2),P.emplaceBack(U+1,U+2,U+3),D.vertexLength+=4,D.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(0)}}_commitLayoutVertex(o,u,h,g,b,w,A){o.emplaceBack(u,h,g,b,w,Math.round(A.x),Math.round(A.y))}_addCollisionDebugVertices(o,u,h,g,b,w,A){const D=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),P=D.vertexLength,B=A.tileAnchorX,U=A.tileAnchorY;for(let G=0;G<4;G++)h.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(h.collisionVertexArrayExt,u,o.padding,A.zOffset),this._commitLayoutVertex(h.layoutVertexArray,g,b,w,B,U,new Vt(o.x1,o.y1)),this._commitLayoutVertex(h.layoutVertexArray,g,b,w,B,U,new Vt(o.x2,o.y1)),this._commitLayoutVertex(h.layoutVertexArray,g,b,w,B,U,new Vt(o.x2,o.y2)),this._commitLayoutVertex(h.layoutVertexArray,g,b,w,B,U,new Vt(o.x1,o.y2)),D.vertexLength+=4;const $=h.indexArray;$.emplaceBack(P,P+1),$.emplaceBack(P+1,P+2),$.emplaceBack(P+2,P+3),$.emplaceBack(P+3,P),D.primitiveLength+=4}_addTextDebugCollisionBoxes(o,u,h,g,b,w){for(let A=g;A<b;A++){const D=h.get(A),P=this.getSymbolInstanceTextSize(o,w,u,A);this._addCollisionDebugVertices(D,P,this.textCollisionBox,D.projectedAnchorX,D.projectedAnchorY,D.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(o,u,h,g,b,w){for(let A=g;A<b;A++){const D=h.get(A),P=this.getSymbolInstanceIconSize(o,u,w.placedIconSymbolIndex);this._addCollisionDebugVertices(D,P,this.iconCollisionBox,D.projectedAnchorX,D.projectedAnchorY,D.projectedAnchorZ,w)}}generateCollisionDebugBuffers(o,u,h){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new IL(dm,uH.members,Wl),this.iconCollisionBox=new IL(dm,uH.members,Wl);const g=B1(this.iconSizeData,o),b=B1(this.textSizeData,o,h);for(let w=0;w<this.symbolInstances.length;w++){const A=this.symbolInstances.get(w);this._addTextDebugCollisionBoxes(b,o,u,A.textBoxStartIndex,A.textBoxEndIndex,A),this._addTextDebugCollisionBoxes(b,o,u,A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A),this._addIconDebugCollisionBoxes(g,o,u,A.iconBoxStartIndex,A.iconBoxEndIndex,A),this._addIconDebugCollisionBoxes(g,o,u,A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A)}}getSymbolInstanceTextSize(o,u,h,g){const b=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:g),w=xL(this.textSizeData,o,b)/Qo;return this.tilePixelRatio*w}getSymbolInstanceIconSize(o,u,h){const g=this.icon.placedSymbolArray.get(h),b=xL(this.iconSizeData,o,g);return this.tilePixelRatio*b}_commitDebugCollisionVertexUpdate(o,u,h,g){o.emplaceBack(u,-h,-h,g),o.emplaceBack(u,h,-h,g),o.emplaceBack(u,h,h,g),o.emplaceBack(u,-h,h,g)}_updateTextDebugCollisionBoxes(o,u,h,g,b,w,A){for(let D=g;D<b;D++){const P=h.get(D),B=this.getSymbolInstanceTextSize(o,w,u,D);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,B,P.padding,w.zOffset)}}_updateIconDebugCollisionBoxes(o,u,h,g,b,w,A){for(let D=g;D<b;D++){const P=h.get(D),B=this.getSymbolInstanceIconSize(o,u,w.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,B,P.padding,w.zOffset)}}updateCollisionDebugBuffers(o,u,h,g){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const b=B1(this.iconSizeData,o,g),w=B1(this.textSizeData,o,h);for(let A=0;A<this.symbolInstances.length;A++){const D=this.symbolInstances.get(A);this._updateTextDebugCollisionBoxes(w,o,u,D.textBoxStartIndex,D.textBoxEndIndex,D,h),this._updateTextDebugCollisionBoxes(w,o,u,D.verticalTextBoxStartIndex,D.verticalTextBoxEndIndex,D,h),this._updateIconDebugCollisionBoxes(b,o,u,D.iconBoxStartIndex,D.iconBoxEndIndex,D,g),this._updateIconDebugCollisionBoxes(b,o,u,D.verticalIconBoxStartIndex,D.verticalIconBoxEndIndex,D,g)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,u,h,g,b,w,A,D,P){const B={};if(u<h){const{x1:U,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se,featureIndex:ke}=o.get(u);B.textBox={x1:U,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se},B.textFeatureIndex=ke}if(g<b){const{x1:U,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se,featureIndex:ke}=o.get(g);B.verticalTextBox={x1:U,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se},B.verticalTextFeatureIndex=ke}if(w<A){const{x1:U,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se,featureIndex:ke}=o.get(w);B.iconBox={x1:U,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se},B.iconFeatureIndex=ke}if(D<P){const{x1:U,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se,featureIndex:ke}=o.get(D);B.verticalIconBox={x1:U,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se},B.verticalIconFeatureIndex=ke}return B}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const h=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(o,u){const h=o.placedSymbolArray.get(u),g=h.vertexStartIndex+4*h.numGlyphs;for(let b=h.vertexStartIndex;b<g;b+=4)o.indexArray.emplaceBack(b,b+1,b+2),o.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(o),h=Math.cos(o),g=[],b=[],w=[];for(let A=0;A<this.symbolInstances.length;++A){w.push(A);const D=this.symbolInstances.get(A);g.push(0|Math.round(u*D.tileAnchorX+h*D.tileAnchorY)),b.push(D.featureIndex)}return w.sort((A,D)=>g[A]-g[D]||b[D]-b[A]),w}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let o=0;o<this.symbolInstances.length;++o)this.symbolInstanceIndexesSortedZOffset.push(o)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((o,u)=>this.symbolInstances.get(u).zOffset-this.symbolInstances.get(o).zOffset)}addToSortKeyRanges(o,u){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===u?h.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const h=this.symbolInstances.get(u);this.featureSortOrder.push(h.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:b,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:A,placedIconSymbolIndex:D,verticalPlacedIconSymbolIndex:P}=h;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),b>=0&&b!==g&&this.addIndicesForPlacedSymbol(this.text,b),w>=0&&w!==b&&w!==g&&this.addIndicesForPlacedSymbol(this.text,w),A>=0&&this.addIndicesForPlacedSymbol(this.text,A),D>=0&&this.addIndicesForPlacedSymbol(this.icon,D),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}getElevationFeatureForText(o){const u=this.symbolInstances.get(this.text.symbolInstanceIndices[o]).elevationFeatureIndex;let h;return this.elevationFeatures&&u<this.elevationFeatures.length&&(h=this.elevationFeatures[u]),h}}function XH(c,o){return o.replace(/{([^{}]+)}/g,(u,h)=>h in c?String(c[h]):"")}let ZH,KH,PL;Kt($C,"SymbolBucket",{omit:["layers","collisionBoxArray","compareText","features"]}),$C.addDynamicAttributes=V1;class QH{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:tl,this.defaultValue=o}evaluate(o){if(o.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(o.formattedSection))return u.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Kt(QH,"FormatSectionOverride",{omit:["defaultValue"]});const RL=()=>PL||(PL={layout:ZH||(ZH=new Ui({"symbol-placement":new Xt(ht.layout_symbol["symbol-placement"]),"symbol-spacing":new Xt(ht.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Xt(ht.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new on(ht.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Xt(ht.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Xt(ht.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new Xt(ht.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new Xt(ht.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Xt(ht.layout_symbol["icon-ignore-placement"]),"icon-optional":new Xt(ht.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Xt(ht.layout_symbol["icon-rotation-alignment"]),"icon-size":new on(ht.layout_symbol["icon-size"]),"icon-size-scale-range":new Xt(ht.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new on(ht.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new on(ht.layout_symbol["icon-text-fit-padding"]),"icon-image":new on(ht.layout_symbol["icon-image"]),"icon-image-use-theme":new Xt({type:"string",default:"default","property-type":"data-constant"}),"icon-rotate":new on(ht.layout_symbol["icon-rotate"]),"icon-padding":new Xt(ht.layout_symbol["icon-padding"]),"icon-keep-upright":new Xt(ht.layout_symbol["icon-keep-upright"]),"icon-offset":new on(ht.layout_symbol["icon-offset"]),"icon-anchor":new on(ht.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Xt(ht.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Xt(ht.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Xt(ht.layout_symbol["text-rotation-alignment"]),"text-field":new on(ht.layout_symbol["text-field"]),"text-font":new on(ht.layout_symbol["text-font"]),"text-size":new on(ht.layout_symbol["text-size"]),"text-size-scale-range":new Xt(ht.layout_symbol["text-size-scale-range"]),"text-max-width":new on(ht.layout_symbol["text-max-width"]),"text-line-height":new on(ht.layout_symbol["text-line-height"]),"text-letter-spacing":new on(ht.layout_symbol["text-letter-spacing"]),"text-justify":new on(ht.layout_symbol["text-justify"]),"text-radial-offset":new on(ht.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Xt(ht.layout_symbol["text-variable-anchor"]),"text-anchor":new on(ht.layout_symbol["text-anchor"]),"text-max-angle":new Xt(ht.layout_symbol["text-max-angle"]),"text-writing-mode":new Xt(ht.layout_symbol["text-writing-mode"]),"text-rotate":new on(ht.layout_symbol["text-rotate"]),"text-padding":new Xt(ht.layout_symbol["text-padding"]),"text-keep-upright":new Xt(ht.layout_symbol["text-keep-upright"]),"text-transform":new on(ht.layout_symbol["text-transform"]),"text-offset":new on(ht.layout_symbol["text-offset"]),"text-allow-overlap":new Xt(ht.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Xt(ht.layout_symbol["text-ignore-placement"]),"text-optional":new Xt(ht.layout_symbol["text-optional"]),visibility:new Xt(ht.layout_symbol.visibility)})),paint:KH||(KH=new Ui({"icon-opacity":new on(ht.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new on(ht.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new on(ht.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new on(ht.paint_symbol["text-emissive-strength"]),"icon-color":new on(ht.paint_symbol["icon-color"]),"icon-halo-color":new on(ht.paint_symbol["icon-halo-color"]),"icon-halo-width":new on(ht.paint_symbol["icon-halo-width"]),"icon-halo-blur":new on(ht.paint_symbol["icon-halo-blur"]),"icon-translate":new Xt(ht.paint_symbol["icon-translate"]),"icon-translate-anchor":new Xt(ht.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Xt(ht.paint_symbol["icon-image-cross-fade"]),"text-opacity":new on(ht.paint_symbol["text-opacity"]),"text-occlusion-opacity":new on(ht.paint_symbol["text-occlusion-opacity"]),"text-color":new on(ht.paint_symbol["text-color"],{runtimeType:Bs,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new on(ht.paint_symbol["text-halo-color"]),"text-halo-width":new on(ht.paint_symbol["text-halo-width"]),"text-halo-blur":new on(ht.paint_symbol["text-halo-blur"]),"text-translate":new Xt(ht.paint_symbol["text-translate"]),"text-translate-anchor":new Xt(ht.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Xt(ht.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Xt(ht.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Xt(ht.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Xt(ht.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new on(ht.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},PL);class VC extends Ms{constructor(o,u,h,g){super(o,RL(),u,h,g,o.layout?o.layout["icon-image-use-theme"]:null),this._colorAdjustmentMatrix=k([]),this.hasOcclusionOpacityProperties=o.paint!==void 0&&("icon-occlusion-opacity"in o.paint||"text-occlusion-opacity"in o.paint)}_handleSpecialPaintPropertyUpdate(o){o!=="icon-occlusion-opacity"&&o!=="text-occlusion-opacity"||(this.hasOcclusionOpacityProperties=!0)}recalculate(o,u){super.recalculate(o,u),this.appearances&&this.appearances.forEach(g=>{g.recalculate(o,u,this.iconImageUseTheme)}),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const b of h)g.indexOf(b)<0&&g.push(b);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(o,u,h,g){return this._saturation===o&&this._contrast===u&&this._brightnessMin===h&&this._brightnessMax===g||(this._colorAdjustmentMatrix=(function(b,w,A,D){b=sa(b),w=wi(w);const P=N(),B=b/3,U=1-2*B,$=[U,B,B,0,B,U,B,0,B,B,U,0,0,0,0,1],G=.5-.5*w,Z=D-A;return K(P,[Z,0,0,0,0,Z,0,0,0,0,Z,0,A,A,A,1],[w,0,0,0,0,w,0,0,0,0,w,0,G,G,G,1]),K(P,P,$),P})(o,u,h,g),this._saturation=o,this._contrast=u,this._brightnessMin=h,this._brightnessMax=g),this._colorAdjustmentMatrix}getValueAndResolveTokens(o,u,h,g){const b=this.layout.get(o).evaluate(u,{},h,g),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||kd(w.value)||!b?b:XH(u.properties,b)}getAppearanceValueAndResolveTokens(o,u,h,g,b){const w=o.getProperty(u);if(!w)return;const A=w.evaluate(h,{},g,b),D=o.getUnevaluatedProperties()._values[u];return D.isDataDriven()||kd(D.value)||!A||typeof A!="string"?A:XH(h.properties,A)}createBucket(o){return new $C(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of RL().paint.overridableProperties){if(!VC.hasPaintOverride(this.layout,o))continue;const u=this.paint.get(o),h=new QH(u),g=new qg(h,u.property.specification,this.scope,this.options,this.layout.get("icon-image-use-theme"));let b=null;b=u.value.kind==="constant"||u.value.kind==="source"?new Es("source",g):new us("composite",g,u.value.zoomStops,u.value.interpolationType),this.paint._values[o]=new Eh(u.property,b,u.parameters)}}_handleOverridablePaintPropertyUpdate(o,u,h){return!(!this.layout||u.isDataDriven()||h.isDataDriven())&&VC.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,u){const h=o.get("text-field"),g=RL().paint.properties[u];let b=!1;const w=A=>{for(const D of A)if(g.overrides&&g.overrides.hasOverride(D))return void(b=!0)};if(h.value.kind==="constant"&&h.value.value instanceof ss)w(h.value.value.sections);else if(h.value.kind==="source"){const A=P=>{b||(P instanceof Ul&&to(P.value)===jp?w(P.value.sections):P instanceof On?w(P.sections):P.eachChild(A))},D=h.value;D._styleExpression&&A(D._styleExpression.expression)}return b}getProgramIds(){return["symbol"]}getDefaultProgramParams(o,u,h){return{config:new q(this,{zoom:u,lut:h}),overrideFog:!1}}hasElevation(){return this.layout&&this.layout.get("symbol-elevation-reference")==="hd-road-markup"}}let JH,eG,tG,nG;var kL=gr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function qC(c,o,u,h,g,b,w,A){const D=[c,o,1,u,h,1,g,b,1],P=[w,A,1],B=I([],D),[U,$,G]=Yt(P,P,B);return L(D,D,[U,0,0,0,$,0,0,0,G])}function rG(c,o,u,h,g,b,w,A){const D=(function(P,B,U,$,G,Z,se,fe){const ue=qC(0,0,1,0,1,1,0,1),pe=qC(P,B,U,$,G,Z,se,fe);return L(pe,pe,I([],ue))})(c,o,u,h,g,b,w,A);return[D[2]/D[8]/Jt,D[5]/D[8]/Jt]}function HC(c){return[c[0],Math.min(Math.max(c[1],-85.051129),et)]}class iG extends pf{constructor(o,u,h,g){super(),this.id=o,this.dispatcher=h,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(g),this.options=u,this._dirty=!1}load(o,u){if(this._loaded=u||!1,this.fire(new uu("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return o&&(this.coordinates=o),this._loaded=!0,void this._finishLoading();this._imageRequest=xg(this.map._requestManager.transformRequest(this.url,eo.Image),(h,g)=>{this._imageRequest=null,this._loaded=!0,h?this.fire(new Fp(h)):g&&(this.image=g instanceof HTMLImageElement?Sl.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return o.url?(this._imageRequest&&o.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}setTexture(o){if(!(o.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new XT(this.map.painter.context,o.handle),this.width=o.dimensions[0],this.height=o.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new uu("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(o){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof XT||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(o){if(this.coordinates=o,this._boundsArray=void 0,this._unsupportedCoords=!1,!o.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let u=o[0][1],h=o[0][1];for(const b of o)b[1]>h&&(h=b[1]),b[1]<u&&(u=b[1]);const g=(h+u)/2;if(g>et?this.onNorthPole=!0:g<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const b=o.map(tn.fromLngLat);this.tileID=(function(w){let A=1/0,D=1/0,P=-1/0,B=-1/0;for(const se of w)A=Math.min(A,se.x),D=Math.min(D,se.y),P=Math.max(P,se.x),B=Math.max(B,se.y);const U=Math.max(P-A,B-D),$=Math.max(0,Math.floor(-Math.log2(U))),G=Math.pow(2,$);let Z=Math.floor((A+P)/2*G);return Z>1&&(Z-=1),new Hc($,Z,Math.floor((D+B)/2*G))})(b),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new uu("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){!this.texture||this.texture instanceof XT||(this.texture.destroy(),this._dirty=!0),this.texture=null,this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(o){for(const ue in this.tiles){const pe=this.tiles[ue];pe.state!=="loaded"&&(pe.state="loaded",pe.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const u=rE(new Hc(0,0,0),this.map.transform.projection),h=[u.projection.project(this.coordinates[0][0],this.coordinates[0][1]),u.projection.project(this.coordinates[1][0],this.coordinates[1][1]),u.projection.project(this.coordinates[2][0],this.coordinates[2][1]),u.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!(function(ue){const pe=ue[1].x-ue[0].x,ve=ue[1].y-ue[0].y,Se=ue[2].x-ue[1].x,ke=ue[2].y-ue[1].y,Ie=ue[3].x-ue[2].x,Ve=ue[3].y-ue[2].y,qe=ue[0].x-ue[3].x,Ue=ue[0].y-ue[3].y,Ze=pe*ke-Se*ve,rt=Se*Ve-Ie*ke,Et=Ie*Ue-qe*Ve,xt=qe*ve-pe*Ue;return Ze>0&&rt>0&&Et>0&&xt>0||Ze<0&&rt<0&&Et<0&&xt<0})(h))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const g=rE(this.tileID,this.map.transform.projection),[b,w,A,D]=this.coordinates.map(ue=>{const pe=g.projection.project(ue[0],ue[1]);return VH(g,pe)._round()});this.perspectiveTransform=rG(b.x,b.y,w.x,w.y,A.x,A.y,D.x,D.y);const P=this._boundsArray=new $c;P.emplaceBack(b.x,b.y,0,0),P.emplaceBack(w.x,w.y,Jt,0),P.emplaceBack(D.x,D.y,0,Jt),P.emplaceBack(A.x,A.y,Jt,Jt),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=o.createVertexBuffer(P,kL.members),this.boundsSegments=Ii.simpleSegment(0,0,4,2);const B=[],U=[HC(($=this.coordinates)[0]),HC($[1]),HC($[2]),HC($[3])];var $;const[G,Z,se,fe]=(function(ue){let pe=ue[0][0],ve=pe,Se=ue[0][1],ke=Se;for(let Ie=1;Ie<ue.length;Ie++)ue[Ie][0]<pe?pe=ue[Ie][0]:ue[Ie][0]>ve&&(ve=ue[Ie][0]),ue[Ie][1]<Se?Se=ue[Ie][1]:ue[Ie][1]>ke&&(ke=ue[Ie][1]);return[pe,Se,ve-pe,ke-Se]})(U);{const ue=new $c,[pe,ve,Se,ke]=(function(Rt){let vt=Rt[0].x,zt=vt,Mt=Rt[0].y,Nt=Mt;for(let Lt=1;Lt<Rt.length;Lt++)Rt[Lt].x<vt?vt=Rt[Lt].x:Rt[Lt].x>zt&&(zt=Rt[Lt].x),Rt[Lt].y<Mt?Mt=Rt[Lt].y:Rt[Lt].y>Nt&&(Nt=Rt[Lt].y);return[vt,Mt,zt-vt,Nt-Mt]})(h),Ie=Rt=>[(Rt.x-pe)/Se,(Rt.y-ve)/ke],[Ve,qe,Ue,Ze]=h.map(Ie),rt=(function(Rt,vt,zt,Mt,Nt,Lt,fn,pn){const nn=qC(0,0,1,0,1,1,0,1);return L(nn,nn,I([],qC(Rt,vt,zt,Mt,Nt,Lt,fn,pn)))})(Ve[0],Ve[1],qe[0],qe[1],Ue[0],Ue[1],Ze[0],Ze[1]);this.elevatedGlobePerspectiveTransform=rG(Ve[0],Ve[1],qe[0],qe[1],Ue[0],Ue[1],Ze[0],Ze[1]);const Et=(Rt,vt)=>{B.push(Rt.lng);const zt=Math.round((Rt.lng-G)/se*Jt),Mt=Math.round((Rt.lat-Z)/fe*Jt),Nt=Ie(vt),Lt=Yt([],[Nt[0],Nt[1],1],rt),fn=Math.round(Lt[0]/Lt[2]*Jt),pn=Math.round(Lt[1]/Lt[2]*Jt);ue.emplaceBack(zt,Mt,fn,pn)},xt=h[3].x-h[0].x,Tt=h[3].y-h[0].y,kt=h[2].x-h[1].x,Pt=h[2].y-h[1].y;for(let Rt=0;Rt<65;Rt++){const vt=Rt/64,zt=[h[0].x+vt*xt,h[0].y+vt*Tt],Mt=[h[1].x+vt*kt,h[1].y+vt*Pt],Nt=Mt[0]-zt[0],Lt=Mt[1]-zt[1];for(let fn=0;fn<65;fn++){const pn=fn/64,nn={x:zt[0]+Nt*pn,y:zt[1]+Lt*pn};Et(u.projection.unproject(nn.x,nn.y),nn)}}this.elevatedGlobeVertexBuffer=o.createVertexBuffer(ue,kL.members)}{this.maxLongitudeTriangleSize=0;let ue=[],pe=new Xa;const ve=(Se,ke,Ie)=>{pe.emplaceBack(Se,ke,Ie);const Ve=B[Se],qe=B[ke],Ue=B[Ie],Ze=Math.min(Math.min(Ve,qe),Ue),rt=Math.max(Math.max(Ve,qe),Ue)-Ze;rt>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=rt),ue.push(Ze+rt/2)};for(let Se=0;Se<64;Se++)for(let ke=0;ke<64;ke++){const Ie=65*Se+ke,Ve=Ie+1,qe=Ie+65,Ue=qe+1;ve(Ie,qe,Ve),ve(Ve,qe,Ue)}[ue,pe]=(function(Se,ke){const Ie=Array.from({length:Se.length},(Ue,Ze)=>Ze);Ie.sort((Ue,Ze)=>Se[Ue]-Se[Ze]);const Ve=[],qe=new Xa;for(let Ue=0;Ue<Ie.length;Ue++){const Ze=Ie[Ue];Ve.push(Se[Ze]);const rt=3*Ze,Et=rt+1;qe.emplaceBack(ke.uint16[rt],ke.uint16[Et],ke.uint16[Et+1])}return[Ve,qe]})(ue,pe),this.elevatedGlobeTrianglesCenterLongitudes=ue,this.elevatedGlobeIndexBuffer=o.createIndexBuffer(pe)}this.elevatedGlobeSegments=Ii.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,se/Jt,0,fe/Jt,0,0,Z,G,0])}prepare(){const o=Object.keys(this.tiles).length!==0;if(this.tileID&&!o)return;const u=this.map.painter.context,h=u.gl;!this._dirty||this.texture instanceof XT||(this.texture?this.texture.update(this.image):(this.texture=new iL(u,this.image,h.RGBA8),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),o&&this._prepareData(u)}loadTile(o,u){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},u(null)):(o.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(o){const u=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!u)return null;const h=this.elevatedGlobeTrianglesCenterLongitudes;let g=(b=o+180)+360*Math.round((h[0]-b)/360);var b;const w=new Ii,A=(U,$)=>{w.segments.push({vertexOffset:0,primitiveOffset:U,vertexLength:u.segments[0].vertexLength,primitiveLength:$,sortKey:void 0,vaos:{}})},D=.51*this.maxLongitudeTriangleSize;if(Math.abs(h[0]-g)<=D){const U=li(h,0,h.length,g+D);return U===h.length||A(U,si(h,U+1,h.length,g+360-D)-U),w}g<h[0]&&(g+=360);const P=si(h,0,h.length,g-D);if(P===h.length)return A(0,h.length),w;A(0,P-0);const B=li(h,P+1,h.length,g+D);return B!==h.length&&A(B,h.length-B),w}}const LL=1024,Dve=(Math.pow(LL,2)-1)/268170240;class aG extends Ms{constructor(o,u,h,g){super(o,{layout:tG||(tG=new Ui({visibility:new Xt(ht.layout_raster.visibility)})),paint:nG||(nG=new Ui({"raster-opacity":new Xt(ht.paint_raster["raster-opacity"]),"raster-color":new jd(ht.paint_raster["raster-color"]),"raster-color-mix":new Xt(ht.paint_raster["raster-color-mix"]),"raster-color-range":new Xt(ht.paint_raster["raster-color-range"]),"raster-hue-rotate":new Xt(ht.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Xt(ht.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Xt(ht.paint_raster["raster-brightness-max"]),"raster-saturation":new Xt(ht.paint_raster["raster-saturation"]),"raster-contrast":new Xt(ht.paint_raster["raster-contrast"]),"raster-resampling":new Xt(ht.paint_raster["raster-resampling"]),"raster-fade-duration":new Xt(ht.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Xt(ht.paint_raster["raster-emissive-strength"]),"raster-array-band":new Xt(ht.paint_raster["raster-array-band"]),"raster-elevation":new Xt(ht.paint_raster["raster-elevation"]),"raster-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},u,h,g),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(o){return!(o&&o._source instanceof iG&&(o._source.onNorthPole||o._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(o){o!=="raster-color"&&o!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}_clear(){this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}updateColorRamp(o){if(!this.hasColorMap()||!this._curRampRange)return;const u=this._transitionablePaint._values["raster-color"].value.expression,[h,g]=o||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(h)&&isNaN(g)||h===this._curRampRange[0]&&g===this._curRampRange[1]||(this.colorRamp=dv({expression:u,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:h,end:g}],resolution:LL}),this.colorRampTexture=null,this._curRampRange=[h,g])}is3D(o){return this.paint.get("raster-elevation")>0}}let oG,sG,lG,uG,cG;class fG extends Ms{constructor(o,u,h,g){super(o,{layout:oG||(oG=new Ui({visibility:new Xt(ht["layout_raster-particle"].visibility)})),paint:sG||(sG=new Ui({"raster-particle-array-band":new Xt(ht["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Xt(ht["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new jd(ht["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Xt(ht["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Xt(ht["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Xt(ht["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Xt(ht["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Xt(ht["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},u,h,g),this._updateColorRamp(),this.lastInvalidatedAt=Sl.now()}_clear(){this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null),this.tileFramebuffer&&(this.tileFramebuffer.destroy(),this.tileFramebuffer=null),this.particleFramebuffer&&(this.particleFramebuffer.destroy(),this.particleFramebuffer=null)}onRemove(o){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(o){return!1}_handleSpecialPaintPropertyUpdate(o){o!=="raster-particle-color"&&o!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),o==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const o=this._transitionablePaint._values["raster-particle-color"].value.expression,u=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=dv({expression:o,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:u}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Sl.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class Ive extends Ms{constructor(o,u){super(o,{},u,null),this.implementation=o,o.slot&&(this.slot=o.slot)}is3D(o){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(o){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}function zL(c,o,u){const h=[0,0,1],g=En([]);return $r(g,g,u?-Ar(c)+Math.PI:Ar(c)),ur(g,g,-Ar(o)),gn(h,h,g),xe(h,h)}const hG={None:0,Model:1,Symbol:2,FillExtrusion:4};class GC{constructor(o,u,h,g){this.message=(o?`${o}: `:"")+h,g&&(this.identifier=g),u!=null&&u.__line__&&(this.line=u.__line__)}}function NL(c,o){const u=c.indexOf("://")===-1;try{return new URL(c,u&&o?"http://example.com":void 0),!0}catch{return!1}}class dG{constructor(o,u){this.feature=o,this.instancedDataOffset=u,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class pG{constructor(){this.maxScale=1,this.maxXYTranslationDistance=0,this.instancedDataArray=new tc,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}colorForInstance(o){const u=16*o,h=this.instancedDataArray.float32;let g=Math.floor(h[u+2]);const b=1.05*(h[u+2]-g);return g/=100,[h[u]%1*1.05,h[u+1]%1*1.05,b,g]}tileCoordinatesForInstance(o){const u=16*o,h=this.instancedDataArray.float32;let g=h[u+0];return g=g>Jt?g-Jt:g,new Vt(Math.trunc(g),Math.trunc(h[u+1]))}translationForInstance(o){const u=16*o,h=this.instancedDataArray.float32;return[h[u+4],h[u+5],h[u+6]]}rotationScaleForInstance(o){const u=16*o,h=this.instancedDataArray.float32;return[h[u+7],h[u+8],h[u+9],h[u+10],h[u+11],h[u+12],h[u+13],h[u+14],h[u+15]]}transformForInstance(o){const u=16*o,h=this.instancedDataArray.float32;return[h[u+7],h[u+8],h[u+9],h[u+4],h[u+10],h[u+11],h[u+12],h[u+5],h[u+13],h[u+14],h[u+15],h[u+6],0,0,0,1]}}class FL{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaledZ=this.canonical.z+Math.log2(o.overscaling),this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.projection=o.projection,this.index=o.index,this.worldview=o.worldview,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z+1?0:this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0,this.styleDefinedModelURLs=o.styleDefinedModelURLs,this.hasAppearances=null}updateFootprints(o,u){}updateAppearances(o,u,h,g){}populate(o,u,h,g){this.tileToMeter=qt(h);const b=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);const w=this.layers[0].paint.get("model-elevation-reference")==="hd-road-markup"?u.elevationFeatures:void 0;for(const{feature:A,id:D,index:P,sourceLayerIndex:B}of o){const U=D??(A.properties&&A.properties.hasOwnProperty("id")?A.properties.id:void 0),$=Qn(A,b);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),$,h))continue;const G={id:U,sourceLayerIndex:B,index:P,geometry:b?$.geometry:Un(A,h,g),properties:A.properties,type:A.type,patterns:{}},Z=this.addFeature(G,G.geometry,$,w,h);Z&&u.featureIndex.insert(A,G.geometry,P,B,this.index,this.instancesPerModel[Z].instancedDataArray.length,256)}this.lookup=null}evaluateQueryRenderedFeaturePadding(){const o=this.layers[0].modelManager,u=this.layers[0].scope;let h=0;for(const g of this.modelUris){const b=o.getModel(g,u);if(!b)continue;const w=this.instancesPerModel[g];if(w){const A=.5*sn(b.aabb.max,b.aabb.min)*w.maxScale+w.maxXYTranslationDistance,D=Math.min(Jt,Math.max(A/this.tileToMeter,256));h=Math.max(D,h)}}return h}update(o,u,h,g){for(const b in this.instancesPerModel){const w=this.instancesPerModel[b];for(const A in o)w.idToFeaturesIndex.hasOwnProperty(A)&&(this.evaluate(w.features[w.idToFeaturesIndex[A]],o[A],w,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let o=!1;for(const u in this.instancesPerModel){const h=this.instancesPerModel[u];for(const g of h.features){const b=this.layers[0],w=g.feature,A=this.canonical,D=b.paint.get("model-rotation").evaluate(w,{},A),P=b.paint.get("model-scale").evaluate(w,{},A),B=b.paint.get("model-translation").evaluate(w,{},A);ar(g.rotation,D)&&ar(g.scale,P)&&ar(g.translation,B)||(this.evaluate(g,g.featureStates,h,!0),o=!0)}}return o}updateReplacement(o,u,h,g){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const b=u.getReplacementRegionsForTile(o.toUnwrapped(),!0);if(m(this.activeReplacements,b))return!1;this.activeReplacements=b;let w=!1;for(const A in this.instancesPerModel){const D=this.instancesPerModel[A],P=D.instancedDataArray;for(const B of D.features){const U=B.instancedDataOffset,$=B.instancedDataCount;for(let G=0;G<$;G++){const Z=16*(G+U);let se=P.float32[Z+0];const fe=se>Jt;se=fe?se-Jt:se;const ue=Math.floor(se),pe=Math.floor(P.float32[Z+1]);let ve=!1;for(const Se of this.activeReplacements)if(!vb(Se,h,hG.Model,g)&&!(Se.min.x>ue||ue>Se.max.x||Se.min.y>pe||pe>Se.max.y)&&(ve=Te(ne(ue,pe,o.canonical,Se.footprintTileId.canonical),Se.footprint),ve))break;P.float32[Z]=ve?se+Jt:se,w=w||ve!==fe}}}return w}isEmpty(){for(const o in this.instancesPerModel)if(this.instancesPerModel[o].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(o){if(!this.uploaded)for(const u in this.instancesPerModel){const h=this.instancesPerModel[u];h.instancedDataArray.length<0||h.instancedDataArray.length===0||(h.instancedDataBuffer?h.instancedDataBuffer.updateData(h.instancedDataArray):h.instancedDataBuffer=o.createVertexBuffer(h.instancedDataArray,Jye.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(o){for(const h in this.instancesPerModel){const g=this.instancesPerModel[h];g.instancedDataArray.length!==0&&g.instancedDataBuffer&&g.instancedDataBuffer.destroy()}const u=this.layers[0].modelManager;if(o&&u&&this.modelUris&&this.modelsRequested)for(const h of this.modelUris)u.removeModel(h,"",!0)}addFeature(o,u,h,g,b){const w=this.layers[0],A=w.layout.get("model-id"),D=w.layout.get("model-allow-density-reduction"),P=A.evaluate(h,{},this.canonical);if(!P)return Hn(`modelId is not evaluated for layer ${w.id} and it is not going to get rendered.`),P;(NL(P,!1)||this.styleDefinedModelURLs[P]!==void 0)&&(this.modelUris.includes(P)||this.modelUris.push(P)),this.instancesPerModel[P]||(this.instancesPerModel[P]=new pG);const B=this.instancesPerModel[P],U=B.instancedDataArray,$=new dG(h,U.length);let G;g&&(G=Zo.getElevationFeature(o,g));for(const Z of u)for(const se of Z){if(se.x<0||se.x>=Jt||se.y<0||se.y>=Jt)continue;if(this.lookupDim!==0&&D){const ue=(this.lookupDim-1)/Jt,pe=this.lookupDim*(se.y*ue|0)+se.x*ue|0;if(this.lookup){if(this.lookup[pe]!==0)continue;this.lookup[pe]=1}}this.instanceCount++;const fe=U.length;if(U.resize(fe+1),g){B.instancesRoadElevation||(B.instancesRoadElevation=[]);const ue=G?G.pointElevation(new Vt(se.x,se.y)):0;B.instancesRoadElevation.push(ue)}B.instancesEvaluatedElevation.push(0),U.float32[16*fe]=se.x,U.float32[16*fe+1]=se.y}return $.instancedDataCount=B.instancedDataArray.length-$.instancedDataOffset,$.instancedDataCount>0&&(o.id&&(B.idToFeaturesIndex[o.id]=B.features.length),B.features.push($),this.evaluate($,{},B,!1)),P}getModelUris(){return this.modelUris}evaluate(o,u,h,g){const b=this.layers[0],w=o.feature,A=this.canonical,D=o.rotation=b.paint.get("model-rotation").evaluate(w,u,A),P=o.scale=b.paint.get("model-scale").evaluate(w,u,A),B=o.translation=b.paint.get("model-translation").evaluate(w,u,A),U=Object.assign({},b.paint.get("model-color").evaluate(w,u,A));U.a=b.paint.get("model-color-mix-intensity").evaluate(w,u,A);const $=[];this.maxVerticalOffset<B[2]&&(this.maxVerticalOffset=B[2]);const G=B[0]*B[0]+B[1]*B[1],Z=G>0?Math.sqrt(G):0;h.maxScale=Math.max(Math.max(h.maxScale,P[0]),Math.max(P[1],P[2])),h.maxXYTranslationDistance=Math.max(h.maxXYTranslationDistance,Z),this.maxScale=Math.max(Math.max(this.maxScale,P[0]),Math.max(P[1],P[2])),$9($,D,P);const se=Math.round(100*U.a)+U.b/1.05;for(let fe=0;fe<o.instancedDataCount;++fe){const ue=o.instancedDataOffset+fe,pe=16*ue,ve=h.instancedDataArray.float32;let Se=0;g&&(Se=ve[pe+6]-h.instancesEvaluatedElevation[ue]);const ke=0|ve[pe+1];ve[pe]=(0|ve[pe])+U.r/1.05,ve[pe+1]=ke+U.g/1.05,ve[pe+2]=se,ve[pe+3]=1/(A.z>10?this.tileToMeter:qt(A,ke)),ve[pe+4]=B[0],ve[pe+5]=B[1],ve[pe+6]=B[2]+(h.instancesRoadElevation?h.instancesRoadElevation[ue]:0)+Se,ve[pe+7]=$[0],ve[pe+8]=$[1],ve[pe+9]=$[2],ve[pe+10]=$[4],ve[pe+11]=$[5],ve[pe+12]=$[6],ve[pe+13]=$[8],ve[pe+14]=$[9],ve[pe+15]=$[10],h.instancesEvaluatedElevation[ue]=B[2]}}}let mG,gG;Kt(FL,"ModelBucket",{omit:["layers"]}),Kt(pG,"PerModelAttributes"),Kt(dG,"ModelFeature");class q1{constructor(o,u,h){this._demTile=o,this._dem=this._demTile.dem,this._scale=u,this._offset=h}static create(o,u,h){const g=h||o.findDEMTileFor(u);if(!g||!g.dem)return;const b=g.dem,w=g.tileID,A=1<<u.canonical.z-w.canonical.z;return new q1(g,b.dim/Jt/A,[(u.canonical.x/A-w.canonical.x)*b.dim,(u.canonical.y/A-w.canonical.y)*b.dim])}tileCoordToPixel(o,u){const h=u*this._scale+this._offset[1];return new Vt(Math.floor(o*this._scale+this._offset[0]),Math.floor(h))}getElevationAt(o,u,h,g){const b=o*this._scale+this._offset[0],w=u*this._scale+this._offset[1],A=Math.floor(b),D=Math.floor(w),P=this._dem;return g=!!g,h?Vn(Vn(P.get(A,D,g),P.get(A,D+1,g),w-D),Vn(P.get(A+1,D,g),P.get(A+1,D+1,g),w-D),b-A):P.get(A,D,g)}getElevationAtPixel(o,u,h){return this._dem.get(o,u,!!h)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*ft(1,o)*this._dem.stride}}const BL=new Float32Array(262144),Ob=new Uint8Array(262144);function yG(c){let o=0;if(c.meshes)for(const u of c.meshes)o=Math.max(o,u.aabb.max[2]);if(c.children)for(const u of c.children)o=Math.max(o,yG(u));return o}function _G(c,o,u){if(c.meshes)for(const h of c.meshes){if(h.aabb.min[0]===1/0)continue;const g=Hr.applyTransform(h.aabb,c.globalMatrix);u.insert(o,g.min[0],g.min[1],g.max[0],g.max[1])}if(c.children)for(const h of c.children)_G(h,o,u)}const vG=["","wall","door","roof","window","lamp","logo"];class bG{constructor(o){this.node=o,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedTranslation=[0,0,0],this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:o.id,geometry:[],properties:{height:yG(o)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new Hr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let o=0;const u=new Hr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const h of this.node.meshes)this.node.lightMeshIndex!==o&&(h.transformedAabb=Hr.applyTransformFast(h.aabb,this.node.globalMatrix),u.encapsulate(h.transformedAabb)),o++;this.aabb=u}return this.aabb}}class YC{constructor(o,u,h,g,b,w,A,D){this.id=h,this.layers=o,this.layerIds=this.layers.map(P=>P.fqid),this.stateDependentLayerIds=this.layers.filter(P=>P.isStateDependent()).map(P=>P.id),this.modelTraits|=z1.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,g&&(this.modelTraits|=z1.HasMapboxMeshFeatures),b&&(this.modelTraits|=z1.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=w,this.worldview=D,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const P of u)this.nodesInfo.push(new bG(P)),_G(P,A.featureIndexArray.length,A.grid),A.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,A.bucketLayerIDs.length-1,0);this.states={},this.hasAppearances=null}updateFootprints(o,u){for(const h of this.getNodesInfo()){const g=h.node;g.footprint&&u.push({footprint:g.footprint,id:o})}}updateAppearances(o,u,h,g){}update(o){const u=Object.keys(o).length!==0;if(u&&!this.stateDependentLayers.length)return;const h=u?this.stateDependentLayers:this.layers;if(!Tc(o,this.states))for(const g of h)this.evaluate(g,o);this.states=structuredClone(o)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(o){if(!this.needsUpload)return;const u=this.getNodesInfo();for(const h of u){const g=h.node;this.uploaded?this.updatePbrBuffer(g):sL(g,o,!0)}for(const h of u)CC(h.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(o){let u=!1;if(!o.meshes)return u;for(const h of o.meshes)h.pbrBuffer&&(h.pbrBuffer.updateData(h.featureArray),u=!0);return u}needsReEvaluation(o,u,h){const g=o.transform.projectionOptions,b=o.style.getBrightness(),w=this.brightness!==b;if(!this.uploaded||this.dirty||g.name!==this.projection.name||fE(h.paint.get("model-color").value,w)||fE(h.paint.get("model-color-mix-intensity").value,w)||fE(h.paint.get("model-roughness").value,w)||fE(h.paint.get("model-emissive-strength").value,w)||fE(h.paint.get("model-height-based-emissive-strength-multiplier").value,w)){this.projection=g,this.brightness=b;const A=this.getNodesInfo();for(const D of A)D.state=null;return!0}return!1}evaluateTransform(o,u){if(o.transform.zoom===this.zoom)return;this.zoom=o.transform.zoom;const h=this.getNodesInfo(),g=this.id.canonical;for(const b of h){const w=b.feature;b.evaluatedTranslation=u.paint.get("model-translation").evaluate(w,{},g),b.evaluatedScale=u.paint.get("model-scale").evaluate(w,{},g)}}evaluate(o,u){const h=this.getNodesInfo();for(const g of h){if(!g.node.meshes)continue;const b=g.feature,w=u&&u[b.id];if(Tc(w,g.state))continue;g.state=structuredClone(w);const A=g.node.meshes&&g.node.meshes[0].featureData,D=g.evaluatedColor[2],P=g.evaluatedRMEA[2],B=this.id.canonical;if(g.hasTranslucentParts=!1,A){for(let U=0;U<vG.length;U++){const $=vG[U];$.length&&(b.properties.part=$);const G=o.paint.get("model-color").evaluate(b,w,B).toPremultipliedRenderColor(null),Z=o.paint.get("model-color-mix-intensity").evaluate(b,w,B);g.evaluatedColor[U]=[G.r,G.g,G.b,Z],g.evaluatedRMEA[U][0]=o.paint.get("model-roughness").evaluate(b,w,B),g.evaluatedRMEA[U][2]=o.paint.get("model-emissive-strength").evaluate(b,w,B),g.evaluatedRMEA[U][3]=G.a,g.emissionHeightBasedParams[U]=o.paint.get("model-height-based-emissive-strength-multiplier").evaluate(b,w,B),!g.hasTranslucentParts&&G.a<1&&(g.hasTranslucentParts=!0)}delete b.properties.part,Rve(g,D!==g.evaluatedColor[2]||P!==g.evaluatedRMEA[2],this.modelTraits)}else g.evaluatedRMEA[0][2]=o.paint.get("model-emissive-strength").evaluate(b,w,B);g.evaluatedTranslation=o.paint.get("model-translation").evaluate(b,w,B),g.evaluatedScale=o.paint.get("model-scale").evaluate(b,w,B),this.updatePbrBuffer(g.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(o,u,h,g){const b=o.findDEMTileFor(h);if(b&&(b.tileID.canonical!==this.terrainTile||u!==this.terrainExaggeration)){if(b.dem&&b.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=b.tileID.overscaledZ;const w=q1.create(o,h,b);if(!w)return;this.modelTraits&z1.HasMapboxMeshFeatures&&this.updateDEM(o,w,h,g);for(const A of this.getNodesInfo()){const D=A.node;if(!D.footprint||!D.footprint.vertices||!D.footprint.vertices.length)continue;const P=D.footprint.vertices;let B=w.getElevationAt(P[0].x,P[0].y,!0,!0);for(let U=1;U<P.length;U++)B=Math.min(B,w.getElevationAt(P[U].x,P[U].y,!0,!0));D.elevation=B}}this.terrainTile=b.tileID.canonical,this.terrainExaggeration=u}}updateDEM(o,u,h,g){let b=u._dem._modifiedForSources[g];if(b===void 0&&(u._dem._modifiedForSources[g]=[],b=u._dem._modifiedForSources[g]),b.includes(h.canonical))return;const w=u._dem.dim;b.push(h.canonical);let A=!1;for(const D of this.getNodesInfo()){const P=D.node;if(!P.footprint||!P.footprint.grid)continue;const B=P.footprint.grid,U=u.tileCoordToPixel(B.min.x,B.min.y),$=u.tileCoordToPixel(B.max.x,B.max.y),G=Math.min(Math.min(w-$.y,U.x),Math.min(U.y,w-$.x));if(G<0)continue;const Z=ze(G,2,5);let se=Math.max(0,U.x-Z),fe=Math.max(0,U.y-Z),ue=Math.min($.x+Z,w-1),pe=Math.min($.y+Z,w-1);for(let Ie=fe;Ie<=pe;++Ie)for(let Ve=se;Ve<=ue;++Ve)Ob[Ie*w+Ve]=255;let ve=0,Se=0;for(let Ie=0;Ie<B.cellsY;++Ie)for(let Ve=0;Ve<B.cellsX;++Ve){if(!B.cells[Ie*B.cellsX+Ve])continue;const qe=u.tileCoordToPixel(B.min.x+Ve/B.xScale,B.min.y+Ie/B.yScale),Ue=u.tileCoordToPixel(B.min.x+(Ve+1)/B.xScale,B.min.y+(Ie+1)/B.yScale);for(let Ze=qe.y;Ze<=Math.min(Ue.y+1,w-1);++Ze)for(let rt=qe.x;rt<=Math.min(Ue.x+1,w-1);++rt)Ob[Ze*w+rt]===255&&(Ob[Ze*w+rt]=0,ve+=u.getElevationAtPixel(rt,Ze),Se++)}const ke=ve/Se;se=Math.max(1,U.x-Z),fe=Math.max(1,U.y-Z),ue=Math.min($.x+Z,w-2),pe=Math.min($.y+Z,w-2),A=!0;for(let Ie=fe;Ie<=pe;++Ie)for(let Ve=se;Ve<=ue;++Ve)Ob[Ie*w+Ve]===0&&(BL[Ie*w+Ve]=u._dem.set(Ve,Ie,ke));for(let Ie=1;Ie<Z;++Ie){se=Math.max(1,U.x-Ie),fe=Math.max(1,U.y-Ie),ue=Math.min($.x+Ie,w-2),pe=Math.min($.y+Ie,w-2);for(let Ve=fe;Ve<=pe;++Ve)for(let qe=se;qe<=ue;++qe){const Ue=Ve*w+qe;if(Ob[Ue]===255){let Ze=0,rt=0,Et=-1,xt=-1;for(let Tt=-1;Tt<=1;++Tt)for(let kt=-1;kt<=1;++kt){const Pt=(Ve+Tt)*w+qe+kt;if(Ob[Pt]>=Ie)continue;const Rt=BL[Pt],vt=Math.abs(Rt);vt>rt&&(Ze=Rt,rt=vt,Et=kt,xt=Tt)}if(rt>.1){const Tt=1-(Ie+.5*Math.abs(Et*xt))/Z;let kt=u._dem.get(qe,Ve)+Ze*Tt;const Pt=u._dem.get(qe+Et,Ve+xt),Rt=u._dem.get(qe-Et,Ve-xt,!0);(kt-Pt)*(kt-Rt)>0&&(kt=(Pt+Rt)/2),BL[Ue]=u._dem.set(qe,Ve,kt),Ob[Ue]=Ie}}}}}A&&(u._demTile.needsDEMTextureUpload=!0,u._dem._timestamp=Sl.now())}setFilter(o){this.filter=o?tv(o):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(o=>this.filter.filter(new Jr(this.id.overscaledZ,{worldview:this.worldview}),o.feature,this.id.canonical)):this.nodesInfo}destroy(){const o=this.getNodesInfo();for(const u of o)CC(u.node),lL(u.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(o,u){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const h=u.getReplacementRegionsForTile(o.toUnwrapped());for(const g of this.getNodesInfo()){const b=g.node.footprint;g.hiddenByReplacement=!!b&&!h.find(w=>w.footprint===b)}}getHeightAtTileCoord(o,u){const h=[],g=[0,0,0],b=k([]);for(const w of this.getNodesInfo()){const A=w.node.meshes[0],D=A.transformedAabb;if(o<D.min[0]||u<D.min[1]||o>D.max[0]||u>D.max[1])continue;if(w.node.hidden===!0)return{height:1/0,maxHeight:w.feature.properties.height,hidden:!1,verticalScale:w.evaluatedScale[2]};V(b,w.node.globalMatrix),g[0]=o,g[1]=u,Ct(g,g,b);const P=(g[0]-A.aabb.min[0])/(A.aabb.max[0]-A.aabb.min[0])*Sb|0,B=Math.min(63,(g[1]-A.aabb.min[1])/(A.aabb.max[1]-A.aabb.min[1])*Sb|0)*Sb+Math.min(63,P),U=A.heightmap[B];if(!(U<0&&w.node.footprint))return w.hiddenByReplacement?void 0:{height:U,maxHeight:w.feature.properties.height,hidden:!1,verticalScale:w.evaluatedScale[2]};if(w.node.footprint.grid.query(new Vt(o,u),new Vt(o,u),h),h.length>0)return{height:void 0,maxHeight:w.feature.properties.height,hidden:w.hiddenByReplacement,verticalScale:w.evaluatedScale[2]}}}}function fE(c,o){return c instanceof Es&&!c.isLightConstant&&o}function Pve(c,o,u,h,g,b,w,A){let D=(61440&o|(61440&o)>>4)>>8,P=(3840&o|(3840&o)>>4)>>4,B=240&o|(240&o)>>4;u[3]>0&&(D=Vn(D,255*u[0],u[3]),P=Vn(P,255*u[1],u[3]),B=Vn(B,255*u[2],u[3]));const U=D<<8|P,$=B<<8|Math.floor(255*h[3]),G=(function(Ie){const Ve=ze(Ie,0,2);return Math.min(Math.round(.5*Ve*255),255)})(h[2])<<8|15*h[0]<<4|15*h[1],Z=ze(g[0],0,1),se=ze(g[1],0,1),fe=ze(g[2],0,1),ue=ze(g[3],0,1);let pe,ve,Se,ke;if(Z!==se&&w!==b&&se!==Z){const Ie=w-b;ve=1/(Ie*(se-Z)),Se=-(b+Ie*Z)/(Ie*(se-Z));const Ve=ze(g[4],-1,1);ke=Math.pow(10,Ve),pe=255*fe<<8|255*ue}else pe=65535,ve=0,Se=1,ke=1;if(c.emplaceBack(U,$,G,pe,ve,Se,ke),A){const Ie=A.length;A.clear();for(let Ve=0;Ve<Ie;Ve++)A.emplaceBack(U,$,G,pe,ve,Se,ke)}}function Rve(c,o,u){const h=c.node;let g=0;const b=u&z1.HasMeshoptCompression;for(const w of h.meshes){if(h.lights&&h.lightMeshIndex===g||!w.featureData)continue;w.featureArray=new Yd,w.featureArray.reserve(w.featureData.length);let A=o;for(const D of w.featureData){const P=b?65535&D:D>>16&65535,B=b?D>>16&65535:65535&D,U=(15&B)<8?15&B:0,$=c.evaluatedRMEA[U],G=c.evaluatedColor[U],Z=c.emissionHeightBasedParams[U];let se;if(A&&U===2&&h.lights&&(se=new Yd,se.resize(10*h.lights.length)),Pve(w.featureArray,P,G,$,Z,w.aabb.min[2],w.aabb.max[2],se),se&&A){A=!1;const fe=h.meshes[h.lightMeshIndex];fe.featureArray=se,fe.featureArray._trim()}}w.featureArray._trim(),g++}}Kt(YC,"Tiled3dModelBucket",{omit:["layers"]}),Kt(bG,"Tiled3dModelFeature");const kve=["id","tile","layer","source","sourceLayer","state"];class Cb{constructor(o,u,h,g,b){this.type="Feature",this._vectorTileFeature=o,this._z=u,this._x=h,this._y=g,this.properties=o?o.properties:{},this.id=b}clone(){const o=new Cb(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(o.state=Object.assign({},this.state)),this.layer&&(o.layer=Object.assign({},this.layer)),this.source&&(o.source=this.source),this.sourceLayer&&(o.sourceLayer=this.sourceLayer),o}get geometry(){return this._geometry===void 0&&this._vectorTileFeature&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const u of kve)this[u]!==void 0&&(o[u]=this[u]);return o}}class Mb extends pf{constructor(o,u,h,g){super(),this.id=o,this.type="model",this.models=[],this._options=u,this._modelsInfo=new Map}loadGLTFFromURI(o){return F9(this.map._requestManager.transformRequest(o,eo.Model).url)}load(){for(const o in this._options.models){const u=this._options.models[o],h=this._modelsInfo.get(o);if(h){h.modelSpec=u;const g=h.model;g&&(g.position=u.position!=null?new Re(u.position[0],u.position[1]):new Re(0,0),g.orientation=u.orientation!=null?u.orientation:[0,0,0],Mb.applyModelSpecification(g,u),g.computeBoundsAndApplyParent(),this.models.push(g))}else this._modelsInfo.set(o,{modelSpec:u,model:null}),this.loadGLTFFromURI(u.uri).then(g=>{if(!g)return;const b=this._modelsInfo.get(o);if(!b)return;const w=cL(g),A=b.modelSpec,D=new V9(o,A.uri,A.position,A.orientation,w);Mb.applyModelSpecification(D,A),D.computeBoundsAndApplyParent(),this.models.push(D),b.model=D,this.loaded()&&this.fire(new uu("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(g=>{this.fire(new Fp(new Error(`Could not load model ${o} from ${u.uri}: ${g.message}`)))})}this.loaded()&&this.fire(new uu("data",{dataType:"source",sourceDataType:"metadata"}))}static applyModelSpecification(o,u){u.nodeOverrides&&Mb.convertNodeOverrides(o,u.nodeOverrides),u.materialOverrides&&Mb.convertMaterialOverrides(o,u.materialOverrides),u.nodeOverrideNames&&(o.nodeOverrideNames=[...u.nodeOverrideNames]),u.materialOverrideNames&&(o.materialOverrideNames=[...u.materialOverrideNames]),u.featureProperties&&(o.featureProperties=u.featureProperties)}static convertNodeOverrides(o,u){if(Array.isArray(u)&&u.every(h=>typeof h=="string")){o.nodeOverrideNames=[];for(const h of u)o.nodeOverrideNames.push(h)}else Object.entries(u).forEach(([h,g])=>{const b={orientation:[0,0,0]};if(g.hasOwnProperty("orientation")){const w=g.orientation;w&&(b.orientation=w)}o.nodeOverrides.set(h,b)})}static convertMaterialOverrides(o,u){if(Array.isArray(u)&&u.every(h=>typeof h=="string")){o.materialOverrideNames=[];for(const h of u)o.materialOverrideNames.push(h)}else Object.entries(u).forEach(([h,g])=>{const b={color:new Qr(1,1,1),colorMix:0,emissionStrength:0,opacity:1},w=g["model-color"];w!==void 0&&(b.color.r=w[0],b.color.g=w[1],b.color.b=w[2]);const A=g["model-color-mix-intensity"];A!==void 0&&(b.colorMix=A);const D=g["model-emissive-strength"];D!==void 0&&(b.emissionStrength=D);const P=g["model-opacity"];P!==void 0&&(b.opacity=P),o.materialOverrides.set(h,b)})}onAdd(o){this.map=o,this.load()}hasTransition(){return!1}loaded(){if(this._modelsInfo.size===0)return!0;for(const o of this._modelsInfo.values())if(o.model==null)return!1;return!0}getModels(){return this.models}loadTile(o,u){}serialize(){return this._options}setProperty(o,u){return!1}reload(){const o=Ku(this.id,this.scope);this.map.style.clearSource(o),this.models=[],this._modelsInfo.clear(),this.load()}setModels(o){this.models=[];const u=new Map;for(const h in o){const g=o[h];if(this._modelsInfo.has(h)){const b=this._modelsInfo.get(h);b&&b.modelSpec.uri===g.uri&&u.set(h,b)}}this._modelsInfo=u,this._options.models=o,this.load()}}function jL(c,o,u,h){const g=1<<c.z;o.lat=It((h/Jt+c.y)/g),o.lng=wt((u/Jt+c.x)/g)}function Lve(c,o,u,h){const g=c.getNodesInfo()[o];if(!g||g.hiddenByReplacement||!g.node.meshes)return;let b=Number.MAX_VALUE;const w=g.node,A=u.tile,D=h.calculatePosMatrix(A.tileID.toUnwrapped(),h.worldSize),P=g.evaluatedScale;let B=0;h.elevation&&w.elevation&&(B=w.elevation*h.elevation.exaggeration()),J(D,D,[(w.anchor?w.anchor[0]:0)*(P[0]-1),(w.anchor?w.anchor[1]:0)*(P[1]-1),B]),ie(D,D,P);const U=u.queryGeometry,$=U.isPointQuery()?U.screenBounds:U.screenGeometry,G=function(se){const fe=K([],D,se.globalMatrix);K(fe,h.expandedFarZProjMatrix,fe);for(let ue=0;ue<se.meshes.length;++ue){const pe=se.meshes[ue];if(ue===se.lightMeshIndex)continue;const ve=oL($,h,fe,pe.aabb);ve!=null&&(b=Math.min(ve,b))}if(se.children)for(const ue of se.children)G(ue)};if(G(w),b===Number.MAX_VALUE)return;const Z=new Re(0,0);return jL(A.tileID.canonical,Z,g.node.anchor[0],g.node.anchor[1]),{intersectionZ:b,position:Z,feature:g.feature}}const zve={circle:class extends Ms{constructor(c,o,u,h){super(c,{layout:VO||(VO=new Ui({"circle-sort-key":new on(ht.layout_circle["circle-sort-key"]),"circle-elevation-reference":new Xt(ht.layout_circle["circle-elevation-reference"]),visibility:new Xt(ht.layout_circle.visibility)})),paint:qO||(qO=new Ui({"circle-radius":new on(ht.paint_circle["circle-radius"]),"circle-color":new on(ht.paint_circle["circle-color"]),"circle-blur":new on(ht.paint_circle["circle-blur"]),"circle-opacity":new on(ht.paint_circle["circle-opacity"]),"circle-translate":new Xt(ht.paint_circle["circle-translate"]),"circle-translate-anchor":new Xt(ht.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Xt(ht.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Xt(ht.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new on(ht.paint_circle["circle-stroke-width"]),"circle-stroke-color":new on(ht.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new on(ht.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Xt(ht.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h)}createBucket(c){return new qs(c)}queryRadius(c){const o=c;return Nf("circle-radius",this,o)+Nf("circle-stroke-width",this,o)+fv(this.paint.get("circle-translate"))}queryIntersectsFeature(c,o,u,h,g,b,w,A){const D=$O(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),P=this.paint.get("circle-radius").evaluate(o,u)+this.paint.get("circle-stroke-width").evaluate(o,u);return ST(c,h,b,w,A,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",D,P)}getProgramIds(){return["circle"]}getDefaultProgramParams(c,o,u){const h=XO(this);return{config:new q(this,{zoom:o,lut:u}),defines:h,overrideFog:!1}}is3D(c){return!c&&!!this.layout&&this.layout.get("circle-elevation-reference")!=="none"}hasElevation(){return this.layout&&this.layout.get("circle-elevation-reference")!=="none"}},heatmap:class extends Ms{createBucket(c){return new KO(c)}constructor(c,o,u,h){super(c,{layout:ET||(ET=new Ui({visibility:new Xt(ht.layout_heatmap.visibility)})),paint:QO||(QO=new Ui({"heatmap-radius":new on(ht.paint_heatmap["heatmap-radius"]),"heatmap-weight":new on(ht.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Xt(ht.paint_heatmap["heatmap-intensity"]),"heatmap-color":new jd(ht.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Xt(ht.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=dv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}_clear(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}queryRadius(c){return Nf("heatmap-radius",this,c)}queryIntersectsFeature(c,o,u,h,g,b,w,A){const D=this.paint.get("heatmap-radius").evaluate(o,u);return ST(c,h,b,w,A,!0,!0,new Vt(0,0),D)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(c,o,u){return c==="heatmap"?{config:new q(this,{zoom:o,lut:u}),overrideFog:!1}:{}}},hillshade:class extends Ms{constructor(c,o,u,h){super(c,{layout:b1||(b1=new Ui({visibility:new Xt(ht.layout_hillshade.visibility)})),paint:x1||(x1=new Ui({"hillshade-illumination-direction":new Xt(ht.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Xt(ht.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Xt(ht.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Xt(ht.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Xt(ht.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Xt(ht.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Xt(ht.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(c,o,u){return{overrideFog:!1}}},fill:class extends Ms{constructor(c,o,u,h){super(c,{layout:_v||(_v=new Ui({"fill-sort-key":new on(ht.layout_fill["fill-sort-key"]),visibility:new Xt(ht.layout_fill.visibility),"fill-elevation-reference":new Xt(ht.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new on(ht.layout_fill["fill-construct-bridge-guard-rail"])})),paint:vv||(vv=new Ui({"fill-antialias":new Xt(ht.paint_fill["fill-antialias"]),"fill-opacity":new on(ht.paint_fill["fill-opacity"]),"fill-color":new on(ht.paint_fill["fill-color"]),"fill-outline-color":new on(ht.paint_fill["fill-outline-color"]),"fill-translate":new Xt(ht.paint_fill["fill-translate"]),"fill-translate-anchor":new Xt(ht.paint_fill["fill-translate-anchor"]),"fill-pattern":new on(ht.paint_fill["fill-pattern"]),"fill-pattern-cross-fade":new Xt(ht.paint_fill["fill-pattern-cross-fade"]),"fill-emissive-strength":new Xt(ht.paint_fill["fill-emissive-strength"]),"fill-z-offset":new on(ht.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new on(ht.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new on(ht.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h)}getProgramIds(){const c=this.paint.get("fill-pattern"),o=c&&c.constantOr(1),u=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getDefaultProgramParams(c,o,u){return{config:new q(this,{zoom:o,lut:u}),overrideFog:!1}}recalculate(c,o){super.recalculate(c,o);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new Lh(c)}queryRadius(){return fv(this.paint.get("fill-translate"))}queryIntersectsFeature(c,o,u,h,g,b){return!c.queryGeometry.isAboveHorizon&&Si(vT(c.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),h)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(c){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const o=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return c!=null?o&&!c:o}hasElevation(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}hasShadowPass(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}},"fill-extrusion":class extends Ms{constructor(c,o,u,h){super(c,{layout:h9||(h9=new Ui({visibility:new Xt(ht["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Xt(ht["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:d9||(d9=new Ui({"fill-extrusion-opacity":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new on(ht["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new on(ht["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-pattern-cross-fade":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-pattern-cross-fade"]),"fill-extrusion-height":new on(ht["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new on(ht["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new on(ht["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new on(ht["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new on(ht["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new on(ht["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(c){return new Bf(c)}queryRadius(){return fv(this.paint.get("fill-extrusion-translate"))}is3D(c){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(c,o,u,h,g,b,w,A,D){const P=$O(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),B=this.paint.get("fill-extrusion-height").evaluate(o,u),U=this.paint.get("fill-extrusion-base").evaluate(o,u),$=[0,0],G=A&&b.elevation,Z=b.elevation?b.elevation.exaggeration():1,se=c.tile.getBucket(this);if(G&&se instanceof Bf){const Se=se.centroidVertexArray,ke=D+1;ke<Se.length&&($[0]=Se.geta_centroid_pos0(ke),$[1]=Se.geta_centroid_pos1(ke))}if($[0]===0&&$[1]===1)return!1;b.projection.name==="globe"&&(h=f9([h],[new Vt(0,0),new Vt(Jt,Jt)],c.tileID.canonical).map(Se=>Se.polygon).flat());const fe=G?A:null,[ue,pe]=b9(b,h,U,B,P,w,fe,$,Z,b.center.lat,c.tileID.canonical),ve=c.queryGeometry;return v9(ue,pe,ve.isPointQuery()?ve.screenBounds:ve.screenGeometry)}},building:class extends Ms{constructor(c,o,u,h){super(c,{layout:Z9||(Z9=new Ui({visibility:new Xt(ht.layout_building.visibility),"building-facade":new on(ht.layout_building["building-facade"]),"building-facade-floors":new on(ht.layout_building["building-facade-floors"]),"building-facade-unit-width":new on(ht.layout_building["building-facade-unit-width"]),"building-facade-window":new on(ht.layout_building["building-facade-window"]),"building-roof-shape":new on(ht.layout_building["building-roof-shape"]),"building-height":new on(ht.layout_building["building-height"]),"building-base":new on(ht.layout_building["building-base"]),"building-flood-light-wall-radius":new on(ht.layout_building["building-flood-light-wall-radius"]),"building-flood-light-ground-radius":new on(ht.layout_building["building-flood-light-ground-radius"]),"building-flip-roof-orientation":new on(ht.layout_building["building-flip-roof-orientation"])})),paint:K9||(K9=new Ui({"building-opacity":new Xt(ht.paint_building["building-opacity"]),"building-ambient-occlusion-intensity":new Xt(ht.paint_building["building-ambient-occlusion-intensity"]),"building-ambient-occlusion-ground-intensity":new Xt(ht.paint_building["building-ambient-occlusion-ground-intensity"]),"building-ambient-occlusion-ground-radius":new Xt(ht.paint_building["building-ambient-occlusion-ground-radius"]),"building-ambient-occlusion-ground-attenuation":new Xt(ht.paint_building["building-ambient-occlusion-ground-attenuation"]),"building-vertical-scale":new Xt(ht.paint_building["building-vertical-scale"]),"building-cast-shadows":new Xt(ht.paint_building["building-cast-shadows"]),"building-color":new on(ht.paint_building["building-color"]),"building-emissive-strength":new on(ht.paint_building["building-emissive-strength"]),"building-facade-emissive-chance":new Xt(ht.paint_building["building-facade-emissive-chance"]),"building-cutoff-fade-range":new Xt(ht.paint_building["building-cutoff-fade-range"]),"building-flood-light-color":new Xt(ht.paint_building["building-flood-light-color"]),"building-flood-light-intensity":new Xt(ht.paint_building["building-flood-light-intensity"]),"building-flood-light-ground-attenuation":new Xt(ht.paint_building["building-flood-light-ground-attenuation"]),"building-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"building-flood-light-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(c){return new X9(c)}cutoffRange(){return this.paint.get("building-cutoff-fade-range")}hasShadowPass(){return this.paint.get("building-cast-shadows")}hasLightBeamPass(){return!0}canCastShadows(){return!0}is3D(c){return!0}queryRadius(c){return 0}queryIntersectsFeature(c,o,u,h,g,b,w,A,D,P){let B=this.layout.get("building-height").evaluate(o,u);const U=this.layout.get("building-base").evaluate(o,u),$=c.tile.getBucket(this).getFootprint(o);if($){if($.hiddenFlags!==0)return!1;B=$.height}const[G,Z]=b9(b,h,U,B,new Vt(0,0),w,null,[0,0],1,b.center.lat,c.tileID.canonical),se=c.queryGeometry;return v9(G,Z,se.isPointQuery()?se.screenBounds:se.screenGeometry)}},line:class extends Ms{constructor(c,o,u,h){const g=sH();super(c,g,o,u,h),g.layout&&(this.layout=new Cs(g.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof Gu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}emissiveStrengthExpression(){return this._transitionablePaint._values["line-emissive-strength"].value.expression}recalculate(c,o){super.recalculate(c,o),this.paint._values["line-floorwidth"]=(()=>{if(KT)return KT;const u=sH();return KT=new D_e(u.paint.properties["line-width"].specification),KT.useIntegerZoom=!0,KT})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new dL(c)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(c,o,u){const h=aH(this);return{config:new q(this,{zoom:o,lut:u}),defines:h,overrideFog:!1}}queryRadius(c){const o=c,u=lH(Nf("line-width",this,o),Nf("line-gap-width",this,o)),h=Nf("line-offset",this,o);return u/2+Math.abs(h)+fv(this.paint.get("line-translate"))}queryIntersectsFeature(c,o,u,h,g,b){if(c.queryGeometry.isAboveHorizon)return!1;const w=vT(c.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),A=c.pixelToTileUnitsFactor/2*lH(this.paint.get("line-width").evaluate(o,u),this.paint.get("line-gap-width").evaluate(o,u)),D=this.paint.get("line-offset").evaluate(o,u);return D&&(h=(function(P,B){const U=[],$=new Vt(0,0);for(let G=0;G<P.length;G++){const Z=P[G],se=[];for(let fe=0;fe<Z.length;fe++){const ue=Z[fe],pe=Z[fe+1],ve=fe===0?$:ue.sub(Z[fe-1])._unit()._perp(),Se=fe===Z.length-1?$:pe.sub(ue)._unit()._perp(),ke=ve._add(Se)._unit();ke._mult(1/(ke.x*Se.x+ke.y*Se.y)),se.push(ke._mult(B)._add(ue))}U.push(se)}return U})(h,D*c.pixelToTileUnitsFactor)),(function(P,B,U){for(let $=0;$<B.length;$++){const G=B[$];if(P.length>=3){for(let Z=0;Z<G.length;Z++)if(fl(P,G[Z]))return!0}if(Ia(P,G,U))return!0}return!1})(w,h,A)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(c){return!this.hasElevatedBuckets||this.layout&&this.layout.get("line-elevation-reference")==="hd-road-markup"}hasElevation(){return this.layout&&this.layout.get("line-elevation-reference")!=="none"}},symbol:VC,background:class extends Ms{constructor(c,o,u,h){super(c,{layout:JH||(JH=new Ui({visibility:new Xt(ht.layout_background.visibility)})),paint:eG||(eG=new Ui({"background-pitch-alignment":new Xt(ht.paint_background["background-pitch-alignment"]),"background-color":new Xt(ht.paint_background["background-color"]),"background-pattern":new Xt(ht.paint_background["background-pattern"]),"background-opacity":new Xt(ht.paint_background["background-opacity"]),"background-emissive-strength":new Xt(ht.paint_background["background-emissive-strength"]),"background-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(c,o,u){return{overrideFog:!1}}is3D(c){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:aG,"raster-particle":fG,sky:class extends Ms{constructor(c,o,u,h){super(c,{layout:lG||(lG=new Ui({visibility:new Xt(ht.layout_sky.visibility)})),paint:uG||(uG=new Ui({"sky-type":new Xt(ht.paint_sky["sky-type"]),"sky-atmosphere-sun":new Xt(ht.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Xt(ht.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Xt(ht.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Xt(ht.paint_sky["sky-gradient-radius"]),"sky-gradient":new jd(ht.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Xt(ht.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Xt(ht.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Xt(ht.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h),this._updateColorRamp()}_clear(){this.skyboxFbo&&(this.skyboxFbo.destroy(),this.skyboxFbo=null),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null),this._skyboxInvalidated=!0}_handleSpecialPaintPropertyUpdate(c){c==="sky-gradient"?this._updateColorRamp():c!=="sky-atmosphere-sun"&&c!=="sky-atmosphere-halo-color"&&c!=="sky-atmosphere-color"&&c!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=dv({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(c){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=c.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(c,o){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),g=!h,b=c.style.light,w=b.properties.get("position");return g&&b.properties.get("anchor")==="viewport"&&Hn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?zL(w.azimuthal,90-w.polar,o):zL(h[0],90-h[1],o)}const u=this.paint.get("sky-gradient-center");return zL(u[0],90-u[1],o)}isSky(){return!0}markSkyboxValid(c){this._skyboxInvalidated=!1,this._lightPosition=c.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const c=this.paint.get("sky-type");return c==="atmosphere"?["skyboxCapture","skybox"]:c==="gradient"?["skyboxGradient"]:null}},slot:class extends Ms{constructor(c,o,u,h){super(c,{paint:cG||(cG=new Ui({}))},o,null)}},model:class extends Ms{constructor(c,o,u,h){super(c,{layout:mG||(mG=new Ui({visibility:new Xt(ht.layout_model.visibility),"model-id":new on(ht.layout_model["model-id"]),"model-allow-density-reduction":new Xt(ht.layout_model["model-allow-density-reduction"])})),paint:gG||(gG=new Ui({"model-opacity":new on(ht.paint_model["model-opacity"]),"model-rotation":new on(ht.paint_model["model-rotation"]),"model-scale":new on(ht.paint_model["model-scale"]),"model-translation":new on(ht.paint_model["model-translation"]),"model-color":new on(ht.paint_model["model-color"]),"model-color-mix-intensity":new on(ht.paint_model["model-color-mix-intensity"]),"model-type":new Xt(ht.paint_model["model-type"]),"model-cast-shadows":new Xt(ht.paint_model["model-cast-shadows"]),"model-receive-shadows":new Xt(ht.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Xt(ht.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new on(ht.paint_model["model-emissive-strength"]),"model-roughness":new on(ht.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new on(ht.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Xt(ht.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Xt(ht.paint_model["model-front-cutoff"]),"model-elevation-reference":new Xt(ht.paint_model["model-elevation-reference"]),"model-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h),this.layer=c,this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(c){return new FL(c)}getProgramIds(){return["model"]}is3D(c){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(c){return c instanceof YC?8191:0}queryRenderedFeatures(c,o,u){const h=o.getSource();if(!(h&&h instanceof Mb))return{};const g=h,b={};b[this.id]=[];const w=b[this.id];let A=0;for(const D of g.models){const P=o.getFeatureState(this.sourceLayer,D.id),B={type:"Unknown",id:D.id,properties:D.featureProperties},U=this.paint.get("model-rotation").evaluate(B,P),$=this.paint.get("model-scale").evaluate(B,P),G=this.paint.get("model-translation").evaluate(B,P),Z=this.paint.get("model-elevation-reference");let se=[];OC(se,D,u,D.position,U,$,G,Z==="ground",Z==="ground",!1),u.projection.name==="globe"&&(se=AC(se,u));const fe=K([],u.projMatrix,se),ue=oL(c.isPointQuery()?c.screenBounds:c.screenGeometry,u,fe,D.aabb);if(ue!=null){const pe=new Cb(void 0,0,0,0,D.id);pe.layer=this.layer,pe.properties=structuredClone(D.featureProperties),pe.properties.layer=this.id,pe.properties.uri=D.uri,pe.properties.orientation=D.orientation,pe.sourceLayer=this.sourceLayer,pe.geometry={type:"Point",coordinates:[D.position.lng,D.position.lat]},pe.state=P,pe.source=this.source,w.push({featureIndex:A,feature:pe,intersectionZ:ue})}++A}return b}queryIntersectsFeature(c,o,u,h,g,b,w,A,D,P){if(!this.modelManager)return!1;const B=this.modelManager,U=c.tile.getBucket(this);if(!(U&&U instanceof FL))return!1;for(const $ in U.instancesPerModel){const G=U.instancesPerModel[$],Z=o.id!==void 0?o.id:o.properties&&o.properties.hasOwnProperty("id")?o.properties.id:void 0;if(G.idToFeaturesIndex.hasOwnProperty(Z)){const se=G.features[G.idToFeaturesIndex[Z]],fe=B.getModel($,P||this.scope);if(!fe)return!1;let ue=[];const pe=new Re(0,0),ve=U.canonical;let Se=Number.MAX_VALUE;for(let ke=0;ke<se.instancedDataCount;++ke){const Ie=16*(se.instancedDataOffset+ke),Ve=G.instancedDataArray.float32,qe=[Ve[Ie+4],Ve[Ie+5],Ve[Ie+6]];jL(ve,pe,Math.floor(Ve[Ie]),Math.floor(Ve[Ie+1])),OC(ue,fe,b,pe,se.rotation,se.scale,qe,!1,!1,!1),b.projection.name==="globe"&&(ue=AC(ue,b));const Ue=K([],b.projMatrix,ue),Ze=c.queryGeometry,rt=oL(Ze.isPointQuery()?Ze.screenBounds:Ze.screenGeometry,b,Ue,fe.aabb);rt!=null&&(Se=Math.min(rt,Se))}return Se!==Number.MAX_VALUE&&Se}}return!1}_handleOverridablePaintPropertyUpdate(c,o,u){return!(!this.layout||o.isDataDriven()||u.isDataDriven()||c!=="model-color"&&c!=="model-color-mix-intensity"&&c!=="model-rotation"&&c!=="model-scale"&&c!=="model-translation"&&c!=="model-emissive-strength")}_isPropertyZoomDependent(c){const o=this._transitionablePaint._values[c];return o!=null&&o.value!=null&&o.value.expression!=null&&o.value.expression instanceof us}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends Ms{constructor(c,o,u,h){super(c,{layout:tp||(tp=new Ui({"clip-layer-types":new Xt(ht.layout_clip["clip-layer-types"]),"clip-layer-scope":new Xt(ht.layout_clip["clip-layer-scope"]),visibility:new Xt(ht.layout_clip.visibility)})),paint:hC||(hC=new Ui({}))},o,u,h)}recalculate(c,o){super.recalculate(c,o)}createBucket(c){return new dC(c)}is3D(c){return!0}}},UL=new Qr(0,0,0);function Nve(c,o,u){c===1&&o.icons.push((function(h,g){return(function(b){if(b.usvg_tree.height||(b.usvg_tree.height=b.usvg_tree.width),!b.metadata)return b;const{metadata:w}=b;if(w.content_area){const{content_area:A}=w;A.left==null&&(A.left=0),A.top==null&&(A.top=A.left),A.width==null&&(A.width=b.usvg_tree.width),A.height==null&&(A.height=A.width)}if(w.text_placeholder){const{text_placeholder:A}=w;A.top==null&&(A.top=A.left),A.height==null&&(A.height=A.width)}return w.stretch_x&&w.stretch_x.length&&xG(w,"x"),w.stretch_y&&w.stretch_y.length&&xG(w,"y"),b})(h.readFields(Fve,{name:void 0},g))})(u,u.readVarint()+u.pos))}function xG(c,o){const u=[],h=c[`stretch_${o}`];let g=null;for(let b=0;b<h.length;b++)g===null?g=u.length===0?h[0]:u[u.length-1][1]+h[b]:(u.push([g,g+h[b]]),g=null);c[`stretch_${o}_areas`]=u}function Fve(c,o,u){c===1?o.name=u.readString():c===2?o.metadata=(function(h,g){return h.readFields(Bve,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},g)})(u,u.readVarint()+u.pos):c===3&&(o.usvg_tree=(function(h,g){return h.readFields($ve,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},g)})(u,u.readVarint()+u.pos),o.data="usvg_tree")}function Bve(c,o,u){c===1?o.stretch_x=u.readPackedVarint():c===2?o.stretch_y=u.readPackedVarint():c===3?o.content_area=wG(u,u.readVarint()+u.pos):c===4?o.variables.push((function(h,g){return h.readFields(Uve,{name:void 0},g)})(u,u.readVarint()+u.pos)):c===5&&(o.text_placeholder=wG(u,u.readVarint()+u.pos))}function wG(c,o){return c.readFields(jve,{},o)}function jve(c,o,u){c===1?o.left=u.readVarint():c===2?o.width=u.readVarint():c===3?o.top=u.readVarint():c===4&&(o.height=u.readVarint())}function Uve(c,o,u){c===1?o.name=u.readString():c===2&&(o.rgb_color=ZC(u.readVarint()),o.value="rgb_color")}function $ve(c,o,u){c===1?o.width=o.height=u.readVarint():c===2?o.height=u.readVarint():c===3?o.children.push(WC(u,u.readVarint()+u.pos)):c===4?o.linear_gradients.push((function(h,g){return h.readFields(Xve,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},g)})(u,u.readVarint()+u.pos)):c===5?o.radial_gradients.push((function(h,g){return h.readFields(Kve,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},g)})(u,u.readVarint()+u.pos)):c===7?o.clip_paths.push((function(h,g){return h.readFields(Qve,{children:[]},g)})(u,u.readVarint()+u.pos)):c===8&&o.masks.push((function(h,g){const b=h.readFields(Jve,{left:0,width:20,mask_type:1,children:[]},g);return b.height==null&&(b.height=b.width),b.top==null&&(b.top=b.left),b})(u,u.readVarint()+u.pos))}function WC(c,o){return c.readFields(Vve,{},o)}function Vve(c,o,u){c===1?(o.group=(function(h,g){return h.readFields(qve,{opacity:255,children:[]},g)})(u,u.readVarint()+u.pos),o.node="group"):c===2&&(o.path=(function(h,g){return h.readFields(Gve,{paint_order:1,commands:[],step:1,diffs:[],rule:1},g)})(u,u.readVarint()+u.pos),o.node="path")}function qve(c,o,u){c===1?o.transform=XC(u,u.readVarint()+u.pos):c===2?o.opacity=u.readVarint():c===5?o.clip_path_idx=u.readVarint():c===6?o.mask_idx=u.readVarint():c===7&&o.children.push(WC(u,u.readVarint()+u.pos))}function XC(c,o){return c.readFields(Hve,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},o)}function Hve(c,o,u){c===1?o.sx=u.readFloat():c===2?o.ky=u.readFloat():c===3?o.kx=u.readFloat():c===4?o.sy=u.readFloat():c===5?o.tx=u.readFloat():c===6&&(o.ty=u.readFloat())}function Gve(c,o,u){c===1?o.fill=(function(h,g){return h.readFields(Yve,{rgb_color:UL,paint:"rgb_color",opacity:255},g)})(u,u.readVarint()+u.pos):c===2?o.stroke=(function(h,g){return h.readFields(Wve,{rgb_color:UL,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},g)})(u,u.readVarint()+u.pos):c===3?o.paint_order=u.readVarint():c===5?u.readPackedVarint(o.commands):c===6?o.step=u.readFloat():c===7?u.readPackedSVarint(o.diffs):c===8&&(o.rule=u.readVarint())}function Yve(c,o,u){c===1?(o.rgb_color=ZC(u.readVarint()),o.paint="rgb_color"):c===2?(o.linear_gradient_idx=u.readVarint(),o.paint="linear_gradient_idx"):c===3?(o.radial_gradient_idx=u.readVarint(),o.paint="radial_gradient_idx"):c===5&&(o.opacity=u.readVarint())}function ZC(c){return new Qr((c>>16&255)/255,(c>>8&255)/255,(255&c)/255,1)}function Wve(c,o,u){c===1?(o.rgb_color=ZC(u.readVarint()),o.paint="rgb_color"):c===2?(o.linear_gradient_idx=u.readVarint(),o.paint="linear_gradient_idx"):c===3?(o.radial_gradient_idx=u.readVarint(),o.paint="radial_gradient_idx"):c===5?u.readPackedFloat(o.dasharray):c===6?o.dashoffset=u.readFloat():c===7?o.miterlimit=u.readFloat():c===8?o.opacity=u.readVarint():c===9?o.width=u.readFloat():c===10?o.linecap=u.readVarint():c===11&&(o.linejoin=u.readVarint())}function Xve(c,o,u){c===1?o.transform=XC(u,u.readVarint()+u.pos):c===2?o.spread_method=u.readVarint():c===3?o.stops.push(SG(u,u.readVarint()+u.pos)):c===4?o.x1=u.readFloat():c===5?o.y1=u.readFloat():c===6?o.x2=u.readFloat():c===7&&(o.y2=u.readFloat())}function SG(c,o){return c.readFields(Zve,{offset:0,opacity:255,rgb_color:UL},o)}function Zve(c,o,u){c===1?o.offset=u.readFloat():c===2?o.opacity=u.readVarint():c===3&&(o.rgb_color=ZC(u.readVarint()))}function Kve(c,o,u){c===1?o.transform=XC(u,u.readVarint()+u.pos):c===2?o.spread_method=u.readVarint():c===3?o.stops.push(SG(u,u.readVarint()+u.pos)):c===4?o.cx=u.readFloat():c===5?o.cy=u.readFloat():c===6?o.r=u.readFloat():c===7?o.fx=u.readFloat():c===8?o.fy=u.readFloat():c===9&&(o.fr=u.readFloat())}function Qve(c,o,u){c===1?o.transform=XC(u,u.readVarint()+u.pos):c===2?o.clip_path_idx=u.readVarint():c===3&&o.children.push(WC(u,u.readVarint()+u.pos))}function Jve(c,o,u){c===1?o.left=o.top=u.readFloat():c===2?o.width=o.height=u.readFloat():c===3?o.top=u.readFloat():c===4?o.height=u.readFloat():c===5?o.mask_type=u.readVarint():c===6?o.mask_idx=u.readVarint():c===7&&o.children.push(WC(u,u.readVarint()+u.pos))}class e0e{static calculate(o={},u=[]){const h=new Map,g=new Map;if(Object.keys(o).length===0)return h;u.forEach(b=>{g.set(b.name,b.rgb_color||new Qr(0,0,0))});for(const[b,w]of Object.entries(o))g.has(b)?h.set(g.get(b).toString(),w):console.warn(`Ignoring unknown image variable "${b}"`);return h}}function H1(c,o=255,u){const h=o/255,g=c.toString(),b=u.has(g)?u.get(g).clone():c.clone();return b.a*=h,b.toString()}function hE(c,o){if(!iu()){const u=document.createElement("canvas");return u.width=c,u.height=o,u}return new OffscreenCanvas(c,o)}let $L,dE=null;function VL(c,o,u,h,g){for(const b of h.children)TG(c,o,u,b,g)}function TG(c,o,u,h,g){h.group?(c.save(),(function(b,w,A,D,P){const B=D.mask_idx!=null?A.masks[D.mask_idx]:null,U=D.clip_path_idx!=null?A.clip_paths[D.clip_path_idx]:null;if(D.transform&&(w=G1(D.transform).preMultiplySelf(w)),!(function(Z,se,fe){return Z.opacity!==255||se||fe})(D,U!=null,B!=null))return void VL(b,w,A,D,P);const $=hE(b.canvas.width,b.canvas.height),G=$.getContext("2d");VL(G,w,A,D,P),U&&IG(G,w,A,U),B&&PG(G,w,A,B,P),b.globalAlpha=D.opacity/255,b.drawImage($,0,0)})(c,o,u,h.group,g),c.restore()):h.path&&(c.save(),(function(b,w,A,D,P){b.setTransform(w),D.paint_order===1?(EG(b,A,D,P),OG(b,A,D,P)):(OG(b,A,D,P),EG(b,A,D,P))})(c,o,u,h.path,g),c.restore())}function EG(c,o,u,h){const g=u.fill;if(!g)return;const b=g.opacity/255;switch(c.save(),c.beginPath(),RG(u,c),g.paint){case"rgb_color":c.fillStyle=H1(g.rgb_color,g.opacity,h);break;case"linear_gradient_idx":{const w=o.linear_gradients[g.linear_gradient_idx];w.transform&&c.setTransform(G1(w.transform).preMultiplySelf(c.getTransform())),c.fillStyle=CG(c,w,b,h);break}case"radial_gradient_idx":{const w=o.radial_gradients[g.radial_gradient_idx];w.transform&&c.setTransform(G1(w.transform).preMultiplySelf(c.getTransform())),c.fillStyle=MG(c,w,b,h)}}c.fill(AG(u)),c.restore()}function AG(c){return c.rule===1?"nonzero":c.rule===2?"evenodd":void 0}function OG(c,o,u,h){const g=u.stroke;if(!g)return;const b=kG(u);c.lineWidth=g.width,c.miterLimit=g.miterlimit,c.setLineDash(g.dasharray),c.lineDashOffset=g.dashoffset;const w=g.opacity/255;switch(g.paint){case"rgb_color":c.strokeStyle=H1(g.rgb_color,g.opacity,h);break;case"linear_gradient_idx":c.strokeStyle=CG(c,o.linear_gradients[g.linear_gradient_idx],w,h,!0);break;case"radial_gradient_idx":c.strokeStyle=MG(c,o.radial_gradients[g.radial_gradient_idx],w,h,!0)}switch(g.linejoin){case 2:case 1:c.lineJoin="miter";break;case 3:c.lineJoin="round";break;case 4:c.lineJoin="bevel"}switch(g.linecap){case 1:c.lineCap="butt";break;case 2:c.lineCap="round";break;case 3:c.lineCap="square"}c.stroke(b)}function CG(c,o,u,h,g=!1){if(o.stops.length===1){const $=o.stops[0];return H1($.rgb_color,$.opacity*u,h)}const{x1:b,y1:w,x2:A,y2:D}=o;let P=new DOMPoint(b,w),B=new DOMPoint(A,D);if(g){const $=G1(o.transform);P=$.transformPoint(P),B=$.transformPoint(B)}const U=c.createLinearGradient(P.x,P.y,B.x,B.y);for(const $ of o.stops)U.addColorStop($.offset,H1($.rgb_color,$.opacity*u,h));return U}function MG(c,o,u,h,g=!1){if(o.stops.length===1){const ue=o.stops[0];return H1(ue.rgb_color,ue.opacity*u,h)}const b=G1(o.transform),{fx:w,fy:A,fr:D,cx:P,cy:B,r:U}=o;let $=new DOMPoint(w,A),G=new DOMPoint(P,B),Z=D,se=U;if(g){$=b.transformPoint($),G=b.transformPoint(G);const ue=(b.a+b.d)/2;Z=D*ue,se=o.r*ue}const fe=c.createRadialGradient($.x,$.y,Z,G.x,G.y,se);for(const ue of o.stops)fe.addColorStop(ue.offset,H1(ue.rgb_color,ue.opacity*u,h));return fe}function DG(c,o,u,h){const g=h.transform?G1(h.transform).preMultiplySelf(o):o,b=hE(c.canvas.width,c.canvas.height),w=b.getContext("2d");for(const D of h.children)if(D.group)DG(w,g,u,D.group);else if(D.path){const P=D.path,B=new Path2D;B.addPath(kG(P),g),w.fill(B,AG(P))}const A=h.clip_path_idx!=null?u.clip_paths[h.clip_path_idx]:null;A&&IG(w,g,u,A),c.globalCompositeOperation="source-over",c.drawImage(b,0,0)}function IG(c,o,u,h){const g=hE(c.canvas.width,c.canvas.height);DG(g.getContext("2d"),o,u,h),c.globalCompositeOperation="destination-in",c.drawImage(g,0,0)}function PG(c,o,u,h,g){if(h.children.length===0)return;const b=h.mask_idx!=null?u.masks[h.mask_idx]:null;b&&PG(c,o,u,b,g);const w=c.canvas.width,A=c.canvas.height,D=hE(w,A),P=D.getContext("2d"),B=h.width,U=h.height,$=h.left,G=h.top,Z=new Path2D,se=new Path2D;se.rect($,G,B,U),Z.addPath(se,o),P.clip(Z);for(const pe of h.children)TG(P,o,u,pe,g);const fe=P.getImageData(0,0,w,A),ue=fe.data;if(h.mask_type===1)for(let pe=0;pe<ue.length;pe+=4)ue[pe+3]=ue[pe+3]/255*(.2126*ue[pe]+.7152*ue[pe+1]+.0722*ue[pe+2]);P.putImageData(fe,0,0),c.globalCompositeOperation="destination-in",c.drawImage(D,0,0)}function G1(c){return c?new DOMMatrix([c.sx,c.ky,c.kx,c.sy,c.tx,c.ty]):new DOMMatrix}function RG(c,o){const u=c.step;let h=c.diffs[0]*u,g=c.diffs[1]*u;o.moveTo(h,g);for(let b=0,w=2;b<c.commands.length;b++)switch(c.commands[b]){case 1:h+=c.diffs[w++]*u,g+=c.diffs[w++]*u,o.moveTo(h,g);break;case 2:h+=c.diffs[w++]*u,g+=c.diffs[w++]*u,o.lineTo(h,g);break;case 3:{const A=h+c.diffs[w++]*u,D=g+c.diffs[w++]*u;h=A+c.diffs[w++]*u,g=D+c.diffs[w++]*u,o.quadraticCurveTo(A,D,h,g);break}case 4:{const A=h+c.diffs[w++]*u,D=g+c.diffs[w++]*u,P=A+c.diffs[w++]*u,B=D+c.diffs[w++]*u;h=P+c.diffs[w++]*u,g=B+c.diffs[w++]*u,o.bezierCurveTo(A,D,P,B,h,g);break}case 5:o.closePath();break}return o}function kG(c){return RG(c,new Path2D)}class KC{constructor(o){this.capacity=o,this.cache=new Map}get(o){if(!this.cache.has(o))return;const u=this.cache.get(o);return this.cache.delete(o),this.cache.set(o,u),u}put(o,u){this.cache.has(o)?this.cache.delete(o):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(o,u)}delete(o){this.cache.delete(o)}}Kt(KC,"LRUCache");class qL{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(o){return new Vo(o,o.data)}getFromCache(o,u,h){return this.cacheMap.has(h)||this.cacheMap.set(h,new KC(150)),this.cacheMap.get(h).get(Ku(o.toString(),u))}setInCache(o,u,h,g){this.cacheDependenciesMap.has(g)||this.cacheDependenciesMap.set(g,new Map),this.cacheMap.has(g)||this.cacheMap.set(g,new KC(150));const b=this.cacheDependenciesMap.get(g),w=Ku(o.id.toString(),h);b.get(w)||b.set(w,new Set);const A=this.cacheMap.get(g),D=o.toString();b.get(w).add(D),A.put(Ku(o.toString(),h),u)}removeImagesFromCacheByIds(o,u,h=0){if(!this.cacheMap.has(h)||!this.cacheDependenciesMap.has(h))return;const g=this.cacheMap.get(h),b=this.cacheDependenciesMap.get(h);for(const w of o){const A=Ku(w.toString(),u);if(b.has(A)){for(const D of b.get(A))g.delete(D);b.delete(A)}}}rasterize(o,u,h,g){const b=this.getFromCache(o,h,g);if(b)return b.clone();const w=(function(D,P){const B=e0e.calculate(P.params,D.metadata?D.metadata.variables:[]),U=D.usvg_tree,$=U.width,G=U.height,Z=Math.max(1,Math.round($*P.sx)),se=Math.max(1,Math.round(G*P.sy)),fe=new DOMMatrix([Z/$,0,0,se/G,0,0]);return dE===null&&(dE=hE(10,10),$L=dE.getContext("2d",{willReadFrequently:!0})),dE.width=Z,dE.height=se,VL($L,fe,U,U,B),$L.getImageData(0,0,Z,se)})(u.icon,o),A=qL._getImage(w);return this.setInCache(o,A,h,g),A.clone()}}class LG{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,u){const h=this.toIdx(o,u);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(o,u){return this.leaves[this.toIdx(o,u)]}toIdx(o,u){return u*this.size+o}}function zG(c,o,u,h){let g=0,b=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(h[w])<1e-15){if(u[w]<c[w]||u[w]>o[w])return null}else{const A=1/h[w];let D=(c[w]-u[w])*A,P=(o[w]-u[w])*A;if(D>P){const B=D;D=P,P=B}if(D>g&&(g=D),P<b&&(b=P),g>b)return null}return g}function NG(c,o,u,h,g,b,w,A,D,P,B){const U=h-c,$=g-o,G=b-u,Z=w-c,se=A-o,fe=D-u,ue=B[1]*fe-B[2]*se,pe=B[2]*Z-B[0]*fe,ve=B[0]*se-B[1]*Z,Se=U*ue+$*pe+G*ve;if(Math.abs(Se)<1e-15)return null;const ke=1/Se,Ie=P[0]-c,Ve=P[1]-o,qe=P[2]-u,Ue=(Ie*ue+Ve*pe+qe*ve)*ke;if(Ue<0||Ue>1)return null;const Ze=Ve*G-qe*$,rt=qe*U-Ie*G,Et=Ie*$-Ve*U,xt=(B[0]*Ze+B[1]*rt+B[2]*Et)*ke;return xt<0||Ue+xt>1?null:(Z*Ze+se*rt+fe*Et)*ke}function FG(c,o,u){return(c-o)/(u-o)}function BG(c,o,u,h,g,b,w,A,D){const P=1<<u,B=b-h,U=w-g,$=(c+1)/P*B+h,G=(o+0)/P*U+g,Z=(o+1)/P*U+g;A[0]=(c+0)/P*B+h,A[1]=G,D[0]=$,D[1]=Z}class jG{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=(function(b){const w=Math.ceil(Math.log2(b.dim/8)),A=[];let D=Math.ceil(Math.pow(2,w));const P=1/D,B=(G,Z,se,fe,ue)=>{const pe=fe?1:0,ve=(G+1)*se-pe,Se=Z*se,ke=(Z+1)*se-pe;ue[0]=G*se,ue[1]=Se,ue[2]=ve,ue[3]=ke};let U=new LG(D);const $=[];for(let G=0;G<D*D;G++){B(G%D,Math.floor(G/D),P,!1,$);const Z=Av($[0],$[1],b),se=Av($[2],$[1],b),fe=Av($[2],$[3],b),ue=Av($[0],$[3],b);U.minimums.push(Math.min(Z,se,fe,ue)),U.maximums.push(Math.max(Z,se,fe,ue)),U.leaves.push(1)}for(A.push(U),D/=2;D>=1;D/=2){const G=A[A.length-1];U=new LG(D);for(let Z=0;Z<D*D;Z++){B(Z%D,Math.floor(Z/D),2,!0,$);const se=G.getElevation($[0],$[1]),fe=G.getElevation($[2],$[1]),ue=G.getElevation($[2],$[3]),pe=G.getElevation($[0],$[3]),ve=G.isLeaf($[0],$[1]),Se=G.isLeaf($[2],$[1]),ke=G.isLeaf($[2],$[3]),Ie=G.isLeaf($[0],$[3]),Ve=Math.min(se.min,fe.min,ue.min,pe.min),qe=Math.max(se.max,fe.max,ue.max,pe.max),Ue=ve&&Se&&ke&&Ie;U.maximums.push(qe),U.minimums.push(Ve),U.leaves.push(qe-Ve<=5&&Ue?1:0)}A.push(U)}return A})(this.dem),h=u.length-1,g=u[h];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(u,0,0,h,0)}raycastRoot(o,u,h,g,b,w,A=1){return zG([o,u,-100],[h,g,this.maximums[0]*A],b,w)}raycast(o,u,h,g,b,w,A=1){if(!this.nodeCount)return null;const D=this.raycastRoot(o,u,h,g,b,w,A);if(D==null)return null;const P=[],B=[],U=[],$=[],G=[{idx:0,t:D,nodex:0,nodey:0,depth:0}];for(;G.length>0;){const{idx:Z,t:se,nodex:fe,nodey:ue,depth:pe}=G.pop();if(this.leaves[Z]){BG(fe,ue,pe,o,u,h,g,U,$);const Se=1<<pe,ke=(fe+0)/Se,Ie=(fe+1)/Se,Ve=(ue+0)/Se,qe=(ue+1)/Se,Ue=Av(ke,Ve,this.dem)*A,Ze=Av(Ie,Ve,this.dem)*A,rt=Av(Ie,qe,this.dem)*A,Et=Av(ke,qe,this.dem)*A,xt=NG(U[0],U[1],Ue,$[0],U[1],Ze,$[0],$[1],rt,b,w),Tt=NG($[0],$[1],rt,U[0],$[1],Et,U[0],U[1],Ue,b,w),kt=Math.min(xt!==null?xt:Number.MAX_VALUE,Tt!==null?Tt:Number.MAX_VALUE);if(kt!==Number.MAX_VALUE)return kt;{const Pt=jt([],b,w,se);if(UG(Ue,Ze,Et,rt,FG(Pt[0],U[0],$[0]),FG(Pt[1],U[1],$[1]))>=Pt[2])return se}continue}let ve=0;for(let Se=0;Se<this._siblingOffset.length;Se++){BG((fe<<1)+this._siblingOffset[Se][0],(ue<<1)+this._siblingOffset[Se][1],pe+1,o,u,h,g,U,$),U[2]=-100,$[2]=this.maximums[this.childOffsets[Z]+Se]*A;const ke=zG(U,$,b,w);if(ke!=null){const Ie=ke;P[Se]=Ie;let Ve=!1;for(let qe=0;qe<ve&&!Ve;qe++)Ie>=P[B[qe]]&&(B.splice(qe,0,Se),Ve=!0);Ve||(B[ve]=Se),ve++}}for(let Se=0;Se<ve;Se++){const ke=B[Se];G.push({idx:this.childOffsets[Z]+ke,t:P[ke],nodex:(fe<<1)+this._siblingOffset[ke][0],nodey:(ue<<1)+this._siblingOffset[ke][1],depth:pe+1})}}return null}_addNode(o,u,h){return this.minimums.push(o),this.maximums.push(u),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(o,u,h,g,b){if(o[g].isLeaf(u,h)===1)return;this.childOffsets[b]||(this.childOffsets[b]=this.nodeCount);const w=g-1,A=o[w];let D=0,P=0;for(let B=0;B<this._siblingOffset.length;B++){const U=2*u+this._siblingOffset[B][0],$=2*h+this._siblingOffset[B][1],G=A.getElevation(U,$),Z=A.isLeaf(U,$),se=this._addNode(G.min,G.max,Z);Z&&(D|=1<<B),P||(P=se)}for(let B=0;B<this._siblingOffset.length;B++)D&1<<B||this._construct(o,2*u+this._siblingOffset[B][0],2*h+this._siblingOffset[B][1],w,P+B)}}function UG(c,o,u,h,g,b){return Vn(Vn(c,u,b),Vn(o,h,b),g)}function Av(c,o,u){const h=u.dim,g=ze(c*h-.5,0,h-1),b=ze(o*h-.5,0,h-1),w=Math.floor(g),A=Math.floor(b),D=Math.min(w+1,h-1),P=Math.min(A+1,h-1);return UG(u.get(w,A),u.get(D,A),u.get(w,P),u.get(D,P),g-w,b-A)}const t0e={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function n0e(c,o,u){return(256*c*256+256*o+u)/10-1e4}function r0e(c,o,u){return 256*c+o+u/256-32768}class QC{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,u,h,g=!1){if(this.uid=o,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void Hn(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const b=this.dim=u.height-2,w=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.floatView=new Float32Array(u.data.buffer),this.borderReady=g,this._modifiedForSources={},!g){for(let D=0;D<b;D++)w[this._idx(-1,D)]=w[this._idx(0,D)],w[this._idx(b,D)]=w[this._idx(b-1,D)],w[this._idx(D,-1)]=w[this._idx(D,0)],w[this._idx(D,b)]=w[this._idx(D,b-1)];w[this._idx(-1,-1)]=w[this._idx(0,0)],w[this._idx(b,-1)]=w[this._idx(b-1,0)],w[this._idx(-1,b)]=w[this._idx(0,b-1)],w[this._idx(b,b)]=w[this._idx(b-1,b-1)]}const A=h==="terrarium"?r0e:n0e;for(let D=0;D<w.length;++D){const P=4*D;this.floatView[D]=A(this.pixels[P],this.pixels[P+1],this.pixels[P+2])}this._timestamp=Sl.now()}_buildQuadTree(){this._tree=new jG(this)}get(o,u,h=!1){h&&(o=ze(o,-1,this.dim),u=ze(u,-1,this.dim));const g=this._idx(o,u);return this.floatView[g]}set(o,u,h){const g=this._idx(o,u),b=this.floatView[g];return this.floatView[g]=h,h-b}static getUnpackVector(o){return t0e[o]}_idx(o,u){if(o<-1||o>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(o+1)}static pack(o,u){const h=[0,0,0,0],g=QC.getUnpackVector(u);let b=Math.floor((o+g[3])/g[2]);return h[2]=b%256,b=Math.floor(b/256),h[1]=b%256,b=Math.floor(b/256),h[0]=b,h}getPixels(){return new JO({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,u,h){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=u*this.dim,b=u*this.dim+this.dim,w=h*this.dim,A=h*this.dim+this.dim;switch(u){case-1:g=b-1;break;case 1:b=g+1}switch(h){case-1:w=A-1;break;case 1:A=w+1}const D=-u*this.dim,P=-h*this.dim;for(let B=w;B<A;B++)for(let U=g;U<b;U++){const $=4*this._idx(U,B),G=4*this._idx(U+D,B+P);this.pixels[$+0]=o.pixels[G+0],this.pixels[$+1]=o.pixels[G+1],this.pixels[$+2]=o.pixels[G+2],this.pixels[$+3]=o.pixels[G+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function i0e(c,o,u){c===1?o.headerLength=u.readFixed32():c===2?o.x=u.readVarint():c===3?o.y=u.readVarint():c===4?o.z=u.readVarint():c===5&&o.layers.push((function(h,g){return h.readFields(u0e,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},g)})(u,u.readVarint()+u.pos))}function a0e(c,o,u){c===1?(o.delta_filter=(function(h,g){return h.readFields(o0e,{blockSize:0},g)})(u,u.readVarint()+u.pos),o.filter="delta_filter"):c===2?(u.readVarint(),o.filter="zigzag_filter"):c===3?(u.readVarint(),o.filter="bitshuffle_filter"):c===4&&(u.readVarint(),o.filter="byteshuffle_filter")}function o0e(c,o,u){c===1&&(o.blockSize=u.readVarint())}function s0e(c,o,u){c===1?(u.readVarint(),o.codec="gzip_data"):c===2?(u.readVarint(),o.codec="jpeg_image"):c===3?(u.readVarint(),o.codec="webp_image"):c===4&&(u.readVarint(),o.codec="png_image")}function l0e(c,o,u){let h=0,g=0;c===1?o.firstByte=u.readFixed64():c===2?o.lastByte=u.readFixed64():c===3?o.filters.push((function(b,w){return b.readFields(a0e,{},w)})(u,u.readVarint()+u.pos)):c===4?o.codec=(function(b,w){return b.readFields(s0e,{},w)})(u,u.readVarint()+u.pos):c===5?g=u.readFloat():c===6?h=u.readFloat():c===7?o.bands.push(u.readString()):c===8?o.offset=u.readDouble():c===9&&(o.scale=u.readDouble()),o.offset===0&&(o.offset=g),o.scale===0&&(o.scale=h)}function u0e(c,o,u){c===1?o.version=u.readVarint():c===2?o.name=u.readString():c===3?o.units=u.readString():c===4?o.tileSize=u.readVarint():c===5?o.buffer=u.readVarint():c===6?o.pixelFormat=u.readVarint():c===7&&o.dataIndex.push((function(h,g){return h.readFields(l0e,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},g)})(u,u.readVarint()+u.pos))}function c0e(c,o,u){if(c===2)(function(h,g,b){h.readFields(f0e,b,g)})(u,u.readVarint()+u.pos,o);else if(c===3)throw new Error("Not implemented")}function f0e(c,o,u){if(c===1){let h=0;const g=u.readVarint()+u.pos;for(;u.pos<g;)o[h++]=u.readVarint()}}function h0e(c,o){if(o.length!==4)throw new Error(`Expected data of dimension 4 but got ${o.length}.`);let u=o[3];for(let h=2;h>=1;h--){const g=h===1?1:0,b=h===2?1:0;for(let w=0;w<o[0];w++){const A=o[1]*w;for(let D=g;D<o[1];D++){const P=o[2]*(D+A);for(let B=b;B<o[2];B++){const U=o[3]*(B+P);for(let $=0;$<o[3];$++){const G=U+$;c[G]+=c[G-u]}}}}u*=o[h]}return c}function d0e(c){for(let o=0,u=c.length;o<u;o++)c[o]=c[o]>>>1^-(1&c[o]);return c}function p0e(c,o){switch(o){case"uint32":return c;case"uint16":for(let u=0;u<c.length;u+=2){const h=c[u],g=c[u+1];c[u]=(240&h)>>4|(61440&h)>>8|(240&g)<<4|61440&g,c[u+1]=15&h|(3840&h)>>4|(15&g)<<8|(3840&g)<<4}return c;case"uint8":for(let u=0;u<c.length;u+=4){const h=c[u],g=c[u+1],b=c[u+2],w=c[u+3];c[u+0]=(192&h)>>6|(192&g)>>4|(192&b)>>2|192&w,c[u+1]=(48&h)>>4|(48&g)>>2|48&b|(48&w)<<2,c[u+2]=(12&h)>>2|12&g|(12&b)<<2|(12&w)<<4,c[u+3]=3&h|(3&g)<<2|(3&b)<<4|(3&w)<<6}return c;default:throw new Error(`Invalid pixel format, "${o}"`)}}Kt(QC,"DEMData"),Kt(jG,"DemMinMaxQuadTree",{omit:["dem"]});var jf=Uint8Array,pE=Uint16Array,m0e=Int32Array,$G=new jf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),VG=new jf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),g0e=new jf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qG=function(c,o){for(var u=new pE(31),h=0;h<31;++h)u[h]=o+=1<<c[h-1];var g=new m0e(u[30]);for(h=1;h<30;++h)for(var b=u[h];b<u[h+1];++b)g[b]=b-u[h]<<5|h;return{b:u,r:g}},HG=qG($G,2),GG=HG.b,y0e=HG.r;GG[28]=258,y0e[258]=28;for(var _0e=qG(VG,0).b,YG=new pE(32768),Eo=0;Eo<32768;++Eo){var Y1=(43690&Eo)>>1|(21845&Eo)<<1;YG[Eo]=((65280&(Y1=(61680&(Y1=(52428&Y1)>>2|(13107&Y1)<<2))>>4|(3855&Y1)<<4))>>8|(255&Y1)<<8)>>1}var mE=function(c,o,u){for(var h=c.length,g=0,b=new pE(o);g<h;++g)c[g]&&++b[c[g]-1];var w,A=new pE(o);for(g=1;g<o;++g)A[g]=A[g-1]+b[g-1]<<1;w=new pE(1<<o);var D=15-o;for(g=0;g<h;++g)if(c[g])for(var P=g<<4|c[g],B=o-c[g],U=A[c[g]-1]++<<B,$=U|(1<<B)-1;U<=$;++U)w[YG[U]>>D]=P;return w},gE=new jf(288);for(Eo=0;Eo<144;++Eo)gE[Eo]=8;for(Eo=144;Eo<256;++Eo)gE[Eo]=9;for(Eo=256;Eo<280;++Eo)gE[Eo]=7;for(Eo=280;Eo<288;++Eo)gE[Eo]=8;var WG=new jf(32);for(Eo=0;Eo<32;++Eo)WG[Eo]=5;var v0e=mE(gE,9),b0e=mE(WG,5),HL=function(c){for(var o=c[0],u=1;u<c.length;++u)c[u]>o&&(o=c[u]);return o},rp=function(c,o,u){var h=o/8|0;return(c[h]|c[h+1]<<8)>>(7&o)&u},GL=function(c,o){var u=o/8|0;return(c[u]|c[u+1]<<8|c[u+2]<<16)>>(7&o)},x0e=function(c){return(c+7)/8|0},w0e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ip=function(c,o,u){var h=new Error(o||w0e[c]);if(h.code=c,Error.captureStackTrace&&Error.captureStackTrace(h,ip),!u)throw h;return h},S0e=new jf(0),T0e=typeof TextDecoder<"u"&&new TextDecoder;try{T0e.decode(S0e,{stream:!0})}catch{}const E0e={gzip_data:"gzip"};class zh extends Error{constructor(o){super(o),this.name="MRTError"}}const A0e={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},XG={uint32:1,uint16:2,uint8:4},O0e={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let YL;class JC{constructor(o=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=o}getLayer(o){const u=this.layers[o];if(!u)throw new zh(`Layer '${o}' not found`);return u}getHeaderLength(o){const u=new Uint8Array(o),h=new DataView(o);if(u[0]!==13)throw new zh("File is not a valid MRT.");return h.getUint32(1,!0)}parseHeader(o){const u=new Uint8Array(o),h=this.getHeaderLength(o);if(u.length<h)throw new zh(`Expected header with length >= ${h} but got buffer of length ${u.length}`);const g=new YL(u.subarray(0,h)).readFields(i0e,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0);if(!isNaN(this.x)&&(this.x!==g.x||this.y!==g.y||this.z!==g.z))throw new zh(`Invalid attempt to parse header ${g.z}/${g.x}/${g.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=g.x,this.y=g.y,this.z=g.z;for(const b of g.layers)this.layers[b.name]=new ZG(b,{cacheSize:this._cacheSize});return this}createDecodingTask(o){const u=[],h=this.getLayer(o.layerName);for(let g of o.blockIndices){const b=h.dataIndex[g],w=b.firstByte-o.firstByte,A=b.lastByte-o.firstByte;if(h._blocksInProgress.has(g))continue;const D={layerName:h.name,firstByte:w,lastByte:A,pixelFormat:h.pixelFormat,blockIndex:g,blockShape:[b.bands.length].concat(h.bandShape),buffer:h.buffer,codec:b.codec.codec,filters:b.filters.map(P=>P.filter)};h._blocksInProgress.add(g),u.push(D)}return new KG(u,()=>{u.forEach(g=>h._blocksInProgress.delete(g.blockIndex))},(g,b)=>{if(u.forEach(w=>h._blocksInProgress.delete(w.blockIndex)),g)throw g;b.forEach(w=>{this.getLayer(w.layerName).processDecodedData(w)})})}}class ZG{constructor({version:o,name:u,units:h,tileSize:g,pixelFormat:b,buffer:w,dataIndex:A},D){if(this.version=o,this.version!==1)throw new zh(`Cannot parse raster layer encoded with MRT version ${o}`);this.name=u,this.units=h,this.tileSize=g,this.buffer=w,this.pixelFormat=A0e[b],this.dataIndex=A,this.bandShape=[g+2*w,g+2*w,XG[this.pixelFormat]],this._decodedBlocks=new KC(D?D.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return XG[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:o})=>o).flat()}processDecodedData(o){const u=o.blockIndex.toString();this._decodedBlocks.get(u)||this._decodedBlocks.put(u,o.data)}getBlockForBand(o){let u=0;switch(typeof o){case"string":for(const[h,g]of this.dataIndex.entries()){for(const[b,w]of g.bands.entries())if(w===o)return{bandIndex:u+b,blockIndex:h,blockBandIndex:b};u+=g.bands.length}break;case"number":for(const[h,g]of this.dataIndex.entries()){if(o>=u&&o<u+g.bands.length)return{bandIndex:o,blockIndex:h,blockBandIndex:o-u};u+=g.bands.length}break;default:throw new zh(`Invalid band \`${JSON.stringify(o)}\`. Expected string or integer.`)}return{blockIndex:-1,blockBandIndex:-1}}getDataRange(o){let u=1/0,h=-1/0;const g=[],b=new Set;for(const w of o){const{blockIndex:A}=this.getBlockForBand(w);if(A<0)throw new zh(`Invalid band: ${JSON.stringify(w)}`);const D=this.dataIndex[A];g.includes(A)||g.push(A),b.add(A),u=Math.min(u,D.firstByte),h=Math.max(h,D.lastByte)}if(b.size>this.cacheSize)throw new zh(`Number of blocks to decode (${b.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:u,lastByte:h,blockIndices:g}}hasBand(o){const{blockIndex:u}=this.getBlockForBand(o);return u>=0}hasDataForBand(o){const{blockIndex:u}=this.getBlockForBand(o);return u>=0&&!!this._decodedBlocks.get(u.toString())}getBandView(o){const{blockIndex:u,blockBandIndex:h}=this.getBlockForBand(o);if(u<0)throw new zh(`Band not found: ${JSON.stringify(o)}`);const g=this._decodedBlocks.get(u.toString());if(!g)throw new zh(`Data for band ${JSON.stringify(o)} of layer "${this.name}" not decoded.`);const b=this.dataIndex[u],w=this.bandShape.reduce((P,B)=>P*B,1),A=h*w,D=g.subarray(A,A+w);return{data:D,bytes:new Uint8Array(D.buffer).subarray(D.byteOffset,D.byteOffset+D.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:b.offset,scale:b.scale}}}JC.setPbf=function(c){YL=c};class KG{constructor(o,u,h){this.tasks=o,this._onCancel=u,this._onComplete=h,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(o,u){this._finalized||(this._onComplete(o,u),this._finalized=!0)}}JC.performDecoding=function(c,o){const u=new Uint8Array(c);return Promise.all(o.tasks.map(h=>{const{layerName:g,firstByte:b,lastByte:w,pixelFormat:A,blockShape:D,blockIndex:P,filters:B,codec:U}=h,$=u.subarray(b,w+1),G=new Uint32Array(D[0]*D[1]*D[2]);let Z;if(U!=="gzip_data")throw new zh(`Unhandled codec: ${U}`);return Z=(function(se,fe){if(!globalThis.DecompressionStream&&fe==="gzip_data")return Promise.resolve((ke=(function(qe){qe[0]==31&&qe[1]==139&&qe[2]==8||ip(6,"invalid gzip data");var Ue=qe[3],Ze=10;4&Ue&&(Ze+=2+(qe[10]|qe[11]<<8));for(var rt=(Ue>>3&1)+(Ue>>4&1);rt>0;rt-=!qe[Ze++]);return Ze+(2&Ue)})(ue=se),ke+8>ue.length&&ip(6,"invalid gzip data"),(function(qe,Ue,Ze,rt){var Et=qe.length;if(!Et||Ue.f&&!Ue.l)return Ze||new jf(0);var xt=!Ze,Tt=xt||Ue.i!=2,kt=Ue.i;xt&&(Ze=new jf(3*Et));var Pt=function(kl){var Im=Ze.length;if(kl>Im){var dl=new jf(Math.max(2*Im,kl));dl.set(Ze),Ze=dl}},Rt=Ue.f||0,vt=Ue.p||0,zt=Ue.b||0,Mt=Ue.l,Nt=Ue.d,Lt=Ue.m,fn=Ue.n,pn=8*Et;do{if(!Mt){Rt=rp(qe,vt,1);var nn=rp(qe,vt+1,3);if(vt+=3,!nn){var an=qe[(Ur=x0e(vt)+4)-4]|qe[Ur-3]<<8,kn=Ur+an;if(kn>Et){kt&&ip(0);break}Tt&&Pt(zt+an),Ze.set(qe.subarray(Ur,kn),zt),Ue.b=zt+=an,Ue.p=vt=8*kn,Ue.f=Rt;continue}if(nn==1)Mt=v0e,Nt=b0e,Lt=9,fn=5;else if(nn==2){var Cn=rp(qe,vt,31)+257,cn=rp(qe,vt+10,15)+4,Wn=Cn+rp(qe,vt+5,31)+1;vt+=14;for(var vr=new jf(Wn),Zr=new jf(19),pr=0;pr<cn;++pr)Zr[g0e[pr]]=rp(qe,vt+3*pr,7);vt+=3*cn;var di=HL(Zr),kr=(1<<di)-1,Ra=mE(Zr,di);for(pr=0;pr<Wn;){var Ur,ui=Ra[rp(qe,vt,kr)];if(vt+=15&ui,(Ur=ui>>4)<16)vr[pr++]=Ur;else{var Vi=0,ta=0;for(Ur==16?(ta=3+rp(qe,vt,3),vt+=2,Vi=vr[pr-1]):Ur==17?(ta=3+rp(qe,vt,7),vt+=3):Ur==18&&(ta=11+rp(qe,vt,127),vt+=7);ta--;)vr[pr++]=Vi}}var na=vr.subarray(0,Cn),ka=vr.subarray(Cn);Lt=HL(na),fn=HL(ka),Mt=mE(na,Lt),Nt=mE(ka,fn)}else ip(1);if(vt>pn){kt&&ip(0);break}}Tt&&Pt(zt+131072);for(var fs=(1<<Lt)-1,Hs=(1<<fn)-1,fo=vt;;fo=vt){var Ao=(Vi=Mt[GL(qe,vt)&fs])>>4;if((vt+=15&Vi)>pn){kt&&ip(0);break}if(Vi||ip(2),Ao<256)Ze[zt++]=Ao;else{if(Ao==256){fo=vt,Mt=null;break}var qo=Ao-254;Ao>264&&(qo=rp(qe,vt,(1<<(_a=$G[pr=Ao-257]))-1)+GG[pr],vt+=_a);var fr=Nt[GL(qe,vt)&Hs],ra=fr>>4;if(fr||ip(3),vt+=15&fr,ka=_0e[ra],ra>3){var _a=VG[ra];ka+=GL(qe,vt)&(1<<_a)-1,vt+=_a}if(vt>pn){kt&&ip(0);break}Tt&&Pt(zt+131072);var lc=zt+qo;if(zt<ka){var Rl=0-ka,hs=Math.min(ka,lc);for(Rl+zt<0&&ip(3);zt<hs;++zt)Ze[zt]=rt[Rl+zt]}for(;zt<lc;++zt)Ze[zt]=Ze[zt-ka]}}Ue.l=Mt,Ue.p=fo,Ue.b=zt,Ue.f=Rt,Mt&&(Rt=1,Ue.m=Lt,Ue.d=Nt,Ue.n=fn)}while(!Rt);return zt!=Ze.length&&xt?(function(kl,Im,dl){return(dl==null||dl>kl.length)&&(dl=kl.length),new jf(kl.subarray(0,dl))})(Ze,0,zt):Ze.subarray(0,zt)})(ue.subarray(ke,-8),{i:2},new jf(((ve=ue)[(Se=ve.length)-4]|ve[Se-3]<<8|ve[Se-2]<<16|ve[Se-1]<<24)>>>0),pe)));var ue,pe,ve,Se,ke;const Ie=E0e[fe];if(!Ie)throw new Error(`Unhandled codec: ${fe}`);const Ve=new globalThis.DecompressionStream(Ie);return new Response(new Blob([se]).stream().pipeThrough(Ve)).arrayBuffer().then(qe=>new Uint8Array(qe))})($,U).then(se=>((function(fe,ue){fe.readFields(c0e,ue)})(new YL(se),G),new O0e[A](G.buffer))),Z.then(se=>{for(let fe=B.length-1;fe>=0;fe--)switch(B[fe]){case"delta_filter":h0e(se,D);break;case"zigzag_filter":d0e(se);break;case"bitshuffle_filter":p0e(se,A);break;default:throw new zh(`Unhandled filter "${B[fe]}"`)}return{layerName:g,blockIndex:P,data:se}}).catch(se=>{throw se})}))},Kt(KG,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),Kt(JC,"MapboxRasterTile"),Kt(ZG,"MapboxRasterLayer",{omit:["_blocksInProgress"]});class QG{constructor(o){this._stringToNumber={},this._numberToString=[];for(let u=0;u<o.length;u++){const h=o[u];this._stringToNumber[h]=u,this._numberToString[u]=h}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}class JG{constructor(o,u){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Bc(Jt,16,0),this.featureIndexArray=new kf,this.promoteId=u,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(o,u,h,g,b,w=0,A=0){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,b,w);const P=this.grid;for(let B=0;B<u.length;B++){const U=u[B],$=[1/0,1/0,-1/0,-1/0];for(let G=0;G<U.length;G++){const Z=U[G];$[0]=Math.min($[0],Z.x),$[1]=Math.min($[1],Z.y),$[2]=Math.max($[2],Z.x),$[3]=Math.max($[3],Z.y)}A!==0&&($[0]-=A,$[1]-=A,$[2]+=A,$[3]+=A),$[0]<Jt&&$[1]<Jt&&$[2]>=0&&$[3]>=0&&P.insert(D,$[0],$[1],$[2],$[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Mr(new DC(this.rawTileData)).layers,this.sourceLayerCoder=new QG(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,u){const{tilespaceGeometry:h,transform:g,tileTransform:b,pixelPosMatrix:w,availableImages:A,worldview:D}=u;this.loadVTLayers(),this.serializedLayersCache.clear();const P=u.queryRadius?u.queryRadius:0,B=h.bufferedTilespaceBounds,U=this.grid.query(B.min.x,B.min.y,B.max.x,B.max.y,(se,fe,ue,pe)=>Xl(h.bufferedTilespaceGeometry,se-P,fe-P,ue+P,pe+P));U.sort(C0e);let $=null;g.elevation&&U.length>0&&($=q1.create(g.elevation,this.tileID));const G={};let Z;for(let se=0;se<U.length;se++){const fe=U[se];if(fe===Z)continue;Z=fe;const ue=this.featureIndexArray.get(fe);let pe=null;this.is3DTile?this.loadMatchingModelFeature(G,ue,o,h,g,D):this.loadMatchingFeature(G,ue,o,A,D,(ve,Se,ke,Ie=0)=>(pe||(pe=Un(ve,this.tileID.canonical,b)),Se.queryIntersectsFeature(h,ve,ke,pe,this.z,g,w,$,Ie,u.scope)))}return G}loadMatchingFeature(o,u,h,g,b,w){const{featureIndex:A,bucketIndex:D,sourceLayerIndex:P,layoutVertexArrayOffset:B}=u,U=this.bucketLayerIDs[D],$=h.layers,G=Object.keys($);if(G.length&&!rr(G,U))return;const Z=h.sourceCache,se=this.sourceLayerCoder.decode(P),fe=this.vtLayers[se].feature(A),ue=this.getId(fe,se);for(let pe=0;pe<U.length;pe++){const ve=U[pe];if(!$[ve])continue;const{styleLayer:Se,targets:ke}=$[ve];let Ie={};ue!==void 0&&(Ie=Z.getFeatureState(Se.sourceLayer,ue));const Ve=!w||w(fe,Se,Ie,B);if(!Ve)continue;const qe=new Cb(fe,this.z,this.x,this.y,ue);qe.tile=this.tileID.canonical,qe.state=Ie;let Ue=this.serializedLayersCache.get(ve);Ue||(Ue=Se.serialize(),Ue.id=ve,this.serializedLayersCache.set(ve,Ue)),qe.source=Ue.source,qe.sourceLayer=Ue["source-layer"],qe.layer=Object.assign({},Ue),qe.layer.paint=e7(Ue.paint,Se.paint,fe,Ie,g),qe.layer.layout=e7(Ue.layout,Se.layout,fe,Ie,g);let Ze=!1;for(const rt of ke){this.updateFeatureProperties(qe,rt);const{filter:Et}=rt;if(Et){if(fe.properties=qe.properties,Et.needGeometry){const xt=Qn(fe,!0);if(!Et.filter(new Jr(this.tileID.overscaledZ,{worldview:b}),xt,this.tileID.canonical))continue}else if(!Et.filter(new Jr(this.tileID.overscaledZ,{worldview:b}),fe))continue}Ze=!0,rt.targetId&&this.addFeatureVariant(qe,rt)}Ze&&this.appendToResult(o,ve,A,qe,Ve)}}loadMatchingModelFeature(o,u,h,g,b,w){const{featureIndex:A,bucketIndex:D}=u,P=this.bucketLayerIDs[D],B=h.layers,U=Object.keys(B);if(!U.length||rr(U,P))for(let $=0;$<P.length;$++){const G=P[$],{styleLayer:Z,targets:se}=B[G];if(Z.type!=="model")continue;const fe=g.tile,ue=fe.getBucket(Z);if(!(ue&&ue instanceof YC))continue;const pe=Lve(ue,A,g,b);if(!pe)continue;const{z:ve,x:Se,y:ke}=fe.tileID.canonical,{feature:Ie,intersectionZ:Ve,position:qe}=pe;let Ue={};Ie.id!==void 0&&(Ue=h.sourceCache.getFeatureState(Z.sourceLayer,Ie.id));const Ze=new Cb({},ve,Se,ke,Ie.id);Ze.tile=this.tileID.canonical,Ze.state=Ue,Ze.properties=Ie.properties,Ze.geometry={type:"Point",coordinates:[qe.lng,qe.lat]};let rt=this.serializedLayersCache.get(G);rt||(rt=Z.serialize(),rt.id=G,this.serializedLayersCache.set(G,rt)),Ze.source=rt.source,Ze.sourceLayer=rt["source-layer"],Ze.layer=Object.assign({},rt);let Et=!1;for(const xt of se){this.updateFeatureProperties(Ze,xt);const{filter:Tt}=xt;if(Tt){if(Ie.properties=Ze.properties,Tt.needGeometry){if(!Tt.filter(new Jr(this.tileID.overscaledZ,{worldview:w}),Ie,this.tileID.canonical))continue}else if(!Tt.filter(new Jr(this.tileID.overscaledZ,{worldview:w}),Ie))continue}Et=!0,xt.targetId&&this.addFeatureVariant(Ze,xt)}Et&&this.appendToResult(o,G,A,Ze,Ve)}}updateFeatureProperties(o,u,h){if(u.properties){const g={};for(const b in u.properties){const w=u.properties[b].evaluate({zoom:this.z},o._vectorTileFeature,o.state,o.tile,h);w!=null&&(g[b]=w)}o.properties=g}}addFeatureVariant(o,u,h){const g={target:u.target,namespace:u.namespace,uniqueFeatureID:u.uniqueFeatureID};u.properties&&(g.properties=o.properties),o.variants=o.variants||{},o.variants[u.targetId]=o.variants[u.targetId]||[],o.variants[u.targetId].push(g)}appendToResult(o,u,h,g,b){let w=o[u];w===void 0&&(w=o[u]=[]),w.push({featureIndex:h,feature:g,intersectionZ:b})}lookupSymbolFeatures(o,u,h,g,b,w){const A={};this.loadVTLayers();for(const D of o)this.loadMatchingFeature(A,{bucketIndex:u,sourceLayerIndex:h,featureIndex:D,layoutVertexArrayOffset:0},g,b,w);return A}loadFeature(o){const{featureIndex:u,sourceLayerIndex:h}=o;this.loadVTLayers();const g=this.sourceLayerCoder.decode(h),b=this.vtFeatures[g];if(b[u])return b[u];const w=this.vtLayers[g].feature(u);return b[u]=w,w}hasLayer(o){for(const u of this.bucketLayerIDs)for(const h of u)if(o===h)return!0;return!1}getId(o,u){let h=o.id;if(this.promoteId){const g=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[u];if(g!=null)if(Array.isArray(g)){if(!this.promoteIdExpression){const b=Fc(g);if(b.result!=="success"){const w=b.value.map(A=>`${A.key}: ${A.message}`).join(", ");return void Hn(`Failed to create expression for promoteId: ${w}`)}this.promoteIdExpression=b.value}h=this.promoteIdExpression.evaluate({zoom:0},o)}else h=o.properties[g];typeof h=="boolean"&&(h=Number(h))}return h}}function e7(c,o,u,h,g){return Dn(c,(b,w)=>{const A=o instanceof Cs?o.get(w):null;return A&&A.evaluate?A.evaluate(u,h,void 0,g):A})}function C0e(c,o){return o-c}Kt(JG,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const t7=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class WL{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,h]=new Uint8Array(o,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const b=t7[15&h];if(!b)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[A]=new Uint32Array(o,4,1);return new WL(A,w,b,o)}constructor(o,u=64,h=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=h,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const b=t7.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,A=o*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-A%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+A+D,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+A+D),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+A+D,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=o)}add(o,u){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=o,this.coords[this._pos++]=u,h}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return XL(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,u,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:w,nodeSize:A}=this,D=[0,b.length-1,0],P=[];for(;D.length;){const B=D.pop()||0,U=D.pop()||0,$=D.pop()||0;if(U-$<=A){for(let fe=$;fe<=U;fe++){const ue=w[2*fe],pe=w[2*fe+1];ue>=o&&ue<=h&&pe>=u&&pe<=g&&P.push(b[fe])}continue}const G=$+U>>1,Z=w[2*G],se=w[2*G+1];Z>=o&&Z<=h&&se>=u&&se<=g&&P.push(b[G]),(B===0?o<=Z:u<=se)&&(D.push($),D.push(G-1),D.push(1-B)),(B===0?h>=Z:g>=se)&&(D.push(G+1),D.push(U),D.push(1-B))}return P}within(o,u,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:b,nodeSize:w}=this,A=[0,g.length-1,0],D=[],P=h*h;for(;A.length;){const B=A.pop()||0,U=A.pop()||0,$=A.pop()||0;if(U-$<=w){for(let fe=$;fe<=U;fe++)r7(b[2*fe],b[2*fe+1],o,u)<=P&&D.push(g[fe]);continue}const G=$+U>>1,Z=b[2*G],se=b[2*G+1];r7(Z,se,o,u)<=P&&D.push(g[G]),(B===0?o-h<=Z:u-h<=se)&&(A.push($),A.push(G-1),A.push(1-B)),(B===0?o+h>=Z:u+h>=se)&&(A.push(G+1),A.push(U),A.push(1-B))}return D}}function XL(c,o,u,h,g,b){if(g-h<=u)return;const w=h+g>>1;n7(c,o,w,h,g,b),XL(c,o,u,h,w-1,1-b),XL(c,o,u,w+1,g,1-b)}function n7(c,o,u,h,g,b){for(;g>h;){if(g-h>600){const P=g-h+1,B=u-h+1,U=Math.log(P),$=.5*Math.exp(2*U/3),G=.5*Math.sqrt(U*$*(P-$)/P)*(B-P/2<0?-1:1);n7(c,o,u,Math.max(h,Math.floor(u-B*$/P+G)),Math.min(g,Math.floor(u+(P-B)*$/P+G)),b)}const w=o[2*u+b];let A=h,D=g;for(yE(c,o,h,u),o[2*g+b]>w&&yE(c,o,h,g);A<D;){for(yE(c,o,A,D),A++,D--;o[2*A+b]<w;)A++;for(;o[2*D+b]>w;)D--}o[2*h+b]===w?yE(c,o,h,D):(D++,yE(c,o,D,g)),D<=u&&(h=D+1),u<=D&&(g=D-1)}}function yE(c,o,u,h){ZL(c,u,h),ZL(o,2*u,2*h),ZL(o,2*u+1,2*h+1)}function ZL(c,o,u){const h=c[o];c[o]=c[u],c[u]=h}function r7(c,o,u,h){const g=c-u,b=o-h;return g*g+b*b}a.$=M_,a.A=Bo,a.B=Ku,a.C=2,a.D=P1,a.E=pf,a.F=eE,a.G=AH,a.H=$p,a.I=ws,a.J=$0,a.K=qn,a.L=jn,a.M=Dd,a.N=am,a.O=Mf,a.P=Vt,a.Q=kd,a.R=eo,a.S=ev,a.T=iL,a.U=Fc,a.V=GC,a.W=Wu,a.X=la,a.Y=Ad,a.Z=wo,a._=rl,a.a=function(c){return Ja.API_CDN_URL_REGEX.test(c)},a.a$=It,a.a0=Vp,a.a1=Qx,a.a2=Kg,a.a3=class extends GC{},a.a4=om,a.a5=Nc,a.a6=ht,a.a7=function(c){const o=c.value;return o?Vp(o)?NL(o,!0)?[]:[new GC(c.key,o,`invalid url "${o}"`)]:[new GC(c.key,o,`string expected, "${qn(o)}" found`)]:[]},a.a8=um,a.a9=Ui,a.aA=ze,a.aB=K,a.aC=hi,a.aD=de,a.aE=fl,a.aF=st,a.aG=Ht,a.aH=function(c,o){const u={};for(let h=0;h<o.length;h++){const g=o[h];g in c&&(u[g]=c[g])}return u},a.aI=Je,a.aJ=dt,a.aK=class{constructor(c){this.entries={},this.scheduler=c}request(c,o,u,h){const g=this.entries[c]=this.entries[c]||{callbacks:[]};if(g.result){const[b,w]=g.result;return this.scheduler?this.scheduler.add(()=>{h(b,w)},o):h(b,w),()=>{}}return g.callbacks.push(h),g.cancel||(g.cancel=u((b,w)=>{g.result=[b,w];for(const A of g.callbacks)this.scheduler?this.scheduler.add(()=>{A(b,w)},o):A(b,w);setTimeout(()=>delete this.entries[c],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(b=>b!==h),g.callbacks.length||(g.cancel(),delete this.entries[c]))}}},a.aL=function(c,o,u){const h=JSON.stringify(c.request);return c.data&&(this.deduped.entries[h]={result:[null,c.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom},g=>{const b=gd(c.request,(w,A,D)=>{w?g(w):A&&g(null,{rawData:A,vectorTile:u?void 0:new Mr(new DC(A)),responseHeaders:new Map(D.entries())})});return()=>{b.cancel(),g()}},o)},a.aM=function(c){return c?{cacheControl:c.get("Cache-Control"),expires:c.get("Expires")}:{cacheControl:void 0,expires:void 0}},a.aN=md,a.aO=function(c){ou++,ou>w_&&(c.getActor().send("enforceCacheSizeLimit",g0),ou=0)},a.aP=function(c){return c<=1?1:Math.pow(2,Math.floor(Math.log2(c)))},a.aQ=Ko,a.aR=aG,a.aS=fG,a.aT=Re,a.aU=iG,a.aV=function(c,o){const u=document.createElement("video");u.muted=!0,u.onloadstart=function(){o(null,u)};for(let h=0;h<c.length;h++){const g=document.createElement("source");S_(c[h])||(u.crossOrigin="Anonymous"),g.src=c[h],u.appendChild(g)}return{cancel:()=>{}}},a.aW=XT,a.aX=Mb,a.aY=hn,a.aZ=rE,a.a_=wt,a.aa=Xt,a.ab=class{constructor(c){this.specification=c}possiblyEvaluate(c,o){return zi(c.expression.evaluate(o))}interpolate(c,o,u){return{x:Vn(c.x,o.x,u),y:Vn(c.y,o.y,u),z:Vn(c.z,o.z,u),azimuthal:Vn(c.azimuthal,o.azimuthal,u),polar:Vn(c.polar,o.polar,u)}}},a.ac=Jr,a.ad=us,a.ae=tn,a.af=Ct,a.ag=Be,a.ah=ot,a.ai=Cs,a.aj=Qd,a.ak=Vn,a.al=Jt,a.am=x0,a.an=Ar,a.ao=Qr,a.ap=class{constructor(c){this.specification=c}possiblyEvaluate(c,o){return(function([u,h]){const g=zi([1,u,h]);return{x:g.x,y:g.y,z:g.z}})(c.expression.evaluate(o))}interpolate(c,o,u){return{x:Vn(c.x,o.x,u),y:Vn(c.y,o.y,u),z:Vn(c.z,o.z,u)}}},a.aq=function(c,o,u=0,h=!0){const g=new Vt(u,u),b=c.sub(g),w=o.add(g),A=[b,new Vt(w.x,b.y),w,new Vt(b.x,w.y)];return h&&A.push(b.clone()),A},a.ar=function(c,o){const u=[];for(let h=0;h<c.length;h++){const g=_t(h-1,-1,c.length-1),b=_t(h+1,-1,c.length-1),w=c[h],A=c[b],D=c[g].sub(w).unit(),P=A.sub(w).unit(),B=P.angleWithSep(D.x,D.y),U=D.add(P).unit().mult(-1*o/Math.sin(B/2));u.push(w.add(U))}return u},a.as=VH,a.at=Xl,a.au=function(c,o,u=0){return Ee(((o.x-u)*c.scale-c.x)*Jt,(o.y*c.scale-c.y)*Jt,pt(o.z,o.y))},a.av=or,a.aw=xe,a.ax=yi,a.ay=tH,a.az=function(c){let o=1/0,u=1/0,h=-1/0,g=-1/0;for(const b of c)o=Math.min(o,b.x),u=Math.min(u,b.y),h=Math.max(h,b.x),g=Math.max(g,b.y);return{min:new Vt(o,u),max:new Vt(h,g)}},a.b=function(c){return Ja.API_FONTS_REGEX.test(c)},a.b$=ne,a.b0=Xa,a.b1=$c,a.b2=Gt,a.b3=sv,a.b4=$C,a.b5=function(){Ol.isLoading()||Ol.isLoaded()||Th()!=="deferred"||Q_()},a.b6=tv,a.b7=Qn,a.b8=Cb,a.b9=ki,a.bA=k,a.bB=te,a.bC=N,a.bD=function(c,o){const{x:u,y:h}=c.point,g=_1(u,h,c.worldSize/c._pixelsPerMercatorPixel,0,0);return K(g,g,Oi(Ff(o)))},a.bE=S,a.bF=An,a.bG=sn,a.bH=jt,a.bI=ct,a.bJ=Ye,a.bK=B1,a.bL=sc,a.bM=xL,a.bN=function(c,o,u,h,g){const b=5*o+2;c.float32[b+0]=u,c.float32[b+1]=h,c.float32[b+2]=g},a.bO=V1,a.bP=Ri,a.bQ=zu,a.bR=is,a.bS=Pp,a.bT=_t,a.bU=function(c,o,u,h){var g=new y(4);return g[0]=c,g[1]=o,g[2]=u,g[3]=h,g},a.bV=class{isDataAvailableAtPoint(c){const o=this._source();if(this.isUsingMockSource()||!o||c.y<0||c.y>1)return!1;const u=o.getSource().maxzoom,h=1<<u,g=Math.floor(c.x),b=Math.floor((c.x-g)*h),w=Math.floor(c.y*h),A=this.findDEMTileFor(new Ko(u,g,u,b,w));return!(!A||!A.dem)}getAtPointOrZero(c,o=0){return this.getAtPoint(c,o)||0}getAtPoint(c,o,u=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const h=this._source();if(!h||c.y<0||c.y>1)return o;const g=h.getSource().maxzoom,b=1<<g,w=Math.floor(c.x),A=c.x-w,D=new Ko(g,w,g,Math.floor(A*b),Math.floor(c.y*b)),P=this.findDEMTileFor(D);if(!P||!P.dem)return o;const B=P.dem,U=1<<P.tileID.canonical.z,$=(A*U-P.tileID.canonical.x)*B.dim,G=(c.y*U-P.tileID.canonical.y)*B.dim,Z=Math.floor($),se=Math.floor(G);return(u?this.exaggeration():1)*Vn(Vn(B.get(Z,se),B.get(Z,se+1),G-se),Vn(B.get(Z+1,se),B.get(Z+1,se+1),G-se),$-Z)}static getAtTileOffset(c,o,u,h){const g=1<<c.canonical.z;return h?h.pointElevation(o):u?u.getAtPointOrZero(new tn(c.wrap+(c.canonical.x+o.x/Jt)/g,(c.canonical.y+o.y/Jt)/g)):0}static getAtTileOffsetFunc(c,o,u,h){return(g,b,w)=>{const A=this.getAtTileOffset(c,g,b,w),D=h.upVector(c.canonical,g.x,g.y);return Pe(D,D,A*h.upVectorScale(c.canonical,o,u).metersToTile),D}}getForTilePoints(c,o,u,h){if(this.isUsingMockSource())return!1;const g=q1.create(this,c,h);return!!g&&(o.forEach(b=>{b[2]=this.exaggeration()*g.getElevationAt(b[0],b[1],u)}),!0)}getMinMaxForTile(c){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(c);if(!o||!o.dem)return null;const u=o.dem.tree,h=o.tileID,g=1<<c.canonical.z-h.canonical.z;let b=c.canonical.x/g-h.canonical.x,w=c.canonical.y/g-h.canonical.y,A=0;for(let D=0;D<c.canonical.z-h.canonical.z&&!u.leaves[A];D++){b*=2,w*=2;const P=2*Math.floor(w)+Math.floor(b);A=u.childOffsets[A]+P,b%=1,w%=1}return{min:this.exaggeration()*u.minimums[A],max:this.exaggeration()*u.maximums[A]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(c,o,u){throw new Error("Pure virtual method called.")}pointCoordinate(c){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(c){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const c=this.visibleDemTiles;if(c.length===0)return null;let o=!1,u=Number.MAX_VALUE,h=Number.MIN_VALUE;for(const g of c){const b=this.getMinMaxForTile(g.tileID);b&&(u=Math.min(u,b.min),h=Math.max(h,b.max),o=!0)}return o?{min:u,max:h}:null}},a.bW=vC,a.bX=$i,a.bY=Qo,a.bZ=vb,a.b_=hG,a.ba=dL,a.bb=Lh,a.bc=Un,a.bd=Rf,a.be=ym,a.bf=bT,a.bg=Ii,a.bh=ac,a.bi=kL,a.bj=function(c,o){const u=Qd(o.zoom);if(u===0)return Ff(c);const h=hv(c),g=wT(h),b=st(h.getWest())*o.worldSize,w=st(h.getEast())*o.worldSize,A=dt(h.getNorth())*o.worldSize,D=dt(h.getSouth())*o.worldSize,P=[b,A,0],B=[w,A,0],U=[b,D,0],$=[w,D,0],G=V([],o.globeMatrix);return Ct(P,P,G),Ct(B,B,G),Ct(U,U,G),Ct($,$,G),g[0]=Ih(g[0],U,u),g[1]=Ih(g[1],$,u),g[2]=Ih(g[2],B,u),g[3]=Ih(g[3],P,u),Hr.fromPoints(g)},a.bk=ib,a.bl=V,a.bm=rb,a.bn=Ih,a.bo=Qu,a.bp=Nk,a.bq=X,a.br=J,a.bs=JC,a.bt=DC,a.bu=gd,a.bv=function(c,o){const u=[];for(const h in c)h in o||u.push(h);return u},a.bw=lt,a.bx=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.by=Tc,a.bz=j,a.c=as,a.c$=function(c,o,u){let h=0;for(let g=0;g<2;++g)c[g]>0&&(h+=(c[g]-0)*(c[g]-0)),o[g]<0&&(h+=(0-o[g])*(0-o[g]));return h},a.c0=Te,a.c1=_L,a.c2=kH,a.c3=AL,a.c4=WL,a.c5=Pe,a.c6=Pr,a.c7=En,a.c8=function(c,o,u){u*=.5;var h=o[0],g=o[1],b=o[2],w=o[3],A=Math.sin(u),D=Math.cos(u);return c[0]=h*D+g*A,c[1]=g*D-h*A,c[2]=b*D+w*A,c[3]=w*D-b*A,c},a.c9=ur,a.cA=De,a.cB=co,a.cC=j9,a.cD=Hc,a.cE=y1,a.cF=function(c,o,u,h,g,b,w,A,D){if(D.name==="globe")return y1(c,o,new Hc(u,h,g),!1);const P=rE({z:u,x:h,y:g},D);return new Hr([(b+P.x/P.scale)*o,o*(P.y/P.scale),w],[(b+P.x2/P.scale)*o,o*(P.y2/P.scale),A])},a.cG=function(c,o,u){return c[0]=Math.min(o[0],u[0]),c[1]=Math.min(o[1],u[1]),c[2]=Math.min(o[2],u[2]),c[3]=Math.min(o[3],u[3]),c},a.cH=function(c,o,u){return c[0]=Math.max(o[0],u[0]),c[1]=Math.max(o[1],u[1]),c[2]=Math.max(o[2],u[2]),c[3]=Math.max(o[3],u[3]),c},a.cI=function(c){const o=Math.round((c+45+360)%360/90)%4;return me[o]},a.cJ=et,a.cK=Tr,a.cL=6,a.cM=function(c){const o=k(new Float64Array(16));K(o,c.pixelMatrix,c.globeMatrix);const u=[0,Ce,0],h=[0,Ae,0];return Ct(u,u,o),Ct(h,h,o),[u[0]>0&&u[0]<=c.width&&u[1]>0&&u[1]<=c.height&&!fy(c,new Re(c.center.lat,90)),h[0]>0&&h[0]<=c.width&&h[1]>0&&h[1]<=c.height&&!fy(c,new Re(c.center.lat,-90))]},a.cN=function(c,o){const{scale:u}=c.tileTransform,h=u*Jt/(c.tileSize*Math.pow(2,o.zoom-c.tileID.overscaledZ+c.tileID.canonical.z));return(function(g,b,w){var A=b[1],D=b[2],P=b[3],B=w[0],U=w[1];return g[0]=b[0]*B,g[1]=A*B,g[2]=D*U,g[3]=P*U,g})(new Float32Array(4),o.inverseAdjustmentMatrix,[h,h])},a.cO=TC,a.cP=ye,a.cQ=B9,a.cR=function(c){const o=B9(c,!0);return S([],[o[0],o[1],o[4],o[5]])},a.cS=ie,a.cT=Ji,a.cU=Q,a.cV=function(c){const{x:o,y:u}=c.point,{lng:h,lat:g}=c._center;return _1(o,u,c.worldSize,h,g)},a.cW=je,a.cX=ut,a.cY=Sm,a.cZ=ic,a.c_=5,a.ca=ji,a.cb=function(c,o){return c[0]=-o[0],c[1]=-o[1],c[2]=-o[2],c[3]=o[3],c},a.cc=ge,a.cd=function(c,o,u,h,g){var b=1/Math.tan(o/2);if(c[0]=b/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=b,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,g!=null&&g!==1/0){var w=1/(h-g);c[10]=(g+h)*w,c[14]=2*g*h*w}else c[10]=-1,c[14]=-2*h;return c},a.ce=function(c,o,u,h,g,b,w){var A=1/(o-u),D=1/(h-g),P=1/(b-w);return c[0]=-2*A,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*D,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*P,c[11]=0,c[12]=(o+u)*A,c[13]=(g+h)*D,c[14]=(w+b)*P,c[15]=1,c},a.cf=ft,a.cg=function(c,o,u){c[4*o+0]=u[0],c[4*o+1]=u[1],c[4*o+2]=u[2],c[4*o+3]=u[3]},a.ch=fa,a.ci=xm,a.cj=Ua,a.ck=Dl,a.cl=Xd,a.cm=WH,a.cn=function(){var c=new y(4);return y!=Float32Array&&(c[1]=0,c[2]=0),c[0]=1,c[3]=1,c},a.co=function(c,o,u){var h=o[0],g=o[1],b=o[2],w=o[3],A=Math.sin(u),D=Math.cos(u);return c[0]=h*D+b*A,c[1]=g*D+w*A,c[2]=h*-A+b*D,c[3]=g*-A+w*D,c},a.cp=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]&&c[3]===o[3]},a.cq=ar,a.cr=function(c){var o=c[0],u=c[1],h=c[2],g=c[3];return Math.sqrt(o*o+u*u+h*h+g*g)},a.cs=Yo,a.ct=gn,a.cu=g1,a.cv=3,a.cw=2,a.cx=7,a.cy=6,a.cz=mt,a.d=function(c){return Ja.API_TILEJSON_REGEX.test(c)},a.d$=class{constructor(c,o,u,h){this.context=c,this.format=h,this.size=u,this.texture=c.gl.createTexture();const[g,b,w]=this.size,{gl:A}=c;A.bindTexture(A.TEXTURE_3D,this.texture),c.pixelStoreUnpackFlipY.set(!1),c.pixelStoreUnpack.set(1),c.pixelStoreUnpackPremultiplyAlpha.set(!1),"data"in o&&o.data&&A.texImage3D(A.TEXTURE_3D,0,this.format,g,b,w,0,nL(this.format),rL(this.format),o.data)}bind(c,o){const{context:u}=this,{gl:h}=u;h.bindTexture(h.TEXTURE_3D,this.texture),c!==this.minFilter&&(h.texParameteri(h.TEXTURE_3D,h.TEXTURE_MAG_FILTER,c),h.texParameteri(h.TEXTURE_3D,h.TEXTURE_MIN_FILTER,c),this.minFilter=c),o!==this.wrapS&&(h.texParameteri(h.TEXTURE_3D,h.TEXTURE_WRAP_S,o),h.texParameteri(h.TEXTURE_3D,h.TEXTURE_WRAP_T,o),this.wrapS=o)}destroy(){const{gl:c}=this.context;c.deleteTexture(this.texture),this.texture=null}},a.d0=function(c){return c*c*c*c*c},a.d1=nt,a.d2=45,a.d3=Da,a.d4=function(c,o,u){const h=Math.sqrt(c*c+o*o+u*u),g=h>0?Math.acos(u/h)*Rp:0;let b=c!==0||o!==0?Math.atan2(-o,-c)*Rp+90:0;return b<0&&(b+=360),[h,b,g]},a.d5=Ee,a.d6=zi,a.d7=qt,a.d8=at,a.d9=Hr,a.dA=function(c){return c({pluginStatus:Os,pluginURL:Pf}),K_.on("pluginStateChange",c),c},a.dB=ll,a.dC=class extends mu{constructor(c){super(c),this.current=_T}set(c,o,u){if(this.fetchUniformLocation(c,o)){for(let h=0;h<9;h++)if(u[h]!==this.current[h]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},a.dD=we,a.dE=function(c,o,u){const h=Qd(u.zoom),g=c.style.map._antialias,b=c.terrain&&c.terrain.exaggeration()>0;return h===0&&!g&&!b},a.dF=function(c){const o=c.pixelsPerMeter,u=o/ft(1,c.center.lat),h=k(new Float64Array(16));return J(h,h,[c.point.x,c.point.y,0]),ie(h,h,[u,u,o]),Float32Array.from(h)},a.dG=hv,a.dH=function(c){const o=80.051129;c=ze(c,-80.051129,o)/o*90;const u=Math.pow(Math.abs(Math.sin(Ar(c))),3);return Math.round(u*(Me.length-1))},a.dI=function(c,o,u,h){const g=o.getNorth(),b=o.getSouth(),w=o.getWest(),A=o.getEast(),D=1<<c.z,P=A-w,B=g-b,U=P/_e,$=-B/Me[u],G=[0,U,0,$,0,0,g,w,0];if(c.z>0){const Z=180/h;L(G,G,[Z/P+1,0,0,0,Z/B+1,0,-.5*Z/U,.5*Z/$,1])}return G[2]=D,G[5]=c.x,G[8]=c.y,G},a.dJ=Ff,a.dK=function(c,o,u){const h=k(new Float64Array(16)),g=(o/(1<<c)-.5)*Math.PI*2;return W(h,u.globeMatrix,g),Float32Array.from(h)},a.dL=JO,a.dM=tb,a.dN=function(c,o){return[Math.pow(c[0],2.2)*o,Math.pow(c[1],2.2)*o,Math.pow(c[2],2.2)*o]},a.dO=E,a.dP=function(c,o){var u=Math.sin(o),h=Math.cos(o);return c[0]=h,c[1]=u,c[2]=0,c[3]=-u,c[4]=h,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},a.dQ=Yt,a.dR=ob,a.dS=wi,a.dT=sa,a.dU=LL,a.dV=function(c,o){const u=[0,0,0];return Ct(u,u,ib(Ff(o.canonical))),Ct(u,u,c),u},a.dW=c=>({u_matrix:new Xd(c),u_texsize:new Dl(c),u_pixels_to_tile_units:new l(c),u_device_pixel_ratio:new Ua(c),u_width_scale:new Ua(c),u_floor_width_scale:new Ua(c),u_image:new fa(c),u_units_to_pixels:new Dl(c),u_tile_units_to_pixels:new Ua(c),u_alpha_discard_threshold:new Ua(c),u_trim_offset:new Dl(c),u_trim_fade_range:new Dl(c),u_trim_gradient_mix_range:new Dl(c),u_trim_color:new Da(c),u_zbias_factor:new Ua(c),u_tile_to_meter:new Ua(c),u_ground_shadow_factor:new xm(c),u_pattern_transition:new Ua(c)}),a.dX=c=>({u_matrix:new Xd(c),u_pixels_to_tile_units:new l(c),u_device_pixel_ratio:new Ua(c),u_width_scale:new Ua(c),u_floor_width_scale:new Ua(c),u_units_to_pixels:new Dl(c),u_dash_image:new fa(c),u_gradient_image:new fa(c),u_image_height:new Ua(c),u_texsize:new Dl(c),u_tile_units_to_pixels:new Ua(c),u_alpha_discard_threshold:new Ua(c),u_trim_offset:new Dl(c),u_trim_fade_range:new Dl(c),u_trim_gradient_mix_range:new Dl(c),u_trim_color:new Da(c),u_zbias_factor:new Ua(c),u_tile_to_meter:new Ua(c),u_ground_shadow_factor:new xm(c)}),a.dY=c=>({u_camera_to_center_distance:new Ua(c),u_extrude_scale:new l(c),u_device_pixel_ratio:new Ua(c),u_matrix:new Xd(c),u_inv_rot_matrix:new Xd(c),u_merc_center:new Dl(c),u_tile_id:new xm(c),u_zoom_transition:new Ua(c),u_up_dir:new xm(c),u_emissive_strength:new Ua(c)}),a.dZ=ay,a.d_=B_e,a.da=yt,a.db=function(c){return[Math.pow(c[0],1/2.2),Math.pow(c[1],1/2.2),Math.pow(c[2],1/2.2)]},a.dc=F9,a.dd=cL,a.de=V9,a.df=NL,a.dg=function(c,o){return c.readFields(Nve,{icons:[]},o)},a.dh=bC,a.di=j1,a.dj=SL,a.dk=hf,a.dl=F0,a.dm=Ac,a.dn=Oc,a.dp=Zn,a.dq=function(c){const o=c.indexOf(fm);return o>=0?c.slice(0,o):c},a.dr=function(c){return c.indexOf(fm)>=0},a.ds=function(c){const o=c.lastIndexOf(fm);return o>=0?c.slice(o+1):""},a.dt=function(c){const o=[],u=c.id;return u===void 0&&o.push({message:`layers.${u}: missing required property "id"`}),c.render===void 0&&o.push({message:`layers.${u}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&o.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),o},a.du=function(c,o,u,h){return c.type==="custom"?new Ive(c,o):new zve[c.type](c,o,u,h)},a.dv=Rn,a.dw=function(c){const o=c.indexOf(fm);return o>=0?c.slice(o+1):""},a.dx=class extends Cb{constructor(c,o){super(c._vectorTileFeature,c._z,c._x,c._y,c.id),c.state&&(this.state=Object.assign({},c.state)),this.target=o.target,this.namespace=o.namespace,o.properties&&(this.properties=o.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=c.source,this.sourceLayer=c.sourceLayer,this.layer=c.layer)}toJSON(){const c=super.toJSON();return c.target=this.target,c.namespace=this.namespace,c}},a.dy=K_,a.dz=Fs,a.e=Ja,a.e$=Fe,a.e0=XO,a.e1=(c,o,u,h,g,b)=>{const w=c.transform,A=w.projection.name==="globe";let D;if(b.paint.get("circle-pitch-alignment")==="map")if(A){const B=ob(w.zoom,o.canonical)*w._pixelsPerMercatorPixel;D=Float32Array.from([B,0,0,B])}else D=w.calculatePixelsToTileUnitsMatrix(u);else D=new Float32Array([w.pixelsToGLUnits[0],0,0,w.pixelsToGLUnits[1]]);const P={u_camera_to_center_distance:c.transform.getCameraToCenterDistance(w.projection),u_matrix:c.translatePosMatrix(o.projMatrix,u,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Sl.devicePixelRatio,u_extrude_scale:D,u_inv_rot_matrix:jk,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:b.paint.get("circle-emissive-strength")};if(A){P.u_inv_rot_matrix=h,P.u_merc_center=g,P.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],P.u_zoom_transition=Qd(w.zoom);const B=g[0]*Jt,U=g[1]*Jt;P.u_up_dir=w.projection.upVector(new Hc(0,0,0),B,U)}return P},a.e2=aH,a.e3=nl,a.e4=(c,o,u,h,g,b,w,A,D,P)=>{const B=c.transform,U=B.pitch<15?nH(.07,.7,ze((14-B.zoom)/5,0,1)):.07,$=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:iH(c,o,u,h),u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:B.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:g,u_width_scale:b,u_floor_width_scale:w,u_image:0,u_tile_units_to_pixels:rH(o,B),u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:A,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_gradient_mix_range:[1,1],u_trim_color:u.paint.get("line-trim-color").toPremultipliedRenderColor($?null:u.lut).toArray01(),u_zbias_factor:U,u_tile_to_meter:qt(o.tileID.canonical,0),u_ground_shadow_factor:D,u_pattern_transition:P}},a.e5=(c,o,u,h,g,b,w,A,D,P)=>{const B=c.transform,U=B.calculatePixelsToTileUnitsMatrix(o),$=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none",G=B.pitch<15?nH(.07,.7,ze((14-B.zoom)/5,0,1)):.07;return{u_matrix:iH(c,o,u,h),u_pixels_to_tile_units:U,u_device_pixel_ratio:b,u_width_scale:w,u_floor_width_scale:A,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:oH(u)&&o.lineAtlasTexture?o.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:rH(o,c.transform),u_alpha_discard_threshold:0,u_trim_offset:D,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_gradient_mix_range:[1,1],u_trim_color:u.paint.get("line-trim-color").toPremultipliedRenderColor($?null:u.lut).toArray01(),u_zbias_factor:G,u_tile_to_meter:qt(o.tileID.canonical,0),u_ground_shadow_factor:P}},a.e6=Ft,a.e7=dv,a.e8=pt,a.e9=Tm,a.eA=function(c,o){var u=2*Math.acos(o[3]),h=Math.sin(u/2);return h>p?(c[0]=o[0]/h,c[1]=o[1]/h,c[2]=o[2]/h):(c[0]=1,c[1]=0,c[2]=0),u},a.eB=jL,a.eC=OC,a.eD=AC,a.eE=[1,1,1],a.eF=q1,a.eG=Er,a.eH=function(c,o,u,h){var g=o[0],b=o[1],w=o[2],A=o[3];return c[0]=g+h*(u[0]-g),c[1]=b+h*(u[1]-b),c[2]=w+h*(u[2]-w),c[3]=A+h*(u[3]-A),c},a.eI=z1,a.eJ=Wl,a.eK=Mh,a.eL=function(c,o,u,h,g,b,w,A,D,P,B,U,$,G,Z,se){var fe=new y(16);return fe[0]=c,fe[1]=o,fe[2]=u,fe[3]=h,fe[4]=g,fe[5]=b,fe[6]=w,fe[7]=A,fe[8]=D,fe[9]=P,fe[10]=B,fe[11]=U,fe[12]=$,fe[13]=G,fe[14]=Z,fe[15]=se,fe},a.eM=Ge,a.eN=Gd,a.eO=gm,a.eP=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Vt(1/0,1/0),max:new Vt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(c,o=!1){const u=x(new Vt(0,0),new Vt(Jt,Jt),c),h=[];if(o&&!wv(u,this._globalClipBounds))return h;for(const g of this._activeRegions){if(g.hiddenByOverlap||!wv(u,g))continue;const b=C(g.min,g.max,c);h.push({min:b.min,max:b.max,sourceId:this._sourceIds[g.priority],footprint:g.footprint,footprintTileId:g.tileId,order:g.order,clipMask:g.clipMask,clipScope:g.clipScope})}return h}setSources(c){this._setSources(c.map(o=>({getSourceId:()=>o.cache.id,getFootprints:()=>{const u=[];for(const h of o.cache.getVisibleCoordinates()){const g=o.cache.getTile(h).buckets[o.layer];g&&g.updateFootprints(h.toUnwrapped(),u)}return u},getOrder:()=>o.order,getClipMask:()=>o.clipMask,getClipScope:()=>o.clipScope})))}_addSource(c){const o=c.getFootprints();if(o.length===0)return;const u=c.getOrder(),h=c.getClipMask(),g=c.getClipScope();for(const b of o){if(!b.footprint)continue;const w=x(b.footprint.min,b.footprint.max,b.id);this._activeRegions.push({min:w.min,max:w.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:b.id,footprint:b.footprint,order:u,clipMask:h,clipScope:g})}this._sourceIds.push(c.getSourceId())}_computeReplacement(){this._activeRegions.sort((o,u)=>o.priority-u.priority||bb(o.min,u.min)||bb(o.max,u.max)||o.order-u.order||o.clipMask-u.clipMask||(function(h,g){const b=(w,A)=>w+A;return h.length-g.length||h.reduce(b,"").localeCompare(g.reduce(b,""))})(o.clipScope,u.clipScope));let c=this._activeRegions.length!==this._prevRegions.length;if(!c){let o=0;for(;!c&&o!==this._activeRegions.length;){const u=this._activeRegions[o],h=this._prevRegions[o];c=u.priority!==h.priority||!yC(u,h)||u.order!==h.order||u.clipMask!==h.clipMask||!Tc(u.clipScope,h.clipScope),this._activeRegions[o].hiddenByOverlap=h.hiddenByOverlap,++o}}if(c){++this._updateTime;for(const u of this._activeRegions)u.order!==xv&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,u.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,u.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,u.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,u.max.y));const o=u=>{const h=this._activeRegions;if(u>=h.length)return u;const g=h[u].priority;for(;u<h.length&&h[u].priority===g;)++u;return u};if(this._sourceIds.length>1){let u=0,h=o(u);for(;u!==h;){let g=u;const b=u;for(;g!==h;){const w=this._activeRegions[g];w.hiddenByOverlap=!1;for(let A=0;A<b;A++){const D=this._activeRegions[A];if(!D.hiddenByOverlap&&w.order===xv&&wv(w,D)&&(w.hiddenByOverlap=Y(w.footprint,w.tileId,D.footprint,D.tileId),w.hiddenByOverlap))break}++g}u=h,h=o(u)}}}}_setSources(c){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let o=c.length-1;o>=0;o--)this._addSource(c[o]);this._computeReplacement()}},a.eQ=xv,a.eR=class{constructor(c){this._createGrid(c),this._createPoles(c)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const c of this._poleSegments)c.destroy();for(const c of this._gridSegments)c.withSkirts.destroy(),c.withoutSkirts.destroy()}_fillGridMeshWithLods(c,o){const u=new Rf,h=new Xa,g=[],b=c+1+2,w=o[0]+1,A=o[0]+1+(1+o.length),D=(P,B,U)=>{let $=P===b-1?P-2:P===0?P:P-1;return $+=U?24575:0,[$,B]};for(let P=0;P<b;++P)u.emplaceBack(...D(P,0,!0));for(let P=0;P<w;++P)for(let B=0;B<b;++B)u.emplaceBack(...D(B,P,(B===0||B===b-1)&&!0));for(let P=0;P<o.length;++P){const B=o[P];for(let U=0;U<b;++U)u.emplaceBack(...D(U,B,!0))}for(let P=0;P<o.length;++P){const B=h.length,U=o[P]+1+2,$=new Xa;for(let se=0;se<U-1;se++){const fe=se===U-2,ue=fe?b*(A-o.length+P-se):b;for(let pe=0;pe<b-1;pe++){const ve=se*b+pe;se===0||fe||pe===0||pe===b-2?($.emplaceBack(ve+1,ve,ve+ue),$.emplaceBack(ve+ue,ve+ue+1,ve+1)):(h.emplaceBack(ve+1,ve,ve+ue),h.emplaceBack(ve+ue,ve+ue+1,ve+1))}}const G=Ii.simpleSegment(0,B,u.length,h.length-B);for(let se=0;se<$.uint16.length;se+=3)h.emplaceBack($.uint16[se],$.uint16[se+1],$.uint16[se+2]);const Z=Ii.simpleSegment(0,B,u.length,h.length-B);g.push({withoutSkirts:G,withSkirts:Z})}return{vertices:u,indices:h,segments:g}}_createGrid(c){const o=this._fillGridMeshWithLods(_e,Me);this._gridSegments=o.segments,this._gridBuffer=c.createVertexBuffer(o.vertices,bT.members),this._gridIndexBuffer=c.createIndexBuffer(o.indices,!0)}_createPoles(c){const o=new Xa;for(let w=0;w<=_e;w++)o.emplaceBack(0,w+1,w+2);this._poleIndexBuffer=c.createIndexBuffer(o,!0);const u=new Ch,h=new Ch,g=new Ch,b=new Ch;this._poleSegments=[];for(let w=0,A=0;w<5;w++){const D=360/(1<<w);u.emplaceBack(0,-de,0,.5,0),h.emplaceBack(0,-de,0,.5,1),g.emplaceBack(0,-de,0,.5,.5),b.emplaceBack(0,-de,0,.5,.5);for(let P=0;P<=_e;P++){let B=P/_e,U=0;const $=Vn(0,D,B),[G,Z,se]=We(Bk,WO,$,de);u.emplaceBack(G,Z,se,B,U),h.emplaceBack(G,Z,se,B,1-U);const fe=Ar($);B=.5+.5*Math.sin(fe),U=.5+.5*Math.cos(fe),g.emplaceBack(G,Z,se,B,U),b.emplaceBack(G,Z,se,B,1-U)}this._poleSegments.push(Ii.simpleSegment(A,0,66,64)),A+=66}this._poleNorthVertexBuffer=c.createVertexBuffer(u,Em,!1),this._poleSouthVertexBuffer=c.createVertexBuffer(h,Em,!1),this._texturedPoleNorthVertexBuffer=c.createVertexBuffer(g,Em,!1),this._texturedPoleSouthVertexBuffer=c.createVertexBuffer(b,Em,!1)}getGridBuffers(c,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[c].withSkirts:this._gridSegments[c].withoutSkirts]}getPoleBuffers(c,o){return[o?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,o?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[c]]}},a.eS=VT,a.eT=Le,a.eU=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},a.eV=Qe,a.eW=Dt,a.eX=function(c,o,u){return c[0]=o[0]/u[0],c[1]=o[1]/u[1],c[2]=o[2]/u[2],c},a.eY=Nr,a.eZ=$e,a.e_=Tn,a.ea=Bf,a.eb=c9,a.ec=Sr,a.ed=450,a.ee=7,a.ef=gt,a.eg=function(c,o){if(c===o){var u=o[1],h=o[2],g=o[3],b=o[6],w=o[7],A=o[11];c[1]=o[4],c[2]=o[8],c[3]=o[12],c[4]=u,c[6]=o[9],c[7]=o[13],c[8]=h,c[9]=b,c[11]=o[14],c[12]=g,c[13]=w,c[14]=A}else c[0]=o[0],c[1]=o[4],c[2]=o[8],c[3]=o[12],c[4]=o[1],c[5]=o[5],c[6]=o[9],c[7]=o[13],c[8]=o[2],c[9]=o[6],c[10]=o[10],c[11]=o[14],c[12]=o[3],c[13]=o[7],c[14]=o[11],c[15]=o[15];return c},a.eh=Dve,a.ei=gr,a.ej=Y0,a.ek=256,a.el=Oi,a.em=Yl,a.en=W,a.eo=function(c,o){return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[4],c[4]=o[5],c[5]=o[6],c[6]=o[8],c[7]=o[9],c[8]=o[10],c},a.ep=Ch,a.eq=D0,a.er=mm,a.es=function(c,o,u,h,g){return ze((c-o)/(u-o)*(g-h)+h,h,g)},a.et=$r,a.eu=function(c,o){var u=o[0],h=o[1],g=o[2],b=o[3],w=o[4],A=o[5],D=o[6],P=o[7],B=o[8],U=B*w-A*P,$=-B*b+A*D,G=P*b-w*D,Z=u*U+h*$+g*G;return Z?(c[0]=U*(Z=1/Z),c[1]=(-B*h+g*P)*Z,c[2]=(A*h-g*w)*Z,c[3]=$*Z,c[4]=(B*u-g*D)*Z,c[5]=(-A*u+g*b)*Z,c[6]=G*Z,c[7]=(-P*u+h*D)*Z,c[8]=(w*u-h*b)*Z,c):null},a.ev=2,a.ew=Ut,a.ex=$t,a.ey=le,a.ez=function(c,o){var u=new y(3);le(u,o);var h=1/u[0],g=1/u[1],b=1/u[2],w=o[0]*h,A=o[1]*g,D=o[2]*b,P=o[4]*h,B=o[5]*g,U=o[6]*b,$=o[8]*h,G=o[9]*g,Z=o[10]*b,se=w+B+Z,fe=0;return se>0?(fe=2*Math.sqrt(se+1),c[3]=.25*fe,c[0]=(U-G)/fe,c[1]=($-D)/fe,c[2]=(A-P)/fe):w>B&&w>Z?(fe=2*Math.sqrt(1+w-B-Z),c[3]=(U-G)/fe,c[0]=.25*fe,c[1]=(A+P)/fe,c[2]=($+D)/fe):B>Z?(fe=2*Math.sqrt(1+B-w-Z),c[3]=($-D)/fe,c[0]=(A+P)/fe,c[1]=.25*fe,c[2]=(U+G)/fe):(fe=2*Math.sqrt(1+Z-w-B),c[3]=(A-P)/fe,c[0]=($+D)/fe,c[1]=(U+G)/fe,c[2]=.25*fe),c},a.f=function(c){return btoa(encodeURIComponent(c).replace(/%([0-9A-F]{2})/g,(o,u)=>String.fromCharCode(+("0x"+u))))},a.f0=function([c,o,u]){const h=Math.hypot(c,o,u),g=Math.atan2(c,u),b=.5*Math.PI-Math.acos(-o/h);return new Re(ut(g),ut(b))},a.f1=pi,a.f2=aL,a.f3=function(c){const o=c.navigator?c.navigator.userAgent:null;return!!(function(u){if(Or==null){const h=u.navigator?u.navigator.userAgent:null;Or=!!u.safari||!(!h||!(/\b(iPad|iPhone|iPod)\b/.test(h)||h.match("Safari")&&!h.match("Chrome")))}return Or})(c)&&!(!o||!(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/)))},a.f4=function(c,o){g0=c,w_=o},a.f5=fy,a.f6=v1,a.f7=function(c){const o=[0,0,0],u=k(new Float64Array(16));return K(u,c.pixelMatrix,c.globeMatrix),Ct(o,o,u),new Vt(o[0],o[1])},a.f8=function(){const c=GT;c&&(c.isPreloaded()&&c.numActive()===1?(c.release(Zk),GT=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.f9=function(){bC().acquire(Zk)},a.fA=QC,a.fB=yr,a.fC=function(c){let o=0;if(new Uint32Array(c,0,1)[0]!==R9){const u=new Uint32Array(c,0,7),[,,h,g,b,w]=u;o=u.byteLength+g+b+w+b,(h!==c.byteLength||o>=c.byteLength)&&Hn("Invalid b3dm header information.")}return N9(c,o)},a.fD=function(c,o){const u=cL(c);for(const h of u){for(const g of h.meshes)s_e(g);h.lights&&(h.lightMeshIndex=h.meshes.length,h.meshes.push(l_e(h.lights,o)))}return u},a.fE=YC,a.fF=ya,a.fG=w9,a.fH=Ol,a.fI=Vs,a.fJ=function(c){xo(),Fo!=null&&Fo.then(o=>{o.keys().then(u=>{for(let h=0;h<u.length-c;h++)o.delete(u[h]).catch(g=>Hn(g.message))}).catch(u=>Hn(u.message))}).catch(o=>Hn(o.message))},a.fa=Th,a.fb=function(c,o,u=!1){if(Os===Vs.deferred||Os===Vs.loading||Os===Vs.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Pf=Sl.resolveURL(c),Os=Vs.deferred,If=o,B0(),u||Q_()},a.fc=function(c){R1=Sl.resolveURL(c),k1||(k1=new P1(bC(),new pf)),k1.broadcast("setMeshoptUrl",R1)},a.fd=E9,a.fe=function(c){Jk=Sl.resolveURL(c),k1||(k1=new P1(bC(),new pf)),k1.broadcast("setDracoUrl",Jk)},a.ff=T9,a.fg=HT,a.fh=function(c){const o=au();if(!o)return;const u=o.delete(Zx);c&&u.then(()=>c()).catch(c)},a.fi=wb,a.fj=Kt,a.fk=Ph,a.fl=2,a.fm=QG,a.fn=JG,a.fo=Q9,a.fp=wr,a.fq="hd_road_elevation",a.fr=Zo,a.fs=Dn,a.ft=Rh,a.fu=wL,a.fv=1,a.fw=function(c,o,u,h,g,b,w,A=1,D,P,B,U){c.createArrays(),c.tilePixelRatio=Jt/(512*c.overscaling),c.compareText={},c.iconsNeedLinear=!1;const $=c.layers[0].layout,G=c.layers[0]._unevaluatedLayout._values,Z={};Z.scaleFactor=A,Z.textSizeScaleRange=$.get("text-size-scale-range"),Z.iconSizeScaleRange=$.get("icon-size-scale-range");const[se,fe]=Z.textSizeScaleRange,[ue,pe]=Z.iconSizeScaleRange;Z.textScaleFactor=ze(Z.scaleFactor,se,fe),Z.iconScaleFactor=ze(Z.scaleFactor,ue,pe);const ve=G["text-size"],Se=G["icon-size"];if(c.textSizeData.kind==="composite"){const{minZoom:Ze,maxZoom:rt}=c.textSizeData;Z.compositeTextSizes=[ve.possiblyEvaluate(new Jr(Ze,{worldview:B}),b),ve.possiblyEvaluate(new Jr(rt,{worldview:B}),b)]}if(c.iconSizeData.kind==="composite"){const{minZoom:Ze,maxZoom:rt}=c.iconSizeData;Z.compositeIconSizes=[Se.possiblyEvaluate(new Jr(Ze,{worldview:B}),b,U),Se.possiblyEvaluate(new Jr(rt,{worldview:B}),b,U)]}Z.layoutTextSize=ve.possiblyEvaluate(new Jr(w+1,{worldview:B}),b),Z.layoutIconSize=Se.possiblyEvaluate(new Jr(w+1,{worldview:B}),b,U),Z.textMaxSize=ve.possiblyEvaluate(new Jr(18,{worldview:B}),b);const ke=$.get("symbol-placement"),Ie=$.get("text-rotation-alignment")==="map"&&ke!=="point",Ve=$.get("text-size");let qe=!1;const Ue=[];for(const Ze of c.features){const rt=$.get("text-font").evaluate(Ze,{},b).join(","),Et=Ve.evaluate(Ze,{},b)*Z.textScaleFactor,xt=Z.layoutTextSize.evaluate(Ze,{},b)*Z.textScaleFactor,Tt=Z.layoutIconSize.evaluate(Ze,{},b,U)*Z.iconScaleFactor,kt={horizontal:{},vertical:void 0},Pt=Ze.text;let Rt,vt=[0,0];if(Pt){const kr=Pt.toString(),Ra=$.get("text-letter-spacing").evaluate(Ze,{},b)*Qo,Ur=$.get("text-line-height").evaluate(Ze,{},b)*Qo,ui=c1(kr)?Ra:0,Vi=$.get("text-anchor").evaluate(Ze,{},b),ta=$.get("text-variable-anchor");if(!ta){const fo=$.get("text-radial-offset").evaluate(Ze,{},b);if(fo)vt=kH(Vi,[fo*Qo,EL]);else{const Ao=$.get("text-offset").evaluate(Ze,{},b);vt=[Ao[0]*Qo,Ao[1]*Qo]}}let na=Ie?"center":$.get("text-justify").evaluate(Ze,{},b);const ka=ke==="point",fs=ka?$.get("text-max-width").evaluate(Ze,{},b)*Qo:1/0,Hs=fo=>{c.allowVerticalPlacement&&Z_(kr)&&(kt.vertical=yL(Pt,o,u,g,rt,fs,Ur,Vi,fo,ui,vt,sc.vertical,!0,xt,Et,D))};if(!Ie&&ta){const fo=na==="auto"?ta.map(qo=>AL(qo)):[na];let Ao=!1;for(let qo=0;qo<fo.length;qo++){const fr=fo[qo];if(!kt.horizontal[fr])if(Ao)kt.horizontal[fr]=kt.horizontal[0];else{const ra=yL(Pt,o,u,g,rt,fs,Ur,"center",fr,ui,vt,sc.horizontal,!1,xt,Et,D);ra&&(kt.horizontal[fr]=ra,Ao=ra.positionedLines.length===1)}}Hs("left")}else{if(na==="auto"&&(na=AL(Vi)),ka||$.get("text-writing-mode").indexOf("horizontal")>=0||!Z_(kr)){const fo=yL(Pt,o,u,g,rt,fs,Ur,Vi,na,ui,vt,sc.horizontal,!1,xt,Et,D);fo&&(kt.horizontal[na]=fo)}Hs(ka?"left":na)}}let zt,Mt,Nt,Lt,fn,pn,nn=!1;const an=$.get("icon-text-fit").evaluate(Ze,{},b);if(Ze.icon&&Ze.icon.hasPrimary()){const kr=nE(Ze.icon,c.iconSizeData,G["icon-size"],b,c.zoom,Ze,D,Z.iconScaleFactor,B,U);zt=kr.iconPrimary,Nt=kr.iconSecondary;const Ra=zt.toString();if(Mt=h.get(Ra),Mt&&(fn=$.get("icon-offset").evaluate(Ze,{},b),pn=$.get("icon-anchor").evaluate(Ze,{},b),Rt=PC(g.get(Ra),Nt?g.get(Nt.toString()):void 0,fn,pn),nn=Mt.sdf,c.sdfIcons===void 0?c.sdfIcons=Mt.sdf:c.sdfIcons!==Mt.sdf&&Hn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Mt.pixelRatio!==c.pixelRatio||$.get("icon-rotate").constantOr(1)!==0)&&(c.iconsNeedLinear=!0)),Nt){const Ur=Nt.toString();Lt=h.get(Ur)}}qe=qe||!(!Ze.icon||!Ze.icon.hasSecondary());const kn=NC(kt.horizontal)||kt.vertical;c.iconsInText||(c.iconsInText=!!kn&&kn.iconsInText);const Cn=xt*Z.textScaleFactor/Qo,{defaultShapedIcon:cn,verticallyShapedIcon:Wn}=gve(c,Rt,$,Ze,b,kt,Cn,fn,an);an!=="none"&&Rt&&(_H(Rt)||vH(Rt))&&(zC(0,Mt,zt,Rt,cn,an,P,h,g),zC(0,Lt,Nt,Rt,cn,an,P,h,g),Wn&&(zC(0,Mt,zt,Rt,Wn,an,P,h,g),zC(0,Lt,Nt,Rt,Wn,an,P,h,g))),Rt=cn;const{iconBBox:vr,iconVerticalBBox:Zr,textBBox:pr,textVerticalBBox:di}=fve(c,Rt,Wn,$,Ze,b,Tt,fn,Z,g,pn,kt,xt,vt,U);Ue.push({feature:Ze,shapedTextOrientations:kt,shapedText:kn,shapedIcon:Rt,iconPrimary:zt,iconSecondary:Nt,iconOffset:fn,iconAnchor:pn,verticallyShapedIcon:Wn,layoutTextSize:xt,layoutIconSize:Tt,textOffset:vt,isSDFIcon:nn,iconTextFit:an,iconCollisionBounds:vr,iconVerticalCollisionBounds:Zr,textCollisionBounds:pr,textVerticalCollisionBounds:di})}return{featureData:Ue,sizes:Z,hasAnySecondaryIcon:qe,textAlongLine:Ie,symbolPlacement:ke}},a.fx=OH,a.fy=function(c,o,u,h,g,b,w,A,D,P){c.iconAtlasPositions=P.iconPositions;const{featureData:B,hasAnySecondaryIcon:U,sizes:$,textAlongLine:G,symbolPlacement:Z}=o;for(const se of B){const{shapedIcon:fe,verticallyShapedIcon:ue,feature:pe,shapedTextOrientations:ve,shapedText:Se,layoutTextSize:ke,textOffset:Ie,isSDFIcon:Ve,iconPrimary:qe,iconSecondary:Ue,iconTextFit:Ze,iconOffset:rt,iconCollisionBounds:Et,iconVerticalCollisionBounds:xt,textCollisionBounds:Tt}=se;FH(fe,P.iconPositions,qe,Ue),FH(ue,P.iconPositions,qe,Ue),mve(ve,P.iconPositions),pve(qe,Ue,P.iconPositions),(Se||fe)&&yve(c,pe,ve,fe,ue,D,$,ke,0,Ie,Ve,h,g,w,A,U,Ze,rt,G,Z,Et,xt,Tt)}u&&c.generateCollisionDebugBuffers(b,c.collisionBoxArray,$.textScaleFactor)},a.fz=Mr,a.g=function(c,o){return Fs(Object.assign(c,{method:"GET"}),o)},a.h=function(c){return c.indexOf("mapbox:")===0},a.i=function(c){return Ja.API_STYLE_REGEX.test(c)&&!as(c)},a.j=Ec,a.k=oh,a.l=function(c){return decodeURIComponent(atob(c).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join(""))},a.m=function(c,o){return Fs(Object.assign(c,{type:"json"}),o)},a.n=xg,a.o=Sl,a.p=function(c,o){return Fs(Object.assign(c,{method:"POST"}),o)},a.q=Vo,a.r=iu,a.s=function(c){try{const o=self[c];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}},a.t=function(){return Kk||(Kk=new wb("ImageRasterizer")),Kk},a.u=function(){return(function c(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,c)})()},a.v=function(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)},a.w=Hn,a.x=qL,a.y=Fp,a.z=uu}),s(["./shared"],function(a){function p(ut){const me=ut?ut.url.toString():void 0;return me?performance.getEntriesByName(me):[]}function y(ut){if(typeof ut=="number"||typeof ut=="boolean"||typeof ut=="string"||ut==null)return JSON.stringify(ut);if(Array.isArray(ut)){let we="[";for(const Le of ut)we+=`${y(Le)},`;return`${we}]`}let me="{";for(const we of Object.keys(ut).sort())me+=`${we}:${y(ut[we])},`;return`${me}}`}function S(ut){let me="";for(const we of a.bx)me+=`/${y(ut[we])}`;return me}function E(ut,me){return(function we(Le){return typeof Le=="string"&&Le===me||(Array.isArray(Le)?Le.some(we):!(!Le||typeof Le!="object")&&Object.values(Le).some(we))})(ut)}class I{constructor(me){this.keyCache={},this._layers={},this._layerConfigs={},me&&this.replace(me)}replace(me,we){this._layerConfigs={},this._layers={},this.update(me,[],we)}update(me,we,Le){this._options=Le;for(const ze of me)this._layerConfigs[ze.id]=ze,(this._layers[ze.id]=a.du(ze,this.scope,null,this._options)).compileFilter(Le),this.keyCache[ze.id]&&delete this.keyCache[ze.id];for(const ze of we)delete this.keyCache[ze],delete this._layerConfigs[ze],delete this._layers[ze];this.familiesBySource={};const Qe=(function(ze,ot){const _t={};for(let bt=0;bt<ze.length;bt++){const Gt=ze[bt];let Ft=ot&&ot[Gt.id];Ft||(Gt.type==="symbol"?Ft=Gt.id:(Ft=S(Gt),Gt.type==="line"&&Gt.paint&&E(Gt.paint["line-width"],"line-progress")&&(Ft+=`/${y(Gt.paint["line-width"])}`))),ot&&(ot[Gt.id]=Ft);let hn=_t[Ft];hn||(hn=_t[Ft]=[]),hn.push(Gt)}const lt=[];for(const bt in _t)lt.push(_t[bt]);return lt})(Object.values(this._layerConfigs),this.keyCache);for(const ze of Qe){const ot=ze.map(hn=>this._layers[hn.id]),_t=ot[0];if(_t.visibility==="none")continue;const lt=_t.source||"";let bt=this.familiesBySource[lt];bt||(bt=this.familiesBySource[lt]={});const Gt=_t.sourceLayer||"_geojsonTileLayer";let Ft=bt[Gt];Ft||(Ft=bt[Gt]=[]),Ft.push(ot)}}}const L=1*a.fl;class N{constructor(me){const we={},Le=[];for(const _t in me){const lt=me[_t],bt=we[_t]={};for(const Gt in lt.glyphs){const Ft=lt.glyphs[+Gt];if(!Ft||Ft.bitmap.width===0||Ft.bitmap.height===0)continue;const hn=Ft.metrics.localGlyph?L:1,Dn={x:0,y:0,w:Ft.bitmap.width+2*hn,h:Ft.bitmap.height+2*hn};Le.push(Dn),bt[Gt]=Dn}}const{w:Qe,h:ze}=a.G(Le),ot=new a.fk({width:Qe||1,height:ze||1});for(const _t in me){const lt=me[_t];for(const bt in lt.glyphs){const Gt=lt.glyphs[+bt];if(!Gt||Gt.bitmap.width===0||Gt.bitmap.height===0)continue;const Ft=we[_t][bt],hn=Gt.metrics.localGlyph?L:1;a.fk.copy(Gt.bitmap,ot,{x:0,y:0},{x:Ft.x+hn,y:Ft.y+hn},Gt.bitmap)}}this.image=ot,this.positions=we}}function j(ut,me,we){ut[me]?we&&(ut[me].center=we):ut[me]={floorIds:new Set,center:we||[0,0],floors:{}}}function k(ut,me,we,Le){for(const Qe of me)j(ut,Qe),ut[Qe].floors[we]=Le,ut[Qe].floorIds.add(we)}function V(ut){return{id:ut.properties.id.toString(),center:ut.properties.center.toString().split(";").map(Number)}}function K(ut){return{id:ut.properties.id.toString(),isDefault:!!ut.properties.is_default&&ut.properties.is_default,connections:ut.properties.connected_floor_ids?new Set(ut.properties.connected_floor_ids.toString().split(";")):new Set,conflicts:ut.properties.conflicted_floor_ids?new Set(ut.properties.conflicted_floor_ids.toString().split(";")):new Set,buildings:ut.properties.building_ids?new Set(ut.properties.building_ids.toString().split(";")):new Set,name:ut.properties.name.toString(),zIndex:ut.properties.z_index}}function J(ut,me){return me.every(we=>ut.properties&&ut.properties[we]!=null)}function ie(ut){return J(ut,["type","id","name"])&&ut.properties.type==="building"}function Q(ut){return J(ut,["type","id","name","z_index"])&&ut.properties.type==="floor"}a.fj(N,"GlyphAtlas");class W{constructor(me){this.tileID=new a.aQ(me.tileID.overscaledZ,me.tileID.wrap,me.tileID.canonical.z,me.tileID.canonical.x,me.tileID.canonical.y),this.tileZoom=me.tileZoom,this.uid=me.uid,this.zoom=me.zoom,this.lut=me.lut,this.canonical=me.tileID.canonical,this.pixelRatio=me.pixelRatio,this.tileSize=me.tileSize,this.source=me.source,this.scope=me.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=me.showCollisionBoxes,this.collectResourceTiming=!!me.request&&me.request.collectResourceTiming,this.promoteId=me.promoteId,this.isSymbolTile=me.isSymbolTile,this.tileTransform=a.aZ(me.tileID.canonical,me.projection),this.projection=me.projection,this.worldview=me.worldview,this.localizableLayerIds=me.localizableLayerIds,this.brightness=me.brightness,this.extraShadowCaster=!!me.extraShadowCaster,this.tessellationStep=me.tessellationStep,this.scaleFactor=me.scaleFactor,this.worldview=me.worldview,this.indoor=me.indoor}parse(me,we,Le,Qe,ze,ot){this.status="parsing",this.data=me,this.collisionBoxArray=new a.b3;const _t=new a.fm(Object.keys(me.layers).sort()),lt=new a.fn(this.tileID,this.promoteId);lt.bucketLayerIDs=[];const bt={},Gt=new a.fo(256,256),Ft={featureIndex:lt,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:Gt,availableImages:Le,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0,activeFloors:void 0};if(this.indoor){const Zn=this.indoor.indoorState.activeFloorsVisible,rr=(function(Pn,Hn,xi){const oa=(function(ki,Or){if(!ki)return a.w("No source layers defined in indoor specification"),Or;if(ki.size===0)return Or;const ji=ki.difference(Or);for(const si of ji)a.w(`Missing source layer required in indoor specification: ${si}`);return Or.intersection(Or)})(Hn.sourceLayers,new Set(Object.keys(Pn.layers))),zi=Hn.indoorState,ya=(function(ki,Or,ji,si){const li=new Set,wi=new Set,sa=new Set,bo=new Map,Ja={},Ec=as=>{const bs=bo.get(as)||new Set;for(const ru of li)if((bo.get(ru)||new Set).has(as)||bs.has(ru))return!0;return!1};for(const as of Or){const bs=ki.layers[as];if(bs)for(let ru=0;ru<bs.length;ru++){const so=bs.feature(ru);if(ie(so)){const{id:Ns,center:xs}=V(so);j(Ja,Ns,xs),li.add(Ns);continue}if(Q(so)){const{id:Ns,isDefault:xs,connections:Fu,conflicts:iu,buildings:Sl,name:kp,zIndex:Ac}=K(so);k(Ja,Sl,Ns,{name:kp,zIndex:Ac}),bo.set(Ns,iu),(Ns===si||Fu.has(si))&&li.add(Ns),wi.add(Ns),xs&&sa.add(Ns)}}else a.w(`indoor source layer not found: ${as}`)}if(ji)for(const as of ji)wi.has(as)&&(Ec(as)||li.add(as));for(const as of sa)li.has(as)||Ec(as)||li.add(as);return{buildings:Ja,activeFloors:li}})(Pn,oa,zi.lastActiveFloors,zi.selectedFloorId);return xi.send("setIndoorData",ya),ya})(me,this.indoor,ze);Ft.activeFloors=Zn?rr.activeFloors:void 0}const hn=[],Dn=we.familiesBySource[this.source];for(const Zn in Dn){const rr=me.layers[Zn];if(!rr)continue;let Pn=!1,Hn=!1,xi=!1;for(const Or of Dn[Zn])Or[0].type==="symbol"?Pn=!0:Hn=!0,Or[0].is3D()&&Or[0].type!=="model"&&(xi=!0);if(this.extraShadowCaster&&!xi||this.isSymbolTile===!0&&!Pn||this.isSymbolTile===!1&&!Hn)continue;rr.version===1&&a.w(`Vector tile source "${this.source}" layer "${Zn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const oa=_t.encode(Zn),zi=[],ya=this.localizableLayerIds&&this.localizableLayerIds.has(Zn);let ki=!1;for(let Or=0,ji=0;Or<rr.length;Or++){const si=rr.feature(Or),li=lt.getId(si,Zn),wi=si.properties?si.properties.worldview:null;if(ya&&this.worldview&&typeof wi=="string")if(wi==="all")si.properties.$localized=!0;else{if(!wi.split(",").includes(this.worldview))continue;si.properties.$localized=!0,si.properties.worldview=this.worldview}!ki&&si.properties&&si.properties.hasOwnProperty(a.fp)&&(ki=!0),zi.push({feature:si,id:li,index:ji,sourceLayerIndex:oa}),ji++}ki&&!Ft.elevationFeatures&&me.layers.hasOwnProperty(a.fq)&&(Ft.elevationFeatures=a.fr.parseFrom(me.layers[a.fq],this.canonical));for(const Or of Dn[Zn]){const ji=Or[0];if(this.extraShadowCaster&&(!ji.is3D()||ji.type==="model")||this.isSymbolTile!==void 0&&ji.type==="symbol"!==this.isSymbolTile||ji.minzoom&&this.zoom<Math.floor(ji.minzoom)||ji.maxzoom&&this.zoom>=ji.maxzoom||ji.visibility==="none")continue;te(Or,this.zoom,Ft.brightness,Le,this.worldview);const si=bt[ji.id]=ji.createBucket({index:lt.bucketLayerIDs.length,layers:Or,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:oa,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep,styleDefinedModelURLs:Qe,worldview:this.worldview,localizable:ya,availableImages:Le});lt.bucketLayerIDs.push(Or.map(wi=>a.B(wi.id,wi.scope)));let li=si.prepare?si.prepare():null;li!=null?(li=li.then(()=>si.populate(zi,Ft,this.tileID.canonical,this.tileTransform)),hn.push(li)):si.populate(zi,Ft,this.tileID.canonical,this.tileTransform)}}const Rn=()=>{let Zn,rr,Pn,Hn,xi,oa;Gt.trim();const zi={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ya=()=>{if(Zn)return this.status="done",ot(Zn);if(this.extraShadowCaster)this.status="done",ot(null,{buckets:Object.values(bt).filter(Or=>!Or.isEmpty()),featureIndex:lt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Ft.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(rr&&Pn&&Hn){const Or=new N(rr),ji=new Map;for(const[wi,sa]of Pn.entries()){const{imagePosition:bo}=a.fu(wi,sa,a.fv);ji.set(wi,bo)}const si={};for(const wi in bt){const sa=bt[wi];sa instanceof a.b4&&(te(sa.layers,this.zoom,Ft.brightness,Le,this.worldview),si[wi]=a.fw(sa,rr,Or.positions,Pn,ji,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio,xi,this.worldview,Le))}const li={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(ze,Pn,xi,()=>{li.iconsPending=!1,ki(si,Or,li)}),this.rasterizeIfNeeded(ze,Hn,oa,()=>{li.patternsPending=!1,ki(si,Or,li)})}},ki=(Or,ji,si,li)=>{if(si.iconsPending||si.patternsPending)return;const wi=new a.fx(Pn,Hn,this.lut);for(const sa in bt){const bo=bt[sa];if(sa in Or)a.fy(bo,Or[sa],this.showCollisionBoxes,Le,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,Pn,wi);else if(bo.hasPattern&&(bo instanceof a.ba||bo instanceof a.bb||bo instanceof a.ea)){te(bo.layers,this.zoom,Ft.brightness,Le,this.worldview);const Ja=Object.fromEntries(wi.patternPositions);bo.addFeatures(Ft,this.tileID.canonical,Ja,Le,this.tileTransform,this.brightness)}}this.status="done",ot(null,{buckets:Object.values(bt).filter(sa=>!sa.isEmpty()),featureIndex:lt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ji.image,lineAtlas:Gt,imageAtlas:wi,brightness:Ft.brightness})};if(!this.extraShadowCaster){const Or=a.fs(Ft.glyphDependencies,li=>Object.keys(li).map(Number));Object.keys(Or).length?ze.send("getGlyphs",{uid:this.uid,stacks:Or},(li,wi)=>{Zn||(Zn=li,rr=wi,ya())},void 0,!1,zi):rr={};const ji=Array.from(Ft.iconDependencies.keys()).map(li=>a.I.parse(li));ji.length?ze.send("getImages",{images:ji,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(li,wi)=>{Zn||(Zn=li,Pn=new Map,xi=this.updateImageMapAndGetImageTaskQueue(Pn,wi,Ft.iconDependencies),ya())},void 0,!1,zi):(Pn=new Map,xi=new Map);const si=Array.from(Ft.patternDependencies.keys()).map(li=>a.I.parse(li));si.length?ze.send("getImages",{images:si,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(li,wi)=>{Zn||(Zn=li,Hn=new Map,oa=this.updateImageMapAndGetImageTaskQueue(Hn,wi,Ft.patternDependencies),ya())},void 0,!1,zi):(Hn=new Map,oa=new Map)}if(Ft.elevationFeatures&&Ft.elevationFeatures.length>0){const Or=[];for(const si of Object.values(bt))if(si instanceof a.bb){const li=si.getUnevaluatedPortalGraph();li&&Or.push(li)}const ji=a.ft.evaluate(Or);for(const si of Object.values(bt))if(si instanceof a.bb){const li=me.layers[_t.decode(si.sourceLayerIndex)];si.setEvaluatedPortalGraph(ji,li,this.tileID.canonical,Ft.availableImages,Ft.brightness)}}ya()};hn.length>0?Promise.allSettled(hn).then(Rn).catch(ot):Rn()}updateParameters(me){this.scaleFactor=me.scaleFactor,this.showCollisionBoxes=me.showCollisionBoxes,this.projection=me.projection,this.brightness=me.brightness,this.tileTransform=a.aZ(me.tileID.canonical,me.projection),this.extraShadowCaster=me.extraShadowCaster,this.lut=me.lut,this.worldview=me.worldview,this.indoor=me.indoor}rasterizeIfNeeded(me,we,Le,Qe){Array.from(we.values()).some(ze=>ze.usvg)?this.rasterize(me,we,Le,Qe):Qe()}updateImageMapAndGetImageTaskQueue(me,we,Le){const Qe=new Map;for(const ze of we.keys()){const ot=Le.get(ze)||[];for(const _t of ot){const lt=_t.toString(),bt=we.get(_t.id.toString());bt.usvg?Qe.has(lt)||(Qe.set(lt,_t),me.set(lt,Object.assign({},bt))):me.set(lt,bt)}}return Qe}rasterize(me,we,Le,Qe){this.rasterizeTask=me.send("rasterizeImages",{scope:this.scope,tasks:Le},(ze,ot)=>{if(!ze)for(const[_t,lt]of ot.entries()){const bt=Object.assign(we.get(_t),{data:lt});we.set(_t,bt)}Qe()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function te(ut,me,we,Le,Qe){const ze=new a.ac(me,{brightness:we,worldview:Qe});for(const ot of ut)ot.recalculate(ze,Le)}class X extends a.E{constructor(me,we,Le,Qe,ze,ot,_t){super(),this.actor=me,this.layerIndex=we,this.availableImages=Le,this.availableModels=Qe,this.loadVectorData=ot||a.aL,this.loading={},this.loaded={},this.deduped=new a.aK(me.scheduler),this.isSpriteLoaded=ze,this.scheduler=me.scheduler,this.brightness=_t}loadTile(me,we){const Le=me.uid,Qe=me&&me.request,ze=Qe&&Qe.collectResourceTiming,ot=this.loading[Le]=new W(me);ot.abort=this.loadVectorData(me,(_t,lt)=>{const bt=!this.loading[Le];if(delete this.loading[Le],ot.cancelRasterize(),bt||_t||!lt)return ot.status="done",bt||(this.loaded[Le]=ot),we(_t);const Gt=lt.rawData,Ft={},hn=a.aM(lt.responseHeaders);hn&&hn.expires&&(Ft.expires=hn.expires),hn&&hn.cacheControl&&(Ft.cacheControl=hn.cacheControl),ot.vectorTile=lt.vectorTile||new a.fz(new a.bt(Gt));const Dn=()=>{ot.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,(Rn,Zn)=>{if(Rn||!Zn)return we(Rn);const rr={};if(ze){const Pn=p(Qe);Pn.length>0&&(rr.resourceTiming=JSON.parse(JSON.stringify(Pn)))}we(null,Object.assign({rawTileData:Gt.slice(0),responseHeaders:lt.responseHeaders},Zn,Ft,rr))})};this.isSpriteLoaded?Dn():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Dn,{type:"parseTile",isSymbolTile:me.isSymbolTile,zoom:me.tileZoom}):Dn()}),this.loaded=this.loaded||{},this.loaded[Le]=ot})}reloadTile(me,we){const Le=this.loaded,Qe=me.uid;if(Le&&Le[Qe]){const ze=Le[Qe];ze.updateParameters(me);const ot=(_t,lt)=>{const bt=ze.reloadCallback;bt&&(delete ze.reloadCallback,ze.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,bt)),we(_t,lt)};ze.status==="parsing"?ze.reloadCallback=ot:ze.status==="done"&&(ze.vectorTile?ze.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,ot):ot())}else we(null,void 0)}abortTile(me,we){const Le=me.uid,Qe=this.loading[Le];Qe&&(Qe.abort&&Qe.abort(),delete this.loading[Le]),we()}removeTile(me,we){const Le=this.loaded,Qe=me.uid;Le&&Le[Qe]&&delete Le[Qe],we()}}class ae{loadTile(me,we){const{uid:Le,encoding:Qe,rawImageData:ze,padding:ot}=me,_t=ImageBitmap&&ze instanceof ImageBitmap?this.getImageData(ze,ot):ze;we(null,new a.fA(Le,_t,Qe,ot<1))}reloadTile(me,we){we(null,null)}abortTile(me,we){we()}removeTile(me,we){we()}getImageData(me,we){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(me.width,me.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=me.width,this.offscreenCanvas.height=me.height,this.offscreenCanvasContext.drawImage(me,0,0,me.width,me.height);const Le=this.offscreenCanvasContext.getImageData(-we,-we,me.width+2*we,me.height+2*we);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Le}}a.bs.setPbf(a.bt);class le{constructor(me){this._mrt=new a.bs(me.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=me.uid,this.tileID=me.tileID,this.source=me.source}parse(me,we){const Le=this._mrt;this.status="parsing",this._entireBuffer=me;try{Le.parseHeader(me),this._isHeaderLoaded=!0;const Qe=[];for(const ze in Le.layers){const ot=Le.getLayer(ze),_t=ot.getDataRange(ot.getBandList()),lt=Le.createDecodingTask(_t),bt=me.slice(_t.firstByte,_t.lastByte+1),Gt=a.bs.performDecoding(bt,lt).then(Ft=>lt.complete(null,Ft)).catch(Ft=>lt.complete(Ft,null));Qe.push(Gt)}Promise.allSettled(Qe).then(()=>we(null,Le)).catch(ze=>we(ze))}catch(Qe){we(Qe)}}}class ge{constructor(me){this.actor=me,this.loading={},this.loaded={}}loadTile(me,we){const Le=me.uid,Qe=me.request,ze=this.loading[Le]=new le(me),{cancel:ot}=a.bu(Qe,(_t,lt,bt)=>{const Gt=!this.loading[Le];if(delete this.loading[Le],Gt||_t||!lt)return ze.status="done",Gt||(this.loaded[Le]=ze),we(_t);ze.parse(lt,(Ft,hn)=>{if(Ft||!hn)return we(Ft);we(null,hn,bt)}),this.loaded[Le]=ze});ze.abort=ot}reloadTile(me,we){we(null,void 0)}abortTile(me,we){const Le=me.uid,Qe=this.loading[Le];Qe&&(Qe.abort&&Qe.abort(),delete this.loading[Le]),we()}removeTile(me,we){const Le=me.uid;this.loaded[Le]&&delete this.loaded[Le],we()}decodeRasterArray(me,we){a.bs.performDecoding(me.buffer,me.task).then(Le=>we(null,Le)).catch(Le=>we(Le))}}const ye=a.fB.prototype.toGeoJSON;class De{constructor(me){this._feature=me,this.extent=a.al,this.type=me.type,this.properties=me.tags,"id"in me&&!isNaN(me.id)&&(this.id=parseInt(me.id,10))}loadGeometry(){if(this._feature.type===1){const me=[];for(const we of this._feature.geometry)me.push([new a.P(we[0],we[1])]);return me}{const me=[];for(const we of this._feature.geometry){const Le=[];for(const Qe of we)Le.push(new a.P(Qe[0],Qe[1]));me.push(Le)}return me}}toGeoJSON(me,we,Le){return ye.call(this,me,we,Le)}}class He{constructor(me,we){this.name=me,this.extent=a.al,this.length=we.length,this._jsonFeatures=we}feature(me){return new De(this._jsonFeatures[me])}}class Be{constructor(me){this.layers={},this.extent=a.al;for(const we of Object.keys(me))this.layers[we]=new He(we,me[we])}}const Ee=64/4096;class Fe{constructor(){this.features=new Map}clear(){this.features.clear()}load(me=[],we){for(const Le of me){const Qe=Le.id;if(Qe==null)continue;let ze=this.features.get(Qe);ze&&this.updateCache(ze,we),Le.geometry?(ze=yt(Le),this.updateCache(ze,we),this.features.set(Qe,ze)):this.features.delete(Qe),this.updateCache(ze,we)}}updateCache(me,we){for(const{canonical:Le,uid:Qe}of Object.values(we)){const{z:ze,x:ot,y:_t}=Le;at(me,Math.pow(2,ze),ot,_t)&&delete we[Qe]}}getTile(me,we,Le){const Qe=Math.pow(2,me),ze=[];for(const ot of this.features.values())at(ot,Qe,we,Le)&&ze.push(Pe(ot,Qe,we,Le));return{features:ze}}getFeatures(){return[...this.features.values()]}}function at({minX:ut,minY:me,maxX:we,maxY:Le},Qe,ze,ot){return ut<(ze+1+Ee)/Qe&&me<(ot+1+Ee)/Qe&&we>(ze-Ee)/Qe&&Le>(ot-Ee)/Qe}function yt(ut){const{id:me,geometry:we,properties:Le}=ut;if(!we)return;if(we.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Qe,coordinates:ze}=we,ot={id:me,type:1,geometry:[],tags:Le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},_t=ot.geometry;if(Qe==="Point")je(ze,_t,ot);else if(Qe==="MultiPoint")for(const lt of ze)je(lt,_t,ot);else if(Qe==="LineString")ot.type=2,Ke(ze,_t,ot);else if(Qe==="MultiLineString")ot.type=2,it(ze,_t,ot);else if(Qe==="Polygon")ot.type=3,it(ze,_t,ot,!0);else{if(Qe!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");ot.type=3;for(const lt of ze)it(lt,_t,ot,!0)}return ot}function je([ut,me],we,Le){const Qe=a.aF(ut);let ze=a.aJ(me);ze=ze<0?0:ze>1?1:ze,we.push(Qe,ze),Le.minX=Math.min(Le.minX,Qe),Le.minY=Math.min(Le.minY,ze),Le.maxX=Math.max(Le.maxX,Qe),Le.maxY=Math.max(Le.maxY,ze)}function Ke(ut,me,we,Le=!1,Qe=!1){const ze=[];for(const ot of ut)je(ot,ze,we);me.push(ze),Le&&(function(ot,_t){let lt=0;for(let bt=0,Gt=ot.length,Ft=Gt-2;bt<Gt;Ft=bt,bt+=2)lt+=(ot[bt]-ot[Ft])*(ot[bt+1]+ot[Ft+1]);if(lt>0===_t)for(let bt=0,Gt=ot.length;bt<Gt/2;bt+=2){const Ft=ot[bt],hn=ot[bt+1];ot[bt]=ot[Gt-2-bt],ot[bt+1]=ot[Gt-1-bt],ot[Gt-2-bt]=Ft,ot[Gt-1-bt]=hn}})(ze,Qe)}function it(ut,me,we,Le=!1){for(let Qe=0;Qe<ut.length;Qe++)Ke(ut[Qe],me,we,Le,Qe===0)}function Pe(ut,me,we,Le){const{id:Qe,type:ze,geometry:ot,tags:_t}=ut,lt=[];if(ze===1)(function(bt,Gt,Ft,hn,Dn){for(let Rn=0;Rn<bt.length;Rn+=2){const Zn=Math.round(a.al*(bt[Rn+0]*Gt-Ft)),rr=Math.round(a.al*(bt[Rn+1]*Gt-hn));Dn.push([Zn,rr])}})(ot,me,we,Le,lt);else if(ze===2)for(const bt of ot)jt(bt,me,we,Le,lt);else if(ze===3)for(const bt of ot)sn(bt,me,we,Le,lt);return{id:Qe,type:ze,geometry:lt,tags:_t}}function jt(ut,me,we,Le,Qe){const ot=a.al+128;let _t;for(let lt=0;lt<ut.length-2;lt+=2){let bt=Math.round(a.al*(ut[lt+0]*me-we)),Gt=Math.round(a.al*(ut[lt+1]*me-Le)),Ft=Math.round(a.al*(ut[lt+2]*me-we)),hn=Math.round(a.al*(ut[lt+3]*me-Le));const Dn=Ft-bt,Rn=hn-Gt;bt<-128&&Ft<-128||(bt<-128?(Gt+=Math.round(Rn*((-128-bt)/Dn)),bt=-128):Ft<-128&&(hn=Gt+Math.round(Rn*((-128-bt)/Dn)),Ft=-128),Gt<-128&&hn<-128||(Gt<-128?(bt+=Math.round(Dn*((-128-Gt)/Rn)),Gt=-128):hn<-128&&(Ft=bt+Math.round(Dn*((-128-Gt)/Rn)),hn=-128),bt>=ot&&Ft>=ot||(bt>=ot?(Gt+=Math.round(Rn*((ot-bt)/Dn)),bt=ot):Ft>=ot&&(hn=Gt+Math.round(Rn*((ot-bt)/Dn)),Ft=ot),Gt>=ot&&hn>=ot||(Gt>=ot?(bt+=Math.round(Dn*((ot-Gt)/Rn)),Gt=ot):hn>=ot&&(Ft=bt+Math.round(Dn*((ot-Gt)/Rn)),hn=ot),_t&&bt===_t[_t.length-1][0]&&Gt===_t[_t.length-1][1]||(_t=[[bt,Gt]],Qe.push(_t)),_t.push([Ft,hn])))))}}function sn(ut,me,we,Le,Qe){const ze=(we-Ee)/me,ot=(Le-Ee)/me,_t=(we+1+Ee)/me,lt=(Le+1+Ee)/me;function bt(hn,Dn){let Rn=0;return hn<ze?Rn|=1:hn>_t&&(Rn|=2),Dn<ot?Rn|=4:Dn>lt&&(Rn|=8),Rn}let Gt=[];for(let hn=1;hn<=8;hn*=2){let Dn=ut[ut.length-2],Rn=ut[ut.length-1],Zn=!(bt(Dn,Rn)&hn);for(let rr=0;rr<ut.length;rr+=2){const Pn=ut[rr],Hn=ut[rr+1],xi=!(bt(Pn,Hn)&hn);xi!==Zn&&(8&hn?Gt.push(Dn+(Pn-Dn)*(lt-Rn)/(Hn-Rn),lt):4&hn?Gt.push(Dn+(Pn-Dn)*(ot-Rn)/(Hn-Rn),ot):2&hn?Gt.push(_t,Rn+(Hn-Rn)*(_t-Dn)/(Pn-Dn)):1&hn&&Gt.push(ze,Rn+(Hn-Rn)*(ze-Dn)/(Pn-Dn))),xi&&Gt.push(Pn,Hn),Dn=Pn,Rn=Hn,Zn=xi}if(!(ut=Gt).length||hn===8)break;Gt=[]}const Ft=[];for(let hn=0;hn<Gt.length;hn+=2)Ft.push([Math.round(a.al*(Gt[hn]*me-we)),Math.round(a.al*(Gt[hn+1]*me-Le))]);Ft.length&&Qe.push(Ft)}function dn({name:ut,features:me},we){we.writeStringField(1,ut),we.writeVarintField(5,a.al);const Le=new Map,Qe=new Map,ze={keys:Le,values:Qe,feature:null};for(const ot of me)ze.feature=ot,we.writeMessage(2,Tn,ze);for(const ot of Le.keys())we.writeStringField(3,ot);for(const ot of Qe.keys())we.writeMessage(4,mt,ot)}function Tn(ut,me){const we=ut.feature;we.id!==void 0&&Number.isSafeInteger(+we.id)&&me.writeVarintField(1,+we.id),we.tags&&me.writeMessage(2,Ut,ut),me.writeVarintField(3,we.type),me.writeMessage(4,ct,we)}function Ut({keys:ut,values:me,feature:we},Le){for(const Qe of Object.keys(we.tags)){let ze=we.tags[Qe];if(ze===null)continue;let ot=ut.get(Qe);ot===void 0&&(ot=ut.size,ut.set(Qe,ot)),Le.writeVarint(ot);const _t=typeof ze;_t!=="string"&&_t!=="boolean"&&_t!=="number"&&(ze=JSON.stringify(ze));let lt=me.get(ze);lt===void 0&&(lt=me.size,me.set(ze,lt)),Le.writeVarint(lt)}}function xe(ut,me){return(me<<3)+(7&ut)}function Ye(ut){return ut<<1^ut>>31}function ct(ut,me){const{geometry:we,type:Le}=ut;let Qe=0,ze=0;if(Le===1){me.writeVarint(xe(1,we.length));for(const ot of we){const _t=ot[0]-Qe,lt=ot[1]-ze;me.writeVarint(Ye(_t)),me.writeVarint(Ye(lt)),Qe+=_t,ze+=lt}}else for(const ot of we){if(ot.length===0)continue;me.writeVarint(xe(1,1));const _t=ot.length-(Le===3?1:0);for(let lt=0;lt<_t;lt++){lt===1&&me.writeVarint(xe(2,_t-1));const bt=ot[lt][0]-Qe,Gt=ot[lt][1]-ze;me.writeVarint(Ye(bt)),me.writeVarint(Ye(Gt)),Qe+=bt,ze+=Gt}Le===3&&me.writeVarint(xe(7,1))}}function mt(ut,me){const we=typeof ut;we==="string"?me.writeStringField(1,ut):we==="boolean"?me.writeBooleanField(7,ut):we==="number"&&(ut%1!=0?me.writeDoubleField(3,ut):ut<0?me.writeSVarintField(6,ut):me.writeVarintField(5,ut))}const Ct={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ut=>ut},Yt=Math.fround||(gn=new Float32Array(1),ut=>(gn[0]=+ut,gn[0]));var gn;class An{constructor(me){this.options=Object.assign(Object.create(Ct),me),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(me){const{log:we,minZoom:Le,maxZoom:Qe}=this.options;we&&console.time("total time");const ze=`prepare ${me.length} points`;we&&console.time(ze),this.points=me;const ot=[];for(let lt=0;lt<me.length;lt++){const bt=me[lt];if(!bt.geometry)continue;const[Gt,Ft]=bt.geometry.coordinates,hn=Yt(Nr(Gt)),Dn=Yt(Pr(Ft));ot.push(hn,Dn,1/0,lt,-1,1),this.options.reduce&&ot.push(0)}let _t=this.trees[Qe+1]=this._createTree(ot);we&&console.timeEnd(ze);for(let lt=Qe;lt>=Le;lt--){const bt=+Date.now();_t=this.trees[lt]=this._createTree(this._cluster(_t,lt)),we&&console.log("z%d: %d clusters in %dms",lt,_t.numItems,+Date.now()-bt)}return we&&console.timeEnd("total time"),this}getClusters(me,we){let Le=((me[0]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,me[1]));let ze=me[2]===180?180:((me[2]+180)%360+360)%360-180;const ot=Math.max(-90,Math.min(90,me[3]));if(me[2]-me[0]>=360)Le=-180,ze=180;else if(Le>ze){const Ft=this.getClusters([Le,Qe,180,ot],we),hn=this.getClusters([-180,Qe,ze,ot],we);return Ft.concat(hn)}const _t=this.trees[this._limitZoom(we)],lt=_t.range(Nr(Le),Pr(ot),Nr(ze),Pr(Qe)),bt=_t.data,Gt=[];for(const Ft of lt){const hn=this.stride*Ft;Gt.push(bt[hn+5]>1?ar(bt,hn,this.clusterProps):this.points[bt[hn+3]])}return Gt}getChildren(me){const we=this._getOriginId(me),Le=this._getOriginZoom(me),Qe="No cluster with the specified id.",ze=this.trees[Le];if(!ze)throw new Error(Qe);const ot=ze.data;if(we*this.stride>=ot.length)throw new Error(Qe);const _t=this.options.radius/(this.options.extent*Math.pow(2,Le-1)),lt=ze.within(ot[we*this.stride],ot[we*this.stride+1],_t),bt=[];for(const Gt of lt){const Ft=Gt*this.stride;ot[Ft+4]===me&&bt.push(ot[Ft+5]>1?ar(ot,Ft,this.clusterProps):this.points[ot[Ft+3]])}if(bt.length===0)throw new Error(Qe);return bt}getLeaves(me,we,Le){const Qe=[];return this._appendLeaves(Qe,me,we=we||10,Le=Le||0,0),Qe}getTile(me,we,Le){const Qe=this.trees[this._limitZoom(me)],ze=Math.pow(2,me),{extent:ot,radius:_t}=this.options,lt=_t/ot,bt=(Le-lt)/ze,Gt=(Le+1+lt)/ze,Ft={features:[]};return this._addTileFeatures(Qe.range((we-lt)/ze,bt,(we+1+lt)/ze,Gt),Qe.data,we,Le,ze,Ft),we===0&&this._addTileFeatures(Qe.range(1-lt/ze,bt,1,Gt),Qe.data,ze,Le,ze,Ft),we===ze-1&&this._addTileFeatures(Qe.range(0,bt,lt/ze,Gt),Qe.data,-1,Le,ze,Ft),Ft.features.length?Ft:null}getClusterExpansionZoom(me){let we=this._getOriginZoom(me)-1;for(;we<=this.options.maxZoom;){const Le=this.getChildren(me);if(we++,Le.length!==1)break;me=Le[0].properties.cluster_id}return we}_appendLeaves(me,we,Le,Qe,ze){const ot=this.getChildren(we);for(const _t of ot){const lt=_t.properties;if(lt&&lt.cluster?ze+lt.point_count<=Qe?ze+=lt.point_count:ze=this._appendLeaves(me,lt.cluster_id,Le,Qe,ze):ze<Qe?ze++:me.push(_t),me.length===Le)break}return ze}_createTree(me){const we=new a.c4(me.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Le=0;Le<me.length;Le+=this.stride)we.add(me[Le],me[Le+1]);return we.finish(),we.data=me,we}_addTileFeatures(me,we,Le,Qe,ze,ot){for(const _t of me){const lt=_t*this.stride,bt=we[lt+5]>1;let Gt,Ft,hn;if(bt)Gt=or(we,lt,this.clusterProps),Ft=we[lt],hn=we[lt+1];else{const Zn=this.points[we[lt+3]];Gt=Zn.properties;const[rr,Pn]=Zn.geometry.coordinates;Ft=Nr(rr),hn=Pr(Pn)}const Dn={type:1,geometry:[[Math.round(this.options.extent*(Ft*ze-Le)),Math.round(this.options.extent*(hn*ze-Qe))]],tags:Gt};let Rn;Rn=bt||this.options.generateId?we[lt+3]:this.points[we[lt+3]].id,Rn!==void 0&&(Dn.id=Rn),ot.features.push(Dn)}}_limitZoom(me){return Math.max(this.options.minZoom,Math.min(Math.floor(+me),this.options.maxZoom+1))}_cluster(me,we){const{radius:Le,extent:Qe,reduce:ze,minPoints:ot}=this.options,_t=Le/(Qe*Math.pow(2,we)),lt=me.data,bt=[],Gt=this.stride;for(let Ft=0;Ft<lt.length;Ft+=Gt){if(lt[Ft+2]<=we)continue;lt[Ft+2]=we;const hn=lt[Ft],Dn=lt[Ft+1],Rn=me.within(lt[Ft],lt[Ft+1],_t),Zn=lt[Ft+5];let rr=Zn;for(const Pn of Rn){const Hn=Pn*Gt;lt[Hn+2]>we&&(rr+=lt[Hn+5])}if(rr>Zn&&rr>=ot){let Pn,Hn=hn*Zn,xi=Dn*Zn,oa=-1;const zi=(Ft/Gt<<5)+(we+1)+this.points.length;for(const ya of Rn){const ki=ya*Gt;if(lt[ki+2]<=we)continue;lt[ki+2]=we;const Or=lt[ki+5];Hn+=lt[ki]*Or,xi+=lt[ki+1]*Or,lt[ki+4]=zi,ze&&(Pn||(Pn=this._map(lt,Ft,!0),oa=this.clusterProps.length,this.clusterProps.push(Pn)),ze(Pn,this._map(lt,ki)))}lt[Ft+4]=zi,bt.push(Hn/rr,xi/rr,1/0,zi,-1,rr),ze&&bt.push(oa)}else{for(let Pn=0;Pn<Gt;Pn++)bt.push(lt[Ft+Pn]);if(rr>1)for(const Pn of Rn){const Hn=Pn*Gt;if(!(lt[Hn+2]<=we)){lt[Hn+2]=we;for(let xi=0;xi<Gt;xi++)bt.push(lt[Hn+xi])}}}}return bt}_getOriginId(me){return me-this.points.length>>5}_getOriginZoom(me){return(me-this.points.length)%32}_map(me,we,Le){if(me[we+5]>1){const ot=this.clusterProps[me[we+6]];return Le?Object.assign({},ot):ot}const Qe=this.points[me[we+3]].properties,ze=this.options.map(Qe);return Le&&ze===Qe?Object.assign({},ze):ze}}function ar(ut,me,we){return{type:"Feature",id:ut[me+3],properties:or(ut,me,we),geometry:{type:"Point",coordinates:[(Le=ut[me],360*(Le-.5)),Er(ut[me+1])]}};var Le}function or(ut,me,we){const Le=ut[me+5],Qe=Le>=1e4?`${Math.round(Le/1e3)}k`:Le>=1e3?Math.round(Le/100)/10+"k":Le,ze=ut[me+6],ot=ze===-1?{}:Object.assign({},we[ze]);return Object.assign(ot,{cluster:!0,cluster_id:ut[me+3],point_count:Le,point_count_abbreviated:Qe})}function Nr(ut){return ut/360+.5}function Pr(ut){const me=Math.sin(ut*Math.PI/180),we=.5-.25*Math.log((1+me)/(1-me))/Math.PI;return we<0?0:we>1?1:we}function Er(ut){const me=(180-360*ut)*Math.PI/180;return 360*Math.atan(Math.exp(me))/Math.PI-90}function Tr(ut,me,we,Le){let Qe=Le;const ze=me+(we-me>>1);let ot,_t=we-me;const lt=ut[me],bt=ut[me+1],Gt=ut[we],Ft=ut[we+1];for(let hn=me+3;hn<we;hn+=3){const Dn=pi(ut[hn],ut[hn+1],lt,bt,Gt,Ft);if(Dn>Qe)ot=hn,Qe=Dn;else if(Dn===Qe){const Rn=Math.abs(hn-ze);Rn<_t&&(ot=hn,_t=Rn)}}Qe>Le&&(ot-me>3&&Tr(ut,me,ot,Le),ut[ot+2]=Qe,we-ot>3&&Tr(ut,ot,we,Le))}function pi(ut,me,we,Le,Qe,ze){let ot=Qe-we,_t=ze-Le;if(ot!==0||_t!==0){const lt=((ut-we)*ot+(me-Le)*_t)/(ot*ot+_t*_t);lt>1?(we=Qe,Le=ze):lt>0&&(we+=ot*lt,Le+=_t*lt)}return ot=ut-we,_t=me-Le,ot*ot+_t*_t}function Fr(ut,me,we,Le){const Qe={id:ut??null,type:me,geometry:we,tags:Le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(me==="Point"||me==="MultiPoint"||me==="LineString")hi(Qe,we);else if(me==="Polygon")hi(Qe,we[0]);else if(me==="MultiLineString")for(const ze of we)hi(Qe,ze);else if(me==="MultiPolygon")for(const ze of we)hi(Qe,ze[0]);return Qe}function hi(ut,me){for(let we=0;we<me.length;we+=3)ut.minX=Math.min(ut.minX,me[we]),ut.minY=Math.min(ut.minY,me[we+1]),ut.maxX=Math.max(ut.maxX,me[we]),ut.maxY=Math.max(ut.maxY,me[we+1])}function $t(ut,me,we,Le){if(!me.geometry)return;const Qe=me.geometry.coordinates;if(Qe&&Qe.length===0)return;const ze=me.geometry.type,ot=Math.pow(we.tolerance/((1<<we.maxZoom)*we.extent),2);let _t=[],lt=me.id;if(we.promoteId?lt=me.properties[we.promoteId]:we.generateId&&(lt=Le||0),ze==="Point")En(Qe,_t);else if(ze==="MultiPoint")for(const bt of Qe)En(bt,_t);else if(ze==="LineString")ur(Qe,_t,ot,!1);else if(ze==="MultiLineString"){if(we.lineMetrics){for(const bt of Qe)_t=[],ur(bt,_t,ot,!1),ut.push(Fr(lt,"LineString",_t,me.properties));return}$r(Qe,_t,ot,!1)}else if(ze==="Polygon")$r(Qe,_t,ot,!0);else{if(ze!=="MultiPolygon"){if(ze==="GeometryCollection"){for(const bt of me.geometry.geometries)$t(ut,{id:lt,geometry:bt,properties:me.properties},we,Le);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const bt of Qe){const Gt=[];$r(bt,Gt,ot,!0),_t.push(Gt)}}ut.push(Fr(lt,ze,_t,me.properties))}function En(ut,me){me.push(Br(ut[0]),Ya(ut[1]),0)}function ur(ut,me,we,Le){let Qe,ze,ot=0;for(let lt=0;lt<ut.length;lt++){const bt=Br(ut[lt][0]),Gt=Ya(ut[lt][1]);me.push(bt,Gt,0),lt>0&&(ot+=Le?(Qe*Gt-bt*ze)/2:Math.sqrt(Math.pow(bt-Qe,2)+Math.pow(Gt-ze,2))),Qe=bt,ze=Gt}const _t=me.length-3;me[2]=1,Tr(me,0,_t,we),me[_t+2]=1,me.size=Math.abs(ot),me.start=0,me.end=me.size}function $r(ut,me,we,Le){for(let Qe=0;Qe<ut.length;Qe++){const ze=[];ur(ut[Qe],ze,we,Le),me.push(ze)}}function Br(ut){return ut/360+.5}function Ya(ut){const me=Math.sin(ut*Math.PI/180),we=.5-.25*Math.log((1+me)/(1-me))/Math.PI;return we<0?0:we>1?1:we}function vo(ut,me,we,Le,Qe,ze,ot,_t){if(Le/=me,ze>=(we/=me)&&ot<Le)return ut;if(ot<we||ze>=Le)return null;const lt=[];for(const bt of ut){const Gt=bt.geometry;let Ft=bt.type;const hn=Qe===0?bt.minX:bt.minY,Dn=Qe===0?bt.maxX:bt.maxY;if(hn>=we&&Dn<Le){lt.push(bt);continue}if(Dn<we||hn>=Le)continue;let Rn=[];if(Ft==="Point"||Ft==="MultiPoint")Yo(Gt,Rn,we,Le,Qe);else if(Ft==="LineString")Aa(Gt,Rn,we,Le,Qe,!1,_t.lineMetrics);else if(Ft==="MultiLineString")Ri(Gt,Rn,we,Le,Qe,!1);else if(Ft==="Polygon")Ri(Gt,Rn,we,Le,Qe,!0);else if(Ft==="MultiPolygon")for(const Zn of Gt){const rr=[];Ri(Zn,rr,we,Le,Qe,!0),rr.length&&Rn.push(rr)}if(Rn.length){if(_t.lineMetrics&&Ft==="LineString"){for(const Zn of Rn)lt.push(Fr(bt.id,Ft,Zn,bt.tags));continue}Ft!=="LineString"&&Ft!=="MultiLineString"||(Rn.length===1?(Ft="LineString",Rn=Rn[0]):Ft="MultiLineString"),Ft!=="Point"&&Ft!=="MultiPoint"||(Ft=Rn.length===3?"Point":"MultiPoint"),lt.push(Fr(bt.id,Ft,Rn,bt.tags))}}return lt.length?lt:null}function Yo(ut,me,we,Le,Qe){for(let ze=0;ze<ut.length;ze+=3){const ot=ut[ze+Qe];ot>=we&&ot<=Le&&zs(me,ut[ze],ut[ze+1],ut[ze+2])}}function Aa(ut,me,we,Le,Qe,ze,ot){let _t=Qi(ut);const lt=Qe===0?is:uf;let bt,Gt,Ft=ut.start;for(let rr=0;rr<ut.length-3;rr+=3){const Pn=ut[rr],Hn=ut[rr+1],xi=ut[rr+2],oa=ut[rr+3],zi=ut[rr+4],ya=Qe===0?Pn:Hn,ki=Qe===0?oa:zi;let Or=!1;ot&&(bt=Math.sqrt(Math.pow(Pn-oa,2)+Math.pow(Hn-zi,2))),ya<we?ki>we&&(Gt=lt(_t,Pn,Hn,oa,zi,we),ot&&(_t.start=Ft+bt*Gt)):ya>Le?ki<Le&&(Gt=lt(_t,Pn,Hn,oa,zi,Le),ot&&(_t.start=Ft+bt*Gt)):zs(_t,Pn,Hn,xi),ki<we&&ya>=we&&(Gt=lt(_t,Pn,Hn,oa,zi,we),Or=!0),ki>Le&&ya<=Le&&(Gt=lt(_t,Pn,Hn,oa,zi,Le),Or=!0),!ze&&Or&&(ot&&(_t.end=Ft+bt*Gt),me.push(_t),_t=Qi(ut)),ot&&(Ft+=bt)}let hn=ut.length-3;const Dn=ut[hn],Rn=ut[hn+1],Zn=Qe===0?Dn:Rn;Zn>=we&&Zn<=Le&&zs(_t,Dn,Rn,ut[hn+2]),hn=_t.length-3,ze&&hn>=3&&(_t[hn]!==_t[0]||_t[hn+1]!==_t[1])&&zs(_t,_t[0],_t[1],_t[2]),_t.length&&me.push(_t)}function Qi(ut){const me=[];return me.size=ut.size,me.start=ut.start,me.end=ut.end,me}function Ri(ut,me,we,Le,Qe,ze){for(const ot of ut)Aa(ot,me,we,Le,Qe,ze,!1)}function zs(ut,me,we,Le){ut.push(me,we,Le)}function is(ut,me,we,Le,Qe,ze){const ot=(ze-me)/(Le-me);return zs(ut,ze,we+(Qe-we)*ot,1),ot}function uf(ut,me,we,Le,Qe,ze){const ot=(ze-we)/(Qe-we);return zs(ut,me+(Le-me)*ot,ze,1),ot}function zu(ut,me){const we=[];for(let Le=0;Le<ut.length;Le++){const Qe=ut[Le],ze=Qe.type;let ot;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")ot=Nu(Qe.geometry,me);else if(ze==="MultiLineString"||ze==="Polygon"){ot=[];for(const _t of Qe.geometry)ot.push(Nu(_t,me))}else if(ze==="MultiPolygon"){ot=[];for(const _t of Qe.geometry){const lt=[];for(const bt of _t)lt.push(Nu(bt,me));ot.push(lt)}}we.push(Fr(Qe.id,ze,ot,Qe.tags))}return we}function Nu(ut,me){const we=[];we.size=ut.size,ut.start!==void 0&&(we.start=ut.start,we.end=ut.end);for(let Le=0;Le<ut.length;Le+=3)we.push(ut[Le]+me,ut[Le+1],ut[Le+2]);return we}function cf(ut,me){if(ut.transformed)return ut;const we=1<<ut.z,Le=ut.x,Qe=ut.y;for(const ze of ut.features){const ot=ze.geometry,_t=ze.type;if(ze.geometry=[],_t===1)for(let lt=0;lt<ot.length;lt+=2)ze.geometry.push(mi(ot[lt],ot[lt+1],me,we,Le,Qe));else for(let lt=0;lt<ot.length;lt++){const bt=[];for(let Gt=0;Gt<ot[lt].length;Gt+=2)bt.push(mi(ot[lt][Gt],ot[lt][Gt+1],me,we,Le,Qe));ze.geometry.push(bt)}}return ut.transformed=!0,ut}function mi(ut,me,we,Le,Qe,ze){return[Math.round(we*(ut*Le-Qe)),Math.round(we*(me*Le-ze))]}function oo(ut,me,we,Le,Qe){const ze=me===Qe.maxZoom?0:Qe.tolerance/((1<<me)*Qe.extent),ot={features:[],numPoints:0,numSimplified:0,numFeatures:ut.length,source:null,x:we,y:Le,z:me,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const _t of ut)ah(ot,_t,ze,Qe);return ot}function ah(ut,me,we,Le){const Qe=me.geometry,ze=me.type,ot=[];if(ut.minX=Math.min(ut.minX,me.minX),ut.minY=Math.min(ut.minY,me.minY),ut.maxX=Math.max(ut.maxX,me.maxX),ut.maxY=Math.max(ut.maxY,me.maxY),ze==="Point"||ze==="MultiPoint")for(let _t=0;_t<Qe.length;_t+=3)ot.push(Qe[_t],Qe[_t+1]),ut.numPoints++,ut.numSimplified++;else if(ze==="LineString")Pp(ot,Qe,ut,we,!1,!1);else if(ze==="MultiLineString"||ze==="Polygon")for(let _t=0;_t<Qe.length;_t++)Pp(ot,Qe[_t],ut,we,ze==="Polygon",_t===0);else if(ze==="MultiPolygon")for(let _t=0;_t<Qe.length;_t++){const lt=Qe[_t];for(let bt=0;bt<lt.length;bt++)Pp(ot,lt[bt],ut,we,!0,bt===0)}if(ot.length){let _t=me.tags||null;if(ze==="LineString"&&Le.lineMetrics){_t={};for(const bt in me.tags)_t[bt]=me.tags[bt];_t.mapbox_clip_start=Qe.start/Qe.size,_t.mapbox_clip_end=Qe.end/Qe.size}const lt={geometry:ot,type:ze==="Polygon"||ze==="MultiPolygon"?3:ze==="LineString"||ze==="MultiLineString"?2:1,tags:_t};me.id!==null&&(lt.id=me.id),ut.features.push(lt)}}function Pp(ut,me,we,Le,Qe,ze){const ot=Le*Le;if(Le>0&&me.size<(Qe?ot:Le))return void(we.numPoints+=me.length/3);const _t=[];for(let lt=0;lt<me.length;lt+=3)(Le===0||me[lt+2]>ot)&&(we.numSimplified++,_t.push(me[lt],me[lt+1])),we.numPoints++;Qe&&(function(lt,bt){let Gt=0;for(let Ft=0,hn=lt.length,Dn=hn-2;Ft<hn;Dn=Ft,Ft+=2)Gt+=(lt[Ft]-lt[Dn])*(lt[Ft+1]+lt[Dn+1]);if(Gt>0===bt)for(let Ft=0,hn=lt.length;Ft<hn/2;Ft+=2){const Dn=lt[Ft],Rn=lt[Ft+1];lt[Ft]=lt[hn-2-Ft],lt[Ft+1]=lt[hn-1-Ft],lt[hn-2-Ft]=Dn,lt[hn-1-Ft]=Rn}})(_t,ze),ut.push(_t)}const wl={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class vg{constructor(me,we){const Le=(we=this.options=(function(ze,ot){for(const _t in ot)ze[_t]=ot[_t];return ze})(Object.create(wl),we)).debug;if(Le&&console.time("preprocess data"),we.maxZoom<0||we.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(we.promoteId&&we.generateId)throw new Error("promoteId and generateId cannot be used together.");let Qe=(function(ze,ot){const _t=[];if(ze.type==="FeatureCollection")for(let lt=0;lt<ze.features.length;lt++)$t(_t,ze.features[lt],ot,lt);else $t(_t,ze.type==="Feature"?ze:{geometry:ze},ot);return _t})(me,we);this.tiles={},this.tileCoords=[],Le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",we.indexMaxZoom,we.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Qe=(function(ze,ot){const _t=ot.buffer/ot.extent;let lt=ze;const bt=vo(ze,1,-1-_t,_t,0,-1,2,ot),Gt=vo(ze,1,1-_t,2+_t,0,-1,2,ot);return(bt||Gt)&&(lt=vo(ze,1,-_t,1+_t,0,-1,2,ot)||[],bt&&(lt=zu(bt,1).concat(lt)),Gt&&(lt=lt.concat(zu(Gt,-1)))),lt})(Qe,we),Qe.length&&this.splitTile(Qe,0,0,0),Le&&(Qe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(me,we,Le,Qe,ze,ot,_t){const lt=[me,we,Le,Qe],bt=this.options,Gt=bt.debug;for(;lt.length;){Qe=lt.pop(),Le=lt.pop(),we=lt.pop(),me=lt.pop();const Ft=1<<we,hn=Sc(we,Le,Qe);let Dn=this.tiles[hn];if(!Dn&&(Gt>1&&console.time("creation"),Dn=this.tiles[hn]=oo(me,we,Le,Qe,bt),this.tileCoords.push({z:we,x:Le,y:Qe}),Gt)){Gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",we,Le,Qe,Dn.numFeatures,Dn.numPoints,Dn.numSimplified),console.timeEnd("creation"));const Or=`z${we}`;this.stats[Or]=(this.stats[Or]||0)+1,this.total++}if(Dn.source=me,ze==null){if(we===bt.indexMaxZoom||Dn.numPoints<=bt.indexMaxPoints)continue}else{if(we===bt.maxZoom||we===ze)continue;if(ze!=null){const Or=ze-we;if(Le!==ot>>Or||Qe!==_t>>Or)continue}}if(Dn.source=null,me.length===0)continue;Gt>1&&console.time("clipping");const Rn=.5*bt.buffer/bt.extent,Zn=.5-Rn,rr=.5+Rn,Pn=1+Rn;let Hn=null,xi=null,oa=null,zi=null,ya=vo(me,Ft,Le-Rn,Le+rr,0,Dn.minX,Dn.maxX,bt),ki=vo(me,Ft,Le+Zn,Le+Pn,0,Dn.minX,Dn.maxX,bt);me=null,ya&&(Hn=vo(ya,Ft,Qe-Rn,Qe+rr,1,Dn.minY,Dn.maxY,bt),xi=vo(ya,Ft,Qe+Zn,Qe+Pn,1,Dn.minY,Dn.maxY,bt),ya=null),ki&&(oa=vo(ki,Ft,Qe-Rn,Qe+rr,1,Dn.minY,Dn.maxY,bt),zi=vo(ki,Ft,Qe+Zn,Qe+Pn,1,Dn.minY,Dn.maxY,bt),ki=null),Gt>1&&console.timeEnd("clipping"),lt.push(Hn||[],we+1,2*Le,2*Qe),lt.push(xi||[],we+1,2*Le,2*Qe+1),lt.push(oa||[],we+1,2*Le+1,2*Qe),lt.push(zi||[],we+1,2*Le+1,2*Qe+1)}}getTile(me,we,Le){me=+me,we=+we,Le=+Le;const Qe=this.options,{extent:ze,debug:ot}=Qe;if(me<0||me>24)return null;const _t=1<<me,lt=Sc(me,we=we+_t&_t-1,Le);if(this.tiles[lt])return cf(this.tiles[lt],ze);ot>1&&console.log("drilling down to z%d-%d-%d",me,we,Le);let bt,Gt=me,Ft=we,hn=Le;for(;!bt&&Gt>0;)Gt--,Ft>>=1,hn>>=1,bt=this.tiles[Sc(Gt,Ft,hn)];return bt&&bt.source?(ot>1&&(console.log("found parent tile z%d-%d-%d",Gt,Ft,hn),console.time("drilling down")),this.splitTile(bt.source,Gt,Ft,hn,me,we,Le),ot>1&&console.timeEnd("drilling down"),this.tiles[lt]?cf(this.tiles[lt],ze):null):null}}function Sc(ut,me,we){return 32*((1<<ut)*we+me)+ut}function Vt(ut,me){const we=ut.tileID.canonical;if(!this._geoJSONIndex)return void me(null,null);const Le=this._geoJSONIndex.getTile(we.z,we.x,we.y);if(!Le)return void me(null,null);const Qe=bt=>bt.tags&&"3d_elevation_id"in bt.tags&&"source"in bt.tags&&bt.tags.source==="elevation",ze=Le.features.filter(bt=>Qe(bt));let ot={_geojsonTileLayer:Le.features};ze.length>0&&(ot={_geojsonTileLayer:Le.features.filter(bt=>!Qe(bt)),hd_road_elevation:ze});const _t=new Be(ot),lt=(function(bt){const Gt=new a.bt;for(const Ft of Object.keys(bt))Gt.writeMessage(3,dn,{name:Ft,features:bt[Ft]});return Gt.finish()})(ot).buffer;me(null,{vectorTile:_t,rawData:lt})}class Tc extends X{constructor(me,we,Le,Qe,ze,ot,_t){super(me,we,Le,Qe,ze,Vt,_t),ot&&(this.loadGeoJSON=ot),this._dynamicIndex=new Fe}loadData(me,we){const Le=me&&me.request,Qe=Le&&Le.collectResourceTiming;this._geoJSONIndex=null,this.loadGeoJSON(me,(ze,ot)=>{if(ze||!ot)return we(ze);if(typeof ot!="object")return we(new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`));{try{if(me.filter){const lt=a.U(me.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(lt.result==="error")throw new Error(lt.value.map(bt=>`${bt.key}: ${bt.message}`).join(", "));ot.features=ot.features.filter(bt=>lt.value.evaluate({zoom:0},bt))}me.dynamic?(ot.type==="Feature"&&(ot={type:"FeatureCollection",features:[ot]}),me.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(ot.features,this.loaded),me.cluster&&(ot.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=me.cluster?new An((function({superclusterOptions:lt,clusterProperties:bt}){if(!bt||!lt)return lt;const Gt={},Ft={},hn={accumulated:null,zoom:0},Dn={properties:null},Rn=Object.keys(bt);for(const Zn of Rn){const[rr,Pn]=bt[Zn],Hn=a.U(Pn),xi=a.U(typeof rr=="string"?[rr,["accumulated"],["get",Zn]]:rr);Gt[Zn]=Hn.value,Ft[Zn]=xi.value}return lt.map=Zn=>{Dn.properties=Zn;const rr={};for(const Pn of Rn)rr[Pn]=Gt[Pn].evaluate(hn,Dn);return rr},lt.reduce=(Zn,rr)=>{Dn.properties=rr;for(const Pn of Rn)hn.accumulated=Zn[Pn],Zn[Pn]=Ft[Pn].evaluate(hn,Dn)},lt})(me)).load(ot.features):me.dynamic?this._dynamicIndex:(function(lt,bt){return new vg(lt,bt)})(ot,me.geojsonVtOptions)}catch(lt){return we(lt)}const _t={};if(Qe){const lt=p(Le);lt&&(_t.resourceTiming={},_t.resourceTiming[me.source]=JSON.parse(JSON.stringify(lt)))}we(null,_t)}})}reloadTile(me,we){const Le=this.loaded;return Le&&Le[me.uid]?me.partial?we(null,void 0):super.reloadTile(me,we):this.loadTile(me,we)}loadGeoJSON(me,we){if(me.request)a.m(me.request,we);else{if(typeof me.data!="string")return we(new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`));setTimeout(()=>{try{return we(null,JSON.parse(me.data))}catch{return we(new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`))}},0)}}getClusterExpansionZoom(me,we){try{we(null,this._geoJSONIndex.getClusterExpansionZoom(me.clusterId))}catch(Le){we(Le)}}getClusterChildren(me,we){try{we(null,this._geoJSONIndex.getChildren(me.clusterId))}catch(Le){we(Le)}}getClusterLeaves(me,we){try{we(null,this._geoJSONIndex.getLeaves(me.clusterId,me.limit,me.offset))}catch(Le){we(Le)}}}class x_{constructor(me,we,Le){this.tileID=new a.aQ(me.tileID.overscaledZ,me.tileID.wrap,me.tileID.canonical.z,me.tileID.canonical.x,me.tileID.canonical.y),this.tileZoom=me.tileZoom,this.uid=me.uid,this.zoom=me.zoom,this.canonical=me.tileID.canonical,this.pixelRatio=me.pixelRatio,this.tileSize=me.tileSize,this.source=me.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=me.projection,this.brightness=we,this.worldview=Le}parse(me,we,Le,Qe){this.status="parsing";const ze=new a.aQ(Le.tileID.overscaledZ,Le.tileID.wrap,Le.tileID.canonical.z,Le.tileID.canonical.x,Le.tileID.canonical.y),ot=[],_t=we.familiesBySource[Le.source],lt=new a.fn(ze,Le.promoteId);lt.bucketLayerIDs=[],lt.is3DTile=!0,a.fC(me).then(bt=>{if(!bt)return Qe(new Error("Could not parse tile"));const Gt=bt.json.extensionsUsed&&bt.json.extensionsUsed.includes("MAPBOX_mesh_features")||bt.json.asset.extras&&bt.json.asset.extras.MAPBOX_mesh_features,Ft=bt.json.extensionsUsed&&bt.json.extensionsUsed.includes("EXT_meshopt_compression"),hn=new a.ac(this.zoom,{brightness:this.brightness,worldview:this.worldview});for(const Dn in _t)for(const Rn of _t[Dn]){const Zn=Rn[0];lt.bucketLayerIDs.push(Rn.map(Hn=>a.B(Hn.id,Hn.scope))),Zn.recalculate(hn,[]);const rr=a.fD(bt,1/a.d7(Le.tileID.canonical)),Pn=new a.fE(Rn,rr,ze,Gt,Ft,this.brightness,lt,this.worldview);Gt||(Pn.needsUpload=!0),ot.push(Pn),Pn.evaluate(Zn)}this.status="done",Qe(null,{buckets:ot,featureIndex:lt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(bt=>Qe(new Error(bt.message)))}}class Rp{constructor(me,we,Le,Qe,ze,ot,_t,lt){this.actor=me,this.layerIndex=we,this.availableImages=Le,this.availableModels=Qe,this.brightness=_t,this.loading={},this.loaded={},this.worldview=lt}loadTile(me,we){const Le=me.uid,Qe=this.loading[Le]=new x_(me,this.brightness,this.worldview);a.bu(me.request,(ze,ot)=>{const _t=!this.loading[Le];return delete this.loading[Le],_t||ze?(Qe.status="done",_t||(this.loaded[Le]=Qe),we(ze)):ot&&ot.byteLength!==0?void Qe.parse(ot,this.layerIndex,me,(lt,bt)=>{Qe.status="done",this.loaded=this.loaded||{},this.loaded[Le]=Qe,lt||!bt?we(lt):we(null,bt)}):(Qe.status="done",this.loaded[Le]=Qe,we())})}reloadTile(me,we){const Le=this.loaded,Qe=me.uid;if(Le&&Le[Qe]){const ze=Le[Qe];ze.projection=me.projection,ze.brightness=me.brightness;const ot=(_t,lt)=>{ze.reloadCallback&&(delete ze.reloadCallback,this.loadTile(me,we)),we(_t,lt)};ze.status==="parsing"?ze.reloadCallback=ot:ze.status==="done"&&this.loadTile(me,we)}}abortTile(me,we){const Le=me.uid;this.loading[Le]&&delete this.loading[Le],we()}removeTile(me,we){const Le=this.loaded,Qe=me.uid;Le&&Le[Qe]&&delete Le[Qe],we()}}class Ar{constructor(me){this.self=me,this.actor=new a.fG(me,this),this.layerIndexes={},this.availableImages={},this.availableModels={},this.isSpriteLoaded={},this.imageRasterizer=new a.x,this.rtlPluginParsingListeners=[],this.projections={},this.defaultProjection=a.cm({name:"mercator"}),this.workerSourceTypes={vector:X,geojson:Tc,"raster-dem":ae,"raster-array":ge,"batched-model":Rp},this.workerSources={},this.self.registerWorkerSource=(we,Le)=>{if(this.workerSourceTypes[we])throw new Error(`Worker source with name "${we}" already registered.`);this.workerSourceTypes[we]=Le},this.self.registerRTLTextPlugin=we=>{if(a.fH.isParsed())throw new Error("RTL text plugin already registered.");a.fH.setState({pluginStatus:a.fI.parsed,pluginURL:a.fH.getPluginURL()}),a.fH.applyArabicShaping=we.applyArabicShaping,a.fH.processBidirectionalText=we.processBidirectionalText,a.fH.processStyledBidirectionalText=we.processStyledBidirectionalText;for(const Le of this.rtlPluginParsingListeners)Le(null,!0);this.rtlPluginParsingListeners=[]}}clearCaches(me,we,Le){delete this.layerIndexes[me],delete this.availableImages[me],delete this.availableModels[me],delete this.workerSources[me],Le()}checkIfReady(me,we,Le){Le()}setReferrer(me,we){this.referrer=we}spriteLoaded(me,we){this.isSpriteLoaded[me]||(this.isSpriteLoaded[me]={});const{scope:Le,isLoaded:Qe}=we;if(this.isSpriteLoaded[me][Le]=Qe,this.workerSources[me]&&this.workerSources[me][Le])for(const ze in this.workerSources[me][Le]){const ot=this.workerSources[me][Le][ze];for(const _t in ot){const lt=ot[_t];lt instanceof X&&(lt.isSpriteLoaded=Qe,lt.fire(new a.z("isSpriteLoaded")))}}}setImages(me,we,Le){this.availableImages[me]||(this.availableImages[me]={});const{scope:Qe,images:ze}=we;if(this.availableImages[me][Qe]=ze,this.workerSources[me]&&this.workerSources[me][Qe]){for(const ot in this.workerSources[me][Qe]){const _t=this.workerSources[me][Qe][ot];for(const lt in _t)_t[lt].availableImages=ze}Le()}else Le()}setModels(me,{scope:we,models:Le},Qe){if(this.availableModels[me]||(this.availableModels[me]={}),this.availableModels[me][we]=Le,this.workerSources[me]&&this.workerSources[me][we]){for(const ze in this.workerSources[me][we]){const ot=this.workerSources[me][we][ze];for(const _t in ot)ot[_t].availableModels=Le}Qe()}else Qe()}setProjection(me,we){this.projections[me]=a.cm(we)}setBrightness(me,we,Le){this.brightness=we,Le()}setWorldview(me,we,Le){this.worldview=we,Le()}setLayers(me,we,Le){this.getLayerIndex(me,we.scope).replace(we.layers,we.options),Le()}updateLayers(me,we,Le){this.getLayerIndex(me,we.scope).update(we.layers,we.removedIds,we.options),Le()}loadTile(me,we,Le){we.projection=this.projections[me]||this.defaultProjection,this.getWorkerSource(me,we.type,we.source,we.scope).loadTile(we,Le)}decodeRasterArray(me,we,Le){this.getWorkerSource(me,we.type,we.source,we.scope).decodeRasterArray(we,Le)}reloadTile(me,we,Le){we.projection=this.projections[me]||this.defaultProjection,this.getWorkerSource(me,we.type,we.source,we.scope).reloadTile(we,Le)}abortTile(me,we,Le){this.getWorkerSource(me,we.type,we.source,we.scope).abortTile(we,Le)}removeTile(me,we,Le){this.getWorkerSource(me,we.type,we.source,we.scope).removeTile(we,Le)}removeSource(me,we,Le){if(!(this.workerSources[me]&&this.workerSources[me][we.scope]&&this.workerSources[me][we.scope][we.type]&&this.workerSources[me][we.scope][we.type][we.source]))return;const Qe=this.workerSources[me][we.scope][we.type][we.source];delete this.workerSources[me][we.scope][we.type][we.source],Qe.removeSource!==void 0?Qe.removeSource(we,Le):Le()}loadWorkerSource(me,we,Le){try{this.self.importScripts(we.url),Le()}catch(Qe){Le(Qe)}}syncRTLPluginState(me,we,Le){if(a.fH.isParsed())Le(null,!0);else if(a.fH.isParsing())this.rtlPluginParsingListeners.push(Le);else try{a.fH.setState(we);const Qe=a.fH.getPluginURL();!a.fH.isLoaded()||a.fH.isParsed()||a.fH.isParsing()||Qe==null||(a.fH.setState({pluginStatus:a.fI.parsing,pluginURL:a.fH.getPluginURL()}),this.self.importScripts(Qe),a.fH.isParsed()?Le(null,!0):this.rtlPluginParsingListeners.push(Le))}catch(Qe){Le(Qe)}}setDracoUrl(me,we){this.dracoUrl=we}getAvailableImages(me,we){this.availableImages[me]||(this.availableImages[me]={});let Le=this.availableImages[me][we];return Le||(Le=[]),Le}getAvailableModels(me,we){this.availableModels[me]||(this.availableModels[me]={});let Le=this.availableModels[me][we];return Le||(Le={}),Le}getLayerIndex(me,we){this.layerIndexes[me]||(this.layerIndexes[me]={});let Le=this.layerIndexes[me][we];return Le||(Le=this.layerIndexes[me][we]=new I,Le.scope=we),Le}getWorkerSource(me,we,Le,Qe){const ze=this.workerSources;return ze[me]||(ze[me]={}),ze[me][Qe]||(ze[me][Qe]={}),ze[me][Qe][we]||(ze[me][Qe][we]={}),this.isSpriteLoaded[me]||(this.isSpriteLoaded[me]={}),ze[me][Qe][we][Le]||(ze[me][Qe][we][Le]=new this.workerSourceTypes[we]({send:(ot,_t,lt,bt,Gt,Ft)=>this.actor.send(ot,_t,lt,me,Gt,Ft),scheduler:this.actor.scheduler},this.getLayerIndex(me,Qe),this.getAvailableImages(me,Qe),this.getAvailableModels(me,Qe),this.isSpriteLoaded[me][Qe],void 0,this.brightness,this.worldview)),ze[me][Qe][we][Le]}rasterizeImagesWorker(me,we,Le){const Qe=new Map;for(const[ze,{image:ot,imageVariant:_t}]of we.tasks.entries()){const lt=this.imageRasterizer.rasterize(_t,ot,we.scope,me);Qe.set(ze,lt)}Le(void 0,Qe)}removeRasterizedImages(me,we,Le){this.imageRasterizer.removeImagesFromCacheByIds(we.imageIds,we.scope,me),Le()}enforceCacheSizeLimit(me,we){a.fJ(we)}getWorkerPerformanceMetrics(me,we,Le){Le(void 0,void 0)}}return a.fF(self)&&(self.worker=new Ar(self)),Ar}),s(["./shared"],function(a){var p="3.18.1";const y={create:"create",load:"load",fullLoad:"fullLoad"},S={mark(_){performance.mark(_)},measure(_,l,d){performance.measure(_,l,d)}};function E(_){const l=_.name.split("?")[0];return a.a(l)&&l.includes("mapbox-gl.js")?"javascript":a.a(l)&&l.includes("mapbox-gl.css")?"css":a.b(l)?"fontRange":a.c(l)?"sprite":a.i(l)?"style":a.d(l)?"tilejson":"other"}var I,L={},N=(function(){if(I)return L;function _(v){return!l(v)}function l(v){return typeof window>"u"||typeof document>"u"?"not a browser":(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var O,M,R=new Blob([""],{type:"text/javascript"}),F=URL.createObjectURL(R);try{M=new Worker(F),O=!0}catch{O=!1}return M&&M.terminate(),URL.revokeObjectURL(F),O})()?(function(){var O=document.createElement("canvas");O.width=O.height=1;var M=O.getContext("2d");if(!M)return!1;var R=M.getImageData(0,0,1,1);return R&&R.width===O.width})()?(d[T=v&&v.failIfMajorPerformanceCaveat]===void 0&&(d[T]=(function(O){var M,R=(function(F){var q=document.createElement("canvas"),H=Object.create(_.webGLContextAttributes);return H.failIfMajorPerformanceCaveat=F,q.getContext("webgl2",H)})(O);if(!R)return!1;try{M=R.createShader(R.VERTEX_SHADER)}catch{return!1}return!(!M||R.isContextLost())&&(R.shaderSource(M,"void main() {}"),R.compileShader(M),R.getShaderParameter(M,R.COMPILE_STATUS)===!0)})(T)),d[T]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var T}I=1,L.supported=_,L.notSupportedReason=l;var d={};return _.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},L})();function j(_,l,d){const v=document.createElement(_);return l!=null&&(v.className=l),d&&d.appendChild(v),v}function k(_,l,d){const v=document.createElementNS("http://www.w3.org/2000/svg",_);for(const T of Object.keys(l))v.setAttributeNS(null,T,String(l[T]));return d&&d.appendChild(v),v}const V=typeof document<"u"?document.documentElement&&document.documentElement.style:null,K=V&&V.userSelect!==void 0?"userSelect":"WebkitUserSelect";let J;function ie(){V&&K&&(J=V[K],V[K]="none")}function Q(){V&&K&&(V[K]=J)}function W(_){_.preventDefault(),_.stopPropagation(),window.removeEventListener("click",W,!0)}function te(){window.addEventListener("click",W,!0),window.setTimeout(()=>{window.removeEventListener("click",W,!0)},0)}function X(_,l){const d=_.getBoundingClientRect();return ge(_,d,l)}function ae(_,l){const d=_.getBoundingClientRect(),v=[];for(let T=0;T<l.length;T++)v.push(ge(_,d,l[T]));return v}function le(_){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&_.button===2&&_.ctrlKey?0:_.button}function ge(_,l,d){const v=_.offsetWidth===l.width?1:_.offsetWidth/l.width;return new a.P((d.clientX-l.left)*v,(d.clientY-l.top)*v)}const ye="01",De="NO_ACCESS_TOKEN";class He{constructor(l,d,v){this._transformRequestFn=l,this._customAccessToken=d,this._silenceAuthErrors=!!v,this._createSkuToken()}_createSkuToken(){const l=(function(){let d="";for(let v=0;v<10;v++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ye,d].join(""),tokenExpiresAt:Date.now()+432e5}})();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(l,d){return this._transformRequestFn&&this._transformRequestFn(l,d)||{url:l}}normalizeStyleURL(l,d){if(!a.h(l))return l;const v=Ee(l);return v.params.push(`sdk=js-${p}`),v.path=`/styles/v1${v.path}`,this._makeAPIURL(v,this._customAccessToken||d)}normalizeGlyphsURL(l,d){if(!a.h(l))return l;const v=Ee(l);return v.path=`/fonts/v1${v.path}`,this._makeAPIURL(v,this._customAccessToken||d)}normalizeModelURL(l,d){if(!a.h(l))return l;const v=Ee(l);return v.path=`/models/v1${v.path}`,this._makeAPIURL(v,this._customAccessToken||d)}normalizeSourceURL(l,d,v,T){if(!a.h(l))return l;const O=Ee(l);return O.path=`/v4/${O.authority}.json`,O.params.push("secure"),v&&O.params.push(`language=${v}`),T&&O.params.push(`worldview=${T}`),this._makeAPIURL(O,this._customAccessToken||d)}normalizeIconsetURL(l,d){const v=Ee(l);return a.h(l)?(v.path=`/styles/v1${v.path}/iconset.pbf`,this._makeAPIURL(v,this._customAccessToken||d)):Fe(v)}normalizeSpriteURL(l,d,v,T){const O=Ee(l);return a.h(l)?(O.path=`/styles/v1${O.path}/sprite${d}${v}`,this._makeAPIURL(O,this._customAccessToken||T)):(O.path+=`${d}${v}`,Fe(O))}normalizeTileURL(l,d,v){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!a.h(l))return l;const T=Ee(l);T.path=T.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${d||v&&T.authority!=="raster"&&v===512?"@2x":""}${a.k.supported?".webp":"$1"}`),T.authority==="raster"?T.path=`/${a.e.RASTER_URL_PREFIX}${T.path}`:T.authority==="rasterarrays"?T.path=`/${a.e.RASTERARRAYS_URL_PREFIX}${T.path}`:T.authority==="3dtiles"?T.path=`/${a.e.TILES3D_URL_PREFIX}${T.path}`:(T.path=T.path.replace(/^.+\/v4\//,"/"),T.path=`/${a.e.TILE_URL_VERSION}${T.path}`);const O=this._customAccessToken||(function(M){for(const R of M){const F=R.match(/^access_token=(.*)$/);if(F)return F[1]}return null})(T.params)||a.e.ACCESS_TOKEN;return a.e.REQUIRE_ACCESS_TOKEN&&O&&this._skuToken&&T.params.push(`sku=${this._skuToken}`),this._makeAPIURL(T,O)}canonicalizeTileURL(l,d){const v=Ee(l);if(!v.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!v.path.match(/\.[\w]+$/))return l;let T="mapbox://";v.path.match(/^\/raster\/v1\//)?T+=`raster/${v.path.replace(`/${a.e.RASTER_URL_PREFIX}/`,"")}`:v.path.match(/^\/rasterarrays\/v1\//)?T+=`rasterarrays/${v.path.replace(`/${a.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:T+=`tiles/${v.path.replace(`/${a.e.TILE_URL_VERSION}/`,"")}`;let O=v.params;return d&&(O=O.filter(M=>!M.match(/^access_token=/))),O.length&&(T+=`?${O.join("&")}`),T}canonicalizeTileset(l,d){const v=!!d&&a.h(d),T=[];for(const O of l.tiles||[])a.j(O)?T.push(this.canonicalizeTileURL(O,v)):T.push(O);return T}_makeAPIURL(l,d){const v="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",T=Ee(a.e.API_URL);if(l.protocol=T.protocol,l.authority=T.authority,l.protocol==="http"){const O=l.params.indexOf("secure");O>=0&&l.params.splice(O,1)}if(T.path!=="/"&&(l.path=`${T.path}${l.path}`),!a.e.REQUIRE_ACCESS_TOKEN)return Fe(l);if(d=d||a.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!d)throw new Error(`An API access token is required to use Mapbox GL. ${v}`);if(d[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${v}`)}return l.params=l.params.filter(O=>O.indexOf("access_token")===-1),l.params.push(`access_token=${d||""}`),Fe(l)}}const Be=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ee(_){const l=_.match(Be);if(!l)throw new Error("Unable to parse URL object");return{protocol:l[1],authority:l[2],path:l[3]||"/",params:l[4]?l[4].split("&"):[]}}function Fe(_){const l=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${l}`}const at="mapbox.eventData";function yt(_){if(!_)return null;const l=_.split(".");if(!l||l.length!==3)return null;try{return JSON.parse(a.l(l[1]))}catch{return null}}class je{constructor(l){this.type=l,this.anonId=null,this.anonIdTimestamp=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(l){const d=yt(a.e.ACCESS_TOKEN);let v="";return v=d&&d.u?a.f(d.u):a.e.ACCESS_TOKEN||"",l?`${at}.${l}:${v}`:`${at}:${v}`}fetchEventData(){const l=a.s("localStorage"),d=this.getStorageKey(),v=this.getStorageKey("uuid"),T=this.getStorageKey("uuidTimestamp");if(l)try{const O=localStorage.getItem(d);O&&(this.eventData=JSON.parse(O));const M=localStorage.getItem(v);M&&(this.anonId=M);const R=localStorage.getItem(T);R&&(this.anonIdTimestamp=Number(R));const F=Date.now()-864e5;(!this.anonIdTimestamp||this.anonIdTimestamp<F)&&this.refreshUUID()}catch{a.w("Unable to read from LocalStorage")}}refreshUUID(){this.anonId=a.u(),this.anonIdTimestamp=Date.now()}saveEventData(){const l=a.s("localStorage"),d=this.getStorageKey(),v=this.getStorageKey("uuid"),T=this.getStorageKey("uuidTimestamp"),O=this.anonId,M=this.anonIdTimestamp;if(l&&O)try{localStorage.setItem(v,O),Object.keys(this.eventData).length>=1&&localStorage.setItem(d,JSON.stringify(this.eventData)),M&&localStorage.setItem(T,M.toString())}catch{a.w("Unable to write to LocalStorage")}}processRequests(l){}postEvent(l,d,v,T){if(!a.e.EVENTS_URL)return;const O=Ee(a.e.EVENTS_URL);O.params.push(`access_token=${T||a.e.ACCESS_TOKEN||""}`);const M={event:this.type,created:new Date(l).toISOString()},R=d?Object.assign(M,d):M,F={url:Fe(O),headers:{"Content-Type":"text/plain"},body:JSON.stringify([R])};this.pendingRequest=a.p(F,q=>{this.pendingRequest=null,v(q),this.saveEventData(),this.processRequests(T)})}queueRequest(l,d){this.queue.push(l),this.processRequests(d)}}class Ke extends je{constructor(l){super("metrics"),l&&(this.data=l)}postMetricsEvent(l){if(!a.e.EVENTS_URL||!l&&!a.e.ACCESS_TOKEN)return;this.anonId||this.fetchEventData(),a.v(this.anonId)||this.refreshUUID();const d=Object.assign({},this.data,{sessionId:this.anonId});this.queueRequest({timestamp:Date.now(),payload:d},l)}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:d,payload:v}=this.queue.shift();this.postEvent(d,v,()=>{},l)}}const it=new class extends je{constructor(_){super("appUserTurnstile"),this._customAccessToken=_}postTurnstileEvent(_,l){a.e.EVENTS_URL&&a.e.ACCESS_TOKEN&&Array.isArray(_)&&_.some(d=>a.h(d)||a.j(d))&&this.queueRequest(Date.now(),l)}processRequests(_){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.anonIdTimestamp&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const l=yt(a.e.ACCESS_TOKEN),d=l?l.u:a.e.ACCESS_TOKEN;let v=d!==this.eventData.tokenU;a.v(this.anonId)||(this.refreshUUID(),v=!0);const T=this.queue.shift();if(this.eventData.lastSuccess){const O=new Date(this.eventData.lastSuccess),M=new Date(T),R=(T-this.eventData.lastSuccess)/864e5;v=v||R>=1||R<-1||O.getDate()!==M.getDate()}else v=!0;v?this.postEvent(T,{sdkIdentifier:"mapbox-gl-js",sdkVersion:p,skuId:ye,"enabled.telemetry":!1,userId:this.anonId},O=>{O||(this.eventData.lastSuccess=T,this.eventData.tokenU=d)},_):this.processRequests()}},Pe=it.postTurnstileEvent.bind(it),jt=new class extends je{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(_,l,d,v){this.skuToken=l,this.errorCb=v,a.e.EVENTS_URL&&(d||a.e.ACCESS_TOKEN?this.queueRequest({id:_,timestamp:Date.now()},d):this.errorCb(new Error(De)))}processRequests(_){if(this.pendingRequest||this.queue.length===0)return;const{id:l,timestamp:d}=this.queue.shift();l&&this.success[l]||(this.anonId&&this.anonIdTimestamp||this.fetchEventData(),a.v(this.anonId)||this.refreshUUID(),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:p,skuId:ye,skuToken:this.skuToken,userId:this.anonId},v=>{v?this.errorCb(v):l&&(this.success[l]=!0)},_))}remove(){this.errorCb=null}},sn=jt.postMapLoadEvent.bind(jt),dn=new class extends je{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(_){let l=this.mapInstanceIdMap.get(_);return l||(l=a.u(),this.mapInstanceIdMap.set(_,l)),l}getEventId(_){const l=this.eventIdPerMapInstanceMap.get(_)||0;return this.eventIdPerMapInstanceMap.set(_,l+1),l}postStyleLoadEvent(_,l){const{map:d,style:v,importedStyles:T}=l;if(!a.e.EVENTS_URL||!_&&!a.e.ACCESS_TOKEN)return;const O=this.getMapInstanceId(d),M={mapInstanceId:O,eventId:this.getEventId(O),style:v};T.length&&(M.importedStyles=T),this.queueRequest({timestamp:Date.now(),payload:M},_)}processRequests(_){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:l,payload:d}=this.queue.shift();this.postEvent(l,d,()=>{},_)}},Tn=dn.postStyleLoadEvent.bind(dn),Ut=new Ke({attributes:[{name:"maps/js/layer-animations/style-with-appearances"}]}),xe=Ut.postMetricsEvent.bind(Ut),Ye=new Ke({attributes:[{name:"maps/js/layer-animations/runtime-appearances"}]}),ct=Ye.postMetricsEvent.bind(Ye),mt=new class extends je{constructor(){super("gljs.performance")}postPerformanceEvent(_,l){a.e.EVENTS_URL&&(_||a.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:l},_)}processRequests(_){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:l,performanceData:d}=this.queue.shift(),v=(function(T){const O=performance.getEntriesByType("resource"),M=performance.getEntriesByType("mark"),R=(function(oe){const he={};if(oe){for(const ce in oe)if(ce!=="other")for(const de of oe[ce]){const _e=`${ce}ResolveRangeMin`,Me=`${ce}ResolveRangeMax`,Ce=`${ce}RequestCount`,Ae=`${ce}RequestCachedCount`;he[_e]=Math.min(he[_e]||1/0,de.startTime),he[Me]=Math.max(he[Me]||-1/0,de.responseEnd);const We=$e=>{he[$e]===void 0&&(he[$e]=0),++he[$e]};de.transferSize!==void 0&&de.transferSize===0&&We(Ae),We(Ce)}}return he})((function(oe,he){const ce={};if(oe)for(const de of oe){const _e=he(de);ce[_e]===void 0&&(ce[_e]=[]),ce[_e].push(de)}return ce})(O,E)),F=window.devicePixelRatio,q=navigator.connection||navigator.mozConnection||navigator.webkitConnection,H=q?q.effectiveType:void 0,re={counters:[],metadata:[],attributes:[]},ee=(oe,he,ce)=>{ce!=null&&oe.push({name:he,value:ce.toString()})};for(const oe in R)ee(re.counters,oe,R[oe]);if(T.interactionRange[0]!==1/0&&T.interactionRange[1]!==-1/0&&(ee(re.counters,"interactionRangeMin",T.interactionRange[0]),ee(re.counters,"interactionRangeMax",T.interactionRange[1])),M)for(const oe of Object.values(y)){const he=M.find(ce=>ce.name===oe);he&&ee(re.counters,oe,he.startTime)}return ee(re.counters,"visibilityHidden",T.visibilityHidden),ee(re.attributes,"style",(function(oe){if(oe)for(const he of oe){const ce=he.name.split("?")[0];if(a.i(ce)){const de=ce.split("/").slice(-2);if(de.length===2)return`mapbox://styles/${de[0]}/${de[1]}`}}})(O)),ee(re.attributes,"terrainEnabled",T.terrainEnabled?"true":"false"),ee(re.attributes,"fogEnabled",T.fogEnabled?"true":"false"),ee(re.attributes,"projection",T.projection),ee(re.attributes,"zoom",T.zoom),ee(re.metadata,"devicePixelRatio",F),ee(re.metadata,"connectionEffectiveType",H),ee(re.metadata,"navigatorUserAgent",navigator.userAgent),ee(re.metadata,"screenWidth",window.screen.width),ee(re.metadata,"screenHeight",window.screen.height),ee(re.metadata,"windowWidth",window.innerWidth),ee(re.metadata,"windowHeight",window.innerHeight),ee(re.metadata,"mapWidth",T.width/F),ee(re.metadata,"mapHeight",T.height/F),ee(re.metadata,"webglRenderer",T.renderer),ee(re.metadata,"webglVendor",T.vendor),ee(re.metadata,"sdkVersion",p),ee(re.metadata,"sdkIdentifier","mapbox-gl-js"),re})(d);for(const T of v.metadata);for(const T of v.counters);for(const T of v.attributes);this.postEvent(l,v,()=>{},_)}},Ct=mt.postPerformanceEvent.bind(mt),Yt=new class extends je{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(_,l,d,v){if(!a.e.API_URL||!a.e.SESSION_PATH)return;const T=Ee(a.e.API_URL+a.e.SESSION_PATH);T.params.push(`sku=${l||""}`),T.params.push(`access_token=${v||a.e.ACCESS_TOKEN||""}`);const O={url:Fe(T),headers:{"Content-Type":"text/plain"}};this.pendingRequest=a.g(O,M=>{this.pendingRequest=null,d(M),this.saveEventData(),this.processRequests(v)})}getSessionAPI(_,l,d,v){this.skuToken=l,this.errorCb=v,a.e.SESSION_PATH&&a.e.API_URL&&(d||a.e.ACCESS_TOKEN?this.queueRequest({id:_,timestamp:Date.now()},d):this.errorCb(new Error(De)))}processRequests(_){if(this.pendingRequest||this.queue.length===0)return;const{id:l,timestamp:d}=this.queue.shift();l&&this.success[l]||this.getSession(d,this.skuToken,v=>{v?this.errorCb(v):l&&(this.success[l]=!0)},_)}remove(){this.errorCb=null}},gn=Yt.getSessionAPI.bind(Yt),An=new Set;function ar(_,l){l?An.add(_):An.delete(_)}class or{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages={}}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(l,d){this._updatedSourceCaches[l]=d,this.setDirty()}discardSourceCacheUpdate(l){delete this._updatedSourceCaches[l]}updateLayer(l){const d=l.scope;this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._updatedLayers[d].add(l.id),this.setDirty()}removeLayer(l){const d=l.scope;this._removedLayers[d]=this._removedLayers[d]||{},this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._removedLayers[d][l.id]=l,this._updatedLayers[d].delete(l.id),this._updatedPaintProps.delete(l.fqid),this.setDirty()}getRemovedLayer(l){return this._removedLayers[l.scope]?this._removedLayers[l.scope][l.id]:null}discardLayerRemoval(l){this._removedLayers[l.scope]&&delete this._removedLayers[l.scope][l.id]}getLayerUpdatesByScope(){const l={};for(const d in this._updatedLayers)l[d]=l[d]||{},l[d].updatedIds=Array.from(this._updatedLayers[d].values());for(const d in this._removedLayers)l[d]=l[d]||{},l[d].removedIds=Object.keys(this._removedLayers[d]);return l}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(l){this._updatedPaintProps.add(l.fqid),this.setDirty()}getUpdatedImages(l){return this._updatedImages[l]?Array.from(this._updatedImages[l].values()):[]}updateImage(l,d){this._updatedImages[d]=this._updatedImages[d]||new Set,this._updatedImages[d].add(a.I.toString(l)),this.setDirty()}resetUpdatedImages(l){this._updatedImages[l]&&this._updatedImages[l].clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages={}}}function Nr(_){const{userImage:l}=_;return!!(l&&l.render&&l.render())&&(_.data.replace(new Uint8Array(l.data.buffer)),!0)}class Pr extends a.E{constructor(l){super(),this.imageProviders=new Map,this.images=new Map,this.updatedImages=new Map,this.callbackDispatchedThisFrame=new Map,this.loaded=new Map,this.requestors=[],this.patterns=new Map,this.patternsInFlight=new Set,this.atlasImage=new Map,this.atlasTexture=new Map,this.dirty=!0,this.spriteFormat=l,l!=="raster"&&a.r()&&(this.imageRasterizerDispatcher=new a.D(a.t(),this,"Image Rasterizer Worker",1))}addScope(l){this.loaded.set(l,!1),this.imageProviders.set(l,new Map),this.images.set(l,new Map),this.updatedImages.set(l,new Set),this.callbackDispatchedThisFrame.set(l,new Set),this.patterns.set(l,new Map),this.atlasImage.set(l,new a.q({width:1,height:1}))}removeScope(l){this.loaded.delete(l),this.imageProviders.delete(l),this.images.delete(l),this.updatedImages.delete(l),this.callbackDispatchedThisFrame.delete(l),this.patterns.delete(l),this.atlasImage.delete(l);const d=this.atlasTexture.get(l);d&&(d.destroy(),this.atlasTexture.delete(l))}addImageProvider(l,d){this.imageProviders.has(d)||this.imageProviders.set(d,new Map),this.imageProviders.get(d).set(l.id,l)}removeImageProvider(l,d){this.imageProviders.has(d)&&this.imageProviders.get(d).delete(l)}getPendingImageProviders(){const l=[];for(const d of this.imageProviders.values())for(const v of d.values())v.hasPendingRequests()&&l.push(v);return l}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new a.x),this._imageRasterizer}isLoaded(){for(const l of this.loaded.keys())if(!this.loaded.get(l))return!1;return!0}setLoaded(l,d){if(this.loaded.get(d)!==l&&(this.loaded.set(d,l),l)){for(const{ids:v,callback:T}of this.requestors)this._notify(v,d,T);this.requestors=[]}}hasImage(l,d){return!!this.getImage(l,d)}getImage(l,d){return this.images.get(d).get(l.toString())}addImage(l,d,v){this._validate(l,v)&&this.images.get(d).set(l.toString(),v)}_validate(l,d){let v=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new a.y(new Error(`Image "${l.name}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new a.y(new Error(`Image "${l.name}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new a.y(new Error(`Image "${l.name}" has invalid "content" value`))),v=!1),v}_validateStretch(l,d){if(!l)return!0;let v=0;for(const T of l){if(T[0]<v||T[1]<T[0]||d<T[1])return!1;v=T[1]}return!0}_validateContent(l,d){return l?l.length!==4||!d.usvg&&(l[0]<0||d.data.width<l[0]||l[1]<0||d.data.height<l[1]||l[2]<0||d.data.width<l[2]||l[3]<0||d.data.height<l[3])?!1:!(l[2]<l[0]||l[3]<l[1]):!0}updateImage(l,d,v){const T=this.images.get(d).get(l.toString());v.version=T.version+1,this.images.get(d).set(l.toString(),v),this.updatedImages.get(d).add(l),this.removeFromImageRasterizerCache(l,d)}clearUpdatedImages(l){this.updatedImages.get(l).clear()}removeFromImageRasterizerCache(l,d){this.spriteFormat!=="raster"&&(a.r()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[l],scope:d}):this.imageRasterizer.removeImagesFromCacheByIds([l],d))}removeImage(l,d){const v=this.images.get(d),T=v.get(l.toString());v.delete(l.toString()),this.patterns.get(d).delete(l.toString()),this.removeFromImageRasterizerCache(l,d),T.userImage&&T.userImage.onRemove&&T.userImage.onRemove()}listImages(l){return Array.from(this.images.get(l).keys()).map(d=>a.I.from(d))}getImages(l,d,v){const T=[],O=[],M=this.imageProviders.get(d);for(const H of l){if(!H.iconsetId){T.push(H);continue}const re=M.get(H.iconsetId);re&&(this.getImage(H,d)?O.push(H):re.addPendingRequest(H))}if(T.length===0)return void this._notify(O,d,v);let R=!0;const F=!!this.loaded.get(d),q=this.images.get(d);if(!F)for(const H of T)q.has(H.toString())||(R=!1);F||R?this._notify(T,d,v):this.requestors.push({ids:T,scope:d,callback:v})}rasterizeImages(l,d){const v=new Map,{tasks:T,scope:O}=l;for(const[M,R]of T.entries()){const F=this.getImage(R.id,O);F&&v.set(M,{image:F,imageVariant:R})}this._rasterizeImages(O,v,d)}_rasterizeImages(l,d,v){if(a.r())this.imageRasterizerDispatcher.getActor().send("rasterizeImagesWorker",{tasks:d,scope:l},v);else{const T=new Map;for(const[O,{image:M,imageVariant:R}]of d.entries())T.set(O,this.imageRasterizer.rasterize(R,M,l,0));v(void 0,T)}}getUpdatedImages(l){return this.updatedImages.get(l)||new Set}_notify(l,d,v){const T=this.images.get(d),O=new Map;for(const M of l){if(!T.get(M.toString())){if(M.iconsetId)continue;this.fire(new a.z("styleimagemissing",{id:M.name}))}const R=T.get(M.toString());if(!R){a.w(`Image "${M.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`);continue}const F={data:R.usvg?null:R.data.clone(),pixelRatio:R.pixelRatio,sdf:R.sdf,usvg:R.usvg,version:R.version,stretchX:R.stretchX,stretchY:R.stretchY,content:R.content,hasRenderCallback:!!(R.userImage&&R.userImage.render)};R.usvg&&Object.assign(F,{width:R.icon.usvg_tree.width,height:R.icon.usvg_tree.height}),O.set(a.I.toString(M),F)}v(null,O)}getPixelSize(l){const{width:d,height:v}=this.atlasImage.get(l);return{width:d,height:v}}getPattern(l,d,v){const T=l.toString(),O=this.patterns.get(d),M=O.get(T),R=this.getImage(l,d);if(!R)return null;if(M){if(M.position.version===R.version)return M.position;M.position.version=R.version}else{if(R.usvg&&!R.data){const F=this.getPatternInFlightId(T,d);if(this.patternsInFlight.has(F))return null;this.patternsInFlight.add(F);const q=new a.A(l).scaleSelf(a.o.devicePixelRatio),H=new Map([[q.toString(),{image:R,imageVariant:q}]]);return this._rasterizeImages(d,H,(re,ee)=>this.storePatternImage(q,d,R,v,ee)),null}this.storePattern(l,d,R)}return this._updatePatternAtlas(d,v),O.get(T).position}getPatternInFlightId(l,d){return a.B(l,d)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(l,d,v,T,O){const M=l.toString(),R=O?O.get(M):void 0;R&&(v.data=R,this.storePattern(l.id,d,v),this._updatePatternAtlas(d,T),this.patternsInFlight.delete(this.getPatternInFlightId(l.id.toString(),d)))}storePattern(l,d,v){const T={w:v.data.width+2*a.C,h:v.data.height+2*a.C,x:0,y:0},O=new a.F(T,v,a.C);this.patterns.get(d).set(l.toString(),{bin:T,position:O})}destroyAtlasTextures(){for(const l of this.atlasTexture.values())l&&l.destroy();this.atlasTexture.clear()}bind(l,d){const v=l.gl;let T=this.atlasTexture.get(d);T?this.dirty&&(T.update(this.atlasImage.get(d)),this.dirty=!1):(T=new a.T(l,this.atlasImage.get(d),v.RGBA8),this.atlasTexture.set(d,T)),T.bind(v.LINEAR,v.CLAMP_TO_EDGE)}_updatePatternAtlas(l,d){const v=this.patterns.get(l),T=Array.from(v.values()).map(({bin:q})=>q),{w:O,h:M}=a.G(T),R=this.atlasImage.get(l);R.resize({width:O||1,height:M||1});const F=this.images.get(l);for(const[q,{bin:H,position:re}]of v.entries()){let ee=re.padding;const oe=H.x+ee,he=H.y+ee,ce=F.get(q).data,de=ce.width,_e=ce.height;ee=ee>1?ee-1:ee,a.q.copy(ce,R,{x:0,y:0},{x:oe,y:he},{width:de,height:_e},d),a.q.copy(ce,R,{x:0,y:_e-ee},{x:oe,y:he-ee},{width:de,height:ee},d),a.q.copy(ce,R,{x:0,y:0},{x:oe,y:he+_e},{width:de,height:ee},d),a.q.copy(ce,R,{x:de-ee,y:0},{x:oe-ee,y:he},{width:ee,height:_e},d),a.q.copy(ce,R,{x:0,y:0},{x:oe+de,y:he},{width:ee,height:_e},d),a.q.copy(ce,R,{x:de-ee,y:_e-ee},{x:oe-ee,y:he-ee},{width:ee,height:ee},d),a.q.copy(ce,R,{x:0,y:_e-ee},{x:oe+de,y:he-ee},{width:ee,height:ee},d),a.q.copy(ce,R,{x:0,y:0},{x:oe+de,y:he+_e},{width:ee,height:ee},d),a.q.copy(ce,R,{x:de-ee,y:0},{x:oe-ee,y:he+_e},{width:ee,height:ee},d)}this.dirty=!0}beginFrame(){for(const l of this.images.keys())this.callbackDispatchedThisFrame.set(l,new Set)}dispatchRenderCallbacks(l,d){const v=this.images.get(d);for(const T of l){if(this.callbackDispatchedThisFrame.get(d).has(T.toString()))continue;this.callbackDispatchedThisFrame.get(d).add(T.toString());const O=v.get(T.toString());Nr(O)&&this.updateImage(T,d,O)}}destroy(){this.imageRasterizerDispatcher&&this.imageRasterizerDispatcher.remove()}}function Er(_){const l=_.value,d=_.valueSpec,v=_.style,T=_.styleSpec,O=_.key,M=_.arrayElementValidator||mi;if(!Array.isArray(l))return[new a.V(O,l,`array expected, ${a.K(l)} found`)];if(d.length&&l.length!==d.length)return[new a.V(O,l,`array length ${d.length} expected, length ${l.length} found`)];if(d["min-length"]&&l.length<d["min-length"])return[new a.V(O,l,`array length at least ${d["min-length"]} expected, length ${l.length} found`)];let R={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};T.$version<7&&(R.function=d.function),a.H(d.value)&&(R=d.value);let F=[];for(let q=0;q<l.length;q++)F=F.concat(M({array:l,arrayIndex:q,value:l[q],valueSpec:R,style:v,styleSpec:T,key:`${O}[${q}]`},!0));return F}function Tr(_){const l=_.key,d=_.value,v=_.valueSpec;if(!a.L(d))return[new a.V(l,d,`number expected, ${a.K(d)} found`)];if(d!=d)return[new a.V(l,d,"number expected, NaN found")];if("minimum"in v){let T=v.minimum;if(Array.isArray(v.minimum)&&(T=v.minimum[_.arrayIndex]),d<T)return[new a.V(l,d,`${d} is less than the minimum value ${T}`)]}if("maximum"in v){let T=v.maximum;if(Array.isArray(v.maximum)&&(T=v.maximum[_.arrayIndex]),d>T)return[new a.V(l,d,`${d} is greater than the maximum value ${T}`)]}return[]}function pi(_){const l=_.key,d=_.value;if(!a.H(d))return[new a.V(l,d,`object expected, ${a.K(d)} found`)];const v=_.valueSpec,T=a.J(d.type);let O,M,R,F={};const q=T!=="categorical"&&d.property===void 0,H=!q,re=(function(ce){const de=ce.stops;return Array.isArray(de)&&Array.isArray(de[0])&&a.H(de[0][0])})(d),ee=oo({key:_.key,value:_.value,valueSpec:_.styleSpec.function,style:_.style,styleSpec:_.styleSpec,objectElementValidators:{stops:function(ce){if(T==="identity")return[new a.V(ce.key,ce.value,'identity function may not have a "stops" property')];let de=[];const _e=ce.value;return de=de.concat(Er({key:ce.key,value:_e,valueSpec:ce.valueSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:oe})),Array.isArray(_e)&&_e.length===0&&de.push(new a.V(ce.key,_e,"array must have at least one stop")),de},default:function(ce){return mi({key:ce.key,value:ce.value,valueSpec:v,style:ce.style,styleSpec:ce.styleSpec})}}});return T==="identity"&&q&&ee.push(new a.V(_.key,_.value,'missing required property "property"')),T==="identity"||d.stops||ee.push(new a.V(_.key,_.value,'missing required property "stops"')),T==="exponential"&&v.expression&&!a.M(v)&&ee.push(new a.V(_.key,_.value,"exponential functions not supported")),_.styleSpec.$version>=8&&(H&&!a.N(v)?ee.push(new a.V(_.key,_.value,"property functions not supported")):q&&!a.O(v)&&ee.push(new a.V(_.key,_.value,"zoom functions not supported"))),T!=="categorical"&&!re||d.property!==void 0||ee.push(new a.V(_.key,_.value,'"property" property is required')),ee;function oe(ce){let de=[];const _e=ce.value,Me=ce.key;if(!Array.isArray(_e))return[new a.V(Me,_e,`array expected, ${a.K(_e)} found`)];if(_e.length!==2)return[new a.V(Me,_e,`array length 2 expected, length ${_e.length} found`)];if(re){if(!a.H(_e[0]))return[new a.V(Me,_e,`object expected, ${a.K(_e[0])} found`)];const Ce=_e[0];if(Ce.zoom===void 0)return[new a.V(Me,_e,"object stop key must have zoom")];if(Ce.value===void 0)return[new a.V(Me,_e,"object stop key must have value")];const Ae=a.J(Ce.zoom);if(typeof Ae!="number")return[new a.V(Me,Ce.zoom,"stop zoom values must be numbers")];if(R&&R>Ae)return[new a.V(Me,Ce.zoom,"stop zoom values must appear in ascending order")];Ae!==R&&(R=Ae,M=void 0,F={}),de=de.concat(oo({key:`${Me}[0]`,value:_e[0],valueSpec:{zoom:{}},style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Tr,value:he}}))}else de=de.concat(he({key:`${Me}[0]`,value:_e[0],style:ce.style,styleSpec:ce.styleSpec},_e));return a.Q(a.S(_e[1]))?de.concat([new a.V(`${Me}[1]`,_e[1],"expressions are not allowed in function stops.")]):de.concat(mi({key:`${Me}[1]`,value:_e[1],valueSpec:v,style:ce.style,styleSpec:ce.styleSpec}))}function he(ce,de){const _e=a.K(ce.value),Me=a.J(ce.value),Ce=ce.value!==null?ce.value:de;if(O){if(_e!==O)return[new a.V(ce.key,Ce,`${_e} stop domain type must match previous stop domain type ${O}`)]}else O=_e;if(_e!=="number"&&_e!=="string"&&_e!=="boolean"&&typeof Me!="number"&&typeof Me!="string"&&typeof Me!="boolean")return[new a.V(ce.key,Ce,"stop domain value must be a number, string, or boolean")];if(_e!=="number"&&T!=="categorical"){let Ae=`number expected, ${_e} found`;return a.N(v)&&T===void 0&&(Ae+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new a.V(ce.key,Ce,Ae)]}return T!=="categorical"||_e!=="number"||typeof Me=="number"&&isFinite(Me)&&Math.floor(Me)===Me?T!=="categorical"&&_e==="number"&&typeof Me=="number"&&typeof M=="number"&&M!==void 0&&Me<M?[new a.V(ce.key,Ce,"stop domain values must appear in ascending order")]:(M=Me,T==="categorical"&&Me in F?[new a.V(ce.key,Ce,"stop domain values must be unique")]:(F[Me]=!0,[])):[new a.V(ce.key,Ce,`integer expected, found ${String(Me)}`)]}}function Fr(_){const l=(_.expressionContext==="property"?a.W:a.U)(a.S(_.value),_.valueSpec);if(l.result==="error")return l.value.map(v=>new a.V(`${_.key}${v.key}`,_.value,v.message));const d=l.value.expression||l.value._styleExpression.expression;if(_.expressionContext==="property"&&_.propertyKey==="text-font"&&!d.outputDefined())return[new a.V(_.key,_.value,`Invalid data expression for "${_.propertyKey}". Output values must be contained as literals within the expression.`)];if(_.expressionContext==="property"&&_.propertyType==="layout"&&!a.Z(d))return[new a.V(_.key,_.value,'"feature-state" data expressions are not supported with layout properties.')];if(_.expressionContext==="filter")return hi(d,_);if(_.expressionContext==="appearance")return $t(d,_);if(_.expressionContext&&_.expressionContext.indexOf("cluster")===0){if(!a.X(d,["zoom","feature-state"]))return[new a.V(_.key,_.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(_.expressionContext==="cluster-initial"&&!a.Y(d))return[new a.V(_.key,_.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function hi(_,l){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(l.valueSpec&&l.valueSpec.expression)for(const T of l.valueSpec.expression.parameters)d.delete(T);if(d.size===0)return[];const v=[];return _ instanceof a._&&d.has(_.name)?[new a.V(l.key,l.value,`["${_.name}"] expression is not supported in a filter for a ${l.object.type} layer with id: ${l.object.id}`)]:(_.eachChild(T=>{v.push(...hi(T,l))}),v)}function $t(_,l){const d=new Set;if(l.valueSpec&&l.valueSpec.expression)for(const T of l.valueSpec.expression.parameters)d.add(T);if(d.size===0)return[];const v=[];return _ instanceof a._&&!d.has(_.name)?[new a.V(l.key,l.value,`["${_.name}"] is not an allowed parameter`)]:(_.eachChild(T=>{v.push(...$t(T,l))}),v)}function En(_){const l=_.key,d=_.value,v=_.valueSpec,T=[];return Array.isArray(v.values)?v.values.indexOf(a.J(d))===-1&&T.push(new a.V(l,d,`expected one of [${v.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(v.values).indexOf(a.J(d))===-1&&T.push(new a.V(l,d,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(d)} found`)),T}function ur(_){return a.a2(a.S(_.value))?Fr(Object.assign({},_,{expressionContext:"filter",valueSpec:_.styleSpec[`filter_${_.layerType||"fill"}`]})):$r(_)}function $r(_){const l=_.value,d=_.key;if(!Array.isArray(l))return[new a.V(d,l,`array expected, ${a.K(l)} found`)];if(l.length<1)return[new a.V(d,l,"filter array must have at least 1 element")];const v=_.styleSpec;let T=En({key:`${d}[0]`,value:l[0],valueSpec:v.filter_operator});const O=()=>{l.length>=2&&(a.a0(l[1])||T.push(new a.V(`${d}[1]`,l[1],`string expected, ${a.K(l[1])} found`)));for(let M=2;M<l.length;M++)a.J(l[1])==="$type"?T=T.concat(En({key:`${d}[${M}]`,value:l[M],valueSpec:v.geometry_type})):a.a0(l[M])||a.L(l[M])||a.$(l[M])||T.push(new a.V(`${d}[${M}]`,l[M],`string, number, or boolean expected, ${a.K(l[M])} found.`))};switch(a.J(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&a.J(l[1])==="$type"&&T.push(new a.V(d,l,`"$type" cannot be use with operator "${l[0]}"`)),l.length!==3&&T.push(new a.V(d,l,`filter array for operator "${l[0]}" must have 3 elements`)),O();break;case"==":case"!=":l.length!==3&&T.push(new a.V(d,l,`filter array for operator "${l[0]}" must have 3 elements`)),O();break;case"in":case"!in":O();break;case"any":case"all":case"none":for(let M=1;M<l.length;M++)T=T.concat($r({key:`${d}[${M}]`,value:l[M],style:_.style,styleSpec:_.styleSpec}));break;case"has":case"!has":l.length!==2?T.push(new a.V(d,l,`filter array for "${l[0]}" operator must have 2 elements`)):a.a0(l[1])||T.push(new a.V(`${d}[1]`,l[1],`string expected, ${a.K(l[1])} found`))}return T}function Br(_,l){const d=_.key,v=_.style,T=_.layer,O=_.styleSpec,M=_.value,R=_.objectKey,F=O[`${l}_${_.layerType}`];if(!F)return[];const q=R.match(/^(.*)-use-theme$/);if(q&&F[q[1]])return a.Q(a.S(M))?[].concat(mi({key:d,value:M,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:v,styleSpec:O,expressionContext:"property",propertyType:l,propertyKey:R})):mi({key:d,value:M,valueSpec:{type:"string"},style:v,styleSpec:O});const H=R.match(/^(.*)-transition$/);if(l==="paint"&&H&&F[H[1]]&&F[H[1]].transition)return mi({key:d,value:M,valueSpec:O.transition,style:v,styleSpec:O});const re=_.valueSpec||F[R];if(!re)return[new a.a3(d,M,`unknown property "${R}"`)];let ee;if(a.a0(M)&&a.N(re)&&!re.tokens&&(ee=/^{([^}]+)}$/.exec(M))){const he=`\`{ "type": "identity", "property": ${ee?JSON.stringify(ee[1]):'"_"'} }\``;return[new a.V(d,M,`"${R}" does not support interpolation syntax
Use an identity property function instead: ${he}.`)]}const oe=[];if(_.layerType==="symbol")R!=="text-field"||!v||v.glyphs||v.imports||oe.push(new a.V(d,M,'use of "text-field" requires a style "glyphs" property')),R==="text-font"&&a.a4(a.S(M))&&a.J(M.type)==="identity"&&oe.push(new a.V(d,M,'"text-font" does not support identity functions'));else if(_.layerType==="model"&&l==="paint"&&T&&T.layout&&T.layout.hasOwnProperty("model-id")&&a.N(re)&&(a.a5(re)||a.O(re))){const he=a.W(a.S(M),re).value,ce="expression"in he&&he.expression||"_styleExpression"in he&&he._styleExpression&&he._styleExpression.expression;ce&&!a.X(ce,["measure-light"])&&(R==="model-emissive-strength"&&a.Y(ce)&&a.Z(ce)||oe.push(new a.V(d,M,`${R} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return oe.concat(mi({key:_.key,value:M,valueSpec:re,style:v,styleSpec:O,expressionContext:"property",propertyType:l,propertyKey:R}))}function Ya(_){return Br(_,"paint")}function vo(_){return Br(_,"layout")}function Yo(_){let l=[];const d=_.value,v=_.key,T=_.style,O=_.styleSpec;if(!a.H(d))return[new a.V(v,d,"object expected")];d.type||d.ref||l.push(new a.V(v,d,'either "type" or "ref" is required'));let M=a.J(d.type);const R=a.J(d.ref);if(d.id){const F=a.J(d.id);for(let q=0;q<_.arrayIndex;q++){const H=T.layers[q];a.J(H.id)===F&&l.push(new a.V(v,d.id,`duplicate layer id "${F}", previously used at line ${H.id.__line__}`))}}if("ref"in d){let F;["type","source","source-layer","filter","layout"].forEach(q=>{q in d&&l.push(new a.V(v,d[q],`"${q}" is prohibited for ref layers`))}),T.layers.forEach(q=>{a.J(q.id)===R&&(F=q)}),F?F.ref?l.push(new a.V(v,d.ref,"ref cannot reference another ref layer")):M=a.J(F.type):typeof R=="string"&&l.push(new a.V(v,d.ref,`ref layer "${R}" not found`))}else if(M!=="background"&&M!=="sky"&&M!=="slot")if(d.source)if(a.a0(d.source)){const F=T.sources&&T.sources[d.source],q=F&&a.J(F.type);F?q==="vector"&&M==="raster"?l.push(new a.V(v,d.source,`layer "${d.id}" requires a raster source`)):q==="raster"&&M!=="raster"?l.push(new a.V(v,d.source,`layer "${d.id}" requires a vector source`)):q!=="vector"||d["source-layer"]?q==="raster-dem"&&M!=="hillshade"?l.push(new a.V(v,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):q!=="raster-array"||["raster","raster-particle"].includes(M)?M==="line"&&d.paint&&(d.paint["line-gradient"]||d.paint["line-trim-offset"])&&q==="geojson"&&!F.lineMetrics?l.push(new a.V(v,d,`layer "${d.id}" specifies a line-gradient, which requires the GeoJSON source to have \`lineMetrics\` enabled.`)):M==="raster-particle"&&q!=="raster-array"&&l.push(new a.V(v,d.source,`layer "${d.id}" requires a 'raster-array' source.`)):l.push(new a.V(v,d.source,"raster-array source can only be used with layer type 'raster'.")):l.push(new a.V(v,d,`layer "${d.id}" must specify a "source-layer"`)):l.push(new a.V(v,d.source,`source "${d.source}" not found`))}else l.push(new a.V(`${v}.source`,d.source,'"source" must be a string'));else l.push(new a.V(v,d,'missing required property "source"'));return l=l.concat(oo({key:v,value:d,valueSpec:O.layer,style:_.style,styleSpec:_.styleSpec,objectElementValidators:{"*":()=>[],type:()=>mi({key:`${v}.type`,value:d.type,valueSpec:O.layer.type,style:_.style,styleSpec:_.styleSpec,object:d,objectKey:"type"}),filter:F=>ur(Object.assign({layerType:M},F)),layout:F=>oo({layer:d,key:F.key,value:F.value,valueSpec:{},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{"*":q=>vo(Object.assign({layerType:M},q))}}),paint:F=>oo({layer:d,key:F.key,value:F.value,valueSpec:{},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{"*":q=>Ya(Object.assign({layerType:M,layer:d},q))}}),appearances(F){const q=Er({key:F.key,value:F.value,valueSpec:F.valueSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:ee=>(function(oe){const{key:he,layer:ce,layerType:de}=oe,_e=a.J(oe.value),Me=a.J(_e.name),Ce=a.J(_e.condition),Ae=oo({key:he,value:_e,valueSpec:oe.styleSpec.appearance,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{condition:We=>(function($e){const Ge=[];return Ge.push(...Fr({key:$e.key,value:$e.object.condition,valueSpec:a.a6.appearance.condition,expressionContext:"appearance"})),Ge})(Object.assign({layer:ce,layerType:de},We)),properties:We=>(function($e){const Ge=[],{styleSpec:Ne,layer:Re,layerType:Je}=$e,nt=Ne[`paint_${Je}`],st=Ne[`layout_${Je}`],dt=$e.object[$e.objectKey];for(const ft in dt){const wt=ft in nt?"paint":ft in st?"layout":void 0;if(!wt){Ge.push(new a.V($e.key,ft,`unknown property "${ft}" for layer type "${Je}"`));continue}const It=Object.assign({},$e,{key:`${$e.key}.${ft}`,object:dt,objectKey:ft,layer:Re,layerType:Je,value:dt[ft],valueSpec:wt==="paint"?nt[ft]:st[ft]});Ge.push(...Br(It,wt))}return Ge})(Object.assign({layer:ce,layerType:de},We))}});return Me!=="hidden"&&Ce===void 0&&Ae.push(new a.V(oe.key,"name",'Appearance with name different than "hidden" must have a condition')),Ae})(Object.assign({layerType:M,layer:d},ee))}),H=Array.isArray(F.value)?F.value:[],re=new Set;return H.forEach((ee,oe)=>{const he=a.J(ee.name);if(he)if(re.has(he)){const ce=a.J(d.id);q.push(new a.V(F.key,he,`Duplicated appearance name "${he}" for layer "${ce}"`))}else re.add(he)}),q}}})),l}function Aa({key:_,value:l}){return a.a0(l)?[]:[new a.V(_,l,`string expected, ${a.K(l)} found`)]}const Qi={promoteId:function _({key:l,value:d}){if(a.a0(d))return Aa({key:l,value:d});if(Array.isArray(d)){const T=[],O=a.S(d),M=a.U(O);return M.result==="error"&&M.value.forEach(R=>{T.push(new a.V(`${l}${R.key}`,null,`${R.message}`))}),a.X(M.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||T.push(new a.V(`${l}`,null,"promoteId expression should be only feature dependent")),T}if(!a.H(d))return[new a.V(l,d,`string, expression or object expected, "${a.K(d)}" found`)];const v=[];for(const T in d)v.push(..._({key:`${l}.${T}`,value:d[T]}));return v}};function Ri(_){const l=_.value,d=_.key,v=_.styleSpec,T=_.style;if(!a.H(l))return[new a.V(d,l,`object expected, ${a.K(l)} found`)];if(!("type"in l))return[new a.V(d,l,'"type" is required')];const O=a.J(l.type);let M=[];switch(["vector","raster","raster-dem","raster-array"].includes(O)&&("url"in l||"tiles"in l||M.push(new a.a3(d,l,'Either "url" or "tiles" is required.'))),O){case"vector":case"raster":case"raster-dem":case"raster-array":return M=M.concat(oo({key:d,value:l,valueSpec:v[`source_${O.replace("-","_")}`],style:_.style,styleSpec:v,objectElementValidators:Qi})),M;case"geojson":if(M=oo({key:d,value:l,valueSpec:v.source_geojson,style:T,styleSpec:v,objectElementValidators:Qi}),"cluster"in l&&"clusterProperties"in l){if(!a.H(l.clusterProperties))return[new a.V(`${d}.clusterProperties`,l,`object expected, ${a.K(l)} found`)];for(const R in l.clusterProperties){const F=l.clusterProperties[R];if(!Array.isArray(F))return[new a.V(`${d}.clusterProperties.${R}`,F,"array expected")];const[q,H]=F,re=typeof q=="string"?[q,["accumulated"],["get",R]]:q;M.push(...Fr({key:`${d}.${R}.map`,value:H,expressionContext:"cluster-map"})),M.push(...Fr({key:`${d}.${R}.reduce`,value:re,expressionContext:"cluster-reduce"}))}}return M;case"video":return oo({key:d,value:l,valueSpec:v.source_video,style:T,styleSpec:v});case"image":return oo({key:d,value:l,valueSpec:v.source_image,style:T,styleSpec:v});case"canvas":return[new a.V(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return En({key:`${d}.type`,value:l.type,valueSpec:{values:zs(v)}})}}function zs(_){return _.source.reduce((l,d)=>{const v=_[d];return v.type.type==="enum"&&(l=l.concat(Object.keys(v.type.values||{}))),l},[])}function is(_){const l=_.value,d=_.styleSpec,v=d.light,T=_.style;if(l===void 0)return[];if(!a.H(l))return[new a.V("light",l,`object expected, ${a.K(l)} found`)];let O=[];for(const M in l){const R=M.match(/^(.*)-transition$/),F=M.match(/^(.*)-use-theme$/);O=O.concat(F&&v[F[1]]?mi({key:M,value:l[M],valueSpec:{type:"string"},style:T,styleSpec:d}):R&&v[R[1]]&&v[R[1]].transition?mi({key:M,value:l[M],valueSpec:d.transition,style:T,styleSpec:d}):v[M]?mi({key:M,value:l[M],valueSpec:v[M],style:T,styleSpec:d}):[new a.V(M,l[M],`unknown property "${M}"`)])}return O}function uf(_){const l=_.value;if(!l)return[];const d=_.key;if(!a.H(l))return[new a.V(d,l,`object expected, ${a.K(l)} found`)];let v=[];const T=_.styleSpec,O=T["light-3d"],M=_.style,R=_.style.lights;for(const H of["type","id"])if(!(H in l))return v=v.concat([new a.V(d,l,`missing property "${H}"`)]),v;if(!a.a0(l.type))return v=v.concat([new a.V(`${d}.type`,l.type,"string expected")]),v;if(R)for(let H=0;H<_.arrayIndex;H++){const re=a.J(l.type),ee=R[H];a.J(ee.type)===re&&v.push(new a.V(d,l.id,`duplicate light type "${l.type}", previously defined at line ${ee.id.__line__}`))}const F=`properties_light_${l.type}`;if(!(F in T))return v=v.concat([new a.V(`${d}.type`,l,`Invalid light type ${l.type}`)]),v;const q=T[F];for(const H in l)if(H==="properties"){const re=l[H];if(!a.H(re))return v=v.concat([new a.V("properties",re,`object expected, ${a.K(re)} found`)]),v;for(const ee in re){const oe=ee.match(/^(.*)-transition$/),he=ee.match(/^(.*)-use-theme$/);v=v.concat(he&&q[he[1]]?mi({key:H,value:re[ee],valueSpec:{type:"string"},style:M,styleSpec:T}):oe&&q[oe[1]]&&q[oe[1]].transition?mi({key:H,value:l[H],valueSpec:T.transition,style:M,styleSpec:T}):q[ee]?mi({key:ee,value:re[ee],valueSpec:q[ee],style:M,styleSpec:T}):[new a.a3(_.key,re[ee],`unknown property "${ee}"`)])}}else v=v.concat(O[H]?mi({key:H,value:l[H],valueSpec:O[H],style:M,styleSpec:T}):[new a.a3(H,l[H],`unknown property "${H}"`)]);return v}function zu(_){const l=_.value,d=_.key,v=_.style,T=_.styleSpec,O=T.terrain;if(l==null)return[];if(!a.H(l))return[new a.V("terrain",l,`object expected, ${a.K(l)} found`)];let M=[];for(const R in l){const F=R.match(/^(.*)-transition$/),q=R.match(/^(.*)-use-theme$/);M=M.concat(q&&O[q[1]]?mi({key:R,value:l[R],valueSpec:{type:"string"},style:v,styleSpec:T}):F&&O[F[1]]&&O[F[1]].transition?mi({key:R,value:l[R],valueSpec:T.transition,style:v,styleSpec:T}):O[R]?mi({key:R,value:l[R],valueSpec:O[R],style:v,styleSpec:T}):[new a.a3(R,l[R],`unknown property "${R}"`)])}if(l.source)if(a.a0(l.source)){const R=v.sources&&v.sources[l.source],F=R&&a.J(R.type);R?F!=="raster-dem"&&M.push(new a.V(`${d}.source`,l.source,`terrain cannot be used with a source of type ${F}, it only be used with a "raster-dem" source type`)):M.push(new a.V(`${d}.source`,l.source,`source "${l.source}" not found`))}else M.push(new a.V(`${d}.source`,l.source,"source must be a string"));else M.push(new a.V(d,l,'terrain is missing required property "source"'));return M}function Nu(_){const l=_.value,d=_.style,v=_.styleSpec,T=v.fog;if(l===void 0)return[];if(!a.H(l))return[new a.V("fog",l,`object expected, ${a.K(l)} found`)];let O=[];for(const M in l){const R=M.match(/^(.*)-transition$/),F=M.match(/^(.*)-use-theme$/);O=O.concat(F&&T[F[1]]?mi({key:M,value:l[M],valueSpec:{type:"string"},style:d,styleSpec:v}):R&&T[R[1]]&&T[R[1]].transition?mi({key:M,value:l[M],valueSpec:v.transition,style:d,styleSpec:v}):T[M]?mi({key:M,value:l[M],valueSpec:T[M],style:d,styleSpec:v}):[new a.a3(M,l[M],`unknown property "${M}"`)])}return O}const cf={"*":()=>[],array:Er,boolean:function(_){const l=_.value,d=_.key;return a.$(l)?[]:[new a.V(d,l,`boolean expected, ${a.K(l)} found`)]},number:Tr,color:function({key:_,value:l}){return a.a0(l)?a.a1.parseCSSColor(l)===null?[new a.V(_,l,`color expected, "${l}" found`)]:[]:[new a.V(_,l,`color expected, ${a.K(l)} found`)]},enum:En,filter:ur,function:pi,layer:Yo,object:oo,source:Ri,model:a.a7,light:is,"light-3d":uf,terrain:zu,fog:Nu,string:Aa,formatted:function(_){return Aa(_).length===0?[]:Fr(_)},resolvedImage:function(_){return Aa(_).length===0?[]:Fr(_)},projection:function(_){const l=_.value,d=_.styleSpec,v=d.projection,T=_.style;if(a.H(l)){let O=[];for(const M in l)O=O.concat(mi({key:M,value:l[M],valueSpec:v[M],style:T,styleSpec:d}));return O}return a.a0(l)?[]:[new a.V("projection",l,`object or string expected, ${a.K(l)} found`)]},import:function(_){const l=_.key,{value:d,styleSpec:v}=_;if(!a.H(d))return[new a.V(l,d,"import must be an object")];const{data:T,...O}=d;Object.defineProperty(O,"__line__",{value:d.__line__,enumerable:!1});let M=oo(Object.assign({},_,{value:O,valueSpec:v.import}));return a.J(O.id)===""&&M.push(new a.V(`${_.key}.id`,O,"import id can't be an empty string")),T&&(M=M.concat(Pp(T,v,{key:`${_.key}.data`}))),M},iconset:function(_){const l=_.value,d=_.key,v=_.styleSpec,T=_.style;if(!a.H(l))return[new a.V(d,l,"object expected")];if(!l.type)return[new a.V(d,l,'"type" is required')];const O=a.J(l.type);let M=[];if(M=M.concat(oo({key:d,value:l,valueSpec:v[`iconset_${O}`],style:T,styleSpec:v})),(function(R,F){return!(R!=="source"||!F.source)})(O,l)){const R=T.sources&&T.sources[l.source],F=R&&a.J(R.type);R?F!=="raster-array"&&M.push(new a.V(d,l.source,`iconset cannot be used with a source of type ${String(F)}, it only be used with a "raster-array" source type`)):M.push(new a.V(d,l.source,`source "${l.source}" not found`))}return M}};function mi(_,l=!1){const d=_.value,v=_.valueSpec,T=_.styleSpec;if(v.expression){if(a.a4(a.J(d)))return pi(_);if(a.Q(a.S(d)))return Fr(_)}if(v.type&&cf[v.type]){const O=cf[v.type](_);return l===!0&&O.length>0&&Array.isArray(_.value)?Fr(_):O}return oo(Object.assign({},_,{valueSpec:v.type?T[v.type]:v}))}function oo(_){const l=_.key,d=_.value,v=_.valueSpec||{},T=_.objectElementValidators||{},O=_.style,M=_.styleSpec;if(!a.H(d))return[new a.V(l,d,`object expected, ${a.K(d)} found`)];let R=[];for(const F in d){const q=F.split(".")[0];let H;T[q]?H=T[q]:v[q]?H=mi:T["*"]?H=T["*"]:v["*"]&&(H=mi),H?R=R.concat(H({key:(l&&`${l}.`)+F,value:d[F],valueSpec:v[q]||v["*"],style:O,styleSpec:M,object:d,objectKey:F},d)):R.push(new a.a3(l,d[F],`unknown property "${F}"`))}for(const F in v){if(T[F])continue;const q=v[F];q.required&&q.default===void 0&&d[F]===void 0&&R.push(new a.V(l,d,`missing required property "${F}"`))}return R}function ah({key:_,value:l}){const d=Aa({key:_,value:l});if(d.length)return d;const v=l;return v.indexOf("{fontstack}")===-1&&d.push(new a.V(_,l,'"glyphs" url must include a "{fontstack}" token')),v.indexOf("{range}")===-1&&d.push(new a.V(_,l,'"glyphs" url must include a "{range}" token')),d}function Pp(_,l=a.a6,d={}){return oo({key:d.key||"",value:_,valueSpec:Object.assign(l.$root,{"*":{type:"*"}}),styleSpec:l,style:_,objectElementValidators:{glyphs:ah}})}function wl(_,l=a.a6){return ze(Pp(_,l))}const vg=_=>ze(Ri(_)),Sc=_=>ze(is(_)),Vt=_=>ze(uf(_)),Tc=_=>ze(zu(_)),x_=_=>ze(Nu(_)),Rp=_=>ze((function(l){const d=l.value,v=l.style,T=l.styleSpec,O=T.snow;if(d===void 0)return[];if(!a.H(d))return[new a.V("snow",d,`object expected, ${a.K(d)} found`)];let M=[];for(const R in d){const F=R.match(/^(.*)-transition$/);M=M.concat(F&&O[F[1]]&&O[F[1]].transition?mi({key:R,value:d[R],valueSpec:T.transition,style:v,styleSpec:T}):O[R]?mi({key:R,value:d[R],valueSpec:O[R],style:v,styleSpec:T}):[new a.a3(R,d[R],`unknown property "${R}"`)])}return M})(_)),Ar=_=>ze((function(l){const d=l.value,v=l.style,T=l.styleSpec,O=T.rain;if(d===void 0)return[];if(!a.H(d))return[new a.V("rain",d,`object expected, ${a.K(d)} found`)];let M=[];for(const R in d){const F=R.match(/^(.*)-transition$/);M=M.concat(F&&O[F[1]]&&O[F[1]].transition?mi({key:R,value:d[R],valueSpec:T.transition,style:v,styleSpec:T}):O[R]?mi({key:R,value:d[R],valueSpec:O[R],style:v,styleSpec:T}):[new a.a3(R,d[R],`unknown property "${R}"`)])}return M})(_)),ut=_=>ze(Yo(_)),me=_=>ze(ur(_)),we=_=>ze(Ya(_)),Le=_=>ze(vo(_)),Qe=_=>ze(a.a7(_));function ze(_){return _.slice().sort((l,d)=>l.line&&d.line?l.line-d.line:0)}function ot(_,l){let d=!1;if(l&&l.length)for(const v of l)v instanceof a.a3?a.w(v.message):(_.fire(new a.y(new Error(v.message))),d=!0);return d}const _t=a.a6.light;let lt;class bt extends a.E{constructor(l,d="flat"){super(),this._transitionable=new a.a8(lt||(lt=new a.a9({anchor:new a.aa(_t.anchor),position:new a.ab(_t.position),color:new a.aa(_t.color),intensity:new a.aa(_t.intensity)}))),this.setLight(l,d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,d,v={}){this._validate(Sc,l,v)||(this._transitionable.setTransitionOrValue(l),this.id=d)}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,v){return(!v||v.validate!==!1)&&ot(this,l.call(wl,Object.assign({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.a6})))}}const Gt=a.a6.terrain;let Ft=class extends a.E{constructor(_,l,d,v,T){super(),this.scope=d,this._transitionable=new a.a8(new a.a9({source:new a.aa(Gt.source),exaggeration:new a.aa(Gt.exaggeration)}),d,v),this._transitionable.setTransitionOrValue(_,v),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l,this.worldview=T}get(){return this._transitionable.serialize()}set(_,l){this._transitionable.setTransitionOrValue(_,l)}updateTransitions(_){this._transitioning=this._transitionable.transitioned(_,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(_){this.properties=this._transitioning.possiblyEvaluate(_)}getExaggeration(_){return this._transitioning.possiblyEvaluate(new a.ac(_,{worldview:this.worldview})).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const _=this._transitionable._values.exaggeration;if(!_)return null;const l=_.value.expression;if(!l)return null;let d=-1,v=-1,T=1;for(const O of l.zoomStops)T=l.evaluate(new a.ac(O,{worldview:this.worldview})),T>.01?(d=O,v=-1):v=O;return T<.01&&d>0&&v>d?[d,v]:null}isZoomDependent(){const _=this._transitionable._values.exaggeration;return _!=null&&_.value!=null&&_.value.expression!=null&&_.value.expression instanceof a.ad}};const hn=.05;function Dn(_,l,d,v){const T=a.ah(45,65,d),[O,M]=Rn(_,v);let R=1-Math.min(1,Math.exp((l-O)/(M-O)*-6));return R*=R*R,R=Math.min(1,1.00747*R),R*T*_.alpha}function Rn(_,l){const d=.5/Math.tan(.5*l);return[_.range[0]+d,_.range[1]+d]}function Zn(_,l,d,v,T){const O=a.af([],[l,d,v],T.mercatorFogMatrix);return Dn(_,a.ag(O),T.pitch,T._fov)}function rr(_,l,d,v,T,O,M){const R=[[d,v,0],[T,v,0],[T,O,0],[d,O,0]];let F=Number.MAX_VALUE,q=-Number.MAX_VALUE;for(const H of R){const re=a.af([],H,l),ee=a.ag(re);F=Math.min(F,ee),q=Math.max(q,ee)}return[Dn(_,F,M.pitch,M._fov),Dn(_,q,M.pitch,M._fov)]}const Pn=a.a6.fog;class Hn extends a.E{constructor(l,d,v,T){super();const O=new a.a9({range:new a.aa(Pn.range),color:new a.aa(Pn.color),"color-use-theme":new a.aa({type:"string","property-type":"data-constant",default:"default"}),"high-color":new a.aa(Pn["high-color"]),"high-color-use-theme":new a.aa({type:"string","property-type":"data-constant",default:"default"}),"space-color":new a.aa(Pn["space-color"]),"space-color-use-theme":new a.aa({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new a.aa(Pn["horizon-blend"]),"star-intensity":new a.aa(Pn["star-intensity"]),"vertical-range":new a.aa(Pn["vertical-range"])});this._transitionable=new a.a8(O,v,new Map(T)),this.set(l,T),this._transitioning=this._transitionable.untransitioned(),this._transform=d,this.properties=new a.ai(O),this.scope=v}get state(){const l=this._transform,d=l.projection.name==="globe",v=a.aj(l.zoom),T=this.properties.get("range"),O=[.5,3];return{range:d?[a.ak(O[0],T[0],v),a.ak(O[1],T[1],v)]:T,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,d,v={}){if(this._validate(x_,l,v))return;const T=Object.assign({},l);for(const O of Object.keys(Pn))T[O]===void 0&&(T[O]=Pn[O].default);this._options=T,this._transitionable.setTransitionOrValue(this._options,d)}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:a.ah(45,65,l))*d.a}getOpacityAtLatLng(l,d){return this._transform.projection.supportsFog?(function(v,T,O){const M=a.ae.fromLngLat(T),R=O.elevation?O.elevation.getAtPointOrZero(M):0;return Zn(v,M.x,M.y,R,O)})(this.state,l,d):0}getOpacityForTile(l){if(!this._transform.projection.supportsFog)return[1,1];const d=this._transform.calculateFogTileMatrix(l.toUnwrapped());return rr(this.state,d,0,0,a.al,a.al,this._transform)}getOpacityForBounds(l,d,v,T,O){return this._transform.projection.supportsFog?rr(this.state,l,d,v,T,O,this._transform):[1,1]}getFovAdjustedRange(l){return this._transform.projection.supportsFog?Rn(this.state,l):[0,1]}isVisibleOnFrustum(l){if(!this._transform.projection.supportsFog)return!1;const d=[4,5,6,7];for(const v of d){const T=l.points[v];let O;if(T[2]>=0)O=T;else{const M=l.points[v-4];O=a.am(M,T,M[2]/(M[2]-T[2]))}if(Zn(this.state,O[0],O[1],0,this._transform)>=hn)return!0}return!1}updateConfig(l){this._transitionable.setTransitionOrValue(this._options,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,v){return(!v||v.validate!==!1)&&ot(this,l.call(wl,Object.assign({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.a6})))}}let xi,oa,zi,ya=class extends a.E{constructor(_,l,d,v){super();const T=xi||(xi=new a.a9({density:new a.aa(a.a6.snow.density),intensity:new a.aa(a.a6.snow.intensity),color:new a.aa(a.a6.snow.color),opacity:new a.aa(a.a6.snow.opacity),vignette:new a.aa(a.a6.snow.vignette),"vignette-color":new a.aa(a.a6.snow["vignette-color"]),"center-thinning":new a.aa(a.a6.snow["center-thinning"]),direction:new a.aa(a.a6.snow.direction),"flake-size":new a.aa(a.a6.snow["flake-size"])}));this._transitionable=new a.a8(T,d,new Map(v)),this.set(_,v),this._transitioning=this._transitionable.untransitioned(),this.properties=new a.ai(T),this.scope=d}get state(){const _=this.properties.get("opacity"),l=this.properties.get("color"),d=this.properties.get("direction"),v=a.an(d[0]),T=-Math.max(a.an(d[1]),.01),O=[Math.cos(v)*Math.cos(T),Math.sin(v)*Math.cos(T),Math.sin(T)],M=this.properties.get("vignette"),R=this.properties.get("vignette-color");return R.a=M,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new a.ao(l.r,l.g,l.b,l.a*_),direction:O,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:R}}get(){return this._transitionable.serialize()}set(_,l,d={}){if(this._validate(Rp,_,d))return;const v=Object.assign({},_),T=a.a6.snow;for(const O of Object.keys(T))v[O]===void 0&&(v[O]=T[O].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,l)}updateConfig(_){this._transitionable.setTransitionOrValue(this._options,new Map(_))}updateTransitions(_){this._transitioning=this._transitionable.transitioned(_,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(_){this.properties=this._transitioning.possiblyEvaluate(_)}_validate(_,l,d){return(!d||d.validate!==!1)&&ot(this,_.call(wl,Object.assign({value:l,style:{glyphs:!0,sprite:!0},styleSpec:a.a6})))}},ki=class extends a.E{constructor(_,l,d,v){super();const T=oa||(oa=new a.a9({density:new a.aa(a.a6.rain.density),intensity:new a.aa(a.a6.rain.intensity),color:new a.aa(a.a6.rain.color),opacity:new a.aa(a.a6.rain.opacity),vignette:new a.aa(a.a6.rain.vignette),"vignette-color":new a.aa(a.a6.rain["vignette-color"]),"center-thinning":new a.aa(a.a6.rain["center-thinning"]),direction:new a.aa(a.a6.rain.direction),"droplet-size":new a.aa(a.a6.rain["droplet-size"]),"distortion-strength":new a.aa(a.a6.rain["distortion-strength"])}));this._transitionable=new a.a8(T,d,new Map(v)),this.set(_,v),this._transitioning=this._transitionable.untransitioned(),this.properties=new a.ai(T),this.scope=d}get state(){const _=this.properties.get("opacity"),l=this.properties.get("color"),d=this.properties.get("direction"),v=a.an(d[0]),T=-Math.max(a.an(d[1]),.01),O=[Math.cos(v)*Math.cos(T),Math.sin(v)*Math.cos(T),Math.sin(T)],M=this.properties.get("vignette-color");return M.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new a.ao(l.r,l.g,l.b,l.a*_),direction:O,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:M}}get(){return this._transitionable.serialize()}set(_,l,d={}){if(this._validate(Ar,_,d))return;const v=Object.assign({},_),T=a.a6.rain;for(const O of Object.keys(T))v[O]===void 0&&(v[O]=T[O].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,l)}updateConfig(_){this._transitionable.setTransitionOrValue(this._options,new Map(_))}updateTransitions(_){this._transitioning=this._transitionable.transitioned(_,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(_){this.properties=this._transitioning.possiblyEvaluate(_)}_validate(_,l,d){return(!d||d.validate!==!1)&&ot(this,_.call(wl,Object.assign({value:l,style:{glyphs:!0,sprite:!0},styleSpec:a.a6})))}};class Or extends a.E{constructor(l,d,v,T){super(),this.scope=v,this._options=l,this.properties=new a.ai(d),this._transitionable=new a.a8(d,v,new Map(T)),this._transitionable.setTransitionOrValue(l.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(l){this._transitionable.setTransitionOrValue(this._options.properties,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(l,d){this._options=l,this._transitionable.setTransitionOrValue(l.properties,d)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}const ji=()=>zi||(zi=new a.a9({color:new a.aa(a.a6.properties_light_ambient.color),"color-use-theme":new a.aa({type:"string",default:"default","property-type":"data-constant"}),intensity:new a.aa(a.a6.properties_light_ambient.intensity)}));let si;const li=()=>si||(si=new a.a9({direction:new a.ap(a.a6.properties_light_directional.direction),color:new a.aa(a.a6.properties_light_directional.color),"color-use-theme":new a.aa({type:"string",default:"default","property-type":"data-constant"}),intensity:new a.aa(a.a6.properties_light_directional.intensity),"cast-shadows":new a.aa(a.a6.properties_light_directional["cast-shadows"]),"shadow-quality":new a.aa(a.a6.properties_light_directional["shadow-quality"]),"shadow-intensity":new a.aa(a.a6.properties_light_directional["shadow-intensity"]),"shadow-draw-before-layer":new a.aa(a.a6.properties_light_directional["shadow-draw-before-layer"])}));class wi{constructor(l,d,v){this.screenBounds=l,this.cameraPoint=v.getCameraPoint(),this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=d,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(l,d){let v,T;if(l instanceof a.P||typeof l[0]=="number"){const O=a.P.convert(l);v=[O],T=d.isPointAboveHorizon(O)}else{const O=a.P.convert(l[0]),M=a.P.convert(l[1]),R=O.add(M)._div(2);v=[O,M],T=a.aq(O,M).every(F=>d.isPointAboveHorizon(F))&&d.isPointAboveHorizon(R)}return new wi(v,T,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return a.aq(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const d=this.screenBounds[0],v=this.screenBounds.length===1?this.screenBounds[0].add(new a.P(1,1)):this.screenBounds[1],T=a.aq(d,v,0,!1);return this.cameraPoint.y>v.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<v.x?T.splice(3,0,this.cameraPoint):this.cameraPoint.x>=v.x?T[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(T[3]=this.cameraPoint)),a.ar(T,l)}bufferedCameraGeometryGlobe(l){const d=this.screenBounds[0],v=this.screenBounds.length===1?this.screenBounds[0].add(new a.P(1,1)):this.screenBounds[1],T=a.aq(d,v,l),O=this.cameraPoint.clone();switch(3*((O.y>d.y)+(O.y>v.y))+((O.x>d.x)+(O.x>v.x))){case 0:T[0]=O,T[4]=O.clone();break;case 1:T.splice(1,0,O);break;case 2:T[1]=O;break;case 3:T.splice(4,0,O);break;case 5:T.splice(2,0,O);break;case 6:T[3]=O;break;case 7:T.splice(3,0,O);break;case 8:T[2]=O}return T}containsTile(l,d,v,T=0){const O=Math.max(l.queryPadding,l.evaluateQueryRenderedFeaturePadding())/d._pixelsPerMercatorPixel+1,M=v?this._bufferedCameraMercator(O,d):this._bufferedScreenMercator(O,d);let R=l.tileID.wrap+(M.unwrapped?T:0);const F=M.polygon.map(de=>a.as(l.tileTransform,de,R));if(!a.at(F,0,0,a.al,a.al))return;R=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?T:0);const q=this.screenGeometryMercator.polygon.map(de=>a.au(l.tileTransform,de,R)),H=q.map(de=>new a.P(de[0],de[1])),re=d.getFreeCameraOptions().position||new a.ae(0,0,0),ee=a.au(l.tileTransform,re,R),oe=q.map(de=>{const _e=a.av(de,de,ee);return a.aw(_e,_e),new a.ax(ee,_e)}),he=a.ay(l,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:H,tilespaceRays:oe,bufferedTilespaceGeometry:F,bufferedTilespaceBounds:(ce=a.az(F),ce.min.x=a.aA(ce.min.x,0,a.al),ce.min.y=a.aA(ce.min.y,0,a.al),ce.max.x=a.aA(ce.max.x,0,a.al),ce.max.y=a.aA(ce.max.y,0,a.al),ce),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:he};var ce}_bufferedScreenMercator(l,d){const v=Ja(l);if(this._screenRaycastCache[v])return this._screenRaycastCache[v];{let T;return T=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),d):{polygon:this.bufferedScreenGeometry(l).map(O=>d.pointCoordinate3D(O)),unwrapped:!0},this._screenRaycastCache[v]=T,T}}_bufferedCameraMercator(l,d){const v=Ja(l);if(this._cameraRaycastCache[v])return this._cameraRaycastCache[v];{let T;return T=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),d):{polygon:this.bufferedCameraGeometry(l).map(O=>d.pointCoordinate3D(O)),unwrapped:!0},this._cameraRaycastCache[v]=T,T}}_projectAndResample(l,d){const v=(function(O,M){const R=a.aB([],M.pixelMatrix,M.globeMatrix),F=[0,-a.aD,0,1],q=[0,a.aD,0,1],H=[0,0,0,1];a.aC(F,F,R),a.aC(q,q,R),a.aC(H,H,R);const re=new a.P(F[0]/F[3],F[1]/F[3]),ee=new a.P(q[0]/q[3],q[1]/q[3]),oe=a.aE(O,re)&&F[3]<H[3],he=a.aE(O,ee)&&q[3]<H[3];if(!oe&&!he)return null;const ce=(function(Ge,Ne,Re){for(let Je=1;Je<Ge.length;Je++){const nt=bo(Ne.pointCoordinate3D(Ge[Je-1]).x),st=bo(Ne.pointCoordinate3D(Ge[Je]).x);if(Re<0){if(nt<st)return{idx:Je,t:-nt/(st-1-nt)}}else if(st<nt)return{idx:Je,t:(1-nt)/(st+1-nt)}}return null})(O,M,oe?-1:1);if(!ce)return null;const{idx:de,t:_e}=ce;let Me=de>1?sa(O.slice(0,de),M):[],Ce=de<O.length?sa(O.slice(de),M):[];Me=Me.map(Ge=>new a.P(bo(Ge.x),Ge.y)),Ce=Ce.map(Ge=>new a.P(bo(Ge.x),Ge.y));const Ae=[...Me];Ae.length===0&&Ae.push(Ce[Ce.length-1]);const We=a.ak(Ae[Ae.length-1].y,(Ce.length===0?Me[0]:Ce[0]).y,_e);let $e;return $e=oe?[new a.P(0,We),new a.P(0,0),new a.P(1,0),new a.P(1,We)]:[new a.P(1,We),new a.P(1,1),new a.P(0,1),new a.P(0,We)],Ae.push(...$e),Ce.length===0?Ae.push(Me[0]):Ae.push(...Ce),{polygon:Ae.map(Ge=>new a.ae(Ge.x,Ge.y)),unwrapped:!1}})(l,d);if(v)return v;const T=(function(O,M){let R=!1,F=-1/0,q=0;for(let re=0;re<O.length-1;re++)O[re].x>F&&(F=O[re].x,q=re);for(let re=0;re<O.length-1;re++){const ee=(q+re)%(O.length-1),oe=O[ee],he=O[ee+1];Math.abs(oe.x-he.x)>.5&&(oe.x<he.x?(oe.x+=1,ee===0&&(O[O.length-1].x+=1)):(he.x+=1,ee+1===O.length-1&&(O[0].x+=1)),R=!0)}const H=a.aF(M.center.lng);return R&&H<Math.abs(H-1)&&O.forEach(re=>{re.x-=1}),{polygon:O,unwrapped:R}})(sa(l,d).map(O=>new a.P(bo(O.x),O.y)),d);return{polygon:T.polygon.map(O=>new a.ae(O.x,O.y)),unwrapped:T.unwrapped}}}function sa(_,l){return a.aG(_,d=>{const v=l.pointCoordinate3D(d);d.x=v.x,d.y=v.y},1/256)}function bo(_){return _<0?1+_%1:_%1}function Ja(_){return 100*_|0}function Ec(_,l,d,v,T){const O=function(R,F){if(R)return T(R);if(F){if(_.url&&F.tiles&&_.tiles&&delete _.tiles,F.variants){if(!Array.isArray(F.variants))return T(new Error("variants must be an array"));for(const H of F.variants){if(H==null||typeof H!="object"||H.constructor!==Object)return T(new Error("variant must be an object"));if(!Array.isArray(H.capabilities))return T(new Error("capabilities must be an array"));if(H.capabilities.length===1&&H.capabilities[0]==="meshopt"){F=Object.assign(F,H);break}}}const q=a.aH(Object.assign({},F,_),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","extra_bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);q.tiles=l.canonicalizeTileset(q,_.url),T(null,q)}},M=(function(R,F,q){if(!R)return null;if(!F&&!q)return R;q=q||R.worldview_default;const H=Object.values(R.language||{});if(H.length===0)return null;const re=Object.values(R.worldview||{});if(re.length===0)return null;const ee=H.every(he=>he===F),oe=re.every(he=>he===q);return ee&&oe?R:F in(R.language_options||{})||q in(R.worldview_options||{})?null:R.language_options&&R.worldview_options?R:null})(_.data,d,v);return M?a.o.frame(()=>O(null,M)):_.url?a.m(l.transformRequest(l.normalizeSourceURL(_.url,null,d,v),a.R.Source),O):a.o.frame(()=>{const{data:R,...F}=_;O(null,F)})}function as(_,l){const d=Math.pow(2,l.z),v=Math.floor(a.aF(_.getWest())*d),T=Math.floor(a.aJ(_.getNorth())*d),O=Math.ceil(a.aF(_.getEast())*d),M=Math.ceil(a.aJ(_.getSouth())*d);return l.x>=v&&l.x<O&&l.y>=T&&l.y<M}class bs{constructor(l,d,v){this.bounds=l?a.aI.convert(this.validateBounds(l)):null,this.minzoom=d||0,this.maxzoom=v||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}addExtraBounds(l){if(l){this.extraBounds||(this.extraBounds=[]);for(const d of l)this.extraBounds.push(a.aI.convert(this.validateBounds(d)))}}contains(l){if(l.z>this.maxzoom||l.z<this.minzoom||this.bounds&&!as(this.bounds,l))return!1;if(!this.extraBounds)return!0;for(const d of this.extraBounds)if(as(d,l))return!0;return!1}static fromTileJSON(l){if(!l.bounds&&!l.extra_bounds)return null;const d=new bs(l.bounds,l.minzoom,l.maxzoom);return d.addExtraBounds(l.extra_bounds),d}}class ru extends a.E{constructor(l,d,v,T){if(super(),this.id=l,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,Object.assign(this,a.aH(d,["url","scheme","tileSize","promoteId"])),this._options=Object.assign({type:"vector"},d),this._collectResourceTiming=!!d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(T),this._tileWorkers={},this._deduped=new a.aK}load(l){this._loaded=!1,this.fire(new a.z("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,v=this.map.getWorldview();this._tileJSONRequest=Ec(this._options,this.map._requestManager,d,v,(T,O)=>{if(this._tileJSONRequest=null,this._loaded=!0,T)d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),v&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${v}`),this.fire(new a.y(T));else if(O){if(Object.assign(this,O),this.hasWorldviews=!!O.worldview_options,O.worldview_default&&(this.worldviewDefault=O.worldview_default),O.vector_layers){this.vectorLayers=O.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const M of O.vector_layers)this.vectorLayerIds.push(M.id),O.worldview&&O.worldview[M.source]&&this.localizableLayerIds.add(M.id)}this.tileBounds=bs.fromTileJSON(O),Pe(O.tiles,this.map._requestManager._customAccessToken),this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))}l&&l(T)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=a.B(this.id,this.scope);this.load(()=>this.map.style.clearSource(l))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(l){this.cancelTileJSONRequest()}serialize(){return Object.assign({},this._options)}loadTile(l,d){const v=l.tileID.canonical.url(this.tiles,this.scheme),T=this.map._requestManager.normalizeTileURL(v),O=this.map._requestManager.transformRequest(T,a.R.Tile),M=this.map.style?this.map.style.getLut(this.scope):null,R=M?{image:M.image.clone()}:null,F={request:O,data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,lut:R,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:a.o.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:l.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor(),worldview:this.map.getWorldview()||this.worldviewDefault,indoor:this.map.getIndoorTileOptions(this.id,this.scope)};if(this.hasWorldviews&&a.h(v)&&(F.localizableLayerIds=this.localizableLayerIds),F.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=d:l.request=l.actor.send("reloadTile",F,q.bind(this));else if(l.actor=this._tileWorkers[T]=this._tileWorkers[T]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",F,q.bind(this),void 0,!0);else{const H=a.aL.call({deduped:this._deduped},F,(re,ee)=>{if(re||!ee)q.call(this,re);else{const oe=a.aM(ee.responseHeaders);F.data={rawData:ee.rawData.slice(0),expires:oe.expires,cacheControl:oe.cacheControl},l.actor&&l.actor.send("loadTile",F,q.bind(this),void 0,!0)}},!0);l.request={cancel:H}}function q(H,re){return delete l.request,l.aborted?d(null):H&&H instanceof a.aN&&H.status!==404?d(H):(re&&re.resourceTiming&&(l.resourceTiming=re.resourceTiming),this.map._refreshExpiredTiles&&re&&l.setExpiryData(re),l.loadVectorData(re,this.map.painter),a.aO(this.dispatcher),d(null,re),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(l,d){l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope}),l.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class so extends a.E{constructor(l,d,v,T){super(),this.id=l,this.dispatcher=v,this.setEventedParent(T),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=Object.assign({type:"raster"},d),Object.assign(this,a.aH(d,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new a.z("dataloading",{dataType:"source"}));const d=this.map.getWorldview();this._tileJSONRequest=Ec(this._options,this.map._requestManager,null,d,(v,T)=>{this._tileJSONRequest=null,this._loaded=!0,v?this.fire(new a.y(v)):T&&(Object.assign(this,T),T.raster_layers&&(this.rasterLayers=T.raster_layers,this.rasterLayerIds=this.rasterLayers.map(O=>O.id)),this.tileBounds=bs.fromTileJSON(T),Pe(T.tiles),this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))),l&&l(v)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=a.B(this.id,this.scope);this.load(()=>this.map.style.clearSource(l))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(l){this.cancelTileJSONRequest()}serialize(){return Object.assign({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,d){const v=a.o.devicePixelRatio>=2,T=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),v,this.tileSize);l.request=a.n(this.map._requestManager.transformRequest(T,a.R.Tile),(O,M,R)=>{if(delete l.request,l.aborted)return l.state="unloaded",d(null);if(O)return l.state="errored",d(O);if(!M)return d(null);const F=a.aM(R);this.map._refreshExpiredTiles&&l.setExpiryData(F),l.setTexture(M,this.map.painter),l.state="loaded",a.aO(this.dispatcher),d(null)})}abortTile(l,d){l.request&&(l.request.cancel(),delete l.request),d&&d()}unloadTile(l,d){l.texture&&l.texture instanceof a.T?(l.destroy(!1),l.texture&&l.texture instanceof a.T&&this.map.painter.saveTileTexture(l.texture)):l.destroy(),d&&d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Ns([_,l],d,v,{scaled:T=!0}={}){const{tileSize:O,buffer:M}=v,{x:R,y:F,z:q}=d;if(!isFinite(R)||!isFinite(F)||!isFinite(q))throw new Error("Invalid MRT header");const H=2**q,re=H*a.aF(_),ee=H*a.aJ(l);return(function([oe,he],ce,{scaled:de=!0}={}){if(!ce)throw new Error("bandView is undefined");const{data:_e,tileSize:Me,buffer:Ce,offset:Ae,scale:We,dimension:$e}=ce;if(oe<-Ce||oe>Me+Ce||he<-Ce||he>Me+Ce)throw new Error(`Point (${oe}, ${he}) out of bounds for tileSize=${Me}, buffer=${Ce}`);const Ge=(he+Ce)*(Me+2*Ce)+(oe+Ce);if(new Uint32Array(_e.buffer)[Ge]===4294967295)return null;let Ne=[];Ne=de?[]:new ce.data.constructor($e);for(let Re=0;Re<$e;Re++)Ne[Re]=Math.round(1e12*(_e[$e*Ge+Re]*We+Ae))/1e12;return Ne})([Math.min(Math.max(-M,Math.floor((re-R)*O)),O-1+M),Math.min(Math.max(-M,Math.floor((ee-F)*O)),O-1+M)],v,{scaled:T})}class xs extends so{constructor(l,d,v,T){super(l,d,v,T),this.type="raster-array",this.maxzoom=22,this.partial=!0,this._loadTilePending={},this._loadTileLoaded={},this._options=Object.assign({type:"raster-array"},d)}triggerRepaint(l){const d=this.map.painter._terrain,v=this.map.style.getSourceCache(this.id);d&&d.enabled&&v&&d._clearRenderCacheForTile(v.id,l.tileID),this.map.triggerRepaint()}loadTile(l,d){const v=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),T=this.map._requestManager.transformRequest(v,a.R.Tile),O={request:T,uid:l.uid,tileID:l.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};l.source=this.id,l.scope=this.scope,l.requestParams=T,l.actor||(l.actor=this.dispatcher.getActor());const M=(R,F,q)=>{if(delete l.request,l.aborted)return l.state="unloaded",d(null);if(R)return R.name==="AbortError"?void 0:(l.state="errored",d(R));if(this.map._refreshExpiredTiles&&F){const H=a.aM(q);l.setExpiryData(H)}if(this.partial&&l.state!=="expired")l.state="empty";else if(!this.partial){if(!F)return d(null);l.state="loaded",l._isHeaderLoaded=!0,l._mrt=F}d(null)};l.request=this.partial?l.fetchHeader(void 0,M.bind(this)):l.actor.send("loadTile",O,M.bind(this),void 0,!0)}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(l,d){const v=l.texturePerLayer;if(l.flushAllQueues(),v.size){l.destroy(!1);for(const T of v.values())this.map.painter.saveTileTexture(T)}else l.destroy()}prepareTile(l,d,v,T){l._isHeaderLoaded&&(l.state!=="empty"&&(l.state="reloading"),l.fetchBandForRender(d,v,T,(O,M)=>{if(O)return l.state="errored",this.fire(new a.y(O)),void this.triggerRepaint(l);M&&(l._isHeaderLoaded=!0,l.setTexturePerLayer(v,M,this.map.painter),l.state="loaded",this.triggerRepaint(l))}))}getInitialBand(l){if(!this.rasterLayers)return 0;const d=this.rasterLayers.find(({id:O})=>O===l),v=d&&d.fields,T=v&&v.bands&&v.bands;return T?T[0]:0}getTextureDescriptor(l,d,v){if(!l)return;const T=d.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!T)return;let O=null;d instanceof a.aR?O=d.paint.get("raster-array-band"):d instanceof a.aS&&(O=d.paint.get("raster-particle-array-band"));const M=O||this.getInitialBand(T);if(M==null)return;if(!l.textureDescriptorPerLayer.get(d.id))return void this.prepareTile(l,T,d.id,M);if(l.updateNeeded(d.id,M)&&!v)return;const R=l.textureDescriptorPerLayer.get(d.id);return Object.assign({},R,{texture:l.texturePerLayer.get(d.id)})}getImages(l,d){const v=new Map;for(const T of l)for(const O of d){const[M,R]=O.split("/"),F=T.getLayer(M);if(!F||!F.hasBand(R)||!F.hasDataForBand(R))continue;const{bytes:q,tileSize:H,buffer:re}=F.getBandView(R),ee=H+2*re,oe={data:new a.q({width:ee,height:ee},q),pixelRatio:2,sdf:!1,usvg:!1,version:0};v.set(O,oe)}return v}queryRasterArrayValueByBandId(l,d,v){const T=d._mrt;return new Promise(O=>{const M={},R=new Set;for(const[F,q]of Object.entries(T.layers)){if(v.layerName&&F!==v.layerName)continue;const H={};M[F]=H;for(const{bands:re}of q.dataIndex)for(const ee of re)v.bands&&!v.bands.includes(ee)||(R.add(a.B(F,ee)),d.fetchBand(F,null,ee,oe=>{a.o.frame(()=>{H[ee]=oe?null:Ns([l.lng,l.lat],T,q.getBandView(ee)),R.delete(a.B(F,ee)),R.size===0&&O(M)})},!1))}R.size===0&&O(M)})}_loadTileForQuery(l,d){if(this._loadTileLoaded[l.uid])return void d(null,l._mrt);if(this._loadTilePending[l.uid])return void this._loadTilePending[l.uid].push(d);this._loadTilePending[l.uid]=[d];const v=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),T=this.map._requestManager.transformRequest(v,a.R.Tile);l.actor.send("loadTile",{request:T,uid:l.uid,tileID:l.tileID,type:this.type,source:this.id,scope:this.scope,partial:!1},(O,M,R)=>{if(O)return this._loadTilePending[l.uid].forEach(F=>F(O,null)),void delete this._loadTilePending[l.uid];if(!M)return this._loadTilePending[l.uid].forEach(F=>F(null,null)),void delete this._loadTilePending[l.uid];if(this.map._refreshExpiredTiles&&M){const F=a.aM(R);l.setExpiryData(F)}l._mrt=M,l._isHeaderLoaded=!0,l.state="loaded",this._loadTilePending[l.uid].forEach(F=>F(null,M)),this._loadTileLoaded[l.uid]=!0,delete this._loadTilePending[l.uid]},void 0,!0)}queryRasterArrayValueByAllBands(l,d,v){return new Promise((T,O)=>{this._loadTileForQuery(d,(M,R)=>{M?O(M):T(R?this.queryRasterArrayValueByBandId(l,d,v):null)})})}queryRasterArrayValue(l,d){const v=a.aT.convert(l),T=this.findLoadedParent(v);return T&&T._mrt?d.bands||!this.partial?this.queryRasterArrayValueByBandId(v,T,d):this.queryRasterArrayValueByAllBands(v,T,d):Promise.resolve(null)}findLoadedParent(l){const d=a.ae.fromLngLat(l,this.map.transform.tileSize),v=this.maxzoom+1,T=1<<v,O=Math.floor(d.x),M=Math.floor((d.x-O)*T),R=Math.floor(d.y*T),F=this.map.style.getSourceCache(this.id),q=new a.aQ(v,O,v,M,R);return F.findLoadedParent(q,this.minzoom)}}const Fu={vector:ru,raster:so,"raster-dem":class extends so{constructor(_,l,d,v){super(_,l,d,v),this.type="raster-dem",this.maxzoom=22,this._options=Object.assign({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(_,l){const d=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function v(T,O){T&&(_.state="errored",l(T)),O&&(_.dem=O,_.dem.onDeserialize(),_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0,_.state="loaded",l(null))}_.request=a.n(this.map._requestManager.transformRequest(d,a.R.Tile),(function(T,O,M){if(delete _.request,_.aborted)_.state="unloaded",l(null);else if(T)_.state="errored",l(T);else if(O){const R=a.aM(M);this.map._refreshExpiredTiles&&_.setExpiryData(R);const F=ImageBitmap&&O instanceof ImageBitmap&&a.r(),q=1-(O.width-a.aP(O.width))/2;q<1||_.neighboringTiles||(_.neighboringTiles=this._getNeighboringTiles(_.tileID));const H=F?O:a.o.getImageData(O,q),re={uid:_.uid,tileID:_.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:H,encoding:this.encoding,padding:q};_.actor&&_.state!=="expired"||(_.actor=this.dispatcher.getActor(),_.actor.send("loadTile",re,v.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(_){const l=_.canonical,d=Math.pow(2,l.z),v=(l.x-1+d)%d,T=l.x===0?_.wrap-1:_.wrap,O=(l.x+1+d)%d,M=l.x+1===d?_.wrap+1:_.wrap,R={};return R[new a.aQ(_.overscaledZ,T,l.z,v,l.y).key]={backfilled:!1},R[new a.aQ(_.overscaledZ,M,l.z,O,l.y).key]={backfilled:!1},l.y>0&&(R[new a.aQ(_.overscaledZ,T,l.z,v,l.y-1).key]={backfilled:!1},R[new a.aQ(_.overscaledZ,_.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},R[new a.aQ(_.overscaledZ,M,l.z,O,l.y-1).key]={backfilled:!1}),l.y+1<d&&(R[new a.aQ(_.overscaledZ,T,l.z,v,l.y+1).key]={backfilled:!1},R[new a.aQ(_.overscaledZ,_.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},R[new a.aQ(_.overscaledZ,M,l.z,O,l.y+1).key]={backfilled:!1}),R}},"raster-array":xs,geojson:class extends a.E{constructor(_,l,d,v){super(),this.id=_,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(v),this._data=l.data,this._options=Object.assign({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.minzoom!==void 0&&(this.minzoom=l.minzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const T=a.al/this.tileSize;this.workerOptions=Object.assign({source:this.id,scope:this.scope,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*T,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*T,extent:a.al,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:a.al,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*T,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter,dynamic:l.dynamic},l.workerOptions)}onAdd(_){this.map=_,this.setData(this._data)}setData(_){return this._data=_,this._updateWorkerData(),this}updateData(_){if(!this._options.dynamic)return this.fire(new a.y(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof _!="string"&&(_.type==="Feature"&&(_={type:"FeatureCollection",features:[_]}),_.type!=="FeatureCollection"))return this.fire(new a.y(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof _!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const l=new Map;for(const d of this._data.features)l.set(d.id,d);for(const d of _.features)l.set(d.id,d);this._data.features=[...l.values()]}else this._data=_;return this._updateWorkerData(!0),this}getClusterExpansionZoom(_,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:_,source:this.id,scope:this.scope},l),this}getClusterChildren(_,l){return this.actor.send("geojson.getClusterChildren",{clusterId:_,source:this.id,scope:this.scope},l),this}getClusterLeaves(_,l,d,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:_,limit:l,offset:d},v),this}_updateWorkerData(_=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new a.z("dataloading",{dataType:"source"})),this._loaded=!1;const l=Object.assign({append:_},this.workerOptions);l.scope=this.scope;const d=this._data;typeof d=="string"?(l.request=this.map._requestManager.transformRequest(a.o.resolveURL(d),a.R.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,l,(v,T)=>{if(this._loaded=!0,this._pendingLoad=null,v)this.fire(new a.y(v));else{const O={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&T&&T.resourceTiming&&T.resourceTiming[this.id]&&(O.resourceTiming=T.resourceTiming[this.id]),_&&(this._partialReload=!0),this.fire(new a.z("data",O)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(_),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const _=a.B(this.id,this.scope);this.map.style.clearSource(_),this._updateWorkerData()}loadTile(_,l){const d=_.actor?"reloadTile":"loadTile";_.actor=this.actor;const v=this.map.style?this.map.style.getLut(this.scope):null,T=v?{image:v.image.clone()}:null,O=this._partialReload,M={type:this.type,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:T,scope:this.scope,pixelRatio:a.o.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:_.isExtraShadowCaster,scaleFactor:this.map.getScaleFactor(),partial:O,worldview:this.map.getWorldview(),indoor:this.map.getIndoorTileOptions(this.id,this.scope)};_.request=this.actor.send(d,M,(R,F)=>O&&!F?(_.state="loaded",l(null)):(delete _.request,_.destroy(!1),_.aborted?l(null):R?l(R):(_.loadVectorData(F,this.map.painter,d==="reloadTile"),l(null))),void 0,d==="loadTile")}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.aborted=!0}unloadTile(_,l){this.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id,scope:this.scope}),_.destroy()}onRemove(_){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return Object.assign({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends a.aU{constructor(_,l,d,v){super(_,l,d,v),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const _=this.options;this.urls=[];for(const l of _.urls)this.urls.push(this.map._requestManager.transformRequest(l,a.R.Source).url);a.aV(this.urls,(l,d)=>{this._loaded=!0,l?this.fire(new a.y(l)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(_){if(this.video){const l=this.video.seekable;_<l.start(0)||_>l.end(0)?this.fire(new a.y(new a.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=_}}getVideo(){return this.video}onAdd(_){this.map||(this.map=_,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,l=_.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(_,this.video,l.RGBA8),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(_)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:a.aU,model:a.aX,"batched-model":class extends a.E{constructor(_,l,d,v){super(),this.type="batched-model",this.id=_,this.tileSize=512,this._options=l,this.tiles=this._options.tiles,this.maxzoom=l.maxzoom||19,this.minzoom=l.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=d,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(v)}onAdd(_){this.map=_,this.load()}reload(){this.cancelTileJSONRequest();const _=a.B(this.id,this.scope);this.load(()=>this.map.style.clearSource(_))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(_){this._loaded=!1,this.fire(new a.z("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map.getWorldview();this._tileJSONRequest=Ec(this._options,this.map._requestManager,l,d,(v,T)=>{this._tileJSONRequest=null,this._loaded=!0,v?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),d&&d.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new a.y(v))):T&&(Object.assign(this,T),T.bounds&&(this.tileBounds=new bs(T.bounds,this.minzoom,this.maxzoom)),Pe(T.tiles,this.map._requestManager._customAccessToken),this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))),_&&_(v)})}hasTransition(){return!1}hasTile(_){return!this.tileBounds||this.tileBounds.contains(_.canonical)}loaded(){return this._loaded}loadTile(_,l){const d=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(d,a.R.Tile),data:void 0,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,tileSize:this.tileSize*_.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:_.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:a.o.devicePixelRatio,promoteId:this.promoteId};if(_.actor&&_.state!=="expired")if(_.state==="loading")_.reloadCallback=l;else{if(_.buckets){const O=Object.values(_.buckets);for(const M of O)M.dirty=!0;return void(_.state="loaded")}_.request=_.actor.send("reloadTile",v,T.bind(this))}else _.actor=this.dispatcher.getActor(),_.request=_.actor.send("loadTile",v,T.bind(this),void 0,!0);function T(O,M){return _.aborted?l(null):O&&O.status!==404?l(O):(this.map._refreshExpiredTiles&&M&&_.setExpiryData(M),_.loadModelData(M,this.map.painter),_.state="loaded",void l(null))}}serialize(){return Object.assign({},this._options)}},canvas:class extends a.aU{constructor(_,l,d,v){super(_,l,d,v),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(O=>typeof O!="number"))||this.fire(new a.y(new a.V(`sources.${_}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.y(new a.V(`sources.${_}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new a.y(new a.V(`sources.${_}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new a.y(new a.V(`sources.${_}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.y(new a.V(`sources.${_}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.y(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(_){this.map=_,this.load(),this.canvas&&this.animate&&this.play()}onRemove(_){this.pause()}prepare(){let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?!_&&!this._playing||this.texture instanceof a.aW||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(l,this.canvas,l.gl.RGBA8,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const _ of[this.canvas.width,this.canvas.height])if(isNaN(_)||_<=0)return!0;return!1}},custom:class extends a.E{constructor(_,l,d,v){super(),this.id=_,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=l,this.setEventedParent(v),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new a.y(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new a.y(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new bs(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),Object.assign(this,a.aH(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return a.aH(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(_){this.map=_,this._loaded=!1,this.fire(new a.z("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(_),this.load()}onRemove(_){this._implementation.onRemove&&this._implementation.onRemove(_)}hasTile(_){if(this._implementation.hasTile){const{x:l,y:d,z:v}=_.canonical;return this._implementation.hasTile({x:l,y:d,z:v})}return!this.tileBounds||this.tileBounds.contains(_.canonical)}loadTile(_,l){const{x:d,y:v,z:T}=_.tileID.canonical,O=new AbortController;_.request=Promise.resolve(this._implementation.loadTile({x:d,y:v,z:T},{signal:O.signal})).then((function(M){return delete _.request,_.aborted?(_.state="unloaded",l(null)):M===void 0?(_.state="errored",l(null)):M===null?(this.loadTileData(_,{width:this.tileSize,height:this.tileSize,data:null}),_.state="loaded",l(null)):(function(R){return R instanceof ImageData||R instanceof HTMLCanvasElement||R instanceof ImageBitmap||R instanceof HTMLImageElement})(M)?(this.loadTileData(_,M),_.state="loaded",void l(null)):(_.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(M=>{M.name!=="AbortError"&&(_.state="errored",l(M))}),_.request.cancel=()=>O.abort()}loadTileData(_,l){_.setTexture(l,this.map.painter)}unloadTile(_,l){if(_.texture&&_.texture instanceof a.T?(_.destroy(!1),_.texture&&_.texture instanceof a.T&&this.map.painter.saveTileTexture(_.texture)):_.destroy(),this._implementation.unloadTile){const{x:d,y:v,z:T}=_.tileID.canonical;this._implementation.unloadTile({x:d,y:v,z:T})}l&&l()}abortTile(_,l){_.request&&_.request.cancel&&(_.request.cancel(),delete _.request),l&&l()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(_=>({x:_.canonical.x,y:_.canonical.y,z:_.canonical.z}))}_clearTiles(){const _=a.B(this.id,this.scope);this.map.style.clearSource(_)}_update(){this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))}}},iu=function(_,l,d,v){const T=new Fu[l.type](_,l,d,v);if(T.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${T.id}`);return a.aY(["load","abort","unload","serialize","prepare"],T),T};function Sl(_,l,d=""){return`${d}:${l.id||""}:${l.layer.id}:${(function(v){if("layerId"in v)return`layer:${v.layerId}`;{const{featuresetId:T,importId:O}=v;return`featureset:${T}${O?`:import:${O}`:""}`}})(_.target)}`}function kp(_,l,d,v=""){if(_.uniqueFeatureID){const T=Sl(_,l,v);if(d.has(T))return!0;d.add(T)}return!1}function Ac(_,l,d,v,T=!1,O=void 0){const M=l.sourceCache.transform,R=l.sourceCache.tilesIn(_,l.has3DLayers,T);R.sort(w_);const F=[];for(const q of R){const H=q.tile.queryRenderedFeatures(l,q,d,v,M,T,O);Object.keys(H).length&&F.push({wrappedTileID:q.tile.tileID.wrapped().key,queryResults:H})}for(const q in l.layers){const H=l.layers[q];if(H.styleLayer){const re=H.styleLayer.queryRenderedFeatures(_,l.sourceCache,v);Object.keys(re).length&&F.push({wrappedTileID:0,queryResults:re})}}return F.length===0?{}:(function(q){const H={},re={};for(const ee of q){const oe=ee.queryResults,he=ee.wrappedTileID,ce=re[he]=re[he]||{};for(const de in oe){const _e=oe[de],Me=ce[de]=ce[de]||{},Ce=H[de]=H[de]||[];for(const Ae of _e)Me[Ae.featureIndex]||(Me[Ae.featureIndex]=!0,Ce.push(Ae))}}return H})(F)}function Zx(_,l,d,v,T,O){const M={},R=v.queryRenderedSymbols(_),F=[];for(const q of Object.keys(R).map(Number))F.push(T[q]);F.sort(w_);for(const q of F){const H=q.featureIndex.lookupSymbolFeatures(R[q.bucketInstanceId],q.bucketIndex,q.sourceLayerIndex,l,d,O);for(const re in H){const ee=M[re]=M[re]||[],oe=H[re];oe.sort((he,ce)=>{const de=q.featureSortOrder;if(de){const _e=de.indexOf(he.featureIndex);return de.indexOf(ce.featureIndex)-_e}return ce.featureIndex-he.featureIndex});for(const he of oe)ee.push(he)}}return M}function g0(_,l){const d=_.getRenderableIds().map(O=>_.getTileByID(O)),v=[],T={};for(let O=0;O<d.length;O++){const M=d[O],R=M.tileID.canonical.key;T[R]||(T[R]=!0,M.querySourceFeatures(v,l))}return v}function w_(_,l){const d=_.tileID,v=l.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function bg(_,l){const d={};if(!l)return d;for(const v of _){const T=v.layerIds.map(O=>l.getLayer(O)).filter(Boolean);if(T.length!==0){v.layers=T,v.stateDependentLayerIds&&(v.stateDependentLayers=v.stateDependentLayerIds.map(O=>T.filter(M=>M.id===O)[0]));for(const O of T)d[O.fqid]=v}}return d}const Fo=32,jl=33,au=new Uint16Array(8184);for(let _=0;_<2046;_++){let l=_+2,d=0,v=0,T=0,O=0,M=0,R=0;for(1&l?T=O=M=Fo:d=v=R=Fo;(l>>=1)>1;){const q=d+T>>1,H=v+O>>1;1&l?(T=d,O=v,d=M,v=R):(d=T,v=O,T=M,O=R),M=q,R=H}const F=4*_;au[F+0]=d,au[F+1]=v,au[F+2]=T,au[F+3]=O}const xo=new Uint16Array(2178),ou=new Uint8Array(1089),oh=new Uint16Array(1089);function Bu(_){return _===0?-.03125:_===32?.03125:0}const su={type:2,extent:a.al,loadGeometry:()=>[[new a.P(0,0),new a.P(a.al+1,0),new a.P(a.al+1,a.al+1),new a.P(0,a.al+1),new a.P(0,0)]]};class ff{constructor(l,d,v,T,O,M){this.tileID=l,this.uid=a.b2(),this.uses=0,this.tileSize=d,this.tileZoom=v,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=O,T&&T.style&&(this._lastUpdatedBrightness=T.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",T&&T.transform&&(this.projection=T.transform.projection),this.worldview=M,this._hasAppearances=null}registerFadeDuration(l){const d=l+this.timeAdded;d<a.o.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=a.aZ(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(l,d,v){if(this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=bg(l.buckets,d.style),this.hasSymbolBuckets=!1;for(const T in this.buckets){const O=this.buckets[T];if(O instanceof a.b4){if(this.hasSymbolBuckets=!0,!v)break;O.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const T in this.buckets){const O=this.buckets[T];if(O instanceof a.b4&&O.hasRTLText){this.hasRTLText=!0,a.b5();break}}this.queryPadding=0;for(const T in this.buckets){const O=this.buckets[T],M=d.style.getOwnLayer(T);if(!M)continue;const R=M.queryRadius(O);this.queryPadding=Math.max(this.queryPadding,R)}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),l.lineAtlas&&(this.lineAtlas=l.lineAtlas),this._lastUpdatedBrightness=l.brightness}else this.collisionBoxArray=new a.b3}unloadVectorData(){if(this.hasData()){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(l,d,v){l&&(l.resourceTiming&&(this.resourceTiming=l.resourceTiming),this.buckets=Object.assign({},this.buckets,bg(l.buckets,d.style)),l.featureIndex&&(this.latestFeatureIndex=l.featureIndex))}getBucket(l){return this.buckets[l.fqid]}upload(l,d){for(const O in this.buckets){const M=this.buckets[O];if(M.uploadPending()){let R={},F=[],q={zoom:0,pitch:0,brightness:0,worldview:""};if(d){if(d.style){F=d.style.listImages();const H=M.layers[0],re=H.sourceLayer||"_geojsonTileLayer",ee=d.style.getLayerSourceCache(H);ee&&(R=ee._state.getState(re,void 0))}q={zoom:d.transform.zoom||0,pitch:d.transform.pitch||0,brightness:d.style.getBrightness()||0,worldview:d.worldview||""}}M.upload(l,this.tileID.canonical,R,F,q)}}const v=l.gl,T=this.imageAtlas;T&&!T.uploaded&&(this.imageAtlasTexture=new a.T(l,T.image,v.RGBA8,{useMipmap:!!T.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(l,this.glyphAtlasImage,v.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new a.T(l,this.lineAtlas.image,v.R8),this.lineAtlas.uploaded=!0)}prepare(l,d,v){if(this.imageAtlas&&this.imageAtlasTexture&&d){const O=d.style.getLut(v);this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture,v,O)}if(!d||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const T=d.style.getBrightness();this._hasAppearances===null&&(this._hasAppearances=this.hasAppearances(d)),(this._lastUpdatedBrightness||T||this._hasAppearances)&&(!this._hasAppearances&&this._lastUpdatedBrightness&&T&&Math.abs(this._lastUpdatedBrightness-T)<.001||(this.updateBuckets(d,this._lastUpdatedBrightness!==T),this._lastUpdatedBrightness=T))}evaluateQueryRenderedFeaturePadding(){let l=0;for(const d in this.buckets){const v=this.buckets[d];v.evaluateQueryRenderedFeaturePadding&&(l=Math.max(l,v.evaluateQueryRenderedFeaturePadding()))}return l}queryRenderedFeatures(l,d,v,T,O,M,R){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const F=this.evaluateQueryRenderedFeaturePadding(),q=(function(H,re){const ee=a.bq([],[.5*H.width,.5*-H.height,1]);return a.br(ee,ee,[1,-1,0]),a.aB(ee,ee,H.calculateProjMatrix(re.toUnwrapped())),Float32Array.from(ee)})(O,this.tileID);return this.latestFeatureIndex.query(l,{tilespaceGeometry:d,pixelPosMatrix:q,transform:T,availableImages:v,tileTransform:this.tileTransform,worldview:this.worldview,queryRadius:F,scope:R})}querySourceFeatures(l,d){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const T=v.loadVTLayers(),O=d?d.sourceLayer:"",M=T._geojsonTileLayer||T[O];if(!M)return;const R=a.b6(d&&d.filter),{z:F,x:q,y:H}=this.tileID.canonical,re={z:F,x:q,y:H};for(let ee=0;ee<M.length;ee++){const oe=M.feature(ee);if(R.needGeometry){const de=a.b7(oe,!0);if(!R.filter(new a.ac(this.tileID.overscaledZ,{worldview:this.worldview}),de,this.tileID.canonical))continue}else if(!R.filter(new a.ac(this.tileID.overscaledZ,{worldview:this.worldview}),oe))continue;const he=v.getId(oe,O),ce=new a.b8(oe,F,q,H,he);ce.tile=re,l.push(ce)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(l){const d=this.expirationTime;if(l.cacheControl){const v=a.b9(l.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const v=Date.now();let T=!1;if(this.expirationTime>v)T=!1;else if(d)if(this.expirationTime<d)T=!0;else{const O=this.expirationTime-d;O?this.expirationTime=v+Math.max(O,3e4):T=!0}else T=!0;T?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(l){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&l&&this.updateBuckets(l)}hasAppearances(l){for(const d in this.buckets)if(l.style.hasLayer(d)&&this.buckets[d].layers.some(v=>v.appearances&&v.appearances.length>0))return!0;return!1}updateBuckets(l,d){if(!this.latestFeatureIndex||!l.style)return;const v=l.style.listImages(),T=l.style.getBrightness();for(const O in this.buckets){if(!l.style.hasLayer(O))continue;const M=this.buckets[O],R=M.layers[0],F=R.sourceLayer||"_geojsonTileLayer",q=l.style.getLayerSourceCache(R);let H={};q&&(H=q._state.getState(F,void 0));const re=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},ee=Object.keys(H).length>0&&!d;M.hasAppearances=M.layers.some(ce=>ce.appearances&&ce.appearances.length>0);const oe=ee?M.stateDependentLayers:M.layers;if(ee&&M.stateDependentLayers.length!==0||d){const ce=this.latestFeatureIndex.loadVTLayers();M.update(H,ce[F],v,re,oe,d,T)}if(ee&&M.stateDependentLayers.length!==0||d||M.hasAppearances){const ce={zoom:l.transform.zoom,pitch:l.transform.pitch,brightness:l.style.getBrightness()||0,worldview:l.worldview};M.updateAppearances(this.tileID.canonical,H,v,ce,l.imageManager)}(M instanceof a.ba||M instanceof a.bb)&&l._terrain&&l._terrain.enabled&&q&&M.uploadPending()&&l._terrain._clearRenderCacheForTile(q.id,this.tileID);const he=l&&l.style&&l.style.getOwnLayer(O);he&&(this.queryPadding=Math.max(this.queryPadding,he.queryRadius(M)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.o.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=a.o.now()+l}setTexture(l,d){const v=d.context,T=v.gl;this.texture=this.texture||d.getTileTexture(l.width),this.texture&&this.texture instanceof a.T?this.texture.update(l):(this.texture=new a.T(v,l,T.RGBA8,{useMipmap:!0}),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE))}setDependencies(l,d){const v={};for(const T of d)v[T]=!0;this.dependencies[l]=v}hasDependency(l,d){for(const v of l){const T=this.dependencies[v];if(T){for(const O of d)if(T[O])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(l,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const v=a.bc(su,this.tileID.canonical,this.tileTransform)[0],T=new a.bd,O=new a.be;for(let M=0;M<v.length;M++){const{x:R,y:F}=v[M];T.emplaceBack(R,F),O.emplaceBack(M)}O.emplaceBack(0),this._tileDebugIndexBuffer=l.createIndexBuffer(O),this._tileDebugBuffer=l.createVertexBuffer(T,a.bf.members),this._tileDebugSegments=a.bg.simpleSegment(0,0,T.length,O.length)}_makeTileBoundsBuffers(l,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const v=a.bc(su,this.tileID.canonical,this.tileTransform)[0];let T,O;if(this.isRaster){const M=(function(R,F){const q=a.aZ(R,F),H=Math.pow(2,R.z);for(let de=0;de<jl;de++)for(let _e=0;_e<jl;_e++){const Me=a.a_((R.x+(_e+Bu(_e))/Fo)/H),Ce=a.a$((R.y+(de+Bu(de))/Fo)/H),Ae=F.project(Me,Ce),We=de*jl+_e;xo[2*We+0]=Math.round((Ae.x*q.scale-q.x)*a.al),xo[2*We+1]=Math.round((Ae.y*q.scale-q.y)*a.al)}ou.fill(0),oh.fill(0);for(let de=2045;de>=0;de--){const _e=4*de,Me=au[_e+0],Ce=au[_e+1],Ae=au[_e+2],We=au[_e+3],$e=Me+Ae>>1,Ge=Ce+We>>1,Ne=$e+Ge-Ce,Re=Ge+Me-$e,Je=Ce*jl+Me,nt=We*jl+Ae,st=Ge*jl+$e,dt=Math.hypot((xo[2*Je+0]+xo[2*nt+0])/2-xo[2*st+0],(xo[2*Je+1]+xo[2*nt+1])/2-xo[2*st+1])>=16;ou[st]=ou[st]||(dt?1:0),de<1022&&(ou[st]=ou[st]||ou[(Ce+Re>>1)*jl+(Me+Ne>>1)]||ou[(We+Re>>1)*jl+(Ae+Ne>>1)])}const re=new a.b1,ee=new a.b0;let oe=0;function he(de,_e){const Me=_e*jl+de;return oh[Me]===0&&(re.emplaceBack(xo[2*Me+0],xo[2*Me+1],de*a.al/Fo,_e*a.al/Fo),oh[Me]=++oe),oh[Me]-1}function ce(de,_e,Me,Ce,Ae,We){const $e=de+Me>>1,Ge=_e+Ce>>1;if(Math.abs(de-Ae)+Math.abs(_e-We)>1&&ou[Ge*jl+$e])ce(Ae,We,de,_e,$e,Ge),ce(Me,Ce,Ae,We,$e,Ge);else{const Ne=he(de,_e),Re=he(Me,Ce),Je=he(Ae,We);ee.emplaceBack(Ne,Re,Je)}}return ce(0,0,Fo,Fo,Fo,0),ce(Fo,Fo,0,0,0,Fo),{vertices:re,indices:ee}})(this.tileID.canonical,d);T=M.vertices,O=M.indices}else{T=new a.b1,O=new a.b0;for(const{x:R,y:F}of v)T.emplaceBack(R,F,0,0);const M=a.bh(T.int16.subarray(0,4*T.length),void 0,4);for(let R=0;R<M.length;R+=3)O.emplaceBack(M[R],M[R+1],M[R+2])}this._tileBoundsBuffer=l.createVertexBuffer(T,a.bi.members),this._tileBoundsIndexBuffer=l.createIndexBuffer(O),this._tileBoundsSegments=a.bg.simpleSegment(0,0,T.length,O.length)}_makeGlobeTileDebugBuffers(l,d){const v=d.projection;if(!v||v.name!=="globe"||d.freezeTileCoverage)return;const T=this.tileID.canonical,O=a.bj(T,d),M=a.bk(O),R=a.aj(d.zoom);let F;R>0&&(F=a.bl(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(l,T,d,M,F,R),this._makeGlobeTileDebugTextBuffer(l,T,d,M,F,R)}_globePoint(l,d,v,T,O,M,R){let F=a.bm(l,d,v);if(M){const q=1<<v.z,H=a.aF(T.center.lng),re=a.aJ(T.center.lat),ee=(v.x+.5)/q-H;let oe=0;ee>.5?oe=-1:ee<-.5&&(oe=1);let he=(l/a.al+v.x)/q+oe,ce=(d/a.al+v.y)/q;he=(he-H)*T._pixelsPerMercatorPixel+H,ce=(ce-re)*T._pixelsPerMercatorPixel+re;const de=[he*T.worldSize,ce*T.worldSize,0];a.af(de,de,M),F=a.bn(F,de,R)}return a.af(F,F,O)}_makeGlobeTileDebugBorderBuffer(l,d,v,T,O,M){const R=new a.bd,F=new a.be,q=new a.bo,H=(ee,oe,he,ce,de)=>{const _e=(he-ee)/(de-1),Me=(ce-oe)/(de-1),Ce=R.length;for(let Ae=0;Ae<de;Ae++){const We=ee+Ae*_e,$e=oe+Ae*Me;R.emplaceBack(We,$e);const Ge=this._globePoint(We,$e,d,v,T,O,M);q.emplaceBack(Ge[0],Ge[1],Ge[2]),F.emplaceBack(Ce+Ae)}},re=a.al;H(0,0,re,0,16),H(re,0,re,re,16),H(re,re,0,re,16),H(0,re,0,0,16),this._tileDebugIndexBuffer=l.createIndexBuffer(F),this._tileDebugBuffer=l.createVertexBuffer(R,a.bf.members),this._globeTileDebugBorderBuffer=l.createVertexBuffer(q,a.bp.members),this._tileDebugSegments=a.bg.simpleSegment(0,0,R.length,F.length)}_makeGlobeTileDebugTextBuffer(l,d,v,T,O,M){const R=a.al/4,F=new a.bd,q=new a.b0,H=new a.bo,re=25;q.reserve(32),F.reserve(re),H.reserve(re);const ee=(oe,he)=>re*oe+he;for(let oe=0;oe<re;oe++){const he=oe*R;for(let ce=0;ce<re;ce++){const de=ce*R;F.emplaceBack(de,he);const _e=this._globePoint(de,he,d,v,T,O,M);H.emplaceBack(_e[0],_e[1],_e[2])}}for(let oe=0;oe<4;oe++)for(let he=0;he<4;he++){const ce=ee(oe,he),de=ee(oe,he+1),_e=ee(oe+1,he),Me=ee(oe+1,he+1);q.emplaceBack(ce,de,_e),q.emplaceBack(_e,de,Me)}this._tileDebugTextIndexBuffer=l.createIndexBuffer(q),this._tileDebugTextBuffer=l.createVertexBuffer(F,a.bf.members),this._globeTileDebugTextBuffer=l.createVertexBuffer(H,a.bp.members),this._tileDebugTextSegments=a.bg.simpleSegment(0,0,re,32)}destroy(l=!0){for(const d in this.buckets)this.buckets[d].destroy(l);this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),l&&this.texture&&this.texture instanceof a.T&&(this.texture.destroy(),delete this.texture),this.emissiveTexture&&this.emissiveTexture instanceof a.T&&(this.emissiveTexture.destroy(),delete this.emissiveTexture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}a.bs.setPbf(a.bt);class Lp extends ff{constructor(l,d,v,T,O){super(l,d,v,T,O),this._workQueuePerLayer=new Map,this._fetchQueuePerLayer=new Map,this._taskQueue=new Map,this._isHeaderLoaded=!1,this.textureDescriptorPerLayer=new Map,this.texturePerLayer=new Map}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(l){return this._mrt&&this._mrt.getLayer(l)}setTexturePerLayer(l,d,v){const T=v.context,O=T.gl;let M=this.texturePerLayer.get(l)||v.getTileTexture(d.width);M&&M instanceof a.T?M.update(d,{premultiply:!1}):M=new a.T(T,d,O.RGBA8,{premultiply:!1}),this.texturePerLayer.has(l)||this.texturePerLayer.set(l,M)}flushQueues(l){const d=this._workQueuePerLayer.get(l)||[],v=this._fetchQueuePerLayer.get(l)||[];for(;d.length;)d.pop()();for(;v.length;)v.pop()()}flushAllQueues(){for(const l of this._workQueuePerLayer.keys()){const d=this._workQueuePerLayer.get(l)||[];for(;d.length;)d.pop()()}for(const l of this._fetchQueuePerLayer.keys()){const d=this._fetchQueuePerLayer.get(l)||[];for(;d.length;)d.pop()()}}fetchHeader(l=16384,d){const v=this._mrt=new a.bs(30),T=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(l-1)}});return this.entireBuffer=null,this.request=a.bu(T,(O,M,R)=>{if(O)d(O);else try{const F=v.getHeaderLength(M);if(F>l)return void(this.request=this.fetchHeader(F,d));v.parseHeader(M),this._isHeaderLoaded=!0;let q=0;for(const H of Object.values(v.layers))q=Math.max(q,H.dataIndex[H.dataIndex.length-1].lastByte);M.byteLength>=q&&(this.entireBuffer=M),d(null,this.entireBuffer||M,R)}catch(F){d(F)}}),this.request}fetchBandForRender(l,d,v,T){this.fetchBand(l,d,v,O=>{if(O)return void T(O);this.updateTextureDescriptor(l,d,v);const M=this.textureDescriptorPerLayer.get(d);T(null,M?M.img:null)})}fetchBand(l,d,v,T,O=!0){const M=this._mrt;if(!this._isHeaderLoaded||!M)return void T(new Error("Tile header is not ready"));const R=this.actor;if(!R)return void T(new Error("Can't fetch tile band without an actor"));let F;const q=a.B(String(v),a.B(this.tileID.key,l));let H=this._taskQueue.get(q);H?H.add(T):(H=new Set,H.add(T),this._taskQueue.set(q,H));const re=(ce,de)=>{F.complete(ce,de),ce?T(ce):(H.forEach(_e=>_e(null,de)),this._taskQueue.delete(q))},ee=(ce,de)=>{if(ce)return T(ce);const _e=R.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:de,task:F},re,void 0,!0);if(d!==null){const Me=this._workQueuePerLayer.get(d)||[];Me.push(()=>{_e&&_e.cancel(),F.cancel()}),this._workQueuePerLayer.has(d)||this._workQueuePerLayer.set(d,Me)}};let oe;try{oe=M.getLayer(l)}catch(ce){if(this.state==="reloading")return;throw ce}if(!oe)return void T(new Error(`Unknown sourceLayer "${l}"`));if(oe.hasDataForBand(v))return H.forEach(ce=>ce(null,null)),void this._taskQueue.delete(q);const he=oe.getDataRange([v]);if(F=M.createDecodingTask(he),!F||F.tasks.length)if(d!==null&&this.flushQueues(d),this.entireBuffer)ee(null,this.entireBuffer.slice(he.firstByte,he.lastByte+1));else{const ce=Object.assign({},this.requestParams,{headers:{Range:`bytes=${he.firstByte}-${he.lastByte}`}}),de=a.bu(ce,ee);if(d!==null){const _e=this._fetchQueuePerLayer.get(d)||[];_e.push(()=>{de.cancel(),F.cancel()}),this._fetchQueuePerLayer.has(d)||this._fetchQueuePerLayer.set(d,_e)}}}updateNeeded(l,d){return(!this.textureDescriptorPerLayer.get(l)||this.textureDescriptorPerLayer.get(l).band!==d||this.refreshedUponExpiration)&&this.state!=="errored"}updateTextureDescriptor(l,d,v){if(!this._mrt)return;const T=this._mrt.getLayer(l);if(!T||!T.hasBand(v)||!T.hasDataForBand(v))return;const{bytes:O,tileSize:M,buffer:R,offset:F,scale:q}=T.getBandView(v),H=M+2*R,re=new a.q({width:H,height:H},O),ee=this.texturePerLayer.get(d);ee&&ee instanceof a.T&&ee.update(re,{premultiply:!1}),this.textureDescriptorPerLayer.set(d,{layer:l,band:v,img:re,buffer:R,offset:F,tileSize:M,format:T.pixelFormat,mix:[q,256*q,65536*q,16777216*q]})}destroy(l=!1){if(super.destroy(l),delete this._mrt,!l)for(const d of this.texturePerLayer.values())d&&d instanceof a.T&&d.destroy();this.texturePerLayer.clear(),this.textureDescriptorPerLayer.clear(),this.fbo&&(this.fbo.destroy(),delete this.fbo),delete this.request,delete this.requestParams,this._isHeaderLoaded=!1}}class y0{constructor(l,d){this.max=l,this.onRemove=d,this.reset()}reset(){for(const l in this.data)for(const d of this.data[l])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(l,d,v){const T=l.wrapped().key;this.data[T]===void 0&&(this.data[T]=[]);const O={value:d,timeout:void 0};if(v!==void 0&&(O.timeout=setTimeout(()=>{this.remove(l,O)},v)),this.data[T].push(O),this.order.push(T),this.order.length>this.max){const M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const d=this.data[l].shift();return d.timeout&&clearTimeout(d.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),d.value}getByKey(l){const d=this.data[l];return d?d[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,d){if(!this.has(l))return this;const v=l.wrapped().key,T=d===void 0?0:this.data[v].indexOf(d),O=this.data[v][T];return this.data[v].splice(T,1),O.timeout&&clearTimeout(O.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(O.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(l){const d=[];for(const v in this.data)for(const T of this.data[v])l(T.value)||d.push(T);for(const v of d)this.remove(v.value.tileID,v)}}class zp{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,d,v){const T=String(d);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][T]=this.stateChanges[l][T]||{},Object.assign(this.stateChanges[l][T],v),this.deletedStates[l]===null){this.deletedStates[l]={};for(const O in this.state[l])O!==T&&(this.deletedStates[l][O]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][T]===null){this.deletedStates[l][T]={};for(const O in this.state[l][T])v[O]||(this.deletedStates[l][T][O]=null)}else for(const O in v)this.deletedStates[l]&&this.deletedStates[l][T]&&this.deletedStates[l][T][O]===null&&delete this.deletedStates[l][T][O]}removeFeatureState(l,d,v){if(this.deletedStates[l]===null)return;const T=String(d);if(this.deletedStates[l]=this.deletedStates[l]||{},v&&d!==void 0)this.deletedStates[l][T]!==null&&(this.deletedStates[l][T]=this.deletedStates[l][T]||{},this.deletedStates[l][T][v]=null);else if(d!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][T])for(v in this.deletedStates[l][T]={},this.stateChanges[l][T])this.deletedStates[l][T][v]=null;else this.deletedStates[l][T]=null;else this.deletedStates[l]=null}getState(l,d){const v=this.state[l]||{},T=this.stateChanges[l]||{},O=this.deletedStates[l];if(O===null)return{};if(d!==void 0){const R=String(d),F=Object.assign({},v[R],T[R]);if(O){const q=O[d];if(q===null)return{};for(const H in q)delete F[H]}return F}const M=Object.assign({},v,T);if(O)for(const R in O)delete M[R];return M}initializeTileState(l,d){l.refreshFeatureState(d)}coalesceChanges(l,d){const v={};for(const T in this.stateChanges){this.state[T]=this.state[T]||{};const O={};for(const M in this.stateChanges[T])this.state[T][M]||(this.state[T][M]={}),Object.assign(this.state[T][M],this.stateChanges[T][M]),O[M]=this.state[T][M];v[T]=O}for(const T in this.deletedStates){this.state[T]=this.state[T]||{};const O={};if(this.deletedStates[T]===null)for(const M in this.state[T])O[M]={},this.state[T][M]={};else for(const M in this.deletedStates[T]){if(this.deletedStates[T][M]===null)this.state[T][M]={};else if(this.state[T][M])for(const R of Object.keys(this.deletedStates[T][M]))delete this.state[T][M][R];O[M]=this.state[T][M]}v[T]=v[T]||{},Object.assign(v[T],O)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const T in l)l[T].refreshFeatureState(d)}}class eo extends a.E{constructor(l,d,v){super(),this.id=l,this._onlySymbols=v,d.on("data",T=>{T.dataType==="source"&&T.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&T.dataType==="source"&&T.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),d.on("error",()=>{this._sourceErrored=!0}),this._source=d,this._tiles={},this._cache=new y0(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new zp,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(l){this.map=l,this._minTileCacheSize=this._minTileCacheSize===void 0&&l?l._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&l?l._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles)if(!this._tiles[l].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(l,d){return l.isSymbolTile=this._onlySymbols,l.isExtraShadowCaster=this._shadowCasterTiles[l.tileID.key],this._source.loadTile(l,d)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l)}_abortTile(l){if(this._source.abortTile)return this._source.abortTile(l)}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const v=this._tiles[d];v.upload(l,this.map?this.map.painter:void 0),v.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(md).map(l=>l.key)}getRenderableIds(l,d){const v=[];for(const T in this._tiles)this._isIdRenderable(+T,l,d)&&v.push(this._tiles[T]);return l?v.sort((T,O)=>{const M=T.tileID,R=O.tileID,F=new a.P(M.canonical.x,M.canonical.y)._rotate(this.transform.angle),q=new a.P(R.canonical.x,R.canonical.y)._rotate(this.transform.angle);return M.overscaledZ-R.overscaledZ||q.y-F.y||q.x-F.x}).map(T=>T.tileID.key):v.map(T=>T.tileID).sort(md).map(T=>T.key)}hasRenderableParent(l){const d=this.findLoadedParent(l,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(l,d,v){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(d||!this._tiles[l].holdingForFade())&&(v||!this._shadowCasterTiles[l])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(+l,"reloading")}}_reloadTile(l,d){const v=this._tiles[l];v&&(v.state!=="loading"&&(v.state=d),this._loadTile(v,this._tileLoaded.bind(this,v,l,d)))}_tileLoaded(l,d,v,T,O){if(T){if(l.state="errored",T.status!==404)this._source.fire(new a.y(T,{tile:l}));else{if(this._source.fire(new a.z("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:l})),!(l.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const R=this.map.painter.terrain;this.update(this.transform,R.getScaledDemTileSize(),!0),R.resetTileLookupCache(this.id)}else this.update(this.transform)}return}l.timeAdded=a.o.now(),v==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(d,l),this._source.type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null);let M=new Map;O&&O.responseHeaders&&(M=O.responseHeaders),this._source.fire(new a.z("data",{dataType:"source",tile:l,coord:l.tileID,sourceCacheId:this.id,responseHeaders:M}))}_backfillDEM(l){const d=this.getRenderableIds();for(let T=0;T<d.length;T++){const O=d[T];if(l.neighboringTiles&&l.neighboringTiles[O]){const M=this.getTileByID(O);v(l,M),v(M,l)}}function v(T,O){if(!T.dem||T.dem.borderReady)return;T.needsHillshadePrepare=!0,T.needsDEMTextureUpload=!0;let M=O.tileID.canonical.x-T.tileID.canonical.x;const R=O.tileID.canonical.y-T.tileID.canonical.y,F=Math.pow(2,T.tileID.canonical.z),q=O.tileID.key;M===0&&R===0||Math.abs(R)>1||(Math.abs(M)>1&&(Math.abs(M+F)===1?M+=F:Math.abs(M-F)===1&&(M-=F)),O.dem&&T.dem&&(T.dem.backfillBorder(O.dem,M,R),T.neighboringTiles&&T.neighboringTiles[q]&&(T.neighboringTiles[q].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,d,v,T){for(const O in this._tiles){let M=this._tiles[O];if(T[O]||!M.hasData()||M.tileID.overscaledZ<=d||M.tileID.overscaledZ>v)continue;let R=M.tileID;for(;M&&M.tileID.overscaledZ>d+1;){const q=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[q.key],M&&M.hasData()&&(R=q)}let F=R;for(;F.overscaledZ>d;)if(F=F.scaledTo(F.overscaledZ-1),l[F.key]){T[R.key]=R;break}}}findLoadedParent(l,d){if(l.key in this._loadedParentTiles){const v=this._loadedParentTiles[l.key];return v&&v.tileID.overscaledZ>=d?v:null}for(let v=l.overscaledZ-1;v>=d;v--){const T=l.scaledTo(v),O=this._getLoadedTile(T);if(O)return O}}_getLoadedTile(l){const d=this._tiles[l.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?l.wrapped().key:l.canonical.key)}updateCacheSize(l,d){d=d||this._source.tileSize;const v=Math.ceil(l.width/d)+1,T=Math.ceil(l.height/d)+1,O=Math.floor(v*T*5),M=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,O):O,R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(R)}handleWrapJump(l){const d=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,d){const v={};for(const T in this._tiles){const O=this._tiles[T];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+d),v[O.tileID.key]=O}this._tiles=v;for(const T in this._timers)clearTimeout(this._timers[T]),delete this._timers[T];for(const T in this._tiles)this._setTileReloadTimer(+T,this._tiles[T])}}update(l,d,v,T,O){if(this.transform=l,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!v)return;this.updateCacheSize(l,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const M=this._source.type==="batched-model";let R,F=this._source.maxzoom;const q=this.map&&this.map.painter?this.map.painter._terrain:null;if(q&&q.sourceCache===this&&q.attenuationRange()){const ee=q.attenuationRange()[0],oe=Math.floor(ee)-Math.log2(q.getDemUpscale());F>oe&&(F=oe)}if(this.used||this.usedForTerrain){if(this._source.tileID)R=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(ee=>new a.aQ(ee.canonical.z,ee.wrap,ee.canonical.z,ee.canonical.x,ee.canonical.y));else if(this.tileCoverLift!==0){const ee=l.clone();ee.tileCoverLift=this.tileCoverLift,R=ee.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:F,roundZoom:this._source.roundZoom&&!v,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:M}),this._source.minzoom<=1&&l.projection.name==="globe"&&(R.push(new a.aQ(1,0,1,0,0)),R.push(new a.aQ(1,0,1,1,0)),R.push(new a.aQ(1,0,1,0,1)),R.push(new a.aQ(1,0,1,1,1)))}else if(R=l.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:F,roundZoom:this._source.roundZoom&&!v,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:M}),this._source.hasTile){const ee=this._source.hasTile.bind(this._source);R=R.filter(oe=>ee(oe))}}else R=[];if(R.length>0&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!hf(this._source.type)){const ee=l.coveringZoomLevel({tileSize:d||this._source.tileSize,roundZoom:this._source.roundZoom&&!v}),oe=Math.min(ee,this._source.maxzoom);if(M){const he=l.extendTileCover(R,oe);for(const ce of he)R.push(ce)}else if(O){const he=l.extendTileCoverToNearPlane(R,this.transform.getFrustum(oe),oe);for(const ce of he)R.push(ce)}else if(this.castsShadows&&T){const he=l.extendTileCover(R,oe,T,16);for(const ce of he)this._shadowCasterTiles[ce.key]=!0,R.push(ce)}}const H=this._updateRetainedTiles(R);if(hf(this._source.type)&&R.length!==0){const ee={},oe={},he=Object.keys(H);for(const de of he){const _e=H[de],Me=this._tiles[de];if(!Me||Me.fadeEndTime&&Me.fadeEndTime<=a.o.now())continue;const Ce=this.findLoadedParent(_e,Math.max(_e.overscaledZ-eo.maxOverzooming,this._source.minzoom));Ce&&(this._addTile(Ce.tileID),ee[Ce.tileID.key]=Ce.tileID),oe[de]=_e}const ce=R[R.length-1].overscaledZ;for(const de in this._tiles){const _e=this._tiles[de];if(H[de]||!_e.hasData())continue;let Me=_e.tileID;for(;Me.overscaledZ>ce;){Me=Me.scaledTo(Me.overscaledZ-1);const Ce=this._tiles[Me.key];if(Ce&&Ce.hasData()&&oe[Me.key]){H[de]=_e.tileID;break}}}for(const de in ee)H[de]||(this._coveredTiles[de]=!0,H[de]=ee[de])}for(const ee in H)this._tiles[ee].clearFadeHold();const re=a.bv(this._tiles,H);for(const ee of re){const oe=this._tiles[ee];oe.hasSymbolBuckets&&!oe.holdingForFade()?oe.setHoldDuration(this.map._fadeDuration):oe.hasSymbolBuckets&&!oe.symbolFadeFinished()||this._removeTile(+ee)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(+l)}_updateRetainedTiles(l){const d={};if(l.length===0)return d;const v={},T=l.reduce((q,H)=>Math.min(q,H.overscaledZ),1/0),O=l[0].overscaledZ,M=Math.max(O-eo.maxOverzooming,this._source.minzoom),R=Math.max(O+eo.maxUnderzooming,this._source.minzoom),F={};for(const q of l){const H=this._addTile(q);d[q.key]=q,H.hasData()||T<this._source.maxzoom&&(F[q.key]=q)}this._retainLoadedChildren(F,T,R,d);for(const q of l){let H=this._tiles[q.key];if(H.hasData())continue;if(q.canonical.z>=this._source.maxzoom){const ee=q.children(this._source.maxzoom)[0],oe=this.getTile(ee);if(oe&&oe.hasData()){d[ee.key]=ee;continue}}else{const ee=q.children(this._source.maxzoom);if(d[ee[0].key]&&d[ee[1].key]&&d[ee[2].key]&&d[ee[3].key])continue}let re=H.wasRequested();for(let ee=q.overscaledZ-1;ee>=M;--ee){const oe=q.scaledTo(ee);if(v[oe.key]||(v[oe.key]=!0,H=this.getTile(oe),!H&&re&&(H=this._addTile(oe)),H&&(d[oe.key]=oe,re=H.wasRequested(),H.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const d=[];let v,T=this._tiles[l].tileID;for(;T.overscaledZ>0;){if(T.key in this._loadedParentTiles){v=this._loadedParentTiles[T.key];break}d.push(T.key);const O=T.scaledTo(T.overscaledZ-1);if(v=this._getLoadedTile(O),v)break;T=O}for(const O of d)this._loadedParentTiles[O]=v}}_addTile(l){let d=this._tiles[l.key];if(d)return d.isExtraShadowCaster!==!0||this._shadowCasterTiles[l.key]||this._reloadTile(l.key,"reloading"),d;d=this._cache.getAndRemove(l),d&&(this._setTileReloadTimer(l.key,d),d.tileID=l,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,d)));const v=!!d;if(!v){const T=this.map?this.map.painter:null,O=this._source.tileSize*l.overscaleFactor();d=this._source.type==="raster-array"?new Lp(l,O,this.transform.tileZoom,T,this._isRaster):new ff(l,O,this.transform.tileZoom,T,this._isRaster,this._source.worldview),this._loadTile(d,this._tileLoaded.bind(this,d,l.key,d.state))}return d.uses++,this._tiles[l.key]=d,v||this._source.fire(new a.z("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(l,d){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const v=d.getExpiryTimeout();v&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},v))}_removeTile(l){const d=this._tiles[l];d&&(d.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),d.uses>0||(d.hasData()&&d.state!=="reloading"||d.state==="empty"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(+l);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(l,d,v){const T=[],O=this.transform;if(!O)return T;const M=O.projection.name==="globe",R=a.aF(O.center.lng);for(const F in this._tiles){const q=this._tiles[F];if(v&&q.clearQueryDebugViz(),q.holdingForFade())continue;let H;if(M){const re=q.tileID.canonical;if(re.z===0){const ee=[Math.abs(a.aA(R,...Fs(re,-1))-R),Math.abs(a.aA(R,...Fs(re,1))-R)];H=[0,2*ee.indexOf(Math.min(...ee))-1]}else{const ee=[Math.abs(a.aA(R,...Fs(re,-1))-R),Math.abs(a.aA(R,...Fs(re,0))-R),Math.abs(a.aA(R,...Fs(re,1))-R)];H=[ee.indexOf(Math.min(...ee))-1]}}else H=[0];for(const re of H){const ee=l.containsTile(q,O,d,re);ee&&T.push(ee)}}return T}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(l){return this._getRenderableCoordinates(l)}_getRenderableCoordinates(l,d){const v=this.getRenderableIds(l,d).map(O=>this._tiles[O].tileID),T=this.transform.projection.name==="globe";for(const O of v)O.projMatrix=this.transform.calculateProjMatrix(O.toUnwrapped()),O.expandedProjMatrix=T?this.transform.calculateProjMatrix(O.toUnwrapped(),!1,!0):O.projMatrix;return v}sortCoordinatesByDistance(l){const d=l.slice(),v=this.transform._camera.position,T=this.transform._camera.forward(),O={};for(const M of d){const R=1/(1<<M.canonical.z);O[M.key]=((M.canonical.x+.5)*R+M.wrap-v[0])*T[0]+((M.canonical.y+.5)*R-v[1])*T[1]-v[2]*T[2]}return d.sort((M,R)=>O[M.key]-O[R.key]),d}hasTransition(){if(this._source.hasTransition())return!0;if(hf(this._source.type))for(const l in this._tiles){const d=this._tiles[l];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=a.o.now())return!0}return!1}setFeatureState(l,d,v){this._state.updateState(l=l||"_geojsonTileLayer",d,v)}removeFeatureState(l,d,v){this._state.removeFeatureState(l=l||"_geojsonTileLayer",d,v)}getFeatureState(l,d){return this._state.getState(l=l||"_geojsonTileLayer",d)}setDependencies(l,d,v){const T=this._tiles[l];T&&T.setDependencies(d,v)}reloadTilesForDependencies(l,d){for(const v in this._tiles)this._tiles[v].hasDependency(l,d)&&this._reloadTile(+v,"reloading");this._cache.filter(v=>!v.hasDependency(l,d))}_preloadTiles(l,d){if(!this._sourceLoaded){const F=()=>{this._sourceLoaded&&(this._source.off("data",F),this._preloadTiles(l,d))};return void this._source.on("data",F)}const v=new Map,T=Array.isArray(l)?l:[l],O=this.map.painter.terrain,M=this.usedForTerrain&&O?O.getScaledDemTileSize():this._source.tileSize;for(const F of T){const q=F.coveringTiles({tileSize:M,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const H of q)v.set(H.key,H);this.usedForTerrain&&F.updateElevation(!1)}const R=Array.from(v.values());a.bw(R,(F,q)=>{const H=new ff(F,this._source.tileSize*F.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster,this._source.worldview);this._loadTile(H,re=>{this._source.type==="raster-dem"&&H.dem&&this._backfillDEM(H),q(re,H)})},d)}}function md(_,l){const d=Math.abs(2*_.wrap)-+(_.wrap<0),v=Math.abs(2*l.wrap)-+(l.wrap<0);return _.overscaledZ-l.overscaledZ||v-d||l.canonical.y-_.canonical.y||l.canonical.x-_.canonical.x}function hf(_){return _==="raster"||_==="image"||_==="video"||_==="custom"}function Fs(_,l){const d=1<<_.z;return[_.x/d+l,(_.x+1)/d+l]}eo.maxOverzooming=10,eo.maxUnderzooming=3;class gd{constructor(l){this.style=l,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const l=!1,d=!1;for(const v in this.style._mergedLayers){const T=this.style._mergedLayers[v];if(T.type==="fill-extrusion"||T.type==="building")this.layers.push({layer:T,visible:l,visibilityChanged:d});else if(T.type==="model"){const O=this.style.getLayerSource(T);O&&O.type==="batched-model"&&this.layers.push({layer:T,visible:l,visibilityChanged:d})}}}onNewFrame(l){this.layersGotHidden=!1;for(const d of this.layers){const v=d.layer;let T=!1;v.type==="fill-extrusion"?T=!v.isHidden(l)&&v.paint.get("fill-extrusion-opacity")>0:v.type==="building"?T=!v.isHidden(l)&&v.paint.get("building-opacity")>0:v.type==="model"&&(T=!v.isHidden(l)&&v.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!T&&d.visible,d.visible=T}}updateZOffset(l,d){this.currentBuildingBuckets=[];for(const T of this.layers){const O=T.layer,M=this.style.getLayerSourceCache(O);let R=1;O.type==="fill-extrusion"?R=T.visible?O.paint.get("fill-extrusion-vertical-scale"):0:O.type==="building"&&(R=T.visible?O.paint.get("building-vertical-scale"):0);let F=M?M.getTile(d):null;if(!F&&M)for(const q in M._tiles){const H=M._tiles[q];if(d.canonical.isChildOf(H.tileID.canonical)){F=H;break}}this.currentBuildingBuckets.push({bucket:F?F.getBucket(O):null,tileID:F?F.tileID:d,verticalScale:R})}l.hasAnyZOffset=!1;let v=!1;for(let T=0;T<l.symbolInstances.length;T++){const O=l.symbolInstances.get(T),M=O.zOffset,R=this._getHeightAtTileOffset(d,O.tileAnchorX,O.tileAnchorY);O.zOffset=R!==Number.NEGATIVE_INFINITY?R:M,v||M===O.zOffset||(v=!0),l.hasAnyZOffset||O.zOffset===0||(l.hasAnyZOffset=!0)}v&&(l.zOffsetBuffersNeedUpload=!0,l.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(l,d,v,T){let O=d,M=v;if(l.canonical.z!==T.canonical.z){const R=T.canonical,F=1/(1<<l.canonical.z-R.z);O=(d+l.canonical.x*a.al)*F-R.x*a.al|0,M=(v+l.canonical.y*a.al)*F-R.y*a.al|0}return{tileX:O,tileY:M}}_getHeightAtTileOffset(l,d,v){let T,O;for(let M=0;M<this.layers.length;++M){const R=this.layers[M].layer;if(R.type!=="fill-extrusion"&&R.type!=="building")continue;const{bucket:F,tileID:q,verticalScale:H}=this.currentBuildingBuckets[M];if(!F)continue;const{tileX:re,tileY:ee}=this._mapCoordToOverlappingTile(l,d,v,q),oe=F.getHeightAtTileCoord(re,ee);oe&&oe.height!==void 0&&(oe.hidden?T=oe.height:O=Math.max(oe.height*H,O||0))}if(O!==void 0)return O;for(let M=0;M<this.layers.length;++M){const R=this.layers[M];if(R.layer.type!=="model"||!R.visible)continue;const{bucket:F,tileID:q}=this.currentBuildingBuckets[M];if(!F)continue;const{tileX:H,tileY:re}=this._mapCoordToOverlappingTile(l,d,v,q),ee=F.getHeightAtTileCoord(H,re);if(ee&&!ee.hidden)return ee.height===void 0&&T!==void 0?Math.min(ee.maxHeight,T)*ee.verticalScale:ee.height?ee.height*ee.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function S_(_,l){const d={};for(const v in _)v!=="ref"&&(d[v]=_[v]);return a.bx.forEach(v=>{v in l&&(d[v]=l[v])}),d}function T_(_){_=_.slice();const l=Object.create(null);for(let d=0;d<_.length;d++)l[_[d].id]=_[d];for(let d=0;d<_.length;d++)"ref"in _[d]&&(_[d]=S_(_[d],l[_[d].ref]));return _}const Cr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport",addIconset:"addIconset",removeIconset:"removeIconset"};function df(_,l,d){d.push({command:Cr.addSource,args:[_,l[_]]})}function xg(_,l,d){l.push({command:Cr.removeSource,args:[_]}),d[_]=!0}function el(_,l,d,v){xg(_,d,v),df(_,l,d)}function sh(_,l,d){let v;for(v in _[d])if(_[d].hasOwnProperty(v)&&v!=="data"&&!a.by(_[d][v],l[d][v]))return!1;for(v in l[d])if(l[d].hasOwnProperty(v)&&v!=="data"&&!a.by(_[d][v],l[d][v]))return!1;return!0}function lh(_,l,d,v,T,O){let M;for(M in l=l||{},_=_||{})_.hasOwnProperty(M)&&(a.by(_[M],l[M])||d.push({command:O,args:[v,M,l[M],T]}));for(M in l)l.hasOwnProperty(M)&&!_.hasOwnProperty(M)&&(a.by(_[M],l[M])||d.push({command:O,args:[v,M,l[M],T]}))}function lu(_){return _.id}function wg(_,l){return _[l.id]=l,_}function Np(_,l,d){const v=l.createTileMatrix(_,_.worldSize,d.toUnwrapped());return a.aB(new Float32Array(16),_.projMatrix,v)}function _0(_,l,d){if(l.projection.name===d.projection.name)return _.projMatrix;const v=d.clone();return v.setProjection(l.projection),Np(v,l.getProjection(),_)}function Oc(_,l,d){return l.name===d.projection.name?_.projMatrix:Np(d,l,_)}class uu{constructor(l,d){this.reset(l,d)}reset(l,d){this.points=l||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.aA(l,0,1);let d=1,v=this._distances[d];const T=l*this.paddedLength+this.padding;for(;v<T&&d<this._distances.length;)v=this._distances[++d];const O=d-1,M=this._distances[O],R=v-M,F=R>0?(T-M)/R:0;return this.points[O].mult(1-F).add(this.points[d].mult(F))}}class Fp{constructor(l,d,v){const T=this.boxCells=[],O=this.circleCells=[];this.xCellCount=Math.ceil(l/v),this.yCellCount=Math.ceil(d/v);for(let M=0;M<this.xCellCount*this.yCellCount;M++)T.push([]),O.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=d,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,d,v,T,O){this._forEachCell(d,v,T,O,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(T),this.bboxes.push(O)}insertCircle(l,d,v,T){this._forEachCell(d-T,v-T,d+T,v+T,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(d),this.circles.push(v),this.circles.push(T)}_insertBoxCell(l,d,v,T,O,M){this.boxCells[O].push(M)}_insertCircleCell(l,d,v,T,O,M){this.circleCells[O].push(M)}_query(l,d,v,T,O,M){if(v<0||l>this.width||T<0||d>this.height)return!O&&[];const R=[];if(l<=0&&d<=0&&this.width<=v&&this.height<=T){if(O)return!0;for(let F=0;F<this.boxKeys.length;F++)R.push({key:this.boxKeys[F],x1:this.bboxes[4*F],y1:this.bboxes[4*F+1],x2:this.bboxes[4*F+2],y2:this.bboxes[4*F+3]});for(let F=0;F<this.circleKeys.length;F++){const q=this.circles[3*F],H=this.circles[3*F+1],re=this.circles[3*F+2];R.push({key:this.circleKeys[F],x1:q-re,y1:H-re,x2:q+re,y2:H+re})}return M?R.filter(M):R}return this._forEachCell(l,d,v,T,this._queryCell,R,{hitTest:O,seenUids:{box:{},circle:{}}},M),O?R.length>0:R}_queryCircle(l,d,v,T,O){const M=l-v,R=l+v,F=d-v,q=d+v;if(R<0||M>this.width||q<0||F>this.height)return!T&&[];const H=[];return this._forEachCell(M,F,R,q,this._queryCellCircle,H,{hitTest:T,circle:{x:l,y:d,radius:v},seenUids:{box:{},circle:{}}},O),T?H.length>0:H}query(l,d,v,T,O){return this._query(l,d,v,T,!1,O)}hitTest(l,d,v,T,O){return this._query(l,d,v,T,!0,O)}hitTestCircle(l,d,v,T){return this._queryCircle(l,d,v,!0,T)}_queryCell(l,d,v,T,O,M,R,F){const q=R.seenUids,H=this.boxCells[O];if(H!==null){const ee=this.bboxes;for(const oe of H)if(!q.box[oe]){q.box[oe]=!0;const he=4*oe;if(l<=ee[he+2]&&d<=ee[he+3]&&v>=ee[he+0]&&T>=ee[he+1]&&(!F||F(this.boxKeys[oe]))){if(R.hitTest)return M.push(!0),!0;M.push({key:this.boxKeys[oe],x1:ee[he],y1:ee[he+1],x2:ee[he+2],y2:ee[he+3]})}}}const re=this.circleCells[O];if(re!==null){const ee=this.circles;for(const oe of re)if(!q.circle[oe]){q.circle[oe]=!0;const he=3*oe;if(this._circleAndRectCollide(ee[he],ee[he+1],ee[he+2],l,d,v,T)&&(!F||F(this.circleKeys[oe]))){if(R.hitTest)return M.push(!0),!0;{const ce=ee[he],de=ee[he+1],_e=ee[he+2];M.push({key:this.circleKeys[oe],x1:ce-_e,y1:de-_e,x2:ce+_e,y2:de+_e})}}}}}_queryCellCircle(l,d,v,T,O,M,R,F){const q=R.circle,H=R.seenUids,re=this.boxCells[O];if(re!==null){const oe=this.bboxes;for(const he of re)if(!H.box[he]){H.box[he]=!0;const ce=4*he;if(this._circleAndRectCollide(q.x,q.y,q.radius,oe[ce+0],oe[ce+1],oe[ce+2],oe[ce+3])&&(!F||F(this.boxKeys[he])))return M.push(!0),!0}}const ee=this.circleCells[O];if(ee!==null){const oe=this.circles;for(const he of ee)if(!H.circle[he]){H.circle[he]=!0;const ce=3*he;if(this._circlesCollide(oe[ce],oe[ce+1],oe[ce+2],q.x,q.y,q.radius)&&(!F||F(this.circleKeys[he])))return M.push(!0),!0}}}_forEachCell(l,d,v,T,O,M,R,F){const q=this._convertToXCellCoord(l),H=this._convertToYCellCoord(d),re=this._convertToXCellCoord(v),ee=this._convertToYCellCoord(T);for(let oe=q;oe<=re;oe++)for(let he=H;he<=ee;he++)if(O.call(this,l,d,v,T,this.xCellCount*he+oe,M,R,F))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,d,v,T,O,M){const R=T-l,F=O-d,q=v+M;return q*q>R*R+F*F}_circleAndRectCollide(l,d,v,T,O,M,R){const F=(M-T)/2,q=Math.abs(l-(T+F));if(q>F+v)return!1;const H=(R-O)/2,re=Math.abs(d-(O+H));if(re>H+v)return!1;if(q<=F||re<=H)return!0;const ee=q-F,oe=re-H;return ee*ee+oe*oe<=v*v}}const Kx=Math.tan(85*Math.PI/180);function yd(_,l,d,v,T,O,M){const R=a.bC();if(d)if(O.name==="globe"){const F=a.bD(T,l);a.aB(R,R,F)}else{const F=a.bE([],M);R[0]=F[0],R[1]=F[1],R[4]=F[2],R[5]=F[3],v||a.bB(R,R,T.angle)}else a.aB(R,T.labelPlaneMatrix,_);return R}function pf(_,l,d,v,T,O,M){const R=yd(_,l,d,v,T,O,M);return O.name==="globe"&&d||(R[2]=R[6]=R[10]=R[14]=0),R}function ws(_,l,d,v,T,O,M){if(d){if(O.name==="globe"){const R=yd(_,l,d,v,T,O,M);return a.bl(R,R),a.aB(R,_,R),R}{const R=a.bz(_),F=a.bA([]);return F[0]=M[0],F[1]=M[1],F[4]=M[2],F[5]=M[3],a.aB(R,R,F),v||a.bB(R,R,-T.angle),R}}return T.glCoordMatrix}function cu(_,l,d,v){const T=[_,l,d,1];d?a.aC(T,T,v):A_(T,T,v);const O=T[3];return T[0]/=O,T[1]/=O,T[2]/=O,T}function E_(_,l){return Math.min(.5+_/l*.5,1.5)}function Qx(_,l){const d=_[0]/_[3],v=_[1]/_[3];return d>=-l[0]&&d<=l[0]&&v>=-l[1]&&v<=l[1]}function Qr(_,l,d,v,T,O,M,R,F,q,H=1){const re=d.transform,ee=v?_.textSizeData:_.iconSizeData,oe=a.bK(ee,d.transform.zoom,H),he=re.projection.name==="globe",ce=[256/d.width*2+1,256/d.height*2+1],de=v?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;de.clear();let _e=null;he&&(_e=v?_.text.globeExtVertexArray:_.icon.globeExtVertexArray);const Me=_.lineVertexArray,Ce=v?_.text.placedSymbolArray:_.icon.placedSymbolArray,Ae=d.transform.width/d.transform.height;let We,$e=!1;for(let Ge=0;Ge<Ce.length;Ge++){const Ne=Ce.get(Ge),{numGlyphs:Re,writingMode:Je}=Ne;if(Je!==a.bL.vertical||$e||We===a.bL.horizontal||($e=!0),We=Je,(Ne.hidden||Je===a.bL.vertical)&&!$e){os(Re,de);continue}$e=!1;const nt=new a.P(Ne.tileAnchorX,Ne.tileAnchorY),st=_.elevationType==="road",dt=!!re.elevation||st;let{x:ft,y:wt,z:It}=re.projection.projectTilePoint(nt.x,nt.y,q.canonical),pt=null;if(dt){const _n=st?_.getElevationFeatureForText(Ge):null;pt={getElevation:F,elevation:re.elevation,elevationFeature:_n};const[In,Un,Qn]=F(nt,re.elevation,_n);ft+=In,wt+=Un,It+=Qn}const et=[ft,wt,It,1];if(a.aC(et,et,l),!Qx(et,ce)){os(Re,de);continue}const At=et[3],gt=E_(d.transform.getCameraToCenterDistance(re.projection),At),Dt=a.bM(ee,oe,Ne),qt=M?Dt/gt:Dt*gt,tn=cu(ft,wt,It,T);if(tn[3]<=0){os(Re,de);continue}let Wt={};const Ht=a.an(_.layers[0].layout.get("text-max-angle")),xn=Math.cos(Ht),yn=M?null:pt,rn=Jx(Ne,qt,!1,R,l,T,O,_.glyphOffsetArray,Me,de,_e,tn,nt,Wt,Ae,yn,re.projection,q,M,xn);$e=rn.useVertical,yn&&rn.needsFlipping&&(Wt={}),(rn.notEnoughRoom||$e||rn.needsFlipping&&Jx(Ne,qt,!0,R,l,T,O,_.glyphOffsetArray,Me,de,_e,tn,nt,Wt,Ae,yn,re.projection,q,M,xn).notEnoughRoom)&&os(Re,de)}v?(_.text.dynamicLayoutVertexBuffer.updateData(de),_e&&_.text.globeExtVertexBuffer&&_.text.globeExtVertexBuffer.updateData(_e)):(_.icon.dynamicLayoutVertexBuffer.updateData(de),_e&&_.icon.globeExtVertexBuffer&&_.icon.globeExtVertexBuffer.updateData(_e))}function v0(_,l,d,v,T,O,M,R,F,q,H,re,ee,oe,he,ce,de){const{lineStartIndex:_e,glyphStartIndex:Me,segment:Ce}=R,Ae=Me+R.numGlyphs,We=_e+R.lineLength,$e=l.getoffsetX(Me),Ge=l.getoffsetX(Ae-1),Ne=_d(_*$e,d,v,T,O,M,Ce,_e,We,F,q,H,re,ee,!0,oe,he,ce,de);if(!Ne)return null;const Re=_d(_*Ge,d,v,T,O,M,Ce,_e,We,F,q,H,re,ee,!0,oe,he,ce,de);return Re?{first:Ne,last:Re}:null}function b0(_,l,d,v){return _===a.bL.horizontal&&Math.abs(v)>Math.abs(d)?{useVertical:!0}:_===a.bL.vertical?v>0?{needsFlipping:!0}:null:l!==0&&(function(T,O){return T===0||Math.abs(O/T)>Kx})(d,v)?l===1?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function Jx(_,l,d,v,T,O,M,R,F,q,H,re,ee,oe,he,ce,de,_e,Me,Ce){const Ae=l/24,We=_.lineOffsetX*Ae,$e=_.lineOffsetY*Ae,{lineStartIndex:Ge,glyphStartIndex:Ne,numGlyphs:Re,segment:Je,writingMode:nt,flipState:st}=_,dt=Ge+_.lineLength,ft=wt=>{if(H){const[At,gt,Dt]=wt.up,qt=q.length;a.bN(H,qt+0,At,gt,Dt),a.bN(H,qt+1,At,gt,Dt),a.bN(H,qt+2,At,gt,Dt),a.bN(H,qt+3,At,gt,Dt)}const[It,pt,et]=wt.point;a.bO(q,It,pt,et,wt.angle)};if(Re>1){const wt=v0(Ae,R,We,$e,d,re,ee,_,F,O,oe,ce,!1,de,_e,Me,Ce);if(!wt)return{notEnoughRoom:!0};if(v&&!d){let[It,pt,et]=wt.first.point,[At,gt,Dt]=wt.last.point;[It,pt]=cu(It,pt,et,M),[At,gt]=cu(At,gt,Dt,M);const qt=b0(nt,st,(At-It)*he,gt-pt);if(_.flipState=qt&&qt.needsFlipping?1:2,qt)return qt}ft(wt.first);for(let It=Ne+1;It<Ne+Re-1;It++){const pt=_d(Ae*R.getoffsetX(It),We,$e,d,re,ee,Je,Ge,dt,F,O,oe,ce,!1,!1,de,_e,Me,Ce);if(!pt)return q.length-=4*(It-Ne),{notEnoughRoom:!0};ft(pt)}ft(wt.last)}else{if(v&&!d){const It=cu(ee.x,ee.y,0,T),pt=Ge+Je+1,et=new a.P(F.getx(pt),F.gety(pt)),At=cu(et.x,et.y,0,T),gt=At[3]>0?At:x0(ee,et,It,1,T,void 0,de,_e.canonical),Dt=b0(nt,st,(gt[0]-It[0])*he,gt[1]-It[1]);if(_.flipState=Dt&&Dt.needsFlipping?1:2,Dt)return Dt}const wt=_d(Ae*R.getoffsetX(Ne),We,$e,d,re,ee,Je,Ge,dt,F,O,oe,ce,!1,!1,de,_e,Me,Ce);if(!wt)return{notEnoughRoom:!0};ft(wt)}return{}}function Vn(_,l,d,v,T){const{x:O,y:M,z:R}=v.projectTilePoint(_.x,_.y,l);if(!T)return cu(O,M,R,d);const[F,q,H]=T.getElevation(_,T.elevation,T.elevationFeature);return cu(O+F,M+q,R+H,d)}function x0(_,l,d,v,T,O,M,R){const F=Vn(_.sub(l)._unit()._add(_),R,T,M,O);return a.av(F,d,F),a.aw(F,F),a.bH(F,d,F,v)}function _d(_,l,d,v,T,O,M,R,F,q,H,re,ee,oe,he,ce,de,_e,Me){const Ce=v?_-l:_+l;let Ae=Ce>0?1:-1,We=0;v&&(Ae*=-1,We=Math.PI),Ae<0&&(We+=Math.PI);let $e=R+M+(Ae>0?0:1)|0,Ge=T,Ne=T,Re=0,Je=0;const nt=Math.abs(Ce),st=[],dt=[];let ft=O,wt=ft,It=a.bF([]);const pt=()=>x0(wt,ft,Ne,nt-Re+1,H,ee,ce,de.canonical);for(;Re+Je<=nt;){if($e+=Ae,$e<R||$e>=F)return null;if(Ne=Ge,wt=ft,st.push(Ne),oe&&dt.push(wt),ft=new a.P(q.getx($e),q.gety($e)),Ge=re[$e],!Ge){const yn=Vn(ft,de.canonical,H,ce,ee);Ge=yn[3]>0?re[$e]=yn:pt()}Re+=Je;const Ht=a.av([],Ge,Ne),xn=a.bG(Ne,Ge);if(d&&xn>0&&Je>0&&a.bJ(It,Ht)/(Je*xn)<Me)return null;Je=xn,It=Ht}he&&ee&&(re[$e]&&(Ge=pt(),Je=a.bG(Ne,Ge),It=a.av([],Ge,Ne)),re[$e]=Ge);const et=(nt-Re)/Je,At=ft.sub(wt)._mult(et)._add(wt),gt=a.bH([],Ne,It,et);let Dt=[0,0,1],qt=It[0],tn=It[1];if(_e&&(Dt=ce.upVector(de.canonical,At.x,At.y),Dt[0]!==0||Dt[1]!==0||Dt[2]!==1)){const Ht=[Dt[2],0,-Dt[0]],xn=a.bI([],Dt,Ht);a.aw(Ht,Ht),a.aw(xn,xn),qt=a.bJ(It,Ht),tn=a.bJ(It,xn)}if(d){const Ht=a.bI([],Dt,It);a.aw(Ht,Ht),a.bH(gt,gt,Ht,d*Ae)}const Wt=We+Math.atan2(tn,qt);return st.push(gt),oe&&dt.push(At),{point:gt,angle:Wt,path:st,tilePath:dt,up:Dt}}function os(_,l){const d=l.length,v=d+4*_;l.resize(v),l.float32.fill(-1/0,4*d,4*v)}function A_(_,l,d){const v=l[0],T=l[1];return _[0]=d[0]*v+d[4]*T+d[12],_[1]=d[1]*v+d[5]*T+d[13],_[3]=d[3]*v+d[7]*T+d[15],_}const tl=100;class Mn{constructor(l,d,v=new Fp(l.width+200,l.height+200,25),T=new Fp(l.width+200,l.height+200,25)){this.transform=l,this.grid=v,this.ignoredGrid=T,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+tl,this.screenBottomBoundary=l.height+tl,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=d}placeCollisionBox(l,d,v,T,O,M,R,F,q,H,re){let ee=v.projectedAnchorX,oe=v.projectedAnchorY,he=v.projectedAnchorZ;const ce=v.tileAnchorX,de=v.tileAnchorY,_e=v.elevation,Me=v.tileID,Ce=l.getProjection();if(_e&&Me){const[dt,ft,wt]=Ce.upVector(Me.canonical,v.tileAnchorX,v.tileAnchorY),It=Ce.upVectorScale(Me.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;ee+=dt*_e*It,oe+=ft*_e*It,he+=wt*_e*It}const Ae=l.projection.name==="globe",We=l.projection.name==="globe"?a.aj(this.transform.zoom):0;if(Me&&Ae&&We<1&&!M){const dt=1<<Me.canonical.z,ft=a.bP(ce,de);a.bQ(ft,ft,1/a.al),a.bR(ft,ft,a.bP(Me.canonical.x,Me.canonical.y)),a.bQ(ft,ft,1/dt),a.bS(ft,ft,a.bP(T[0],T[1])),ft[0]=a.bT(ft[0],-.5,.5),a.bQ(ft,ft,a.al);const wt=a.bU(ft[0],ft[1],a.al/(2*Math.PI),1);a.aC(wt,wt,O),ee=a.ak(ee,wt[0],We),oe=a.ak(oe,wt[1],We),he=a.ak(he,wt[2],We)}const $e=this.projectAndGetPerspectiveRatio(H,ee,oe,he,v.tileID,Ce.name==="globe"||!!_e||this.transform.pitch>0,Ce),Ge=q*$e.perspectiveRatio,Ne=(v.x1*d+R.x-v.padding)*Ge+$e.point.x,Re=(v.y1*d+R.y-v.padding)*Ge+$e.point.y,Je=(v.x2*d+R.x+v.padding)*Ge+$e.point.x,nt=(v.y2*d+R.y+v.padding)*Ge+$e.point.y,st=$e.perspectiveRatio<=.55||$e.occluded;return!this.isInsideGrid(Ne,Re,Je,nt)||!F&&this.grid.hitTest(Ne,Re,Je,nt,re)||st?{box:[],offscreen:!1,occluded:$e.occluded}:{box:[Ne,Re,Je,nt],offscreen:this.isOffscreen(Ne,Re,Je,nt),occluded:!1}}placeCollisionCircles(l,d,v,T,O,M,R,F,q,H,re,ee,oe,he,ce,de){const _e=[],Me=this.transform.elevation,Ce=l.getProjection(),Ae=l.elevationType==="road",We=!!Me||Ae,$e=a.bV.getAtTileOffsetFunc(de,this.transform.center.lat,this.transform.worldSize,Ce),Ge=new a.P(v.tileAnchorX,v.tileAnchorY),Ne=new a.P(v.tileAnchorX,v.tileAnchorY);let{x:Re,y:Je,z:nt}=Ce.projectTilePoint(Ne.x,Ne.y,de.canonical),st=null;if(We){const xn=Ae?l.getElevationFeatureForText(T):null;st={getElevation:$e,elevation:Me,elevationFeature:xn};const[yn,rn,_n]=$e(Ge,Me,xn);Re+=yn,Je+=rn,nt+=_n}const dt=Ce.name==="globe",ft=this.projectAndGetPerspectiveRatio(F,Re,Je,nt,de,dt||!!Me||this.transform.pitch>0,Ce),{perspectiveRatio:wt}=ft,It=(ee?R/wt:R*wt)/a.bY,pt=cu(Re,Je,nt,q),et=v.lineOffsetX*It,At=v.lineOffsetY*It,gt=a.an(l.layers[0].layout.get("text-max-angle")),Dt=Math.cos(gt),qt=ft.signedDistanceFromCamera>0?v0(It,M,et,At,Ae&&v.flipState===1,pt,Ne,v,O,q,{},We&&!ee?st:null,ee&&We,Ce,de,ee,Dt):null;let tn=!1,Wt=!1,Ht=!0;if(qt&&!ft.occluded){const xn=.5*he*wt+ce,yn=new a.P(-100,-100),rn=new a.P(this.screenRightBoundary,this.screenBottomBoundary),_n=new uu,{first:In,last:Un}=qt,Qn=In.path.length;let yr=[];for(let Yn=Qn-1;Yn>=1;Yn--)yr.push(In.path[Yn]);for(let Yn=1;Yn<Un.path.length;Yn++)yr.push(Un.path[Yn]);const $n=2.5*xn;H&&(yr=yr.map(([Yn,jr,Mr],ei)=>(We&&!dt&&(Mr=$e(ei<Qn-1?In.tilePath[Qn-1-ei]:Un.tilePath[ei-Qn+2],Me,st.elevationFeature)[2]),cu(Yn,jr,Mr,H))),yr.some(Yn=>Yn[3]<=0)&&(yr=[]));let Jn=[];if(yr.length>0){let Yn=1/0,jr=-1/0,Mr=1/0,ei=-1/0;for(const wr of yr)Yn=Math.min(Yn,wr[0]),Mr=Math.min(Mr,wr[1]),jr=Math.max(jr,wr[0]),ei=Math.max(ei,wr[1]);jr>=yn.x&&Yn<=rn.x&&ei>=yn.y&&Mr<=rn.y&&(Jn=[yr.map(wr=>new a.P(wr[0],wr[1]))],(Yn<yn.x||jr>rn.x||Mr<yn.y||ei>rn.y)&&(Jn=a.bW(Jn,yn.x,yn.y,rn.x,rn.y)))}for(const Yn of Jn){_n.reset(Yn,.25*xn);let jr=0;jr=_n.length<=.5*xn?1:Math.ceil(_n.paddedLength/$n)+1;for(let Mr=0;Mr<jr;Mr++){const ei=Mr/Math.max(jr-1,1),wr=_n.lerp(ei),er=wr.x+tl,Rr=wr.y+tl;_e.push(er,Rr,xn,0);const Pi=er-xn,ti=Rr-xn,qr=er+xn,Kn=Rr+xn;if(Ht=Ht&&this.isOffscreen(Pi,ti,qr,Kn),Wt=Wt||this.isInsideGrid(Pi,ti,qr,Kn),!d&&this.grid.hitTestCircle(er,Rr,xn,oe)&&(tn=!0,!re))return{circles:[],offscreen:!1,collisionDetected:tn,occluded:!1}}}}return{circles:!re&&tn||!Wt?[]:_e,offscreen:Ht,collisionDetected:tn,occluded:ft.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let v=1/0,T=1/0,O=-1/0,M=-1/0;for(const H of l){const re=new a.P(H.x+tl,H.y+tl);v=Math.min(v,re.x),T=Math.min(T,re.y),O=Math.max(O,re.x),M=Math.max(M,re.y),d.push(re)}const R=this.grid.query(v,T,O,M).concat(this.ignoredGrid.query(v,T,O,M)),F={},q={};for(const H of R){const re=H.key;if(F[re.bucketInstanceId]===void 0&&(F[re.bucketInstanceId]={}),F[re.bucketInstanceId][re.featureIndex])continue;const ee=[new a.P(H.x1,H.y1),new a.P(H.x2,H.y1),new a.P(H.x2,H.y2),new a.P(H.x1,H.y2)];a.bX(d,ee)&&(F[re.bucketInstanceId][re.featureIndex]=!0,q[re.bucketInstanceId]===void 0&&(q[re.bucketInstanceId]=[]),q[re.bucketInstanceId].push(re.featureIndex))}return q}insertCollisionBox(l,d,v,T,O){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:T,collisionGroupID:O},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,d,v,T,O){const M=d?this.ignoredGrid:this.grid,R={bucketInstanceId:v,featureIndex:T,collisionGroupID:O};for(let F=0;F<l.length;F+=4)M.insertCircle(R,l[F],l[F+1],l[F+2])}projectAndGetPerspectiveRatio(l,d,v,T,O,M,R){const F=[d,v,T,1];let q=!1;T||this.transform.pitch>0?(a.aC(F,F,l),this.fogState&&O&&R.name!=="globe"&&(q=(function(ee,oe,he,ce,de,_e){const Me=_e.calculateFogTileMatrix(de),Ce=[oe,he,ce];return a.af(Ce,Ce,Me),Dn(ee,a.ag(Ce),_e.pitch,_e._fov)})(this.fogState,d,v,T,O.toUnwrapped(),this.transform)>.9)):A_(F,F,l);const H=F[3];return{point:new a.P((F[0]/H+1)/2*this.transform.width+tl,(-F[1]/H+1)/2*this.transform.height+tl),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(R)/H*.5,1.5),signedDistanceFromCamera:H,occluded:M&&F[2]>H||q}}isOffscreen(l,d,v,T){return v<tl||l>=this.screenRightBoundary||T<tl||d>this.screenBottomBoundary}isInsideGrid(l,d,v,T){return v>=0&&l<this.gridRightBoundary&&T>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const l=a.bA([]);return a.br(l,l,[-100,-100,0]),l}}class Yr{constructor(l,d,v,T){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?d:-d))):T&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class Vr{constructor(l,d,v,T,O,M=!1){this.text=new Yr(l?l.text:null,d,v,O),this.icon=new Yr(l?l.icon:null,d,T,O),this.clipped=M}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Bs{constructor(l,d,v,T=!1){this.text=l,this.icon=d,this.skipFade=v,this.clipped=T}}class Bp{constructor(){this.invProjMatrix=a.bC(),this.viewportMatrix=a.bC(),this.circles=[]}}class ii{constructor(l,d,v,T,O){this.bucketInstanceId=l,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=T,this.tileID=O}}class O_{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const d=++this.maxGroupID;this.collisionGroups[l]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[l]}}function jp(_,l,d,v,T){const{horizontalAlign:O,verticalAlign:M}=a.c1(_),R=-(O-.5)*l,F=-(M-.5)*d,q=a.c2(_,v);return new a.P(R+q[0]*T,F+q[1]*T)}function vd(_,l,d,v,T){const O=new a.P(_,l);return d&&O._rotate(v?T:-T),O}class Ss{constructor(l,d,v,T,O,M){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new Mn(this.transform,O),this.buildingIndex=M,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new O_(v),this.collisionCircleArrays={},this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={},this.lastReplacementSourceUpdateTime=0}getBucketParts(l,d,v,T,O=1){const M=v.getBucket(d),R=v.latestFeatureIndex;if(!M||!R||d.fqid!==M.layerIds[0])return;const F=M.layers[0].layout,q=M.layers[0].paint,H=v.collisionBoxArray,re=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),ee=v.tileSize/a.al,oe=v.tileID.toUnwrapped();this.transform.setProjection(M.projection);const he=(ce=v.tileID,de=M.getProjection(),_e=this.transform,de.name===this.projection?_e.calculateProjMatrix(ce.toUnwrapped()):Np(_e,de,ce));var ce,de,_e;const Me=F.get("text-pitch-alignment")==="map",Ce=F.get("text-rotation-alignment")==="map";d.compileFilter(d.options);const Ae=d.dynamicFilter(),We=d.dynamicFilterNeedsFeature(),$e=this.transform.calculatePixelsToTileUnitsMatrix(v),Ge=pf(he,v.tileID.canonical,Me,Ce,this.transform,M.getProjection(),$e);let Ne=null;const Re=M.getProjection().createInversionMatrix(this.transform,v.tileID.canonical);if(Me){const et=ws(he,v.tileID.canonical,Me,Ce,this.transform,M.getProjection(),$e);Ne=a.aB([],this.transform.labelPlaneMatrix,et)}let Je=null;Ae&&v.latestFeatureIndex&&(Je={unwrappedTileID:oe,dynamicFilter:Ae,dynamicFilterNeedsFeature:We}),this.retainedQueryData[M.bucketInstanceId]=new ii(M.bucketInstanceId,R,M.sourceLayerIndex,M.index,v.tileID);const[nt,st]=M.layers[0].layout.get("text-size-scale-range"),dt=a.aA(O,nt,st),[ft,wt]=F.get("icon-size-scale-range"),It=a.aA(O,ft,wt),pt={bucket:M,layout:F,paint:q,posMatrix:he,invMatrix:Re,mercatorCenter:[a.aF(this.transform.center.lng),a.aJ(this.transform.center.lat)],textLabelPlaneMatrix:Ge,labelToScreenMatrix:Ne,clippingData:Je,scale:re,textPixelRatio:ee,holdingForFade:v.holdingForFade(),collisionBoxArray:H,partiallyEvaluatedTextSize:a.bK(M.textSizeData,this.transform.zoom,dt),partiallyEvaluatedIconSize:a.bK(M.iconSizeData,this.transform.zoom,It),collisionGroup:this.collisionGroups.get(M.sourceID),latestFeatureIndex:v.latestFeatureIndex};if(T)for(const et of M.sortKeyRanges){const{sortKey:At,symbolInstanceStart:gt,symbolInstanceEnd:Dt}=et;l.push({sortKey:At,symbolInstanceStart:gt,symbolInstanceEnd:Dt,parameters:pt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:pt})}attemptAnchorPlacement(l,d,v,T,O,M,R,F,q,H,re,ee,oe,he,ce,de,_e,Me,Ce,Ae,We){const{textOffset0:$e,textOffset1:Ge,crossTileID:Ne}=ce,Re=[$e,Ge],Je=jp(l,M,R,Re,F),nt=this.collisionIndex.placeCollisionBox(_e,F,d,v,T,O,vd(Je.x,Je.y,q,H,this.transform.angle),he,re,ee,oe.predicate);if(Ce){const st=_e.getSymbolInstanceIconSize(We,this.transform.zoom,ce.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(_e,st,Ce,v,T,O,vd(Je.x,Je.y,q,H,this.transform.angle),he,re,ee,oe.predicate).box.length===0)return}if(nt.box.length>0){let st;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ne]&&this.prevPlacement.placements[Ne]&&this.prevPlacement.placements[Ne].text&&(st=this.prevPlacement.variableOffsets[Ne].anchor),this.variableOffsets[Ne]={textOffset:Re,width:M,height:R,anchor:l,textScale:F,prevAnchor:st},this.markUsedJustification(_e,l,ce,Me),_e.allowVerticalPlacement&&(this.markUsedOrientation(_e,Me,ce),this.placedOrientations[Ne]=Me),{shift:Je,placedGlyphBoxes:nt}}}placeLayerBucketPart(l,d,v,T,O=1){const{bucket:M,layout:R,paint:F,posMatrix:q,textLabelPlaneMatrix:H,labelToScreenMatrix:re,clippingData:ee,textPixelRatio:oe,mercatorCenter:he,invMatrix:ce,holdingForFade:de,collisionBoxArray:_e,partiallyEvaluatedTextSize:Me,partiallyEvaluatedIconSize:Ce,collisionGroup:Ae,latestFeatureIndex:We}=l.parameters,$e=R.get("text-optional"),Ge=R.get("icon-optional"),Ne=R.get("text-allow-overlap"),Re=R.get("icon-allow-overlap"),Je=R.get("text-rotation-alignment")==="map",nt=R.get("icon-rotation-alignment")==="map",st=R.get("text-pitch-alignment")==="map",dt=F.get("symbol-z-offset"),ft=R.get("symbol-elevation-reference")==="sea",wt=R.get("symbol-placement"),[It,pt]=R.get("text-size-scale-range"),[et,At]=R.get("icon-size-scale-range"),gt=a.aA(O,It,pt),Dt=a.aA(O,et,At),qt=R.get("text-variable-anchor"),tn=Je&&wt!=="point",Wt=nt&&wt!=="point",Ht=qt&&M.hasTextData(),xn=M.hasIconTextFit()&&Ht&&M.hasIconData();this.transform.setProjection(M.projection);const yn=Ht||tn,rn=Wt||xn;let _n=Ne&&(Re||!M.hasIconData()||Ge),In=Re&&(Ne||!M.hasTextData()||$e);const Un=!dt.isConstant();!M.collisionArrays&&_e&&M.deserializeCollisionBoxes(_e),v&&T&&M.updateCollisionDebugBuffers(this.transform.zoom,_e,gt,Dt);const Qn=($n,Jn,Yn)=>{const{crossTileID:jr,numVerticalGlyphVertices:Mr}=$n;let ei=null;if(ee&&ee.dynamicFilterNeedsFeature||Un){const $i=this.retainedQueryData[M.bucketInstanceId];ei=We.loadFeature({featureIndex:$n.featureIndex,bucketIndex:$i.bucketIndex,sourceLayerIndex:$i.sourceLayerIndex,layoutVertexArrayOffset:0});const ba=ei.properties?ei.properties.worldview:null;if(M.localizable&&M.worldview&&typeof ba=="string")if(ba==="all")ei.properties.$localized=!0;else{if(!ba.split(",").includes(M.worldview))return;ei.properties.$localized=!0,ei.properties.worldview=M.worldview}}if(ee&&!(0,ee.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch,worldview:M.worldview},ei,this.retainedQueryData[M.bucketInstanceId].tileID.canonical,new a.P($n.tileAnchorX,$n.tileAnchorY),this.transform.calculateDistanceTileData(ee.unwrappedTileID)))return this.placements[jr]=new Bs(!1,!1,!1,!0),void d.add(jr);const wr=dt.evaluate(ei,{});if(d.has(jr))return;if(de)return void(this.placements[jr]=new Bs(!1,!1,!1));let er=!1,Rr=!1,Pi=!0,ti=!1,qr=!1,Kn=null,tr={box:null,offscreen:null,occluded:null},yi={box:null},Ji=null,ai=null,_i=null,cs=0,Uo=0,co=0;Yn.textFeatureIndex?cs=Yn.textFeatureIndex:$n.useRuntimeCollisionCircles&&(cs=$n.featureIndex),Yn.verticalTextFeatureIndex&&(Uo=Yn.verticalTextFeatureIndex);const Hr=M.elevationFeatures?M.elevationFeatures[$n.elevationFeatureIndex]:void 0,ul=$i=>{$i.tileID=this.retainedQueryData[M.bucketInstanceId].tileID;const ba=this.transform.elevation;$i.elevation=ft?wr:wr+a.bV.getAtTileOffset($i.tileID,new a.P($i.tileAnchorX,$i.tileAnchorY),ba,Hr),$i.elevation+=$n.zOffset},$o=Yn.textBox;if($o){ul($o);const $i=Si=>{let Ia=a.bL.horizontal;if(M.allowVerticalPlacement&&!Si&&this.prevPlacement){const no=this.prevPlacement.placedOrientations[jr];no&&(this.placedOrientations[jr]=no,Ia=no,this.markUsedOrientation(M,Ia,$n))}return Ia},ba=(Si,Ia)=>{if(M.allowVerticalPlacement&&Mr>0&&Yn.verticalTextBox){for(const no of M.writingModes)if(no===a.bL.vertical?(tr=Ia(),yi=tr):tr=Si(),tr&&tr.box&&tr.box.length)break}else tr=Si()};if(qt){let Si=qt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[jr]){const Wi=this.prevPlacement.variableOffsets[jr];Si.indexOf(Wi.anchor)>0&&(Si=Si.filter(cl=>cl!==Wi.anchor),Si.unshift(Wi.anchor))}const Ia=(Wi,cl,wm)=>{const rc=M.getSymbolInstanceTextSize(Me,$n,this.transform.zoom,Jn),Zd=(Wi.x2-Wi.x1)*rc+2*Wi.padding,Kd=(Wi.y2-Wi.y1)*rc+2*Wi.padding,fl=$n.hasIconTextFit&&!Re?cl:null;fl&&ul(fl);let Xl={box:[],offscreen:!1,occluded:!1};const ic=Ne?2*Si.length:Si.length;for(let Pl=0;Pl<ic;++Pl){const Ai=this.attemptAnchorPlacement(Si[Pl%Si.length],Wi,he,ce,yn,Zd,Kd,rc,Je,st,oe,q,Ae,Pl>=Si.length,$n,Jn,M,wm,fl,Me,Ce);if(Ai&&(Xl=Ai.placedGlyphBoxes,Xl&&Xl.box&&Xl.box.length)){er=!0,Kn=Ai.shift;break}}return Xl};ba(()=>Ia($o,Yn.iconBox,a.bL.horizontal),()=>{const Wi=Yn.verticalTextBox;return Wi&&ul(Wi),M.allowVerticalPlacement&&!(tr&&tr.box&&tr.box.length)&&Mr>0&&Wi?Ia(Wi,Yn.verticalIconBox,a.bL.vertical):{box:null,offscreen:null,occluded:null}}),tr&&(er=tr.box,Pi=tr.offscreen,ti=tr.occluded);const no=$i(!(!tr||!tr.box));if(!er&&this.prevPlacement){const Wi=this.prevPlacement.variableOffsets[jr];Wi&&(this.variableOffsets[jr]=Wi,this.markUsedJustification(M,Wi.anchor,$n,no))}}else{const Si=(Ia,no)=>{const Wi=M.getSymbolInstanceTextSize(Me,$n,this.transform.zoom,Jn),cl=this.collisionIndex.placeCollisionBox(M,Wi,Ia,he,ce,yn,new a.P(0,0),Ne,oe,q,Ae.predicate);return cl&&cl.box&&cl.box.length&&(this.markUsedOrientation(M,no,$n),this.placedOrientations[jr]=no),cl};ba(()=>Si($o,a.bL.horizontal),()=>{const Ia=Yn.verticalTextBox;return M.allowVerticalPlacement&&Mr>0&&Ia?(ul(Ia),Si(Ia,a.bL.vertical)):{box:null,offscreen:null,occluded:null}}),$i(!!(tr&&tr.box&&tr.box.length))}}if(Ji=tr,er=Ji&&Ji.box&&Ji.box.length>0,Pi=Ji&&Ji.offscreen,ti=Ji&&Ji.occluded,$n.useRuntimeCollisionCircles){const $i=$n.centerJustifiedTextSymbolIndex>=0?$n.centerJustifiedTextSymbolIndex:$n.verticalPlacedTextSymbolIndex,ba=M.text.placedSymbolArray.get($i),Si=a.bM(M.textSizeData,Me,ba),Ia=R.get("text-padding");ai=this.collisionIndex.placeCollisionCircles(M,Ne,ba,$i,M.lineVertexArray,M.glyphOffsetArray,Si,q,H,re,v,st,Ae.predicate,$n.collisionCircleDiameter*Si/a.bY,Ia,this.retainedQueryData[M.bucketInstanceId].tileID),er=Ne||ai.circles.length>0&&!ai.collisionDetected,Pi=Pi&&ai.offscreen,ti=ai.occluded}if(Yn.iconFeatureIndex&&(co=Yn.iconFeatureIndex),Yn.iconBox){const $i=ba=>{ul(ba);const Si=$n.hasIconTextFit&&Kn?vd(Kn.x,Kn.y,Je,st,this.transform.angle):new a.P(0,0),Ia=M.getSymbolInstanceIconSize(Ce,this.transform.zoom,$n.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(M,Ia,ba,he,ce,rn,Si,Re,oe,q,Ae.predicate)};yi&&yi.box&&yi.box.length&&Yn.verticalIconBox?(_i=$i(Yn.verticalIconBox),Rr=_i.box.length>0):(_i=$i(Yn.iconBox),Rr=_i.box.length>0),Pi=Pi&&_i.offscreen,qr=_i.occluded}const Zo=$e||$n.numHorizontalGlyphVertices===0&&Mr===0,Il=Ge||$n.numIconVertices===0;if(Zo||Il?Il?Zo||(Rr=Rr&&er):er=Rr&&er:Rr=er=Rr&&er,er&&Ji&&Ji.box&&this.collisionIndex.insertCollisionBox(Ji.box,R.get("text-ignore-placement"),M.bucketInstanceId,yi&&yi.box&&Uo?Uo:cs,Ae.ID),Rr&&_i&&this.collisionIndex.insertCollisionBox(_i.box,R.get("icon-ignore-placement"),M.bucketInstanceId,co,Ae.ID),ai&&(er&&this.collisionIndex.insertCollisionCircles(ai.circles,R.get("text-ignore-placement"),M.bucketInstanceId,cs,Ae.ID),v)){const $i=M.bucketInstanceId;let ba=this.collisionCircleArrays[$i];ba===void 0&&(ba=this.collisionCircleArrays[$i]=new Bp);for(let Si=0;Si<ai.circles.length;Si+=4)ba.circles.push(ai.circles[Si+0]),ba.circles.push(ai.circles[Si+1]),ba.circles.push(ai.circles[Si+2]),ba.circles.push(ai.collisionDetected?1:0)}const qs=M.projection.name!=="globe";_n=_n&&(qs||!ti),In=In&&(qs||!qr),this.placements[jr]=new Bs(er||_n,Rr||In,Pi||M.justReloaded),d.add(jr)},yr=this.retainedQueryData[M.bucketInstanceId].tileID;if(M.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(M,yr),M.elevationType==="road"&&M.updateRoadElevation(yr.canonical),M.updateZOffset(),M.sortFeaturesByY){const $n=M.getSortedSymbolIndexes(this.transform.angle);for(let Jn=$n.length-1;Jn>=0;--Jn){const Yn=$n[Jn];Qn(M.symbolInstances.get(Yn),Yn,M.collisionArrays[Yn])}M.hasAnyZOffset&&a.w(`${M.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(M.hasAnyZOffset){const $n=M.getSortedIndexesByZOffset();for(let Jn=0;Jn<$n.length;++Jn){const Yn=$n[Jn];Qn(M.symbolInstances.get(Yn),Yn,M.collisionArrays[Yn])}}else for(let $n=l.symbolInstanceStart;$n<l.symbolInstanceEnd;$n++)Qn(M.symbolInstances.get($n),$n,M.collisionArrays[$n]);if(v&&M.bucketInstanceId in this.collisionCircleArrays){const $n=this.collisionCircleArrays[M.bucketInstanceId];a.bl($n.invProjMatrix,q),$n.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1}markUsedJustification(l,d,v,T){const{leftJustifiedTextSymbolIndex:O,centerJustifiedTextSymbolIndex:M,rightJustifiedTextSymbolIndex:R,verticalPlacedTextSymbolIndex:F,crossTileID:q}=v,H=a.c3(d),re=T===a.bL.vertical?F:H==="left"?O:H==="center"?M:H==="right"?R:-1;O>=0&&(l.text.placedSymbolArray.get(O).crossTileID=re>=0&&O!==re?0:q),M>=0&&(l.text.placedSymbolArray.get(M).crossTileID=re>=0&&M!==re?0:q),R>=0&&(l.text.placedSymbolArray.get(R).crossTileID=re>=0&&R!==re?0:q),F>=0&&(l.text.placedSymbolArray.get(F).crossTileID=re>=0&&F!==re?0:q)}markUsedOrientation(l,d,v){const T=d===a.bL.horizontal||d===a.bL.horizontalOnly?d:0,O=d===a.bL.vertical?d:0,{leftJustifiedTextSymbolIndex:M,centerJustifiedTextSymbolIndex:R,rightJustifiedTextSymbolIndex:F,verticalPlacedTextSymbolIndex:q}=v,H=l.text.placedSymbolArray;M>=0&&(H.get(M).placedOrientation=T),R>=0&&(H.get(R).placedOrientation=T),F>=0&&(H.get(F).placedOrientation=T),q>=0&&(H.get(q).placedOrientation=O)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const T=d?d.symbolFadeChange(l):1,O=d?d.opacities:{},M=d?d.variableOffsets:{},R=d?d.placedOrientations:{};for(const F in this.placements){const q=this.placements[F],H=O[F];H?(this.opacities[F]=new Vr(H,T,q.text,q.icon,null,q.clipped),v=v||q.text!==H.text.placed||q.icon!==H.icon.placed):(this.opacities[F]=new Vr(null,T,q.text,q.icon,q.skipFade,q.clipped),v=v||q.text||q.icon)}for(const F in O){const q=O[F];if(!this.opacities[F]){const H=new Vr(q,T,!1,!1);H.isHidden()||(this.opacities[F]=H,v=v||q.text.placed||q.icon.placed)}}for(const F in M)this.variableOffsets[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.variableOffsets[F]=M[F]);for(const F in R)this.placedOrientations[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.placedOrientations[F]=R[F]);v?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:l)}updateLayerOpacities(l,d,v,T){T&&(this.lastReplacementSourceUpdateTime=T.updateTime);const O=new Set;for(const M of d){const R=M.getBucket(l);R&&M.latestFeatureIndex&&l.fqid===R.layerIds[0]&&(this.updateBucketOpacities(R,O,M,M.collisionBoxArray,v,T,M.tileID,l.scope),R.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(R,M.tileID),R.elevationType==="road"&&R.updateRoadElevation(M.tileID.canonical),R.updateZOffset())}}updateBucketOpacities(l,d,v,T,O,M,R,F){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const q=l.layers[0].layout,H=l.layers[0].paint,re=!!l.layers[0].dynamicFilter(),ee=new Vr(null,0,!1,!1,!0),oe=q.get("text-allow-overlap"),he=q.get("icon-allow-overlap"),ce=q.get("text-variable-anchor"),de=q.get("text-rotation-alignment")==="map",_e=q.get("text-pitch-alignment")==="map",Me=H.get("symbol-z-offset"),Ce=q.get("symbol-elevation-reference")==="sea",Ae=!Me.isConstant(),We=new Vr(null,0,oe&&(he||!l.hasIconData()||q.get("icon-optional")),he&&(oe||!l.hasTextData()||q.get("text-optional")),!0);!l.collisionArrays&&T&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(T);const $e=(Ne,Re,Je)=>{for(let nt=0;nt<Re/4;nt++)Ne.opacityVertexArray.emplaceBack(Je)};let Ge=0;M&&l.updateReplacement(R,M);for(let Ne=0;Ne<l.symbolInstances.length;Ne++){const Re=l.symbolInstances.get(Ne),{numHorizontalGlyphVertices:Je,numVerticalGlyphVertices:nt,crossTileID:st,numIconVertices:dt,tileAnchorX:ft,tileAnchorY:wt}=Re;let It=null;const pt=this.retainedQueryData[l.bucketInstanceId];Ae&&Re&&pt&&(It=v.latestFeatureIndex.loadFeature({featureIndex:Re.featureIndex,bucketIndex:pt.bucketIndex,sourceLayerIndex:pt.sourceLayerIndex,layoutVertexArrayOffset:0}));const et=Me.evaluate(It,{}),At=d.has(st);let gt=this.opacities[st];At?gt=ee:gt||(gt=We,this.opacities[st]=gt),d.add(st);const Dt=Je>0||nt>0,qt=dt>0,tn=this.placedOrientations[st],Wt=tn===a.bL.vertical,Ht=tn===a.bL.horizontal||tn===a.bL.horizontalOnly;!Dt&&!qt||gt.isHidden()||Ge++;let xn=!1;if((Dt||qt)&&M)for(const yn of l.activeReplacements){if(a.bZ(yn,O,a.b_.Symbol,F)||yn.min.x>ft||ft>yn.max.x||yn.min.y>wt||wt>yn.max.y)continue;const rn=a.b$(ft,wt,R.canonical,yn.footprintTileId.canonical);if(xn=a.c0(rn,yn.footprint),xn)break}if(Dt){const yn=xn?Bo:ss(gt.text);$e(l.text,Je,Wt?Bo:yn),$e(l.text,nt,Ht?Bo:yn);const rn=gt.text.isHidden(),{leftJustifiedTextSymbolIndex:_n,centerJustifiedTextSymbolIndex:In,rightJustifiedTextSymbolIndex:Un,verticalPlacedTextSymbolIndex:Qn}=Re,yr=l.text.placedSymbolArray,$n=rn||Wt?1:0;_n>=0&&(yr.get(_n).hidden=$n),In>=0&&(yr.get(In).hidden=$n),Un>=0&&(yr.get(Un).hidden=$n),Qn>=0&&(yr.get(Qn).hidden=rn||Ht?1:0);const Jn=this.variableOffsets[st];Jn&&this.markUsedJustification(l,Jn.anchor,Re,tn);const Yn=this.placedOrientations[st];Yn&&(this.markUsedJustification(l,"left",Re,Yn),this.markUsedOrientation(l,Yn,Re))}if(qt){const yn=xn?Bo:ss(gt.icon),{placedIconSymbolIndex:rn,verticalPlacedIconSymbolIndex:_n}=Re,In=l.icon.placedSymbolArray,Un=gt.icon.isHidden()?1:0;rn>=0&&($e(l.icon,dt,Wt?Bo:yn),In.get(rn).hidden=Un),_n>=0&&($e(l.icon,Re.numVerticalIconVertices,Ht?Bo:yn),In.get(_n).hidden=Un)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const yn=l.collisionArrays[Ne];if(yn){let rn=new a.P(0,0),_n=!0;if(yn.textBox||yn.verticalTextBox){if(ce){const Un=this.variableOffsets[st];Un?(rn=jp(Un.anchor,Un.width,Un.height,Un.textOffset,Un.textScale),de&&rn._rotate(_e?this.transform.angle:-this.transform.angle)):_n=!1}re&&(_n=!gt.clipped),yn.textBox&&Oa(l.textCollisionBox.collisionVertexArray,gt.text.placed,!_n||Wt,et,Ce,rn.x,rn.y),yn.verticalTextBox&&Oa(l.textCollisionBox.collisionVertexArray,gt.text.placed,!_n||Ht,et,Ce,rn.x,rn.y)}const In=_n&&!!(!Ht&&yn.verticalIconBox);yn.iconBox&&Oa(l.iconCollisionBox.collisionVertexArray,gt.icon.placed,In,et,Ce,Re.hasIconTextFit?rn.x:0,Re.hasIconTextFit?rn.y:0),yn.verticalIconBox&&Oa(l.iconCollisionBox.collisionVertexArray,gt.icon.placed,!In,et,Ce,Re.hasIconTextFit?rn.x:0,Re.hasIconTextFit?rn.y:0)}}}if(l.fullyClipped=Ge===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const Ne=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=Ne.invProjMatrix,l.placementViewportMatrix=Ne.viewportMatrix,l.collisionCircleArray=Ne.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,d){const v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>l}isStale(){return this.stale}setStale(){this.stale=!0}}function Oa(_,l,d,v,T,O,M){_.emplaceBack(l?1:0,d?1:0,O||0,M||0,v,T?1:0),_.emplaceBack(l?1:0,d?1:0,O||0,M||0,v,T?1:0),_.emplaceBack(l?1:0,d?1:0,O||0,M||0,v,T?1:0),_.emplaceBack(l?1:0,d?1:0,O||0,M||0,v,T?1:0)}const w0=Math.pow(2,25),mf=Math.pow(2,24),S0=Math.pow(2,17),Up=Math.pow(2,16),Sg=Math.pow(2,9),C_=Math.pow(2,8),Tg=Math.pow(2,1);function ss(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const l=_.placed?1:0,d=Math.floor(127*_.opacity);return d*w0+l*mf+d*S0+l*Up+d*Sg+l*C_+d*Tg+l}const Bo=0;class nl{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,d,v,T,O,M){const R=this._bucketParts;for(;this._currentTileIndex<l.length;)if(d.getBucketParts(R,T,l[this._currentTileIndex],this._sortAcrossTiles,M),this._currentTileIndex++,O())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,R.sort((F,q)=>F.sortKey-q.sortKey));this._currentPartIndex<R.length;){const F=R[this._currentPartIndex];if(d.placeLayerBucketPart(F,this._seenCrossTileIDs,v,F.symbolInstanceStart===0,M),this._currentPartIndex++,O())return!0}return!1}}class T0{startNewPlacement(l,d,v,T,O,M,R,F){return this.placement=new Ss(l,T,O,M,R,F),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=!1,this._showCollisionBoxes=v,this._fadeDuration=T,this._done=!1,this._inProgressLayer=null,this}requestFullPlacement(){this._forceFullPlacement=!0}isFullPlacementRequested(){return this._forceFullPlacement}setStale(){this.placement&&(this.placement.stale=!0)}isStale(){return!!this.placement&&this.placement.stale}isDone(){return this._done}continuePlacement(l,d,v,T,O){const M=a.o.now(),R=()=>{const F=a.o.now()-M;return!this.isFullPlacementRequested()&&this._fadeDuration!==0&&F>2};for(;this._currentPlacementIndex>=0;){const F=d[l[this._currentPlacementIndex]],q=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&F.visibility!=="none"&&(!F.minzoom||F.minzoom<=q)&&(!F.maxzoom||F.maxzoom>q)){const H=F,re=H.layout.get("symbol-z-elevate"),ee=H.layout.get("symbol-sort-key").constantOr(1)!==void 0,oe=H.layout.get("symbol-z-order"),he=oe==="viewport-y"||oe==="auto"&&!(oe!=="viewport-y"&&ee),ce=H.layout.get("text-allow-overlap")||H.layout.get("icon-allow-overlap")||H.layout.get("text-ignore-placement")||H.layout.get("icon-ignore-placement"),de=he&&ce,_e=this._inProgressLayer=this._inProgressLayer||new nl(H),Me=a.B(F.source,F.scope);if(_e.continuePlacement(re||de?T[Me]:v[Me],this.placement,this._showCollisionBoxes,F,R,O))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._forceFullPlacement=!1,this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const uh=512/a.al/2;class to{constructor(l,d,v){this.tileID=l,this.bucketInstanceId=v,this.index=new a.c4(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const T=l.canonical.x*a.al,O=l.canonical.y*a.al;for(let M=0;M<d.length;M++){const{key:R,crossTileID:F,tileAnchorX:q,tileAnchorY:H}=d.get(M),re=Math.floor((T+q)*uh),ee=Math.floor((O+H)*uh);this.index.add(re,ee),this.keys.push(R),this.crossTileIDs.push(F)}this.index.finish()}findMatches(l,d,v){const T=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),O=uh/Math.pow(2,d.canonical.z-this.tileID.canonical.z),M=d.canonical.x*a.al,R=d.canonical.y*a.al;for(let F=0;F<l.length;F++){const q=l.get(F);if(q.crossTileID)continue;const{key:H,tileAnchorX:re,tileAnchorY:ee}=q,oe=Math.floor((M+re)*O),he=Math.floor((R+ee)*O),ce=this.index.range(oe-T,he-T,oe+T,he+T).sort((de,_e)=>de-_e);for(const de of ce){const _e=this.crossTileIDs[de];if(this.keys[de]===H&&!v.has(_e)){v.add(_e),q.crossTileID=_e;break}}}}}class ju{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ul{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const d=Math.round((l-this.lng)/360);if(d!==0)for(const v in this.indexes){const T=this.indexes[v],O={};for(const M in T){const R=T[M];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+d),O[R.tileID.key]=R}this.indexes[v]=O}this.lng=l}addBucket(l,d,v){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let O=0;O<d.symbolInstances.length;O++)d.symbolInstances.get(O).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const T=this.usedCrossTileIDs[l.overscaledZ];for(const O in this.indexes){const M=this.indexes[O];if(Number(O)>l.overscaledZ)for(const R in M){const F=M[R];F.tileID.isChildOf(l)&&F.findMatches(d.symbolInstances,l,T)}else{const R=M[l.scaledTo(Number(O)).key];R&&R.findMatches(d.symbolInstances,l,T)}}for(let O=0;O<d.symbolInstances.length;O++){const M=d.symbolInstances.get(O);M.crossTileID||(M.crossTileID=v.generate(),T.add(M.crossTileID))}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new to(l,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(l,d){for(const v of d.crossTileIDs)this.usedCrossTileIDs[l].delete(v)}removeStaleBuckets(l){let d=!1;for(const v in this.indexes){const T=this.indexes[v];for(const O in T)l[T[O].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,T[O]),delete T[O],d=!0)}return d}}class Ca{constructor(){this.layerIndexes={},this.crossTileIDs=new ju,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,d,v,T){let O=this.layerIndexes[l.fqid];O===void 0&&(O=this.layerIndexes[l.fqid]=new Ul);let M=!1;const R={};T.name!=="globe"&&O.handleWrapJump(v);for(const F of d){const q=F.getBucket(l);q&&l.fqid===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),O.addBucket(F.tileID,q,this.crossTileIDs)&&(M=!0),R[q.bucketInstanceId]=!0)}return O.removeStaleBuckets(R)&&(M=!0),M}pruneUnusedLayers(l){const d={};l.forEach(v=>{d[v]=!0});for(const v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}const ch=771;class Gn{constructor(l,d,v,T){this.blendFunction=l,this.blendColor=d.toNonPremultipliedRenderColor(null),this.mask=v,this.blendEquation=T}}Gn.Replace=[1,0,1,0],Gn.disabled=new Gn(Gn.Replace,a.ao.transparent,[!1,!1,!1,!1]),Gn.unblended=new Gn(Gn.Replace,a.ao.transparent,[!0,!0,!0,!0]),Gn.alphaBlended=new Gn([1,ch,1,ch],a.ao.transparent,[!0,!0,!0,!0]),Gn.alphaBlendedNonPremultiplied=new Gn([770,ch,770,ch],a.ao.transparent,[!0,!0,!0,!0]),Gn.multiply=new Gn([774,0,774,0],a.ao.transparent,[!0,!0,!0,!0]),Gn.additive=new Gn([1,1,1,1],a.ao.transparent,[!0,!0,!0,!0]);class On{constructor(l,d,v){this.func=l,this.mask=d,this.range=v}}On.ReadOnly=!1,On.ReadWrite=!0,On.disabled=new On(519,On.ReadOnly,[0,1]);const bd=7680;class qn{constructor(l,d,v,T,O,M){this.test=l,this.ref=d,this.mask=v,this.fail=T,this.depthFail=O,this.pass=M}}qn.disabled=new qn({func:519,mask:0},0,0,bd,bd,bd);const $p=1029,Vp=2305;class jn{constructor(l,d,v){this.enable=l,this.mode=d,this.frontFace=v}}function M_(_,l){const d=a.ca(_,3);a.cc(_,l),a.cg(_,3,d)}function E0(_,l){const d=a.c7([]);return a.c8(d,d,-l),a.c9(d,d,-_),d}function Cc(_,l){const d=[_[0],_[1],0],v=[l[0],l[1],0];if(a.ag(d)>=1e-15){const M=a.aw([],d);a.c5(v,M,a.bJ(v,M)),l[0]=v[0],l[1]=v[1]}const T=a.bI([],l,_);if(a.c6(T)<1e-15)return null;const O=Math.atan2(-T[1],T[0]);return E0(Math.atan2(Math.sqrt(_[0]*_[0]+_[1]*_[1]),-_[2]),O)}jn.disabled=new jn(!1,$p,Vp),jn.backCCW=new jn(!0,$p,Vp),jn.backCW=new jn(!0,$p,2304),jn.frontCW=new jn(!0,1028,2304),jn.frontCCW=new jn(!0,1028,Vp);class e1{constructor(l,d){this.position=l,this.orientation=d}get position(){return this._position}set position(l){if(l){const d=l instanceof a.ae?l:new a.ae(l[0],l[1],l[2]);this._renderWorldCopies&&(d.x=a.bT(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(l,d,v){if(this.orientation=null,!this.position)return;const T=this.position,O=v||(this._elevation?this._elevation.getAtPointOrZero(a.ae.fromLngLat(l)):0),M=a.ae.fromLngLat(l,O),R=[M.x-T.x,M.y-T.y,M.z-T.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=Cc(R,d)}setPitchBearing(l,d){this.orientation=E0(a.an(l),a.an(-d))}}class qp{constructor(l,d){this._transform=a.bA([]),this.orientation=d,this.position=l}get mercatorPosition(){const l=this.position;return new a.ae(l[0],l[1],l[2])}get position(){const l=a.ca(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var d;l&&a.cg(this._transform,3,[(d=l)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||a.c7([]),l&&M_(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,d){this._orientation=E0(l,d),M_(this._transform,this._orientation)}forward(){const l=a.ca(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=a.ca(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=a.ca(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,d){const v=new Float64Array(16);return a.bl(v,this.getWorldToCamera(l,d)),v}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(l,d,v){const T=this.position;a.c5(T,T,-l);const O=new Float64Array(16);return a.bq(O,[v,v,v]),a.br(O,O,T),O[10]*=d,O}getWorldToCamera(l,d){const v=new Float64Array(16),T=new Float64Array(4),O=this.position;return a.cb(T,this._orientation),a.c5(O,O,-l),a.cc(v,T),a.br(v,v,O),v[1]*=-1,v[5]*=-1,v[9]*=-1,v[13]*=-1,v[8]*=d,v[9]*=d,v[10]*=d,v[11]*=d,v}getCameraToClipPerspective(l,d,v,T){const O=new Float64Array(16);return a.cd(O,l,d,v,T),O}getCameraToClipOrthographic(l,d,v,T,O,M){const R=new Float64Array(16);return a.ce(R,l,d,v,T,O,M),R}getDistanceToElevation(l,d=!1){const v=l===0?0:a.cf(l,d?a.a$(this.position[1]):this.position[1]),T=this.forward();return(v-this.position[2])/T[2]}clone(){return new qp([...this.position],[...this.orientation])}}const rl=(_,l)=>({u_matrix:_,u_ground_shadow_factor:l});class il{constructor(l=0,d=0,v=0,T=0){if(isNaN(l)||l<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(T)||T<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=d,this.left=v,this.right=T}interpolate(l,d,v){return d.top!=null&&l.top!=null&&(this.top=a.ak(l.top,d.top,v)),d.bottom!=null&&l.bottom!=null&&(this.bottom=a.ak(l.bottom,d.bottom,v)),d.left!=null&&l.left!=null&&(this.left=a.ak(l.left,d.left,v)),d.right!=null&&l.right!=null&&(this.right=a.ak(l.right,d.right,v)),this}getCenter(l,d){const v=a.aA((this.left+l-this.right)/2,0,l),T=a.aA((this.top+d-this.bottom)/2,0,d);return new a.P(v,T)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new il(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Tl=15;class Eg{constructor(l,d,v,T,O,M,R){this.tileSize=512,this._renderWorldCopies=O===void 0||O,this._minZoom=l||0,this._maxZoom=d||22,this._minPitch=v??0,this._maxPitch=T??60,this.setProjection(M),this.setMaxBounds(R),this.width=0,this.height=0,this._center=new a.aT(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new il,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new qp,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const l=new Eg(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l._allowWorldUnderZoom=this._allowWorldUnderZoom,l}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<Tl}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(l,d=!1){const v=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||v)&&this._updateCameraOnTerrain(),(l||v)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return a.aH(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=a.cm(this.projectionOptions);const v=this.getProjection(),T=!a.by(d,v);return T&&this._calcMatrices(),this.mercatorFromTransition=!1,T}setOrthographicProjectionAtLowPitch(l){return this._orthographicProjectionAtLowPitch!==l&&(this._orthographicProjectionAtLowPitch=l,this._calcMatrices(),!0)}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=a.cm({name:"mercator"});const d=l!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return a.cf(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return a.bT(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const d=-l*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=a.cn(),a.co(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const d=a.aA(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=a.an(l),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const d=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(l){this._tileCoverLift!==l&&(this._tileCoverLift=l)}_updateCameraOnTerrain(){const l=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,d=this.elevation&&l===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||l===Number.NEGATIVE_INFINITY&&(!d||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const v=this._elevation;d||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&v.exaggeration()&&this._centerAltitudeValidForExaggeration!==v.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*v.exaggeration(),this._centerAltitudeValidForExaggeration=v.exaggeration()):(this._centerAltitude=l||0,this._centerAltitudeValidForExaggeration=v.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){if(this._centerAltitudeValidForExaggeration===void 0)return;const l=Math.max(0,(this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize);this._seaLevelZoom=this._zoomFromMercatorZ(l)}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],v=this.horizonLineFromTop();let T=0,O=0;for(let M=0;M<d.length;M++){const R=new a.P(d[M][0]*this.width,v+d[M][1]*(this.height-v)),F=l.pointCoordinate(R);if(!F)continue;const q=1/Math.hypot(F[0]-this._camera.position[0],F[1]-this._camera.position[1]);T+=F[3]*q,O+=q}return O===0?NaN:T/O}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),v=this.pixelsPerMeter/this.worldSize*d,T=this._mercatorZfromZoom(l),O=this._mercatorZfromZoom(this._maxZoom),M=Math.max(T-v,O);this._setZoom(this._zoomFromMercatorZ(M))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}equals(l){const d=this.elevation,v=l.elevation,T=d!=null!=(v!=null)||d&&v&&d.exaggeration()!==v.exaggeration();return this.width===l.width&&this.height===l.height&&this.center.lng===l.center.lng&&this.center.lat===l.center.lat&&this.zoom===l.zoom&&this.bearing===l.bearing&&this.pitch===l.pitch&&this.fov===l.fov&&this.projection.name===l.projection.name&&this._edgeInsets.equals(l.padding)&&!T}computeZoomRelativeTo(l){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let v;v=l.z<this._camera.position[2]?[d.x,d.y,d.z]:[l.x,l.y,l.z];const T=a.ag(a.av([],this._camera.position,v));return a.aA(this._zoomFromMercatorZ(T),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let d=!1;if(l.orientation&&!a.cp(l.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(l.orientation)),l.position){const v=[l.position.x,l.position.y,l.position.z];a.cq(v,this._camera.position)||(this._setCameraPosition(v),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,d=new e1;return d.position=new a.ae(l[0],l[1],l[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(l){if(!a.cr(l))return!1;a.cs(l,l);const d=a.ct([],[0,0,-1],l),v=a.ct([],[0,-1,0],l);if(v[2]<0)return!1;const T=Cc(d,v);return!!T&&(this._camera.orientation=T,!0)}_setCameraPosition(l){const d=this.zoomScale(this.minZoom)*this.tileSize,v=this.zoomScale(this.maxZoom)*this.tileSize,T=this.cameraToCenterDistance;l[2]=a.aA(l[2],T/v,T/d),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,d,v){this._unmodified=!1,this._edgeInsets.interpolate(l,d,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const d=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(l){const d=[new a.cu(0,l)];if(this.renderWorldCopies){const v=this.pointCoordinate(new a.P(0,0)),T=this.pointCoordinate(new a.P(this.width,0)),O=this.pointCoordinate(new a.P(this.width,this.height)),M=this.pointCoordinate(new a.P(0,this.height)),R=Math.floor(Math.min(v.x,T.x,O.x,M.x)),F=Math.floor(Math.max(v.x,T.x,O.x,M.x)),q=1;for(let H=R-q;H<=F+q;H++)H!==0&&d.push(new a.cu(H,l))}return d}isLODDisabled(l){return(!l||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(l,d,v,T){let O=[];const M=v!=null,R=!M;if(R&&this.zoom<d||M&&v[0]===0&&v[1]===0)return O;const F=new Set,q=(re,ee,oe,he,ce)=>{const de=a.cY(ee,re,oe,he,ce);F.has(de)||(O.push(new a.aQ(re,ee,oe,he,ce)),F.add(de))};for(let re=0;re<l.length;re++){const ee=l[re];if(R&&ee.canonical.z!==d||M&&T!==void 0&&T>ee.canonical.z)continue;const oe=ee.canonical,he=ee.overscaledZ,ce=ee.wrap,de=1<<oe.z,_e=oe.x+1<de,Me=oe.x>0,Ce=oe.y+1<de,Ae=oe.y>0,We=ee.wrap-(Me?0:1),$e=ee.wrap+(_e?0:1),Ge=Me?oe.x-1:de-1,Ne=_e?oe.x+1:0;if(M)v[0]<0?(q(he,$e,oe.z,Ne,oe.y),v[1]<0&&Ce&&(q(he,ce,oe.z,oe.x,oe.y+1),q(he,$e,oe.z,Ne,oe.y+1)),v[1]>0&&Ae&&(q(he,ce,oe.z,oe.x,oe.y-1),q(he,$e,oe.z,Ne,oe.y-1))):v[0]>0?(q(he,We,oe.z,Ge,oe.y),v[1]<0&&Ce&&(q(he,ce,oe.z,oe.x,oe.y+1),q(he,We,oe.z,Ge,oe.y+1)),v[1]>0&&Ae&&(q(he,ce,oe.z,oe.x,oe.y-1),q(he,We,oe.z,Ge,oe.y-1))):v[1]<0&&Ce?q(he,ce,oe.z,oe.x,oe.y+1):Ae&&q(he,ce,oe.z,oe.x,oe.y-1);else{const Re=ee.visibleQuadrants;1&Re&&(q(he,We,oe.z,Ge,oe.y),Ae&&(q(he,ce,oe.z,oe.x,oe.y-1),q(he,We,oe.z,Ge,oe.y-1))),2&Re&&(q(he,$e,oe.z,Ne,oe.y),Ae&&(q(he,ce,oe.z,oe.x,oe.y-1),q(he,$e,oe.z,Ne,oe.y-1))),4&Re&&(q(he,We,oe.z,Ge,oe.y),Ce&&(q(he,ce,oe.z,oe.x,oe.y+1),q(he,We,oe.z,Ge,oe.y+1))),8&Re&&(q(he,$e,oe.z,Ne,oe.y),Ce&&(q(he,ce,oe.z,oe.x,oe.y+1),q(he,$e,oe.z,Ne,oe.y+1)))}}const H=[];for(const re of O)O.some(ee=>re.isChildOf(ee))||H.push(re);if(O=H.filter(re=>!l.some(ee=>!!(re.overscaledZ<d&&ee.isChildOf(re))||re.equals(ee)||re.isChildOf(ee))),R){const re=1<<d,ee=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),oe=[re*ee.x,re*ee.y],he=4,ce=he*he;O=O.filter(de=>{const _e=de.canonical.x+.5-oe[0],Me=de.canonical.y+.5-oe[1];return _e*_e+Me*Me<ce})}return O}extendTileCoverToNearPlane(l,d,v){const T=[],O=new Set;for(const Me of l)O.add(Me.key);const M=(Me,Ce,Ae,We,$e)=>{const Ge=a.cY(Ce,Me,Ae,We,$e);O.has(Ge)||(T.push(new a.aQ(Me,Ce,Ae,We,$e)),O.add(Ge))},R=l.reduce((Me,Ce)=>Math.max(Me,Ce.overscaledZ),v),F=1<<v,q=[new a.P(0,0),new a.P(a.al,0),new a.P(a.al,a.al),new a.P(0,a.al)],H=new a.P(0,0),re=new a.P(0,0),ee=(Me,Ce)=>{const Ae=Math.floor(Me[0]),We=Math.floor(Me[1]),$e=(Me[0]-Ae)*a.al,Ge=(Me[1]-We)*a.al,Ne=Math.floor(Ce[0]),Re=Math.floor(Ce[1]),Je=(Ce[0]-Ne)*a.al,nt=(Ce[1]-Re)*a.al;for(let st=-1;st<=1;st++){const dt=Ae+st;if(!(dt<0||dt>=F)){H.x=$e-st*a.al,re.x=Je-(dt-Ne)*a.al;for(let ft=-1;ft<=1;ft++){const wt=We+ft;H.y=Ge-ft*a.al,re.y=nt-(wt-Re)*a.al,a.cZ(H,re,q)&&M(R,0,v,dt,wt)}}}},oe=d.points,he=oe[a.cv],ce=oe[a.cw],de=this._projectToGround(he,oe[a.cx]),_e=this._projectToGround(ce,oe[a.cy]);return ee(he,de),ee(ce,_e),T}_projectToGround(l,d){return a.cz(a.cA(),l,d,l[2]/(l[2]-d[2]))}coveringTiles(l){let d=this.coveringZoomLevel(l);const v=d,T=this.elevation&&this.elevation.exaggeration(),O=T&&!l.isTerrainDEM,M=this.projection.name==="mercator";if(l.minzoom!==void 0&&d<l.minzoom)return[];l.maxzoom!==void 0&&d>l.maxzoom&&(d=l.maxzoom);const R=this.locationCoordinate(this.center),F=this.center.lat,q=1<<d,H=[q*R.x,q*R.y,0],re=this.projection.name==="globe",ee=!re,oe=a.cB.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,ee),he=re?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ce=q*a.cf(1,this.center.lat),de=this._camera.position[2]/a.cf(1,this.center.lat),_e=[q*he.x,q*he.y,de*(ee?1:ce)],Me=re||T,Ce=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),Ae=this.isLODDisabled(!0)?d:0;let We;if(this._elevation&&l.isTerrainDEM)We=1e4*this._elevation.exaggeration();else if(this._elevation){const et=this._elevation.getMinMaxForVisibleTiles();We=et?et.max:this._centerAltitude}else We=this._centerAltitude;const $e=l.isTerrainDEM?-We:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ge=this.projection.isReprojectedInTileSpace?a.cC(this):1,Ne=et=>{const gt=new a.ae(et.x+25e-6,et.y,et.z),Dt=new a.ae(et.x,et.y+25e-6,et.z),qt=et.toLngLat(),tn=gt.toLngLat(),Wt=Dt.toLngLat(),Ht=this.locationCoordinate(qt),xn=this.locationCoordinate(tn),yn=this.locationCoordinate(Wt),rn=Math.hypot(xn.x-Ht.x,xn.y-Ht.y),_n=Math.hypot(yn.x-Ht.x,yn.y-Ht.y);return Math.sqrt(rn*_n)*Ge/25e-6},Re=et=>{const At=We,gt=$e;return{aabb:a.cF(this,q,0,0,0,et,gt,At,this.projection),zoom:0,x:0,y:0,minZ:gt,maxZ:At,wrap:et,fullyVisible:!1}},Je=[];let nt=[];const st=d,dt=l.reparseOverscaled?v:d,ft=(de-this._centerAltitude)*ce,wt=et=>{if(!this._elevation||!et.tileID||!M)return;const At=this._elevation.getMinMaxForTile(et.tileID),gt=et.aabb;At?(gt.min[2]=At.min,gt.max[2]=At.max,gt.center[2]=(gt.min[2]+gt.max[2])/2):(et.shouldSplit=pt(et),et.shouldSplit||(gt.min[2]=gt.max[2]=gt.center[2]=this._centerAltitude))},It=(et,At)=>{if(.707*At<et)return 1;const gt=At/et;return gt/(1.4144271570014144+(Math.pow(1.1,gt-1.4144271570014144+1)-1)/(1.1-1)-1)},pt=et=>{if(et.zoom<Ae)return!0;if(et.zoom===st)return!1;if(et.shouldSplit!=null)return et.shouldSplit;const At=et.aabb.distanceX(_e),gt=et.aabb.distanceY(_e);let Dt=ft,qt=1;if(re){Dt=et.aabb.distanceZ(_e);const _n=Math.pow(2,et.zoom),In=a.a$((et.y+1)/_n),Un=a.a$(et.y/_n),Qn=Math.min(Math.max(F,In),Un),yr=a.d1(Qn)/a.d1(F);if(qt=Qn===F?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,yr/this._mercatorScaleRatio),this.zoom<=a.c_&&et.zoom===st-1&&yr>=.9)return!0}else if(O&&(Dt=et.aabb.distanceZ(_e)*ce),this.projection.isReprojectedInTileSpace&&v<=5){const _n=Math.pow(2,et.zoom),In=Ne(new a.ae((et.x+.5)/_n,(et.y+.5)/_n));qt=In>.85?1:In}if(!M&&!re){const _n=Math.sqrt(At*At+gt*gt+Dt*Dt);let In=(1<<st-et.zoom)*Ce*qt;return In*=It(Math.max(Dt,ft),_n),_n<In}let tn=Number.MAX_VALUE,Wt=0;const Ht=et.aabb.getCorners(),xn=[];for(const _n of Ht){a.av(xn,_n,_e),re||(O?xn[2]*=ce:xn[2]=ft);const In=a.bJ(xn,this._camera.forward());In<tn&&(tn=In,Wt=Math.abs(xn[2]))}let yn=(1<<st-et.zoom)*Ce*qt;if(yn*=It(Math.max(Wt,ft),tn),tn<yn)return!0;const rn=et.aabb.closestPoint(H);return rn[0]===H[0]&&rn[1]===H[1]};if(this.renderWorldCopies)for(let et=1;et<=3;et++)Je.push(Re(-et)),Je.push(Re(et));for(Je.push(Re(0));Je.length>0;){const et=Je.pop(),At=et.x,gt=et.y;let Dt=et.fullyVisible;const qt=()=>this.projection.name==="globe"&&(et.y===0||et.y===(1<<et.zoom)-1);if(!Dt){let tn=Me?et.aabb.intersects(oe):et.aabb.intersectsFlat(oe);if(tn===0&&qt()){const Wt=new a.cD(et.zoom,At,gt);tn=a.cE(this,q,Wt,!0).intersects(oe)}if(tn===0)continue;Dt=tn===2}if(et.zoom===st||!pt(et)){const tn=et.zoom===st?dt:et.zoom;if(l.minzoom&&l.minzoom>tn)continue;let Wt=0;if(!Dt){let rn=Me?et.aabb.intersectsPrecise(oe):et.aabb.intersectsPreciseFlat(oe);if(rn===0&&qt()){const _n=new a.cD(et.zoom,At,gt);rn=a.cE(this,q,_n,!0).intersectsPrecise(oe)}if(rn===0)continue;if(l.calculateQuadrantVisibility)if(oe.containsPoint(et.aabb.center))Wt=15;else for(let _n=0;_n<4;_n++)et.aabb.quadrant(_n).intersects(oe)!==0&&(Wt|=1<<_n)}const Ht=H[0]-(.5+At+(et.wrap<<et.zoom))*(1<<d-et.zoom),xn=H[1]-.5-gt,yn=et.tileID?et.tileID:new a.aQ(tn,et.wrap,et.zoom,At,gt);l.calculateQuadrantVisibility&&(yn.visibleQuadrants=Wt),nt.push({tileID:yn,distanceSq:Ht*Ht+xn*xn});continue}for(let tn=0;tn<4;tn++){const Wt=(At<<1)+tn%2,Ht=(gt<<1)+(tn>>1),xn={aabb:M?et.aabb.quadrant(tn):a.cF(this,q,et.zoom+1,Wt,Ht,et.wrap,et.minZ,et.maxZ,this.projection),zoom:et.zoom+1,x:Wt,y:Ht,wrap:et.wrap,fullyVisible:Dt,tileID:void 0,shouldSplit:void 0,minZ:et.minZ,maxZ:et.maxZ};O&&!re&&(xn.tileID=new a.aQ(et.zoom+1===st?dt:et.zoom+1,et.wrap,et.zoom+1,Wt,Ht),wt(xn)),Je.push(xn)}}if(this.fogCullDistSq){const et=this.fogCullDistSq,At=this.horizonLineFromTop();nt=nt.filter(gt=>{const Dt=[0,0,0,1],qt=[a.al,a.al,0,1],tn=this.calculateFogTileMatrix(gt.tileID.toUnwrapped());a.aC(Dt,Dt,tn),a.aC(qt,qt,tn);const Wt=a.cG([],Dt,qt),Ht=a.cH([],Dt,qt),xn=a.c$(Wt,Ht);if(xn===0)return!0;let yn=!1;const rn=this._elevation;if(rn&&xn>et&&At!==0){const _n=this.calculateProjMatrix(gt.tileID.toUnwrapped());let In;l.isTerrainDEM||(In=rn.getMinMaxForTile(gt.tileID)),In||(In={min:$e,max:We});const Un=a.cI(this.rotation),Qn=[Un[0]*a.al,Un[1]*a.al,In.max];a.af(Qn,Qn,_n),yn=(1-Qn[1])*this.height*.5<At}return xn<et||yn})}return nt.sort((et,At)=>et.distanceSq-At.distanceSq).map(et=>et.tileID)}resize(l,d){this.width=l,this.height=d,this.pixelsToGLUnits=[2/l,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log2(l)}project(l){const d=a.aA(l.lat,-a.cJ,a.cJ),v=this.projection.project(l.lng,d);return new a.P(v.x*this.worldSize,v.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/a.cf(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,d){let v,T;const O=this.centerPoint;if(this.projection.name==="globe"){const R=this.worldSize;v=(d.x-O.x)/R,T=(d.y-O.y)/R}else{const R=this.pointCoordinate(d),F=this.pointCoordinate(O);v=R.x-F.x,T=R.y-F.y}const M=this.locationCoordinate(l);this.setLocation(new a.ae(M.x-v,M.y-T))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l,d){return this.projection.locationPoint(this,l,d)}locationPoint3D(l,d){return this.projection.locationPoint(this,l,d,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l,d){return this.coordinateLocation(this.pointCoordinate3D(l,d))}locationCoordinate(l,d){const v=d?a.cf(d,l.lat):void 0,T=this.projection.project(l.lng,l.lat);return new a.ae(T.x,T.y,v)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,d){const v=d??this._centerAltitude,T=[l.x,l.y,0,1],O=[l.x,l.y,1,1];a.aC(T,T,this.pixelMatrixInverse),a.aC(O,O,this.pixelMatrixInverse);const M=O[3];a.cK(T,T,1/T[3]),a.cK(O,O,1/M);const R=T[2],F=O[2];return{p0:T,p1:O,t:R===F?0:(v-R)/(F-R)}}screenPointToMercatorRay(l){const d=[l.x,l.y,0,1],v=[l.x,l.y,1,1];return a.aC(d,d,this.pixelMatrixInverse),a.aC(v,v,this.pixelMatrixInverse),a.cK(d,d,1/d[3]),a.cK(v,v,1/v[3]),d[2]=a.cf(d[2],this._center.lat)*this.worldSize,v[2]=a.cf(v[2],this._center.lat)*this.worldSize,a.cK(d,d,1/this.worldSize),a.cK(v,v,1/this.worldSize),new a.ax([d[0],d[1],d[2]],a.aw([],a.av([],v,d)))}rayIntersectionCoordinate(l){const{p0:d,p1:v,t:T}=l,O=a.cf(d[2],this._center.lat),M=a.cf(v[2],this._center.lat);return new a.ae(a.ak(d[0],v[0],T)/this.worldSize,a.ak(d[1],v[1],T)/this.worldSize,a.ak(O,M,T))}pointCoordinate(l,d=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,d)}pointCoordinate3D(l,d){if(!this.elevation)return this.pointCoordinate(l,d);let v=this.projection.pointCoordinate3D(this,l.x,l.y);if(v)return new a.ae(v[0],v[1],v[2]);let T=0,O=this.horizonLineFromTop();if(l.y>O)return this.pointCoordinate(l,d);const M=.02*O,R=l.clone();for(let F=0;F<10&&O-T>M;F++){R.y=a.ak(T,O,.66);const q=this.projection.pointCoordinate3D(this,R.x,R.y);q?(O=R.y,v=q):T=R.y}return v?new a.ae(v[0],v[1],v[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=a.cL)return!this.isPointAboveHorizon(l);const d=this.pointCoordinate(l);return d.y>=0&&d.y<=1}_coordinatePoint(l,d){const v=d&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,T=[l.x*this.worldSize,l.y*this.worldSize,v+l.toAltitude(),1];return a.aC(T,T,this.pixelMatrix),T[3]>0?new a.P(T[0]/T[3],T[1]/T[3]):new a.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:d}=this._edgeInsets,v=this.height-this._edgeInsets.bottom,T=this.width-this._edgeInsets.right,O=this.pointLocation3D(new a.P(d,l)),M=this.pointLocation3D(new a.P(T,l)),R=this.pointLocation3D(new a.P(T,v)),F=this.pointLocation3D(new a.P(d,v));let q=Math.min(O.lng,M.lng,R.lng,F.lng),H=Math.max(O.lng,M.lng,R.lng,F.lng),re=Math.min(O.lat,M.lat,R.lat,F.lat),ee=Math.max(O.lat,M.lat,R.lat,F.lat);const oe=Math.pow(2,-this.zoom)/16*270,he=this.projection.name==="globe"?1:4,ce=(de,_e,Me,Ce,Ae)=>{const We=(de+Me)/2,$e=(_e+Ce)/2,Ge=new a.P(We,$e),{lng:Ne,lat:Re}=this.pointLocation3D(Ge),Je=Math.max(0,q-Ne,re-Re,Ne-H,Re-ee);q=Math.min(q,Ne),H=Math.max(H,Ne),re=Math.min(re,Re),ee=Math.max(ee,Re),(Ae<he||Je>oe)&&(ce(de,_e,We,$e,Ae+1),ce(We,$e,Me,Ce,Ae+1))};if(ce(d,l,T,l,1),ce(T,l,T,v,1),ce(T,v,d,v,1),ce(d,v,d,l,1),this.projection.name==="globe"){const[de,_e]=a.cM(this);de?(ee=90,H=180,q=-180):_e&&(re=-90,H=180,q=-180)}return new a.aI(new a.aT(q,re),new a.aT(H,ee))}_getBoundsRectangular(l,d){const{top:v,left:T}=this._edgeInsets,O=this.height-this._edgeInsets.bottom,M=this.width-this._edgeInsets.right,R=new a.P(T,v),F=new a.P(M,v),q=new a.P(M,O),H=new a.P(T,O);let re=this.pointCoordinate(R,l),ee=this.pointCoordinate(F,l);const oe=this.pointCoordinate(q,d),he=this.pointCoordinate(H,d),ce=(de,_e)=>(_e.y-de.y)/(_e.x-de.x);return re.y>1&&ee.y>=0?re=new a.ae((1-he.y)/ce(he,re)+he.x,1):re.y<0&&ee.y<=1&&(re=new a.ae(-he.y/ce(he,re)+he.x,0)),ee.y>1&&re.y>=0?ee=new a.ae((1-oe.y)/ce(oe,ee)+oe.x,1):ee.y<0&&re.y<=1&&(ee=new a.ae(-oe.y/ce(oe,ee)+oe.x,0)),new a.aI().extend(this.coordinateLocation(re)).extend(this.coordinateLocation(ee)).extend(this.coordinateLocation(he)).extend(this.coordinateLocation(oe))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=l.visibleDemTiles.reduce((v,T)=>{if(T.dem){const O=T.dem.tree;v.min=Math.min(v.min,O.minimums[0]),v.max=Math.max(v.max,O.maximums[0])}return v},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*l.exaggeration(),d.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,v=this.height/2-d*(1-this._horizonShift);return l?Math.max(0,v):v}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-a.cJ,this.maxLat=a.cJ,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=a.aF(this.minLng)*this.tileSize,this.worldMaxX=a.aF(this.maxLng)*this.tileSize,this.worldMinY=a.aJ(this.maxLat)*this.tileSize,this.worldMaxY=a.aJ(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,d){return this.projection.createTileMatrix(this,d,l)}calculateDistanceTileData(l){const d=l.key,v=this._distanceTileDataCache;if(v[d])return v[d];const T=l.canonical,O=1/this.height,M=this.cameraWorldSize,R=M/this.zoomScale(T.z),F=(T.x+Math.pow(2,T.z)*l.wrap)*R,q=T.y*R,H=this.point;H.x*=M/this.worldSize,H.y*=M/this.worldSize;const re=this.angle,ee=Math.sin(-re),oe=-Math.cos(-re);return v[d]={bearing:[ee,oe],center:[(H.x-F)*O,(H.y-q)*O],scale:R/a.al*O},v[d]}calculateFogTileMatrix(l){const d=l.key,v=this._fogTileMatrixCache;if(v[d])return v[d];const T=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return a.aB(T,this.worldToFogMatrix,T),v[d]=new Float32Array(T),v[d]}calculateProjMatrix(l,d=!1,v=!1){const T=l.key;let O;if(O=v?this._expandedProjMatrixCache:d?this._alignedProjMatrixCache:this._projMatrixCache,O[T])return O[T];const M=this.calculatePosMatrix(l,this.worldSize);let R;return R=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:v?this.expandedFarZProjMatrix:d?this.alignedProjMatrix:this.projMatrix,a.aB(M,R,M),O[T]=new Float32Array(M),O[T]}calculatePixelsToTileUnitsMatrix(l){const d=l.tileID.key,v=this._pixelsToTileUnitsCache;if(v[d])return v[d];const T=a.cN(l,this);return v[d]=T,v[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,d=a.bq([],[l,l,l]);return a.aB(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const d=a.cf(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(d),T=this._camera.forward(),O=a.cf(1,this._center.lat);v[2]/=O,T[2]/=O,a.aw(T,T);const M=l.raycast(v,T,l.exaggeration());if(M){const R=a.bH([],v,T,M),F=new a.ae(R[0],R[1],a.cf(R[2],a.a$(R[1]))),q=(F.z+a.ag([F.x-v[0],F.y-v[1],F.z-v[2]*O]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(q),this._centerAltitude=F.toAltitude(),this._center=this.coordinateLocation(F),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const d=this._elevation,v=a.cf(1,this._center.lat)*this.worldSize,T=this._computeCameraPosition(v),O=d.getAtPointOrZero(new a.ae(...T)),M=this.pixelsPerMeter/this.worldSize*O,R=this._minimumHeightOverTerrain(),F=T[2]-M;if(F<=R)if(F<0||l){const q=this.locationCoordinate(this._center,this._centerAltitude),H=[T[0],T[1],q.z-T[2]],re=a.ag(H);H[2]-=(R-F)/this._pixelsPerMercatorPixel;const ee=a.ag(H);if(ee===0)return;a.c5(H,H,re/ee*this._pixelsPerMercatorPixel),this._camera.position=[T[0],T[1],q.z*this._pixelsPerMercatorPixel-H[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const ee=this.center;return ee.lat=a.aA(ee.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(ee.lng=a.aA(ee.lng,this.minLng,this.maxLng)),this.center=ee,void(this._constraining=!1)}const d=this._unmodified,{x:v,y:T}=this.point;let O=0,M=v,R=T;const F=this.width/2,q=this.height/2,H=this.worldMinY*this.scale,re=this.worldMaxY*this.scale;if(T-q<H&&(R=H+q),T+q>re&&(R=re-q),re-H<this.height&&(O=Math.max(O,this.height/(re-H)),R=(re+H)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ee=this.worldMinX*this.scale,oe=this.worldMaxX*this.scale,he=this.worldSize/2-(ee+oe)/2;M=(v+he+this.worldSize)%this.worldSize-he,M-F<ee&&(M=ee+F),M+F>oe&&(M=oe-F),oe-ee<this.width&&(O=Math.max(O,this.width/(oe-ee)),M=(oe+ee)/2)}M===v&&R===T||this._allowWorldUnderZoom||(this.center=this.unproject(new a.P(M,R))),O&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(O)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(Math.max(0,this.height)/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,d=this.projection.name==="globe",v=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=a.cf(1,this.center.lat)/a.cf(1,a.d2));const T=a.cO(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,T),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const O=this.projection.zAxisUnit==="meters"?v:1,M=this._camera.getWorldToCamera(this.worldSize,O);let R;const F=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(F[8]=2*-l.x/this.width,F[9]=2*l.y/this.height,this.isOrthographic){let Re=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Je=Re*this.aspect,nt=-Je,st=-Re;Je-=l.x,nt-=l.x,Re+=l.y,st+=l.y,R=this._camera.getCameraToClipOrthographic(nt,Je,st,Re,this._nearZ,this._farZ),((dt,ft,wt,It)=>{for(let pt=0;pt<16;pt++)dt[pt]=a.ak(ft[pt],wt[pt],It)})(R,R,F,a.d0(this.pitch>=Tl?1:this.pitch/Tl))}else R=F;const q=a.cP([],F,M);let H=a.cP([],R,M);if(this.projection.isReprojectedInTileSpace){const Re=this.locationCoordinate(this.center),Je=a.bA([]);a.br(Je,Je,[Re.x*this.worldSize,Re.y*this.worldSize,0]),a.aB(Je,Je,a.cQ(this)),a.br(Je,Je,[-Re.x*this.worldSize,-Re.y*this.worldSize,0]),a.aB(H,H,Je),a.aB(q,q,Je),this.inverseAdjustmentMatrix=a.cR(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=a.cS([],H,[this.worldSize,this.worldSize,this.worldSize/O,1]),this.projMatrix=H,this.invProjMatrix=a.bl(new Float64Array(16),this.projMatrix),d){const Re=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Re[8]=2*-l.x/this.width,Re[9]=2*l.y/this.height,this.expandedFarZProjMatrix=a.cP([],Re,M)}else this.expandedFarZProjMatrix=this.projMatrix;const re=a.bl([],R);this.frustumCorners=a.cT.fromInvProjectionMatrix(re,this.horizonLineFromTop(),this.height),this.cameraFrustum=a.cB.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!d);const ee=new Float32Array(16);a.bA(ee),a.cS(ee,ee,[1,-1,1]),a.cU(ee,ee,this._pitch),a.bB(ee,ee,this.angle);const oe=a.cd(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=a.bz(oe);const he=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;oe[8]=2*-l.x/this.width,oe[9]=2*(l.y+he)/this.height,this.skyboxMatrix=a.aB(ee,oe,ee);const ce=this.point,de=ce.x,_e=ce.y,Me=this.width%2/2,Ce=this.height%2/2,Ae=Math.cos(this.angle),We=Math.sin(this.angle),$e=de-Math.round(de)+Ae*Me+We*Ce,Ge=_e-Math.round(_e)+Ae*Ce+We*Me,Ne=new Float64Array(H);if(a.br(Ne,Ne,[$e>.5?$e-1:$e,Ge>.5?Ge-1:Ge,0]),this.alignedProjMatrix=Ne,H=a.bC(),a.cS(H,H,[this.width/2,-this.height/2,1]),a.br(H,H,[1,-1,0]),this.labelPlaneMatrix=H,H=a.bC(),a.cS(H,H,[1,-1,1]),a.br(H,H,[-1,-1,0]),a.cS(H,H,[2/this.width,2/this.height,1]),this.glCoordMatrix=H,this.pixelMatrix=a.aB(new Float64Array(16),this.labelPlaneMatrix,q),this._calcFogMatrices(),this._distanceTileDataCache={},H=a.bl(new Float64Array(16),this.pixelMatrix),!H)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=H,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=a.cV(this);const Re=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=a.af(Re,Re,M),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=H;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,v=this._camera.position,T=1/this.height/this._pixelsPerMercatorPixel,O=[l,l,d];a.c5(O,O,T),a.c5(v,v,-1),a.cW(v,v,O);const M=a.bC();a.br(M,M,v),a.cS(M,M,O),this.mercatorFogMatrix=M,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,d,T)}_computeCameraPosition(l){const d=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,v=this._camera.forward(),T=this.point,O=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-l/this.worldSize*this._centerAltitude;return[T.x/this.worldSize-v[0]*O,T.y/this.worldSize-v[1]*O,l/this.worldSize*this._centerAltitude-v[2]*O]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),v=this._camera.position[2],T=l[2];let O=1;this.projection.wrap&&(this.center=this.center.wrap()),T>0&&(O=Math.min((d-v)/T,1)),this._camera.position=a.bH([],this._camera.position,l,O),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,d=this._camera.forward(),{pitch:v,bearing:T}=this._camera.getPitchBearing(),O=a.cf(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,M=this._mercatorZfromZoom(this._maxZoom)*Math.cos(a.an(this._maxPitch)),R=Math.max((l[2]-O)/Math.cos(v),M),F=this._zoomFromMercatorZ(R);a.bH(l,l,d,R),this._pitch=a.aA(v,a.an(this.minPitch),a.an(this.maxPitch)),this.angle=a.bT(T,-Math.PI,Math.PI),this._setZoom(a.aA(F,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new a.ae(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(Math.max(0,l)*this.tileSize))}zoomFromMercatorZAdjusted(l){let d=0,v=a.cL,T=0,O=1/0;for(;v-d>1e-6&&v>d;){const M=d+.5*(v-d),R=this.tileSize*Math.pow(2,M),F=this.getCameraToCenterDistance(this.projection,M,R),q=this.scaleZoom(F/(Math.max(0,l)*this.tileSize)),H=Math.abs(M-q);H<O&&(O=H,T=M),M<q?d=M:v=M}return T}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(a.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,d){const v=Math.min(l.x,d.x),T=Math.max(l.x,d.x),O=Math.min(l.y,d.y),M=Math.max(l.y,d.y);if(O<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const R=[new a.P(v,O),new a.P(T,M),new a.P(v,M),new a.P(T,O)],F=this.renderWorldCopies?-3:0,q=this.renderWorldCopies?4:1;for(const H of R){const re=this.pointRayIntersection(H);if(re.t<0)return!0;const ee=this.rayIntersectionCoordinate(re);if(ee.x<F||ee.y<0||ee.x>q||ee.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+a.cX(this.fovAboveCenter)>88||this.anyCornerOffEdge(new a.P(0,0),new a.P(this.width,this.height))}zoomDeltaToMovement(l,d){const v=a.ag(a.av([],this._camera.position,l)),T=this._zoomFromMercatorZ(v)+d;return v-this._mercatorZfromZoom(T)}getCameraPoint(){if(this.projection.name==="globe"){const l=(function([d,v,T],O){const M=[d,v,T,1];a.aC(M,M,O);const R=M[3]=Math.max(M[3],1e-6);return M[0]/=R,M[1]/=R,M[2]/=R,M})([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new a.P(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,l))}}getCameraToCenterDistance(l,d=this.zoom,v=this.worldSize){const T=a.cO(l,d,this.width,this.height,1024),O=l.pixelSpaceConversion(this.center.lat,v,T);let M=.5/Math.tan(.5*this._fov)*this.height*O;return this.isOrthographic&&(M=a.ak(1,M,a.d0(this.pitch>=Tl?1:this.pitch/Tl))),M}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&a.aB(l,l,this.globeMatrix),l}getFrustum(l){return a.cB.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,this.projection.zAxisUnit==="meters")}}const $l=(_,l)=>{if(l>0&&_.terrain&&a.w("Cutoff is currently disabled on terrain"),l<=0||_.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const d=_.transform,v=Math.max(Math.abs(d._zoom-(_.minCutoffZoom-1)),1),T=d.isLODDisabled(!1)?a.ah(60,45,d.pitch):a.ah(30,15,d.pitch),O=d._farZ-d._nearZ,M=l*d.height,R=((1-(F=T))*d.cameraToCenterDistance+F*(d._farZ+M))*v;var F;return{shouldRenderCutoff:T<1,uniformValues:{u_cutoff_params:[d._nearZ,d._farZ,(R-d._nearZ)/O,(R-M-d._nearZ)/O]}}},gf=2048;class t1{constructor(l,d){this.aabb=l,this.lastCascade=d}}class xd{add(l,d){const v=this.receivers[l.key];v!==void 0?(v.aabb.min[0]=Math.min(v.aabb.min[0],d.min[0]),v.aabb.min[1]=Math.min(v.aabb.min[1],d.min[1]),v.aabb.min[2]=Math.min(v.aabb.min[2],d.min[2]),v.aabb.max[0]=Math.max(v.aabb.max[0],d.max[0]),v.aabb.max[1]=Math.max(v.aabb.max[1],d.max[1]),v.aabb.max[2]=Math.max(v.aabb.max[2],d.max[2])):this.receivers[l.key]=new t1(d,null)}clear(){this.receivers={}}get(l){return this.receivers[l.key]}computeRequiredCascades(l,d,v){const T=a.d9.fromPoints(l.points);let O=0;for(const M in this.receivers){const R=this.receivers[M];if(!R||!T.intersectsAabb(R.aabb))continue;R.aabb.min=T.closestPoint(R.aabb.min),R.aabb.max=T.closestPoint(R.aabb.max);const F=R.aabb.getCorners();for(let q=0;q<v.length;q++){let H=!0;for(const re of F){const ee=[re[0]*d,re[1]*d,re[2]];if(a.af(ee,ee,v[q].matrix),ee[0]<-1||ee[0]>1||ee[1]<-1||ee[1]>1){H=!1;break}}if(R.lastCascade=q,O=Math.max(O,q),H)break}}return O+1}}class Ag{constructor(l){this.painter=l,this._enabled=!1,this._drawShadowAfterLayer=-1,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new xd,this._depthMode=new On(l.context.gl.LEQUAL,On.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1}destroy(){for(const l of this._cascades)l.texture.destroy(),l.framebuffer.destroy();this._cascades=[]}updateShadowParameters(l,d){const v=this.painter;if(this._enabled=!1,this._drawShadowAfterLayer=-1,this._receivers.clear(),!d||!d.properties)return;const T=d.properties.get("shadow-intensity"),O=d.properties.get("shadow-draw-before-layer");if(!d.shadowsEnabled()||T<=0)return;let M=-1,R=0;for(const _e of v.style.order){const Me=v.style._mergedLayers[_e];Me.hasShadowPass()&&!Me.isHidden(l.zoom)&&(M=R),O&&O===_e&&(this._drawShadowAfterLayer=R>0?R-1:0),R+=1}if(this._enabled=M>=0,!this.enabled)return;this._drawShadowAfterLayer<0&&(this._drawShadowAfterLayer=M);const F=v.context,q=gf,H=gf;if(this._cascades.length===0||gf!==this._cascades[0].texture.size[0]){this._cascades=[];for(let _e=0;_e<2;++_e){const Me=v._shadowMapDebug,Ce=F.gl,Ae=F.createFramebuffer(q,H,Me?1:0,"texture"),We=new a.T(F,{width:q,height:H,data:null},Ce.DEPTH_COMPONENT16);if(Ae.depthAttachment.set(We.texture),Me){const $e=new a.T(F,{width:q,height:H,data:null},Ce.RGBA8);Ae.colorAttachment0.set($e.texture)}this._cascades.push({framebuffer:Ae,texture:We,matrix:[],far:0,boundingSphereRadius:0,frustum:new a.cB,scale:0})}}this.shadowDirection=D_(d);let re=0;if(l.elevation){const _e=l.elevation,Me=[1e4,-1e4];_e.visibleDemTiles.filter(Ce=>Ce.dem).forEach(Ce=>{const Ae=Ce.dem.tree;Me[0]=Math.min(Me[0],Ae.minimums[0]),Me[1]=Math.max(Me[1],Ae.maximums[0])}),Me[0]!==1e4&&(re=(Me[1]-Me[0])*_e.exaggeration())}const ee=1.5*l.cameraToCenterDistance,oe=3*ee,he=new Float64Array(16);for(let _e=0;_e<this._cascades.length;++_e){const Me=this._cascades[_e];let Ce=l.height/50,Ae=1;_e===0?Ae=ee:(Ce=ee,Ae=oe);const[We,$e]=I_(l,this.shadowDirection,Ce,Ae,gf,re);Me.scale=l.scale,Me.matrix=We,Me.boundingSphereRadius=$e,a.bl(he,Me.matrix),Me.frustum=a.cB.fromInvProjectionMatrix(he,1,0,!0),Me.far=Ae}const ce=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[ce].far,this._cascades[ce].far],this._uniformValues.u_shadow_intensity=T,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=.00048828125,this._uniformValues.u_shadow_map_resolution=gf,this._uniformValues.u_shadowmap_0=11,this._uniformValues.u_shadowmap_1=12,this._groundShadowTiles=v.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const de=v.transform.elevation;for(const _e of this._groundShadowTiles){let Me={min:0,max:0};if(de){const Ce=de.getMinMaxForTile(_e);Ce&&(Me=Ce)}this.addShadowReceiver(_e.toUnwrapped(),Me.min,Me.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(l){this._enabled=l}drawShadowPass(l,d){if(!this.enabled)return;const v=this.painter,T=v.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(v.transform.getFrustum(0),v.transform.worldSize,this._cascades),T.viewport.set([0,0,gf,gf]);for(let O=0;O<this._numCascadesToRender;++O){v.currentShadowCascade=O,T.bindFramebuffer.set(this._cascades[O].framebuffer.framebuffer),T.clear({color:a.ao.white,depth:1});for(const M of l.order){const R=l._mergedLayers[M];if(!R.hasShadowPass()||R.isHidden(v.transform.zoom))continue;const F=l.getLayerSourceCache(R),q=F?d[F.id]:void 0;(R.type==="model"||q&&q.length)&&v.renderLayer(v,F,R,q)}}v.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const l=this.painter,d=l.style,v=l.context,T=v.gl,O=d.directionalLight,M=d.ambientLight;if(!O||!M)return;const R=[],F=$l(l,l.longestCutoffRange);F.shouldRenderCutoff&&R.push("RENDER_CUTOFF"),R.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&R.push("NORMAL_OFFSET");const q=js(d,O,M),H=new On(T.LEQUAL,On.ReadOnly,l.depthRangeFor3D),re=new qn({func:T.EQUAL,mask:255},0,255,T.KEEP,T.KEEP,T.KEEP);for(const ee of this._groundShadowTiles){const oe=ee.toUnwrapped(),he=l.isTileAffectedByFog(ee),ce=l.getOrCreateProgram("groundShadow",{defines:R,overrideFog:he});this.setupShadows(oe,ce),l.uploadCommonUniforms(v,ce,oe,null,F);const de=rl(l.transform.calculateProjMatrix(oe),q);ce.draw(l,T.TRIANGLES,H,re,Gn.multiply,jn.disabled,de,"ground_shadow",l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments,null,l.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Gn.unblended:Gn.disabled}getShadowPassDepthMode(){return this._depthMode}getGroundShadowLayerIndex(){return this._drawShadowAfterLayer}calculateShadowPassMatrixFromTile(l){const d=this.painter.transform,v=d.calculatePosMatrix(l,d.worldSize);return a.aB(v,this._cascades[this.painter.currentShadowCascade].matrix,v),Float32Array.from(v)}calculateShadowPassMatrixFromMatrix(l){const d=a.bz(l);return a.aB(d,this._cascades[this.painter.currentShadowCascade].matrix,l),d}setupShadows(l,d,v){if(!this.enabled)return;const T=this.painter.transform,O=this.painter.context,M=O.gl,R=this._uniformValues,F=new Float64Array(16),q=T.calculatePosMatrix(l,T.worldSize);for(let H=0;H<this._cascades.length;H++)a.aB(F,this._cascades[H].matrix,q),R[H===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(F),O.activeTexture.set(M.TEXTURE0+11+H),this._cascades[H].texture.bindExtraParam(M.LINEAR,M.LINEAR,M.CLAMP_TO_EDGE,M.CLAMP_TO_EDGE,M.GREATER);if(this.useNormalOffset=!!v,this.useNormalOffset){const H=a.d7(l.canonical),re=2/T.tileSize*a.al/gf,ee=re*this._cascades[0].boundingSphereRadius,oe=re*this._cascades[this._cascades.length-1].boundingSphereRadius,he=(v==="vector-tile"?1:3)*(function(ce){const de=a.aA((ce-22)/-22,0,1);return .125*(1-de)+4*de})(T.zoom);R.u_shadow_normal_offset=[H,ee*he,oe*he],R.u_shadow_bias=[1e-4,.0012,.012]}else R.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(O,R)}setupShadowsFromMatrix(l,d,v=!1){if(!this.enabled)return;const T=this.painter.context,O=T.gl,M=this._uniformValues,R=new Float64Array(16);for(let F=0;F<2;F++)a.aB(R,this._cascades[F].matrix,l),M[F===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(R),T.activeTexture.set(O.TEXTURE0+11+F),this._cascades[F].texture.bindExtraParam(O.LINEAR,O.LINEAR,O.CLAMP_TO_EDGE,O.CLAMP_TO_EDGE,O.GREATER);this.useNormalOffset=v,v?(M.u_shadow_normal_offset=[1,3,3],M.u_shadow_bias=[6e-5,.0012,.012]):M.u_shadow_bias=[36e-5,.0012,.012],d.setShadowUniformValues(T,M)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(l,d,v,T){if(T[2]>=0)return{};const O=(function(F,q,H){const re=H/(1<<F.canonical.z);return new a.d9([F.canonical.x*re+F.wrap*H,F.canonical.y*re+F.wrap*H,0],[(F.canonical.x+1)*re+F.wrap*H,(F.canonical.y+1)*re+F.wrap*H,q])})(l,d,v).getCorners(),M=d/-T[2];T[0]<0?(a.d8(O[0],O[0],[T[0]*M,0,0]),a.d8(O[3],O[3],[T[0]*M,0,0])):T[0]>0&&(a.d8(O[1],O[1],[T[0]*M,0,0]),a.d8(O[2],O[2],[T[0]*M,0,0])),T[1]<0?(a.d8(O[0],O[0],[0,T[1]*M,0]),a.d8(O[1],O[1],[0,T[1]*M,0])):T[1]>0&&(a.d8(O[2],O[2],[0,T[1]*M,0]),a.d8(O[3],O[3],[0,T[1]*M,0]));const R={};return R.vertices=O,R.planes=[yf(O[1],O[0],O[4]),yf(O[2],O[1],O[5]),yf(O[3],O[2],O[6]),yf(O[0],O[3],O[7])],R}addShadowReceiver(l,d,v){this._receivers.add(l,a.d9.fromTileIdAndHeight(l,d,v))}getMaxCascadeForTile(l){const d=this._receivers.get(l);return d&&d.lastCascade?d.lastCascade:0}}function yf(_,l,d){const v=a.av([],d,l),T=a.av([],_,l),O=a.bI([],v,T),M=a.ag(O);return M===0?[0,0,1,0]:(a.c5(O,O,1/M),[O[0],O[1],O[2],-a.bJ(O,l)])}function D_(_){const l=_.properties.get("direction"),d=a.d4(l.x,l.y,l.z);d[2]=a.aA(d[2],0,75);const v=a.d6([d[0],d[1],d[2]]);return a.d5(v.x,v.y,v.z)}function js(_,l,d){const v=l.properties.get("color-use-theme")==="none",T=l.properties.get("color"),O=l.properties.get("intensity"),M=l.properties.get("direction"),R=[M.x,M.y,M.z],F=d.properties.get("color-use-theme")==="none",q=d.properties.get("color"),H=d.properties.get("intensity"),re=Math.max(a.bJ([0,0,1],R),0),ee=[0,0,0];a.c5(ee,q.toPremultipliedRenderColor(F?null:_.getLut(l.scope)).toArray01Linear().slice(0,3),H);const oe=[0,0,0];return a.c5(oe,T.toPremultipliedRenderColor(v?null:_.getLut(d.scope)).toArray01Linear().slice(0,3),re*O),a.db([ee[0]>0?ee[0]/(ee[0]+oe[0]):0,ee[1]>0?ee[1]/(ee[1]+oe[1]):0,ee[2]>0?ee[2]/(ee[2]+oe[2]):0])}function I_(_,l,d,v,T,O){const M=_.zoom,R=_.scale,F=_.worldSize,q=1/F,H=_.aspect,re=Math.sqrt(1+H*H)*Math.tan(.5*_.fovX),ee=re*re,oe=v-d,he=v+d;let ce,de;ee>oe/he?(ce=v,de=v*re):(ce=.5*he*(1+ee),de=.5*Math.sqrt(oe*oe+2*(v*v+d*d)*ee+he*he*ee*ee));const _e=_.projection.pixelsPerMeter(_.center.lat,F),Me=_._camera.getCameraToWorldMercator(),Ce=[0,0,-ce*q];a.af(Ce,Ce,Me);let Ae=de*q;const We=function(Dt){return Dt[0]/=R,Dt[1]/=R,Dt[2]=a.cf(Dt[2],_._center.lat),Dt},$e=_._edgeInsets;if(!($e.left===0&&$e.top===0&&$e.right===0&&$e.bottom===0||$e.left===$e.right&&$e.top===$e.bottom)){const Dt=_._camera.getWorldToCamera(_.worldSize,_.projection.zAxisUnit==="meters"?_e:1),qt=_._camera.getCameraToClipPerspective(_._fov,_.width/_.height,d,v);qt[8]=2*-_.centerOffset.x/_.width,qt[9]=2*_.centerOffset.y/_.height;const tn=new Float64Array(16);a.cP(tn,qt,Dt);const Wt=new Float64Array(16);a.bl(Wt,tn);const Ht=a.cB.fromInvProjectionMatrix(Wt,F,M,!0);for(const xn of Ht.points){const yn=We(xn);Ae=Math.max(Ae,a.c6(a.da([],Ce,yn)))}}Ae*=T/(T-1);const Ge=Math.acos(l[2]),Ne=Math.atan2(-l[0],-l[1]),Re=new qp;Re.position=Ce,Re.setPitchBearing(Ge,Ne);const Je=Re.getWorldToCamera(F,_e),nt=Ae*F,st=Math.min(_._mercatorZfromZoom(17)*F*-2,-2*nt),dt=Re.getCameraToClipOrthographic(-nt,nt,-nt,nt,st,(nt+O*_e)/l[2]),ft=new Float64Array(16);a.aB(ft,dt,Je);const wt=a.d5(Math.floor(1e6*Ce[0])/1e6*F,Math.floor(1e6*Ce[1])/1e6*F,0),It=.5*T,pt=[0,0,0];a.af(pt,wt,ft),a.c5(pt,pt,It);const et=[Math.floor(pt[0]),Math.floor(pt[1]),Math.floor(pt[2])],At=[0,0,0];a.av(At,pt,et),a.c5(At,At,-1/It);const gt=new Float64Array(16);return a.bA(gt),a.br(gt,gt,At),a.aB(ft,gt,ft),[ft,nt]}class Og extends a.E{constructor(l){super(),this.requestManager=l,this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}loadModel(l,d){return a.dc(this.requestManager.transformRequest(d,a.R.Model).url).then(v=>{if(!v)return;const T=a.dd(v),O=new a.de(l,d,void 0,void 0,T);return O.computeBoundsAndApplyParent(),O}).catch(v=>{if(v&&v.status===404)return null;this.fire(new a.y(new Error(`Could not load model ${l} from ${d}: ${v.message}`)))})}load(l,d,v={forceReload:!1}){this.models[d]||(this.models[d]={});const T=Object.keys(l),O=[],M=[];for(const R of T){const F=l[R];this.hasURLBeenRequested(F)&&!v.forceReload||(this.modelByURL[F]={modelId:R,scope:d},O.push(this.loadModel(R,F)),M.push(R)),this.models[d][R]||(this.models[d][R]={model:null,numReferences:1})}this.numModelsLoading[d]=(this.numModelsLoading[d]||0)+M.length,Promise.allSettled(O).then(R=>{for(let F=0;F<R.length;F++){const{status:q}=R[F];if(q==="rejected")continue;const{value:H}=R[F];this.models[d][M[F]]||(this.models[d][M[F]]={model:null,numReferences:1}),this.models[d][M[F]].model=H}this.numModelsLoading[d]-=M.length,this.fire(new a.z("data",{dataType:"style"}))}).catch(R=>{this.fire(new a.y(new Error(`Could not load models: ${R.message}`)))})}isLoaded(){for(const l in this.numModelsLoading)if(this.numModelsLoading[l]>0)return!1;return!0}hasModel(l,d,v={exactIdMatch:!1}){return!!(v.exactIdMatch?this.getModel(l,d):this.getModelByURL(this.modelUris[d][l]))}getModel(l,d){return this.models[d]||(this.models[d]={}),this.models[d][l]?this.models[d][l].model:void 0}getModelByURL(l){if(!l)return null;const d=this.modelByURL[l];return d?this.models[d.scope][d.modelId].model:null}hasModelBeenAdded(l,d){return this.models[d]&&this.models[d][l]!==void 0}getModelURIs(l){return this.modelUris[l]||{}}addModel(l,d,v){this.models[v]||(this.models[v]={}),this.modelUris[v]||(this.modelUris[v]={});const T=this.requestManager.normalizeModelURL(d);if((this.hasModel(l,v,{exactIdMatch:!0})||this.hasModelBeenAdded(l,v))&&this.modelUris[v][l]===T)this.models[v][l].numReferences++;else if(this.hasURLBeenRequested(T)){const{scope:O,modelId:M}=this.modelByURL[T];this.models[O][M].numReferences++}else this.modelUris[v][l]=T,this.load({[l]:this.modelUris[v][l]},v)}addModelURLs(l,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const v=this.modelUris[d];for(const T in l)v[T]=this.requestManager.normalizeModelURL(l[T])}reloadModels(l){this.load(this.modelUris[l],l,{forceReload:!0})}addModelsFromBucket(l,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const v={};for(const T of l)this.hasModel(T,d,{exactIdMatch:!0})||this.hasURLBeenRequested(T)?this.models[d][T].numReferences++:this.modelUris[d][T]&&!this.hasURLBeenRequested(T)?v[T]=this.modelUris[d][T]:!this.hasURLBeenRequested(T)&&a.df(T,!1)&&(this.modelUris[d][T]=this.requestManager.normalizeModelURL(T),v[T]=this.modelUris[d][T]);this.load(v,d)}hasURLBeenRequested(l){return this.modelByURL[l]!==void 0}removeModel(l,d,v=!1,T=!1){if(this.models[d]&&this.models[d][l]&&(this.models[d][l].numReferences--,this.models[d][l].numReferences===0||T)){const O=this.modelUris[d][l];v||delete this.modelUris[d][l],delete this.modelByURL[O];const M=this.models[d][l].model;if(!M)return;delete this.models[d][l],M.destroy()}}destroy(){for(const l of Object.keys(this.models))for(const d of Object.keys(this.models[l])){const v=this.models[l][d].model;delete this.models[l][d],v&&v.destroy()}this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}listModels(l){return this.models[l]||(this.models[l]={}),Object.keys(this.models[l])}upload(l,d){this.models[d]||(this.models[d]={});for(const v in this.models[d])this.models[d][v].model&&this.models[d][v].model.upload(l.context)}}const Uu=a.a6.colorTheme,Vl=new a.a9({data:new a.aa(Uu.data)});function A0(_){if(!_.metadata||!_.metadata.content_area)return;const l=a.o.devicePixelRatio,{left:d,top:v,width:T,height:O}=_.metadata.content_area,M=d*l,R=v*l;return[M,R,M+T*l,R+O*l]}function O0(_){if(_)return _.map(([l,d])=>[l*a.o.devicePixelRatio,d*a.o.devicePixelRatio])}class wd{constructor(l,d,v){this.id=l,this.scope=d,this.sourceCache=v,this.pendingRequests=new Set,this.missingRequests=new Set}addPendingRequest(l){this.missingRequests.has(l.name)||this.pendingRequests.has(l.name)||this.pendingRequests.add(l.name)}hasPendingRequests(){return this.pendingRequests.size>0}resolvePendingRequests(){const l=new Map;if(!this.sourceCache.loaded())return l;const d=this.sourceCache.getVisibleCoordinates();if(d.length===0)return l;const v=this.sourceCache.getSource();if(!(v instanceof xs))return l;const T=d.map(M=>this.sourceCache.getTile(M)),O=v.getImages(T,Array.from(this.pendingRequests));for(const[M,R]of O)l.set(a.I.from({name:M,iconsetId:this.id}),R),this.pendingRequests.delete(M);for(const M of this.pendingRequests)this.missingRequests.add(M);return this.pendingRequests.clear(),l}}class P_{constructor(){a.aY(["_onIndoorUpdate"],this)}onAdd(l){return this._map=l,this._container=j("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._map.style&&this._map.style.indoorManager.on("selector-update",d=>this._onIndoorUpdate(d)),this._container}_createButton(l,d){const v=j("button",l,this._container);return v.type="button",v.addEventListener("click",d),v}_createSeparator(){return j("div","mapboxgl-ctrl-separator",this._container)}_setButtonTitle(l,d){this._map&&(l.setAttribute("aria-label",d),l.textContent=d)}onRemove(){this._container&&this._container.remove(),this._map&&this._map.style&&(this._map.style.indoorManager.off("selector-update",this._onIndoorUpdate),this._map=null)}getDefaultPosition(){return"right"}_onIndoorUpdate(l){if(!l||!l.floors)return this._model=l,void(this._container.style.display="none");const d=this._model;this._model=l,this._container.style.display="inline-block",this._container.style.borderRadius="8px",d&&Array.from(this._container.children).forEach(v=>v.remove()),l.floors.length>0&&(this.addBuildingsToggleButton(),this.addCurrentFloors(l.floors,l.activeFloorsVisible),this._updateBuildingsButtonState())}addBuildingsToggleButton(){const l=this._createButton("mapboxgl-ctrl-buildings-toggle",()=>{const d=this._map;this._model&&d&&d._setIndoorActiveFloorsVisibility(!this._model.activeFloorsVisible)});j("span","mapboxgl-ctrl-icon",l).setAttribute("aria-hidden","true"),l.classList.add("mapboxgl-ctrl-level-button","mapboxgl-ctrl-buildings-toggle"),this._model&&!this._model.activeFloorsVisible&&l.classList.add("mapboxgl-ctrl-level-button-selected"),this._container.append(l),this._createSeparator()}_updateBuildingsButtonState(){const l=this._container.querySelector(".mapboxgl-ctrl-buildings-toggle");l&&this._model&&(this._model.activeFloorsVisible?l.classList.remove("mapboxgl-ctrl-level-button-selected"):l.classList.add("mapboxgl-ctrl-level-button-selected"))}addCurrentFloors(l,d){for(let v=0;v<l.length;v++){const T=l[v],O=this._createButton("mapboxgl-ctrl-level-button",()=>{this._map._selectIndoorFloor(T.id)}),M=(T.name||"").trim(),R=T.zIndex.toString(),F=M?Array.from(M).slice(0,3).join(""):R;this._setButtonTitle(O,F),this._model&&T.id===this._model.selectedFloorId&&d&&O.classList.add("mapboxgl-ctrl-level-button-selected"),this._container.append(O),v<l.length-1&&this._createSeparator()}}}class n1 extends a.E{constructor(l){super(),this._style=l,this._buildings={},this._indoorControl=null,this._activeFloors=new Set,this._activeFloorsVisible=!0,this._indoorState={selectedFloorId:null,lastActiveFloors:null,activeFloorsVisible:!0},a.aY(["_updateUI"],this),this._style.on("style.load",()=>{this._style.isIndoorEnabled()&&(this._style.map.on("load",this._updateUI),this._style.map.on("move",this._updateUI),this._style.map.on("idle",this._updateUI),this._updateUI())})}destroy(){this._buildings={},this._activeFloors=new Set,this._indoorState=null,this._removeIndoorControl()}selectFloor(l){l===this._selectedFloorId&&this._activeFloorsVisible||(this._selectedFloorId=l,this._activeFloorsVisible=!0,this._updateActiveFloors())}setActiveFloorsVisibility(l){this._activeFloorsVisible=l,this._updateActiveFloors(),this._updateIndoorSelector()}setIndoorData(l){for(const[d,v]of Object.entries(l.buildings))if(this._buildings[d])for(const T of v.floorIds)this._buildings[d].floors[T]||(this._buildings[d].floors[T]=v.floors[T]);else this._buildings[d]=v;for(const d of l.activeFloors)this._activeFloors.add(d);this._updateIndoorSelector()}getIndoorTileOptions(l,d){const v=this._style.getIndoorSourceLayers(l,d);return v&&this._indoorState?{sourceLayers:v,indoorState:this._indoorState}:null}_addIndoorControl(){this._indoorControl||(this._indoorControl=new P_,this._style.map.addControl(this._indoorControl,"right"))}_removeIndoorControl(){this._indoorControl&&(this._indoorControl.onRemove(),this._indoorControl=null)}_updateUI(){const l=this._style.map.transform,d=(function(v,T,O,M){let R=null,F=Number.MAX_SAFE_INTEGER;if(M<16)return null;for(const[q,H]of Object.entries(v)){const re=H.center;if(re){const ee=T.distanceTo(a.aT.convert(re));ee<F&&O.contains(re)&&(F=ee,R=q)}}return R})(this._buildings,l.center,l.getBounds(),l.zoom);d!==this._closestBuildingId&&(this._closestBuildingId=d,this._updateIndoorSelector())}_updateIndoorSelector(){const l=this._buildings,d=this._closestBuildingId,v=d&&l?l[d]:void 0;if(!v)return this._removeIndoorControl(),void this.fire(new a.z("selector-update",{selectedFloorId:null,activeFloorsVisible:this._activeFloorsVisible,floors:[]}));this._addIndoorControl();let T=null;for(const M of v.floorIds)if(this._activeFloors&&this._activeFloors.has(M)){T=M;break}const O=Array.from(v.floorIds).map(M=>({id:M,name:v.floors[M].name,zIndex:v.floors[M].zIndex})).sort((M,R)=>R.zIndex-M.zIndex).filter((M,R,F)=>R===0||M.zIndex!==F[R-1].zIndex);this.fire(new a.z("selector-update",{selectedFloorId:T,activeFloorsVisible:this._activeFloorsVisible,floors:O}))}_updateActiveFloors(){const l=this._activeFloors;this._activeFloors=new Set,this._indoorState={selectedFloorId:this._selectedFloorId,lastActiveFloors:l,activeFloorsVisible:this._activeFloorsVisible},this._style.updateIndoorDependentLayers()}}const Mc=(_,l)=>ot(_,l&&l.filter(d=>d.identifier!=="source.canvas")),r1=a.aH(Cr,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setLayerProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport","addIconset","removeIconset"]),i1=a.aH(Cr,["setCenter","setZoom","setBearing","setPitch"]),R_=new Set(["background","sky","slot","custom"]),k_={version:8,layers:[],sources:{}},_f={duration:300,delay:0};class Us extends a.E{constructor(l,d={}){super(),this.map=l,this.scope=d.scope||"",this.globalId=null,this.fragments=[],this.importDepth=d.importDepth||0,this.importsCache=d.importsCache||new Map,this.resolvedImports=d.resolvedImports||new Set,this.transition=Object.assign({},_f),this._buildingIndex=new gd(this),this.crossTileSymbolIndex=new Ca,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedIndoor={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._hasAppearances=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._importedAsBasemap=!1,this._changes=d.styleChanges||new or,this._hasDataDrivenEmissive=!1,this.indoorManager=new n1(this),this.dispatcher=d.dispatcher?d.dispatcher:new a.D(a.dh(),this),d.imageManager?this.imageManager=d.imageManager:(this.imageManager=new Pr(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.addScope(this.scope),this.glyphManager=d.glyphManager?d.glyphManager:new a.di(l._requestManager,d.localFontFamily?a.dj.all:d.localIdeographFontFamily?a.dj.ideographs:a.dj.none,d.localFontFamily||d.localIdeographFontFamily),d.modelManager?this.modelManager=d.modelManager:(this.modelManager=new Og(l._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._availableModels={},this._order=[],this._markersNeedUpdate=!1,this.options=d.configOptions?d.configOptions:new Map,this._configDependentLayers=d.configDependentLayers?d.configDependentLayers:new Set,this._indoorDependentLayers=d.indoorDependentLayers?d.indoorDependentLayers:new Set,this._config=d.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:d.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=d.initialConfig,this.dispatcher.broadcast("setReferrer",a.dk());const v=this;this._rtlTextPluginCallback=Us.registerForPluginStateChange(T=>{v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:T.pluginStatus,pluginURL:T.pluginURL},(O,M)=>{if(a.dl(O),M&&M.every(R=>R))for(const R in v._sourceCaches){const F=v._sourceCaches[R],q=F.getSource().type;q!=="vector"&&q!=="geojson"||F.reload()}})}),this.on("data",T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const O=this.getOwnSource(T.sourceId);if(O&&O.vectorLayerIds)for(const M in this._layers){const R=this._layers[M];R.source===O.id&&this._validateLayer(R)}})}load(l){return l?(typeof l=="string"?this.loadURL(l):this.loadJSON(l),this):this}_getGlobalId(l){if(!l)return null;if(typeof l=="string"){if(a.h(l))return l;const d=a.dm(l);if(!d.startsWith("http"))try{return new URL(d,location.href).toString()}catch{return d}return d}return`json://${a.dn(JSON.stringify(l))}`}_diffStyle(l,d,v){this.globalId=this._getGlobalId(l);const T=(O,M)=>{try{M(null,this.setState(O,v))}catch(R){M(R,!1)}};if(typeof l=="string"){const O=this.map._requestManager.normalizeStyleURL(l),M=this.map._requestManager.transformRequest(O,a.R.Style);a.m(M,(R,F)=>{R?this.fire(new a.y(R)):F&&T(F,d)})}else typeof l=="object"&&T(l,d)}loadURL(l,d={}){this.fire(new a.z("dataloading",{dataType:"style"}));const v=typeof d.validate=="boolean"?d.validate:!a.h(l);this.globalId=this._getGlobalId(l),l=this.map._requestManager.normalizeStyleURL(l,d.accessToken),this.resolvedImports.add(l);const T=this.importsCache.get(l);if(T)return this._load(T,v);const O=this.map._requestManager.transformRequest(l,a.R.Style);this._request=a.m(O,(M,R)=>{if(this._request=null,M)this.fire(new a.y(M));else if(R)return this.importsCache.set(l,R),this._load(R,v)})}loadJSON(l,d={}){this.fire(new a.z("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(l),this._request=a.o.frame(()=>{this._request=null,this._load(l,d.validate!==!1)})}loadEmpty(){this.fire(new a.z("dataloading",{dataType:"style"})),this._load(k_,!1)}_loadImports(l,d,v){if(this.importDepth>=4)return a.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const T=[];for(const O of l){const M=this._createFragmentStyle(O),R=new Promise(H=>{M.once("style.import.load",H),M.once("error",H)}).then(()=>this.mergeAll());if(T.push(R),this.resolvedImports.has(O.url)){M.loadEmpty();continue}const F=O.data||this.importsCache.get(O.url);F?(M.loadJSON(F,{validate:d}),this._isInternalStyle(F)&&(M.globalId=null)):O.url?M.loadURL(O.url,{validate:d}):M.loadEmpty();const q={style:M,id:O.id,config:O.config};if(v){const H=this.fragments.findIndex(({id:re})=>re===v);this.fragments=this.fragments.slice(0,H).concat(q).concat(this.fragments.slice(H))}else this.fragments.push(q)}return Promise.allSettled(T)}getImportGlobalIds(l=this,d=new Set){for(const v of l.fragments)v.style.globalId&&d.add(v.style.globalId),this.getImportGlobalIds(v.style,d);return[...d.values()]}_createFragmentStyle(l){const d=this.scope?a.B(l.id,this.scope):l.id;let v;const T=this._initialConfig&&this._initialConfig[d];(l.config||T)&&(v=Object.assign({},l.config,T));const O=new Us(this.map,{scope:d,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:v,configOptions:this.options,colorThemeOverride:l["color-theme"],configDependentLayers:this._configDependentLayers,indoorDependentLayers:this._indoorDependentLayers});return O.setEventedParent(this.map,{style:O}),O}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this._updateLayers(this._indoorDependentLayers),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(l){return this.isRootStyle()&&(l.fragment||!!l.schema&&l.fragment!==!1)}_load(l,d){if(this._isInternalStyle(l)){const O=Object.assign({},k_,{imports:[{id:"basemap",data:l,url:""}]},l.center?{center:l.center}:{},l.bearing?{bearing:l.bearing}:{},l.pitch?{pitch:l.pitch}:{},l.zoom?{zoom:l.zoom}:{},l.light?{light:l.light}:{});return this._importedAsBasemap=!0,void this._load(O,d)}if(this.updateConfig(this._config,l.schema),d&&Mc(this,wl(l)))return;this._loaded=!0,this.stylesheet=a.dp(l);const v=()=>{for(const F in l.sources)this.addSource(F,l.sources[F],{validate:!1,isInitialLoad:!0});if(l.iconsets)for(const F in l.iconsets)this.addIconset(F,l.iconsets[F]);l.sprite?this._loadIconset(l.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),!this.glyphManager.url&&l.glyphs&&this.glyphManager.setURL(l.glyphs);const O=T_(this.stylesheet.layers);if(this._order=O.map(F=>F.id),this.stylesheet.light&&a.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const F=this.stylesheet.lights[0];this.light=new bt(F.properties,F.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new bt(this.stylesheet.light)),this._layers={};for(const F of O){const q=a.du(F,this.scope,this._styleColorTheme.lut,this.options);q.expressionDependencies.configDependencies.size!==0&&this._configDependentLayers.add(q.fqid),q.expressionDependencies.isIndoorDependent&&this._indoorDependentLayers.add(q.fqid),this._hasAppearances=this._hasAppearances||q.getAppearances().length!==0,q.setEventedParent(this,{layer:{id:q.id}}),this._layers[q.id]=q;const H=this.getOwnLayerSourceCache(q),re=!!this.directionalLight&&this.directionalLight.shadowsEnabled();H&&q.canCastShadows()&&re&&(H.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.addModelURLs(this.stylesheet.models);const M=this.stylesheet.terrain;M&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(M,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new a.z("data",{dataType:"style"}));const R=this.isRootStyle();l.imports?this._loadImports(l.imports,d).then(()=>{this._reloadImports(),this.fire(new a.z(R?"style.load":"style.import.load"))}).catch(F=>{this.fire(new a.y(new Error("Failed to load imports",F))),this.fire(new a.z(R?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new a.z(R?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const T=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(T){const O=this._evaluateColorThemeData(T);this._loadColorTheme(O).then(()=>{v()}).catch(M=>{a.w(`Couldn't load color theme from the stylesheet: ${M}`),v()})}else this._styleColorTheme.lut=null,v()}isRootStyle(){return this.importDepth===0}hasAppearances(){return this._hasAppearances||this.fragments.some(l=>l.style.hasAppearances())}mergeAll(){let l,d,v,T,O,M,R,F,q,H;const re={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(ee=>{if(ee.stylesheet){if(ee.light!=null&&(l=ee.light),ee.stylesheet.lights)for(const oe of ee.stylesheet.lights)oe.type==="ambient"&&ee.ambientLight!=null&&(d=ee.ambientLight),oe.type==="directional"&&ee.directionalLight!=null&&(v=ee.directionalLight);T=this._prioritizeTerrain(T,ee.terrain,ee.stylesheet.terrain),ee.stylesheet.fog&&ee.fog!=null&&(O=ee.fog),ee.stylesheet.snow&&ee.snow!=null&&(M=ee.snow),ee.stylesheet.rain&&ee.rain!=null&&(R=ee.rain),ee.stylesheet.camera!=null&&(H=ee.stylesheet.camera),ee.stylesheet.projection!=null&&(F=ee.stylesheet.projection),ee.stylesheet.transition!=null&&(q=ee.stylesheet.transition),re[ee.scope]=ee._styleColorTheme}}),this.light=l,this.ambientLight=d,this.directionalLight=v,this.fog=O,this.snow=M,this.rain=R,this._styleColorThemeForScope=re,T===null?delete this.terrain:this.terrain=T,this.camera=H||{"camera-projection":"perspective"},this.projection=F||{name:"mercator"},this.transition=Object.assign({},_f,q),this.mergeSources(),this.mergeLayers(),this.mergeIndoor()}forEachFragmentStyle(l){const d=v=>{for(const T of v.fragments)d(T.style);l(v)};d(this)}_prioritizeTerrain(l,d,v){const T=l&&l.drapeRenderMode===0;return v===null?d&&d.drapeRenderMode===0?d:T?l:null:d!=null&&(!l||T||d&&d.drapeRenderMode===1)?d:l}mergeTerrain(){let l;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(d=>{l=this._prioritizeTerrain(l,d.terrain,d.stylesheet.terrain)}),l===null?delete this.terrain:this.terrain=l}mergeProjection(){let l;this.forEachFragmentStyle(d=>{d.stylesheet.projection!=null&&(l=d.stylesheet.projection)}),this.projection=l||{name:"mercator"}}mergeSources(){const l={},d={},v={};this.forEachFragmentStyle(T=>{for(const O in T._sourceCaches){const M=a.B(O,T.scope);l[M]=T._sourceCaches[O]}for(const O in T._otherSourceCaches){const M=a.B(O,T.scope);d[M]=T._otherSourceCaches[O]}for(const O in T._symbolSourceCaches){const M=a.B(O,T.scope);v[M]=T._symbolSourceCaches[O]}}),this._mergedSourceCaches=l,this._mergedOtherSourceCaches=d,this._mergedSymbolSourceCaches=v}mergeIndoor(){this.forEachFragmentStyle(l=>{if(l.stylesheet&&l.stylesheet.indoor)for(const d of Object.values(l.stylesheet.indoor)){const v=d,T=a.B(v.sourceId,l.scope);this._mergedIndoor[T]=new Set(v.sourceLayers||[])}})}mergeLayers(){const l={},d=[],v={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(M=>{for(const R of M._order){const F=M._layers[R];if(F.type==="slot"){const q=a.dq(R);if(l[q])continue;l[q]=[]}F.slot&&l[F.slot]?l[F.slot].push(F):d.push(F)}}),this._mergedOrder=[];let T=-1;const O=(M=[])=>{for(const R of M)if(R.type==="slot"){const F=a.dq(R.id);l[F]&&O(l[F]),this._mergedSlots.push(F)}else{const F=a.B(R.id,R.scope);this._mergedOrder.push(F),v[F]=R,R.is3D(!!this.terrain)&&(this._has3DLayers=!0,T=this._mergedOrder.length-1),R.type==="circle"&&(this._hasCircleLayers=!0),R.type==="symbol"&&(this._hasSymbolLayers=!0),R.type==="clip"&&(this._clipLayerPresent=!0)}};if(O(d),this._has3DLayers){const M={};for(let R=0;R<this._mergedOrder.length;++R){const F=this._mergedOrder[R];M[F]=R===T?1:R<T?v[F].hasOcclusionOpacityProperties?2:0:4}this._mergedOrder.sort((R,F)=>M[R]-M[F])}this._mergedLayers=v,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged(),this._updateDataDrivenEmissiveStrength()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(l){return this.stylesheet.camera=Object.assign({},this.stylesheet.camera,l),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(l){return l.data?(function(d,v,T){const O=Object.assign({},v);for(const R of Object.keys(Uu))O[R]===void 0&&(O[R]=Uu[R].default);const M=new a.a8(Vl,d,new Map(T));return M.setTransitionOrValue(O,T),M.untransitioned().possiblyEvaluate(new a.ac(0,{worldview:void 0}))})(this.scope,l,this.options).get("data"):null}_loadColorTheme(l){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const d=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((v,T)=>{const O="data:image/png;base64,";if(!l||l.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void v();let M=l;M.startsWith(O)||(M=O+M);const R=a.I.from("mapbox-reserved-lut"),F=new Image;F.src=M,F.onerror=()=>{this._styleColorTheme.lutLoading=!1,T(new Error("Failed to load image data"))},F.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==d)return void v();this._styleColorTheme.lutLoading=!1;const{width:q,height:H,data:re}=a.o.getImageData(F);if(H>32)return void T(new Error("The height of the image must be less than or equal to 32 pixels."));if(q!==H*H)return void T(new Error("The width of the image must be equal to the height squared."));this.getImage(R)&&this.removeImage(R),this.addImage(R,{data:new a.q({width:q,height:H},re),pixelRatio:1,sdf:!1,usvg:!1,version:0});const ee=this.imageManager.getImage(R,this.scope);ee?(this._styleColorTheme.lut={image:ee.data,data:l},v()):T(new Error("Missing LUT image."))}})}getLut(l){const d=this._styleColorThemeForScope[l];return d?d.lut:null}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(l){this._spriteRequest=(function(d,v,T){let O,M,R;const F=a.o.devicePixelRatio>1?"@2x":"";let q=a.m(v.transformRequest(v.normalizeSpriteURL(d,F,".json"),a.R.SpriteJSON),(ee,oe)=>{q=null,R||(R=ee,O=oe,re())}),H=a.n(v.transformRequest(v.normalizeSpriteURL(d,F,".png"),a.R.SpriteImage),(ee,oe)=>{H=null,R||(R=ee,M=oe,re())});function re(){if(R)T(R);else if(O&&M){const ee=a.o.getImageData(M),oe={};for(const he in O){const{width:ce,height:de,x:_e,y:Me,sdf:Ce,pixelRatio:Ae,stretchX:We,stretchY:$e,content:Ge}=O[he],Ne=new a.q({width:ce,height:de});a.q.copy(ee,Ne,{x:_e,y:Me},{x:0,y:0},{width:ce,height:de},null),oe[he]={data:Ne,pixelRatio:Ae!==void 0?Ae:1,sdf:Ce!==void 0&&Ce,stretchX:We,stretchY:$e,content:Ge,usvg:!1,version:0}}T(null,oe)}}return{cancel(){q&&(q.cancel(),q=null),H&&(H.cancel(),H=null)}}})(l,this.map._requestManager,(d,v)=>{if(this._spriteRequest=null,d)this.fire(new a.y(d));else if(v){const T=new Map;for(const O in v)T.set(a.I.from(O),v[O]);this.addImages(T)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new a.z("data",{dataType:"style"}))})}addIconset(l,d){if(d.type==="sprite")return void this._loadSprite(d.url);const v=this.getOwnSourceCache(d.source);if(!v)return void this.fire(new a.y(new Error(`Source "${d.source}" as specified by iconset "${l}" does not exist and cannot be used as an iconset source`)));const T=v.getSource();if(T.type!=="raster-array")return void this.fire(new a.y(new Error(`Source "${d.source}" as specified by iconset "${l}" is not a "raster-array" source and cannot be used as an iconset source`)));T.partial=!1;const O=new wd(l,this.scope,v);this.imageManager.addImageProvider(O,this.scope)}removeIconset(l){this.imageManager.removeImageProvider(l,this.scope)}_loadIconset(l){if(!a.h(l)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(l);const d=this.map._spriteFormat==="auto";var v,T;this._spriteRequest=(T=(O,M)=>{if(this._spriteRequest=null,O)d?this._loadSprite(l):this.fire(new a.y(O));else if(M){const R=new Map;for(const F in M)R.set(a.I.from(F),M[F]);this.addImages(R)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new a.z("data",{dataType:"style"}))},a.bu((v=this.map._requestManager).transformRequest(v.normalizeIconsetURL(l),a.R.Iconset),(O,M)=>{if(O)return void T(O);const R={},F=a.dg(new a.bt(M));for(const q of F.icons){const H={version:1,pixelRatio:a.o.devicePixelRatio,content:A0(q),stretchX:q.metadata?O0(q.metadata.stretch_x_areas):void 0,stretchY:q.metadata?O0(q.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:q};R[q.name]=H}T(null,R)}))}_validateLayer(l){const d=this.getOwnSource(l.source);if(!d)return;const v=l.sourceLayer;v&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(v)===-1)&&this.fire(new a.y(new Error(`Source layer "${v}" does not exist on source "${d.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:l}of this.fragments)if(!l.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((l,d)=>{const v=this.fragments[d];return v&&v.style&&(l.data=v.style.serialize()),l})}_serializeSources(){const l={};for(const d in this._sourceCaches){const v=this._sourceCaches[d].getSource();l[v.id]||(l[v.id]=v.serialize())}return l}_serializeLayers(l){const d=[];for(const v of l){const T=this._layers[v];T&&T.type!=="custom"&&d.push(T.serialize())}return d}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_updateDataDrivenEmissiveStrength(){for(const l in this._mergedLayers){const d=this._mergedLayers[l];if(d._transitionablePaint&&d._transitionablePaint._values){const v=d._transitionablePaint._values["line-emissive-strength"];if(v&&v.value&&v.value.isDataDriven())return void(this._hasDataDrivenEmissive=!0)}}this._hasDataDrivenEmissive=!1}hasDataDrivenEmissiveStrength(){return this._hasDataDrivenEmissive}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(l){return l?this.order:this._mergedOrder}isLayerDraped(l){return!!this.terrain&&l.isDraped(this.getLayerSourceCache(l))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(l){const d=this.getOwnLayer(l);if(d)return d;this.fire(new a.y(new Error(`The layer '${l}' does not exist in the map's style.`)))}_checkSource(l){const d=this.getOwnSource(l);if(d)return d;this.fire(new a.y(new Error(`The source '${l}' does not exist in the map's style.`)))}precompilePrograms(l,d){const v=this.map.painter;if(v)for(let T=l.minzoom||0;T<(l.maxzoom||25.5);T++){const O=l.getProgramIds();if(O)for(const M of O){const R=l.getDefaultProgramParams(M,d.zoom,this._styleColorTheme.lut);R&&(v.style=this,this.fog&&(v._fogVisible=!0,R.overrideFog=!0,v.getOrCreateProgram(M,R)),v._fogVisible=!1,R.overrideFog=!1,v.getOrCreateProgram(M,R),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(R.overrideRtt=!0,v.getOrCreateProgram(M,R)))}}}update(l){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(l),this.directionalLight&&this.directionalLight.recalculate(l);const d=this.calculateLightsBrightness();l.brightness=d||0,d!==this._brightness&&(this._brightness=d,this.dispatcher.broadcast("setBrightness",d)),l.worldview!==this._worldview&&(this._worldview=l.worldview,this.dispatcher.broadcast("setWorldview",this._worldview));const v=this._changes.isDirty();let T=!1;if(this._changes.isDirty()){const R=this._changes.getLayerUpdatesByScope();for(const F in R){const{updatedIds:q,removedIds:H}=R[F];(q||H)&&(this._updateWorkerLayers(F,q,H),T=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(l),this.light&&this.light.updateTransitions(l),this.ambientLight&&this.ambientLight.updateTransitions(l),this.directionalLight&&this.directionalLight.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this.snow&&this.snow.updateTransitions(l),this.rain&&this.rain.updateTransitions(l),this._changes.reset()}const O={};for(const R in this._mergedSourceCaches){const F=this._mergedSourceCaches[R];O[R]=F.used,F.used=!1,F.tileCoverLift=0}for(const R of this._mergedOrder){const F=this._mergedLayers[R];if(F.visibility!=="none"&&F.recalculate(l,this._availableImages),!F.isHidden(l.zoom)){const q=this.getLayerSourceCache(F);q&&(q.used=!0,q.tileCoverLift=Math.max(q.tileCoverLift,F.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(F,l)}):this.precompilePrograms(F,l))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&T&&this.mergeLayers();const M=this.imageManager.getPendingImageProviders();for(const R of M)R.sourceCache.used=!0;for(const R in O){const F=this._mergedSourceCaches[R];O[R]!==F.used&&F.getSource().fire(new a.z("data",{sourceDataType:"visibility",dataType:"source",sourceId:F.getSource().id}))}this.light&&this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.snow&&this.snow.recalculate(l),this.rain&&this.rain.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),v&&this.fire(new a.z("data",{dataType:"style"}))}updateImageProviders(){const l=this.imageManager.getPendingImageProviders();for(const d of l){const v=d.resolvePendingRequests(),T=this.getFragmentStyle(d.scope);T&&T.addImages(v)}}_updateTilesForChangedImages(){const l={};for(const d in this._mergedSourceCaches){const v=this._mergedSourceCaches[d].getSource().scope;l[v]=l[v]||this._changes.getUpdatedImages(v),l[v].length!==0&&this._mergedSourceCaches[d].reloadTilesForDependencies(["icons","patterns"],l[v])}for(const d in l)this._changes.resetUpdatedImages(d)}_updateWorkerLayers(l,d,v){const T=this.getFragmentStyle(l);T&&this.dispatcher.broadcast("updateLayers",{layers:d?T._serializeLayers(d):[],scope:l,removedIds:v||[],options:T.options})}setState(l,d){if(this._checkLoaded(),Mc(this,wl(l)))return!1;(l=a.dp(l)).layers=T_(l.layers);const v=(function(M,R){if(!M)return[{command:Cr.setStyle,args:[R]}];let F=[];try{if(!a.by(M.version,R.version))return[{command:Cr.setStyle,args:[R]}];if(a.by(M.center,R.center)||F.push({command:Cr.setCenter,args:[R.center]}),a.by(M.zoom,R.zoom)||F.push({command:Cr.setZoom,args:[R.zoom]}),a.by(M.bearing,R.bearing)||F.push({command:Cr.setBearing,args:[R.bearing]}),a.by(M.pitch,R.pitch)||F.push({command:Cr.setPitch,args:[R.pitch]}),a.by(M.sprite,R.sprite)||F.push({command:Cr.setSprite,args:[R.sprite]}),a.by(M.glyphs,R.glyphs)||F.push({command:Cr.setGlyphs,args:[R.glyphs]}),a.by(M.imports,R.imports)||(function(oe=[],he=[],ce){he=he||[];const de=(oe=oe||[]).map(lu),_e=he.map(lu),Me=oe.reduce(wg,{}),Ce=he.reduce(wg,{}),Ae=de.slice();let We,$e,Ge,Ne;for(We=0,$e=0;We<de.length;We++)Ge=de[We],Ce.hasOwnProperty(Ge)?$e++:(ce.push({command:Cr.removeImport,args:[Ge]}),Ae.splice(Ae.indexOf(Ge,$e),1));for(We=0,$e=0;We<_e.length;We++)Ge=_e[_e.length-1-We],Ae[Ae.length-1-We]!==Ge&&(Me.hasOwnProperty(Ge)?(ce.push({command:Cr.removeImport,args:[Ge]}),Ae.splice(Ae.lastIndexOf(Ge,Ae.length-$e),1)):$e++,Ne=Ae[Ae.length-We],ce.push({command:Cr.addImport,args:[Ce[Ge],Ne]}),Ae.splice(Ae.length-We,0,Ge));for(const Re of he){const Je=Me[Re.id];Je&&(delete Je.data,a.by(Je,Re)||ce.push({command:Cr.updateImport,args:[Re.id,Re]}))}})(M.imports,R.imports,F),a.by(M.transition,R.transition)||F.push({command:Cr.setTransition,args:[R.transition]}),a.by(M.light,R.light)||F.push({command:Cr.setLight,args:[R.light]}),a.by(M.fog,R.fog)||F.push({command:Cr.setFog,args:[R.fog]}),a.by(M.snow,R.snow)||F.push({command:Cr.setSnow,args:[R.snow]}),a.by(M.rain,R.rain)||F.push({command:Cr.setRain,args:[R.rain]}),a.by(M.projection,R.projection)||F.push({command:Cr.setProjection,args:[R.projection]}),a.by(M.lights,R.lights)||F.push({command:Cr.setLights,args:[R.lights]}),a.by(M.camera,R.camera)||F.push({command:Cr.setCamera,args:[R.camera]}),a.by(M.iconsets,R.iconsets)||(function(oe,he,ce){let de;for(de in he=he||{},oe=oe||{})oe.hasOwnProperty(de)&&(he.hasOwnProperty(de)||ce.push({command:Cr.removeIconset,args:[de]}));for(de in he){if(!he.hasOwnProperty(de))continue;const _e=he[de];oe.hasOwnProperty(de)?a.by(oe[de],_e)||(ce.push({command:Cr.removeIconset,args:[de]}),ce.push({command:Cr.addIconset,args:[de,_e]})):ce.push({command:Cr.addIconset,args:[de,_e]})}})(M.iconsets,R.iconsets,F),!a.by(M["color-theme"],R["color-theme"]))return[{command:Cr.setStyle,args:[R]}];const q={},H=[];(function(oe,he,ce,de){let _e;for(_e in he=he||{},oe=oe||{})oe.hasOwnProperty(_e)&&(he.hasOwnProperty(_e)||xg(_e,ce,de));for(_e in he){if(!he.hasOwnProperty(_e))continue;const Me=he[_e];oe.hasOwnProperty(_e)?a.by(oe[_e],Me)||(oe[_e].type==="geojson"&&Me.type==="geojson"&&sh(oe,he,_e)?ce.push({command:Cr.setGeoJSONSourceData,args:[_e,Me.data]}):el(_e,he,ce,de)):df(_e,he,ce)}})(M.sources,R.sources,H,q);const re=[];M.layers&&M.layers.forEach(oe=>{oe.source&&q[oe.source]?F.push({command:Cr.removeLayer,args:[oe.id]}):re.push(oe)});let ee=M.terrain;ee&&q[ee.source]&&(F.push({command:Cr.setTerrain,args:[void 0]}),ee=void 0),F=F.concat(H),a.by(ee,R.terrain)||F.push({command:Cr.setTerrain,args:[R.terrain]}),(function(oe,he,ce){he=he||[];const de=(oe=oe||[]).map(lu),_e=he.map(lu),Me=oe.reduce(wg,{}),Ce=he.reduce(wg,{}),Ae=de.slice(),We=Object.create(null);let $e,Ge,Ne,Re,Je,nt,st;for($e=0,Ge=0;$e<de.length;$e++)Ne=de[$e],Ce.hasOwnProperty(Ne)?Ge++:(ce.push({command:Cr.removeLayer,args:[Ne]}),Ae.splice(Ae.indexOf(Ne,Ge),1));for($e=0,Ge=0;$e<_e.length;$e++)Ne=_e[_e.length-1-$e],Ae[Ae.length-1-$e]!==Ne&&(Me.hasOwnProperty(Ne)?(ce.push({command:Cr.removeLayer,args:[Ne]}),Ae.splice(Ae.lastIndexOf(Ne,Ae.length-Ge),1)):Ge++,nt=Ae[Ae.length-$e],ce.push({command:Cr.addLayer,args:[Ce[Ne],nt]}),Ae.splice(Ae.length-$e,0,Ne),We[Ne]=!0);for($e=0;$e<_e.length;$e++)if(Ne=_e[$e],Re=Me[Ne],Je=Ce[Ne],!We[Ne]&&!a.by(Re,Je))if(a.by(Re.source,Je.source)&&a.by(Re["source-layer"],Je["source-layer"])&&a.by(Re.type,Je.type)){for(st in lh(Re.layout,Je.layout,ce,Ne,null,Cr.setLayoutProperty),lh(Re.paint,Je.paint,ce,Ne,null,Cr.setPaintProperty),a.by(Re.slot,Je.slot)||ce.push({command:Cr.setSlot,args:[Ne,Je.slot]}),a.by(Re.filter,Je.filter)||ce.push({command:Cr.setFilter,args:[Ne,Je.filter]}),a.by(Re.minzoom,Je.minzoom)&&a.by(Re.maxzoom,Je.maxzoom)||ce.push({command:Cr.setLayerZoomRange,args:[Ne,Je.minzoom,Je.maxzoom]}),Re)Re.hasOwnProperty(st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&st!=="slot"&&(st.indexOf("paint.")===0?lh(Re[st],Je[st],ce,Ne,st.slice(6),Cr.setPaintProperty):a.by(Re[st],Je[st])||ce.push({command:Cr.setLayerProperty,args:[Ne,st,Je[st]]}));for(st in Je)Je.hasOwnProperty(st)&&!Re.hasOwnProperty(st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&st!=="slot"&&(st.indexOf("paint.")===0?lh(Re[st],Je[st],ce,Ne,st.slice(6),Cr.setPaintProperty):a.by(Re[st],Je[st])||ce.push({command:Cr.setLayerProperty,args:[Ne,st,Je[st]]}))}else ce.push({command:Cr.removeLayer,args:[Ne]}),nt=Ae[Ae.lastIndexOf(Ne)+1],ce.push({command:Cr.addLayer,args:[Je,nt]})})(re,R.layers,F)}catch(q){console.warn("Unable to compute style diff:",q),F=[{command:Cr.setStyle,args:[R]}]}return F})(this.serialize(),l).filter(M=>!(M.command in i1));if(v.length===0)return!1;const T=v.filter(M=>!(M.command in r1));if(T.length>0)throw new Error(`Unimplemented: ${T.map(M=>M.command).join(", ")}.`);const O=[];return v.forEach(M=>{O.push(this[M.command](...M.args))}),d&&Promise.all(O).then(d).catch(d),this.stylesheet=l,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}_updateWorkerModels(){this._availableModels=this.modelManager.getModelURIs(this.scope),this.dispatcher.broadcast("setModels",{scope:this.scope,models:this._availableModels})}addImages(l){if(l.size===0)return this;for(const[d,v]of l.entries()){if(this.getImage(d))return this.fire(new a.y(new Error(`An image with the name "${d.name}" already exists.`)));this.imageManager.addImage(d,this.scope,v),this._changes.updateImage(d,this.scope)}return this._updateWorkerImages(),this.fire(new a.z("data",{dataType:"style"})),this}addImage(l,d){return this.getImage(l)?this.fire(new a.y(new Error(`An image with the name "${l.name}" already exists.`))):(this.imageManager.addImage(l,this.scope,d),this._changes.updateImage(l,this.scope),this._updateWorkerImages(),this.fire(new a.z("data",{dataType:"style"})),this)}updateImage(l,d,v=!1){this.imageManager.updateImage(l,this.scope,d),v&&(this._changes.updateImage(l,this.scope),this._updateWorkerImages(),this.fire(new a.z("data",{dataType:"style"})))}getImage(l){return this.imageManager.getImage(l,this.scope)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l,this.scope),this._changes.updateImage(l,this.scope),this._updateWorkerImages(),this.fire(new a.z("data",{dataType:"style"})),this):this.fire(new a.y(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}getActualScope(){return this._importedAsBasemap?"basemap":this.scope}addModelURLs(l){return this.modelManager.addModelURLs(l,this.getActualScope()),this._updateWorkerModels(),this.fire(new a.z("data",{dataType:"style"})),this}addModel(l,d,v={}){return this._checkLoaded(),this._validate(Qe,`models.${l}`,d,null,v)||(this.modelManager.addModel(l,d,this.getActualScope()),this.fire(new a.z("data",{dataType:"style"}))),this}hasModel(l){return this.modelManager.hasModel(l,this.getActualScope())}removeModel(l){return this.hasModel(l)?(this.modelManager.removeModel(l,this.getActualScope(),!1,!0),this.fire(new a.z("data",{dataType:"style"})),this):this.fire(new a.y(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.getActualScope())}addSource(l,d,v={}){if(this._checkLoaded(),this.getOwnSource(l)!==void 0)throw new Error(`There is already a source with ID "${l}".`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(vg,`sources.${l}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const T=iu(l,d,this.dispatcher,this);T.scope=this.scope,T.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(T.id),source:T.serialize(),sourceId:T.id}));const O=M=>{const R=(M?"symbol:":"other:")+T.id,F=a.B(R,this.scope),q=this._sourceCaches[R]=new eo(F,T,M);(M?this._symbolSourceCaches:this._otherSourceCaches)[T.id]=q,q.onAdd(this.map)};O(!1),d.type!=="vector"&&d.type!=="geojson"||O(!0),T.onAdd&&T.onAdd(this.map),v.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(l){this._checkLoaded();const d=this.getOwnSource(l);if(!d)throw new Error("There is no source with this ID");for(const T in this._layers)if(this._layers[T].source===l)return this.fire(new a.y(new Error(`Source "${l}" cannot be removed while layer "${T}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===l)return this.fire(new a.y(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));if(this.stylesheet.iconsets){const T=Object.entries(this.stylesheet.iconsets).find(([O,M])=>M.type==="source"&&M.source===l);if(T)return this.fire(new a.y(new Error(`Source "${l}" cannot be removed while iconset "${T[0]}" is using it.`)))}const v=this.getOwnSourceCaches(l);for(const T of v){const O=a.dq(T.id);delete this._sourceCaches[O],this._changes.discardSourceCacheUpdate(T.id),T.fire(new a.z("data",{sourceDataType:"metadata",dataType:"source",sourceId:T.getSource().id})),T.setEventedParent(null),T.clearTiles()}return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],this.mergeSources(),d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(l,d){this._checkLoaded(),this.getOwnSource(l).setData(d),this._changes.setDirty()}getOwnSource(l){const d=this.getOwnSourceCache(l);return d&&d.getSource()}getOwnSources(){const l=[];for(const d in this._otherSourceCaches){const v=this.getOwnSourceCache(d);v&&l.push(v.getSource())}return l}areTilesLoaded(){const l=this._mergedSourceCaches;for(const d in l){const v=l[d]._tiles;for(const T in v){const O=v[T];if(O.state!=="loaded"&&O.state!=="errored")return!1}}return!0}setLights(l){if(this._checkLoaded(),!l)return delete this.ambientLight,void delete this.directionalLight;const d=this._getTransitionParameters();for(const O of l){if(this._validate(Vt,"lights",O))return;switch(O.type){case"ambient":if(this.ambientLight){const M=this.ambientLight;M.set(O),M.updateTransitions(d)}else this.ambientLight=new Or(O,ji(),this.scope,this.options);break;case"directional":if(this.directionalLight){const M=this.directionalLight;M.set(O),M.updateTransitions(d)}else this.directionalLight=new Or(O,li(),this.scope,this.options)}}const v=Object.assign(d,{worldview:this.map.getWorldview()}),T=new a.ac(this.z||0,v);this.ambientLight&&this.ambientLight.recalculate(T),this.directionalLight&&this.directionalLight.recalculate(T),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const l=this.directionalLight,d=this.ambientLight;if(!l||!d)return;const v=ee=>.2126*(ee[0]<=.03928?ee[0]/12.92:Math.pow((ee[0]+.055)/1.055,2.4))+.7152*(ee[1]<=.03928?ee[1]/12.92:Math.pow((ee[1]+.055)/1.055,2.4))+.0722*(ee[2]<=.03928?ee[2]/12.92:Math.pow((ee[2]+.055)/1.055,2.4)),T=l.properties.get("color").toNonPremultipliedRenderColor(null).toArray01(),O=l.properties.get("intensity"),M=l.properties.get("direction"),R=1-a.d4(M.x,M.y,M.z)[2]/90,F=v(T)*O*R,q=d.properties.get("color").toNonPremultipliedRenderColor(null).toArray01(),H=d.properties.get("intensity"),re=v(q)*H;return Number(((F+re)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const l=[];return this.directionalLight&&l.push(this.directionalLight.get()),this.ambientLight&&l.push(this.ambientLight.get()),l}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(l){if(l==null||l===""&&this.isRootStyle())return this;if(a.dr(l)){const d=a.ds(l),v=this.fragments.find(({id:O})=>O===d);if(!v)return;const T=a.dq(l);return v.style.getFragmentStyle(T)}{const d=this.fragments.find(({id:v})=>v===l);return d?d.style:void 0}}setFeaturesetSelectors(l){if(!l)return;const d={},v=(T,O="")=>`${T}::${O}`;this._featuresetSelectors={};for(const T in l){const O=this._featuresetSelectors[T]=[];for(const M of l[T].selectors){if(M.featureNamespace){const F=this.getOwnLayer(M.layer);if(!F){a.w(`Layer is undefined for selector: ${M.layer}`);continue}const q=v(F.source,F.sourceLayer);if(q in d&&d[q]!==M.featureNamespace){a.w(`"featureNamespace ${M.featureNamespace} of featureset ${T}'s selector is not associated to the same source, skip this selector`);continue}d[q]=M.featureNamespace}let R;if(M.properties)for(const F in M.properties){const q=a.U(M.properties[F]);q.result==="success"&&(R=R||{},R[F]=q.value)}O.push({layerId:M.layer,namespace:M.featureNamespace,properties:R,uniqueFeatureID:M._uniqueFeatureID})}}}getFeaturesetDescriptors(l){const d=this.getFragmentStyle(l);if(!d||!d.stylesheet.featuresets)return[];const v=[];for(const T in d.stylesheet.featuresets)v.push({featuresetId:T,importId:d.scope?d.scope:void 0});return v}getFeaturesetLayers(l,d){const v=this.getFragmentStyle(d),T=v.stylesheet.featuresets;if(!T||!T[l])return this.fire(new a.y(new Error(`The featureset '${l}' does not exist in the map's style and cannot be queried.`))),[];const O=[];for(const M of T[l].selectors){const R=v.getOwnLayer(M.layer);R&&O.push(R)}return O}getConfigProperty(l,d){const v=this.getFragmentStyle(l);if(!v)return null;const T=a.B(d,v.scope),O=v.options.get(T),M=O?O.value||O.default:null;return M?M.serialize():null}isIndoorEnabled(){return Object.keys(this._mergedIndoor).length>0}getIndoorSourceLayers(l,d){const v=a.B(l,d);return this._mergedIndoor[v]}setIndoorData(l,d){this.indoorManager.setIndoorData(d)}updateIndoorDependentLayers(){this._updateLayers(this._indoorDependentLayers),this.map._styleDirty=!0,this.map.triggerRepaint()}setConfigProperty(l,d,v){const T=this.getFragmentStyle(l);if(!T)return;const O=T.stylesheet.schema;if(!O||!O[d])return;const M=a.U(v);if(M.result!=="success")return void Mc(this,M.value);const R=M.value.expression,F=a.B(d,T.scope),q=T.options.get(F);if(!q)return;let H;const{minValue:re,maxValue:ee,stepValue:oe,type:he,values:ce}=O[d],de=a.U(O[d].default);de.result==="success"&&(H=de.value.expression),H?(this.options.set(F,Object.assign({},q,{value:R,default:H,minValue:re,maxValue:ee,stepValue:oe,type:he,values:ce})),this.updateConfigDependencies(d)):this.fire(new a.y(new Error(`No schema defined for the config option "${d}" in the "${l}" fragment.`)))}getConfig(l){const d=this.getFragmentStyle(l);if(!d)return null;const v=d.stylesheet.schema;if(!v)return null;const T={};for(const O in v){const M=a.B(O,d.scope),R=d.options.get(M),F=R?R.value||R.default:null;T[O]=F?F.serialize():null}return T}setConfig(l,d){const v=this.getFragmentStyle(l);v&&(v.updateConfig(d,v.stylesheet.schema),this.updateConfigDependencies())}getSchema(l){const d=this.getFragmentStyle(l);return d?d.stylesheet.schema:null}setSchema(l,d){const v=this.getFragmentStyle(l);v&&(v.stylesheet.schema=d,v.updateConfig(v._config,d),this.updateConfigDependencies())}updateConfig(l,d){if(this._config=l,l||d)if(d)for(const v in d){let T,O;const M=a.U(d[v].default);if(M.result==="success"&&(T=M.value.expression),l&&l[v]!==void 0){const ee=a.U(l[v]);ee.result==="success"&&(O=ee.value.expression)}const{minValue:R,maxValue:F,stepValue:q,type:H,values:re}=d[v];if(T){const ee=a.B(v,this.scope);this.options.set(ee,{default:T,value:O,minValue:R,maxValue:F,stepValue:q,type:H,values:re})}else this.fire(new a.y(new Error(`No schema defined for config option "${v}".`)))}else this.fire(new a.y(new Error("Attempting to set config for a style without schema.")))}_updateLayers(l,d=()=>!0){for(const v of l){const T=this.getLayer(v);T&&d(T)&&(T.possiblyEvaluateVisibility(),this._updateLayer(T),this._changes.setDirty())}}updateConfigDependencies(l){this._updateLayers(this._configDependentLayers,d=>!l||d.expressionDependencies.configDependencies.has(l)),this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(d=>{const v=d._styleColorTheme.colorThemeOverride?d._styleColorTheme.colorThemeOverride:d._styleColorTheme.colorTheme;if(v){const T=d._evaluateColorThemeData(v);(!d._styleColorTheme.lut&&T!==""||d._styleColorTheme.lut&&T!==d._styleColorTheme.lut.data)&&d.setColorTheme(v)}}),this._changes.setDirty()}addLayer(l,d,v={}){this._checkLoaded();const T=l.id;if(this._layers[T])return void this.fire(new a.y(new Error(`Layer with id "${T}" already exists on this map`)));let O;if(l.type==="custom"){if(Mc(this,a.dt(l)))return;O=a.du(l,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof l.source=="object"&&(this.addSource(T,l.source),l=a.dp(l),l=Object.assign(l,{source:T})),this._validate(ut,`layers.${T}`,l,{arrayIndex:-1},v))return;O=a.du(l,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(O),O.setEventedParent(this,{layer:{id:T}})}const M=a.B(O.source,O.scope);O.expressionDependencies.configDependencies.size!==0&&this._configDependentLayers.add(M),O.expressionDependencies.isIndoorDependent&&this._indoorDependentLayers.add(M);let R=this._order.length;if(d){const re=this._order.indexOf(d);if(re===-1)return void this.fire(new a.y(new Error(`Layer with id "${d}" does not exist on this map.`)));O.slot&&O.slot!==this._layers[d].slot?a.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`):R=re}this._order.splice(R,0,T),this._handleLayerOrderChange(),this._layers[T]=O;const F=this.getOwnLayerSourceCache(O),q=!!this.directionalLight&&this.directionalLight.shadowsEnabled();F&&O.canCastShadows()&&q&&(F.castsShadows=!0);const H=this._changes.getRemovedLayer(O);if(H&&O.source&&F&&O.type!=="custom"){this._changes.discardLayerRemoval(O);const re=a.B(O.source,O.scope);H.type!==O.type?this._changes.updateSourceCache(re,"clear"):(this._changes.updateSourceCache(re,"reload"),F.pause())}this._updateLayer(O),O.onAdd&&O.onAdd(this.map),O.scope=this.scope,this.mergeLayers()}moveLayer(l,d){this._checkLoaded();const v=this._checkLayer(l);if(!v||l===d)return;const T=this._order.indexOf(l);this._order.splice(T,1);let O=this._order.length;if(d){const M=this._order.indexOf(d);if(M===-1)return void this.fire(new a.y(new Error(`Layer with id "${d}" does not exist on this map.`)));v.slot&&v.slot!==this._layers[d].slot?a.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`):O=M}this._order.splice(O,0,l),this._changes.setDirty(),this._handleLayerOrderChange(),this.mergeLayers()}removeLayer(l){this._checkLoaded();const d=this._checkLayer(l);if(!d)return;d.setEventedParent(null);const v=this._order.indexOf(l);this._order.splice(v,1),delete this._layers[l],this._changes.setDirty(),this._handleLayerOrderChange(),this._configDependentLayers.delete(d.fqid),this._indoorDependentLayers.delete(d.fqid),this._changes.removeLayer(d);const T=this.getOwnLayerSourceCache(d);if(T&&T.castsShadows){let O=!1;for(const M in this._layers)if(this._layers[M].source===d.source&&this._layers[M].canCastShadows()){O=!0;break}T.castsShadows=O}d.onRemove&&d.onRemove(this.map),this.mergeLayers()}getOwnLayer(l){return this._layers[l]}hasLayer(l){return l in this._mergedLayers}hasLayerType(l){for(const d in this._layers)if(this._layers[d].type===l)return!0;return!1}setLayerZoomRange(l,d,v){this._checkLoaded();const T=this._checkLayer(l);T&&(T.minzoom===d&&T.maxzoom===v||(d!=null&&(T.minzoom=d),v!=null&&(T.maxzoom=v),this._updateLayer(T)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(l,d){this._checkLoaded();const v=this._checkLayer(l);v&&v.slot!==d&&(v.slot=d,this._updateLayer(v))}setFilter(l,d,v={}){this._checkLoaded();const T=this._checkLayer(l);if(T&&!a.by(T.filter,d))return d==null?(T.filter=void 0,void this._updateLayer(T)):void(this._validate(me,`layers.${T.id}.filter`,d,{layerType:T.type},v)||(T.filter=a.dp(d),this._updateLayer(T)))}getFilter(l){const d=this._checkLayer(l);if(d)return a.dp(d.filter)}setLayoutProperty(l,d,v,T={}){this._checkLoaded();const O=this._checkLayer(l);if(O&&!a.by(O.getLayoutProperty(d),v)){if(v!=null&&(!T||T.validate!==!1)&&Mc(O,Le.call(wl,{key:`layers.${l}.layout.${d}`,layerType:O.type,objectKey:d,value:v,styleSpec:a.a6,style:{glyphs:!0,sprite:!0}})))return;O.setLayoutProperty(d,v),O.expressionDependencies.configDependencies.size!==0&&this._configDependentLayers.add(O.fqid),O.expressionDependencies.isIndoorDependent&&this._indoorDependentLayers.add(O.fqid),this._updateLayer(O)}}setLayerProperty(l,d,v,T={}){this._checkLoaded();const O=this._checkLayer(l);O&&(d==="appearances"?(O.setAppearances(v),this._changes.setDirty()):O.isPaintProperty(d)?this.setPaintProperty(l,d,v,T):this.setLayoutProperty(l,d,v,T))}getLayoutProperty(l,d){const v=this._checkLayer(l);if(v)return v.getLayoutProperty(d)}setPaintProperty(l,d,v,T={}){this._checkLoaded();const O=this._checkLayer(l);if(!O||a.by(O.getPaintProperty(d),v)||v!=null&&(!T||T.validate!==!1)&&Mc(O,we.call(wl,{key:`layers.${l}.paint.${d}`,layerType:O.type,objectKey:d,value:v,styleSpec:a.a6})))return;const M=O.setPaintProperty(d,v);O.expressionDependencies.configDependencies.size!==0&&this._configDependentLayers.add(O.fqid),O.expressionDependencies.isIndoorDependent&&this._indoorDependentLayers.add(O.fqid),M&&this._updateLayer(O),this._changes.updatePaintProperties(O)}getPaintProperty(l,d){const v=this._checkLayer(l);if(v)return v.getPaintProperty(d)}setFeatureState(l,d){if(this._checkLoaded(),"target"in l){if("featuresetId"in l.target){const{featuresetId:F,importId:q}=l.target,H=this.getFragmentStyle(q),re=H.getFeaturesetLayers(F);for(const{source:ee,sourceLayer:oe}of re)H.setFeatureState({id:l.id,source:ee,sourceLayer:oe},d)}else if("layerId"in l.target){const{layerId:F}=l.target,q=this.getLayer(F);this.setFeatureState({id:l.id,source:q.source,sourceLayer:q.sourceLayer},d)}return}const v=l.source,T=l.sourceLayer,O=this._checkSource(v);if(!O)return;const M=O.type;if(M==="geojson"&&T)return void this.fire(new a.y(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(M==="vector"&&!T)return void this.fire(new a.y(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new a.y(new Error("The feature id parameter must be provided.")));const R=this.getOwnSourceCaches(v);for(const F of R)F.setFeatureState(T,l.id,d)}removeFeatureState(l,d){if(this._checkLoaded(),"target"in l){if("featuresetId"in l.target){const{featuresetId:F,importId:q}=l.target,H=this.getFragmentStyle(q),re=H.getFeaturesetLayers(F);for(const{source:ee,sourceLayer:oe}of re)H.removeFeatureState({id:l.id,source:ee,sourceLayer:oe},d)}else if("layerId"in l.target){const{layerId:F}=l.target,q=this.getLayer(F);this.removeFeatureState({id:l.id,source:q.source,sourceLayer:q.sourceLayer},d)}return}const v=l.source,T=this._checkSource(v);if(!T)return;const O=T.type,M=O==="vector"?l.sourceLayer:void 0;if(O==="vector"&&!M)return void this.fire(new a.y(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new a.y(new Error("A feature id is required to remove its specific state property.")));const R=this.getOwnSourceCaches(v);for(const F of R)F.removeFeatureState(M,l.id,d)}getFeatureState(l){if(this._checkLoaded(),"target"in l){let O;if("featuresetId"in l.target){const{featuresetId:M,importId:R}=l.target,F=this.getFragmentStyle(R),q=F.getFeaturesetLayers(M);for(const{source:H,sourceLayer:re}of q){const ee=F.getFeatureState({id:l.id,source:H,sourceLayer:re});if(ee&&!O)O=ee;else if(!a.by(O,ee))return void this.fire(new a.y(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in l.target){const{layerId:M}=l.target,R=this.getLayer(M);O=this.getFeatureState({id:l.id,source:R.source,sourceLayer:R.sourceLayer})}return O}const d=l.source,v=l.sourceLayer,T=this._checkSource(d);if(T){if(T.type!=="vector"||v)return l.id===void 0&&this.fire(new a.y(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(d)[0].getFeatureState(v,l.id);this.fire(new a.y(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(l){return this.stylesheet.transition=Object.assign({},this.stylesheet.transition,l),this.transition=this.stylesheet.transition,this}getTransition(){return Object.assign({},this.stylesheet.transition)}serialize(){this._checkLoaded();const l=this.getTerrain(),d=l&&this.terrain&&this.terrain.scope===this.scope?l:this.stylesheet.terrain;return a.dv({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,featuresets:this.stylesheet.featuresets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:d,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,indoor:this.stylesheet.indoor,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},v=>v!==void 0)}_updateFilteredLayers(l){for(const d of Object.values(this._mergedLayers))l(d)&&this._updateLayer(d)}_updateLayer(l){this._changes.updateLayer(l);const d=this.getLayerSourceCache(l),v=a.B(l.source,l.scope),T=this._changes.getUpdatedSourceCaches();l.source&&!T[v]&&d&&d.getSource().type!=="raster"&&(this._changes.updateSourceCache(v,"reload"),d.pause()),l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const d=R=>this._mergedLayers[R].is3D(!!this.terrain),v=this.order,T={},O=[];for(let R=v.length-1;R>=0;R--){const F=v[R];if(d(F)){T[F]=R;for(const q of l){const H=q[F];if(H)for(const re of H)O.push(re)}}}O.sort((R,F)=>F.intersectionZ-R.intersectionZ);const M=[];for(let R=v.length-1;R>=0;R--){const F=v[R];if(d(F))for(let q=O.length-1;q>=0;q--){const H=O[q].feature;if(H.layer&&T[H.layer.id]<R)break;M.push(H),O.pop()}else for(const q of l){const H=q[F];if(H)for(const re of H)M.push(re.feature)}}return M}queryRasterValue(l,d,v){const T=this.getOwnSource(l);return T?T.type!=="raster-array"?(this.fire(new a.y(new Error('queryRasterValue support only "raster-array" sources.'))),Promise.resolve(null)):T.queryRasterArrayValue(d,v):(this.fire(new a.y(new Error(`Source with id "${l}" does not exist in the style.`))),Promise.resolve(null))}queryRenderedFeatures(l,d,v){let T;d&&!Array.isArray(d)&&d.filter&&(this._validate(me,"queryRenderedFeatures.filter",d.filter,null,d),T=a.b6(d.filter));const O={},M=H=>{if(R_.has(H.type))return;const re=this.getOwnLayerSourceCache(H),ee=O[re.id]=O[re.id]||{sourceCache:re,layers:{},has3DLayers:!1};H.is3D(!!this.terrain)&&(ee.has3DLayers=!0),ee.layers[H.fqid]=ee.layers[H.fqid]||{styleLayer:H,targets:[]},ee.layers[H.fqid].targets.push({filter:T})};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new a.y(new Error("parameters.layers must be an Array."))),[];for(const H of d.layers){const re=this._layers[H];if(!re)return this.fire(new a.y(new Error(`The layer '${H}' does not exist in the map's style and cannot be queried for features.`))),[];M(re)}}else for(const H in this._layers)M(this._layers[H]);const R=this._queryRenderedFeatures(l,O,v),F=this._flattenAndSortRenderedFeatures(R),q=[];for(const H of F)a.dw(H.layer.id)===this.scope&&q.push(H);return q}queryRenderedFeatureset(l,d,v){let T;d&&!Array.isArray(d)&&d.filter&&(this._validate(me,"queryRenderedFeatures.filter",d.filter,null,d),T=a.b6(d.filter));const O="mock",M=[];if(d&&d.target)M.push(Object.assign({},d,{targetId:O,filter:T}));else{const H=this.getFeaturesetDescriptors();for(const re of H)M.push({targetId:O,filter:T,target:re});for(const{style:re}of this.fragments){const ee=re.getFeaturesetDescriptors();for(const oe of ee)M.push({targetId:O,filter:T,target:oe})}}const R=this.queryRenderedTargets(l,M,v),F=[],q=new Set;for(const H of R)for(const re of H.variants[O])kp(re,H,q)||F.push(new a.dx(H,re));return F}queryRenderedTargets(l,d,v){const T={},O=(R,F,q,H)=>{const re=T[F.id]=T[F.id]||{sourceCache:F,layers:{},has3DLayers:!1};if(re.layers[R.fqid]=re.layers[R.fqid]||{styleLayer:R,targets:[]},R.is3D(!!this.terrain)&&(re.has3DLayers=!0),!H)return q.uniqueFeatureID=!1,void re.layers[R.fqid].targets.push(q);re.layers[R.fqid].targets.push(Object.assign({},q,{namespace:H.namespace,properties:H.properties,uniqueFeatureID:H.uniqueFeatureID}))};for(const R of d)if("featuresetId"in R.target){const{featuresetId:F,importId:q}=R.target,H=this.getFragmentStyle(q);if(!H||!H._featuresetSelectors)continue;const re=H._featuresetSelectors[F];if(!re){this.fire(new a.y(new Error(`The featureset '${F}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const ee of re){const oe=H.getOwnLayer(ee.layerId);oe&&!R_.has(oe.type)&&O(oe,H.getOwnLayerSourceCache(oe),R,ee)}}else if("layerId"in R.target){const{layerId:F}=R.target,q=this.getLayer(F);if(!q||R_.has(q.type))continue;O(q,this.getLayerSourceCache(q),R)}const M=this._queryRenderedFeatures(l,T,v);return this._flattenAndSortRenderedFeatures(M)}_queryRenderedFeatures(l,d,v){const T=[],O=!!this.map._showQueryGeometry,M=wi.createFromScreenPoints(l,v);for(const R in d){const F=Ac(M,d[R],this._availableImages,v,O,this.getActualScope());Object.keys(F).length&&T.push(F)}if(this.placement)for(const R in d){if(!d[R].sourceCache._onlySymbols)continue;const F=Zx(M.screenGeometry,d[R],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData,this.map.getWorldview());Object.keys(F).length&&T.push(F)}return T}querySourceFeatures(l,d){const v=d&&d.filter;v&&this._validate(me,"querySourceFeatures.filter",v,null,d);let T=[];const O=this.getOwnSourceCaches(l);for(const M of O)T=T.concat(g0(M,d));return T}addSourceType(l,d,v){return Us.getSourceType(l)?v(new Error(`A source type called "${l}" already exists.`)):(Us.setSourceType(l,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:d.workerSourceURL},v):v(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(l,d,v={}){this._checkLoaded();const T=this.light.getLight();let O=!1;for(const R in l)if(!a.by(l[R],T[R])){O=!0;break}if(!O)return;const M=this._getTransitionParameters();this.light.setLight(l,d,v),this.light.updateTransitions(M)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=a.o.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&a.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(l,d=1){if(this._checkLoaded(),!l)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),d===0&&delete this.terrain,l===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let v=l;const T=!("source"in l)||l.source==null;if(d===1){if(this.disableElevatedTerrain)return;if("source"in v&&typeof v.source=="object"){const R="terrain-dem-src";this.addSource(R,v.source),v=a.dp(v),v=Object.assign(v,{source:R})}const O=Object.assign({},v),M={};if(this.terrain&&T){O.source=this.terrain.get().source;const R=this.terrain?this.getFragmentStyle(this.terrain.scope):null;R&&(M.style=R.serialize())}if(this._validate(Tc,"terrain",O,M))return}if(!this.terrain||this.terrain.scope!==this.scope&&!T||this.terrain&&d!==this.terrain.drapeRenderMode){if(!v)return;this._createTerrain(v,d),this.fire(new a.z("data",{dataType:"style"}))}else{const O=this.terrain,M=O.get();for(const R of Object.keys(a.a6.terrain))!v.hasOwnProperty(R)&&a.a6.terrain[R].default&&(v[R]=a.a6.terrain[R].default);for(const R in l)if(!a.by(l[R],M[R])){O.set(l,this.options),this.stylesheet.terrain=l;const F=this._getTransitionParameters({duration:0});O.updateTransitions(F),this.fire(new a.z("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const d=this.fog=new Hn(l,this.map.transform,this.scope,this.options);this.stylesheet.fog=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}_createSnow(l){const d=this.snow=new ya(l,this.map.transform,this.scope,this.options);this.stylesheet.snow=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}_createRain(l){const d=this.rain=new ki(l,this.map.transform,this.scope,this.options);this.stylesheet.rain=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog;if(!a.by(d.get(),l)){d.set(l,this.options),this.stylesheet.fog=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}}else this._createFog(l);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(l){if(this._checkLoaded(),!l)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const d=this.snow;if(!a.by(d.get(),l)){d.set(l,this.options),this.stylesheet.snow=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}}else this._createSnow(l);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(l){if(this._checkLoaded(),!l)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const d=this.rain;if(!a.by(d.get(),l)){d.set(l,this.options),this.stylesheet.rain=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}}else this._createRain(l);this._markersNeedUpdate=!0}_reloadColorTheme(){const l=()=>{for(const T in this._layers)this._layers[T].lut=this._styleColorTheme.lut;for(const T in this._sourceCaches)this._sourceCaches[T].clearTiles()},d=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!d)return this._styleColorTheme.lut=null,void l();const v=this._evaluateColorThemeData(d);this._loadColorTheme(v).then(()=>{this.fire(new a.z("colorthemeset")),l()}).catch(T=>{a.w(`Couldn't set color theme: ${T}`)})}setColorTheme(l){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&a.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=l,this._reloadColorTheme()}setImportColorTheme(l,d){const v=this.getFragmentStyle(l);v&&(v._styleColorTheme.colorThemeOverride=d,v._reloadColorTheme())}_getTransitionParameters(l){return{now:a.o.now(),transition:Object.assign(this.transition,l)}}updateDrapeFirstLayers(){if(!this.terrain)return;const l=[],d=[];for(const v of this._mergedOrder)this.isLayerDraped(this._mergedLayers[v])?l.push(v):d.push(v);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...d)}_createTerrain(l,d){const v=this.terrain=new Ft(l,d,this.scope,this.options,this.map.getWorldview());d===1&&(this.stylesheet.terrain=l),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const T=this._getTransitionParameters({duration:0});v.updateTransitions(T)}_force3DLayerUpdate(){for(const l in this._layers){const d=this._layers[l];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const d=this._layers[l];d.type==="symbol"&&this._updateLayer(d)}}_validate(l,d,v,T,O={}){if(O&&O.validate===!1)return!1;const M=Object.assign({},this.serialize());return Mc(this,l.call(wl,Object.assign({key:d,style:M,value:v,styleSpec:a.a6},T)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.dy.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._mergedLayers)this._mergedLayers[l].setEventedParent(null);for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles(),this._mergedSourceCaches[l].setEventedParent(null);this.imageManager.removeScope(this.scope),this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.indoorManager.destroy(),this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this.modelManager.setEventedParent(null),this.modelManager.destroy(),this.dispatcher.remove())}clearSource(l){const d=this.getSourceCaches(l);for(const v of d)v.clearTiles()}clearSources(){for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles()}clearLayers(){for(const l in this._mergedLayers){const d=this._mergedLayers[l];d._clear&&d._clear()}}reloadSource(l){const d=this.getSourceCaches(l);for(const v of d)v.resume(),v.reload()}reloadSources(){for(const l of this.getSources())l.reload&&l.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(l=>{l.modelManager.reloadModels(l.scope)})}updateSources(l){let d;this.directionalLight&&(d=D_(this.directionalLight));const v=new Set,T=new Set;for(const O in this._mergedLayers){const M=this._mergedLayers[O];M.type==="building"&&v.add(M.source),M.hasElevation()&&!T.has(M.source)&&T.add(M.source)}for(const O in this._mergedSourceCaches){const M=this._mergedSourceCaches[O],R=T.has(M._source.id);v.has(M._source.id)&&(M._source.reparseOverscaled=!1),M.update(l,void 0,void 0,d,R)}}_generateCollisionBoxes(){for(const l in this._sourceCaches){const d=this._sourceCaches[l];d.resume(),d.reload()}}_handleLayerOrderChange(){this._requestFullLabelPlacement(),this.fire(new a.z("neworder"))}_requestFullLabelPlacement(){this.pauseablePlacement||(this.pauseablePlacement=new T0),this.pauseablePlacement.requestFullPlacement()}_setLabelPlacementStale(){this.placement&&this.placement.setStale()}_updatePlacement(l,d,v,T,O){this.pauseablePlacement||(this.pauseablePlacement=new T0);let M=!1,R=!1;const F={},q={};for(const ce of this._mergedOrder){const de=this._mergedLayers[ce];if(de.type!=="symbol")continue;const _e=a.B(de.source,de.scope);let Me=F[_e];if(!Me){const Ae=this.getLayerSourceCache(de);if(!Ae)continue;const We=Ae.getRenderableIds(!0).map($e=>Ae.getTileByID($e));q[_e]=We.slice(),Me=F[_e]=We.sort(($e,Ge)=>Ge.tileID.overscaledZ-$e.tileID.overscaledZ||($e.tileID.isLessThan(Ge.tileID)?-1:1))}const Ce=this.crossTileSymbolIndex.addLayer(de,Me,l.center.lng,l.projection);M=M||Ce}this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder);const H=!!(this.placement&&!l.equals(this.placement.transform)),re=!!(this.placement&&(this.placement.lastReplacementSourceUpdateTime!==0&&!O||this.placement.lastReplacementSourceUpdateTime!==O.updateTime)),ee=H||re||M,oe=(ee||this.pauseablePlacement.isStale())&&v===0,he=this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.o.now(),l.zoom)&&v!==0;if((this.pauseablePlacement.isFullPlacementRequested()||!this.pauseablePlacement.placement||oe||he)&&(this.pauseablePlacement=this.pauseablePlacement.startNewPlacement(l,this._mergedOrder,d,v,T,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null,this._buildingIndex)),this.pauseablePlacement.isDone()?ee&&v!==0&&this.pauseablePlacement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,F,q,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.o.now()),R=!0),M&&this.pauseablePlacement.setStale()),R||M){this._buildingIndex.onNewFrame(l.zoom);for(let ce=0;ce<this._mergedOrder.length;ce++){const de=this._mergedLayers[this._mergedOrder[ce]];if(de.type!=="symbol"||de.visibility==="none")continue;const _e=this.isLayerClipped(de);this.placement.updateLayerOpacities(de,F[a.B(de.source,de.scope)],ce,_e?O:null)}}return!this.pauseablePlacement.isDone()||this.placement.isStale()||this.placement.hasTransitions(a.o.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}addImport(l,d){this._checkLoaded();const v=this.stylesheet.imports=this.stylesheet.imports||[];if(v.findIndex(({id:O})=>O===l.id)!==-1)return void this.fire(new a.y(new Error(`Import with id '${l.id}' already exists in the map's style.`)));if(!d)return v.push(l),this._loadImports([l],!0);const T=v.findIndex(({id:O})=>O===d);return T===-1&&this.fire(new a.y(new Error(`Import with id "${d}" does not exist on this map.`))),this.stylesheet.imports=v.slice(0,T).concat(l).concat(v.slice(T)),this._loadImports([l],!0,d)}updateImport(l,d){this._checkLoaded();const v=this.stylesheet.imports||[],T=this.getImportIndex(l);return T===-1?this:typeof d=="string"?(this.setImportUrl(l,d),this):(d.url&&d.url!==v[T].url&&this.setImportUrl(l,d.url),a.by(d.config,v[T].config)||this.setImportConfig(l,d.config,d.data.schema),a.by(d.data,v[T].data)||this.setImportData(l,d.data),this)}moveImport(l,d){this._checkLoaded();let v=this.stylesheet.imports||[];const T=this.getImportIndex(l);if(T===-1)return this;const O=this.getImportIndex(d);if(O===-1)return this;const M=v[T],R=this.fragments[T];return v=v.filter(({id:F})=>F!==l),this.fragments=this.fragments.filter(({id:F})=>F!==l),this.stylesheet.imports=v.slice(0,O).concat(M).concat(v.slice(O)),this.fragments=this.fragments.slice(0,O).concat(R).concat(this.fragments.slice(O)),this.mergeLayers(),this}setImportUrl(l,d){this._checkLoaded();const v=this.stylesheet.imports||[],T=this.getImportIndex(l);if(T===-1)return this;v[T].url=d;const O=this.fragments[T];return O.style=this._createFragmentStyle(v[T]),O.style.on("style.import.load",()=>this.mergeAll()),O.style.loadURL(d),this}setImportData(l,d){this._checkLoaded();const v=this.getImportIndex(l),T=this.stylesheet.imports||[];return v===-1?this:d?(this.fragments[v].style.setState(d),this._reloadImports(),this):(delete T[v].data,this.setImportUrl(l,T[v].url))}setImportConfig(l,d,v){this._checkLoaded();const T=this.getImportIndex(l),O=this.stylesheet.imports||[];if(T===-1)return this;d?O[T].config=d:delete O[T].config;const M=this.fragments[T];v&&M.style.stylesheet&&(M.style.stylesheet.schema=v);const R=M.style.stylesheet&&M.style.stylesheet.schema;return M.config=d,M.style.updateConfig(d,R),this.updateConfigDependencies(),this}removeImport(l){this._checkLoaded();const d=this.stylesheet.imports||[],v=this.getImportIndex(l);v!==-1&&(d.splice(v,1),this.fragments[v].style._remove(),this.fragments.splice(v,1),this._reloadImports())}getImportIndex(l){const d=(this.stylesheet.imports||[]).findIndex(v=>v.id===l);return d===-1&&this.fire(new a.y(new Error(`Import '${l}' does not exist in the map's style and cannot be updated.`))),d}getLayer(l){return this._mergedLayers[l]}getSources(){const l=[];for(const d in this._mergedOtherSourceCaches){const v=this._mergedOtherSourceCaches[d];v&&l.push(v.getSource())}return l}getSource(l,d){const v=this.getSourceCache(l,d);return v&&v.getSource()}getLayerSource(l){const d=this.getLayerSourceCache(l);return d&&d.getSource()}getSourceCache(l,d){const v=a.B(l,d);return this._mergedOtherSourceCaches[v]}getLayerSourceCache(l){const d=a.B(l.source,l.scope);return l.type==="symbol"?this._mergedSymbolSourceCaches[d]:this._mergedOtherSourceCaches[d]}getSourceCaches(l){if(l==null)return Object.values(this._mergedSourceCaches);const d=[];return this._mergedOtherSourceCaches[l]&&d.push(this._mergedOtherSourceCaches[l]),this._mergedSymbolSourceCaches[l]&&d.push(this._mergedSymbolSourceCaches[l]),d}updateSourceCaches(){const l=this._changes.getUpdatedSourceCaches();for(const d in l){const v=l[d];v==="reload"?this.reloadSource(d):v==="clear"&&this.clearSource(d)}}updateLayers(l){const d=this._changes.getUpdatedPaintProperties();for(const v of d){const T=this.getLayer(v);T&&T.updateTransitions(l)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(l){this.stylesheet.glyphs=l,this.glyphManager.setURL(l)}getImages(l,d,v){this.imageManager.getImages(d.images,d.scope,v),this._updateTilesForChangedImages();const T=M=>{if(M){const R=d.images.map(F=>a.I.toString(F));M.setDependencies(d.tileID.key,d.type,R)}},O=a.B(d.source,d.scope);T(this._mergedOtherSourceCaches[O]),T(this._mergedSymbolSourceCaches[O]),d.images.some(M=>M.iconsetId)&&this.fire(new a.z("data",{dataType:"style"}))}rasterizeImages(l,d,v){this.imageManager.rasterizeImages(d,v)}getGlyphs(l,d,v){this.glyphManager.getGlyphs(d.stacks,v)}getResource(l,d,v){return a.dz(d,v)}getOwnSourceCache(l){return this._otherSourceCaches[l]}getOwnLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}getOwnSourceCaches(l){const d=[];return this._otherSourceCaches[l]&&d.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&d.push(this._symbolSourceCaches[l]),d}_isSourceCacheLoaded(l){const d=this.getOwnSourceCaches(l);return d.length===0?(this.fire(new a.y(new Error(`There is no source with ID '${l}'`))),!1):d.every(v=>v.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(l,d){if(!this._clipLayerPresent&&l.type!=="fill-extrusion"&&l.type!=="building")return!1;const v=l.type==="fill-extrusion"&&(l.sourceLayer==="building"||l.sourceLayer==="procedural_buildings"),T=l.type==="building";if(l.is3D(!!this.terrain)){if(v||T||d&&d.type==="batched-model"||l.type==="model")return!0}else if(l.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(l=>{l.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Us.getSourceType=function(_){return Fu[_]},Us.setSourceType=function(_,l){Fu[_]=l},Us.registerForPluginStateChange=a.dA;var ql=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Hp=`
#ifdef DUAL_SOURCE_BLENDING
layout(location=0,index=0) out vec4 glFragColor;layout(location=0,index=1) out vec4 glFragColorSrc1;
#else
layout(location=0) out vec4 glFragColor;
#endif
#ifdef USE_MRT1
layout(location=1) out vec4 out_Target1;
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb*col.a,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Ts=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifndef HAS_SHADER_STORAGE_BLOCK_material_buffer
#define GET_ATTRIBUTE_float(attrib,matInfo,attrib_id) attrib
#define GET_ATTRIBUTE_vec4(attrib,matInfo,attrib_id) attrib
#define GET_ATTRIBUTE_vec2(attrib,matInfo,attrib_id) attrib
#define DECLARE_MATERIAL_TABLE_INFO
#endif`,$u="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Cg=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef CLIP_ZERO_TO_ONE
coord.z=-1.0+2.0*coord.z; 
#endif
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;
#ifdef CLIP_ZERO_TO_ONE
coord.z=-1.0+2.0*coord.z; 
#endif
int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;
#ifdef CLIP_ZERO_TO_ONE
coord.z=-1.0+2.0*coord.z; 
#endif
highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif`,Sd=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,$s=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;
#ifdef FLIP_Y
uv.y=1.0-uv.y;
#endif
highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Td=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Jt=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,L_=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif`,Gp=`#ifdef RENDER_SHADOWS
precision highp sampler2DShadow;uniform sampler2DShadow u_shadowmap_0;uniform sampler2DShadow u_shadowmap_1;uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;float shadow_sample(sampler2DShadow shadowmap,highp vec3 pos,highp float bias) {
#ifdef CLIP_ZERO_TO_ONE
highp vec3 coord=vec3(pos.xy*0.5+0.5,pos.z-bias);
#else
highp vec3 coord=vec3(pos.xy*0.5+0.5,pos.z*0.5+0.5-bias);
#endif
return texture(shadowmap,coord);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {light_view_pos0.xyz/=light_view_pos0.w;
#ifdef SHADOWS_SINGLE_CASCADE
vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}return shadow_sample(u_shadowmap_0,light_view_pos0.xyz,bias);
#else
light_view_pos1.xyz/=light_view_pos1.w;vec4 abs_bounds=abs(vec4(light_view_pos0.xy,light_view_pos1.xy));if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {return shadow_sample(u_shadowmap_0,light_view_pos0.xyz,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}float occlusion1=shadow_sample(u_shadowmap_1,light_view_pos1.xyz,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Dc=/#include\s+"([^"]+)"/g,Ic=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g,al=/\b[A-Za-z_][A-Za-z0-9_]*\b/g,vf=new Set(["ifdef","ifndef","elif","if","defined"]),ol=new Set;Wo(ql,ol),Wo(Ts,ol),Wo(Hp,ol);const bf={"_prelude_fog.vertex.glsl":Sd,"_prelude_terrain.vertex.glsl":Cg,"_prelude_shadow.vertex.glsl":L_,"_prelude_material_table.vertex.glsl":`#ifdef HAS_SHADER_STORAGE_BLOCK_material_buffer
#define MATERIAL_TABLE_DEBUG 0
uniform int u_material_offset;uniform int u_vertex_offset;layout(std140,binding=0)readonly buffer material_buffer{uvec4 material_data[];};struct MaterialInfo{uint dataOffset;
#if MATERIAL_TABLE_DEBUG
vec4 colorDebug;
#endif
};uint read_buf_no_offset(uint iDword) {return material_data[iDword/4u][iDword % 4u];}uint read_buf(uint iDword) {iDword+=uint(u_material_offset/4);return read_buf_no_offset(iDword);}float read_buf_float(uint iDword){return uintBitsToFloat(read_buf(iDword));}uint read_buf_uint8(uint iDword,uint iUint8){uint dwordOffset=iDword+(iUint8/4u);uint byteOffset=iUint8 & 3u;uint bitOffset=8u*byteOffset;uint mask=0xffu << bitOffset;uint dwordVal=read_buf(dwordOffset);return (dwordVal & mask) >> bitOffset;}uint read_buf_uint16(uint iDword,uint iUint16){uint dwordOffset=iDword+(iUint16 >> 1u);uint bitOffset=(iUint16 & 1u)*16u;uint mask=0xffffu << bitOffset;uint dwordVal=read_buf(dwordOffset);return (dwordVal & mask) >> bitOffset;}uint nrDwordsForVertexIdEntries(uint nrMaterialLookupEntries) {return nrMaterialLookupEntries;}uint nrDwordsForMaterialIdEntries(uint nrMaterialLookupEntries) {return (nrMaterialLookupEntries*2u+3u)/4u;}uint findRangeBinarySearch(uint vertexId,uint numRanges,uint dwordOffset) {uint left=0u;uint right=numRanges-1u;for (uint i=0u; i < 16u; i++) { 
if (left > right) {break;}uint mid=(left+right)/2u;uint start=read_buf(dwordOffset+mid);uint nextStart=(mid+1u < numRanges) ? read_buf(dwordOffset+mid+1u) : 0xffffffffu;if (vertexId >=start && vertexId < nextStart) {return mid;} else if (vertexId < start) {if (mid==0u) {break;}right=mid-1u;} else {left=mid+1u;}}return 0u; 
}uint readVertexId(uint dwordOffset,uint iMaterialLookupEntry) {return read_buf(dwordOffset+iMaterialLookupEntry);}uint findRange(uint vertexId,uint numRanges,uint dwordOffset) {uint iRange;if(numRanges <=64u){uint vertexBegin;for(iRange=0u; iRange < numRanges;++iRange) {vertexBegin=readVertexId(dwordOffset,iRange);if(vertexBegin > vertexId) {break;}}iRange=iRange==0u? 0u : iRange-1u;} else { 
iRange=findRangeBinarySearch(vertexId,numRanges,dwordOffset);}return iRange;}MaterialInfo read_material_info(uint vertex_id) {MaterialInfo info;
#if MATERIAL_TABLE_DEBUG
const vec4 red=vec4(1.0,0.0,0.0,1.0);const vec4 orange=vec4(1.0,0.5,0.0,1.0);const vec4 yellow=vec4(1.0,1.0,0.0,1.0);const vec4 green=vec4(0.0,1.0,0.0,1.0);const vec4 indigo=vec4(0.294,0.0,0.510,1.0);const vec4 blue=vec4(0.0,0.0,1.0,1.0);const vec4 purple=vec4(0.5,0.0,0.5,1.0);const vec4 pink=vec4(1.0,0.0,1.0,1.0);info.colorDebug=green;
#endif
uint offset=0u;
#if MATERIAL_TABLE_DEBUG
bool keepFinding=true;uint magic=read_buf(offset);if(magic !=0xCAFEBABEu) {info.colorDebug=red;keepFinding=false;return info;}
#endif
offset++;
#if MATERIAL_TABLE_DEBUG
uint nrMaterials=read_buf(offset);uint nrVertices=read_buf(offset+1u);if(keepFinding && vertex_id >=nrVertices) {info.colorDebug=red;keepFinding=false;}
#endif
offset+=2u;uint nrMaterialLookupEntries=read_buf(offset++);uint perMaterialEntrySizeDwords=read_buf(offset++);
#if MATERIAL_TABLE_DEBUG
if(keepFinding && perMaterialEntrySizeDwords !=1u) {info.colorDebug=red;keepFinding=false;}
#endif
uint iMaterialLookup=findRange(vertex_id,nrMaterialLookupEntries,offset);
#if MATERIAL_TABLE_DEBUG
if(keepFinding)
{uint vertexBeginCheck=readVertexId(offset,iMaterialLookup);if(vertexBeginCheck > vertex_id) {info.colorDebug=red;keepFinding=false;}if(iMaterialLookup < nrMaterialLookupEntries-1u) {uint vertexEndCheck=readVertexId(offset,iMaterialLookup+1u);if(vertexEndCheck <=vertex_id) {info.colorDebug=red;keepFinding=false;}}}
#endif
offset+=nrDwordsForVertexIdEntries(nrMaterialLookupEntries);uint materialId=iMaterialLookup;
#if MATERIAL_TABLE_DEBUG
if(keepFinding) {if(materialId >=nrMaterialLookupEntries) {info.colorDebug=red;}}
#endif
info.dataOffset=offset+materialId*perMaterialEntrySizeDwords;return info;}uint get_data_location(const MaterialInfo matInfo,uint attribOffsetBytes)
{uint attribFieldOffsetDwords=attribOffsetBytes/4u;return matInfo.dataOffset+attribFieldOffsetDwords;}vec4 read_material_vec4(const MaterialInfo matInfo,uint attribOffsetBytes){uint loc=get_data_location(matInfo,attribOffsetBytes);return vec4(read_buf_float(loc),read_buf_float(loc+1u),read_buf_float(loc+2u),read_buf_float(loc+3u));}vec2 read_material_vec2(const MaterialInfo matInfo,uint attribOffsetBytes){uint loc=get_data_location(matInfo,attribOffsetBytes);return vec2(read_buf_float(loc),read_buf_float(loc+1u));}float read_material_float(const MaterialInfo matInfo,uint attribOffsetBytes){uint loc=get_data_location(matInfo,attribOffsetBytes);return read_buf_float(loc);}
#define GET_ATTRIBUTE_float(attrib,matInfo,attrib_offset) read_material_float(matInfo,attrib_offset)
#define GET_ATTRIBUTE_vec4(attrib,matInfo,attrib_offset) read_material_vec4(matInfo,attrib_offset)
#define GET_ATTRIBUTE_vec2(attrib,matInfo,attrib_offset) read_material_vec2(matInfo,attrib_offset)
#define DECLARE_MATERIAL_TABLE_INFO MaterialInfo materialInfo=read_material_info(uint(gl_VertexID));
#define DECLARE_MATERIAL_TABLE_INFO_DEBUG(dbgColor) MaterialInfo materialInfo=read_material_info(uint(gl_VertexID)); dbgColor=materialInfo.colorDebug;
#endif`,"_prelude_fog.fragment.glsl":$s,"_prelude_shadow.fragment.glsl":Gp,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif`,"_prelude_raster_array.glsl":Td,"_prelude_raster_particle.glsl":Jt},Ed={};br("",Cg),br($s,Sd),br(Gp,L_),br(Td,""),br(Jt,"");const fh=br(Hp,Ts),Yp=ql,a1=[`
#if defined(GL_EXT_blend_func_extended) && defined(DUAL_SOURCE_BLENDING)
#extension GL_EXT_blend_func_extended : require
#endif`,"precision mediump float;",Yp,fh.fragmentSource].join(`
`),z_=["precision highp float;",Yp,fh.vertexSource].join(`
`);var N_={background:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;uniform mediump float u_emissive_strength;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;uniform mediump float u_emissive_strength;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),building:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
const float window_depth=0.5;const float ao_radius=0.2;in vec4 v_color;in highp vec3 v_normal;in highp vec3 v_pos;
#ifdef BUILDING_FAUX_FACADE
in lowp float v_faux_facade;in highp float v_faux_facade_ed;in highp vec2 v_faux_facade_window;in highp vec2 v_faux_facade_floor;in highp vec2 v_faux_facade_range;in highp float v_aspect;in highp vec3 v_tbn_0;in highp vec3 v_tbn_1;in highp vec3 v_tbn_2;in highp vec4 v_faux_color_emissive;uniform float u_faux_facade_ao_intensity;
#endif
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
#ifdef FLOOD_LIGHT
in highp float v_flood_radius;in float v_has_flood_light;
#endif
uniform lowp float u_opacity;uniform vec3 u_camera_pos;uniform highp float u_tile_to_meter;uniform float u_facade_emissive_chance;uniform vec3 u_flood_light_color;uniform float u_flood_light_intensity;vec3 linearTosRGB(in vec3 color) {return pow(color,vec3(1./2.2));}
#ifdef BUILDING_FAUX_FACADE
float hash12(in vec2 p) {vec3 p3 =fract(vec3(p.xyx)*0.1031);p3+=dot(p3,p3.yzx+33.33);return fract((p3.x+p3.y)*p3.z);}float min3(in vec3 v) {return min(min(v.x,v.y),v.z);}vec2 get_uv_mask_id(in vec2 q,out float mask,out vec2 id) {vec2 p=q;mask=step(v_faux_facade_range.x,p.y)*step(p.y,v_faux_facade_range.y);p.y=p.y-v_faux_facade_range.x;vec2 uv=modf(p/v_faux_facade_floor,id);vec4 d=(v_faux_facade_floor.xyxy+vec4(-v_faux_facade_window,v_faux_facade_window))*0.5;vec4 edge=d/v_faux_facade_floor.xyxy;vec2 m=step(edge.xy,uv)*step(uv,edge.zw);mask*=m.x*m.y;uv-=vec2(0.5);uv*=vec2(0.5)/(vec2(0.5)-edge.xy);uv+=vec2(0.5);return uv;}float ray_unit_box(in vec3 ray_o,in vec3 ray_d,in vec3 bmin,in vec3 bmax) {vec3 planes=mix(bmin,bmax,step(0.0,ray_d));vec3 t=(planes-ray_o)/ray_d;return min3(t);}float get_emissive(in vec2 id) {if (u_facade_emissive_chance > 0.0) {return (step(hash12(id),u_facade_emissive_chance)+0.05)*v_faux_color_emissive.a;}return 0.0;}vec3 get_shade_info(in vec3 v,in vec3 v_normalized,in vec3 color,in vec2 id,in mat3 tbn,inout vec3 out_normal,inout float out_emissive) {vec3 out_color=color;vec3 abs_v=abs(v_normalized);bool x_major=abs_v.x >=abs_v.y && abs_v.x >=abs_v.z;bool y_major=abs_v.y >=abs_v.x && abs_v.y >=abs_v.z;bool z_major=abs_v.z >=abs_v.x && abs_v.z >=abs_v.y;
#if 0
if (x_major) {out_color=v.x > 0.0 ? vec3(1.0,0.0,0.0) : vec3(0.0,1.0,1.0);} else if (y_major) {out_color=v.y > 0.0 ? vec3(0.0,1.0,0.0) : vec3(1.0,0.0,1.0);} else if (z_major) {out_color=v.z > 0.0 ? vec3(0.0,0.0,1.0) : vec3(1.0,1.0,0.0);}out_emissive=1.0;
#else
if (x_major) {out_normal=sign(v.x)*tbn[0];} else if (y_major) {out_normal=vec3(0.0,0.0,-sign(v.y));} else if (z_major) {out_color=v_faux_color_emissive.rgb;out_emissive=v.z <=0.0 ? get_emissive(id) : out_emissive;}float ao=1.0;if (u_faux_facade_ao_intensity > 0.0) {vec4 ao_range=v_faux_facade_window.xxyy*0.5-vec4(0,ao_radius,0,ao_radius);vec2 ao_range_z=vec2(window_depth*0.5)-vec2(0.0,ao_radius);if (x_major || y_major) {ao*=smoothstep(-ao_range_z.x,-ao_range_z.y,v.z);} else if (z_major) {ao*=smoothstep(-ao_range.x,-ao_range.y,v.x)*(1.0-smoothstep(ao_range.y,ao_range.x,v.x));ao*=smoothstep(-ao_range.z,-ao_range.w,v.y)*(1.0-smoothstep(ao_range.w,ao_range.z,v.y));}ao=mix(1.0,min(1.0,ao+0.25),u_faux_facade_ao_intensity);}out_color*=ao;
#endif
return out_color;}
#endif
vec3 apply_lighting_linear(in vec3 color,in vec3 normal,in float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return color*(ambient_contrib+directional_contrib);}void main() {vec3 normal=normalize(v_normal);vec3 base_color=v_color.rgb;float emissive=v_color.a;
#ifdef BUILDING_FAUX_FACADE
if (v_faux_facade > 0.0) {mat3 tbn=mat3(v_tbn_0,v_tbn_1,v_tbn_2);vec3 v=vec3(v_pos.xy,v_pos.z/u_tile_to_meter)-u_camera_pos;vec3 view_tangent=transpose(tbn)*v;vec2 q=vec2(v_faux_facade_ed,v_pos.z);float mask=0.0;vec2 id=vec2(0.0);vec2 uv=get_uv_mask_id(q,mask,id);uv*=v_faux_facade_window;vec3 bmin=vec3(0.0,0.0,-window_depth);vec3 bmax=bmin+vec3(v_faux_facade_window,window_depth);vec3 ray_o=vec3(uv,0.0);vec3 ray_d=normalize(view_tangent);float t_min=ray_unit_box(ray_o,ray_d,bmin,bmax);vec3 hit=ray_o+t_min*ray_d;vec3 r=vec3(v_faux_facade_window,-window_depth);hit-=r*0.5;vec3 normalized=hit/r;vec3 out_normal=normal;float out_emissive=emissive;vec3 room_color=get_shade_info(hit,normalized,base_color,id,tbn,out_normal,out_emissive);base_color=mix(base_color,room_color,mask);normal=mix(normal,out_normal,mask);emissive=mix(emissive,out_emissive,mask);}
#endif
vec4 color=vec4(base_color,1.0);vec3 xy_flipped_normal=vec3(-normal.xy,normal.z);float shadowed_lighting_factor=0.0;
#ifdef RENDER_SHADOWS
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(xy_flipped_normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(xy_flipped_normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
#else
shadowed_lighting_factor=dot(xy_flipped_normal,u_lighting_directional_dir);
#endif
color.rgb=apply_lighting_linear(color.rgb,xy_flipped_normal,shadowed_lighting_factor);color.rgb=linearTosRGB(color.rgb);
#ifdef FLOOD_LIGHT
float flood_radiance=(1.0-min(v_pos.z/v_flood_radius,1.0))*u_flood_light_intensity*v_has_flood_light;color.rgb=mix(color.rgb,u_flood_light_color,flood_radiance);
#endif
color.rgb=mix(color.rgb,linearTosRGB(base_color.rgb),emissive);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,v_pos.z));
#endif
color*=u_opacity;
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_pos.z);
#endif
#ifdef FEATURE_CUTOUT
color=apply_feature_cutout(color,gl_FragCoord);
#endif
glFragColor=color; 
#ifdef DEBUG_SHOW_NORMALS
color.rgb=xy_flipped_normal*0.5+vec3(0.5,0.5,0.5);color.a=1.0;glFragColor=color;
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;in vec3 a_normal_3;in vec3 a_centroid_3;in float a_flood_light_wall_radius_1i16;in vec4 a_faux_facade_data;in vec2 a_faux_facade_vertical_range;uniform mat4 u_matrix;uniform mat4 u_normal_matrix;uniform highp float u_tile_to_meter;out vec4 v_color;out vec3 v_normal;out highp vec3 v_pos;
#ifdef BUILDING_FAUX_FACADE
out lowp float v_faux_facade;out highp float v_faux_facade_ed;out highp vec2 v_faux_facade_window;out highp vec2 v_faux_facade_floor;out highp vec2 v_faux_facade_range;out highp float v_aspect;out highp vec3 v_tbn_0;out highp vec3 v_tbn_1;out highp vec3 v_tbn_2;out highp vec4 v_faux_color_emissive;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#ifdef FLOOD_LIGHT
out highp float v_flood_radius;out float v_has_flood_light;
#endif
const float MAX_UINT_16=65535.0;const float MAX_INT_16=32767.0;const float MAX_UINT_8=255.0;const float TWO_POW_8=256.0;const float FLOOD_LIGHT_MAX_RADIUS_METER=2048.0;vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#ifdef BUILDING_FAUX_FACADE
mat3 get_tbn(in vec3 normal) {const vec3 bitangent=vec3(0.0,0.0,1.0);vec3 tangent=normalize(vec3(normal.y,-normal.x,0.0));return mat3(tangent,bitangent,normal);}
#endif
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 part_color_emissive
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 faux_facade_color_emissive
void main() {
#pragma mapbox: initialize-attribute-custom highp vec2 part_color_emissive
#pragma mapbox: initialize-attribute-custom highp vec2 faux_facade_color_emissive
#ifdef FLOOD_LIGHT
v_flood_radius=(a_flood_light_wall_radius_1i16/MAX_INT_16*FLOOD_LIGHT_MAX_RADIUS_METER);v_has_flood_light=step(0.0,v_flood_radius);
#endif
vec4 color_emissive=decode_color(part_color_emissive);v_color=vec4(sRGBToLinear(color_emissive.rgb),color_emissive.a);vec3 a_normal_3f=a_normal_3/MAX_INT_16;v_normal=vec3(u_normal_matrix*vec4(a_normal_3f,0.0));float hidden=0.0;float depth_offset=0.0;
#ifdef BUILDING_FAUX_FACADE
v_faux_facade=a_faux_facade_data.x;if (v_faux_facade > 0.0) {v_faux_facade_ed=a_faux_facade_data.x *u_tile_to_meter;float window_x_perc=floor(a_faux_facade_data.y/TWO_POW_8);float window_y_perc=a_faux_facade_data.y-TWO_POW_8*window_x_perc;vec2 window_perc=vec2(window_x_perc,window_y_perc)/MAX_UINT_8;v_faux_facade_floor=(a_faux_facade_data.zw/MAX_UINT_16*EXTENT)*u_tile_to_meter;v_faux_facade_window=window_perc*v_faux_facade_floor;v_faux_facade_range=(a_faux_facade_vertical_range/MAX_UINT_16*EXTENT)*u_tile_to_meter;v_aspect=v_faux_facade_window.x/v_faux_facade_window.y;mat3 tbn=get_tbn(normalize(v_normal));v_tbn_0=tbn[0];v_tbn_1=tbn[1];v_tbn_2=tbn[2];v_faux_color_emissive=decode_color(faux_facade_color_emissive);v_faux_color_emissive.rgb=sRGBToLinear(v_faux_color_emissive.rgb);float height=a_centroid_3.z;depth_offset=min(1000.0,height)*0.0000002;}
#endif
v_pos=a_pos_3f;
#ifdef RENDER_CUTOFF
vec4 ground=u_matrix*vec4(a_centroid_3,1.0);v_cutoff_opacity=cutoff_opacity(u_cutoff_params,ground.z);hidden=float(v_cutoff_opacity==0.0);v_pos.z*=v_cutoff_opacity;
#endif
#ifdef RENDER_SHADOWS
vec3 shadow_pos=v_pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset_model(v_normal);shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1.0);
#endif
#ifdef FOG
v_fog_pos=fog_position(v_pos);
#endif
gl_Position=mix(u_matrix*vec4(v_pos,1),AWAY,hidden);gl_Position.z-=depth_offset*gl_Position.w;}`),buildingBloom:br(`in vec4 v_color_emissive;
#pragma mapbox: define-attribute highp vec4 bloom_attenuation
#pragma mapbox: initialize-attribute highp vec4 bloom_attenuation
float saturate(float val) {return clamp(val,0.0,1.0);}void main() {float emission=v_color_emissive.a;float opacity=1.0;
#ifdef HAS_ATTRIBUTE_a_bloom_attenuation
float distance=length(vec2(1.3*max(0.0,abs(bloom_attenuation.x)-bloom_attenuation.z),bloom_attenuation.y));distance+= mix(0.5,0.0,clamp(emission-1.0,0.0,1.0));opacity*=saturate(1.0-distance*distance);
#endif
#ifdef RENDER_CUTOFF
opacity*=v_cutoff_opacity;
#endif
glFragColor=vec4(v_color_emissive.rgb,1.0)*opacity;}`,`in vec3 a_pos_3f;
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 part_color_emissive
#pragma mapbox: define-attribute highp vec4 bloom_attenuation
out vec4 v_color_emissive;uniform mat4 u_matrix;vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute-custom highp vec2 part_color_emissive
#pragma mapbox: initialize-attribute highp vec4 bloom_attenuation
#ifdef HAS_ATTRIBUTE_a_part_color_emissive
vec4 color_emissive=decode_color(part_color_emissive);float part_emissive=color_emissive.a*5.0;v_color_emissive=vec4(sRGBToLinear(color_emissive.rgb),part_emissive);
#else
v_color_emissive=vec4(1.0);
#endif
gl_Position=u_matrix*vec4(a_pos_3f,1.0);
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),buildingDepth:br(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,"in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;void main() {gl_Position=u_matrix*vec4(a_pos_3f,1.0);v_depth=gl_Position.z/gl_Position.w;}"),circle:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:br("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:br(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:br(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:br("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform float u_zoom_transition;
#endif
out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec3 proj_pos=a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation);
#ifdef PROJECTION_GLOBE_VIEW
#ifndef PROJECTED_POS_ON_VIEWPORT
vec3 globe_pos=proj_pos;vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,a_anchor_pos,u_tile_id,u_merc_center);proj_pos=mix_globe_mercator(globe_pos,mercator_pos,u_zoom_transition);
#endif
#endif
vec4 projectedPoint=u_matrix*vec4(proj_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:br("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:br("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:br(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:br(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#else
#ifdef FEATURE_CUTOUT
apply_feature_cutout(vec4(0.0,0.0,0.0,1.0),gl_FragCoord);
#endif
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}vec3 compute_view_dependent_emissive_color(float ndotl,float emissive_strength,vec3 color)
{color=sRGBToLinear(color);color=color*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);color=linearTosRGB(color.rgb);return color;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 structure_color
void main() {
#pragma mapbox: initialize highp vec4 structure_color
vec3 color=structure_color.xyz;
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);vec3 transformed_normal=vec3(-normal.xy,normal.z);float ndotl=calculate_NdotL(transformed_normal);float emissive_strength=u_emissive_strength;emissive_strength=0.0;vec3 emissive_color=compute_view_dependent_emissive_color(ndotl,emissive_strength,color.xyz);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,transformed_normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,transformed_normal);
#endif
color=mix(color,emissive_color,emissive_strength);if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
#pragma mapbox: define highp vec4 structure_color
void main() {
#pragma mapbox: initialize highp vec4 structure_color
v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(-v_normal.xy,v_normal.z));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color;
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;v_road_z_offset=z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef FLIP_Y
v_pos=(vec2(gl_Position.x,-gl_Position.y)/gl_Position.w+1.0)/2.0*u_world;
#else
v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#endif
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
uniform float u_emissive_strength;
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef APPLY_LUT_ON_GPU
out_color=applyLUT(u_lutTexture,out_color);
#endif
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FLIP_Y
v_pos_world=(vec2(gl_Position.x,-gl_Position.y)/gl_Position.w+1.0)/2.0*u_world;
#else
v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#endif
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef APPLY_LUT_ON_GPU
out_color=applyLUT(u_lutTexture,out_color);
#endif
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;v_road_z_offset=z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
#ifdef FEATURE_CUTOUT
color=apply_feature_cutout(color,gl_FragCoord);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_material_table.vertex.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {DECLARE_MATERIAL_TABLE_INFO
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);
#ifdef CLIP_ZERO_TO_ONE
cutoff=cutoff_opacity(u_cutoff_params,ground.z*2.0-ground.w);
#else
cutoff=cutoff_opacity(u_cutoff_params,ground.z);
#endif
if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:br(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_material_table.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {DECLARE_MATERIAL_TABLE_INFO
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef APPLY_LUT_ON_GPU
out_color=applyLUT(u_lutTexture,out_color);
#endif
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_material_table.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {DECLARE_MATERIAL_TABLE_INFO
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:br(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:br(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
#ifdef USE_MRT1
out_Target1=vec4(1.0-texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size)).a,0.0,0.0,0.0);
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:br(`precision highp float;uniform highp sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform highp vec2 u_trim_gradient_mix_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef VARIABLE_LINE_WIDTH
in float stub_side;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float side_z_offset
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
#pragma mapbox: define lowp float emissive_strength
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float side_z_offset
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
#pragma mapbox: initialize lowp float emissive_strength
float dist=length(v_normal)*v_width2.s;
#ifdef VARIABLE_LINE_WIDTH
blur=mix(blur,0.0,stub_side);
#endif
float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef VARIABLE_LINE_WIDTH
alpha=mix(alpha,1.0,stub_side);
#endif
alpha=side_z_offset > 0.0 ? 1.0-alpha : alpha;
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);highp float gradient_trim_color_mix_factor=0.0;
#ifdef RENDER_LINE_GRADIENT
gradient_trim_color_mix_factor=smoothstep(u_trim_gradient_mix_range.x,u_trim_gradient_mix_range.y,line_progress);
#endif
highp vec4 trim_color=mix(u_trim_color,out_color,gradient_trim_color_mix_factor);out_color=mix(u_trim_gradient_mix_range.x < 1.0 ? color : out_color,trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
#ifndef VARIABLE_LINE_WIDTH
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color;
#ifdef DUAL_SOURCE_BLENDING
glFragColorSrc1=vec4(vec3(0.0),emissive_strength);
#else
#ifdef USE_MRT1
out_Target1=vec4(emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef VARIABLE_LINE_WIDTH
out float stub_side;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float side_z_offset
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float side_z_offset
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
#pragma mapbox: initialize lowp float emissive_strength
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;offset=-1.0*offset*u_width_scale;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
bool left=normal.y==1.0;float left_width=a_z_offset_width.y;float right_width=a_z_offset_width.z;halfwidth=(u_width_scale*(left ? left_width : right_width))/2.0;a_z_offset+=left ? side_z_offset : 0.0;v_normal=side_z_offset > 0.0 && left ? vec2(0.0) : v_normal;offset=border_width > 0.0 ? (left_width+right_width)*u_width_scale*0.5 : offset;halfwidth=border_width > 0.0 ? border_width*u_width_scale*0.5 : halfwidth;bool zero_right_width=border_width==0.0 && right_width==0.0;stub_side=zero_right_width ?-normal.y : 0.0;v_normal=!left && zero_right_width ? vec2(0.0) : v_normal;ANTIALIASING=!left && zero_right_width ? 0.0 : ANTIALIASING;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float epsilon=0.0001;float extrude_length_without_perspective=max(length(dist),epsilon);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),epsilon);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef LINE_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize lowp float emissive_strength
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
#ifdef LINE_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl*texel_size-texel_size,pattern_b_br*texel_size+texel_size,vec2(x,y));vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);color=color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef DUAL_SOURCE_BLENDING
glFragColorSrc1=vec4(vec3(0.0),emissive_strength);
#else
#ifdef USE_MRT1
out_Target1=vec4(emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize lowp float emissive_strength
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),1.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:br("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:br("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:br(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:br(`#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#else
#ifdef RENDER_SHADOWS
in highp float v_z_offset;
#endif
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef APPLY_LUT_ON_GPU
out_color=applyLUT(u_lutTexture,out_color);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef TERRAIN
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#else
out_color.rgb*=mix(v_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#endif
#endif
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#define USING_APPEARANCE 1.0
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef ELEVATED_ROADS
in vec3 a_x_axis;in vec3 a_y_axis;uniform float u_normal_scale;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#else
#ifdef RENDER_SHADOWS
out highp float v_z_offset;
#endif
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float a_size_max= floor(a_size[1]*0.5);float a_apperance=a_size[1]-2.0*a_size_max;vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (a_apperance==USING_APPEARANCE) {size=a_size_max/128.0;} else if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size_max,u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+z_offset : 0.0;
#else
z+=u_pitch_with_map ? z_offset : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
#ifdef Z_TEST_OCCLUSION
out_fade_opacity*=occlusion_opacity;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
#ifdef ELEVATED_ROADS
vec3 xAxis=vec3(a_x_axis.xy,a_x_axis.z*u_normal_scale);vec3 yAxis=vec3(a_y_axis.xy,a_y_axis.z*u_normal_scale);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
pos=vec3(projected_pos.xy/projected_pos.w+offset,z);
#endif
#endif
gl_Position=mix(u_coord_matrix*vec4(pos,1.0),AWAY,hidden);float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef RENDER_SHADOWS
vec4 shd_pos=u_inv_matrix*vec4(pos,1.0);vec3 shd_pos0=shd_pos.xyz;vec3 shd_pos1=shd_pos.xyz;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#else
#ifdef RENDER_SHADOWS
v_z_offset=e;
#endif
#endif
}`),terrainRaster:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
uniform sampler2D u_image1;uniform float u_emissive_texture_available;
#endif
in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
float emissive_strength=u_emissive_texture_available > 0.5 ? texture(u_image1,v_pos0).r : image_color.a;vec3 unlit_base=image_color.rgb*(1.0-emissive_strength);vec3 emissive_base=image_color.rgb*emissive_strength;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
float emissive_strength=u_emissive_texture_available > 0.5 ? texture(u_image1,v_pos0).r : image_color.a;color.rgb=mix(color.rgb,image_color.rgb,emissive_strength);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:br("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:br(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,$u),skyboxGradient:br(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,$u),skyboxCapture:br(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
uniform sampler2D u_image1;uniform float u_emissive_texture_available;
#endif
uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;
#ifdef FLIP_Y
uv.y=1.0-uv.y;
#endif
highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
float emissive_strength=u_emissive_texture_available > 0.5 ? texture(u_image1,v_pos0).r : raster.a;raster=apply_lighting_with_emission_ground(raster,emissive_strength);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
float emissive_strength=u_emissive_texture_available > 0.5 ? texture(u_image1,v_pos0).r : color.a;color=apply_lighting_with_emission_ground(color,emissive_strength);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:br(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_atmosphere_fog_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_atmosphere_fog_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_atmosphere_fog_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:br(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;
#ifdef DITHERED_DISCARD
uniform float u_dithered_discard_threshold;
#endif
uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef FLIP_Y
coord.y=1.0-coord.y;
#endif
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;
#ifdef FLIP_Y
T=-T;B=-B;
#endif
highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));
#ifdef FLIP_Y
n=normalize(cross(fdx,fdy));
#else
n=normalize(cross(fdx,fdy))*-1.0;
#endif
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef DITHERED_DISCARD
if (abs(u_dithered_discard_threshold) < 1.0) {float ditherValue=fract(52.9829189*fract(0.06711056*gl_FragCoord.x+0.00583715*gl_FragCoord.y));float compareValue=mix(1.0-ditherValue,ditherValue,step(0.0,u_dithered_discard_threshold));if (abs(u_dithered_discard_threshold) < compareValue) {discard;}}
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
#ifdef FEATURE_CUTOUT
finalColor=apply_feature_cutout(finalColor,gl_FragCoord);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#ifdef CLIP_ZERO_TO_ONE
v_depth=-1.0+2.0*v_depth; 
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:br(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:br(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:br("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:br("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:br("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:br("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Wo(_,l){const d=_.split(`
`);for(let v of d){if(v=v.trimStart(),v[0]!=="#"||!v.includes("if")||v.startsWith("#endif"))continue;const T=v.match(al);if(T)for(const O of T)vf.has(O)||l.add(O)}}function br(_,l){const d=new Set,v=[],T=[];_=_.replace(Dc,(M,R)=>(T.push(R),"")),l=l.replace(Dc,(M,R)=>(v.push(R),""));let O=new Set(ol);Wo(_,O),Wo(l,O);for(const M of[...v,...T])Ed[M]||(Ed[M]=new Set,Wo(bf[M],Ed[M])),O=new Set([...O,...Ed[M]]);return{fragmentSource:_=_.replace(Ic,(M,R,F,q,H)=>(d.add(H),R==="define"?`
#ifndef HAS_UNIFORM_u_${H}
in ${F} ${q} ${H};
#else
uniform ${F} ${q} u_${H};
#endif
`:R==="initialize"?`
#ifdef HAS_UNIFORM_u_${H}
    ${F} ${q} ${H} = u_${H};
#endif
`:R==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${H}
    in ${F} ${q} ${H};
#endif
`:R==="initialize-attribute"?"":void 0)),vertexSource:l=l.replace(Ic,(M,R,F,q,H)=>{const re=`MATERIAL_ATTRIBUTE_OFFSET_${H}`,ee=q==="float"?"vec2":q,oe=`GET_ATTRIBUTE_${ee}(a_${H}, materialInfo, ${re})`,he=H.match(/color/)?"color":ee;return R==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${H}
in ${F} ${q} a_${H};
#endif
`:d.has(H)?R==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
    #if !defined(${re})
        in ${F} ${ee} a_${H};
    #endif
out ${F} ${q} ${H};
#else
uniform ${F} ${q} u_${H};
#endif
`:R==="initialize"?he==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${F} ${q} ${H} = u_${H};
#endif
`:`
#if !defined(HAS_UNIFORM_u_${H})
    #ifdef ${re}
        ${H} = unpack_mix_${he}(${oe}, u_${H}_t);
    #else
        ${H} = unpack_mix_${he}(a_${H}, u_${H}_t);
    #endif
#else
    ${F} ${q} ${H} = u_${H};
#endif
`:R==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${H}
    in ${F} ${q} a_${H};
    out ${F} ${q} ${H};
#endif
`:R==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${H}
    ${H} = a_${H};
#endif
`:void 0:R==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
    #if !defined(${re})
        in ${F} ${ee} a_${H};
    #endif
#else
uniform ${F} ${q} u_${H};
#endif
`:R==="define-instanced"?he==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${H}0;
in vec4 a_${H}1;
in vec4 a_${H}2;
in vec4 a_${H}3;
#else
uniform ${F} ${q} u_${H};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${F} ${ee} a_${H};
#else
uniform ${F} ${q} u_${H};
#endif
`:R==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${H}
    ${F} ${q} ${H} = a_${H};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    #ifdef ${re}
        ${F} ${q} ${H} = ${oe};
    #else
        ${F} ${q} ${H} = a_${H};
    #endif
#else
    ${F} ${q} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    #ifdef ${re}
        ${F} ${q} ${H} = unpack_mix_${he}(${oe}, u_${H}_t);
    #else
        ${F} ${q} ${H} = unpack_mix_${he}(a_${H}, u_${H}_t);
    #endif
#else
    ${F} ${q} ${H} = u_${H};
#endif
`}),usedDefines:O,vertexIncludes:v,fragmentIncludes:T}}class Wp{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,d,v,T,O,M,R,F){this.context=l;let q=this.boundPaintVertexBuffers.length!==T.length;for(let re=0;!q&&re<T.length;re++)this.boundPaintVertexBuffers[re]!==T[re]&&(q=!0);let H=this.boundDynamicVertexBuffers.length!==R.length;for(let re=0;!H&&re<R.length;re++)this.boundDynamicVertexBuffers[re]!==R[re]&&(H=!0);if(!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==v||q||H||this.boundIndexBuffer!==O||this.boundVertexOffset!==M)this.freshBind(d,v,T,O,M,R,F);else{l.bindVertexArrayOES.set(this.vao);for(const re of R)re&&(re.bind(),F&&re.instanceCount&&re.setVertexAttribDivisor(l.gl,d,F));O&&O.dynamicDraw&&O.bind()}}freshBind(l,d,v,T,O,M,R){const F=this.context,q=F.gl;this.vao&&this.destroy(),this.vao=F.gl.createVertexArray(),F.bindVertexArrayOES.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=T,this.boundVertexOffset=O,this.boundDynamicVertexBuffers=M,d.enableAttributes(q,l),d.bind(),d.setVertexAttribPointers(q,l,O);for(const H of v)H.enableAttributes(q,l),H.bind(),H.setVertexAttribPointers(q,l,O);for(const H of M)H&&(H.enableAttributes(q,l),H.bind(),H.setVertexAttribPointers(q,l,O),R&&H.instanceCount&&H.setVertexAttribDivisor(q,l,R));T&&T.bind()}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function F_(_,l){const d=Math.pow(2,l.canonical.z),v=l.canonical.y;return[new a.ae(0,v/d).toLngLat().lat,new a.ae(0,(v+1)/d).toLngLat().lat]}function Mg(_,l,d,v,T,O,M){const R=_.context,F=R.gl,q=d.hillshadeFBO;if(!q)return;_.prepareDrawTile();const H=_.isTileAffectedByFog(l),re=[];_.terrain&&_.terrain.renderingToTexture&&_.emissiveMode==="mrt-fallback"&&re.push("USE_MRT1");const ee=_.getOrCreateProgram("hillshade",{overrideFog:H,defines:re});R.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,q.colorAttachment0.get());const oe=((_e,Me,Ce,Ae)=>{const We=Ce.paint.get("hillshade-shadow-color"),$e=Ce.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",Ge=Ce.paint.get("hillshade-highlight-color"),Ne=Ce.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",Re=Ce.paint.get("hillshade-accent-color"),Je=Ce.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",nt=Ce.paint.get("hillshade-emissive-strength");let st=a.an(Ce.paint.get("hillshade-illumination-direction"));if(Ce.paint.get("hillshade-illumination-anchor")==="viewport")st-=_e.transform.angle;else if(_e.style&&_e.style.enable3dLights()&&_e.style.directionalLight){const ft=_e.style.directionalLight.properties.get("direction"),wt=a.d4(ft.x,ft.y,ft.z);st=a.an(wt[1])}const dt=!_e.options.moving;return{u_matrix:Ae||_e.transform.calculateProjMatrix(Me.tileID.toUnwrapped(),dt),u_image:0,u_latrange:F_(0,Me.tileID),u_light:[Ce.paint.get("hillshade-exaggeration"),st],u_shadow:We.toPremultipliedRenderColor($e?null:Ce.lut),u_highlight:Ge.toPremultipliedRenderColor(Ne?null:Ce.lut),u_emissive_strength:nt,u_accent:Re.toPremultipliedRenderColor(Je?null:Ce.lut)}})(_,d,v,_.terrain?l.projMatrix:null);_.uploadCommonUniforms(R,ee,l.toUnwrapped());const{tileBoundsBuffer:he,tileBoundsIndexBuffer:ce,tileBoundsSegments:de}=_.getTileBoundsBuffers(d);ee.draw(_,F.TRIANGLES,T,O,M,jn.disabled,oe,v.id,he,ce,de)}function El(_,l,d){if(!l.needsDEMTextureUpload)return;const v=_.context,T=v.gl;v.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||_.getTileTexture(d.stride);const O=d.getPixels();l.demTexture?l.demTexture.update(O,{premultiply:!1}):l.demTexture=new a.T(v,O,T.R32F,{premultiply:!1}),l.needsDEMTextureUpload=!1}function fu(_,l,d){const v=_.context,T=v.gl;if(!l.dem)return;const O=l.dem;if(v.activeTexture.set(T.TEXTURE1),El(_,l,O),!l.demTexture)return;l.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);const M=O.dim;v.activeTexture.set(T.TEXTURE0);let R=l.hillshadeFBO;if(!R){const ee=new a.T(v,{width:M,height:M,data:null},T.RGBA8);ee.bind(T.LINEAR,T.CLAMP_TO_EDGE),R=l.hillshadeFBO=v.createFramebuffer(M,M,1,"renderbuffer"),R.colorAttachment0.set(ee.texture)}v.bindFramebuffer.set(R.framebuffer),v.viewport.set([0,0,M,M]);const{tileBoundsBuffer:F,tileBoundsIndexBuffer:q,tileBoundsSegments:H}=_.getMercatorTileBoundsBuffers(),re=[];_.linearFloatFilteringSupported()&&re.push("TERRAIN_DEM_FLOAT_FORMAT"),_.terrain&&_.terrain.renderingToTexture&&_.emissiveMode==="mrt-fallback"&&re.push("USE_MRT1"),_.getOrCreateProgram("hillshadePrepare",{defines:re}).draw(_,T.TRIANGLES,On.disabled,qn.disabled,Gn.unblended,jn.disabled,((ee,oe)=>{const he=oe.stride,ce=a.bC();return a.ce(ce,0,a.al,-a.al,0,0,1),a.br(ce,ce,[0,-a.al,0]),{u_matrix:ce,u_image:1,u_dimension:[he,he],u_zoom:ee.overscaledZ}})(l.tileID,O),d.id,F,q,H),l.needsHillshadePrepare=!1}class ci{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Pc extends ci{getDefault(){return a.ao.transparent.toNonPremultipliedRenderColor(null)}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Vu extends ci{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class qu extends ci{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Dg extends ci{getDefault(){return[!0,!0,!0,!0]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Ig extends ci{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class xf extends ci{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Ad extends ci{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const d=this.current;(l.func!==d.func||l.ref!==d.ref||l.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class wo extends ci{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class la extends ci{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=l,this.dirty=!1}}class Di extends ci{getDefault(){return[0,1]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Rc extends ci{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=l,this.dirty=!1}}class Hl extends ci{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class hh extends ci{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.BLEND):d.disable(d.BLEND),this.current=l,this.dirty=!1}}class Hu extends ci{getDefault(){const l=this.gl;return[l.ONE,l.ZERO,l.ONE,l.ZERO]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.blendFuncSeparate(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Pg extends ci{getDefault(){return a.ao.transparent.toNonPremultipliedRenderColor(null)}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class B_ extends ci{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(l,l),this.current=l,this.dirty=!1)}}class wf extends ci{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=l,this.dirty=!1}}class Gu extends ci{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class j_ extends ci{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let Xp=class extends ci{getDefault(){return null}set(_){(_!==this.current||this.dirty)&&(this.gl.useProgram(_),this.current=_,this.dirty=!1)}};class U_ extends ci{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class hu extends ci{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class kc extends ci{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class dh extends ci{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Sf extends ci{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class C0 extends ci{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Rg extends ci{getDefault(){return null}set(l){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class ph extends ci{getDefault(){return null}set(l){this.gl&&(l!==this.current||this.dirty)&&(this.gl.bindVertexArray(l),this.current=l,this.dirty=!1)}}class Zp extends ci{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Tf extends ci{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class ls extends ci{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Od extends ci{constructor(l,d){super(l),this.context=l,this.parent=d}getDefault(){return null}}class kg extends Od{constructor(l,d,v=0){super(l,d),this.attachmentPoint=l.gl.COLOR_ATTACHMENT0+v}setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachmentPoint,d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Kp extends Od{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Lg extends Od{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachment(),d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class o1 extends Kp{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const Yi=(_,l,d,v)=>({u_matrix:_,u_image0:0,u_image1:1,u_skirt_height:l,u_ground_shadow_factor:d,u_emissive_texture_available:v}),Qp=(_,l,d,v,T,O,M,R,F,q,H,re,ee,oe,he,ce,de)=>({u_proj_matrix:Float32Array.from(_),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(v),u_merc_matrix:d,u_zoom_transition:T,u_merc_center:O,u_image0:0,u_image1:1,u_frustum_tl:M,u_frustum_tr:R,u_frustum_br:F,u_frustum_bl:q,u_globe_pos:H,u_globe_radius:re,u_viewport:ee,u_grid_matrix:de?Float32Array.from(de):new Float32Array(9),u_skirt_height:oe,u_far_z_cutoff:he,u_emissive_texture_available:ce});function Ef(_,l){return _!=null&&l!=null&&!(!_.hasData()||!l.hasData())&&_.demTexture!=null&&l.demTexture!=null&&_.tileID.key!==l.tileID.key}const Gl=new class{constructor(){this.operations={}}newMorphing(_,l,d,v,T){if(_ in this.operations){const O=this.operations[_];O.to.tileID.key!==d.tileID.key&&(O.queued=d)}else this.operations[_]={startTime:v,phase:0,duration:T,from:l,to:d,queued:null}}getMorphValuesForProxy(_){if(!(_ in this.operations))return null;const l=this.operations[_];return{from:l.from,to:l.to,phase:l.phase}}update(_){for(const l in this.operations){const d=this.operations[l];for(d.phase=(_-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,_)){delete this.operations[l];break}}}_nextOp(_,l){return!!_.queued&&(_.from=_.to,_.to=_.queued,_.queued=null,_.phase=0,_.startTime=l,!0)}_validOp(_){return _.from.hasData()&&_.to.hasData()}},Jp={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Af(_,l,d){if(l===0)return 0;const v=l<1&&d===514?.25/l:1;return 6*Math.pow(1.5,22-_)*Math.max(l,1)*v}function mh(_,l){const d=1<<_.z;return!l&&(_.x===0||_.x===d-1)||_.y===0||_.y===d-1}function em(_,l){if(!_.style||!_.style.enable3dLights())return;const d=_.context,v=d.gl;d.activeTexture.set(v.TEXTURE1),l?l.bind(v.LINEAR,v.CLAMP_TO_EDGE):_.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE)}const tm=_=>({u_matrix:_});function zg(_,l,d,v,T){if(T>0){const O=a.o.now(),M=(O-_.timeAdded)/T,R=l?(O-l.timeAdded)/T:-1,F=d.getSource(),q=v.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),H=!l||Math.abs(l.tileID.overscaledZ-q)>Math.abs(_.tileID.overscaledZ-q),re=H&&_.refreshedUponExpiration?1:a.aA(H?M:1-R,0,1);return l?{opacity:1,mix:1-re,isFading:M<1}:{opacity:re,mix:0,isFading:M<1}}return{opacity:1,mix:0,isFading:!1}}class Ng extends eo{constructor(l){const d=iu("mock-dem",{type:"raster-dem",maxzoom:l.transform.maxZoom},l.style.dispatcher,l.style);super("mock-dem",d,!1),d.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,d){l.state="loaded",d(null)}}class Of extends eo{constructor(l){const d=iu("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},l.style.dispatcher,l.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,d,v){if(l.freezeTileCoverage)return;this.transform=l;const T=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((O,M)=>{if(O[M.key]="",!this._tiles[M.key]){const R=new ff(M,this._source.tileSize*M.overscaleFactor(),l.tileZoom,void 0,void 0,this._source.worldview);R.state="loaded",this._tiles[M.key]=R}return O},{});for(const O in this._tiles)O in T||(this.freeFBO(O),this._tiles[O].unloadVectorData(),delete this._tiles[O])}freeFBO(l){const d=this.proxyCachedFBO[l];if(d!==void 0){const v=Object.values(d);this.renderCachePool.push(...v),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Fg extends a.aQ{constructor(l,d,v){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=d,this.projMatrix=v}}class nm extends a.bV{constructor(l,d){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[v,T,O]=(function(){const F=new a.bd,q=new a.b0,H=131;F.reserve(17161),q.reserve(33800);const re=a.al/128,ee=a.al+re/2,oe=ee+re;for(let ce=-re;ce<oe;ce+=re)for(let de=-re;de<oe;de+=re){const _e=de<0||de>ee||ce<0||ce>ee?24575:0,Me=a.aA(Math.round(de),0,a.al),Ce=a.aA(Math.round(ce),0,a.al);F.emplaceBack(Me+_e,Ce)}const he=(ce,de)=>{const _e=de*H+ce;q.emplaceBack(_e+1,_e,_e+H),q.emplaceBack(_e+H,_e+H+1,_e+1)};for(let ce=1;ce<129;ce++)for(let de=1;de<129;de++)he(de,ce);return[0,129].forEach(ce=>{for(let de=0;de<130;de++)he(de,ce),he(ce,de)}),[F,q,32768]})(),M=l.context;this.gridBuffer=M.createVertexBuffer(v,a.bf.members),this.gridIndexBuffer=M.createIndexBuffer(T),this.gridSegments=a.bg.simpleSegment(0,0,v.length,T.length),this.gridNoSkirtSegments=a.bg.simpleSegment(0,0,v.length,O),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Of(d.map),this.orthoMatrix=a.bC(),a.ce(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,a.al,0,a.al,0,1);const R=M.gl;this._overlapStencilMode=new qn({func:R.GEQUAL,mask:255},0,255,R.KEEP,R.KEEP,R.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Ng(d.map),this._pendingGroundEffectLayers=[],this._emissiveTexture=!1}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),this._style=l,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,d,v){if(l&&l.terrain){this._style!==l&&(this.style=l,this._evaluationZoom=void 0);const T=l.terrain.properties,O=l.terrain.drapeRenderMode===0,M=l.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=a.o.now();const R=l.terrain&&l.terrain.scope,F=T.get("source"),q=O?this._mockSourceCache:l.getSourceCache(F,R);if(!q)return void a.w(`Couldn't find terrain source "${F}".`);if(this.sourceCache=q,this._attenuationRange=l.terrain.getAttenuationRange(),this._exaggeration=M?this.calculateExaggeration(d):T.get("exaggeration"),!d.projection.requiresDraping&&M&&this._exaggeration===0)return void this._disable();this.enabled=!0;const H=()=>{this.sourceCache.used&&a.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const re=this.getScaledDemTileSize();this.sourceCache.update(d,re,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,H(),this._initializing=!0),H(),d.updateElevation(!0,v),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0,this._previousZoom=d.zoom}else this._disable()}calculateExaggeration(l){if(this._attenuationRange&&l.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(l.zoom);const d=this._previousCameraAltitude,v=l.getFreeCameraOptions().position.z/l.pixelsPerMeter*l.worldSize;this._previousCameraAltitude=v;const T=d!=null?v-d:Number.MAX_VALUE;if(Math.abs(T)<2)return this._exaggeration;const O=l.zoom,M=this._style.terrain;if(!this._previousUpdateTimestamp)return M.getExaggeration(O);let R=O-this._previousZoom;const F=this._previousUpdateTimestamp;let q=O;this._evaluationZoom!=null&&(q=this._evaluationZoom,Math.abs(O-q)>.5&&(R=.5*(O-q+R)),R*T<0&&(q+=R)),this._evaluationZoom=q;const H=M.getExaggeration(q),re=H===M.getExaggeration(Math.max(0,q-.1));if(re&&Math.abs(H-this._exaggeration)<.01)return H;let ee=Math.min(.1,.00375*(this._updateTimestamp-F));return(re||H<.1||Math.abs(R)<1e-4)&&(ee=Math.min(.2,4*ee)),a.ak(this._exaggeration,H,ee)}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(l){l.dataType==="source"&&l.coord?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._mergedSourceCaches)this._style._mergedSourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,v=this.painter.transform;this._initializing&&(this._initializing=v._centerAltitude===0&&this.getAtPointOrZero(a.ae.fromLngLat(v.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const T=this.proxyCoords=d.getIds().map(F=>{const q=d.getTileByID(F).tileID;return q.projMatrix=v.calculateProjMatrix(q.toUnwrapped()),q});(function(F,q){const H=q.transform.pointCoordinate(q.transform.getCameraPoint()),re=new a.P(H.x,H.y);F.sort((ee,oe)=>{if(oe.overscaledZ-ee.overscaledZ)return oe.overscaledZ-ee.overscaledZ;const he=new a.P(ee.canonical.x+(1<<ee.canonical.z)*ee.wrap,ee.canonical.y),ce=new a.P(oe.canonical.x+(1<<oe.canonical.z)*oe.wrap,oe.canonical.y),de=re.mult(1<<ee.canonical.z);return de.x-=.5,de.y-=.5,de.distSqr(he)-de.distSqr(ce)})})(T,this.painter);const O=this.proxyToSource||{};this.proxyToSource={},T.forEach(F=>{this.proxyToSource[F.key]={}}),this.terrainTileForTile={};const M=this._style._mergedSourceCaches;for(const F in M){const q=M[F];if(!q.used||(q!==this.sourceCache&&this.resetTileLookupCache(q.id),this._setupProxiedCoordsForOrtho(q,l[F],O),q.usedForTerrain))continue;const H=l[F];q.getSource().reparseOverscaled&&this._assignTerrainTiles(H)}this.proxiedCoords[d.id]=T.map(F=>new Fg(F,F.key,this.orthoMatrix)),this._assignTerrainTiles(T),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(O),this.renderingToTexture=!1;const R={};this._visibleDemTiles=[];for(const F of this.proxyCoords){const q=this.terrainTileForTile[F.key];if(!q)continue;const H=q.tileID.key;H in R||(this._visibleDemTiles.push(q),R[H]=H)}}_assignTerrainTiles(l){this._initializing||l.forEach(d=>{if(this.terrainTileForTile[d.key])return;const v=this._findTileCoveringTileID(d,this.sourceCache);v&&(this.terrainTileForTile[d.key]=v)})}_prepareDEMTextures(){const l=this.painter.context,d=l.gl;for(const v in this.terrainTileForTile){const T=this.terrainTileForTile[v],O=T.dem;!O||T.demTexture&&!T.needsDEMTextureUpload||(l.activeTexture.set(d.TEXTURE1),El(this.painter,T,O))}}_prepareDemTileUniforms(l,d,v,T){if(!d||d.demTexture==null)return!1;const O=l.tileID.canonical,M=Math.pow(2,d.tileID.canonical.z-O.z),R=T||"";return v[`u_dem_tl${R}`]=[O.x*M%1,O.y*M%1],v[`u_dem_scale${R}`]=M,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let l=0;const d=this._visibleDemTiles.reduce((v,T)=>{if(!T.dem)return v;const O=T.dem.tree.minimums[0];return O>0&&l++,v+O},0);return l?d/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,d=l.gl;l.activeTexture.set(d.TEXTURE2);const v=this._getLoadedAreaMinimum(),T=new a.dL({width:1,height:1},new Float32Array([v]));this._emptyDEMTextureDirty=!1;let O=this._emptyDEMTexture;return O?O.update(T,{premultiply:!1}):O=this._emptyDEMTexture=new a.T(l,T,d.R32F,{premultiply:!1}),O}setupElevationDraw(l,d,v){const T=this.painter.context,O=T.gl,M={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};M.u_exaggeration=this.exaggeration();let R=null,F=null,q=1;if(v&&v.morphing&&this._useVertexMorphing){const oe=v.morphing.srcDemTile,he=v.morphing.dstDemTile;q=v.morphing.phase,oe&&he&&(this._prepareDemTileUniforms(l,oe,M,"_prev")&&(F=oe),this._prepareDemTileUniforms(l,he,M)&&(R=he))}const H=oe=>oe&&oe.demTexture&&this.painter.linearFloatFilteringSupported()?O.LINEAR:O.NEAREST;let re=null;var ee;if(this.enabled?F&&R?(re=R.demTexture,T.activeTexture.set(O.TEXTURE4),F.demTexture.bind(H(F),O.CLAMP_TO_EDGE),M.u_dem_lerp=q):(R=this.terrainTileForTile[l.tileID.key],re=this._prepareDemTileUniforms(l,R,M)?R.demTexture:this.emptyDEMTexture):re=this.emptyDEMTexture,T.activeTexture.set(O.TEXTURE2),re&&(M.u_dem_size=(ee=re).size[0]===1?1:ee.size[0]-2,re.bind(H(R),O.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(v&&v.useDepthForOcclusion,d,M),v&&v.useMeterToDem&&R){const oe=(1<<R.tileID.canonical.z)*a.cf(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;M.u_meter_to_dem=oe}if(v&&v.labelPlaneMatrixInv&&(M.u_label_plane_matrix_inv=v.labelPlaneMatrixInv),d.setTerrainUniformValues(T,M),this.painter.transform.projection.name==="globe"){const oe=this.globeUniformValues(this.painter.transform,l.tileID.canonical,v&&v.useDenormalizedUpVectorScale);d.setGlobeUniformValues(T,oe)}}globeUniformValues(l,d,v){const T=l.projection;return{u_tile_tl_up:T.upVector(d,0,0),u_tile_tr_up:T.upVector(d,a.al,0),u_tile_br_up:T.upVector(d,a.al,a.al),u_tile_bl_up:T.upVector(d,0,a.al),u_tile_up_scale:v?a.dM(1):T.upVectorScale(d,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const d=this.painter,v=this.painter.context;l.length!==0&&(v.bindFramebuffer.set(null),v.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,(function(T,O,M,R,F){if(T.transform.projection.name==="globe")(function(q,H,re,ee,oe){const he=q.context,ce=he.gl;let de,_e;const Me=q.transform,Ce=a.dE(q,he,Me),Ae=(dt,ft)=>{if(_e===ft)return;const wt=[Jp[ft],"PROJECTION_GLOBE_VIEW"];Ce&&wt.push("CUSTOM_ANTIALIASING");const It=q.isTileAffectedByFog(dt);de=q.getOrCreateProgram("globeRaster",{defines:wt,overrideFog:It}),_e=ft},We=q.colorModeForRenderPass(),$e=new On(ce.LEQUAL,On.ReadWrite,q.depthRangeFor3D);Gl.update(oe);const Ge=a.dF(Me),Ne=[a.aF(Me.center.lng),a.aJ(Me.center.lat)],Re=q.globeSharedBuffers,Je=[Me.width*a.o.devicePixelRatio,Me.height*a.o.devicePixelRatio],nt=Float32Array.from(Me.globeMatrix),st={useDenormalizedUpVectorScale:!0};{const dt=q.transform,ft=Af(dt.zoom,H.exaggeration(),H.sourceCache._source.tileSize);_e=-1;const wt=ce.TRIANGLES;for(const It of ee){const pt=re.getTile(It),et=qn.disabled,At=H.prevTerrainTileForTile[It.key],gt=H.terrainTileForTile[It.key];Ef(At,gt)&&Gl.newMorphing(It.key,At,gt,oe,250),em(q,pt.emissiveTexture),he.activeTexture.set(ce.TEXTURE0),pt.texture&&pt.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);const Dt=Gl.getMorphValuesForProxy(It.key),qt=Dt?1:0;Dt&&Object.assign(st,{morphing:{srcDemTile:Dt.from,dstDemTile:Dt.to,phase:a.dD(Dt.phase)}});const tn=a.dG(It.canonical),Wt=a.dH(tn.getCenter().lat),Ht=a.dI(It.canonical,tn,Wt,dt.worldSize/dt._pixelsPerMercatorPixel),xn=a.bk(a.dJ(It.canonical)),yn=q.emissiveMode==="mrt-fallback"?1:0,rn=Qp(dt.expandedFarZProjMatrix,nt,Ge,xn,a.aj(dt.zoom),Ne,dt.frustumCorners.TL,dt.frustumCorners.TR,dt.frustumCorners.BR,dt.frustumCorners.BL,dt.globeCenterInViewSpace,dt.globeRadius,Je,ft,dt._farZ,yn,Ht);if(Ae(It,qt),de&&(H.setupElevationDraw(pt,de,st),q.uploadCommonUniforms(he,de,It.toUnwrapped()),Re)){const[_n,In,Un]=Re.getGridBuffers(Wt,ft!==0);de.draw(q,wt,$e,et,We,jn.backCCW,rn,"globe_raster",_n,In,Un)}}}if(Re&&(q.renderDefaultNorthPole||q.renderDefaultSouthPole)){const dt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Ce&&dt.push("CUSTOM_ANTIALIASING"),de=q.getOrCreateProgram("globeRaster",{defines:dt});for(const ft of ee){const{x:wt,y:It,z:pt}=ft.canonical,et=It===0,At=It===(1<<pt)-1,[gt,Dt,qt,tn]=Re.getPoleBuffers(pt,!1);if(tn&&(et||At)){const Wt=re.getTile(ft);em(q,Wt.emissiveTexture),he.activeTexture.set(ce.TEXTURE0),Wt.texture&&Wt.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);let Ht=a.dK(pt,wt,Me);const xn=a.bk(a.dJ(ft.canonical)),yn=q.emissiveMode==="mrt-fallback"?1:0,rn=(_n,In)=>_n.draw(q,ce.TRIANGLES,$e,qn.disabled,We,jn.disabled,Qp(Me.expandedFarZProjMatrix,Ht,Ht,xn,0,Ne,Me.frustumCorners.TL,Me.frustumCorners.TR,Me.frustumCorners.BR,Me.frustumCorners.BL,Me.globeCenterInViewSpace,Me.globeRadius,Je,0,Me._farZ,yn),"globe_pole_raster",In,qt,tn);H.setupElevationDraw(Wt,de,st),q.uploadCommonUniforms(he,de,ft.toUnwrapped()),et&&q.renderDefaultNorthPole&&rn(de,gt),At&&q.renderDefaultSouthPole&&(Ht=a.cS(a.bC(),Ht,[1,-1,1]),rn(de,Dt))}}}})(T,O,M,R,F);else{const q=T.context,H=q.gl;let re,ee;const oe=T.shadowRenderer,he=$l(T,T.longestCutoffRange),ce=We=>{if(ee===We)return;const $e=[];$e.push(Jp[We]),he.shouldRenderCutoff&&$e.push("RENDER_CUTOFF"),oe&&($e.push("RENDER_SHADOWS","DEPTH_TEXTURE"),oe.useNormalOffset&&$e.push("NORMAL_OFFSET")),re=T.getOrCreateProgram("terrainRaster",{defines:$e}),ee=We},de=T.colorModeForRenderPass(),_e=new On(H.LEQUAL,On.ReadWrite,T.depthRangeFor3D);Gl.update(F);const Me=T.transform,Ce=Af(Me.zoom,O.exaggeration(),O.sourceCache._source.tileSize);let Ae=[0,0,0];if(oe){const We=T.style.directionalLight,$e=T.style.ambientLight;We&&$e&&(Ae=js(T.style,We,$e))}{ee=-1;const We=H.TRIANGLES,[$e,Ge]=[O.gridIndexBuffer,O.gridSegments];for(const Ne of R){const Re=M.getTile(Ne),Je=qn.disabled,nt=O.prevTerrainTileForTile[Ne.key],st=O.terrainTileForTile[Ne.key];Ef(nt,st)&&Gl.newMorphing(Ne.key,nt,st,F,250),em(T,Re.emissiveTexture),q.activeTexture.set(H.TEXTURE0),Re.texture&&Re.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE);const dt=Gl.getMorphValuesForProxy(Ne.key),ft=dt?1:0;let wt;dt&&(wt={morphing:{srcDemTile:dt.from,dstDemTile:dt.to,phase:a.dD(dt.phase)}});const It=T.emissiveMode==="mrt-fallback"?1:0,pt=Yi(Ne.projMatrix,mh(Ne.canonical,Me.renderWorldCopies)?Ce/10:Ce,Ae,It);if(ce(ft),!re)continue;O.setupElevationDraw(Re,re,wt);const et=Ne.toUnwrapped();oe&&oe.setupShadows(et,re),T.uploadCommonUniforms(q,re,et,null,he),re.draw(T,We,_e,Je,de,jn.backCCW,pt,"terrain_raster",O.gridBuffer,$e,Ge)}}}})(d,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const d=this.painter,v=this.painter.context,T=this.proxySourceCache,O=this.proxiedCoords[T.id],M=this._drapedRenderBatches.shift(),R=d.style.order,F=[];this._updateFBOs(d.emissiveMode==="mrt-fallback");let q=0;for(const H of O){const re=T.getTileByID(H.proxyTileKey),ee=T.proxyCachedFBO[H.key]?T.proxyCachedFBO[H.key][l]:void 0,oe=ee!==void 0?T.renderCache[ee]:this.pool[q++],he=ee!==void 0;if(re.texture=oe.tex,re.emissiveTexture=oe.emissiveTex,he&&!oe.dirty){F.push(re.tileID);continue}v.bindFramebuffer.set(oe.fb.framebuffer);const ce=v.gl;let de;ce.drawBuffers(d.emissiveMode==="mrt-fallback"?[ce.COLOR_ATTACHMENT0,ce.COLOR_ATTACHMENT1]:[ce.COLOR_ATTACHMENT0]),this.renderedToTile=!1,oe.dirty&&(v.clear({color:a.ao.transparent,stencil:0}),oe.dirty=!1);for(let _e=M.start;_e<=M.end;++_e){const Me=d.style._mergedLayers[R[_e]];if(Me.isHidden(d.transform.zoom))continue;const Ce=d.style.getLayerSourceCache(Me),Ae=Ce?this.proxyToSource[H.key][Ce.id]:[H];if(!Ae)continue;const We=Ae;v.viewport.set([0,0,oe.fb.width,oe.fb.height]),de!==(Ce?Ce.id:null)&&(this._setupStencil(oe,Ae,Me,Ce),de=Ce?Ce.id:null),d.renderLayer(d,Ce,Me,We)}if(ce.drawBuffers([ce.COLOR_ATTACHMENT0]),this._drapedRenderBatches.length===0)for(const _e of this._pendingGroundEffectLayers){const Me=d.style._mergedLayers[R[_e]];if(Me.isHidden(d.transform.zoom))continue;const Ce=d.style.getLayerSourceCache(Me),Ae=Ce?this.proxyToSource[H.key][Ce.id]:[H];if(!Ae)continue;const We=Ae;v.viewport.set([0,0,oe.fb.width,oe.fb.height]),de!==(Ce?Ce.id:null)&&(this._setupStencil(oe,Ae,Me,Ce),de=Ce?Ce.id:null),d.renderLayer(d,Ce,Me,We)}this.renderedToTile?(oe.dirty=!0,F.push(re.tileID)):he||--q,q===5&&(q=0,this.renderToBackBuffer(F))}return this.renderToBackBuffer(F),this.renderingToTexture=!1,v.bindFramebuffer.set(null),v.viewport.set([0,0,d.width,d.height]),M.end+1}postRender(){}isLayerOrderingCorrect(l){const d=l.order.length;let v=-1,T=d;for(let O=0;O<d;++O)this._style.isLayerDraped(l._mergedLayers[l.order[O]])?v=Math.max(v,O):T=Math.min(T,O);return T>v}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{l=Math.min(l,d.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,d,v){if(!this._visibleDemTiles)return null;const T=this._visibleDemTiles.filter(O=>O.dem).map(O=>{const M=O.tileID,R=1<<M.overscaledZ,{x:F,y:q}=M.canonical,H=F/R,re=(F+1)/R,ee=q/R,oe=(q+1)/R;return{minx:H,miny:ee,maxx:re,maxy:oe,t:O.dem.tree.raycastRoot(H,ee,re,oe,l,d,v),tile:O}});T.sort((O,M)=>(O.t!==null?O.t:Number.MAX_VALUE)-(M.t!==null?M.t:Number.MAX_VALUE));for(const O of T){if(O.t==null)return null;const M=O.tile.dem.tree.raycast(O.minx,O.miny,O.maxx,O.maxy,l,d,v);if(M!=null)return M}return null}_createFBO(){const l=this.painter.context,d=l.gl,v=this.drapeBufferSize;l.activeTexture.set(d.TEXTURE0);const T=new a.T(l,{width:v[0],height:v[1],data:null},d.RGBA8);T.bind(d.LINEAR,d.CLAMP_TO_EDGE);const O=l.createFramebuffer(v[0],v[1],1,null);let M;return O.colorAttachment0.set(T.texture),this._emissiveTexture&&(M=new a.T(l,{width:v[0],height:v[1],data:null},d.R8),M.bind(d.LINEAR,d.CLAMP_TO_EDGE),O.createColorAttachment(l,1),O.colorAttachment1.set(M.texture)),O.depthAttachment=new o1(l,O.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,v[0],v[1]),this._stencilRef=0,O.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):O.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&d.texParameterf(d.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:O,tex:T,emissiveTex:M,dirty:!1}}_updateFBOs(l){if(this._emissiveTexture!==l){for(const d of this.pool)this._updateFBO(d,l);for(const d of this.proxySourceCache.renderCache)this._updateFBO(d,l);this._emissiveTexture=l}}_updateFBO(l,d){const v=l.fb,T=this.painter.context,O=T.gl,M=this.drapeBufferSize;if(d){const R=new a.T(T,{width:M[0],height:M[1],data:null},O.R8);R.bind(O.LINEAR,O.CLAMP_TO_EDGE),l.emissiveTex=R,v.createColorAttachment(T,1),v.colorAttachment1.set(R.texture)}else l.emissiveTex=void 0,v.removeColorAttachment(T,1);l.dirty=!0}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const l in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const d=this._style._mergedLayers[l],v=d.isHidden(this.painter.transform.zoom);return d.type==="hillshade"||d.type==="custom"?!v&&d.shouldRedrape():!v&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const v of this._style.getSources())if(v instanceof ru){l=!0;break}if(!l)return;const d={};for(let v=0;v<this._style.order.length;++v){const T=this._style._mergedLayers[this._style.order[v]],O=this._style.getLayerSourceCache(T);if(!O||d[O.id]||T.isHidden(this.painter.transform.zoom)||T.type!=="line")continue;const M=T.widthExpression(),R=T.emissiveStrengthExpression();if(M instanceof a.ad||R instanceof a.ad){d[O.id]=!0;for(const F of this.proxyCoords){const q=this.proxyToSource[F.key][O.id];if(q)for(const H of q)this._clearRenderCacheForTile(O.id,H)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const v in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[v]._source instanceof so){l=!0;break}if(!l)return;const d={};for(let v=0;v<this._style.order.length;++v){const T=this._style._mergedLayers[this._style.order[v]],O=this._style.getLayerSourceCache(T);if(!O||d[O.id]||T.isHidden(this.painter.transform.zoom)||T.type!=="raster")continue;const M=T.paint.get("raster-fade-duration");for(const R of this.proxyCoords){const F=this.proxyToSource[R.key][O.id];if(F)for(const q of F){const H=zg(O.getTile(q),O.findLoadedParent(q,0),O,this.painter.transform,M);(H.opacity!==1||H.mix!==0)&&this._clearRenderCacheForTile(O.id,q)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const l=this._style.order,d=l.length;if(d===0)return;const v=[];this._pendingGroundEffectLayers=[];let T,O=0,M=this._style._mergedLayers[l[O]];for(;!this._style.isLayerDraped(M)&&M.isHidden(this.painter.transform.zoom)&&++O<d;)M=this._style._mergedLayers[l[O]];for(;O<d;++O){const R=this._style._mergedLayers[l[O]];R.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(R)?T===void 0&&(T=O):(R.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(O),T!==void 0&&(v.push({start:T,end:O-1}),T=void 0)))}if(T!==void 0&&v.push({start:T,end:O-1}),v.length!==0){const R=v[v.length-1];this._pendingGroundEffectLayers.every(F=>F>R.end)||a.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=v}_setupRenderCache(l){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const M=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let R=0;R<M.length;++R){const F=Object.values(M[R]);d.renderCachePool.push(...F)}}return}this._clearRasterLayersFromRenderCache();const v=this.proxyCoords,T=this._tilesDirty;for(let M=v.length-1;M>=0;M--){const R=v[M];if(d.getTileByID(R.key),d.proxyCachedFBO[R.key]!==void 0){const F=l[R.key],q=this.proxyToSource[R.key];let H=0;for(const re in q){const ee=q[re],oe=F[re];if(!oe||oe.length!==ee.length||ee.some((he,ce)=>he!==oe[ce]||T[re]&&T[re].hasOwnProperty(he.key))){H=-1;break}++H}for(const re in d.proxyCachedFBO[R.key])d.renderCache[d.proxyCachedFBO[R.key][re]].dirty=H<0||H!==Object.values(F).length}}const O=[...this._drapedRenderBatches];O.sort((M,R)=>R.end-R.start-(M.end-M.start));for(const M of O)for(const R of v){if(d.proxyCachedFBO[R.key])continue;let F=d.renderCachePool.pop();F===void 0&&d.renderCache.length<50&&(F=d.renderCache.length,d.renderCache.push(this._createFBO())),F!==void 0&&(d.proxyCachedFBO[R.key]={},d.proxyCachedFBO[R.key][M.start]=F,d.renderCache[F].dirty=!0)}this._tilesDirty={}}_setupStencil(l,d,v,T){if(!T||!this._sourceTilesOverlap[T.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const O=this.painter.context,M=O.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let R;if(v.isTileClipped())R=d.length,this._overlapStencilMode.test={func:M.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);R=1,this._overlapStencilMode.test={func:M.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+R>255&&(O.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=R,this._overlapStencilMode.ref=this._stencilRef,v.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):qn.disabled}_renderTileClippingMasks(l,d){const v=this.painter,T=this.painter.context,O=T.gl;v._tileClippingMaskIDs={},T.setColorMode(Gn.disabled),T.setDepthMode(On.disabled);const M=v.getOrCreateProgram("clippingMask");for(const R of l){const F=v._tileClippingMaskIDs[R.key]=--d;M.draw(v,O.TRIANGLES,On.disabled,new qn({func:O.ALWAYS,mask:0},F,255,O.KEEP,O.KEEP,O.REPLACE),Gn.disabled,jn.disabled,tm(R.projMatrix),"$clipping",v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}}pointCoordinate(l){const d=this.painter.transform;if(l.x<0||l.x>d.width||l.y<0||l.y>d.height)return null;const v=[l.x,l.y,1,1];a.aC(v,v,d.pixelMatrixInverse),a.cK(v,v,1/v[3]),v[0]/=d.worldSize,v[1]/=d.worldSize;const T=d._camera.position,O=a.cf(1,d.center.lat),M=[T[0],T[1],T[2]/O,0],R=a.da([],v.slice(0,3),M);a.aw(R,R);const F=this.raycast(M,R,this._exaggeration);return F!==null&&F?(a.bH(M,M,R,F),M[3]=M[2],M[2]*=O,M):null}_setupProxiedCoordsForOrtho(l,d,v){if(l.getSource()instanceof a.aU)return this._setupProxiedCoordsForImageSource(l,d,v);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const T=this.proxiedCoords[l.id]=[],O=this.proxyCoords;for(let F=0;F<O.length;F++){const q=O[F],H=this._findTileCoveringTileID(q,l);if(H){const re=this._createProxiedId(q,H,v[q.key]&&v[q.key][l.id]);T.push(re),this.proxyToSource[q.key][l.id]=[re]}}let M=!1;const R=new Set;for(let F=0;F<d.length;F++){const q=l.getTile(d[F]);if(!q||!q.hasData())continue;const H=this._findTileCoveringTileID(q.tileID,this.proxySourceCache);if(H&&H.tileID.canonical.z!==q.tileID.canonical.z){const re=this.proxyToSource[H.tileID.key][l.id],ee=this._createProxiedId(H.tileID,q,v[H.tileID.key]&&v[H.tileID.key][l.id]);re?re.splice(re.length-1,0,ee):this.proxyToSource[H.tileID.key][l.id]=[ee];const oe=this.proxyToSource[H.tileID.key][l.id];R.has(oe)||R.add(oe),T.push(ee),M=!0}}if(this._sourceTilesOverlap[l.id]=M,M&&this._debugParams.sortTilesHiZFirst)for(const F of R)F.sort((q,H)=>H.overscaledZ-q.overscaledZ)}_setupProxiedCoordsForImageSource(l,d,v){if(!l.getSource().loaded())return;const T=this.proxiedCoords[l.id]=[],O=this.proxyCoords,M=l.getSource(),R=M.tileID;if(!R)return;const F=new a.P(R.x,R.y)._div(1<<R.z),q=M.coordinates.map(a.ae.fromLngLat).reduce((re,ee)=>(re.min.x=Math.min(re.min.x,ee.x-F.x),re.min.y=Math.min(re.min.y,ee.y-F.y),re.max.x=Math.max(re.max.x,ee.x-F.x),re.max.y=Math.max(re.max.y,ee.y-F.y),re),{min:new a.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new a.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),H=(re,ee)=>{const oe=re.wrap+re.canonical.x/(1<<re.canonical.z),he=re.canonical.y/(1<<re.canonical.z),ce=a.al/(1<<re.canonical.z),de=ee.wrap+ee.canonical.x/(1<<ee.canonical.z),_e=ee.canonical.y/(1<<ee.canonical.z);return oe+ce<de+q.min.x||oe>de+q.max.x||he+ce<_e+q.min.y||he>_e+q.max.y};for(let re=0;re<O.length;re++){const ee=O[re];for(let oe=0;oe<d.length;oe++){const he=l.getTile(d[oe]);if(!he||!he.hasData()||H(ee,he.tileID))continue;const ce=this._createProxiedId(ee,he,v[ee.key]&&v[ee.key][l.id]),de=this.proxyToSource[ee.key][l.id];de?de.push(ce):this.proxyToSource[ee.key][l.id]=[ce],T.push(ce)}}}_createProxiedId(l,d,v){let T=this.orthoMatrix;if(v){const O=v.find(M=>M.key===d.tileID.key);if(O)return O}if(d.tileID.key!==l.key){const O=l.canonical.z-d.tileID.canonical.z;let M,R,F;T=a.bC();const q=d.tileID.wrap-l.wrap<<l.overscaledZ;O>0?(M=a.al>>O,R=M*((d.tileID.canonical.x<<O)-l.canonical.x+q),F=M*((d.tileID.canonical.y<<O)-l.canonical.y)):(M=a.al<<-O,R=a.al*(d.tileID.canonical.x-(l.canonical.x+q<<-O)),F=a.al*(d.tileID.canonical.y-(l.canonical.y<<-O))),a.ce(T,0,M,0,M,0,1),a.br(T,T,[R,F,0])}return new Fg(d.tileID,l.key,T)}_findTileCoveringTileID(l,d){let v=d.getTile(l);if(v&&v.hasData())return v;const T=this._findCoveringTileCache[d.id],O=T[l.key];if(v=O?d.getTileByID(O):null,v&&v.hasData()||O===null)return v;let M=v?v.tileID:l,R=M.overscaledZ;const F=d.getSource().minzoom,q=[];if(!O){const re=d.getSource().maxzoom;if(l.canonical.z>=re){const ee=l.canonical.z-re;d.getSource().reparseOverscaled?(R=Math.max(l.canonical.z+2,d.transform.tileZoom),M=new a.aQ(R,l.wrap,re,l.canonical.x>>ee,l.canonical.y>>ee)):ee!==0&&(R=re,M=new a.aQ(R,l.wrap,re,l.canonical.x>>ee,l.canonical.y>>ee))}M.key!==l.key&&(q.push(M.key),v=d.getTile(M))}const H=re=>{q.forEach(ee=>{T[ee]=re}),q.length=0};for(R-=1;R>=F&&(!v||!v.hasData());R--){v&&H(v.tileID.key);const re=M.calculateScaledKey(R);if(v=d.getTileByID(re),v&&v.hasData())break;const ee=T[re];if(ee===null)break;ee===void 0?q.push(re):v=d.getTileByID(ee)}return H(v?v.tileID.key:null),v&&v.hasData()?v:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,d){let v=this._tilesDirty[l];v||(v=this._tilesDirty[l]={}),v[d.key]=!0}}function Cd(_,l,d){const v=(function(R,F,q){const H=a.bJ(F,R),re=a.bJ(q,[.2126,.7152,.0722]),ee=(he,ce,de)=>(1-de)*he+de*ce,oe=ee(1-.3*Math.min(re,1),1,Math.min(H+1,1));return ee(.92,1,Math.asin(a.aA(F[2],-1,1))/Math.PI+.5)*oe})(_,[0,0,1],l),T=[0,0,0];a.c5(T,d.slice(0,3),v);const O=[0,0,0];a.c5(O,l.slice(0,3),_[2]);const M=[0,0,0];return a.d8(M,T,O),a.db(M)}const rm=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],M0=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","building","buildingBloom","elevatedStructures","model","symbol"];class Bg{static cacheKey(l,d,v,T){const O=[d];T&&O.push(T.cacheKey);for(const M of v)l.usedDefines.has(M)&&O.push(M);return O.join("/")}constructor(l,d,v,T,O,M){const R=l.gl;this.program=R.createProgram(),this.configuration=T,this.name=d,this.fixedDefines=[...M];const F=`#version 300 es
${(T?T.defines():[]).concat(M.map(ce=>`#define ${ce}`)).join(`
`)}`,q=[F,a1];for(const ce of v.fragmentIncludes)q.push(bf[ce]);q.push(v.fragmentSource);const H=q.join(`
`),re=[F,z_];for(const ce of v.vertexIncludes)re.push(bf[ce]);this.forceManualRenderingForInstanceIDShaders=l.forceManualRenderingForInstanceIDShaders&&v.vertexSource.includes("gl_InstanceID"),this.forceManualRenderingForInstanceIDShaders&&re.push("uniform int u_instanceID;"),re.push(v.vertexSource);let ee=re.join(`
`);this.forceManualRenderingForInstanceIDShaders&&(ee=ee.replaceAll("gl_InstanceID","u_instanceID"));const oe=R.createShader(R.FRAGMENT_SHADER);if(R.isContextLost())return void(this.failedToCreate=!0);R.shaderSource(oe,H),R.compileShader(oe),R.attachShader(this.program,oe);const he=R.createShader(R.VERTEX_SHADER);R.isContextLost()?this.failedToCreate=!0:(R.shaderSource(he,ee),R.compileShader(he),R.attachShader(this.program,he),this.attributes={},R.linkProgram(this.program),R.deleteShader(he),R.deleteShader(oe),this.fixedUniforms=O(l),this.fixedUniformsEntries=Object.entries(this.fixedUniforms),this.binderUniforms=T?T.getUniforms(l):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(ce=>({u_instanceID:new a.ch(ce)}))(l)),(M.includes("TERRAIN")||d.includes("symbol")||d.includes("circle"))&&(this.terrainUniforms=(ce=>({u_dem:new a.ch(ce),u_dem_prev:new a.ch(ce),u_dem_tl:new a.ck(ce),u_dem_scale:new a.cj(ce),u_dem_tl_prev:new a.ck(ce),u_dem_scale_prev:new a.cj(ce),u_dem_size:new a.cj(ce),u_dem_lerp:new a.cj(ce),u_exaggeration:new a.cj(ce),u_depth:new a.ch(ce),u_depth_size_inv:new a.ck(ce),u_depth_range_unpack:new a.ck(ce),u_occluder_half_size:new a.cj(ce),u_occlusion_depth_offset:new a.cj(ce),u_meter_to_dem:new a.cj(ce),u_label_plane_matrix_inv:new a.cl(ce)}))(l)),M.includes("GLOBE")&&(this.globeUniforms=(ce=>({u_tile_tl_up:new a.ci(ce),u_tile_tr_up:new a.ci(ce),u_tile_br_up:new a.ci(ce),u_tile_bl_up:new a.ci(ce),u_tile_up_scale:new a.cj(ce)}))(l)),M.includes("FOG")&&(this.fogUniforms=(ce=>({u_fog_matrix:new a.cl(ce),u_fog_range:new a.ck(ce),u_fog_color:new a.d3(ce),u_fog_horizon_blend:new a.cj(ce),u_fog_vertical_limit:new a.ck(ce),u_fog_temporal_offset:new a.cj(ce),u_frustum_tl:new a.ci(ce),u_frustum_tr:new a.ci(ce),u_frustum_br:new a.ci(ce),u_frustum_bl:new a.ci(ce),u_globe_pos:new a.ci(ce),u_globe_radius:new a.cj(ce),u_globe_transition:new a.cj(ce),u_is_globe:new a.ch(ce),u_viewport:new a.ck(ce)}))(l)),M.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(ce=>({u_cutoff_params:new a.d3(ce)}))(l)),M.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(ce=>({u_lighting_ambient_color:new a.ci(ce),u_lighting_directional_dir:new a.ci(ce),u_lighting_directional_color:new a.ci(ce),u_ground_radiance:new a.ci(ce)}))(l)),M.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(ce=>({u_light_matrix_0:new a.cl(ce),u_light_matrix_1:new a.cl(ce),u_fade_range:new a.ck(ce),u_shadow_normal_offset:new a.ci(ce),u_shadow_intensity:new a.cj(ce),u_shadow_texel_size:new a.cj(ce),u_shadow_map_resolution:new a.cj(ce),u_shadow_direction:new a.ci(ce),u_shadow_bias:new a.ci(ce),u_shadowmap_0:new a.ch(ce),u_shadowmap_1:new a.ch(ce)}))(l)))}getAttributeLocation(l,d){let v=this.attributes[d];return v===void 0&&(v=this.attributes[d]=l.getAttribLocation(this.program,d)),v}setTerrainUniformValues(l,d){if(!this.terrainUniforms)return;const v=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in d)v[T]&&v[T].set(this.program,T,d[T])}}setGlobeUniformValues(l,d){if(!this.globeUniforms)return;const v=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in d)v[T]&&v[T].set(this.program,T,d[T])}}setFogUniformValues(l,d){if(!this.fogUniforms)return;const v=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in d)v[T].set(this.program,T,d[T])}}setCutoffUniformValues(l,d){if(!this.cutoffUniforms)return;const v=this.cutoffUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in d)v[T].set(this.program,T,d[T])}}setLightsUniformValues(l,d){if(!this.lightsUniforms)return;const v=this.lightsUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in d)v[T].set(this.program,T,d[T])}}setShadowUniformValues(l,d){if(this.failedToCreate||!this.shadowUniforms)return;const v=this.shadowUniforms;l.program.set(this.program);for(const T in d)v[T].set(this.program,T,d[T])}_drawDebugWireframe(l,d,v,T,O,M,R,F,q,H){const re=l.options.wireframe;if(re.terrain===!1&&re.layers2D===!1&&re.layers3D===!1)return;const ee=l.context;if(!(!(!re.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!re.layers2D||l._terrain&&l._terrain.renderingToTexture||!rm.includes(this.name))||!(!re.layers3D||!M0.includes(this.name))))return;const oe=ee.gl,he=l.wireframeDebugCache.getLinesFromTrianglesBuffer(l.frameCounter,O,ee);if(!he)return;const ce=[...this.fixedDefines,"DEBUG_WIREFRAME"],de=l.getOrCreateProgram(this.name,{config:this.configuration,defines:ce});ee.program.set(de.program);const _e=(Ae,We,$e)=>{if(We[Ae]&&$e[Ae])for(const Ge in We[Ae])$e[Ae][Ge]&&$e[Ae][Ge].set($e.program,Ge,We[Ae][Ge].current)};q&&q.setUniforms(de.program,ee,de.binderUniforms,R,{zoom:F}),_e("fixedUniforms",this,de),_e("terrainUniforms",this,de),_e("globeUniforms",this,de),_e("fogUniforms",this,de),_e("lightsUniforms",this,de),_e("shadowUniforms",this,de),he.bind(),ee.setColorMode(new Gn([oe.ONE,oe.ONE_MINUS_SRC_ALPHA,oe.ZERO,oe.ONE],a.ao.transparent,[!0,!0,!0,!1])),ee.setDepthMode(new On(d.func===oe.LESS?oe.LEQUAL:d.func,On.ReadOnly,d.range)),ee.setStencilMode(qn.disabled);const Me=3*M.primitiveLength*2,Ce=3*M.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const Ae=H||1;for(let We=0;We<Ae;++We)de.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",We),oe.drawElements(oe.LINES,Me,oe.UNSIGNED_SHORT,Ce)}else H&&H>1?oe.drawElementsInstanced(oe.LINES,Me,oe.UNSIGNED_SHORT,Ce,H):oe.drawElements(oe.LINES,Me,oe.UNSIGNED_SHORT,Ce);O.bind(),ee.program.set(this.program),ee.setDepthMode(d),ee.setStencilMode(v),ee.setColorMode(T)}checkUniforms(l,d,v){if(this.fixedDefines.includes(d)){for(const T of Object.keys(v))if(!v[T].initialized)throw new Error(`Program '${this.name}', from draw '${l}': uniform ${T} not set but required by ${d} being defined`)}}draw(l,d,v,T,O,M,R,F,q,H,re,ee,oe,he,ce,de){const _e=l.context,Me=_e.gl;if(this.failedToCreate)return;_e.program.set(this.program),_e.setDepthMode(v),_e.setStencilMode(T),_e.setColorMode(O),_e.setCullFace(M);for(const[Ne,Re]of this.fixedUniformsEntries)Re.set(this.program,Ne,R[Ne]);he&&he.setUniforms(this.program,_e,this.binderUniforms,ee,{zoom:oe});const Ce={[Me.POINTS]:1,[Me.LINES]:2,[Me.TRIANGLES]:3,[Me.LINE_STRIP]:1}[d];this.checkUniforms(F,"RENDER_SHADOWS",this.shadowUniforms);const Ae=ce||[],We=he?he.getPaintVertexBuffers():[],$e=d===Me.TRIANGLES&&H,Ge=de&&de>0?1:void 0;for(const Ne of re.get()){const Re=Ne.vaos||(Ne.vaos={});if((Re[F]||(Re[F]=new Wp)).bind(_e,this,q,We,H,Ne.vertexOffset,Ae,Ge),this.forceManualRenderingForInstanceIDShaders){const Je=de||1;for(let nt=0;nt<Je;++nt)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",nt),H?Me.drawElements(d,Ne.primitiveLength*Ce,Me.UNSIGNED_SHORT,Ne.primitiveOffset*Ce*2):Me.drawArrays(d,Ne.vertexOffset,Ne.vertexLength)}else de&&de>1?Me.drawElementsInstanced(d,Ne.primitiveLength*Ce,Me.UNSIGNED_SHORT,Ne.primitiveOffset*Ce*2,de):H?Me.drawElements(d,Ne.primitiveLength*Ce,Me.UNSIGNED_SHORT,Ne.primitiveOffset*Ce*2):Me.drawArrays(d,Ne.vertexOffset,Ne.vertexLength);$e&&this._drawDebugWireframe(l,v,T,O,H,Ne,ee,oe,he,de)}}}function jg(_,l,d=0){const v=Math.pow(2,l.tileID.overscaledZ),T=l.tileSize*Math.pow(2,_.transform.tileZoom)/v,O=T*(l.tileID.canonical.x+l.tileID.wrap*v),M=T*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture?l.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/a.ay(l,1,_.transform.tileZoom),u_pixel_coord_upper:[O>>16,M>>16],u_pixel_coord_lower:[65535&O,65535&M],u_pattern_transition:d}}const Ug={terrain:0,flat:1},s1=a.bC(),Lc=(_,l,d,v,T,O,M,R,F,q,H,re,ee,oe,he,ce,de,_e)=>{const Me=l.style.light,Ce=Me.properties.get("position"),Ae=[Ce.x,Ce.y,Ce.z],We=a.dO();Me.properties.get("anchor")==="viewport"&&(a.dP(We,-l.transform.angle),a.dQ(Ae,Ae,We));const $e=Me.properties.get("color").toPremultipliedRenderColor(null),Ge=l.transform,Ne={u_matrix:_,u_lightpos:Ae,u_lightintensity:Me.properties.get("intensity"),u_lightcolor:[$e.r,$e.g,$e.b],u_vertical_gradient:+d,u_opacity:v,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:s1,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:Ug[q],u_base_type:Ug[H],u_ao:T,u_edge_radius:O,u_width_scale:M,u_flood_light_color:he,u_vertical_scale:ce,u_flood_light_intensity:de,u_ground_shadow_factor:_e};return Ge.projection.name==="globe"&&(Ne.u_tile_id=[R.canonical.x,R.canonical.y,1<<R.canonical.z],Ne.u_zoom_transition=re,Ne.u_inv_rot_matrix=oe,Ne.u_merc_center=ee,Ne.u_up_dir=Ge.projection.upVector(new a.cD(0,0,0),ee[0]*a.al,ee[1]*a.al),Ne.u_height_lift=F),Ne},Cf=(_,l,d,v,T,O)=>({u_matrix:_,u_edge_radius:l,u_width_scale:d,u_vertical_scale:v,u_height_type:Ug[T],u_base_type:Ug[O]}),D0=(_,l,d,v,T,O,M,R,F,q,H,re,ee,oe,he,ce,de,_e)=>{const Me=Lc(_,l,d,v,T,O,M,R,q,H,re,ee,oe,he,ce,de,1,[0,0,0]),Ce={u_height_factor:-Math.pow(2,R.overscaledZ)/F.tileSize/8};return Object.assign(Me,jg(l,F,_e),Ce)},gh=(_,l,d)=>({u_matrix:_,u_emissive_strength:l,u_ground_shadow_factor:d}),yh=(_,l,d,v,T,O=0)=>Object.assign(gh(_,l,T),jg(d,v,O)),im=(_,l,d,v)=>({u_matrix:_,u_world:d,u_emissive_strength:l,u_ground_shadow_factor:v}),$g=(_,l,d,v,T,O,M=0)=>Object.assign(yh(_,l,d,v,O,M),{u_world:T}),Md=(_,l)=>({u_matrix:_,u_depth_bias:l}),Yu=(_,l)=>({u_matrix:_,u_ground_shadow_factor:l}),_h=(_,l,d,v,T)=>({u_matrix:_,u_camera_pos:[l[0],l[1],l[2]],u_depth_bias:d,u_height_scale:v,u_reset_depth:T}),zc=(_,l,d,v,T,O,M,R,F)=>({u_matrix:_,u_normal_matrix:l,u_opacity:d,u_faux_facade_ao_intensity:v,u_camera_pos:T,u_tile_to_meter:O,u_facade_emissive_chance:M,u_flood_light_color:R,u_flood_light_intensity:F}),I0=_=>({u_matrix:_}),sl=_=>({u_matrix:_}),Vg=(_,l,d,v,T,O,M,R)=>{const F=a.al/O.tileSize;return{u_matrix:_,u_inv_rot_matrix:l,u_camera_to_center_distance:d.getCameraToCenterDistance(R),u_extrude_scale:[d.pixelsToGLUnits[0]/F,d.pixelsToGLUnits[1]/F],u_zoom_transition:v,u_tile_id:M,u_merc_center:T}},am=(_,l,d,v)=>({u_matrix:_,u_inv_matrix:l,u_camera_to_center_distance:d.getCameraToCenterDistance(v),u_viewport_size:[d.width,d.height]}),Nc=(_,l,d=1)=>({u_matrix:_,u_color:l,u_overlay:0,u_overlay_scale:d}),Mf=a.bC(),Dd=(_,l,d,v,T,O,M)=>{const R=_.transform,F=R.projection.name==="globe",q=F?a.dR(R.zoom,l.canonical)*R._pixelsPerMercatorPixel:a.ay(d,1,O),H={u_matrix:l.projMatrix,u_extrude_scale:q,u_intensity:M,u_inv_rot_matrix:Mf,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(F){H.u_inv_rot_matrix=v,H.u_merc_center=T,H.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],H.u_zoom_transition=a.aj(R.zoom);const re=T[0]*a.al,ee=T[1]*a.al;H.u_up_dir=R.projection.upVector(new a.cD(0,0,0),re,ee)}return H};function om(_,[l,d,v,T],[O,M]){if(O===M)return[0,0,0,0];const R=255*(_-1)/(_*(M-O));return[l*R,d*R,v*R,T*R]}function $_(_,l,[d,v]){return d===v?0:.5/_+(l-d)*(_-1)/(_*(v-d))}const Id=(_,l,d,v,T,O,M,R,F,q,H,re,ee,oe,he,ce,de,_e,Me,Ce,Ae)=>({u_matrix:_,u_normalize_matrix:l,u_globe_matrix:d,u_merc_matrix:v,u_grid_matrix:T,u_tl_parent:O,u_scale_parent:q,u_fade_t:H.mix,u_opacity:H.opacity*re.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:re.paint.get("raster-brightness-min"),u_brightness_high:re.paint.get("raster-brightness-max"),u_saturation_factor:a.dT(re.paint.get("raster-saturation")),u_contrast_factor:a.dS(re.paint.get("raster-contrast")),u_spin_weights:Df(re.paint.get("raster-hue-rotate")),u_perspective_transform:ee,u_raster_elevation:oe,u_zoom_transition:M,u_merc_center:R,u_cutoff_params:F,u_colorization_mix:om(a.dU,ce,_e),u_colorization_offset:$_(a.dU,de,_e),u_color_ramp:he,u_texture_offset:[Ce/(Me+2*Ce),Me/(Me+2*Ce)],u_texture_res:[Me+2*Ce,Me+2*Ce],u_emissive_strength:Ae});function Df(_){_*=Math.PI/180;const l=Math.sin(_),d=Math.cos(_);return[(2*d+1)/3,(-Math.sqrt(3)*l-d+1)/3,(Math.sqrt(3)*l-d+1)/3]}const Pd=.05,l1=(_,l,d,v,T,O,M,R,F,q,H,re)=>({u_matrix:_,u_normalize_matrix:l,u_globe_matrix:d,u_merc_matrix:v,u_grid_matrix:T,u_tl_parent:O,u_scale_parent:q,u_fade_t:H.mix,u_opacity:H.opacity,u_image0:0,u_image1:1,u_raster_elevation:re,u_zoom_transition:M,u_merc_center:R,u_cutoff_params:F}),Rd=(_,l,d,v,T,O,M,R,F,q)=>({u_particle_texture:_,u_particle_texture_side_len:l,u_tile_offset:d,u_velocity:v,u_color_ramp:O,u_velocity_res:T,u_max_speed:M,u_uv_offset:R,u_data_scale:[255*F[0],255*F[1]],u_data_offset:q,u_particle_pos_scale:1.1,u_particle_pos_offset:[Pd,Pd]}),V_=(_,l,d,v,T,O,M,R,F,q)=>({u_particle_texture:_,u_particle_texture_side_len:l,u_velocity:d,u_velocity_res:v,u_max_speed:T,u_speed_factor:O,u_reset_rate:M,u_rand_seed:Math.random(),u_uv_offset:R,u_data_scale:[255*F[0],255*F[1]],u_data_offset:q,u_particle_pos_scale:1.1,u_particle_pos_offset:[Pd,Pd]}),qg=a.bC(),kd=(_,l,d,v,T,O,M,R,F,q,H,re,ee,oe,he,ce,de,_e,Me,Ce,Ae,We,$e,Ge)=>{const Ne=T.transform,Re={u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:Ne.getCameraToCenterDistance(Me),u_rotate_symbol:+d,u_aspect_ratio:Ne.width/Ne.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:O,u_label_plane_matrix:M,u_coord_matrix:R,u_is_text:+q,u_elevation_from_sea:F?1:0,u_pitch_with_map:+v,u_texsize:H,u_texsize_icon:re,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:qg,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:qg,u_up_vector:[0,-1,0],u_color_adj_mat:We,u_icon_transition:$e||0,u_gamma_scale:v?T.transform.getCameraToCenterDistance(Me)*Math.cos(T.terrain?0:T.transform._pitch):1,u_device_pixel_ratio:a.o.devicePixelRatio,u_is_halo:1,u_scale_factor:Ge||1,u_ground_shadow_factor:Ce,u_inv_matrix:a.bl(a.bC(),M),u_normal_scale:Ae,u_lutTexture:10};return Me.name==="globe"&&(Re.u_tile_id=[oe.canonical.x,oe.canonical.y,1<<oe.canonical.z],Re.u_zoom_transition=he,Re.u_inv_rot_matrix=de,Re.u_merc_center=ce,Re.u_camera_forward=Ne._camera.forward(),Re.u_ecef_origin=a.dV(Ne.globeMatrix,oe.toUnwrapped()),Re.u_tile_matrix=Float32Array.from(Ne.globeMatrix),Re.u_up_vector=_e),Re},Fc=(_,l,d,v)=>({u_matrix:_,u_emissive_strength:l,u_opacity:d,u_color:v}),Es=(_,l,d,v,T,O,M,R,F)=>Object.assign((function(q,H,re,ee,oe,he){const{width:ce,height:de}=ee.imageManager.getPixelSize(H),_e=Math.pow(2,he.tileID.overscaledZ),Me=he.tileSize*Math.pow(2,ee.transform.tileZoom)/_e,Ce=Me*(he.tileID.canonical.x+he.tileID.wrap*_e),Ae=Me*he.tileID.canonical.y;return{u_image:0,u_pattern_tl:re.tl,u_pattern_br:re.br,u_texsize:[ce,de],u_pattern_size:re.displaySize,u_pattern_units_to_pixels:oe?[ee.transform.width,-1*ee.transform.height]:[1/a.ay(he,1,ee.transform.tileZoom),1/a.ay(he,1,ee.transform.tileZoom)],u_pixel_coord_upper:[Ce>>16,Ae>>16],u_pixel_coord_lower:[65535&Ce,65535&Ae]}})(0,O,M,v,R,F),{u_matrix:_,u_emissive_strength:l,u_opacity:d}),us=new Float32Array(a.bA([])),Wu=(_,l,d,v,T,O,M,R,F,q,H,re,ee,oe=[0,0,0],he,ce,de)=>{const _e=T.style.light,Me=_e.properties.get("position"),Ce=[-Me.x,-Me.y,Me.z],Ae=a.dO();_e.properties.get("anchor")==="viewport"&&(a.dP(Ae,-T.transform.angle),a.dQ(Ce,Ce,Ae));const We=H.alphaMode==="MASK",$e=_e.properties.get("color").toNonPremultipliedRenderColor(null),Ge=ee.paint.get("model-ambient-occlusion-intensity"),Ne=ee.paint.get("model-color").constantOr(a.ao.white).toNonPremultipliedRenderColor(null);return Ne.a=ee.paint.get("model-color-mix-intensity").constantOr(0),de&&(Ne.r=de[0],Ne.g=de[1],Ne.b=de[2],Ne.a=de[3]),ce&&(Ne.r=ce.color.r,Ne.g=ce.color.g,Ne.b=ce.color.b,Ne.a=ce.colorMix,re=ce.emissionStrength,O*=ce.opacity),{u_matrix:_,u_lighting_matrix:l,u_normal_matrix:d,u_node_matrix:v||us,u_lightpos:Ce,u_lightintensity:_e.properties.get("intensity"),u_lightcolor:[$e.r,$e.g,$e.b],u_camera_pos:oe,u_opacity:O,u_baseTextureIsAlpha:0,u_alphaMask:+We,u_alphaCutoff:H.alphaCutoff,u_baseColorFactor:M.toNonPremultipliedRenderColor(null).toArray01(),u_emissiveFactor:R.toNonPremultipliedRenderColor(null).toArray01(),u_metallicFactor:F,u_roughnessFactor:q,u_baseColorTexture:5,u_metallicRoughnessTexture:6,u_normalTexture:7,u_occlusionTexture:8,u_emissionTexture:9,u_lutTexture:10,u_color_mix:Ne.toArray01(),u_aoIntensity:Ge,u_emissive_strength:re,u_occlusionTextureTransform:he||[0,0,0,0]}},Ld=(_,l=us,d=us)=>({u_matrix:_,u_instance:l,u_node_matrix:d}),Hg={fillExtrusion:_=>({u_matrix:new a.cl(_),u_lightpos:new a.ci(_),u_lightintensity:new a.cj(_),u_lightcolor:new a.ci(_),u_vertical_gradient:new a.cj(_),u_opacity:new a.cj(_),u_edge_radius:new a.cj(_),u_width_scale:new a.cj(_),u_ao:new a.ck(_),u_height_type:new a.ch(_),u_base_type:new a.ch(_),u_tile_id:new a.ci(_),u_zoom_transition:new a.cj(_),u_inv_rot_matrix:new a.cl(_),u_merc_center:new a.ck(_),u_up_dir:new a.ci(_),u_height_lift:new a.cj(_),u_flood_light_color:new a.ci(_),u_vertical_scale:new a.cj(_),u_flood_light_intensity:new a.cj(_),u_ground_shadow_factor:new a.ci(_)}),fillExtrusionDepth:_=>({u_matrix:new a.cl(_),u_edge_radius:new a.cj(_),u_width_scale:new a.cj(_),u_vertical_scale:new a.cj(_),u_height_type:new a.ch(_),u_base_type:new a.ch(_)}),fillExtrusionPattern:_=>({u_matrix:new a.cl(_),u_lightpos:new a.ci(_),u_lightintensity:new a.cj(_),u_lightcolor:new a.ci(_),u_vertical_gradient:new a.cj(_),u_height_factor:new a.cj(_),u_edge_radius:new a.cj(_),u_width_scale:new a.cj(_),u_ao:new a.ck(_),u_height_type:new a.ch(_),u_base_type:new a.ch(_),u_tile_id:new a.ci(_),u_zoom_transition:new a.cj(_),u_inv_rot_matrix:new a.cl(_),u_merc_center:new a.ck(_),u_up_dir:new a.ci(_),u_height_lift:new a.cj(_),u_image:new a.ch(_),u_texsize:new a.ck(_),u_pixel_coord_upper:new a.ck(_),u_pixel_coord_lower:new a.ck(_),u_tile_units_to_pixels:new a.cj(_),u_opacity:new a.cj(_),u_pattern_transition:new a.cj(_)}),fillExtrusionGroundEffect:_=>({u_matrix:new a.cl(_),u_opacity:new a.cj(_),u_ao_pass:new a.cj(_),u_meter_to_tile:new a.cj(_),u_ao:new a.ck(_),u_flood_light_intensity:new a.cj(_),u_flood_light_color:new a.ci(_),u_attenuation:new a.cj(_),u_edge_radius:new a.cj(_),u_fb:new a.ch(_),u_fb_size:new a.cj(_),u_dynamic_offset:new a.cj(_)}),fill:_=>({u_matrix:new a.cl(_),u_emissive_strength:new a.cj(_),u_ground_shadow_factor:new a.ci(_)}),fillPattern:_=>({u_matrix:new a.cl(_),u_emissive_strength:new a.cj(_),u_image:new a.ch(_),u_texsize:new a.ck(_),u_pixel_coord_upper:new a.ck(_),u_pixel_coord_lower:new a.ck(_),u_tile_units_to_pixels:new a.cj(_),u_ground_shadow_factor:new a.ci(_),u_pattern_transition:new a.cj(_)}),fillOutline:_=>({u_matrix:new a.cl(_),u_emissive_strength:new a.cj(_),u_world:new a.ck(_),u_ground_shadow_factor:new a.ci(_)}),fillOutlinePattern:_=>({u_matrix:new a.cl(_),u_emissive_strength:new a.cj(_),u_world:new a.ck(_),u_image:new a.ch(_),u_texsize:new a.ck(_),u_pixel_coord_upper:new a.ck(_),u_pixel_coord_lower:new a.ck(_),u_tile_units_to_pixels:new a.cj(_),u_ground_shadow_factor:new a.ci(_),u_pattern_transition:new a.cj(_)}),building:_=>({u_matrix:new a.cl(_),u_normal_matrix:new a.cl(_),u_opacity:new a.cj(_),u_faux_facade_ao_intensity:new a.cj(_),u_camera_pos:new a.ci(_),u_tile_to_meter:new a.cj(_),u_facade_emissive_chance:new a.cj(_),u_flood_light_color:new a.ci(_),u_flood_light_intensity:new a.cj(_)}),buildingBloom:_=>({u_matrix:new a.cl(_)}),buildingDepth:_=>({u_matrix:new a.cl(_)}),elevatedStructuresDepth:_=>({u_matrix:new a.cl(_),u_depth_bias:new a.cj(_)}),elevatedStructures:_=>({u_matrix:new a.cl(_),u_ground_shadow_factor:new a.ci(_)}),elevatedStructuresDepthReconstruct:_=>({u_matrix:new a.cl(_),u_camera_pos:new a.ci(_),u_depth_bias:new a.cj(_),u_height_scale:new a.cj(_),u_reset_depth:new a.cj(_)}),circle:a.dY,collisionBox:_=>({u_matrix:new a.cl(_),u_inv_rot_matrix:new a.cl(_),u_camera_to_center_distance:new a.cj(_),u_extrude_scale:new a.ck(_),u_zoom_transition:new a.cj(_),u_merc_center:new a.ck(_),u_tile_id:new a.ci(_)}),collisionCircle:_=>({u_matrix:new a.cl(_),u_inv_matrix:new a.cl(_),u_camera_to_center_distance:new a.cj(_),u_viewport_size:new a.ck(_)}),debug:_=>({u_color:new a.dB(_),u_matrix:new a.cl(_),u_overlay:new a.ch(_),u_overlay_scale:new a.cj(_)}),clippingMask:_=>({u_matrix:new a.cl(_)}),heatmap:_=>({u_extrude_scale:new a.cj(_),u_intensity:new a.cj(_),u_matrix:new a.cl(_),u_inv_rot_matrix:new a.cl(_),u_merc_center:new a.ck(_),u_tile_id:new a.ci(_),u_zoom_transition:new a.cj(_),u_up_dir:new a.ci(_)}),heatmapTexture:_=>({u_image:new a.ch(_),u_color_ramp:new a.ch(_),u_opacity:new a.cj(_)}),hillshade:_=>({u_matrix:new a.cl(_),u_image:new a.ch(_),u_latrange:new a.ck(_),u_light:new a.ck(_),u_shadow:new a.dB(_),u_highlight:new a.dB(_),u_emissive_strength:new a.cj(_),u_accent:new a.dB(_)}),hillshadePrepare:_=>({u_matrix:new a.cl(_),u_image:new a.ch(_),u_dimension:new a.ck(_),u_zoom:new a.cj(_)}),line:a.dX,linePattern:a.dW,raster:_=>({u_matrix:new a.cl(_),u_normalize_matrix:new a.cl(_),u_globe_matrix:new a.cl(_),u_merc_matrix:new a.cl(_),u_grid_matrix:new a.dC(_),u_tl_parent:new a.ck(_),u_scale_parent:new a.cj(_),u_fade_t:new a.cj(_),u_opacity:new a.cj(_),u_image0:new a.ch(_),u_image1:new a.ch(_),u_brightness_low:new a.cj(_),u_brightness_high:new a.cj(_),u_saturation_factor:new a.cj(_),u_contrast_factor:new a.cj(_),u_spin_weights:new a.ci(_),u_perspective_transform:new a.ck(_),u_raster_elevation:new a.cj(_),u_zoom_transition:new a.cj(_),u_merc_center:new a.ck(_),u_cutoff_params:new a.d3(_),u_colorization_mix:new a.d3(_),u_colorization_offset:new a.cj(_),u_color_ramp:new a.ch(_),u_texture_offset:new a.ck(_),u_texture_res:new a.ck(_),u_emissive_strength:new a.cj(_)}),rasterParticle:_=>({u_matrix:new a.cl(_),u_normalize_matrix:new a.cl(_),u_globe_matrix:new a.cl(_),u_merc_matrix:new a.cl(_),u_grid_matrix:new a.dC(_),u_tl_parent:new a.ck(_),u_scale_parent:new a.cj(_),u_fade_t:new a.cj(_),u_opacity:new a.cj(_),u_image0:new a.ch(_),u_image1:new a.ch(_),u_raster_elevation:new a.cj(_),u_zoom_transition:new a.cj(_),u_merc_center:new a.ck(_),u_cutoff_params:new a.d3(_)}),rasterParticleTexture:_=>({u_texture:new a.ch(_),u_opacity:new a.cj(_)}),rasterParticleDraw:_=>({u_particle_texture:new a.ch(_),u_particle_texture_side_len:new a.cj(_),u_tile_offset:new a.ck(_),u_velocity:new a.ch(_),u_color_ramp:new a.ch(_),u_velocity_res:new a.ck(_),u_max_speed:new a.cj(_),u_uv_offset:new a.ck(_),u_data_scale:new a.ck(_),u_data_offset:new a.cj(_),u_particle_pos_scale:new a.cj(_),u_particle_pos_offset:new a.ck(_)}),rasterParticleUpdate:_=>({u_particle_texture:new a.ch(_),u_particle_texture_side_len:new a.cj(_),u_velocity:new a.ch(_),u_velocity_res:new a.ck(_),u_max_speed:new a.cj(_),u_speed_factor:new a.cj(_),u_reset_rate:new a.cj(_),u_rand_seed:new a.cj(_),u_uv_offset:new a.ck(_),u_data_scale:new a.ck(_),u_data_offset:new a.cj(_),u_particle_pos_scale:new a.cj(_),u_particle_pos_offset:new a.ck(_)}),symbol:_=>({u_is_size_zoom_constant:new a.ch(_),u_is_size_feature_constant:new a.ch(_),u_size_t:new a.cj(_),u_size:new a.cj(_),u_camera_to_center_distance:new a.cj(_),u_rotate_symbol:new a.ch(_),u_aspect_ratio:new a.cj(_),u_fade_change:new a.cj(_),u_matrix:new a.cl(_),u_label_plane_matrix:new a.cl(_),u_coord_matrix:new a.cl(_),u_is_text:new a.ch(_),u_elevation_from_sea:new a.ch(_),u_pitch_with_map:new a.ch(_),u_texsize:new a.ck(_),u_texsize_icon:new a.ck(_),u_texture:new a.ch(_),u_texture_icon:new a.ch(_),u_gamma_scale:new a.cj(_),u_device_pixel_ratio:new a.cj(_),u_tile_id:new a.ci(_),u_zoom_transition:new a.cj(_),u_inv_rot_matrix:new a.cl(_),u_merc_center:new a.ck(_),u_camera_forward:new a.ci(_),u_tile_matrix:new a.cl(_),u_up_vector:new a.ci(_),u_ecef_origin:new a.ci(_),u_is_halo:new a.ch(_),u_icon_transition:new a.cj(_),u_color_adj_mat:new a.cl(_),u_scale_factor:new a.cj(_),u_ground_shadow_factor:new a.ci(_),u_inv_matrix:new a.cl(_),u_normal_scale:new a.cj(_),u_lutTexture:new a.ch(_)}),background:_=>({u_matrix:new a.cl(_),u_emissive_strength:new a.cj(_),u_opacity:new a.cj(_),u_color:new a.dB(_)}),backgroundPattern:_=>({u_matrix:new a.cl(_),u_emissive_strength:new a.cj(_),u_opacity:new a.cj(_),u_image:new a.ch(_),u_pattern_tl:new a.ck(_),u_pattern_br:new a.ck(_),u_texsize:new a.ck(_),u_pattern_size:new a.ck(_),u_pixel_coord_upper:new a.ck(_),u_pixel_coord_lower:new a.ck(_),u_pattern_units_to_pixels:new a.ck(_)}),terrainRaster:_=>({u_matrix:new a.cl(_),u_image0:new a.ch(_),u_image1:new a.ch(_),u_skirt_height:new a.cj(_),u_ground_shadow_factor:new a.ci(_),u_emissive_texture_available:new a.cj(_)}),skybox:_=>({u_matrix:new a.cl(_),u_sun_direction:new a.ci(_),u_cubemap:new a.ch(_),u_opacity:new a.cj(_),u_temporal_offset:new a.cj(_)}),skyboxGradient:_=>({u_matrix:new a.cl(_),u_color_ramp:new a.ch(_),u_center_direction:new a.ci(_),u_radius:new a.cj(_),u_opacity:new a.cj(_),u_temporal_offset:new a.cj(_)}),skyboxCapture:_=>({u_matrix_3f:new a.dC(_),u_sun_direction:new a.ci(_),u_sun_intensity:new a.cj(_),u_color_tint_r:new a.d3(_),u_color_tint_m:new a.d3(_),u_luminance:new a.cj(_)}),globeRaster:_=>({u_proj_matrix:new a.cl(_),u_globe_matrix:new a.cl(_),u_normalize_matrix:new a.cl(_),u_merc_matrix:new a.cl(_),u_zoom_transition:new a.cj(_),u_merc_center:new a.ck(_),u_image0:new a.ch(_),u_image1:new a.ch(_),u_grid_matrix:new a.dC(_),u_skirt_height:new a.cj(_),u_far_z_cutoff:new a.cj(_),u_frustum_tl:new a.ci(_),u_frustum_tr:new a.ci(_),u_frustum_br:new a.ci(_),u_frustum_bl:new a.ci(_),u_globe_pos:new a.ci(_),u_globe_radius:new a.cj(_),u_viewport:new a.ck(_),u_emissive_texture_available:new a.cj(_)}),globeAtmosphere:_=>({u_frustum_tl:new a.ci(_),u_frustum_tr:new a.ci(_),u_frustum_br:new a.ci(_),u_frustum_bl:new a.ci(_),u_horizon:new a.cj(_),u_transition:new a.cj(_),u_fadeout_range:new a.cj(_),u_atmosphere_fog_color:new a.d3(_),u_high_color:new a.d3(_),u_space_color:new a.d3(_),u_temporal_offset:new a.cj(_),u_horizon_angle:new a.cj(_)}),model:_=>({u_matrix:new a.cl(_),u_lighting_matrix:new a.cl(_),u_normal_matrix:new a.cl(_),u_node_matrix:new a.cl(_),u_lightpos:new a.ci(_),u_lightintensity:new a.cj(_),u_lightcolor:new a.ci(_),u_camera_pos:new a.ci(_),u_opacity:new a.cj(_),u_baseColorFactor:new a.d3(_),u_emissiveFactor:new a.d3(_),u_metallicFactor:new a.cj(_),u_roughnessFactor:new a.cj(_),u_baseTextureIsAlpha:new a.ch(_),u_alphaMask:new a.ch(_),u_alphaCutoff:new a.cj(_),u_baseColorTexture:new a.ch(_),u_metallicRoughnessTexture:new a.ch(_),u_normalTexture:new a.ch(_),u_occlusionTexture:new a.ch(_),u_emissionTexture:new a.ch(_),u_lutTexture:new a.ch(_),u_color_mix:new a.d3(_),u_aoIntensity:new a.cj(_),u_emissive_strength:new a.cj(_),u_occlusionTextureTransform:new a.d3(_)}),modelDepth:_=>({u_matrix:new a.cl(_),u_instance:new a.cl(_),u_node_matrix:new a.cl(_)}),groundShadow:_=>({u_matrix:new a.cl(_),u_ground_shadow_factor:new a.ci(_)}),stars:_=>({u_matrix:new a.cl(_),u_up:new a.ci(_),u_right:new a.ci(_),u_intensity_multiplier:new a.cj(_)}),snowParticle:_=>({u_modelview:new a.cl(_),u_projection:new a.cl(_),u_time:new a.cj(_),u_cam_pos:new a.ci(_),u_velocityConeAperture:new a.cj(_),u_velocity:new a.cj(_),u_horizontalOscillationRadius:new a.cj(_),u_horizontalOscillationRate:new a.cj(_),u_boxSize:new a.cj(_),u_billboardSize:new a.cj(_),u_simpleShapeParameters:new a.ck(_),u_screenSize:new a.ck(_),u_thinningCenterPos:new a.ck(_),u_thinningShape:new a.ci(_),u_thinningAffectedRatio:new a.cj(_),u_thinningParticleOffset:new a.cj(_),u_particleColor:new a.d3(_),u_direction:new a.ci(_)}),rainParticle:_=>({u_modelview:new a.cl(_),u_projection:new a.cl(_),u_time:new a.cj(_),u_cam_pos:new a.ci(_),u_texScreen:new a.ch(_),u_velocityConeAperture:new a.cj(_),u_velocity:new a.cj(_),u_boxSize:new a.cj(_),u_rainDropletSize:new a.ck(_),u_distortionStrength:new a.cj(_),u_rainDirection:new a.ci(_),u_color:new a.d3(_),u_screenSize:new a.ck(_),u_thinningCenterPos:new a.ck(_),u_thinningShape:new a.ci(_),u_thinningAffectedRatio:new a.cj(_),u_thinningParticleOffset:new a.cj(_),u_shapeDirectionalPower:new a.cj(_),u_shapeNormalPower:new a.cj(_),u_mode:new a.cj(_)}),vignette:_=>({u_vignetteShape:new a.ci(_),u_vignetteColor:new a.d3(_)}),occlusion:_=>({u_matrix:new a.cl(_),u_anchorPos:new a.ci(_),u_screenSizePx:new a.ck(_),u_occluderSizePx:new a.ck(_),u_color:new a.d3(_)})};class As{constructor(l,d,v,T){this.id=As.uniqueIdxCounter,As.uniqueIdxCounter++,this.context=l;const O=l.gl;this.buffer=O.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),O.bufferData(O.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||T||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){this.id=As.uniqueIdxCounter,As.uniqueIdxCounter++;const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}As.uniqueIdxCounter=0;const Al={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class So{constructor(l,d,v,T,O,M){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=T,this.instanceCount=M,this.context=l;const R=l.gl;this.buffer=R.createBuffer(),l.bindVertexBuffer.set(this.buffer),R.bufferData(R.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||O||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,d){for(let v=0;v<this.attributes.length;v++){const T=d.getAttributeLocation(l,this.attributes[v].name);T!==-1&&l.enableVertexAttribArray(T)}}setVertexAttribPointers(l,d,v){for(let T=0;T<this.attributes.length;T++){const O=this.attributes[T],M=d.getAttributeLocation(l,O.name);M!==-1&&l.vertexAttribPointer(M,O.components,l[Al[O.type]],!1,this.itemSize,O.offset+this.itemSize*(v||0))}}setVertexAttribDivisor(l,d,v){for(let T=0;T<this.attributes.length;T++){const O=d.getAttributeLocation(l,this.attributes[T].name);O!==-1&&this.instanceCount&&this.instanceCount>0&&l.vertexAttribDivisor(O,v)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Bc{constructor(l,d,v,T,O){this.context=l,this.width=d,this.height=v;const M=this.framebuffer=l.gl.createFramebuffer();T>0&&(this.colorAttachment0=new kg(l,M,0)),T>1&&(this.colorAttachment1=new kg(l,M,1)),O&&(this.depthAttachmentType=O,this.depthAttachment=O==="renderbuffer"?new Kp(l,M):new Lg(l,M))}createColorAttachment(l,d){d===0?this.colorAttachment0=new kg(l,this.framebuffer,0):d===1&&(this.colorAttachment1=new kg(l,this.framebuffer,1))}removeColorAttachment(l,d){const v=this.context.gl;let T;d===0?(T=this.colorAttachment0.get(),this.colorAttachment0=void 0):d===1&&(T=this.colorAttachment1.get(),this.colorAttachment1=void 0),T&&v.deleteTexture(T)}destroy(){const l=this.context.gl;if(this.colorAttachment0){const d=this.colorAttachment0.get();d&&l.deleteTexture(d)}if(this.colorAttachment1){const d=this.colorAttachment1.get();d&&l.deleteTexture(d)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const d=this.depthAttachment.get();d&&l.deleteRenderbuffer(d)}else{const d=this.depthAttachment.get();d&&l.deleteTexture(d)}l.deleteFramebuffer(this.framebuffer)}}class du{constructor(l,d){this.gl=l,this.clearColor=new Pc(this),this.clearDepth=new Vu(this),this.clearStencil=new qu(this),this.colorMask=new Dg(this),this.depthMask=new Ig(this),this.stencilMask=new xf(this),this.stencilFunc=new Ad(this),this.stencilOp=new wo(this),this.stencilTest=new la(this),this.depthRange=new Di(this),this.depthTest=new Rc(this),this.depthFunc=new Hl(this),this.blend=new hh(this),this.blendFunc=new Hu(this),this.blendColor=new Pg(this),this.blendEquation=new B_(this),this.cullFace=new wf(this),this.cullFaceSide=new Gu(this),this.frontFace=new j_(this),this.program=new Xp(this),this.activeTexture=new U_(this),this.viewport=new hu(this),this.bindFramebuffer=new kc(this),this.bindRenderbuffer=new dh(this),this.bindTexture=new Sf(this),this.bindVertexBuffer=new C0(this),this.bindElementBuffer=new Rg(this),this.bindVertexArrayOES=new ph(this),this.pixelStoreUnpack=new Zp(this),this.pixelStoreUnpackPremultiplyAlpha=new Tf(this),this.pixelStoreUnpackFlipY=new ls(this),this.options=d?Object.assign({},d):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=d&&!!d.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=l.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),this.extBlendFuncExtended=l.getExtension("WEBGL_blend_func_extended")}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,d,v){return new As(this,l,d,v)}createVertexBuffer(l,d,v,T,O){return new So(this,l,d,v,T,O)}createRenderbuffer(l,d,v){const T=this.gl,O=T.createRenderbuffer();return this.bindRenderbuffer.set(O),T.renderbufferStorage(T.RENDERBUFFER,l,d,v),this.bindRenderbuffer.set(null),O}createFramebuffer(l,d,v,T){return new Bc(this,l,d,v,T)}clear({color:l,depth:d,stencil:v,colorMask:T}){const O=this.gl;let M=0;l&&(M|=O.COLOR_BUFFER_BIT,this.clearColor.set(l.toNonPremultipliedRenderColor(null)),this.colorMask.set(T||[!0,!0,!0,!0])),d!==void 0&&(M|=O.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),v!==void 0&&(M|=O.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),O.clear(M)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.by(l.blendFunction,Gn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor),l.blendEquation?this.blendEquation.set(l.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(l.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let Kt;function ua(_,l,d,v,T,O,M){const R=_.context,F=R.gl,q=_.transform,H=[a.aF(q.center.lng),a.aJ(q.center.lat)],re=d.layout.get("symbol-placement"),ee=d.layout.get("text-variable-anchor"),oe=d.layout.get("icon-rotation-alignment")==="map",he=d.layout.get("text-rotation-alignment")==="map",ce=re!=="point",de=[];let _e=0,Me=0;for(let Ne=0;Ne<v.length;Ne++){const Re=v[Ne],Je=l.getTile(Re),nt=Je.getBucket(d);if(!nt)continue;const st=nt.getProjection().createInversionMatrix(q,Re.canonical),dt=[],ft=_0(Re,nt,q),wt=!M&&oe&&ce,It=M&&he&&ce,pt=ee&&nt.hasTextData(),et=nt.hasIconTextFit()&&pt&&nt.hasIconData(),At=wt||It||M&&pt||et,gt=nt.projection.name==="globe",Dt=gt?a.aj(q.zoom):0;gt&&(dt.push("PROJECTION_GLOBE_VIEW"),At&&dt.push("PROJECTED_POS_ON_VIEWPORT"));const qt=_.getOrCreateProgram("collisionBox",{defines:dt});let tn=ft;T[0]===0&&T[1]===0||(tn=_.translatePosMatrix(ft,Je,T,O));const Wt=M?nt.textCollisionBox:nt.iconCollisionBox,Ht=nt.collisionCircleArray;if(Ht.length>0){const yn=a.bC(),rn=tn;a.cP(yn,nt.placementInvProjMatrix,q.glCoordMatrix),a.cP(yn,yn,nt.placementViewportMatrix),de.push({circleArray:Ht,circleOffset:Me,transform:rn,invTransform:yn,projection:nt.getProjection()}),_e+=Ht.length/4,Me=_e}if(!Wt)continue;_.terrain&&_.terrain.setupElevationDraw(Je,qt);const xn=gt?[Re.canonical.x,Re.canonical.y,1<<Re.canonical.z]:[0,0,0];qt.draw(_,F.LINES,On.disabled,qn.disabled,_.colorModeForRenderPass(),jn.disabled,Vg(tn,st,q,Dt,H,Je,xn,nt.getProjection()),d.id,Wt.layoutVertexBuffer,Wt.indexBuffer,Wt.segments,null,q.zoom,null,[Wt.collisionVertexBuffer,Wt.collisionVertexBufferExt])}if(!M||!de.length)return;const Ce=_.getOrCreateProgram("collisionCircle"),Ae=new a.dZ;Ae.resize(4*_e),Ae._trim();let We=0;for(const Ne of de)for(let Re=0;Re<Ne.circleArray.length/4;Re++){const Je=4*Re,nt=Ne.circleArray[Je+0],st=Ne.circleArray[Je+1],dt=Ne.circleArray[Je+2],ft=Ne.circleArray[Je+3];Ae.emplace(We++,nt,st,dt,ft,0),Ae.emplace(We++,nt,st,dt,ft,1),Ae.emplace(We++,nt,st,dt,ft,2),Ae.emplace(We++,nt,st,dt,ft,3)}(!Kt||Kt.length<2*_e)&&(Kt=(function(Ne){const Re=2*Ne,Je=new a.b0;Je.resize(Re),Je._trim();for(let nt=0;nt<Re;nt++){const st=6*nt;Je.uint16[st+0]=4*nt+0,Je.uint16[st+1]=4*nt+1,Je.uint16[st+2]=4*nt+2,Je.uint16[st+3]=4*nt+2,Je.uint16[st+4]=4*nt+3,Je.uint16[st+5]=4*nt+0}return Je})(_e));const $e=R.createIndexBuffer(Kt,!0),Ge=R.createVertexBuffer(Ae,a.d_.members,!0);for(const Ne of de){const Re=am(Ne.transform,Ne.invTransform,q,Ne.projection);Ce.draw(_,F.TRIANGLES,On.disabled,qn.disabled,_.colorModeForRenderPass(),jn.disabled,Re,d.id,Ge,$e,a.bg.simpleSegment(0,2*Ne.circleOffset,Ne.circleArray.length,Ne.circleArray.length/2),null,q.zoom)}Ge.destroy(),$e.destroy()}const ca=a.bC();function pu(_){const l=_._camera.getWorldToCamera(_.worldSize,1),d=a.aB([],l,_.globeMatrix);a.bl(d,d);const v=[0,0,0],T=[0,1,0,0];return a.aC(T,T,d),v[0]=T[0],v[1]=T[1],v[2]=T[2],a.aw(v,v),v}function zd({width:_,height:l,anchor:d,textOffset:v,textScale:T},O){const{horizontalAlign:M,verticalAlign:R}=a.c1(d),F=-(M-.5)*_,q=-(R-.5)*l,H=a.c2(d,v);return new a.P((F/T+H[0])*O,(q/T+H[1])*O)}function vh(_,l,d,v,T,O,M,R,F,q){const H=_.text.placedSymbolArray,re=_.text.dynamicLayoutVertexArray,ee=_.icon.dynamicLayoutVertexArray,oe={},he=_.getProjection(),ce=Oc(M,he,T),de=T.elevation,_e=he.upVectorScale(M.canonical,T.center.lat,T.worldSize).metersToTile;re.clear();for(let Me=0;Me<H.length;Me++){const Ce=H.get(Me),{tileAnchorX:Ae,tileAnchorY:We,numGlyphs:$e}=Ce,Ge=Ce.hidden||!Ce.crossTileID||_.allowVerticalPlacement&&!Ce.placedOrientation?null:v[Ce.crossTileID];if(Ge){let Ne=0,Re=0,Je=0;const nt=_.elevationType==="road";if(de||nt){const gt=nt?_.getElevationFeatureForText(Me):null,Dt=a.bV.getAtTileOffset(M,new a.P(Ae,We),de,gt),[qt,tn,Wt]=he.upVector(M.canonical,Ae,We);Ne=Dt*qt*_e,Re=Dt*tn*_e,Je=Dt*Wt*_e}let[st,dt,ft,wt]=cu(Ce.projectedAnchorX+Ne,Ce.projectedAnchorY+Re,Ce.projectedAnchorZ+Je,d?ce:O);const It=E_(T.getCameraToCenterDistance(he),wt);let pt=a.bM(_.textSizeData,F,Ce)*It/a.bY;d&&(pt*=_.tilePixelRatio/R);const et=zd(Ge,pt);d?({x:st,y:dt,z:ft}=he.projectTilePoint(Ae+et.x,We+et.y,M.canonical),[st,dt,ft]=cu(st+Ne,dt+Re,ft+Je,O)):(l&&et._rotate(-T.angle),st+=et.x,dt+=et.y,ft=0);const At=_.allowVerticalPlacement&&Ce.placedOrientation===a.bL.vertical?Math.PI/2:0;for(let gt=0;gt<$e;gt++)a.bO(re,st,dt,ft,At);q&&Ce.associatedIconIndex>=0&&(oe[Ce.associatedIconIndex]={x:st,y:dt,z:ft,angle:At})}else os($e,re)}if(q){ee.clear();const Me=_.icon.placedSymbolArray;for(let Ce=0;Ce<Me.length;Ce++){const Ae=Me.get(Ce),{numGlyphs:We}=Ae,$e=oe[Ce];if(Ae.hidden||!$e)os(We,ee);else{const{x:Ge,y:Ne,z:Re,angle:Je}=$e;for(let nt=0;nt<We;nt++)a.bO(ee,Ge,Ne,Re,Je)}}_.icon.dynamicLayoutVertexBuffer.updateData(ee)}_.text.dynamicLayoutVertexBuffer.updateData(re)}function Nd(_,l,d,v,T,O,M={}){const R=d.paint.get("icon-translate"),F=d.paint.get("text-translate"),q=d.paint.get("icon-translate-anchor"),H=d.paint.get("text-translate-anchor"),re=d.layout.get("icon-rotation-alignment"),ee=d.layout.get("text-rotation-alignment"),oe=d.layout.get("icon-pitch-alignment"),he=d.layout.get("text-pitch-alignment"),ce=d.layout.get("icon-keep-upright"),de=d.layout.get("text-keep-upright"),_e=d.paint.get("icon-color-saturation"),Me=d.paint.get("icon-color-contrast"),Ce=d.paint.get("icon-color-brightness-min"),Ae=d.paint.get("icon-color-brightness-max"),We=d.layout.get("symbol-elevation-reference")==="sea",$e=d.layout.get("icon-image-use-theme")==="none",Ge=_.context,Ne=Ge.gl,Re=_.transform,Je=re==="map",nt=ee==="map",st=oe==="map",dt=he==="map",ft=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let wt=!1;const It=_.depthModeForSublayer(0,On.ReadOnly),pt=new On(_.context.gl.LEQUAL,On.ReadOnly,_.depthRangeFor3D),et=[a.aF(Re.center.lng),a.aJ(Re.center.lat)],At=d.layout.get("text-variable-anchor"),gt=Re.projection.name==="globe",Dt=[],qt=[0,-1,0];for(const tn of v){const Wt=l.getTile(tn),Ht=Wt.getBucket(d);if(!Ht||Ht.projection.name==="mercator"&&gt||Ht.fullyClipped)continue;const xn=Ht.projection.name==="globe",yn=xn?a.aj(Re.zoom):0,rn=Oc(tn,Ht.getProjection(),Re),_n=Re.calculatePixelsToTileUnitsMatrix(Wt),In=At&&Ht.hasTextData(),Un=Ht.hasIconTextFit()&&In&&Ht.hasIconData(),Qn=Ht.getProjection().createInversionMatrix(Re,tn.canonical),yr=(1<<Wt.tileID.canonical.z)*a.al/_.transform.worldSize,$n=qr=>{let Kn=[0,0,0];if(qr){const tr=_.style.directionalLight,yi=_.style.ambientLight;tr&&yi&&(Kn=js(_.style,tr,yi))}return Kn},Jn=qr=>{Re.depthOcclusionForSymbolsAndCircles&&(d.hasOcclusionOpacityProperties||_.terrain)&&(qr.push("DEPTH_D24"),qr.push("DEPTH_OCCLUSION"))},Yn=qr=>{d.lut&&!$e&&(d.lut.texture||(d.lut.texture=new a.d$(_.context,d.lut.image,[d.lut.image.height,d.lut.image.height,d.lut.image.height],Ge.gl.RGBA8)),Ge.activeTexture.set(Ge.gl.TEXTURE0+10),d.lut.texture&&d.lut.texture.bind(Ge.gl.LINEAR,Ge.gl.CLAMP_TO_EDGE),qr.push("APPLY_LUT_ON_GPU"))},jr=()=>{const qr=Je&&d.layout.get("symbol-placement")!=="point",Kn=[];Jn(Kn),Yn(Kn);const tr=qr||Un,yi=Ht.elevationType==="road",Ji=_.shadowRenderer,ai=yi&&st&&!!Ji&&Ji.enabled,_i=$n(ai),cs=yi&&st&&!_.terrain?pt:It,Uo=d.paint.get("icon-image-cross-fade");_.terrainRenderModeElevated()&&st&&Kn.push("PITCH_WITH_MAP_TERRAIN"),xn&&(Kn.push("PROJECTION_GLOBE_VIEW"),tr&&Kn.push("PROJECTED_POS_ON_VIEWPORT")),Uo>0&&Ht.hasAnySecondaryIcon&&Kn.push("ICON_TRANSITION"),!Ht.icon.zOffsetVertexBuffer||yi&&_.terrain||Kn.push("Z_OFFSET"),_e===0&&Me===0&&Ce===0&&Ae===1||Kn.push("COLOR_ADJUSTMENT"),Ht.sdfIcons&&Kn.push("RENDER_SDF"),ai&&Kn.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),yi&&st&&!_.terrain&&Ht.icon.orientationVertexBuffer&&Kn.push("ELEVATED_ROADS");const co=Ht.icon.programConfigurations.get(d.id),Hr=_.getOrCreateProgram("symbol",{config:co,defines:Kn}),ul=Wt.imageAtlasTexture?Wt.imageAtlasTexture.size:[0,0],$o=Ht.iconSizeData,Zo=a.bK($o,Re.zoom),Il=st||!Re.isOrthographic,qs=yd(rn,Wt.tileID.canonical,st,Je,Re,Ht.getProjection(),_n),$i=ws(rn,Wt.tileID.canonical,st,Je,Re,Ht.getProjection(),_n),ba=_.translatePosMatrix($i,Wt,R,q,!0),Si=_.translatePosMatrix(rn,Wt,R,q),Ia=tr?ca:qs,no=Je&&!st&&!qr;let Wi=qt;!gt&&!Re.mercatorFromTransition||Je||(Wi=pu(Re));const cl=xn?Wi:qt,wm=d.getColorAdjustmentMatrix(_e,Me,Ce,Ae),rc=kd($o.kind,Zo,no,st,_,Si,Ia,ba,We,!1,ul,[0,0],0,tn,yn,et,Qn,cl,Ht.getProjection(),_i,yr,wm,Uo,null),Zd=Wt.imageAtlasTexture?Wt.imageAtlasTexture:null,Kd=d.layout.get("icon-size").constantOr(0)!==1||Ht.iconsNeedLinear,fl=Ht.sdfIcons||_.options.rotating||_.options.zooming||Kd||Il?Ne.LINEAR:Ne.NEAREST,Xl=Ht.sdfIcons&&d.paint.get("icon-halo-width").constantOr(1)!==0,ic=_.terrain&&st&&qr?a.bl(a.bC(),qs):ca;if(qr&&Ht.icon){const Pl=a.bV.getAtTileOffsetFunc(tn,Re.center.lat,Re.worldSize,Ht.getProjection()),Ai=pf(rn,Wt.tileID.canonical,st,Je,Re,Ht.getProjection(),_n),Nf=d.layout.get("icon-size-scale-range"),fv=a.aA(_.scaleFactor,Nf[0],Nf[1]);Qr(Ht,rn,_,!1,Ai,$i,st,ce,Pl,tn,fv)}return{program:Hr,buffers:Ht.icon,uniformValues:rc,atlasTexture:Zd,atlasTextureIcon:null,atlasInterpolation:fl,atlasInterpolationIcon:null,isSDF:Ht.sdfIcons,hasHalo:Xl,depthMode:cs,tile:Wt,renderWithShadows:ai,labelPlaneMatrixInv:ic}},Mr=()=>{const qr=nt&&d.layout.get("symbol-placement")!=="point",Kn=[],tr=qr||At||Un,yi=Ht.elevationType==="road",Ji=_.shadowRenderer,ai=yi&&dt&&!!Ji&&Ji.enabled,_i=$n(ai),cs=yi&&dt&&!_.terrain?pt:It;_.terrainRenderModeElevated()&&dt&&Kn.push("PITCH_WITH_MAP_TERRAIN"),xn&&(Kn.push("PROJECTION_GLOBE_VIEW"),tr&&Kn.push("PROJECTED_POS_ON_VIEWPORT")),!Ht.text.zOffsetVertexBuffer||yi&&_.terrain||Kn.push("Z_OFFSET"),Ht.iconsInText&&Kn.push("RENDER_TEXT_AND_SYMBOL"),Kn.push("RENDER_SDF"),ai&&Kn.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),yi&&dt&&!_.terrain&&Ht.text.orientationVertexBuffer&&Kn.push("ELEVATED_ROADS"),Jn(Kn);const Uo=Ht.text.programConfigurations.get(d.id),co=_.getOrCreateProgram("symbol",{config:Uo,defines:Kn});let Hr,ul=[0,0],$o=null;const Zo=Ht.textSizeData;Ht.iconsInText&&(ul=Wt.imageAtlasTexture?Wt.imageAtlasTexture.size:[0,0],$o=Wt.imageAtlasTexture?Wt.imageAtlasTexture:null,Hr=dt||!Re.isOrthographic||_.options.rotating||_.options.zooming||Zo.kind==="composite"||Zo.kind==="camera"?Ne.LINEAR:Ne.NEAREST);const Il=Wt.glyphAtlasTexture?Wt.glyphAtlasTexture.size:[0,0],qs=d.layout.get("text-size-scale-range"),$i=a.aA(_.scaleFactor,qs[0],qs[1]),ba=a.bK(Zo,Re.zoom,$i),Si=yd(rn,Wt.tileID.canonical,dt,nt,Re,Ht.getProjection(),_n),Ia=ws(rn,Wt.tileID.canonical,dt,nt,Re,Ht.getProjection(),_n),no=_.translatePosMatrix(Ia,Wt,F,H,!0),Wi=_.translatePosMatrix(rn,Wt,F,H),cl=tr?ca:Si,wm=nt&&!dt&&!qr;let rc=qt;!gt&&!Re.mercatorFromTransition||nt||(rc=pu(Re));const Zd=kd(Zo.kind,ba,wm,dt,_,Wi,cl,no,We,!0,Il,ul,0,tn,yn,et,Qn,xn?rc:qt,Ht.getProjection(),_i,yr,null,null,$i),Kd=Wt.glyphAtlasTexture?Wt.glyphAtlasTexture:null,fl=Ne.LINEAR,Xl=d.paint.get("text-halo-width").constantOr(1)!==0,ic=_.terrain&&dt&&qr?a.bl(a.bC(),Si):ca;if(qr&&Ht.text){const Pl=a.bV.getAtTileOffsetFunc(tn,Re.center.lat,Re.worldSize,Ht.getProjection()),Ai=pf(rn,Wt.tileID.canonical,dt,nt,Re,Ht.getProjection(),_n);Qr(Ht,rn,_,!0,Ai,Ia,dt,de,Pl,tn,$i)}return{program:co,buffers:Ht.text,uniformValues:Zd,atlasTexture:Kd,atlasTextureIcon:$o,atlasInterpolation:fl,atlasInterpolationIcon:Hr,isSDF:!0,hasHalo:Xl,depthMode:cs,tile:Wt,renderWithShadows:ai,labelPlaneMatrixInv:ic}},ei=Ht.icon.segments.get().length,wr=Ht.text.segments.get().length,er=ei&&!M.onlyText?jr():null,Rr=wr&&!M.onlyIcons?Mr():null,Pi=d.paint.get("icon-opacity").constantOr(1),ti=d.paint.get("text-opacity").constantOr(1);if(ft&&Ht.canOverlap){wt=!0;const qr=Pi&&!M.onlyText?Ht.icon.segments.get():[],Kn=ti&&!M.onlyIcons?Ht.text.segments.get():[];for(const tr of qr)Dt.push({segments:new a.bg([tr]),sortKey:tr.sortKey,state:er});for(const tr of Kn)Dt.push({segments:new a.bg([tr]),sortKey:tr.sortKey,state:Rr})}else M.onlyText||Dt.push({segments:Pi?Ht.icon.segments:new a.bg([]),sortKey:0,state:er}),M.onlyIcons||Dt.push({segments:ti?Ht.text.segments:new a.bg([]),sortKey:0,state:Rr})}wt&&Dt.sort((tn,Wt)=>tn.sortKey-Wt.sortKey);for(const tn of Dt){const Wt=tn.state;if(Wt)if(_.terrain?_.terrain.setupElevationDraw(Wt.tile,Wt.program,{useDepthForOcclusion:Re.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Wt.labelPlaneMatrixInv}):_.setupDepthForOcclusion(Re.depthOcclusionForSymbolsAndCircles,Wt.program),Ge.activeTexture.set(Ne.TEXTURE0),Wt.atlasTexture&&Wt.atlasTexture.bind(Wt.atlasInterpolation,Ne.CLAMP_TO_EDGE,!0),Wt.atlasTextureIcon&&(Ge.activeTexture.set(Ne.TEXTURE1),Wt.atlasTextureIcon&&Wt.atlasTextureIcon.bind(Wt.atlasInterpolationIcon,Ne.CLAMP_TO_EDGE,!0)),Wt.renderWithShadows&&_.shadowRenderer.setupShadows(Wt.tile.tileID.toUnwrapped(),Wt.program,"vector-tile"),_.uploadCommonLightUniforms(_.context,Wt.program),Wt.hasHalo){const Ht=Wt.uniformValues;Ht.u_is_halo=1,bh(Wt.buffers,tn.segments,d,_,Wt.program,Wt.depthMode,T,O,Ht,2),Ht.u_is_halo=0}else{if(Wt.isSDF){const Ht=Wt.uniformValues;Wt.hasHalo&&(Ht.u_is_halo=1,bh(Wt.buffers,tn.segments,d,_,Wt.program,Wt.depthMode,T,O,Ht,1)),Ht.u_is_halo=0}bh(Wt.buffers,tn.segments,d,_,Wt.program,Wt.depthMode,T,O,Wt.uniformValues,1)}}}function bh(_,l,d,v,T,O,M,R,F,q){const H=[_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer,_.iconTransitioningVertexBuffer,_.globeExtVertexBuffer,_.zOffsetVertexBuffer,_.orientationVertexBuffer];T.draw(v,v.context.gl.TRIANGLES,O,M,R,jn.disabled,F,d.id,_.layoutVertexBuffer,_.indexBuffer,l,d.paint,v.transform.zoom,_.programConfigurations.get(d.id),H,q)}function xh(_,l){const d=1<<_.canonical.z,v=(l.x*d-_.canonical.x-_.wrap*d)*a.al,T=(l.y*d-_.canonical.y)*a.al,O=a.e8(l.z,l.y);return a.d5(v,T,O)}function P0(_,l,d,v,T){if(!d.layout||d.layout.get("fill-elevation-reference")==="none"||d.paint.get("fill-opacity").constantOr(1)===0)return;const O=_.context.gl,M=new On(_.context.gl.LEQUAL,On.ReadWrite,_.depthRangeFor3D),R=new On(_.context.gl.GREATER,On.ReadWrite,_.depthRangeFor3D),F=(function(oe){let he=.01;return oe.isOrthographic&&(he=a.ak(1e-4,he,a.d0(oe.pitch>=Tl?1:oe.pitch/Tl))),2*he})(_.transform),q=_.transform.getFreeCameraOptions().position,H="elevatedStructuresDepthReconstruct",re=_.getOrCreateProgram(H,{defines:["DEPTH_RECONSTRUCTION"]}),ee=_.getOrCreateProgram(H);for(const oe of v){const he=l.getTile(oe),ce=he.getBucket(d);if(!ce)continue;const de=ce.elevatedStructures;if(!de)continue;const _e=ce.elevationBufferData.heightRange,Me=xh(oe.toUnwrapped(),q),Ce=_.translatePosMatrix(oe.projMatrix,he,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));let Ae,We,$e,Ge;if(T==="initialize"){if(!_e||_e.min>=1||de.depthSegments.segments[0].primitiveLength===0)continue;Ae=_h(Ce,Me,F,1,0),We=M,$e=de.depthSegments,Ge=re}else if(T==="reset"){if(!_e||_e.min>=0||de.maskSegments.segments[0].primitiveLength===0)continue;Ae=_h(Ce,Me,0,0,1),We=R,$e=de.maskSegments,Ge=re}else if(T==="geometry"){if(de.depthSegments.segments[0].primitiveLength===0)continue;Ae=_h(Ce,Me,F,1,0),We=M,$e=de.depthSegments,Ge=ee}Ge.draw(_,O.TRIANGLES,We,qn.disabled,Gn.disabled,jn.disabled,Ae,d.id,de.vertexBuffer,de.indexBuffer,$e,d.paint,_.transform.zoom)}}function Ma(_,l,d,v){const{painter:T,sourceCache:O,layer:M,coords:R,colorMode:F,elevationType:q,terrainEnabled:H,pass:re}=_,ee=T.context.gl,oe=M.paint.get("fill-pattern"),he=M.paint.get("fill-pattern-cross-fade"),ce=oe.constantOr(null);let de=q;q!=="road"||l&&!H||(de="none");const _e=de==="road",Me=_.painter.shadowRenderer,Ce=_e&&!!Me&&Me.enabled,Ae=new On(T.context.gl.LEQUAL,On.ReadOnly,T.depthRangeFor3D);let We=[0,0,0];if(Ce){const Re=T.style.directionalLight,Je=T.style.ambientLight;Re&&Je&&(We=js(T.style,Re,Je))}const $e=oe&&oe.constantOr(1),Ge=T.terrain&&T.terrain.renderingToTexture,Ne=(Re,Je)=>{let nt,st,dt,ft,wt;Je?(nt=$e&&!M.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",dt=ee.LINES):(nt=$e?"fillPattern":"fill",dt=ee.TRIANGLES);for(const It of R){const pt=O.getTile(It);if($e&&!pt.patternsLoaded())continue;const et=pt.getBucket(M);if(!et)continue;const At=l?et.elevationBufferData:et.bufferData;if(At.isEmpty())continue;T.prepareDrawTile();const gt=At.programConfigurations.get(M.id),Dt=T.isTileAffectedByFog(It),qt=[],tn=[];_e&&(qt.push("ELEVATED_ROADS"),tn.push(At.elevatedLayoutVertexBuffer)),Ce&&qt.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),Ge&&d&&qt.push("USE_MRT1"),$e&&(T.context.activeTexture.set(ee.TEXTURE0),pt.imageAtlasTexture&&pt.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),gt.updatePaintBuffers());let Wt=!1;if(ce&&pt.imageAtlas){const _n=pt.imageAtlas,In=a.e3.from(ce),Un=In.getPrimary().scaleSelf(a.o.devicePixelRatio).toString(),Qn=In.getSecondary(),yr=_n.patternPositions.get(Un),$n=Qn?_n.patternPositions.get(Qn.scaleSelf(a.o.devicePixelRatio).toString()):null;Wt=!!yr&&!!$n,yr&&gt.setConstantPatternPositions(yr,$n)}he>0&&(Wt||gt.getPatternTransitionVertexBuffer("fill-pattern"))&&qt.push("FILL_PATTERN_TRANSITION");const Ht=T.getOrCreateProgram(nt,{config:gt,overrideFog:Dt,defines:qt}),xn=T.translatePosMatrix(It.projMatrix,pt,M.paint.get("fill-translate"),M.paint.get("fill-translate-anchor"));Ce&&Me.setupShadows(pt.tileID.toUnwrapped(),Ht,"vector-tile");const yn=M.paint.get("fill-emissive-strength");if(Je){ft=At.lineIndexBuffer,wt=At.lineSegments;const _n=T.terrain&&T.terrain.renderingToTexture?T.terrain.drapeBufferSize:[ee.drawingBufferWidth,ee.drawingBufferHeight];st=nt==="fillOutlinePattern"&&$e?$g(xn,yn,T,pt,_n,We,he):im(xn,yn,_n,We)}else ft=At.indexBuffer,wt=At.triangleSegments,st=$e?yh(xn,yn,T,pt,We,he):gh(xn,yn,We);T.uploadCommonUniforms(T.context,Ht,It.toUnwrapped());let rn=Re;(q==="road"&&!H||q==="offset")&&(rn=Ae),Ht.draw(T,dt,rn,v||T.stencilModeForClipping(It),F,jn.disabled,st,M.id,At.layoutVertexBuffer,ft,wt,M.paint,T.transform.zoom,gt,tn)}};T.renderPass===re&&Ne(T.depthModeForSublayer(1,T.renderPass==="opaque"?On.ReadWrite:On.ReadOnly),!1),de==="none"&&T.renderPass==="translucent"&&M.paint.get("fill-antialias")&&Ne(T.depthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,On.ReadOnly),!0)}function wh(_,l,d,v,T,O,M,R){d.resetLayerRenderingStats(_);const F=_.context,q=F.gl,H=_.transform,re=d.paint.get("fill-extrusion-pattern"),ee=d.paint.get("fill-extrusion-pattern-cross-fade"),oe=re.constantOr(null),he=re.constantOr(1),ce=d.paint.get("fill-extrusion-opacity"),de=_.style.enable3dLights(),_e=d.paint.get(de&&!he?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),Me=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),_e],Ce=d.layout.get("fill-extrusion-edge-radius"),Ae=Ce>0&&!d.paint.get("fill-extrusion-rounded-roof"),We=Ae?0:Ce,$e=H.projection.name==="globe"?a.eb():0,Ge=H.projection.name==="globe",Ne=Ge?a.aj(H.zoom):0,Re=[a.aF(H.center.lng),a.aJ(H.center.lat)],Je=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",nt=d.paint.get("fill-extrusion-flood-light-color").toNonPremultipliedRenderColor(Je?null:d.lut).toArray01().slice(0,3),st=d.paint.get("fill-extrusion-flood-light-intensity"),dt=d.paint.get("fill-extrusion-vertical-scale"),ft=d.paint.get("fill-extrusion-line-width").constantOr(1)!==0,wt=d.paint.get("fill-extrusion-height-alignment"),It=d.paint.get("fill-extrusion-base-alignment"),pt=$l(_,d.paint.get("fill-extrusion-cutoff-fade-range")),et=[];let At;Ge&&et.push("PROJECTION_GLOBE_VIEW"),Me[0]>0&&et.push("FAUX_AO"),Ae&&et.push("ZERO_ROOF_RADIUS"),R&&et.push("HAS_CENTROID"),st>0&&et.push("FLOOD_LIGHT"),pt.shouldRenderCutoff&&et.push("RENDER_CUTOFF"),ft&&et.push("RENDER_WALL_MODE");const gt=_.renderPass==="shadow",Dt=_.shadowRenderer,qt=gt&&!!Dt,tn=gt?jn.disabled:jn.backCCW;_.shadowRenderer&&(_.shadowRenderer.useNormalOffset=!0);let Wt=[0,0,0];if(Dt){const yn=_.style.directionalLight,rn=_.style.ambientLight;yn&&rn&&(Wt=js(_.style,yn,rn)),gt||(et.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Dt.useNormalOffset&&et.push("NORMAL_OFFSET")),At=et.concat(["SHADOWS_SINGLE_CASCADE"])}const Ht=qt?"fillExtrusionDepth":he?"fillExtrusionPattern":"fillExtrusion",xn=d.getLayerRenderingStats();for(const yn of v){const rn=l.getTile(yn),_n=rn.getBucket(d);if(!_n||_n.projection.name!==H.projection.name)continue;let In=!1;Dt&&(In=Dt.getMaxCascadeForTile(yn.toUnwrapped())===0);const Un=_.isTileAffectedByFog(yn),Qn=_n.programConfigurations.get(d.id);let yr=!1;if(oe&&rn.imageAtlas){const wr=rn.imageAtlas,er=a.e3.from(oe),Rr=er.getPrimary().scaleSelf(a.o.devicePixelRatio).toString(),Pi=er.getSecondary(),ti=wr.patternPositions.get(Rr),qr=Pi?wr.patternPositions.get(Pi.scaleSelf(a.o.devicePixelRatio).toString()):null;yr=!!ti&&!!qr,ti&&Qn.setConstantPatternPositions(ti,qr)}ee>0&&(yr||Qn.getPatternTransitionVertexBuffer("fill-extrusion-pattern"))&&et.push("FILL_EXTRUSION_PATTERN_TRANSITION");const $n=_.getOrCreateProgram(Ht,{config:Qn,defines:In?At:et,overrideFog:Un});if(_.terrain&&_.terrain.setupElevationDraw(rn,$n,{useMeterToDem:!0}),!_n.centroidVertexBuffer){const wr=$n.getAttributeLocation(q,"a_centroid_pos");wr!==-1&&q.vertexAttrib2f(wr,0,0)}!gt&&Dt&&Dt.setupShadows(rn.tileID.toUnwrapped(),$n,"vector-tile"),he&&(_.context.activeTexture.set(q.TEXTURE0),rn.imageAtlasTexture&&rn.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Qn.updatePaintBuffers());const Jn=d.paint.get("fill-extrusion-vertical-gradient"),Yn=1/_n.tileToMeter;let jr;if(gt&&Dt){if(Gg(rn.tileID,_n.maxHeight,_))continue;const wr=Dt.calculateShadowPassMatrixFromTile(rn.tileID.toUnwrapped());jr=Cf(wr,We,Yn,dt,wt,It)}else{const wr=_.translatePosMatrix(yn.expandedProjMatrix,rn,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),er=H.projection.createInversionMatrix(H,yn.canonical);jr=he?D0(wr,_,Jn,ce,Me,We,Yn,yn,rn,$e,wt,It,Ne,Re,er,nt,dt,ee):Lc(wr,_,Jn,ce,Me,We,Yn,yn,$e,wt,It,Ne,Re,er,nt,dt,st,Wt)}_.uploadCommonUniforms(F,$n,yn.toUnwrapped(),null,pt);let Mr=_n.segments;if(H.projection.name==="mercator"&&!gt&&(Mr=_n.getVisibleSegments(rn.tileID,_.terrain,_.transform.getFrustum(0)),!Mr.get().length))continue;if(xn)if(gt)for(const wr of Mr.get())xn.numRenderedVerticesInShadowPass+=wr.primitiveLength;else for(const wr of Mr.get())xn.numRenderedVerticesInTransparentPass+=wr.primitiveLength;const ei=[];(_.terrain||R)&&ei.push(_n.centroidVertexBuffer),Ge&&ei.push(_n.layoutVertexExtBuffer),ft&&ei.push(_n.wallVertexBuffer),$n.draw(_,F.gl.TRIANGLES,T,O,M,tn,jr,d.id,_n.layoutVertexBuffer,_n.indexBuffer,Mr,d.paint,_.transform.zoom,Qn,ei)}_.shadowRenderer&&(_.shadowRenderer.useNormalOffset=!1)}class Fd{constructor(){this.translate=[0,0],this.translateAnchor="map",this.edgeRadius=0,this.cutoffFadeRange=0}}function Xu(_,l,d,v,T,O,M,R,F,q,H,re,ee,oe,he,ce,de,_e,Me,Ce){const Ae=l.context,We=Ae.gl,$e=l.transform,Ge=l.transform.zoom,Ne=[],Re=_.translate,Je=_.translateAnchor,nt=_.edgeRadius,st=$l(l,_.cutoffFadeRange);H==="clear"?(Ne.push("CLEAR_SUBPASS"),Ce&&(Ne.push("CLEAR_FROM_TEXTURE"),Ae.activeTexture.set(We.TEXTURE0),Ce.bind(We.LINEAR,We.CLAMP_TO_EDGE))):H==="sdf"?Ne.push("SDF_SUBPASS"):H==="emissive"&&(Ne.push("USE_MRT1"),Ae.activeTexture.set(We.TEXTURE0),Ce.bind(We.LINEAR,We.CLAMP_TO_EDGE)),_e&&Ne.push("HAS_CENTROID"),st.shouldRenderCutoff&&Ne.push("RENDER_CUTOFF");const dt=(ft,wt,It,pt,et)=>{let At=Ne;wt.groundRadiusBuffer!=null&&(At=Ne.concat("HAS_ATTRIBUTE_a_flood_light_ground_radius"));const gt=wt.programConfigurations.get(v.id),Dt=l.isTileAffectedByFog(ft),qt=l.getOrCreateProgram("fillExtrusionGroundEffect",{config:gt,defines:At,overrideFog:Dt}),tn=((Ht,xn,yn,rn,_n,In,Un,Qn,yr,$n,Jn)=>({u_matrix:xn,u_opacity:yn,u_ao_pass:rn?1:0,u_meter_to_tile:_n,u_ao:In,u_flood_light_intensity:Un,u_flood_light_color:Qn,u_attenuation:yr,u_edge_radius:$n,u_fb:0,u_fb_size:Jn,u_dynamic_offset:1}))(0,pt,re,q,et,[ee,oe*et],he,ce,de,Ge>=17?0:nt*et,Ce?Ce.size[0]:0),Wt=[];_e&&Wt.push(wt.hiddenByLandmarkVertexBuffer),wt.groundRadiusBuffer!=null&&Wt.push(wt.groundRadiusBuffer),l.uploadCommonUniforms(Ae,qt,ft.toUnwrapped(),null,st),qt.draw(l,Ae.gl.TRIANGLES,O,M,R,F,tn,v.id,wt.vertexBuffer,wt.indexBuffer,It,v.paint,Ge,gt,Wt)};for(const ft of T){const wt=d.getTile(ft),It=wt.getBucket(v);if(!It||It.projection.name!==$e.projection.name||!It.groundEffect||It.groundEffect&&!It.groundEffect.hasData())continue;const pt=It.groundEffect,et=1/It.tileToMeter;{const At=l.translatePosMatrix(ft.projMatrix,wt,Re,Je),gt=pt.getDefaultSegment();dt(ft,pt,gt,At,et)}if(Me)for(let At=0;At<4;At++){const gt=a.e9[At](ft),Dt=d.getTile(gt);if(!Dt)continue;const qt=Dt.getBucket(v);if(!qt||qt.projection.name!==$e.projection.name||!qt.groundEffect||qt.groundEffect&&!qt.groundEffect.hasData())continue;const tn=qt.groundEffect;let Wt,Ht;At===0?(Wt=[-a.al,0,0],Ht=1):At===1?(Wt=[a.al,0,0],Ht=0):At===2?(Wt=[0,-a.al,0],Ht=3):(Wt=[0,a.al,0],Ht=2);const xn=tn.regionSegments[Ht];if(!xn)continue;const yn=new Float32Array(16);a.br(yn,ft.projMatrix,Wt),dt(ft,tn,xn,l.translatePosMatrix(yn,wt,Re,Je),et)}}}function R0(_,l,d,v,T,O,M){v.centroidVertexArray.length===0&&v.createCentroidsBuffer();const R=O?O.findDEMTileFor(d):null;if(!(R&&R.dem||M))return;O&&R&&R.dem&&v.selfDEMTileTimestamp!==R.dem._timestamp&&(v.borderDoneWithNeighborZ=[-1,-1,-1,-1],v.selfDEMTileTimestamp=R.dem._timestamp);const F=(de,_e)=>{(de.flags|_e.flags)&a.ec?(de.flags|=a.ec,_e.flags|=a.ec):(de.flags&=~a.ec,_e.flags&=~a.ec)},q=de=>new a.P(Math.ceil((de+a.ed)*a.ee),0),H=de=>{const _e=l.getSource().minzoom,Me=Ae=>{const We=l.getTileByID(Ae);if(We&&We.hasData())return We.getBucket(T)},Ce=[0,-1,1];for(const Ae of Ce){if(de.overscaledZ+Ae<_e)continue;const We=Me(de.calculateScaledKey(de.overscaledZ+Ae));if(We)return We}},re=[0,0,0],ee=(de,_e)=>(re[0]=Math.min(de.min.y,_e.min.y),re[1]=Math.max(de.max.y,_e.max.y),re[2]=a.al-_e.min.x>de.max.x?_e.min.x-a.al:de.max.x,re),oe=(de,_e)=>(re[0]=Math.min(de.min.x,_e.min.x),re[1]=Math.max(de.max.x,_e.max.x),re[2]=a.al-_e.min.y>de.max.y?_e.min.y-a.al:de.max.y,re),he=[(de,_e)=>ee(de,_e),(de,_e)=>ee(_e,de),(de,_e)=>oe(de,_e),(de,_e)=>oe(_e,de)],ce=(de,_e,Me,Ce,Ae,We,$e)=>{if(!O)return 0;const Ge=[[We?Me:de,We?de:Me,0],[We?Me:_e,We?_e:Me,0]],Ne=$e<0?a.al+$e:$e,Re=[We?Ne:(de+_e)/2,We?(de+_e)/2:Ne,0];return Me===0&&$e<0||Me!==0&&$e>0?O.getForTilePoints(Ae,[Re],!0,Ce):Ge.push(Re),O.getForTilePoints(d,Ge,!0,R),Math.max(Ge[0][2],Ge[1][2],Re[2])/O.exaggeration()};for(let de=0;de<4;de++){const _e=v.borderFeatureIndices[de];if(_e.length===0)continue;const Me=a.e9[de](d),Ce=H(Me);if(!(Ce&&Ce instanceof a.ea))continue;const Ae=O?O.findDEMTileFor(Me):null;if(!(Ae&&Ae.dem||M)||(O&&Ae&&Ae.dem&&v.borderDEMTileTimestamp[de]!==Ae.dem._timestamp&&(v.borderDoneWithNeighborZ[de]=-1,v.borderDEMTileTimestamp[de]=Ae.dem._timestamp),v.borderDoneWithNeighborZ[de]===Ce.canonical.z))continue;Ce.centroidVertexArray.length===0&&Ce.createCentroidsBuffer();const We=(de<2?1:5)-de,$e=Ce.borderDoneWithNeighborZ[We]!==v.canonical.z,Ge=Ce.borderFeatureIndices[We];let Ne=0;if(v.canonical.z!==Ce.canonical.z){for(const Re of _e)v.showCentroid(v.featuresOnBorder[Re]);if($e)for(const Re of Ge)Ce.showCentroid(Ce.featuresOnBorder[Re]);v.borderDoneWithNeighborZ[de]=Ce.canonical.z,Ce.borderDoneWithNeighborZ[We]=v.canonical.z}for(const Re of _e){const Je=v.featuresOnBorder[Re],nt=v.centroidData[Je.centroidDataIndex],st=Je.borders[de];let dt;for(;Ne<Ge.length;){dt=Ce.featuresOnBorder[Ge[Ne]];const ft=dt.borders[We];if(ft[1]>st[0]+3||ft[0]>st[0]-3)break;Ce.showCentroid(dt),Ne++}if(dt&&Ne<Ge.length){const ft=Ne;let wt=0;for(;!(dt.borders[We][0]>st[1]-3)&&(wt++,++Ne!==Ge.length);)dt=Ce.featuresOnBorder[Ge[Ne]];dt=Ce.featuresOnBorder[Ge[ft]];let It=!1;if(wt>=1){const At=dt.borders[We];Math.abs(st[0]-At[0])<3&&Math.abs(st[1]-At[1])<3&&(wt=1,It=!0,Ne=ft+1)}else if(wt===0){v.showCentroid(Je);continue}const pt=Ce.centroidData[dt.centroidDataIndex];M&&It&&F(nt,pt);const et=Je.intersectsCount()>1||dt.intersectsCount()>1;if(wt>1)Ne=ft,nt.centroidXY=pt.centroidXY=new a.P(0,0);else if(Ae&&Ae.dem&&!et){const At=he[de](nt,pt),gt=de%2?a.al-1:0,Dt=ce(At[0],Math.min(a.al-1,At[1]),gt,Ae,Me,de<2,At[2]);nt.centroidXY=pt.centroidXY=q(Dt)}else et?nt.centroidXY=pt.centroidXY=new a.P(0,0):(nt.centroidXY=v.encodeBorderCentroid(Je),pt.centroidXY=Ce.encodeBorderCentroid(dt));v.writeCentroidToBuffer(nt),Ce.writeCentroidToBuffer(pt)}else v.showCentroid(Je)}v.borderDoneWithNeighborZ[de]=Ce.canonical.z,Ce.borderDoneWithNeighborZ[We]=v.canonical.z}(v.needsCentroidUpdate||!v.centroidVertexBuffer&&v.centroidVertexArray.length!==0)&&v.uploadCentroid(_)}const u1=[1,0,0],q_=[0,1,0],H_=[0,0,1];function Gg(_,l,d){const v=d.transform,T=d.shadowRenderer;if(!T)return!0;const O=_.toUnwrapped(),M=v.tileSize*T._cascades[d.currentShadowCascade].scale;let R=l;if(v.elevation){const ce=v.elevation.getMinMaxForTile(_);ce&&(R+=ce.max)}const F=[...T.shadowDirection];F[2]=-F[2];const q=T.computeSimplifiedTileShadowVolume(O,R,M,F);if(!q)return!1;const H=[u1,q_,H_,F,[F[0],0,F[2]],[0,F[1],F[2]]],re=v.projection.name==="globe",ee=v.scaleZoom(M),oe=a.cB.fromInvProjectionMatrix(v.invProjMatrix,v.worldSize,ee,!re),he=T.getCurrentCascadeFrustum();return oe.intersectsPrecise(q.vertices,q.planes,H)===0||he.intersectsPrecise(q.vertices,q.planes,H)===0}function jo(_){const{painter:l,source:d,layer:v,coords:T}=_;let O=_.defines;const M=l.context,R=l.renderPass==="shadow",F=l.renderPass==="light-beam",q=l.shadowRenderer,H=a.ef(l.transform.center.lat,l.transform.zoom),re=$l(l,v.paint.get("building-cutoff-fade-range"));re.shouldRenderCutoff&&(O=O.concat("RENDER_CUTOFF")),_.floodLightIntensity>0&&(O=O.concat("FLOOD_LIGHT"));for(const ee of T){const oe=d.getTile(ee),he=oe.getBucket(v);if(!he)continue;q&&q.getMaxCascadeForTile(ee.toUnwrapped())===0&&(O=O.concat("SHADOWS_SINGLE_CASCADE"));const ce=he.programConfigurations.get(v.id);let de,_e,Me,Ce=l.translatePosMatrix(ee.expandedProjMatrix,oe,[0,0],"map");if(Ce=a.cS(a.bC(),Ce,[1,1,_.verticalScale]),R&&q){if(Gg(oe.tileID,he.maxHeight*H,l))continue;let We=q.calculateShadowPassMatrixFromTile(oe.tileID.toUnwrapped());We=a.cS(a.bC(),We,[1,1,_.verticalScale]),Me=sl(We),de=_e=l.getOrCreateProgram("buildingDepth",{config:ce,defines:O,overrideFog:!1})}else if(F)de=_e=l.getOrCreateProgram("buildingBloom",{config:ce,defines:O,overrideFog:!1}),Me=I0(Ce);else{const We=l.transform.calculatePosMatrix(ee.toUnwrapped(),l.transform.worldSize);a.cS(We,We,[1,1,_.verticalScale]);const $e=a.bC();a.cS($e,We,[1,-1,1/H]),a.bl($e,$e),a.eg($e,$e);const Ge=l.transform.getFreeCameraOptions().position,Ne=1<<ee.canonical.z;if(Me=zc(Ce,$e,_.opacity,_.facadeAOIntensity,[((Ge.x-ee.wrap)*Ne-ee.canonical.x)*a.al,(Ge.y*Ne-ee.canonical.y)*a.al,Ge.z*Ne*a.al],he.tileToMeter,_.facadeEmissiveChance,_.floodLightColor,_.floodLightIntensity),_e=l.getOrCreateProgram("building",{config:ce,defines:O,overrideFog:!1}),_.depthOnly===!0)de=_e;else{const Re=O.concat(["BUILDING_FAUX_FACADE","HAS_ATTRIBUTE_a_faux_facade_color_emissive"]);de=l.getOrCreateProgram("building",{config:ce,defines:Re,overrideFog:!1})}q&&(q.setupShadowsFromMatrix(We,_e,!0),de!==_e&&q.setupShadowsFromMatrix(We,de,!0))}const Ae=(We,$e)=>{if(F){const Ge=We.entranceBloom;$e.draw(l,M.gl.TRIANGLES,_.depthMode,qn.disabled,_.blendMode,jn.disabled,Me,v.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segmentsBucket,v.paint,l.transform.zoom,ce,[Ge.layoutAttenuationBuffer,Ge.layoutColorBuffer])}else{const Ge=We.segmentsBucket;let Ne=[We.layoutNormalBuffer,We.layoutCentroidBuffer,We.layoutColorBuffer,We.layoutFloodLightDataBuffer];We.layoutFacadePaintBuffer&&(Ne=Ne.concat([We.layoutFacadeDataBuffer,We.layoutFacadeVerticalRangeBuffer,We.layoutFacadePaintBuffer])),$e.draw(l,M.gl.TRIANGLES,_.depthMode,qn.disabled,_.blendMode,R?jn.disabled:jn.backCW,Me,v.id,We.layoutVertexBuffer,We.indexBuffer,Ge,v.paint,l.transform.zoom,ce,Ne)}};l.uploadCommonUniforms(M,_e,ee.toUnwrapped(),null,re),he.buildingWithoutFacade&&Ae(he.buildingWithoutFacade,_e),he.buildingWithFacade&&(de!==_e&&l.uploadCommonUniforms(M,de,ee.toUnwrapped(),null,re),Ae(he.buildingWithFacade,de))}}function Wa(_,l,d,v,T,O,M,R,F,q,H,re,ee){const oe=_.context.gl,he=_.depthModeForSublayer(1,On.ReadOnly,oe.LEQUAL,!0),ce=.1*(1-(de=H))+3*de;var de;const _e=_._showOverdrawInspector,Me=re,Ce=new Fd;_e||Xu(Ce,_,l,d,v,he,new qn({func:oe.ALWAYS,mask:255},255,255,oe.KEEP,oe.KEEP,oe.REPLACE),new Gn([oe.ONE,oe.ONE,oe.ONE,oe.ONE],a.ao.transparent,[!1,!1,!1,!0],oe.MIN),jn.disabled,T,"sdf",O,M,R,F,q,ce,Me,!1);{const Ae=_e?qn.disabled:new qn({func:oe.EQUAL,mask:255},255,255,oe.KEEP,oe.DECR,oe.DECR),We=_e?_.colorModeForRenderPass():new Gn([oe.ONE_MINUS_DST_ALPHA,oe.DST_ALPHA,oe.ONE,oe.ONE],a.ao.transparent,[!0,!0,!0,!0]);Xu(Ce,_,l,d,v,he,Ae,We,jn.disabled,T,"color",O,M,R,F,q,ce,Me,!1)}}function sm(_){return[_[0]*a.eh,_[1]*a.eh,_[2]*a.eh,0]}function Sh(_,l,d,v,T,O,M,R,F){const q=v.getSource(),H=d.globeSharedBuffers;if(!H)return;let re,ee,oe;if(l&&(re=v.getTile(l)),q instanceof a.aU?(ee=q.texture,oe=a.dK(0,0,d.transform)):re&&l&&(ee=re.texture,oe=a.dK(l.canonical.z,l.canonical.x,d.transform)),!ee||!oe)return;_||(oe=a.cS(a.bC(),oe,[1,-1,1]));const he=d.context,ce=he.gl,de=T.paint.get("raster-resampling")==="nearest"?ce.NEAREST:ce.LINEAR,_e=d.colorModeForDrapableLayerRenderPass(O),Me=M.defines;Me.push("GLOBE_POLES");const Ce=new On(ce.LEQUAL,On.ReadWrite,d.depthRangeFor3D),Ae=Float32Array.from(d.transform.expandedFarZProjMatrix),We=Float32Array.from(a.bk(a.dJ(new a.cD(0,0,0))));d.terrain&&d.terrain.prepareDrawTile(),he.activeTexture.set(ce.TEXTURE0),ee.bind(de,ce.CLAMP_TO_EDGE),he.activeTexture.set(ce.TEXTURE1),ee.bind(de,ce.CLAMP_TO_EDGE),"useMipmap"in ee&&he.extTextureFilterAnisotropic&&d.transform.pitch>20&&ce.texParameterf(ce.TEXTURE_2D,he.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,he.extTextureFilterAnisotropicMax);const[$e,Ge,Ne,Re]=l?H.getPoleBuffers(l.canonical.z,!1):H.getPoleBuffers(0,!0),Je=T.paint.get("raster-elevation");let nt;_?(nt=$e,d.renderDefaultNorthPole=Je!==0):(nt=Ge,d.renderDefaultSouthPole=Je!==0);const st=sm(M.mix),dt=((wt,It,pt,et,At,gt,Dt,qt,tn,Wt,Ht,xn,yn)=>Id(wt,It,pt,new Float32Array(16),new Float32Array(9),[0,0],et,[0,0],[0,0,0,0],1,{opacity:1,mix:0},gt,[0,0],qt,2,Wt,Ht,xn,1,0,yn))(Ae,We,oe,a.aj(d.transform.zoom),0,T,0,Je,0,st,M.offset,M.range,O),ft=d.getOrCreateProgram("raster",{defines:Me});d.uploadCommonUniforms(he,ft,null),ft.draw(d,ce.TRIANGLES,Ce,F,_e,R,dt,T.id,nt,Ne,Re)}function Yg(_){if(_.isOrthographic)return[0,0,0,0];const l=_._nearZ,d=_.projection.farthestPixelDistance(_),v=d-l,T=.2*_.height,O=l+T;return[l,d,(O-T-l)/v,(O-l)/v]}function G_(_,l,d,v){if(_)return l instanceof xs&&_ instanceof Lp?l.getTextureDescriptor(_,d,!0):{texture:_.texture,mix:sm(v.mix),offset:v.offset,buffer:0,tileSize:1}}var Zu=a.ei([{name:"a_index",type:"Int16",components:1}]);class Wg{constructor(l,d,v,T){const O={width:v[0],height:v[1],data:null},M=l.gl;this.targetColorTexture=new a.T(l,O,M.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new a.T(l,O,M.RGBA8,{useMipmap:!1}),this.context=l,this.updateParticleTexture(d,T),this.lastInvalidatedAt=0}updateParticleTexture(l,d){if(this.particleTextureDimension===d.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const v=this.context.gl,T=d.width*d.height;this.particleTexture0=new a.T(this.context,d,v.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new a.T(this.context,d,v.RGBA8,{premultiply:!1,useMipmap:!1});const O=new a.ej;O.reserve(T);for(let M=0;M<T;M++)O.emplaceBack(M);this.particleIndexBuffer=this.context.createVertexBuffer(O,Zu.members,!0),this.particleSegment=a.bg.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=d.width}update(l){return!(this.lastInvalidatedAt<l&&(this.lastInvalidatedAt=a.o.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Xg(_,l,d){if(!_)return null;const v=l.getTextureDescriptor(_,d,!0);if(!v)return null;let{texture:T,mix:O,offset:M,tileSize:R,buffer:F,format:q}=v;if(!T||!q)return null;let H=!1;return q==="uint32"&&(H=!0,O[3]=0,O=om(a.ek,O,[0,d.paint.get("raster-particle-max-speed")]),M=$_(a.ek,M,[0,d.paint.get("raster-particle-max-speed")])),{texture:T,textureOffset:[F/(R+2*F),R/(R+2*F)],tileSize:R,scalarData:H,scale:O,offset:M,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[q]]}}function Y_(_){const l=_._nearZ,d=_.projection.farthestPixelDistance(_),v=d-l,T=.2*_.height,O=l+T;return[l,d,(O-T-l)/v,(O-l)/v]}const W_=new a.ao(1,0,0,1),X_=new a.ao(0,1,0,1),Z_=new a.ao(0,0,1,1),c1=new a.ao(1,0,1,1),f1=new a.ao(0,1,1,1);function k0(_,l,d,v,T,O){for(let M=0;M<d.length;M++)if(T){const q=new a.ao(v.r*.8,v.g*.8,v.b*.8,1);jc(_,l,d[M],v,-1,-1,O),jc(_,l,d[M],v,-1,1,O),jc(_,l,d[M],v,1,1,O),jc(_,l,d[M],v,1,-1,O),jc(_,l,d[M],q,0,0,O)}else jc(_,l,d[M],v,0,0,O)}function jc(_,l,d,v,T,O,M){const R=_.context,F=_.transform,q=R.gl,H=F.projection.name==="globe",re=H?["PROJECTION_GLOBE_VIEW"]:[];let ee=a.bz(d.projMatrix);if(H&&a.aj(F.zoom)>0){const st=a.bj(d.canonical,F),dt=a.el(st);ee=a.aB(new Float32Array(16),F.globeMatrix,dt),a.aB(ee,F.projMatrix,ee)}const oe=a.bC();oe[12]+=2*T/(a.o.devicePixelRatio*F.width),oe[13]+=2*O/(a.o.devicePixelRatio*F.height),a.aB(ee,oe,ee);const he=_.getOrCreateProgram("debug",{defines:re}),ce=l.getTileByID(d.key);_.terrain&&_.terrain.setupElevationDraw(ce,he);const de=On.disabled,_e=qn.disabled,Me=_.colorModeForRenderPass(),Ce="$debug";R.activeTexture.set(q.TEXTURE0),_.emptyTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),H?ce._makeGlobeTileDebugBuffers(_.context,F):ce._makeDebugTileBoundsBuffers(_.context,F.projection);const Ae=ce._tileDebugBuffer||_.debugBuffer,We=ce._tileDebugIndexBuffer||_.debugIndexBuffer,$e=ce._tileDebugSegments||_.debugSegments;if(he.draw(_,q.LINE_STRIP,de,_e,Me,jn.disabled,Nc(ee,v.toPremultipliedRenderColor(null)),Ce,Ae,We,$e,null,null,null,[ce._globeTileDebugBorderBuffer]),M){const st=ce.latestRawTileData,dt=Math.floor((st&&st.byteLength||0)/1024);let ft=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ft+=` => ${d.overscaledZ}`),ft+=` ${ce.state}`,ft+=` ${dt}kb`,(function(wt,It){wt.initDebugOverlayCanvas();const pt=wt.debugOverlayCanvas,et=wt.context.gl,At=wt.debugOverlayCanvas.getContext("2d");At.clearRect(0,0,pt.width,pt.height),At.shadowColor="white",At.shadowBlur=2,At.lineWidth=1.5,At.strokeStyle="white",At.textBaseline="top",At.font="bold 36px Open Sans, sans-serif",At.fillText(It,5,5),At.strokeText(It,5,5),wt.debugOverlayTexture.update(pt),wt.debugOverlayTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE)})(_,ft)}const Ge=l.getTile(d).tileSize,Ne=512/Math.min(Ge,512)*(d.overscaledZ/F.zoom)*.5,Re=ce._tileDebugTextBuffer||_.debugBuffer,Je=ce._tileDebugTextIndexBuffer||_.quadTriangleIndexBuffer,nt=ce._tileDebugTextSegments||_.debugSegments;he.draw(_,q.TRIANGLES,de,_e,Gn.alphaBlended,jn.disabled,Nc(ee,a.ao.transparent.toPremultipliedRenderColor(null),Ne),Ce,Re,Je,nt,null,null,null,[ce._globeTileDebugTextBuffer])}function L0(_,l,d,v){Zg(_,0,l+d/2,_.transform.width,d,v)}function z0(_,l,d,v){Zg(_,l-d/2,0,d,_.transform.height,v)}function Zg(_,l,d,v,T,O){const M=_.context,R=M.gl;R.enable(R.SCISSOR_TEST),R.scissor(l*a.o.devicePixelRatio,d*a.o.devicePixelRatio,v*a.o.devicePixelRatio,T*a.o.devicePixelRatio),M.clear({color:O}),R.disable(R.SCISSOR_TEST)}const N0=a.ei([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:h1}=N0;function Uc(_,l,d,v){_.emplaceBack(l,d,v)}class Vs{constructor(l){this.vertexArray=new a.em,this.indices=new a.b0,Uc(this.vertexArray,-1,-1,1),Uc(this.vertexArray,1,-1,1),Uc(this.vertexArray,-1,1,1),Uc(this.vertexArray,1,1,1),Uc(this.vertexArray,-1,-1,-1),Uc(this.vertexArray,1,-1,-1),Uc(this.vertexArray,-1,1,-1),Uc(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,h1),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=a.bg.simpleSegment(0,0,36,12)}}function If(_,l,d,v,T,O){const M=_.context.gl,R=l.paint.get("sky-atmosphere-color"),F=l.paint.get("sky-atmosphere-halo-color"),q=l.paint.get("sky-atmosphere-sun-intensity"),H=((re,ee,oe,he,ce)=>({u_matrix_3f:re,u_sun_direction:ee,u_sun_intensity:oe,u_color_tint_r:[he.r,he.g,he.b,he.a],u_color_tint_m:[ce.r,ce.g,ce.b,ce.a],u_luminance:5e-5}))(a.eo(a.dO(),v),T,q,R.toPremultipliedRenderColor(null),F.toPremultipliedRenderColor(null));M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_CUBE_MAP_POSITIVE_X+O,l.skyboxTexture,0),d.draw(_,M.TRIANGLES,On.disabled,qn.disabled,Gn.unblended,jn.frontCW,H,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const Os=a.ei([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Pf{constructor(l){const d=new a.ep;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const v=new a.b0;v.emplaceBack(0,1,2),v.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(d,Os.members),this.indexBuffer=l.createIndexBuffer(v),this.segments=a.bg.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const F0=a.ei([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class B0{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class K_{constructor(l){this.colorModeAlphaBlendedWriteRGB=new Gn([1,ch,1,ch],a.ao.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Gn([1,0,1,0],a.ao.transparent,[!1,!1,!1,!0]),this.params=new B0,this.updateNeeded=!0}update(l){const d=l.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Pf(d);const v=this.params.sizeRange,T=this.params.intensityRange,O=(function(H){const re=a.eq(30),ee=[];for(let oe=0;oe<H;++oe){const he=2*Math.PI*re(),ce=Math.acos(1-2*re())-.5*Math.PI;ee.push(a.d5(Math.cos(ce)*Math.cos(he),Math.cos(ce)*Math.sin(he),Math.sin(ce)))}return ee})(this.params.starsCount),M=a.eq(300),R=new a.er,F=new a.b0;let q=0;for(let H=0;H<O.length;++H){const re=a.c5([],O[H],200),ee=Math.max(0,1+.01*v*(1*M()-.5)),oe=Math.max(0,1+.01*T*(1*M()-.5));R.emplaceBack(re[0],re[1],re[2],-1,-1,ee,oe),R.emplaceBack(re[0],re[1],re[2],1,-1,ee,oe),R.emplaceBack(re[0],re[1],re[2],1,1,ee,oe),R.emplaceBack(re[0],re[1],re[2],-1,1,ee,oe),F.emplaceBack(q+0,q+1,q+2),F.emplaceBack(q+0,q+2,q+3),q+=4}this.starsVx=d.createVertexBuffer(R,F0.members),this.starsIdx=d.createIndexBuffer(F),this.starsSegments=a.bg.simpleSegment(0,0,R.length,F.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(l,d){const v=l.context,T=v.gl,O=l.transform,M=new On(T.LEQUAL,On.ReadOnly,[0,1]),R=a.aj(O.zoom),F=l.style.getLut(d.scope),q=d.properties.get("color-use-theme")==="none",H=d.properties.get("color").toNonPremultipliedRenderColor(q?null:F),re=d.properties.get("high-color-use-theme")==="none",ee=d.properties.get("high-color").toNonPremultipliedRenderColor(re?null:F),oe=d.properties.get("space-color-use-theme")==="none",he=d.properties.get("space-color").toNonPremultipliedRenderColor(oe?null:F),ce=5e-4,de=a.es(d.properties.get("horizon-blend"),0,1,ce,.25),_e=a.dE(l,v,O)&&de===ce?O.worldSize/(2*Math.PI*1.025)-1:O.globeRadius,Me=l.frameCounter/1e3%1,Ce=a.ag(O.globeCenterInViewSpace),Ae=Math.sqrt(Math.pow(Ce,2)-Math.pow(_e,2)),We=Math.acos(Ae/Ce),$e=Ge=>{const Ne=O.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];Ge&&Ne.push("ALPHA_PASS");const Re=l.getOrCreateProgram("globeAtmosphere",{defines:Ne}),Je=((st,dt,ft,wt,It,pt,et,At,gt,Dt,qt,tn)=>({u_frustum_tl:st,u_frustum_tr:dt,u_frustum_br:ft,u_frustum_bl:wt,u_horizon:It,u_transition:pt,u_fadeout_range:et,u_atmosphere_fog_color:At.toArray01(),u_high_color:gt.toArray01(),u_space_color:Dt.toArray01(),u_temporal_offset:qt,u_horizon_angle:tn}))(O.frustumCorners.TL,O.frustumCorners.TR,O.frustumCorners.BR,O.frustumCorners.BL,O.frustumCorners.horizon,R,de,H,ee,he,Me,We);l.uploadCommonUniforms(v,Re);const nt=this.atmosphereBuffer;nt&&Re.draw(l,T.TRIANGLES,M,qn.disabled,Ge?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,jn.backCW,Je,Ge?"atmosphere_glow_alpha":"atmosphere_glow",nt.vertexBuffer,nt.indexBuffer,nt.segments)};$e(!1),$e(!0)}drawStars(l,d){const v=a.aA(d.properties.get("star-intensity"),0,1);if(v===0)return;const T=l.context,O=T.gl,M=l.transform,R=l.getOrCreateProgram("stars"),F=a.c7([]);a.c9(F,F,-M._pitch),a.c8(F,F,-M.angle),a.c9(F,F,a.an(M._center.lat)),a.et(F,F,-a.an(M._center.lng));const q=a.cc(new Float32Array(16),F),H=a.aB([],M.starsProjMatrix,q),re=a.eo([],q),ee=a.eu([],re),oe=[0,1,0];a.dQ(oe,oe,ee),a.c5(oe,oe,this.params.sizeMultiplier);const he=[1,0,0];a.dQ(he,he,ee),a.c5(he,he,this.params.sizeMultiplier);const ce=(de=oe,_e=he,Me=v,{u_matrix:Float32Array.from(H),u_up:de,u_right:_e,u_intensity_multiplier:Me});var de,_e,Me;l.uploadCommonUniforms(T,R),this.starsVx&&this.starsIdx&&R.draw(l,O.TRIANGLES,On.disabled,qn.disabled,this.colorModeAlphaBlendedWriteRGB,jn.disabled,ce,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}class Th{constructor(){this.visibleTiles=[]}updateBorders(l,d){const v=[],T=[],O=l._getRenderableCoordinates(!1,!0);for(const F of O){const q=l.getTile(F);if(!q.hasData())continue;const H=q.getBucket(d);H&&(H.isEmpty()||(v.push(F.key),T.push({bucket:H,tileID:F.canonical})))}let M=v.length!==this.visibleTiles.length;if(!M){v.sort();for(let F=0;F<v.length;F++)if(v[F]!==this.visibleTiles[F]){M=!0;break}}if(!M)return;const R=new Set;this.visibleTiles=v,T.sort((F,q)=>F.tileID.z-q.tileID.z||F.tileID.x-q.tileID.x||F.tileID.y-q.tileID.y);for(const F of T){const q=new Array,H=new Array,re=F.bucket;for(const ee of re.featuresOnBorder)R.has(ee.featureId)?H.push(ee.footprintIndex):(R.add(ee.featureId),q.push(ee.footprintIndex));re.updateFootprintHiddenFlags(q,a.ev,!1),re.updateFootprintHiddenFlags(H,a.ev,!0)}}}function Q_(_,l){const d=[..._],v=l.cameraWorldSizeForFog/l.worldSize,T=a.bA([]);return a.cS(T,T,[v,v,1]),a.aB(d,T,d),a.aB(d,l.worldToFogMatrix,d),d}function Ol(_,l,d,v,T){const O=d.material,M=v.context,{baseColorTexture:R,metallicRoughnessTexture:F}=O.pbrMetallicRoughness,{normalTexture:q,occlusionTexture:H,emissionTexture:re}=O;function ee(he,ce,de){if(he&&(_.push(ce),M.activeTexture.set(M.gl.TEXTURE0+de),he.gfxTexture)){const{minFilter:_e,magFilter:Me,wrapS:Ce,wrapT:Ae}=he.sampler;he.gfxTexture.bindExtraParam(_e,Me,Ce,Ae)}}ee(R,"HAS_TEXTURE_u_baseColorTexture",5),ee(F,"HAS_TEXTURE_u_metallicRoughnessTexture",6),ee(q,"HAS_TEXTURE_u_normalTexture",7),ee(H,"HAS_TEXTURE_u_occlusionTexture",8),ee(re,"HAS_TEXTURE_u_emissionTexture",9),T&&(T.texture||(T.texture=new a.d$(v.context,T.image,[T.image.height,T.image.height,T.image.height],M.gl.RGBA8)),M.activeTexture.set(M.gl.TEXTURE0+10),T.texture&&T.texture.bind(M.gl.LINEAR,M.gl.CLAMP_TO_EDGE),_.push("APPLY_LUT_ON_GPU")),d.texcoordBuffer&&(_.push("HAS_ATTRIBUTE_a_uv_2f"),l.push(d.texcoordBuffer)),d.colorBuffer&&(_.push(d.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),l.push(d.colorBuffer)),d.normalBuffer&&(_.push("HAS_ATTRIBUTE_a_normal_3f"),l.push(d.normalBuffer)),d.pbrBuffer&&(_.push("HAS_ATTRIBUTE_a_pbr"),_.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),l.push(d.pbrBuffer)),O.alphaMode!=="OPAQUE"&&O.alphaMode!=="MASK"||_.push("UNPREMULT_TEXTURE_IN_SHADER"),O.defined||_.push("DIFFUSE_SHADED");const oe=v.shadowRenderer;oe&&(_.push("RENDER_SHADOWS","DEPTH_TEXTURE"),oe.useNormalOffset&&_.push("NORMAL_OFFSET"))}function Jr(_,l,d,v,T,O){const M=_.modelOpacity,R=l.context,F=new On(l.context.gl.LEQUAL,_.isLightMesh?On.ReadOnly:On.ReadWrite,l.depthRangeFor3D),q=l.transform,H=_.mesh,re=H.material,ee=re.pbrMetallicRoughness,oe=l.style.fog;let he;he=l.transform.projection.zAxisUnit==="pixels"?[..._.nodeModelMatrix]:a.aB([],v.zScaleMatrix,_.nodeModelMatrix),a.aB(he,v.negCameraPosMatrix,he);const ce=a.bl([],he);a.eg(ce,ce);const de=d.paint.get("model-color-use-theme").constantOr("default")==="none",_e=d.paint.get("model-emissive-strength").constantOr(0),Me=Wu(new Float32Array(_.worldViewProjection),new Float32Array(he),new Float32Array(ce),null,l,M,ee.baseColorFactor,re.emissiveFactor,ee.metallicFactor,ee.roughnessFactor,re,_e,d,void 0,void 0,_.materialOverride,_.modelColor),Ce={defines:[]},Ae=[],We=l.shadowRenderer;We&&(We.useNormalOffset=!1),Ol(Ce.defines,Ae,H,l,de?null:d.lut);let $e=null;if(oe){const Re=Q_(_.nodeModelMatrix,l.transform);if($e=new Float32Array(Re),q.projection.name!=="globe"){const Je=H.aabb.min,nt=H.aabb.max,[st,dt]=oe.getOpacityForBounds(Re,Je[0],Je[1],nt[0],nt[1]);Ce.overrideFog=st>=hn||dt>=hn}}const Ge=$l(l,d.paint.get("model-cutoff-fade-range"));Ge.shouldRenderCutoff&&Ce.defines.push("RENDER_CUTOFF");const Ne=l.getOrCreateProgram("model",Ce);l.uploadCommonUniforms(R,Ne,null,$e,Ge),l.renderPass!=="shadow"&&We&&We.setupShadowsFromMatrix(_.nodeModelMatrix,Ne),Ne.draw(l,R.gl.TRIANGLES,F,T,O,H.material.doubleSided?jn.disabled:jn.backCCW,Me,d.id,H.vertexBuffer,H.indexBuffer,H.segments,d.paint,l.transform.zoom,void 0,Ae)}function lm(_,l){return _.style._importedAsBasemap?"basemap":l.scope}function Bd(_,l,d,v,T,O,M,R,F,q){const H=_.transform,re=!!l.isGeometryBloom&&l.isGeometryBloom;if(re&&_.renderPass==="shadow")return;const ee=H.projection.name==="globe"?a.eD(d,H):[...d];a.aB(ee,ee,l.globalMatrix);const oe=a.aB([],v,ee);if(l.meshes)for(const he of l.meshes){const ce=R.get(he.material.name);if(ce&&ce.opacity<=0)continue;if(he.material.alphaMode!=="BLEND"){M.push({mesh:he,depth:0,modelIndex:T,worldViewProjection:oe,nodeModelMatrix:ee,isLightMesh:re,materialOverride:ce,modelOpacity:F,modelColor:q});continue}const de=a.af([],he.centroid,oe);!H.isOrthographic&&de[2]<=0||O.push({mesh:he,depth:de[2],modelIndex:T,worldViewProjection:oe,nodeModelMatrix:ee,isLightMesh:re,materialOverride:ce,modelOpacity:F,modelColor:q})}if(l.children)for(const he of l.children)Bd(_,he,d,v,T,O,M,R,F,q)}function um(_,l,d,v){const T=d.shadowRenderer;if(!T)return;const O=T.getShadowPassDepthMode(),M=T.getShadowPassColorMode(),R=T.calculateShadowPassMatrixFromMatrix(l),F=Ld(R);d.getOrCreateProgram("modelDepth",{defines:d._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(d,d.context.gl.TRIANGLES,O,qn.disabled,M,jn.disabled,F,v.id,_.vertexBuffer,_.indexBuffer,_.segments,v.paint,d.transform.zoom,void 0,void 0)}function j0(_,l,d,v,T,O){for(const M of T){const R=Object.assign({},v);R.part=M;const F={type:"Unknown",id:l,properties:R},q={orientation:_.paint.get("model-rotation").evaluate(F,d)};O.set(M,q)}}function U0(_,l,d,v,T,O){for(const M of T){const R=Object.assign({},v);R.part=M;const F={type:"Unknown",id:l,properties:R},q={color:_.paint.get("model-color").evaluate(F,d),colorMix:_.paint.get("model-color-mix-intensity").evaluate(F,d),opacity:_.paint.get("model-opacity").evaluate(F,d),emissionStrength:_.paint.get("model-emissive-strength").evaluate(F,d)};O.set(M,q)}}function J_(_,l,d,v,T){let O=!1;for(const R of v)R.modelOpacity!==1&&(Jr(R,_,l,T[R.modelIndex],qn.disabled,Gn.disabled),O=!0);for(const R of v)Jr(R,_,l,T[R.modelIndex],R.modelOpacity!==1?_.stencilModeFor3D():qn.disabled,_.colorModeForRenderPass());O&&_.resetStencilClippingMasks();const M=Gn.additive;for(const R of d)Jr(R,_,l,T[R.modelIndex],qn.disabled,R.isLightMesh?M:_.colorModeForRenderPass())}function Eh(_,l,d){const v=l.updateZoomBasedPaintProperties(),T=(function(O,M,R){let F,q,H,re=O.terrain?O.terrain.exaggeration():0;if(O.terrain&&re>0){const ee=O.terrain,oe=ee.findDEMTileFor(R);oe&&oe.dem?F=a.eF.create(ee,R,oe):re=0}if(re===0&&(M.terrainElevationMin=0,M.terrainElevationMax=0),re===M.validForExaggeration&&(re===0||F&&F._demTile&&F._demTile.tileID===M.validForDEMTile.id&&F._dem._timestamp===M.validForDEMTile.timestamp))return!1;for(const ee in M.instancesPerModel){const oe=M.instancesPerModel[ee];for(let he=0;he<oe.instancedDataArray.length;++he){const ce=(F?re*F.getElevationAt(0|oe.instancedDataArray.float32[16*he],0|oe.instancedDataArray.float32[16*he+1],!0,!0):0)+oe.instancesEvaluatedElevation[he];oe.instancedDataArray.float32[16*he+6]=ce,q=q?Math.min(M.terrainElevationMin,ce):ce,H=H?Math.max(M.terrainElevationMax,ce):ce}}return M.terrainElevationMin=q||0,M.terrainElevationMax=H||0,M.validForExaggeration=re,M.validForDEMTile=F&&F._demTile?{id:F._demTile.tileID,timestamp:F._dem._timestamp}:{id:void 0,timestamp:0},!0})(_,l,d);(v||T)&&(l.uploaded=!1,l.upload(_.context))}const Cs={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new a.d9([0,0,0],[a.al,a.al,0])};function Xt(_,l){const d=1<<_.canonical.z,v=l.getFreeCameraOptions().position,T=l.elevation,O=_.canonical.x/d,M=(_.canonical.x+1)/d,R=_.canonical.y/d,F=(_.canonical.y+1)/d;let q=l._centerAltitude;if(T){const oe=T.getMinMaxForTile(_);oe&&oe.max>q&&(q=oe.max)}const H=a.aA(v.x,O,M)-v.x,re=a.aA(v.y,R,F)-v.y,ee=a.cf(q,l.center.lat)-v.z;return l._zoomFromMercatorZ(Math.sqrt(H*H+re*re+ee*ee))}function on(_,l,d,v,T,O,M){const R=_.context,F=_.renderPass==="shadow",q=_.shadowRenderer,H=F&&q?q.getShadowPassDepthMode():new On(R.gl.LEQUAL,On.ReadWrite,_.depthRangeFor3D),re=_.isTileAffectedByFog(O),ee=_.transform.projection.name==="globe";if(d.meshes)for(const oe of d.meshes){const he=ee?[]:["MODEL_POSITION_ON_GPU"],ce=[];let de,_e,Me;const Ce=!ee&&v.instancedDataArray.length>20;Ce&&he.push("INSTANCED_ARRAYS");const Ae=$l(_,l.paint.get("model-cutoff-fade-range"));if(Ae.shouldRenderCutoff&&he.push("RENDER_CUTOFF"),F&&q)de=_.getOrCreateProgram("modelDepth",{defines:he}),_e=Ld(M.shadowTileMatrix,M.shadowTileMatrix,Float32Array.from(d.globalMatrix)),Me=q.getShadowPassColorMode();else{Ol(he,ce,oe,_,l.paint.get("model-color-use-theme").constantOr("default")==="none"?null:l.lut),de=_.getOrCreateProgram("model",{defines:he,overrideFog:re});const $e=oe.material,Ge=$e.pbrMetallicRoughness,Ne=l.paint.get("model-opacity").constantOr(1),Re=l.paint.get("model-emissive-strength").constantOr(0);_e=Wu(O.expandedProjMatrix,Float32Array.from(d.globalMatrix),new Float32Array(16),null,_,Ne,Ge.baseColorFactor,$e.emissiveFactor,Ge.metallicFactor,Ge.roughnessFactor,$e,Re,l,T),q&&(M.shadowUniformsInitialized?de.setShadowUniformValues(R,q.getShadowUniformValues()):(q.setupShadows(O.toUnwrapped(),de,"model-tile"),M.shadowUniformsInitialized=!0)),Me=Ae.shouldRenderCutoff||Ne<1||$e.alphaMode!=="OPAQUE"?Gn.alphaBlended:Gn.unblended}_.uploadCommonUniforms(R,de,O.toUnwrapped(),null,Ae);const We=oe.material.doubleSided?jn.disabled:jn.backCCW;if(Ce)ce.push(v.instancedDataBuffer),de.draw(_,R.gl.TRIANGLES,H,qn.disabled,Me,We,_e,l.id,oe.vertexBuffer,oe.indexBuffer,oe.segments,l.paint,_.transform.zoom,void 0,ce,v.instancedDataArray.length);else{const $e=F?"u_instance":"u_normal_matrix";for(let Ge=0;Ge<v.instancedDataArray.length;++Ge)_e[$e]=new Float32Array(v.instancedDataArray.arrayBuffer,64*Ge,16),de.draw(_,R.gl.TRIANGLES,H,qn.disabled,Me,We,_e,l.id,oe.vertexBuffer,oe.indexBuffer,oe.segments,l.paint,_.transform.zoom,void 0,ce)}}if(d.children)for(const oe of d.children)on(_,l,oe,v,T,O,M)}const jd=[1,-1,1];function Ui(_,l,d,v){if(!d.modelManager)return!0;const T=d.modelManager;if(!d.shadowRenderer)return!0;const O=d.shadowRenderer,M=l.aabb;let R=!0,F=_.maxHeight;if(F===0){let H=0;for(const re in _.instancesPerModel){const ee=T.getModel(re,v);ee?H=Math.max(H,Math.max(Math.max(ee.aabb.max[0],ee.aabb.max[1]),ee.aabb.max[2])):R=!1}F=_.maxScale*H*1.41+_.maxVerticalOffset,R&&(_.maxHeight=F)}M.max[2]=F,M.min[2]+=_.terrainElevationMin,M.max[2]+=_.terrainElevationMax,a.af(M.min,M.min,l.tileMatrix),a.af(M.max,M.max,l.tileMatrix);const q=M.intersects(O.getCurrentCascadeFrustum());return d.currentShadowCascade===0&&(_.isInsideFirstShadowMapFrustum=q===2),q===0}function ht(_,l){const d=_.uniformValues.u_cutoff_params[0],v=_.uniformValues.u_cutoff_params[1],T=_.uniformValues.u_cutoff_params[2],O=_.uniformValues.u_cutoff_params[3];return v===d||O===T?1:a.aA(((l-d)/(v-d)-T)/(O-T),0,1)}function $0(_,l,d,v){if(l.pitch<20)return 1;const T=l.getWorldToCameraMatrix();a.aB(T,T,_);const O=a.bU(d.min[0],d.min[1],d.min[2],1);let M=a.aC(a.eG(),O,T),R=M,F=M;O[1]=d.max[1],M=a.aC(a.eG(),O,T),R=M[1]<R[1]?M:R,F=M[1]>F[1]?M:F,O[0]=d.max[0],M=a.aC(a.eG(),O,T),R=M[1]<R[1]?M:R,F=M[1]>F[1]?M:F,O[1]=d.min[1],M=a.aC(a.eG(),O,T),R=M[1]<R[1]?M:R,F=M[1]>F[1]?M:F;const q=a.aA(v[0],0,1),H=100*l.pixelsPerMeter*a.aA(v[1],0,1),re=a.aA(v[2],0,1),ee=a.eH(a.eG(),R,F,q),oe=Math.tan(.5*l.fovX),he=-ee[2]*oe;if(H===0)return ee[1]<-Math.abs(he)?re:1;const ce=(-Math.abs(he)-ee[1])/H,de=(Me,Ce,Ae)=>(1-Ae)*Me+Ae*Ce,_e=a.aA(de(1,re,ce),re,1);return de(1,_e,a.aA((l.pitch-20)/20,0,1))}class ev{}class Kg{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(l,d,v){{const re=this._storage.get(d.id);if(re)return re.lastUsedFrameIdx=l,re.buf}const T=v.gl,O=T.getBufferParameter(T.ELEMENT_ARRAY_BUFFER,T.BUFFER_SIZE),M=new ArrayBuffer(O),R=new Int16Array(M);T.getBufferSubData(T.ELEMENT_ARRAY_BUFFER,0,new Int16Array(M));const F=new a.eJ;for(let re=0;re<O/2;re+=3){const ee=R[re],oe=R[re+1],he=R[re+2];F.emplaceBack(ee,oe),F.emplaceBack(oe,he),F.emplaceBack(he,ee)}const q=v.bindVertexArrayOES.current,H=new ev;return H.buf=new As(v,F),H.lastUsedFrameIdx=l,this._storage.set(d.id,H),v.bindVertexArrayOES.set(q),H.buf}update(l){for(const[d,v]of this._storage)l-v.lastUsedFrameIdx>30&&(v.buf.destroy(),this._storage.delete(d))}destroy(){for(const[l,d]of this._storage)d.buf.destroy(),this._storage.delete(l)}}class tv{constructor(){this.occluderSize=30,this.depthOffset=-1e-4}}const V0=a.ei([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class Qg{constructor(l){this.revealStart=11,this.revealRange=2}}const Ud=a.ei([{type:"Float32",name:"a_pos_2f",components:2}]);class d1{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(l,d){const v=l.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const M=new a.eK,R=new a.b0;M.emplaceBack(-1,-1),M.emplaceBack(1,-1),M.emplaceBack(1,1),M.emplaceBack(-1,1),R.emplaceBack(0,1,2),R.emplaceBack(0,2,3),this.vignetteVx=l.context.createVertexBuffer(M,Ud.members),this.vignetteIdx=l.context.createIndexBuffer(R)}const T=a.bg.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){l.uploadCommonUniforms(l.context,v);const M={u_vignetteShape:(O={vignetteShape:[d.start,d.range,Math.pow(10,d.fadePower)],vignetteColor:[d.color.r,d.color.g,d.color.b,d.color.a*d.strength]}).vignetteShape,u_vignetteColor:O.vignetteColor};v.draw(l,l.context.gl.TRIANGLES,On.disabled,qn.disabled,Gn.alphaBlended,jn.disabled,M,"vignette",this.vignetteVx,this.vignetteIdx,T)}var O}}class yT{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(l,d){const v=l.getFreeCameraOptions().position,T=v.toAltitude(),O=v.toLngLat(),M=a.an(O.lng),R=a.an(O.lat),F=l.pixelsPerMeter/d,q=M*a.eM,H=a.eM*Math.log(Math.tan(Math.PI/4+R/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const re=-this._offsetYPrev+H,ee=-this._elevationPrev+T;this._accumulatedOffsetX+=(-this._offsetXPrev+q)*F,this._accumulatedOffsetY+=re*F,this._accumulatedElevation+=ee*F,this._offsetXPrev=q,this._offsetYPrev=H,this._elevationPrev=T}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function q0(_,l){return[-(_[0]-Math.floor(_[0]/l)*l),-(_[1]-Math.floor(_[1]/l)*l),-(_[2]-Math.floor(_[2]/l)*l)]}function cm(_){const l=a.eq(1323123451230),d=[];for(let v=0;v<_;++v){const T=2*l()-1,O=2*l()-1,M=2*l()-1;d.push(a.d5(T,O,M))}return d}function Cl(_,l,d,v,T){const O=a.aA((T-d)/(v-d),0,1);return(1-O)*_+O*l}class Jg{constructor(l){this._movement=new yT,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new d1,this._ppmScaleFactor=l}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(l,d){const v=l.transform;this._movement.update(v,this._ppmScaleFactor);const T=v.starsProjMatrix,O=a.c7([]);a.c9(O,O,a.an(90)-v._pitch),a.c8(O,O,-v.angle);const M=a.cc(new Float32Array(16),O),R=a.eL(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),F=a.eg([],R),q=a.aB([],F,M),H=Date.now()/1e3;return this._accumulatedTimeFromStart+=(H-this._prevTime)*d,this._prevTime=H,{projectionMatrix:T,modelviewMatrix:q}}}class ey extends Jg{constructor(l){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new Qg("Precipitation > Rain"),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(l){const d=l.context;if(!this.particlesVx){const v=cm(this.particlesCount),T=new a.eN,O=new a.b0;let M=0;const R=a.eq(1323123451230);for(let F=0;F<v.length;++F){const q=v[F],H=[2*R()-1,R(),R(),R()];T.emplaceBack(q[0],q[1],q[2],-1,-1,...H),T.emplaceBack(q[0],q[1],q[2],1,-1,...H),T.emplaceBack(q[0],q[1],q[2],1,1,...H),T.emplaceBack(q[0],q[1],q[2],-1,1,...H),O.emplaceBack(M+0,M+1,M+2),O.emplaceBack(M+0,M+2,M+3),M+=4}this.particlesVx=d.createVertexBuffer(T,V0.members),this.particlesIdx=d.createIndexBuffer(O)}}draw(l){if(!this._params.overrideStyleParameters&&!l.style.rain)return;const d=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},v=l.transform.zoom;if(d.revealStart>v)return;const T=Cl(0,1,d.revealStart,d.revealStart+d.revealRange,v);if(!this.particlesVx||!this.particlesIdx)return;const O=structuredClone(this._params);let M=[-O.direction.x,O.direction.y,-100];a.aw(M,M);const R=structuredClone(this._vignetteParams);R.strength*=T,O.overrideStyleParameters||(O.intensity=l.style.rain.state.density,O.timeFactor=l.style.rain.state.intensity,O.color=structuredClone(l.style.rain.state.color),M=structuredClone(l.style.rain.state.direction),O.screenThinning.intensity=l.style.rain.state.centerThinning,O.dropletSizeX=l.style.rain.state.dropletSize[0],O.dropletSizeYScale=l.style.rain.state.dropletSize[1]/l.style.rain.state.dropletSize[0],O.distortionStrength=100*l.style.rain.state.distortionStrength,R.strength=1,R.color=structuredClone(l.style.rain.state.vignetteColor));const F=this.updateOnRender(l,O.timeFactor),q=l.context,H=q.gl,re=l.transform;this.screenTexture&&this.screenTexture.size[0]===l.width&&this.screenTexture.size[1]===l.height||(this.screenTexture=new a.T(q,{width:l.width,height:l.height,data:null},H.RGBA8)),O.distortionStrength>0&&(q.activeTexture.set(H.TEXTURE0),this.screenTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),H.copyTexSubImage2D(H.TEXTURE_2D,0,0,0,0,0,l.width,l.height));const ee=l.getOrCreateProgram("rainParticle");l.uploadCommonUniforms(q,ee),q.activeTexture.set(H.TEXTURE0),this.screenTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE);const oe=[O.color.r,O.color.g,O.color.b,O.color.a],he=(ce,de)=>{const _e=q0(this._movement.getPosition(),ce),Me=O.dropletSizeX,Ce=O.dropletSizeX*O.dropletSizeYScale,Ae=l.width/2,We=l.height/2,$e=Cl(0,O.screenThinning.start,0,1,O.screenThinning.intensity),Ge=Cl(.001,O.screenThinning.range,0,1,O.screenThinning.intensity),Ne=Cl(0,O.screenThinning.particleOffset,0,1,O.screenThinning.intensity),Re=(Je={modelview:F.modelviewMatrix,projection:F.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:_e,velocityConeAperture:O.velocityConeAperture,velocity:O.velocity,boxSize:ce,rainDropletSize:[Me,Ce],distortionStrength:O.distortionStrength,rainDirection:M,color:oe,screenSize:[re.width,re.height],thinningCenterPos:[Ae,We],thinningShape:[$e,Ge,Math.pow(10,O.screenThinning.fadePower)],thinningAffectedRatio:O.screenThinning.affectedRatio,thinningParticleOffset:Ne,shapeDirectionalPower:O.shapeDirPower,shapeNormalPower:O.shapeNormalPower,mode:de?0:1},{u_modelview:Float32Array.from(Je.modelview),u_projection:Float32Array.from(Je.projection),u_time:Je.time,u_cam_pos:Je.camPos,u_texScreen:0,u_velocityConeAperture:Je.velocityConeAperture,u_velocity:Je.velocity,u_boxSize:Je.boxSize,u_rainDropletSize:Je.rainDropletSize,u_distortionStrength:Je.distortionStrength,u_rainDirection:Je.rainDirection,u_color:Je.color,u_screenSize:Je.screenSize,u_thinningCenterPos:Je.thinningCenterPos,u_thinningShape:Je.thinningShape,u_thinningAffectedRatio:Je.thinningAffectedRatio,u_thinningParticleOffset:Je.thinningParticleOffset,u_shapeDirectionalPower:Je.shapeDirectionalPower,u_shapeNormalPower:Je.shapeNormalPower,u_mode:Je.mode});var Je;const nt=Math.round(O.intensity*this.particlesCount),st=a.bg.simpleSegment(0,0,4*nt,2*nt);ee.draw(l,H.TRIANGLES,On.disabled,qn.disabled,Gn.alphaBlended,jn.disabled,Re,"rain_particles",this.particlesVx,this.particlesIdx,st)};O.distortionStrength>0&&he(O.boxSize,!0),he(O.boxSize,!1),this._vignette.draw(l,R)}}const ty=a.ei([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class fm extends Jg{constructor(l){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new Qg("Precipitation > Snow"),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(l){const d=l.context;if(!this.particlesVx){const v=cm(this.particlesCount),T=new a.eO,O=new a.b0;let M=0;const R=a.eq(1323123451230);for(let F=0;F<v.length;++F){const q=v[F],H=R(),re=R(),ee=R(),oe=[F/v.length,H,re,ee],he=[R(),R()];T.emplaceBack(q[0],q[1],q[2],-1,-1,...oe,...he),T.emplaceBack(q[0],q[1],q[2],1,-1,...oe,...he),T.emplaceBack(q[0],q[1],q[2],1,1,...oe,...he),T.emplaceBack(q[0],q[1],q[2],-1,1,...oe,...he),O.emplaceBack(M+0,M+1,M+2),O.emplaceBack(M+0,M+2,M+3),M+=4}this.particlesVx=d.createVertexBuffer(T,ty.members),this.particlesIdx=d.createIndexBuffer(O)}}draw(l){if(!this._params.overrideStyleParameters&&!l.style.snow)return;const d=structuredClone(this._params);let v=[-d.direction.x,d.direction.y,-100];a.aw(v,v);const T=structuredClone(this._vignetteParams),O=d.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},M=l.transform.zoom;if(O.revealStart>M)return;const R=Cl(0,1,O.revealStart,O.revealStart+O.revealRange,M);T.strength*=R,d.overrideStyleParameters||(d.intensity=l.style.snow.state.density,d.timeFactor=l.style.snow.state.intensity,d.color=structuredClone(l.style.snow.state.color),v=structuredClone(l.style.snow.state.direction),d.screenThinning.intensity=l.style.snow.state.centerThinning,d.billboardSize=2.79*l.style.snow.state.flakeSize,T.strength=1,T.color=structuredClone(l.style.snow.state.vignetteColor));const F=this.updateOnRender(l,d.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const q=l.context,H=q.gl,re=l.transform,ee=l.getOrCreateProgram("snowParticle");l.uploadCommonUniforms(q,ee),((oe,he,ce)=>{const de=q0(this._movement.getPosition(),oe),_e=re.width/2,Me=re.height/2,Ce=Cl(0,ce.screenThinning.start,0,1,ce.screenThinning.intensity),Ae=Cl(.001,ce.screenThinning.range,0,1,ce.screenThinning.intensity),We=Cl(0,ce.screenThinning.particleOffset,0,1,ce.screenThinning.intensity),$e=(Ge={modelview:F.modelviewMatrix,projection:F.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:de,velocityConeAperture:ce.velocityConeAperture,velocity:ce.velocity,horizontalOscillationRadius:ce.horizontalOscillationRadius,horizontalOscillationRate:ce.horizontalOscillationRate,boxSize:oe,billboardSize:1*ce.billboardSize,simpleShapeParameters:[ce.shapeFadeStart,ce.shapeFadePower],screenSize:[re.width,re.height],thinningCenterPos:[_e,Me],thinningShape:[Ce,Ae,Math.pow(10,ce.screenThinning.fadePower)],thinningAffectedRatio:ce.screenThinning.affectedRatio,thinningParticleOffset:We,color:[ce.color.r,ce.color.g,ce.color.b,ce.color.a],direction:v},{u_modelview:Float32Array.from(Ge.modelview),u_projection:Float32Array.from(Ge.projection),u_time:Ge.time,u_cam_pos:Ge.camPos,u_velocityConeAperture:Ge.velocityConeAperture,u_velocity:Ge.velocity,u_horizontalOscillationRadius:Ge.horizontalOscillationRadius,u_horizontalOscillationRate:Ge.horizontalOscillationRate,u_boxSize:Ge.boxSize,u_billboardSize:Ge.billboardSize,u_simpleShapeParameters:Ge.simpleShapeParameters,u_screenSize:Ge.screenSize,u_thinningCenterPos:Ge.thinningCenterPos,u_thinningShape:Ge.thinningShape,u_thinningAffectedRatio:Ge.thinningAffectedRatio,u_thinningParticleOffset:Ge.thinningParticleOffset,u_particleColor:Ge.color,u_direction:Ge.direction});var Ge;const Ne=Math.round(ce.intensity*this.particlesCount),Re=a.bg.simpleSegment(0,0,4*Ne,2*Ne);this.particlesVx&&this.particlesIdx&&ee.draw(l,H.TRIANGLES,On.disabled,qn.disabled,Gn.alphaBlended,jn.disabled,$e,"snow_particles",this.particlesVx,this.particlesIdx,Re)})(d.boxSize,0,d),this._vignette.draw(l,T)}}const Ku={symbol:function(_,l,d,v,T){if(_.renderPass!=="translucent")return;const O=qn.disabled,M=_.colorModeForRenderPass(),R=d.layout.get("text-variable-anchor"),F=d.layout.get("text-size-scale-range"),q=a.aA(_.scaleFactor,F[0],F[1]);R&&(function(ee,oe,he,ce,de,_e,Me,Ce){const Ae=oe.transform,We=de==="map",$e=_e==="map";for(const Ge of ee){const Ne=ce.getTile(Ge),Re=Ne.getBucket(he);if(!Re||!Re.text||!Re.text.segments.get().length)continue;const Je=a.bK(Re.textSizeData,Ae.zoom,Ce),nt=Oc(Ge,Re.getProjection(),Ae),st=Ae.calculatePixelsToTileUnitsMatrix(Ne),dt=yd(nt,Ne.tileID.canonical,$e,We,Ae,Re.getProjection(),st),ft=Re.hasIconTextFit()&&Re.hasIconData();Je&&vh(Re,We,$e,Me,Ae,dt,Ge,Math.pow(2,Ae.zoom-Ne.tileID.overscaledZ),Je,ft)}})(v,_,d,l,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),T,q);const H=d.paint.get("icon-opacity").constantOr(1)!==0,re=d.paint.get("text-opacity").constantOr(1)!==0;d.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(H||re)?Nd(_,l,d,v,O,M):(H&&Nd(_,l,d,v,O,M,{onlyIcons:!0}),re&&Nd(_,l,d,v,O,M,{onlyText:!0})),l.map.showCollisionBoxes&&(ua(_,l,d,v,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),ua(_,l,d,v,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(_,l,d,v){if(_.renderPass!=="translucent")return;const T=d.paint.get("circle-opacity"),O=d.paint.get("circle-stroke-width"),M=d.paint.get("circle-stroke-opacity"),R=d.layout.get("circle-sort-key").constantOr(1)!==void 0,F=d.paint.get("circle-emissive-strength");if(T.constantOr(1)===0&&(O.constantOr(1)===0||M.constantOr(1)===0))return;const q=_.context,H=q.gl,re=_.transform,ee=!(!_.terrain||!_.terrain.enabled),oe=d.layout.get("circle-elevation-reference"),he=_.depthModeForSublayer(0,On.ReadOnly),ce=new On(_.context.gl.LEQUAL,On.ReadOnly,_.depthRangeFor3D),de=oe==="none"||ee?he:ce,_e=qn.disabled,Me=_.colorModeForDrapableLayerRenderPass(F),Ce=re.projection.name==="globe",Ae=[a.aF(re.center.lng),a.aJ(re.center.lat)],We=[];for(let Ge=0;Ge<v.length;Ge++){const Ne=v[Ge],Re=l.getTile(Ne),Je=Re.getBucket(d);if(!Je||Je.projection.name!==re.projection.name)continue;const nt=Je.programConfigurations.get(d.id),st=Je.layoutVertexBuffer,dt=Je.globeExtVertexBuffer,ft=Je.indexBuffer,wt=a.e0(d),It=[dt],pt=_.isTileAffectedByFog(Ne);Ce&&wt.push("PROJECTION_GLOBE_VIEW"),wt.push("DEPTH_D24"),_.terrain&&re.depthOcclusionForSymbolsAndCircles&&wt.push("DEPTH_OCCLUSION"),Je.hasElevation&&!_.terrain&&(wt.push("ELEVATED_ROADS"),It.push(Je.elevatedLayoutVertexBuffer));const et=_.getOrCreateProgram("circle",{config:nt,defines:wt,overrideFog:pt}),At=re.projection.createInversionMatrix(re,Ne.canonical),gt={programConfiguration:nt,program:et,layoutVertexBuffer:st,dynamicBuffers:It,indexBuffer:ft,uniformValues:a.e1(_,Ne,Re,At,Ae,d),tile:Re};if(R){const Dt=Je.segments.get();for(const qt of Dt)We.push({segments:new a.bg([qt]),sortKey:qt.sortKey,state:gt})}else We.push({segments:Je.segments,sortKey:0,state:gt})}R&&We.sort((Ge,Ne)=>Ge.sortKey-Ne.sortKey);const $e={useDepthForOcclusion:re.depthOcclusionForSymbolsAndCircles};for(const Ge of We){const{programConfiguration:Ne,program:Re,layoutVertexBuffer:Je,dynamicBuffers:nt,indexBuffer:st,uniformValues:dt,tile:ft}=Ge.state,wt=Ge.segments;_.terrain&&_.terrain.setupElevationDraw(ft,Re,$e),_.uploadCommonUniforms(q,Re,ft.tileID.toUnwrapped()),Re.draw(_,H.TRIANGLES,de,_e,Me,jn.disabled,dt,d.id,Je,st,wt,d.paint,re.zoom,Ne,nt)}},heatmap:function(_,l,d,v){if(d.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const T=_.context,O=T.gl,M=qn.disabled,R=new Gn([O.ONE,O.ONE,O.ONE,O.ONE],a.ao.transparent,[!0,!0,!0,!0]);(function(oe,he,ce,de){const _e=oe.gl,Me=he.width*de,Ce=he.height*de;oe.activeTexture.set(_e.TEXTURE1),oe.viewport.set([0,0,Me,Ce]);let Ae=ce.heatmapFbo;if(!Ae||Ae&&(Ae.width!==Me||Ae.height!==Ce)){Ae&&Ae.destroy();const We=_e.createTexture();_e.bindTexture(_e.TEXTURE_2D,We),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_WRAP_S,_e.CLAMP_TO_EDGE),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_WRAP_T,_e.CLAMP_TO_EDGE),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_MIN_FILTER,_e.LINEAR),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_MAG_FILTER,_e.LINEAR),Ae=ce.heatmapFbo=oe.createFramebuffer(Me,Ce,1,null),(function($e,Ge,Ne,Re,Je,nt){const st=$e.gl;st.texImage2D(st.TEXTURE_2D,0,$e.extRenderToTextureHalfFloat?st.RGBA16F:st.RGBA,Je,nt,0,st.RGBA,$e.extRenderToTextureHalfFloat?st.HALF_FLOAT:st.UNSIGNED_BYTE,null),Re.colorAttachment0.set(Ne)})(oe,0,We,Ae,Me,Ce)}else _e.bindTexture(_e.TEXTURE_2D,Ae.colorAttachment0.get()),oe.bindFramebuffer.set(Ae.framebuffer)})(T,_,d,_.transform.projection.name==="globe"?.5:.25),T.clear({color:a.ao.transparent});const F=_.transform,q=F.projection.name==="globe",H=q?["PROJECTION_GLOBE_VIEW"]:[],re=q?jn.frontCCW:jn.disabled,ee=[a.aF(F.center.lng),a.aJ(F.center.lat)];for(let oe=0;oe<v.length;oe++){const he=v[oe];if(l.hasRenderableParent(he))continue;const ce=l.getTile(he),de=ce.getBucket(d);if(!de||de.projection.name!==F.projection.name)continue;const _e=_.isTileAffectedByFog(he),Me=de.programConfigurations.get(d.id),Ce=_.getOrCreateProgram("heatmap",{config:Me,defines:H,overrideFog:_e}),{zoom:Ae}=_.transform;_.terrain&&_.terrain.setupElevationDraw(ce,Ce),_.uploadCommonUniforms(T,Ce,he.toUnwrapped());const We=F.projection.createInversionMatrix(F,he.canonical);Ce.draw(_,O.TRIANGLES,On.disabled,M,R,re,Dd(_,he,ce,We,ee,Ae,d.paint.get("heatmap-intensity")),d.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,d.paint,_.transform.zoom,Me,q?[de.globeExtVertexBuffer]:null)}T.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),(function(T,O){const M=T.context,R=M.gl,F=O.heatmapFbo;if(!F)return;M.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,F.colorAttachment0.get()),M.activeTexture.set(R.TEXTURE1);let q=O.colorRampTexture;q||(q=O.colorRampTexture=new a.T(M,O.colorRamp,R.RGBA8)),q.bind(R.LINEAR,R.CLAMP_TO_EDGE),T.getOrCreateProgram("heatmapTexture").draw(T,R.TRIANGLES,On.disabled,qn.disabled,T.colorModeForRenderPass(),jn.disabled,((H,re)=>({u_image:0,u_color_ramp:1,u_opacity:re.paint.get("heatmap-opacity")}))(0,O),O.id,T.viewportBuffer,T.quadTriangleIndexBuffer,T.viewportSegments,O.paint,T.transform.zoom)})(_,d))},line:function(_,l,d,v){if(_.renderPass!=="translucent")return;const T=d.paint.get("line-opacity"),O=d.paint.get("line-width");if(T.constantOr(1)===0||O.constantOr(1)===0)return;const M=d.paint.get("line-emissive-strength").isConstant(),R=d.paint.get("line-emissive-strength").constantOr(0),F=d.paint.get("line-occlusion-opacity"),q=d.layout.get("line-elevation-reference"),H=d.layout.get("line-width-unit")==="meters",re=q==="sea",ee=!(!_.terrain||!_.terrain.enabled),oe=_.context,he=oe.gl;if(d.hasElevatedBuckets&&_.transform.projection.name==="globe")return;const ce=d.layout.get("line-cross-slope"),de=ce!==void 0,_e=ce<1,Me=_.colorModeForDrapableLayerRenderPass(M?R:null),Ce=_.terrain&&_.terrain.renderingToTexture,Ae=Ce?1:a.o.devicePixelRatio,We=d.paint.get("line-dasharray"),$e=We.constantOr(1),Ge=d.layout.get("line-cap"),Ne=We.constantOr(null),Re=Ge.constantOr(null),Je=d.paint.get("line-pattern"),nt=Je.constantOr(1),st=d.paint.get("line-pattern-cross-fade"),dt=Je.constantOr(null),ft=d.paint.get("line-opacity").constantOr(1);let wt=!nt&&ft!==1||_.depthOcclusion&&F>0&&F<1;const It=d.paint.get("line-gradient"),pt=nt?"linePattern":"line",et=a.e2(d);let At;if(Ce&&_.terrain&&_.terrain.clipOrMaskOverlapStencilType()&&(wt=!1),F!==0&&_.depthOcclusion){const tn=d.paint._values["line-opacity"];tn&&tn.value&&tn.value.kind==="constant"?At=tn.value:a.w(`Occlusion opacity for layer ${d.id} is supported only when line-opacity isn't data-driven.`)}O.value.kind!=="constant"&&O.value.isLineProgressConstant===!1&&et.push("VARIABLE_LINE_WIDTH"),Ce&&(_.emissiveMode!=="dual-source-blending"||M?_.emissiveMode==="mrt-fallback"&&et.push("USE_MRT1"):et.push("DUAL_SOURCE_BLENDING"));const gt=(tn,Wt,Ht,xn,yn,rn)=>{for(const _n of tn){const In=l.getTile(_n);if(nt&&!In.patternsLoaded())continue;const Un=In.getBucket(d);if(!Un||Un.elevationType!=="none"&&!yn||Un.elevationType==="none"&&yn)continue;_.prepareDrawTile();const Qn=[...Wt],yr=_.shadowRenderer,$n=Un.elevationType==="road"&&!!yr&&yr.enabled;let Jn=[0,0,0];if($n){const tr=_.style.directionalLight,yi=_.style.ambientLight;tr&&yi&&(Jn=js(_.style,tr,yi)),Qn.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET")}const Yn=Un.programConfigurations.get(d.id);let jr=!1;if(dt&&In.imageAtlas){const tr=a.e3.from(dt),yi=tr.getPrimary().scaleSelf(Ae).toString(),Ji=In.imageAtlas.patternPositions.get(yi),ai=tr.getSecondary(),_i=ai?In.imageAtlas.patternPositions.get(ai.scaleSelf(Ae).toString()):null;jr=!!Ji&&!!_i,Ji&&Yn.setConstantPatternPositions(Ji,_i)}st>0&&(jr||Yn.getPatternTransitionVertexBuffer("line-pattern"))&&Qn.push("LINE_PATTERN_TRANSITION");const Mr=_.isTileAffectedByFog(_n),ei=_.getOrCreateProgram(pt,{config:Yn,defines:Qn,overrideFog:Mr});if(!nt&&Ne&&Re&&In.lineAtlas){const tr=In.lineAtlas.getDash(Ne,Re);tr&&Yn.setConstantPatternPositions(tr)}$n&&yr.setupShadows(In.tileID.toUnwrapped(),ei,"vector-tile");let[wr,er]=d.paint.get("line-trim-offset");(Re==="round"||Re==="square")&&wr!==er&&(wr===0&&(wr-=1),er===1&&(er+=1));const Rr=Ce?_n.projMatrix:null,Pi=H?1/Un.tileToMeter/a.ay(In,1,_.transform.zoom):1,ti=H?1/Un.tileToMeter/a.ay(In,1,Math.floor(_.transform.zoom)):1,qr=nt?a.e4(_,In,d,Rr,Ae,Pi,ti,[wr,er],Jn,st):a.e5(_,In,d,Rr,Un.lineClipsArray.length,Ae,Pi,ti,[wr,er],Jn);if(It){const tr=Un.gradients[d.id];let yi=tr.texture;if(d.gradientVersion!==tr.version){let Ji=256;if(d.stepInterpolant){const ai=l.getSource().maxzoom,_i=_n.canonical.z===ai?Math.ceil(1<<_.transform.maxZoom-_n.canonical.z):1;Ji=a.aA(a.e6(Un.maxLineLength/a.al*1024*_i),256,oe.maxTextureSize)}tr.gradient=a.e7({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:Ji,image:tr.gradient||void 0,clips:Un.lineClipsArray}),tr.texture?tr.texture.update(tr.gradient):tr.texture=new a.T(oe,tr.gradient,he.RGBA8),tr.version=d.gradientVersion,yi=tr.texture}oe.activeTexture.set(he.TEXTURE1),yi.bind(d.stepInterpolant?he.NEAREST:he.LINEAR,he.CLAMP_TO_EDGE)}$e&&(oe.activeTexture.set(he.TEXTURE0),In.lineAtlasTexture&&In.lineAtlasTexture.bind(he.LINEAR,he.REPEAT),Yn.updatePaintBuffers()),nt&&(oe.activeTexture.set(he.TEXTURE0),In.imageAtlasTexture&&In.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),Yn.updatePaintBuffers()),yn&&!re&&_.terrain.setupElevationDraw(In,ei),_.uploadCommonUniforms(oe,ei,_n.toUnwrapped());const Kn=tr=>{At!=null&&(At.value=ft*F),ei.draw(_,he.TRIANGLES,Ht,tr,Me,jn.disabled,qr,d.id,Un.layoutVertexBuffer,Un.indexBuffer,Un.segments,d.paint,_.transform.zoom,Yn,[Un.layoutVertexBuffer2,Un.patternVertexBuffer,Un.zOffsetVertexBuffer]),At!=null&&(At.value=ft)};if(wt&&!yn){const tr=_.stencilModeForClipping(_n).ref;tr===0&&Ce&&oe.clear({stencil:0});const yi={func:he.EQUAL,mask:255};qr.u_alpha_discard_threshold=.8,Kn(new qn(yi,tr,255,he.KEEP,he.KEEP,he.INVERT)),qr.u_alpha_discard_threshold=0,Kn(new qn(yi,tr,255,he.KEEP,he.KEEP,he.KEEP))}else qr.u_alpha_discard_threshold=wt&&yn&&rn?.8:0,Kn(yn?xn:_.stencilModeForClipping(_n))}};let Dt=_.depthModeForSublayer(0,On.ReadOnly);const qt=new On(_.depthOcclusion?he.GREATER:he.LEQUAL,On.ReadOnly,_.depthRangeFor3D);if(d.hasNonElevatedBuckets){const tn=!Ce&&_.terrain;F!==0&&tn?a.w(`Occlusion opacity for layer ${d.id} is supported on terrain only if the layer has line-z-offset enabled.`):tn?a.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${d.id}.`):gt(v,et,Dt,qn.disabled,!1,!0)}if(d.hasElevatedBuckets){q==="hd-road-markup"?ee||(Dt=qt,et.push("ELEVATED_ROADS")):(et.push("ELEVATED"),Dt=qt,de&&et.push(_e?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),re&&et.push("ELEVATION_REFERENCE_SEA"));const tn=wt?_.stencilModeFor3D():qn.disabled;_.forceTerrainMode=!0,gt(v,et,Dt,tn,!0,!0),wt&&gt(v,et,Dt,tn,!0,!1),_.forceTerrainMode=!1}wt&&(_.resetStencilClippingMasks(),Ce&&oe.clear({stencil:0})),F===0||_.depthOcclusion||Ce||_.layersWithOcclusionOpacity.push(_.currentLayer)},fill:function(_,l,d,v){const T=d.paint.get("fill-color"),O=d.paint.get("fill-opacity");if(O.constantOr(1)===0)return;const M=d.paint.get("fill-emissive-strength"),R=_.colorModeForDrapableLayerRenderPass(M),F=d.paint.get("fill-pattern"),q=_.opaquePassEnabledForLayer()&&!F.constantOr(1)&&T.constantOr(a.ao.transparent).a===1&&O.constantOr(0)===1?"opaque":"translucent";let H="none";d.layout.get("fill-elevation-reference")!=="none"?H="road":d.paint.get("fill-z-offset").constantOr(1)!==0&&(H="offset");const re=!(!_.terrain||!_.terrain.enabled),ee={painter:_,sourceCache:l,layer:d,coords:v,colorMode:R,elevationType:H,terrainEnabled:re,pass:q};if(_.renderPass==="shadow")return void(_.shadowRenderer&&H==="road"&&!re&&(function(he){const{painter:ce,sourceCache:de,layer:_e,coords:Me}=he,Ce=ce.context.gl,Ae=he.painter.shadowRenderer;for(const We of Me){const $e=de.getTile(We),Ge=$e.getBucket(_e);if(!Ge)continue;const Ne=Ge.elevatedStructures;if(!Ne||!Ne.shadowCasterSegments||Ne.shadowCasterSegments.segments[0].primitiveLength===0)continue;ce.prepareDrawTile();const Re=Ge.bufferData.programConfigurations.get(_e.id),Je=ce.isTileAffectedByFog(We),nt=ce.getOrCreateProgram("elevatedStructuresDepth",{config:Re,overrideFog:Je}),st=Ae.calculateShadowPassMatrixFromTile($e.tileID.toUnwrapped());ce.uploadCommonUniforms(ce.context,nt,We.toUnwrapped());const dt=Md(st,0);nt.draw(ce,Ce.TRIANGLES,Ae.getShadowPassDepthMode(),qn.disabled,Ae.getShadowPassColorMode(),jn.disabled,dt,_e.id,Ne.vertexBuffer,Ne.indexBuffer,Ne.shadowCasterSegments,_e.paint,ce.transform.zoom,Re)}})(ee));const oe=_.emissiveMode==="mrt-fallback";if(H!=="offset"){if(Ma(ee,!1,oe),H==="road"){const he=!re&&_.renderPass==="translucent";he&&P0(_,l,d,v,"geometry"),Ma(ee,!0,oe,qn.disabled),he&&(function(ce){const{painter:de,sourceCache:_e,layer:Me,coords:Ce,colorMode:Ae}=ce,We=de.context.gl,$e=ce.painter.shadowRenderer,Ge=!!$e&&$e.enabled,Ne=new On(de.context.gl.LEQUAL,On.ReadOnly,de.depthRangeFor3D);let Re=[0,0,0];if(Ge){const nt=de.style.directionalLight,st=de.style.ambientLight;nt&&st&&(Re=js(de.style,nt,st))}const Je=nt=>{for(const st of Ce){const dt=_e.getTile(st),ft=dt.getBucket(Me);if(!ft)continue;const wt=ft.elevatedStructures;if(!wt)continue;let It,pt;if(nt?(It=wt.renderableBridgeSegments,pt=wt.bridgeProgramConfigurations.get(Me.id)):(It=wt.renderableTunnelSegments,pt=wt.tunnelProgramConfigurations.get(Me.id)),!It||It.segments[0].primitiveLength===0)continue;pt.updatePaintBuffers(),de.prepareDrawTile();const et=de.isTileAffectedByFog(st),At=[];Ge&&At.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET");const gt=de.getOrCreateProgram("elevatedStructures",{config:pt,overrideFog:et,defines:At}),Dt=de.translatePosMatrix(st.projMatrix,dt,Me.paint.get("fill-translate"),Me.paint.get("fill-translate-anchor"));Ge&&$e.setupShadows(dt.tileID.toUnwrapped(),gt,"vector-tile");const qt=Yu(Dt,Re);de.uploadCommonUniforms(de.context,gt,st.toUnwrapped()),gt.draw(de,We.TRIANGLES,Ne,qn.disabled,Ae,jn.backCCW,qt,Me.id,wt.vertexBuffer,wt.indexBuffer,It,Me.paint,de.transform.zoom,pt,[wt.vertexBufferNormal])}};Je(!0),Je(!1)})(ee)}}else Ma(ee,!1,oe,_.stencilModeFor3D())},"fill-extrusion":function(_,l,d,v){const T=d.paint.get("fill-extrusion-opacity"),O=_.context,M=O.gl,R=_.terrain,F=R&&R.renderingToTexture;if(T===0)return;const q=_.emissiveMode==="mrt-fallback",H=_.conflationActive&&_.style.isLayerClipped(d,l.getSource()),re=_.style.order.indexOf(d.fqid);if(H&&(function(ee,oe,he,ce,de){for(const _e of ce){const Me=oe.getTile(_e).getBucket(he);Me&&(Me.updateReplacement(_e,ee.replacementSource,de),Me.uploadCentroid(ee.context))}})(_,l,d,v,re),R||H)for(const ee of v){const oe=l.getTile(ee).getBucket(d);oe&&R0(_.context,l,ee,oe,d,R,H)}if(_.renderPass==="shadow"&&_.shadowRenderer){const ee=_.shadowRenderer;if(R&&T<.65&&d._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof a.ad)return;const oe=ee.getShadowPassDepthMode(),he=ee.getShadowPassColorMode();wh(_,l,d,v,oe,qn.disabled,he,H)}else if(_.renderPass==="translucent"){const ee=!d.paint.get("fill-extrusion-pattern").constantOr(1),oe=d.paint.get("fill-extrusion-color").constantOr(a.ao.white);if(!F&&oe.a!==0){const he=new On(_.context.gl.LEQUAL,On.ReadWrite,_.depthRangeFor3D);T===1&&ee?wh(_,l,d,v,he,qn.disabled,Gn.unblended,H):(wh(_,l,d,v,he,qn.disabled,Gn.disabled,H),wh(_,l,d,v,he,_.stencilModeFor3D(),_.colorModeForRenderPass(),H),_.resetStencilClippingMasks())}if(_.style.enable3dLights()&&ee&&(!R&&_.transform.projection.name!=="globe"||F)){const he=d.paint.get("fill-extrusion-opacity"),ce=d.paint.get("fill-extrusion-ambient-occlusion-intensity"),de=d.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),_e=d.paint.get("fill-extrusion-flood-light-intensity"),Me=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Ce=d.paint.get("fill-extrusion-flood-light-color").toNonPremultipliedRenderColor(Me?null:d.lut).toArray01().slice(0,3),Ae=ce>0&&de>0,We=_e>0,$e=(Re,Je,nt)=>(1-nt)*Re+nt*Je,Ge=new Fd;Ge.translate=d.paint.get("fill-extrusion-translate"),Ge.translateAnchor=d.paint.get("fill-extrusion-translate-anchor"),Ge.edgeRadius=d.layout.get("fill-extrusion-edge-radius"),Ge.cutoffFadeRange=d.paint.get("fill-extrusion-cutoff-fade-range");const Ne=Re=>{const Je=_.depthModeForSublayer(1,On.ReadOnly,M.LEQUAL,!0),nt=d.paint.get(Re?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),st=$e(.1,3,nt),dt=_._showOverdrawInspector;if(!dt){const ft=new qn({func:M.ALWAYS,mask:255},255,255,M.KEEP,M.KEEP,M.REPLACE),wt=new Gn([M.ONE,M.ONE,M.ONE,M.ONE],a.ao.transparent,[!1,!1,!1,!0],M.MIN);Xu(Ge,_,l,d,v,Je,ft,wt,jn.disabled,Re,"sdf",he,ce,de,_e,Ce,st,H,!1)}{const ft=dt?qn.disabled:new qn({func:M.EQUAL,mask:255},255,255,M.KEEP,M.DECR,M.DECR),wt=dt?_.colorModeForRenderPass():new Gn([M.ONE_MINUS_DST_ALPHA,M.DST_ALPHA,M.ONE,M.ONE],a.ao.transparent,[!0,!0,!0,!0]);Xu(Ge,_,l,d,v,Je,ft,wt,jn.disabled,Re,"color",he,ce,de,_e,Ce,st,H,!1)}};if(F){const Re=()=>{const nt=R.drapeBufferSize[0],st=R.drapeBufferSize[1];let dt=R.framebufferCopyTexture;return dt&&(!dt||dt.size[0]===nt&&dt.size[1]===st)||(dt&&dt.destroy(),dt=R.framebufferCopyTexture=new a.T(O,new a.q({width:nt,height:st}),M.RGBA8)),dt.bind(M.LINEAR,M.CLAMP_TO_EDGE),M.copyTexSubImage2D(M.TEXTURE_2D,0,0,0,0,0,nt,st),dt},Je=(nt,st,dt)=>{const ft=_.depthModeForSublayer(1,On.ReadOnly,M.LEQUAL,!1),wt=d.paint.get(nt?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),It=$e(.1,3,wt);{const pt=new Gn([M.ONE,M.ONE,M.ONE,M.ONE],a.ao.transparent,[!1,!1,!1,!0]);Xu(Ge,_,l,d,v,ft,qn.disabled,pt,jn.disabled,nt,"clear",he,ce,de,_e,Ce,It,H,st)}{const pt=new qn({func:M.ALWAYS,mask:255},255,255,M.KEEP,M.KEEP,M.REPLACE),et=new Gn([M.ONE,M.ONE,M.ONE,M.ONE],a.ao.transparent,[!1,!1,!1,!0],M.MIN);Xu(Ge,_,l,d,v,ft,pt,et,jn.disabled,nt,"sdf",he,ce,de,_e,Ce,It,H,st)}q&&!nt&&(dt=Re());{const pt=nt?M.ZERO:M.ONE_MINUS_DST_ALPHA,et=new qn({func:M.EQUAL,mask:255},255,255,M.KEEP,M.DECR,M.DECR),At=new Gn([pt,M.DST_ALPHA,M.ONE_MINUS_DST_ALPHA,M.ZERO],a.ao.transparent,[!0,!0,!0,!0]);Xu(Ge,_,l,d,v,ft,et,At,jn.disabled,nt,"color",he,ce,de,_e,Ce,It,H,st)}if(!q||nt){const pt=new Gn([M.ONE,M.ONE,M.ONE,nt?M.ZERO:M.ONE],a.ao.transparent,[!1,!1,!1,!0],nt?M.FUNC_ADD:M.MAX);Xu(Ge,_,l,d,v,ft,qn.disabled,pt,jn.disabled,nt,"clear",he,ce,de,_e,Ce,It,H,st,dt)}else{M.drawBuffers([M.NONE,M.COLOR_ATTACHMENT1]);const pt=new qn({func:M.EQUAL,mask:255},254,255,M.KEEP,M.DECR,M.DECR),et=new Gn([M.ONE,M.ONE,M.ONE,M.ONE],a.ao.transparent,[!0,!1,!1,!1],M.MAX);Xu(Ge,_,l,d,v,ft,pt,et,jn.disabled,nt,"emissive",he,ce,de,_e,Ce,It,H,st,dt),M.drawBuffers([M.COLOR_ATTACHMENT0])}};if(Ae||We){let nt;_.prepareDrawTile(),q&&!Ae||(nt=Re()),Ae&&Je(!0,!1,nt),We&&Je(!1,!0,nt)}}else Ae&&Ne(!0),We&&Ne(!1),(Ae||We)&&_.resetStencilClippingMasks()}}},building:function(_,l,d,v){_.currentLayer<_.firstLightBeamLayer&&(_.firstLightBeamLayer=_.currentLayer);const T=d.paint.get("building-ambient-occlusion-ground-intensity"),O=d.paint.get("building-ambient-occlusion-ground-radius"),M=d.paint.get("building-ambient-occlusion-ground-attenuation"),R=d.paint.get("building-opacity");if(R<=0)return;let F=T>0&&O>0,q=!0;const H=d.paint.get("building-vertical-scale");if(H<=0)return;_.shadowRenderer||(q=!1);const re=_.conflationActive&&_.style.isLayerClipped(d,l.getSource()),ee=_.style.order.indexOf(d.fqid);if((function(oe,he,ce,de,_e,Me){for(const Ce of Me){const Ae=he.getTile(Ce).getBucket(ce);Ae&&(_e&&Ae.updateReplacement(Ce,oe.replacementSource,de),Ae.uploadUpdatedIndexBuffer(oe.context))}})(_,l,d,ee,re,v),(function(oe,he,ce,de){for(const _e of de){const Me=he.getTile(_e).getBucket(ce);Me&&Me.needsEvaluation()&&Me.uploadUpdatedColorBuffer(oe.context)}})(_,l,d,v),d.resetLayerRenderingStats(_),_.shadowRenderer&&(_.shadowRenderer.useNormalOffset=!0),_.renderPass==="shadow"&&_.shadowRenderer){const oe=_.shadowRenderer,he=[],ce=oe.getShadowPassDepthMode();jo({painter:_,source:l,layer:d,coords:v,defines:he,blendMode:oe.getShadowPassColorMode(),depthMode:ce,opacity:R,verticalScale:H,facadeEmissiveChance:0,facadeAOIntensity:0,floodLightIntensity:0,floodLightColor:[0,0,0]})}else if(_.renderPass==="translucent"){let oe=["HAS_ATTRIBUTE_a_part_color_emissive","LIGHTING_3D_MODE"];q&&(oe=oe.concat("RENDER_SHADOWS","DEPTH_TEXTURE")),_.shadowRenderer&&_.shadowRenderer.useNormalOffset&&(oe=oe.concat("NORMAL_OFFSET"));const he=d.paint.get("building-facade-emissive-chance"),ce=d.paint.get("building-ambient-occlusion-intensity"),de=d.paint.get("building-flood-light-intensity"),_e=d.paint.get("building-flood-light-color-use-theme").constantOr("default")==="none",Me=d.paint.get("building-flood-light-color").toNonPremultipliedRenderColor(_e?null:d.lut).toArray01().slice(0,3),Ce=d.paint.get("building-flood-light-ground-attenuation"),Ae=de>0,We=new On(_.context.gl.LEQUAL,On.ReadWrite,_.depthRangeFor3D);R<1&&jo({painter:_,source:l,layer:d,coords:v,defines:oe,blendMode:Gn.disabled,depthMode:We,opacity:R,verticalScale:H,facadeEmissiveChance:he,facadeAOIntensity:ce,floodLightIntensity:de,floodLightColor:Me,depthOnly:!0});const $e=_.colorModeForRenderPass();jo({painter:_,source:l,layer:d,coords:v,defines:oe,blendMode:$e,depthMode:We,opacity:R,verticalScale:H,facadeEmissiveChance:he,facadeAOIntensity:ce,floodLightIntensity:de,floodLightColor:Me}),F&&Wa(_,l,d,v,!0,R,T,O,de,Me,M,re),Ae&&Wa(_,l,d,v,!1,R,T,O,de,Me,Ce,re)}else if(_.renderPass==="light-beam"){const oe=["HAS_ATTRIBUTE_a_part_color_emissive","HAS_ATTRIBUTE_a_bloom_attenuation"],he=new On(_.context.gl.LEQUAL,On.ReadOnly,_.depthRangeFor3D);jo({painter:_,source:l,layer:d,coords:v,defines:oe,blendMode:Gn.alphaBlended,depthMode:he,opacity:R,verticalScale:H,facadeEmissiveChance:0,facadeAOIntensity:0,floodLightIntensity:0,floodLightColor:[0,0,0]})}_.shadowRenderer&&(_.shadowRenderer.useNormalOffset=!1),_.resetStencilClippingMasks()},hillshade:function(_,l,d,v){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent"||_.style.disableElevatedTerrain)return;const T=_.context,O=_.terrain&&_.terrain.renderingToTexture,[M,R]=_.renderPass!=="translucent"||O?[{},v]:_.stencilConfigForOverlap(v);for(const F of R){const q=l.getTile(F);if(q.needsHillshadePrepare&&_.renderPass==="offscreen")fu(_,q,d);else if(_.renderPass==="translucent"){const H=_.depthModeForSublayer(0,On.ReadOnly),re=d.paint.get("hillshade-emissive-strength"),ee=_.colorModeForDrapableLayerRenderPass(re),oe=O&&_.terrain?_.terrain.stencilModeForRTTOverlap(F):M[F.overscaledZ];Mg(_,F,q,d,H,oe,ee)}}T.viewport.set([0,0,_.width,_.height]),_.resetStencilClippingMasks()},raster:function(_,l,d,v,T,O){if(_.renderPass!=="translucent"||d.paint.get("raster-opacity")===0)return;const M=_.transform.projection.name==="globe",R=d.paint.get("raster-elevation")!==0,F=R&&M;if(_.renderElevatedRasterBackface&&!F)return;const q=_.context,H=q.gl,re=l.getSource(),ee=(function($e,Ge,Ne,Re,Je){const nt=Ge.paint.get("raster-color"),st=$e.type==="raster-array",dt=[],ft=Ge.paint.get("raster-resampling"),wt=Ge.paint.get("raster-color-mix");let It=Ge.paint.get("raster-color-range");const pt=[wt[0],wt[1],wt[2],0],et=wt[3];let At=ft==="nearest"?Re.NEAREST:Re.LINEAR;if(st&&(dt.push("RASTER_ARRAY"),nt||dt.push("RASTER_COLOR"),ft==="linear"&&dt.push("RASTER_ARRAY_LINEAR"),At=Re.NEAREST,!It&&$e.rasterLayers)){const gt=$e.rasterLayers.find(({id:Dt})=>Dt===Ge.sourceLayer);gt&&gt.fields&&gt.fields.range&&(It=gt.fields.range)}if(It=It||[0,1],nt){dt.push("RASTER_COLOR"),Ne.activeTexture.set(Re.TEXTURE2),Ge.updateColorRamp(It);let gt=Ge.colorRampTexture;gt||(gt=Ge.colorRampTexture=new a.T(Ne,Ge.colorRamp,Re.RGBA8)),gt.bind(At,Re.CLAMP_TO_EDGE)}return Je&&dt.push("USE_MRT1"),{mix:pt,range:It,offset:et,defines:dt,resampling:At}})(re,d,q,H,_.terrain&&_.terrain.renderingToTexture&&_.emissiveMode==="mrt-fallback");if(re instanceof a.aU&&!v.length&&!M)return;const oe=d.paint.get("raster-emissive-strength"),he=_.colorModeForDrapableLayerRenderPass(oe),ce=_.terrain&&_.terrain.renderingToTexture,de=!_.options.moving,_e=d.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;if(re instanceof a.aU&&!v.length&&(re.onNorthPole||re.onSouthPole)){const $e=R?_.stencilModeFor3D():qn.disabled;return void Sh(!!re.onNorthPole,null,_,l,d,oe,ee,jn.disabled,$e)}if(!v.length)return;const[Me,Ce]=re instanceof a.aU||ce?[{},v]:_.stencilConfigForOverlap(v),Ae=Ce[Ce.length-1].overscaledZ;F&&ee.defines.push("PROJECTION_GLOBE_VIEW"),R&&ee.defines.push("RENDER_CUTOFF");const We=($e,Ge,Ne)=>{for(const Re of $e){const Je=Re.toUnwrapped(),nt=l.getTile(Re);if(ce&&(!nt||!nt.hasData()))continue;q.activeTexture.set(H.TEXTURE0);const st=G_(nt,re,d,ee);if(!st||!st.texture)continue;const{texture:dt,mix:ft,offset:wt,tileSize:It,buffer:pt}=st;let et,At;ce?(et=On.disabled,At=Re.projMatrix):R?(et=new On(H.LEQUAL,On.ReadWrite,_.depthRangeFor3D),At=M?Float32Array.from(_.transform.expandedFarZProjMatrix):_.transform.calculateProjMatrix(Je,de)):(et=_.depthModeForSublayer(Re.overscaledZ-Ae,d.paint.get("raster-opacity")===1?On.ReadWrite:On.ReadOnly,H.LESS),At=_.transform.calculateProjMatrix(Je,de));const gt=_.terrain&&ce?_.terrain.stencilModeForRTTOverlap(Re):Me[Re.overscaledZ],Dt=O?0:d.paint.get("raster-fade-duration");nt.registerFadeDuration(Dt);const qt=l.findLoadedParent(Re,0),tn=zg(nt,qt,l,_.transform,Dt);let Wt,Ht;!tn.isFading&&nt.refreshedUponExpiration&&(nt.refreshedUponExpiration=!1),_.terrain&&_.terrain.prepareDrawTile(),q.activeTexture.set(H.TEXTURE0),dt.bind(_e,H.CLAMP_TO_EDGE),q.activeTexture.set(H.TEXTURE1),qt?(qt.texture&&qt.texture.bind(_e,H.CLAMP_TO_EDGE),Wt=Math.pow(2,qt.tileID.overscaledZ-nt.tileID.overscaledZ),Ht=[nt.tileID.canonical.x*Wt%1,nt.tileID.canonical.y*Wt%1]):dt.bind(_e,H.CLAMP_TO_EDGE),"useMipmap"in dt&&q.extTextureFilterAnisotropic&&_.transform.pitch>20&&H.texParameterf(H.TEXTURE_2D,q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,q.extTextureFilterAnisotropicMax);const xn=_.transform;let yn;const rn=R?Yg(xn):[0,0,0,0];let _n,In,Un,Qn,yr,$n=0;if(F&&re instanceof a.aU&&re.coordinates.length>3)_n=Float32Array.from(a.bk(a.dJ(new a.cD(0,0,0)))),In=Float32Array.from(xn.globeMatrix),Un=Float32Array.from(a.dF(xn)),Qn=[a.aF(xn.center.lng),a.aJ(xn.center.lat)],yn=re.elevatedGlobePerspectiveTransform,yr=re.elevatedGlobeGridMatrix||new Float32Array(9);else if(F){const Mr=a.dG(Re.canonical);$n=a.dH(Mr.getCenter().lat),_n=Float32Array.from(a.bk(a.dJ(Re.canonical))),In=Float32Array.from(xn.globeMatrix),Un=Float32Array.from(a.dF(xn)),Qn=[a.aF(xn.center.lng),a.aJ(xn.center.lat)],yn=[0,0],yr=Float32Array.from(a.dI(Re.canonical,Mr,$n,xn.worldSize/xn._pixelsPerMercatorPixel))}else yn=re instanceof a.aU?re.perspectiveTransform:[0,0],_n=new Float32Array(16),In=new Float32Array(9),Un=new Float32Array(16),Qn=[0,0],yr=new Float32Array(9);const Jn=Id(At,_n,In,Un,yr,Ht||[0,0],a.aj(_.transform.zoom),Qn,rn,Wt||1,tn,d,yn,R?d.paint.get("raster-elevation"):0,2,ft,wt,ee.range,It,pt,oe),Yn=_.isTileAffectedByFog(Re),jr=_.getOrCreateProgram("raster",{defines:ee.defines,overrideFog:Yn});if(_.uploadCommonUniforms(q,jr,Je),re instanceof a.aU){const Mr=re.elevatedGlobeVertexBuffer,ei=re.elevatedGlobeIndexBuffer;if(ce||!M)re.boundsBuffer&&re.boundsSegments&&jr.draw(_,H.TRIANGLES,et,qn.disabled,he,jn.disabled,Jn,d.id,re.boundsBuffer,_.quadTriangleIndexBuffer,re.boundsSegments);else if(Mr&&ei){const wr=xn.zoom<=a.c_?re.elevatedGlobeSegments:re.getSegmentsForLongitude(xn.center.lng);wr&&jr.draw(_,H.TRIANGLES,et,qn.disabled,he,Ge,Jn,d.id,Mr,ei,wr)}}else if(F){et=new On(H.LEQUAL,On.ReadOnly,_.depthRangeFor3D);const Mr=_.globeSharedBuffers;if(Mr){const[ei,wr,er]=Mr.getGridBuffers($n,!1);jr.draw(_,H.TRIANGLES,et,Ne||gt,_.colorModeForRenderPass(),Ge,Jn,d.id,ei,wr,er)}}else{const{tileBoundsBuffer:Mr,tileBoundsIndexBuffer:ei,tileBoundsSegments:wr}=_.getTileBoundsBuffers(nt);jr.draw(_,H.TRIANGLES,et,gt,he,jn.disabled,Jn,d.id,Mr,ei,wr)}}if(!(re instanceof a.aU)&&F)for(const Re of $e){const Je=Re.canonical.y===(1<<Re.canonical.z)-1;Re.canonical.y===0&&Sh(!0,Re,_,l,d,oe,ee,Ge,Ne||qn.disabled),Je&&Sh(!1,Re,_,l,d,oe,ee,Ge===jn.frontCW?jn.backCW:jn.frontCW,Ne||qn.disabled)}};F?We(Ce,_.renderElevatedRasterBackface?jn.backCW:jn.frontCW,_.stencilModeFor3D()):We(Ce,jn.disabled,void 0),_.resetStencilClippingMasks()},"raster-particle":function(_,l,d,v,T,O){_.renderPass==="offscreen"&&(function(M,R,F,q){if(!q.length)return;const H=M.context,re=H.gl,ee=R.getSource();if(!(ee instanceof xs))return;const oe=Math.ceil(Math.sqrt(F.paint.get("raster-particle-count")));let he=F.particlePositionRGBAImage;if(!he||he.width!==oe){const Ce=(function(Ae){const We=Ae*Ae,$e=new Uint8Array(4*We),Ge=function(Re){return Re|=0,Re=Math.imul(2747636419^Re,2654435769),Re=Math.imul(Re^Re>>>16,2654435769),((Re=Math.imul(Re^Re>>>16,2654435769))>>>0)/4294967296},Ne=.9090909090909091;for(let Re=0;Re<We;Re++){const Je=Ne*(Ge(2*Re+0)+Pd),nt=Ne*(Ge(2*Re+1)+Pd),st=255*Je%1,dt=255*nt%1,ft=st,wt=nt-dt/255,It=dt;$e[4*Re+0]=255*(Je-st/255),$e[4*Re+1]=255*ft,$e[4*Re+2]=255*wt,$e[4*Re+3]=255*It}return $e})(oe);he=F.particlePositionRGBAImage=new a.q({width:oe,height:oe},Ce)}let ce=F.particleFramebuffer;ce?ce.width!==oe&&(ce.destroy(),ce=F.particleFramebuffer=H.createFramebuffer(oe,oe,1,null)):ce=F.particleFramebuffer=H.createFramebuffer(oe,oe,1,null);const de=[];for(const Ce of q){const Ae=R.getTile(Ce);if(!(Ae instanceof Lp))continue;const We=Xg(Ae,ee,F);if(!We)continue;const $e=[Ae.tileSize,Ae.tileSize];let Ge=F.tileFramebuffer;Ge||(Ge=F.tileFramebuffer=H.createFramebuffer($e[0],$e[1],1,null));let Ne=Ae.rasterParticleState;Ne||(Ne=Ae.rasterParticleState=new Wg(H,Ce,$e,he));const Re=Ne.update(F.lastInvalidatedAt);Ne.particleTextureDimension!==oe&&Ne.updateParticleTexture(Ce,he);const Je=Ne.targetColorTexture;Ne.targetColorTexture=Ne.backgroundColorTexture,Ne.backgroundColorTexture=Je;const nt=Ne.particleTexture0;Ne.particleTexture0=Ne.particleTexture1,Ne.particleTexture1=nt,de.push([Ce,We,Ne,Re])}if(de.length===0)return;const _e=a.o.now(),Me=F.previousDrawTimestamp?.001*(_e-F.previousDrawTimestamp):.0167;if(F.previousDrawTimestamp=_e,F.hasColorMap()){H.activeTexture.set(re.TEXTURE0+2);let Ce=F.colorRampTexture;Ce||(Ce=F.colorRampTexture=new a.T(H,F.colorRamp,re.RGBA8)),Ce.bind(re.LINEAR,re.CLAMP_TO_EDGE)}H.bindFramebuffer.set(F.tileFramebuffer.framebuffer),(function(Ce,Ae,We){const $e=Ce.context,Ge=$e.gl,Ne=Ae.tileFramebuffer;$e.activeTexture.set(Ge.TEXTURE0);const Re={u_texture:0,u_opacity:1.05*(nt=Ae.paint.get("raster-particle-fade-opacity-factor"))/(nt+.05)},Je=Ce.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var nt;for(const st of We){const[,,dt,ft]=st;Ne.colorAttachment0.set(dt.targetColorTexture.texture),$e.viewport.set([0,0,Ne.width,Ne.height]),$e.clear({color:a.ao.transparent}),ft&&(dt.backgroundColorTexture.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE),Je.draw(Ce,Ge.TRIANGLES,On.disabled,qn.disabled,Gn.alphaBlended,jn.disabled,Re,Ae.id,Ce.viewportBuffer,Ce.quadTriangleIndexBuffer,Ce.viewportSegments))}})(M,F,de),(function(Ce,Ae,We,$e){const Ge=Ce.context,Ne=Ge.gl,Re=We.tileFramebuffer,Je=Ce.transform.projection.name==="globe",nt=We.paint.get("raster-particle-max-speed");for(const st of $e){const[dt,ft,wt]=st;Ge.activeTexture.set(Ne.TEXTURE0+0),ft.texture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Re.colorAttachment0.set(wt.targetColorTexture.texture);const It=Ce.getOrCreateProgram("rasterParticleDraw",{defines:ft.defines,overrideFog:!1});Ge.activeTexture.set(Ne.TEXTURE0+1);const pt=ft.scalarData?[]:[0,1,2,3].map(gt=>a.e9[gt](dt));pt.push(dt);const et=dt.canonical.x,At=dt.canonical.y;for(const gt of pt){const Dt=Ae.getTile(Je?gt.wrapped():gt);if(!Dt)continue;const qt=Dt.rasterParticleState;if(!qt)continue;const tn=gt.canonical.x+(1<<gt.canonical.z)*(gt.wrap-dt.wrap),Wt=gt.canonical.y;qt.particleTexture0.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE);const Ht=Rd(1,qt.particleTexture0.size[0],[tn-et,Wt-At],0,ft.texture.size,2,nt,ft.textureOffset,ft.scale,ft.offset);It.draw(Ce,Ne.POINTS,On.disabled,qn.disabled,Gn.alphaBlended,jn.disabled,Ht,We.id,qt.particleIndexBuffer,void 0,qt.particleSegment)}}})(M,R,F,de),H.bindFramebuffer.set(F.particleFramebuffer.framebuffer),(function(Ce,Ae,We,$e){const Ge=Ce.context,Ne=Ge.gl,Re=Ae.paint.get("raster-particle-max-speed"),Je=$e*Ae.paint.get("raster-particle-speed-factor")*.15,nt=(function(dt){return Math.pow(dt,6)})(.01+1*Ae.paint.get("raster-particle-reset-rate-factor")),st=Ae.particleFramebuffer;Ge.viewport.set([0,0,st.width,st.height]);for(const dt of We){const[,ft,wt]=dt;Ge.activeTexture.set(Ne.TEXTURE0+0),ft.texture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Ge.activeTexture.set(Ne.TEXTURE0+1);const It=wt.particleTexture0;It.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE);const pt=V_(1,It.size[0],0,ft.texture.size,Re,Je,nt,ft.textureOffset,ft.scale,ft.offset);st.colorAttachment0.set(wt.particleTexture1.texture),Ge.clear({color:a.ao.transparent}),Ce.getOrCreateProgram("rasterParticleUpdate",{defines:ft.defines}).draw(Ce,Ne.TRIANGLES,On.disabled,qn.disabled,Gn.unblended,jn.disabled,pt,Ae.id,Ce.viewportBuffer,Ce.quadTriangleIndexBuffer,Ce.viewportSegments)}})(M,F,de,Me)})(_,l,d,v),_.renderPass==="translucent"&&((function(M,R,F,q){const H=M.context,re=H.gl,ee=R.getSource().tileSize,oe=5*(1-a.ah(a.cL,a.cL+1,M.transform.zoom))*ee+F.paint.get("raster-particle-elevation"),he=!M.options.moving,ce=M.transform.projection.name==="globe";if(!q.length)return;const[de,_e]=M.stencilConfigForOverlap(q),Me=[];ce&&Me.push("PROJECTION_GLOBE_VIEW");const Ce=M.stencilModeFor3D();for(const Ae of _e){const We=Ae.toUnwrapped(),$e=R.getTile(Ae);if(!$e.rasterParticleState)continue;const Ge=$e.rasterParticleState,Ne=100;$e.registerFadeDuration(Ne);const Re=R.findLoadedParent(Ae,0),Je=zg($e,Re,R,M.transform,Ne);let nt,st;M.terrain&&M.terrain.prepareDrawTile(),H.activeTexture.set(re.TEXTURE0),Ge.targetColorTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),H.activeTexture.set(re.TEXTURE1),Re&&Re.rasterParticleState?(Re.rasterParticleState.targetColorTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),nt=Math.pow(2,Re.tileID.overscaledZ-$e.tileID.overscaledZ),st=[$e.tileID.canonical.x*nt%1,$e.tileID.canonical.y*nt%1]):Ge.targetColorTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE);const dt=ce?Float32Array.from(M.transform.expandedFarZProjMatrix):M.transform.calculateProjMatrix(We,he),ft=M.transform,wt=Y_(ft),It=a.dG(Ae.canonical),pt=a.dH(It.getCenter().lat);let et,At,gt,Dt,qt;ce?(et=Float32Array.from(a.bk(a.dJ(Ae.canonical))),At=Float32Array.from(ft.globeMatrix),gt=Float32Array.from(a.dF(ft)),Dt=[a.aF(ft.center.lng),a.aJ(ft.center.lat)],qt=Float32Array.from(a.dI(Ae.canonical,It,pt,ft.worldSize/ft._pixelsPerMercatorPixel))):(et=new Float32Array(16),At=new Float32Array(9),gt=new Float32Array(16),Dt=[0,0],qt=new Float32Array(9));const tn=l1(dt,et,At,gt,qt,st||[0,0],a.aj(M.transform.zoom),Dt,wt,nt||1,Je,oe),Wt=M.isTileAffectedByFog(Ae),Ht=M.getOrCreateProgram("rasterParticle",{defines:Me,overrideFog:Wt});if(M.uploadCommonUniforms(H,Ht,We),ce){const xn=new On(re.LEQUAL,On.ReadOnly,M.depthRangeFor3D),yn=0,rn=M.globeSharedBuffers;if(rn){const[_n,In,Un]=rn.getGridBuffers(pt,yn!==0);Ht.draw(M,re.TRIANGLES,xn,Ce,Gn.alphaBlended,M.renderElevatedRasterBackface?jn.frontCCW:jn.backCCW,tn,F.id,_n,In,Un)}}else{const xn=M.depthModeForSublayer(0,On.ReadOnly),yn=de[Ae.overscaledZ],{tileBoundsBuffer:rn,tileBoundsIndexBuffer:_n,tileBoundsSegments:In}=M.getTileBoundsBuffers($e);Ht.draw(M,re.TRIANGLES,xn,yn,Gn.alphaBlended,jn.disabled,tn,F.id,rn,_n,In)}}M.resetStencilClippingMasks()})(_,l,d,v),_.style.map.triggerRepaint())},background:function(_,l,d,v){const T=d.paint.get("background-color"),O=d.paint.get("background-color-use-theme").constantOr("default")==="none",M=d.paint.get("background-opacity"),R=d.paint.get("background-emissive-strength"),F=d.paint.get("background-pitch-alignment")==="viewport";if(M===0)return;const q=_.context,H=q.gl,re=_.transform,ee=re.tileSize,oe=d.paint.get("background-pattern");let he;if(oe!==void 0&&(oe===null||(he=_.imageManager.getPattern(a.I.from(oe.toString()),d.scope,_.style.getLut(d.scope)),!he)))return;const ce=!oe&&T.a===1&&M===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==ce)return;const de=qn.disabled,_e=_.depthModeForSublayer(0,ce==="opaque"?On.ReadWrite:On.ReadOnly),Me=_.colorModeForDrapableLayerRenderPass(R),Ce=oe?"backgroundPattern":"background";let Ae,We=v;We||(Ae=_.getBackgroundTiles(),We=Object.values(Ae).map(Ge=>Ge.tileID)),oe&&(q.activeTexture.set(H.TEXTURE0),_.imageManager.bind(_.context,d.scope));const $e=[];if(_.terrain&&_.terrain.renderingToTexture&&_.emissiveMode==="mrt-fallback"&&$e.push("USE_MRT1"),F){const Ge=_.getOrCreateProgram(Ce,{overrideFog:!1,overrideRtt:!0,defines:$e}),Ne=new Float32Array(a.bA([])),Re=new a.aQ(0,0,0,0,0),Je=oe?Es(Ne,R,M,_,0,d.scope,he,F,{tileID:Re,tileSize:ee}):Fc(Ne,R,M,T.toPremultipliedRenderColor(O?null:d.lut));return void Ge.draw(_,H.TRIANGLES,_e,de,Me,jn.disabled,Je,d.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments)}for(const Ge of We){const Ne=_.isTileAffectedByFog(Ge),Re=_.getOrCreateProgram(Ce,{overrideFog:Ne,defines:$e}),Je=Ge.toUnwrapped(),nt=v?Ge.projMatrix:_.transform.calculateProjMatrix(Je);_.prepareDrawTile();const st=l?l.getTile(Ge):Ae?Ae[Ge.key]:new ff(Ge,ee,re.zoom,_),dt=oe?Es(nt,R,M,_,0,d.scope,he,F,{tileID:Ge,tileSize:ee}):Fc(nt,R,M,T.toPremultipliedRenderColor(O?null:d.lut));_.uploadCommonUniforms(q,Re,Je);const{tileBoundsBuffer:ft,tileBoundsIndexBuffer:wt,tileBoundsSegments:It}=_.getTileBoundsBuffers(st);Re.draw(_,H.TRIANGLES,_e,de,Me,jn.disabled,dt,d.id,ft,wt,It)}},sky:function(_,l,d){const v=_._atmosphere?a.aj(_.transform.zoom):1,T=d.paint.get("sky-opacity")*v;if(T===0)return;const O=_.context,M=d.paint.get("sky-type"),R=new On(O.gl.LEQUAL,On.ReadOnly,[0,1]),F=_.frameCounter/1e3%1;M==="atmosphere"?_.renderPass==="offscreen"?d.needsSkyboxCapture(_)&&((function(q,H){const re=q.context,ee=re.gl;let oe=H.skyboxFbo;if(!oe){oe=H.skyboxFbo=re.createFramebuffer(32,32,1,null),H.skyboxGeometry=new Vs(re),H.skyboxTexture=re.gl.createTexture(),ee.bindTexture(ee.TEXTURE_CUBE_MAP,H.skyboxTexture),ee.texParameteri(ee.TEXTURE_CUBE_MAP,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_CUBE_MAP,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_CUBE_MAP,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_CUBE_MAP,ee.TEXTURE_MAG_FILTER,ee.LINEAR);for(let _e=0;_e<6;++_e)ee.texImage2D(ee.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,ee.RGBA,32,32,0,ee.RGBA,ee.UNSIGNED_BYTE,null)}re.bindFramebuffer.set(oe.framebuffer),re.viewport.set([0,0,32,32]);const he=H.getCenter(q,!0),ce=q.getOrCreateProgram("skyboxCapture"),de=new Float64Array(16);a.bA(de),a.en(de,de,.5*-Math.PI),If(q,H,ce,de,he,0),a.bA(de),a.en(de,de,.5*Math.PI),If(q,H,ce,de,he,1),a.bA(de),a.cU(de,de,.5*-Math.PI),If(q,H,ce,de,he,2),a.bA(de),a.cU(de,de,.5*Math.PI),If(q,H,ce,de,he,3),a.bA(de),If(q,H,ce,de,he,4),a.bA(de),a.en(de,de,Math.PI),If(q,H,ce,de,he,5),re.viewport.set([0,0,q.width,q.height])})(_,d),d.markSkyboxValid(_)):_.renderPass==="sky"&&(function(q,H,re,ee,oe){const he=q.context,ce=he.gl,de=q.transform,_e=q.getOrCreateProgram("skybox");he.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_CUBE_MAP,H.skyboxTexture);const Me=((Ce,Ae,We,$e,Ge)=>({u_matrix:Ce,u_sun_direction:Ae,u_cubemap:0,u_opacity:$e,u_temporal_offset:Ge}))(de.skyboxMatrix,H.getCenter(q,!1),0,ee,oe);q.uploadCommonUniforms(he,_e),_e.draw(q,ce.TRIANGLES,re,qn.disabled,q.colorModeForRenderPass(),jn.backCW,Me,"skybox",H.skyboxGeometry.vertexBuffer,H.skyboxGeometry.indexBuffer,H.skyboxGeometry.segment)})(_,d,R,T,F):M==="gradient"&&_.renderPass==="sky"&&(function(q,H,re,ee,oe){const he=q.context,ce=he.gl,de=q.transform,_e=q.getOrCreateProgram("skyboxGradient");H.skyboxGeometry||(H.skyboxGeometry=new Vs(he)),he.activeTexture.set(ce.TEXTURE0);let Me=H.colorRampTexture;Me||(Me=H.colorRampTexture=new a.T(he,H.colorRamp,ce.RGBA8)),Me.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);const Ce=((Ae,We,$e,Ge,Ne)=>({u_matrix:Ae,u_color_ramp:0,u_center_direction:We,u_radius:a.an($e),u_opacity:Ge,u_temporal_offset:Ne}))(de.skyboxMatrix,H.getCenter(q,!1),H.paint.get("sky-gradient-radius"),ee,oe);q.uploadCommonUniforms(he,_e),_e.draw(q,ce.TRIANGLES,re,qn.disabled,q.colorModeForRenderPass(),jn.backCW,Ce,"skyboxGradient",H.skyboxGeometry.vertexBuffer,H.skyboxGeometry.indexBuffer,H.skyboxGeometry.segment)})(_,d,R,T,F)},custom:function(_,l,d,v){const T=_.context,O=d.implementation;if(!_.transform.projection.unsupportedLayers||!_.transform.projection.unsupportedLayers.includes("custom")||_.terrain&&(_.terrain.renderingToTexture||_.renderPass==="offscreen")&&d.isDraped(l)){if(_.renderPass==="offscreen"){const M=O.prerender;if(M){if(_.setCustomLayerDefaults(),T.setColorMode(_.colorModeForRenderPass()),_.transform.projection.name==="globe"){const R=_.transform.pointMerc;M.call(O,T.gl,_.transform.customLayerMatrix(),_.transform.getProjection(),_.transform.globeToMercatorMatrix(),a.aj(_.transform.zoom),[R.x,R.y],_.transform.pixelsPerMeterRatio)}else M.call(O,T.gl,_.transform.customLayerMatrix());T.setDirty(),_.setBaseState()}}else if(_.renderPass==="translucent"){if(_.terrain&&_.terrain.renderingToTexture){const R=O.renderToTile;if(R){const F=v[0].canonical,q={x:F.x+v[0].wrap*(O.wrapTileId?0:1<<F.z),y:F.y,z:F.z};T.setDepthMode(On.disabled),T.setStencilMode(qn.disabled),T.setColorMode(_.colorModeForRenderPass()),_.setCustomLayerDefaults(),R.call(O,T.gl,q),T.setDirty(),_.setBaseState()}return}_.setCustomLayerDefaults(),T.setColorMode(_.colorModeForRenderPass()),T.setStencilMode(qn.disabled);const M=O.renderingMode==="3d"?new On(_.context.gl.LEQUAL,On.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,On.ReadOnly);if(T.setDepthMode(M),_.transform.projection.name==="globe"){const R=_.transform.pointMerc;O.render(T.gl,_.transform.customLayerMatrix(),_.transform.getProjection(),_.transform.globeToMercatorMatrix(),a.aj(_.transform.zoom),[R.x,R.y],_.transform.pixelsPerMeterRatio)}else O.render(T.gl,_.transform.customLayerMatrix());T.setDirty(),_.setBaseState(),T.bindFramebuffer.set(null)}}else a.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(_,l,d,v){if(_.renderPass==="opaque")return;const T=d.paint.get("model-opacity").constantOr(1),O=d.paint.get("model-elevation-reference"),M=O==="ground",R=O==="ground";if(T===0)return;const F=d.paint.get("model-cast-shadows");if(_.renderPass==="shadow"&&(!F||_.terrain&&T<.65&&d._transitionablePaint._values["model-opacity"].value.expression instanceof a.ad))return;const q=_.shadowRenderer,H=d.paint.get("model-receive-shadows");q&&(q.useNormalOffset=!0,H||(q.enabled=!1));const re=()=>{q&&(q.useNormalOffset=!0,H||(q.enabled=!0))},ee=l.getSource();if(_.renderPass==="light-beam"&&ee.type!=="batched-model")return;if(ee.type==="vector"||ee.type==="geojson")return(function(Ae,We,$e,Ge,Ne){const Re=Ae.transform,Je=Re.projection.name==="globe",nt=Re.getFreeCameraOptions().position;if(!Ae.modelManager)return;const st=Ae.modelManager;$e.modelManager=st;const dt=Ae.shadowRenderer;if(!$e._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const ft=$e._unevaluatedLayout._values["model-id"],wt=Object.assign({},$e.layout.get("model-id").parameters),It=Ae.style.order.indexOf($e.fqid),pt=$e.paint.get("model-opacity").constantOr(1);for(const et of Ge){const At=We.getTile(et).getBucket($e);if(!At||At.projection.name!==Re.projection.name)continue;const gt=At.getModelUris();if(gt&&!At.modelsRequested&&(st.addModelsFromBucket(gt,Ne),At.modelsRequested=!0),Je)wt.zoom=et.overscaledZ;else{const rn=Xt(et,Re);wt.zoom=rn}const Dt=ft.possiblyEvaluate(wt);if(Eh(Ae,At,et),Cs.shadowUniformsInitialized=!1,Cs.useSingleShadowCascade=!!dt&&dt.getMaxCascadeForTile(et.toUnwrapped())===0,Ae.renderPass==="shadow"&&dt){if(Ae.currentShadowCascade===1&&At.isInsideFirstShadowMapFrustum)continue;const rn=Re.calculatePosMatrix(et.toUnwrapped(),Re.worldSize);if(Cs.tileMatrix.set(rn),Cs.shadowTileMatrix=Float32Array.from(dt.calculateShadowPassMatrixFromMatrix(rn)),Cs.aabb.min=[0,0,0],Cs.aabb.max[0]=Cs.aabb.max[1]=a.al,Cs.aabb.max[2]=0,Ui(At,Cs,Ae,$e.scope))continue}const qt=1<<et.canonical.z,tn=[((nt.x-et.wrap)*qt-et.canonical.x)*a.al,(nt.y*qt-et.canonical.y)*a.al,nt.z*qt*a.al];Ae.conflationActive&&Object.keys(At.instancesPerModel).length>0&&Ae.style.isLayerClipped($e,We.getSource())&&At.updateReplacement(et,Ae.replacementSource,It,$e.scope)&&(At.uploaded=!1,At.upload(Ae.context));let Wt=0;const Ht=new Array,xn=new Array,yn=new Array;for(let rn in At.instancesPerModel){const _n=At.instancesPerModel[rn];_n.features.length>0&&!Je&&(rn=Dt.evaluate(_n.features[0].feature,{}));const In=st.getModel(rn,Ne);if(In||st.hasURLBeenRequested(rn)||At.modelUris.includes(rn)||(At.modelUris.push(rn),At.modelsRequested=!1),In&&In.uploaded)if(Je){const Un=a.c5([],[nt.x,nt.y,nt.z],Ae.transform.worldSize);a.ew(Un,Un);for(let Qn=0;Qn<_n.instancedDataArray.length;++Qn){const yr=[0,0,0],$n=[1,1,1],Jn=a.ex(),Yn=_n.tileCoordinatesForInstance(Qn),jr=_n.transformForInstance(Qn);a.ey($n,jr),a.ez(Jn,jr),a.eA(yr,Jn);const Mr=_n.translationForInstance(Qn),ei=new a.aT(0,0);a.eB(At.canonical,ei,Yn.x,Yn.y);const wr=a.bC();a.eC(wr,In,Ae.transform,ei,yr,$n,Mr,!0,!1,!1);const er=_n.colorForInstance(Qn),Rr=a.bA([]),Pi=a.ef(ei.lat,Ae.transform.zoom),ti=a.bq([],[1,1,1/Pi]);a.br(Rr,Rr,Un),yn.push({zScaleMatrix:ti,negCameraPosMatrix:Rr});for(const qr of In.nodes)Bd(Ae,qr,wr,Ae.transform.expandedFarZProjMatrix,Wt,Ht,xn,In.materialOverrides,pt,er);++Wt}}else for(const Un of In.nodes)on(Ae,$e,Un,_n,tn,et,Cs)}if(Je)if(Ae.renderPass==="shadow"){for(const rn of xn)um(rn.mesh,rn.nodeModelMatrix,Ae,$e);for(const rn of Ht)um(rn.mesh,rn.nodeModelMatrix,Ae,$e)}else J_(Ae,$e,Ht,xn,yn)}})(_,l,d,v,lm(_,d)),void re();if(!ee.loaded())return;if(ee.type==="batched-model")return(function(Ae,We,$e,Ge){$e.resetLayerRenderingStats(Ae);const Ne=Ae.context,Re=Ae.transform,Je=Ae.style.fog,nt=Ae.shadowRenderer;if(Re.projection.name!=="mercator")return void a.w(`Drawing 3D landmark models for ${Re.projection.name} projection is not yet implemented`);const st=Ae.transform.getFreeCameraOptions().position,dt=a.c5([],[st.x,st.y,st.z],Ae.transform.worldSize),ft=a.ew([],dt),wt=a.bA([]),It=a.ef(Re.center.lat,Re.zoom),pt=a.bq([],[1,1,1/It]);a.br(wt,wt,ft);const et=$e.paint.get("model-opacity").constantOr(1),At=new On(Ne.gl.LEQUAL,On.ReadWrite,Ae.depthRangeFor3D),gt=new On(Ne.gl.LEQUAL,On.ReadOnly,Ae.depthRangeFor3D),Dt=new a.d9([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),qt=Ae.renderPass==="shadow",tn=qt&&nt?nt.getCurrentCascadeFrustum():Re.getFrustum(Re.scaleZoom(Re.worldSize)),Wt=$e.paint.get("model-front-cutoff"),Ht=Wt[2]<1,xn=$l(Ae,$e.paint.get("model-cutoff-fade-range")),yn=$e.getLayerRenderingStats();(function(rn,_n,In,Un){const Qn=rn.terrain?rn.terrain.exaggeration():0,yr=rn.transform.zoom;for(const $n of Un){const Jn=_n.getTile($n).getBucket(In);Jn&&(Jn.setFilter(In.filter),rn.conflationActive&&Jn.updateReplacement($n,rn.replacementSource),Jn.evaluateTransform(rn,In),rn.terrain&&Qn>0&&Jn.elevationUpdate(rn.terrain,Qn,$n,In.source),Jn.needsReEvaluation(rn,yr,In)&&Jn.evaluate(In))}})(Ae,We,$e,Ge),(function(){let rn,_n,In;Ht?(rn=Ge.length-1,_n=-1,In=-1):(rn=0,_n=Ge.length,In=1);const Un=new Float64Array(16),Qn=a.cA(),yr=new a.P(0,0);for(let $n=rn;$n!==_n;$n+=In){const Jn=Ge[$n],Yn=We.getTile(Jn).getBucket($e);if(!Yn||!Yn.uploaded)continue;let jr=!1;nt&&(jr=nt.getMaxCascadeForTile(Jn.toUnwrapped())===0);const Mr=Re.calculatePosMatrix(Jn.toUnwrapped(),Re.worldSize),ei=Yn.modelTraits;!qt&&Ht&&(a.bl(Un,Mr),a.af(Qn,dt,Un),yr.x=Qn[0],yr.y=Qn[1]);const wr=[];Yn.setFilter($e.filter);for(const er of Yn.getNodesInfo()){if(er.hiddenByReplacement||!er.node.meshes)continue;const Rr=er.node;let Pi=0;Ae.terrain&&Rr.elevation&&(Pi=Rr.elevation*Ae.terrain.exaggeration());const ti=(()=>{const Hr=er.aabb;return Dt.min=[...Hr.min],Dt.max=[...Hr.max],Dt.min[2]+=Pi,Dt.max[2]+=Pi,a.af(Dt.min,Dt.min,Mr),a.af(Dt.max,Dt.max,Mr),Dt})(),qr=er.evaluatedScale;if(qr[0]<=1&&qr[1]<=1&&qr[2]<=1&&ti.intersects(tn)===0)continue;if(!qt&&Ht){const Hr=.16666666666666666;er.cameraCollisionOpacity=dt[0]>ti.min[0]&&dt[0]<ti.max[0]&&dt[1]>ti.min[1]&&dt[1]<ti.max[1]&&dt[2]*It<ti.max[2]&&Rr.footprint&&a.c0(yr,Rr.footprint)?Math.max(er.cameraCollisionOpacity-Hr,0):Math.min(1,er.cameraCollisionOpacity+Hr)}const Kn=[...Mr],tr=1/a.d7(Jn.canonical),yi=Rr.anchor?Rr.anchor[0]:0,Ji=Rr.anchor?Rr.anchor[1]:0;a.br(Kn,Kn,[yi*(qr[0]-1)+er.evaluatedTranslation[0]*tr,Ji*(qr[1]-1)+er.evaluatedTranslation[1]*tr,Pi+er.evaluatedTranslation[2]]),a.cq(qr,a.eE)||a.cS(Kn,Kn,qr);const ai=a.aB([],Kn,Rr.globalMatrix),_i=a.aB([],Re.expandedFarZProjMatrix,ai),cs=a.aB([],Re.expandedFarZProjMatrix,Kn),Uo=a.aC([],[yi,Ji,Pi,1],_i)[2];Rr.hidden=!1;let co=et;qt||(Ht&&(co*=er.cameraCollisionOpacity,co*=$0(Kn,Re,er.aabb,Wt)),co*=ht(xn,Uo)),co!==0?wr.push({nodeInfo:er,depth:Uo,opacity:co,wvpForNode:_i,wvpForTile:cs,nodeModelMatrix:ai,tileModelMatrix:Kn}):Rr.hidden=!0}qt||wr.sort((er,Rr)=>!Ht||er.opacity===1&&Rr.opacity===1?er.depth<Rr.depth?-1:1:er.opacity===1?-1:Rr.opacity===1?1:er.depth>Rr.depth?-1:1);for(const er of wr){const Rr=er.nodeInfo,Pi=Rr.node;let ti=a.aB([],pt,er.tileModelMatrix);a.aB(ti,wt,ti);const qr=a.bl([],ti);a.eg(qr,qr),a.cS(qr,qr,jd),ti=a.aB(ti,ti,Pi.globalMatrix);const Kn=Ae.renderPass==="light-beam",tr=$e.paint.get("model-color-use-theme").constantOr("default")==="none",yi=ei&a.eI.HasMapboxMeshFeatures,Ji=yi?0:Rr.evaluatedRMEA[0][2];for(let ai=0;ai<Pi.meshes.length;++ai){const _i=Pi.meshes[ai],cs=ai===Pi.lightMeshIndex;let Uo=er.wvpForNode;if(cs){if(!Kn&&!Ae.terrain&&Ae.shadowRenderer){Ae.currentLayer<Ae.firstLightBeamLayer&&(Ae.firstLightBeamLayer=Ae.currentLayer);continue}Uo=er.wvpForTile}else if(Kn)continue;const co={defines:[]},Hr=[];if(!qt&&nt&&(nt.useNormalOffset=!!_i.normalBuffer),Ol(co.defines,Hr,_i,Ae,tr?null:$e.lut),yi||co.defines.push("DIFFUSE_SHADED"),jr&&co.defines.push("SHADOWS_SINGLE_CASCADE"),yn&&(qt?yn.numRenderedVerticesInShadowPass+=_i.vertexArray.length:yn.numRenderedVerticesInTransparentPass+=_i.vertexArray.length),qt){um(_i,er.nodeModelMatrix,Ae,$e);continue}let ul=null;if(Je){const ba=Q_(er.nodeModelMatrix,Ae.transform);if(ul=new Float32Array(ba),Re.projection.name!=="globe"){const Si=_i.aabb.min,Ia=_i.aabb.max,[no,Wi]=Je.getOpacityForBounds(ba,Si[0],Si[1],Ia[0],Ia[1]);co.overrideFog=no>=hn||Wi>=hn}}const $o=_i.material;let Zo;$o.occlusionTexture&&$o.occlusionTexture.offsetScale&&(Zo=$o.occlusionTexture.offsetScale,co.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Il=Ae.getOrCreateProgram("model",co);!qt&&nt&&nt.setupShadowsFromMatrix(er.tileModelMatrix,Il,nt.useNormalOffset),Ae.uploadCommonUniforms(Ne,Il,null,ul);const qs=$o.pbrMetallicRoughness;qs.metallicFactor=.9,qs.roughnessFactor=.5;const $i=Wu(new Float32Array(Uo),new Float32Array(ti),new Float32Array(qr),new Float32Array(Pi.globalMatrix),Ae,er.opacity,qs.baseColorFactor,$o.emissiveFactor,qs.metallicFactor,qs.roughnessFactor,$o,Ji,$e,[0,0,0],Zo);!cs&&(Rr.hasTranslucentParts||er.opacity<1)&&Il.draw(Ae,Ne.gl.TRIANGLES,At,qn.disabled,Gn.disabled,jn.backCCW,$i,$e.id,_i.vertexBuffer,_i.indexBuffer,_i.segments,$e.paint,Ae.transform.zoom,void 0,Hr),Il.draw(Ae,Ne.gl.TRIANGLES,cs?gt:At,qn.disabled,cs||er.opacity<1||Rr.hasTranslucentParts?Gn.alphaBlended:Gn.unblended,jn.backCCW,$i,$e.id,_i.vertexBuffer,_i.indexBuffer,_i.segments,$e.paint,Ae.transform.zoom,void 0,Hr)}}}})()})(_,l,d,v),void re();if(ee.type!=="model")return;const oe=ee.getModels(),he=[],ce=_.transform.getFreeCameraOptions().position,de=a.c5([],[ce.x,ce.y,ce.z],_.transform.worldSize);a.ew(de,de);const _e=[],Me=[];let Ce=0;for(const Ae of oe){const We=l.getFeatureState("",Ae.id),$e={type:"Unknown",id:Ae.id,properties:Ae.featureProperties},Ge=d.paint.get("model-rotation").evaluate($e,We),Ne=d.paint.get("model-scale").evaluate($e,We),Re=d.paint.get("model-translation").evaluate($e,We),Je=d.paint.get("model-opacity").evaluate($e,We);j0(d,Ae.id,We,Ae.featureProperties,Ae.nodeOverrideNames,Ae.nodeOverrides),U0(d,Ae.id,We,Ae.featureProperties,Ae.materialOverrideNames,Ae.materialOverrides),Ae.nodeOverrides.size>0&&Ae.computeBoundsAndApplyParent(),Ae.computeModelMatrix(_,Ge,Ne,Re,R,M,!1);const nt=a.bA([]),st=a.ef(Ae.position.lat,_.transform.zoom),dt=a.bq([],[1,1,1/st]);a.br(nt,nt,de),he.push({zScaleMatrix:dt,negCameraPosMatrix:nt});for(const ft of Ae.nodes)Bd(_,ft,Ae.matrix,_.transform.expandedFarZProjMatrix,Ce,_e,Me,Ae.materialOverrides,Je);Ce++}if(_e.sort((Ae,We)=>We.depth-Ae.depth),_.renderPass!=="shadow")J_(_,d,_e,Me,he),re();else{for(const Ae of Me)um(Ae.mesh,Ae.nodeModelMatrix,_,d);for(const Ae of _e)um(Ae.mesh,Ae.nodeModelMatrix,_,d);re()}}},nv={line:function(_,l,d){if(_.hasElevatedBuckets=!1,_.hasNonElevatedBuckets=!1,_._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||_._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(l){const v=l.getVisibleCoordinates();for(const T of v){const O=l.getTile(T).getBucket(_);if(O&&(O.elevationType!=="none"?_.hasElevatedBuckets=!0:_.hasNonElevatedBuckets=!0,_.hasElevatedBuckets&&_.hasNonElevatedBuckets))break}}}else _.hasNonElevatedBuckets=!0},model:function(_,l,d){const v=l.getSource();if(!v.loaded())return;if(v.type==="vector"||v.type==="geojson")return void(d.modelManager&&d.modelManager.upload(d,lm(d,_)));if(v.type==="batched-model"||v.type!=="model")return;const T=v.getModels();for(const O of T)O.upload(d.context)},raster:function(_,l,d){const v=l.getSource();if(!(v instanceof xs&&v.loaded()))return;const T=_.sourceLayer||v.rasterLayerIds&&v.rasterLayerIds[0];if(!T)return;const O=_.paint.get("raster-array-band")||v.getInitialBand(T);if(O==null)return;const M=l.getIds().map(R=>l.getTileByID(R));for(const R of M)R.updateNeeded(_.id,O)&&v.prepareTile(R,T,_.id,O)},"raster-particle":function(_,l,d){const v=l.getSource();if(!(v instanceof xs&&v.loaded()))return;const T=_.sourceLayer||v.rasterLayerIds&&v.rasterLayerIds[0];if(!T)return;const O=_.paint.get("raster-particle-array-band")||v.getInitialBand(T);if(O==null)return;const M=l.getIds().map(R=>l.getTileByID(R));for(const R of M)R.updateNeeded(_.id,O)&&v.prepareTile(R,T,_.id,O)}},ny={fill:P0},H0={fill:function(_,l,d,v){if(!d.layout||d.layout.get("fill-elevation-reference")==="none"||d.paint.get("fill-opacity").constantOr(1)===0)return;const T=_.context.gl,O=new On(T.LEQUAL,On.ReadOnly,_.depthRangeFor3D),M=new qn({func:T.ALWAYS,mask:255},255,255,T.KEEP,T.KEEP,T.REPLACE),R=_.transform.getFreeCameraOptions().position,F=_.getOrCreateProgram("elevatedStructuresDepthReconstruct");for(const q of v){const H=l.getTile(q),re=H.getBucket(d);if(!re)continue;const ee=re.elevatedStructures;if(!ee||ee.depthSegments.segments[0].primitiveLength===0)continue;const oe=xh(q.toUnwrapped(),R),he=_.translatePosMatrix(q.projMatrix,H,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor")),ce=_h(he,oe,0,1,0);F.draw(_,T.TRIANGLES,O,M,Gn.disabled,jn.disabled,ce,d.id,ee.vertexBuffer,ee.indexBuffer,ee.depthSegments,d.paint,_.transform.zoom)}}};class rv{constructor(l,d,v,T,O){this.context=new du(l,d),this.transform=v,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this._timeStamp=a.o.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const M=["fill","line","symbol","circle","heatmap","fill-extrusion","building","raster","raster-particle","hillshade","model","background","sky"];for(const F of M)this._debugParams.enabledLayers[F]=!0;for(const F of M);this.occlusionParams=new tv,this.setup(),this.numSublayers=eo.maxUnderzooming+eo.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new a.eP,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Ag(this),this._wireframeDebugCache=new Kg,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const R=new a.q({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new a.T(this.context,R,l.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=T,this.worldview=O,this._forceEmissiveMode=!1,this.emissiveMode="constant"}updateTerrain(l,d){const v=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(v||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new nm(this,l));const T=this._terrain;this.transform.elevation=v?T:null,T.update(l,this.transform,d),this.transform.elevation&&!T.enabled&&(this.transform.elevation=null)}_updateFog(l){const d=l.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[v,T]=d.getFovAdjustedRange(this.transform._fov);if(v>T)return void(this.transform.fogCullDistSq=null);const O=v+.78*(T-v);this.transform.fogCullDistSq=O*O}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(l){l&&!this._terrain&&(this._terrain=new nm(this,this.style)),this._forceTerrainMode=l}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(l,d){if(this.width=l*a.o.devicePixelRatio,this.height=d*a.o.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style.order)this.style._mergedLayers[v].resize()}setup(){const l=this.context,d=new a.bd;d.emplaceBack(0,0),d.emplaceBack(a.al,0),d.emplaceBack(0,a.al),d.emplaceBack(a.al,a.al),this.tileExtentBuffer=l.createVertexBuffer(d,a.bf.members),this.tileExtentSegments=a.bg.simpleSegment(0,0,4,2);const v=new a.bd;v.emplaceBack(0,0),v.emplaceBack(a.al,0),v.emplaceBack(0,a.al),v.emplaceBack(a.al,a.al),this.debugBuffer=l.createVertexBuffer(v,a.bf.members),this.debugSegments=a.bg.simpleSegment(0,0,4,5);const T=new a.bd;T.emplaceBack(-1,-1),T.emplaceBack(1,-1),T.emplaceBack(-1,1),T.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(T,a.bf.members),this.viewportSegments=a.bg.simpleSegment(0,0,4,2);const O=new a.b1;O.emplaceBack(0,0,0,0),O.emplaceBack(a.al,0,a.al,0),O.emplaceBack(0,a.al,0,a.al),O.emplaceBack(a.al,a.al,a.al,a.al),this.mercatorBoundsBuffer=l.createVertexBuffer(O,a.bi.members),this.mercatorBoundsSegments=a.bg.simpleSegment(0,0,4,2);const M=new a.b0;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(M);const R=new a.be;for(const q of[0,1,3,2,0])R.emplaceBack(q);this.debugIndexBuffer=l.createIndexBuffer(R),this.emptyTexture=new a.T(l,new a.q({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA8),this.identityMat=a.bC();const F=this.context.gl;this.stencilClearMode=new qn({func:F.ALWAYS,mask:0},0,255,F.ZERO,F.ZERO,F.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,l.TRIANGLES,On.disabled,this.stencilClearMode,Gn.disabled,jn.disabled,tm(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,d,v){if(!d||this.currentStencilSource===d.id||!l.isTileClipped()||!v||v.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let R=!1;for(const F of v)if(this._tileClippingMaskIDs[F.key]===void 0){R=!0;break}if(!R)return}this.currentStencilSource=d.id;const T=this.context,O=T.gl;this.nextStencilID+v.length>256&&this.clearStencil(),T.setColorMode(Gn.disabled),T.setDepthMode(On.disabled);const M=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const R of v){const F=d.getTile(R),q=this._tileClippingMaskIDs[R.key]=this.nextStencilID++,{tileBoundsBuffer:H,tileBoundsIndexBuffer:re,tileBoundsSegments:ee}=this.getTileBoundsBuffers(F);M.draw(this,O.TRIANGLES,On.disabled,new qn({func:O.ALWAYS,mask:0},q,255,O.KEEP,O.KEEP,O.REPLACE),Gn.disabled,jn.disabled,tm(R.projMatrix),"$clipping",H,re,ee)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,d=this.context.gl;return new qn({func:d.NOTEQUAL,mask:255},l,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const d=this.context.gl;return new qn({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(l){const d=this.context.gl,v=l.sort((M,R)=>R.overscaledZ-M.overscaledZ),T=v[v.length-1].overscaledZ,O=v[0].overscaledZ-T+1;if(O>1){this.currentStencilSource=void 0,this.nextStencilID+O>256&&this.clearStencil();const M={};for(let R=0;R<O;R++)M[R+T]=new qn({func:d.GEQUAL,mask:255},R+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=O,[M,v]}return[{[T]:qn.disabled},v]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Gn([l.CONSTANT_COLOR,l.ONE,l.CONSTANT_COLOR,l.ONE],new a.ao(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Gn.unblended:Gn.alphaBlended}colorModeForDrapableLayerRenderPass(l){const d=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?l!=null&&this.emissiveMode!=="mrt-fallback"||this.emissiveMode==="constant"?new Gn([d.ONE,d.ONE_MINUS_SRC_ALPHA,d.CONSTANT_ALPHA,d.ONE_MINUS_SRC_ALPHA],new a.ao(0,0,0,l??0),[!0,!0,!0,!0]):this.emissiveMode==="dual-source-blending"?new Gn([d.ONE,d.ONE_MINUS_SRC_ALPHA,this.context.extBlendFuncExtended.SRC1_ALPHA_WEBGL,d.ONE_MINUS_SRC_ALPHA],a.ao.transparent,[!0,!0,!0,!0]):this.colorModeForRenderPass():this.colorModeForRenderPass()}depthModeForSublayer(l,d,v,T=!1){if(this.depthOcclusion)return new On(this.context.gl.GREATER,On.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!T)return On.disabled;const O=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new On(v||this.context.gl.LEQUAL,d,[O,O])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const l=this.context.gl,d=Math.ceil(this.width),v=Math.ceil(this.height),T=this.context.bindFramebuffer.get(),O=l.getParameter(l.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===d&&this.depthFBO.height===v||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),d!==0&&v!==0&&(this.depthFBO=new Bc(this.context,d,v,0,"texture"),this.depthTexture=new a.T(this.context,{width:d,height:v,data:null},l.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(T),l.bindTexture(l.TEXTURE_2D,O),this.depthFBO&&(l.bindFramebuffer(l.READ_FRAMEBUFFER,null),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),l.blitFramebuffer(0,0,d,v,0,0,d,v,l.DEPTH_BUFFER_BIT,l.NEAREST),l.bindFramebuffer(l.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((l,d)=>l+d/this._fpsHistory.length,0))}render(l,d){const v=a.o.now();this._dt=v-this._timeStamp,this._timeStamp=v,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=l.map.repaint,this.style=l,this.options=d;const T=this.style._mergedLayers,O=!(!this.terrain||!this.terrain.enabled),M=()=>this.style._getOrder(O).filter(pt=>{const et=T[pt];return!(et.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[et.type]});let R=M(),F=!1,q=!1,H=null,re=0,ee=!1;for(const pt of R){const et=T[pt];et.visibility!=="none"&&(et.type==="circle"?F=!0:et.type==="building"?(H=et,++re):et.type==="symbol"&&(et.hasOcclusionOpacityProperties?q=!0:F=!0))}this.updateEmissiveMode();let oe=R.map(pt=>T[pt]);const he=this.style._mergedSourceCaches;this.imageManager=l.imageManager,this.modelManager=l.modelManager,this.symbolFadeChange=l.placement.symbolFadeChange(a.o.now()),this.imageManager.beginFrame();for(const pt in he){const et=he[pt];et.used&&(et.prepare(this.context),et.getSource().usedInConflation&&++re)}let ce=!1;for(const pt of oe)pt.isHidden(this.transform.zoom)||(pt.type==="clip"&&(ce=!0),this.prepareLayer(pt));const de={},_e={},Me={},Ce={},Ae={};for(const pt in he){const et=he[pt];de[pt]=et.getVisibleCoordinates(),_e[pt]=de[pt].slice().reverse(),Me[pt]=et.getVisibleCoordinates(!0).reverse(),Ce[pt]=et.getShadowCasterCoordinates(),Ae[pt]=et.sortCoordinatesByDistance(de[pt])}const We=pt=>{const et=this.style.getLayerSourceCache(pt);return et&&et.used?et.getSource():null};if(re||ce||this._clippingActiveLastFrame){const pt=[],et=[];let At=0;for(const gt of oe)this.isSourceForClippingOrConflation(gt,We(gt))&&(pt.push(gt),et.push(At)),At++;if(pt&&(ce||pt.length>1)||this._clippingActiveLastFrame){ce=!1;const gt=[];for(let Dt=0;Dt<pt.length;Dt++){const qt=pt[Dt],tn=et[Dt],Wt=this.style.getLayerSourceCache(qt);if(!Wt||!Wt.used||!Wt.getSource().usedInConflation&&qt.type!=="clip"&&qt.type!=="building")continue;let Ht=a.eQ,xn=a.b_.None;const yn=[];let rn=!0;if(qt.type==="building")Ht=a.eS;else if(qt.type==="clip")if(Ht=tn,qt.isHidden(this.transform.zoom))rn=!1;else{if(!qt.layout){rn=!1;continue}for(const _n of qt.layout.get("clip-layer-types"))xn|=_n==="model"?a.b_.Model:_n==="symbol"?a.b_.Symbol:a.b_.FillExtrusion;for(const _n of qt.layout.get("clip-layer-scope"))yn.push(_n);ce=!0}rn&&gt.push({layer:qt.fqid,cache:Wt,order:Ht,clipMask:xn,clipScope:yn})}this.replacementSource.setSources(gt),ee=!0}}this._clippingActiveLastFrame=ce,ee||this.replacementSource.clear(),this.conflationActive=ee,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let pt=0;pt<oe.length;pt++){const et=oe[pt];if(et.visibility==="none")continue;const At=et.cutoffRange();if(this.longestCutoffRange=Math.max(At,this.longestCutoffRange),At>0){const gt=We(et);gt&&(this.minCutoffZoom=Math.max(gt.minzoom,this.minCutoffZoom)),et.minzoom&&(this.minCutoffZoom=Math.max(et.minzoom,this.minCutoffZoom))}et.is3D(O)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=pt),this._lastOcclusionLayer=pt)}const $e=this.style&&this.style.fog;$e?(this._fogVisible=$e.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=$e.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(Me),this.opaquePassCutoff=0,R=M(),oe=R.map(pt=>T[pt]));const Ge=this._shadowRenderer;if(Ge){Ge.updateShadowParameters(this.transform,this.style.directionalLight);for(const pt in he)for(const et of de[pt]){let At={min:0,max:0};this.terrain&&(At=this.terrain.getMinMaxForTile(et)||At),Ge.addShadowReceiver(et.toUnwrapped(),At.min,At.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new a.eR(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new K_(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const Ne=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),Re=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(Ne&&!this._snow&&(this._snow=new fm(this)),!Ne&&this._snow&&(this._snow.destroy(),delete this._snow),Re&&!this._rain&&(this._rain=new ey(this)),!Re&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),H){this.buildingTileBorderManager||(this.buildingTileBorderManager=new Th);const pt=this.style.getLayerSourceCache(H);this.buildingTileBorderManager.updateBorders(pt,H)}if(!An.has(this.context.gl))return;this.renderPass="offscreen";for(const pt of oe){const et=l.getLayerSourceCache(pt);if(!pt.hasOffscreenPass()||pt.isHidden(this.transform.zoom))continue;const At=et?_e[et.id]:void 0;(pt.type==="custom"||pt.type==="raster"||pt.type==="raster-particle"||pt.isSky()||At&&At.length)&&this.renderLayer(this,et,pt,At)}this.depthRangeFor3D=[0,1-(oe.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Ce)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Je=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),nt=(()=>{if(d.showOverdrawInspector)return a.ao.black;const pt=this.style.fog;if(pt&&this.transform.projection.supportsFog){const et=this.style.getLut(pt.scope);if(!Je){const At=pt.properties.get("color-use-theme")==="none",gt=pt.properties.get("color").toNonPremultipliedRenderColor(At?null:et).toArray01();return new a.ao(...gt)}if(Je){const At=pt.properties.get("space-color-use-theme")==="none",gt=pt.properties.get("space-color").toNonPremultipliedRenderColor(At?null:et).toArray01();return new a.ao(...gt)}}return a.ao.transparent})();if(this.context.clear({color:nt,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Je&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=R.length-1;this.currentLayer>=0;this.currentLayer--){const pt=oe[this.currentLayer],et=l.getLayerSourceCache(pt);if(pt.isSky())continue;const At=et?(pt.is3D(O)?Ae:_e)[et.id]:void 0;this._renderTileClippingMasks(pt,et,At),this.renderLayer(this,et,pt,At)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Je&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||a.aj(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<R.length;this.currentLayer++){const pt=oe[this.currentLayer],et=l.getLayerSourceCache(pt);pt.isSky()&&this.renderLayer(this,et,pt,et?_e[et.id]:void 0)}function st(pt,et){let At;return et&&(At=(pt.type==="symbol"?Me:pt.is3D(O)?Ae:_e)[et.id]),At}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<R.length;){const pt=oe[this.currentLayer];if(pt.type==="raster"||pt.type==="raster-particle"){const et=l.getLayerSourceCache(pt);this.renderLayer(this,et,pt,st(pt,et))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;const dt=Ge?Ge.getGroundShadowLayerIndex():-1;let ft=!1,wt=-1;for(let pt=0;pt<R.length;++pt){const et=oe[pt];et.isHidden(this.transform.zoom)||et.is3D(O)&&(wt=pt)}q&&wt===-1&&(F=!0);let It=!1;for(;this.currentLayer<R.length;){const pt=oe[this.currentLayer],et=l.getLayerSourceCache(pt);if(pt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(pt)){if(pt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!It&&pt.is3D(O)&&!O){const At=this.currentLayer,gt=Dt=>{for(this.currentLayer=0;this.currentLayer<oe.length;this.currentLayer++){const qt=oe[this.currentLayer];if(ny[qt.type]){const tn=this.style.getLayerSourceCache(qt);ny[qt.type](this,tn,qt,st(qt,tn),Dt)}}};gt("initialize"),gt("reset"),this.currentLayer=At,It=!0}if(F&&!ft&&this.terrain&&!this.transform.isOrthographic&&(ft=!0,this.blitDepth()),q&&wt!==-1&&this.currentLayer===wt+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(pt,et,et?de[et.id]:void 0),this.renderLayer(this,et,pt,st(pt,et)),!this.terrain&&Ge&&this.currentLayer===dt){{this.clearStencil(),this.resetStencilClippingMasks();const At=this.currentLayer;for(this.currentLayer=0;this.currentLayer<oe.length;this.currentLayer++){const gt=oe[this.currentLayer];if(H0[gt.type]){const Dt=this.style.getLayerSourceCache(gt);H0[gt.type](this,Dt,gt,st(gt,Dt))}}this.currentLayer=At}if(Ge.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer){const At=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=At;this.currentLayer++){const gt=oe[this.currentLayer];if(!gt.hasLightBeamPass())continue;const Dt=l.getLayerSourceCache(gt);this.renderLayer(this,Dt,gt,Dt?_e[Dt.id]:void 0)}this.currentLayer=At,this.renderPass="translucent"}}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const At=this.currentLayer;this.depthOcclusion=!0;for(const gt of this.layersWithOcclusionOpacity){this.currentLayer=gt;const Dt=oe[this.currentLayer],qt=l.getLayerSourceCache(Dt),tn=qt?_e[qt.id]:void 0;this.terrain||this._renderTileClippingMasks(Dt,qt,qt?de[qt.id]:void 0),this.renderLayer(this,qt,Dt,tn)}this.depthOcclusion=!1,this.currentLayer=At,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let pt=null;oe.forEach(et=>{const At=l.getLayerSourceCache(et);At&&!et.isHidden(this.transform.zoom)&&At.getVisibleCoordinates().length&&(!pt||pt.getSource().maxzoom<At.getSource().maxzoom)&&(pt=At)}),pt&&this.options.showTileBoundaries&&k0(this,pt,pt.getVisibleCoordinates(),a.ao.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&k0(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new a.ao(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&(function(pt){const et=pt.transform.padding;L0(pt,pt.transform.height-(et.top||0),3,W_),L0(pt,et.bottom||0,3,X_),z0(pt,et.left||0,3,Z_),z0(pt,pt.transform.width-(et.right||0),3,c1);const At=pt.transform.centerPoint;(function(gt,Dt,qt,tn){Zg(gt,Dt-1,qt-10,2,20,tn),Zg(gt,Dt-10,qt-1,20,2,tn)})(pt,At.x,pt.transform.height-At.y,f1)})(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),ee||(this.conflationActive=!1)}prepareLayer(l){this.gpuTimingStart(l);const{unsupportedLayers:d}=this.transform.projection,v=!d||!d.includes(l.type);if(nv[l.type]&&(v||this.terrain&&l.type==="custom")){const T=this.style.getLayerSourceCache(l);nv[l.type](l,T,this)}this.gpuTimingEnd()}renderLayer(l,d,v,T){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="sky"||v.type==="custom"||v.type==="model"||v.type==="raster"||v.type==="raster-particle"||T&&T.length)&&(this.id=v.id,this.gpuTimingStart(v),l.transform.projection.unsupportedLayers&&l.transform.projection.unsupportedLayers.includes(v.type)&&(!l.terrain||v.type!=="custom")||v.type==="clip"||Ku[v.type](l,d,v,T,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery,v=this.context.gl;let T=this.gpuTimers[l.id];T||(T=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:v.createQuery()}),T.calls++,v.beginQuery(d.TIME_ELAPSED_EXT,T.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,d=this.context.gl,v=d.createQuery();this.deferredRenderGpuTimeQueries.push(v),d.beginQuery(l.TIME_ELAPSED_EXT,v)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const d={};for(const v in l){const T=l[v],O=this.context.extTimerQuery,M=O.getQueryParameter(T.query,this.context.gl.QUERY_RESULT)/1e6;O.deleteQueryEXT(T.query),d[v]=M}return d}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.gl;let v=0;for(const T of l)v+=d.getQueryParameter(T,d.QUERY_RESULT)/1e6,d.deleteQuery(T);return v}translatePosMatrix(l,d,v,T,O){if(!v[0]&&!v[1])return l;const M=O?T==="map"?this.transform.angle:0:T==="viewport"?-this.transform.angle:0;if(M){const q=Math.sin(M),H=Math.cos(M);v=[v[0]*H-v[1]*q,v[0]*q+v[1]*H]}const R=[O?v[0]:a.ay(d,v[0],this.transform.zoom),O?v[1]:a.ay(d,v[1],this.transform.zoom),0],F=new Float32Array(16);return a.br(F,l,R),F}saveTileTexture(l){if(l.context!==this.context)return;const d=l.size[0],v=this._tileTextures[d];v?v.push(l):this._tileTextures[d]=[l]}getTileTexture(l){const d=this._tileTextures[l];return d&&d.length>0?d.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(l,d,v){const T=v===void 0?this.terrain&&this.terrain.renderingToTexture:v,O=[];return this.style&&this.style.enable3dLights()&&(l==="globeRaster"||l==="terrainRaster"?(O.push("LIGHTING_3D_MODE"),O.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):T||O.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||O.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(O.push("TERRAIN"),this.linearFloatFilteringSupported()&&O.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&O.push("GLOBE"),!this._fogVisible||T||d!==void 0&&!d||O.push("FOG"),T&&O.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&O.push("OVERDRAW_INSPECTOR"),O}getOrCreateProgram(l,d){this.cache=this.cache||{};const v=d&&d.defines||[],T=d&&d.config,O=this.currentGlobalDefines(l,d&&d.overrideFog,d&&d.overrideRtt).concat(v),M=Bg.cacheKey(N_[l],l,O,T);return this.cache[M]||(this.cache[M]=new Bg(this.context,l,N_[l],T,Hg[l],O)),this.cache[M]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(l,d){if(this.style.enable3dLights()){const v=this.style.directionalLight,T=this.style.ambientLight;if(v&&T){const O=((M,R,F)=>{const q=M.properties.get("direction"),H=M.properties.get("color-use-theme")==="none",re=M.properties.get("color").toNonPremultipliedRenderColor(H?null:F.getLut(M.scope)).toArray01(),ee=M.properties.get("intensity"),oe=R.properties.get("color-use-theme")==="none",he=R.properties.get("color").toNonPremultipliedRenderColor(oe?null:F.getLut(R.scope)).toArray01(),ce=R.properties.get("intensity"),de=[q.x,q.y,q.z],_e=a.dN(he,ce),Me=a.dN(re,ee);return{u_lighting_ambient_color:_e,u_lighting_directional_dir:de,u_lighting_directional_color:Me,u_ground_radiance:Cd(de,Me,_e)}})(v,T,this.style);d.setLightsUniformValues(l,O)}}}uploadCommonUniforms(l,d,v,T,O){if(this.uploadCommonLightUniforms(l,d),this.terrain&&this.terrain.renderingToTexture)return;const M=this.style.fog;if(M){const R=M.getOpacity(this.transform.pitch),F=((q,H,re,ee,oe,he,ce,de,_e,Me,Ce,Ae)=>{const We=q.transform,$e=H.properties.get("color-use-theme")==="none",Ge=H.properties.get("color").toNonPremultipliedRenderColor($e?null:q.style.getLut(H.scope)).toArray01();Ge[3]=ee;const Ne=q.frameCounter/1e3%1,[Re,Je]=H.properties.get("vertical-range");return{u_fog_matrix:re?We.calculateFogTileMatrix(re):Ae||q.identityMat,u_fog_range:H.getFovAdjustedRange(We._fov),u_fog_color:Ge,u_fog_horizon_blend:H.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Re,Je),Je],u_fog_temporal_offset:Ne,u_frustum_tl:oe,u_frustum_tr:he,u_frustum_br:ce,u_frustum_bl:de,u_globe_pos:_e,u_globe_radius:Me,u_viewport:Ce,u_globe_transition:a.aj(We.zoom),u_is_globe:+(We.projection.name==="globe")}})(this,M,v,R,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*a.o.devicePixelRatio,this.transform.height*a.o.devicePixelRatio],T);d.setFogUniformValues(l,F)}O&&d.setCutoffUniformValues(l,O.uniformValues)}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,d=l.createTexture();return l.bindTexture(l.TEXTURE_2D,d),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,d=this._backgroundTiles={},v=this.transform.coveringTiles({tileSize:512});for(const T of v)d[T.key]=l[T.key]||new ff(T,512,this.transform.tileZoom,this,void 0,this.worldview);return d}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(l,d){return!(!l.is3D(!(!this.terrain||!this.terrain.enabled))||l.type!=="clip"&&l.type!=="building"&&(l.minzoom&&l.minzoom>this.transform.zoom||(this.style._clipLayerPresent||l.sourceLayer!=="building"&&l.sourceLayer!=="procedural_buildings")&&(!d||d.type!=="batched-model")))}isTileAffectedByFog(l){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let d=this._cachedTileFogOpacities[l.key];return d||(this._cachedTileFogOpacities[l.key]=d=this.style.fog.getOpacityForTile(l)),d[0]>=hn||d[1]>=hn}setupDepthForOcclusion(l,d,v){const T=this.context,O=T.gl,M=!!v;var R;v||(v={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),T.activeTexture.set(O.TEXTURE3),l&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE),v.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],v.u_depth_range_unpack=[2/((R=this.depthRangeFor3D)[1]-R[0]),-1-2*R[0]/(R[1]-R[0])],v.u_occluder_half_size=.5*this.occlusionParams.occluderSize,v.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE),T.activeTexture.set(O.TEXTURE0),M||d.setTerrainUniformValues(T,v)}updateEmissiveMode(){if(this._forceEmissiveMode)return;const l=this.style.hasDataDrivenEmissiveStrength();this.emissiveMode=l?this.context.extBlendFuncExtended?"dual-source-blending":"mrt-fallback":"constant"}}function iv(_,l){let d=!1,v=null;const T=()=>{v=null,d&&(_(),v=setTimeout(T,l),d=!1)};return()=>(d=!0,v||T(),v)}class Ms{constructor(l){this._hashName=l&&encodeURIComponent(l),a.aY(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=iv(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const d=G0(l);if(this._hashName){const v=this._hashName;let T=!1;const O=location.hash.slice(1).split("&").map(M=>{const R=M.split("=")[0];return R===v?(T=!0,`${R}=${d}`):M}).filter(M=>M);return T||O.push(`${v}=${d}`),`#${O.join("&")}`}return`#${d}`}_getCurrentHash(){const l=location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(d=v)}),(d&&d[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(v=>isNaN(Number(v)))){const v=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(d[3]||0):l.getBearing();return l.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function G0(_,l){const d=_.getCenter(),v=Math.round(100*_.getZoom())/100,T=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),O=Math.pow(10,T),M=Math.round(d.lng*O)/O,R=Math.round(d.lat*O)/O,F=_.getBearing(),q=_.getPitch();let H=l?`/${M}/${R}/${v}`:`${v}/${R}/${M}`;return(F||q)&&(H+="/"+Math.round(10*F)/10),q&&(H+=`/${Math.round(q)}`),H}const Ml={linearity:.3,easing:a.eT(0,0,.3,1)},p1=Object.assign({deceleration:2500,maxSpeed:1400},Ml),Ei=Object.assign({deceleration:20,maxSpeed:1400},Ml),gr=Object.assign({deceleration:1e3,maxSpeed:360},Ml),ry=Object.assign({deceleration:1e3,maxSpeed:90},Ml);class Rf{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.o.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,d=a.o.now();for(;l.length>0&&d-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:O}of this._inertiaBuffer)d.zoom+=O.zoomDelta||0,d.bearing+=O.bearingDelta||0,d.pitch+=O.pitchDelta||0,O.panDelta&&d.pan._add(O.panDelta),O.around&&(d.around=O.around),O.pinchAround&&(d.pinchAround=O.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,T={};if(d.pan.mag()){const O=$c(d.pan.mag(),v,Object.assign({},p1,l||{}));T.offset=d.pan.mult(O.amount/d.pan.mag()),T.center=this._map.transform.center,Qu(T,O)}if(d.zoom){const O=$c(d.zoom,v,Ei);T.zoom=this._map.transform.zoom+O.amount,Qu(T,O)}if(d.bearing){const O=$c(d.bearing,v,gr);T.bearing=this._map.transform.bearing+a.aA(O.amount,-179,179),Qu(T,O)}if(d.pitch){const O=$c(d.pitch,v,ry);T.pitch=this._map.transform.pitch+O.amount,Qu(T,O)}if(T.zoom||T.bearing){const O=d.pinchAround===void 0?d.around:d.pinchAround;T.around=O?this._map.unproject(O):this._map.getCenter()}return this.clear(),T.noMoveStart=!0,T}}function Qu(_,l){(!_.duration||_.duration<l.duration)&&(_.duration=l.duration,_.easing=l.easing)}function $c(_,l,d){const{maxSpeed:v,linearity:T,deceleration:O}=d,M=a.aA(_*T/(l/1e3),-v,v),R=Math.abs(M)/(O*T);return{easing:d.easing,duration:1e3*R,amount:M*(R/2)}}class To extends a.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,v,T={}){const O=X(d.getCanvasContainer(),v),M=d.unproject(O);super(l,Object.assign({point:O,lngLat:M,originalEvent:v},T)),this._defaultPrevented=!1,this.target=d}}class hm extends a.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,v){const T=l==="touchend"?v.changedTouches:v.touches,O=ae(d.getCanvasContainer(),T),M=O.map(F=>d.unproject(F)),R=O.reduce((F,q,H,re)=>F.add(q.div(re.length)),new a.P(0,0));super(l,{points:O,point:R,lngLats:M,lngLat:d.unproject(R),originalEvent:v}),this._defaultPrevented=!1}}class iy extends a.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d){super("wheel",{originalEvent:d}),this._defaultPrevented=!1}}class lo{constructor(l,d){this._map=l,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new iy(this._map,l))}mousedown(l,d){return this._mousedownPos=d,this._firePreventable(new To(l.type,this._map,l))}mouseup(l){this._map.fire(new To(l.type,this._map,l))}preclick(l){const d=new MouseEvent("preclick",l);this._map.fire(new To(d.type,this._map,d))}click(l,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(l),this._map.fire(new To(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new To(l.type,this._map,l))}mouseover(l){this._map.fire(new To(l.type,this._map,l))}mouseout(l){this._map.fire(new To(l.type,this._map,l))}touchstart(l){return this._firePreventable(new hm(l.type,this._map,l))}touchmove(l){this._map.fire(new hm(l.type,this._map,l))}touchend(l){this._map.fire(new hm(l.type,this._map,l))}touchcancel(l){this._map.fire(new hm(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xo{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new To(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new To("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new To(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yl{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,d){this.isEnabled()&&l.shiftKey&&l.button===0&&(ie(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(l,d){if(!this._active)return;const v=d,T=this._startPos,O=this._lastPos;if(!T||!O||O.equals(v)||!this._box&&v.dist(T)<this._clickTolerance)return;this._lastPos=v,this._box||(this._box=j("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const M=Math.min(T.x,v.x),R=Math.max(T.x,v.x),F=Math.min(T.y,v.y),q=Math.max(T.y,v.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${M}px,${F}px)`,this._box.style.width=R-M+"px",this._box.style.height=q-F+"px")})}mouseupWindow(l,d){if(!this._active)return;const v=this._startPos,T=d;if(v&&l.button===0){if(this.reset(),te(),v.x!==T.x||v.y!==T.y)return this._map.fire(new a.z("boxzoomend",{originalEvent:l})),{cameraAnimation:O=>O.fitScreenCoordinates(v,T,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Q(),delete this._startPos,delete this._lastPos}_fireEvent(l,d){return this._map.fire(new a.z(l,{originalEvent:d}))}}function Ju(_,l){const d={};for(let v=0;v<_.length;v++)d[_[v].identifier]=l[v];return d}class $d{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),v.length===this.numTouches&&(this.centroid=(function(T){const O=new a.P(0,0);for(const M of T)O._add(M);return O.div(T.length)})(d),this.touches=Ju(v,d)))}touchmove(l,d,v){if(this.aborted||!this.centroid)return;const T=Ju(v,d);for(const O in this.touches){const M=T[O];(!M||M.dist(this.touches[O])>30)&&(this.aborted=!0)}}touchend(l,d,v){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const T=!this.aborted&&this.centroid;if(this.reset(),T)return T}}}class Vd{constructor(l){this.singleTap=new $d(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,d,v){this.singleTap.touchstart(l,d,v)}touchmove(l,d,v){this.singleTap.touchmove(l,d,v)}touchend(l,d,v){const T=this.singleTap.touchend(l,d,v);if(T){const O=l.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(T)<30;if(O&&M||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=T,this.count===this.numTaps)return this.reset(),T}}}class qd{constructor(){this._zoomIn=new Vd({numTouches:1,numTaps:2}),this._zoomOut=new Vd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,d,v){this._zoomIn.touchstart(l,d,v),this._zoomOut.touchstart(l,d,v)}touchmove(l,d,v){this._zoomIn.touchmove(l,d,v),this._zoomOut.touchmove(l,d,v)}touchend(l,d,v){const T=this._zoomIn.touchend(l,d,v),O=this._zoomOut.touchend(l,d,v);return T?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()+1,around:M.unproject(T)},{originalEvent:l})}):O?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()-1,around:M.unproject(O)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const av=0,ec=2,ov={[av]:1,[ec]:2},Wl={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class Ah{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,d){return!1}_move(l,d){return{}}mousedown(l,d){if(this._lastPoint)return;const v=le(l);this._correctButton(l,v)&&(this._lastPoint=d,this._eventButton=v)}mousemoveWindow(l,d){const v=this._lastPoint;if(v){if(l.preventDefault(),this._eventButton!=null&&(function(T,O){const M=ov[O];return T.buttons===void 0||(T.buttons&M)!==M})(l,this._eventButton))this.reset();else if(this._moved||!(d.dist(v)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(v,d)}}mouseupWindow(l){this._lastPoint&&le(l)===this._eventButton&&(this._moved&&te(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dm extends Ah{mousedown(l,d){super.mousedown(l,d),this._lastPoint&&(this._active=!0)}_correctButton(l,d){return d===0&&!l.ctrlKey}_move(l,d){return{around:d,panDelta:d.sub(l)}}}class ay extends Ah{constructor(l){super(l),this._pitchRotateKey=l.pitchRotateKey?Wl[l.pitchRotateKey]:void 0}_correctButton(l,d){return this._pitchRotateKey?d===0&&l[this._pitchRotateKey]:d===0&&l.ctrlKey||d===2}_move(l,d){const v=.8*(d.x-l.x);if(v)return this._active=!0,{bearingDelta:v}}contextmenu(l){this._pitchRotateKey||l.preventDefault()}}class oy extends Ah{constructor(l){super(l),this._pitchRotateKey=l.pitchRotateKey?Wl[l.pitchRotateKey]:void 0}_correctButton(l,d){return this._pitchRotateKey?d===0&&l[this._pitchRotateKey]:d===0&&l.ctrlKey||d===2}_move(l,d){const v=-.5*(d.y-l.y);if(v)return this._active=!0,{pitchDelta:v}}contextmenu(l){this._pitchRotateKey||l.preventDefault()}}class Xa{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),a.aY(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}touchstart(l,d,v){return this._calculateTransform(l,d,v)}touchmove(l,d,v){if(this._active&&!(v.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(v.length===1&&!a.eU())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,d,v)}}touchend(l,d,v){this._calculateTransform(l,d,v),this._active&&v.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,d,v){v.length>0&&(this._active=!0);const T=Ju(v,d),O=new a.P(0,0),M=new a.P(0,0);let R=0;for(const q in T){const H=T[q],re=this._touches[q];re&&(O._add(H),M._add(H.sub(re)),R++,T[q]=H)}if(this._touches=T,R<this._minTouches||!M.mag())return;const F=M.div(R);return this._sum._add(F),this._sum.mag()<this._clickTolerance?void 0:{around:O.div(R),panDelta:F}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=j("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Hd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,d,v){return{}}touchstart(l,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(l,d,v){const T=this._firstTwoTouches;if(!T)return;l.preventDefault();const[O,M]=T,R=Oh(v,d,O),F=Oh(v,d,M);if(!R||!F)return;const q=this._aroundCenter?null:R.add(F).div(2);return this._move([R,F],q,l)}touchend(l,d,v){if(!this._firstTwoTouches)return;const[T,O]=this._firstTwoTouches,M=Oh(v,d,T),R=Oh(v,d,O);M&&R||(this._active&&te(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Oh(_,l,d){for(let v=0;v<_.length;v++)if(_[v].identifier===d)return l[v]}function pm(_,l){return Math.log2(_/l)}class Ch extends Hd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,d){const v=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(pm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:pm(this._distance,v),pinchAround:d}}}function mm(_,l){return 180*_.angleWith(l)/Math.PI}class gm extends Hd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,d){const v=this._vector;if(this._vector=l[0].sub(l[1]),v&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:mm(this._vector,v),pinchAround:d}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const d=25/(Math.PI*this._minDiameter)*360,v=this._startVector;if(!v)return!1;const T=mm(l,v);return Math.abs(T)<d}}function Gd(_){return Math.abs(_.y)>Math.abs(_.x)}class Mh extends Hd{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,Gd(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,d,v){const T=this._lastPoints;if(!T)return;const O=l[0].sub(T[0]),M=l[1].sub(T[1]);return this._map._cooperativeGestures&&!a.eU()&&v.touches.length<3||(this._valid=this.gestureBeginsVertically(O,M,v.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(O.y+M.y)/2*-.5})}gestureBeginsVertically(l,d,v){if(this._valid!==void 0)return this._valid;const T=l.mag()>=2,O=d.mag()>=2;if(!T&&!O)return;if(!T||!O)return this._firstMove==null&&(this._firstMove=v),v-this._firstMove<100&&void 0;const M=l.y>0==d.y>0;return Gd(l)&&Gd(d)&&M}}const sy={panStep:100,bearingStep:15,pitchStep:10};class ym{constructor(){const l=sy;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let d=0,v=0,T=0,O=0,M=0;switch(l.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:l.shiftKey?v=-1:(l.preventDefault(),O=-1);break;case 39:l.shiftKey?v=1:(l.preventDefault(),O=1);break;case 38:l.shiftKey?T=1:(l.preventDefault(),M=-1);break;case 40:l.shiftKey?T=-1:(l.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(v=0,T=0),{cameraAnimation:R=>{const F=R.getZoom();R.easeTo({duration:300,easeId:"keyboardHandler",easing:tc,zoom:d?Math.round(F)+d*(l.shiftKey?2:1):F,bearing:R.getBearing()+v*this._bearingStep,pitch:R.getPitch()+T*this._pitchStep,offset:[-O*this._panStep,-M*this._panStep],center:R.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function tc(_){return _*(2-_)}const Yd=4.000244140625,Y0=1/450;class ly{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._handler=d,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Y0,a.aY(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||a.eU()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const v=a.o.now(),T=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,d!==0&&d%Yd===0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":T>400?(this._type=null,this._lastValue=d,this._timeout=window.setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(T*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),l.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=l,this._delta-=d,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=X(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const q=this._type==="wheel"&&Math.abs(this._delta)>Yd?this._wheelZoomRate:this._defaultZoomRate;let H=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&H!==0&&(H=1/H);const re=d(),ee=Math.pow(2,re),oe=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):ee;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(oe*H))),this._type==="wheel"&&(this._startZoom=re,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const v=typeof this._targetZoom=="number"?this._targetZoom:d(),T=this._startZoom,O=this._easing;let M,R=!1;if(this._type==="wheel"&&T&&O){const q=Math.min((a.o.now()-this._lastWheelEventTime)/200,1),H=O(q);M=a.ak(T,v,H),q<1?this._frameId||(this._frameId=!0):R=!0}else M=v,R=!0;this._active=!0,R&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let F=M-d();return F*this._lastDelta<0&&(F=0),{noInertia:!0,needsRenderFrame:!R,zoomDelta:F,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let d=a.eV;if(this._prevEase){const v=this._prevEase,T=(a.o.now()-v.start)/v.duration,O=v.easing(T+.01)-v.easing(T),M=.27/Math.sqrt(O*O+1e-4)*.01,R=Math.sqrt(.0729-M*M);d=a.eT(M,R,.25,1)}return this._prevEase={start:a.o.now(),duration:l,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=j("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Vc{constructor(l,d){this._clickZoom=l,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class sv{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,d){return l.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:v.getZoom()+(l.shiftKey?-1:1),around:v.unproject(d)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class W0{constructor(){this._tap=new Vd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,d,v){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?v.length>0&&(this._swipePoint=d[0],this._swipeTouch=v[0].identifier):this._tap.touchstart(l,d,v))}touchmove(l,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const T=d[0],O=T.y-this._swipePoint.y;return this._swipePoint=T,l.preventDefault(),this._active=!0,{zoomDelta:O/128}}}else this._tap.touchmove(l,d,v)}touchend(l,d,v){this._tapTime?this._swipePoint&&v.length===0&&this.reset():this._tap.touchend(l,d,v)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class uy{constructor(l,d,v){this._el=l,this._mousePan=d,this._touchPan=v}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class _m{constructor(l,d,v){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=d,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ja{constructor(l,d,v,T){this._el=l,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=T,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const cy=_=>_.zoom||_.drag||_.pitch||_.rotate;class m1 extends a.z{}class X0{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,d){const v=a.av([],d,l);this.radius=a.ag(v[2]<0?a.eX([],v,this.constants):[v[0],v[1],0])}projectRay(l){a.eX(l,l,this.constants),a.aw(l,l),a.eY(l,l,this.constants);const d=a.c5([],l,this.radius);if(d[2]>0){const v=a.c5([],[0,0,1],a.bJ(d,[0,0,1])),T=a.c5([],a.aw([],[d[0],d[1],0]),this.radius),O=a.d8([],d,a.c5([],a.av([],a.d8([],T,v),d),2));d[0]=O[0],d[1]=O[1]}return d}}function kf(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Lf{constructor(l,d){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Rf(l),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new X0,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),a.aY(["handleEvent","handleWindowEvent"],this);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[T,O,M]of this._listeners){const R=T===document?this.handleWindowEvent:this.handleEvent;T.addEventListener(O,R,M)}}destroy(){for(const[l,d,v]of this._listeners){const T=l===document?this.handleWindowEvent:this.handleEvent;l.removeEventListener(d,T,v)}}_addDefaultHandlers(l){const d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new lo(d,l));const T=d.boxZoom=new Yl(d,l);this._add("boxZoom",T);const O=new qd,M=new sv;d.doubleClickZoom=new Vc(M,O),this._add("tapZoom",O),this._add("clickZoom",M);const R=new W0;this._add("tapDragZoom",R);const F=d.touchPitch=new Mh(d);this._add("touchPitch",F);const q=new ay(l),H=new oy(l);d.dragRotate=new _m(l,q,H),this._add("mouseRotate",q,["mousePitch"]),this._add("mousePitch",H,["mouseRotate"]);const re=new dm(l),ee=new Xa(d,l);d.dragPan=new uy(v,re,ee),this._add("mousePan",re),this._add("touchPan",ee,["touchZoom","touchRotate"]);const oe=new gm,he=new Ch;d.touchZoomRotate=new ja(v,he,oe,R),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Xo(d));const ce=d.scrollZoom=new ly(d,this);this._add("scrollZoom",ce,["mousePan"]);const de=d.keyboard=new ym;this._add("keyboard",de);for(const _e of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[_e]&&d[_e].enable(l[_e])}_add(l,d,v){this._handlers.push({handlerName:l,handler:d,allowed:v}),this._handlersById[l]=d}stop(l){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!cy(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,d,v){for(const T in l)if(T!==v&&(!d||d.indexOf(T)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const d=[];for(const v of l)this._el.contains(v.target)&&d.push(v);return d}handleEvent(l,d){this._updatingCamera=!0;const v=l.type==="renderFrame",T=v?void 0:l,O={needsRenderFrame:!1},M={},R={},F=l.touches?this._getMapTouches(l.touches):void 0,q=F?ae(this._el,F):v?void 0:X(this._el,l);for(const{handlerName:ee,handler:oe,allowed:he}of this._handlers){if(!oe.isEnabled())continue;let ce;this._blockedByActive(R,he,ee)?oe.reset():oe[d||l.type]&&(ce=oe[d||l.type](l,q,F),this.mergeHandlerResult(O,M,ce,ee,T),ce&&ce.needsRenderFrame&&this._triggerRenderFrame()),(ce||oe.isActive())&&(R[ee]=oe)}const H={};for(const ee in this._previousActiveHandlers)R[ee]||(H[ee]=T);this._previousActiveHandlers=R,(Object.keys(H).length||kf(O))&&(this._changes.push([O,M,H]),this._triggerRenderFrame()),(Object.keys(R).length||kf(O))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:re}=O;re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],re(this._map))}mergeHandlerResult(l,d,v,T,O){if(!v)return;Object.assign(l,v);const M={handlerName:T,originalEvent:v.originalEvent||O};v.zoomDelta!==void 0&&(d.zoom=M),v.panDelta!==void 0&&(d.drag=M),v.pitchDelta!==void 0&&(d.pitch=M),v.bearingDelta!==void 0&&(d.rotate=M)}_applyChanges(){const l={},d={},v={};for(const[T,O,M]of this._changes)T.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(T.panDelta)),T.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+T.zoomDelta),T.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+T.bearingDelta),T.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+T.pitchDelta),T.around!==void 0&&(l.around=T.around),T.aroundCoord!==void 0&&(l.aroundCoord=T.aroundCoord),T.pinchAround!==void 0&&(l.pinchAround=T.pinchAround),T.noInertia&&(l.noInertia=T.noInertia),Object.assign(d,O),Object.assign(v,M);this._updateMapTransform(l,d,v),this._changes=[]}_updateMapTransform(l,d,v){const T=this._map,O=T.transform,M=Me=>[Me.x,Me.y,Me.z];if((()=>{const Me=this._eventsInProgress.drag;return Me&&!this._handlersById[Me.handlerName].isActive()})()&&!kf(l)){const Me=O.zoom;O.cameraElevationReference="sea",this._originalZoom!=null&&O._orthographicProjectionAtLowPitch&&O.projection.name!=="globe"&&O.pitch===0?(O.cameraElevationReference="ground",O.zoom=this._originalZoom):(O.recenterOnTerrain(),O.cameraElevationReference="ground"),Me!==O.zoom&&this._map._update(!0)}if(O._isCameraConstrained&&T._stop(!0),!kf(l))return void this._fireEvents(d,v,!0);let{panDelta:R,zoomDelta:F,bearingDelta:q,pitchDelta:H,around:re,aroundCoord:ee,pinchAround:oe}=l;O._isCameraConstrained&&(F>0&&(F=0),O._isCameraConstrained=!1),oe!==void 0&&(re=oe),(F||(Me=>d[Me]&&!this._eventsInProgress[Me])("drag"))&&re&&(this._dragOrigin=M(O.pointCoordinate3D(re)),this._originalZoom=O.zoom,this._trackingEllipsoid.setup(O._camera.position,this._dragOrigin)),O.cameraElevationReference="sea",T._stop(!0),re=re||T.transform.centerPoint,q&&(O.bearing+=q),H&&(O.pitch+=H),O._updateCameraState();const he=[0,0,0];if(R)if(O.projection.name==="mercator"){const Me=this._trackingEllipsoid.projectRay(O.screenPointToMercatorRay(re).dir),Ce=this._trackingEllipsoid.projectRay(O.screenPointToMercatorRay(re.sub(R)).dir);he[0]=Ce[0]-Me[0],he[1]=Ce[1]-Me[1]}else{const Me=O.pointCoordinate(re);if(O.projection.name==="globe"){R=R.rotate(-O.angle);const Ce=O._pixelsPerMercatorPixel/O.worldSize;he[0]=-R.x*a.eW(a.a$(Me.y))*Ce,he[1]=-R.y*a.eW(O.center.lat)*Ce}else{const Ce=O.pointCoordinate(re.sub(R));Me&&Ce&&(he[0]=Ce.x-Me.x,he[1]=Ce.y-Me.y)}}const ce=O.zoom,de=[0,0,0];if(F){const Me=M(ee||O.pointCoordinate3D(re)),Ce={dir:a.aw([],a.av([],Me,O._camera.position))};if(Ce.dir[2]<0){const Ae=O.zoomDeltaToMovement(Me,F);a.c5(de,Ce.dir,Ae)}}const _e=a.d8(he,he,de);O._translateCameraConstrained(_e),F&&Math.abs(O.zoom-ce)>1e-4&&O.recenterOnTerrain(),O.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(d,v,!0)}_fireEvents(l,d,v){const T=cy(this._eventsInProgress),O=cy(l),M={};for(const H in l){const{originalEvent:re}=l[H];this._eventsInProgress[H]||(M[`${H}start`]=re),this._eventsInProgress[H]=l[H]}!T&&O&&this._fireEvent("movestart",O.originalEvent);for(const H in M)this._fireEvent(H,M[H]);O&&this._fireEvent("move",O.originalEvent);for(const H in l){const{originalEvent:re}=l[H];this._fireEvent(H,re)}const R={};let F;for(const H in this._eventsInProgress){const{handlerName:re,originalEvent:ee}=this._eventsInProgress[H];this._handlersById[re].isActive()||(delete this._eventsInProgress[H],F=d[re]||ee,R[`${H}end`]=F)}for(const H in R)this._fireEvent(H,R[H]);const q=cy(this._eventsInProgress);if(v&&(T||O)&&!q){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),re=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;H?(re(H.bearing||this._map.getBearing())&&(H.bearing=0),this._map.easeTo(H,{originalEvent:F})):(this._map.fire(new a.z("moveend",{originalEvent:F})),re(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,d){this._map.fire(new a.z(l,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new m1("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const lv="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Z0 extends a.E{constructor(l,d){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,a.aY(["_renderFrameCallback"],this)}getCenter(){return new a.aT(this.transform.center.lng,this.transform.center.lat)}setCenter(l,d){return this.jumpTo({center:l},d)}panBy(l,d,v){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,Object.assign({offset:l},d),v)}panTo(l,d,v){return this.easeTo(Object.assign({center:l},d),v)}getZoom(){return this.transform.zoom}setZoom(l,d){return this.jumpTo({zoom:l},d),this}zoomTo(l,d,v){return this.easeTo(Object.assign({zoom:l},d),v)}zoomIn(l,d){return this.zoomTo(this.getZoom()+1,l,d),this}zoomOut(l,d){return this.zoomTo(this.getZoom()-1,l,d),this}getBearing(){return this.transform.bearing}setBearing(l,d){return this.jumpTo({bearing:l},d),this}getPadding(){return this.transform.padding}setPadding(l,d){return this.jumpTo({padding:l},d),this}rotateTo(l,d,v){return this.easeTo(Object.assign({bearing:l},d),v)}resetNorth(l,d){return this.rotateTo(0,Object.assign({duration:1e3},l),d),this}resetNorthPitch(l,d){return this.easeTo(Object.assign({bearing:0,pitch:0,duration:1e3},l),d),this}snapToNorth(l,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,d):this}getPitch(){return this.transform.pitch}setPitch(l,d){return this.jumpTo({pitch:l},d),this}cameraForBounds(l,d){l=a.aI.convert(l);const v=d&&d.bearing||0,T=d&&d.pitch||0,O=l.getNorthWest(),M=l.getSouthEast();return this._cameraForBounds(this.transform,O,M,v,T,d)}_extendPadding(l){const d={top:0,right:0,bottom:0,left:0};return l==null?Object.assign({},d,this.transform.padding):typeof l=="number"?{top:l,bottom:l,right:l,left:l}:Object.assign({},d,l)}_extendCameraOptions(l){return(l=Object.assign({offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=this._extendPadding(l.padding),l}_minimumAABBFrustumDistance(l,d){const v=d.max[0]-d.min[0],T=d.max[1]-d.min[1];return v/T>l.aspect?v/(2*Math.tan(.5*l.fovX)*l.aspect):T/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,d,v,T,O,M){const R=l.clone(),F=this._extendCameraOptions(M);R.bearing=T,R.pitch=O;const q=a.aT.convert(d),H=a.aT.convert(v),re=.5*(q.lat+H.lat),ee=.5*(q.lng+H.lng),oe=a.eZ(re,ee),he=a.aw([],oe),ce=a.aw([],a.bI([],he,[0,1,0])),de=a.bI([],ce,he),_e=[ce[0],ce[1],ce[2],0,de[0],de[1],de[2],0,he[0],he[1],he[2],0,0,0,0,1],Me=[oe,a.eZ(q.lat,q.lng),a.eZ(H.lat,q.lng),a.eZ(H.lat,H.lng),a.eZ(q.lat,H.lng),a.eZ(re,q.lng),a.eZ(re,H.lng),a.eZ(q.lat,ee),a.eZ(H.lat,ee)];let Ce=a.d9.fromPoints(Me.map(gt=>[a.bJ(ce,gt),a.bJ(de,gt),a.bJ(he,gt)]));const Ae=a.af([],Ce.center,_e);a.e_(Ae)===0&&a.e$(Ae,0,0,1),a.aw(Ae,Ae),a.c5(Ae,Ae,a.aD),R.center=a.f0(Ae);const We=R.getWorldToCameraMatrix(),$e=a.bl(new Float64Array(16),We);Ce=a.d9.applyTransform(Ce,a.aB([],We,_e));const Ge=this._extendAABB(Ce,R,F,T);if(!Ge)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Ce=Ge,a.af(Ae,Ae,We);const Ne=.5*(Ce.max[2]-Ce.min[2]),Re=this._minimumAABBFrustumDistance(R,Ce),Je=a.c5([],[0,0,1],Ne),nt=a.d8(Je,Ae,Je),st=Re+(R.pitch===0?0:a.bG(Ae,nt)),dt=R.globeCenterInViewSpace,ft=a.av([],Ae,[dt[0],dt[1],dt[2]]);a.aw(ft,ft),a.c5(ft,ft,st);const wt=a.d8([],Ae,ft);a.af(wt,wt,$e);const It=a.eM/a.aD,pt=a.ag(wt),et=a.cf(Math.max(pt*It-a.eM,Number.EPSILON),0),At=Math.min(R.zoomFromMercatorZAdjusted(et),F.maxZoom);return At>.5*(a.c_+a.cL)?(R.setProjection({name:"mercator"}),R.zoom=At,this._cameraForBounds(R,d,v,T,O,M)):{center:R.center,zoom:At,bearing:T,pitch:O}}_extendAABB(l,d,v,T){const O=.5*((v.padding.left||0)+(v.padding.right||0)),M=.5*((v.padding.top||0)+(v.padding.bottom||0)),R=M,F=O,q=O,H=M,re=d.width-(F+q),ee=d.height-(R+H),oe=a.av([],l.max,l.min),he=Math.min(re/oe[0],ee/oe[1]),ce=Math.min(d.scaleZoom(d.scale*he),v.maxZoom);if(isNaN(ce))return null;const de=d.scale/d.zoomScale(ce),_e=new a.d9([l.min[0]-F*de,l.min[1]-H*de,l.min[2]],[l.max[0]+q*de,l.max[1]+R*de,l.max[2]]),Me=(typeof v.offset.x=="number"&&typeof v.offset.y=="number"?new a.P(v.offset.x,v.offset.y):a.P.convert(v.offset)).rotate(-a.an(T));return _e.center[0]-=Me.x*de,_e.center[1]+=Me.y*de,_e}queryTerrainElevation(l,d){const v=this.transform.elevation;return v?(d=Object.assign({},{exaggerated:!0},d),v.getAtPoint(a.ae.fromLngLat(l),null,d.exaggerated)):null}_cameraForBounds(l,d,v,T,O,M){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,d,v,T,O,M);const R=l.clone(),F=this._extendCameraOptions(M);R.bearing=T,R.pitch=O;const q=a.aT.convert(d),H=a.aT.convert(v),re=new a.aT(q.lng,H.lat),ee=new a.aT(H.lng,q.lat),oe=R.project(q),he=R.project(H),ce=this.queryTerrainElevation(q),de=this.queryTerrainElevation(H),_e=this.queryTerrainElevation(re),Me=this.queryTerrainElevation(ee),Ce=[[oe.x,oe.y,Math.min(ce||0,de||0,_e||0,Me||0)],[he.x,he.y,Math.max(ce||0,de||0,_e||0,Me||0)]];let Ae=a.d9.fromPoints(Ce);const We=R.getWorldToCameraMatrix(),$e=a.bl(new Float64Array(16),We);Ae=a.d9.applyTransform(Ae,We);const Ge=this._extendAABB(Ae,R,F,T);if(!Ge)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Ae=Ge;const Ne=.5*a.av([],Ae.max,Ae.min)[2],Re=this._minimumAABBFrustumDistance(R,Ae),Je=[0,0,1,0];a.aC(Je,Je,We),a.f1(Je,Je);const nt=a.c5([],Je,Re+Ne),st=a.d8([],Ae.center,nt);a.af(Ae.center,Ae.center,$e),a.af(st,st,$e);const dt=R.unproject(new a.P(Ae.center[0],Ae.center[1])),ft=a.f2(R.projection,dt),wt=Math.pow(2,ft),It=Math.min(R._zoomFromMercatorZ(st[2]*R.pixelsPerMeter*wt/R.worldSize),F.maxZoom);return R.mercatorFromTransition&&It<.5*(a.c_+a.cL)?(R.setProjection({name:"globe"}),R.zoom=It,this._cameraForBounds(R,d,v,T,O,M)):{center:dt,zoom:It,bearing:T,pitch:O}}fitBounds(l,d,v){const T=this.cameraForBounds(l,d);return this._fitInternal(T,d,v)}fitScreenCoordinates(l,d,v,T,O){const M=a.P.convert(l),R=a.P.convert(d),F=new a.P(Math.min(M.x,R.x),Math.min(M.y,R.y)),q=new a.P(Math.max(M.x,R.x),Math.max(M.y,R.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(M,R))return this;const H=this.transform.pointLocation3D(F),re=this.transform.pointLocation3D(q),ee=this.transform.pointLocation3D(new a.P(F.x,q.y)),oe=this.transform.pointLocation3D(new a.P(q.x,F.y)),he=[Math.min(H.lng,re.lng,ee.lng,oe.lng),Math.min(H.lat,re.lat,ee.lat,oe.lat)],ce=[Math.max(H.lng,re.lng,ee.lng,oe.lng),Math.max(H.lat,re.lat,ee.lat,oe.lat)],de=T&&T.pitch?T.pitch:this.getPitch(),_e=this._cameraForBounds(this.transform,he,ce,v,de,T);return this._fitInternal(_e,T,O)}_fitInternal(l,d,v){return l?(d=Object.assign(l,d)).linear?this.easeTo(d,v):this.flyTo(d,v):this}jumpTo(l,d){this.stop();const v=l.preloadOnly?this.transform.clone():this.transform;let T=!1,O=!1,M=!1;"zoom"in l&&v.zoom!==+l.zoom&&(T=!0,v.zoom=+l.zoom),l.center!==void 0&&(v.center=a.aT.convert(l.center)),"bearing"in l&&v.bearing!==+l.bearing&&(O=!0,v.bearing=+l.bearing),"pitch"in l&&v.pitch!==+l.pitch&&(M=!0,v.pitch=+l.pitch);const R=typeof l.padding=="number"?this._extendPadding(l.padding):l.padding;if(l.padding!=null&&!v.isPaddingEqual(R))if(l.retainPadding===!1){const F=v.clone();F.padding=R,v.setLocationAtPoint(v.center,F.centerPoint)}else v.padding=R;return l.preloadOnly?(this._preloadTiles(v),this):(this.fire(new a.z("movestart",d)).fire(new a.z("move",d)),T&&this.fire(new a.z("zoomstart",d)).fire(new a.z("zoom",d)).fire(new a.z("zoomend",d)),O&&this.fire(new a.z("rotatestart",d)).fire(new a.z("rotate",d)).fire(new a.z("rotateend",d)),M&&this.fire(new a.z("pitchstart",d)).fire(new a.z("pitch",d)).fire(new a.z("pitchend",d)),this.fire(new a.z("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||a.w(lv),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,d){const v=this.transform;if(!v.projection.supportsFreeCamera)return a.w(lv),this;this.stop();const T=v.zoom,O=v.pitch,M=v.bearing;v.setFreeCameraOptions(l);const R=T!==v.zoom,F=O!==v.pitch,q=M!==v.bearing;return this.fire(new a.z("movestart",d)).fire(new a.z("move",d)),R&&this.fire(new a.z("zoomstart",d)).fire(new a.z("zoom",d)).fire(new a.z("zoomend",d)),q&&this.fire(new a.z("rotatestart",d)).fire(new a.z("rotate",d)).fire(new a.z("rotateend",d)),F&&this.fire(new a.z("pitchstart",d)).fire(new a.z("pitch",d)).fire(new a.z("pitchend",d)),this.fire(new a.z("moveend",d)),this}easeTo(l,d){this._stop(!1,l.easeId),((l=Object.assign({offset:[0,0],duration:500,easing:a.eV},l)).animate===!1||this._prefersReducedMotion(l))&&(l.duration=0);const v=this.transform,T=this.getZoom(),O=this.getBearing(),M=this.getPitch(),R=this.getPadding(),F="zoom"in l?+l.zoom:T,q="bearing"in l?this._normalizeBearing(l.bearing,O):O,H="pitch"in l?+l.pitch:M,re=this._extendPadding(l.padding),ee=a.P.convert(l.offset);let oe,he,ce;if(v.projection.name==="globe"){const Je=a.ae.fromLngLat(v.center),nt=ee.rotate(-v.angle);Je.x+=nt.x/v.worldSize,Je.y+=nt.y/v.worldSize;const st=Je.toLngLat(),dt=a.aT.convert(l.center||st);this._normalizeCenter(dt),oe=v.centerPoint.add(nt),he=new a.P(Je.x,Je.y).mult(v.worldSize),ce=new a.P(a.aF(dt.lng),a.aJ(dt.lat)).mult(v.worldSize).sub(he)}else{oe=v.centerPoint.add(ee);const Je=v.pointLocation(oe),nt=a.aT.convert(l.center||Je);this._normalizeCenter(nt),he=v.project(Je),ce=v.project(nt).sub(he)}const de=v.zoomScale(F-T);let _e,Me;l.around&&(_e=a.aT.convert(l.around),Me=v.locationPoint(_e));const Ce=this._zooming||F!==T,Ae=this._rotating||O!==q,We=this._pitching||H!==M,$e=!v.isPaddingEqual(re),Ge=l.retainPadding===!1?v.clone():v,Ne=Je=>nt=>{if(Ce&&(Je.zoom=a.ak(T,F,nt)),Ae&&(Je.bearing=a.ak(O,q,nt)),We&&(Je.pitch=a.ak(M,H,nt)),$e&&(Ge.interpolatePadding(R,re,nt),oe=Ge.centerPoint.add(ee)),_e)Je.setLocationAtPoint(_e,Me);else{const st=Je.zoomScale(Je.zoom-T),dt=F>T?Math.min(2,de):Math.max(.5,de),ft=Math.pow(dt,1-nt),wt=Je.unproject(he.add(ce.mult(nt*ft)).mult(st));Je.setLocationAtPoint(Je.renderWorldCopies?wt.wrap():wt,oe)}return l.preloadOnly||this._fireMoveEvents(d),Je};if(l.preloadOnly){const Je=this._emulate(Ne,l.duration,v);return this._preloadTiles(Je),this}const Re={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ce,this._rotating=Ae,this._pitching=We,this._padding=$e,this._easeId=l.easeId,this._prepareEase(d,l.noMoveStart,Re),this._ease(Ne(v),Je=>{v.cameraElevationReference==="sea"&&v.recenterOnTerrain(),this._afterEase(d,Je)},l),this}_prepareEase(l,d,v={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),d||v.moving||this.fire(new a.z("movestart",l)),this._zooming&&!v.zooming&&this.fire(new a.z("zoomstart",l)),this._rotating&&!v.rotating&&this.fire(new a.z("rotatestart",l)),this._pitching&&!v.pitching&&this.fire(new a.z("pitchstart",l))}_fireMoveEvents(l){this.fire(new a.z("move",l)),this._zooming&&this.fire(new a.z("zoom",l)),this._rotating&&this.fire(new a.z("rotate",l)),this._pitching&&this.fire(new a.z("pitch",l))}_afterEase(l,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const v=this._zooming,T=this._rotating,O=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new a.z("zoomend",l)),T&&this.fire(new a.z("rotateend",l)),O&&this.fire(new a.z("pitchend",l)),this.fire(new a.z("moveend",l))}flyTo(l,d){if(this._prefersReducedMotion(l)){const gt=a.aH(l,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(gt,d)}this.stop(),l=Object.assign({offset:[0,0],speed:1.2,curve:1.42,easing:a.eV},l);const v=this.transform,T=this.getZoom(),O=this.getBearing(),M=this.getPitch(),R=this.getPadding(),F="zoom"in l?a.aA(+l.zoom,v.minZoom,v.maxZoom):T,q="bearing"in l?this._normalizeBearing(l.bearing,O):O,H="pitch"in l?+l.pitch:M,re=this._extendPadding(l.padding),ee=v.zoomScale(F-T),oe=a.P.convert(l.offset);let he=v.centerPoint.add(oe);const ce=v.pointLocation(he),de=a.aT.convert(l.center||ce);this._normalizeCenter(de);const _e=v.project(ce),Me=v.project(de).sub(_e);let Ce=l.curve;const Ae=Math.max(v.width,v.height),We=Ae/ee,$e=Me.mag();if("minZoom"in l){const gt=a.aA(Math.min(l.minZoom,T,F),v.minZoom,v.maxZoom),Dt=Ae/v.zoomScale(gt-T);Ce=Math.sqrt(Dt/$e*2)}const Ge=Ce*Ce;function Ne(gt){const Dt=(We*We-Ae*Ae+(gt?-1:1)*Ge*Ge*$e*$e)/(2*(gt?We:Ae)*Ge*$e);return Math.log(Math.sqrt(Dt*Dt+1)-Dt)}function Re(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function Je(gt){return(Math.exp(gt)+Math.exp(-gt))/2}const nt=Ne(0);let st=function(gt){return Je(nt)/Je(nt+Ce*gt)},dt=function(gt){return Ae*((Je(nt)*(Re(Dt=nt+Ce*gt)/Je(Dt))-Re(nt))/Ge)/$e;var Dt},ft=(Ne(1)-nt)/Ce;if(Math.abs($e)<1e-6||!isFinite(ft)){if(Math.abs(Ae-We)<1e-6)return this.easeTo(l,d);const gt=We<Ae?-1:1;ft=Math.abs(Math.log(We/Ae))/Ce,dt=function(){return 0},st=function(Dt){return Math.exp(gt*Ce*Dt)}}l.duration="duration"in l?+l.duration:1e3*ft/("screenSpeed"in l?+l.screenSpeed/Ce:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const wt=O!==q,It=H!==M,pt=!v.isPaddingEqual(re),et=l.retainPadding===!1?v.clone():v,At=gt=>Dt=>{const qt=Dt*ft,tn=1/st(qt);gt.zoom=Dt===1?F:T+gt.scaleZoom(tn),wt&&(gt.bearing=a.ak(O,q,Dt)),It&&(gt.pitch=a.ak(M,H,Dt)),pt&&(et.interpolatePadding(R,re,Dt),he=et.centerPoint.add(oe));const Wt=Dt===1?de:gt.unproject(_e.add(Me.mult(dt(qt))).mult(tn));return gt.setLocationAtPoint(gt.renderWorldCopies?Wt.wrap():Wt,he),gt._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(d),gt};if(l.preloadOnly){const gt=this._emulate(At,l.duration,v);return this._preloadTiles(gt),this}return this._zooming=!0,this._rotating=wt,this._pitching=It,this._padding=pt,this._prepareEase(d,!1),this._ease(At(v),()=>this._afterEase(d),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(l){}_cancelRenderFrame(l){}_stop(l,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const v=this._onEaseEnd;this._onEaseEnd=void 0,v.call(this,d)}if(!l){const v=this.handlers;v&&v.stop(!1)}return this}_ease(l,d,v){v.animate===!1||v.duration===0?(l(1),d()):(this._easeStart=a.o.now(),this._easeOptions=v,this._onEaseFrame=l,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((a.o.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,d){l=a.bT(l,-180,180);const v=Math.abs(l-d);return Math.abs(l-360-d)<v&&(l-=360),Math.abs(l+360-d)<v&&(l+=360),l}_normalizeCenter(l){const d=this.transform;if(d.maxBounds||d.projection.name!=="globe"&&!d.renderWorldCopies)return;const v=l.lng-d.center.lng;l.lng+=v>180?-360:v<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&a.o.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,d,v){const T=Math.ceil(15*d/1e3),O=[],M=l(v.clone());for(let R=0;R<=T;R++){const F=M(R/T);O.push(F.clone())}return O}_preloadTiles(l,d){}}class vm{constructor(l={}){this.options=l,a.aY(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const d=this.options&&this.options.compact,v=l._getUIString("AttributionControl.ToggleAttribution");this._map=l,this._container=j("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=j("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",v);const T=j("span","mapboxgl-ctrl-icon",this._compactButton);return T.setAttribute("aria-hidden","true"),T.setAttribute("title",v),this._innerContainer=j("div","mapboxgl-ctrl-attrib-inner",this._container),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.e.ACCESS_TOKEN}];if(l){const v=d.reduce((T,O,M)=>(O.value&&(T+=`${O.key}=${O.value}${M<d.length-1?"&":""}`),T),"?");l.href=`${a.e.FEEDBACK_URL}/${v}#${G0(this._map,!0)}`,l.rel="noopener nofollow"}}_updateData(l){!l||(l.dataType!=="source"||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility")&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const T=this._map.style.stylesheet;this.styleOwner=T.owner,this.styleId=T.id}const d=this._map.style._mergedSourceCaches;for(const T in d){const O=d[T];if(O.used){const M=O.getSource();M.attribution&&l.indexOf(M.attribution)<0&&l.push(M.attribution)}}l.sort((T,O)=>T.length-O.length),l=l.filter((T,O)=>{for(let M=O+1;M<l.length;M++)if(l[M].indexOf(T)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const v=l.map(T=>(function(O){const M=new DOMParser().parseFromString(O,"text/html");return Array.from(M.body.querySelectorAll("*")).reverse().forEach(R=>{const F=R.textContent||"";if(R.tagName!=="A")return void R.replaceWith(...R.childNodes);const q=R.getAttribute("href");if(!q||!/^(https?:|mailto:)/i.test(q))return void R.replaceWith(M.createTextNode(F));const H=M.createElement("a");H.href=q,H.textContent=F,H.rel="noopener nofollow";const re=R.getAttribute("class");re&&(H.className=re),R.replaceWith(H)}),M.body.innerHTML})(T)).join(" | ");v!==this._attribHTML&&(this._attribHTML=v,l.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class nc{constructor(){a.aY(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=j("div","mapboxgl-ctrl");const d=j("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const d in l){const v=l[d].getSource();if(v.hasOwnProperty("mapbox_logo")&&!v.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class K0{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const d=++this._id;return this._queue.push({callback:l,id:d,cancelled:!1}),d}remove(l){const d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(const T of v)if(T.id===l)return void(T.cancelled=!0)}run(l=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const v of d)if(!v.cancelled&&(v.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Ii{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const d=a.dD((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,d,v){this._start=this.getValue(d),this._end=l,this._startTime=d,this._endTime=d+v}}const Q0={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class uv extends a.z{constructor(l,d,v,T){const{point:O,lngLat:M,originalEvent:R,target:F}=l;super(l.type,{point:O,lngLat:M,originalEvent:R,target:F}),this.preventDefault=()=>{l.preventDefault()},this.id=d,this.interaction=v,this.feature=T}}class J0{constructor(l){this.map=l,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(l,d){if(this.typeById.has(l))throw new Error(`Interaction id "${l}" already exists.`);const v=d.filter;let T=d.type;v&&this.filters.set(l,a.b6(v)),T==="mouseover"&&(T="mouseenter"),T==="mouseout"&&(T="mouseleave");const O=this.interactionsByType.get(T)||new Map;T==="mouseenter"||T==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(l,d)):O.size===0&&this.map.on(T,this.handleType),O.size===0&&this.interactionsByType.set(T,O),O.set(l,d),this.typeById.set(l,T)}get(l){const d=this.typeById.get(l);if(!d)return;const v=this.interactionsByType.get(d);return v?v.get(l):void 0}remove(l){const d=this.typeById.get(l);if(!d)return;this.typeById.delete(l),this.filters.delete(l);const v=this.interactionsByType.get(d);v&&(v.delete(l),d==="mouseenter"||d==="mouseleave"?(this.delegatedInteractions.delete(l),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):v.size===0&&this.map.off(d,this.handleType))}queryTargets(l,d){const v=[];for(const[T,O]of d)O.target&&v.push({targetId:T,target:O.target,filter:this.filters.get(T)});return this.map.style.queryRenderedTargets(l,v,this.map.transform)}handleMove(l){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const d=this.queryTargets(l.point,Array.from(this.delegatedInteractions).reverse());d.length&&(l.type="mouseenter",this.handleType(l,d));const v=new Map;for(const[T,{feature:O}]of this.prevHoveredFeatures)this.hoveredFeatures.has(T)||v.set(O.id,O);v.size&&(l.type="mouseleave",this.handleType(l,Array.from(v.values())))}handleOut(l){const d=Array.from(this.hoveredFeatures.values()).map(({feature:v})=>v);d.length&&(l.type="mouseleave",this.handleType(l,d)),this.hoveredFeatures.clear()}handleType(l,d){const v=l.type==="mouseenter";if(v&&!this.interactionsByType.has(l.type))return void a.w("mouseenter interaction required for mouseleave to work.");const T=Array.from(this.interactionsByType.get(l.type)).reverse(),O=!!d;d=d||this.queryTargets(l.point,T);let M=!1;const R=new Set;for(const F of d){for(const[q,H]of T){if(!H.target)continue;const re=F.variants?F.variants[q]:null;if(re){for(const ee of re){if(kp(ee,F,R,q))continue;const oe=new a.dx(F,ee),he=Sl(ee,F,q);O&&oe.id!==void 0&&(oe.state=this.map.getFeatureState(oe));const ce=v?this.prevHoveredFeatures.get(he):null,de=new uv(l,q,H,oe),_e=ce?ce.stop:H.handler(de);if(v&&this.hoveredFeatures.set(he,{feature:F,stop:_e}),_e!==!1){M=!0;break}}if(M)break}}if(M)break}if(!M)for(const[F,q]of T){const{handler:H,target:re}=q;if(!re&&H(new uv(l,F,q,null))!==!1)break}}}function cv(_,l){if(Array.isArray(_)&&Array.isArray(l)){const d=new Set(_),v=new Set(l);return d.size===v.size&&_.every(T=>v.has(T))}return a.by(_,l)}const bm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},qc={showCompass:!0,showZoom:!0,visualizePitch:!1};class uo{constructor(l,d,v=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new ay({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,v&&(this.mousePitch=new oy({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),a.aY(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(l,d){this.mouseRotate.mousedown(l,d),this.mousePitch&&this.mousePitch.mousedown(l,d),ie()}move(l,d){const v=this.map,T=this.mouseRotate.mousemoveWindow(l,d),O=T&&T.bearingDelta;if(O&&v.setBearing(v.getBearing()+O),this.mousePitch){const M=this.mousePitch.mousemoveWindow(l,d),R=M&&M.pitchDelta;R&&v.setPitch(v.getPitch()+R)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Q(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(Object.assign({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),X(this.element,l)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,X(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ae(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=ae(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Wd(_,l,d){if(_=new a.aT(_.lng,_.lat),l){const v=new a.aT(_.lng-360,_.lat),T=new a.aT(_.lng+360,_.lat),O=360*Math.ceil(Math.abs(_.lng-d.center.lng)/360),M=d.locationPoint3D(_).distSqr(l),R=l.x<0||l.y<0||l.x>d.width||l.y>d.height;d.locationPoint3D(v).distSqr(l)<M&&(R||Math.abs(v.lng-d.center.lng)<O)?_=v:d.locationPoint3D(T).distSqr(l)<M&&(R||Math.abs(T.lng-d.center.lng)<O)&&(_=T)}for(;Math.abs(_.lng-d.center.lng)>180;){const v=d.locationPoint3D(_);if(v.x>=0&&v.y>=0&&v.x<=d.width&&v.y<=d.height)break;_.lng>d.center.lng?_.lng-=360:_.lng+=360}return _}const mu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},fa={rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class Ua extends a.E{constructor(l,d){super(),(l instanceof HTMLElement||d)&&(l=Object.assign({element:l},d)),a.aY(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this);const{anchor:v="center",color:T="#3FB1CE",scale:O=1,draggable:M=!1,clickTolerance:R=0,rotation:F=fa.rotation,rotationAlignment:q=fa.rotationAlignment,pitchAlignment:H=fa.pitchAlignment,occludedOpacity:re=fa.occludedOpacity,altitude:ee=fa.altitude}=l||{};this._anchor=v,this._color=T,this._scale=O,this._draggable=M,this._clickTolerance=R,this._rotation=F,this._rotationAlignment=q,this._pitchAlignment=H,this._occludedOpacity=re,this._altitude=ee,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),l&&l.element?(this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=a.P.convert(l&&l.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",ce=>{ce.preventDefault()}),this._element.addEventListener("mousedown",ce=>{ce.preventDefault()});const oe=this._element.classList;for(const ce in mu)oe.remove(`mapboxgl-marker-anchor-${ce}`);oe.add(`mapboxgl-marker-anchor-${this._anchor}`);const he=l&&l.className?l.className.trim().split(/\s+/):[];oe.add(...he),this._popup=null}_createDefaultMarker(){const l=j("div"),d=k("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},l);if(this._altitude===0){const v=k("radialGradient",{id:"shadowGradient"},k("defs",{},d));k("stop",{offset:"10%","stop-opacity":.4},v),k("stop",{offset:"100%","stop-opacity":.05},v),k("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},d)}return k("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},d),k("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},d),k("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},d),l}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.aT.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(l){return l===this._altitude||(this._defaultMarker&&(this._altitude===0&&l!==0||this._altitude!==0&&l===0)&&(this._element=this._createDefaultMarker()),this._altitude=l||fa.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const T=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[T,-1*(38.1-13.5+T)],"bottom-right":[-T,-1*(38.1-13.5+T)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,l._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const d=l.code,v=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&v!==32&&v!==13||this.togglePopup()}_onMapClick(l){const d=l.originalEvent.target,v=this._element;this._popup&&(d===v||v.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,d=this._pos;if(!l||!d)return!1;const v=l.unproject(d,this._altitude),T=l.getFreeCameraOptions();if(!T.position)return!1;const O=T.position.toLngLat();return O.distanceTo(v)<.9*O.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const d=this._pos;if(!d||d.x<0||d.x>l.transform.width||d.y<0||d.y>l.transform.height)return void this._clearFadeTimer();const v=l.unproject(d,this._altitude);let T;l._showingGlobe()&&a.f5(l.transform,this._lngLat)?T=0:(T=1-l._queryFogOpacity(v),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(T*=this._occludedOpacity)),this._element.style.opacity=`${T}`,this._element.style.pointerEvents=T>0?"auto":"none",this._popup&&this._popup._setOpacity(T),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${mu[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const l=this._pos,d=this._map,v=this.getPitchAlignment();if(!d||!l||v!=="map")return"";if(!d._showingGlobe()){const F=d.getPitch();return F?`rotateX(${F}deg)`:""}const T=a.cX(a.f6(d.transform,this._lngLat)),O=l.sub(a.f7(d.transform)),M=Math.abs(O.x)+Math.abs(O.y);if(M===0)return"";const R=T/M;return`rotateX(${-O.y*R}deg) rotateY(${O.x*R}deg)`}_calculateZTransform(){const l=this._pos,d=this._map;if(!d||!l)return"";let v=0;const T=this.getRotationAlignment();if(T==="map")if(d._showingGlobe()){const O=d.project(new a.aT(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),M=d.project(new a.aT(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(O);v=a.cX(Math.atan2(M.y,M.x))-90}else v=-d.getBearing();else if(T==="horizon"){const O=a.ah(4,6,d.getZoom()),M=a.f7(d.transform);M.y+=O*d.transform.height;const R=l.sub(M),F=a.cX(Math.atan2(R.y,R.x));v=(F>90?F-270:F+90)*(1-O)}return v+=this._rotation,v?`rotateZ(${v}deg)`:""}_update(l){cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Wd(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat,this._altitude),l===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){return this._element.classList.add(l),this}removeClassName(l){return this._element.classList.remove(l),this}toggleClassName(l){return this._element.classList.toggle(l)}_onMove(l){const d=this._map;if(!d)return;const v=this._pointerdownPos,T=this._positionDelta;if(v&&T){if(!this._isDragging){const O=this._clickTolerance||d._clickTolerance;if(l.point.dist(v)<O)return;this._isDragging=!0}this._pos=l.point.sub(T),this._lngLat=d.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.z("dragstart"))),this.fire(new a.z("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new a.z("dragend")),this._state="inactive"}_addDragHandler(l){const d=this._map,v=this._pos;d&&v&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(v),this._pointerdownPos=l.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const d=this._map;return d&&(l?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||fa.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||fa.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||fa.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||fa.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Dl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1,showButton:!0,followUserLocation:!0},xm={maxWidth:100,unit:"metric"},Da={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},ll={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},zf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Xd(_=new a.P(0,0),l="bottom"){if(typeof _=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(_,2)));switch(l){case"top":return new a.P(0,_);case"top-left":return new a.P(d,d);case"top-right":return new a.P(-d,d);case"bottom":return new a.P(0,-_);case"bottom-left":return new a.P(d,-d);case"bottom-right":return new a.P(-d,-d);case"left":return new a.P(_,0);case"right":return new a.P(-_,0)}return new a.P(0,0)}return _ instanceof a.P||Array.isArray(_)?a.P.convert(_):a.P.convert(_[l]||[0,0])}return{version:p,supported:N.supported,setRTLTextPlugin:a.fb,getRTLTextPluginStatus:a.fa,Map:class extends Z0{constructor(_){S.mark(y.create);const l=_;if((_=Object.assign({},bm,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(_.antialias&&a.f3(window)&&(_.antialias=!1,a.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Eg(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies,null,null),_),this._repaint=!!_.repaint,this._interactive=_.interactive,this._minTileCacheSize=_.minTileCacheSize,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=_.crossSourceCollisions,this._collectResourceTiming=_.collectResourceTiming,this._language=this._parseLanguage(_.language),this._worldview=_.worldview,this._renderTaskQueue=new K0,this._domRenderTaskQueue=new K0,this._controls=[],this._markers=[],this._popups=[],this._mapId=a.b2(),this._locale=Object.assign({},Q0,_.locale),this._clickTolerance=_.clickTolerance,this._cooperativeGestures=_.cooperativeGestures,this._performanceMetricsCollection=_.performanceMetricsCollection,this._tessellationStep=_.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=_.precompilePrograms,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Ii(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=_.scaleFactor,this._requestManager=new He(_.transformRequest,_.accessToken,_.testMode),this._silenceAuthErrors=!!_.testMode,this._contextCreateOptions=_.contextCreateOptions?Object.assign({},_.contextCreateOptions):{},typeof _.container=="string"){const d=document.getElementById(_.container);if(!d)throw new Error(`Container '${_.container.toString()}' not found.`);this._container=d}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(this._container.childNodes.length>0&&a.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),_.maxBounds&&this.setMaxBounds(_.maxBounds),this._spriteFormat=_.spriteFormat,a.aY(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new Lf(this,_),this._localFontFamily=_.localFontFamily,this._localIdeographFontFamily=_.localIdeographFontFamily,(_.style||!_.testMode)&&this.setStyle(_.style||a.e.DEFAULT_STYLE,{config:_.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),_.projection&&this.setProjection(_.projection),_.hash&&(this._hash=new Ms(typeof _.hash=="string"&&_.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){l.center==null&&l.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch});const d=_.bounds;d&&(this.resize(),this.fitBounds(d,Object.assign({},_.fitBoundsOptions,{duration:0})))}this.resize(),_.attributionControl&&this.addControl(new vm({customAttribution:_.customAttribution})),this._logoControl=new nc,this.addControl(this._logoControl,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent(),this._postStyleWithAppearanceEvent()}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new a.z(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new a.z(`${d.dataType}dataloading`,d))}),this._interactions=new J0(this)}_getMapId(){return this._mapId}addControl(_,l){if(l===void 0&&(l=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new a.y(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=_.onAdd(this);this._controls.push(_);const v=this._controlPositions[l];return l.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new a.y(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(_);return l>-1&&this._controls.splice(l,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(_){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new a.z("movestart",_)).fire(new a.z("move",_)),this.fire(new a.z("resize",_)),l&&this.fire(new a.z("moveend",_)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(_){return this.transform.setMaxBounds(a.aI.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_?this.setZoom(_):this.fire(new a.z("zoomstart")).fire(new a.z("zoom")).fire(new a.z("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_?this.setZoom(_):this.fire(new a.z("zoomstart")).fire(new a.z("zoom")).fire(new a.z("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_?this.setPitch(_):this.fire(new a.z("pitchstart")).fire(new a.z("pitch")).fire(new a.z("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_?this.setPitch(_):this.fire(new a.z("pitchstart")).fire(new a.z("pitch")).fire(new a.z("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(_){return this._scaleFactor=_,this.painter.scaleFactor=_,this.style&&this.style._setLabelPlacementStale(),this.style._updateFilteredLayers(l=>l.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(_){return _==="auto"?navigator.language:Array.isArray(_)?_.length===0?void 0:_.map(l=>l==="auto"?navigator.language:l):_}setLanguage(_){const l=this._parseLanguage(_);if(!this.style||l===this._language)return this;this._language=l,this.style.reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(_){return this.style&&_!==this._worldview?(this._worldview=_,this._styleDirty=!0,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(_){return this._lazyInitEmptyStyle(),_?typeof _=="string"&&(_={name:_}):_=null,this._useExplicitProjection=!!_,this._prioritizeAndUpdateProjection(_,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const _=this.transform,l=_.projection.name;let d;l==="globe"&&_.zoom>=a.cL?(_.setMercatorFromTransition(),d=!0):l==="mercator"&&_.zoom<a.cL&&(_.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate(),this._update(!0))}_prioritizeAndUpdateProjection(_,l){return this._updateProjection(_||l||{name:"mercator"})}_updateProjection(_){let l;const d=this.transform.mercatorFromTransition;l=_.name==="globe"&&this.transform.zoom>=a.cL?this.transform.setMercatorFromTransition():this.transform.setProjection(_),this.style.applyProjectionUpdate();const v=this.transform.getProjection().name==="mercator"&&d!==this.transform.mercatorFromTransition;return(l||v)&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(_,l){return this.transform.locationPoint3D(a.aT.convert(_),l)}unproject(_,l){return this.transform.pointLocation3D(a.P.convert(_),l)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(_,l,d){const v=T=>{let O=[];if(Array.isArray(l)){const M=l.filter(R=>this.getLayer(R));O=M.length?this.queryRenderedFeatures(T,{layers:M}):[]}else O=this.queryRenderedFeatures(T,{target:l});return O};if(_==="mouseenter"||_==="mouseover"){let T=!1;return{listener:d,targets:l,delegates:{mousemove:M=>{const R=v(M.point);R.length?T||(T=!0,d.call(this,new To(_,this,M.originalEvent,{features:R}))):T=!1},mouseout:()=>{T=!1}}}}if(_==="mouseleave"||_==="mouseout"){let T=!1;return{listener:d,targets:l,delegates:{mousemove:R=>{v(R.point).length?T=!0:T&&(T=!1,d.call(this,new To(_,this,R.originalEvent)))},mouseout:R=>{T&&(T=!1,d.call(this,new To(_,this,R.originalEvent)))}}}}{const T=O=>{const M=v(O.point);M.length&&(O.features=M,d.call(this,O),delete O.features)};return{listener:d,targets:l,delegates:{[_]:T}}}}on(_,l,d){if(typeof l=="function"||d===void 0)return super.on(_,l);if(typeof l=="string"&&(l=[l]),!this._areTargetsValid(l))return this;const v=this._createDelegatedListener(_,l,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(v);for(const T in v.delegates)this.on(T,v.delegates[T]);return this}once(_,l,d){if(typeof l=="function"||d===void 0)return super.once(_,l);if(typeof l=="string"&&(l=[l]),!this._areTargetsValid(l))return this;const v=this._createDelegatedListener(_,l,d);for(const T in v.delegates)this.once(T,v.delegates[T]);return this}off(_,l,d){if(typeof l=="function"||d===void 0)return super.off(_,l);if(typeof l=="string"&&(l=[l]),!this._areTargetsValid(l))return this;const v=this._delegatedListeners?this._delegatedListeners[_]:void 0;return v&&(T=>{for(let O=0;O<T.length;O++){const M=T[O];if(M.listener===d&&cv(M.targets,l)){for(const R in M.delegates)this.off(R,M.delegates[R]);return T.splice(O,1),this}}})(v),this}queryRenderedFeatures(_,l){if(!this.style)return[];if(_===void 0||_ instanceof a.P||Array.isArray(_)||l!==void 0||(l=_,_=void 0),_=_||[[0,0],[this.transform.width,this.transform.height]],!l){const O=this.style.queryRenderedFeatures(_,void 0,this.transform),M=this.style.queryRenderedFeatureset(_,void 0,this.transform);return O.concat(M)}let d=!0;if(l.target&&(d=this._isTargetValid(l.target),d&&!l.layers))return this.style.queryRenderedFeatureset(_,l,this.transform);let v=!0;if(l.layers&&Array.isArray(l.layers)){for(const O of l.layers)if(!this._isValidId(O)){v=!1;break}if(v&&!l.target)return this.style.queryRenderedFeatures(_,l,this.transform)}let T=[];return v&&(T=T.concat(this.style.queryRenderedFeatures(_,l,this.transform))),d&&(T=T.concat(this.style.queryRenderedFeatureset(_,l,this.transform))),T}querySourceFeatures(_,l){return!_||typeof _=="string"&&!this._isValidId(_)?[]:this.style.querySourceFeatures(_,l)}queryRasterValue(_,l,d){return this._isValidId(_)?this.style.queryRasterValue(_,l,d):Promise.resolve(null)}isPointOnSurface(_){const{name:l}=this.transform.projection;return l!=="globe"&&l!=="mercator"&&a.w(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(a.P.convert(_))}addInteraction(_,l){return this._interactions.add(_,l),this}removeInteraction(_){return this._interactions.remove(_),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(_){return this._cooperativeGestures=_,this}setStyle(_,l){return l=Object.assign({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l),this.style&&_&&l.diff!==!1&&l.localFontFamily===this._localFontFamily&&l.localIdeographFontFamily===this._localIdeographFontFamily&&!l.config?(this.style._diffStyle(_,(d,v)=>{if(d){const T=typeof d=="string"?d:d instanceof Error?d.message:d.error;a.w(`Unable to perform style diff: ${T}. Rebuilding the style from scratch.`),this._updateStyle(_,l)}else v&&this._update(!0)},()=>this._postStyleLoadEvent()),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(_,l))}_getUIString(_){const l=this._locale[_];if(l==null)throw new Error(`Missing UI string '${_}'`);return l}_updateStyle(_,l){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),_){const d=Object.assign({},l);l&&l.config&&(d.initialConfig=l.config,delete d.config),this.style=new Us(this,d).load(_),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Us(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(a.w("There is no style added to the map."),!1)}_isValidId(_){return _==null?(this.fire(new a.y(new Error("IDs can't be empty."))),!1):!a.dr(_)||(this.fire(new a.y(new Error(`IDs can't contain special symbols: "${_}".`))),!1)}_isTargetValid(_){return"featuresetId"in _?this._isValidId("importId"in _?_.importId:_.featuresetId):"layerId"in _&&this._isValidId(_.layerId)}_areTargetsValid(_){if(Array.isArray(_)){for(const l of _)if(!this._isValidId(l))return!1;return!0}return this._isTargetValid(_)}addSource(_,l){return this._isValidId(_)?(this._lazyInitEmptyStyle(),this.style.addSource(_,l),this._update(!0)):this}isSourceLoaded(_){return!!this._isValidId(_)&&!!this.style&&this.style._isSourceCacheLoaded(_)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(_,l,d){this._lazyInitEmptyStyle(),this.style.addSourceType(_,l,d)}removeSource(_){return this._isValidId(_)?(this.style.removeSource(_),this._updateTerrain(),this._update(!0)):this}getSource(_){return this._isValidId(_)?this.style.getOwnSource(_):null}addImage(_,l,{pixelRatio:d=1,sdf:v=!1,stretchX:T,stretchY:O,content:M}={}){this._lazyInitEmptyStyle();const R=a.I.from(_);if(l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap){const{width:F,height:q,data:H}=a.o.getImageData(l);this.style.addImage(R,{data:new a.q({width:F,height:q},H),pixelRatio:d,stretchX:T,stretchY:O,content:M,sdf:v,version:0,usvg:!1})}else if(l.width===void 0||l.height===void 0)this.fire(new a.y(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:F,height:q}=l,H=l;this.style.addImage(R,{data:new a.q({width:F,height:q},new Uint8Array(H.data)),pixelRatio:d,stretchX:T,stretchY:O,content:M,sdf:v,usvg:!1,version:0,userImage:H}),H.onAdd&&H.onAdd(this,_)}}updateImage(_,l){this._lazyInitEmptyStyle();const d=a.I.from(_),v=this.style.getImage(d);if(!v)return void this.fire(new a.y(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap?a.o.getImageData(l):l,{width:O,height:M,data:R}=T;if(O===void 0||M===void 0)return void this.fire(new a.y(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(O!==(v.usvg?v.icon.usvg_tree.width:v.data.width)||M!==(v.usvg?v.icon.usvg_tree.height:v.data.height))return void this.fire(new a.y(new Error(`The width and height of the updated image (${O}, ${M})
                must be that same as the previous version of the image
                (${v.data.width}, ${v.data.height})`)));const F=!(l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap);let q=!1;v.usvg?(v.data=new a.q({width:O,height:M},new Uint8Array(R)),v.usvg=!1,v.icon=void 0,q=!0):v.data.replace(R,F),this.style.updateImage(d,v,q)}hasImage(_){return _?!!this.style&&!!this.style.getImage(a.I.from(_)):(this.fire(new a.y(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(a.I.from(_))}loadImage(_,l){a.n(this._requestManager.transformRequest(_,a.R.Image),(d,v)=>{l(d,v instanceof HTMLImageElement?a.o.getImageData(v):v)})}listImages(){return this.style.listImages().map(_=>_.name)}addModel(_,l){this._lazyInitEmptyStyle(),this.style.addModel(_,l)}hasModel(_){return _?this.style.hasModel(_):(this.fire(new a.y(new Error("Missing required model id"))),!1)}removeModel(_){this.style.removeModel(_)}listModels(){return this.style.listModels()}addLayer(_,l){return this._isValidId(_.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(_,l),this._update(!0)):this}getSlot(_){const l=this.getLayer(_);return l&&l.slot||null}setSlot(_,l){return this.style.setSlot(_,l),this.style.mergeLayers(),this._update(!0)}addImport(_,l){return this.style.addImport(_,l).catch(d=>this.fire(new a.y(new Error("Failed to add import",d)))),this}updateImport(_,l){return typeof l!="string"&&l.id!==_?(this.removeImport(_),this.addImport(l)):(this.style.updateImport(_,l),this._update(!0))}removeImport(_){return this.style.removeImport(_),this}moveImport(_,l){return this.style.moveImport(_,l),this._update(!0)}moveLayer(_,l){return this._isValidId(_)?(this.style.moveLayer(_,l),this._update(!0)):this}removeLayer(_){return this._isValidId(_)?(this.style.removeLayer(_),this._update(!0)):this}getLayer(_){if(!this._isValidId(_))return null;const l=this.style.getOwnLayer(_);return l?l.type==="custom"?l.implementation:l.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(_,l,d){return this._isValidId(_)?(this.style.setLayerZoomRange(_,l,d),this._update(!0)):this}setFilter(_,l,d={}){return this._isValidId(_)?(this.style.setFilter(_,l,d),this._update(!0)):this}getFilter(_){return this._isValidId(_)?this.style.getFilter(_):null}setPaintProperty(_,l,d,v={}){return this._isValidId(_)?(this.style.setPaintProperty(_,l,d,v),this._update(!0)):this}getPaintProperty(_,l){return this._isValidId(_)?this.style.getPaintProperty(_,l):null}setLayoutProperty(_,l,d,v={}){return this._isValidId(_)?(this.style.setLayoutProperty(_,l,d,v),this._update(!0)):this}getLayoutProperty(_,l){return this._isValidId(_)?this.style.getLayoutProperty(_,l):null}setLayerProperty(_,l,d,v={}){return this._isValidId(_)?(l==="appearances"&&this._postAddingAppearancesToStyleEvent(),this.style.setLayerProperty(_,l,d,v),this._update(!0)):this}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(_){return this.style.setGlyphsUrl(_),this._update(!0)}getSchema(_){return this.style.getSchema(_)}setSchema(_,l){return this.style.setSchema(_,l),this._update(!0)}getConfig(_){return this.style.getConfig(_)}setConfig(_,l){return this.style.setConfig(_,l),this._update(!0)}getConfigProperty(_,l){return this.style.getConfigProperty(_,l)}setConfigProperty(_,l,d){return this.style.setConfigProperty(_,l,d),this._update(!0)}getFeaturesetDescriptors(_){return this.style.getFeaturesetDescriptors(_)}setLights(_){if(this._lazyInitEmptyStyle(),_&&_.length===1&&_[0].type==="flat"){const l=_[0];l.properties?this.style.setFlatLight(l.properties,l.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(_),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const _=this.style.getLights()||[];return _.length===0&&_.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),_}setLight(_,l={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:_}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(_){return this._lazyInitEmptyStyle(),!_&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(_),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(_){return this._lazyInitEmptyStyle(),this.style.setFog(_),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(_){return this._lazyInitEmptyStyle(),this.style.setSnow(_),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(_){return this._lazyInitEmptyStyle(),this.style.setRain(_),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(_){return this._lazyInitEmptyStyle(),this.style.setColorTheme(_),this._update(!0)}setImportColorTheme(_,l){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(_,l),this._update(!0)}setCamera(_){return this.style.setCamera(_),this._triggerCameraUpdate(_)}_triggerCameraUpdate(_){return this._update(this.transform.setOrthographicProjectionAtLowPitch(_["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(_){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(a.aT.convert(_),this.transform):0}setFeatureState(_,l){return _.source&&!this._isValidId(_.source)?this:(this.style.setFeatureState(_,l),this._update())}removeFeatureState(_,l){return _.source&&!this._isValidId(_.source)?this:(this.style.removeFeatureState(_,l),this._update())}getFeatureState(_){return _.source&&!this._isValidId(_.source)?null:this.style.getFeatureState(_)}_selectIndoorFloor(_){this.style.indoorManager.selectFloor(_)}_setIndoorActiveFloorsVisibility(_){this.style.indoorManager.setActiveFloorsVisibility(_)}getIndoorTileOptions(_,l){return this.style.isIndoorEnabled()?this.style.indoorManager.getIndoorTileOptions(_,l):null}_updateContainerDimensions(){if(!this._container)return;const _=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let d,v,T,O=this._container;for(;O&&(!v||!T);){const M=window.getComputedStyle(O).transform;M&&M!=="none"&&(d=M.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(v=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(T=d[3])),O=O.parentElement}this._containerWidth=v?Math.abs(_/v):_,this._containerHeight=T?Math.abs(l/T):l}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const _=this._container;_.classList.add("mapboxgl-map"),(this._missingCSSCanary=j("div","mapboxgl-canary",_)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=j("div","mapboxgl-canvas-container",_);this._canvas=j("canvas","mapboxgl-canvas",l),this._interactive&&(l.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=j("div","mapboxgl-control-container",_),v=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(T=>{v[T]=j("div",`mapboxgl-ctrl-${T}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,l){const d=a.o.devicePixelRatio||1;this._canvas.width=d*Math.ceil(_),this._canvas.height=d*Math.ceil(l),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${l}px`}_addMarker(_){this._markers.push(_)}_removeMarker(_){const l=this._markers.indexOf(_);l!==-1&&this._markers.splice(l,1)}_addPopup(_){this._popups.push(_)}_removePopup(_){const l=this._popups.indexOf(_);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const _=Object.assign({},N.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl2",_);l?(ar(l,!0),this.painter=new rv(l,this._contextCreateOptions,this.transform,this._scaleFactor,this._worldview),this.on("data",d=>{if(d.dataType==="source"){const v=this.transform.elevation?this.transform.elevation._source():null;v&&d.sourceCacheId===v.id&&this.style&&this.style._setLabelPlacementStale(),this.painter.setTileLoadedFlag(!0)}}),a.k.testSupport(l)):this.fire(new a.y(new Error("Failed to initialize WebGL")))}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.z("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style&&(this.style.clearLayers(),this.style.imageManager.destroyAtlasTextures(),this.style.reloadModels(),this.style.clearSources()),this._update(),this.fire(new a.z("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(_){return this.style?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_requestDomTask(_){!this.loaded()||this.loaded()&&!this.isMoving()?_():this._domRenderTaskQueue.add(_)}_render(_){let l;this.fire(new a.z("renderstart")),++this._frameId;const d=this.painter.context.extTimerQuery,v=a.o.now(),T=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(l=T.createQuery(),T.beginQuery(d.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(_),this._domRenderTaskQueue.run(_),this._removed)return;this._updateProjectionTransition();const O=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const F=this.transform.zoom,q=this.transform.pitch,H=a.o.now(),re=new a.ac(F,{now:H,fadeDuration:O,pitch:q,transition:this.style.transition,worldview:this._worldview});this.style.update(re)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let M=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),M=this._updateAverageElevation(v),this.style.updateSources(this.transform),this.style.updateImageProviders(),this.isMoving()||this._forceMarkerAndPopupUpdate()):M=this._updateAverageElevation(v),this.style&&(this._placementDirty=this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,O,this._crossSourceCollisions,this.painter.replacementSource)),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:O,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new a.z("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,S.mark(y.load),this.fire(new a.z("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this.style.modelManager.isLoaded()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const F=a.o.now()-v;T.endQuery(d.TIME_ELAPSED_EXT),setTimeout(()=>{const q=T.getQueryParameter(l,T.QUERY_RESULT)/1e6;T.deleteQuery(l),this.fire(new a.z("gpu-timing-frame",{cpuTime:F,gpuTime:q}))},50)}if(this.listens("gpu-timing-layer")){const F=this.painter.collectGpuTimers();setTimeout(()=>{const q=this.painter.queryGpuTimers(F);this.fire(new a.z("gpu-timing-layer",{layerTimes:q}))},50)}if(this.listens("gpu-timing-deferred-render")){const F=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const q=this.painter.queryGpuTimeDeferredRender(F);this.fire(new a.z("gpu-timing-deferred-render",{gpuTime:q}))},50)}const R=this._sourcesDirty||this._styleDirty||this._placementDirty||M;if(R||this._repaint)this.triggerRepaint();else{const F=this.idle();if(F&&(M=this._updateAverageElevation(v,!0)),M)this.triggerRepaint();else if(this._triggerFrame(!1),F&&(this.fire(new a.z("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const q=this._calculateSpeedIndex();this.fire(new a.z("speedindexcompleted",{speedIndex:q})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||R||(this._fullyLoaded=!0,S.mark(y.fullLoad),this._performanceMetricsCollection&&Ct(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(_){for(const l of this._markers)_&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!_||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(_,l=!1){const d=T=>(this.transform.averageElevation=T,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);const v=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(v||(l||_-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(_)){const T=this.transform.averageElevation;let O=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(O)?O=0:this._averageElevationLastSampledAt=_;const M=Math.abs(T-O);if(M>1){if(this._isInitialLoad||v)return this._averageElevation.jumpTo(O),d(O);this._averageElevation.easeTo(O,_,300)}else if(M>1e-4)return this._averageElevation.jumpTo(O),d(O)}return!!this._averageElevation.isEasing(_)&&d(this._averageElevation.getValue(_))}_authenticate(){gn(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,_=>{if(_&&(_.message===De||_.status===401)){const l=this.painter.context.gl;ar(l,!1),this._logoControl instanceof nc&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new a.y(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),sn(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&Tn(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_postStyleWithAppearanceEvent(){this.style.globalId&&this.style.hasAppearances()&&xe(this._requestManager._customAccessToken)}_postAddingAppearancesToStyleEvent(){ct(this._requestManager._customAccessToken)}_updateTerrain(){const _=this._isDragging();this.painter.updateTerrain(this.style,_)}_calculateSpeedIndex(){const _=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const d=this.painter.context.gl,v=d.createFramebuffer();function T(O){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,O,0);const M=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,M),M}return d.bindFramebuffer(d.FRAMEBUFFER,v),this._canvasPixelComparison(T(_),l.canvasCopies.map(T),l.timeStamps)}_canvasPixelComparison(_,l,d){let v=d[1]-d[0];const T=_.length/4;for(let O=0;O<l.length;O++){const M=l[O];let R=0;for(let F=0;F<M.length;F+=4)M[F]===_[F]&&M[F+1]===_[F+1]&&M[F+2]===_[F+2]&&M[F+3]===_[F+3]&&(R+=1);v+=(d[O+2]-d[O+1])*(1-R/T)}return v}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),An.delete(this.painter.context.gl),Yt.remove(),jt.remove(),this._removed=!0,this.fire(new a.z("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(_){this._renderNextFrame=this._renderNextFrame||_,this.style&&!this._frame&&(this._frame=a.o.frame(l=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(l)}))}_preloadTiles(_){const l=this.style?this.style.getSourceCaches():[];return a.bw(l,(d,v)=>d._preloadTiles(_,v),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(_){this._trackResize&&this.resize({originalEvent:_})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(_){this._showParseStatus!==_&&(this._showParseStatus=_,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(_){this._showTerrainWireframe!==_&&(this._showTerrainWireframe=_,this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(_){this._showLayers2DWireframe!==_&&(this._showLayers2DWireframe=_,this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(_){this._showLayers3DWireframe!==_&&(this._showLayers3DWireframe=_,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(_){this._speedIndexTiming!==_&&(this._speedIndexTiming=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,this.style&&_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(_){this._showTileAABBs!==_&&(this._showTileAABBs=_,_&&this._update())}_setCacheLimits(_,l){a.f4(_,l)}get version(){return p}},NavigationControl:class{constructor(_={}){this.options=Object.assign({},qc,_),this._container=j("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(a.aY(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),j("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),j("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.aY(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:l}):d.resetNorth({},{originalEvent:l}))}),this._compassIcon=j("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map;if(!_)return;const l=_.getZoom(),d=l===_.getMaxZoom(),v=l===_.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())}_rotateCompassArrow(){const _=this._map;if(!_)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(_.transform.pitch*(Math.PI/180)),.5)}) rotateX(${_.transform.pitch}deg) rotateZ(${_.transform.angle*(180/Math.PI)}deg)`:`rotate(${_.transform.angle*(180/Math.PI)}deg)`;_._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),_.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&_.on("pitch",this._rotateCompassArrow),_.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new uo(_,this._compass,this.options.visualizePitch)),this._container}onRemove(){const _=this._map;_&&(this._container.remove(),this.options.showZoom&&_.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&_.off("pitch",this._rotateCompassArrow),_.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(_,l){const d=j("button",_,this._container);return d.type="button",d.addEventListener("click",l),d}_setButtonTitle(_,l){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${l}`);_.setAttribute("aria-label",d),_.firstElementChild&&_.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends a.E{constructor(_={}){super();const l=navigator.geolocation;this.options=Object.assign({geolocation:l},Dl,_),a.aY(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=iv(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(_){return this._map=_,this._container=j("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._clearRequestTimeout(),this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(_){const l=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,_(d)};this._supportsGeolocation!==void 0?_(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(d=>l(d.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(_){const l=this._map.getMaxBounds(),d=_.coords;return!!l&&(d.longitude<l.getWest()||d.longitude>l.getEast()||d.latitude<l.getSouth()||d.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(_){if(this._map){if(this._clearRequestTimeout(),this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new a.z("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this.options.followUserLocation?(this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active")):(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"));break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_),this.options.followUserLocation&&(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(_),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new a.z("geolocate",Object.assign({coords:_.coords,timestamp:_.timestamp},_.toJSON?{toJSON:_.toJSON.bind(_)}:{}))),this._finish()}}_updateCamera(_){const l=new a.aT(_.coords.longitude,_.coords.latitude),d=_.coords.accuracy,v=this._map.getBearing(),T=Object.assign({bearing:v},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(d),T,{geolocateSource:!0})}_updateMarker(_){if(_){const l=new a.aT(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map.transform,l=a.cf(1,_._center.lat)*_.worldSize,d=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(_){if(this._map){if(this._clearRequestTimeout(),this.options.trackUserLocation)if(_.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new a.z("error",{code:_.code,message:_.message,PERMISSION_DENIED:_.PERMISSION_DENIED,POSITION_UNAVAILABLE:_.POSITION_UNAVAILABLE,TIMEOUT:_.TIMEOUT})),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_startRequestTimeout(){this._clearRequestTimeout();const _=this.options.positionOptions.timeout;_&&(this._requestTimeoutId=window.setTimeout(()=>{this._onError({code:3,message:"Geolocation request timed out"})},_))}_clearRequestTimeout(){this._requestTimeoutId!==void 0&&(clearTimeout(this._requestTimeoutId),this._requestTimeoutId=void 0)}_setupUI(_){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=j("button","mapboxgl-ctrl-geolocate",this._container),j("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j("div","mapboxgl-user-location"),this._dotElement.appendChild(j("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(j("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ua({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=j("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ua({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.showButton||(this._container.style.display="none"),this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new a.z("trackuserlocationend")))})}}_onDeviceOrientation(_){this._userLocationDotMarker&&(_.webkitCompassHeading?this._heading=_.webkitCompassHeading:_.absolute===!0&&(this._heading=-1*_.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.z("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.z("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.z("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(_={maximumAge:6e5,timeout:0},this._noTimeout=!0):(_=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,_),this._startRequestTimeout(),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._startRequestTimeout(),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}setFollowUserLocation(_){return this.options.followUserLocation=_??Dl.followUserLocation,this.options.trackUserLocation&&this._watchState!=="OFF"&&(this.options.followUserLocation?this._watchState!=="BACKGROUND"&&this._watchState!=="BACKGROUND_ERROR"||(this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.z("trackuserlocationstart"))):this._watchState!=="ACTIVE_LOCK"&&this._watchState!=="ACTIVE_ERROR"||(this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this.fire(new a.z("trackuserlocationend")))),this}_addDeviceOrientationListener(){const _=()=>{const l="ondeviceorientationabsolute"in window?"deviceorientationabsolute":"deviceorientation";window.addEventListener(l,this._onDeviceOrientation)};typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&_()}).catch(console.error):_()}_clearWatch(){this._clearRequestTimeout(),this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:vm,ScaleControl:class{constructor(_={}){this.options=Object.assign({},xm,_),a.aY(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const _=this.options.maxWidth||100,l=this._map,d=l._containerHeight/2,v=l._containerWidth/2-_/2,T=l.unproject([v,d]),O=l.unproject([v+_,d]),M=T.distanceTo(O);if(this.options.unit==="imperial"){const R=3.2808*M;R>5280?this._setScale(_,R/5280,"mile"):this._setScale(_,R,"foot")}else this.options.unit==="nautical"?this._setScale(_,M/1852,"nautical-mile"):M>=1e3?this._setScale(_,M/1e3,"kilometer"):this._setScale(_,M,"meter")}_setScale(_,l,d){this._map._requestDomTask(()=>{const v=(function(O){const M=Math.pow(10,`${Math.floor(O)}`.length-1);let R=O/M;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:(function(F){const q=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*q)/q})(R),M*R})(l),T=v/l;this._container.innerHTML=d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(v):`${v}&nbsp;${Da[d]}`,this._container.style.width=_*T+"px"})}onAdd(_){return this._map=_,this._language=_.getLanguage(),this._container=j("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(_){this._language=_,this._update()}setUnit(_){this.options.unit=_,this._update()}},FullscreenControl:class{constructor(_={}){this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:a.w("Full screen control 'container' must be a DOM element.")),a.aY(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=j("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const _=this._fullscreenButton=j("button","mapboxgl-ctrl-fullscreen",this._controlContainer);j("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",_)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},IndoorControl:P_,Popup:class extends a.E{constructor(_){super(),this.options=Object.assign(Object.create(ll),_),this._altitude=this.options.altitude,a.aY(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(_&&_.className?_.className.trim().split(/\s+/):[])}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&_.on("preclick",this._onClose),this.options.closeOnMove&&_.on("move",this._onClose),_.on("remove",this.remove),this._update(),_._addPopup(this),this._focusFirstElement(),this._trackPointer?(_.on("mousemove",this._onMouseEvent),_.on("mouseup",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")):_.on("move",this._update),this.fire(new a.z("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const _=this._map;return _&&(_.off("move",this._update),_.off("move",this._onClose),_.off("preclick",this._onClose),_.off("click",this._onClose),_.off("remove",this.remove),_.off("mousemove",this._onMouseEvent),_.off("mouseup",this._onMouseEvent),_.off("drag",this._onMouseEvent),_._canvasContainer&&_._canvasContainer.classList.remove("mapboxgl-track-pointer"),_._removePopup(this),this._map=void 0),this.fire(new a.z("close")),this}getLngLat(){return this._lngLat}setLngLat(_){this._lngLat=a.aT.convert(_),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(_){return this._altitude=_,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const _=this._map;return _&&(_.off("move",this._update),_.on("mousemove",this._onMouseEvent),_.on("drag",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const l=document.createDocumentFragment(),d=document.createElement("body");let v;for(d.innerHTML=_;v=d.firstChild,v;)l.appendChild(v);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=j("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(_),this.options.closeButton){const d=this._closeButton=j("button","mapboxgl-popup-close-button",l);d.type="button",d.setAttribute("aria-label","Close popup"),d.innerHTML='<span aria-hidden="true">&#215;</span>',d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(_){return this._classList.add(_),this._updateClassList(),this}removeClassName(_){return this._classList.delete(_),this._updateClassList(),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){let l;return this._classList.delete(_)?l=!1:(this._classList.add(_),l=!0),this._updateClassList(),l}_onMouseEvent(_){this._update(_.point)}_getAnchor(_){if(this.options.anchor)return this.options.anchor;const l=this._map,d=this._container,v=this._pos;if(!l||!d||!v)return"bottom";const T=d.offsetWidth,O=d.offsetHeight,M=v.x<T/2,R=v.x>l.transform.width-T/2;if(v.y+_<O)return M?"top-left":R?"top-right":"top";if(v.y>l.transform.height-O){if(M)return"bottom-left";if(R)return"bottom-right"}return M?"left":R?"right":"bottom"}_updateClassList(){const _=this._container;if(!_)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),_.className=l.join(" ")}_update(_){const l=this._map,d=this._content;if(!l||!this._lngLat&&!this._trackPointer||!d)return;let v=this._container;if(v||(v=this._container=j("div","mapboxgl-popup",l.getContainer()),this._tip=j("div","mapboxgl-popup-tip",v),v.appendChild(d)),this.options.maxWidth&&v.style.maxWidth!==this.options.maxWidth&&(v.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Wd(this._lngLat,this._pos,l.transform)),!this._trackPointer||_){const T=this._pos=this._trackPointer&&_ instanceof a.P?_:l.project(this._lngLat,this._altitude),O=Xd(this.options.offset),M=this._anchor=this._getAnchor(O.y),R=Xd(this.options.offset,M),F=T.add(R).round();l._requestDomTask(()=>{this._container&&M&&(this._container.style.transform=`${mu[M]} translate(${F.x}px,${F.y}px)`)})}if(!this._marker&&l._showingGlobe()){const T=a.f5(l.transform,this._lngLat)?0:1;this._setOpacity(T)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(zf);_&&_.focus()}_onClose(){this.remove()}_setOpacity(_){this._container&&(this._container.style.opacity=`${_}`),this._content&&(this._content.style.pointerEvents=_?"auto":"none")}},Marker:Ua,Style:Us,LngLat:a.aT,LngLatBounds:a.aI,Point:a.P,MercatorCoordinate:a.ae,FreeCameraOptions:e1,Evented:a.E,config:a.e,prewarm:a.f9,clearPrewarmedResources:a.f8,get accessToken(){return a.e.ACCESS_TOKEN},set accessToken(_){a.e.ACCESS_TOKEN=_},get baseApiUrl(){return a.e.API_URL},set baseApiUrl(_){a.e.API_URL=_},get workerCount(){return a.fi.workerCount},set workerCount(_){a.fi.workerCount=_},get maxParallelImageRequests(){return a.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){a.e.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage(_){a.fh(_)},get workerUrl(){return a.fg.workerUrl},set workerUrl(_){a.fg.workerUrl=_},get workerClass(){return a.fg.workerClass},set workerClass(_){a.fg.workerClass=_},get workerParams(){return a.fg.workerParams},set workerParams(_){a.fg.workerParams=_},get dracoUrl(){return a.ff()},set dracoUrl(_){a.fe(_)},get meshoptUrl(){return a.fd()},set meshoptUrl(_){a.fc(_)},setNow:a.o.setNow,restoreNow:a.o.restoreNow}});var f=i;return f}))})(gD)),gD.exports}var SVe=wVe();const Rb=ma(SVe);var Dz,kZ;function oT(){if(kZ)return Dz;kZ=1,Dz=t;var e=Object.prototype.hasOwnProperty;function t(){for(var n={},r=0;r<arguments.length;r++){var i=arguments[r];for(var s in i)e.call(i,s)&&(n[s]=i[s])}return n}return Dz}var Iz={exports:{}},LZ;function TVe(){return LZ||(LZ=1,(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(r,i){return i.filter(function(s){return n.test(r,s)})},n.test=function(r,i){return n.match(r,i)!==null},n.match=function(r,i,s){s=s||{};var f=0,a=[],p=i.length,y=0,S=0,E=s.pre||"",I=s.post||"",L=s.caseSensitive&&i||i.toLowerCase(),N;r=s.caseSensitive&&r||r.toLowerCase();for(var j=0;j<p;j++)N=i[j],L[j]===r[f]?(N=E+N+I,f+=1,S+=1+S):S=0,y+=S,a[a.length]=N;return f===r.length?(y=L===r?1/0:y,{rendered:a.join(""),score:y}):null},n.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(f,a,p,y){var S=a;s.extract&&(S=s.extract(a));var E=n.match(r,S,s);return E!=null&&(f[f.length]={string:E.rendered,score:E.score,index:p,original:a}),f},[]).sort(function(f,a){var p=a.score-f.score;return p||f.index-a.index}))}})()})(Iz)),Iz.exports}var Pz,zZ;function EVe(){if(zZ)return Pz;zZ=1;var e=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};return e.prototype.show=function(){this.element.style.display="block"},e.prototype.hide=function(){this.element.style.display="none"},e.prototype.add=function(t){this.items.push(t)},e.prototype.clear=function(){this.items=[],this.active=0},e.prototype.isEmpty=function(){return!this.items.length},e.prototype.isVisible=function(){return this.element.style.display==="block"},e.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()},e.prototype.drawItem=function(t,n){var r=document.createElement("li"),i=document.createElement("a");n&&(r.className+=" active"),i.innerHTML=t.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,t)}).bind(this))},e.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},e.prototype.move=function(t){this.active=t,this.draw()},e.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)},e.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},e.prototype.drawError=function(t){var n=document.createElement("li");n.innerHTML=t,this.element.appendChild(n),this.show()},Pz=e,Pz}var Rz,NZ;function AVe(){if(NZ)return Rz;NZ=1;var e=oT(),t=TVe(),n=EVe(),r=function(i,s,f){return f=f||{},this.options=e({minLength:2,limit:5,filter:!0,hideOnBlur:!0},f),this.el=i,this.data=s||[],this.list=new n(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(a){this.handleKeyUp(a.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(a){this.handleKeyDown(a)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(a){this.handlePaste(a)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i){i===40||i===38||i===27||i===13||i===9||this.handleInputChange(this.el.value)},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var s=this;setTimeout(function(){s.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(s){for(var f=0;f<s.length&&(this.list.add(s[f]),f!==this.options.limit-1);f++);this.list.draw()}).bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i=i.toLowerCase(),i},r.prototype.match=function(i,s){return i.indexOf(s)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i),document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!1),this.el.dispatchEvent(s)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var s={pre:"<strong>",post:"</strong>",extract:(function(a){return this.getItemValue(a)}).bind(this)},f;this.options.filter?(f=t.filter(this.query,this.data,s),f=f.map((function(a){return{original:a.original,string:this.render(a.original,a.string)}}).bind(this))):f=this.data.map((function(a){var p=this.render(a);return{original:a,string:p}}).bind(this)),i(f)},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,s){if(s)return s;for(var f=i.original?this.getItemValue(i.original):this.getItemValue(i),a=this.normalize(f),p=a.lastIndexOf(this.query);p>-1;){var y=p+this.query.length;f=f.slice(0,p)+"<strong>"+f.slice(p,y)+"</strong>"+f.slice(y),p=a.slice(0,p).lastIndexOf(this.query)}return f},r.prototype.renderError=function(i){this.list.drawError(i)},Rz=r,Rz}var kz,FZ;function OVe(){if(FZ)return kz;FZ=1;var e=AVe();return kz=e,typeof window<"u"&&(window.Suggestions=e),kz}var Lz,BZ;function CVe(){if(BZ)return Lz;BZ=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,f=/^0o[0-7]+$/i,a=parseInt,p=typeof Au=="object"&&Au&&Au.Object===Object&&Au,y=typeof self=="object"&&self&&self.Object===Object&&self,S=p||y||Function("return this")(),E=Object.prototype,I=E.toString,L=Math.max,N=Math.min,j=function(){return S.Date.now()};function k(Q,W,te){var X,ae,le,ge,ye,De,He=0,Be=!1,Ee=!1,Fe=!0;if(typeof Q!="function")throw new TypeError(e);W=ie(W)||0,V(te)&&(Be=!!te.leading,Ee="maxWait"in te,le=Ee?L(ie(te.maxWait)||0,W):le,Fe="trailing"in te?!!te.trailing:Fe);function at(Tn){var Ut=X,xe=ae;return X=ae=void 0,He=Tn,ge=Q.apply(xe,Ut),ge}function yt(Tn){return He=Tn,ye=setTimeout(it,W),Be?at(Tn):ge}function je(Tn){var Ut=Tn-De,xe=Tn-He,Ye=W-Ut;return Ee?N(Ye,le-xe):Ye}function Ke(Tn){var Ut=Tn-De,xe=Tn-He;return De===void 0||Ut>=W||Ut<0||Ee&&xe>=le}function it(){var Tn=j();if(Ke(Tn))return Pe(Tn);ye=setTimeout(it,je(Tn))}function Pe(Tn){return ye=void 0,Fe&&X?at(Tn):(X=ae=void 0,ge)}function jt(){ye!==void 0&&clearTimeout(ye),He=0,X=De=ae=ye=void 0}function sn(){return ye===void 0?ge:Pe(j())}function dn(){var Tn=j(),Ut=Ke(Tn);if(X=arguments,ae=this,De=Tn,Ut){if(ye===void 0)return yt(De);if(Ee)return ye=setTimeout(it,W),at(De)}return ye===void 0&&(ye=setTimeout(it,W)),ge}return dn.cancel=jt,dn.flush=sn,dn}function V(Q){var W=typeof Q;return!!Q&&(W=="object"||W=="function")}function K(Q){return!!Q&&typeof Q=="object"}function J(Q){return typeof Q=="symbol"||K(Q)&&I.call(Q)==n}function ie(Q){if(typeof Q=="number")return Q;if(J(Q))return t;if(V(Q)){var W=typeof Q.valueOf=="function"?Q.valueOf():Q;Q=V(W)?W+"":W}if(typeof Q!="string")return Q===0?Q:+Q;Q=Q.replace(r,"");var te=s.test(Q);return te||f.test(Q)?a(Q.slice(2),te?2:8):i.test(Q)?t:+Q}return Lz=k,Lz}var OM={exports:{}},jZ;function MVe(){if(jZ)return OM.exports;jZ=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(Q,W,te){return Function.prototype.apply.call(Q,W,te)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(Q){return Object.getOwnPropertyNames(Q).concat(Object.getOwnPropertySymbols(Q))}:n=function(Q){return Object.getOwnPropertyNames(Q)};function r(ie){console&&console.warn&&console.warn(ie)}var i=Number.isNaN||function(Q){return Q!==Q};function s(){s.init.call(this)}OM.exports=s,OM.exports.once=V,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var f=10;function a(ie){if(typeof ie!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ie)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(ie){if(typeof ie!="number"||ie<0||i(ie))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ie+".");f=ie}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(Q){if(typeof Q!="number"||Q<0||i(Q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Q+".");return this._maxListeners=Q,this};function p(ie){return ie._maxListeners===void 0?s.defaultMaxListeners:ie._maxListeners}s.prototype.getMaxListeners=function(){return p(this)},s.prototype.emit=function(Q){for(var W=[],te=1;te<arguments.length;te++)W.push(arguments[te]);var X=Q==="error",ae=this._events;if(ae!==void 0)X=X&&ae.error===void 0;else if(!X)return!1;if(X){var le;if(W.length>0&&(le=W[0]),le instanceof Error)throw le;var ge=new Error("Unhandled error."+(le?" ("+le.message+")":""));throw ge.context=le,ge}var ye=ae[Q];if(ye===void 0)return!1;if(typeof ye=="function")t(ye,this,W);else for(var De=ye.length,He=N(ye,De),te=0;te<De;++te)t(He[te],this,W);return!0};function y(ie,Q,W,te){var X,ae,le;if(a(W),ae=ie._events,ae===void 0?(ae=ie._events=Object.create(null),ie._eventsCount=0):(ae.newListener!==void 0&&(ie.emit("newListener",Q,W.listener?W.listener:W),ae=ie._events),le=ae[Q]),le===void 0)le=ae[Q]=W,++ie._eventsCount;else if(typeof le=="function"?le=ae[Q]=te?[W,le]:[le,W]:te?le.unshift(W):le.push(W),X=p(ie),X>0&&le.length>X&&!le.warned){le.warned=!0;var ge=new Error("Possible EventEmitter memory leak detected. "+le.length+" "+String(Q)+" listeners added. Use emitter.setMaxListeners() to increase limit");ge.name="MaxListenersExceededWarning",ge.emitter=ie,ge.type=Q,ge.count=le.length,r(ge)}return ie}s.prototype.addListener=function(Q,W){return y(this,Q,W,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(Q,W){return y(this,Q,W,!0)};function S(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(ie,Q,W){var te={fired:!1,wrapFn:void 0,target:ie,type:Q,listener:W},X=S.bind(te);return X.listener=W,te.wrapFn=X,X}s.prototype.once=function(Q,W){return a(W),this.on(Q,E(this,Q,W)),this},s.prototype.prependOnceListener=function(Q,W){return a(W),this.prependListener(Q,E(this,Q,W)),this},s.prototype.removeListener=function(Q,W){var te,X,ae,le,ge;if(a(W),X=this._events,X===void 0)return this;if(te=X[Q],te===void 0)return this;if(te===W||te.listener===W)--this._eventsCount===0?this._events=Object.create(null):(delete X[Q],X.removeListener&&this.emit("removeListener",Q,te.listener||W));else if(typeof te!="function"){for(ae=-1,le=te.length-1;le>=0;le--)if(te[le]===W||te[le].listener===W){ge=te[le].listener,ae=le;break}if(ae<0)return this;ae===0?te.shift():j(te,ae),te.length===1&&(X[Q]=te[0]),X.removeListener!==void 0&&this.emit("removeListener",Q,ge||W)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(Q){var W,te,X;if(te=this._events,te===void 0)return this;if(te.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):te[Q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete te[Q]),this;if(arguments.length===0){var ae=Object.keys(te),le;for(X=0;X<ae.length;++X)le=ae[X],le!=="removeListener"&&this.removeAllListeners(le);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(W=te[Q],typeof W=="function")this.removeListener(Q,W);else if(W!==void 0)for(X=W.length-1;X>=0;X--)this.removeListener(Q,W[X]);return this};function I(ie,Q,W){var te=ie._events;if(te===void 0)return[];var X=te[Q];return X===void 0?[]:typeof X=="function"?W?[X.listener||X]:[X]:W?k(X):N(X,X.length)}s.prototype.listeners=function(Q){return I(this,Q,!0)},s.prototype.rawListeners=function(Q){return I(this,Q,!1)},s.listenerCount=function(ie,Q){return typeof ie.listenerCount=="function"?ie.listenerCount(Q):L.call(ie,Q)},s.prototype.listenerCount=L;function L(ie){var Q=this._events;if(Q!==void 0){var W=Q[ie];if(typeof W=="function")return 1;if(W!==void 0)return W.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function N(ie,Q){for(var W=new Array(Q),te=0;te<Q;++te)W[te]=ie[te];return W}function j(ie,Q){for(;Q+1<ie.length;Q++)ie[Q]=ie[Q+1];ie.pop()}function k(ie){for(var Q=new Array(ie.length),W=0;W<Q.length;++W)Q[W]=ie[W].listener||ie[W];return Q}function V(ie,Q){return new Promise(function(W,te){function X(le){ie.removeListener(Q,ae),te(le)}function ae(){typeof ie.removeListener=="function"&&ie.removeListener("error",X),W([].slice.call(arguments))}J(ie,Q,ae,{once:!0}),Q!=="error"&&K(ie,X,{once:!0})})}function K(ie,Q,W){typeof ie.on=="function"&&J(ie,"error",Q,W)}function J(ie,Q,W,te){if(typeof ie.on=="function")te.once?ie.once(Q,W):ie.on(Q,W);else if(typeof ie.addEventListener=="function")ie.addEventListener(Q,function X(ae){te.once&&ie.removeEventListener(Q,X),W(ae)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ie)}return OM.exports}var zz,UZ;function DVe(){return UZ||(UZ=1,zz={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}),zz}var Nz,$Z;function IVe(){if($Z)return Nz;$Z=1;function e(r){var i=r.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return i?{key:i[1],value:i[2]}:null}function t(r){var i=r.match(/<?([^>]*)>(.*)/);if(!i)return null;var s=i[1],f=i[2].split(";"),a=null,p=f.reduce(function(y,S){var E=e(S);return E?E.key==="rel"?(a||(a=E.value),y):(y[E.key]=E.value,y):y},{});return a?{url:s,rel:a,params:p}:null}function n(r){return r?r.split(/,\s*</).reduce(function(i,s){var f=t(s);if(!f)return i;var a=f.rel.split(/\s+/);return a.forEach(function(p){i[p]||(i[p]={url:f.url,params:f.params})}),i},{}):{}}return Nz=n,Nz}var Fz,VZ;function PVe(){if(VZ)return Fz;VZ=1;var e=IVe();function t(n,r){this.request=n,this.headers=r.headers,this.rawBody=r.body,this.statusCode=r.statusCode;try{this.body=JSON.parse(r.body||"{}")}catch{this.body=r.body}this.links=e(this.headers.link)}return t.prototype.hasNextPage=function(){return!!this.links.next},t.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},Fz=t,Fz}var Bz,qZ;function qR(){return qZ||(qZ=1,Bz={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}),Bz}var jz,HZ;function RVe(){if(HZ)return jz;HZ=1;var e=qR();function t(n){var r=n.type||e.ERROR_HTTP,i;if(n.body)try{i=JSON.parse(n.body)}catch{i=n.body}else i=null;var s=n.message||null;s||(typeof i=="string"?s=i:i&&typeof i.message=="string"?s=i.message:r===e.ERROR_REQUEST_ABORTED&&(s="Request aborted")),this.message=s,this.type=r,this.statusCode=n.statusCode||null,this.request=n.request,this.body=i}return jz=t,jz}var Uz,GZ;function kVe(){if(GZ)return Uz;GZ=1;function e(n){var r=n.indexOf(":"),i=n.substring(0,r).trim().toLowerCase(),s=n.substring(r+1).trim();return{name:i,value:s}}function t(n){var r={};return n&&n.trim().split(/[\r|\n]+/).forEach(function(i){var s=e(i);r[s.name]=s.value}),r}return Uz=t,Uz}var $z,YZ;function LVe(){if(YZ)return $z;YZ=1;var e=PVe(),t=RVe(),n=qR(),r=kVe(),i={};function s(E){var I=i[E.id];I&&(I.abort(),delete i[E.id])}function f(E,I){return new e(E,{body:I.response,headers:r(I.getAllResponseHeaders()),statusCode:I.status})}function a(E){var I=E.total,L=E.loaded,N=100*L/I;return{total:I,transferred:L,percent:N}}function p(E,I){return new Promise(function(L,N){I.onprogress=function(V){E.emitter.emit(n.EVENT_PROGRESS_DOWNLOAD,a(V))};var j=E.file;j&&(I.upload.onprogress=function(V){E.emitter.emit(n.EVENT_PROGRESS_UPLOAD,a(V))}),I.onerror=function(V){N(V)},I.onabort=function(){var V=new t({request:E,type:n.ERROR_REQUEST_ABORTED});N(V)},I.onload=function(){if(delete i[E.id],I.status<200||I.status>=400){var V=new t({request:E,body:I.response,statusCode:I.status});N(V);return}L(I)};var k=E.body;typeof k=="string"?I.send(k):k?I.send(JSON.stringify(k)):j?I.send(j):I.send(),i[E.id]=I}).then(function(L){return f(E,L)})}function y(E,I){var L=E.url(I),N=new window.XMLHttpRequest;return N.open(E.method,L),Object.keys(E.headers).forEach(function(j){N.setRequestHeader(j,E.headers[j])}),N}function S(E){return Promise.resolve().then(function(){var I=y(E,E.client.accessToken);return p(E,I)})}return $z={browserAbort:s,sendRequestXhr:p,browserSend:S,createRequestXhr:y},$z}var r2={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */var zVe=r2.exports,WZ;function NVe(){return WZ||(WZ=1,(function(e,t){(function(n){var r=t,i=e&&e.exports==r&&e,s=typeof Au=="object"&&Au;(s.global===s||s.window===s)&&(n=s);var f=function(N){this.message=N};f.prototype=new Error,f.prototype.name="InvalidCharacterError";var a=function(N){throw new f(N)},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=/[\t\n\f\r ]/g,S=function(N){N=String(N).replace(y,"");var j=N.length;j%4==0&&(N=N.replace(/==?$/,""),j=N.length),(j%4==1||/[^+a-zA-Z0-9/]/.test(N))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var k=0,V,K,J="",ie=-1;++ie<j;)K=p.indexOf(N.charAt(ie)),V=k%4?V*64+K:K,k++%4&&(J+=String.fromCharCode(255&V>>(-2*k&6)));return J},E=function(N){N=String(N),/[^\0-\xFF]/.test(N)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var j=N.length%3,k="",V=-1,K,J,ie,Q,W=N.length-j;++V<W;)K=N.charCodeAt(V)<<16,J=N.charCodeAt(++V)<<8,ie=N.charCodeAt(++V),Q=K+J+ie,k+=p.charAt(Q>>18&63)+p.charAt(Q>>12&63)+p.charAt(Q>>6&63)+p.charAt(Q&63);return j==2?(K=N.charCodeAt(V)<<8,J=N.charCodeAt(++V),Q=K+J,k+=p.charAt(Q>>10)+p.charAt(Q>>4&63)+p.charAt(Q<<2&63)+"="):j==1&&(Q=N.charCodeAt(V),k+=p.charAt(Q>>2)+p.charAt(Q<<4&63)+"=="),k},I={encode:E,decode:S,version:"0.1.0"};if(r&&!r.nodeType)if(i)i.exports=I;else for(var L in I)I.hasOwnProperty(L)&&(r[L]=I[L]);else n.base64=I})(zVe)})(r2,r2.exports)),r2.exports}var Vz,XZ;function Jhe(){if(XZ)return Vz;XZ=1;var e=NVe(),t={};function n(s){if(t[s])return t[s];var f=s.split("."),a=f[0],p=f[1];if(!p)throw new Error("Invalid token");var y=r(p),S={usage:a,user:y.u};return i(y,"a")&&(S.authorization=y.a),i(y,"exp")&&(S.expires=y.exp*1e3),i(y,"iat")&&(S.created=y.iat*1e3),i(y,"scopes")&&(S.scopes=y.scopes),i(y,"client")&&(S.client=y.client),i(y,"ll")&&(S.lastLogin=y.ll),i(y,"iu")&&(S.impersonator=y.iu),t[s]=S,S}function r(s){try{return JSON.parse(e.decode(s))}catch{throw new Error("Invalid token")}}function i(s,f){return Object.prototype.hasOwnProperty.call(s,f)}return Vz=n,Vz}var qz={exports:{}},ZZ;function FVe(){return ZZ||(ZZ=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(p,y,S){this.fn=p,this.context=y,this.once=S||!1}function s(p,y,S,E,I){if(typeof S!="function")throw new TypeError("The listener must be a function");var L=new i(S,E||p,I),N=n?n+y:y;return p._events[N]?p._events[N].fn?p._events[N]=[p._events[N],L]:p._events[N].push(L):(p._events[N]=L,p._eventsCount++),p}function f(p,y){--p._eventsCount===0?p._events=new r:delete p._events[y]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var y=[],S,E;if(this._eventsCount===0)return y;for(E in S=this._events)t.call(S,E)&&y.push(n?E.slice(1):E);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(S)):y},a.prototype.listeners=function(y){var S=n?n+y:y,E=this._events[S];if(!E)return[];if(E.fn)return[E.fn];for(var I=0,L=E.length,N=new Array(L);I<L;I++)N[I]=E[I].fn;return N},a.prototype.listenerCount=function(y){var S=n?n+y:y,E=this._events[S];return E?E.fn?1:E.length:0},a.prototype.emit=function(y,S,E,I,L,N){var j=n?n+y:y;if(!this._events[j])return!1;var k=this._events[j],V=arguments.length,K,J;if(k.fn){switch(k.once&&this.removeListener(y,k.fn,void 0,!0),V){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,S),!0;case 3:return k.fn.call(k.context,S,E),!0;case 4:return k.fn.call(k.context,S,E,I),!0;case 5:return k.fn.call(k.context,S,E,I,L),!0;case 6:return k.fn.call(k.context,S,E,I,L,N),!0}for(J=1,K=new Array(V-1);J<V;J++)K[J-1]=arguments[J];k.fn.apply(k.context,K)}else{var ie=k.length,Q;for(J=0;J<ie;J++)switch(k[J].once&&this.removeListener(y,k[J].fn,void 0,!0),V){case 1:k[J].fn.call(k[J].context);break;case 2:k[J].fn.call(k[J].context,S);break;case 3:k[J].fn.call(k[J].context,S,E);break;case 4:k[J].fn.call(k[J].context,S,E,I);break;default:if(!K)for(Q=1,K=new Array(V-1);Q<V;Q++)K[Q-1]=arguments[Q];k[J].fn.apply(k[J].context,K)}}return!0},a.prototype.on=function(y,S,E){return s(this,y,S,E,!1)},a.prototype.once=function(y,S,E){return s(this,y,S,E,!0)},a.prototype.removeListener=function(y,S,E,I){var L=n?n+y:y;if(!this._events[L])return this;if(!S)return f(this,L),this;var N=this._events[L];if(N.fn)N.fn===S&&(!I||N.once)&&(!E||N.context===E)&&f(this,L);else{for(var j=0,k=[],V=N.length;j<V;j++)(N[j].fn!==S||I&&!N[j].once||E&&N[j].context!==E)&&k.push(N[j]);k.length?this._events[L]=k.length===1?k[0]:k:f(this,L)}return this},a.prototype.removeAllListeners=function(y){var S;return y?(S=n?n+y:y,this._events[S]&&f(this,S)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(qz)),qz.exports}var Hz,KZ;function BVe(){if(KZ)return Hz;KZ=1;function e(f){return f.map(encodeURIComponent).join(",")}function t(f){return Array.isArray(f)?e(f):encodeURIComponent(String(f))}function n(f,a,p){if(p===!1||p===null)return f;var y=/\?/.test(f)?"&":"?",S=encodeURIComponent(a);return p!==void 0&&p!==""&&p!==!0&&(S+="="+t(p)),""+f+y+S}function r(f,a){if(!a)return f;var p=f;return Object.keys(a).forEach(function(y){var S=a[y];S!==void 0&&(Array.isArray(S)&&(S=S.filter(function(E){return E!=null}).join(",")),p=n(p,y,S))}),p}function i(f,a){if(!a||f.slice(0,4)==="http")return f;var p=f[0]==="/"?"":"/";return""+a.replace(/\/$/,"")+p+f}function s(f,a){return a?f.replace(/\/:([a-zA-Z0-9]+)/g,function(p,y){var S=a[y];if(S===void 0)throw new Error("Unspecified route parameter "+y);var E=t(S);return"/"+E}):f}return Hz={appendQueryObject:r,appendQueryParam:n,prependOrigin:i,interpolateRouteParams:s},Hz}var Gz,QZ;function jVe(){if(QZ)return Gz;QZ=1;var e=Jhe(),t=oT(),n=FVe(),r=BVe(),i=qR(),s=1;function f(a,p){if(!a)throw new Error("MapiRequest requires a client");if(!p||!p.path||!p.method)throw new Error("MapiRequest requires an options object with path and method properties");var y={};p.body&&(y["content-type"]="application/json");var S=t(y,p.headers),E=Object.keys(S).reduce(function(I,L){return I[L.toLowerCase()]=S[L],I},{});this.id=s++,this._options=p,this.emitter=new n,this.client=a,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=p.path,this.method=p.method,this.origin=p.origin||a.origin,this.query=p.query||{},this.params=p.params||{},this.body=p.body||null,this.file=p.file||null,this.encoding=p.encoding||"utf8",this.sendFileAs=p.sendFileAs||null,this.headers=E}return f.prototype.url=function(p){var y=r.prependOrigin(this.path,this.origin);y=r.appendQueryObject(y,this.query);var S=this.params,E=p??this.client.accessToken;if(E){y=r.appendQueryParam(y,"access_token",E);var I=e(E).user;S=t({ownerId:I},S)}return y=r.interpolateRouteParams(y,S),y},f.prototype.send=function(){var p=this;if(p.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return p.sent=!0,p.client.sendRequest(p).then(function(y){return p.response=y,p.emitter.emit(i.EVENT_RESPONSE,y),y},function(y){throw p.error=y,p.emitter.emit(i.EVENT_ERROR,y),y})},f.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))},f.prototype.eachPage=function(p){var y=this;function S(L){function N(){delete y._nextPageRequest;var j=L.nextPage();j&&(y._nextPageRequest=j,I(j))}p(null,L,N)}function E(L){p(L,null,function(){})}function I(L){L.send().then(S,E)}I(this)},f.prototype.clone=function(){return this._extend()},f.prototype._extend=function(p){var y=t(this._options,p);return new f(this.client,y)},Gz=f,Gz}var Yz,JZ;function ede(){if(JZ)return Yz;JZ=1;var e=Jhe(),t=jVe(),n=qR();function r(i){if(!i||!i.accessToken)throw new Error("Cannot create a client without an access token");e(i.accessToken),this.accessToken=i.accessToken,this.origin=i.origin||n.API_ORIGIN}return r.prototype.createRequest=function(s){return new t(this,s)},Yz=r,Yz}var Wz,eK;function tde(){if(eK)return Wz;eK=1;var e=LVe(),t=ede();function n(i){t.call(this,i)}n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.sendRequest=e.browserSend,n.prototype.abortRequest=e.browserAbort;function r(i){return new n(i)}return Wz=r,Wz}var Xz,tK;function UVe(){if(tK)return Xz;tK=1;var e=tde();return Xz=e,Xz}var Zz,nK;function $Ve(){if(nK)return Zz;nK=1;var e=Object.prototype.toString;return Zz=function(t){var n;return e.call(t)==="[object Object]"&&(n=Object.getPrototypeOf(t),n===null||n===Object.getPrototypeOf({}))},Zz}var Kz,rK;function VVe(){if(rK)return Kz;rK=1;var e=$Ve(),t=oT(),n="value",r=`
  `,i={};i.assert=function(N,j){return j=j||{},function(k){var V=f(N,k);if(V){var K=a(V,j);throw j.apiName&&(K=j.apiName+": "+K),new Error(K)}}},i.shape=function(j){var k=L(j);return function(K){var J=f(i.plainObject,K);if(J)return J;for(var ie,Q,W=[],te=0;te<k.length;te++)ie=k[te].key,Q=k[te].value,J=f(Q,K[ie]),J&&W.push([ie].concat(J));return W.length<2?W[0]:function(X){W=W.map(function(ge){var ye=ge[0],De=a(ge,X).split(`
`).join(r);return"- "+ye+": "+De});var ae=X.path.join("."),le=ae===n?"":" of "+ae;return"The following properties"+le+" have invalid values:"+r+W.join(r)}}},i.strictShape=function(j){var k=i.shape(j);return function(K){var J=k(K);if(J)return J;var ie=Object.keys(K).reduce(function(Q,W){return j[W]===void 0&&Q.push(W),Q},[]);if(ie.length!==0)return function(){return"The following keys are invalid: "+ie.join(", ")}}},i.arrayOf=function(j){return s(j)},i.tuple=function(){var j=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return s(j)};function s(N){var j=Array.isArray(N),k=function(V){return j?N[V]:N};return function(K){var J=f(i.plainArray,K);if(J)return J;if(j&&K.length!==N.length)return"an array with "+N.length+" items";for(var ie=0;ie<K.length;ie++)if(J=f(k(ie),K[ie]),J)return[ie].concat(J)}}i.required=function(j){function k(V){return V==null?function(K){return E(K,I(K.path)?"cannot be undefined/null.":"is required.")}:j.apply(this,arguments)}return k.__required=!0,k},i.oneOfType=function(){var j=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(V){var K=j.map(function(J){return f(J,V)}).filter(Boolean);if(K.length===j.length)return K.every(function(J){return J.length===1&&typeof J[0]=="string"})?p(K.map(function(J){return J[0]})):K.reduce(function(J,ie){return ie.length>J.length?ie:J})}},i.equal=function(j){return function(V){if(V!==j)return JSON.stringify(j)}},i.oneOf=function(){var j=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),k=j.map(function(V){return i.equal(V)});return i.oneOfType.apply(this,k)},i.range=function(j){var k=j[0],V=j[1];return function(J){var ie=f(i.number,J);if(ie||J<k||J>V)return"number between "+k+" & "+V+" (inclusive)"}},i.any=function(){},i.boolean=function(j){if(typeof j!="boolean")return"boolean"},i.number=function(j){if(typeof j!="number")return"number"},i.plainArray=function(j){if(!Array.isArray(j))return"array"},i.plainObject=function(j){if(!e(j))return"object"},i.string=function(j){if(typeof j!="string")return"string"},i.func=function(j){if(typeof j!="function")return"function"};function f(N,j){if(!(j==null&&!N.hasOwnProperty("__required"))){var k=N(j);if(k)return Array.isArray(k)?k:[k]}}function a(N,j){var k=N.length,V=N[k-1],K=N.slice(0,k-1);return K.length===0&&(K=[n]),j=t(j,{path:K}),typeof V=="function"?V(j):E(j,y(V))}function p(N){return N.length<2?N[0]:N.length===2?N.join(" or "):N.slice(0,-1).join(", ")+", or "+N.slice(-1)}function y(N){return"must be "+S(N)+"."}function S(N){return/^an? /.test(N)?N:/^[aeiou]/i.test(N)?"an "+N:/^[a-z]/i.test(N)?"a "+N:N}function E(N,j){var k=I(N.path),V=N.path.join(".")+" "+j,K=k?"Item at position ":"";return K+V}function I(N){return typeof N[N.length-1]=="number"||typeof N[0]=="number"}function L(N){return Object.keys(N||{}).map(function(j){return{key:j,value:N[j]}})}return i.validate=f,i.processMessage=a,Kz=i,Kz}var Qz,iK;function qVe(){if(iK)return Qz;iK=1;var e=oT(),t=VVe();function n(f){if(typeof window<"u")return f instanceof Au.Blob||f instanceof Au.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof f=="string"||f.pipe!==void 0))return"Filename or Readable stream"}function r(f,a){return t.assert(t.strictShape(f),a)}function i(f){var a="date";if(typeof f=="boolean")return a;try{var p=new Date(f);if(p.getTime&&isNaN(p.getTime()))return a}catch{return a}}function s(f){return t.tuple(t.number,t.number)(f)}return Qz=e(t,{file:n,date:i,coordinates:s,assertShape:r}),Qz}var Jz,aK;function HVe(){if(aK)return Jz;aK=1;function e(t,n){var r=function(i,s){return n.indexOf(i)!==-1&&s!==void 0};return typeof n=="function"&&(r=n),Object.keys(t).filter(function(i){return r(i,t[i])}).reduce(function(i,s){return i[s]=t[s],i},{})}return Jz=e,Jz}var eN,oK;function GVe(){if(oK)return eN;oK=1;function e(t,n){return Object.keys(t).reduce(function(r,i){return r[i]=n(i,t[i]),r},{})}return eN=e,eN}var tN,sK;function YVe(){if(sK)return tN;sK=1;var e=GVe();function t(n){return e(n,function(r,i){return typeof i=="boolean"?JSON.stringify(i):i})}return tN=t,tN}var nN,lK;function WVe(){if(lK)return nN;lK=1;var e=ede(),t=tde();function n(r){return function(i){var s;e.prototype.isPrototypeOf(i)?s=i:s=t(i);var f=Object.create(r);return f.client=s,f}}return nN=n,nN}var rN,uK;function XVe(){if(uK)return rN;uK=1;var e=oT(),t=qVe(),n=HVe(),r=YVe(),i=WVe(),s={},f=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];return s.forwardGeocode=function(a){t.assertShape({query:t.required(t.string),mode:t.oneOf("mapbox.places","mapbox.places-permanent"),countries:t.arrayOf(t.string),proximity:t.oneOf(t.coordinates,"ip"),types:t.arrayOf(t.oneOf(f)),autocomplete:t.boolean,bbox:t.arrayOf(t.number),limit:t.number,language:t.arrayOf(t.string),routing:t.boolean,fuzzyMatch:t.boolean,worldview:t.string,session_token:t.string})(a),a.mode=a.mode||"mapbox.places";var p=r(e({country:a.countries},n(a,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview","session_token"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:n(a,["mode","query"]),query:p})},s.reverseGeocode=function(a){t.assertShape({query:t.required(t.coordinates),mode:t.oneOf("mapbox.places","mapbox.places-permanent"),countries:t.arrayOf(t.string),types:t.arrayOf(t.oneOf(f)),bbox:t.arrayOf(t.number),limit:t.number,language:t.arrayOf(t.string),reverseMode:t.oneOf("distance","score"),routing:t.boolean,worldview:t.string,session_token:t.string})(a),a.mode=a.mode||"mapbox.places";var p=r(e({country:a.countries},n(a,["country","types","bbox","limit","language","reverseMode","routing","worldview","session_token"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:n(a,["mode","query"]),query:p})},rN=i(s),rN}let ZVe="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",nde=e=>crypto.getRandomValues(new Uint8Array(e)),rde=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*t/e.length);return(s=t)=>{let f="";for(;;){let a=n(i),p=i|0;for(;p--;)if(f+=e[a[p]&r]||"",f.length===s)return f}}},KVe=(e,t=21)=>rde(e,t,nde),QVe=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const JVe=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:KVe,customRandom:rde,nanoid:QVe,random:nde,urlAlphabet:ZVe},Symbol.toStringTag,{value:"Module"})),e8e=U0e(JVe);var iN,cK;function t8e(){if(cK)return iN;cK=1;var e=e8e.nanoid;function t(n){this.origin=n.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=n.accessToken,this.version="0.3.0",this.pluginSessionID=this.generateSessionID(),this.sessionIncrementer=0,this.userAgent=this.getUserAgent(),this.options=n,this.send=this.send.bind(this),this.countries=n.countries?n.countries.split(","):null,this.types=n.types?n.types.split(","):null,this.bbox=n.bbox?n.bbox:null,this.language=n.language?n.language.split(","):null,this.limit=n.limit?+n.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(n),this.eventQueue=new Array,this.flushInterval=n.flushInterval||1e3,this.maxQueueSize=n.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}return t.prototype={select:function(n,r){var i=this.getEventPayload("search.select",r,{selectedFeature:n});if(i&&!(i.resultIndex===this.lastSentIndex&&i.queryString===this.lastSentInput||i.resultIndex==-1))return this.lastSentIndex=i.resultIndex,this.lastSentInput=i.queryString,this.push(i)},start:function(n){var r=this.getEventPayload("search.start",n);if(r)return this.push(r)},keyevent:function(n,r){if(n.key&&!(n.metaKey||[9,27,37,39,13,38,40].indexOf(n.keyCode)!==-1)){var i=this.getEventPayload("search.keystroke",r,{key:n.key});if(i)return this.push(i)}},send:function(n,r){if(!this.enableEventLogging)return r?r():void 0;var i=this.getRequestOptions(n);this.request(i,(function(s){if(s)return this.handleError(s,r);if(r)return r()}).bind(this))},getRequestOptions:function(n){Array.isArray(n)||(n=[n]);var r={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};return r},getEventPayload:function(n,r,i={}){if(n==="search.select"&&!i.selectedFeature||n==="search.keystroke"&&!i.key)return null;var s;if(!r.options.proximity)s=null;else if(typeof r.options.proximity=="object")s=[r.options.proximity.longitude,r.options.proximity.latitude];else if(r.options.proximity==="ip"){var f=r._headers?r._headers["ip-proximity"]:null;f&&typeof f=="string"?s=f.split(",").map(parseFloat):s=[999,999]}else s=r.options.proximity;var a=r._map?r._map.getZoom():void 0,p={event:n,version:this.getEventSchemaVersion(n),created:+new Date,sessionIdentifier:this.getSessionId(),country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:r.options.autocomplete,fuzzyMatch:r.options.fuzzyMatch,proximity:s,limit:r.options.limit,routing:r.options.routing,worldview:r.options.worldview,mapZoom:a,keyboardLocale:this.locale};if(n==="search.select"?p.queryString=r.inputString:n!="search.select"&&r._inputEl?p.queryString=r._inputEl.value:p.queryString=r.inputString,["search.keystroke","search.select"].includes(n)&&(p.path="geocoding/v5/mapbox.places"),n==="search.keystroke"&&i.key)p.lastAction=i.key;else if(n==="search.select"&&i.selectedFeature){var y=i.selectedFeature,S=this.getSelectedIndex(y,r);if(p.resultIndex=S,p.resultPlaceName=y.place_name,p.resultId=y.id,y.properties&&(p.resultMapboxId=y.properties.mapbox_id),r._typeahead){var E=r._typeahead.data;E&&E.length>0&&(p.suggestionIds=this.getSuggestionIds(E),p.suggestionNames=this.getSuggestionNames(E),p.suggestionTypes=this.getSuggestionTypes(E),p.suggestionSources=this.getSuggestionSources(E))}}return this.validatePayload(p)?p:null},request:function(n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(this.readyState==4)return this.status==204?r(null):r(this.statusText)},i.open(n.method,n.host+"/"+n.path,!0);for(var s in n.headers){var f=n.headers[s];i.setRequestHeader(s,f)}i.send(n.body)},handleError:function(n,r){if(r)return r(n)},generateSessionID:function(){return e()},getSessionId:function(){return this.pluginSessionID+"."+this.sessionIncrementer},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(n,r){if(r._typeahead){var i=r._typeahead.data,s=n.id,f=i.map(function(p){return p.id}),a=f.indexOf(s);return a}},getSuggestionIds:function(n){return n.map(function(r){return r.properties?r.properties.mapbox_id||"":r.id||""})},getSuggestionNames:function(n){return n.map(function(r){return r.place_name||""})},getSuggestionTypes:function(n){return n.map(function(r){return r.place_type&&Array.isArray(r.place_type)&&r.place_type[0]||""})},getSuggestionSources:function(n){return n.map(function(r){return r._source||""})},getEventSchemaVersion:function(n){return["search.keystroke","search.select"].includes(n)?"2.2":"2.0"},validatePayload:function(n){if(!n||!n.event)return!1;var r=["event","created","sessionIdentifier","queryString"],i=["event","created","sessionIdentifier","queryString","lastAction"],s=["event","created","sessionIdentifier","queryString","resultIndex","path","suggestionIds"],f=n.event;return f==="search.start"?this.objectHasRequiredProps(n,r):f==="search.keystroke"?this.objectHasRequiredProps(n,i):f==="search.select"?this.objectHasRequiredProps(n,s):!0},objectHasRequiredProps:function(n,r){return r.every(function(i){return i==="queryString"?typeof n[i]=="string"&&n[i].length>0:n[i]!==void 0})},shouldEnableLogging:function(n){return!(n.enableEventLogging===!1||n.origin&&n.origin!=="https://api.mapbox.com")},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(n,r){this.eventQueue.push(n),(this.eventQueue.length>=this.maxQueueSize||r)&&this.flush()},remove:function(){this.flush()}},iN=t,iN}var aN,fK;function n8e(){if(fK)return aN;fK=1;var e={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""};return aN={placeholder:e},aN}var yD={exports:{}},r8e=yD.exports,hK;function i8e(){return hK||(hK=1,(function(e){(function(t,n,r){e.exports?e.exports=r():t[n]=r()})(r8e,"subtag",function(){var t="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(p){return p.match(n)||[]}function i(p){return r(p).filter(function(y,S){return y&&S})}function s(p){return p=r(p),{language:p[1]||t,extlang:p[2]||t,script:p[3]||t,region:p[4]||t}}function f(p,y,S){Object.defineProperty(p,y,{value:S,enumerable:!0})}function a(p,y,S){function E(I){return r(I)[p]||t}f(E,"pattern",y),f(s,S,E)}return a(1,/^[a-zA-Z]{2,3}$/,"language"),a(2,/^[a-zA-Z]{3}$/,"extlang"),a(3,/^[a-zA-Z]{4}$/,"script"),a(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),f(s,"split",i),s})})(yD)),yD.exports}var oN,dK;function a8e(){if(dK)return oN;dK=1;function e(){}return e.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const t={enableHighAccuracy:!0};return new Promise(function(n,r){window.navigator.geolocation.getCurrentPosition(n,r,t)})}},oN=e,oN}var sN,pK;function o8e(){if(pK)return sN;pK=1;function e(r,i){const s=t(r),f=["address","street","place","country"];var a;if(typeof i=="function")return i(s);const p=f.indexOf(i);return p===-1?a=f:a=f.slice(p),a.reduce(function(y,S){return s[S]?(y!==""&&(y=y+", "),y+s[S]):y},"")}function t(r){const i=r.address||"",s=r.text||"",f=r.place_name||"",p={address:f.split(",")[0],houseNumber:i,street:s,placeName:f};return r.context.forEach(function(y){const S=y.id.split(".")[0];p[S]=y.text}),p}return sN={transformFeatureToGeolocationText:e,getAddressInfo:t,REVERSE_GEOCODE_COORD_RGX:/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/},sN}var lN,mK;function s8e(){if(mK)return lN;mK=1;var e=OVe(),t=CVe(),n=oT(),r=MVe().EventEmitter,i=DVe(),s=UVe(),f=XVe(),a=t8e(),p=n8e(),y=i8e(),S=a8e(),E=o8e();const I={FORWARD:0,LOCAL:1,REVERSE:2};function L(){var k=document.createElement("div");return k.className="mapboxgl-ctrl-geocoder--powered-by",k.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',k}function N(k){this._eventEmitter=new r,this.options=n({},this.options,k),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new S}function j(k){return k?String(k).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""}return N.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",useBrowserFocus:!1,getItemValue:function(k){return k.place_name},render:function(k){var V=j(k.place_name).split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+V[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+V.splice(1,V.length).join(",")+"</div></div>"}},_headers:{},addTo:function(k){function V(K,J){if(!document.body.contains(J))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const ie=K.onAdd();J.appendChild(ie)}if(k._controlContainer)k.addControl(this);else if(k instanceof HTMLElement)V(this,k);else if(typeof k=="string"){const K=document.querySelectorAll(k);if(K.length===0)throw new Error("Element ",k,"not found.");if(K.length>1)throw new Error("Geocoder can only be added to a single html element");V(this,K[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(k){if(k&&typeof k!="string"&&(this._map=k),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=f(s({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new a(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this),this._onSuggestionItemFocus=this._onSuggestionItemFocus.bind(this),this._onSuggestionItemKeyDown=this._onSuggestionItemKeydown.bind(this);var V=this.container=document.createElement("div");V.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var K=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",t(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",(function(ye){this.eventManager.keyevent(ye,this)}).bind(this));var J=document.createElement("div");J.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var ie=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(ie),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),J.appendChild(this._clearEl),J.appendChild(this._loadingEl),V.appendChild(K),V.appendChild(this._inputEl),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var Q=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(Q),J.appendChild(this._geolocateEl),this._showGeolocateButton()}var W=this._typeahead=new e(this._inputEl,[],{hideOnBlur:!this.options.useBrowserFocus,filter:!1,minLength:this.options.minLength,limit:this.options.limit});V.insertBefore(J,W.list.wrapper),this.setRenderFunction(this.options.render),W.getItemValue=this.options.getItemValue;const te=this._typeahead.handleKeyDown.bind(this._typeahead),X=this._typeahead.handleKeyUp.bind(this._typeahead);this._typeahead.handleKeyUp,this.options.useBrowserFocus&&(this._typeahead.handleKeyDown=(function(ye){if(!(ye.keyCode===9&&!W.list.isEmpty())){if(ye.keyCode===40){this._typeahead.list.active=0,this._typeahead.list.element.querySelectorAll("li").forEach(function(De){De.classList.remove("active")}),this._typeahead.list.element.querySelectorAll("li")[0].classList.add("active"),this._typeahead.list.element.querySelectorAll("li")[0].focus();return}else if(ye.keyCode===38){this._typeahead.list.active=W.list.items.length-1,this._typeahead.list.element.querySelectorAll("li").forEach(function(De){De.classList.remove("active")}),this._typeahead.list.element.querySelectorAll("li")[this._typeahead.list.active].classList.add("active"),this._typeahead.list.element.querySelectorAll("li")[this._typeahead.list.active].focus();return}te(ye)}}).bind(this),this._typeahead.handleKeyUp=function(ye){if(ye&&ye.keyCode===16){ye.preventDefault();return}X(ye)});var ae=W.list.draw,le=this._footerNode=L(),ge=this;return W.list.draw=function(){ge.options.useBrowserFocus&&W.list.element.querySelectorAll("li").forEach(function(ye){ye.removeEventListener("focus",ge._onSuggestionItemFocus),ye.removeEventListener("keydown",ge._onSuggestionItemKeyDown)}),ae.call(this),ge.options.useBrowserFocus&&W.list.element.querySelectorAll("li").forEach((function(ye,De){De===0&&ye.focus(),ye.setAttribute("data-index",De),ye.tabIndex=0,ye.addEventListener("focus",this._onSuggestionItemFocus),ye.addEventListener("keydown",this._onSuggestionItemKeyDown)}).bind(ge)),le.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),le.addEventListener("mouseup",(function(){this.selectingListItem=!1}).bind(this)),this.element.appendChild(le)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),V},_onSuggestionItemKeydown(k){const V=k.keyCode;if(V!==9){if(V===13){k.preventDefault();const K=this._typeahead.list.element.querySelector(".active");if(K){const J=K.getAttribute("data-index"),ie=this._typeahead.list.items[J];ie&&(this._typeahead.value(ie.original),this._typeahead.list.hide())}}else if(V===38||V===40){const K=this._typeahead.list.element.querySelectorAll("li");if(K.length>0){if(V===38)if(this._typeahead.list.active>0)k.preventDefault(),this._typeahead.list.active--;else{this._typeahead.el.focus();return}else if(V===40)if(k.preventDefault(),this._typeahead.list.active<K.length-1)this._typeahead.list.active++;else return;K.forEach(function(ie){ie.classList.remove("active")});const J=K[this._typeahead.list.active];J&&(J.classList.add("active"),J.focus())}}}},_onSuggestionItemFocus(k){this._typeahead.list.active=k.target.getAttribute("data-index"),this._typeahead.list.element.querySelectorAll("li").forEach(function(V){V.classList.remove("active")}),k.target.classList.add("active")},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then((function(k){this._hideLoadingIcon();const V={geometry:{type:"Point",coordinates:[k.coords.longitude,k.coords.latitude]}};this._handleMarker(V),this._fly(V),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(V),this._showClearButton(),this.fresh=!1;const K={limit:1,language:[this.options.language],query:V.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const J=V.geometry.coordinates[0]+","+V.geometry.coordinates[1];this._setInputValue(J),this._eventEmitter.emit("result",{result:V})}else this.geocoderService.reverseGeocode(K).send().then((function(J){const ie=J.body.features[0];if(ie){const Q=E.transformFeatureToGeolocationText(ie,this.options.addressAccuracy);this._setInputValue(Q),ie.user_coordinates=V.geometry.coordinates,this._eventEmitter.emit("result",{result:ie})}else this._eventEmitter.emit("result",{result:{user_coordinates:V.geometry.coordinates}})}).bind(this))}).bind(this)).catch((function(k){k.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}).bind(this))},createIcon:function(k,V){var K=document.createElementNS("http://www.w3.org/2000/svg","svg");return K.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+k),K.setAttribute("viewBox","0 0 18 18"),K.setAttribute("xml:space","preserve"),K.setAttribute("width",18),K.setAttribute("height",18),K.innerHTML=V,K},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(k){this._inputEl.value=k,setTimeout((function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}).bind(this),1)},_onPaste:function(k){var V=(k.clipboardData||window.clipboardData).getData("text");V.length>=this.options.minLength&&this._geocode(V)},_onKeyDown:function(k){var V=27,K=9;if(k.keyCode===V&&this.options.clearAndBlurOnEsc)return this._clear(k),this._inputEl.blur();var J=k.target&&k.target.shadowRoot?k.target.shadowRoot.activeElement:k.target,ie=J?J.value:"";if(!ie)return this.fresh=!0,k.keyCode!==K&&this.clear(k),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(k.metaKey||[K,V,37,39,13,38,40].indexOf(k.keyCode)!==-1)&&J.value.length>=this.options.minLength&&this._geocode(J.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(k){this.options.clearOnBlur&&this._clearOnBlur(k),this.options.collapsed&&this._collapse()},_onChange:function(){var k=this._typeahead.selected;k&&JSON.stringify(k)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(k),this.options.marker&&this._mapboxgl&&this._handleMarker(k),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(k),this._eventEmitter.emit("result",{result:k}),this.eventManager.select(k,this))},_fly:function(k){var V;if(k.properties&&i[k.properties.short_code])V=n({},this.options.flyTo),this._map&&this._map.fitBounds(i[k.properties.short_code].bbox,V);else if(k.bbox){var K=k.bbox;V=n({},this.options.flyTo),this._map&&this._map.fitBounds([[K[0],K[1]],[K[2],K[3]]],V)}else{var J={zoom:this.options.zoom};V=n({},J,this.options.flyTo),k.center?V.center=k.center:k.geometry&&k.geometry.type&&k.geometry.type==="Point"&&k.geometry.coordinates&&(V.center=k.geometry.coordinates),this._map&&this._map.flyTo(V)}},_requestType:function(k,V){var K;return k.localGeocoderOnly?K=I.LOCAL:k.reverseGeocode&&E.REVERSE_GEOCODE_COORD_RGX.test(V)?K=I.REVERSE:K=I.FORWARD,K},_setupConfig:function(k,V){const K=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],J=/[\s,]+/;var ie=this,Q=K.reduce(function(te,X){if(ie.options[X]===void 0||ie.options[X]===null)return te;["countries","types","language"].indexOf(X)>-1?te[X]=ie.options[X].split(J):te[X]=ie.options[X];const ae=typeof ie.options[X].longitude=="number"&&typeof ie.options[X].latitude=="number";if(X==="proximity"&&ae){const le=ie.options[X].longitude,ge=ie.options[X].latitude;te[X]=[le,ge]}return te},{});switch(k){case I.REVERSE:{var W=V.split(J).map(function(te){return parseFloat(te,10)});ie.options.flipCoordinates||W.reverse(),Q.types&&Q.types[0],Q=n(Q,{query:W,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(te){te in Q&&delete Q[te]})}break;case I.FORWARD:{const te=V.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(te)&&(V=V.replace(/,/g," ")),Q=n(Q,{query:V})}break}return Q.session_token=this.eventManager.getSessionId(),Q},_geocode:function(k){this.inputString=k,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:k});const V=this._requestType(this.options,k),K=this._setupConfig(V,k);var J;switch(V){case I.LOCAL:J=Promise.resolve();break;case I.FORWARD:J=this.geocoderService.forwardGeocode(K).send();break;case I.REVERSE:J=this.geocoderService.reverseGeocode(K).send();break}var ie=this.options.localGeocoder?this.options.localGeocoder(k)||[]:[],Q=[],W=null;return J.catch((function(te){W=te}).bind(this)).then((function(te){this._hideLoadingIcon();var X={};return te?te.statusCode=="200"&&(X=te.body,X.request=te.request,X.headers=te.headers,this._headers=te.headers):X={type:"FeatureCollection",features:[]},X.config=K,this.fresh&&(this.eventManager.start(this),this.fresh=!1),X.features&&X.features.length&&X.features.map(function(ae){ae._source="mapbox"}),X.features=X.features?ie.concat(X.features):ie,this.options.externalGeocoder?(Q=this.options.externalGeocoder(k,X.features)||Promise.resolve([]),Q.then(function(ae){return X.features=X.features?ae.concat(X.features):ae,X},function(){return X})):X}).bind(this)).then((function(te){if(W)throw W;this.options.filter&&te.features.length&&(te.features=te.features.filter(this.options.filter)),te.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",te),this._typeahead.update(te.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",te))}).bind(this)).catch((function(te){this._hideLoadingIcon(),this._hideAttribution(),ie.length&&this.options.localGeocoder||Q.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(ie)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:ie}),this._eventEmitter.emit("error",{error:te})}).bind(this)),J},_clear:function(k){k&&k.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this.eventManager.sessionIncrementer++,this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(k){this._clear(k),this._inputEl.focus(),this.options.useBrowserFocus&&this._typeahead.list.hide()},_clearOnBlur:function(k){var V=this;k.relatedTarget&&V._clear(k)},_onQueryResult:function(k){var V=k.body;if(V.features.length){var K=V.features[0];this._typeahead.selected=K,this._inputEl.value=K.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var k=this._map.getCenter().wrap();this.setProximity({longitude:k.lng,latitude:k.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(k){return this._geocode(k).then(this._onQueryResult),this},_renderError:function(){var k="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(k)},_renderLocationError:function(){var k="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(k)},_renderNoResults:function(){var k="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(k)},_renderUserDeniedGeolocationError:function(){var k="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(k)},_renderMessage:function(k){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(k)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var k=this.options.language.split(",")[0],V=y.language(k),K=p.placeholder[V];if(K)return K}return"Search"},setInput:function(k,V){return V===void 0&&(V=!1),this._inputEl.value=k,this._typeahead.selected=null,this._typeahead.clear(),k.length>=this.options.minLength&&(V?this._geocode(k):this._onChange()),this},setProximity:function(k,V=!0){return this.options.proximity=k,V&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(k){return k&&typeof k=="function"&&(this._typeahead.render=k),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(k){var V=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=k||this.options.language||V,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(k){return this.options.zoom=k,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(k){return this.options.flyTo=k,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(k){return this.options.placeholder=k||this._getPlaceholderText(),this._inputEl.placeholder=this.options.placeholder,this._inputEl.setAttribute("aria-label",this.options.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(k){return this.options.bbox=k,this},getCountries:function(){return this.options.countries},setCountries:function(k){return this.options.countries=k,this},getTypes:function(){return this.options.types},setTypes:function(k){return this.options.types=k,this},getMinLength:function(){return this.options.minLength},setMinLength:function(k){return this.options.minLength=k,this._typeahead&&(this._typeahead.options.minLength=k),this},getLimit:function(){return this.options.limit},setLimit:function(k){return this.options.limit=k,this._typeahead&&(this._typeahead.options.limit=k),this},getFilter:function(){return this.options.filter},setFilter:function(k){return this.options.filter=k,this},setOrigin:function(k){return this.options.origin=k,this.geocoderService=f(s({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(k){return this.options.accessToken=k,this.geocoderService=f(s({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(k){return this.options.autocomplete=k,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(k){return this.options.fuzzyMatch=k,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(k){return this.options.routing=k,this},getRouting:function(){return this.options.routing},setWorldview:function(k){return this.options.worldview=k,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(k){if(this._map){this._removeMarker();var V={color:"#4668F2"},K=n({},V,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(K),k.center?this.mapMarker.setLngLat(k.center).addTo(this._map):k.geometry&&k.geometry.type&&k.geometry.type==="Point"&&k.geometry.coordinates&&this.mapMarker.setLngLat(k.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(k,V){return this._eventEmitter.on(k,V),this},off:function(k,V){return this._eventEmitter.removeListener(k,V),this.eventManager.remove(),this}},lN=N,lN}var l8e=s8e();const u8e=ma(l8e),Za={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ide(e,t,n){n.push({command:Za.addSource,args:[e,t[e]]})}function ade(e,t,n){t.push({command:Za.removeSource,args:[e]}),n[e]=!0}function c8e(e,t,n,r){ade(e,n,r),ide(e,t,n)}function f8e(e,t,n){let r;for(r in e[n])if(e[n].hasOwnProperty(r)&&r!=="data"&&!ts(e[n][r],t[n][r]))return!1;for(r in t[n])if(t[n].hasOwnProperty(r)&&r!=="data"&&!ts(e[n][r],t[n][r]))return!1;return!0}function h8e(e,t,n,r){e=e||{},t=t||{};let i;for(i in e)e.hasOwnProperty(i)&&(t.hasOwnProperty(i)||ade(i,n,r));for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)?ts(e[i],t[i])||(e[i].type==="geojson"&&t[i].type==="geojson"&&f8e(e,t,i)?n.push({command:Za.setGeoJSONSourceData,args:[i,t[i].data]}):c8e(i,t,n,r)):ide(i,t,n))}function CM(e,t,n,r,i,s){e=e||{},t=t||{};let f;for(f in e)e.hasOwnProperty(f)&&(ts(e[f],t[f])||n.push({command:s,args:[r,f,t[f],i]}));for(f in t)!t.hasOwnProperty(f)||e.hasOwnProperty(f)||ts(e[f],t[f])||n.push({command:s,args:[r,f,t[f],i]})}function gK(e){return e.id}function yK(e,t){return e[t.id]=t,e}function d8e(e,t,n){e=e||[],t=t||[];const r=e.map(gK),i=t.map(gK),s=e.reduce(yK,{}),f=t.reduce(yK,{}),a=r.slice(),p=Object.create(null);let y,S,E,I,L,N,j;for(y=0,S=0;y<r.length;y++)E=r[y],f.hasOwnProperty(E)?S++:(n.push({command:Za.removeLayer,args:[E]}),a.splice(a.indexOf(E,S),1));for(y=0,S=0;y<i.length;y++)E=i[i.length-1-y],a[a.length-1-y]!==E&&(s.hasOwnProperty(E)?(n.push({command:Za.removeLayer,args:[E]}),a.splice(a.lastIndexOf(E,a.length-S),1)):S++,N=a[a.length-y],n.push({command:Za.addLayer,args:[f[E],N]}),a.splice(a.length-y,0,E),p[E]=!0);for(y=0;y<i.length;y++)if(E=i[y],I=s[E],L=f[E],!(p[E]||ts(I,L))){if(!ts(I.source,L.source)||!ts(I["source-layer"],L["source-layer"])||!ts(I.type,L.type)){n.push({command:Za.removeLayer,args:[E]}),N=a[a.lastIndexOf(E)+1],n.push({command:Za.addLayer,args:[L,N]});continue}CM(I.layout,L.layout,n,E,null,Za.setLayoutProperty),CM(I.paint,L.paint,n,E,null,Za.setPaintProperty),ts(I.filter,L.filter)||n.push({command:Za.setFilter,args:[E,L.filter]}),(!ts(I.minzoom,L.minzoom)||!ts(I.maxzoom,L.maxzoom))&&n.push({command:Za.setLayerZoomRange,args:[E,L.minzoom,L.maxzoom]});for(j in I)I.hasOwnProperty(j)&&(j==="layout"||j==="paint"||j==="filter"||j==="metadata"||j==="minzoom"||j==="maxzoom"||(j.indexOf("paint.")===0?CM(I[j],L[j],n,E,j.slice(6),Za.setPaintProperty):ts(I[j],L[j])||n.push({command:Za.setLayerProperty,args:[E,j,L[j]]})));for(j in L)!L.hasOwnProperty(j)||I.hasOwnProperty(j)||j==="layout"||j==="paint"||j==="filter"||j==="metadata"||j==="minzoom"||j==="maxzoom"||(j.indexOf("paint.")===0?CM(I[j],L[j],n,E,j.slice(6),Za.setPaintProperty):ts(I[j],L[j])||n.push({command:Za.setLayerProperty,args:[E,j,L[j]]}))}}function p8e(e,t){if(!e)return[{command:Za.setStyle,args:[t]}];let n=[];try{if(!ts(e.version,t.version))return[{command:Za.setStyle,args:[t]}];ts(e.center,t.center)||n.push({command:Za.setCenter,args:[t.center]}),ts(e.zoom,t.zoom)||n.push({command:Za.setZoom,args:[t.zoom]}),ts(e.bearing,t.bearing)||n.push({command:Za.setBearing,args:[t.bearing]}),ts(e.pitch,t.pitch)||n.push({command:Za.setPitch,args:[t.pitch]}),ts(e.sprite,t.sprite)||n.push({command:Za.setSprite,args:[t.sprite]}),ts(e.glyphs,t.glyphs)||n.push({command:Za.setGlyphs,args:[t.glyphs]}),ts(e.transition,t.transition)||n.push({command:Za.setTransition,args:[t.transition]}),ts(e.light,t.light)||n.push({command:Za.setLight,args:[t.light]});const r={},i=[];h8e(e.sources,t.sources,i,r);const s=[];e.layers&&e.layers.forEach(f=>{r[f.source]?n.push({command:Za.removeLayer,args:[f.id]}):s.push(f)}),n=n.concat(i),d8e(s,t.layers,n)}catch(r){console.warn("Unable to compute style diff:",r),n=[{command:Za.setStyle,args:[t]}]}return n}const m8e=(e,t)=>MNe(e,t).toFixed(t),_K=(e,t,n)=>e>0&&e===1?t:n,g8e=({features:e})=>{const t=e.filter(r=>r.id!==void 0).length,n=(r,i)=>{let s=r.properties;return Oe.jsxs(BD.Item,{children:[Oe.jsx("h6",{className:"tooltip-header",children:s.label}),s.total!==""?Oe.jsxs("p",{className:"tooltip-body",children:["Total rainfall: ",Oe.jsx("strong",{children:m8e(s.total,2)})," inches"]}):null]},i)};return t>0?Oe.jsx($b,{children:Oe.jsx(BD,{variant:"flush",children:e.filter(r=>r.id!==void 0).map(n)})}):null},y8e=nhe("total",sue.breaks_050).legendContent;class _8e extends tt.Component{constructor(){super(...arguments);ir(this,"handleSelectLegend",n=>{this.props.dispatchPickLegend(n.currentTarget.value)})}render(){return Oe.jsxs(xa,{className:"my-2",children:[Oe.jsxs(Gr,{sm:10,children:[Oe.jsx(dse,{size:"sm",children:Oe.jsx("tbody",{children:Oe.jsx("tr",{children:this.props.bins.map((n,r)=>Oe.jsx("td",{className:"text-center legend-label",style:{backgroundColor:`${n[1]}`},children:Oe.jsx("span",{style:{color:`${n[2]}`},children:n[0]})},r))})})}),Oe.jsx("span",{className:"form-check-label",children:"Total Rainfall"})]}),Oe.jsx(Gr,{sm:2,children:Oe.jsxs(Vb,{children:[Oe.jsx(Vb.Check,{defaultChecked:!0,custom:!0,size:"sm",value:"breaks_005",label:"0.5 in.",name:"legendRadios",type:"radio",id:"legend-radio-1",onChange:this.handleSelectLegend}),Oe.jsx(Vb.Check,{custom:!0,size:"sm",value:"breaks_050",label:"5 in.",name:"legendRadios",type:"radio",id:"legend-radio-2",onChange:this.handleSelectLegend}),Oe.jsx(Vb.Check,{custom:!0,size:"sm",value:"breaks_100",label:"10 in.",name:"legendRadios",type:"radio",id:"legend-radio-3",onChange:this.handleSelectLegend})]})})]})}}function v8e(e){let t=rf(e,["mapLegend","content"],[]);return(!Array.isArray(t)||t.length===0)&&(t=y8e),t=t.filter(n=>Array.isArray(n)&&n.length>=2&&qi.valid(n[1])).map(n=>{let r="#000";return qi(n[1]).luminance()<.4&&(r="#fff"),[n[0],n[1],r]}),{bins:t}}const b8e=(e,t)=>({dispatchPickLegend:n=>{e(VV({breaks:sue[n]}))}}),x8e=of(v8e,b8e)(_8e),sw=vIe,vK="map";class w8e extends be.Component{constructor(n){super(n);ir(this,"tooltipContainer");ir(this,"tooltipRoot");this.state={features:[]}}componentDidMount(){this.props.loadingMap(),this.loadMap()}componentDidUpdate(n){n.mapStyle!==this.props.mapStyle&&this.updateMapStyle(n.mapStyle,this.props.mapStyle)}componentWillUnmount(){this.tooltipRoot&&(this.tooltipRoot.unmount(),this.tooltipRoot=null),this.webmap&&(this.webmap.remove(),this.webmap=null)}setTooltip(n){this.tooltipRoot&&(n.length?this.tooltipRoot.render(Oe.jsx(g8e,{features:n})):this.tooltipRoot.render(null))}makeTooltipOnHover(n,r){if(n===void 0)return;const i=Y3(this.props.activeTab);if(i.length===0){this.webmap.getCanvas().style.cursor="",this.setTooltip([]),this.setState({features:[]});return}const s=this.webmap.queryRenderedFeatures(n.point,{layers:i});r.setLngLat(n.lngLat),this.webmap.getCanvas().style.cursor=s.length?"pointer":"",this.setTooltip(s),this.setState({features:s})}handleMapClick(n){const r=Y3(this.props.activeTab);if(r.length===0)return;const i=[[n.point.x-1,n.point.y-1],[n.point.x+1,n.point.y+1]];let s=this.webmap.queryRenderedFeatures(i,{layers:r}),f={};s.length>0&&(s.forEach(a=>{let p=HV(a);vw(f,a.source)?f[a.source].push(p):f[a.source]=[p]}),fR(f,(a,p)=>{this.props.makeChoiceOnMapClick({sensorLocationType:p,selectedOptions:a})}))}loadMap(){const n=this.props.initMap.mapboxSources["3rww-rainfall-base"].url;if(!n){console.error("Missing Mapbox style URL. Set VITE_MAPBOX_STYLE_BASEMAP in your .env file.");return}const r={container:vK,style:n,center:[this.props.initMap.longitude,this.props.initMap.latitude],zoom:this.props.zoom,attributionControl:!1};Rb.accessToken=this.props.token,this.webmap=new Rb.Map(r),this.tooltipContainer=document.createElement("div"),this.tooltipRoot=Eae.createRoot(this.tooltipContainer);const i=new Rb.Marker({element:this.tooltipContainer,offset:[105,0]}).setLngLat([0,0]).addTo(this.webmap);this.webmap.on("load",()=>{this.webmap.addControl(new u8e({accessToken:Rb.accessToken,mapboxgl:Rb,placeholder:"Fly me to...",marker:!1,collapsed:!0,clearAndBlurOnEsc:!0,clearOnBlur:!0,countries:"us"})),this.webmap.addControl(new Rb.NavigationControl),this.webmap.addControl(new Rb.AttributionControl({compact:!0,customAttribution:this.props.initMap.attribution})),this.props.initMap.sourcesToAdd.forEach(a=>{this.webmap.addSource(a.sourceName,a.sourceData)}),this.props.initMap.layersToAdd.forEach(a=>{a.layerStyles.forEach(p=>{this.webmap.addLayer(p,a.addLayerStylesAbove)})});let s=this.webmap.getStyle();this.props.setStyle(s),this.props.mapLoaded(this.webmap.loaded()),this.props.initFetchData();let f={};DIe.forEach(a=>{let p=a[0],y=a[1];f[p]=null,this.webmap.on("mousemove",p,S=>{if(!Y3(this.props.activeTab).includes(p)){this.setTooltip([]),this.webmap.getCanvas().style.cursor="",f[p]&&this.webmap.setFeatureState({source:y,id:f[p]},{hover:!1}),f[p]=null;return}this.makeTooltipOnHover(S,i),S.features.length>0&&(f[p]&&this.webmap.setFeatureState({source:y,id:f[p]},{hover:!1}),f[p]=S.features[0].id,this.webmap.setFeatureState({source:y,id:f[p]},{hover:!0}))}),this.webmap.on("mouseleave",p,()=>{this.setTooltip([]),this.webmap.getCanvas().style.cursor="",f[p]&&this.webmap.setFeatureState({source:y,id:f[p]},{hover:!1}),f[p]=null})})}),this.webmap.on("click",s=>this.handleMapClick(s))}updateMapStyle(n,r){if(!this.webmap||n===null||Mj(n)||r===null||Mj(r))return;const i=this.webmap,s=Mz.fromJS(n),f=Mz.fromJS(r);if(!Mz.is(s,f)){let a=p8e(s.toJS(),f.toJS());sw&&console.log(`updating mapStyle (${a.map(p=>p.command)})`),a.forEach(p=>this.executeMapChange(i,p))}}getSourceLayerIds(n,r){const i=n.getStyle&&n.getStyle();return!i||!i.layers?[]:i.layers.filter(s=>s.source===r).map(s=>s.id)}executeMapChange(n,r){const{command:i,args:s=[]}=r;if(i==="setGeoJSONSourceData"){const a=s[0],p=n.getSource(a);p&&typeof p.setData=="function"?p.setData(s[1]):console.warn(`[mapStyle] setGeoJSONSourceData skipped: source "${a}" is missing or non-geojson`);return}if(i==="removeLayer"){const a=s[0];if(!n.getLayer(a)){sw&&console.debug(`[mapStyle] removeLayer noop: layer "${a}" is already absent`);return}try{n.removeLayer(a)}catch(p){console.warn(`[mapStyle] removeLayer failed for layer "${a}"`,p)}return}if(i==="removeSource"){const a=s[0];if(!n.getSource(a)){sw&&console.debug(`[mapStyle] removeSource noop: source "${a}" is already absent`);return}this.getSourceLayerIds(n,a).forEach(p=>{if(n.getLayer(p))try{n.removeLayer(p),sw&&console.debug(`[mapStyle] removed dependent layer "${p}" before source "${a}"`)}catch(y){console.warn(`[mapStyle] failed removing dependent layer "${p}" for source "${a}"`,y)}});try{n.removeSource(a)}catch(p){console.warn(`[mapStyle] removeSource failed for source "${a}"`,p)}return}if(i==="addSource"){const a=s[0];if(n.getSource(a)){sw&&console.debug(`[mapStyle] addSource noop: source "${a}" already exists`);return}try{n.addSource(...s)}catch(p){console.warn(`[mapStyle] addSource failed for source "${a}"`,p)}return}if(i==="addLayer"){const a=s[0]&&s[0].id?s[0].id:"unknown-layer";if(a!=="unknown-layer"&&n.getLayer(a)){sw&&console.debug(`[mapStyle] addLayer noop: layer "${a}" already exists`);return}try{n.addLayer(...s)}catch(p){console.warn(`[mapStyle] addLayer failed for layer "${a}"`,p)}return}const f=n[i];if(typeof f!="function"){console.warn(`[mapStyle] unsupported command "${i}"`);return}try{f.apply(n,s)}catch(a){const p=s[0]!==void 0?` (${String(s[0])})`:"";console.warn(`[mapStyle] command "${i}" failed${p}`,a)}}render(){return Oe.jsxs("div",{className:"map-and-legend-container",children:[Oe.jsx("div",{className:"map",id:vK}),Oe.jsx("div",{className:"legend-container container-fluid",children:Oe.jsx(x8e,{})})]})}}function S8e(e){return{mapStyle:e.mapStyle,initMap:e.initMap}}const T8e=(e,t)=>({loadingMap:n=>{e(DR("Loading the map"))},setStyle:n=>{e(lfe(n))},mapLoaded:n=>{e(sfe(n)),e(IR("Map loaded"))},initFetchData:n=>e(_$e()),makeChoiceOnMapClick:n=>{e(Pw({contextType:t.activeTab,...n}))}}),E8e=of(S8e,T8e)(w8e);function ode(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ode(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ri(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ode(e))&&(r&&(r+=" "),r+=t);return r}function lr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ha(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function bp(e,t){const n=lr(e);return isNaN(t)?Ha(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Op(e,t){const n=lr(e);if(isNaN(t))return Ha(e,NaN);if(!t)return n;const r=n.getDate(),i=Ha(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}function L8(e,t){const n=+lr(e);return Ha(e,n+t)}const sde=6048e5,A8e=864e5,HR=6e4,GR=36e5,O8e=1e3;function C8e(e,t){return L8(e,t*GR)}let M8e={};function Hx(){return M8e}function a_(e,t){var a,p,y,S;const n=Hx(),r=(t==null?void 0:t.weekStartsOn)??((p=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((S=(y=n.locale)==null?void 0:y.options)==null?void 0:S.weekStartsOn)??0,i=lr(e),s=i.getDay(),f=(s<r?7:0)+s-r;return i.setDate(i.getDate()-f),i.setHours(0,0,0,0),i}function lS(e){return a_(e,{weekStartsOn:1})}function lde(e){const t=lr(e),n=t.getFullYear(),r=Ha(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=lS(r),s=Ha(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const f=lS(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=f.getTime()?n:n-1}function Sx(e){const t=lr(e);return t.setHours(0,0,0,0),t}function yI(e){const t=lr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function uS(e,t){const n=Sx(e),r=Sx(t),i=+n-yI(n),s=+r-yI(r);return Math.round((i-s)/A8e)}function D8e(e){const t=lde(e),n=Ha(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),lS(n)}function s6(e,t){return L8(e,t*HR)}function z8(e,t){const n=t*3;return Op(e,n)}function I8e(e,t){return L8(e,t*1e3)}function _I(e,t){const n=t*7;return bp(e,n)}function $y(e,t){return Op(e,t*12)}function bK(e){let t;return e.forEach(function(n){const r=lr(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function xK(e){let t;return e.forEach(n=>{const r=lr(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function P8e(e,t){const n=Sx(e),r=Sx(t);return+n==+r}function Vy(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function vI(e){if(!Vy(e)&&typeof e!="number")return!1;const t=lr(e);return!isNaN(Number(t))}function bI(e,t){const n=lr(e),r=lr(t),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function ix(e){const t=lr(e);return Math.trunc(t.getMonth()/3)+1}function xI(e,t){const n=lr(e),r=lr(t),i=n.getFullYear()-r.getFullYear(),s=ix(n)-ix(r);return i*4+s}function wI(e,t){const n=lr(e),r=lr(t);return n.getFullYear()-r.getFullYear()}function R8e(e,t){const n=lr(e),r=lr(t),i=wK(n,r),s=Math.abs(uS(n,r));n.setDate(n.getDate()-i*s);const f=+(wK(n,r)===-i),a=i*(s-f);return a===0?0:a}function wK(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function ude(e){const t=lr(e);return t.setHours(23,59,59,999),t}function cde(e){const t=lr(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function l6(e){const t=lr(e),n=t.getMonth(),r=n-n%3;return t.setMonth(r,1),t.setHours(0,0,0,0),t}function fde(e){const t=lr(e);return t.setDate(1),t.setHours(0,0,0,0),t}function hde(e){const t=lr(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function YR(e){const t=lr(e),n=Ha(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function k8e(e,t){var a,p;const n=Hx(),r=n.weekStartsOn??((p=(a=n.locale)==null?void 0:a.options)==null?void 0:p.weekStartsOn)??0,i=lr(e),s=i.getDay(),f=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+f),i.setHours(23,59,59,999),i}const L8e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},z8e=(e,t,n)=>{let r;const i=L8e[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function uN(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const N8e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},F8e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},B8e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},j8e={date:uN({formats:N8e,defaultWidth:"full"}),time:uN({formats:F8e,defaultWidth:"full"}),dateTime:uN({formats:B8e,defaultWidth:"full"})},U8e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$8e=(e,t,n,r)=>U8e[e];function zE(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const f=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):f;i=e.formattingValues[a]||e.formattingValues[f]}else{const f=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[a]||e.values[f]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const V8e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},q8e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},H8e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},G8e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Y8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},W8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},X8e=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Z8e={ordinalNumber:X8e,era:zE({values:V8e,defaultWidth:"wide"}),quarter:zE({values:q8e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:zE({values:H8e,defaultWidth:"wide"}),day:zE({values:G8e,defaultWidth:"wide"}),dayPeriod:zE({values:Y8e,defaultWidth:"wide",formattingValues:W8e,defaultFormattingWidth:"wide"})};function NE(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const f=s[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],p=Array.isArray(a)?Q8e(a,E=>E.test(f)):K8e(a,E=>E.test(f));let y;y=e.valueCallback?e.valueCallback(p):p,y=n.valueCallback?n.valueCallback(y):y;const S=t.slice(f.length);return{value:y,rest:S}}}function K8e(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Q8e(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function J8e(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let f=e.valueCallback?e.valueCallback(s[0]):s[0];f=n.valueCallback?n.valueCallback(f):f;const a=t.slice(i.length);return{value:f,rest:a}}}const eqe=/^(\d+)(th|st|nd|rd)?/i,tqe=/\d+/i,nqe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rqe={any:[/^b/i,/^(a|c)/i]},iqe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aqe={any:[/1/i,/2/i,/3/i,/4/i]},oqe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sqe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lqe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},uqe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cqe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fqe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hqe={ordinalNumber:J8e({matchPattern:eqe,parsePattern:tqe,valueCallback:e=>parseInt(e,10)}),era:NE({matchPatterns:nqe,defaultMatchWidth:"wide",parsePatterns:rqe,defaultParseWidth:"any"}),quarter:NE({matchPatterns:iqe,defaultMatchWidth:"wide",parsePatterns:aqe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:NE({matchPatterns:oqe,defaultMatchWidth:"wide",parsePatterns:sqe,defaultParseWidth:"any"}),day:NE({matchPatterns:lqe,defaultMatchWidth:"wide",parsePatterns:uqe,defaultParseWidth:"any"}),dayPeriod:NE({matchPatterns:cqe,defaultMatchWidth:"any",parsePatterns:fqe,defaultParseWidth:"any"})},dde={code:"en-US",formatDistance:z8e,formatLong:j8e,formatRelative:$8e,localize:Z8e,match:hqe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dqe(e){const t=lr(e);return uS(t,YR(t))+1}function N8(e){const t=lr(e),n=+lS(t)-+D8e(t);return Math.round(n/sde)+1}function F8(e,t){var S,E,I,L;const n=lr(e),r=n.getFullYear(),i=Hx(),s=(t==null?void 0:t.firstWeekContainsDate)??((E=(S=t==null?void 0:t.locale)==null?void 0:S.options)==null?void 0:E.firstWeekContainsDate)??i.firstWeekContainsDate??((L=(I=i.locale)==null?void 0:I.options)==null?void 0:L.firstWeekContainsDate)??1,f=Ha(e,0);f.setFullYear(r+1,0,s),f.setHours(0,0,0,0);const a=a_(f,t),p=Ha(e,0);p.setFullYear(r,0,s),p.setHours(0,0,0,0);const y=a_(p,t);return n.getTime()>=a.getTime()?r+1:n.getTime()>=y.getTime()?r:r-1}function pqe(e,t){var a,p,y,S;const n=Hx(),r=(t==null?void 0:t.firstWeekContainsDate)??((p=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:p.firstWeekContainsDate)??n.firstWeekContainsDate??((S=(y=n.locale)==null?void 0:y.options)==null?void 0:S.firstWeekContainsDate)??1,i=F8(e,t),s=Ha(e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),a_(s,t)}function pde(e,t){const n=lr(e),r=+a_(n,t)-+pqe(n,t);return Math.round(r/sde)+1}function qa(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Iv={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return qa(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):qa(n+1,2)},d(e,t){return qa(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return qa(e.getHours()%12||12,t.length)},H(e,t){return qa(e.getHours(),t.length)},m(e,t){return qa(e.getMinutes(),t.length)},s(e,t){return qa(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return qa(i,t.length)}},lw={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},SK={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Iv.y(e,t)},Y:function(e,t,n,r){const i=F8(e,r),s=i>0?i:1-i;if(t==="YY"){const f=s%100;return qa(f,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):qa(s,t.length)},R:function(e,t){const n=lde(e);return qa(n,t.length)},u:function(e,t){const n=e.getFullYear();return qa(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return qa(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return qa(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Iv.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return qa(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=pde(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):qa(i,t.length)},I:function(e,t,n){const r=N8(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):qa(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Iv.d(e,t)},D:function(e,t,n){const r=dqe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):qa(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return qa(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return qa(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return qa(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=lw.noon:r===0?i=lw.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=lw.evening:r>=12?i=lw.afternoon:r>=4?i=lw.morning:i=lw.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Iv.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Iv.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):qa(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):qa(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Iv.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Iv.s(e,t)},S:function(e,t){return Iv.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return EK(r);case"XXXX":case"XX":return Nb(r);case"XXXXX":case"XXX":default:return Nb(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return EK(r);case"xxxx":case"xx":return Nb(r);case"xxxxx":case"xxx":default:return Nb(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+TK(r,":");case"OOOO":default:return"GMT"+Nb(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+TK(r,":");case"zzzz":default:return"GMT"+Nb(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return qa(r,t.length)},T:function(e,t,n){const r=e.getTime();return qa(r,t.length)}};function TK(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+qa(s,2)}function EK(e,t){return e%60===0?(e>0?"-":"+")+qa(Math.abs(e)/60,2):Nb(e,t)}function Nb(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=qa(Math.trunc(r/60),2),s=qa(r%60,2);return n+i+t+s}const AK=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},mde=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},mqe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return AK(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",AK(r,t)).replace("{{time}}",mde(i,t))},SI={p:mde,P:mqe},gqe=/^D+$/,yqe=/^Y+$/,_qe=["D","DD","YY","YYYY"];function gde(e){return gqe.test(e)}function yde(e){return yqe.test(e)}function u6(e,t,n){const r=vqe(e,t,n);if(console.warn(r),_qe.includes(e))throw new RangeError(r)}function vqe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const bqe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xqe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,wqe=/^'([^]*?)'?$/,Sqe=/''/g,Tqe=/[a-zA-Z]/;function OK(e,t,n){var S,E,I,L,N,j,k,V;const r=Hx(),i=(n==null?void 0:n.locale)??r.locale??dde,s=(n==null?void 0:n.firstWeekContainsDate)??((E=(S=n==null?void 0:n.locale)==null?void 0:S.options)==null?void 0:E.firstWeekContainsDate)??r.firstWeekContainsDate??((L=(I=r.locale)==null?void 0:I.options)==null?void 0:L.firstWeekContainsDate)??1,f=(n==null?void 0:n.weekStartsOn)??((j=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:j.weekStartsOn)??r.weekStartsOn??((V=(k=r.locale)==null?void 0:k.options)==null?void 0:V.weekStartsOn)??0,a=lr(e);if(!vI(a))throw new RangeError("Invalid time value");let p=t.match(xqe).map(K=>{const J=K[0];if(J==="p"||J==="P"){const ie=SI[J];return ie(K,i.formatLong)}return K}).join("").match(bqe).map(K=>{if(K==="''")return{isToken:!1,value:"'"};const J=K[0];if(J==="'")return{isToken:!1,value:Eqe(K)};if(SK[J])return{isToken:!0,value:K};if(J.match(Tqe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+J+"`");return{isToken:!1,value:K}});i.localize.preprocessor&&(p=i.localize.preprocessor(a,p));const y={firstWeekContainsDate:s,weekStartsOn:f,locale:i};return p.map(K=>{if(!K.isToken)return K.value;const J=K.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&yde(J)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&gde(J))&&u6(J,t,String(e));const ie=SK[J[0]];return ie(a,J,i.localize,y)}).join("")}function Eqe(e){const t=e.match(wqe);return t?t[1].replace(Sqe,"'"):e}function CK(e){return lr(e).getDate()}function Aqe(e){return lr(e).getDay()}function Oqe(e){const t=lr(e),n=t.getFullYear(),r=t.getMonth(),i=Ha(e,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function Cqe(){return Object.assign({},Hx())}function tg(e){return lr(e).getHours()}function Mqe(e){let n=lr(e).getDay();return n===0&&(n=7),n}function ng(e){return lr(e).getMinutes()}function mc(e){return lr(e).getMonth()}function qy(e){return lr(e).getSeconds()}function c6(e){return lr(e).getTime()}function Fi(e){return lr(e).getFullYear()}function i0(e,t){const n=lr(e),r=lr(t);return n.getTime()>r.getTime()}function Tx(e,t){const n=lr(e),r=lr(t);return+n<+r}function Dqe(e,t){const n=lr(e),r=lr(t);return+n==+r}function Iqe(e,t){const n=t instanceof Date?Ha(t,0):new t(0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}const Pqe=10;class _de{constructor(){ir(this,"subPriority",0)}validate(t,n){return!0}}class Rqe extends _de{constructor(t,n,r,i,s){super(),this.value=t,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,r){return this.setValue(t,n,this.value,r)}}class kqe extends _de{constructor(){super(...arguments);ir(this,"priority",Pqe);ir(this,"subPriority",-1)}set(n,r){return r.timestampIsSet?n:Ha(n,Iqe(n,Date))}}class Ba{run(t,n,r,i){const s=this.parse(t,n,r,i);return s?{setter:new Rqe(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(t,n,r){return!0}}class Lqe extends Ba{constructor(){super(...arguments);ir(this,"priority",140);ir(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const ks={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},qm={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ls(e,t){return e&&{value:t(e.value),rest:e.rest}}function ns(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Hm(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,f=n[5]?parseInt(n[5],10):0;return{value:r*(i*GR+s*HR+f*O8e),rest:t.slice(n[0].length)}}function vde(e){return ns(ks.anyDigitsSigned,e)}function vs(e,t){switch(e){case 1:return ns(ks.singleDigit,t);case 2:return ns(ks.twoDigits,t);case 3:return ns(ks.threeDigits,t);case 4:return ns(ks.fourDigits,t);default:return ns(new RegExp("^\\d{1,"+e+"}"),t)}}function TI(e,t){switch(e){case 1:return ns(ks.singleDigitSigned,t);case 2:return ns(ks.twoDigitsSigned,t);case 3:return ns(ks.threeDigitsSigned,t);case 4:return ns(ks.fourDigitsSigned,t);default:return ns(new RegExp("^-?\\d{1,"+e+"}"),t)}}function B8(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function bde(e,t){const n=t>0,r=n?t:1-t;let i;if(r<=50)i=e||100;else{const s=r+50,f=Math.trunc(s/100)*100,a=e>=s%100;i=e+f-(a?100:0)}return n?i:1-i}function xde(e){return e%400===0||e%4===0&&e%100!==0}class zqe extends Ba{constructor(){super(...arguments);ir(this,"priority",130);ir(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=f=>({year:f,isTwoDigitYear:r==="yy"});switch(r){case"y":return Ls(vs(4,n),s);case"yo":return Ls(i.ordinalNumber(n,{unit:"year"}),s);default:return Ls(vs(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=bde(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const f=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(f,0,1),n.setHours(0,0,0,0),n}}class Nqe extends Ba{constructor(){super(...arguments);ir(this,"priority",130);ir(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=f=>({year:f,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Ls(vs(4,n),s);case"Yo":return Ls(i.ordinalNumber(n,{unit:"year"}),s);default:return Ls(vs(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const f=F8(n,s);if(i.isTwoDigitYear){const p=bde(i.year,f);return n.setFullYear(p,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),a_(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),a_(n,s)}}class Fqe extends Ba{constructor(){super(...arguments);ir(this,"priority",130);ir(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return TI(r==="R"?4:r.length,n)}set(n,r,i){const s=Ha(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),lS(s)}}class Bqe extends Ba{constructor(){super(...arguments);ir(this,"priority",130);ir(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return TI(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class jqe extends Ba{constructor(){super(...arguments);ir(this,"priority",120);ir(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return vs(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Uqe extends Ba{constructor(){super(...arguments);ir(this,"priority",120);ir(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return vs(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class $qe extends Ba{constructor(){super(...arguments);ir(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ir(this,"priority",110)}parse(n,r,i){const s=f=>f-1;switch(r){case"M":return Ls(ns(ks.month,n),s);case"MM":return Ls(vs(2,n),s);case"Mo":return Ls(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class Vqe extends Ba{constructor(){super(...arguments);ir(this,"priority",110);ir(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=f=>f-1;switch(r){case"L":return Ls(ns(ks.month,n),s);case"LL":return Ls(vs(2,n),s);case"Lo":return Ls(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function qqe(e,t,n){const r=lr(e),i=pde(r,n)-t;return r.setDate(r.getDate()-i*7),r}class Hqe extends Ba{constructor(){super(...arguments);ir(this,"priority",100);ir(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return ns(ks.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return vs(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return a_(qqe(n,i,s),s)}}function Gqe(e,t){const n=lr(e),r=N8(n)-t;return n.setDate(n.getDate()-r*7),n}class Yqe extends Ba{constructor(){super(...arguments);ir(this,"priority",100);ir(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return ns(ks.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return vs(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return lS(Gqe(n,i))}}const Wqe=[31,28,31,30,31,30,31,31,30,31,30,31],Xqe=[31,29,31,30,31,30,31,31,30,31,30,31];class Zqe extends Ba{constructor(){super(...arguments);ir(this,"priority",90);ir(this,"subPriority",1);ir(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return ns(ks.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return vs(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=xde(i),f=n.getMonth();return s?r>=1&&r<=Xqe[f]:r>=1&&r<=Wqe[f]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class Kqe extends Ba{constructor(){super(...arguments);ir(this,"priority",90);ir(this,"subpriority",1);ir(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return ns(ks.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return vs(r.length,n)}}validate(n,r){const i=n.getFullYear();return xde(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function j8(e,t,n){var E,I,L,N;const r=Hx(),i=(n==null?void 0:n.weekStartsOn)??((I=(E=n==null?void 0:n.locale)==null?void 0:E.options)==null?void 0:I.weekStartsOn)??r.weekStartsOn??((N=(L=r.locale)==null?void 0:L.options)==null?void 0:N.weekStartsOn)??0,s=lr(e),f=s.getDay(),p=(t%7+7)%7,y=7-i,S=t<0||t>6?t-(f+y)%7:(p+y)%7-(f+y)%7;return bp(s,S)}class Qqe extends Ba{constructor(){super(...arguments);ir(this,"priority",90);ir(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=j8(n,i,s),n.setHours(0,0,0,0),n}}class Jqe extends Ba{constructor(){super(...arguments);ir(this,"priority",90);ir(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const f=a=>{const p=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+p};switch(r){case"e":case"ee":return Ls(vs(r.length,n),f);case"eo":return Ls(i.ordinalNumber(n,{unit:"day"}),f);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=j8(n,i,s),n.setHours(0,0,0,0),n}}class e9e extends Ba{constructor(){super(...arguments);ir(this,"priority",90);ir(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const f=a=>{const p=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+p};switch(r){case"c":case"cc":return Ls(vs(r.length,n),f);case"co":return Ls(i.ordinalNumber(n,{unit:"day"}),f);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=j8(n,i,s),n.setHours(0,0,0,0),n}}function t9e(e,t){const n=lr(e),r=Mqe(n),i=t-r;return bp(n,i)}class n9e extends Ba{constructor(){super(...arguments);ir(this,"priority",90);ir(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=f=>f===0?7:f;switch(r){case"i":case"ii":return vs(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Ls(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return Ls(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Ls(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Ls(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=t9e(n,i),n.setHours(0,0,0,0),n}}class r9e extends Ba{constructor(){super(...arguments);ir(this,"priority",80);ir(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(B8(i),0,0,0),n}}class i9e extends Ba{constructor(){super(...arguments);ir(this,"priority",80);ir(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(B8(i),0,0,0),n}}class a9e extends Ba{constructor(){super(...arguments);ir(this,"priority",80);ir(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(B8(i),0,0,0),n}}class o9e extends Ba{constructor(){super(...arguments);ir(this,"priority",70);ir(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return ns(ks.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return vs(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class s9e extends Ba{constructor(){super(...arguments);ir(this,"priority",70);ir(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return ns(ks.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return vs(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class l9e extends Ba{constructor(){super(...arguments);ir(this,"priority",70);ir(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return ns(ks.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return vs(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class u9e extends Ba{constructor(){super(...arguments);ir(this,"priority",70);ir(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return ns(ks.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return vs(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class c9e extends Ba{constructor(){super(...arguments);ir(this,"priority",60);ir(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return ns(ks.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return vs(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class f9e extends Ba{constructor(){super(...arguments);ir(this,"priority",50);ir(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return ns(ks.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return vs(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class h9e extends Ba{constructor(){super(...arguments);ir(this,"priority",30);ir(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Ls(vs(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class d9e extends Ba{constructor(){super(...arguments);ir(this,"priority",10);ir(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Hm(qm.basicOptionalMinutes,n);case"XX":return Hm(qm.basic,n);case"XXXX":return Hm(qm.basicOptionalSeconds,n);case"XXXXX":return Hm(qm.extendedOptionalSeconds,n);case"XXX":default:return Hm(qm.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Ha(n,n.getTime()-yI(n)-i)}}class p9e extends Ba{constructor(){super(...arguments);ir(this,"priority",10);ir(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Hm(qm.basicOptionalMinutes,n);case"xx":return Hm(qm.basic,n);case"xxxx":return Hm(qm.basicOptionalSeconds,n);case"xxxxx":return Hm(qm.extendedOptionalSeconds,n);case"xxx":default:return Hm(qm.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Ha(n,n.getTime()-yI(n)-i)}}class m9e extends Ba{constructor(){super(...arguments);ir(this,"priority",40);ir(this,"incompatibleTokens","*")}parse(n){return vde(n)}set(n,r,i){return[Ha(n,i*1e3),{timestampIsSet:!0}]}}class g9e extends Ba{constructor(){super(...arguments);ir(this,"priority",20);ir(this,"incompatibleTokens","*")}parse(n){return vde(n)}set(n,r,i){return[Ha(n,i),{timestampIsSet:!0}]}}const y9e={G:new Lqe,y:new zqe,Y:new Nqe,R:new Fqe,u:new Bqe,Q:new jqe,q:new Uqe,M:new $qe,L:new Vqe,w:new Hqe,I:new Yqe,d:new Zqe,D:new Kqe,E:new Qqe,e:new Jqe,c:new e9e,i:new n9e,a:new r9e,b:new i9e,B:new a9e,h:new o9e,H:new s9e,K:new l9e,k:new u9e,m:new c9e,s:new f9e,S:new h9e,X:new d9e,x:new p9e,t:new m9e,T:new g9e},_9e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,v9e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,b9e=/^'([^]*?)'?$/,x9e=/''/g,w9e=/\S/,S9e=/[a-zA-Z]/;function cN(e,t,n,r){var j,k,V,K,J,ie,Q,W;const i=Cqe(),s=(r==null?void 0:r.locale)??i.locale??dde,f=(r==null?void 0:r.firstWeekContainsDate)??((k=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:k.firstWeekContainsDate)??i.firstWeekContainsDate??((K=(V=i.locale)==null?void 0:V.options)==null?void 0:K.firstWeekContainsDate)??1,a=(r==null?void 0:r.weekStartsOn)??((ie=(J=r==null?void 0:r.locale)==null?void 0:J.options)==null?void 0:ie.weekStartsOn)??i.weekStartsOn??((W=(Q=i.locale)==null?void 0:Q.options)==null?void 0:W.weekStartsOn)??0;if(t==="")return e===""?lr(n):Ha(n,NaN);const p={firstWeekContainsDate:f,weekStartsOn:a,locale:s},y=[new kqe],S=t.match(v9e).map(te=>{const X=te[0];if(X in SI){const ae=SI[X];return ae(te,s.formatLong)}return te}).join("").match(_9e),E=[];for(let te of S){!(r!=null&&r.useAdditionalWeekYearTokens)&&yde(te)&&u6(te,t,e),!(r!=null&&r.useAdditionalDayOfYearTokens)&&gde(te)&&u6(te,t,e);const X=te[0],ae=y9e[X];if(ae){const{incompatibleTokens:le}=ae;if(Array.isArray(le)){const ye=E.find(De=>le.includes(De.token)||De.token===X);if(ye)throw new RangeError(`The format string mustn't contain \`${ye.fullToken}\` and \`${te}\` at the same time`)}else if(ae.incompatibleTokens==="*"&&E.length>0)throw new RangeError(`The format string mustn't contain \`${te}\` and any other token at the same time`);E.push({token:X,fullToken:te});const ge=ae.run(e,te,s.match,p);if(!ge)return Ha(n,NaN);y.push(ge.setter),e=ge.rest}else{if(X.match(S9e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+X+"`");if(te==="''"?te="'":X==="'"&&(te=T9e(te)),e.indexOf(te)===0)e=e.slice(te.length);else return Ha(n,NaN)}}if(e.length>0&&w9e.test(e))return Ha(n,NaN);const I=y.map(te=>te.priority).sort((te,X)=>X-te).filter((te,X,ae)=>ae.indexOf(te)===X).map(te=>y.filter(X=>X.priority===te).sort((X,ae)=>ae.subPriority-X.subPriority)).map(te=>te[0]);let L=lr(n);if(isNaN(L.getTime()))return Ha(n,NaN);const N={};for(const te of I){if(!te.validate(L,p))return Ha(n,NaN);const X=te.set(L,N,p);Array.isArray(X)?(L=X[0],Object.assign(N,X[1])):L=X}return Ha(n,L)}function T9e(e){return e.match(b9e)[1].replace(x9e,"'")}function E9e(e,t){const n=lr(e),r=lr(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function A9e(e,t){const n=l6(e),r=l6(t);return+n==+r}function O9e(e,t){const n=lr(e),r=lr(t);return n.getFullYear()===r.getFullYear()}function J2(e,t){const n=+lr(e),[r,i]=[+lr(t.start),+lr(t.end)].sort((s,f)=>s-f);return n>=r&&n<=i}function C9e(e,t){return bp(e,-1)}function M9e(e,t){const r=R9e(e);let i;if(r.date){const p=k9e(r.date,2);i=L9e(p.restDateString,p.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let f=0,a;if(r.time&&(f=z9e(r.time),isNaN(f)))return new Date(NaN);if(r.timezone){if(a=N9e(r.timezone),isNaN(a))return new Date(NaN)}else{const p=new Date(s+f),y=new Date(0);return y.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),y.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),y}return new Date(s+f+a)}const MM={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},D9e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,I9e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,P9e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function R9e(e){const t={},n=e.split(MM.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],MM.timeZoneDelimiter.test(t.date)&&(t.date=e.split(MM.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=MM.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function k9e(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:e.slice((r[1]||r[2]).length)}}function L9e(e,t){if(t===null)return new Date(NaN);const n=e.match(D9e);if(!n)return new Date(NaN);const r=!!n[4],i=FE(n[1]),s=FE(n[2])-1,f=FE(n[3]),a=FE(n[4]),p=FE(n[5])-1;if(r)return $9e(t,a,p)?F9e(t,a,p):new Date(NaN);{const y=new Date(0);return!j9e(t,s,f)||!U9e(t,i)?new Date(NaN):(y.setUTCFullYear(t,s,Math.max(i,f)),y)}}function FE(e){return e?parseInt(e):1}function z9e(e){const t=e.match(I9e);if(!t)return NaN;const n=fN(t[1]),r=fN(t[2]),i=fN(t[3]);return V9e(n,r,i)?n*GR+r*HR+i*1e3:NaN}function fN(e){return e&&parseFloat(e.replace(",","."))||0}function N9e(e){if(e==="Z")return 0;const t=e.match(P9e);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return q9e(r,i)?n*(r*GR+i*HR):NaN}function F9e(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const B9e=[31,null,31,30,31,30,31,31,30,31,30,31];function wde(e){return e%400===0||e%4===0&&e%100!==0}function j9e(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(B9e[t]||(wde(e)?29:28))}function U9e(e,t){return t>=1&&t<=(wde(e)?366:365)}function $9e(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function V9e(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function q9e(e,t){return t>=0&&t<=59}function Yf(e,t){const n=lr(e),r=n.getFullYear(),i=n.getDate(),s=Ha(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const f=Oqe(s);return n.setMonth(t,Math.min(i,f)),n}function H9e(e,t){let n=lr(e);return isNaN(+n)?Ha(e,NaN):(t.year!=null&&n.setFullYear(t.year),t.month!=null&&(n=Yf(n,t.month)),t.date!=null&&n.setDate(t.date),t.hours!=null&&n.setHours(t.hours),t.minutes!=null&&n.setMinutes(t.minutes),t.seconds!=null&&n.setSeconds(t.seconds),t.milliseconds!=null&&n.setMilliseconds(t.milliseconds),n)}function _D(e,t){const n=lr(e);return n.setHours(t),n}function vD(e,t){const n=lr(e);return n.setMinutes(t),n}function yw(e,t){const n=lr(e),r=Math.trunc(n.getMonth()/3)+1,i=t-r;return Yf(n,n.getMonth()+i*3)}function bD(e,t){const n=lr(e);return n.setSeconds(t),n}function zm(e,t){const n=lr(e);return isNaN(+n)?Ha(e,NaN):(n.setFullYear(t),n)}function ax(e,t){return Op(e,-t)}function Sde(e,t){return z8(e,-1)}function MK(e,t){return _I(e,-1)}function cS(e,t){return $y(e,-t)}function WR(){return typeof window<"u"}function sT(e){return Tde(e)?(e.nodeName||"").toLowerCase():"#document"}function Jf(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function yg(e){var t;return(t=(Tde(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Tde(e){return WR()?e instanceof Node||e instanceof Jf(e).Node:!1}function gc(e){return WR()?e instanceof Element||e instanceof Jf(e).Element:!1}function fg(e){return WR()?e instanceof HTMLElement||e instanceof Jf(e).HTMLElement:!1}function DK(e){return!WR()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jf(e).ShadowRoot}const G9e=new Set(["inline","contents"]);function AO(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=sd(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!G9e.has(i)}const Y9e=new Set(["table","td","th"]);function W9e(e){return Y9e.has(sT(e))}const X9e=[":popover-open",":modal"];function XR(e){return X9e.some(t=>{try{return e.matches(t)}catch{return!1}})}const Z9e=["transform","translate","scale","rotate","perspective"],K9e=["transform","translate","scale","rotate","perspective","filter"],Q9e=["paint","layout","strict","content"];function U8(e){const t=$8(),n=gc(e)?sd(e):e;return Z9e.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||K9e.some(r=>(n.willChange||"").includes(r))||Q9e.some(r=>(n.contain||"").includes(r))}function J9e(e){let t=a0(e);for(;fg(t)&&!fS(t);){if(U8(t))return t;if(XR(t))return null;t=a0(t)}return null}function $8(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const eHe=new Set(["html","body","#document"]);function fS(e){return eHe.has(sT(e))}function sd(e){return Jf(e).getComputedStyle(e)}function ZR(e){return gc(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function a0(e){if(sT(e)==="html")return e;const t=e.assignedSlot||e.parentNode||DK(e)&&e.host||yg(e);return DK(t)?t.host:t}function Ede(e){const t=a0(e);return fS(t)?e.ownerDocument?e.ownerDocument.body:e.body:fg(t)&&AO(t)?t:Ede(t)}function eA(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Ede(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),f=Jf(i);if(s){const a=f6(f);return t.concat(f,f.visualViewport||[],AO(i)?i:[],a&&n?eA(a):[])}return t.concat(i,eA(i,[],n))}function f6(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const hS=Math.min,ox=Math.max,EI=Math.round,DM=Math.floor,rg=e=>({x:e,y:e}),tHe={left:"right",right:"left",bottom:"top",top:"bottom"},nHe={start:"end",end:"start"};function rHe(e,t,n){return ox(e,hS(t,n))}function KR(e,t){return typeof e=="function"?e(t):e}function dS(e){return e.split("-")[0]}function OO(e){return e.split("-")[1]}function iHe(e){return e==="x"?"y":"x"}function V8(e){return e==="y"?"height":"width"}const aHe=new Set(["top","bottom"]);function Yb(e){return aHe.has(dS(e))?"y":"x"}function q8(e){return iHe(Yb(e))}function oHe(e,t,n){n===void 0&&(n=!1);const r=OO(e),i=q8(e),s=V8(i);let f=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(f=AI(f)),[f,AI(f)]}function sHe(e){const t=AI(e);return[h6(e),t,h6(t)]}function h6(e){return e.replace(/start|end/g,t=>nHe[t])}const IK=["left","right"],PK=["right","left"],lHe=["top","bottom"],uHe=["bottom","top"];function cHe(e,t,n){switch(e){case"top":case"bottom":return n?t?PK:IK:t?IK:PK;case"left":case"right":return t?lHe:uHe;default:return[]}}function fHe(e,t,n,r){const i=OO(e);let s=cHe(dS(e),n==="start",r);return i&&(s=s.map(f=>f+"-"+i),t&&(s=s.concat(s.map(h6)))),s}function AI(e){return e.replace(/left|right|bottom|top/g,t=>tHe[t])}function hHe(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ade(e){return typeof e!="number"?hHe(e):{top:e,right:e,bottom:e,left:e}}function OI(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}var dHe=typeof document<"u",pHe=function(){},CI=dHe?be.useLayoutEffect:pHe;const mHe={...ID},gHe=mHe.useInsertionEffect,yHe=gHe||(e=>e());function _He(e){const t=be.useRef(()=>{});return yHe(()=>{t.current=e}),be.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function RK(e,t,n){let{reference:r,floating:i}=e;const s=Yb(t),f=q8(t),a=V8(f),p=dS(t),y=s==="y",S=r.x+r.width/2-i.width/2,E=r.y+r.height/2-i.height/2,I=r[a]/2-i[a]/2;let L;switch(p){case"top":L={x:S,y:r.y-i.height};break;case"bottom":L={x:S,y:r.y+r.height};break;case"right":L={x:r.x+r.width,y:E};break;case"left":L={x:r.x-i.width,y:E};break;default:L={x:r.x,y:r.y}}switch(OO(t)){case"start":L[f]-=I*(n&&y?-1:1);break;case"end":L[f]+=I*(n&&y?-1:1);break}return L}async function vHe(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:f,elements:a,strategy:p}=e,{boundary:y="clippingAncestors",rootBoundary:S="viewport",elementContext:E="floating",altBoundary:I=!1,padding:L=0}=KR(t,e),N=Ade(L),k=a[I?E==="floating"?"reference":"floating":E],V=OI(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(k)))==null||n?k:k.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:y,rootBoundary:S,strategy:p})),K=E==="floating"?{x:r,y:i,width:f.floating.width,height:f.floating.height}:f.reference,J=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),ie=await(s.isElement==null?void 0:s.isElement(J))?await(s.getScale==null?void 0:s.getScale(J))||{x:1,y:1}:{x:1,y:1},Q=OI(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:K,offsetParent:J,strategy:p}):K);return{top:(V.top-Q.top+N.top)/ie.y,bottom:(Q.bottom-V.bottom+N.bottom)/ie.y,left:(V.left-Q.left+N.left)/ie.x,right:(Q.right-V.right+N.right)/ie.x}}const bHe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:f}=n,a=s.filter(Boolean),p=await(f.isRTL==null?void 0:f.isRTL(t));let y=await f.getElementRects({reference:e,floating:t,strategy:i}),{x:S,y:E}=RK(y,r,p),I=r,L={},N=0;for(let k=0;k<a.length;k++){var j;const{name:V,fn:K}=a[k],{x:J,y:ie,data:Q,reset:W}=await K({x:S,y:E,initialPlacement:r,placement:I,strategy:i,middlewareData:L,rects:y,platform:{...f,detectOverflow:(j=f.detectOverflow)!=null?j:vHe},elements:{reference:e,floating:t}});S=J??S,E=ie??E,L={...L,[V]:{...L[V],...Q}},W&&N<=50&&(N++,typeof W=="object"&&(W.placement&&(I=W.placement),W.rects&&(y=W.rects===!0?await f.getElementRects({reference:e,floating:t,strategy:i}):W.rects),{x:S,y:E}=RK(y,I,p)),k=-1)}return{x:S,y:E,placement:I,strategy:i,middlewareData:L}},xHe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:f,elements:a,middlewareData:p}=t,{element:y,padding:S=0}=KR(e,t)||{};if(y==null)return{};const E=Ade(S),I={x:n,y:r},L=q8(i),N=V8(L),j=await f.getDimensions(y),k=L==="y",V=k?"top":"left",K=k?"bottom":"right",J=k?"clientHeight":"clientWidth",ie=s.reference[N]+s.reference[L]-I[L]-s.floating[N],Q=I[L]-s.reference[L],W=await(f.getOffsetParent==null?void 0:f.getOffsetParent(y));let te=W?W[J]:0;(!te||!await(f.isElement==null?void 0:f.isElement(W)))&&(te=a.floating[J]||s.floating[N]);const X=ie/2-Q/2,ae=te/2-j[N]/2-1,le=hS(E[V],ae),ge=hS(E[K],ae),ye=le,De=te-j[N]-ge,He=te/2-j[N]/2+X,Be=rHe(ye,He,De),Ee=!p.arrow&&OO(i)!=null&&He!==Be&&s.reference[N]/2-(He<ye?le:ge)-j[N]/2<0,Fe=Ee?He<ye?He-ye:He-De:0;return{[L]:I[L]+Fe,data:{[L]:Be,centerOffset:He-Be-Fe,...Ee&&{alignmentOffset:Fe}},reset:Ee}}}),wHe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:f,initialPlacement:a,platform:p,elements:y}=t,{mainAxis:S=!0,crossAxis:E=!0,fallbackPlacements:I,fallbackStrategy:L="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:j=!0,...k}=KR(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const V=dS(i),K=Yb(a),J=dS(a)===a,ie=await(p.isRTL==null?void 0:p.isRTL(y.floating)),Q=I||(J||!j?[AI(a)]:sHe(a)),W=N!=="none";!I&&W&&Q.push(...fHe(a,j,N,ie));const te=[a,...Q],X=await p.detectOverflow(t,k),ae=[];let le=((r=s.flip)==null?void 0:r.overflows)||[];if(S&&ae.push(X[V]),E){const He=oHe(i,f,ie);ae.push(X[He[0]],X[He[1]])}if(le=[...le,{placement:i,overflows:ae}],!ae.every(He=>He<=0)){var ge,ye;const He=(((ge=s.flip)==null?void 0:ge.index)||0)+1,Be=te[He];if(Be&&(!(E==="alignment"?K!==Yb(Be):!1)||le.every(at=>Yb(at.placement)===K?at.overflows[0]>0:!0)))return{data:{index:He,overflows:le},reset:{placement:Be}};let Ee=(ye=le.filter(Fe=>Fe.overflows[0]<=0).sort((Fe,at)=>Fe.overflows[1]-at.overflows[1])[0])==null?void 0:ye.placement;if(!Ee)switch(L){case"bestFit":{var De;const Fe=(De=le.filter(at=>{if(W){const yt=Yb(at.placement);return yt===K||yt==="y"}return!0}).map(at=>[at.placement,at.overflows.filter(yt=>yt>0).reduce((yt,je)=>yt+je,0)]).sort((at,yt)=>at[1]-yt[1])[0])==null?void 0:De[0];Fe&&(Ee=Fe);break}case"initialPlacement":Ee=a;break}if(i!==Ee)return{reset:{placement:Ee}}}return{}}}},SHe=new Set(["left","top"]);async function THe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),f=dS(n),a=OO(n),p=Yb(n)==="y",y=SHe.has(f)?-1:1,S=s&&p?-1:1,E=KR(t,e);let{mainAxis:I,crossAxis:L,alignmentAxis:N}=typeof E=="number"?{mainAxis:E,crossAxis:0,alignmentAxis:null}:{mainAxis:E.mainAxis||0,crossAxis:E.crossAxis||0,alignmentAxis:E.alignmentAxis};return a&&typeof N=="number"&&(L=a==="end"?N*-1:N),p?{x:L*S,y:I*y}:{x:I*y,y:L*S}}const EHe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:f,middlewareData:a}=t,p=await THe(t,e);return f===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+p.x,y:s+p.y,data:{...p,placement:f}}}}};function Ode(e){const t=sd(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=fg(e),s=i?e.offsetWidth:n,f=i?e.offsetHeight:r,a=EI(n)!==s||EI(r)!==f;return a&&(n=s,r=f),{width:n,height:r,$:a}}function H8(e){return gc(e)?e:e.contextElement}function Rw(e){const t=H8(e);if(!fg(t))return rg(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Ode(t);let f=(s?EI(n.width):n.width)/r,a=(s?EI(n.height):n.height)/i;return(!f||!Number.isFinite(f))&&(f=1),(!a||!Number.isFinite(a))&&(a=1),{x:f,y:a}}const AHe=rg(0);function Cde(e){const t=Jf(e);return!$8()||!t.visualViewport?AHe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function OHe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Jf(e)?!1:t}function Ex(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=H8(e);let f=rg(1);t&&(r?gc(r)&&(f=Rw(r)):f=Rw(e));const a=OHe(s,n,r)?Cde(s):rg(0);let p=(i.left+a.x)/f.x,y=(i.top+a.y)/f.y,S=i.width/f.x,E=i.height/f.y;if(s){const I=Jf(s),L=r&&gc(r)?Jf(r):r;let N=I,j=f6(N);for(;j&&r&&L!==N;){const k=Rw(j),V=j.getBoundingClientRect(),K=sd(j),J=V.left+(j.clientLeft+parseFloat(K.paddingLeft))*k.x,ie=V.top+(j.clientTop+parseFloat(K.paddingTop))*k.y;p*=k.x,y*=k.y,S*=k.x,E*=k.y,p+=J,y+=ie,N=Jf(j),j=f6(N)}}return OI({width:S,height:E,x:p,y})}function QR(e,t){const n=ZR(e).scrollLeft;return t?t.left+n:Ex(yg(e)).left+n}function Mde(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-QR(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function CHe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",f=yg(r),a=t?XR(t.floating):!1;if(r===f||a&&s)return n;let p={scrollLeft:0,scrollTop:0},y=rg(1);const S=rg(0),E=fg(r);if((E||!E&&!s)&&((sT(r)!=="body"||AO(f))&&(p=ZR(r)),fg(r))){const L=Ex(r);y=Rw(r),S.x=L.x+r.clientLeft,S.y=L.y+r.clientTop}const I=f&&!E&&!s?Mde(f,p):rg(0);return{width:n.width*y.x,height:n.height*y.y,x:n.x*y.x-p.scrollLeft*y.x+S.x+I.x,y:n.y*y.y-p.scrollTop*y.y+S.y+I.y}}function MHe(e){return Array.from(e.getClientRects())}function DHe(e){const t=yg(e),n=ZR(e),r=e.ownerDocument.body,i=ox(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ox(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let f=-n.scrollLeft+QR(e);const a=-n.scrollTop;return sd(r).direction==="rtl"&&(f+=ox(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:f,y:a}}const kK=25;function IHe(e,t){const n=Jf(e),r=yg(e),i=n.visualViewport;let s=r.clientWidth,f=r.clientHeight,a=0,p=0;if(i){s=i.width,f=i.height;const S=$8();(!S||S&&t==="fixed")&&(a=i.offsetLeft,p=i.offsetTop)}const y=QR(r);if(y<=0){const S=r.ownerDocument,E=S.body,I=getComputedStyle(E),L=S.compatMode==="CSS1Compat"&&parseFloat(I.marginLeft)+parseFloat(I.marginRight)||0,N=Math.abs(r.clientWidth-E.clientWidth-L);N<=kK&&(s-=N)}else y<=kK&&(s+=y);return{width:s,height:f,x:a,y:p}}const PHe=new Set(["absolute","fixed"]);function RHe(e,t){const n=Ex(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=fg(e)?Rw(e):rg(1),f=e.clientWidth*s.x,a=e.clientHeight*s.y,p=i*s.x,y=r*s.y;return{width:f,height:a,x:p,y}}function LK(e,t,n){let r;if(t==="viewport")r=IHe(e,n);else if(t==="document")r=DHe(yg(e));else if(gc(t))r=RHe(t,n);else{const i=Cde(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return OI(r)}function Dde(e,t){const n=a0(e);return n===t||!gc(n)||fS(n)?!1:sd(n).position==="fixed"||Dde(n,t)}function kHe(e,t){const n=t.get(e);if(n)return n;let r=eA(e,[],!1).filter(a=>gc(a)&&sT(a)!=="body"),i=null;const s=sd(e).position==="fixed";let f=s?a0(e):e;for(;gc(f)&&!fS(f);){const a=sd(f),p=U8(f);!p&&a.position==="fixed"&&(i=null),(s?!p&&!i:!p&&a.position==="static"&&!!i&&PHe.has(i.position)||AO(f)&&!p&&Dde(e,f))?r=r.filter(S=>S!==f):i=a,f=a0(f)}return t.set(e,r),r}function LHe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const f=[...n==="clippingAncestors"?XR(t)?[]:kHe(t,this._c):[].concat(n),r],a=f[0],p=f.reduce((y,S)=>{const E=LK(t,S,i);return y.top=ox(E.top,y.top),y.right=hS(E.right,y.right),y.bottom=hS(E.bottom,y.bottom),y.left=ox(E.left,y.left),y},LK(t,a,i));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function zHe(e){const{width:t,height:n}=Ode(e);return{width:t,height:n}}function NHe(e,t,n){const r=fg(t),i=yg(t),s=n==="fixed",f=Ex(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const p=rg(0);function y(){p.x=QR(i)}if(r||!r&&!s)if((sT(t)!=="body"||AO(i))&&(a=ZR(t)),r){const L=Ex(t,!0,s,t);p.x=L.x+t.clientLeft,p.y=L.y+t.clientTop}else i&&y();s&&!r&&i&&y();const S=i&&!r&&!s?Mde(i,a):rg(0),E=f.left+a.scrollLeft-p.x-S.x,I=f.top+a.scrollTop-p.y-S.y;return{x:E,y:I,width:f.width,height:f.height}}function hN(e){return sd(e).position==="static"}function zK(e,t){if(!fg(e)||sd(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return yg(e)===n&&(n=n.ownerDocument.body),n}function Ide(e,t){const n=Jf(e);if(XR(e))return n;if(!fg(e)){let i=a0(e);for(;i&&!fS(i);){if(gc(i)&&!hN(i))return i;i=a0(i)}return n}let r=zK(e,t);for(;r&&W9e(r)&&hN(r);)r=zK(r,t);return r&&fS(r)&&hN(r)&&!U8(r)?n:r||J9e(e)||n}const FHe=async function(e){const t=this.getOffsetParent||Ide,n=this.getDimensions,r=await n(e.floating);return{reference:NHe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function BHe(e){return sd(e).direction==="rtl"}const jHe={convertOffsetParentRelativeRectToViewportRelativeRect:CHe,getDocumentElement:yg,getClippingRect:LHe,getOffsetParent:Ide,getElementRects:FHe,getClientRects:MHe,getDimensions:zHe,getScale:Rw,isElement:gc,isRTL:BHe};function Pde(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function UHe(e,t){let n=null,r;const i=yg(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function f(a,p){a===void 0&&(a=!1),p===void 0&&(p=1),s();const y=e.getBoundingClientRect(),{left:S,top:E,width:I,height:L}=y;if(a||t(),!I||!L)return;const N=DM(E),j=DM(i.clientWidth-(S+I)),k=DM(i.clientHeight-(E+L)),V=DM(S),J={rootMargin:-N+"px "+-j+"px "+-k+"px "+-V+"px",threshold:ox(0,hS(1,p))||1};let ie=!0;function Q(W){const te=W[0].intersectionRatio;if(te!==p){if(!ie)return f();te?f(!1,te):r=setTimeout(()=>{f(!1,1e-7)},1e3)}te===1&&!Pde(y,e.getBoundingClientRect())&&f(),ie=!1}try{n=new IntersectionObserver(Q,{...J,root:i.ownerDocument})}catch{n=new IntersectionObserver(Q,J)}n.observe(e)}return f(!0),s}function Rde(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:f=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:p=!1}=r,y=H8(e),S=i||s?[...y?eA(y):[],...eA(t)]:[];S.forEach(V=>{i&&V.addEventListener("scroll",n,{passive:!0}),s&&V.addEventListener("resize",n)});const E=y&&a?UHe(y,n):null;let I=-1,L=null;f&&(L=new ResizeObserver(V=>{let[K]=V;K&&K.target===y&&L&&(L.unobserve(t),cancelAnimationFrame(I),I=requestAnimationFrame(()=>{var J;(J=L)==null||J.observe(t)})),n()}),y&&!p&&L.observe(y),L.observe(t));let N,j=p?Ex(e):null;p&&k();function k(){const V=Ex(e);j&&!Pde(j,V)&&n(),j=V,N=requestAnimationFrame(k)}return n(),()=>{var V;S.forEach(K=>{i&&K.removeEventListener("scroll",n),s&&K.removeEventListener("resize",n)}),E==null||E(),(V=L)==null||V.disconnect(),L=null,p&&cancelAnimationFrame(N)}}const $He=EHe,VHe=wHe,NK=xHe,qHe=(e,t,n)=>{const r=new Map,i={platform:jHe,...n},s={...i.platform,_c:r};return bHe(e,t,{...i,platform:s})};var HHe=typeof document<"u",GHe=function(){},xD=HHe?be.useLayoutEffect:GHe;function MI(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!MI(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!MI(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function kde(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function FK(e,t){const n=kde(e);return Math.round(t*n)/n}function dN(e){const t=be.useRef(e);return xD(()=>{t.current=e}),t}function YHe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:f}={},transform:a=!0,whileElementsMounted:p,open:y}=e,[S,E]=be.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[I,L]=be.useState(r);MI(I,r)||L(r);const[N,j]=be.useState(null),[k,V]=be.useState(null),K=be.useCallback(at=>{at!==W.current&&(W.current=at,j(at))},[]),J=be.useCallback(at=>{at!==te.current&&(te.current=at,V(at))},[]),ie=s||N,Q=f||k,W=be.useRef(null),te=be.useRef(null),X=be.useRef(S),ae=p!=null,le=dN(p),ge=dN(i),ye=dN(y),De=be.useCallback(()=>{if(!W.current||!te.current)return;const at={placement:t,strategy:n,middleware:I};ge.current&&(at.platform=ge.current),qHe(W.current,te.current,at).then(yt=>{const je={...yt,isPositioned:ye.current!==!1};He.current&&!MI(X.current,je)&&(X.current=je,VU.flushSync(()=>{E(je)}))})},[I,t,n,ge,ye]);xD(()=>{y===!1&&X.current.isPositioned&&(X.current.isPositioned=!1,E(at=>({...at,isPositioned:!1})))},[y]);const He=be.useRef(!1);xD(()=>(He.current=!0,()=>{He.current=!1}),[]),xD(()=>{if(ie&&(W.current=ie),Q&&(te.current=Q),ie&&Q){if(le.current)return le.current(ie,Q,De);De()}},[ie,Q,De,le,ae]);const Be=be.useMemo(()=>({reference:W,floating:te,setReference:K,setFloating:J}),[K,J]),Ee=be.useMemo(()=>({reference:ie,floating:Q}),[ie,Q]),Fe=be.useMemo(()=>{const at={position:n,left:0,top:0};if(!Ee.floating)return at;const yt=FK(Ee.floating,S.x),je=FK(Ee.floating,S.y);return a?{...at,transform:"translate("+yt+"px, "+je+"px)",...kde(Ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:yt,top:je}},[n,a,Ee.floating,S.x,S.y]);return be.useMemo(()=>({...S,update:De,refs:Be,elements:Ee,floatingStyles:Fe}),[S,De,Be,Ee,Fe])}const WHe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?NK({element:r.current,padding:i}).fn(n):{}:r?NK({element:r,padding:i}).fn(n):{}}}},XHe=(e,t)=>({...$He(e),options:[e,t]}),ZHe=(e,t)=>({...VHe(e),options:[e,t]}),KHe=(e,t)=>({...WHe(e),options:[e,t]}),QHe={...ID};let BK=!1,JHe=0;const jK=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+JHe++;function eGe(){const[e,t]=be.useState(()=>BK?jK():void 0);return CI(()=>{e==null&&t(jK())},[]),be.useEffect(()=>{BK=!0},[]),e}const tGe=QHe.useId,Lde=tGe||eGe,nGe=be.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:i},middlewareData:{arrow:s,shift:f}},width:a=14,height:p=7,tipRadius:y=0,strokeWidth:S=0,staticOffset:E,stroke:I,d:L,style:{transform:N,...j}={},...k}=t,V=Lde(),[K,J]=be.useState(!1);if(CI(()=>{if(!i)return;sd(i).direction==="rtl"&&J(!0)},[i]),!i)return null;const[ie,Q]=r.split("-"),W=ie==="top"||ie==="bottom";let te=E;(W&&f!=null&&f.x||!W&&f!=null&&f.y)&&(te=null);const X=S*2,ae=X/2,le=a/2*(y/-8+1),ge=p/2*y/4,ye=!!L,De=te&&Q==="end"?"bottom":"top";let He=te&&Q==="end"?"right":"left";te&&K&&(He=Q==="end"?"left":"right");const Be=(s==null?void 0:s.x)!=null?te||s.x:"",Ee=(s==null?void 0:s.y)!=null?te||s.y:"",Fe=L||"M0,0"+(" H"+a)+(" L"+(a-le)+","+(p-ge))+(" Q"+a/2+","+p+" "+le+","+(p-ge))+" Z",at={top:ye?"rotate(180deg)":"",left:ye?"rotate(90deg)":"rotate(-90deg)",bottom:ye?"":"rotate(180deg)",right:ye?"rotate(-90deg)":"rotate(90deg)"}[ie];return Oe.jsxs("svg",{...k,"aria-hidden":!0,ref:n,width:ye?a:a+X,height:a,viewBox:"0 0 "+a+" "+(p>a?p:a),style:{position:"absolute",pointerEvents:"none",[He]:Be,[De]:Ee,[ie]:W||ye?"100%":"calc(100% - "+X/2+"px)",transform:[at,N].filter(yt=>!!yt).join(" "),...j},children:[X>0&&Oe.jsx("path",{clipPath:"url(#"+V+")",fill:"none",stroke:I,strokeWidth:X+(L?0:1),d:Fe}),Oe.jsx("path",{stroke:X&&!L?k.fill:"none",d:Fe}),Oe.jsx("clipPath",{id:V,children:Oe.jsx("rect",{x:-ae,y:ae*(ye?-1:1),width:a+X,height:a})})]})});function rGe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const iGe=be.createContext(null),aGe=be.createContext(null),oGe=()=>{var e;return((e=be.useContext(iGe))==null?void 0:e.id)||null},sGe=()=>be.useContext(aGe);function lGe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Lde(),s=be.useRef({}),[f]=be.useState(()=>rGe()),a=oGe()!=null,[p,y]=be.useState(r.reference),S=_He((L,N,j)=>{s.current.openEvent=L?N:void 0,f.emit("openchange",{open:L,event:N,reason:j,nested:a}),n==null||n(L,N,j)}),E=be.useMemo(()=>({setPositionReference:y}),[]),I=be.useMemo(()=>({reference:p||r.reference||null,floating:r.floating||null,domReference:r.reference}),[p,r.reference,r.floating]);return be.useMemo(()=>({dataRef:s,open:t,onOpenChange:S,elements:I,events:f,floatingId:i,refs:E}),[t,S,I,f,i,E])}function uGe(e){e===void 0&&(e={});const{nodeId:t}=e,n=lGe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,f]=be.useState(null),[a,p]=be.useState(null),S=(i==null?void 0:i.domReference)||s,E=be.useRef(null),I=sGe();CI(()=>{S&&(E.current=S)},[S]);const L=YHe({...e,elements:{...i,...a&&{reference:a}}}),N=be.useCallback(J=>{const ie=gc(J)?{getBoundingClientRect:()=>J.getBoundingClientRect(),getClientRects:()=>J.getClientRects(),contextElement:J}:J;p(ie),L.refs.setReference(ie)},[L.refs]),j=be.useCallback(J=>{(gc(J)||J===null)&&(E.current=J,f(J)),(gc(L.refs.reference.current)||L.refs.reference.current===null||J!==null&&!gc(J))&&L.refs.setReference(J)},[L.refs]),k=be.useMemo(()=>({...L.refs,setReference:j,setPositionReference:N,domReference:E}),[L.refs,j,N]),V=be.useMemo(()=>({...L.elements,domReference:S}),[L.elements,S]),K=be.useMemo(()=>({...L,...r,refs:k,elements:V,nodeId:t}),[L,k,V,t,r]);return CI(()=>{r.dataRef.current.floatingContext=K;const J=I==null?void 0:I.nodesRef.current.find(ie=>ie.id===t);J&&(J.context=K)}),be.useMemo(()=>({...L,context:K,refs:k,elements:V}),[L,k,V,K])}/*!
  react-datepicker v7.6.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var d6=function(t,n){return d6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},d6(t,n)};function Fl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");d6(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var va=function(){return va=Object.assign||function(n){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(n[f]=r[f])}return n},va.apply(this,arguments)};function Wm(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var cGe=function(e){var t=e.showTimeSelectOnly,n=t===void 0?!1:t,r=e.showTime,i=r===void 0?!1:r,s=e.className,f=e.children,a=n?"Choose Time":"Choose Date".concat(i?" and Time":"");return tt.createElement("div",{className:s,role:"dialog","aria-label":a,"aria-modal":"true"},f)},fGe=function(e,t){var n=be.useRef(null),r=be.useRef(e);r.current=e;var i=be.useCallback(function(s){var f;n.current&&!n.current.contains(s.target)&&(t&&s.target instanceof HTMLElement&&s.target.classList.contains(t)||(f=r.current)===null||f===void 0||f.call(r,s))},[t]);return be.useEffect(function(){return document.addEventListener("mousedown",i),function(){document.removeEventListener("mousedown",i)}},[i]),n},JR=function(e){var t=e.children,n=e.onClickOutside,r=e.className,i=e.containerRef,s=e.style,f=e.ignoreClass,a=fGe(n,f);return tt.createElement("div",{className:r,style:s,ref:function(p){a.current=p,i&&(i.current=p)}},t)},nr;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(nr||(nr={}));function zde(){var e=typeof window<"u"?window:globalThis;return e}var CO=12,hGe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Ga(e){if(e==null)return new Date;var t=typeof e=="string"?M9e(e):lr(e);return Cy(t)?t:new Date}function pN(e,t,n,r,i){var s,f=null,a=sx(n)||sx(x2()),p=!0;if(Array.isArray(t))return t.forEach(function(S){var E=cN(e,S,new Date,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});r&&(p=Cy(E,i)&&e===Ro(E,S,n)),Cy(E,i)&&p&&(f=E)}),f;if(f=cN(e,t,new Date,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),r)p=Cy(f)&&e===Ro(f,t,n);else if(!Cy(f)){var y=((s=t.match(hGe))!==null&&s!==void 0?s:[]).map(function(S){var E=S[0];if(E==="p"||E==="P"){var I=SI[E];return a?I(S,a.formatLong):E}return S}).join("");e.length>0&&(f=cN(e,y.slice(0,e.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),Cy(f)||(f=new Date(e))}return Cy(f)&&p?f:null}function Cy(e,t){return vI(e)&&!Tx(e,t??new Date("1/1/1800"))}function Ro(e,t,n){if(n==="en")return OK(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?sx(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&x2()&&sx(x2())&&(r=sx(x2())),OK(e,t,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Vh(e,t){var n=t.dateFormat,r=t.locale,i=Array.isArray(n)&&n.length>0?n[0]:n;return e&&Ro(e,i,r)||""}function dGe(e,t,n){if(!e)return"";var r=Vh(e,n),i=t?Vh(t,n):"";return"".concat(r," - ").concat(i)}function pGe(e,t){if(!(e!=null&&e.length))return"";var n=e[0]?Vh(e[0],t):"";if(e.length===1)return n;if(e.length===2&&e[1]){var r=Vh(e[1],t);return"".concat(n,", ").concat(r)}var i=e.length-1;return"".concat(n," (+").concat(i,")")}function mN(e,t){var n=t.hour,r=n===void 0?0:n,i=t.minute,s=i===void 0?0:i,f=t.second,a=f===void 0?0:f;return _D(vD(bD(e,a),s),r)}function mGe(e){return N8(e)}function gGe(e,t){return Ro(e,"ddd",t)}function wD(e){return Sx(e)}function Yv(e,t,n){var r=sx(t||x2());return a_(e,{locale:r,weekStartsOn:n})}function Hy(e){return fde(e)}function i2(e){return YR(e)}function UK(e){return l6(e)}function $K(){return Sx(Ga())}function VK(e){return ude(e)}function yGe(e){return k8e(e)}function _Ge(e){return cde(e)}function Bm(e,t){return e&&t?O9e(e,t):!e&&!t}function fc(e,t){return e&&t?E9e(e,t):!e&&!t}function DI(e,t){return e&&t?A9e(e,t):!e&&!t}function da(e,t){return e&&t?P8e(e,t):!e&&!t}function Wb(e,t){return e&&t?Dqe(e,t):!e&&!t}function a2(e,t,n){var r,i=Sx(t),s=ude(n);try{r=J2(e,{start:i,end:s})}catch{r=!1}return r}function x2(){var e=zde();return e.__localeId__}function sx(e){if(typeof e=="string"){var t=zde();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function vGe(e,t,n){return t(Ro(e,"EEEE",n))}function bGe(e,t){return Ro(e,"EEEEEE",t)}function xGe(e,t){return Ro(e,"EEE",t)}function G8(e,t){return Ro(Yf(Ga(),e),"LLLL",t)}function Nde(e,t){return Ro(Yf(Ga(),e),"LLL",t)}function wGe(e,t){return Ro(yw(Ga(),e),"QQQ",t)}function Yh(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.maxDate,s=n.excludeDates,f=n.excludeDateIntervals,a=n.includeDates,p=n.includeDateIntervals,y=n.filterDate;return MO(e,{minDate:r,maxDate:i})||s&&s.some(function(S){return S instanceof Date?da(e,S):da(e,S.date)})||f&&f.some(function(S){var E=S.start,I=S.end;return J2(e,{start:E,end:I})})||a&&!a.some(function(S){return da(e,S)})||p&&!p.some(function(S){var E=S.start,I=S.end;return J2(e,{start:E,end:I})})||y&&!y(Ga(e))||!1}function Y8(e,t){var n=t===void 0?{}:t,r=n.excludeDates,i=n.excludeDateIntervals;return i&&i.length>0?i.some(function(s){var f=s.start,a=s.end;return J2(e,{start:f,end:a})}):r&&r.some(function(s){var f;return s instanceof Date?da(e,s):da(e,(f=s.date)!==null&&f!==void 0?f:new Date)})||!1}function Fde(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.maxDate,s=n.excludeDates,f=n.includeDates,a=n.filterDate;return MO(e,{minDate:r?fde(r):void 0,maxDate:i?cde(i):void 0})||(s==null?void 0:s.some(function(p){return fc(e,p instanceof Date?p:p.date)}))||f&&!f.some(function(p){return fc(e,p)})||a&&!a(Ga(e))||!1}function IM(e,t,n,r){var i=Fi(e),s=mc(e),f=Fi(t),a=mc(t),p=Fi(r);return i===f&&i===p?s<=n&&n<=a:i<f?p===i&&s<=n||p===f&&a>=n||p<f&&p>i:!1}function SGe(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.maxDate,s=n.excludeDates,f=n.includeDates;return MO(e,{minDate:r,maxDate:i})||s&&s.some(function(a){return fc(a instanceof Date?a:a.date,e)})||f&&!f.some(function(a){return fc(a,e)})||!1}function PM(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.maxDate,s=n.excludeDates,f=n.includeDates,a=n.filterDate;return MO(e,{minDate:r,maxDate:i})||(s==null?void 0:s.some(function(p){return DI(e,p instanceof Date?p:p.date)}))||f&&!f.some(function(p){return DI(e,p)})||a&&!a(Ga(e))||!1}function RM(e,t,n){if(!t||!n||!vI(t)||!vI(n))return!1;var r=Fi(t),i=Fi(n);return r<=e&&i>=e}function SD(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.maxDate,s=n.excludeDates,f=n.includeDates,a=n.filterDate,p=new Date(e,0,1);return MO(p,{minDate:r?YR(r):void 0,maxDate:i?hde(i):void 0})||(s==null?void 0:s.some(function(y){return Bm(p,y instanceof Date?y:y.date)}))||f&&!f.some(function(y){return Bm(p,y)})||a&&!a(Ga(p))||!1}function kM(e,t,n,r){var i=Fi(e),s=ix(e),f=Fi(t),a=ix(t),p=Fi(r);return i===f&&i===p?s<=n&&n<=a:i<f?p===i&&s<=n||p===f&&a>=n||p<f&&p>i:!1}function MO(e,t){var n,r=t===void 0?{}:t,i=r.minDate,s=r.maxDate;return(n=i&&uS(e,i)<0||s&&uS(e,s)>0)!==null&&n!==void 0?n:!1}function qK(e,t){return t.some(function(n){return tg(n)===tg(e)&&ng(n)===ng(e)&&qy(n)===qy(e)})}function HK(e,t){var n=t===void 0?{}:t,r=n.excludeTimes,i=n.includeTimes,s=n.filterTime;return r&&qK(e,r)||i&&!qK(e,i)||s&&!s(e)||!1}function GK(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var i=Ga();i=_D(i,tg(e)),i=vD(i,ng(e)),i=bD(i,qy(e));var s=Ga();s=_D(s,tg(n)),s=vD(s,ng(n)),s=bD(s,qy(n));var f=Ga();f=_D(f,tg(r)),f=vD(f,ng(r)),f=bD(f,qy(r));var a;try{a=!J2(i,{start:s,end:f})}catch{a=!1}return a}function YK(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.includeDates,s=ax(e,1);return r&&bI(r,s)>0||i&&i.every(function(f){return bI(f,s)>0})||!1}function WK(e,t){var n=t===void 0?{}:t,r=n.maxDate,i=n.includeDates,s=Op(e,1);return r&&bI(s,r)>0||i&&i.every(function(f){return bI(s,f)>0})||!1}function TGe(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.includeDates,s=YR(e),f=Sde(s);return r&&xI(r,f)>0||i&&i.every(function(a){return xI(a,f)>0})||!1}function EGe(e,t){var n=t===void 0?{}:t,r=n.maxDate,i=n.includeDates,s=hde(e),f=z8(s,1);return r&&xI(f,r)>0||i&&i.every(function(a){return xI(f,a)>0})||!1}function XK(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.includeDates,s=cS(e,1);return r&&wI(r,s)>0||i&&i.every(function(f){return wI(f,s)>0})||!1}function AGe(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.yearItemNumber,s=i===void 0?CO:i,f=i2(cS(e,s)),a=Uv(f,s).endPeriod,p=r&&Fi(r);return p&&p>a||!1}function ZK(e,t){var n=t===void 0?{}:t,r=n.maxDate,i=n.includeDates,s=$y(e,1);return r&&wI(s,r)>0||i&&i.every(function(f){return wI(s,f)>0})||!1}function OGe(e,t){var n=t===void 0?{}:t,r=n.maxDate,i=n.yearItemNumber,s=i===void 0?CO:i,f=$y(e,s),a=Uv(f,s).startPeriod,p=r&&Fi(r);return p&&p<a||!1}function Bde(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter(function(i){return uS(i,t)>=0});return xK(r)}else return n?xK(n):t}function jde(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter(function(i){return uS(i,t)<=0});return bK(r)}else return n?bK(n):t}function KK(e,t){var n;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var r=new Map,i=0,s=e.length;i<s;i++){var f=e[i];if(Vy(f)){var a=Ro(f,"MM.dd.yyyy"),p=r.get(a)||[];p.includes(t)||(p.push(t),r.set(a,p))}else if(typeof f=="object"){var y=Object.keys(f),S=(n=y[0])!==null&&n!==void 0?n:"",E=f[S];if(typeof S=="string"&&Array.isArray(E))for(var I=0,L=E.length;I<L;I++){var N=E[I];if(N){var a=Ro(N,"MM.dd.yyyy"),p=r.get(a)||[];p.includes(S)||(p.push(S),r.set(a,p))}}}}return r}function CGe(e,t){return e.length!==t.length?!1:e.every(function(n,r){return n===t[r]})}function MGe(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach(function(r){var i=r.date,s=r.holidayName;if(Vy(i)){var f=Ro(i,"MM.dd.yyyy"),a=n.get(f)||{className:"",holidayNames:[]};if(!("className"in a&&a.className===t&&CGe(a.holidayNames,[s]))){a.className=t;var p=a.holidayNames;a.holidayNames=p?Wm(Wm([],p,!0),[s],!1):[s],n.set(f,a)}}}),n}function DGe(e,t,n,r,i){for(var s=i.length,f=[],a=0;a<s;a++){var p=e,y=i[a];y&&(p=C8e(p,tg(y)),p=s6(p,ng(y)),p=I8e(p,qy(y)));var S=s6(e,(n+1)*r);i0(p,t)&&Tx(p,S)&&y!=null&&f.push(y)}return f}function QK(e){return e<10?"0".concat(e):"".concat(e)}function Uv(e,t){t===void 0&&(t=CO);var n=Math.ceil(Fi(e)/t)*t,r=n-(t-1);return{startPeriod:r,endPeriod:n}}function IGe(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}function JK(e){var t=e.getSeconds(),n=e.getMilliseconds();return lr(e.getTime()-t*1e3-n)}function PGe(e,t){return JK(e).getTime()===JK(t).getTime()}function eQ(e){if(!Vy(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function tQ(e,t){if(!Vy(e)||!Vy(t))throw new Error("Invalid date received");var n=eQ(e),r=eQ(t);return Tx(n,r)}function Ude(e){return e.key===nr.Space}var RGe=(function(e){Fl(t,e);function t(n){var r=e.call(this,n)||this;return r.inputRef=tt.createRef(),r.onTimeChange=function(i){var s,f;r.setState({time:i});var a=r.props.date,p=a instanceof Date&&!isNaN(+a),y=p?a:new Date;if(i!=null&&i.includes(":")){var S=i.split(":"),E=S[0],I=S[1];y.setHours(Number(E)),y.setMinutes(Number(I))}(f=(s=r.props).onChange)===null||f===void 0||f.call(s,y)},r.renderTimeInput=function(){var i=r.state.time,s=r.props,f=s.date,a=s.timeString,p=s.customTimeInput;return p?be.cloneElement(p,{date:f,value:i,onChange:r.onTimeChange}):tt.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var y;(y=r.inputRef.current)===null||y===void 0||y.focus()},required:!0,value:i,onChange:function(y){r.onTimeChange(y.target.value||a)}})},r.state={time:r.props.timeString},r}return t.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},t.prototype.render=function(){return tt.createElement("div",{className:"react-datepicker__input-time-container"},tt.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),tt.createElement("div",{className:"react-datepicker-time__input-container"},tt.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t})(be.Component),kGe=(function(e){Fl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.dayEl=be.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var i,s,f=r.key;f===nr.Space&&(r.preventDefault(),r.key=nr.Enter),(s=(i=n.props).handleOnKeyDown)===null||s===void 0||s.call(i,r)},n.isSameDay=function(r){return da(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var i=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(f){return n.isSameDayOrWeek(f)}):n.isSameDayOrWeek(n.props.selected),s=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!i&&n.isSameDayOrWeek(n.props.preSelection)&&!s},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),Yh(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(){return Y8(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return da(n.props.day,Yv(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&da(r,Yv(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,i=r.day,s=r.highlightDates;if(!s)return!1;var f=Ro(i,"MM.dd.yyyy");return s.get(f)},n.getHolidaysClass=function(){var r,i=n.props,s=i.day,f=i.holidays;if(!f)return[void 0];var a=Ro(s,"MM.dd.yyyy");return f.has(a)?[(r=f.get(a))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,i=r.day,s=r.startDate,f=r.endDate;return!s||!f?!1:a2(i,s,f)},n.isInSelectingRange=function(){var r,i=n.props,s=i.day,f=i.selectsStart,a=i.selectsEnd,p=i.selectsRange,y=i.selectsDisabledDaysInRange,S=i.startDate,E=i.endDate,I=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(f||a||p)||!I||!y&&n.isDisabled()?!1:f&&E&&(Tx(I,E)||Wb(I,E))?a2(s,I,E):a&&S&&(i0(I,S)||Wb(I,S))||p&&S&&!E&&(i0(I,S)||Wb(I,S))?a2(s,S,I):!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var i=n.props,s=i.day,f=i.startDate,a=i.selectsStart,p=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return a?da(s,p):da(s,f)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var i=n.props,s=i.day,f=i.endDate,a=i.selectsEnd,p=i.selectsRange,y=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return a||p?da(s,y):da(s,f)},n.isRangeStart=function(){var r=n.props,i=r.day,s=r.startDate,f=r.endDate;return!s||!f?!1:da(s,i)},n.isRangeEnd=function(){var r=n.props,i=r.day,s=r.startDate,f=r.endDate;return!s||!f?!1:da(f,i)},n.isWeekend=function(){var r=Aqe(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===mc(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(mc(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(Ga())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(i){return n.isSameDayOrWeek(i)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var i=n.props.dayClassName?n.props.dayClassName(r):void 0;return ri("react-datepicker__day",i,"react-datepicker__day--"+gGe(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,i=r.day,s=r.ariaLabelPrefixWhenEnabled,f=s===void 0?"Choose":s,a=r.ariaLabelPrefixWhenDisabled,p=a===void 0?"Not available":a,y=n.isDisabled()||n.isExcluded()?p:f;return"".concat(y," ").concat(Ro(i,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,i=r.day,s=r.holidays,f=s===void 0?new Map:s,a=r.excludeDates,p=Ro(i,"MM.dd.yyyy"),y=[];return f.has(p)&&y.push.apply(y,f.get(p).holidayNames),n.isExcluded()&&y.push(a==null?void 0:a.filter(function(S){return S instanceof Date?da(S,i):da(S==null?void 0:S.date,i)}).map(function(S){if(!(S instanceof Date))return S==null?void 0:S.message})),y.join(", ")},n.getTabIndex=function(){var r=n.props.selected,i=n.props.preSelection,s=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&da(i,r))?0:-1;return s},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(CK(n.props.day),n.props.day):CK(n.props.day)},n.render=function(){return tt.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&tt.createElement("span",{className:"overlay"},n.getTitle()))},n}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},t.prototype.isDayActiveElement=function(){var n,r,i;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((i=document.activeElement)===null||i===void 0?void 0:i.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t})(be.Component),LGe=(function(e){Fl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.weekNumberEl=be.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var i,s,f=r.key;f===nr.Space&&(r.preventDefault(),r.key=nr.Enter),(s=(i=n.props).handleOnKeyDown)===null||s===void 0||s.call(i,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!da(n.props.date,n.props.selected)&&da(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||da(n.props.date,n.props.selected)&&da(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var i=!1;n.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&da(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(i=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(i=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(i=!0)),i&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},t.prototype.render=function(){var n=this.props,r=n.weekNumber,i=n.isWeekDisabled,s=n.ariaLabelPrefix,f=s===void 0?t.defaultProps.ariaLabelPrefix:s,a=n.onClick,p={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!a&&!i,"react-datepicker__week-number--selected":!!a&&da(this.props.date,this.props.selected)};return tt.createElement("div",{ref:this.weekNumberEl,className:ri(p),"aria-label":"".concat(f," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},t})(be.Component),zGe=(function(e){Fl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isDisabled=function(r){return Yh(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,i){n.props.onDayClick&&n.props.onDayClick(r,i)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,i,s){for(var f,a,p,y=new Date(r),S=0;S<7;S++){var E=new Date(r);E.setDate(E.getDate()+S);var I=!n.isDisabled(E);if(I){y=E;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(y,i,s),n.props.showWeekPicker&&n.handleDayClick(y,s),((f=n.props.shouldCloseOnSelect)!==null&&f!==void 0?f:t.defaultProps.shouldCloseOnSelect)&&((p=(a=n.props).setOpen)===null||p===void 0||p.call(a,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):mGe(r)},n.isWeekDisabled=function(){for(var r=n.startOfWeek(),i=bp(r,6),s=new Date(r);s<=i;){if(!n.isDisabled(s))return!1;s=bp(s,1)}return!0},n.renderDays=function(){var r=n.startOfWeek(),i=[],s=n.formatWeekNumber(r);if(n.props.showWeekNumber){var f=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,s):void 0;i.push(tt.createElement(LGe,va({key:"W"},t.defaultProps,n.props,{weekNumber:s,isWeekDisabled:n.isWeekDisabled(),date:r,onClick:f})))}return i.concat([0,1,2,3,4,5,6].map(function(a){var p=bp(r,a);return tt.createElement(kGe,va({},t.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:p.valueOf(),day:p,onClick:n.handleDayClick.bind(n,p),onMouseEnter:n.handleDayMouseEnter.bind(n,p)}))}))},n.startOfWeek=function(){return Yv(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!da(n.startOfWeek(),n.props.selected)&&da(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":da(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return tt.createElement("div",{className:ri(n)},this.renderDays())},t})(be.Component),BE,NGe=6,kw={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},gN=(BE={},BE[kw.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},BE[kw.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},BE[kw.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},BE),LM=1;function nQ(e,t){return e?kw.FOUR_COLUMNS:t?kw.TWO_COLUMNS:kw.THREE_COLUMNS}var FGe=(function(e){Fl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.MONTH_REFS=Wm([],Array(12),!0).map(function(){return be.createRef()}),n.QUARTER_REFS=Wm([],Array(4),!0).map(function(){return be.createRef()}),n.isDisabled=function(r){return Yh(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return Y8(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,i){var s,f;(f=(s=n.props).onDayClick)===null||f===void 0||f.call(s,r,i,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var i,s;(s=(i=n.props).onDayMouseEnter)===null||s===void 0||s.call(i,r)},n.handleMouseLeave=function(){var r,i;(i=(r=n.props).onMouseLeave)===null||i===void 0||i.call(r)},n.isRangeStartMonth=function(r){var i=n.props,s=i.day,f=i.startDate,a=i.endDate;return!f||!a?!1:fc(Yf(s,r),f)},n.isRangeStartQuarter=function(r){var i=n.props,s=i.day,f=i.startDate,a=i.endDate;return!f||!a?!1:DI(yw(s,r),f)},n.isRangeEndMonth=function(r){var i=n.props,s=i.day,f=i.startDate,a=i.endDate;return!f||!a?!1:fc(Yf(s,r),a)},n.isRangeEndQuarter=function(r){var i=n.props,s=i.day,f=i.startDate,a=i.endDate;return!f||!a?!1:DI(yw(s,r),a)},n.isInSelectingRangeMonth=function(r){var i,s=n.props,f=s.day,a=s.selectsStart,p=s.selectsEnd,y=s.selectsRange,S=s.startDate,E=s.endDate,I=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return!(a||p||y)||!I?!1:a&&E?IM(I,E,r,f):p&&S||y&&S&&!E?IM(S,I,r,f):!1},n.isSelectingMonthRangeStart=function(r){var i;if(!n.isInSelectingRangeMonth(r))return!1;var s=n.props,f=s.day,a=s.startDate,p=s.selectsStart,y=Yf(f,r),S=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return p?fc(y,S):fc(y,a)},n.isSelectingMonthRangeEnd=function(r){var i;if(!n.isInSelectingRangeMonth(r))return!1;var s=n.props,f=s.day,a=s.endDate,p=s.selectsEnd,y=s.selectsRange,S=Yf(f,r),E=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return p||y?fc(S,E):fc(S,a)},n.isInSelectingRangeQuarter=function(r){var i,s=n.props,f=s.day,a=s.selectsStart,p=s.selectsEnd,y=s.selectsRange,S=s.startDate,E=s.endDate,I=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return!(a||p||y)||!I?!1:a&&E?kM(I,E,r,f):p&&S||y&&S&&!E?kM(S,I,r,f):!1},n.isWeekInMonth=function(r){var i=n.props.day,s=bp(r,6);return fc(r,i)||fc(s,i)},n.isCurrentMonth=function(r,i){return Fi(r)===Fi(Ga())&&i===mc(Ga())},n.isCurrentQuarter=function(r,i){return Fi(r)===Fi(Ga())&&i===ix(Ga())},n.isSelectedMonth=function(r,i,s){return mc(s)===i&&Fi(r)===Fi(s)},n.isSelectMonthInList=function(r,i,s){return s.some(function(f){return n.isSelectedMonth(r,i,f)})},n.isSelectedQuarter=function(r,i,s){return ix(r)===i&&Fi(r)===Fi(s)},n.renderWeeks=function(){for(var r=[],i=n.props.fixedHeight,s=0,f=!1,a=Yv(Hy(n.props.day),n.props.locale,n.props.calendarStartDay),p=function(N){return n.props.showWeekPicker?Yv(N,n.props.locale,n.props.calendarStartDay):n.props.preSelection},y=function(N){return n.props.showWeekPicker?Yv(N,n.props.locale,n.props.calendarStartDay):n.props.selected},S=n.props.selected?y(n.props.selected):void 0,E=n.props.preSelection?p(n.props.preSelection):void 0;r.push(tt.createElement(zGe,va({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:s,day:a,month:mc(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:S,preSelection:E,showWeekNumber:n.props.showWeekNumbers}))),!f;){s++,a=_I(a,1);var I=i&&s>=NGe,L=!i&&!n.isWeekInMonth(a);if(I||L)if(n.props.peekNextMonth)f=!0;else break}return r},n.onMonthClick=function(r,i){var s=n.isMonthDisabledForLabelDate(i),f=s.isDisabled,a=s.labelDate;f||n.handleDayClick(Hy(a),r)},n.onMonthMouseEnter=function(r){var i=n.isMonthDisabledForLabelDate(r),s=i.isDisabled,f=i.labelDate;s||n.handleDayMouseEnter(Hy(f))},n.handleMonthNavigation=function(r,i){var s,f,a,p;(f=(s=n.props).setPreSelection)===null||f===void 0||f.call(s,i),(p=(a=n.MONTH_REFS[r])===null||a===void 0?void 0:a.current)===null||p===void 0||p.focus()},n.handleKeyboardNavigation=function(r,i,s){var f,a=n.props,p=a.selected,y=a.preSelection,S=a.setPreSelection,E=a.minDate,I=a.maxDate,L=a.showFourColumnMonthYearPicker,N=a.showTwoColumnMonthYearPicker;if(y){var j=nQ(L,N),k=n.getVerticalOffset(j),V=(f=gN[j])===null||f===void 0?void 0:f.grid,K=function(te,X,ae){var le,ge,ye=X,De=ae;switch(te){case nr.ArrowRight:ye=Op(X,LM),De=ae===11?0:ae+LM;break;case nr.ArrowLeft:ye=ax(X,LM),De=ae===0?11:ae-LM;break;case nr.ArrowUp:ye=ax(X,k),De=!((le=V==null?void 0:V[0])===null||le===void 0)&&le.includes(ae)?ae+12-k:ae-k;break;case nr.ArrowDown:ye=Op(X,k),De=!((ge=V==null?void 0:V[V.length-1])===null||ge===void 0)&&ge.includes(ae)?ae-12+k:ae+k;break}return{newCalculatedDate:ye,newCalculatedMonth:De}},J=function(te,X,ae){for(var le=40,ge=te,ye=!1,De=0,He=K(ge,X,ae),Be=He.newCalculatedDate,Ee=He.newCalculatedMonth;!ye;){if(De>=le){Be=X,Ee=ae;break}if(E&&Be<E){ge=nr.ArrowRight;var Fe=K(ge,Be,Ee);Be=Fe.newCalculatedDate,Ee=Fe.newCalculatedMonth}if(I&&Be>I){ge=nr.ArrowLeft;var Fe=K(ge,Be,Ee);Be=Fe.newCalculatedDate,Ee=Fe.newCalculatedMonth}if(SGe(Be,n.props)){var Fe=K(ge,Be,Ee);Be=Fe.newCalculatedDate,Ee=Fe.newCalculatedMonth}else ye=!0;De++}return{newCalculatedDate:Be,newCalculatedMonth:Ee}};if(i===nr.Enter){n.isMonthDisabled(s)||(n.onMonthClick(r,s),S==null||S(p));return}var ie=J(i,y,s),Q=ie.newCalculatedDate,W=ie.newCalculatedMonth;switch(i){case nr.ArrowRight:case nr.ArrowLeft:case nr.ArrowUp:case nr.ArrowDown:n.handleMonthNavigation(W,Q);break}}},n.getVerticalOffset=function(r){var i,s;return(s=(i=gN[r])===null||i===void 0?void 0:i.verticalNavigationOffset)!==null&&s!==void 0?s:0},n.onMonthKeyDown=function(r,i){var s=n.props,f=s.disabledKeyboardNavigation,a=s.handleOnMonthKeyDown,p=r.key;p!==nr.Tab&&r.preventDefault(),f||n.handleKeyboardNavigation(r,p,i),a&&a(r)},n.onQuarterClick=function(r,i){var s=yw(n.props.day,i);PM(s,n.props)||n.handleDayClick(UK(s),r)},n.onQuarterMouseEnter=function(r){var i=yw(n.props.day,r);PM(i,n.props)||n.handleDayMouseEnter(UK(i))},n.handleQuarterNavigation=function(r,i){var s,f,a,p;n.isDisabled(i)||n.isExcluded(i)||((f=(s=n.props).setPreSelection)===null||f===void 0||f.call(s,i),(p=(a=n.QUARTER_REFS[r-1])===null||a===void 0?void 0:a.current)===null||p===void 0||p.focus())},n.onQuarterKeyDown=function(r,i){var s,f,a=r.key;if(!n.props.disabledKeyboardNavigation)switch(a){case nr.Enter:n.onQuarterClick(r,i),(f=(s=n.props).setPreSelection)===null||f===void 0||f.call(s,n.props.selected);break;case nr.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(i===4?1:i+1,z8(n.props.preSelection,1));break;case nr.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(i===1?4:i-1,Sde(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(r){var i,s=n.props,f=s.day,a=s.minDate,p=s.maxDate,y=s.excludeDates,S=s.includeDates,E=Yf(f,r);return{isDisabled:(i=(a||p||y||S)&&Fde(E,n.props))!==null&&i!==void 0?i:!1,labelDate:E}},n.isMonthDisabled=function(r){var i=n.isMonthDisabledForLabelDate(r).isDisabled;return i},n.getMonthClassNames=function(r){var i=n.props,s=i.day,f=i.startDate,a=i.endDate,p=i.preSelection,y=i.monthClassName,S=y?y(Yf(s,r)):void 0,E=n.getSelection();return ri("react-datepicker__month-text","react-datepicker__month-".concat(r),S,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":E?n.isSelectMonthInList(s,r,E):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&p&&n.isSelectedMonth(s,r,p)&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":f&&a?IM(f,a,r,s):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(s,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var i=mc(n.props.preSelection),s=n.isMonthDisabledForLabelDate(i).isDisabled,f=r===i&&!(s||n.props.disabledKeyboardNavigation)?"0":"-1";return f},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var i=ix(n.props.preSelection),s=PM(n.props.day,n.props),f=r===i&&!(s||n.props.disabledKeyboardNavigation)?"0":"-1";return f},n.getAriaLabel=function(r){var i=n.props,s=i.chooseDayAriaLabelPrefix,f=s===void 0?"Choose":s,a=i.disabledDayAriaLabelPrefix,p=a===void 0?"Not available":a,y=i.day,S=i.locale,E=Yf(y,r),I=n.isDisabled(E)||n.isExcluded(E)?p:f;return"".concat(I," ").concat(Ro(E,"MMMM yyyy",S))},n.getQuarterClassNames=function(r){var i=n.props,s=i.day,f=i.startDate,a=i.endDate,p=i.selected,y=i.minDate,S=i.maxDate,E=i.excludeDates,I=i.includeDates,L=i.filterDate,N=i.preSelection,j=i.disabledKeyboardNavigation,k=(y||S||E||I||L)&&PM(yw(s,r),n.props);return ri("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":k,"react-datepicker__quarter-text--selected":p?n.isSelectedQuarter(s,r,p):void 0,"react-datepicker__quarter-text--keyboard-selected":!j&&N&&n.isSelectedQuarter(s,r,N)&&!k,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":f&&a?kM(f,a,r,s):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r)})},n.getMonthContent=function(r){var i=n.props,s=i.showFullMonthYearPicker,f=i.renderMonthContent,a=i.locale,p=i.day,y=Nde(r,a),S=G8(r,a);return f?f(r,y,S,p):s?S:y},n.getQuarterContent=function(r){var i,s=n.props,f=s.renderQuarterContent,a=s.locale,p=wGe(r,a);return(i=f==null?void 0:f(r,p))!==null&&i!==void 0?i:p},n.renderMonths=function(){var r,i=n.props,s=i.showTwoColumnMonthYearPicker,f=i.showFourColumnMonthYearPicker,a=i.day,p=i.selected,y=(r=gN[nQ(f,s)])===null||r===void 0?void 0:r.grid;return y==null?void 0:y.map(function(S,E){return tt.createElement("div",{className:"react-datepicker__month-wrapper",key:E},S.map(function(I,L){return tt.createElement("div",{ref:n.MONTH_REFS[I],key:L,onClick:function(N){n.onMonthClick(N,I)},onKeyDown:function(N){Ude(N)&&(N.preventDefault(),N.key=nr.Enter),n.onMonthKeyDown(N,I)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(I)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(I)}:void 0,tabIndex:Number(n.getTabIndex(I)),className:n.getMonthClassNames(I),"aria-disabled":n.isMonthDisabled(I),role:"option","aria-label":n.getAriaLabel(I),"aria-current":n.isCurrentMonth(a,I)?"date":void 0,"aria-selected":p?n.isSelectedMonth(a,I,p):void 0},n.getMonthContent(I))}))})},n.renderQuarters=function(){var r=n.props,i=r.day,s=r.selected,f=[1,2,3,4];return tt.createElement("div",{className:"react-datepicker__quarter-wrapper"},f.map(function(a,p){return tt.createElement("div",{key:p,ref:n.QUARTER_REFS[p],role:"option",onClick:function(y){n.onQuarterClick(y,a)},onKeyDown:function(y){n.onQuarterKeyDown(y,a)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(a)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(a)}:void 0,className:n.getQuarterClassNames(a),"aria-selected":s?n.isSelectedQuarter(i,a,s):void 0,tabIndex:Number(n.getQuarterTabIndex(a)),"aria-current":n.isCurrentQuarter(i,a)?"date":void 0},n.getQuarterContent(a))}))},n.getClassNames=function(){var r=n.props,i=r.selectingDate,s=r.selectsStart,f=r.selectsEnd,a=r.showMonthYearPicker,p=r.showQuarterYearPicker,y=r.showWeekPicker;return ri("react-datepicker__month",{"react-datepicker__month--selecting-range":i&&(s||f)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":p},{"react-datepicker__weekPicker":y})},n}return t.prototype.getSelection=function(){var n=this.props,r=n.selected,i=n.selectedDates,s=n.selectsMultiple;if(s)return i;if(r)return[r]},t.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,i=n.showQuarterYearPicker,s=n.day,f=n.ariaLabelPrefix,a=f===void 0?"Month ":f,p=a?a.trim()+" ":"";return tt.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(p).concat(Ro(s,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():i?this.renderQuarters():this.renderWeeks())},t})(be.Component),BGe=(function(e){Fl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isSelectedMonth=function(r){return n.props.month===r},n.renderOptions=function(){return n.props.monthNames.map(function(r,i){return tt.createElement("div",{className:n.isSelectedMonth(i)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,i),"aria-selected":n.isSelectedMonth(i)?"true":void 0},n.isSelectedMonth(i)?tt.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return t.prototype.render=function(){return tt.createElement(JR,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t})(be.Component),jGe=(function(e){Fl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(i,s){return tt.createElement("option",{key:i,value:s},i)})},n.renderSelectMode=function(r){return tt.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(i){return n.onChange(parseInt(i.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,i){return tt.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},tt.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),tt.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},i[n.props.month]))},n.renderDropdown=function(r){return tt.createElement(BGe,va({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var i=n.state.dropdownVisible,s=[n.renderReadView(!i,r)];return i&&s.unshift(n.renderDropdown(r)),s},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(s){return Nde(s,n.props.locale)}:function(s){return G8(s,n.props.locale)}),i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode(r);break;case"select":i=this.renderSelectMode(r);break}return tt.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},i)},t})(be.Component);function UGe(e,t){for(var n=[],r=Hy(e),i=Hy(t);!i0(r,i);)n.push(Ga(r)),r=Op(r,1);return n}var $Ge=(function(e){Fl(t,e);function t(n){var r=e.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(i){var s=c6(i),f=Bm(r.props.date,i)&&fc(r.props.date,i);return tt.createElement("div",{className:f?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:s,onClick:r.onChange.bind(r,s),"aria-selected":f?"true":void 0},f?tt.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",Ro(i,r.props.dateFormat,r.props.locale))})},r.onChange=function(i){return r.props.onChange(i)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:UGe(r.props.minDate,r.props.maxDate)},r}return t.prototype.render=function(){var n=ri({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return tt.createElement(JR,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},t})(be.Component),VGe=(function(e){Fl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=Hy(n.props.minDate),i=Hy(n.props.maxDate),s=[];!i0(r,i);){var f=c6(r);s.push(tt.createElement("option",{key:f,value:f},Ro(r,n.props.dateFormat,n.props.locale))),r=Op(r,1)}return s},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return tt.createElement("select",{value:c6(Hy(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var i=Ro(n.props.date,n.props.dateFormat,n.props.locale);return tt.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},tt.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),tt.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},i))},n.renderDropdown=function(){return tt.createElement($Ge,va({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,i=[n.renderReadView(!r)];return r&&i.unshift(n.renderDropdown()),i},n.onChange=function(r){n.toggleDropdown();var i=Ga(r);Bm(n.props.date,i)&&fc(n.props.date,i)||n.props.onChange(i)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return tt.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},t})(be.Component),qGe=(function(e){Fl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,i,s;n.list&&(n.list.scrollTop=(s=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((i=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&i!==void 0?i:0):n.list.clientHeight,n.centerLi))!==null&&s!==void 0?s:0)})},n.handleClick=function(r){var i,s;(n.props.minTime||n.props.maxTime)&&GK(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&HK(r,n.props)||(s=(i=n.props).onChange)===null||s===void 0||s.call(i,r)},n.isSelectedTime=function(r){return n.props.selected&&PGe(n.props.selected,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&GK(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&HK(r,n.props)},n.liClasses=function(r){var i,s=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&s.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&s.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(tg(r)*3600+ng(r)*60+qy(r))%(((i=n.props.intervals)!==null&&i!==void 0?i:t.defaultProps.intervals)*60)!==0&&s.push("react-datepicker__time-list-item--injected"),s.join(" ")},n.handleOnKeyDown=function(r,i){var s,f;r.key===nr.Space&&(r.preventDefault(),r.key=nr.Enter),(r.key===nr.ArrowUp||r.key===nr.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===nr.ArrowDown||r.key===nr.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===nr.Enter&&n.handleClick(i),(f=(s=n.props).handleOnKeyDown)===null||f===void 0||f.call(s,r)},n.renderTimes=function(){for(var r,i=[],s=typeof n.props.format=="string"?n.props.format:"p",f=(r=n.props.intervals)!==null&&r!==void 0?r:t.defaultProps.intervals,a=n.props.selected||n.props.openToDate||Ga(),p=wD(a),y=n.props.injectTimes&&n.props.injectTimes.sort(function(k,V){return k.getTime()-V.getTime()}),S=60*IGe(a),E=S/f,I=0;I<E;I++){var L=s6(p,I*f);if(i.push(L),y){var N=DGe(p,L,I,f,y);i=i.concat(N)}}var j=i.reduce(function(k,V){return V.getTime()<=a.getTime()?V:k},i[0]);return i.map(function(k){return tt.createElement("li",{key:k.valueOf(),onClick:n.handleClick.bind(n,k),className:n.liClasses(k),ref:function(V){k===j&&(n.centerLi=V)},onKeyDown:function(V){n.handleOnKeyDown(V,k)},tabIndex:k===j?0:-1,role:"option","aria-selected":n.isSelectedTime(k)?"true":void 0,"aria-disabled":n.isDisabledTime(k)?"true":void 0},Ro(k,s,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?tt.createElement(tt.Fragment,null):tt.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){n.header=r}},tt.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var n=this,r,i=this.state.height;return tt.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),tt.createElement("div",{className:"react-datepicker__time"},tt.createElement("div",{className:"react-datepicker__time-box"},tt.createElement("ul",{className:"react-datepicker__time-list",ref:function(s){n.list=s},style:i?{height:i}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},t})(be.Component),rQ=3,HGe=(function(e){Fl(t,e);function t(n){var r=e.call(this,n)||this;return r.YEAR_REFS=Wm([],Array(r.props.yearItemNumber),!0).map(function(){return be.createRef()}),r.isDisabled=function(i){return Yh(i,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(i){return Y8(i,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var i;return(i=r.props.selectingDate)!==null&&i!==void 0?i:r.props.preSelection},r.updateFocusOnPaginate=function(i){var s=function(){var f,a;(a=(f=r.YEAR_REFS[i])===null||f===void 0?void 0:f.current)===null||a===void 0||a.focus()};window.requestAnimationFrame(s)},r.handleYearClick=function(i,s){r.props.onDayClick&&r.props.onDayClick(i,s)},r.handleYearNavigation=function(i,s){var f,a,p,y,S=r.props,E=S.date,I=S.yearItemNumber;if(!(E===void 0||I===void 0)){var L=Uv(E,I).startPeriod;r.isDisabled(s)||r.isExcluded(s)||((a=(f=r.props).setPreSelection)===null||a===void 0||a.call(f,s),i-L<0?r.updateFocusOnPaginate(I-(L-i)):i-L>=I?r.updateFocusOnPaginate(Math.abs(I-(i-L))):(y=(p=r.YEAR_REFS[i-L])===null||p===void 0?void 0:p.current)===null||y===void 0||y.focus())}},r.isSameDay=function(i,s){return da(i,s)},r.isCurrentYear=function(i){return i===Fi(Ga())},r.isRangeStart=function(i){return r.props.startDate&&r.props.endDate&&Bm(zm(Ga(),i),r.props.startDate)},r.isRangeEnd=function(i){return r.props.startDate&&r.props.endDate&&Bm(zm(Ga(),i),r.props.endDate)},r.isInRange=function(i){return RM(i,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(i){var s=r.props,f=s.selectsStart,a=s.selectsEnd,p=s.selectsRange,y=s.startDate,S=s.endDate;return!(f||a||p)||!r.selectingDate()?!1:f&&S?RM(i,r.selectingDate(),S):a&&y||p&&y&&!S?RM(i,y,r.selectingDate()):!1},r.isSelectingRangeStart=function(i){var s;if(!r.isInSelectingRange(i))return!1;var f=r.props,a=f.startDate,p=f.selectsStart,y=zm(Ga(),i);return p?Bm(y,(s=r.selectingDate())!==null&&s!==void 0?s:null):Bm(y,a??null)},r.isSelectingRangeEnd=function(i){var s;if(!r.isInSelectingRange(i))return!1;var f=r.props,a=f.endDate,p=f.selectsEnd,y=f.selectsRange,S=zm(Ga(),i);return p||y?Bm(S,(s=r.selectingDate())!==null&&s!==void 0?s:null):Bm(S,a??null)},r.isKeyboardSelected=function(i){if(!(r.props.date===void 0||r.props.selected==null||r.props.preSelection==null)){var s=r.props,f=s.minDate,a=s.maxDate,p=s.excludeDates,y=s.includeDates,S=s.filterDate,E=i2(zm(r.props.date,i)),I=(f||a||p||y||S)&&SD(i,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!da(E,i2(r.props.selected))&&da(E,i2(r.props.preSelection))&&!I}},r.onYearClick=function(i,s){var f=r.props.date;f!==void 0&&r.handleYearClick(i2(zm(f,s)),i)},r.onYearKeyDown=function(i,s){var f,a,p=i.key,y=r.props,S=y.date,E=y.yearItemNumber,I=y.handleOnKeyDown;if(p!==nr.Tab&&i.preventDefault(),!r.props.disabledKeyboardNavigation)switch(p){case nr.Enter:if(r.props.selected==null)break;r.onYearClick(i,s),(a=(f=r.props).setPreSelection)===null||a===void 0||a.call(f,r.props.selected);break;case nr.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(s+1,$y(r.props.preSelection,1));break;case nr.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(s-1,cS(r.props.preSelection,1));break;case nr.ArrowUp:{if(S===void 0||E===void 0||r.props.preSelection==null)break;var L=Uv(S,E).startPeriod,N=rQ,j=s-N;if(j<L){var k=E%N;s>=L&&s<L+k?N=k:N+=k,j=s-N}r.handleYearNavigation(j,cS(r.props.preSelection,N));break}case nr.ArrowDown:{if(S===void 0||E===void 0||r.props.preSelection==null)break;var V=Uv(S,E).endPeriod,N=rQ,j=s+N;if(j>V){var k=E%N;s<=V&&s>V-k?N=k:N+=k,j=s+N}r.handleYearNavigation(j,$y(r.props.preSelection,N));break}}I&&I(i)},r.getYearClassNames=function(i){var s=r.props,f=s.date,a=s.minDate,p=s.maxDate,y=s.selected,S=s.excludeDates,E=s.includeDates,I=s.filterDate,L=s.yearClassName;return ri("react-datepicker__year-text","react-datepicker__year-".concat(i),f?L==null?void 0:L(zm(f,i)):void 0,{"react-datepicker__year-text--selected":y?i===Fi(y):void 0,"react-datepicker__year-text--disabled":(a||p||S||E||I)&&SD(i,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(i),"react-datepicker__year-text--range-start":r.isRangeStart(i),"react-datepicker__year-text--range-end":r.isRangeEnd(i),"react-datepicker__year-text--in-range":r.isInRange(i),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(i),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(i),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(i),"react-datepicker__year-text--today":r.isCurrentYear(i)})},r.getYearTabIndex=function(i){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var s=Fi(r.props.preSelection),f=SD(i,r.props);return i===s&&!f?"0":"-1"},r.getYearContent=function(i){return r.props.renderYearContent?r.props.renderYearContent(i):i},r}return t.prototype.render=function(){var n=this,r=[],i=this.props,s=i.date,f=i.yearItemNumber,a=i.onYearMouseEnter,p=i.onYearMouseLeave;if(s===void 0)return null;for(var y=Uv(s,f),S=y.startPeriod,E=y.endPeriod,I=function(j){r.push(tt.createElement("div",{ref:L.YEAR_REFS[j-S],onClick:function(k){n.onYearClick(k,j)},onKeyDown:function(k){Ude(k)&&(k.preventDefault(),k.key=nr.Enter),n.onYearKeyDown(k,j)},tabIndex:Number(L.getYearTabIndex(j)),className:L.getYearClassNames(j),onMouseEnter:L.props.usePointerEvent?void 0:function(k){return a(k,j)},onPointerEnter:L.props.usePointerEvent?function(k){return a(k,j)}:void 0,onMouseLeave:L.props.usePointerEvent?void 0:function(k){return p(k,j)},onPointerLeave:L.props.usePointerEvent?function(k){return p(k,j)}:void 0,key:j,"aria-current":L.isCurrentYear(j)?"date":void 0},L.getYearContent(j)))},L=this,N=S;N<=E;N++)I(N);return tt.createElement("div",{className:"react-datepicker__year"},tt.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},t})(be.Component);function GGe(e,t,n,r){for(var i=[],s=0;s<2*t+1;s++){var f=e+t-s,a=!0;n&&(a=Fi(n)<=f),r&&a&&(a=Fi(r)>=f),a&&i.push(f)}return i}var YGe=(function(e){Fl(t,e);function t(n){var r=e.call(this,n)||this;r.renderOptions=function(){var a=r.props.year,p=r.state.yearsList.map(function(E){return tt.createElement("div",{className:a===E?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:E,onClick:r.onChange.bind(r,E),"aria-selected":a===E?"true":void 0},a===E?tt.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",E)}),y=r.props.minDate?Fi(r.props.minDate):null,S=r.props.maxDate?Fi(r.props.maxDate):null;return(!S||!r.state.yearsList.find(function(E){return E===S}))&&p.unshift(tt.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},tt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!y||!r.state.yearsList.find(function(E){return E===y}))&&p.push(tt.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},tt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),p},r.onChange=function(a){r.props.onChange(a)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(a){var p=r.state.yearsList.map(function(y){return y+a});r.setState({yearsList:p})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var i=n.yearDropdownItemNumber,s=n.scrollableYearDropdown,f=i||(s?10:5);return r.state={yearsList:GGe(r.props.year,f,r.props.minDate,r.props.maxDate)},r.dropdownRef=be.createRef(),r}return t.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,i=r?r.find(function(s){return s.ariaSelected}):null;n.scrollTop=i&&i instanceof HTMLElement?i.offsetTop+(i.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},t.prototype.render=function(){var n=ri({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return tt.createElement(JR,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t})(be.Component),WGe=(function(e){Fl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?Fi(n.props.minDate):1900,i=n.props.maxDate?Fi(n.props.maxDate):2100,s=[],f=r;f<=i;f++)s.push(tt.createElement("option",{key:f,value:f},f));return s},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return tt.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return tt.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(i){return n.toggleDropdown(i)}},tt.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),tt.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return tt.createElement(YGe,va({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,i=[n.renderReadView(!r)];return r&&i.unshift(n.renderDropdown()),i},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,i){var s;(s=n.onSelect)===null||s===void 0||s.call(n,r,i),n.setOpen()},n.onSelect=function(r,i){var s,f;(f=(s=n.props).onSelect)===null||f===void 0||f.call(s,r,i)},n.setOpen=function(){var r,i;(i=(r=n.props).setOpen)===null||i===void 0||i.call(r,!0)},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return tt.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},t})(be.Component),XGe=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],ZGe=function(e){var t=(e.className||"").split(/\s+/);return XGe.some(function(n){return t.indexOf(n)>=0})},KGe=(function(e){Fl(t,e);function t(n){var r=e.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(i){r.props.onClickOutside(i)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(i){var s,f;ZGe(i.target)&&((f=(s=r.props).onDropdownFocus)===null||f===void 0||f.call(s,i))},r.getDateInView=function(){var i=r.props,s=i.preSelection,f=i.selected,a=i.openToDate,p=Bde(r.props),y=jde(r.props),S=Ga(),E=a||f||s;return E||(p&&Tx(S,p)?p:y&&i0(S,y)?y:S)},r.increaseMonth=function(){r.setState(function(i){var s=i.date;return{date:Op(s,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(i){var s=i.date;return{date:ax(s,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(i,s,f){r.props.onSelect(i,s,f),r.props.setPreSelection&&r.props.setPreSelection(i)},r.handleDayMouseEnter=function(i){r.setState({selectingDate:i}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(i)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(i,s){r.setState({selectingDate:zm(Ga(),s)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(i,s)},r.handleYearMouseLeave=function(i,s){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(i,s)},r.handleYearChange=function(i){var s,f,a,p;(f=(s=r.props).onYearChange)===null||f===void 0||f.call(s,i),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(i),(p=(a=r.props).setOpen)===null||p===void 0||p.call(a,!0)),r.props.setPreSelection&&r.props.setPreSelection(i)},r.getEnabledPreSelectionDateForMonth=function(i){if(!Yh(i,r.props))return i;for(var s=Hy(i),f=_Ge(i),a=R8e(f,s),p=null,y=0;y<=a;y++){var S=bp(s,y);if(!Yh(S,r.props)){p=S;break}}return p},r.handleMonthChange=function(i){var s,f,a,p=(s=r.getEnabledPreSelectionDateForMonth(i))!==null&&s!==void 0?s:i;r.handleCustomMonthChange(p),r.props.adjustDateOnChange&&(r.props.onSelect(p),(a=(f=r.props).setOpen)===null||a===void 0||a.call(f,!0)),r.props.setPreSelection&&r.props.setPreSelection(p)},r.handleCustomMonthChange=function(i){var s,f;(f=(s=r.props).onMonthChange)===null||f===void 0||f.call(s,i),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(i){r.handleYearChange(i),r.handleMonthChange(i)},r.changeYear=function(i){r.setState(function(s){var f=s.date;return{date:zm(f,Number(i))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(i){r.setState(function(s){var f=s.date;return{date:Yf(f,Number(i))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(i){r.setState(function(s){var f=s.date;return{date:zm(Yf(f,mc(i)),Fi(i))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(i){i===void 0&&(i=r.state.date);var s=Yv(i,r.props.locale,r.props.calendarStartDay),f=[];return r.props.showWeekNumbers&&f.push(tt.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),f.concat([0,1,2,3,4,5,6].map(function(a){var p=bp(s,a),y=r.formatWeekday(p,r.props.locale),S=r.props.weekDayClassName?r.props.weekDayClassName(p):void 0;return tt.createElement("div",{key:a,"aria-label":Ro(p,"EEEE",r.props.locale),className:ri("react-datepicker__day-name",S)},y)}))},r.formatWeekday=function(i,s){return r.props.formatWeekDay?vGe(i,r.props.formatWeekDay,s):r.props.useWeekdaysShort?xGe(i,s):bGe(i,s)},r.decreaseYear=function(){r.setState(function(i){var s,f=i.date;return{date:cS(f,r.props.showYearPicker?(s=r.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var i,s,f;if(!r.props.renderCustomHeader){var a=(i=r.props.monthsShown)!==null&&i!==void 0?i:t.defaultProps.monthsShown,p=r.props.showPreviousMonths?a-1:0,y=(s=r.props.monthSelectedIn)!==null&&s!==void 0?s:p,S=ax(r.state.date,y),E;switch(!0){case r.props.showMonthYearPicker:E=XK(r.state.date,r.props);break;case r.props.showYearPicker:E=AGe(r.state.date,r.props);break;case r.props.showQuarterYearPicker:E=TGe(r.state.date,r.props);break;default:E=YK(S,r.props);break}if(!(!((f=r.props.forceShowMonthNavigation)!==null&&f!==void 0?f:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&E||r.props.showTimeSelectOnly)){var I=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],L=["react-datepicker__navigation","react-datepicker__navigation--previous"],N=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(N=r.decreaseYear),E&&r.props.showDisabledMonthNavigation&&(L.push("react-datepicker__navigation--previous--disabled"),N=void 0);var j=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,k=r.props,V=k.previousMonthButtonLabel,K=V===void 0?t.defaultProps.previousMonthButtonLabel:V,J=k.previousYearButtonLabel,ie=J===void 0?t.defaultProps.previousYearButtonLabel:J,Q=r.props,W=Q.previousMonthAriaLabel,te=W===void 0?typeof K=="string"?K:"Previous Month":W,X=Q.previousYearAriaLabel,ae=X===void 0?typeof ie=="string"?ie:"Previous Year":X;return tt.createElement("button",{type:"button",className:L.join(" "),onClick:N,onKeyDown:r.props.handleOnKeyDown,"aria-label":j?ae:te},tt.createElement("span",{className:I.join(" ")},j?ie:K))}}},r.increaseYear=function(){r.setState(function(i){var s,f=i.date;return{date:$y(f,r.props.showYearPicker?(s=r.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var i;if(!r.props.renderCustomHeader){var s;switch(!0){case r.props.showMonthYearPicker:s=ZK(r.state.date,r.props);break;case r.props.showYearPicker:s=OGe(r.state.date,r.props);break;case r.props.showQuarterYearPicker:s=EGe(r.state.date,r.props);break;default:s=WK(r.state.date,r.props);break}if(!(!((i=r.props.forceShowMonthNavigation)!==null&&i!==void 0?i:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&s||r.props.showTimeSelectOnly)){var f=["react-datepicker__navigation","react-datepicker__navigation--next"],a=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&f.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&f.push("react-datepicker__navigation--next--with-today-button");var p=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(p=r.increaseYear),s&&r.props.showDisabledMonthNavigation&&(f.push("react-datepicker__navigation--next--disabled"),p=void 0);var y=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,S=r.props,E=S.nextMonthButtonLabel,I=E===void 0?t.defaultProps.nextMonthButtonLabel:E,L=S.nextYearButtonLabel,N=L===void 0?t.defaultProps.nextYearButtonLabel:L,j=r.props,k=j.nextMonthAriaLabel,V=k===void 0?typeof I=="string"?I:"Next Month":k,K=j.nextYearAriaLabel,J=K===void 0?typeof N=="string"?N:"Next Year":K;return tt.createElement("button",{type:"button",className:f.join(" "),onClick:p,onKeyDown:r.props.handleOnKeyDown,"aria-label":y?J:V},tt.createElement("span",{className:a.join(" ")},y?N:I))}}},r.renderCurrentMonth=function(i){i===void 0&&(i=r.state.date);var s=["react-datepicker__current-month"];return r.props.showYearDropdown&&s.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&s.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&s.push("react-datepicker__current-month--hasMonthYearDropdown"),tt.createElement("h2",{className:s.join(" ")},Ro(i,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showYearDropdown||i))return tt.createElement(WGe,va({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:Fi(r.state.date)}))},r.renderMonthDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showMonthDropdown||i))return tt.createElement(jGe,va({},t.defaultProps,r.props,{month:mc(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showMonthYearDropdown||i))return tt.createElement(VGe,va({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(i){r.props.onSelect($K(),i),r.props.setPreSelection&&r.props.setPreSelection($K())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return tt.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDefaultHeader=function(i){var s=i.monthDate,f=i.i;return tt.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(s),tt.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(f!==0),r.renderMonthYearDropdown(f!==0),r.renderYearDropdown(f!==0)),tt.createElement("div",{className:"react-datepicker__day-names"},r.header(s)))},r.renderCustomHeader=function(i){var s,f,a=i.monthDate,p=i.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var y=YK(r.state.date,r.props),S=WK(r.state.date,r.props),E=XK(r.state.date,r.props),I=ZK(r.state.date,r.props),L=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return tt.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(f=(s=r.props).renderCustomHeader)===null||f===void 0?void 0:f.call(s,va(va({},r.state),{customHeaderCount:p,monthDate:a,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:y,nextMonthButtonDisabled:S,prevYearButtonDisabled:E,nextYearButtonDisabled:I})),L&&tt.createElement("div",{className:"react-datepicker__day-names"},r.header(a)))},r.renderYearHeader=function(i){var s=i.monthDate,f=r.props,a=f.showYearPicker,p=f.yearItemNumber,y=p===void 0?t.defaultProps.yearItemNumber:p,S=Uv(s,y),E=S.startPeriod,I=S.endPeriod;return tt.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},a?"".concat(E," - ").concat(I):Fi(s))},r.renderHeader=function(i){var s=i.monthDate,f=i.i,a=f===void 0?0:f,p={monthDate:s,i:a};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(p);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(p);default:return r.renderDefaultHeader(p)}},r.renderMonths=function(){var i,s;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var f=[],a=(i=r.props.monthsShown)!==null&&i!==void 0?i:t.defaultProps.monthsShown,p=r.props.showPreviousMonths?a-1:0,y=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?$y(r.state.date,p):ax(r.state.date,p),S=(s=r.props.monthSelectedIn)!==null&&s!==void 0?s:p,E=0;E<a;++E){var I=E-S+p,L=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?$y(y,I):Op(y,I),N="month-".concat(E),j=E<a-1,k=E>0;f.push(tt.createElement("div",{key:N,ref:function(V){r.monthContainer=V??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:L,i:E}),tt.createElement(FGe,va({},t.defaultProps,r.props,{ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:L,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:E,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:j,monthShowsDuplicateDaysStart:k}))))}return f}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return tt.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),tt.createElement(HGe,va({},t.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return tt.createElement(qGe,va({},t.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var i=r.props.selected?new Date(r.props.selected):void 0,s=i&&Cy(i)&&!!r.props.selected,f=s?"".concat(QK(i.getHours()),":").concat(QK(i.getMinutes())):"";if(r.props.showTimeInput)return tt.createElement(RGe,va({},t.defaultProps,r.props,{date:i,timeString:f,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var i,s=Uv(r.state.date,(i=r.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber),f=s.startPeriod,a=s.endPeriod,p;return r.props.showYearPicker?p="".concat(f," - ").concat(a):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?p=Fi(r.state.date):p="".concat(G8(mc(r.state.date),r.props.locale)," ").concat(Fi(r.state.date)),tt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&p)},r.renderChildren=function(){if(r.props.children)return tt.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=be.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:CO}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){n.setState({monthContainer:n.monthContainer})})())},t.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&(!da(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var i=!fc(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return i&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!da(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var n=this.props.container||cGe;return tt.createElement(JR,{onClickOutside:this.handleClickOutside,style:{display:"contents"},containerRef:this.containerRef,ignoreClass:this.props.outsideClickIgnoreClass},tt.createElement(n,{className:ri("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))},t})(be.Component),QGe=function(e){var t=e.icon,n=e.className,r=n===void 0?"":n,i=e.onClick,s="react-datepicker__calendar-icon";return typeof t=="string"?tt.createElement("i",{className:"".concat(s," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:i}):tt.isValidElement(t)?tt.cloneElement(t,{className:"".concat(t.props.className||""," ").concat(s," ").concat(r),onClick:function(f){typeof t.props.onClick=="function"&&t.props.onClick(f),typeof i=="function"&&i(f)}}):tt.createElement("svg",{className:"".concat(s," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},tt.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},$de=(function(e){Fl(t,e);function t(n){var r=e.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return Fv.createPortal(this.props.children,this.el)},t})(be.Component),JGe="[tabindex], a, button, input, select, textarea",e7e=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},Vde=(function(e){Fl(t,e);function t(n){var r=e.call(this,n)||this;return r.getTabChildren=function(){var i;return Array.prototype.slice.call((i=r.tabLoopRef.current)===null||i===void 0?void 0:i.querySelectorAll(JGe),1,-1).filter(e7e)},r.handleFocusStart=function(){var i=r.getTabChildren();i&&i.length>1&&i[i.length-1].focus()},r.handleFocusEnd=function(){var i=r.getTabChildren();i&&i.length>1&&i[0].focus()},r.tabLoopRef=be.createRef(),r}return t.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:t.defaultProps.enableTabLoop)?tt.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},tt.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,tt.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t})(be.Component);function t7e(e){var t=function(n){var r,i=typeof n.hidePopper=="boolean"?n.hidePopper:!0,s=be.useRef(null),f=uGe(va({open:!i,whileElementsMounted:Rde,placement:n.popperPlacement,middleware:Wm([ZHe({padding:15}),XHe(10),KHe({element:s})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),a=va(va({},n),{hidePopper:i,popperProps:va(va({},f),{arrowRef:s})});return tt.createElement(e,va({},a))};return t}var n7e=(function(e){Fl(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n=this.props,r=n.className,i=n.wrapperClassName,s=n.hidePopper,f=s===void 0?t.defaultProps.hidePopper:s,a=n.popperComponent,p=n.targetComponent,y=n.enableTabLoop,S=n.popperOnKeyDown,E=n.portalId,I=n.portalHost,L=n.popperProps,N=n.showArrow,j=void 0;if(!f){var k=ri("react-datepicker-popper",r);j=tt.createElement(Vde,{enableTabLoop:y},tt.createElement("div",{ref:L.refs.setFloating,style:L.floatingStyles,className:k,"data-placement":L.placement,onKeyDown:S},a,N&&tt.createElement(nGe,{ref:L.arrowRef,context:L.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(j=be.createElement(this.props.popperContainer,{},j)),E&&!f&&(j=tt.createElement($de,{portalId:E,portalHost:I},j));var V=ri("react-datepicker-wrapper",i);return tt.createElement(tt.Fragment,null,tt.createElement("div",{ref:L.refs.setReference,className:V},p),j)},t})(be.Component),r7e=t7e(n7e),iQ="react-datepicker-ignore-onclickoutside";function i7e(e,t){return e&&t?mc(e)!==mc(t)||Fi(e)!==Fi(t):e!==t}var yN="Date input not valid.",aQ=(function(e){Fl(t,e);function t(n){var r=e.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Ga()},r.modifyHolidays=function(){var i;return(i=r.props.holidays)===null||i===void 0?void 0:i.reduce(function(s,f){var a=new Date(f.date);return Cy(a)?Wm(Wm([],s,!0),[va(va({},f),{date:a})],!1):s},[])},r.calcInitialState=function(){var i,s=r.getPreSelection(),f=Bde(r.props),a=jde(r.props),p=f&&Tx(s,wD(f))?f:a&&i0(s,VK(a))?a:s;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(i=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&i!==void 0?i:p,highlightDates:KK(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.resetHiddenStatus=function(){r.setState(va(va({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(va(va({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.safeFocus=function(){setTimeout(function(){var i,s;(s=(i=r.input)===null||i===void 0?void 0:i.focus)===null||s===void 0||s.call(i,{preventScroll:!0})},0)},r.safeBlur=function(){setTimeout(function(){var i,s;(s=(i=r.input)===null||i===void 0?void 0:i.blur)===null||s===void 0||s.call(i)},0)},r.setFocus=function(){r.safeFocus()},r.setBlur=function(){r.safeBlur(),r.cancelFocusInput()},r.setOpen=function(i,s){s===void 0&&(s=!1),r.setState({open:i,preSelection:i&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:_N},function(){i||r.setState(function(f){return{focused:s?f.focused:!1}},function(){!s&&r.setBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return Vy(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(i){var s,f,a=r.state.wasHidden,p=a?r.state.open:!0;a&&r.resetHiddenStatus(),!r.state.preventFocus&&p&&((f=(s=r.props).onFocus)===null||f===void 0||f.call(s,i),!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.handleBlur=function(i){var s,f;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((f=(s=r.props).onBlur)===null||f===void 0||f.call(s,i)),r.setState({focused:!1})},r.handleCalendarClickOutside=function(i){var s,f;r.props.inline||r.setOpen(!1),(f=(s=r.props).onClickOutside)===null||f===void 0||f.call(s,i),r.props.withPortal&&i.preventDefault()},r.handleChange=function(){for(var i,s,f=[],a=0;a<arguments.length;a++)f[a]=arguments[a];var p=f[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,f),!p||typeof p.isDefaultPrevented!="function"||p.isDefaultPrevented()))){r.setState({inputValue:(p==null?void 0:p.target)instanceof HTMLInputElement?p.target.value:null,lastPreSelectChange:a7e});var y=r.props,S=y.dateFormat,E=S===void 0?t.defaultProps.dateFormat:S,I=y.strictParsing,L=I===void 0?t.defaultProps.strictParsing:I,N=y.selectsRange,j=y.startDate,k=y.endDate,V=(p==null?void 0:p.target)instanceof HTMLInputElement?p.target.value:"";if(N){var K=V.split("-",2).map(function(le){return le.trim()}),J=K[0],ie=K[1],Q=pN(J??"",E,r.props.locale,L),W=pN(ie??"",E,r.props.locale,L),te=(j==null?void 0:j.getTime())!==(Q==null?void 0:Q.getTime()),X=(k==null?void 0:k.getTime())!==(W==null?void 0:W.getTime());if(!te&&!X||Q&&Yh(Q,r.props)||W&&Yh(W,r.props))return;(s=(i=r.props).onChange)===null||s===void 0||s.call(i,[Q,W],p)}else{var ae=pN(V,E,r.props.locale,L,r.props.minDate);r.props.showTimeSelectOnly&&r.props.selected&&ae&&!da(ae,r.props.selected)&&(ae=H9e(r.props.selected,{hours:tg(ae),minutes:ng(ae),seconds:qy(ae)})),(ae||!V)&&r.setSelected(ae,p,!0)}}},r.handleSelect=function(i,s,f){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(s),r.setSelected(i,s,!1,f),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(i);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var a=r.props,p=a.startDate,y=a.endDate;p&&!y&&(r.props.swapRange||!tQ(i,p))&&r.setOpen(!1)}},r.setSelected=function(i,s,f,a){var p,y,S=i;if(r.props.showYearPicker){if(S!==null&&SD(Fi(S),r.props))return}else if(r.props.showMonthYearPicker){if(S!==null&&Fde(S,r.props))return}else if(S!==null&&Yh(S,r.props))return;var E=r.props,I=E.onChange,L=E.selectsRange,N=E.startDate,j=E.endDate,k=E.selectsMultiple,V=E.selectedDates,K=E.minTime,J=E.swapRange;if(!Wb(r.props.selected,S)||r.props.allowSameDay||L||k)if(S!==null&&(r.props.selected&&(!f||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(S=mN(S,{hour:tg(r.props.selected),minute:ng(r.props.selected),second:qy(r.props.selected)})),!f&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&K&&(S=mN(S,{hour:K.getHours(),minute:K.getMinutes(),second:K.getSeconds()})),r.props.inline||r.setState({preSelection:S}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:a})),L){var ie=!N&&!j,Q=N&&!j,W=N&&j;ie?I==null||I([S,null],s):Q&&(S===null?I==null||I([null,null],s):tQ(S,N)?J?I==null||I([S,N],s):I==null||I([S,null],s):I==null||I([N,S],s)),W&&(I==null||I([S,null],s))}else if(k){if(S!==null)if(!(V!=null&&V.length))I==null||I([S],s);else{var te=V.some(function(ae){return da(ae,S)});if(te){var X=V.filter(function(ae){return!da(ae,S)});I==null||I(X,s)}else I==null||I(Wm(Wm([],V,!0),[S],!1),s)}}else I==null||I(S,s);f||((y=(p=r.props).onSelect)===null||y===void 0||y.call(p,S,s),r.setState({inputValue:null}))},r.setPreSelection=function(i){var s=Vy(r.props.minDate),f=Vy(r.props.maxDate),a=!0;if(i){var p=wD(i);if(s&&f)a=a2(i,r.props.minDate,r.props.maxDate);else if(s){var y=wD(r.props.minDate);a=i0(i,y)||Wb(p,y)}else if(f){var S=VK(r.props.maxDate);a=Tx(i,S)||Wb(p,S)}}a&&r.setState({preSelection:i})},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(i){var s,f;if(!(r.props.selectsRange||r.props.selectsMultiple)){var a=r.props.selected?r.props.selected:r.getPreSelection(),p=r.props.selected?i:mN(a,{hour:tg(i),minute:ng(i)});r.setState({preSelection:p}),(f=(s=r.props).onChange)===null||f===void 0||f.call(s,p),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var i,s;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(s=(i=r.props).onInputClick)===null||s===void 0||s.call(i)},r.onInputKeyDown=function(i){var s,f,a,p,y,S;(f=(s=r.props).onKeyDown)===null||f===void 0||f.call(s,i);var E=i.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(E===nr.ArrowDown||E===nr.ArrowUp||E===nr.Enter)&&((a=r.onInputClick)===null||a===void 0||a.call(r));return}if(r.state.open){if(E===nr.ArrowDown||E===nr.ArrowUp){i.preventDefault();var I=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',L=((p=r.calendar)===null||p===void 0?void 0:p.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(I);L instanceof HTMLElement&&L.focus({preventScroll:!0});return}var N=Ga(r.state.preSelection);E===nr.Enter?(i.preventDefault(),i.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===_N?(r.handleSelect(N,i),!r.props.shouldCloseOnSelect&&r.setPreSelection(N)):r.setOpen(!1)):E===nr.Escape?(i.preventDefault(),i.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):E===nr.Tab&&r.setOpen(!1),r.inputOk()||(S=(y=r.props).onInputError)===null||S===void 0||S.call(y,{code:1,msg:yN})}},r.onPortalKeyDown=function(i){var s=i.key;s===nr.Escape&&(i.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(i){var s,f,a,p,y,S,E=r.props,I=E.minDate,L=E.maxDate,N=E.disabledKeyboardNavigation,j=E.showWeekPicker,k=E.shouldCloseOnSelect,V=E.locale,K=E.calendarStartDay,J=E.adjustDateOnChange,ie=E.inline;if((f=(s=r.props).onKeyDown)===null||f===void 0||f.call(s,i),!N){var Q=i.key,W=i.shiftKey,te=Ga(r.state.preSelection),X=function(Be,Ee){var Fe=Ee;switch(Be){case nr.ArrowRight:Fe=j?_I(Ee,1):bp(Ee,1);break;case nr.ArrowLeft:Fe=j?MK(Ee):C9e(Ee);break;case nr.ArrowUp:Fe=MK(Ee);break;case nr.ArrowDown:Fe=_I(Ee,1);break;case nr.PageUp:Fe=W?cS(Ee,1):ax(Ee,1);break;case nr.PageDown:Fe=W?$y(Ee,1):Op(Ee,1);break;case nr.Home:Fe=Yv(Ee,V,K);break;case nr.End:Fe=yGe(Ee);break}return Fe},ae=function(Be,Ee){for(var Fe=40,at=Be,yt=!1,je=0,Ke=X(Be,Ee);!yt;){if(je>=Fe){Ke=Ee;break}I&&Ke<I&&(at=nr.ArrowRight,Ke=Yh(I,r.props)?X(at,Ke):I),L&&Ke>L&&(at=nr.ArrowLeft,Ke=Yh(L,r.props)?X(at,Ke):L),Yh(Ke,r.props)?((at===nr.PageUp||at===nr.Home)&&(at=nr.ArrowRight),(at===nr.PageDown||at===nr.End)&&(at=nr.ArrowLeft),Ke=X(at,Ke)):yt=!0,je++}return Ke};if(Q===nr.Enter){i.preventDefault(),r.handleSelect(te,i),!k&&r.setPreSelection(te);return}else if(Q===nr.Escape){i.preventDefault(),r.setOpen(!1),r.inputOk()||(p=(a=r.props).onInputError)===null||p===void 0||p.call(a,{code:1,msg:yN});return}var le=null;switch(Q){case nr.ArrowLeft:case nr.ArrowRight:case nr.ArrowUp:case nr.ArrowDown:case nr.PageUp:case nr.PageDown:case nr.Home:case nr.End:le=ae(Q,te);break}if(!le){(S=(y=r.props).onInputError)===null||S===void 0||S.call(y,{code:1,msg:yN});return}if(i.preventDefault(),r.setState({lastPreSelectChange:_N}),J&&r.setSelected(le),r.setPreSelection(le),ie){var ge=mc(te),ye=mc(le),De=Fi(te),He=Fi(le);ge!==ye||De!==He?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(i){var s=i.key;s===nr.Escape&&(i.preventDefault(),r.sendFocusBackToInput())},r.onClearClick=function(i){i&&i.preventDefault&&i.preventDefault(),r.sendFocusBackToInput();var s=r.props,f=s.selectsRange,a=s.onChange;f?a==null||a([null,null],i):a==null||a(null,i),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(i){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(i.target===document||i.target===document.documentElement||i.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(i)&&r.setOpen(!1)},r.renderCalendar=function(){var i,s;return!r.props.inline&&!r.isCalendarOpen()?null:tt.createElement(KGe,va({showMonthYearDropdown:void 0,ref:function(f){r.calendar=f}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(i=r.props.dateFormatCalendar)!==null&&i!==void 0?i:t.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:MGe(r.modifyHolidays()),outsideClickIgnoreClass:iQ,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(s=r.props.dropdownMode)!==null&&s!==void 0?s:t.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var i=r.props,s=i.dateFormat,f=s===void 0?t.defaultProps.dateFormat:s,a=i.locale,p=r.props.showTimeInput||r.props.showTimeSelect,y=p?"PPPPp":"PPPP",S;return r.props.selectsRange?S="Selected start date: ".concat(Vh(r.props.startDate,{dateFormat:y,locale:a}),". ").concat(r.props.endDate?"End date: "+Vh(r.props.endDate,{dateFormat:y,locale:a}):""):r.props.showTimeSelectOnly?S="Selected time: ".concat(Vh(r.props.selected,{dateFormat:f,locale:a})):r.props.showYearPicker?S="Selected year: ".concat(Vh(r.props.selected,{dateFormat:"yyyy",locale:a})):r.props.showMonthYearPicker?S="Selected month: ".concat(Vh(r.props.selected,{dateFormat:"MMMM yyyy",locale:a})):r.props.showQuarterYearPicker?S="Selected quarter: ".concat(Vh(r.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):S="Selected date: ".concat(Vh(r.props.selected,{dateFormat:y,locale:a})),tt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},S)},r.renderDateInput=function(){var i,s,f,a=ri(r.props.className,(i={},i[iQ]=r.state.open,i)),p=r.props.customInput||tt.createElement("input",{type:"text"}),y=r.props.customInputRef||"ref",S=r.props,E=S.dateFormat,I=E===void 0?t.defaultProps.dateFormat:E,L=S.locale,N=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?dGe(r.props.startDate,r.props.endDate,{dateFormat:I,locale:L}):r.props.selectsMultiple?pGe((f=r.props.selectedDates)!==null&&f!==void 0?f:[],{dateFormat:I,locale:L}):Vh(r.props.selected,{dateFormat:I,locale:L});return be.cloneElement(p,(s={},s[y]=function(j){r.input=j},s.value=N,s.onBlur=r.handleBlur,s.onChange=r.handleChange,s.onClick=r.onInputClick,s.onFocus=r.handleFocus,s.onKeyDown=r.onInputKeyDown,s.id=r.props.id,s.name=r.props.name,s.form=r.props.form,s.autoFocus=r.props.autoFocus,s.placeholder=r.props.placeholderText,s.disabled=r.props.disabled,s.autoComplete=r.props.autoComplete,s.className=ri(p.props.className,a),s.title=r.props.title,s.readOnly=r.props.readOnly,s.required=r.props.required,s.tabIndex=r.props.tabIndex,s["aria-describedby"]=r.props.ariaDescribedBy,s["aria-invalid"]=r.props.ariaInvalid,s["aria-labelledby"]=r.props.ariaLabelledBy,s["aria-required"]=r.props.ariaRequired,s))},r.renderClearButton=function(){var i=r.props,s=i.isClearable,f=i.disabled,a=i.selected,p=i.startDate,y=i.endDate,S=i.clearButtonTitle,E=i.clearButtonClassName,I=E===void 0?"":E,L=i.ariaLabelClose,N=L===void 0?"Close":L,j=i.selectedDates;return s&&(a!=null||p!=null||y!=null||j!=null&&j.length)?tt.createElement("button",{type:"button",className:ri("react-datepicker__close-icon",I,{"react-datepicker__close-icon--disabled":f}),disabled:f,"aria-label":N,onClick:r.onClearClick,title:S,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:CO,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(n,r){var i,s,f,a;n.inline&&i7e(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:KK(this.props.highlightDates)}),!r.focused&&!Wb(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((s=(i=this.props).onCalendarOpen)===null||s===void 0||s.call(i)),r.open===!0&&this.state.open===!1&&((a=(f=this.props).onCalendarClose)===null||a===void 0||a.call(f)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,i=n.icon,s=n.calendarIconClassname,f=n.calendarIconClassName,a=n.toggleCalendarOnIconClick,p=this.state.open;return s&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),tt.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&tt.createElement(QGe,va({icon:i,className:ri(f,!f&&s,p&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?tt.createElement(Vde,{enableTabLoop:this.props.enableTabLoop},tt.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=tt.createElement($de,va({portalId:this.props.portalId},this.props),r)),tt.createElement("div",null,this.renderInputContainer(),r)}return tt.createElement(r7e,va({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t})(be.Component),a7e="input",_N="navigate";const tA="YYYY-MM-DD",o7e=(e,t)=>{const n=Sn(e.startDt),r=Sn(t.startDt);return n.isBefore(r)?-1:n.isAfter(r)?1:String(e.eventid).localeCompare(String(t.eventid))},s7e=(e=[])=>{const t={};return e.forEach(n=>{const r=Sn(n==null?void 0:n.startDt),i=Sn(n==null?void 0:n.endDt);if(!r.isValid()||!i.isValid()||i.isBefore(r))return;const s=r.clone().startOf("day"),f=i.clone().startOf("day");for(;s.isSameOrBefore(f,"day");){const a=s.format(tA);t[a]||(t[a]=[]),t[a].push(n),s.add(1,"day")}}),Object.keys(t).forEach(n=>{t[n]=t[n].slice().sort(o7e)}),t},l7e=(e,t)=>{const n=Sn(`${e}-01-01`).startOf("isoWeek"),r=Sn(`${e}-12-31`).endOf("day").endOf("isoWeek"),i=[],s=n.clone();for(;s.isSameOrBefore(r,"day");){const f=s.clone(),a=[];for(let p=0;p<7;p+=1){const y=f.clone().add(p,"day"),S=y.format(tA),E=t[S]||[];a.push({dayKey:S,inYear:y.year()===e,count:E.length,events:E})}i.push({weekKey:f.format(tA),days:a}),s.add(1,"week")}return i},u7e=(e,t)=>{const n=[];let r=-1;for(let i=0;i<12;i+=1){const s=Sn({year:e,month:i,day:1}),f=t.findIndex(a=>{const p=Sn(a.days[0].dayKey,tA),y=Sn(a.days[6].dayKey,tA);return s.isSameOrAfter(p,"day")&&s.isSameOrBefore(y,"day")});f>=0&&f!==r&&(n.push({label:s.format("MMM"),weekIndex:f}),r=f)}return n},c7e=(e={})=>[...new Set(Object.keys(e).map(n=>Number(n.slice(0,4))).filter(n=>Number.isFinite(n)))].sort((n,r)=>r-n).map(n=>{const r=l7e(n,e);return{year:n,weeks:r,monthLabels:u7e(n,r)}}),f7e=(e=0)=>e<=0?0:e===1?1:e===2?2:e===3?3:4,h7e=[{index:0,label:"Mon"},{index:2,label:"Wed"},{index:4,label:"Fri"}],qde="ddd, MMM D, YYYY",oQ="DD MMM YYYY, h:mm a",sQ=e=>{const t=Sn(e.dayKey,"YYYY-MM-DD").format(qde),n=`${e.count} rainfall event${e.count===1?"":"s"}`;return`${t}, ${n}`},d7e=({events:e,selectedEventId:t,dispatchPickRainfallEvent:n,onEventSelected:r})=>{const[i,s]=be.useState(null),f=be.useMemo(()=>s7e(e),[e]),a=be.useMemo(()=>c7e(f),[f]),p=i?f[i]||[]:[],y=i?Number(i.slice(0,4)):null,S=I=>{n(I),typeof r=="function"&&r()},E=I=>{if(!(!I.inYear||I.count===0)){if(i===I.dayKey){s(null);return}s(I.dayKey)}};return a.length?Oe.jsx("div",{className:"events-heatmap",children:a.map(I=>Oe.jsxs("section",{className:"events-heatmap-year-section",style:{"--event-week-count":I.weeks.length},children:[Oe.jsx("h6",{className:"events-heatmap-year-title mb-2",children:I.year}),Oe.jsxs("div",{className:"events-heatmap-scroll",children:[Oe.jsx("div",{className:"events-heatmap-month-row",children:I.monthLabels.map(L=>Oe.jsx("span",{className:"events-heatmap-month-label",style:{gridColumnStart:L.weekIndex+1},children:L.label},`${I.year}-${L.label}`))}),Oe.jsxs("div",{className:"events-heatmap-grid",children:[Oe.jsx("div",{className:"events-heatmap-weekday-col",children:h7e.map(L=>Oe.jsx("span",{className:"events-heatmap-weekday-label",style:{gridRowStart:L.index+1},children:L.label},`${I.year}-${L.label}`))}),Oe.jsx("div",{className:"events-heatmap-week-cols",children:I.weeks.map(L=>Oe.jsx("div",{className:"events-heatmap-week-col",children:L.days.map(N=>{const j=f7e(N.count),k=N.events.some(K=>K.eventid===t),V=["events-heatmap-day",`intensity-${j}`,N.inYear?"":"is-outside-year",i===N.dayKey?"is-active-day":"",k?"is-selected-event":""].filter(Boolean).join(" ");return Oe.jsx("button",{"aria-label":sQ(N),className:V,disabled:!N.inYear||N.count===0,onClick:()=>E(N),title:sQ(N),type:"button"},N.dayKey)})},L.weekKey))})]})]}),y===I.year&&p.length>0?Oe.jsxs("div",{className:"events-heatmap-day-picker",children:[Oe.jsxs("p",{className:"events-heatmap-day-picker-title",children:[Sn(i,"YYYY-MM-DD").format(qde)," ","has"," ",p.length," ","event",p.length===1?":":"s. Select one:"]}),Oe.jsx("div",{className:"events-heatmap-event-list",children:p.map((L,N)=>Oe.jsxs(hc,{className:"events-heatmap-event-btn",onClick:()=>S(L.eventid),size:"sm",variant:"outline-primary",children:[Oe.jsxs("span",{className:"events-heatmap-event-label",children:[Sn(L.startDt).format(oQ)," to ",Sn(L.endDt).format(oQ)]}),Oe.jsxs(LD,{bg:"secondary",children:[L.hours,"h"]})]},`${L.eventid}-${L.startDt}-${L.endDt}-${N}`))})]}):null]},I.year))}):Oe.jsx("p",{className:"small mb-0",children:Oe.jsx("em",{children:"No rainfall events are available."})})},p7e=e=>{var s;const t=hO(e),n=Number(((s=t==null?void 0:t.filters)==null?void 0:s.maxHours)??24),r=zje(e);return{events:((t==null?void 0:t.list)||[]).filter(f=>n>=24?!0:f.hours<=n),selectedEventId:(r==null?void 0:r.eventid)||null}},m7e=(e,t)=>({dispatchPickRainfallEvent:n=>{e(dfe({eventid:n,contextType:t.contextType}))}}),g7e=of(p7e,m7e)(d7e),p6="MM/DD/YYYY hh:mm A",lQ="MM/DD/YYYY",y7e={[fi.legacyRealtime]:"real-time rainfall",[fi.legacyGauge]:"historical rain gauge rainfall",[fi.legacyGarr]:"calibrated radar rainfall"};class _7e extends tt.Component{constructor(t){super(t),this.handleEventModalShow=this.handleEventModalShow.bind(this),this.handleEventModalClose=this.handleEventModalClose.bind(this),this.handleRangeModalShow=this.handleRangeModalShow.bind(this),this.handleRangeModalClose=this.handleRangeModalClose.bind(this),this.handleApplyRange=this.handleApplyRange.bind(this),this.handlePresetPick=this.handlePresetPick.bind(this),this.state={showEventModal:!1,showRangeModal:!1,pendingStart:null,pendingEnd:null}}componentDidMount(){this.clampActiveStoreRange()}componentDidUpdate(t,n){const r=!this.props.minDate.isSame(t.minDate)||!this.props.maxDate.isSame(t.maxDate),i=!this.props.rawStartDt.isSame(t.rawStartDt)||!this.props.rawEndDt.isSame(t.rawEndDt);(r||i)&&this.clampActiveStoreRange(),this.state.showRangeModal&&(!n.showRangeModal&&this.state.showRangeModal||r)&&this.clampPendingModalRange()}clampActiveStoreRange(){if(!this.props.rawStartDt.isValid()||!this.props.rawEndDt.isValid())return;const t=kv({start:this.props.rawStartDt,end:this.props.rawEndDt,min:this.props.minDate,max:this.props.maxDate});!t.start||!t.end||(!t.start.isSame(this.props.rawStartDt)||!t.end.isSame(this.props.rawEndDt))&&this.props.dispatchPickRainfallDateTimeRange({startDt:t.start.toISOString(),endDt:t.end.toISOString()})}clampPendingModalRange(){const t=kv({start:this.state.pendingStart||this.props.startDt,end:this.state.pendingEnd||this.props.endDt,min:this.props.minDate,max:this.props.maxDate});if(!t.start||!t.end)return;const n=t.start.toDate(),r=t.end.toDate(),i=this.state.pendingStart===null||this.state.pendingStart.getTime()!==n.getTime(),s=this.state.pendingEnd===null||this.state.pendingEnd.getTime()!==r.getTime();(i||s)&&this.setState({pendingStart:n,pendingEnd:r})}handleEventModalClose(){this.setState({showEventModal:!1})}handleEventModalShow(){this.setState({showEventModal:!0})}handleRangeModalClose(){this.setState({showRangeModal:!1})}handleRangeModalShow(){const t=kv({start:this.props.startDt,end:this.props.endDt,min:this.props.minDate,max:this.props.maxDate});this.setState({showRangeModal:!0,pendingStart:t.start?t.start.toDate():this.props.minDate.toDate(),pendingEnd:t.end?t.end.toDate():this.props.maxDate.toDate()})}handleApplyRange(){const{pendingStart:t,pendingEnd:n}=this.state;if(!t||!n)return;const r=kv({start:t,end:n,min:this.props.minDate,max:this.props.maxDate});!r.start||!r.end||(this.props.dispatchPickRainfallDateTimeRange({startDt:r.start.toISOString(),endDt:r.end.toISOString()}),this.setState({showRangeModal:!1}))}handlePresetPick(t,n){const[r,i]=n;if(!Xje({start:r,end:i,min:this.props.minDate,max:this.props.maxDate})){console.log("[DateTimePicker] preset range outside available bounds",{label:t,contextType:this.props.contextType,rollup:this.props.rollup,attemptedStart:Sn(r).toISOString(),attemptedEnd:Sn(i).toISOString(),min:this.props.minDate.toISOString(),max:this.props.maxDate.toISOString()});return}this.setState({pendingStart:r.toDate(),pendingEnd:i.toDate()})}buildAvailabilityNote(){const t=y7e[this.props.contextType]||"rainfall",n=this.props.rollup||"selected",r=this.props.minDate.format(lQ),i=this.props.maxDate.format(lQ);return`${n} ${t} data is currently available between ${r} and ${i}`}render(){const{pendingStart:t,pendingEnd:n}=this.state;return Oe.jsxs("div",{children:[Oe.jsxs(Zs,{show:this.state.showRangeModal,onHide:this.handleRangeModalClose,size:"lg",animation:!1,children:[Oe.jsx(Zs.Header,{closeButton:!0,children:Oe.jsx(Zs.Title,{children:"Select Date and Time Range"})}),Oe.jsx(Zs.Body,{children:Oe.jsxs(xa,{className:"g-3",children:[Oe.jsx(Gr,{xs:3,className:"border-end",children:Oe.jsx("div",{className:"btn-group-vertical w-100",role:"group","aria-label":"Quick Ranges",children:Object.entries(this.props.ranges).map(([r,i])=>Oe.jsx(hc,{variant:"outline-primary",size:"sm",onClick:()=>this.handlePresetPick(r,i),children:r},`${this.props.contextType}-${r}`))})}),Oe.jsxs(Gr,{xs:9,children:[Oe.jsxs(xa,{children:[Oe.jsxs(Gr,{md:6,children:[Oe.jsx("p",{className:"lead mb-0",children:"Start"}),Oe.jsx(aQ,{selected:t,onChange:r=>{const i=kv({start:r,end:n,min:this.props.minDate,max:this.props.maxDate});this.setState({pendingStart:i.start?i.start.toDate():null,pendingEnd:i.end?i.end.toDate():null})},showTimeSelect:!0,timeIntervals:15,dateFormat:"MM/dd/yyyy hh:mm aa",minDate:this.props.minDate.toDate(),maxDate:this.props.maxDate.toDate(),className:"form-control"})]}),Oe.jsxs(Gr,{md:6,children:[Oe.jsx("p",{className:"lead mb-0",children:"End"}),Oe.jsx(aQ,{selected:n,onChange:r=>{const i=kv({start:t,end:r,min:this.props.minDate,max:this.props.maxDate});this.setState({pendingStart:i.start?i.start.toDate():null,pendingEnd:i.end?i.end.toDate():null})},showTimeSelect:!0,timeIntervals:15,dateFormat:"MM/dd/yyyy hh:mm aa",minDate:t||this.props.minDate.toDate(),maxDate:this.props.maxDate.toDate(),className:"form-control"})]})]}),Oe.jsx(xa,{children:Oe.jsx(Gr,{children:Oe.jsx("p",{className:"datetimepicker-range-note mb-0",children:this.buildAvailabilityNote()})})})]})]})}),Oe.jsxs(Zs.Footer,{children:[Oe.jsx(hc,{variant:"secondary",onClick:this.handleRangeModalClose,children:"Cancel"}),Oe.jsx(hc,{variant:"primary",onClick:this.handleApplyRange,children:"Apply"})]})]}),Oe.jsxs(Zs,{show:this.state.showEventModal,onHide:this.handleEventModalClose,size:"xl",fullscreen:"lg-down",contentClassName:"datetimepicker-event-modal-content",animation:!1,children:[Oe.jsx(Zs.Header,{closeButton:!0,children:Oe.jsxs(Zs.Title,{children:["Select A Rainfall Event",Oe.jsx("br",{})]})}),Oe.jsxs(Zs.Body,{children:[Oe.jsx("p",{className:"small text-muted",children:"Select a day from the calendar below to see rainfall event(s) on that day, and select those to use as date/time range for your rainfall data download."}),Oe.jsx(g7e,{contextType:this.props.contextType,onEventSelected:this.handleEventModalClose})]}),Oe.jsx(Zs.Footer,{children:Oe.jsx(hc,{variant:"secondary",onClick:this.handleEventModalClose,children:"Close"})})]}),Oe.jsx(xa,{className:"g-0",children:Oe.jsx(Gr,{children:Oe.jsx("strong",{children:"When"})})}),Oe.jsx(xa,{className:"g-0",children:Oe.jsx(Gr,{children:this.props.startDt!==!1&&this.props.endDt!==!1?Oe.jsxs(Ewe,{className:"datetimepicker-control",children:[Oe.jsx(boe,{size:"sm",readOnly:!0,placeholder:"start and end date/times",value:`${this.props.startDt.format(p6)} to ${this.props.endDt.format(p6)}`,"aria-label":"start and end dates",className:"datetimepicker-control"}),Oe.jsx(hc,{variant:"light",className:"datetimepicker-control",onClick:this.handleRangeModalShow,id:`dtp-show-datepicker-${this.props.rainfallDataType}`,children:Oe.jsx(mx,{icon:UEe})}),this.props.rainfallDataType===Qm.historic?Oe.jsx(hc,{id:"dtp-show-eventlistmodal",variant:"light",onClick:this.handleEventModalShow,className:"datetimepicker-control",children:Oe.jsx(mx,{icon:$Ee})}):null]}):Oe.jsx(m$,{animation:"border",variant:"primary",size:"sm",children:Oe.jsx("span",{className:"visually-hidden",children:"Fetching historic ranges..."})})})})]})}}function v7e(e,t){const n=dp(e,t.contextType),r=Sn().toISOString(),i=vfe({contextType:t.contextType,rainfallDataType:t.rainfallDataType,rollup:n.rollup,latest:Nje(e),rainfallMinDate:W$,now:r}),s=Sn(n.startDt),f=Sn(n.endDt);let a=s.clone(),p=f.clone();const y=i.min.clone(),S=i.max.clone();let E={};if(s.isValid()&&f.isValid()){const L=kv({start:s,end:f,min:y,max:S});a=L.start,p=L.end}else a=!1,p=!1;return t.rainfallDataType===Qm.historic?E={"Latest month":[S.clone().startOf("month"),S.clone()],"Latest 3 months":[S.clone().subtract(2,"month").startOf("month"),S.clone()],"Latest 6 months":[S.clone().subtract(5,"month").startOf("month"),S.clone()],"Latest 12 months":[S.clone().subtract(11,"month").startOf("month"),S.clone()],"Latest Available This Year":[S.clone().startOf("year"),S.clone()],"Last Year":[S.clone().subtract(1,"year").startOf("year"),S.clone().subtract(1,"year").endOf("year")]}:t.rainfallDataType===Qm.realtime?E={"Past 2 hours":[S.clone().subtract(2,"hour"),S.clone()],"Past 4 hours":[S.clone().subtract(4,"hour"),S.clone()],"Past 6 hours":[S.clone().subtract(6,"hour"),S.clone()],"Past 12 hours":[S.clone().subtract(12,"hour"),S.clone()],"Past 24 hours":[S.clone().subtract(24,"hour"),S.clone()],"Past 48 hours":[S.clone().subtract(48,"hour"),S.clone()],Today:[S.clone().startOf("day"),S.clone()],Yesterday:[S.clone().subtract(1,"day").startOf("day"),S.clone().subtract(1,"day").endOf("day")],"Past 3 days":[S.clone().subtract(3,"day").startOf("day"),S.clone()],"Past 7 days":[S.clone().subtract(7,"day").startOf("day"),S.clone()],"Past month":[S.clone().subtract(1,"month").startOf("day"),S.clone()],"Past 3 months":[S.clone().subtract(3,"month").startOf("month"),S.clone()]}:(a=!1,p=!1,E={}),{local:{format:p6},startDt:a,endDt:p,rawStartDt:s,rawEndDt:f,minDate:y,maxDate:S,minYear:y.year(),maxYear:S.year(),ranges:E,rainfallDataType:t.rainfallDataType,rollup:n.rollup}}const b7e=(e,t)=>({dispatchPickRainfallDateTimeRange:n=>{e($V({...n,contextType:t.contextType}))}}),x7e=of(v7e,b7e)(_7e);function Ax(e){"@babel/helpers - typeof";return Ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ax(e)}function w7e(e,t){if(Ax(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ax(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hde(e){var t=w7e(e,"string");return Ax(t)=="symbol"?t:t+""}function o2(e,t,n){return(t=Hde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uQ(Object(n),!0).forEach(function(r){o2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uQ(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function S7e(e){if(Array.isArray(e))return e}function T7e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;p=!1}else for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function m6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Gde(e,t){if(e){if(typeof e=="string")return m6(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m6(e,t):void 0}}function E7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gy(e,t){return S7e(e)||T7e(e,t)||Gde(e,t)||E7e()}function y_(e,t){if(e==null)return{};var n,r,i=UU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var A7e=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function O7e(e){var t=e.defaultInputValue,n=t===void 0?"":t,r=e.defaultMenuIsOpen,i=r===void 0?!1:r,s=e.defaultValue,f=s===void 0?null:s,a=e.inputValue,p=e.menuIsOpen,y=e.onChange,S=e.onInputChange,E=e.onMenuClose,I=e.onMenuOpen,L=e.value,N=y_(e,A7e),j=be.useState(a!==void 0?a:n),k=Gy(j,2),V=k[0],K=k[1],J=be.useState(p!==void 0?p:i),ie=Gy(J,2),Q=ie[0],W=ie[1],te=be.useState(L!==void 0?L:f),X=Gy(te,2),ae=X[0],le=X[1],ge=be.useCallback(function(at,yt){typeof y=="function"&&y(at,yt),le(at)},[y]),ye=be.useCallback(function(at,yt){var je;typeof S=="function"&&(je=S(at,yt)),K(je!==void 0?je:at)},[S]),De=be.useCallback(function(){typeof I=="function"&&I(),W(!0)},[I]),He=be.useCallback(function(){typeof E=="function"&&E(),W(!1)},[E]),Be=a!==void 0?a:V,Ee=p!==void 0?p:Q,Fe=L!==void 0?L:ae;return Xr(Xr({},N),{},{inputValue:Be,menuIsOpen:Ee,onChange:ge,onInputChange:ye,onMenuClose:He,onMenuOpen:De,value:Fe})}function C7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hde(r.key),r)}}function M7e(e,t,n){return t&&cQ(e.prototype,t),n&&cQ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function D7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RD(e,t)}function II(e){return II=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},II(e)}function Yde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yde=function(){return!!e})()}function I7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P7e(e,t){if(t&&(Ax(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I7e(e)}function R7e(e){var t=Yde();return function(){var n,r=II(e);if(t){var i=II(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P7e(this,n)}}function k7e(e){if(Array.isArray(e))return m6(e)}function L7e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function z7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W8(e){return k7e(e)||L7e(e)||Gde(e)||z7e()}function N7e(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function F7e(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var B7e=(function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(F7e(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=N7e(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e})(),bu="-ms-",PI="-moz-",za="-webkit-",Wde="comm",X8="rule",Z8="decl",j7e="@import",Xde="@keyframes",U7e="@layer",$7e=Math.abs,ek=String.fromCharCode,V7e=Object.assign;function q7e(e,t){return eu(e,0)^45?(((t<<2^eu(e,0))<<2^eu(e,1))<<2^eu(e,2))<<2^eu(e,3):0}function Zde(e){return e.trim()}function H7e(e,t){return(e=t.exec(e))?e[0]:e}function Na(e,t,n){return e.replace(t,n)}function g6(e,t){return e.indexOf(t)}function eu(e,t){return e.charCodeAt(t)|0}function nA(e,t,n){return e.slice(t,n)}function jm(e){return e.length}function K8(e){return e.length}function zM(e,t){return t.push(e),e}function G7e(e,t){return e.map(t).join("")}var tk=1,pS=1,Kde=0,af=0,Ks=0,lT="";function nk(e,t,n,r,i,s,f){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:tk,column:pS,length:f,return:""}}function jE(e,t){return V7e(nk("",null,null,"",null,null,0),e,{length:-e.length},t)}function Y7e(){return Ks}function W7e(){return Ks=af>0?eu(lT,--af):0,pS--,Ks===10&&(pS=1,tk--),Ks}function eh(){return Ks=af<Kde?eu(lT,af++):0,pS++,Ks===10&&(pS=1,tk++),Ks}function ig(){return eu(lT,af)}function TD(){return af}function DO(e,t){return nA(lT,e,t)}function rA(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Qde(e){return tk=pS=1,Kde=jm(lT=e),af=0,[]}function Jde(e){return lT="",e}function ED(e){return Zde(DO(af-1,y6(e===91?e+2:e===40?e+1:e)))}function X7e(e){for(;(Ks=ig())&&Ks<33;)eh();return rA(e)>2||rA(Ks)>3?"":" "}function Z7e(e,t){for(;--t&&eh()&&!(Ks<48||Ks>102||Ks>57&&Ks<65||Ks>70&&Ks<97););return DO(e,TD()+(t<6&&ig()==32&&eh()==32))}function y6(e){for(;eh();)switch(Ks){case e:return af;case 34:case 39:e!==34&&e!==39&&y6(Ks);break;case 40:e===41&&y6(e);break;case 92:eh();break}return af}function K7e(e,t){for(;eh()&&e+Ks!==57;)if(e+Ks===84&&ig()===47)break;return"/*"+DO(t,af-1)+"*"+ek(e===47?e:eh())}function Q7e(e){for(;!rA(ig());)eh();return DO(e,af)}function J7e(e){return Jde(AD("",null,null,null,[""],e=Qde(e),0,[0],e))}function AD(e,t,n,r,i,s,f,a,p){for(var y=0,S=0,E=f,I=0,L=0,N=0,j=1,k=1,V=1,K=0,J="",ie=i,Q=s,W=r,te=J;k;)switch(N=K,K=eh()){case 40:if(N!=108&&eu(te,E-1)==58){g6(te+=Na(ED(K),"&","&\f"),"&\f")!=-1&&(V=-1);break}case 34:case 39:case 91:te+=ED(K);break;case 9:case 10:case 13:case 32:te+=X7e(N);break;case 92:te+=Z7e(TD()-1,7);continue;case 47:switch(ig()){case 42:case 47:zM(eYe(K7e(eh(),TD()),t,n),p);break;default:te+="/"}break;case 123*j:a[y++]=jm(te)*V;case 125*j:case 59:case 0:switch(K){case 0:case 125:k=0;case 59+S:V==-1&&(te=Na(te,/\f/g,"")),L>0&&jm(te)-E&&zM(L>32?hQ(te+";",r,n,E-1):hQ(Na(te," ","")+";",r,n,E-2),p);break;case 59:te+=";";default:if(zM(W=fQ(te,t,n,y,S,i,a,J,ie=[],Q=[],E),s),K===123)if(S===0)AD(te,t,W,W,ie,s,E,a,Q);else switch(I===99&&eu(te,3)===110?100:I){case 100:case 108:case 109:case 115:AD(e,W,W,r&&zM(fQ(e,W,W,0,0,i,a,J,i,ie=[],E),Q),i,Q,E,a,r?ie:Q);break;default:AD(te,W,W,W,[""],Q,0,a,Q)}}y=S=L=0,j=V=1,J=te="",E=f;break;case 58:E=1+jm(te),L=N;default:if(j<1){if(K==123)--j;else if(K==125&&j++==0&&W7e()==125)continue}switch(te+=ek(K),K*j){case 38:V=S>0?1:(te+="\f",-1);break;case 44:a[y++]=(jm(te)-1)*V,V=1;break;case 64:ig()===45&&(te+=ED(eh())),I=ig(),S=E=jm(J=te+=Q7e(TD())),K++;break;case 45:N===45&&jm(te)==2&&(j=0)}}return s}function fQ(e,t,n,r,i,s,f,a,p,y,S){for(var E=i-1,I=i===0?s:[""],L=K8(I),N=0,j=0,k=0;N<r;++N)for(var V=0,K=nA(e,E+1,E=$7e(j=f[N])),J=e;V<L;++V)(J=Zde(j>0?I[V]+" "+K:Na(K,/&\f/g,I[V])))&&(p[k++]=J);return nk(e,t,n,i===0?X8:a,p,y,S)}function eYe(e,t,n){return nk(e,t,n,Wde,ek(Y7e()),nA(e,2,-2),0)}function hQ(e,t,n,r){return nk(e,t,n,Z8,nA(e,0,r),nA(e,r+1,-1),r)}function Lw(e,t){for(var n="",r=K8(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function tYe(e,t,n,r){switch(e.type){case U7e:if(e.children.length)break;case j7e:case Z8:return e.return=e.return||e.value;case Wde:return"";case Xde:return e.return=e.value+"{"+Lw(e.children,r)+"}";case X8:e.value=e.props.join(",")}return jm(n=Lw(e.children,r))?e.return=e.value+"{"+n+"}":""}function nYe(e){var t=K8(e);return function(n,r,i,s){for(var f="",a=0;a<t;a++)f+=e[a](n,r,i,s)||"";return f}}function rYe(e){return function(t){t.root||(t=t.return)&&e(t)}}function iYe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var aYe=function(t,n,r){for(var i=0,s=0;i=s,s=ig(),i===38&&s===12&&(n[r]=1),!rA(s);)eh();return DO(t,af)},oYe=function(t,n){var r=-1,i=44;do switch(rA(i)){case 0:i===38&&ig()===12&&(n[r]=1),t[r]+=aYe(af-1,n,r);break;case 2:t[r]+=ED(i);break;case 4:if(i===44){t[++r]=ig()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=ek(i)}while(i=eh());return t},sYe=function(t,n){return Jde(oYe(Qde(t),n))},dQ=new WeakMap,lYe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!dQ.get(r))&&!i){dQ.set(t,!0);for(var s=[],f=sYe(n,s),a=r.props,p=0,y=0;p<f.length;p++)for(var S=0;S<a.length;S++,y++)t.props[y]=s[p]?f[p].replace(/&\f/g,a[S]):a[S]+" "+f[p]}}},uYe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function epe(e,t){switch(q7e(e,t)){case 5103:return za+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return za+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return za+e+PI+e+bu+e+e;case 6828:case 4268:return za+e+bu+e+e;case 6165:return za+e+bu+"flex-"+e+e;case 5187:return za+e+Na(e,/(\w+).+(:[^]+)/,za+"box-$1$2"+bu+"flex-$1$2")+e;case 5443:return za+e+bu+"flex-item-"+Na(e,/flex-|-self/,"")+e;case 4675:return za+e+bu+"flex-line-pack"+Na(e,/align-content|flex-|-self/,"")+e;case 5548:return za+e+bu+Na(e,"shrink","negative")+e;case 5292:return za+e+bu+Na(e,"basis","preferred-size")+e;case 6060:return za+"box-"+Na(e,"-grow","")+za+e+bu+Na(e,"grow","positive")+e;case 4554:return za+Na(e,/([^-])(transform)/g,"$1"+za+"$2")+e;case 6187:return Na(Na(Na(e,/(zoom-|grab)/,za+"$1"),/(image-set)/,za+"$1"),e,"")+e;case 5495:case 3959:return Na(e,/(image-set\([^]*)/,za+"$1$`$1");case 4968:return Na(Na(e,/(.+:)(flex-)?(.*)/,za+"box-pack:$3"+bu+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+za+e+e;case 4095:case 3583:case 4068:case 2532:return Na(e,/(.+)-inline(.+)/,za+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(jm(e)-1-t>6)switch(eu(e,t+1)){case 109:if(eu(e,t+4)!==45)break;case 102:return Na(e,/(.+:)(.+)-([^]+)/,"$1"+za+"$2-$3$1"+PI+(eu(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~g6(e,"stretch")?epe(Na(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(eu(e,t+1)!==115)break;case 6444:switch(eu(e,jm(e)-3-(~g6(e,"!important")&&10))){case 107:return Na(e,":",":"+za)+e;case 101:return Na(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+za+(eu(e,14)===45?"inline-":"")+"box$3$1"+za+"$2$3$1"+bu+"$2box$3")+e}break;case 5936:switch(eu(e,t+11)){case 114:return za+e+bu+Na(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return za+e+bu+Na(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return za+e+bu+Na(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return za+e+bu+e+e}return e}var cYe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case Z8:t.return=epe(t.value,t.length);break;case Xde:return Lw([jE(t,{value:Na(t.value,"@","@"+za)})],i);case X8:if(t.length)return G7e(t.props,function(s){switch(H7e(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Lw([jE(t,{props:[Na(s,/:(read-\w+)/,":"+PI+"$1")]})],i);case"::placeholder":return Lw([jE(t,{props:[Na(s,/:(plac\w+)/,":"+za+"input-$1")]}),jE(t,{props:[Na(s,/:(plac\w+)/,":"+PI+"$1")]}),jE(t,{props:[Na(s,/:(plac\w+)/,bu+"input-$1")]})],i)}return""})}},fYe=[cYe],hYe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(j){var k=j.getAttribute("data-emotion");k.indexOf(" ")!==-1&&(document.head.appendChild(j),j.setAttribute("data-s",""))})}var i=t.stylisPlugins||fYe,s={},f,a=[];f=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(j){for(var k=j.getAttribute("data-emotion").split(" "),V=1;V<k.length;V++)s[k[V]]=!0;a.push(j)});var p,y=[lYe,uYe];{var S,E=[tYe,rYe(function(j){S.insert(j)})],I=nYe(y.concat(i,E)),L=function(k){return Lw(J7e(k),I)};p=function(k,V,K,J){S=K,L(k?k+"{"+V.styles+"}":V.styles),J&&(N.inserted[V.name]=!0)}}var N={key:n,sheet:new B7e({key:n,container:f,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:p};return N.sheet.hydrate(a),N},vN={exports:{}},$a={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pQ;function dYe(){if(pQ)return $a;pQ=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,f=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,y=e?Symbol.for("react.concurrent_mode"):60111,S=e?Symbol.for("react.forward_ref"):60112,E=e?Symbol.for("react.suspense"):60113,I=e?Symbol.for("react.suspense_list"):60120,L=e?Symbol.for("react.memo"):60115,N=e?Symbol.for("react.lazy"):60116,j=e?Symbol.for("react.block"):60121,k=e?Symbol.for("react.fundamental"):60117,V=e?Symbol.for("react.responder"):60118,K=e?Symbol.for("react.scope"):60119;function J(Q){if(typeof Q=="object"&&Q!==null){var W=Q.$$typeof;switch(W){case t:switch(Q=Q.type,Q){case p:case y:case r:case s:case i:case E:return Q;default:switch(Q=Q&&Q.$$typeof,Q){case a:case S:case N:case L:case f:return Q;default:return W}}case n:return W}}}function ie(Q){return J(Q)===y}return $a.AsyncMode=p,$a.ConcurrentMode=y,$a.ContextConsumer=a,$a.ContextProvider=f,$a.Element=t,$a.ForwardRef=S,$a.Fragment=r,$a.Lazy=N,$a.Memo=L,$a.Portal=n,$a.Profiler=s,$a.StrictMode=i,$a.Suspense=E,$a.isAsyncMode=function(Q){return ie(Q)||J(Q)===p},$a.isConcurrentMode=ie,$a.isContextConsumer=function(Q){return J(Q)===a},$a.isContextProvider=function(Q){return J(Q)===f},$a.isElement=function(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t},$a.isForwardRef=function(Q){return J(Q)===S},$a.isFragment=function(Q){return J(Q)===r},$a.isLazy=function(Q){return J(Q)===N},$a.isMemo=function(Q){return J(Q)===L},$a.isPortal=function(Q){return J(Q)===n},$a.isProfiler=function(Q){return J(Q)===s},$a.isStrictMode=function(Q){return J(Q)===i},$a.isSuspense=function(Q){return J(Q)===E},$a.isValidElementType=function(Q){return typeof Q=="string"||typeof Q=="function"||Q===r||Q===y||Q===s||Q===i||Q===E||Q===I||typeof Q=="object"&&Q!==null&&(Q.$$typeof===N||Q.$$typeof===L||Q.$$typeof===f||Q.$$typeof===a||Q.$$typeof===S||Q.$$typeof===k||Q.$$typeof===V||Q.$$typeof===K||Q.$$typeof===j)},$a.typeOf=J,$a}var mQ;function pYe(){return mQ||(mQ=1,vN.exports=dYe()),vN.exports}var bN,gQ;function mYe(){if(gQ)return bN;gQ=1;var e=pYe(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=r,s[e.Memo]=i;function f(N){return e.isMemo(N)?i:s[N.$$typeof]||t}var a=Object.defineProperty,p=Object.getOwnPropertyNames,y=Object.getOwnPropertySymbols,S=Object.getOwnPropertyDescriptor,E=Object.getPrototypeOf,I=Object.prototype;function L(N,j,k){if(typeof j!="string"){if(I){var V=E(j);V&&V!==I&&L(N,V,k)}var K=p(j);y&&(K=K.concat(y(j)));for(var J=f(N),ie=f(j),Q=0;Q<K.length;++Q){var W=K[Q];if(!n[W]&&!(k&&k[W])&&!(ie&&ie[W])&&!(J&&J[W])){var te=S(j,W);try{a(N,W,te)}catch{}}}}return N}return bN=L,bN}mYe();var gYe=!0;function yYe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(r+=i+" ")}),r}var tpe=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||gYe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},_Ye=function(t,n,r){tpe(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function vYe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var bYe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},xYe=/[A-Z]|^ms/g,wYe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,npe=function(t){return t.charCodeAt(1)===45},yQ=function(t){return t!=null&&typeof t!="boolean"},xN=iYe(function(e){return npe(e)?e:e.replace(xYe,"-$&").toLowerCase()}),_Q=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(wYe,function(r,i,s){return Um={name:i,styles:s,next:Um},i})}return bYe[t]!==1&&!npe(t)&&typeof n=="number"&&n!==0?n+"px":n};function iA(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Um={name:i.name,styles:i.styles,next:Um},i.name;var s=n;if(s.styles!==void 0){var f=s.next;if(f!==void 0)for(;f!==void 0;)Um={name:f.name,styles:f.styles,next:Um},f=f.next;var a=s.styles+";";return a}return SYe(e,t,n)}case"function":{if(e!==void 0){var p=Um,y=n(e);return Um=p,iA(e,t,y)}break}}var S=n;return S}function SYe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=iA(e,t,n[i])+";";else for(var s in n){var f=n[s];if(typeof f!="object"){var a=f;yQ(a)&&(r+=xN(s)+":"+_Q(s,a)+";")}else if(Array.isArray(f)&&typeof f[0]=="string"&&t==null)for(var p=0;p<f.length;p++)yQ(f[p])&&(r+=xN(s)+":"+_Q(s,f[p])+";");else{var y=iA(e,t,f);switch(s){case"animation":case"animationName":{r+=xN(s)+":"+y+";";break}default:r+=s+"{"+y+"}"}}}return r}var vQ=/label:\s*([^\s;{]+)\s*(;|$)/g,Um;function rpe(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";Um=void 0;var s=e[0];if(s==null||s.raw===void 0)r=!1,i+=iA(n,t,s);else{var f=s;i+=f[0]}for(var a=1;a<e.length;a++)if(i+=iA(n,t,e[a]),r){var p=s;i+=p[a]}vQ.lastIndex=0;for(var y="",S;(S=vQ.exec(i))!==null;)y+="-"+S[1];var E=vYe(i)+y;return{name:E,styles:i,next:Um}}var TYe=function(t){return t()},EYe=ID.useInsertionEffect?ID.useInsertionEffect:!1,AYe=EYe||TYe,ipe=be.createContext(typeof HTMLElement<"u"?hYe({key:"css"}):null);ipe.Provider;var OYe=function(t){return be.forwardRef(function(n,r){var i=be.useContext(ipe);return t(n,i,r)})},CYe=be.createContext({}),Q8={}.hasOwnProperty,_6="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",MYe=function(t,n){var r={};for(var i in n)Q8.call(n,i)&&(r[i]=n[i]);return r[_6]=t,r},DYe=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return tpe(n,r,i),AYe(function(){return _Ye(n,r,i)}),null},IYe=OYe(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var i=e[_6],s=[r],f="";typeof e.className=="string"?f=yYe(t.registered,s,e.className):e.className!=null&&(f=e.className+" ");var a=rpe(s,void 0,be.useContext(CYe));f+=t.key+"-"+a.name;var p={};for(var y in e)Q8.call(e,y)&&y!=="css"&&y!==_6&&(p[y]=e[y]);return p.className=f,n&&(p.ref=n),be.createElement(be.Fragment,null,be.createElement(DYe,{cache:t,serialized:a,isStringTag:typeof i=="string"}),be.createElement(i,p))}),PYe=IYe,Lr=function(t,n){var r=arguments;if(n==null||!Q8.call(n,"css"))return be.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=PYe,s[1]=MYe(t,n);for(var f=2;f<i;f++)s[f]=r[f];return be.createElement.apply(null,s)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Lr||(Lr={}));function J8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rpe(t)}function RYe(){var e=J8.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function kYe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v6=be.useLayoutEffect,LYe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],RI=function(){};function zYe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function NYe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=[].concat(r);if(t&&e)for(var f in t)t.hasOwnProperty(f)&&t[f]&&s.push("".concat(zYe(e,f)));return s.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var bQ=function(t){return GYe(t)?t.filter(Boolean):Ax(t)==="object"&&t!==null?[t]:[]},ape=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var n=y_(t,LYe);return Xr({},n)},ys=function(t,n,r){var i=t.cx,s=t.getStyles,f=t.getClassNames,a=t.className;return{css:s(n,t),className:i(r??{},f(n,t),a)}};function rk(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function FYe(e){return rk(e)?window.innerHeight:e.clientHeight}function ope(e){return rk(e)?window.pageYOffset:e.scrollTop}function kI(e,t){if(rk(e)){window.scrollTo(0,t);return}e.scrollTop=t}function BYe(e){var t=getComputedStyle(e),n=t.position==="absolute",r=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),!(n&&t.position==="static")&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}function jYe(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}function NM(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:RI,i=ope(e),s=t-i,f=10,a=0;function p(){a+=f;var y=jYe(a,i,s,n);kI(e,y),a<n?window.requestAnimationFrame(p):r(e)}p()}function xQ(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=t.offsetHeight/3;r.bottom+i>n.bottom?kI(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):r.top-i<n.top&&kI(e,Math.max(t.offsetTop-i,0))}function UYe(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function wQ(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function $Ye(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var spe=!1,VYe={get passive(){return spe=!0}},FM=typeof window<"u"?window:{};FM.addEventListener&&FM.removeEventListener&&(FM.addEventListener("p",RI,VYe),FM.removeEventListener("p",RI,!1));var qYe=spe;function HYe(e){return e!=null}function GYe(e){return Array.isArray(e)}function BM(e,t,n){return e?t:n}var YYe=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s=Object.entries(t).filter(function(f){var a=Gy(f,1),p=a[0];return!r.includes(p)});return s.reduce(function(f,a){var p=Gy(a,2),y=p[0],S=p[1];return f[y]=S,f},{})},WYe=["children","innerProps"],XYe=["children","innerProps"];function ZYe(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,s=e.shouldScroll,f=e.isFixedPosition,a=e.controlHeight,p=BYe(n),y={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return y;var S=p.getBoundingClientRect(),E=S.height,I=n.getBoundingClientRect(),L=I.bottom,N=I.height,j=I.top,k=n.offsetParent.getBoundingClientRect(),V=k.top,K=f?window.innerHeight:FYe(p),J=ope(p),ie=parseInt(getComputedStyle(n).marginBottom,10),Q=parseInt(getComputedStyle(n).marginTop,10),W=V-Q,te=K-j,X=W+J,ae=E-J-j,le=L-K+J+ie,ge=J+j-Q,ye=160;switch(i){case"auto":case"bottom":if(te>=N)return{placement:"bottom",maxHeight:t};if(ae>=N&&!f)return s&&NM(p,le,ye),{placement:"bottom",maxHeight:t};if(!f&&ae>=r||f&&te>=r){s&&NM(p,le,ye);var De=f?te-ie:ae-ie;return{placement:"bottom",maxHeight:De}}if(i==="auto"||f){var He=t,Be=f?W:X;return Be>=r&&(He=Math.min(Be-ie-a,t)),{placement:"top",maxHeight:He}}if(i==="bottom")return s&&kI(p,le),{placement:"bottom",maxHeight:t};break;case"top":if(W>=N)return{placement:"top",maxHeight:t};if(X>=N&&!f)return s&&NM(p,ge,ye),{placement:"top",maxHeight:t};if(!f&&X>=r||f&&W>=r){var Ee=t;return(!f&&X>=r||f&&W>=r)&&(Ee=f?W-Q:X-Q),s&&NM(p,ge,ye),{placement:"top",maxHeight:Ee}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return y}function KYe(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var lpe=function(t){return t==="auto"?"bottom":t},QYe=function(t,n){var r,i=t.placement,s=t.theme,f=s.borderRadius,a=s.spacing,p=s.colors;return Xr((r={label:"menu"},o2(r,KYe(i),"100%"),o2(r,"position","absolute"),o2(r,"width","100%"),o2(r,"zIndex",1),r),n?{}:{backgroundColor:p.neutral0,borderRadius:f,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},upe=be.createContext(null),JYe=function(t){var n=t.children,r=t.minMenuHeight,i=t.maxMenuHeight,s=t.menuPlacement,f=t.menuPosition,a=t.menuShouldScrollIntoView,p=t.theme,y=be.useContext(upe)||{},S=y.setPortalPlacement,E=be.useRef(null),I=be.useState(i),L=Gy(I,2),N=L[0],j=L[1],k=be.useState(null),V=Gy(k,2),K=V[0],J=V[1],ie=p.spacing.controlHeight;return v6(function(){var Q=E.current;if(Q){var W=f==="fixed",te=a&&!W,X=ZYe({maxHeight:i,menuEl:Q,minHeight:r,placement:s,shouldScroll:te,isFixedPosition:W,controlHeight:ie});j(X.maxHeight),J(X.placement),S==null||S(X.placement)}},[i,s,f,a,r,S,ie]),n({ref:E,placerProps:Xr(Xr({},t),{},{placement:K||lpe(s),maxHeight:N})})},eWe=function(t){var n=t.children,r=t.innerRef,i=t.innerProps;return Lr("div",Kr({},ys(t,"menu",{menu:!0}),{ref:r},i),n)},tWe=eWe,nWe=function(t,n){var r=t.maxHeight,i=t.theme.spacing.baseUnit;return Xr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},rWe=function(t){var n=t.children,r=t.innerProps,i=t.innerRef,s=t.isMulti;return Lr("div",Kr({},ys(t,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},r),n)},cpe=function(t,n){var r=t.theme,i=r.spacing.baseUnit,s=r.colors;return Xr({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},iWe=cpe,aWe=cpe,oWe=function(t){var n=t.children,r=n===void 0?"No options":n,i=t.innerProps,s=y_(t,WYe);return Lr("div",Kr({},ys(Xr(Xr({},s),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},sWe=function(t){var n=t.children,r=n===void 0?"Loading...":n,i=t.innerProps,s=y_(t,XYe);return Lr("div",Kr({},ys(Xr(Xr({},s),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},lWe=function(t){var n=t.rect,r=t.offset,i=t.position;return{left:n.left,position:i,top:r,width:n.width,zIndex:1}},uWe=function(t){var n=t.appendTo,r=t.children,i=t.controlElement,s=t.innerProps,f=t.menuPlacement,a=t.menuPosition,p=be.useRef(null),y=be.useRef(null),S=be.useState(lpe(f)),E=Gy(S,2),I=E[0],L=E[1],N=be.useMemo(function(){return{setPortalPlacement:L}},[]),j=be.useState(null),k=Gy(j,2),V=k[0],K=k[1],J=be.useCallback(function(){if(i){var te=UYe(i),X=a==="fixed"?0:window.pageYOffset,ae=te[I]+X;(ae!==(V==null?void 0:V.offset)||te.left!==(V==null?void 0:V.rect.left)||te.width!==(V==null?void 0:V.rect.width))&&K({offset:ae,rect:te})}},[i,a,I,V==null?void 0:V.offset,V==null?void 0:V.rect.left,V==null?void 0:V.rect.width]);v6(function(){J()},[J]);var ie=be.useCallback(function(){typeof y.current=="function"&&(y.current(),y.current=null),i&&p.current&&(y.current=Rde(i,p.current,J,{elementResize:"ResizeObserver"in window}))},[i,J]);v6(function(){ie()},[ie]);var Q=be.useCallback(function(te){p.current=te,ie()},[ie]);if(!n&&a!=="fixed"||!V)return null;var W=Lr("div",Kr({ref:Q},ys(Xr(Xr({},t),{},{offset:V.offset,position:a,rect:V.rect}),"menuPortal",{"menu-portal":!0}),s),r);return Lr(upe.Provider,{value:N},n?VU.createPortal(W,n):W)},cWe=function(t){var n=t.isDisabled,r=t.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},fWe=function(t){var n=t.children,r=t.innerProps,i=t.isDisabled,s=t.isRtl;return Lr("div",Kr({},ys(t,"container",{"--is-disabled":i,"--is-rtl":s}),r),n)},hWe=function(t,n){var r=t.theme.spacing,i=t.isMulti,s=t.hasValue,f=t.selectProps.controlShouldRenderValue;return Xr({alignItems:"center",display:i&&s&&f?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},dWe=function(t){var n=t.children,r=t.innerProps,i=t.isMulti,s=t.hasValue;return Lr("div",Kr({},ys(t,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),r),n)},pWe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},mWe=function(t){var n=t.children,r=t.innerProps;return Lr("div",Kr({},ys(t,"indicatorsContainer",{indicators:!0}),r),n)},SQ,gWe=["size"],yWe=["innerProps","isRtl","size"],_We={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},fpe=function(t){var n=t.size,r=y_(t,gWe);return Lr("svg",Kr({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:_We},r))},eq=function(t){return Lr(fpe,Kr({size:20},t),Lr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},hpe=function(t){return Lr(fpe,Kr({size:20},t),Lr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},dpe=function(t,n){var r=t.isFocused,i=t.theme,s=i.spacing.baseUnit,f=i.colors;return Xr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?f.neutral60:f.neutral20,padding:s*2,":hover":{color:r?f.neutral80:f.neutral40}})},vWe=dpe,bWe=function(t){var n=t.children,r=t.innerProps;return Lr("div",Kr({},ys(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||Lr(hpe,null))},xWe=dpe,wWe=function(t){var n=t.children,r=t.innerProps;return Lr("div",Kr({},ys(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||Lr(eq,null))},SWe=function(t,n){var r=t.isDisabled,i=t.theme,s=i.spacing.baseUnit,f=i.colors;return Xr({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?f.neutral10:f.neutral20,marginBottom:s*2,marginTop:s*2})},TWe=function(t){var n=t.innerProps;return Lr("span",Kr({},n,ys(t,"indicatorSeparator",{"indicator-separator":!0})))},EWe=RYe(SQ||(SQ=kYe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),AWe=function(t,n){var r=t.isFocused,i=t.size,s=t.theme,f=s.colors,a=s.spacing.baseUnit;return Xr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?f.neutral60:f.neutral20,padding:a*2})},wN=function(t){var n=t.delay,r=t.offset;return Lr("span",{css:J8({animation:"".concat(EWe," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},OWe=function(t){var n=t.innerProps,r=t.isRtl,i=t.size,s=i===void 0?4:i,f=y_(t,yWe);return Lr("div",Kr({},ys(Xr(Xr({},f),{},{innerProps:n,isRtl:r,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Lr(wN,{delay:0,offset:r}),Lr(wN,{delay:160,offset:!0}),Lr(wN,{delay:320,offset:!r}))},CWe=function(t,n){var r=t.isDisabled,i=t.isFocused,s=t.theme,f=s.colors,a=s.borderRadius,p=s.spacing;return Xr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:p.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?f.neutral5:f.neutral0,borderColor:r?f.neutral10:i?f.primary:f.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(f.primary):void 0,"&:hover":{borderColor:i?f.primary:f.neutral30}})},MWe=function(t){var n=t.children,r=t.isDisabled,i=t.isFocused,s=t.innerRef,f=t.innerProps,a=t.menuIsOpen;return Lr("div",Kr({ref:s},ys(t,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":a}),f,{"aria-disabled":r||void 0}),n)},DWe=MWe,IWe=["data"],PWe=function(t,n){var r=t.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},RWe=function(t){var n=t.children,r=t.cx,i=t.getStyles,s=t.getClassNames,f=t.Heading,a=t.headingProps,p=t.innerProps,y=t.label,S=t.theme,E=t.selectProps;return Lr("div",Kr({},ys(t,"group",{group:!0}),p),Lr(f,Kr({},a,{selectProps:E,theme:S,getStyles:i,getClassNames:s,cx:r}),y),Lr("div",null,n))},kWe=function(t,n){var r=t.theme,i=r.colors,s=r.spacing;return Xr({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},LWe=function(t){var n=ape(t);n.data;var r=y_(n,IWe);return Lr("div",Kr({},ys(t,"groupHeading",{"group-heading":!0}),r))},zWe=RWe,NWe=["innerRef","isDisabled","isHidden","inputClassName"],FWe=function(t,n){var r=t.isDisabled,i=t.value,s=t.theme,f=s.spacing,a=s.colors;return Xr(Xr({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},BWe),n?{}:{margin:f.baseUnit/2,paddingBottom:f.baseUnit/2,paddingTop:f.baseUnit/2,color:a.neutral80})},ppe={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},BWe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Xr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},ppe)},jWe=function(t){return Xr({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},ppe)},UWe=function(t){var n=t.cx,r=t.value,i=ape(t),s=i.innerRef,f=i.isDisabled,a=i.isHidden,p=i.inputClassName,y=y_(i,NWe);return Lr("div",Kr({},ys(t,"input",{"input-container":!0}),{"data-value":r||""}),Lr("input",Kr({className:n({input:!0},p),ref:s,style:jWe(a),disabled:f},y)))},$We=UWe,VWe=function(t,n){var r=t.theme,i=r.spacing,s=r.borderRadius,f=r.colors;return Xr({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:f.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},qWe=function(t,n){var r=t.theme,i=r.borderRadius,s=r.colors,f=t.cropWithEllipsis;return Xr({overflow:"hidden",textOverflow:f||f===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},HWe=function(t,n){var r=t.theme,i=r.spacing,s=r.borderRadius,f=r.colors,a=t.isFocused;return Xr({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:a?f.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:f.dangerLight,color:f.danger}})},mpe=function(t){var n=t.children,r=t.innerProps;return Lr("div",r,n)},GWe=mpe,YWe=mpe;function WWe(e){var t=e.children,n=e.innerProps;return Lr("div",Kr({role:"button"},n),t||Lr(eq,{size:14}))}var XWe=function(t){var n=t.children,r=t.components,i=t.data,s=t.innerProps,f=t.isDisabled,a=t.removeProps,p=t.selectProps,y=r.Container,S=r.Label,E=r.Remove;return Lr(y,{data:i,innerProps:Xr(Xr({},ys(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":f})),s),selectProps:p},Lr(S,{data:i,innerProps:Xr({},ys(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:p},n),Lr(E,{data:i,innerProps:Xr(Xr({},ys(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},a),selectProps:p}))},ZWe=XWe,KWe=function(t,n){var r=t.isDisabled,i=t.isFocused,s=t.isSelected,f=t.theme,a=f.spacing,p=f.colors;return Xr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?p.primary:i?p.primary25:"transparent",color:r?p.neutral20:s?p.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:s?p.primary:p.primary50}})},QWe=function(t){var n=t.children,r=t.isDisabled,i=t.isFocused,s=t.isSelected,f=t.innerRef,a=t.innerProps;return Lr("div",Kr({},ys(t,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":s}),{ref:f,"aria-disabled":r},a),n)},JWe=QWe,eXe=function(t,n){var r=t.theme,i=r.spacing,s=r.colors;return Xr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},tXe=function(t){var n=t.children,r=t.innerProps;return Lr("div",Kr({},ys(t,"placeholder",{placeholder:!0}),r),n)},nXe=tXe,rXe=function(t,n){var r=t.isDisabled,i=t.theme,s=i.spacing,f=i.colors;return Xr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?f.neutral40:f.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},iXe=function(t){var n=t.children,r=t.isDisabled,i=t.innerProps;return Lr("div",Kr({},ys(t,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),n)},aXe=iXe,oXe={ClearIndicator:wWe,Control:DWe,DropdownIndicator:bWe,DownChevron:hpe,CrossIcon:eq,Group:zWe,GroupHeading:LWe,IndicatorsContainer:mWe,IndicatorSeparator:TWe,Input:$We,LoadingIndicator:OWe,Menu:tWe,MenuList:rWe,MenuPortal:uWe,LoadingMessage:sWe,NoOptionsMessage:oWe,MultiValue:ZWe,MultiValueContainer:GWe,MultiValueLabel:YWe,MultiValueRemove:WWe,Option:JWe,Placeholder:nXe,SelectContainer:fWe,SingleValue:aXe,ValueContainer:dWe},sXe=function(t){return Xr(Xr({},oXe),t.components)},TQ=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function lXe(e,t){return!!(e===t||TQ(e)&&TQ(t))}function uXe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!lXe(e[n],t[n]))return!1;return!0}function cXe(e,t){t===void 0&&(t=uXe);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&t(i,n.lastArgs))return n.lastResult;var f=e.apply(this,i);return n={lastResult:f,lastArgs:i,lastThis:this},f}return r.clear=function(){n=null},r}var fXe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},hXe=function(t){return Lr("span",Kr({css:fXe},t))},EQ=hXe,dXe={guidance:function(t){var n=t.isSearchable,r=t.isMulti,i=t.tabSelectsValue,s=t.context,f=t.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return f?"".concat(t["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var n=t.action,r=t.label,i=r===void 0?"":r,s=t.labels,f=t.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return f?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(t){var n=t.context,r=t.focused,i=t.options,s=t.label,f=s===void 0?"":s,a=t.selectValue,p=t.isDisabled,y=t.isSelected,S=t.isAppleDevice,E=function(j,k){return j&&j.length?"".concat(j.indexOf(k)+1," of ").concat(j.length):""};if(n==="value"&&a)return"value ".concat(f," focused, ").concat(E(a,r),".");if(n==="menu"&&S){var I=p?" disabled":"",L="".concat(y?" selected":"").concat(I);return"".concat(f).concat(L,", ").concat(E(i,r),".")}return""},onFilter:function(t){var n=t.inputValue,r=t.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},pXe=function(t){var n=t.ariaSelection,r=t.focusedOption,i=t.focusedValue,s=t.focusableOptions,f=t.isFocused,a=t.selectValue,p=t.selectProps,y=t.id,S=t.isAppleDevice,E=p.ariaLiveMessages,I=p.getOptionLabel,L=p.inputValue,N=p.isMulti,j=p.isOptionDisabled,k=p.isSearchable,V=p.menuIsOpen,K=p.options,J=p.screenReaderStatus,ie=p.tabSelectsValue,Q=p.isLoading,W=p["aria-label"],te=p["aria-live"],X=be.useMemo(function(){return Xr(Xr({},dXe),E||{})},[E]),ae=be.useMemo(function(){var Be="";if(n&&X.onChange){var Ee=n.option,Fe=n.options,at=n.removedValue,yt=n.removedValues,je=n.value,Ke=function(Ut){return Array.isArray(Ut)?null:Ut},it=at||Ee||Ke(je),Pe=it?I(it):"",jt=Fe||yt||void 0,sn=jt?jt.map(I):[],dn=Xr({isDisabled:it&&j(it,a),label:Pe,labels:sn},n);Be=X.onChange(dn)}return Be},[n,X,j,a,I]),le=be.useMemo(function(){var Be="",Ee=r||i,Fe=!!(r&&a&&a.includes(r));if(Ee&&X.onFocus){var at={focused:Ee,label:I(Ee),isDisabled:j(Ee,a),isSelected:Fe,options:s,context:Ee===r?"menu":"value",selectValue:a,isAppleDevice:S};Be=X.onFocus(at)}return Be},[r,i,I,j,X,s,a,S]),ge=be.useMemo(function(){var Be="";if(V&&K.length&&!Q&&X.onFilter){var Ee=J({count:s.length});Be=X.onFilter({inputValue:L,resultsMessage:Ee})}return Be},[s,L,V,X,K,J,Q]),ye=(n==null?void 0:n.action)==="initial-input-focus",De=be.useMemo(function(){var Be="";if(X.guidance){var Ee=i?"value":V?"menu":"input";Be=X.guidance({"aria-label":W,context:Ee,isDisabled:r&&j(r,a),isMulti:N,isSearchable:k,tabSelectsValue:ie,isInitialFocus:ye})}return Be},[W,r,i,N,j,k,V,X,a,ie,ye]),He=Lr(be.Fragment,null,Lr("span",{id:"aria-selection"},ae),Lr("span",{id:"aria-focused"},le),Lr("span",{id:"aria-results"},ge),Lr("span",{id:"aria-guidance"},De));return Lr(be.Fragment,null,Lr(EQ,{id:y},ye&&He),Lr(EQ,{"aria-live":te,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},f&&!ye&&He))},mXe=pXe,b6=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],gXe=new RegExp("["+b6.map(function(e){return e.letters}).join("")+"]","g"),gpe={};for(var SN=0;SN<b6.length;SN++)for(var TN=b6[SN],EN=0;EN<TN.letters.length;EN++)gpe[TN.letters[EN]]=TN.base;var ype=function(t){return t.replace(gXe,function(n){return gpe[n]})},yXe=cXe(ype),AQ=function(t){return t.replace(/^\s+|\s+$/g,"")},_Xe=function(t){return"".concat(t.label," ").concat(t.value)},vXe=function(t){return function(n,r){if(n.data.__isNew__)return!0;var i=Xr({ignoreCase:!0,ignoreAccents:!0,stringify:_Xe,trim:!0,matchFrom:"any"},t),s=i.ignoreCase,f=i.ignoreAccents,a=i.stringify,p=i.trim,y=i.matchFrom,S=p?AQ(r):r,E=p?AQ(a(n)):a(n);return s&&(S=S.toLowerCase(),E=E.toLowerCase()),f&&(S=yXe(S),E=ype(E)),y==="start"?E.substr(0,S.length)===S:E.indexOf(S)>-1}},bXe=["innerRef"];function xXe(e){var t=e.innerRef,n=y_(e,bXe),r=YYe(n,"onExited","in","enter","exit","appear");return Lr("input",Kr({ref:t},r,{css:J8({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var wXe=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function SXe(e){var t=e.isEnabled,n=e.onBottomArrive,r=e.onBottomLeave,i=e.onTopArrive,s=e.onTopLeave,f=be.useRef(!1),a=be.useRef(!1),p=be.useRef(0),y=be.useRef(null),S=be.useCallback(function(k,V){if(y.current!==null){var K=y.current,J=K.scrollTop,ie=K.scrollHeight,Q=K.clientHeight,W=y.current,te=V>0,X=ie-Q-J,ae=!1;X>V&&f.current&&(r&&r(k),f.current=!1),te&&a.current&&(s&&s(k),a.current=!1),te&&V>X?(n&&!f.current&&n(k),W.scrollTop=ie,ae=!0,f.current=!0):!te&&-V>J&&(i&&!a.current&&i(k),W.scrollTop=0,ae=!0,a.current=!0),ae&&wXe(k)}},[n,r,i,s]),E=be.useCallback(function(k){S(k,k.deltaY)},[S]),I=be.useCallback(function(k){p.current=k.changedTouches[0].clientY},[]),L=be.useCallback(function(k){var V=p.current-k.changedTouches[0].clientY;S(k,V)},[S]),N=be.useCallback(function(k){if(k){var V=qYe?{passive:!1}:!1;k.addEventListener("wheel",E,V),k.addEventListener("touchstart",I,V),k.addEventListener("touchmove",L,V)}},[L,I,E]),j=be.useCallback(function(k){k&&(k.removeEventListener("wheel",E,!1),k.removeEventListener("touchstart",I,!1),k.removeEventListener("touchmove",L,!1))},[L,I,E]);return be.useEffect(function(){if(t){var k=y.current;return N(k),function(){j(k)}}},[t,N,j]),function(k){y.current=k}}var OQ=["boxSizing","height","overflow","paddingRight","position"],CQ={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function MQ(e){e.cancelable&&e.preventDefault()}function DQ(e){e.stopPropagation()}function IQ(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;e===0?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function PQ(){return"ontouchstart"in window||navigator.maxTouchPoints}var RQ=!!(typeof window<"u"&&window.document&&window.document.createElement),UE=0,uw={capture:!1,passive:!1};function TXe(e){var t=e.isEnabled,n=e.accountForScrollbars,r=n===void 0?!0:n,i=be.useRef({}),s=be.useRef(null),f=be.useCallback(function(p){if(RQ){var y=document.body,S=y&&y.style;if(r&&OQ.forEach(function(N){var j=S&&S[N];i.current[N]=j}),r&&UE<1){var E=parseInt(i.current.paddingRight,10)||0,I=document.body?document.body.clientWidth:0,L=window.innerWidth-I+E||0;Object.keys(CQ).forEach(function(N){var j=CQ[N];S&&(S[N]=j)}),S&&(S.paddingRight="".concat(L,"px"))}y&&PQ()&&(y.addEventListener("touchmove",MQ,uw),p&&(p.addEventListener("touchstart",IQ,uw),p.addEventListener("touchmove",DQ,uw))),UE+=1}},[r]),a=be.useCallback(function(p){if(RQ){var y=document.body,S=y&&y.style;UE=Math.max(UE-1,0),r&&UE<1&&OQ.forEach(function(E){var I=i.current[E];S&&(S[E]=I)}),y&&PQ()&&(y.removeEventListener("touchmove",MQ,uw),p&&(p.removeEventListener("touchstart",IQ,uw),p.removeEventListener("touchmove",DQ,uw)))}},[r]);return be.useEffect(function(){if(t){var p=s.current;return f(p),function(){a(p)}}},[t,f,a]),function(p){s.current=p}}var EXe=function(t){var n=t.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},AXe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function OXe(e){var t=e.children,n=e.lockEnabled,r=e.captureEnabled,i=r===void 0?!0:r,s=e.onBottomArrive,f=e.onBottomLeave,a=e.onTopArrive,p=e.onTopLeave,y=SXe({isEnabled:i,onBottomArrive:s,onBottomLeave:f,onTopArrive:a,onTopLeave:p}),S=TXe({isEnabled:n}),E=function(L){y(L),S(L)};return Lr(be.Fragment,null,n&&Lr("div",{onClick:EXe,css:AXe}),t(E))}var CXe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},MXe=function(t){var n=t.name,r=t.onFocus;return Lr("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:CXe,value:"",onChange:function(){}})},DXe=MXe;function tq(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function IXe(){return tq(/^iPhone/i)}function _pe(){return tq(/^Mac/i)}function PXe(){return tq(/^iPad/i)||_pe()&&navigator.maxTouchPoints>1}function RXe(){return IXe()||PXe()}function kXe(){return _pe()||RXe()}var LXe=function(t){return t.label},zXe=function(t){return t.label},NXe=function(t){return t.value},FXe=function(t){return!!t.isDisabled},BXe={clearIndicator:xWe,container:cWe,control:CWe,dropdownIndicator:vWe,group:PWe,groupHeading:kWe,indicatorsContainer:pWe,indicatorSeparator:SWe,input:FWe,loadingIndicator:AWe,loadingMessage:aWe,menu:QYe,menuList:nWe,menuPortal:lWe,multiValue:VWe,multiValueLabel:qWe,multiValueRemove:HWe,noOptionsMessage:iWe,option:KWe,placeholder:eXe,singleValue:rXe,valueContainer:hWe},jXe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},UXe=4,vpe=4,$Xe=38,VXe=vpe*2,qXe={baseUnit:vpe,controlHeight:$Xe,menuGutter:VXe},AN={borderRadius:UXe,colors:jXe,spacing:qXe},HXe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:wQ(),captureMenuScroll:!wQ(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:vXe(),formatGroupLabel:LXe,getOptionLabel:zXe,getOptionValue:NXe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:FXe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!$Ye(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var n=t.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function kQ(e,t,n,r){var i=wpe(e,t,n),s=Spe(e,t,n),f=xpe(e,t),a=LI(e,t);return{type:"option",data:t,isDisabled:i,isSelected:s,label:f,value:a,index:r}}function OD(e,t){return e.options.map(function(n,r){if("options"in n){var i=n.options.map(function(f,a){return kQ(e,f,t,a)}).filter(function(f){return zQ(e,f)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var s=kQ(e,n,t,r);return zQ(e,s)?s:void 0}).filter(HYe)}function bpe(e){return e.reduce(function(t,n){return n.type==="group"?t.push.apply(t,W8(n.options.map(function(r){return r.data}))):t.push(n.data),t},[])}function LQ(e,t){return e.reduce(function(n,r){return r.type==="group"?n.push.apply(n,W8(r.options.map(function(i){return{data:i.data,id:"".concat(t,"-").concat(r.index,"-").concat(i.index)}}))):n.push({data:r.data,id:"".concat(t,"-").concat(r.index)}),n},[])}function GXe(e,t){return bpe(OD(e,t))}function zQ(e,t){var n=e.inputValue,r=n===void 0?"":n,i=t.data,s=t.isSelected,f=t.label,a=t.value;return(!Epe(e)||!s)&&Tpe(e,{label:f,value:a,data:i},r)}function YXe(e,t){var n=e.focusedValue,r=e.selectValue,i=r.indexOf(n);if(i>-1){var s=t.indexOf(n);if(s>-1)return n;if(i<t.length)return t[i]}return null}function WXe(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}var ON=function(t,n){var r,i=(r=t.find(function(s){return s.data===n}))===null||r===void 0?void 0:r.id;return i||null},xpe=function(t,n){return t.getOptionLabel(n)},LI=function(t,n){return t.getOptionValue(n)};function wpe(e,t,n){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,n):!1}function Spe(e,t,n){if(n.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,n);var r=LI(e,t);return n.some(function(i){return LI(e,i)===r})}function Tpe(e,t,n){return e.filterOption?e.filterOption(t,n):!0}var Epe=function(t){var n=t.hideSelectedOptions,r=t.isMulti;return n===void 0?r:n},XXe=1,Ape=(function(e){D7e(n,e);var t=R7e(n);function n(r){var i;if(C7e(this,n),i=t.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(p){i.controlRef=p},i.focusedOptionRef=null,i.getFocusedOptionRef=function(p){i.focusedOptionRef=p},i.menuListRef=null,i.getMenuListRef=function(p){i.menuListRef=p},i.inputRef=null,i.getInputRef=function(p){i.inputRef=p},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(p,y){var S=i.props,E=S.onChange,I=S.name;y.name=I,i.ariaOnChange(p,y),E(p,y)},i.setValue=function(p,y,S){var E=i.props,I=E.closeMenuOnSelect,L=E.isMulti,N=E.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:N}),I&&(i.setState({inputIsHiddenAfterUpdate:!L}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(p,{action:y,option:S})},i.selectOption=function(p){var y=i.props,S=y.blurInputOnSelect,E=y.isMulti,I=y.name,L=i.state.selectValue,N=E&&i.isOptionSelected(p,L),j=i.isOptionDisabled(p,L);if(N){var k=i.getOptionValue(p);i.setValue(L.filter(function(V){return i.getOptionValue(V)!==k}),"deselect-option",p)}else if(!j)E?i.setValue([].concat(W8(L),[p]),"select-option",p):i.setValue(p,"select-option");else{i.ariaOnChange(p,{action:"select-option",option:p,name:I});return}S&&i.blurInput()},i.removeValue=function(p){var y=i.props.isMulti,S=i.state.selectValue,E=i.getOptionValue(p),I=S.filter(function(N){return i.getOptionValue(N)!==E}),L=BM(y,I,I[0]||null);i.onChange(L,{action:"remove-value",removedValue:p}),i.focusInput()},i.clearValue=function(){var p=i.state.selectValue;i.onChange(BM(i.props.isMulti,[],null),{action:"clear",removedValues:p})},i.popValue=function(){var p=i.props.isMulti,y=i.state.selectValue,S=y[y.length-1],E=y.slice(0,y.length-1),I=BM(p,E,E[0]||null);S&&i.onChange(I,{action:"pop-value",removedValue:S})},i.getFocusedOptionId=function(p){return ON(i.state.focusableOptionsWithIds,p)},i.getFocusableOptionsWithIds=function(){return LQ(OD(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];return NYe.apply(void 0,[i.props.classNamePrefix].concat(y))},i.getOptionLabel=function(p){return xpe(i.props,p)},i.getOptionValue=function(p){return LI(i.props,p)},i.getStyles=function(p,y){var S=i.props.unstyled,E=BXe[p](y,S);E.boxSizing="border-box";var I=i.props.styles[p];return I?I(E,y):E},i.getClassNames=function(p,y){var S,E;return(S=(E=i.props.classNames)[p])===null||S===void 0?void 0:S.call(E,y)},i.getElementId=function(p){return"".concat(i.state.instancePrefix,"-").concat(p)},i.getComponents=function(){return sXe(i.props)},i.buildCategorizedOptions=function(){return OD(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return bpe(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(p,y){i.setState({ariaSelection:Xr({value:p},y)})},i.onMenuMouseDown=function(p){p.button===0&&(p.stopPropagation(),p.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(p){i.blockOptionHover=!1},i.onControlMouseDown=function(p){if(!p.defaultPrevented){var y=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?p.target.tagName!=="INPUT"&&p.target.tagName!=="TEXTAREA"&&i.onMenuClose():y&&i.openMenu("first"):(y&&(i.openAfterFocus=!0),i.focusInput()),p.target.tagName!=="INPUT"&&p.target.tagName!=="TEXTAREA"&&p.preventDefault()}},i.onDropdownIndicatorMouseDown=function(p){if(!(p&&p.type==="mousedown"&&p.button!==0)&&!i.props.isDisabled){var y=i.props,S=y.isMulti,E=y.menuIsOpen;i.focusInput(),E?(i.setState({inputIsHiddenAfterUpdate:!S}),i.onMenuClose()):i.openMenu("first"),p.preventDefault()}},i.onClearIndicatorMouseDown=function(p){p&&p.type==="mousedown"&&p.button!==0||(i.clearValue(),p.preventDefault(),i.openAfterFocus=!1,p.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(p){typeof i.props.closeMenuOnScroll=="boolean"?p.target instanceof HTMLElement&&rk(p.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(p)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(p){var y=p.touches,S=y&&y.item(0);S&&(i.initialTouchX=S.clientX,i.initialTouchY=S.clientY,i.userIsDragging=!1)},i.onTouchMove=function(p){var y=p.touches,S=y&&y.item(0);if(S){var E=Math.abs(S.clientX-i.initialTouchX),I=Math.abs(S.clientY-i.initialTouchY),L=5;i.userIsDragging=E>L||I>L}},i.onTouchEnd=function(p){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(p.target)&&i.menuListRef&&!i.menuListRef.contains(p.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(p){i.userIsDragging||i.onControlMouseDown(p)},i.onClearIndicatorTouchEnd=function(p){i.userIsDragging||i.onClearIndicatorMouseDown(p)},i.onDropdownIndicatorTouchEnd=function(p){i.userIsDragging||i.onDropdownIndicatorMouseDown(p)},i.handleInputChange=function(p){var y=i.props.inputValue,S=p.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(S,{action:"input-change",prevInputValue:y}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(p){i.props.onFocus&&i.props.onFocus(p),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(p){var y=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(p),i.onInputChange("",{action:"input-blur",prevInputValue:y}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(p){if(!(i.blockOptionHover||i.state.focusedOption===p)){var y=i.getFocusableOptions(),S=y.indexOf(p);i.setState({focusedOption:p,focusedOptionId:S>-1?i.getFocusedOptionId(p):null})}},i.shouldHideSelectedOptions=function(){return Epe(i.props)},i.onValueInputFocus=function(p){p.preventDefault(),p.stopPropagation(),i.focus()},i.onKeyDown=function(p){var y=i.props,S=y.isMulti,E=y.backspaceRemovesValue,I=y.escapeClearsValue,L=y.inputValue,N=y.isClearable,j=y.isDisabled,k=y.menuIsOpen,V=y.onKeyDown,K=y.tabSelectsValue,J=y.openMenuOnFocus,ie=i.state,Q=ie.focusedOption,W=ie.focusedValue,te=ie.selectValue;if(!j&&!(typeof V=="function"&&(V(p),p.defaultPrevented))){switch(i.blockOptionHover=!0,p.key){case"ArrowLeft":if(!S||L)return;i.focusValue("previous");break;case"ArrowRight":if(!S||L)return;i.focusValue("next");break;case"Delete":case"Backspace":if(L)return;if(W)i.removeValue(W);else{if(!E)return;S?i.popValue():N&&i.clearValue()}break;case"Tab":if(i.isComposing||p.shiftKey||!k||!K||!Q||J&&i.isOptionSelected(Q,te))return;i.selectOption(Q);break;case"Enter":if(p.keyCode===229)break;if(k){if(!Q||i.isComposing)return;i.selectOption(Q);break}return;case"Escape":k?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:L}),i.onMenuClose()):N&&I&&i.clearValue();break;case" ":if(L)return;if(!k){i.openMenu("first");break}if(!Q)return;i.selectOption(Q);break;case"ArrowUp":k?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":k?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!k)return;i.focusOption("pageup");break;case"PageDown":if(!k)return;i.focusOption("pagedown");break;case"Home":if(!k)return;i.focusOption("first");break;case"End":if(!k)return;i.focusOption("last");break;default:return}p.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++XXe),i.state.selectValue=bQ(r.value),r.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),f=i.buildFocusableOptions(),a=f.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=f[a],i.state.focusedOptionId=ON(s,f[a])}return i}return M7e(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&xQ(this.menuListRef,this.focusedOptionRef),kXe()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var s=this.props,f=s.isDisabled,a=s.menuIsOpen,p=this.state.isFocused;(p&&!f&&i.isDisabled||p&&a&&!i.menuIsOpen)&&this.focusInput(),p&&f&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!p&&!f&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(xQ(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,f=this.state,a=f.selectValue,p=f.isFocused,y=this.buildFocusableOptions(),S=i==="first"?0:y.length-1;if(!this.props.isMulti){var E=y.indexOf(a[0]);E>-1&&(S=E)}this.scrollToFocusedOptionOnUpdate=!(p&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:y[S],focusedOptionId:this.getFocusedOptionId(y[S])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,f=s.selectValue,a=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var p=f.indexOf(a);a||(p=-1);var y=f.length-1,S=-1;if(f.length){switch(i){case"previous":p===0?S=0:p===-1?S=y:S=p-1;break;case"next":p>-1&&p<y&&(S=p+1);break}this.setState({inputIsHidden:S!==-1,focusedValue:f[S]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,f=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var p=0,y=a.indexOf(f);f||(y=-1),i==="up"?p=y>0?y-1:a.length-1:i==="down"?p=(y+1)%a.length:i==="pageup"?(p=y-s,p<0&&(p=0)):i==="pagedown"?(p=y+s,p>a.length-1&&(p=a.length-1)):i==="last"&&(p=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[p],focusedValue:null,focusedOptionId:this.getFocusedOptionId(a[p])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(AN):Xr(Xr({},AN),this.props.theme):AN})},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,f=this.getStyles,a=this.getClassNames,p=this.getValue,y=this.selectOption,S=this.setValue,E=this.props,I=E.isMulti,L=E.isRtl,N=E.options,j=this.hasValue();return{clearValue:i,cx:s,getStyles:f,getClassNames:a,getValue:p,hasValue:j,isMulti:I,isRtl:L,options:N,selectOption:y,selectProps:E,setValue:S,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,f=i.isMulti;return s===void 0?f:s}},{key:"isOptionDisabled",value:function(i,s){return wpe(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return Spe(this.props,i,s)}},{key:"filterOption",value:function(i,s){return Tpe(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var f=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:f,selectValue:a})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var i=this.props,s=i.isDisabled,f=i.isSearchable,a=i.inputId,p=i.inputValue,y=i.tabIndex,S=i.form,E=i.menuIsOpen,I=i.required,L=this.getComponents(),N=L.Input,j=this.state,k=j.inputIsHidden,V=j.ariaSelection,K=this.commonProps,J=a||this.getElementId("input"),ie=Xr(Xr(Xr({"aria-autocomplete":"list","aria-expanded":E,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":I,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},E&&{"aria-controls":this.getElementId("listbox")}),!f&&{"aria-readonly":!0}),this.hasValue()?(V==null?void 0:V.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return f?be.createElement(N,Kr({},K,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:J,innerRef:this.getInputRef,isDisabled:s,isHidden:k,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:y,form:S,type:"text",value:p},ie)):be.createElement(xXe,Kr({id:J,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:RI,onFocus:this.onInputFocus,disabled:s,tabIndex:y,inputMode:"none",form:S,value:""},ie))})},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),f=s.MultiValue,a=s.MultiValueContainer,p=s.MultiValueLabel,y=s.MultiValueRemove,S=s.SingleValue,E=s.Placeholder,I=this.commonProps,L=this.props,N=L.controlShouldRenderValue,j=L.isDisabled,k=L.isMulti,V=L.inputValue,K=L.placeholder,J=this.state,ie=J.selectValue,Q=J.focusedValue,W=J.isFocused;if(!this.hasValue()||!N)return V?null:be.createElement(E,Kr({},I,{key:"placeholder",isDisabled:j,isFocused:W,innerProps:{id:this.getElementId("placeholder")}}),K);if(k)return ie.map(function(X,ae){var le=X===Q,ge="".concat(i.getOptionLabel(X),"-").concat(i.getOptionValue(X));return be.createElement(f,Kr({},I,{components:{Container:a,Label:p,Remove:y},isFocused:le,isDisabled:j,key:ge,index:ae,removeProps:{onClick:function(){return i.removeValue(X)},onTouchEnd:function(){return i.removeValue(X)},onMouseDown:function(De){De.preventDefault()}},data:X}),i.formatOptionLabel(X,"value"))});if(V)return null;var te=ie[0];return be.createElement(S,Kr({},I,{data:te,isDisabled:j}),this.formatOptionLabel(te,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,f=this.commonProps,a=this.props,p=a.isDisabled,y=a.isLoading,S=this.state.isFocused;if(!this.isClearable()||!s||p||!this.hasValue()||y)return null;var E={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return be.createElement(s,Kr({},f,{innerProps:E,isFocused:S}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,f=this.commonProps,a=this.props,p=a.isDisabled,y=a.isLoading,S=this.state.isFocused;if(!s||!y)return null;var E={"aria-hidden":"true"};return be.createElement(s,Kr({},f,{innerProps:E,isDisabled:p,isFocused:S}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,f=i.IndicatorSeparator;if(!s||!f)return null;var a=this.commonProps,p=this.props.isDisabled,y=this.state.isFocused;return be.createElement(f,Kr({},a,{isDisabled:p,isFocused:y}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var f=this.commonProps,a=this.props.isDisabled,p=this.state.isFocused,y={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return be.createElement(s,Kr({},f,{innerProps:y,isDisabled:a,isFocused:p}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),f=s.Group,a=s.GroupHeading,p=s.Menu,y=s.MenuList,S=s.MenuPortal,E=s.LoadingMessage,I=s.NoOptionsMessage,L=s.Option,N=this.commonProps,j=this.state.focusedOption,k=this.props,V=k.captureMenuScroll,K=k.inputValue,J=k.isLoading,ie=k.loadingMessage,Q=k.minMenuHeight,W=k.maxMenuHeight,te=k.menuIsOpen,X=k.menuPlacement,ae=k.menuPosition,le=k.menuPortalTarget,ge=k.menuShouldBlockScroll,ye=k.menuShouldScrollIntoView,De=k.noOptionsMessage,He=k.onMenuScrollToTop,Be=k.onMenuScrollToBottom;if(!te)return null;var Ee=function(Pe,jt){var sn=Pe.type,dn=Pe.data,Tn=Pe.isDisabled,Ut=Pe.isSelected,xe=Pe.label,Ye=Pe.value,ct=j===dn,mt=Tn?void 0:function(){return i.onOptionHover(dn)},Ct=Tn?void 0:function(){return i.selectOption(dn)},Yt="".concat(i.getElementId("option"),"-").concat(jt),gn={id:Yt,onClick:Ct,onMouseMove:mt,onMouseOver:mt,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:Ut};return be.createElement(L,Kr({},N,{innerProps:gn,data:dn,isDisabled:Tn,isSelected:Ut,key:Yt,label:xe,type:sn,value:Ye,isFocused:ct,innerRef:ct?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Pe.data,"menu"))},Fe;if(this.hasOptions())Fe=this.getCategorizedOptions().map(function(it){if(it.type==="group"){var Pe=it.data,jt=it.options,sn=it.index,dn="".concat(i.getElementId("group"),"-").concat(sn),Tn="".concat(dn,"-heading");return be.createElement(f,Kr({},N,{key:dn,data:Pe,options:jt,Heading:a,headingProps:{id:Tn,data:it.data},label:i.formatGroupLabel(it.data)}),it.options.map(function(Ut){return Ee(Ut,"".concat(sn,"-").concat(Ut.index))}))}else if(it.type==="option")return Ee(it,"".concat(it.index))});else if(J){var at=ie({inputValue:K});if(at===null)return null;Fe=be.createElement(E,N,at)}else{var yt=De({inputValue:K});if(yt===null)return null;Fe=be.createElement(I,N,yt)}var je={minMenuHeight:Q,maxMenuHeight:W,menuPlacement:X,menuPosition:ae,menuShouldScrollIntoView:ye},Ke=be.createElement(JYe,Kr({},N,je),function(it){var Pe=it.ref,jt=it.placerProps,sn=jt.placement,dn=jt.maxHeight;return be.createElement(p,Kr({},N,je,{innerRef:Pe,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:J,placement:sn}),be.createElement(OXe,{captureEnabled:V,onTopArrive:He,onBottomArrive:Be,lockEnabled:ge},function(Tn){return be.createElement(y,Kr({},N,{innerRef:function(xe){i.getMenuListRef(xe),Tn(xe)},innerProps:{role:"listbox","aria-multiselectable":N.isMulti,id:i.getElementId("listbox")},isLoading:J,maxHeight:dn,focusedOption:j}),Fe)}))});return le||ae==="fixed"?be.createElement(S,Kr({},N,{appendTo:le,controlElement:this.controlRef,menuPlacement:X,menuPosition:ae}),Ke):Ke}},{key:"renderFormField",value:function(){var i=this,s=this.props,f=s.delimiter,a=s.isDisabled,p=s.isMulti,y=s.name,S=s.required,E=this.state.selectValue;if(S&&!this.hasValue()&&!a)return be.createElement(DXe,{name:y,onFocus:this.onValueInputFocus});if(!(!y||a))if(p)if(f){var I=E.map(function(j){return i.getOptionValue(j)}).join(f);return be.createElement("input",{name:y,type:"hidden",value:I})}else{var L=E.length>0?E.map(function(j,k){return be.createElement("input",{key:"i-".concat(k),name:y,type:"hidden",value:i.getOptionValue(j)})}):be.createElement("input",{name:y,type:"hidden",value:""});return be.createElement("div",null,L)}else{var N=E[0]?this.getOptionValue(E[0]):"";return be.createElement("input",{name:y,type:"hidden",value:N})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,f=s.ariaSelection,a=s.focusedOption,p=s.focusedValue,y=s.isFocused,S=s.selectValue,E=this.getFocusableOptions();return be.createElement(mXe,Kr({},i,{id:this.getElementId("live-region"),ariaSelection:f,focusedOption:a,focusedValue:p,isFocused:y,selectValue:S,focusableOptions:E,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,f=i.IndicatorsContainer,a=i.SelectContainer,p=i.ValueContainer,y=this.props,S=y.className,E=y.id,I=y.isDisabled,L=y.menuIsOpen,N=this.state.isFocused,j=this.commonProps=this.getCommonProps();return be.createElement(a,Kr({},j,{className:S,innerProps:{id:E,onKeyDown:this.onKeyDown},isDisabled:I,isFocused:N}),this.renderLiveRegion(),be.createElement(s,Kr({},j,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:I,isFocused:N,menuIsOpen:L}),be.createElement(p,Kr({},j,{isDisabled:I}),this.renderPlaceholderOrValue(),this.renderInput()),be.createElement(f,Kr({},j,{isDisabled:I}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var f=s.prevProps,a=s.clearFocusValueOnUpdate,p=s.inputIsHiddenAfterUpdate,y=s.ariaSelection,S=s.isFocused,E=s.prevWasFocused,I=s.instancePrefix,L=i.options,N=i.value,j=i.menuIsOpen,k=i.inputValue,V=i.isMulti,K=bQ(N),J={};if(f&&(N!==f.value||L!==f.options||j!==f.menuIsOpen||k!==f.inputValue)){var ie=j?GXe(i,K):[],Q=j?LQ(OD(i,K),"".concat(I,"-option")):[],W=a?YXe(s,K):null,te=WXe(s,ie),X=ON(Q,te);J={selectValue:K,focusedOption:te,focusedOptionId:X,focusableOptionsWithIds:Q,focusedValue:W,clearFocusValueOnUpdate:!1}}var ae=p!=null&&i!==f?{inputIsHidden:p,inputIsHiddenAfterUpdate:void 0}:{},le=y,ge=S&&E;return S&&!ge&&(le={value:BM(V,K,K[0]||null),options:K,action:"initial-input-focus"},ge=!E),(y==null?void 0:y.action)==="initial-input-focus"&&(le=null),Xr(Xr(Xr({},J),ae),{},{prevProps:i,ariaSelection:le,prevWasFocused:ge})}}]),n})(be.Component);Ape.defaultProps=HXe;var ZXe=be.forwardRef(function(e,t){var n=O7e(e);return be.createElement(Ape,Kr({ref:t},n))}),CN=ZXe;class KXe extends tt.Component{constructor(t){super(),this.handleOnApply=this.handleOnApply.bind(this),this.handleShow=this.handleShow.bind(this),this.handleClose=this.handleClose.bind(this),this.state={show:!1}}handleOnApply(){}handleClose(t){this.setState({show:!1})}handleShow(t){this.setState({show:!0})}render(){let t=this.props.gaugeCount,n=this.props.pixelCount;return Oe.jsxs("div",{children:[Oe.jsx(xa,{className:"g-0 mb-2",children:Oe.jsxs(Gr,{children:[Oe.jsx("strong",{children:"Where"}),t>0?Oe.jsx("span",{className:"mx-1 my-1",children:Oe.jsx(LD,{pill:!0,bg:"primary",children:`${t} ${_K(t,"gauge","gauges")}`})}):null,n>0?Oe.jsx("span",{className:"mx-1 my-1",children:Oe.jsx(LD,{pill:!0,bg:"primary",children:`${n} ${_K(n,"pixel","pixels")}`})}):null]})}),Oe.jsx(xa,{className:"g-0",children:Oe.jsx(Gr,{children:Oe.jsxs(_$,{defaultActiveKey:"sensor",id:"geomPickerTypes",children:[Oe.jsxs(jb,{eventKey:"sensor",title:"By Sensor",className:"my-4",children:[this.props.context!==fi.legacyGarr?Oe.jsxs(xa,{className:"g-0",children:[Oe.jsx(Gr,{md:3,children:Oe.jsx("small",{children:"Rain Gauges"})}),Oe.jsx(Gr,{md:9,children:Oe.jsx(CN,{isMulti:!0,value:this.props.selectedGauges,onChange:this.props.handleSelectGauge,options:this.props.gaugeOpts,menuPortalTarget:document.body,isClearable:!0})})]}):null,this.props.context!==fi.legacyGauge?Oe.jsxs(xa,{className:"g-0",children:[Oe.jsx(Gr,{md:3,children:Oe.jsx("small",{children:"Radar Pixels"})}),Oe.jsx(Gr,{md:9,children:Oe.jsx(CN,{isMulti:!0,value:this.props.selectedPixels,onChange:this.props.handleSelectPixel,options:this.props.pixelOpts,menuPortalTarget:document.body,isClearable:!0})})]}):null]}),this.props.context!==fi.legacyGauge?Oe.jsx(jb,{eventKey:"geography",title:"By Geography",className:"my-4",children:Oe.jsx(xa,{className:"g-0",children:Oe.jsx(Gr,{md:12,children:Oe.jsx(CN,{placeholder:"Select radar pixels by basin, municipality, or watershed",isMulti:!0,onChange:this.props.handleSelectGeography,options:this.props.geographyOpts,menuPortalTarget:document.body,isClearable:!0})})})}):null]})})})]})}}function QXe(e,t){var n=_fe(e),r=Kw(e,"pixel").map(y=>({value:y.properties.id,label:`${y.properties.id}`})),i=uz(e,t.contextType,"pixel"),s=Kw(e,"gauge").filter(y=>y.properties.active===!0).map(y=>({value:y.properties.id,label:`${y.properties.id}: ${y.properties.name}`})),f=uz(e,t.contextType,"gauge"),a=Rje(e),p=uz(e,t.contextType,"basin");return{gaugeOpts:s,pixelOpts:r,geographyOpts:a,selectedBasin:p,selectedGauges:f,selectedPixels:i,pixelCount:i.length,gaugeCount:f.length,context:n}}const JXe=(e,t)=>({handleSelectGauge:n=>{e(Pw({contextType:t.contextType,inputType:"geomPicker",sensorLocationType:"gauge",selectedOptions:n}))},handleSelectPixel:n=>{e(Pw({contextType:t.contextType,inputType:"geomPicker",sensorLocationType:"pixel",selectedOptions:n}))},handleSelectGeography:n=>{e(x$e({contextType:t.contextType,inputType:"geomPicker",sensorLocationType:"geography",selectedOptions:n}))}}),eZe=of(QXe,JXe)(KXe);class tZe extends tt.Component{constructor(){super(...arguments);ir(this,"handleSelectInterval",n=>{this.props.dispatchPickInterval(n.currentTarget.value)})}render(){const n=OIe(this.props.contextType);return Oe.jsxs(xa,{className:"g-0",children:[Oe.jsx(Gr,{lg:3,children:Oe.jsx("strong",{children:"Interval"})}),Oe.jsx(Gr,{lg:9,children:Oe.jsx(Vb,{children:n.map((r,i)=>Oe.jsx(Vb.Check,{defaultChecked:r==="15-minute",inline:!0,label:r,value:r,type:"radio",id:`interval-${r}-${this.props.rainfallDataType}`,name:"intervalRadios",onChange:this.handleSelectInterval},`interval-${r}-${i}-${this.props.rainfallDataType}`))})})]})}}function nZe(e){return{}}const rZe=(e,t)=>({dispatchPickInterval:n=>{e(pfe({rollup:n,contextType:t.contextType}))}}),iZe=of(nZe,rZe)(tZe);var CD={exports:{}};/* @license
Papa Parse
v5.3.2
https://github.com/mholt/PapaParse
License: MIT
*/var aZe=CD.exports,NQ;function oZe(){return NQ||(NQ=1,(function(e,t){(function(n,r){e.exports=r()})(aZe,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i=!r.document&&!!r.postMessage,s=i&&/blob:/i.test((r.location||{}).protocol),f={},a=0,p={parse:function(X,ae){var le=(ae=ae||{}).dynamicTyping||!1;if(te(le)&&(ae.dynamicTypingFunction=le,le={}),ae.dynamicTyping=le,ae.transform=!!te(ae.transform)&&ae.transform,ae.worker&&p.WORKERS_SUPPORTED){var ge=(function(){if(!p.WORKERS_SUPPORTED)return!1;var De=(Be=r.URL||r.webkitURL||null,Ee=n.toString(),p.BLOB_URL||(p.BLOB_URL=Be.createObjectURL(new Blob(["(",Ee,")();"],{type:"text/javascript"})))),He=new r.Worker(De),Be,Ee;return He.onmessage=K,He.id=a++,f[He.id]=He})();return ge.userStep=ae.step,ge.userChunk=ae.chunk,ge.userComplete=ae.complete,ge.userError=ae.error,ae.step=te(ae.step),ae.chunk=te(ae.chunk),ae.complete=te(ae.complete),ae.error=te(ae.error),delete ae.worker,void ge.postMessage({input:X,config:ae,workerId:ge.id})}var ye=null;return p.NODE_STREAM_INPUT,typeof X=="string"?ye=ae.download?new E(ae):new L(ae):X.readable===!0&&te(X.read)&&te(X.on)?ye=new N(ae):(r.File&&X instanceof File||X instanceof Object)&&(ye=new I(ae)),ye.stream(X)},unparse:function(X,ae){var le=!1,ge=!0,ye=",",De=`\r
`,He='"',Be=He+He,Ee=!1,Fe=null,at=!1;(function(){if(typeof ae=="object"){if(typeof ae.delimiter!="string"||p.BAD_DELIMITERS.filter(function(it){return ae.delimiter.indexOf(it)!==-1}).length||(ye=ae.delimiter),(typeof ae.quotes=="boolean"||typeof ae.quotes=="function"||Array.isArray(ae.quotes))&&(le=ae.quotes),typeof ae.skipEmptyLines!="boolean"&&typeof ae.skipEmptyLines!="string"||(Ee=ae.skipEmptyLines),typeof ae.newline=="string"&&(De=ae.newline),typeof ae.quoteChar=="string"&&(He=ae.quoteChar),typeof ae.header=="boolean"&&(ge=ae.header),Array.isArray(ae.columns)){if(ae.columns.length===0)throw new Error("Option columns is empty");Fe=ae.columns}ae.escapeChar!==void 0&&(Be=ae.escapeChar+He),(typeof ae.escapeFormulae=="boolean"||ae.escapeFormulae instanceof RegExp)&&(at=ae.escapeFormulae instanceof RegExp?ae.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var yt=new RegExp(k(He),"g");if(typeof X=="string"&&(X=JSON.parse(X)),Array.isArray(X)){if(!X.length||Array.isArray(X[0]))return je(null,X,Ee);if(typeof X[0]=="object")return je(Fe||Object.keys(X[0]),X,Ee)}else if(typeof X=="object")return typeof X.data=="string"&&(X.data=JSON.parse(X.data)),Array.isArray(X.data)&&(X.fields||(X.fields=X.meta&&X.meta.fields||Fe),X.fields||(X.fields=Array.isArray(X.data[0])?X.fields:typeof X.data[0]=="object"?Object.keys(X.data[0]):[]),Array.isArray(X.data[0])||typeof X.data[0]=="object"||(X.data=[X.data])),je(X.fields||[],X.data||[],Ee);throw new Error("Unable to serialize unrecognized input");function je(it,Pe,jt){var sn="";typeof it=="string"&&(it=JSON.parse(it)),typeof Pe=="string"&&(Pe=JSON.parse(Pe));var dn=Array.isArray(it)&&0<it.length,Tn=!Array.isArray(Pe[0]);if(dn&&ge){for(var Ut=0;Ut<it.length;Ut++)0<Ut&&(sn+=ye),sn+=Ke(it[Ut],Ut);0<Pe.length&&(sn+=De)}for(var xe=0;xe<Pe.length;xe++){var Ye=dn?it.length:Pe[xe].length,ct=!1,mt=dn?Object.keys(Pe[xe]).length===0:Pe[xe].length===0;if(jt&&!dn&&(ct=jt==="greedy"?Pe[xe].join("").trim()==="":Pe[xe].length===1&&Pe[xe][0].length===0),jt==="greedy"&&dn){for(var Ct=[],Yt=0;Yt<Ye;Yt++){var gn=Tn?it[Yt]:Yt;Ct.push(Pe[xe][gn])}ct=Ct.join("").trim()===""}if(!ct){for(var An=0;An<Ye;An++){0<An&&!mt&&(sn+=ye);var ar=dn&&Tn?it[An]:An;sn+=Ke(Pe[xe][ar],An)}xe<Pe.length-1&&(!jt||0<Ye&&!mt)&&(sn+=De)}}return sn}function Ke(it,Pe){if(it==null)return"";if(it.constructor===Date)return JSON.stringify(it).slice(1,25);var jt=!1;at&&typeof it=="string"&&at.test(it)&&(it="'"+it,jt=!0);var sn=it.toString().replace(yt,Be);return(jt=jt||le===!0||typeof le=="function"&&le(it,Pe)||Array.isArray(le)&&le[Pe]||(function(dn,Tn){for(var Ut=0;Ut<Tn.length;Ut++)if(-1<dn.indexOf(Tn[Ut]))return!0;return!1})(sn,p.BAD_DELIMITERS)||-1<sn.indexOf(ye)||sn.charAt(0)===" "||sn.charAt(sn.length-1)===" ")?He+sn+He:sn}}};if(p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!i&&!!r.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=V,p.ParserHandle=j,p.NetworkStreamer=E,p.FileStreamer=I,p.StringStreamer=L,p.ReadableStreamStreamer=N,r.jQuery){var y=r.jQuery;y.fn.parse=function(X){var ae=X.config||{},le=[];return this.each(function(De){if(!(y(this).prop("tagName").toUpperCase()==="INPUT"&&y(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var He=0;He<this.files.length;He++)le.push({file:this.files[He],inputElem:this,instanceConfig:y.extend({},ae)})}),ge(),this;function ge(){if(le.length!==0){var De,He,Be,Ee,Fe=le[0];if(te(X.before)){var at=X.before(Fe.file,Fe.inputElem);if(typeof at=="object"){if(at.action==="abort")return De="AbortError",He=Fe.file,Be=Fe.inputElem,Ee=at.reason,void(te(X.error)&&X.error({name:De},He,Be,Ee));if(at.action==="skip")return void ye();typeof at.config=="object"&&(Fe.instanceConfig=y.extend(Fe.instanceConfig,at.config))}else if(at==="skip")return void ye()}var yt=Fe.instanceConfig.complete;Fe.instanceConfig.complete=function(je){te(yt)&&yt(je,Fe.file,Fe.inputElem),ye()},p.parse(Fe.file,Fe.instanceConfig)}else te(X.complete)&&X.complete()}function ye(){le.splice(0,1),ge()}}}function S(X){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(ae){var le=Q(ae);le.chunkSize=parseInt(le.chunkSize),ae.step||ae.chunk||(le.chunkSize=null),this._handle=new j(le),(this._handle.streamer=this)._config=le}).call(this,X),this.parseChunk=function(ae,le){if(this.isFirstChunk&&te(this._config.beforeFirstChunk)){var ge=this._config.beforeFirstChunk(ae);ge!==void 0&&(ae=ge)}this.isFirstChunk=!1,this._halted=!1;var ye=this._partialLine+ae;this._partialLine="";var De=this._handle.parse(ye,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var He=De.meta.cursor;this._finished||(this._partialLine=ye.substring(He-this._baseIndex),this._baseIndex=He),De&&De.data&&(this._rowCount+=De.data.length);var Be=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)r.postMessage({results:De,workerId:p.WORKER_ID,finished:Be});else if(te(this._config.chunk)&&!le){if(this._config.chunk(De,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);De=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(De.data),this._completeResults.errors=this._completeResults.errors.concat(De.errors),this._completeResults.meta=De.meta),this._completed||!Be||!te(this._config.complete)||De&&De.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Be||De&&De.meta.paused||this._nextChunk(),De}this._halted=!0},this._sendError=function(ae){te(this._config.error)?this._config.error(ae):s&&this._config.error&&r.postMessage({workerId:p.WORKER_ID,error:ae,finished:!1})}}function E(X){var ae;(X=X||{}).chunkSize||(X.chunkSize=p.RemoteChunkSize),S.call(this,X),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(le){this._input=le,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(ae=new XMLHttpRequest,this._config.withCredentials&&(ae.withCredentials=this._config.withCredentials),i||(ae.onload=W(this._chunkLoaded,this),ae.onerror=W(this._chunkError,this)),ae.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var le=this._config.downloadRequestHeaders;for(var ge in le)ae.setRequestHeader(ge,le[ge])}if(this._config.chunkSize){var ye=this._start+this._config.chunkSize-1;ae.setRequestHeader("Range","bytes="+this._start+"-"+ye)}try{ae.send(this._config.downloadRequestBody)}catch(De){this._chunkError(De.message)}i&&ae.status===0&&this._chunkError()}},this._chunkLoaded=function(){ae.readyState===4&&(ae.status<200||400<=ae.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:ae.responseText.length,this._finished=!this._config.chunkSize||this._start>=(function(le){var ge=le.getResponseHeader("Content-Range");return ge===null?-1:parseInt(ge.substring(ge.lastIndexOf("/")+1))})(ae),this.parseChunk(ae.responseText)))},this._chunkError=function(le){var ge=ae.statusText||le;this._sendError(new Error(ge))}}function I(X){var ae,le;(X=X||{}).chunkSize||(X.chunkSize=p.LocalChunkSize),S.call(this,X);var ge=typeof FileReader<"u";this.stream=function(ye){this._input=ye,le=ye.slice||ye.webkitSlice||ye.mozSlice,ge?((ae=new FileReader).onload=W(this._chunkLoaded,this),ae.onerror=W(this._chunkError,this)):ae=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var ye=this._input;if(this._config.chunkSize){var De=Math.min(this._start+this._config.chunkSize,this._input.size);ye=le.call(ye,this._start,De)}var He=ae.readAsText(ye,this._config.encoding);ge||this._chunkLoaded({target:{result:He}})},this._chunkLoaded=function(ye){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(ye.target.result)},this._chunkError=function(){this._sendError(ae.error)}}function L(X){var ae;S.call(this,X=X||{}),this.stream=function(le){return ae=le,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var le,ge=this._config.chunkSize;return ge?(le=ae.substring(0,ge),ae=ae.substring(ge)):(le=ae,ae=""),this._finished=!ae,this.parseChunk(le)}}}function N(X){S.call(this,X=X||{});var ae=[],le=!0,ge=!1;this.pause=function(){S.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){S.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(ye){this._input=ye,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ge&&ae.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),ae.length?this.parseChunk(ae.shift()):le=!0},this._streamData=W(function(ye){try{ae.push(typeof ye=="string"?ye:ye.toString(this._config.encoding)),le&&(le=!1,this._checkIsFinished(),this.parseChunk(ae.shift()))}catch(De){this._streamError(De)}},this),this._streamError=W(function(ye){this._streamCleanUp(),this._sendError(ye)},this),this._streamEnd=W(function(){this._streamCleanUp(),ge=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function j(X){var ae,le,ge,ye=Math.pow(2,53),De=-ye,He=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Be=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,Ee=this,Fe=0,at=0,yt=!1,je=!1,Ke=[],it={data:[],errors:[],meta:{}};if(te(X.step)){var Pe=X.step;X.step=function(xe){if(it=xe,dn())sn();else{if(sn(),it.data.length===0)return;Fe+=xe.data.length,X.preview&&Fe>X.preview?le.abort():(it.data=it.data[0],Pe(it,Ee))}}}function jt(xe){return X.skipEmptyLines==="greedy"?xe.join("").trim()==="":xe.length===1&&xe[0].length===0}function sn(){return it&&ge&&(Ut("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),ge=!1),X.skipEmptyLines&&(it.data=it.data.filter(function(xe){return!jt(xe)})),dn()&&(function(){if(!it)return;function xe(ct,mt){te(X.transformHeader)&&(ct=X.transformHeader(ct,mt)),Ke.push(ct)}if(Array.isArray(it.data[0])){for(var Ye=0;dn()&&Ye<it.data.length;Ye++)it.data[Ye].forEach(xe);it.data.splice(0,1)}else it.data.forEach(xe)})(),(function(){if(!it||!X.header&&!X.dynamicTyping&&!X.transform)return it;function xe(ct,mt){var Ct,Yt=X.header?{}:[];for(Ct=0;Ct<ct.length;Ct++){var gn=Ct,An=ct[Ct];X.header&&(gn=Ct>=Ke.length?"__parsed_extra":Ke[Ct]),X.transform&&(An=X.transform(An,gn)),An=Tn(gn,An),gn==="__parsed_extra"?(Yt[gn]=Yt[gn]||[],Yt[gn].push(An)):Yt[gn]=An}return X.header&&(Ct>Ke.length?Ut("FieldMismatch","TooManyFields","Too many fields: expected "+Ke.length+" fields but parsed "+Ct,at+mt):Ct<Ke.length&&Ut("FieldMismatch","TooFewFields","Too few fields: expected "+Ke.length+" fields but parsed "+Ct,at+mt)),Yt}var Ye=1;return!it.data.length||Array.isArray(it.data[0])?(it.data=it.data.map(xe),Ye=it.data.length):it.data=xe(it.data,0),X.header&&it.meta&&(it.meta.fields=Ke),at+=Ye,it})()}function dn(){return X.header&&Ke.length===0}function Tn(xe,Ye){return ct=xe,X.dynamicTypingFunction&&X.dynamicTyping[ct]===void 0&&(X.dynamicTyping[ct]=X.dynamicTypingFunction(ct)),(X.dynamicTyping[ct]||X.dynamicTyping)===!0?Ye==="true"||Ye==="TRUE"||Ye!=="false"&&Ye!=="FALSE"&&((function(mt){if(He.test(mt)){var Ct=parseFloat(mt);if(De<Ct&&Ct<ye)return!0}return!1})(Ye)?parseFloat(Ye):Be.test(Ye)?new Date(Ye):Ye===""?null:Ye):Ye;var ct}function Ut(xe,Ye,ct,mt){var Ct={type:xe,code:Ye,message:ct};mt!==void 0&&(Ct.row=mt),it.errors.push(Ct)}this.parse=function(xe,Ye,ct){var mt=X.quoteChar||'"';if(X.newline||(X.newline=(function(gn,An){gn=gn.substring(0,1048576);var ar=new RegExp(k(An)+"([^]*?)"+k(An),"gm"),or=(gn=gn.replace(ar,"")).split("\r"),Nr=gn.split(`
`),Pr=1<Nr.length&&Nr[0].length<or[0].length;if(or.length===1||Pr)return`
`;for(var Er=0,Tr=0;Tr<or.length;Tr++)or[Tr][0]===`
`&&Er++;return Er>=or.length/2?`\r
`:"\r"})(xe,mt)),ge=!1,X.delimiter)te(X.delimiter)&&(X.delimiter=X.delimiter(xe),it.meta.delimiter=X.delimiter);else{var Ct=(function(gn,An,ar,or,Nr){var Pr,Er,Tr,pi;Nr=Nr||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var Fr=0;Fr<Nr.length;Fr++){var hi=Nr[Fr],$t=0,En=0,ur=0;Tr=void 0;for(var $r=new V({comments:or,delimiter:hi,newline:An,preview:10}).parse(gn),Br=0;Br<$r.data.length;Br++)if(ar&&jt($r.data[Br]))ur++;else{var Ya=$r.data[Br].length;En+=Ya,Tr!==void 0?0<Ya&&($t+=Math.abs(Ya-Tr),Tr=Ya):Tr=Ya}0<$r.data.length&&(En/=$r.data.length-ur),(Er===void 0||$t<=Er)&&(pi===void 0||pi<En)&&1.99<En&&(Er=$t,Pr=hi,pi=En)}return{successful:!!(X.delimiter=Pr),bestDelimiter:Pr}})(xe,X.newline,X.skipEmptyLines,X.comments,X.delimitersToGuess);Ct.successful?X.delimiter=Ct.bestDelimiter:(ge=!0,X.delimiter=p.DefaultDelimiter),it.meta.delimiter=X.delimiter}var Yt=Q(X);return X.preview&&X.header&&Yt.preview++,ae=xe,le=new V(Yt),it=le.parse(ae,Ye,ct),sn(),yt?{meta:{paused:!0}}:it||{meta:{paused:!1}}},this.paused=function(){return yt},this.pause=function(){yt=!0,le.abort(),ae=te(X.chunk)?"":ae.substring(le.getCharIndex())},this.resume=function(){Ee.streamer._halted?(yt=!1,Ee.streamer.parseChunk(ae,!0)):setTimeout(Ee.resume,3)},this.aborted=function(){return je},this.abort=function(){je=!0,le.abort(),it.meta.aborted=!0,te(X.complete)&&X.complete(it),ae=""}}function k(X){return X.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function V(X){var ae,le=(X=X||{}).delimiter,ge=X.newline,ye=X.comments,De=X.step,He=X.preview,Be=X.fastMode,Ee=ae=X.quoteChar===void 0||X.quoteChar===null?'"':X.quoteChar;if(X.escapeChar!==void 0&&(Ee=X.escapeChar),(typeof le!="string"||-1<p.BAD_DELIMITERS.indexOf(le))&&(le=","),ye===le)throw new Error("Comment character same as delimiter");ye===!0?ye="#":(typeof ye!="string"||-1<p.BAD_DELIMITERS.indexOf(ye))&&(ye=!1),ge!==`
`&&ge!=="\r"&&ge!==`\r
`&&(ge=`
`);var Fe=0,at=!1;this.parse=function(yt,je,Ke){if(typeof yt!="string")throw new Error("Input must be a string");var it=yt.length,Pe=le.length,jt=ge.length,sn=ye.length,dn=te(De),Tn=[],Ut=[],xe=[],Ye=Fe=0;if(!yt)return pi();if(Be||Be!==!1&&yt.indexOf(ae)===-1){for(var ct=yt.split(ge),mt=0;mt<ct.length;mt++){if(xe=ct[mt],Fe+=xe.length,mt!==ct.length-1)Fe+=ge.length;else if(Ke)return pi();if(!ye||xe.substring(0,sn)!==ye){if(dn){if(Tn=[],Nr(xe.split(le)),Fr(),at)return pi()}else Nr(xe.split(le));if(He&&He<=mt)return Tn=Tn.slice(0,He),pi(!0)}}return pi()}for(var Ct=yt.indexOf(le,Fe),Yt=yt.indexOf(ge,Fe),gn=new RegExp(k(Ee)+k(ae),"g"),An=yt.indexOf(ae,Fe);;)if(yt[Fe]!==ae)if(ye&&xe.length===0&&yt.substring(Fe,Fe+sn)===ye){if(Yt===-1)return pi();Fe=Yt+jt,Yt=yt.indexOf(ge,Fe),Ct=yt.indexOf(le,Fe)}else if(Ct!==-1&&(Ct<Yt||Yt===-1))xe.push(yt.substring(Fe,Ct)),Fe=Ct+Pe,Ct=yt.indexOf(le,Fe);else{if(Yt===-1)break;if(xe.push(yt.substring(Fe,Yt)),Tr(Yt+jt),dn&&(Fr(),at))return pi();if(He&&Tn.length>=He)return pi(!0)}else for(An=Fe,Fe++;;){if((An=yt.indexOf(ae,An+1))===-1)return Ke||Ut.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Tn.length,index:Fe}),Er();if(An===it-1)return Er(yt.substring(Fe,An).replace(gn,ae));if(ae!==Ee||yt[An+1]!==Ee){if(ae===Ee||An===0||yt[An-1]!==Ee){Ct!==-1&&Ct<An+1&&(Ct=yt.indexOf(le,An+1)),Yt!==-1&&Yt<An+1&&(Yt=yt.indexOf(ge,An+1));var ar=Pr(Yt===-1?Ct:Math.min(Ct,Yt));if(yt.substr(An+1+ar,Pe)===le){xe.push(yt.substring(Fe,An).replace(gn,ae)),yt[Fe=An+1+ar+Pe]!==ae&&(An=yt.indexOf(ae,Fe)),Ct=yt.indexOf(le,Fe),Yt=yt.indexOf(ge,Fe);break}var or=Pr(Yt);if(yt.substring(An+1+or,An+1+or+jt)===ge){if(xe.push(yt.substring(Fe,An).replace(gn,ae)),Tr(An+1+or+jt),Ct=yt.indexOf(le,Fe),An=yt.indexOf(ae,Fe),dn&&(Fr(),at))return pi();if(He&&Tn.length>=He)return pi(!0);break}Ut.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Tn.length,index:Fe}),An++}}else An++}return Er();function Nr(hi){Tn.push(hi),Ye=Fe}function Pr(hi){var $t=0;if(hi!==-1){var En=yt.substring(An+1,hi);En&&En.trim()===""&&($t=En.length)}return $t}function Er(hi){return Ke||(hi===void 0&&(hi=yt.substring(Fe)),xe.push(hi),Fe=it,Nr(xe),dn&&Fr()),pi()}function Tr(hi){Fe=hi,Nr(xe),xe=[],Yt=yt.indexOf(ge,Fe)}function pi(hi){return{data:Tn,errors:Ut,meta:{delimiter:le,linebreak:ge,aborted:at,truncated:!!hi,cursor:Ye+(je||0)}}}function Fr(){De(pi()),Tn=[],Ut=[]}},this.abort=function(){at=!0},this.getCharIndex=function(){return Fe}}function K(X){var ae=X.data,le=f[ae.workerId],ge=!1;if(ae.error)le.userError(ae.error,ae.file);else if(ae.results&&ae.results.data){var ye={abort:function(){ge=!0,J(ae.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ie,resume:ie};if(te(le.userStep)){for(var De=0;De<ae.results.data.length&&(le.userStep({data:ae.results.data[De],errors:ae.results.errors,meta:ae.results.meta},ye),!ge);De++);delete ae.results}else te(le.userChunk)&&(le.userChunk(ae.results,ye,ae.file),delete ae.results)}ae.finished&&!ge&&J(ae.workerId,ae.results)}function J(X,ae){var le=f[X];te(le.userComplete)&&le.userComplete(ae),le.terminate(),delete f[X]}function ie(){throw new Error("Not implemented.")}function Q(X){if(typeof X!="object"||X===null)return X;var ae=Array.isArray(X)?[]:{};for(var le in X)ae[le]=Q(X[le]);return ae}function W(X,ae){return function(){X.apply(ae,arguments)}}function te(X){return typeof X=="function"}return s&&(r.onmessage=function(X){var ae=X.data;if(p.WORKER_ID===void 0&&ae&&(p.WORKER_ID=ae.workerId),typeof ae.input=="string")r.postMessage({workerId:p.WORKER_ID,results:p.parse(ae.input,ae.config),finished:!0});else if(r.File&&ae.input instanceof File||ae.input instanceof Object){var le=p.parse(ae.input,ae.config);le&&r.postMessage({workerId:p.WORKER_ID,results:le,finished:!0})}}),(E.prototype=Object.create(S.prototype)).constructor=E,(I.prototype=Object.create(S.prototype)).constructor=I,(L.prototype=Object.create(L.prototype)).constructor=L,(N.prototype=Object.create(S.prototype)).constructor=N,p})})(CD)),CD.exports}var sZe=oZe(),MD={exports:{}},lZe=MD.exports,FQ;function uZe(){return FQ||(FQ=1,(function(e,t){(function(n,r){r()})(lZe,function(){function n(y,S){return typeof S>"u"?S={autoBom:!1}:typeof S!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),S={autoBom:!S}),S.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function r(y,S,E){var I=new XMLHttpRequest;I.open("GET",y),I.responseType="blob",I.onload=function(){p(I.response,S,E)},I.onerror=function(){console.error("could not download file")},I.send()}function i(y){var S=new XMLHttpRequest;S.open("HEAD",y,!1);try{S.send()}catch{}return 200<=S.status&&299>=S.status}function s(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var S=document.createEvent("MouseEvents");S.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(S)}}var f=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Au=="object"&&Au.global===Au?Au:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=f.saveAs||(typeof window!="object"||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(y,S,E){var I=f.URL||f.webkitURL,L=document.createElement("a");S=S||y.name||"download",L.download=S,L.rel="noopener",typeof y=="string"?(L.href=y,L.origin===location.origin?s(L):i(L.href)?r(y,S,E):s(L,L.target="_blank")):(L.href=I.createObjectURL(y),setTimeout(function(){I.revokeObjectURL(L.href)},4e4),setTimeout(function(){s(L)},0))}:"msSaveOrOpenBlob"in navigator?function(y,S,E){if(S=S||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(n(y,E),S);else if(i(y))r(y,S,E);else{var I=document.createElement("a");I.href=y,I.target="_blank",setTimeout(function(){s(I)})}}:function(y,S,E,I){if(I=I||open("","_blank"),I&&(I.document.title=I.document.body.innerText="downloading..."),typeof y=="string")return r(y,S,E);var L=y.type==="application/octet-stream",N=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||L&&N||a)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var J=k.result;J=j?J:J.replace(/^data:[^;]*;/,"data:attachment/file;"),I?I.location.href=J:location=J,I=null},k.readAsDataURL(y)}else{var V=f.URL||f.webkitURL,K=V.createObjectURL(y);I?I.location=K:location.href=K,I=null,setTimeout(function(){V.revokeObjectURL(K)},4e4)}});f.saveAs=p.saveAs=p,e.exports=p})})(MD)),MD.exports}var BQ=uZe(),MN,jQ;function lf(){if(jQ)return MN;jQ=1;var e=Array.isArray;return MN=e,MN}var DN,UQ;function Ope(){if(UQ)return DN;UQ=1;var e=typeof Au=="object"&&Au&&Au.Object===Object&&Au;return DN=e,DN}var IN,$Q;function _g(){if($Q)return IN;$Q=1;var e=Ope(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return IN=n,IN}var PN,VQ;function IO(){if(VQ)return PN;VQ=1;var e=_g(),t=e.Symbol;return PN=t,PN}var RN,qQ;function cZe(){if(qQ)return RN;qQ=1;var e=IO(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(f){var a=n.call(f,i),p=f[i];try{f[i]=void 0;var y=!0}catch{}var S=r.call(f);return y&&(a?f[i]=p:delete f[i]),S}return RN=s,RN}var kN,HQ;function fZe(){if(HQ)return kN;HQ=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return kN=n,kN}var LN,GQ;function __(){if(GQ)return LN;GQ=1;var e=IO(),t=cZe(),n=fZe(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function f(a){return a==null?a===void 0?i:r:s&&s in Object(a)?t(a):n(a)}return LN=f,LN}var zN,YQ;function v_(){if(YQ)return zN;YQ=1;function e(t){return t!=null&&typeof t=="object"}return zN=e,zN}var NN,WQ;function uT(){if(WQ)return NN;WQ=1;var e=__(),t=v_(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return NN=r,NN}var FN,XQ;function nq(){if(XQ)return FN;XQ=1;var e=lf(),t=uT(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,f){if(e(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||f!=null&&s in Object(f)}return FN=i,FN}var BN,ZQ;function f0(){if(ZQ)return BN;ZQ=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return BN=e,BN}var jN,KQ;function rq(){if(KQ)return jN;KQ=1;var e=__(),t=f0(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function f(a){if(!t(a))return!1;var p=e(a);return p==r||p==i||p==n||p==s}return jN=f,jN}var UN,QQ;function hZe(){if(QQ)return UN;QQ=1;var e=_g(),t=e["__core-js_shared__"];return UN=t,UN}var $N,JQ;function dZe(){if(JQ)return $N;JQ=1;var e=hZe(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return $N=n,$N}var VN,eJ;function Cpe(){if(eJ)return VN;eJ=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return VN=n,VN}var qN,tJ;function pZe(){if(tJ)return qN;tJ=1;var e=rq(),t=dZe(),n=f0(),r=Cpe(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,f=Function.prototype,a=Object.prototype,p=f.toString,y=a.hasOwnProperty,S=RegExp("^"+p.call(y).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E(I){if(!n(I)||t(I))return!1;var L=e(I)?S:s;return L.test(r(I))}return qN=E,qN}var HN,nJ;function mZe(){if(nJ)return HN;nJ=1;function e(t,n){return t==null?void 0:t[n]}return HN=e,HN}var GN,rJ;function Gx(){if(rJ)return GN;rJ=1;var e=pZe(),t=mZe();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return GN=n,GN}var YN,iJ;function ik(){if(iJ)return YN;iJ=1;var e=Gx(),t=e(Object,"create");return YN=t,YN}var WN,aJ;function gZe(){if(aJ)return WN;aJ=1;var e=ik();function t(){this.__data__=e?e(null):{},this.size=0}return WN=t,WN}var XN,oJ;function yZe(){if(oJ)return XN;oJ=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return XN=e,XN}var ZN,sJ;function _Ze(){if(sJ)return ZN;sJ=1;var e=ik(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var f=this.__data__;if(e){var a=f[s];return a===t?void 0:a}return r.call(f,s)?f[s]:void 0}return ZN=i,ZN}var KN,lJ;function vZe(){if(lJ)return KN;lJ=1;var e=ik(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return KN=r,KN}var QN,uJ;function bZe(){if(uJ)return QN;uJ=1;var e=ik(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return QN=n,QN}var JN,cJ;function xZe(){if(cJ)return JN;cJ=1;var e=gZe(),t=yZe(),n=_Ze(),r=vZe(),i=bZe();function s(f){var a=-1,p=f==null?0:f.length;for(this.clear();++a<p;){var y=f[a];this.set(y[0],y[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,JN=s,JN}var eF,fJ;function wZe(){if(fJ)return eF;fJ=1;function e(){this.__data__=[],this.size=0}return eF=e,eF}var tF,hJ;function iq(){if(hJ)return tF;hJ=1;function e(t,n){return t===n||t!==t&&n!==n}return tF=e,tF}var nF,dJ;function ak(){if(dJ)return nF;dJ=1;var e=iq();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return nF=t,nF}var rF,pJ;function SZe(){if(pJ)return rF;pJ=1;var e=ak(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,f=e(s,i);if(f<0)return!1;var a=s.length-1;return f==a?s.pop():n.call(s,f,1),--this.size,!0}return rF=r,rF}var iF,mJ;function TZe(){if(mJ)return iF;mJ=1;var e=ak();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return iF=t,iF}var aF,gJ;function EZe(){if(gJ)return aF;gJ=1;var e=ak();function t(n){return e(this.__data__,n)>-1}return aF=t,aF}var oF,yJ;function AZe(){if(yJ)return oF;yJ=1;var e=ak();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return oF=t,oF}var sF,_J;function ok(){if(_J)return sF;_J=1;var e=wZe(),t=SZe(),n=TZe(),r=EZe(),i=AZe();function s(f){var a=-1,p=f==null?0:f.length;for(this.clear();++a<p;){var y=f[a];this.set(y[0],y[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,sF=s,sF}var lF,vJ;function aq(){if(vJ)return lF;vJ=1;var e=Gx(),t=_g(),n=e(t,"Map");return lF=n,lF}var uF,bJ;function OZe(){if(bJ)return uF;bJ=1;var e=xZe(),t=ok(),n=aq();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return uF=r,uF}var cF,xJ;function CZe(){if(xJ)return cF;xJ=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return cF=e,cF}var fF,wJ;function sk(){if(wJ)return fF;wJ=1;var e=CZe();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return fF=t,fF}var hF,SJ;function MZe(){if(SJ)return hF;SJ=1;var e=sk();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return hF=t,hF}var dF,TJ;function DZe(){if(TJ)return dF;TJ=1;var e=sk();function t(n){return e(this,n).get(n)}return dF=t,dF}var pF,EJ;function IZe(){if(EJ)return pF;EJ=1;var e=sk();function t(n){return e(this,n).has(n)}return pF=t,pF}var mF,AJ;function PZe(){if(AJ)return mF;AJ=1;var e=sk();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return mF=t,mF}var gF,OJ;function oq(){if(OJ)return gF;OJ=1;var e=OZe(),t=MZe(),n=DZe(),r=IZe(),i=PZe();function s(f){var a=-1,p=f==null?0:f.length;for(this.clear();++a<p;){var y=f[a];this.set(y[0],y[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,gF=s,gF}var yF,CJ;function Mpe(){if(CJ)return yF;CJ=1;var e=oq(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var f=arguments,a=i?i.apply(this,f):f[0],p=s.cache;if(p.has(a))return p.get(a);var y=r.apply(this,f);return s.cache=p.set(a,y)||p,y};return s.cache=new(n.Cache||e),s}return n.Cache=e,yF=n,yF}var _F,MJ;function RZe(){if(MJ)return _F;MJ=1;var e=Mpe(),t=500;function n(r){var i=e(r,function(f){return s.size===t&&s.clear(),f}),s=i.cache;return i}return _F=n,_F}var vF,DJ;function kZe(){if(DJ)return vF;DJ=1;var e=RZe(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(f,a,p,y){s.push(p?y.replace(n,"$1"):a||f)}),s});return vF=r,vF}var bF,IJ;function sq(){if(IJ)return bF;IJ=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return bF=e,bF}var xF,PJ;function LZe(){if(PJ)return xF;PJ=1;var e=IO(),t=sq(),n=lf(),r=uT(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function f(a){if(typeof a=="string")return a;if(n(a))return t(a,f)+"";if(r(a))return s?s.call(a):"";var p=a+"";return p=="0"&&1/a==-1/0?"-0":p}return xF=f,xF}var wF,RJ;function Dpe(){if(RJ)return wF;RJ=1;var e=LZe();function t(n){return n==null?"":e(n)}return wF=t,wF}var SF,kJ;function Ipe(){if(kJ)return SF;kJ=1;var e=lf(),t=nq(),n=kZe(),r=Dpe();function i(s,f){return e(s)?s:t(s,f)?[s]:n(r(s))}return SF=i,SF}var TF,LJ;function lk(){if(LJ)return TF;LJ=1;var e=uT();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return TF=t,TF}var EF,zJ;function lq(){if(zJ)return EF;zJ=1;var e=Ipe(),t=lk();function n(r,i){i=e(i,r);for(var s=0,f=i.length;r!=null&&s<f;)r=r[t(i[s++])];return s&&s==f?r:void 0}return EF=n,EF}var AF,NJ;function Ppe(){if(NJ)return AF;NJ=1;var e=lq();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return AF=t,AF}var zZe=Ppe();const ed=ma(zZe);var OF,FJ;function NZe(){if(FJ)return OF;FJ=1;function e(t){return t==null}return OF=e,OF}var FZe=NZe();const Gi=ma(FZe);var CF,BJ;function BZe(){if(BJ)return CF;BJ=1;var e=__(),t=lf(),n=v_(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return CF=i,CF}var jZe=BZe();const Ox=ma(jZe);var UZe=rq();const Li=ma(UZe);var $Ze=f0();const cT=ma($Ze);var MF={exports:{}},Va={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jJ;function VZe(){if(jJ)return Va;jJ=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),f=Symbol.for("react.context"),a=Symbol.for("react.server_context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),N;N=Symbol.for("react.module.reference");function j(k){if(typeof k=="object"&&k!==null){var V=k.$$typeof;switch(V){case e:switch(k=k.type,k){case n:case i:case r:case y:case S:return k;default:switch(k=k&&k.$$typeof,k){case a:case f:case p:case I:case E:case s:return k;default:return V}}case t:return V}}}return Va.ContextConsumer=f,Va.ContextProvider=s,Va.Element=e,Va.ForwardRef=p,Va.Fragment=n,Va.Lazy=I,Va.Memo=E,Va.Portal=t,Va.Profiler=i,Va.StrictMode=r,Va.Suspense=y,Va.SuspenseList=S,Va.isAsyncMode=function(){return!1},Va.isConcurrentMode=function(){return!1},Va.isContextConsumer=function(k){return j(k)===f},Va.isContextProvider=function(k){return j(k)===s},Va.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},Va.isForwardRef=function(k){return j(k)===p},Va.isFragment=function(k){return j(k)===n},Va.isLazy=function(k){return j(k)===I},Va.isMemo=function(k){return j(k)===E},Va.isPortal=function(k){return j(k)===t},Va.isProfiler=function(k){return j(k)===i},Va.isStrictMode=function(k){return j(k)===r},Va.isSuspense=function(k){return j(k)===y},Va.isSuspenseList=function(k){return j(k)===S},Va.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===n||k===i||k===r||k===y||k===S||k===L||typeof k=="object"&&k!==null&&(k.$$typeof===I||k.$$typeof===E||k.$$typeof===s||k.$$typeof===f||k.$$typeof===p||k.$$typeof===N||k.getModuleId!==void 0)},Va.typeOf=j,Va}var UJ;function qZe(){return UJ||(UJ=1,MF.exports=VZe()),MF.exports}var HZe=qZe(),DF,$J;function Rpe(){if($J)return DF;$J=1;var e=__(),t=v_(),n="[object Number]";function r(i){return typeof i=="number"||t(i)&&e(i)==n}return DF=r,DF}var IF,VJ;function GZe(){if(VJ)return IF;VJ=1;var e=Rpe();function t(n){return e(n)&&n!=+n}return IF=t,IF}var YZe=GZe();const PO=ma(YZe);var WZe=Rpe();const XZe=ma(WZe);var yp=function(t){return t===0?0:t>0?1:-1},Xb=function(t){return Ox(t)&&t.indexOf("%")===t.length-1},Xn=function(t){return XZe(t)&&!PO(t)},ZZe=function(t){return Gi(t)},vl=function(t){return Xn(t)||Ox(t)},KZe=0,RO=function(t){var n=++KZe;return"".concat(t||"").concat(n)},Cx=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Xn(t)&&!Ox(t))return r;var s;if(Xb(t)){var f=t.indexOf("%");s=n*parseFloat(t.slice(0,f))/100}else s=+t;return PO(s)&&(s=r),i&&s>n&&(s=n),s},Nv=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},QZe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},i=0;i<n;i++)if(!r[t[i]])r[t[i]]=!0;else return!0;return!1},fp=function(t,n){return Xn(t)&&Xn(n)?function(r){return t+r*(n-t)}:function(){return n}};function zI(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):ed(r,t))===n})}var JZe=function(t,n){return Xn(t)&&Xn(n)?t-n:Ox(t)&&Ox(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function zw(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function x6(e){"@babel/helpers - typeof";return x6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x6(e)}var eKe=["viewBox","children"],tKe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],qJ=["points","pathLength"],PF={svg:eKe,polygon:qJ,polyline:qJ},uq=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],NI=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(be.isValidElement(t)&&(r=t.props),!cT(r))return null;var i={};return Object.keys(r).forEach(function(s){uq.includes(s)&&(i[s]=n||function(f){return r[s](r,f)})}),i},nKe=function(t,n,r){return function(i){return t(n,r,i),null}},FI=function(t,n,r){if(!cT(t)||x6(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(s){var f=t[s];uq.includes(s)&&typeof f=="function"&&(i||(i={}),i[s]=nKe(f,n,r))}),i},rKe=["children"],iKe=["children"];function HJ(e,t){if(e==null)return{};var n=aKe(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function aKe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function w6(e){"@babel/helpers - typeof";return w6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w6(e)}var GJ={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Yy=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},YJ=null,RF=null,cq=function e(t){if(t===YJ&&Array.isArray(RF))return RF;var n=[];return be.Children.forEach(t,function(r){Gi(r)||(HZe.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),RF=n,YJ=t,n};function td(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(i){return Yy(i)}):r=[Yy(t)],cq(e).forEach(function(i){var s=ed(i,"type.displayName")||ed(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function Gf(e,t){var n=td(e,t);return n&&n[0]}var WJ=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,i=n.height;return!(!Xn(r)||r<=0||!Xn(i)||i<=0)},oKe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],sKe=function(t){return t&&t.type&&Ox(t.type)&&oKe.indexOf(t.type)>=0},lKe=function(t){return t&&w6(t)==="object"&&"clipDot"in t},uKe=function(t,n,r,i){var s,f=(s=PF==null?void 0:PF[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Li(t)&&(i&&f.includes(n)||tKe.includes(n))||r&&uq.includes(n)},aa=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(be.isValidElement(t)&&(i=t.props),!cT(i))return null;var s={};return Object.keys(i).forEach(function(f){var a;uKe((a=i)===null||a===void 0?void 0:a[f],f,n,r)&&(s[f]=i[f])}),s},S6=function e(t,n){if(t===n)return!0;var r=be.Children.count(t);if(r!==be.Children.count(n))return!1;if(r===0)return!0;if(r===1)return XJ(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=t[i],f=n[i];if(Array.isArray(s)||Array.isArray(f)){if(!e(s,f))return!1}else if(!XJ(s,f))return!1}return!0},XJ=function(t,n){if(Gi(t)&&Gi(n))return!0;if(!Gi(t)&&!Gi(n)){var r=t.props||{},i=r.children,s=HJ(r,rKe),f=n.props||{},a=f.children,p=HJ(f,iKe);return i&&a?zw(s,p)&&S6(i,a):!i&&!a?zw(s,p):!1}return!1},ZJ=function(t,n){var r=[],i={};return cq(t).forEach(function(s,f){if(sKe(s))r.push(s);else if(s){var a=Yy(s.type),p=n[a]||{},y=p.handler,S=p.once;if(y&&(!S||!i[a])){var E=y(s,a,f);r.push(E),i[a]=!0}}}),r},cKe=function(t){var n=t&&t.type;return n&&GJ[n]?GJ[n]:null},fKe=function(t,n){return cq(n).indexOf(t)},hKe=["children","width","height","viewBox","className","style","title","desc"];function T6(){return T6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T6.apply(this,arguments)}function dKe(e,t){if(e==null)return{};var n=pKe(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pKe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function E6(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,s=e.className,f=e.style,a=e.title,p=e.desc,y=dKe(e,hKe),S=i||{width:n,height:r,x:0,y:0},E=ri("recharts-surface",s);return tt.createElement("svg",T6({},aa(y,!0,"svg"),{className:E,width:n,height:r,style:f,viewBox:"".concat(S.x," ").concat(S.y," ").concat(S.width," ").concat(S.height)}),tt.createElement("title",null,a),tt.createElement("desc",null,p),t)}var mKe=["children","className"];function A6(){return A6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A6.apply(this,arguments)}function gKe(e,t){if(e==null)return{};var n=yKe(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yKe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Rs=tt.forwardRef(function(e,t){var n=e.children,r=e.className,i=gKe(e,mKe),s=ri("recharts-layer",r);return tt.createElement("g",A6({className:s},aa(i,!0),{ref:t}),n)}),Wy=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]},kF,KJ;function _Ke(){if(KJ)return kF;KJ=1;function e(t,n,r){var i=-1,s=t.length;n<0&&(n=-n>s?0:s+n),r=r>s?s:r,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var f=Array(s);++i<s;)f[i]=t[i+n];return f}return kF=e,kF}var LF,QJ;function vKe(){if(QJ)return LF;QJ=1;var e=_Ke();function t(n,r,i){var s=n.length;return i=i===void 0?s:i,!r&&i>=s?n:e(n,r,i)}return LF=t,LF}var zF,JJ;function kpe(){if(JJ)return zF;JJ=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",f="\\u200d",a=RegExp("["+f+e+i+s+"]");function p(y){return a.test(y)}return zF=p,zF}var NF,eee;function bKe(){if(eee)return NF;eee=1;function e(t){return t.split("")}return NF=e,NF}var FF,tee;function xKe(){if(tee)return FF;tee=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",f="["+e+"]",a="["+i+"]",p="\\ud83c[\\udffb-\\udfff]",y="(?:"+a+"|"+p+")",S="[^"+e+"]",E="(?:\\ud83c[\\udde6-\\uddff]){2}",I="[\\ud800-\\udbff][\\udc00-\\udfff]",L="\\u200d",N=y+"?",j="["+s+"]?",k="(?:"+L+"(?:"+[S,E,I].join("|")+")"+j+N+")*",V=j+N+k,K="(?:"+[S+a+"?",a,E,I,f].join("|")+")",J=RegExp(p+"(?="+p+")|"+K+V,"g");function ie(Q){return Q.match(J)||[]}return FF=ie,FF}var BF,nee;function wKe(){if(nee)return BF;nee=1;var e=bKe(),t=kpe(),n=xKe();function r(i){return t(i)?n(i):e(i)}return BF=r,BF}var jF,ree;function SKe(){if(ree)return jF;ree=1;var e=vKe(),t=kpe(),n=wKe(),r=Dpe();function i(s){return function(f){f=r(f);var a=t(f)?n(f):void 0,p=a?a[0]:f.charAt(0),y=a?e(a,1).join(""):f.slice(1);return p[s]()+y}}return jF=i,jF}var UF,iee;function TKe(){if(iee)return UF;iee=1;var e=SKe(),t=e("toUpperCase");return UF=t,UF}var EKe=TKe();const uk=ma(EKe);function go(e){return function(){return e}}const Lpe=Math.cos,BI=Math.sin,Ip=Math.sqrt,jI=Math.PI,ck=2*jI,O6=Math.PI,C6=2*O6,Fb=1e-6,AKe=C6-Fb;function zpe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function OKe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return zpe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class CKe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zpe:OKe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,f){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+f}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let f=this._x1,a=this._y1,p=r-t,y=i-n,S=f-t,E=a-n,I=S*S+E*E;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(I>Fb)if(!(Math.abs(E*p-y*S)>Fb)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let L=r-f,N=i-a,j=p*p+y*y,k=L*L+N*N,V=Math.sqrt(j),K=Math.sqrt(I),J=s*Math.tan((O6-Math.acos((j+I-k)/(2*V*K)))/2),ie=J/K,Q=J/V;Math.abs(ie-1)>Fb&&this._append`L${t+ie*S},${n+ie*E}`,this._append`A${s},${s},0,0,${+(E*L>S*N)},${this._x1=t+Q*p},${this._y1=n+Q*y}`}}arc(t,n,r,i,s,f){if(t=+t,n=+n,r=+r,f=!!f,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),p=r*Math.sin(i),y=t+a,S=n+p,E=1^f,I=f?i-s:s-i;this._x1===null?this._append`M${y},${S}`:(Math.abs(this._x1-y)>Fb||Math.abs(this._y1-S)>Fb)&&this._append`L${y},${S}`,r&&(I<0&&(I=I%C6+C6),I>AKe?this._append`A${r},${r},0,1,${E},${t-a},${n-p}A${r},${r},0,1,${E},${this._x1=y},${this._y1=S}`:I>Fb&&this._append`A${r},${r},0,${+(I>=O6)},${E},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function fq(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new CKe(t)}function hq(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Npe(e){this._context=e}Npe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fk(e){return new Npe(e)}function Fpe(e){return e[0]}function Bpe(e){return e[1]}function jpe(e,t){var n=go(!0),r=null,i=fk,s=null,f=fq(a);e=typeof e=="function"?e:e===void 0?Fpe:go(e),t=typeof t=="function"?t:t===void 0?Bpe:go(t);function a(p){var y,S=(p=hq(p)).length,E,I=!1,L;for(r==null&&(s=i(L=f())),y=0;y<=S;++y)!(y<S&&n(E=p[y],y,p))===I&&((I=!I)?s.lineStart():s.lineEnd()),I&&s.point(+e(E,y,p),+t(E,y,p));if(L)return s=null,L+""||null}return a.x=function(p){return arguments.length?(e=typeof p=="function"?p:go(+p),a):e},a.y=function(p){return arguments.length?(t=typeof p=="function"?p:go(+p),a):t},a.defined=function(p){return arguments.length?(n=typeof p=="function"?p:go(!!p),a):n},a.curve=function(p){return arguments.length?(i=p,r!=null&&(s=i(r)),a):i},a.context=function(p){return arguments.length?(p==null?r=s=null:s=i(r=p),a):r},a}function jM(e,t,n){var r=null,i=go(!0),s=null,f=fk,a=null,p=fq(y);e=typeof e=="function"?e:e===void 0?Fpe:go(+e),t=typeof t=="function"?t:go(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Bpe:go(+n);function y(E){var I,L,N,j=(E=hq(E)).length,k,V=!1,K,J=new Array(j),ie=new Array(j);for(s==null&&(a=f(K=p())),I=0;I<=j;++I){if(!(I<j&&i(k=E[I],I,E))===V)if(V=!V)L=I,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),N=I-1;N>=L;--N)a.point(J[N],ie[N]);a.lineEnd(),a.areaEnd()}V&&(J[I]=+e(k,I,E),ie[I]=+t(k,I,E),a.point(r?+r(k,I,E):J[I],n?+n(k,I,E):ie[I]))}if(K)return a=null,K+""||null}function S(){return jpe().defined(i).curve(f).context(s)}return y.x=function(E){return arguments.length?(e=typeof E=="function"?E:go(+E),r=null,y):e},y.x0=function(E){return arguments.length?(e=typeof E=="function"?E:go(+E),y):e},y.x1=function(E){return arguments.length?(r=E==null?null:typeof E=="function"?E:go(+E),y):r},y.y=function(E){return arguments.length?(t=typeof E=="function"?E:go(+E),n=null,y):t},y.y0=function(E){return arguments.length?(t=typeof E=="function"?E:go(+E),y):t},y.y1=function(E){return arguments.length?(n=E==null?null:typeof E=="function"?E:go(+E),y):n},y.lineX0=y.lineY0=function(){return S().x(e).y(t)},y.lineY1=function(){return S().x(e).y(n)},y.lineX1=function(){return S().x(r).y(t)},y.defined=function(E){return arguments.length?(i=typeof E=="function"?E:go(!!E),y):i},y.curve=function(E){return arguments.length?(f=E,s!=null&&(a=f(s)),y):f},y.context=function(E){return arguments.length?(E==null?s=a=null:a=f(s=E),y):s},y}class Upe{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function MKe(e){return new Upe(e,!0)}function DKe(e){return new Upe(e,!1)}const dq={draw(e,t){const n=Ip(t/jI);e.moveTo(n,0),e.arc(0,0,n,0,ck)}},IKe={draw(e,t){const n=Ip(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},$pe=Ip(1/3),PKe=$pe*2,RKe={draw(e,t){const n=Ip(t/PKe),r=n*$pe;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},kKe={draw(e,t){const n=Ip(t),r=-n/2;e.rect(r,r,n,n)}},LKe=.8908130915292852,Vpe=BI(jI/10)/BI(7*jI/10),zKe=BI(ck/10)*Vpe,NKe=-Lpe(ck/10)*Vpe,FKe={draw(e,t){const n=Ip(t*LKe),r=zKe*n,i=NKe*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const f=ck*s/5,a=Lpe(f),p=BI(f);e.lineTo(p*n,-a*n),e.lineTo(a*r-p*i,p*r+a*i)}e.closePath()}},$F=Ip(3),BKe={draw(e,t){const n=-Ip(t/($F*3));e.moveTo(0,n*2),e.lineTo(-$F*n,-n),e.lineTo($F*n,-n),e.closePath()}},jh=-.5,Uh=Ip(3)/2,M6=1/Ip(12),jKe=(M6/2+1)*3,UKe={draw(e,t){const n=Ip(t/jKe),r=n/2,i=n*M6,s=r,f=n*M6+n,a=-s,p=f;e.moveTo(r,i),e.lineTo(s,f),e.lineTo(a,p),e.lineTo(jh*r-Uh*i,Uh*r+jh*i),e.lineTo(jh*s-Uh*f,Uh*s+jh*f),e.lineTo(jh*a-Uh*p,Uh*a+jh*p),e.lineTo(jh*r+Uh*i,jh*i-Uh*r),e.lineTo(jh*s+Uh*f,jh*f-Uh*s),e.lineTo(jh*a+Uh*p,jh*p-Uh*a),e.closePath()}};function $Ke(e,t){let n=null,r=fq(i);e=typeof e=="function"?e:go(e||dq),t=typeof t=="function"?t:go(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:go(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:go(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function UI(){}function $I(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function qpe(e){this._context=e}qpe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$I(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$I(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function VKe(e){return new qpe(e)}function Hpe(e){this._context=e}Hpe.prototype={areaStart:UI,areaEnd:UI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$I(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qKe(e){return new Hpe(e)}function Gpe(e){this._context=e}Gpe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:$I(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function HKe(e){return new Gpe(e)}function Ype(e){this._context=e}Ype.prototype={areaStart:UI,areaEnd:UI,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function GKe(e){return new Ype(e)}function aee(e){return e<0?-1:1}function oee(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),f=(n-e._y1)/(i||r<0&&-0),a=(s*i+f*r)/(r+i);return(aee(s)+aee(f))*Math.min(Math.abs(s),Math.abs(f),.5*Math.abs(a))||0}function see(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function VF(e,t,n){var r=e._x0,i=e._y0,s=e._x1,f=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,f-a*n,s,f)}function VI(e){this._context=e}VI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:VF(this,this._t0,see(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,VF(this,see(this,n=oee(this,e,t)),n);break;default:VF(this,this._t0,n=oee(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Wpe(e){this._context=new Xpe(e)}(Wpe.prototype=Object.create(VI.prototype)).point=function(e,t){VI.prototype.point.call(this,t,e)};function Xpe(e){this._context=e}Xpe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function YKe(e){return new VI(e)}function WKe(e){return new Wpe(e)}function Zpe(e){this._context=e}Zpe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=lee(e),i=lee(t),s=0,f=1;f<n;++s,++f)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[f],t[f]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function lee(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),f=new Array(n);for(i[0]=0,s[0]=2,f[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,f[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,f[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,f[t]-=r*f[t-1];for(i[n-1]=f[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(f[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function XKe(e){return new Zpe(e)}function hk(e,t){this._context=e,this._t=t}hk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ZKe(e){return new hk(e,.5)}function KKe(e){return new hk(e,0)}function QKe(e){return new hk(e,1)}function mS(e,t){if((f=e.length)>1)for(var n=1,r,i,s=e[t[0]],f,a=s.length;n<f;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function D6(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function JKe(e,t){return e[t]}function eQe(e){const t=[];return t.key=e,t}function tQe(){var e=go([]),t=D6,n=mS,r=JKe;function i(s){var f=Array.from(e.apply(this,arguments),eQe),a,p=f.length,y=-1,S;for(const E of s)for(a=0,++y;a<p;++a)(f[a][y]=[0,+r(E,f[a].key,y,s)]).data=E;for(a=0,S=hq(t(f));a<p;++a)f[S[a]].index=a;return n(f,S),f}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:go(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:go(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?D6:typeof s=="function"?s:go(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??mS,i):n},i}function nQe(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,f;i<s;++i){for(f=n=0;n<r;++n)f+=e[n][i][1]||0;if(f)for(n=0;n<r;++n)e[n][i][1]/=f}mS(e,t)}}function rQe(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var f=0,a=0;f<i;++f)a+=e[f][n][1]||0;r[n][1]+=r[n][0]=-a/2}mS(e,t)}}function iQe(e,t){if(!(!((f=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,f;r<s;++r){for(var a=0,p=0,y=0;a<f;++a){for(var S=e[t[a]],E=S[r][1]||0,I=S[r-1][1]||0,L=(E-I)/2,N=0;N<a;++N){var j=e[t[N]],k=j[r][1]||0,V=j[r-1][1]||0;L+=k-V}p+=E,y+=L*E}i[r-1][1]+=i[r-1][0]=n,p&&(n-=y/p)}i[r-1][1]+=i[r-1][0]=n,mS(e,t)}}function aA(e){"@babel/helpers - typeof";return aA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aA(e)}var aQe=["type","size","sizeType"];function I6(){return I6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I6.apply(this,arguments)}function uee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uee(Object(n),!0).forEach(function(r){oQe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uee(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oQe(e,t,n){return t=sQe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sQe(e){var t=lQe(e,"string");return aA(t)=="symbol"?t:t+""}function lQe(e,t){if(aA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(aA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uQe(e,t){if(e==null)return{};var n=cQe(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function cQe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Kpe={symbolCircle:dq,symbolCross:IKe,symbolDiamond:RKe,symbolSquare:kKe,symbolStar:FKe,symbolTriangle:BKe,symbolWye:UKe},fQe=Math.PI/180,hQe=function(t){var n="symbol".concat(uk(t));return Kpe[n]||dq},dQe=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*fQe;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},pQe=function(t,n){Kpe["symbol".concat(uk(t))]=n},pq=function(t){var n=t.type,r=n===void 0?"circle":n,i=t.size,s=i===void 0?64:i,f=t.sizeType,a=f===void 0?"area":f,p=uQe(t,aQe),y=cee(cee({},p),{},{type:r,size:s,sizeType:a}),S=function(){var k=hQe(r),V=$Ke().type(k).size(dQe(s,a,r));return V()},E=y.className,I=y.cx,L=y.cy,N=aa(y,!0);return I===+I&&L===+L&&s===+s?tt.createElement("path",I6({},N,{className:ri("recharts-symbols",E),transform:"translate(".concat(I,", ").concat(L,")"),d:S()})):null};pq.registerSymbol=pQe;function gS(e){"@babel/helpers - typeof";return gS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gS(e)}function P6(){return P6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P6.apply(this,arguments)}function fee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mQe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fee(Object(n),!0).forEach(function(r){oA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fee(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gQe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yQe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jpe(r.key),r)}}function _Qe(e,t,n){return t&&yQe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vQe(e,t,n){return t=qI(t),bQe(e,Qpe()?Reflect.construct(t,n||[],qI(e).constructor):t.apply(e,n))}function bQe(e,t){if(t&&(gS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xQe(e)}function xQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qpe=function(){return!!e})()}function qI(e){return qI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qI(e)}function wQe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R6(e,t)}function R6(e,t){return R6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},R6(e,t)}function oA(e,t,n){return t=Jpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jpe(e){var t=SQe(e,"string");return gS(t)=="symbol"?t:t+""}function SQe(e,t){if(gS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(gS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $h=32,mq=(function(e){function t(){return gQe(this,t),vQe(this,t,arguments)}return wQe(t,e),_Qe(t,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=$h/2,f=$h/6,a=$h/3,p=r.inactive?i:r.color;if(r.type==="plainline")return tt.createElement("line",{strokeWidth:4,fill:"none",stroke:p,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:$h,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return tt.createElement("path",{strokeWidth:4,fill:"none",stroke:p,d:"M0,".concat(s,"h").concat(a,`
            A`).concat(f,",").concat(f,",0,1,1,").concat(2*a,",").concat(s,`
            H`).concat($h,"M").concat(2*a,",").concat(s,`
            A`).concat(f,",").concat(f,",0,1,1,").concat(a,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return tt.createElement("path",{stroke:"none",fill:p,d:"M0,".concat($h/8,"h").concat($h,"v").concat($h*3/4,"h").concat(-$h,"z"),className:"recharts-legend-icon"});if(tt.isValidElement(r.legendIcon)){var y=mQe({},r);return delete y.legendIcon,tt.cloneElement(r.legendIcon,y)}return tt.createElement(pq,{fill:p,cx:s,cy:s,size:$h,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,f=i.iconSize,a=i.layout,p=i.formatter,y=i.inactiveColor,S={x:0,y:0,width:$h,height:$h},E={display:a==="horizontal"?"inline-block":"block",marginRight:10},I={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(L,N){var j=L.formatter||p,k=ri(oA(oA({"recharts-legend-item":!0},"legend-item-".concat(N),!0),"inactive",L.inactive));if(L.type==="none")return null;var V=Li(L.value)?null:L.value;Wy(!Li(L.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var K=L.inactive?y:L.color;return tt.createElement("li",P6({className:k,style:E,key:"legend-item-".concat(N)},FI(r.props,L,N)),tt.createElement(E6,{width:f,height:f,viewBox:S,style:I},r.renderIcon(L)),tt.createElement("span",{className:"recharts-legend-item-text",style:{color:K}},j?j(V,L,N):V))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,f=r.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:s==="horizontal"?f:"left"};return tt.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])})(be.PureComponent);oA(mq,"displayName","Legend");oA(mq,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var qF,hee;function TQe(){if(hee)return qF;hee=1;var e=ok();function t(){this.__data__=new e,this.size=0}return qF=t,qF}var HF,dee;function EQe(){if(dee)return HF;dee=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return HF=e,HF}var GF,pee;function AQe(){if(pee)return GF;pee=1;function e(t){return this.__data__.get(t)}return GF=e,GF}var YF,mee;function OQe(){if(mee)return YF;mee=1;function e(t){return this.__data__.has(t)}return YF=e,YF}var WF,gee;function CQe(){if(gee)return WF;gee=1;var e=ok(),t=aq(),n=oq(),r=200;function i(s,f){var a=this.__data__;if(a instanceof e){var p=a.__data__;if(!t||p.length<r-1)return p.push([s,f]),this.size=++a.size,this;a=this.__data__=new n(p)}return a.set(s,f),this.size=a.size,this}return WF=i,WF}var XF,yee;function eme(){if(yee)return XF;yee=1;var e=ok(),t=TQe(),n=EQe(),r=AQe(),i=OQe(),s=CQe();function f(a){var p=this.__data__=new e(a);this.size=p.size}return f.prototype.clear=t,f.prototype.delete=n,f.prototype.get=r,f.prototype.has=i,f.prototype.set=s,XF=f,XF}var ZF,_ee;function MQe(){if(_ee)return ZF;_ee=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return ZF=t,ZF}var KF,vee;function DQe(){if(vee)return KF;vee=1;function e(t){return this.__data__.has(t)}return KF=e,KF}var QF,bee;function tme(){if(bee)return QF;bee=1;var e=oq(),t=MQe(),n=DQe();function r(i){var s=-1,f=i==null?0:i.length;for(this.__data__=new e;++s<f;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,QF=r,QF}var JF,xee;function nme(){if(xee)return JF;xee=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return JF=e,JF}var eB,wee;function rme(){if(wee)return eB;wee=1;function e(t,n){return t.has(n)}return eB=e,eB}var tB,See;function ime(){if(See)return tB;See=1;var e=tme(),t=nme(),n=rme(),r=1,i=2;function s(f,a,p,y,S,E){var I=p&r,L=f.length,N=a.length;if(L!=N&&!(I&&N>L))return!1;var j=E.get(f),k=E.get(a);if(j&&k)return j==a&&k==f;var V=-1,K=!0,J=p&i?new e:void 0;for(E.set(f,a),E.set(a,f);++V<L;){var ie=f[V],Q=a[V];if(y)var W=I?y(Q,ie,V,a,f,E):y(ie,Q,V,f,a,E);if(W!==void 0){if(W)continue;K=!1;break}if(J){if(!t(a,function(te,X){if(!n(J,X)&&(ie===te||S(ie,te,p,y,E)))return J.push(X)})){K=!1;break}}else if(!(ie===Q||S(ie,Q,p,y,E))){K=!1;break}}return E.delete(f),E.delete(a),K}return tB=s,tB}var nB,Tee;function IQe(){if(Tee)return nB;Tee=1;var e=_g(),t=e.Uint8Array;return nB=t,nB}var rB,Eee;function PQe(){if(Eee)return rB;Eee=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return rB=e,rB}var iB,Aee;function gq(){if(Aee)return iB;Aee=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return iB=e,iB}var aB,Oee;function RQe(){if(Oee)return aB;Oee=1;var e=IO(),t=IQe(),n=iq(),r=ime(),i=PQe(),s=gq(),f=1,a=2,p="[object Boolean]",y="[object Date]",S="[object Error]",E="[object Map]",I="[object Number]",L="[object RegExp]",N="[object Set]",j="[object String]",k="[object Symbol]",V="[object ArrayBuffer]",K="[object DataView]",J=e?e.prototype:void 0,ie=J?J.valueOf:void 0;function Q(W,te,X,ae,le,ge,ye){switch(X){case K:if(W.byteLength!=te.byteLength||W.byteOffset!=te.byteOffset)return!1;W=W.buffer,te=te.buffer;case V:return!(W.byteLength!=te.byteLength||!ge(new t(W),new t(te)));case p:case y:case I:return n(+W,+te);case S:return W.name==te.name&&W.message==te.message;case L:case j:return W==te+"";case E:var De=i;case N:var He=ae&f;if(De||(De=s),W.size!=te.size&&!He)return!1;var Be=ye.get(W);if(Be)return Be==te;ae|=a,ye.set(W,te);var Ee=r(De(W),De(te),ae,le,ge,ye);return ye.delete(W),Ee;case k:if(ie)return ie.call(W)==ie.call(te)}return!1}return aB=Q,aB}var oB,Cee;function ame(){if(Cee)return oB;Cee=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return oB=e,oB}var sB,Mee;function kQe(){if(Mee)return sB;Mee=1;var e=ame(),t=lf();function n(r,i,s){var f=i(r);return t(r)?f:e(f,s(r))}return sB=n,sB}var lB,Dee;function LQe(){if(Dee)return lB;Dee=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,f=[];++r<i;){var a=t[r];n(a,r,t)&&(f[s++]=a)}return f}return lB=e,lB}var uB,Iee;function zQe(){if(Iee)return uB;Iee=1;function e(){return[]}return uB=e,uB}var cB,Pee;function NQe(){if(Pee)return cB;Pee=1;var e=LQe(),t=zQe(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(f){return f==null?[]:(f=Object(f),e(i(f),function(a){return r.call(f,a)}))}:t;return cB=s,cB}var fB,Ree;function FQe(){if(Ree)return fB;Ree=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return fB=e,fB}var hB,kee;function BQe(){if(kee)return hB;kee=1;var e=__(),t=v_(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return hB=r,hB}var dB,Lee;function yq(){if(Lee)return dB;Lee=1;var e=BQe(),t=v_(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(f){return t(f)&&r.call(f,"callee")&&!i.call(f,"callee")};return dB=s,dB}var s2={exports:{}},pB,zee;function jQe(){if(zee)return pB;zee=1;function e(){return!1}return pB=e,pB}s2.exports;var Nee;function ome(){return Nee||(Nee=1,(function(e,t){var n=_g(),r=jQe(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,f=s&&s.exports===i,a=f?n.Buffer:void 0,p=a?a.isBuffer:void 0,y=p||r;e.exports=y})(s2,s2.exports)),s2.exports}var mB,Fee;function _q(){if(Fee)return mB;Fee=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return mB=n,mB}var gB,Bee;function vq(){if(Bee)return gB;Bee=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return gB=t,gB}var yB,jee;function UQe(){if(jee)return yB;jee=1;var e=__(),t=vq(),n=v_(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",f="[object Date]",a="[object Error]",p="[object Function]",y="[object Map]",S="[object Number]",E="[object Object]",I="[object RegExp]",L="[object Set]",N="[object String]",j="[object WeakMap]",k="[object ArrayBuffer]",V="[object DataView]",K="[object Float32Array]",J="[object Float64Array]",ie="[object Int8Array]",Q="[object Int16Array]",W="[object Int32Array]",te="[object Uint8Array]",X="[object Uint8ClampedArray]",ae="[object Uint16Array]",le="[object Uint32Array]",ge={};ge[K]=ge[J]=ge[ie]=ge[Q]=ge[W]=ge[te]=ge[X]=ge[ae]=ge[le]=!0,ge[r]=ge[i]=ge[k]=ge[s]=ge[V]=ge[f]=ge[a]=ge[p]=ge[y]=ge[S]=ge[E]=ge[I]=ge[L]=ge[N]=ge[j]=!1;function ye(De){return n(De)&&t(De.length)&&!!ge[e(De)]}return yB=ye,yB}var _B,Uee;function sme(){if(Uee)return _B;Uee=1;function e(t){return function(n){return t(n)}}return _B=e,_B}var l2={exports:{}};l2.exports;var $ee;function $Qe(){return $ee||($ee=1,(function(e,t){var n=Ope(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,f=s&&n.process,a=(function(){try{var p=i&&i.require&&i.require("util").types;return p||f&&f.binding&&f.binding("util")}catch{}})();e.exports=a})(l2,l2.exports)),l2.exports}var vB,Vee;function lme(){if(Vee)return vB;Vee=1;var e=UQe(),t=sme(),n=$Qe(),r=n&&n.isTypedArray,i=r?t(r):e;return vB=i,vB}var bB,qee;function VQe(){if(qee)return bB;qee=1;var e=FQe(),t=yq(),n=lf(),r=ome(),i=_q(),s=lme(),f=Object.prototype,a=f.hasOwnProperty;function p(y,S){var E=n(y),I=!E&&t(y),L=!E&&!I&&r(y),N=!E&&!I&&!L&&s(y),j=E||I||L||N,k=j?e(y.length,String):[],V=k.length;for(var K in y)(S||a.call(y,K))&&!(j&&(K=="length"||L&&(K=="offset"||K=="parent")||N&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||i(K,V)))&&k.push(K);return k}return bB=p,bB}var xB,Hee;function qQe(){if(Hee)return xB;Hee=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return xB=t,xB}var wB,Gee;function ume(){if(Gee)return wB;Gee=1;function e(t,n){return function(r){return t(n(r))}}return wB=e,wB}var SB,Yee;function HQe(){if(Yee)return SB;Yee=1;var e=ume(),t=e(Object.keys,Object);return SB=t,SB}var TB,Wee;function GQe(){if(Wee)return TB;Wee=1;var e=qQe(),t=HQe(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var f=[];for(var a in Object(s))r.call(s,a)&&a!="constructor"&&f.push(a);return f}return TB=i,TB}var EB,Xee;function kO(){if(Xee)return EB;Xee=1;var e=rq(),t=vq();function n(r){return r!=null&&t(r.length)&&!e(r)}return EB=n,EB}var AB,Zee;function dk(){if(Zee)return AB;Zee=1;var e=VQe(),t=GQe(),n=kO();function r(i){return n(i)?e(i):t(i)}return AB=r,AB}var OB,Kee;function YQe(){if(Kee)return OB;Kee=1;var e=kQe(),t=NQe(),n=dk();function r(i){return e(i,n,t)}return OB=r,OB}var CB,Qee;function WQe(){if(Qee)return CB;Qee=1;var e=YQe(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,f,a,p,y,S){var E=a&t,I=e(s),L=I.length,N=e(f),j=N.length;if(L!=j&&!E)return!1;for(var k=L;k--;){var V=I[k];if(!(E?V in f:r.call(f,V)))return!1}var K=S.get(s),J=S.get(f);if(K&&J)return K==f&&J==s;var ie=!0;S.set(s,f),S.set(f,s);for(var Q=E;++k<L;){V=I[k];var W=s[V],te=f[V];if(p)var X=E?p(te,W,V,f,s,S):p(W,te,V,s,f,S);if(!(X===void 0?W===te||y(W,te,a,p,S):X)){ie=!1;break}Q||(Q=V=="constructor")}if(ie&&!Q){var ae=s.constructor,le=f.constructor;ae!=le&&"constructor"in s&&"constructor"in f&&!(typeof ae=="function"&&ae instanceof ae&&typeof le=="function"&&le instanceof le)&&(ie=!1)}return S.delete(s),S.delete(f),ie}return CB=i,CB}var MB,Jee;function XQe(){if(Jee)return MB;Jee=1;var e=Gx(),t=_g(),n=e(t,"DataView");return MB=n,MB}var DB,ete;function ZQe(){if(ete)return DB;ete=1;var e=Gx(),t=_g(),n=e(t,"Promise");return DB=n,DB}var IB,tte;function cme(){if(tte)return IB;tte=1;var e=Gx(),t=_g(),n=e(t,"Set");return IB=n,IB}var PB,nte;function KQe(){if(nte)return PB;nte=1;var e=Gx(),t=_g(),n=e(t,"WeakMap");return PB=n,PB}var RB,rte;function QQe(){if(rte)return RB;rte=1;var e=XQe(),t=aq(),n=ZQe(),r=cme(),i=KQe(),s=__(),f=Cpe(),a="[object Map]",p="[object Object]",y="[object Promise]",S="[object Set]",E="[object WeakMap]",I="[object DataView]",L=f(e),N=f(t),j=f(n),k=f(r),V=f(i),K=s;return(e&&K(new e(new ArrayBuffer(1)))!=I||t&&K(new t)!=a||n&&K(n.resolve())!=y||r&&K(new r)!=S||i&&K(new i)!=E)&&(K=function(J){var ie=s(J),Q=ie==p?J.constructor:void 0,W=Q?f(Q):"";if(W)switch(W){case L:return I;case N:return a;case j:return y;case k:return S;case V:return E}return ie}),RB=K,RB}var kB,ite;function JQe(){if(ite)return kB;ite=1;var e=eme(),t=ime(),n=RQe(),r=WQe(),i=QQe(),s=lf(),f=ome(),a=lme(),p=1,y="[object Arguments]",S="[object Array]",E="[object Object]",I=Object.prototype,L=I.hasOwnProperty;function N(j,k,V,K,J,ie){var Q=s(j),W=s(k),te=Q?S:i(j),X=W?S:i(k);te=te==y?E:te,X=X==y?E:X;var ae=te==E,le=X==E,ge=te==X;if(ge&&f(j)){if(!f(k))return!1;Q=!0,ae=!1}if(ge&&!ae)return ie||(ie=new e),Q||a(j)?t(j,k,V,K,J,ie):n(j,k,te,V,K,J,ie);if(!(V&p)){var ye=ae&&L.call(j,"__wrapped__"),De=le&&L.call(k,"__wrapped__");if(ye||De){var He=ye?j.value():j,Be=De?k.value():k;return ie||(ie=new e),J(He,Be,V,K,ie)}}return ge?(ie||(ie=new e),r(j,k,V,K,J,ie)):!1}return kB=N,kB}var LB,ate;function bq(){if(ate)return LB;ate=1;var e=JQe(),t=v_();function n(r,i,s,f,a){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,f,n,a)}return LB=n,LB}var zB,ote;function eJe(){if(ote)return zB;ote=1;var e=eme(),t=bq(),n=1,r=2;function i(s,f,a,p){var y=a.length,S=y,E=!p;if(s==null)return!S;for(s=Object(s);y--;){var I=a[y];if(E&&I[2]?I[1]!==s[I[0]]:!(I[0]in s))return!1}for(;++y<S;){I=a[y];var L=I[0],N=s[L],j=I[1];if(E&&I[2]){if(N===void 0&&!(L in s))return!1}else{var k=new e;if(p)var V=p(N,j,L,s,f,k);if(!(V===void 0?t(j,N,n|r,p,k):V))return!1}}return!0}return zB=i,zB}var NB,ste;function fme(){if(ste)return NB;ste=1;var e=f0();function t(n){return n===n&&!e(n)}return NB=t,NB}var FB,lte;function tJe(){if(lte)return FB;lte=1;var e=fme(),t=dk();function n(r){for(var i=t(r),s=i.length;s--;){var f=i[s],a=r[f];i[s]=[f,a,e(a)]}return i}return FB=n,FB}var BB,ute;function hme(){if(ute)return BB;ute=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return BB=e,BB}var jB,cte;function nJe(){if(cte)return jB;cte=1;var e=eJe(),t=tJe(),n=hme();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(f){return f===i||e(f,i,s)}}return jB=r,jB}var UB,fte;function rJe(){if(fte)return UB;fte=1;function e(t,n){return t!=null&&n in Object(t)}return UB=e,UB}var $B,hte;function iJe(){if(hte)return $B;hte=1;var e=Ipe(),t=yq(),n=lf(),r=_q(),i=vq(),s=lk();function f(a,p,y){p=e(p,a);for(var S=-1,E=p.length,I=!1;++S<E;){var L=s(p[S]);if(!(I=a!=null&&y(a,L)))break;a=a[L]}return I||++S!=E?I:(E=a==null?0:a.length,!!E&&i(E)&&r(L,E)&&(n(a)||t(a)))}return $B=f,$B}var VB,dte;function aJe(){if(dte)return VB;dte=1;var e=rJe(),t=iJe();function n(r,i){return r!=null&&t(r,i,e)}return VB=n,VB}var qB,pte;function oJe(){if(pte)return qB;pte=1;var e=bq(),t=Ppe(),n=aJe(),r=nq(),i=fme(),s=hme(),f=lk(),a=1,p=2;function y(S,E){return r(S)&&i(E)?s(f(S),E):function(I){var L=t(I,S);return L===void 0&&L===E?n(I,S):e(E,L,a|p)}}return qB=y,qB}var HB,mte;function fT(){if(mte)return HB;mte=1;function e(t){return t}return HB=e,HB}var GB,gte;function sJe(){if(gte)return GB;gte=1;function e(t){return function(n){return n==null?void 0:n[t]}}return GB=e,GB}var YB,yte;function lJe(){if(yte)return YB;yte=1;var e=lq();function t(n){return function(r){return e(r,n)}}return YB=t,YB}var WB,_te;function uJe(){if(_te)return WB;_te=1;var e=sJe(),t=lJe(),n=nq(),r=lk();function i(s){return n(s)?e(r(s)):t(s)}return WB=i,WB}var XB,vte;function h0(){if(vte)return XB;vte=1;var e=nJe(),t=oJe(),n=fT(),r=lf(),i=uJe();function s(f){return typeof f=="function"?f:f==null?n:typeof f=="object"?r(f)?t(f[0],f[1]):e(f):i(f)}return XB=s,XB}var ZB,bte;function dme(){if(bte)return ZB;bte=1;function e(t,n,r,i){for(var s=t.length,f=r+(i?1:-1);i?f--:++f<s;)if(n(t[f],f,t))return f;return-1}return ZB=e,ZB}var KB,xte;function cJe(){if(xte)return KB;xte=1;function e(t){return t!==t}return KB=e,KB}var QB,wte;function fJe(){if(wte)return QB;wte=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return QB=e,QB}var JB,Ste;function hJe(){if(Ste)return JB;Ste=1;var e=dme(),t=cJe(),n=fJe();function r(i,s,f){return s===s?n(i,s,f):e(i,t,f)}return JB=r,JB}var e5,Tte;function dJe(){if(Tte)return e5;Tte=1;var e=hJe();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return e5=t,e5}var t5,Ete;function pJe(){if(Ete)return t5;Ete=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return t5=e,t5}var n5,Ate;function mJe(){if(Ate)return n5;Ate=1;function e(){}return n5=e,n5}var r5,Ote;function gJe(){if(Ote)return r5;Ote=1;var e=cme(),t=mJe(),n=gq(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return r5=i,r5}var i5,Cte;function yJe(){if(Cte)return i5;Cte=1;var e=tme(),t=dJe(),n=pJe(),r=rme(),i=gJe(),s=gq(),f=200;function a(p,y,S){var E=-1,I=t,L=p.length,N=!0,j=[],k=j;if(S)N=!1,I=n;else if(L>=f){var V=y?null:i(p);if(V)return s(V);N=!1,I=r,k=new e}else k=y?[]:j;e:for(;++E<L;){var K=p[E],J=y?y(K):K;if(K=S||K!==0?K:0,N&&J===J){for(var ie=k.length;ie--;)if(k[ie]===J)continue e;y&&k.push(J),j.push(K)}else I(k,J,S)||(k!==j&&k.push(J),j.push(K))}return j}return i5=a,i5}var a5,Mte;function _Je(){if(Mte)return a5;Mte=1;var e=h0(),t=yJe();function n(r,i){return r&&r.length?t(r,e(i,2)):[]}return a5=n,a5}var vJe=_Je();const Dte=ma(vJe);function pme(e,t,n){return t===!0?Dte(e,n):Li(t)?Dte(e,t):e}function yS(e){"@babel/helpers - typeof";return yS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yS(e)}var bJe=["ref"];function Ite(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ty(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ite(Object(n),!0).forEach(function(r){pk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ite(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xJe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pte(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gme(r.key),r)}}function wJe(e,t,n){return t&&Pte(e.prototype,t),n&&Pte(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function SJe(e,t,n){return t=HI(t),TJe(e,mme()?Reflect.construct(t,n||[],HI(e).constructor):t.apply(e,n))}function TJe(e,t){if(t&&(yS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EJe(e)}function EJe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mme(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mme=function(){return!!e})()}function HI(e){return HI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},HI(e)}function AJe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k6(e,t)}function k6(e,t){return k6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},k6(e,t)}function pk(e,t,n){return t=gme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gme(e){var t=OJe(e,"string");return yS(t)=="symbol"?t:t+""}function OJe(e,t){if(yS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(yS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function CJe(e,t){if(e==null)return{};var n=MJe(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function MJe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function DJe(e){return e.value}function IJe(e,t){if(tt.isValidElement(e))return tt.cloneElement(e,t);if(typeof e=="function")return tt.createElement(e,t);t.ref;var n=CJe(t,bJe);return tt.createElement(mq,n)}var Rte=1,lx=(function(e){function t(){var n;xJe(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=SJe(this,t,[].concat(i)),pk(n,"lastBoundingBox",{width:-1,height:-1}),n}return AJe(t,e),wJe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Rte||Math.abs(i.height-this.lastBoundingBox.height)>Rte)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ty({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,f=i.align,a=i.verticalAlign,p=i.margin,y=i.chartWidth,S=i.chartHeight,E,I;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(f==="center"&&s==="vertical"){var L=this.getBBoxSnapshot();E={left:((y||0)-L.width)/2}}else E=f==="right"?{right:p&&p.right||0}:{left:p&&p.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var N=this.getBBoxSnapshot();I={top:((S||0)-N.height)/2}}else I=a==="bottom"?{bottom:p&&p.bottom||0}:{top:p&&p.top||0};return Ty(Ty({},E),I)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,f=i.width,a=i.height,p=i.wrapperStyle,y=i.payloadUniqBy,S=i.payload,E=Ty(Ty({position:"absolute",width:f||"auto",height:a||"auto"},this.getDefaultPosition(p)),p);return tt.createElement("div",{className:"recharts-legend-wrapper",style:E,ref:function(L){r.wrapperNode=L}},IJe(s,Ty(Ty({},this.props),{},{payload:pme(S,y,DJe)})))}}],[{key:"getWithHeight",value:function(r,i){var s=Ty(Ty({},this.defaultProps),r.props),f=s.layout;return f==="vertical"&&Xn(r.props.height)?{height:r.props.height}:f==="horizontal"?{width:r.props.width||i}:null}}])})(be.PureComponent);pk(lx,"displayName","Legend");pk(lx,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var o5,kte;function PJe(){if(kte)return o5;kte=1;var e=IO(),t=yq(),n=lf(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return o5=i,o5}var s5,Lte;function yme(){if(Lte)return s5;Lte=1;var e=ame(),t=PJe();function n(r,i,s,f,a){var p=-1,y=r.length;for(s||(s=t),a||(a=[]);++p<y;){var S=r[p];i>0&&s(S)?i>1?n(S,i-1,s,f,a):e(a,S):f||(a[a.length]=S)}return a}return s5=n,s5}var l5,zte;function RJe(){if(zte)return l5;zte=1;function e(t){return function(n,r,i){for(var s=-1,f=Object(n),a=i(n),p=a.length;p--;){var y=a[t?p:++s];if(r(f[y],y,f)===!1)break}return n}}return l5=e,l5}var u5,Nte;function kJe(){if(Nte)return u5;Nte=1;var e=RJe(),t=e();return u5=t,u5}var c5,Fte;function _me(){if(Fte)return c5;Fte=1;var e=kJe(),t=dk();function n(r,i){return r&&e(r,i,t)}return c5=n,c5}var f5,Bte;function LJe(){if(Bte)return f5;Bte=1;var e=kO();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var f=i.length,a=r?f:-1,p=Object(i);(r?a--:++a<f)&&s(p[a],a,p)!==!1;);return i}}return f5=t,f5}var h5,jte;function xq(){if(jte)return h5;jte=1;var e=_me(),t=LJe(),n=t(e);return h5=n,h5}var d5,Ute;function vme(){if(Ute)return d5;Ute=1;var e=xq(),t=kO();function n(r,i){var s=-1,f=t(r)?Array(r.length):[];return e(r,function(a,p,y){f[++s]=i(a,p,y)}),f}return d5=n,d5}var p5,$te;function zJe(){if($te)return p5;$te=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return p5=e,p5}var m5,Vte;function NJe(){if(Vte)return m5;Vte=1;var e=uT();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,f=n===n,a=e(n),p=r!==void 0,y=r===null,S=r===r,E=e(r);if(!y&&!E&&!a&&n>r||a&&p&&S&&!y&&!E||s&&p&&S||!i&&S||!f)return 1;if(!s&&!a&&!E&&n<r||E&&i&&f&&!s&&!a||y&&i&&f||!p&&f||!S)return-1}return 0}return m5=t,m5}var g5,qte;function FJe(){if(qte)return g5;qte=1;var e=NJe();function t(n,r,i){for(var s=-1,f=n.criteria,a=r.criteria,p=f.length,y=i.length;++s<p;){var S=e(f[s],a[s]);if(S){if(s>=y)return S;var E=i[s];return S*(E=="desc"?-1:1)}}return n.index-r.index}return g5=t,g5}var y5,Hte;function BJe(){if(Hte)return y5;Hte=1;var e=sq(),t=lq(),n=h0(),r=vme(),i=zJe(),s=sme(),f=FJe(),a=fT(),p=lf();function y(S,E,I){E.length?E=e(E,function(j){return p(j)?function(k){return t(k,j.length===1?j[0]:j)}:j}):E=[a];var L=-1;E=e(E,s(n));var N=r(S,function(j,k,V){var K=e(E,function(J){return J(j)});return{criteria:K,index:++L,value:j}});return i(N,function(j,k){return f(j,k,I)})}return y5=y,y5}var _5,Gte;function jJe(){if(Gte)return _5;Gte=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return _5=e,_5}var v5,Yte;function UJe(){if(Yte)return v5;Yte=1;var e=jJe(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var f=arguments,a=-1,p=t(f.length-i,0),y=Array(p);++a<p;)y[a]=f[i+a];a=-1;for(var S=Array(i+1);++a<i;)S[a]=f[a];return S[i]=s(y),e(r,this,S)}}return v5=n,v5}var b5,Wte;function $Je(){if(Wte)return b5;Wte=1;function e(t){return function(){return t}}return b5=e,b5}var x5,Xte;function bme(){if(Xte)return x5;Xte=1;var e=Gx(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return x5=t,x5}var w5,Zte;function VJe(){if(Zte)return w5;Zte=1;var e=$Je(),t=bme(),n=fT(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return w5=r,w5}var S5,Kte;function qJe(){if(Kte)return S5;Kte=1;var e=800,t=16,n=Date.now;function r(i){var s=0,f=0;return function(){var a=n(),p=t-(a-f);if(f=a,p>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return S5=r,S5}var T5,Qte;function HJe(){if(Qte)return T5;Qte=1;var e=VJe(),t=qJe(),n=t(e);return T5=n,T5}var E5,Jte;function GJe(){if(Jte)return E5;Jte=1;var e=fT(),t=UJe(),n=HJe();function r(i,s){return n(t(i,s,e),i+"")}return E5=r,E5}var A5,ene;function mk(){if(ene)return A5;ene=1;var e=iq(),t=kO(),n=_q(),r=f0();function i(s,f,a){if(!r(a))return!1;var p=typeof f;return(p=="number"?t(a)&&n(f,a.length):p=="string"&&f in a)?e(a[f],s):!1}return A5=i,A5}var O5,tne;function YJe(){if(tne)return O5;tne=1;var e=yme(),t=BJe(),n=GJe(),r=mk(),i=n(function(s,f){if(s==null)return[];var a=f.length;return a>1&&r(s,f[0],f[1])?f=[]:a>2&&r(f[0],f[1],f[2])&&(f=[f[0]]),t(s,e(f,1),[])});return O5=i,O5}var WJe=YJe();const wq=ma(WJe);function sA(e){"@babel/helpers - typeof";return sA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sA(e)}function L6(){return L6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L6.apply(this,arguments)}function XJe(e,t){return JJe(e)||QJe(e,t)||KJe(e,t)||ZJe()}function ZJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KJe(e,t){if(e){if(typeof e=="string")return nne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nne(e,t)}}function nne(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function QJe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function JJe(e){if(Array.isArray(e))return e}function rne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function C5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rne(Object(n),!0).forEach(function(r){eet(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rne(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eet(e,t,n){return t=tet(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tet(e){var t=net(e,"string");return sA(t)=="symbol"?t:t+""}function net(e,t){if(sA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(sA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ret(e){return Array.isArray(e)&&vl(e[0])&&vl(e[1])?e.join(" ~ "):e}var iet=function(t){var n=t.separator,r=n===void 0?" : ":n,i=t.contentStyle,s=i===void 0?{}:i,f=t.itemStyle,a=f===void 0?{}:f,p=t.labelStyle,y=p===void 0?{}:p,S=t.payload,E=t.formatter,I=t.itemSorter,L=t.wrapperClassName,N=t.labelClassName,j=t.label,k=t.labelFormatter,V=t.accessibilityLayer,K=V===void 0?!1:V,J=function(){if(S&&S.length){var ye={padding:0,margin:0},De=(I?wq(S,I):S).map(function(He,Be){if(He.type==="none")return null;var Ee=C5({display:"block",paddingTop:4,paddingBottom:4,color:He.color||"#000"},a),Fe=He.formatter||E||ret,at=He.value,yt=He.name,je=at,Ke=yt;if(Fe&&je!=null&&Ke!=null){var it=Fe(at,yt,He,Be,S);if(Array.isArray(it)){var Pe=XJe(it,2);je=Pe[0],Ke=Pe[1]}else je=it}return tt.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Be),style:Ee},vl(Ke)?tt.createElement("span",{className:"recharts-tooltip-item-name"},Ke):null,vl(Ke)?tt.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,tt.createElement("span",{className:"recharts-tooltip-item-value"},je),tt.createElement("span",{className:"recharts-tooltip-item-unit"},He.unit||""))});return tt.createElement("ul",{className:"recharts-tooltip-item-list",style:ye},De)}return null},ie=C5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),Q=C5({margin:0},y),W=!Gi(j),te=W?j:"",X=ri("recharts-default-tooltip",L),ae=ri("recharts-tooltip-label",N);W&&k&&S!==void 0&&S!==null&&(te=k(j,S));var le=K?{role:"status","aria-live":"assertive"}:{};return tt.createElement("div",L6({className:X,style:ie},le),tt.createElement("p",{className:ae,style:Q},tt.isValidElement(te)?te:"".concat(te)),J())};function lA(e){"@babel/helpers - typeof";return lA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lA(e)}function UM(e,t,n){return t=aet(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aet(e){var t=oet(e,"string");return lA(t)=="symbol"?t:t+""}function oet(e,t){if(lA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(lA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $E="recharts-tooltip-wrapper",set={visibility:"hidden"};function uet(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return ri($E,UM(UM(UM(UM({},"".concat($E,"-right"),Xn(n)&&t&&Xn(t.x)&&n>=t.x),"".concat($E,"-left"),Xn(n)&&t&&Xn(t.x)&&n<t.x),"".concat($E,"-bottom"),Xn(r)&&t&&Xn(t.y)&&r>=t.y),"".concat($E,"-top"),Xn(r)&&t&&Xn(t.y)&&r<t.y))}function ine(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,s=e.position,f=e.reverseDirection,a=e.tooltipDimension,p=e.viewBox,y=e.viewBoxDimension;if(s&&Xn(s[r]))return s[r];var S=n[r]-a-i,E=n[r]+i;if(t[r])return f[r]?S:E;if(f[r]){var I=S,L=p[r];return I<L?Math.max(E,p[r]):Math.max(S,p[r])}var N=E+a,j=p[r]+y;return N>j?Math.max(S,p[r]):Math.max(E,p[r])}function cet(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function fet(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,i=e.position,s=e.reverseDirection,f=e.tooltipBox,a=e.useTranslate3d,p=e.viewBox,y,S,E;return f.height>0&&f.width>0&&n?(S=ine({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:f.width,viewBox:p,viewBoxDimension:p.width}),E=ine({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:f.height,viewBox:p,viewBoxDimension:p.height}),y=cet({translateX:S,translateY:E,useTranslate3d:a})):y=set,{cssProperties:y,cssClasses:uet({translateX:S,translateY:E,coordinate:n})}}function _S(e){"@babel/helpers - typeof";return _S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_S(e)}function ane(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function one(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ane(Object(n),!0).forEach(function(r){N6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ane(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function het(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function det(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wme(r.key),r)}}function pet(e,t,n){return t&&det(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function met(e,t,n){return t=GI(t),get(e,xme()?Reflect.construct(t,n||[],GI(e).constructor):t.apply(e,n))}function get(e,t){if(t&&(_S(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yet(e)}function yet(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xme(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xme=function(){return!!e})()}function GI(e){return GI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},GI(e)}function _et(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z6(e,t)}function z6(e,t){return z6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},z6(e,t)}function N6(e,t,n){return t=wme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wme(e){var t=vet(e,"string");return _S(t)=="symbol"?t:t+""}function vet(e,t){if(_S(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_S(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sne=1,bet=(function(e){function t(){var n;het(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=met(this,t,[].concat(i)),N6(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),N6(n,"handleKeyDown",function(f){if(f.key==="Escape"){var a,p,y,S;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(p=n.props.coordinate)===null||p===void 0?void 0:p.x)!==null&&a!==void 0?a:0,y:(y=(S=n.props.coordinate)===null||S===void 0?void 0:S.y)!==null&&y!==void 0?y:0}})}}),n}return _et(t,e),pet(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>sne||Math.abs(r.height-this.state.lastBoundingBox.height)>sne)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,f=i.allowEscapeViewBox,a=i.animationDuration,p=i.animationEasing,y=i.children,S=i.coordinate,E=i.hasPayload,I=i.isAnimationActive,L=i.offset,N=i.position,j=i.reverseDirection,k=i.useTranslate3d,V=i.viewBox,K=i.wrapperStyle,J=fet({allowEscapeViewBox:f,coordinate:S,offsetTopLeft:L,position:N,reverseDirection:j,tooltipBox:this.state.lastBoundingBox,useTranslate3d:k,viewBox:V}),ie=J.cssClasses,Q=J.cssProperties,W=one(one({transition:I&&s?"transform ".concat(a,"ms ").concat(p):void 0},Q),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&E?"visible":"hidden",position:"absolute",top:0,left:0},K);return tt.createElement("div",{tabIndex:-1,className:ie,style:W,ref:function(X){r.wrapperNode=X}},y)}}])})(be.PureComponent),xet=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},hT={isSsr:xet()};function vS(e){"@babel/helpers - typeof";return vS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vS(e)}function lne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function une(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lne(Object(n),!0).forEach(function(r){Sq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lne(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wet(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tet(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tme(r.key),r)}}function Eet(e,t,n){return t&&Tet(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Aet(e,t,n){return t=YI(t),Oet(e,Sme()?Reflect.construct(t,n||[],YI(e).constructor):t.apply(e,n))}function Oet(e,t){if(t&&(vS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cet(e)}function Cet(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sme(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sme=function(){return!!e})()}function YI(e){return YI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},YI(e)}function Met(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F6(e,t)}function F6(e,t){return F6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},F6(e,t)}function Sq(e,t,n){return t=Tme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tme(e){var t=Det(e,"string");return vS(t)=="symbol"?t:t+""}function Det(e,t){if(vS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(vS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Iet(e){return e.dataKey}function Pet(e,t){return tt.isValidElement(e)?tt.cloneElement(e,t):typeof e=="function"?tt.createElement(e,t):tt.createElement(iet,t)}var Nm=(function(e){function t(){return wet(this,t),Aet(this,t,arguments)}return Met(t,e),Eet(t,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,f=i.allowEscapeViewBox,a=i.animationDuration,p=i.animationEasing,y=i.content,S=i.coordinate,E=i.filterNull,I=i.isAnimationActive,L=i.offset,N=i.payload,j=i.payloadUniqBy,k=i.position,V=i.reverseDirection,K=i.useTranslate3d,J=i.viewBox,ie=i.wrapperStyle,Q=N??[];E&&Q.length&&(Q=pme(N.filter(function(te){return te.value!=null&&(te.hide!==!0||r.props.includeHidden)}),j,Iet));var W=Q.length>0;return tt.createElement(bet,{allowEscapeViewBox:f,animationDuration:a,animationEasing:p,isAnimationActive:I,active:s,coordinate:S,hasPayload:W,offset:L,position:k,reverseDirection:V,useTranslate3d:K,viewBox:J,wrapperStyle:ie},Pet(y,une(une({},this.props),{},{payload:Q})))}}])})(be.PureComponent);Sq(Nm,"displayName","Tooltip");Sq(Nm,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!hT.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var M5,cne;function Ret(){if(cne)return M5;cne=1;var e=_g(),t=function(){return e.Date.now()};return M5=t,M5}var D5,fne;function ket(){if(fne)return D5;fne=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return D5=t,D5}var I5,hne;function Let(){if(hne)return I5;hne=1;var e=ket(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return I5=n,I5}var P5,dne;function Eme(){if(dne)return P5;dne=1;var e=Let(),t=f0(),n=uT(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,f=/^0o[0-7]+$/i,a=parseInt;function p(y){if(typeof y=="number")return y;if(n(y))return r;if(t(y)){var S=typeof y.valueOf=="function"?y.valueOf():y;y=t(S)?S+"":S}if(typeof y!="string")return y===0?y:+y;y=e(y);var E=s.test(y);return E||f.test(y)?a(y.slice(2),E?2:8):i.test(y)?r:+y}return P5=p,P5}var R5,pne;function zet(){if(pne)return R5;pne=1;var e=f0(),t=Ret(),n=Eme(),r="Expected a function",i=Math.max,s=Math.min;function f(a,p,y){var S,E,I,L,N,j,k=0,V=!1,K=!1,J=!0;if(typeof a!="function")throw new TypeError(r);p=n(p)||0,e(y)&&(V=!!y.leading,K="maxWait"in y,I=K?i(n(y.maxWait)||0,p):I,J="trailing"in y?!!y.trailing:J);function ie(De){var He=S,Be=E;return S=E=void 0,k=De,L=a.apply(Be,He),L}function Q(De){return k=De,N=setTimeout(X,p),V?ie(De):L}function W(De){var He=De-j,Be=De-k,Ee=p-He;return K?s(Ee,I-Be):Ee}function te(De){var He=De-j,Be=De-k;return j===void 0||He>=p||He<0||K&&Be>=I}function X(){var De=t();if(te(De))return ae(De);N=setTimeout(X,W(De))}function ae(De){return N=void 0,J&&S?ie(De):(S=E=void 0,L)}function le(){N!==void 0&&clearTimeout(N),k=0,S=j=E=N=void 0}function ge(){return N===void 0?L:ae(t())}function ye(){var De=t(),He=te(De);if(S=arguments,E=this,j=De,He){if(N===void 0)return Q(j);if(K)return clearTimeout(N),N=setTimeout(X,p),ie(j)}return N===void 0&&(N=setTimeout(X,p)),L}return ye.cancel=le,ye.flush=ge,ye}return R5=f,R5}var k5,mne;function Net(){if(mne)return k5;mne=1;var e=zet(),t=f0(),n="Expected a function";function r(i,s,f){var a=!0,p=!0;if(typeof i!="function")throw new TypeError(n);return t(f)&&(a="leading"in f?!!f.leading:a,p="trailing"in f?!!f.trailing:p),e(i,s,{leading:a,maxWait:s,trailing:p})}return k5=r,k5}var Fet=Net();const Ame=ma(Fet);function uA(e){"@babel/helpers - typeof";return uA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uA(e)}function gne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $M(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gne(Object(n),!0).forEach(function(r){Bet(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gne(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bet(e,t,n){return t=jet(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jet(e){var t=Uet(e,"string");return uA(t)=="symbol"?t:t+""}function Uet(e,t){if(uA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(uA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $et(e,t){return Get(e)||Het(e,t)||qet(e,t)||Vet()}function Vet(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qet(e,t){if(e){if(typeof e=="string")return yne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yne(e,t)}}function yne(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Het(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function Get(e){if(Array.isArray(e))return e}var Yet=be.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=e.width,f=s===void 0?"100%":s,a=e.height,p=a===void 0?"100%":a,y=e.minWidth,S=y===void 0?0:y,E=e.minHeight,I=e.maxHeight,L=e.children,N=e.debounce,j=N===void 0?0:N,k=e.id,V=e.className,K=e.onResize,J=e.style,ie=J===void 0?{}:J,Q=be.useRef(null),W=be.useRef();W.current=K,be.useImperativeHandle(t,function(){return Object.defineProperty(Q.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),Q.current},configurable:!0})});var te=be.useState({containerWidth:i.width,containerHeight:i.height}),X=$et(te,2),ae=X[0],le=X[1],ge=be.useCallback(function(De,He){le(function(Be){var Ee=Math.round(De),Fe=Math.round(He);return Be.containerWidth===Ee&&Be.containerHeight===Fe?Be:{containerWidth:Ee,containerHeight:Fe}})},[]);be.useEffect(function(){var De=function(yt){var je,Ke=yt[0].contentRect,it=Ke.width,Pe=Ke.height;ge(it,Pe),(je=W.current)===null||je===void 0||je.call(W,it,Pe)};j>0&&(De=Ame(De,j,{trailing:!0,leading:!1}));var He=new ResizeObserver(De),Be=Q.current.getBoundingClientRect(),Ee=Be.width,Fe=Be.height;return ge(Ee,Fe),He.observe(Q.current),function(){He.disconnect()}},[ge,j]);var ye=be.useMemo(function(){var De=ae.containerWidth,He=ae.containerHeight;if(De<0||He<0)return null;Wy(Xb(f)||Xb(p),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,f,p),Wy(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Be=Xb(f)?De:f,Ee=Xb(p)?He:p;n&&n>0&&(Be?Ee=Be/n:Ee&&(Be=Ee*n),I&&Ee>I&&(Ee=I)),Wy(Be>0||Ee>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Be,Ee,f,p,S,E,n);var Fe=!Array.isArray(L)&&Yy(L.type).endsWith("Chart");return tt.Children.map(L,function(at){return tt.isValidElement(at)?be.cloneElement(at,$M({width:Be,height:Ee},Fe?{style:$M({height:"100%",width:"100%",maxHeight:Ee,maxWidth:Be},at.props.style)}:{})):at})},[n,L,p,I,E,S,ae,f]);return tt.createElement("div",{id:k?"".concat(k):void 0,className:ri("recharts-responsive-container",V),style:$M($M({},ie),{},{width:f,height:p,minWidth:S,minHeight:E,maxHeight:I}),ref:Q},ye)}),Ome=function(t){return null};Ome.displayName="Cell";function cA(e){"@babel/helpers - typeof";return cA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cA(e)}function _ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function B6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_ne(Object(n),!0).forEach(function(r){Wet(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_ne(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wet(e,t,n){return t=Xet(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xet(e){var t=Zet(e,"string");return cA(t)=="symbol"?t:t+""}function Zet(e,t){if(cA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(cA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cw={widthCache:{},cacheCount:0},Ket=2e3,Qet={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},vne="recharts_measurement_span";function Jet(e){var t=B6({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var w2=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hT.isSsr)return{width:0,height:0};var r=Jet(n),i=JSON.stringify({text:t,copyStyle:r});if(cw.widthCache[i])return cw.widthCache[i];try{var s=document.getElementById(vne);s||(s=document.createElement("span"),s.setAttribute("id",vne),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var f=B6(B6({},Qet),r);Object.assign(s.style,f),s.textContent="".concat(t);var a=s.getBoundingClientRect(),p={width:a.width,height:a.height};return cw.widthCache[i]=p,++cw.cacheCount>Ket&&(cw.cacheCount=0,cw.widthCache={}),p}catch{return{width:0,height:0}}},ett=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function fA(e){"@babel/helpers - typeof";return fA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fA(e)}function WI(e,t){return itt(e)||rtt(e,t)||ntt(e,t)||ttt()}function ttt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ntt(e,t){if(e){if(typeof e=="string")return bne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bne(e,t)}}function bne(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rtt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;p=!1}else for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function itt(e){if(Array.isArray(e))return e}function att(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,stt(r.key),r)}}function ott(e,t,n){return t&&xne(e.prototype,t),n&&xne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function stt(e){var t=ltt(e,"string");return fA(t)=="symbol"?t:t+""}function ltt(e,t){if(fA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(fA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wne=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Sne=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,utt=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ctt=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Cme={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ftt=Object.keys(Cme),ww="NaN";function htt(e,t){return e*Cme[t]}var VM=(function(){function e(t,n){att(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!utt.test(n)&&(this.num=NaN,this.unit=""),ftt.includes(n)&&(this.num=htt(t,n),this.unit="px")}return ott(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=ctt.exec(n))!==null&&r!==void 0?r:[],s=WI(i,3),f=s[1],a=s[2];return new e(parseFloat(f),a??"")}}])})();function Mme(e){if(e.includes(ww))return ww;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=wne.exec(t))!==null&&n!==void 0?n:[],i=WI(r,4),s=i[1],f=i[2],a=i[3],p=VM.parse(s??""),y=VM.parse(a??""),S=f==="*"?p.multiply(y):p.divide(y);if(S.isNaN())return ww;t=t.replace(wne,S.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var E,I=(E=Sne.exec(t))!==null&&E!==void 0?E:[],L=WI(I,4),N=L[1],j=L[2],k=L[3],V=VM.parse(N??""),K=VM.parse(k??""),J=j==="+"?V.add(K):V.subtract(K);if(J.isNaN())return ww;t=t.replace(Sne,J.toString())}return t}var Tne=/\(([^()]*)\)/;function dtt(e){for(var t=e;t.includes("(");){var n=Tne.exec(t),r=WI(n,2),i=r[1];t=t.replace(Tne,Mme(i))}return t}function ptt(e){var t=e.replace(/\s+/g,"");return t=dtt(t),t=Mme(t),t}function mtt(e){try{return ptt(e)}catch{return ww}}function L5(e){var t=mtt(e.slice(5,-1));return t===ww?"":t}var gtt=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ytt=["dx","dy","angle","className","breakAll"];function j6(){return j6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j6.apply(this,arguments)}function Ene(e,t){if(e==null)return{};var n=_tt(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _tt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ane(e,t){return wtt(e)||xtt(e,t)||btt(e,t)||vtt()}function vtt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function btt(e,t){if(e){if(typeof e=="string")return One(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return One(e,t)}}function One(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xtt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;p=!1}else for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function wtt(e){if(Array.isArray(e))return e}var Dme=/[ \f\n\r\t\v\u2028\u2029]+/,Ime=function(t){var n=t.children,r=t.breakAll,i=t.style;try{var s=[];Gi(n)||(r?s=n.toString().split(""):s=n.toString().split(Dme));var f=s.map(function(p){return{word:p,width:w2(p,i).width}}),a=r?0:w2("",i).width;return{wordsWithComputedWidth:f,spaceWidth:a}}catch{return null}},Stt=function(t,n,r,i,s){var f=t.maxLines,a=t.children,p=t.style,y=t.breakAll,S=Xn(f),E=a,I=function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Be.reduce(function(Ee,Fe){var at=Fe.word,yt=Fe.width,je=Ee[Ee.length-1];if(je&&(i==null||s||je.width+yt+r<Number(i)))je.words.push(at),je.width+=yt+r;else{var Ke={words:[at],width:yt};Ee.push(Ke)}return Ee},[])},L=I(n),N=function(Be){return Be.reduce(function(Ee,Fe){return Ee.width>Fe.width?Ee:Fe})};if(!S)return L;for(var j="",k=function(Be){var Ee=E.slice(0,Be),Fe=Ime({breakAll:y,style:p,children:Ee+j}).wordsWithComputedWidth,at=I(Fe),yt=at.length>f||N(at).width>Number(i);return[yt,at]},V=0,K=E.length-1,J=0,ie;V<=K&&J<=E.length-1;){var Q=Math.floor((V+K)/2),W=Q-1,te=k(W),X=Ane(te,2),ae=X[0],le=X[1],ge=k(Q),ye=Ane(ge,1),De=ye[0];if(!ae&&!De&&(V=Q+1),ae&&De&&(K=Q-1),!ae&&De){ie=le;break}J++}return ie||L},Cne=function(t){var n=Gi(t)?[]:t.toString().split(Dme);return[{words:n}]},Ttt=function(t){var n=t.width,r=t.scaleToFit,i=t.children,s=t.style,f=t.breakAll,a=t.maxLines;if((n||r)&&!hT.isSsr){var p,y,S=Ime({breakAll:f,children:i,style:s});if(S){var E=S.wordsWithComputedWidth,I=S.spaceWidth;p=E,y=I}else return Cne(i);return Stt({breakAll:f,children:i,maxLines:a,style:s},p,y,n,r)}return Cne(i)},Mne="#808080",XI=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,s=i===void 0?0:i,f=t.lineHeight,a=f===void 0?"1em":f,p=t.capHeight,y=p===void 0?"0.71em":p,S=t.scaleToFit,E=S===void 0?!1:S,I=t.textAnchor,L=I===void 0?"start":I,N=t.verticalAnchor,j=N===void 0?"end":N,k=t.fill,V=k===void 0?Mne:k,K=Ene(t,gtt),J=be.useMemo(function(){return Ttt({breakAll:K.breakAll,children:K.children,maxLines:K.maxLines,scaleToFit:E,style:K.style,width:K.width})},[K.breakAll,K.children,K.maxLines,E,K.style,K.width]),ie=K.dx,Q=K.dy,W=K.angle,te=K.className,X=K.breakAll,ae=Ene(K,ytt);if(!vl(r)||!vl(s))return null;var le=r+(Xn(ie)?ie:0),ge=s+(Xn(Q)?Q:0),ye;switch(j){case"start":ye=L5("calc(".concat(y,")"));break;case"middle":ye=L5("calc(".concat((J.length-1)/2," * -").concat(a," + (").concat(y," / 2))"));break;default:ye=L5("calc(".concat(J.length-1," * -").concat(a,")"));break}var De=[];if(E){var He=J[0].width,Be=K.width;De.push("scale(".concat((Xn(Be)?Be/He:1)/He,")"))}return W&&De.push("rotate(".concat(W,", ").concat(le,", ").concat(ge,")")),De.length&&(ae.transform=De.join(" ")),tt.createElement("text",j6({},aa(ae,!0),{x:le,y:ge,className:ri("recharts-text",te),textAnchor:L,fill:V.includes("url")?Mne:V}),J.map(function(Ee,Fe){var at=Ee.words.join(X?"":" ");return tt.createElement("tspan",{x:le,dy:Fe===0?ye:a,key:"".concat(at,"-").concat(Fe)},at)}))};function Wv(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ett(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Tq(e){let t,n,r;e.length!==2?(t=Wv,n=(a,p)=>Wv(e(a),p),r=(a,p)=>e(a)-p):(t=e===Wv||e===Ett?e:Att,n=e,r=e);function i(a,p,y=0,S=a.length){if(y<S){if(t(p,p)!==0)return S;do{const E=y+S>>>1;n(a[E],p)<0?y=E+1:S=E}while(y<S)}return y}function s(a,p,y=0,S=a.length){if(y<S){if(t(p,p)!==0)return S;do{const E=y+S>>>1;n(a[E],p)<=0?y=E+1:S=E}while(y<S)}return y}function f(a,p,y=0,S=a.length){const E=i(a,p,y,S-1);return E>y&&r(a[E-1],p)>-r(a[E],p)?E-1:E}return{left:i,center:f,right:s}}function Att(){return 0}function Pme(e){return e===null?NaN:+e}function*Ott(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Ctt=Tq(Wv),LO=Ctt.right;Tq(Pme).center;class Dne extends Map{constructor(t,n=Itt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Ine(this,t))}has(t){return super.has(Ine(this,t))}set(t,n){return super.set(Mtt(this,t),n)}delete(t){return super.delete(Dtt(this,t))}}function Ine({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Mtt({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Dtt({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Itt(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ptt(e=Wv){if(e===Wv)return Rme;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Rme(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Rtt=Math.sqrt(50),ktt=Math.sqrt(10),Ltt=Math.sqrt(2);function ZI(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),f=s>=Rtt?10:s>=ktt?5:s>=Ltt?2:1;let a,p,y;return i<0?(y=Math.pow(10,-i)/f,a=Math.round(e*y),p=Math.round(t*y),a/y<e&&++a,p/y>t&&--p,y=-y):(y=Math.pow(10,i)*f,a=Math.round(e/y),p=Math.round(t/y),a*y<e&&++a,p*y>t&&--p),p<a&&.5<=n&&n<2?ZI(e,t,n*2):[a,p,y]}function U6(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,f]=r?ZI(t,e,n):ZI(e,t,n);if(!(s>=i))return[];const a=s-i+1,p=new Array(a);if(r)if(f<0)for(let y=0;y<a;++y)p[y]=(s-y)/-f;else for(let y=0;y<a;++y)p[y]=(s-y)*f;else if(f<0)for(let y=0;y<a;++y)p[y]=(i+y)/-f;else for(let y=0;y<a;++y)p[y]=(i+y)*f;return p}function $6(e,t,n){return t=+t,e=+e,n=+n,ZI(e,t,n)[2]}function V6(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?$6(t,e,n):$6(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Pne(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Rne(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function kme(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Rme:Ptt(i);r>n;){if(r-n>600){const p=r-n+1,y=t-n+1,S=Math.log(p),E=.5*Math.exp(2*S/3),I=.5*Math.sqrt(S*E*(p-E)/p)*(y-p/2<0?-1:1),L=Math.max(n,Math.floor(t-y*E/p+I)),N=Math.min(r,Math.floor(t+(p-y)*E/p+I));kme(e,t,L,N,i)}const s=e[t];let f=n,a=r;for(VE(e,n,t),i(e[r],s)>0&&VE(e,n,r);f<a;){for(VE(e,f,a),++f,--a;i(e[f],s)<0;)++f;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?VE(e,n,a):(++a,VE(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function VE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ztt(e,t,n){if(e=Float64Array.from(Ott(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Rne(e);if(t>=1)return Pne(e);var r,i=(r-1)*t,s=Math.floor(i),f=Pne(kme(e,s).subarray(0,s+1)),a=Rne(e.subarray(s+1));return f+(a-f)*(i-s)}}function Ntt(e,t,n=Pme){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),f=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return f+(a-f)*(i-s)}}function Ftt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function pd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function b_(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const q6=Symbol("implicit");function Eq(){var e=new Dne,t=[],n=[],r=q6;function i(s){let f=e.get(s);if(f===void 0){if(r!==q6)return r;e.set(s,f=t.push(s)-1)}return n[f%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Dne;for(const f of s)e.has(f)||e.set(f,t.push(f)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Eq(t,n).unknown(r)},pd.apply(i,arguments),i}function hA(){var e=Eq().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,f,a=!1,p=0,y=0,S=.5;delete e.unknown;function E(){var I=t().length,L=i<r,N=L?i:r,j=L?r:i;s=(j-N)/Math.max(1,I-p+y*2),a&&(s=Math.floor(s)),N+=(j-N-s*(I-p))*S,f=s*(1-p),a&&(N=Math.round(N),f=Math.round(f));var k=Ftt(I).map(function(V){return N+s*V});return n(L?k.reverse():k)}return e.domain=function(I){return arguments.length?(t(I),E()):t()},e.range=function(I){return arguments.length?([r,i]=I,r=+r,i=+i,E()):[r,i]},e.rangeRound=function(I){return[r,i]=I,r=+r,i=+i,a=!0,E()},e.bandwidth=function(){return f},e.step=function(){return s},e.round=function(I){return arguments.length?(a=!!I,E()):a},e.padding=function(I){return arguments.length?(p=Math.min(1,y=+I),E()):p},e.paddingInner=function(I){return arguments.length?(p=Math.min(1,I),E()):p},e.paddingOuter=function(I){return arguments.length?(y=+I,E()):y},e.align=function(I){return arguments.length?(S=Math.max(0,Math.min(1,I)),E()):S},e.copy=function(){return hA(t(),[r,i]).round(a).paddingInner(p).paddingOuter(y).align(S)},pd.apply(E(),arguments)}function Lme(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Lme(t())},e}function S2(){return Lme(hA.apply(null,arguments).paddingInner(1))}function Aq(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function zme(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function zO(){}var dA=.7,KI=1/dA,Nw="\\s*([+-]?\\d+)\\s*",pA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ag="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Btt=/^#([0-9a-f]{3,8})$/,jtt=new RegExp(`^rgb\\(${Nw},${Nw},${Nw}\\)$`),Utt=new RegExp(`^rgb\\(${ag},${ag},${ag}\\)$`),$tt=new RegExp(`^rgba\\(${Nw},${Nw},${Nw},${pA}\\)$`),Vtt=new RegExp(`^rgba\\(${ag},${ag},${ag},${pA}\\)$`),qtt=new RegExp(`^hsl\\(${pA},${ag},${ag}\\)$`),Htt=new RegExp(`^hsla\\(${pA},${ag},${ag},${pA}\\)$`),kne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Aq(zO,mA,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Lne,formatHex:Lne,formatHex8:Gtt,formatHsl:Ytt,formatRgb:zne,toString:zne});function Lne(){return this.rgb().formatHex()}function Gtt(){return this.rgb().formatHex8()}function Ytt(){return Nme(this).formatHsl()}function zne(){return this.rgb().formatRgb()}function mA(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Btt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Nne(t):n===3?new Qc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?qM(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?qM(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=jtt.exec(e))?new Qc(t[1],t[2],t[3],1):(t=Utt.exec(e))?new Qc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$tt.exec(e))?qM(t[1],t[2],t[3],t[4]):(t=Vtt.exec(e))?qM(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qtt.exec(e))?jne(t[1],t[2]/100,t[3]/100,1):(t=Htt.exec(e))?jne(t[1],t[2]/100,t[3]/100,t[4]):kne.hasOwnProperty(e)?Nne(kne[e]):e==="transparent"?new Qc(NaN,NaN,NaN,0):null}function Nne(e){return new Qc(e>>16&255,e>>8&255,e&255,1)}function qM(e,t,n,r){return r<=0&&(e=t=n=NaN),new Qc(e,t,n,r)}function Wtt(e){return e instanceof zO||(e=mA(e)),e?(e=e.rgb(),new Qc(e.r,e.g,e.b,e.opacity)):new Qc}function H6(e,t,n,r){return arguments.length===1?Wtt(e):new Qc(e,t,n,r??1)}function Qc(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Aq(Qc,H6,zme(zO,{brighter(e){return e=e==null?KI:Math.pow(KI,e),new Qc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dA:Math.pow(dA,e),new Qc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qc(ux(this.r),ux(this.g),ux(this.b),QI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fne,formatHex:Fne,formatHex8:Xtt,formatRgb:Bne,toString:Bne}));function Fne(){return`#${Zb(this.r)}${Zb(this.g)}${Zb(this.b)}`}function Xtt(){return`#${Zb(this.r)}${Zb(this.g)}${Zb(this.b)}${Zb((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bne(){const e=QI(this.opacity);return`${e===1?"rgb(":"rgba("}${ux(this.r)}, ${ux(this.g)}, ${ux(this.b)}${e===1?")":`, ${e})`}`}function QI(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ux(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zb(e){return e=ux(e),(e<16?"0":"")+e.toString(16)}function jne(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mp(e,t,n,r)}function Nme(e){if(e instanceof mp)return new mp(e.h,e.s,e.l,e.opacity);if(e instanceof zO||(e=mA(e)),!e)return new mp;if(e instanceof mp)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),f=NaN,a=s-i,p=(s+i)/2;return a?(t===s?f=(n-r)/a+(n<r)*6:n===s?f=(r-t)/a+2:f=(t-n)/a+4,a/=p<.5?s+i:2-s-i,f*=60):a=p>0&&p<1?0:f,new mp(f,a,p,e.opacity)}function Ztt(e,t,n,r){return arguments.length===1?Nme(e):new mp(e,t,n,r??1)}function mp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Aq(mp,Ztt,zme(zO,{brighter(e){return e=e==null?KI:Math.pow(KI,e),new mp(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dA:Math.pow(dA,e),new mp(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Qc(z5(e>=240?e-240:e+120,i,r),z5(e,i,r),z5(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new mp(Une(this.h),HM(this.s),HM(this.l),QI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=QI(this.opacity);return`${e===1?"hsl(":"hsla("}${Une(this.h)}, ${HM(this.s)*100}%, ${HM(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Une(e){return e=(e||0)%360,e<0?e+360:e}function HM(e){return Math.max(0,Math.min(1,e||0))}function z5(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Oq=e=>()=>e;function Ktt(e,t){return function(n){return e+n*t}}function Qtt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Jtt(e){return(e=+e)==1?Fme:function(t,n){return n-t?Qtt(t,n,e):Oq(isNaN(t)?n:t)}}function Fme(e,t){var n=t-e;return n?Ktt(e,n):Oq(isNaN(e)?t:e)}const $ne=(function e(t){var n=Jtt(t);function r(i,s){var f=n((i=H6(i)).r,(s=H6(s)).r),a=n(i.g,s.g),p=n(i.b,s.b),y=Fme(i.opacity,s.opacity);return function(S){return i.r=f(S),i.g=a(S),i.b=p(S),i.opacity=y(S),i+""}}return r.gamma=e,r})(1);function ent(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function tnt(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function nnt(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),f;for(f=0;f<r;++f)i[f]=dT(e[f],t[f]);for(;f<n;++f)s[f]=t[f];return function(a){for(f=0;f<r;++f)s[f]=i[f](a);return s}}function rnt(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function JI(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function int(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=dT(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var G6=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,N5=new RegExp(G6.source,"g");function ant(e){return function(){return e}}function ont(e){return function(t){return e(t)+""}}function snt(e,t){var n=G6.lastIndex=N5.lastIndex=0,r,i,s,f=-1,a=[],p=[];for(e=e+"",t=t+"";(r=G6.exec(e))&&(i=N5.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[f]?a[f]+=s:a[++f]=s),(r=r[0])===(i=i[0])?a[f]?a[f]+=i:a[++f]=i:(a[++f]=null,p.push({i:f,x:JI(r,i)})),n=N5.lastIndex;return n<t.length&&(s=t.slice(n),a[f]?a[f]+=s:a[++f]=s),a.length<2?p[0]?ont(p[0].x):ant(t):(t=p.length,function(y){for(var S=0,E;S<t;++S)a[(E=p[S]).i]=E.x(y);return a.join("")})}function dT(e,t){var n=typeof t,r;return t==null||n==="boolean"?Oq(t):(n==="number"?JI:n==="string"?(r=mA(t))?(t=r,$ne):snt:t instanceof mA?$ne:t instanceof Date?rnt:tnt(t)?ent:Array.isArray(t)?nnt:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?int:JI)(e,t)}function Cq(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function lnt(e,t){t===void 0&&(t=e,e=dT);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(f){var a=Math.max(0,Math.min(r-1,Math.floor(f*=r)));return s[a](f-a)}}function unt(e){return function(){return e}}function eP(e){return+e}var Vne=[0,1];function yc(e){return e}function Y6(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:unt(isNaN(t)?NaN:.5)}function cnt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function fnt(e,t,n){var r=e[0],i=e[1],s=t[0],f=t[1];return i<r?(r=Y6(i,r),s=n(f,s)):(r=Y6(r,i),s=n(s,f)),function(a){return s(r(a))}}function hnt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),f=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++f<r;)i[f]=Y6(e[f],e[f+1]),s[f]=n(t[f],t[f+1]);return function(a){var p=LO(e,a,1,r)-1;return s[p](i[p](a))}}function NO(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gk(){var e=Vne,t=Vne,n=dT,r,i,s,f=yc,a,p,y;function S(){var I=Math.min(e.length,t.length);return f!==yc&&(f=cnt(e[0],e[I-1])),a=I>2?hnt:fnt,p=y=null,E}function E(I){return I==null||isNaN(I=+I)?s:(p||(p=a(e.map(r),t,n)))(r(f(I)))}return E.invert=function(I){return f(i((y||(y=a(t,e.map(r),JI)))(I)))},E.domain=function(I){return arguments.length?(e=Array.from(I,eP),S()):e.slice()},E.range=function(I){return arguments.length?(t=Array.from(I),S()):t.slice()},E.rangeRound=function(I){return t=Array.from(I),n=Cq,S()},E.clamp=function(I){return arguments.length?(f=I?!0:yc,S()):f!==yc},E.interpolate=function(I){return arguments.length?(n=I,S()):n},E.unknown=function(I){return arguments.length?(s=I,E):s},function(I,L){return r=I,i=L,S()}}function Mq(){return gk()(yc,yc)}function dnt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tP(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function bS(e){return e=tP(Math.abs(e)),e?e[1]:NaN}function pnt(e,t){return function(n,r){for(var i=n.length,s=[],f=0,a=e[0],p=0;i>0&&a>0&&(p+a+1>r&&(a=Math.max(1,r-p)),s.push(n.substring(i-=a,i+a)),!((p+=a+1)>r));)a=e[f=(f+1)%e.length];return s.reverse().join(t)}}function mnt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var gnt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gA(e){if(!(t=gnt.exec(e)))throw new Error("invalid format: "+e);var t;return new Dq({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}gA.prototype=Dq.prototype;function Dq(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Dq.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ynt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var nP;function _nt(e,t){var n=tP(e,t);if(!n)return nP=void 0,e.toPrecision(t);var r=n[0],i=n[1],s=i-(nP=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,f=r.length;return s===f?r:s>f?r+new Array(s-f+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+tP(e,Math.max(0,t+s-1))[0]}function qne(e,t){var n=tP(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Hne={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:dnt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>qne(e*100,t),r:qne,s:_nt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Gne(e){return e}var Yne=Array.prototype.map,Wne=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vnt(e){var t=e.grouping===void 0||e.thousands===void 0?Gne:pnt(Yne.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Gne:mnt(Yne.call(e.numerals,String)),f=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",p=e.nan===void 0?"NaN":e.nan+"";function y(E,I){E=gA(E);var L=E.fill,N=E.align,j=E.sign,k=E.symbol,V=E.zero,K=E.width,J=E.comma,ie=E.precision,Q=E.trim,W=E.type;W==="n"?(J=!0,W="g"):Hne[W]||(ie===void 0&&(ie=12),Q=!0,W="g"),(V||L==="0"&&N==="=")&&(V=!0,L="0",N="=");var te=(I&&I.prefix!==void 0?I.prefix:"")+(k==="$"?n:k==="#"&&/[boxX]/.test(W)?"0"+W.toLowerCase():""),X=(k==="$"?r:/[%p]/.test(W)?f:"")+(I&&I.suffix!==void 0?I.suffix:""),ae=Hne[W],le=/[defgprs%]/.test(W);ie=ie===void 0?6:/[gprs]/.test(W)?Math.max(1,Math.min(21,ie)):Math.max(0,Math.min(20,ie));function ge(ye){var De=te,He=X,Be,Ee,Fe;if(W==="c")He=ae(ye)+He,ye="";else{ye=+ye;var at=ye<0||1/ye<0;if(ye=isNaN(ye)?p:ae(Math.abs(ye),ie),Q&&(ye=ynt(ye)),at&&+ye==0&&j!=="+"&&(at=!1),De=(at?j==="("?j:a:j==="-"||j==="("?"":j)+De,He=(W==="s"&&!isNaN(ye)&&nP!==void 0?Wne[8+nP/3]:"")+He+(at&&j==="("?")":""),le){for(Be=-1,Ee=ye.length;++Be<Ee;)if(Fe=ye.charCodeAt(Be),48>Fe||Fe>57){He=(Fe===46?i+ye.slice(Be+1):ye.slice(Be))+He,ye=ye.slice(0,Be);break}}}J&&!V&&(ye=t(ye,1/0));var yt=De.length+ye.length+He.length,je=yt<K?new Array(K-yt+1).join(L):"";switch(J&&V&&(ye=t(je+ye,je.length?K-He.length:1/0),je=""),N){case"<":ye=De+ye+He+je;break;case"=":ye=De+je+ye+He;break;case"^":ye=je.slice(0,yt=je.length>>1)+De+ye+He+je.slice(yt);break;default:ye=je+De+ye+He;break}return s(ye)}return ge.toString=function(){return E+""},ge}function S(E,I){var L=Math.max(-8,Math.min(8,Math.floor(bS(I)/3)))*3,N=Math.pow(10,-L),j=y((E=gA(E),E.type="f",E),{suffix:Wne[8+L/3]});return function(k){return j(N*k)}}return{format:y,formatPrefix:S}}var GM,Iq,Bme;bnt({thousands:",",grouping:[3],currency:["$",""]});function bnt(e){return GM=vnt(e),Iq=GM.format,Bme=GM.formatPrefix,GM}function xnt(e){return Math.max(0,-bS(Math.abs(e)))}function wnt(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bS(t)/3)))*3-bS(Math.abs(e)))}function Snt(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bS(t)-bS(e))+1}function jme(e,t,n,r){var i=V6(e,t,n),s;switch(r=gA(r??",f"),r.type){case"s":{var f=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=wnt(i,f))&&(r.precision=s),Bme(r,f)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Snt(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=xnt(i))&&(r.precision=s-(r.type==="%")*2);break}}return Iq(r)}function d0(e){var t=e.domain;return e.ticks=function(n){var r=t();return U6(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return jme(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,f=r[i],a=r[s],p,y,S=10;for(a<f&&(y=f,f=a,a=y,y=i,i=s,s=y);S-- >0;){if(y=$6(f,a,n),y===p)return r[i]=f,r[s]=a,t(r);if(y>0)f=Math.floor(f/y)*y,a=Math.ceil(a/y)*y;else if(y<0)f=Math.ceil(f*y)/y,a=Math.floor(a*y)/y;else break;p=y}return e},e}function rP(){var e=Mq();return e.copy=function(){return NO(e,rP())},pd.apply(e,arguments),d0(e)}function Ume(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,eP),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Ume(e).unknown(t)},e=arguments.length?Array.from(e,eP):[0,1],d0(n)}function $me(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],f;return s<i&&(f=n,n=r,r=f,f=i,i=s,s=f),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Xne(e){return Math.log(e)}function Zne(e){return Math.exp(e)}function Tnt(e){return-Math.log(-e)}function Ent(e){return-Math.exp(-e)}function Ant(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Ont(e){return e===10?Ant:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Cnt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Kne(e){return(t,n)=>-e(-t,n)}function Pq(e){const t=e(Xne,Zne),n=t.domain;let r=10,i,s;function f(){return i=Cnt(r),s=Ont(r),n()[0]<0?(i=Kne(i),s=Kne(s),e(Tnt,Ent)):e(Xne,Zne),t}return t.base=function(a){return arguments.length?(r=+a,f()):r},t.domain=function(a){return arguments.length?(n(a),f()):n()},t.ticks=a=>{const p=n();let y=p[0],S=p[p.length-1];const E=S<y;E&&([y,S]=[S,y]);let I=i(y),L=i(S),N,j;const k=a==null?10:+a;let V=[];if(!(r%1)&&L-I<k){if(I=Math.floor(I),L=Math.ceil(L),y>0){for(;I<=L;++I)for(N=1;N<r;++N)if(j=I<0?N/s(-I):N*s(I),!(j<y)){if(j>S)break;V.push(j)}}else for(;I<=L;++I)for(N=r-1;N>=1;--N)if(j=I>0?N/s(-I):N*s(I),!(j<y)){if(j>S)break;V.push(j)}V.length*2<k&&(V=U6(y,S,k))}else V=U6(I,L,Math.min(L-I,k)).map(s);return E?V.reverse():V},t.tickFormat=(a,p)=>{if(a==null&&(a=10),p==null&&(p=r===10?"s":","),typeof p!="function"&&(!(r%1)&&(p=gA(p)).precision==null&&(p.trim=!0),p=Iq(p)),a===1/0)return p;const y=Math.max(1,r*a/t.ticks().length);return S=>{let E=S/s(Math.round(i(S)));return E*r<r-.5&&(E*=r),E<=y?p(S):""}},t.nice=()=>n($me(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function Vme(){const e=Pq(gk()).domain([1,10]);return e.copy=()=>NO(e,Vme()).base(e.base()),pd.apply(e,arguments),e}function Qne(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Jne(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Rq(e){var t=1,n=e(Qne(t),Jne(t));return n.constant=function(r){return arguments.length?e(Qne(t=+r),Jne(t)):t},d0(n)}function qme(){var e=Rq(gk());return e.copy=function(){return NO(e,qme()).constant(e.constant())},pd.apply(e,arguments)}function ere(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Mnt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Dnt(e){return e<0?-e*e:e*e}function kq(e){var t=e(yc,yc),n=1;function r(){return n===1?e(yc,yc):n===.5?e(Mnt,Dnt):e(ere(n),ere(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},d0(t)}function Lq(){var e=kq(gk());return e.copy=function(){return NO(e,Lq()).exponent(e.exponent())},pd.apply(e,arguments),e}function Int(){return Lq.apply(null,arguments).exponent(.5)}function tre(e){return Math.sign(e)*e*e}function Pnt(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Hme(){var e=Mq(),t=[0,1],n=!1,r;function i(s){var f=Pnt(e(s));return isNaN(f)?r:n?Math.round(f):f}return i.invert=function(s){return e.invert(tre(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,eP)).map(tre)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Hme(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},pd.apply(i,arguments),d0(i)}function Gme(){var e=[],t=[],n=[],r;function i(){var f=0,a=Math.max(1,t.length);for(n=new Array(a-1);++f<a;)n[f-1]=Ntt(e,f/a);return s}function s(f){return f==null||isNaN(f=+f)?r:t[LO(n,f)]}return s.invertExtent=function(f){var a=t.indexOf(f);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(f){if(!arguments.length)return e.slice();e=[];for(let a of f)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Wv),i()},s.range=function(f){return arguments.length?(t=Array.from(f),i()):t.slice()},s.unknown=function(f){return arguments.length?(r=f,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Gme().domain(e).range(t).unknown(r)},pd.apply(s,arguments)}function Yme(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function f(p){return p!=null&&p<=p?i[LO(r,p,0,n)]:s}function a(){var p=-1;for(r=new Array(n);++p<n;)r[p]=((p+1)*t-(p-n)*e)/(n+1);return f}return f.domain=function(p){return arguments.length?([e,t]=p,e=+e,t=+t,a()):[e,t]},f.range=function(p){return arguments.length?(n=(i=Array.from(p)).length-1,a()):i.slice()},f.invertExtent=function(p){var y=i.indexOf(p);return y<0?[NaN,NaN]:y<1?[e,r[0]]:y>=n?[r[n-1],t]:[r[y-1],r[y]]},f.unknown=function(p){return arguments.length&&(s=p),f},f.thresholds=function(){return r.slice()},f.copy=function(){return Yme().domain([e,t]).range(i).unknown(s)},pd.apply(d0(f),arguments)}function Wme(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[LO(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var f=t.indexOf(s);return[e[f-1],e[f]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Wme().domain(e).range(t).unknown(n)},pd.apply(i,arguments)}const F5=new Date,B5=new Date;function xl(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const f=i(s),a=i.ceil(s);return s-f<a-s?f:a},i.offset=(s,f)=>(t(s=new Date(+s),f==null?1:Math.floor(f)),s),i.range=(s,f,a)=>{const p=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<f)||!(a>0))return p;let y;do p.push(y=new Date(+s)),t(s,a),e(s);while(y<s&&s<f);return p},i.filter=s=>xl(f=>{if(f>=f)for(;e(f),!s(f);)f.setTime(f-1)},(f,a)=>{if(f>=f)if(a<0)for(;++a<=0;)for(;t(f,-1),!s(f););else for(;--a>=0;)for(;t(f,1),!s(f););}),n&&(i.count=(s,f)=>(F5.setTime(+s),B5.setTime(+f),e(F5),e(B5),Math.floor(n(F5,B5))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?f=>r(f)%s===0:f=>i.count(0,f)%s===0):i)),i}const iP=xl(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);iP.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?xl(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):iP);iP.range;const ky=1e3,Kh=ky*60,Ly=Kh*60,o_=Ly*24,zq=o_*7,nre=o_*30,j5=o_*365,Kb=xl(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ky)},(e,t)=>(t-e)/ky,e=>e.getUTCSeconds());Kb.range;const Nq=xl(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ky)},(e,t)=>{e.setTime(+e+t*Kh)},(e,t)=>(t-e)/Kh,e=>e.getMinutes());Nq.range;const Fq=xl(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Kh)},(e,t)=>(t-e)/Kh,e=>e.getUTCMinutes());Fq.range;const Bq=xl(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ky-e.getMinutes()*Kh)},(e,t)=>{e.setTime(+e+t*Ly)},(e,t)=>(t-e)/Ly,e=>e.getHours());Bq.range;const jq=xl(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ly)},(e,t)=>(t-e)/Ly,e=>e.getUTCHours());jq.range;const FO=xl(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kh)/o_,e=>e.getDate()-1);FO.range;const yk=xl(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/o_,e=>e.getUTCDate()-1);yk.range;const Xme=xl(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/o_,e=>Math.floor(e/o_));Xme.range;function Yx(e){return xl(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Kh)/zq)}const _k=Yx(0),aP=Yx(1),Rnt=Yx(2),knt=Yx(3),xS=Yx(4),Lnt=Yx(5),znt=Yx(6);_k.range;aP.range;Rnt.range;knt.range;xS.range;Lnt.range;znt.range;function Wx(e){return xl(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/zq)}const vk=Wx(0),oP=Wx(1),Nnt=Wx(2),Fnt=Wx(3),wS=Wx(4),Bnt=Wx(5),jnt=Wx(6);vk.range;oP.range;Nnt.range;Fnt.range;wS.range;Bnt.range;jnt.range;const Uq=xl(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Uq.range;const $q=xl(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());$q.range;const s_=xl(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());s_.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xl(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});s_.range;const l_=xl(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());l_.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xl(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});l_.range;function Zme(e,t,n,r,i,s){const f=[[Kb,1,ky],[Kb,5,5*ky],[Kb,15,15*ky],[Kb,30,30*ky],[s,1,Kh],[s,5,5*Kh],[s,15,15*Kh],[s,30,30*Kh],[i,1,Ly],[i,3,3*Ly],[i,6,6*Ly],[i,12,12*Ly],[r,1,o_],[r,2,2*o_],[n,1,zq],[t,1,nre],[t,3,3*nre],[e,1,j5]];function a(y,S,E){const I=S<y;I&&([y,S]=[S,y]);const L=E&&typeof E.range=="function"?E:p(y,S,E),N=L?L.range(y,+S+1):[];return I?N.reverse():N}function p(y,S,E){const I=Math.abs(S-y)/E,L=Tq(([,,k])=>k).right(f,I);if(L===f.length)return e.every(V6(y/j5,S/j5,E));if(L===0)return iP.every(Math.max(V6(y,S,E),1));const[N,j]=f[I/f[L-1][2]<f[L][2]/I?L-1:L];return N.every(j)}return[a,p]}const[Unt,$nt]=Zme(l_,$q,vk,Xme,jq,Fq),[Vnt,qnt]=Zme(s_,Uq,_k,FO,Bq,Nq);function U5(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function qE(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Hnt(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,f=e.shortDays,a=e.months,p=e.shortMonths,y=HE(i),S=GE(i),E=HE(s),I=GE(s),L=HE(f),N=GE(f),j=HE(a),k=GE(a),V=HE(p),K=GE(p),J={a:Fe,A:at,b:yt,B:je,c:null,d:lre,e:lre,f:prt,g:Trt,G:Art,H:frt,I:hrt,j:drt,L:Kme,m:mrt,M:grt,p:Ke,q:it,Q:fre,s:hre,S:yrt,u:_rt,U:vrt,V:brt,w:xrt,W:wrt,x:null,X:null,y:Srt,Y:Ert,Z:Ort,"%":cre},ie={a:Pe,A:jt,b:sn,B:dn,c:null,d:ure,e:ure,f:Irt,g:Urt,G:Vrt,H:Crt,I:Mrt,j:Drt,L:Jme,m:Prt,M:Rrt,p:Tn,q:Ut,Q:fre,s:hre,S:krt,u:Lrt,U:zrt,V:Nrt,w:Frt,W:Brt,x:null,X:null,y:jrt,Y:$rt,Z:qrt,"%":cre},Q={a:le,A:ge,b:ye,B:De,c:He,d:ore,e:ore,f:srt,g:are,G:ire,H:sre,I:sre,j:rrt,L:ort,m:nrt,M:irt,p:ae,q:trt,Q:urt,s:crt,S:art,u:Znt,U:Knt,V:Qnt,w:Xnt,W:Jnt,x:Be,X:Ee,y:are,Y:ire,Z:ert,"%":lrt};J.x=W(n,J),J.X=W(r,J),J.c=W(t,J),ie.x=W(n,ie),ie.X=W(r,ie),ie.c=W(t,ie);function W(xe,Ye){return function(ct){var mt=[],Ct=-1,Yt=0,gn=xe.length,An,ar,or;for(ct instanceof Date||(ct=new Date(+ct));++Ct<gn;)xe.charCodeAt(Ct)===37&&(mt.push(xe.slice(Yt,Ct)),(ar=rre[An=xe.charAt(++Ct)])!=null?An=xe.charAt(++Ct):ar=An==="e"?" ":"0",(or=Ye[An])&&(An=or(ct,ar)),mt.push(An),Yt=Ct+1);return mt.push(xe.slice(Yt,Ct)),mt.join("")}}function te(xe,Ye){return function(ct){var mt=qE(1900,void 0,1),Ct=X(mt,xe,ct+="",0),Yt,gn;if(Ct!=ct.length)return null;if("Q"in mt)return new Date(mt.Q);if("s"in mt)return new Date(mt.s*1e3+("L"in mt?mt.L:0));if(Ye&&!("Z"in mt)&&(mt.Z=0),"p"in mt&&(mt.H=mt.H%12+mt.p*12),mt.m===void 0&&(mt.m="q"in mt?mt.q:0),"V"in mt){if(mt.V<1||mt.V>53)return null;"w"in mt||(mt.w=1),"Z"in mt?(Yt=$5(qE(mt.y,0,1)),gn=Yt.getUTCDay(),Yt=gn>4||gn===0?oP.ceil(Yt):oP(Yt),Yt=yk.offset(Yt,(mt.V-1)*7),mt.y=Yt.getUTCFullYear(),mt.m=Yt.getUTCMonth(),mt.d=Yt.getUTCDate()+(mt.w+6)%7):(Yt=U5(qE(mt.y,0,1)),gn=Yt.getDay(),Yt=gn>4||gn===0?aP.ceil(Yt):aP(Yt),Yt=FO.offset(Yt,(mt.V-1)*7),mt.y=Yt.getFullYear(),mt.m=Yt.getMonth(),mt.d=Yt.getDate()+(mt.w+6)%7)}else("W"in mt||"U"in mt)&&("w"in mt||(mt.w="u"in mt?mt.u%7:"W"in mt?1:0),gn="Z"in mt?$5(qE(mt.y,0,1)).getUTCDay():U5(qE(mt.y,0,1)).getDay(),mt.m=0,mt.d="W"in mt?(mt.w+6)%7+mt.W*7-(gn+5)%7:mt.w+mt.U*7-(gn+6)%7);return"Z"in mt?(mt.H+=mt.Z/100|0,mt.M+=mt.Z%100,$5(mt)):U5(mt)}}function X(xe,Ye,ct,mt){for(var Ct=0,Yt=Ye.length,gn=ct.length,An,ar;Ct<Yt;){if(mt>=gn)return-1;if(An=Ye.charCodeAt(Ct++),An===37){if(An=Ye.charAt(Ct++),ar=Q[An in rre?Ye.charAt(Ct++):An],!ar||(mt=ar(xe,ct,mt))<0)return-1}else if(An!=ct.charCodeAt(mt++))return-1}return mt}function ae(xe,Ye,ct){var mt=y.exec(Ye.slice(ct));return mt?(xe.p=S.get(mt[0].toLowerCase()),ct+mt[0].length):-1}function le(xe,Ye,ct){var mt=L.exec(Ye.slice(ct));return mt?(xe.w=N.get(mt[0].toLowerCase()),ct+mt[0].length):-1}function ge(xe,Ye,ct){var mt=E.exec(Ye.slice(ct));return mt?(xe.w=I.get(mt[0].toLowerCase()),ct+mt[0].length):-1}function ye(xe,Ye,ct){var mt=V.exec(Ye.slice(ct));return mt?(xe.m=K.get(mt[0].toLowerCase()),ct+mt[0].length):-1}function De(xe,Ye,ct){var mt=j.exec(Ye.slice(ct));return mt?(xe.m=k.get(mt[0].toLowerCase()),ct+mt[0].length):-1}function He(xe,Ye,ct){return X(xe,t,Ye,ct)}function Be(xe,Ye,ct){return X(xe,n,Ye,ct)}function Ee(xe,Ye,ct){return X(xe,r,Ye,ct)}function Fe(xe){return f[xe.getDay()]}function at(xe){return s[xe.getDay()]}function yt(xe){return p[xe.getMonth()]}function je(xe){return a[xe.getMonth()]}function Ke(xe){return i[+(xe.getHours()>=12)]}function it(xe){return 1+~~(xe.getMonth()/3)}function Pe(xe){return f[xe.getUTCDay()]}function jt(xe){return s[xe.getUTCDay()]}function sn(xe){return p[xe.getUTCMonth()]}function dn(xe){return a[xe.getUTCMonth()]}function Tn(xe){return i[+(xe.getUTCHours()>=12)]}function Ut(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var Ye=W(xe+="",J);return Ye.toString=function(){return xe},Ye},parse:function(xe){var Ye=te(xe+="",!1);return Ye.toString=function(){return xe},Ye},utcFormat:function(xe){var Ye=W(xe+="",ie);return Ye.toString=function(){return xe},Ye},utcParse:function(xe){var Ye=te(xe+="",!0);return Ye.toString=function(){return xe},Ye}}}var rre={"-":"",_:" ",0:"0"},Bl=/^\s*\d+/,Gnt=/^%/,Ynt=/[\\^$*+?|[\]().{}]/g;function Ta(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Wnt(e){return e.replace(Ynt,"\\$&")}function HE(e){return new RegExp("^(?:"+e.map(Wnt).join("|")+")","i")}function GE(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Xnt(e,t,n){var r=Bl.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Znt(e,t,n){var r=Bl.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Knt(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Qnt(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Jnt(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ire(e,t,n){var r=Bl.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function are(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ert(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function trt(e,t,n){var r=Bl.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function nrt(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ore(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function rrt(e,t,n){var r=Bl.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function sre(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function irt(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function art(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ort(e,t,n){var r=Bl.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function srt(e,t,n){var r=Bl.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function lrt(e,t,n){var r=Gnt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function urt(e,t,n){var r=Bl.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function crt(e,t,n){var r=Bl.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function lre(e,t){return Ta(e.getDate(),t,2)}function frt(e,t){return Ta(e.getHours(),t,2)}function hrt(e,t){return Ta(e.getHours()%12||12,t,2)}function drt(e,t){return Ta(1+FO.count(s_(e),e),t,3)}function Kme(e,t){return Ta(e.getMilliseconds(),t,3)}function prt(e,t){return Kme(e,t)+"000"}function mrt(e,t){return Ta(e.getMonth()+1,t,2)}function grt(e,t){return Ta(e.getMinutes(),t,2)}function yrt(e,t){return Ta(e.getSeconds(),t,2)}function _rt(e){var t=e.getDay();return t===0?7:t}function vrt(e,t){return Ta(_k.count(s_(e)-1,e),t,2)}function Qme(e){var t=e.getDay();return t>=4||t===0?xS(e):xS.ceil(e)}function brt(e,t){return e=Qme(e),Ta(xS.count(s_(e),e)+(s_(e).getDay()===4),t,2)}function xrt(e){return e.getDay()}function wrt(e,t){return Ta(aP.count(s_(e)-1,e),t,2)}function Srt(e,t){return Ta(e.getFullYear()%100,t,2)}function Trt(e,t){return e=Qme(e),Ta(e.getFullYear()%100,t,2)}function Ert(e,t){return Ta(e.getFullYear()%1e4,t,4)}function Art(e,t){var n=e.getDay();return e=n>=4||n===0?xS(e):xS.ceil(e),Ta(e.getFullYear()%1e4,t,4)}function Ort(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ta(t/60|0,"0",2)+Ta(t%60,"0",2)}function ure(e,t){return Ta(e.getUTCDate(),t,2)}function Crt(e,t){return Ta(e.getUTCHours(),t,2)}function Mrt(e,t){return Ta(e.getUTCHours()%12||12,t,2)}function Drt(e,t){return Ta(1+yk.count(l_(e),e),t,3)}function Jme(e,t){return Ta(e.getUTCMilliseconds(),t,3)}function Irt(e,t){return Jme(e,t)+"000"}function Prt(e,t){return Ta(e.getUTCMonth()+1,t,2)}function Rrt(e,t){return Ta(e.getUTCMinutes(),t,2)}function krt(e,t){return Ta(e.getUTCSeconds(),t,2)}function Lrt(e){var t=e.getUTCDay();return t===0?7:t}function zrt(e,t){return Ta(vk.count(l_(e)-1,e),t,2)}function ege(e){var t=e.getUTCDay();return t>=4||t===0?wS(e):wS.ceil(e)}function Nrt(e,t){return e=ege(e),Ta(wS.count(l_(e),e)+(l_(e).getUTCDay()===4),t,2)}function Frt(e){return e.getUTCDay()}function Brt(e,t){return Ta(oP.count(l_(e)-1,e),t,2)}function jrt(e,t){return Ta(e.getUTCFullYear()%100,t,2)}function Urt(e,t){return e=ege(e),Ta(e.getUTCFullYear()%100,t,2)}function $rt(e,t){return Ta(e.getUTCFullYear()%1e4,t,4)}function Vrt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?wS(e):wS.ceil(e),Ta(e.getUTCFullYear()%1e4,t,4)}function qrt(){return"+0000"}function cre(){return"%"}function fre(e){return+e}function hre(e){return Math.floor(+e/1e3)}var fw,tge,nge;Hrt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Hrt(e){return fw=Hnt(e),tge=fw.format,fw.parse,nge=fw.utcFormat,fw.utcParse,fw}function Grt(e){return new Date(e)}function Yrt(e){return e instanceof Date?+e:+new Date(+e)}function Vq(e,t,n,r,i,s,f,a,p,y){var S=Mq(),E=S.invert,I=S.domain,L=y(".%L"),N=y(":%S"),j=y("%I:%M"),k=y("%I %p"),V=y("%a %d"),K=y("%b %d"),J=y("%B"),ie=y("%Y");function Q(W){return(p(W)<W?L:a(W)<W?N:f(W)<W?j:s(W)<W?k:r(W)<W?i(W)<W?V:K:n(W)<W?J:ie)(W)}return S.invert=function(W){return new Date(E(W))},S.domain=function(W){return arguments.length?I(Array.from(W,Yrt)):I().map(Grt)},S.ticks=function(W){var te=I();return e(te[0],te[te.length-1],W??10)},S.tickFormat=function(W,te){return te==null?Q:y(te)},S.nice=function(W){var te=I();return(!W||typeof W.range!="function")&&(W=t(te[0],te[te.length-1],W??10)),W?I($me(te,W)):S},S.copy=function(){return NO(S,Vq(e,t,n,r,i,s,f,a,p,y))},S}function Wrt(){return pd.apply(Vq(Vnt,qnt,s_,Uq,_k,FO,Bq,Nq,Kb,tge).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Xrt(){return pd.apply(Vq(Unt,$nt,l_,$q,vk,yk,jq,Fq,Kb,nge).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bk(){var e=0,t=1,n,r,i,s,f=yc,a=!1,p;function y(E){return E==null||isNaN(E=+E)?p:f(i===0?.5:(E=(s(E)-n)*i,a?Math.max(0,Math.min(1,E)):E))}y.domain=function(E){return arguments.length?([e,t]=E,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),y):[e,t]},y.clamp=function(E){return arguments.length?(a=!!E,y):a},y.interpolator=function(E){return arguments.length?(f=E,y):f};function S(E){return function(I){var L,N;return arguments.length?([L,N]=I,f=E(L,N),y):[f(0),f(1)]}}return y.range=S(dT),y.rangeRound=S(Cq),y.unknown=function(E){return arguments.length?(p=E,y):p},function(E){return s=E,n=E(e),r=E(t),i=n===r?0:1/(r-n),y}}function p0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function rge(){var e=d0(bk()(yc));return e.copy=function(){return p0(e,rge())},b_.apply(e,arguments)}function ige(){var e=Pq(bk()).domain([1,10]);return e.copy=function(){return p0(e,ige()).base(e.base())},b_.apply(e,arguments)}function age(){var e=Rq(bk());return e.copy=function(){return p0(e,age()).constant(e.constant())},b_.apply(e,arguments)}function qq(){var e=kq(bk());return e.copy=function(){return p0(e,qq()).exponent(e.exponent())},b_.apply(e,arguments)}function Zrt(){return qq.apply(null,arguments).exponent(.5)}function oge(){var e=[],t=yc;function n(r){if(r!=null&&!isNaN(r=+r))return t((LO(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Wv),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>ztt(e,s/r))},n.copy=function(){return oge(t).domain(e)},b_.apply(n,arguments)}function xk(){var e=0,t=.5,n=1,r=1,i,s,f,a,p,y=yc,S,E=!1,I;function L(j){return isNaN(j=+j)?I:(j=.5+((j=+S(j))-s)*(r*j<r*s?a:p),y(E?Math.max(0,Math.min(1,j)):j))}L.domain=function(j){return arguments.length?([e,t,n]=j,i=S(e=+e),s=S(t=+t),f=S(n=+n),a=i===s?0:.5/(s-i),p=s===f?0:.5/(f-s),r=s<i?-1:1,L):[e,t,n]},L.clamp=function(j){return arguments.length?(E=!!j,L):E},L.interpolator=function(j){return arguments.length?(y=j,L):y};function N(j){return function(k){var V,K,J;return arguments.length?([V,K,J]=k,y=lnt(j,[V,K,J]),L):[y(0),y(.5),y(1)]}}return L.range=N(dT),L.rangeRound=N(Cq),L.unknown=function(j){return arguments.length?(I=j,L):I},function(j){return S=j,i=j(e),s=j(t),f=j(n),a=i===s?0:.5/(s-i),p=s===f?0:.5/(f-s),r=s<i?-1:1,L}}function sge(){var e=d0(xk()(yc));return e.copy=function(){return p0(e,sge())},b_.apply(e,arguments)}function lge(){var e=Pq(xk()).domain([.1,1,10]);return e.copy=function(){return p0(e,lge()).base(e.base())},b_.apply(e,arguments)}function uge(){var e=Rq(xk());return e.copy=function(){return p0(e,uge()).constant(e.constant())},b_.apply(e,arguments)}function Hq(){var e=kq(xk());return e.copy=function(){return p0(e,Hq()).exponent(e.exponent())},b_.apply(e,arguments)}function Krt(){return Hq.apply(null,arguments).exponent(.5)}const dre=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:hA,scaleDiverging:sge,scaleDivergingLog:lge,scaleDivergingPow:Hq,scaleDivergingSqrt:Krt,scaleDivergingSymlog:uge,scaleIdentity:Ume,scaleImplicit:q6,scaleLinear:rP,scaleLog:Vme,scaleOrdinal:Eq,scalePoint:S2,scalePow:Lq,scaleQuantile:Gme,scaleQuantize:Yme,scaleRadial:Hme,scaleSequential:rge,scaleSequentialLog:ige,scaleSequentialPow:qq,scaleSequentialQuantile:oge,scaleSequentialSqrt:Zrt,scaleSequentialSymlog:age,scaleSqrt:Int,scaleSymlog:qme,scaleThreshold:Wme,scaleTime:Wrt,scaleUtc:Xrt,tickFormat:jme},Symbol.toStringTag,{value:"Module"}));var V5,pre;function cge(){if(pre)return V5;pre=1;var e=uT();function t(n,r,i){for(var s=-1,f=n.length;++s<f;){var a=n[s],p=r(a);if(p!=null&&(y===void 0?p===p&&!e(p):i(p,y)))var y=p,S=a}return S}return V5=t,V5}var q5,mre;function Qrt(){if(mre)return q5;mre=1;function e(t,n){return t>n}return q5=e,q5}var H5,gre;function Jrt(){if(gre)return H5;gre=1;var e=cge(),t=Qrt(),n=fT();function r(i){return i&&i.length?e(i,n,t):void 0}return H5=r,H5}var eit=Jrt();const wk=ma(eit);var G5,yre;function tit(){if(yre)return G5;yre=1;function e(t,n){return t<n}return G5=e,G5}var Y5,_re;function nit(){if(_re)return Y5;_re=1;var e=cge(),t=tit(),n=fT();function r(i){return i&&i.length?e(i,n,t):void 0}return Y5=r,Y5}var rit=nit();const Sk=ma(rit);var W5,vre;function iit(){if(vre)return W5;vre=1;var e=sq(),t=h0(),n=vme(),r=lf();function i(s,f){var a=r(s)?e:n;return a(s,t(f,3))}return W5=i,W5}var X5,bre;function ait(){if(bre)return X5;bre=1;var e=yme(),t=iit();function n(r,i){return e(t(r,i),1)}return X5=n,X5}var oit=ait();const sit=ma(oit);var Z5,xre;function lit(){if(xre)return Z5;xre=1;var e=bq();function t(n,r){return e(n,r)}return Z5=t,Z5}var uit=lit();const Tk=ma(uit);var pT=1e9,cit={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Yq,Go=!0,ld="[DecimalError] ",cx=ld+"Invalid argument: ",Gq=ld+"Exponent out of range: ",mT=Math.floor,Bb=Math.pow,fit=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xf,Ll=1e7,Do=7,fge=9007199254740991,sP=mT(fge/Do),dr={};dr.absoluteValue=dr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};dr.comparedTo=dr.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};dr.decimalPlaces=dr.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Do;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};dr.dividedBy=dr.div=function(e){return Xy(this,new this.constructor(e))};dr.dividedToIntegerBy=dr.idiv=function(e){var t=this,n=t.constructor;return io(Xy(t,new n(e),0,1),n.precision)};dr.equals=dr.eq=function(e){return!this.cmp(e)};dr.exponent=function(){return Qs(this)};dr.greaterThan=dr.gt=function(e){return this.cmp(e)>0};dr.greaterThanOrEqualTo=dr.gte=function(e){return this.cmp(e)>=0};dr.isInteger=dr.isint=function(){return this.e>this.d.length-2};dr.isNegative=dr.isneg=function(){return this.s<0};dr.isPositive=dr.ispos=function(){return this.s>0};dr.isZero=function(){return this.s===0};dr.lessThan=dr.lt=function(e){return this.cmp(e)<0};dr.lessThanOrEqualTo=dr.lte=function(e){return this.cmp(e)<1};dr.logarithm=dr.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Xf))throw Error(ld+"NaN");if(n.s<1)throw Error(ld+(n.s?"NaN":"-Infinity"));return n.eq(Xf)?new r(0):(Go=!1,t=Xy(yA(n,s),yA(e,s),s),Go=!0,io(t,i))};dr.minus=dr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?pge(t,e):hge(t,(e.s=-e.s,e))};dr.modulo=dr.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(ld+"NaN");return n.s?(Go=!1,t=Xy(n,e,0,1).times(e),Go=!0,n.minus(t)):io(new r(n),i)};dr.naturalExponential=dr.exp=function(){return dge(this)};dr.naturalLogarithm=dr.ln=function(){return yA(this)};dr.negated=dr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};dr.plus=dr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?hge(t,e):pge(t,(e.s=-e.s,e))};dr.precision=dr.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(cx+e);if(t=Qs(i)+1,r=i.d.length-1,n=r*Do+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};dr.squareRoot=dr.sqrt=function(){var e,t,n,r,i,s,f,a=this,p=a.constructor;if(a.s<1){if(!a.s)return new p(0);throw Error(ld+"NaN")}for(e=Qs(a),Go=!1,i=Math.sqrt(+a),i==0||i==1/0?(t=Xm(a.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=mT((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new p(t)):r=new p(i.toString()),n=p.precision,i=f=n+3;;)if(s=r,r=s.plus(Xy(a,s,f+2)).times(.5),Xm(s.d).slice(0,f)===(t=Xm(r.d)).slice(0,f)){if(t=t.slice(f-3,f+1),i==f&&t=="4999"){if(io(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(t!="9999")break;f+=4}return Go=!0,io(r,n)};dr.times=dr.mul=function(e){var t,n,r,i,s,f,a,p,y,S=this,E=S.constructor,I=S.d,L=(e=new E(e)).d;if(!S.s||!e.s)return new E(0);for(e.s*=S.s,n=S.e+e.e,p=I.length,y=L.length,p<y&&(s=I,I=L,L=s,f=p,p=y,y=f),s=[],f=p+y,r=f;r--;)s.push(0);for(r=y;--r>=0;){for(t=0,i=p+r;i>r;)a=s[i]+L[r]*I[i-r-1]+t,s[i--]=a%Ll|0,t=a/Ll|0;s[i]=(s[i]+t)%Ll|0}for(;!s[--f];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,Go?io(e,E.precision):e};dr.toDecimalPlaces=dr.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(hg(e,0,pT),t===void 0?t=r.rounding:hg(t,0,8),io(n,e+Qs(n)+1,t))};dr.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Mx(r,!0):(hg(e,0,pT),t===void 0?t=i.rounding:hg(t,0,8),r=io(new i(r),e+1,t),n=Mx(r,!0,e+1)),n};dr.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?Mx(i):(hg(e,0,pT),t===void 0?t=s.rounding:hg(t,0,8),r=io(new s(i),e+Qs(i)+1,t),n=Mx(r.abs(),!1,e+Qs(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};dr.toInteger=dr.toint=function(){var e=this,t=e.constructor;return io(new t(e),Qs(e)+1,t.rounding)};dr.toNumber=function(){return+this};dr.toPower=dr.pow=function(e){var t,n,r,i,s,f,a=this,p=a.constructor,y=12,S=+(e=new p(e));if(!e.s)return new p(Xf);if(a=new p(a),!a.s){if(e.s<1)throw Error(ld+"Infinity");return a}if(a.eq(Xf))return a;if(r=p.precision,e.eq(Xf))return io(a,r);if(t=e.e,n=e.d.length-1,f=t>=n,s=a.s,f){if((n=S<0?-S:S)<=fge){for(i=new p(Xf),t=Math.ceil(r/Do+4),Go=!1;n%2&&(i=i.times(a),Sre(i.d,t)),n=mT(n/2),n!==0;)a=a.times(a),Sre(a.d,t);return Go=!0,e.s<0?new p(Xf).div(i):io(i,r)}}else if(s<0)throw Error(ld+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,a.s=1,Go=!1,i=e.times(yA(a,r+y)),Go=!0,i=dge(i),i.s=s,i};dr.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Qs(i),r=Mx(i,n<=s.toExpNeg||n>=s.toExpPos)):(hg(e,1,pT),t===void 0?t=s.rounding:hg(t,0,8),i=io(new s(i),e,t),n=Qs(i),r=Mx(i,e<=n||n<=s.toExpNeg,e)),r};dr.toSignificantDigits=dr.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(hg(e,1,pT),t===void 0?t=r.rounding:hg(t,0,8)),io(new r(n),e,t)};dr.toString=dr.valueOf=dr.val=dr.toJSON=dr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Qs(e),n=e.constructor;return Mx(e,t<=n.toExpNeg||t>=n.toExpPos)};function hge(e,t){var n,r,i,s,f,a,p,y,S=e.constructor,E=S.precision;if(!e.s||!t.s)return t.s||(t=new S(e)),Go?io(t,E):t;if(p=e.d,y=t.d,f=e.e,i=t.e,p=p.slice(),s=f-i,s){for(s<0?(r=p,s=-s,a=y.length):(r=y,i=f,a=p.length),f=Math.ceil(E/Do),a=f>a?f+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=p.length,s=y.length,a-s<0&&(s=a,r=y,y=p,p=r),n=0;s;)n=(p[--s]=p[s]+y[s]+n)/Ll|0,p[s]%=Ll;for(n&&(p.unshift(n),++i),a=p.length;p[--a]==0;)p.pop();return t.d=p,t.e=i,Go?io(t,E):t}function hg(e,t,n){if(e!==~~e||e<t||e>n)throw Error(cx+e)}function Xm(e){var t,n,r,i=e.length-1,s="",f=e[0];if(i>0){for(s+=f,t=1;t<i;t++)r=e[t]+"",n=Do-r.length,n&&(s+=zv(n)),s+=r;f=e[t],r=f+"",n=Do-r.length,n&&(s+=zv(n))}else if(f===0)return"0";for(;f%10===0;)f/=10;return s+f}var Xy=(function(){function e(r,i){var s,f=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+f,r[a]=s%Ll|0,f=s/Ll|0;return f&&r.unshift(f),r}function t(r,i,s,f){var a,p;if(s!=f)p=s>f?1:-1;else for(a=p=0;a<s;a++)if(r[a]!=i[a]){p=r[a]>i[a]?1:-1;break}return p}function n(r,i,s){for(var f=0;s--;)r[s]-=f,f=r[s]<i[s]?1:0,r[s]=f*Ll+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,f){var a,p,y,S,E,I,L,N,j,k,V,K,J,ie,Q,W,te,X,ae=r.constructor,le=r.s==i.s?1:-1,ge=r.d,ye=i.d;if(!r.s)return new ae(r);if(!i.s)throw Error(ld+"Division by zero");for(p=r.e-i.e,te=ye.length,Q=ge.length,L=new ae(le),N=L.d=[],y=0;ye[y]==(ge[y]||0);)++y;if(ye[y]>(ge[y]||0)&&--p,s==null?K=s=ae.precision:f?K=s+(Qs(r)-Qs(i))+1:K=s,K<0)return new ae(0);if(K=K/Do+2|0,y=0,te==1)for(S=0,ye=ye[0],K++;(y<Q||S)&&K--;y++)J=S*Ll+(ge[y]||0),N[y]=J/ye|0,S=J%ye|0;else{for(S=Ll/(ye[0]+1)|0,S>1&&(ye=e(ye,S),ge=e(ge,S),te=ye.length,Q=ge.length),ie=te,j=ge.slice(0,te),k=j.length;k<te;)j[k++]=0;X=ye.slice(),X.unshift(0),W=ye[0],ye[1]>=Ll/2&&++W;do S=0,a=t(ye,j,te,k),a<0?(V=j[0],te!=k&&(V=V*Ll+(j[1]||0)),S=V/W|0,S>1?(S>=Ll&&(S=Ll-1),E=e(ye,S),I=E.length,k=j.length,a=t(E,j,I,k),a==1&&(S--,n(E,te<I?X:ye,I))):(S==0&&(a=S=1),E=ye.slice()),I=E.length,I<k&&E.unshift(0),n(j,E,k),a==-1&&(k=j.length,a=t(ye,j,te,k),a<1&&(S++,n(j,te<k?X:ye,k))),k=j.length):a===0&&(S++,j=[0]),N[y++]=S,a&&j[0]?j[k++]=ge[ie]||0:(j=[ge[ie]],k=1);while((ie++<Q||j[0]!==void 0)&&K--)}return N[0]||N.shift(),L.e=p,io(L,f?s+Qs(L)+1:s)}})();function dge(e,t){var n,r,i,s,f,a,p=0,y=0,S=e.constructor,E=S.precision;if(Qs(e)>16)throw Error(Gq+Qs(e));if(!e.s)return new S(Xf);for(Go=!1,a=E,f=new S(.03125);e.abs().gte(.1);)e=e.times(f),y+=5;for(r=Math.log(Bb(2,y))/Math.LN10*2+5|0,a+=r,n=i=s=new S(Xf),S.precision=a;;){if(i=io(i.times(e),a),n=n.times(++p),f=s.plus(Xy(i,n,a)),Xm(f.d).slice(0,a)===Xm(s.d).slice(0,a)){for(;y--;)s=io(s.times(s),a);return S.precision=E,t==null?(Go=!0,io(s,E)):s}s=f}}function Qs(e){for(var t=e.e*Do,n=e.d[0];n>=10;n/=10)t++;return t}function K5(e,t,n){if(t>e.LN10.sd())throw Go=!0,n&&(e.precision=n),Error(ld+"LN10 precision limit exceeded");return io(new e(e.LN10),t)}function zv(e){for(var t="";e--;)t+="0";return t}function yA(e,t){var n,r,i,s,f,a,p,y,S,E=1,I=10,L=e,N=L.d,j=L.constructor,k=j.precision;if(L.s<1)throw Error(ld+(L.s?"NaN":"-Infinity"));if(L.eq(Xf))return new j(0);if(t==null?(Go=!1,y=k):y=t,L.eq(10))return t==null&&(Go=!0),K5(j,y);if(y+=I,j.precision=y,n=Xm(N),r=n.charAt(0),s=Qs(L),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)L=L.times(e),n=Xm(L.d),r=n.charAt(0),E++;s=Qs(L),r>1?(L=new j("0."+n),s++):L=new j(r+"."+n.slice(1))}else return p=K5(j,y+2,k).times(s+""),L=yA(new j(r+"."+n.slice(1)),y-I).plus(p),j.precision=k,t==null?(Go=!0,io(L,k)):L;for(a=f=L=Xy(L.minus(Xf),L.plus(Xf),y),S=io(L.times(L),y),i=3;;){if(f=io(f.times(S),y),p=a.plus(Xy(f,new j(i),y)),Xm(p.d).slice(0,y)===Xm(a.d).slice(0,y))return a=a.times(2),s!==0&&(a=a.plus(K5(j,y+2,k).times(s+""))),a=Xy(a,new j(E),y),j.precision=k,t==null?(Go=!0,io(a,k)):a;a=p,i+=2}}function wre(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=mT(n/Do),e.d=[],r=(n+1)%Do,n<0&&(r+=Do),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Do;r<i;)e.d.push(+t.slice(r,r+=Do));t=t.slice(r),r=Do-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Go&&(e.e>sP||e.e<-sP))throw Error(Gq+n)}else e.s=0,e.e=0,e.d=[0];return e}function io(e,t,n){var r,i,s,f,a,p,y,S,E=e.d;for(f=1,s=E[0];s>=10;s/=10)f++;if(r=t-f,r<0)r+=Do,i=t,y=E[S=0];else{if(S=Math.ceil((r+1)/Do),s=E.length,S>=s)return e;for(y=s=E[S],f=1;s>=10;s/=10)f++;r%=Do,i=r-Do+f}if(n!==void 0&&(s=Bb(10,f-i-1),a=y/s%10|0,p=t<0||E[S+1]!==void 0||y%s,p=n<4?(a||p)&&(n==0||n==(e.s<0?3:2)):a>5||a==5&&(n==4||p||n==6&&(r>0?i>0?y/Bb(10,f-i):0:E[S-1])%10&1||n==(e.s<0?8:7))),t<1||!E[0])return p?(s=Qs(e),E.length=1,t=t-s-1,E[0]=Bb(10,(Do-t%Do)%Do),e.e=mT(-t/Do)||0):(E.length=1,E[0]=e.e=e.s=0),e;if(r==0?(E.length=S,s=1,S--):(E.length=S+1,s=Bb(10,Do-r),E[S]=i>0?(y/Bb(10,f-i)%Bb(10,i)|0)*s:0),p)for(;;)if(S==0){(E[0]+=s)==Ll&&(E[0]=1,++e.e);break}else{if(E[S]+=s,E[S]!=Ll)break;E[S--]=0,s=1}for(r=E.length;E[--r]===0;)E.pop();if(Go&&(e.e>sP||e.e<-sP))throw Error(Gq+Qs(e));return e}function pge(e,t){var n,r,i,s,f,a,p,y,S,E,I=e.constructor,L=I.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new I(e),Go?io(t,L):t;if(p=e.d,E=t.d,r=t.e,y=e.e,p=p.slice(),f=y-r,f){for(S=f<0,S?(n=p,f=-f,a=E.length):(n=E,r=y,a=p.length),i=Math.max(Math.ceil(L/Do),a)+2,f>i&&(f=i,n.length=1),n.reverse(),i=f;i--;)n.push(0);n.reverse()}else{for(i=p.length,a=E.length,S=i<a,S&&(a=i),i=0;i<a;i++)if(p[i]!=E[i]){S=p[i]<E[i];break}f=0}for(S&&(n=p,p=E,E=n,t.s=-t.s),a=p.length,i=E.length-a;i>0;--i)p[a++]=0;for(i=E.length;i>f;){if(p[--i]<E[i]){for(s=i;s&&p[--s]===0;)p[s]=Ll-1;--p[s],p[i]+=Ll}p[i]-=E[i]}for(;p[--a]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=r,Go?io(t,L):t):new I(0)}function Mx(e,t,n){var r,i=Qs(e),s=Xm(e.d),f=s.length;return t?(n&&(r=n-f)>0?s=s.charAt(0)+"."+s.slice(1)+zv(r):f>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+zv(-i-1)+s,n&&(r=n-f)>0&&(s+=zv(r))):i>=f?(s+=zv(i+1-f),n&&(r=n-i-1)>0&&(s=s+"."+zv(r))):((r=i+1)<f&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-f)>0&&(i+1===f&&(s+="."),s+=zv(r))),e.s<0?"-"+s:s}function Sre(e,t){if(e.length>t)return e.length=t,!0}function mge(e){var t,n,r;function i(s){var f=this;if(!(f instanceof i))return new i(s);if(f.constructor=i,s instanceof i){f.s=s.s,f.e=s.e,f.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(cx+s);if(s>0)f.s=1;else if(s<0)s=-s,f.s=-1;else{f.s=0,f.e=0,f.d=[0];return}if(s===~~s&&s<1e7){f.e=0,f.d=[s];return}return wre(f,s.toString())}else if(typeof s!="string")throw Error(cx+s);if(s.charCodeAt(0)===45?(s=s.slice(1),f.s=-1):f.s=1,fit.test(s))wre(f,s);else throw Error(cx+s)}if(i.prototype=dr,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=mge,i.config=i.set=hit,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function hit(e){if(!e||typeof e!="object")throw Error(ld+"Object expected");var t,n,r,i=["precision",1,pT,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(mT(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(cx+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(cx+n+": "+r);return this}var Yq=mge(cit);Xf=new Yq(1);const Ka=Yq;function dit(e){return yit(e)||git(e)||mit(e)||pit()}function pit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mit(e,t){if(e){if(typeof e=="string")return W6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W6(e,t)}}function git(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function yit(e){if(Array.isArray(e))return W6(e)}function W6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _it=function(t){return t},gge={},yge=function(t){return t===gge},Tre=function(t){return function n(){return arguments.length===0||arguments.length===1&&yge(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},vit=function e(t,n){return t===1?n:Tre(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var f=i.filter(function(a){return a!==gge}).length;return f>=t?n.apply(void 0,i):e(t-f,Tre(function(){for(var a=arguments.length,p=new Array(a),y=0;y<a;y++)p[y]=arguments[y];var S=i.map(function(E){return yge(E)?p.shift():E});return n.apply(void 0,dit(S).concat(p))}))})},Ek=function(t){return vit(t.length,t)},X6=function(t,n){for(var r=[],i=t;i<n;++i)r[i-t]=i;return r},bit=Ek(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),xit=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return _it;var i=n.reverse(),s=i[0],f=i.slice(1);return function(){return f.reduce(function(a,p){return p(a)},s.apply(void 0,arguments))}},Z6=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},_ge=function(t){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),f=0;f<i;f++)s[f]=arguments[f];return n&&s.every(function(a,p){return a===n[p]})||(n=s,r=t.apply(void 0,s)),r}};function wit(e){var t;return e===0?t=1:t=Math.floor(new Ka(e).abs().log(10).toNumber())+1,t}function Sit(e,t,n){for(var r=new Ka(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var Tit=Ek(function(e,t,n){var r=+e,i=+t;return r+n*(i-r)}),Eit=Ek(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),Ait=Ek(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Ak={rangeStep:Sit,getDigitCount:wit,interpolateNumber:Tit,uninterpolateNumber:Eit,uninterpolateTruncation:Ait};function K6(e){return Mit(e)||Cit(e)||vge(e)||Oit()}function Oit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cit(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Mit(e){if(Array.isArray(e))return Q6(e)}function _A(e,t){return Pit(e)||Iit(e,t)||vge(e,t)||Dit()}function Dit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vge(e,t){if(e){if(typeof e=="string")return Q6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q6(e,t)}}function Q6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Iit(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,s=void 0;try{for(var f=e[Symbol.iterator](),a;!(r=(a=f.next()).done)&&(n.push(a.value),!(t&&n.length===t));r=!0);}catch(p){i=!0,s=p}finally{try{!r&&f.return!=null&&f.return()}finally{if(i)throw s}}return n}}function Pit(e){if(Array.isArray(e))return e}function bge(e){var t=_A(e,2),n=t[0],r=t[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function xge(e,t,n){if(e.lte(0))return new Ka(0);var r=Ak.getDigitCount(e.toNumber()),i=new Ka(10).pow(r),s=e.div(i),f=r!==1?.05:.1,a=new Ka(Math.ceil(s.div(f).toNumber())).add(n).mul(f),p=a.mul(i);return t?p:new Ka(Math.ceil(p))}function Rit(e,t,n){var r=1,i=new Ka(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new Ka(10).pow(Ak.getDigitCount(e)-1),i=new Ka(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Ka(Math.floor(e)))}else e===0?i=new Ka(Math.floor((t-1)/2)):n||(i=new Ka(Math.floor(e)));var f=Math.floor((t-1)/2),a=xit(bit(function(p){return i.add(new Ka(p-f).mul(r)).toNumber()}),X6);return a(0,t)}function wge(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Ka(0),tickMin:new Ka(0),tickMax:new Ka(0)};var s=xge(new Ka(t).sub(e).div(n-1),r,i),f;e<=0&&t>=0?f=new Ka(0):(f=new Ka(e).add(t).div(2),f=f.sub(new Ka(f).mod(s)));var a=Math.ceil(f.sub(e).div(s).toNumber()),p=Math.ceil(new Ka(t).sub(f).div(s).toNumber()),y=a+p+1;return y>n?wge(e,t,n,r,i+1):(y<n&&(p=t>0?p+(n-y):p,a=t>0?a:a+(n-y)),{step:s,tickMin:f.sub(new Ka(a).mul(s)),tickMax:f.add(new Ka(p).mul(s))})}function kit(e){var t=_A(e,2),n=t[0],r=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,f=Math.max(i,2),a=bge([n,r]),p=_A(a,2),y=p[0],S=p[1];if(y===-1/0||S===1/0){var E=S===1/0?[y].concat(K6(X6(0,i-1).map(function(){return 1/0}))):[].concat(K6(X6(0,i-1).map(function(){return-1/0})),[S]);return n>r?Z6(E):E}if(y===S)return Rit(y,i,s);var I=wge(y,S,f,s),L=I.step,N=I.tickMin,j=I.tickMax,k=Ak.rangeStep(N,j.add(new Ka(.1).mul(L)),L);return n>r?Z6(k):k}function Lit(e,t){var n=_A(e,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,f=bge([r,i]),a=_A(f,2),p=a[0],y=a[1];if(p===-1/0||y===1/0)return[r,i];if(p===y)return[p];var S=Math.max(t,2),E=xge(new Ka(y).sub(p).div(S-1),s,0),I=[].concat(K6(Ak.rangeStep(new Ka(p),new Ka(y).sub(new Ka(.99).mul(E)),E)),[y]);return r>i?Z6(I):I}var zit=_ge(kit),Nit=_ge(Lit),Fit="Invariant failed";function Dx(e,t){throw new Error(Fit)}var Bit=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function SS(e){"@babel/helpers - typeof";return SS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SS(e)}function lP(){return lP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lP.apply(this,arguments)}function jit(e,t){return qit(e)||Vit(e,t)||$it(e,t)||Uit()}function Uit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $it(e,t){if(e){if(typeof e=="string")return Ere(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ere(e,t)}}function Ere(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vit(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function qit(e){if(Array.isArray(e))return e}function Hit(e,t){if(e==null)return{};var n=Git(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Git(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Yit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wit(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ege(r.key),r)}}function Xit(e,t,n){return t&&Wit(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zit(e,t,n){return t=uP(t),Kit(e,Sge()?Reflect.construct(t,n||[],uP(e).constructor):t.apply(e,n))}function Kit(e,t){if(t&&(SS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qit(e)}function Qit(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sge=function(){return!!e})()}function uP(e){return uP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uP(e)}function Jit(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J6(e,t)}function J6(e,t){return J6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},J6(e,t)}function Tge(e,t,n){return t=Ege(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ege(e){var t=eat(e,"string");return SS(t)=="symbol"?t:t+""}function eat(e,t){if(SS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(SS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var BO=(function(e){function t(){return Yit(this,t),Zit(this,t,arguments)}return Jit(t,e),Xit(t,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,f=r.width,a=r.dataKey,p=r.data,y=r.dataPointFormatter,S=r.xAxis,E=r.yAxis,I=Hit(r,Bit),L=aa(I,!1);this.props.direction==="x"&&S.type!=="number"&&Dx();var N=p.map(function(j){var k=y(j,a),V=k.x,K=k.y,J=k.value,ie=k.errorVal;if(!ie)return null;var Q=[],W,te;if(Array.isArray(ie)){var X=jit(ie,2);W=X[0],te=X[1]}else W=te=ie;if(s==="vertical"){var ae=S.scale,le=K+i,ge=le+f,ye=le-f,De=ae(J-W),He=ae(J+te);Q.push({x1:He,y1:ge,x2:He,y2:ye}),Q.push({x1:De,y1:le,x2:He,y2:le}),Q.push({x1:De,y1:ge,x2:De,y2:ye})}else if(s==="horizontal"){var Be=E.scale,Ee=V+i,Fe=Ee-f,at=Ee+f,yt=Be(J-W),je=Be(J+te);Q.push({x1:Fe,y1:je,x2:at,y2:je}),Q.push({x1:Ee,y1:yt,x2:Ee,y2:je}),Q.push({x1:Fe,y1:yt,x2:at,y2:yt})}return tt.createElement(Rs,lP({className:"recharts-errorBar",key:"bar-".concat(Q.map(function(Ke){return"".concat(Ke.x1,"-").concat(Ke.x2,"-").concat(Ke.y1,"-").concat(Ke.y2)}))},L),Q.map(function(Ke){return tt.createElement("line",lP({},Ke,{key:"line-".concat(Ke.x1,"-").concat(Ke.x2,"-").concat(Ke.y1,"-").concat(Ke.y2)}))}))});return tt.createElement(Rs,{className:"recharts-errorBars"},N)}}])})(tt.Component);Tge(BO,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Tge(BO,"displayName","ErrorBar");function vA(e){"@babel/helpers - typeof";return vA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vA(e)}function Are(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Are(Object(n),!0).forEach(function(r){tat(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Are(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tat(e,t,n){return t=nat(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nat(e){var t=rat(e,"string");return vA(t)=="symbol"?t:t+""}function rat(e,t){if(vA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(vA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Age=function(t){var n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,s=t.legendContent,f=Gf(n,lx);if(!f)return null;var a=lx.defaultProps,p=a!==void 0?kb(kb({},a),f.props):{},y;return f.props&&f.props.payload?y=f.props&&f.props.payload:s==="children"?y=(r||[]).reduce(function(S,E){var I=E.item,L=E.props,N=L.sectors||L.data||[];return S.concat(N.map(function(j){return{type:f.props.iconType||I.props.legendType,value:j.name,color:j.fill,payload:j}}))},[]):y=(r||[]).map(function(S){var E=S.item,I=E.type.defaultProps,L=I!==void 0?kb(kb({},I),E.props):{},N=L.dataKey,j=L.name,k=L.legendType,V=L.hide;return{inactive:V,dataKey:N,type:p.iconType||k||"square",color:Wq(E),value:j||N,payload:L}}),kb(kb(kb({},p),lx.getWithHeight(f,i)),{},{payload:y,item:f})};function bA(e){"@babel/helpers - typeof";return bA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bA(e)}function Ore(e){return sat(e)||oat(e)||aat(e)||iat()}function iat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aat(e,t){if(e){if(typeof e=="string")return eU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eU(e,t)}}function oat(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sat(e){if(Array.isArray(e))return eU(e)}function eU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cre(Object(n),!0).forEach(function(r){Fw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fw(e,t,n){return t=lat(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lat(e){var t=uat(e,"string");return bA(t)=="symbol"?t:t+""}function uat(e,t){if(bA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(bA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nh(e,t,n){return Gi(e)||Gi(t)?n:vl(t)?ed(e,t,n):Li(t)?t(e):n}function T2(e,t,n,r){var i=sit(e,function(a){return nh(a,t)});if(n==="number"){var s=i.filter(function(a){return Xn(a)||parseFloat(a)});return s.length?[Sk(s),wk(s)]:[1/0,-1/0]}var f=r?i.filter(function(a){return!Gi(a)}):i;return f.map(function(a){return vl(a)||a instanceof Date?a:""})}var cat=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,f=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var p=s.range,y=0;y<a;y++){var S=y>0?i[y-1].coordinate:i[a-1].coordinate,E=i[y].coordinate,I=y>=a-1?i[0].coordinate:i[y+1].coordinate,L=void 0;if(yp(E-S)!==yp(I-E)){var N=[];if(yp(I-E)===yp(p[1]-p[0])){L=I;var j=E+p[1]-p[0];N[0]=Math.min(j,(j+S)/2),N[1]=Math.max(j,(j+S)/2)}else{L=S;var k=I+p[1]-p[0];N[0]=Math.min(E,(k+E)/2),N[1]=Math.max(E,(k+E)/2)}var V=[Math.min(E,(L+E)/2),Math.max(E,(L+E)/2)];if(t>V[0]&&t<=V[1]||t>=N[0]&&t<=N[1]){f=i[y].index;break}}else{var K=Math.min(S,I),J=Math.max(S,I);if(t>(K+E)/2&&t<=(J+E)/2){f=i[y].index;break}}}else for(var ie=0;ie<a;ie++)if(ie===0&&t<=(r[ie].coordinate+r[ie+1].coordinate)/2||ie>0&&ie<a-1&&t>(r[ie].coordinate+r[ie-1].coordinate)/2&&t<=(r[ie].coordinate+r[ie+1].coordinate)/2||ie===a-1&&t>(r[ie].coordinate+r[ie-1].coordinate)/2){f=r[ie].index;break}return f},Wq=function(t){var n,r=t,i=r.type.displayName,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?gs(gs({},t.type.defaultProps),t.props):t.props,f=s.stroke,a=s.fill,p;switch(i){case"Line":p=f;break;case"Area":case"Radar":p=f&&f!=="none"?f:a;break;default:p=a;break}return p},fat=function(t){var n=t.barSize,r=t.totalSize,i=t.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var f={},a=Object.keys(s),p=0,y=a.length;p<y;p++)for(var S=s[a[p]].stackGroups,E=Object.keys(S),I=0,L=E.length;I<L;I++){var N=S[E[I]],j=N.items,k=N.cateAxisId,V=j.filter(function(te){return Yy(te.type).indexOf("Bar")>=0});if(V&&V.length){var K=V[0].type.defaultProps,J=K!==void 0?gs(gs({},K),V[0].props):V[0].props,ie=J.barSize,Q=J[k];f[Q]||(f[Q]=[]);var W=Gi(ie)?n:ie;f[Q].push({item:V[0],stackList:V.slice(1),barSize:Gi(W)?void 0:Cx(W,r,0)})}}return f},hat=function(t){var n=t.barGap,r=t.barCategoryGap,i=t.bandSize,s=t.sizeList,f=s===void 0?[]:s,a=t.maxBarSize,p=f.length;if(p<1)return null;var y=Cx(n,i,0,!0),S,E=[];if(f[0].barSize===+f[0].barSize){var I=!1,L=i/p,N=f.reduce(function(ie,Q){return ie+Q.barSize||0},0);N+=(p-1)*y,N>=i&&(N-=(p-1)*y,y=0),N>=i&&L>0&&(I=!0,L*=.9,N=p*L);var j=(i-N)/2>>0,k={offset:j-y,size:0};S=f.reduce(function(ie,Q){var W={item:Q.item,position:{offset:k.offset+k.size+y,size:I?L:Q.barSize}},te=[].concat(Ore(ie),[W]);return k=te[te.length-1].position,Q.stackList&&Q.stackList.length&&Q.stackList.forEach(function(X){te.push({item:X,position:k})}),te},E)}else{var V=Cx(r,i,0,!0);i-2*V-(p-1)*y<=0&&(y=0);var K=(i-2*V-(p-1)*y)/p;K>1&&(K>>=0);var J=a===+a?Math.min(K,a):K;S=f.reduce(function(ie,Q,W){var te=[].concat(Ore(ie),[{item:Q.item,position:{offset:V+(K+y)*W+(K-J)/2,size:J}}]);return Q.stackList&&Q.stackList.length&&Q.stackList.forEach(function(X){te.push({item:X,position:te[te.length-1].position})}),te},E)}return S},dat=function(t,n,r,i){var s=r.children,f=r.width,a=r.margin,p=f-(a.left||0)-(a.right||0),y=Age({children:s,legendWidth:p});if(y){var S=i||{},E=S.width,I=S.height,L=y.align,N=y.verticalAlign,j=y.layout;if((j==="vertical"||j==="horizontal"&&N==="middle")&&L!=="center"&&Xn(t[L]))return gs(gs({},t),{},Fw({},L,t[L]+(E||0)));if((j==="horizontal"||j==="vertical"&&L==="center")&&N!=="middle"&&Xn(t[N]))return gs(gs({},t),{},Fw({},N,t[N]+(I||0)))}return t},pat=function(t,n,r){return Gi(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Oge=function(t,n,r,i,s){var f=n.props.children,a=td(f,BO).filter(function(y){return pat(i,s,y.props.direction)});if(a&&a.length){var p=a.map(function(y){return y.props.dataKey});return t.reduce(function(y,S){var E=nh(S,r);if(Gi(E))return y;var I=Array.isArray(E)?[Sk(E),wk(E)]:[E,E],L=p.reduce(function(N,j){var k=nh(S,j,0),V=I[0]-Math.abs(Array.isArray(k)?k[0]:k),K=I[1]+Math.abs(Array.isArray(k)?k[1]:k);return[Math.min(V,N[0]),Math.max(K,N[1])]},[1/0,-1/0]);return[Math.min(L[0],y[0]),Math.max(L[1],y[1])]},[1/0,-1/0])}return null},mat=function(t,n,r,i,s){var f=n.map(function(a){return Oge(t,a,r,s,i)}).filter(function(a){return!Gi(a)});return f&&f.length?f.reduce(function(a,p){return[Math.min(a[0],p[0]),Math.max(a[1],p[1])]},[1/0,-1/0]):null},Cge=function(t,n,r,i,s){var f=n.map(function(p){var y=p.props.dataKey;return r==="number"&&y&&Oge(t,p,y,i)||T2(t,y,r,s)});if(r==="number")return f.reduce(function(p,y){return[Math.min(p[0],y[0]),Math.max(p[1],y[1])]},[1/0,-1/0]);var a={};return f.reduce(function(p,y){for(var S=0,E=y.length;S<E;S++)a[y[S]]||(a[y[S]]=!0,p.push(y[S]));return p},[])},Mge=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},Dge=function(t,n,r,i){if(i)return t.map(function(p){return p.coordinate});var s,f,a=t.map(function(p){return p.coordinate===n&&(s=!0),p.coordinate===r&&(f=!0),p.coordinate});return s||a.push(n),f||a.push(r),a},zy=function(t,n,r){if(!t)return null;var i=t.scale,s=t.duplicateDomain,f=t.type,a=t.range,p=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,y=(n||r)&&f==="category"&&i.bandwidth?i.bandwidth()/p:0;if(y=t.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?yp(a[0]-a[1])*2*y:y,n&&(t.ticks||t.niceTicks)){var S=(t.ticks||t.niceTicks).map(function(E){var I=s?s.indexOf(E):E;return{coordinate:i(I)+y,value:E,offset:y}});return S.filter(function(E){return!PO(E.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(E,I){return{coordinate:i(E)+y,value:E,index:I,offset:y}}):i.ticks&&!r?i.ticks(t.tickCount).map(function(E){return{coordinate:i(E)+y,value:E,offset:y}}):i.domain().map(function(E,I){return{coordinate:i(E)+y,value:s?s[E]:E,index:I,offset:y}})},Q5=new WeakMap,YM=function(t,n){if(typeof n!="function")return t;Q5.has(t)||Q5.set(t,new WeakMap);var r=Q5.get(t);if(r.has(n))return r.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},gat=function(t,n,r){var i=t.scale,s=t.type,f=t.layout,a=t.axisType;if(i==="auto")return f==="radial"&&a==="radiusAxis"?{scale:hA(),realScaleType:"band"}:f==="radial"&&a==="angleAxis"?{scale:rP(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:S2(),realScaleType:"point"}:s==="category"?{scale:hA(),realScaleType:"band"}:{scale:rP(),realScaleType:"linear"};if(Ox(i)){var p="scale".concat(uk(i));return{scale:(dre[p]||S2)(),realScaleType:dre[p]?p:"point"}}return Li(i)?{scale:i}:{scale:S2(),realScaleType:"point"}},Mre=1e-4,yat=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,i=t.range(),s=Math.min(i[0],i[1])-Mre,f=Math.max(i[0],i[1])+Mre,a=t(n[0]),p=t(n[r-1]);(a<s||a>f||p<s||p>f)&&t.domain([n[0],n[r-1]])}},_at=function(t,n){if(!t)return null;for(var r=0,i=t.length;r<i;r++)if(t[r].item===n)return t[r].position;return null},vat=function(t,n){if(!n||n.length!==2||!Xn(n[0])||!Xn(n[1]))return t;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[t[0],t[1]];return(!Xn(t[0])||t[0]<r)&&(s[0]=r),(!Xn(t[1])||t[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},bat=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var s=0,f=0,a=0;a<n;++a){var p=PO(t[a][r][1])?t[a][r][0]:t[a][r][1];p>=0?(t[a][r][0]=s,t[a][r][1]=s+p,s=t[a][r][1]):(t[a][r][0]=f,t[a][r][1]=f+p,f=t[a][r][1])}},xat=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var s=0,f=0;f<n;++f){var a=PO(t[f][r][1])?t[f][r][0]:t[f][r][1];a>=0?(t[f][r][0]=s,t[f][r][1]=s+a,s=t[f][r][1]):(t[f][r][0]=0,t[f][r][1]=0)}},wat={sign:bat,expand:nQe,none:mS,silhouette:rQe,wiggle:iQe,positive:xat},Sat=function(t,n,r){var i=n.map(function(a){return a.props.dataKey}),s=wat[r],f=tQe().keys(i).value(function(a,p){return+nh(a,p,0)}).order(D6).offset(s);return f(t)},Tat=function(t,n,r,i,s,f){if(!t)return null;var a=f?n.reverse():n,p={},y=a.reduce(function(E,I){var L,N=(L=I.type)!==null&&L!==void 0&&L.defaultProps?gs(gs({},I.type.defaultProps),I.props):I.props,j=N.stackId,k=N.hide;if(k)return E;var V=N[r],K=E[V]||{hasStack:!1,stackGroups:{}};if(vl(j)){var J=K.stackGroups[j]||{numericAxisId:r,cateAxisId:i,items:[]};J.items.push(I),K.hasStack=!0,K.stackGroups[j]=J}else K.stackGroups[RO("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[I]};return gs(gs({},E),{},Fw({},V,K))},p),S={};return Object.keys(y).reduce(function(E,I){var L=y[I];if(L.hasStack){var N={};L.stackGroups=Object.keys(L.stackGroups).reduce(function(j,k){var V=L.stackGroups[k];return gs(gs({},j),{},Fw({},k,{numericAxisId:r,cateAxisId:i,items:V.items,stackedData:Sat(t,V.items,s)}))},N)}return gs(gs({},E),{},Fw({},I,L))},S)},Eat=function(t,n){var r=n.realScaleType,i=n.type,s=n.tickCount,f=n.originalDomain,a=n.allowDecimals,p=r||n.scale;if(p!=="auto"&&p!=="linear")return null;if(s&&i==="number"&&f&&(f[0]==="auto"||f[1]==="auto")){var y=t.domain();if(!y.length)return null;var S=zit(y,s,a);return t.domain([Sk(S),wk(S)]),{niceTicks:S}}if(s&&i==="number"){var E=t.domain(),I=Nit(E,s,a);return{niceTicks:I}}return null};function Dre(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,s=e.index,f=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Gi(i[t.dataKey])){var a=zI(n,"value",i[t.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var p=nh(i,Gi(f)?t.dataKey:f);return Gi(p)?null:t.scale(p)}var Ire=function(t){var n=t.axis,r=t.ticks,i=t.offset,s=t.bandSize,f=t.entry,a=t.index;if(n.type==="category")return r[a]?r[a].coordinate+i:null;var p=nh(f,n.dataKey,n.domain[a]);return Gi(p)?null:n.scale(p)-s/2+i},Aat=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},Oat=function(t,n){var r,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?gs(gs({},t.type.defaultProps),t.props):t.props,s=i.stackId;if(vl(s)){var f=n[s];if(f){var a=f.items.indexOf(t);return a>=0?f.stackedData[a]:null}}return null},Cat=function(t){return t.reduce(function(n,r){return[Sk(r.concat([n[0]]).filter(Xn)),wk(r.concat([n[1]]).filter(Xn))]},[1/0,-1/0])},Ige=function(t,n,r){return Object.keys(t).reduce(function(i,s){var f=t[s],a=f.stackedData,p=a.reduce(function(y,S){var E=Cat(S.slice(n,r+1));return[Math.min(y[0],E[0]),Math.max(y[1],E[1])]},[1/0,-1/0]);return[Math.min(p[0],i[0]),Math.max(p[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Pre=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Rre=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tU=function(t,n,r){if(Li(t))return t(n,r);if(!Array.isArray(t))return n;var i=[];if(Xn(t[0]))i[0]=r?t[0]:Math.min(t[0],n[0]);else if(Pre.test(t[0])){var s=+Pre.exec(t[0])[1];i[0]=n[0]-s}else Li(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(Xn(t[1]))i[1]=r?t[1]:Math.max(t[1],n[1]);else if(Rre.test(t[1])){var f=+Rre.exec(t[1])[1];i[1]=n[1]+f}else Li(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},cP=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!r||i>0)return i}if(t&&n&&n.length>=2){for(var s=wq(n,function(E){return E.coordinate}),f=1/0,a=1,p=s.length;a<p;a++){var y=s[a],S=s[a-1];f=Math.min((y.coordinate||0)-(S.coordinate||0),f)}return f===1/0?0:f}return r?void 0:0},kre=function(t,n,r){return!t||!t.length||Tk(t,ed(r,"type.defaultProps.domain"))?n:t},Pge=function(t,n){var r=t.type.defaultProps?gs(gs({},t.type.defaultProps),t.props):t.props,i=r.dataKey,s=r.name,f=r.unit,a=r.formatter,p=r.tooltipType,y=r.chartType,S=r.hide;return gs(gs({},aa(t,!1)),{},{dataKey:i,unit:f,formatter:a,name:s||i,color:Wq(t),value:nh(n,i),type:p,payload:n,chartType:y,hide:S})};function xA(e){"@babel/helpers - typeof";return xA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xA(e)}function Lre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lre(Object(n),!0).forEach(function(r){Mat(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mat(e,t,n){return t=Dat(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dat(e){var t=Iat(e,"string");return xA(t)=="symbol"?t:t+""}function Iat(e,t){if(xA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fP=Math.PI/180,Pat=function(t){return t*180/Math.PI},tu=function(t,n,r,i){return{x:t+Math.cos(-fP*i)*r,y:n+Math.sin(-fP*i)*r}},Rat=function(t,n){var r=t.x,i=t.y,s=n.x,f=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-f,2))},kat=function(t,n){var r=t.x,i=t.y,s=n.cx,f=n.cy,a=Rat({x:r,y:i},{x:s,y:f});if(a<=0)return{radius:a};var p=(r-s)/a,y=Math.acos(p);return i>f&&(y=2*Math.PI-y),{radius:a,angle:Pat(y),angleInRadian:y}},Lat=function(t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),f=Math.min(i,s);return{startAngle:n-f*360,endAngle:r-f*360}},zat=function(t,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),f=Math.floor(i/360),a=Math.min(s,f);return t+a*360},Nre=function(t,n){var r=t.x,i=t.y,s=kat({x:r,y:i},n),f=s.radius,a=s.angle,p=n.innerRadius,y=n.outerRadius;if(f<p||f>y)return!1;if(f===0)return!0;var S=Lat(n),E=S.startAngle,I=S.endAngle,L=a,N;if(E<=I){for(;L>I;)L-=360;for(;L<E;)L+=360;N=L>=E&&L<=I}else{for(;L>E;)L-=360;for(;L<I;)L+=360;N=L>=I&&L<=E}return N?zre(zre({},n),{},{radius:f,angle:zat(L,n)}):null};function wA(e){"@babel/helpers - typeof";return wA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wA(e)}var Nat=["offset"];function Fat(e){return $at(e)||Uat(e)||jat(e)||Bat()}function Bat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jat(e,t){if(e){if(typeof e=="string")return nU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nU(e,t)}}function Uat(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $at(e){if(Array.isArray(e))return nU(e)}function nU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vat(e,t){if(e==null)return{};var n=qat(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function qat(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Fre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fre(Object(n),!0).forEach(function(r){Hat(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hat(e,t,n){return t=Gat(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gat(e){var t=Yat(e,"string");return wA(t)=="symbol"?t:t+""}function Yat(e,t){if(wA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SA(){return SA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SA.apply(this,arguments)}var Wat=function(t){var n=t.value,r=t.formatter,i=Gi(t.children)?n:t.children;return Li(r)?r(i):i},Xat=function(t,n){var r=yp(n-t),i=Math.min(Math.abs(n-t),360);return r*i},Zat=function(t,n,r){var i=t.position,s=t.viewBox,f=t.offset,a=t.className,p=s,y=p.cx,S=p.cy,E=p.innerRadius,I=p.outerRadius,L=p.startAngle,N=p.endAngle,j=p.clockWise,k=(E+I)/2,V=Xat(L,N),K=V>=0?1:-1,J,ie;i==="insideStart"?(J=L+K*f,ie=j):i==="insideEnd"?(J=N-K*f,ie=!j):i==="end"&&(J=N+K*f,ie=j),ie=V<=0?ie:!ie;var Q=tu(y,S,k,J),W=tu(y,S,k,J+(ie?1:-1)*359),te="M".concat(Q.x,",").concat(Q.y,`
    A`).concat(k,",").concat(k,",0,1,").concat(ie?0:1,`,
    `).concat(W.x,",").concat(W.y),X=Gi(t.id)?RO("recharts-radial-line-"):t.id;return tt.createElement("text",SA({},r,{dominantBaseline:"central",className:ri("recharts-radial-bar-label",a)}),tt.createElement("defs",null,tt.createElement("path",{id:X,d:te})),tt.createElement("textPath",{xlinkHref:"#".concat(X)},n))},Kat=function(t){var n=t.viewBox,r=t.offset,i=t.position,s=n,f=s.cx,a=s.cy,p=s.innerRadius,y=s.outerRadius,S=s.startAngle,E=s.endAngle,I=(S+E)/2;if(i==="outside"){var L=tu(f,a,y+r,I),N=L.x,j=L.y;return{x:N,y:j,textAnchor:N>=f?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:f,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:f,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:f,y:a,textAnchor:"middle",verticalAnchor:"end"};var k=(p+y)/2,V=tu(f,a,k,I),K=V.x,J=V.y;return{x:K,y:J,textAnchor:"middle",verticalAnchor:"middle"}},Qat=function(t){var n=t.viewBox,r=t.parentViewBox,i=t.offset,s=t.position,f=n,a=f.x,p=f.y,y=f.width,S=f.height,E=S>=0?1:-1,I=E*i,L=E>0?"end":"start",N=E>0?"start":"end",j=y>=0?1:-1,k=j*i,V=j>0?"end":"start",K=j>0?"start":"end";if(s==="top"){var J={x:a+y/2,y:p-E*i,textAnchor:"middle",verticalAnchor:L};return yl(yl({},J),r?{height:Math.max(p-r.y,0),width:y}:{})}if(s==="bottom"){var ie={x:a+y/2,y:p+S+I,textAnchor:"middle",verticalAnchor:N};return yl(yl({},ie),r?{height:Math.max(r.y+r.height-(p+S),0),width:y}:{})}if(s==="left"){var Q={x:a-k,y:p+S/2,textAnchor:V,verticalAnchor:"middle"};return yl(yl({},Q),r?{width:Math.max(Q.x-r.x,0),height:S}:{})}if(s==="right"){var W={x:a+y+k,y:p+S/2,textAnchor:K,verticalAnchor:"middle"};return yl(yl({},W),r?{width:Math.max(r.x+r.width-W.x,0),height:S}:{})}var te=r?{width:y,height:S}:{};return s==="insideLeft"?yl({x:a+k,y:p+S/2,textAnchor:K,verticalAnchor:"middle"},te):s==="insideRight"?yl({x:a+y-k,y:p+S/2,textAnchor:V,verticalAnchor:"middle"},te):s==="insideTop"?yl({x:a+y/2,y:p+I,textAnchor:"middle",verticalAnchor:N},te):s==="insideBottom"?yl({x:a+y/2,y:p+S-I,textAnchor:"middle",verticalAnchor:L},te):s==="insideTopLeft"?yl({x:a+k,y:p+I,textAnchor:K,verticalAnchor:N},te):s==="insideTopRight"?yl({x:a+y-k,y:p+I,textAnchor:V,verticalAnchor:N},te):s==="insideBottomLeft"?yl({x:a+k,y:p+S-I,textAnchor:K,verticalAnchor:L},te):s==="insideBottomRight"?yl({x:a+y-k,y:p+S-I,textAnchor:V,verticalAnchor:L},te):cT(s)&&(Xn(s.x)||Xb(s.x))&&(Xn(s.y)||Xb(s.y))?yl({x:a+Cx(s.x,y),y:p+Cx(s.y,S),textAnchor:"end",verticalAnchor:"end"},te):yl({x:a+y/2,y:p+S/2,textAnchor:"middle",verticalAnchor:"middle"},te)},Jat=function(t){return"cx"in t&&Xn(t.cx)};function Su(e){var t=e.offset,n=t===void 0?5:t,r=Vat(e,Nat),i=yl({offset:n},r),s=i.viewBox,f=i.position,a=i.value,p=i.children,y=i.content,S=i.className,E=S===void 0?"":S,I=i.textBreakAll;if(!s||Gi(a)&&Gi(p)&&!be.isValidElement(y)&&!Li(y))return null;if(be.isValidElement(y))return be.cloneElement(y,i);var L;if(Li(y)){if(L=be.createElement(y,i),be.isValidElement(L))return L}else L=Wat(i);var N=Jat(s),j=aa(i,!0);if(N&&(f==="insideStart"||f==="insideEnd"||f==="end"))return Zat(i,L,j);var k=N?Kat(i):Qat(i);return tt.createElement(XI,SA({className:ri("recharts-label",E)},j,k,{breakAll:I}),L)}Su.displayName="Label";var Rge=function(t){var n=t.cx,r=t.cy,i=t.angle,s=t.startAngle,f=t.endAngle,a=t.r,p=t.radius,y=t.innerRadius,S=t.outerRadius,E=t.x,I=t.y,L=t.top,N=t.left,j=t.width,k=t.height,V=t.clockWise,K=t.labelViewBox;if(K)return K;if(Xn(j)&&Xn(k)){if(Xn(E)&&Xn(I))return{x:E,y:I,width:j,height:k};if(Xn(L)&&Xn(N))return{x:L,y:N,width:j,height:k}}return Xn(E)&&Xn(I)?{x:E,y:I,width:0,height:0}:Xn(n)&&Xn(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:f||i||0,innerRadius:y||0,outerRadius:S||p||a||0,clockWise:V}:t.viewBox?t.viewBox:{}},eot=function(t,n){return t?t===!0?tt.createElement(Su,{key:"label-implicit",viewBox:n}):vl(t)?tt.createElement(Su,{key:"label-implicit",viewBox:n,value:t}):be.isValidElement(t)?t.type===Su?be.cloneElement(t,{key:"label-implicit",viewBox:n}):tt.createElement(Su,{key:"label-implicit",content:t,viewBox:n}):Li(t)?tt.createElement(Su,{key:"label-implicit",content:t,viewBox:n}):cT(t)?tt.createElement(Su,SA({viewBox:n},t,{key:"label-implicit"})):null:null},tot=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var i=t.children,s=Rge(t),f=td(i,Su).map(function(p,y){return be.cloneElement(p,{viewBox:n||s,key:"label-".concat(y)})});if(!r)return f;var a=eot(t.label,n||s);return[a].concat(Fat(f))};Su.parseViewBox=Rge;Su.renderCallByParent=tot;var J5,Bre;function not(){if(Bre)return J5;Bre=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return J5=e,J5}var rot=not();const iot=ma(rot);function TA(e){"@babel/helpers - typeof";return TA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TA(e)}var aot=["valueAccessor"],oot=["data","dataKey","clockWise","id","textBreakAll"];function sot(e){return fot(e)||cot(e)||uot(e)||lot()}function lot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uot(e,t){if(e){if(typeof e=="string")return rU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rU(e,t)}}function cot(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fot(e){if(Array.isArray(e))return rU(e)}function rU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hP(){return hP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hP.apply(this,arguments)}function jre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ure(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jre(Object(n),!0).forEach(function(r){hot(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hot(e,t,n){return t=dot(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dot(e){var t=pot(e,"string");return TA(t)=="symbol"?t:t+""}function pot(e,t){if(TA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(TA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $re(e,t){if(e==null)return{};var n=mot(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mot(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var got=function(t){return Array.isArray(t.value)?iot(t.value):t.value};function Xv(e){var t=e.valueAccessor,n=t===void 0?got:t,r=$re(e,aot),i=r.data,s=r.dataKey,f=r.clockWise,a=r.id,p=r.textBreakAll,y=$re(r,oot);return!i||!i.length?null:tt.createElement(Rs,{className:"recharts-label-list"},i.map(function(S,E){var I=Gi(s)?n(S,E):nh(S&&S.payload,s),L=Gi(a)?{}:{id:"".concat(a,"-").concat(E)};return tt.createElement(Su,hP({},aa(S,!0),y,L,{parentViewBox:S.parentViewBox,value:I,textBreakAll:p,viewBox:Su.parseViewBox(Gi(f)?S:Ure(Ure({},S),{},{clockWise:f})),key:"label-".concat(E),index:E}))}))}Xv.displayName="LabelList";function yot(e,t){return e?e===!0?tt.createElement(Xv,{key:"labelList-implicit",data:t}):tt.isValidElement(e)||Li(e)?tt.createElement(Xv,{key:"labelList-implicit",data:t,content:e}):cT(e)?tt.createElement(Xv,hP({data:t},e,{key:"labelList-implicit"})):null:null}function _ot(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=td(r,Xv).map(function(f,a){return be.cloneElement(f,{data:t,key:"labelList-".concat(a)})});if(!n)return i;var s=yot(e.label,t);return[s].concat(sot(i))}Xv.renderCallByParent=_ot;function EA(e){"@babel/helpers - typeof";return EA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EA(e)}function iU(){return iU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iU.apply(this,arguments)}function Vre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vre(Object(n),!0).forEach(function(r){vot(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vot(e,t,n){return t=bot(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bot(e){var t=xot(e,"string");return EA(t)=="symbol"?t:t+""}function xot(e,t){if(EA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(EA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wot=function(t,n){var r=yp(n-t),i=Math.min(Math.abs(n-t),359.999);return r*i},WM=function(t){var n=t.cx,r=t.cy,i=t.radius,s=t.angle,f=t.sign,a=t.isExternal,p=t.cornerRadius,y=t.cornerIsExternal,S=p*(a?1:-1)+i,E=Math.asin(p/S)/fP,I=y?s:s+f*E,L=tu(n,r,S,I),N=tu(n,r,i,I),j=y?s-f*E:s,k=tu(n,r,S*Math.cos(E*fP),j);return{center:L,circleTangency:N,lineTangency:k,theta:E}},kge=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,s=t.outerRadius,f=t.startAngle,a=t.endAngle,p=wot(f,a),y=f+p,S=tu(n,r,s,f),E=tu(n,r,s,y),I="M ".concat(S.x,",").concat(S.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(p)>180),",").concat(+(f>y),`,
    `).concat(E.x,",").concat(E.y,`
  `);if(i>0){var L=tu(n,r,i,f),N=tu(n,r,i,y);I+="L ".concat(N.x,",").concat(N.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(p)>180),",").concat(+(f<=y),`,
            `).concat(L.x,",").concat(L.y," Z")}else I+="L ".concat(n,",").concat(r," Z");return I},Sot=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,s=t.outerRadius,f=t.cornerRadius,a=t.forceCornerRadius,p=t.cornerIsExternal,y=t.startAngle,S=t.endAngle,E=yp(S-y),I=WM({cx:n,cy:r,radius:s,angle:y,sign:E,cornerRadius:f,cornerIsExternal:p}),L=I.circleTangency,N=I.lineTangency,j=I.theta,k=WM({cx:n,cy:r,radius:s,angle:S,sign:-E,cornerRadius:f,cornerIsExternal:p}),V=k.circleTangency,K=k.lineTangency,J=k.theta,ie=p?Math.abs(y-S):Math.abs(y-S)-j-J;if(ie<0)return a?"M ".concat(N.x,",").concat(N.y,`
        a`).concat(f,",").concat(f,",0,0,1,").concat(f*2,`,0
        a`).concat(f,",").concat(f,",0,0,1,").concat(-f*2,`,0
      `):kge({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:y,endAngle:S});var Q="M ".concat(N.x,",").concat(N.y,`
    A`).concat(f,",").concat(f,",0,0,").concat(+(E<0),",").concat(L.x,",").concat(L.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(ie>180),",").concat(+(E<0),",").concat(V.x,",").concat(V.y,`
    A`).concat(f,",").concat(f,",0,0,").concat(+(E<0),",").concat(K.x,",").concat(K.y,`
  `);if(i>0){var W=WM({cx:n,cy:r,radius:i,angle:y,sign:E,isExternal:!0,cornerRadius:f,cornerIsExternal:p}),te=W.circleTangency,X=W.lineTangency,ae=W.theta,le=WM({cx:n,cy:r,radius:i,angle:S,sign:-E,isExternal:!0,cornerRadius:f,cornerIsExternal:p}),ge=le.circleTangency,ye=le.lineTangency,De=le.theta,He=p?Math.abs(y-S):Math.abs(y-S)-ae-De;if(He<0&&f===0)return"".concat(Q,"L").concat(n,",").concat(r,"Z");Q+="L".concat(ye.x,",").concat(ye.y,`
      A`).concat(f,",").concat(f,",0,0,").concat(+(E<0),",").concat(ge.x,",").concat(ge.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(He>180),",").concat(+(E>0),",").concat(te.x,",").concat(te.y,`
      A`).concat(f,",").concat(f,",0,0,").concat(+(E<0),",").concat(X.x,",").concat(X.y,"Z")}else Q+="L".concat(n,",").concat(r,"Z");return Q},Tot={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Lge=function(t){var n=qre(qre({},Tot),t),r=n.cx,i=n.cy,s=n.innerRadius,f=n.outerRadius,a=n.cornerRadius,p=n.forceCornerRadius,y=n.cornerIsExternal,S=n.startAngle,E=n.endAngle,I=n.className;if(f<s||S===E)return null;var L=ri("recharts-sector",I),N=f-s,j=Cx(a,N,0,!0),k;return j>0&&Math.abs(S-E)<360?k=Sot({cx:r,cy:i,innerRadius:s,outerRadius:f,cornerRadius:Math.min(j,N/2),forceCornerRadius:p,cornerIsExternal:y,startAngle:S,endAngle:E}):k=kge({cx:r,cy:i,innerRadius:s,outerRadius:f,startAngle:S,endAngle:E}),tt.createElement("path",iU({},aa(n,!0),{className:L,d:k,role:"img"}))};function AA(e){"@babel/helpers - typeof";return AA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AA(e)}function aU(){return aU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aU.apply(this,arguments)}function Hre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hre(Object(n),!0).forEach(function(r){Eot(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Eot(e,t,n){return t=Aot(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Aot(e){var t=Oot(e,"string");return AA(t)=="symbol"?t:t+""}function Oot(e,t){if(AA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(AA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yre={curveBasisClosed:qKe,curveBasisOpen:HKe,curveBasis:VKe,curveBumpX:MKe,curveBumpY:DKe,curveLinearClosed:GKe,curveLinear:fk,curveMonotoneX:YKe,curveMonotoneY:WKe,curveNatural:XKe,curveStep:ZKe,curveStepAfter:QKe,curveStepBefore:KKe},XM=function(t){return t.x===+t.x&&t.y===+t.y},YE=function(t){return t.x},WE=function(t){return t.y},Cot=function(t,n){if(Li(t))return t;var r="curve".concat(uk(t));return(r==="curveMonotone"||r==="curveBump")&&n?Yre["".concat(r).concat(n==="vertical"?"Y":"X")]:Yre[r]||fk},Mot=function(t){var n=t.type,r=n===void 0?"linear":n,i=t.points,s=i===void 0?[]:i,f=t.baseLine,a=t.layout,p=t.connectNulls,y=p===void 0?!1:p,S=Cot(r,a),E=y?s.filter(function(j){return XM(j)}):s,I;if(Array.isArray(f)){var L=y?f.filter(function(j){return XM(j)}):f,N=E.map(function(j,k){return Gre(Gre({},j),{},{base:L[k]})});return a==="vertical"?I=jM().y(WE).x1(YE).x0(function(j){return j.base.x}):I=jM().x(YE).y1(WE).y0(function(j){return j.base.y}),I.defined(XM).curve(S),I(N)}return a==="vertical"&&Xn(f)?I=jM().y(WE).x1(YE).x0(f):Xn(f)?I=jM().x(YE).y1(WE).y0(f):I=jpe().x(YE).y(WE),I.defined(XM).curve(S),I(E)},oU=function(t){var n=t.className,r=t.points,i=t.path,s=t.pathRef;if((!r||!r.length)&&!i)return null;var f=r&&r.length?Mot(t):i;return be.createElement("path",aU({},aa(t,!1),NI(t),{className:ri("recharts-curve",n),d:f,ref:s}))};const{getOwnPropertyNames:Dot,getOwnPropertySymbols:Iot}=Object,{hasOwnProperty:Pot}=Object.prototype;function e4(e,t){return function(r,i,s){return e(r,i,s)&&t(r,i,s)}}function ZM(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);const{cache:s}=i,f=s.get(n),a=s.get(r);if(f&&a)return f===r&&a===n;s.set(n,r),s.set(r,n);const p=e(n,r,i);return s.delete(n),s.delete(r),p}}function Rot(e){return e!=null?e[Symbol.toStringTag]:void 0}function Wre(e){return Dot(e).concat(Iot(e))}const kot=Object.hasOwn||((e,t)=>Pot.call(e,t));function Xx(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Lot="__v",zot="__o",Not="_owner",{getOwnPropertyDescriptor:Xre,keys:Zre}=Object;function Fot(e,t){return e.byteLength===t.byteLength&&dP(new Uint8Array(e),new Uint8Array(t))}function Bot(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function jot(e,t){return e.byteLength===t.byteLength&&dP(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Uot(e,t){return Xx(e.getTime(),t.getTime())}function $ot(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Vot(e,t){return e===t}function Kre(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.entries();let f,a,p=0;for(;(f=s.next())&&!f.done;){const y=t.entries();let S=!1,E=0;for(;(a=y.next())&&!a.done;){if(i[E]){E++;continue}const I=f.value,L=a.value;if(n.equals(I[0],L[0],p,E,e,t,n)&&n.equals(I[1],L[1],I[0],L[0],e,t,n)){S=i[E]=!0;break}E++}if(!S)return!1;p++}return!0}const qot=Xx;function Hot(e,t,n){const r=Zre(e);let i=r.length;if(Zre(t).length!==i)return!1;for(;i-- >0;)if(!zge(e,t,n,r[i]))return!1;return!0}function XE(e,t,n){const r=Wre(e);let i=r.length;if(Wre(t).length!==i)return!1;let s,f,a;for(;i-- >0;)if(s=r[i],!zge(e,t,n,s)||(f=Xre(e,s),a=Xre(t,s),(f||a)&&(!f||!a||f.configurable!==a.configurable||f.enumerable!==a.enumerable||f.writable!==a.writable)))return!1;return!0}function Got(e,t){return Xx(e.valueOf(),t.valueOf())}function Yot(e,t){return e.source===t.source&&e.flags===t.flags}function Qre(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.values();let f,a;for(;(f=s.next())&&!f.done;){const p=t.values();let y=!1,S=0;for(;(a=p.next())&&!a.done;){if(!i[S]&&n.equals(f.value,a.value,f.value,a.value,e,t,n)){y=i[S]=!0;break}S++}if(!y)return!1}return!0}function dP(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Wot(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function zge(e,t,n,r){return(r===Not||r===zot||r===Lot)&&(e.$$typeof||t.$$typeof)?!0:kot(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const Xot="[object ArrayBuffer]",Zot="[object Arguments]",Kot="[object Boolean]",Qot="[object DataView]",Jot="[object Date]",est="[object Error]",tst="[object Map]",nst="[object Number]",rst="[object Object]",ist="[object RegExp]",ast="[object Set]",ost="[object String]",sst={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},lst="[object URL]",ust=Object.prototype.toString;function cst({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:f,areNumbersEqual:a,areObjectsEqual:p,arePrimitiveWrappersEqual:y,areRegExpsEqual:S,areSetsEqual:E,areTypedArraysEqual:I,areUrlsEqual:L,unknownTagComparators:N}){return function(k,V,K){if(k===V)return!0;if(k==null||V==null)return!1;const J=typeof k;if(J!==typeof V)return!1;if(J!=="object")return J==="number"?a(k,V,K):J==="function"?s(k,V,K):!1;const ie=k.constructor;if(ie!==V.constructor)return!1;if(ie===Object)return p(k,V,K);if(Array.isArray(k))return t(k,V,K);if(ie===Date)return r(k,V,K);if(ie===RegExp)return S(k,V,K);if(ie===Map)return f(k,V,K);if(ie===Set)return E(k,V,K);const Q=ust.call(k);if(Q===Jot)return r(k,V,K);if(Q===ist)return S(k,V,K);if(Q===tst)return f(k,V,K);if(Q===ast)return E(k,V,K);if(Q===rst)return typeof k.then!="function"&&typeof V.then!="function"&&p(k,V,K);if(Q===lst)return L(k,V,K);if(Q===est)return i(k,V,K);if(Q===Zot)return p(k,V,K);if(sst[Q])return I(k,V,K);if(Q===Xot)return e(k,V,K);if(Q===Qot)return n(k,V,K);if(Q===Kot||Q===nst||Q===ost)return y(k,V,K);if(N){let W=N[Q];if(!W){const te=Rot(k);te&&(W=N[te])}if(W)return W(k,V,K)}return!1}}function fst({circular:e,createCustomConfig:t,strict:n}){let r={areArrayBuffersEqual:Fot,areArraysEqual:n?XE:Bot,areDataViewsEqual:jot,areDatesEqual:Uot,areErrorsEqual:$ot,areFunctionsEqual:Vot,areMapsEqual:n?e4(Kre,XE):Kre,areNumbersEqual:qot,areObjectsEqual:n?XE:Hot,arePrimitiveWrappersEqual:Got,areRegExpsEqual:Yot,areSetsEqual:n?e4(Qre,XE):Qre,areTypedArraysEqual:n?e4(dP,XE):dP,areUrlsEqual:Wot,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){const i=ZM(r.areArraysEqual),s=ZM(r.areMapsEqual),f=ZM(r.areObjectsEqual),a=ZM(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:f,areSetsEqual:a})}return r}function hst(e){return function(t,n,r,i,s,f,a){return e(t,n,a)}}function dst({circular:e,comparator:t,createState:n,equals:r,strict:i}){if(n)return function(a,p){const{cache:y=e?new WeakMap:void 0,meta:S}=n();return t(a,p,{cache:y,equals:r,meta:S,strict:i})};if(e)return function(a,p){return t(a,p,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,p){return t(a,p,s)}}const pst=m0();m0({strict:!0});m0({circular:!0});m0({circular:!0,strict:!0});m0({createInternalComparator:()=>Xx});m0({strict:!0,createInternalComparator:()=>Xx});m0({circular:!0,createInternalComparator:()=>Xx});m0({circular:!0,createInternalComparator:()=>Xx,strict:!0});function m0(e={}){const{circular:t=!1,createInternalComparator:n,createState:r,strict:i=!1}=e,s=fst(e),f=cst(s),a=n?n(f):hst(f);return dst({circular:t,comparator:f,createState:r,equals:a,strict:i})}function mst(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function Jre(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>t?(e(s),n=-1):mst(i)};requestAnimationFrame(r)}function sU(e){"@babel/helpers - typeof";return sU=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sU(e)}function gst(e){return bst(e)||vst(e)||_st(e)||yst()}function yst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _st(e,t){if(e){if(typeof e=="string")return eie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eie(e,t)}}function eie(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vst(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bst(e){if(Array.isArray(e))return e}function xst(){var e={},t=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var f=s,a=gst(f),p=a[0],y=a.slice(1);if(typeof p=="number"){Jre(i.bind(null,y),p);return}i(p),Jre(i.bind(null,y));return}sU(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function OA(e){"@babel/helpers - typeof";return OA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OA(e)}function tie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tie(Object(n),!0).forEach(function(r){Nge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nge(e,t,n){return t=wst(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wst(e){var t=Sst(e,"string");return OA(t)==="symbol"?t:String(t)}function Sst(e,t){if(OA(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(OA(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tst=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},Est=function(t){return t},Ast=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},E2=function(t,n){return Object.keys(n).reduce(function(r,i){return nie(nie({},r),{},Nge({},i,t(i,n[i])))},{})},rie=function(t,n,r){return t.map(function(i){return"".concat(Ast(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Ost(e,t){return Dst(e)||Mst(e,t)||Fge(e,t)||Cst()}function Cst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mst(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function Dst(e){if(Array.isArray(e))return e}function Ist(e){return kst(e)||Rst(e)||Fge(e)||Pst()}function Pst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fge(e,t){if(e){if(typeof e=="string")return lU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lU(e,t)}}function Rst(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kst(e){if(Array.isArray(e))return lU(e)}function lU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pP=1e-4,Bge=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},jge=function(t,n){return t.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},iie=function(t,n){return function(r){var i=Bge(t,n);return jge(i,r)}},Lst=function(t,n){return function(r){var i=Bge(t,n),s=[].concat(Ist(i.map(function(f,a){return f*a}).slice(1)),[0]);return jge(s,r)}},aie=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],s=n[1],f=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,f=1,a=1;break;case"ease":i=.25,s=.1,f=.25,a=1;break;case"ease-in":i=.42,s=0,f=1,a=1;break;case"ease-out":i=.42,s=0,f=.58,a=1;break;case"ease-in-out":i=0,s=0,f=.58,a=1;break;default:{var p=n[0].split("(");if(p[0]==="cubic-bezier"&&p[1].split(")")[0].split(",").length===4){var y=p[1].split(")")[0].split(",").map(function(k){return parseFloat(k)}),S=Ost(y,4);i=S[0],s=S[1],f=S[2],a=S[3]}}}var E=iie(i,f),I=iie(s,a),L=Lst(i,f),N=function(V){return V>1?1:V<0?0:V},j=function(V){for(var K=V>1?1:V,J=K,ie=0;ie<8;++ie){var Q=E(J)-K,W=L(J);if(Math.abs(Q-K)<pP||W<pP)return I(J);J=N(J-Q/W)}return I(J)};return j.isStepper=!1,j},zst=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,i=t.damping,s=i===void 0?8:i,f=t.dt,a=f===void 0?17:f,p=function(S,E,I){var L=-(S-E)*r,N=I*s,j=I+(L-N)*a/1e3,k=I*a/1e3+S;return Math.abs(k-E)<pP&&Math.abs(j)<pP?[E,0]:[k,j]};return p.isStepper=!0,p.dt=a,p},Nst=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return aie(i);case"spring":return zst();default:if(i.split("(")[0]==="cubic-bezier")return aie(i)}return typeof i=="function"?i:null};function CA(e){"@babel/helpers - typeof";return CA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CA(e)}function oie(e){return jst(e)||Bst(e)||Uge(e)||Fst()}function Fst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bst(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jst(e){if(Array.isArray(e))return cU(e)}function sie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sie(Object(n),!0).forEach(function(r){uU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uU(e,t,n){return t=Ust(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ust(e){var t=$st(e,"string");return CA(t)==="symbol"?t:String(t)}function $st(e,t){if(CA(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(CA(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vst(e,t){return Gst(e)||Hst(e,t)||Uge(e,t)||qst()}function qst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uge(e,t){if(e){if(typeof e=="string")return cU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cU(e,t)}}function cU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hst(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function Gst(e){if(Array.isArray(e))return e}var mP=function(t,n,r){return t+(n-t)*r},fU=function(t){var n=t.from,r=t.to;return n!==r},Yst=function e(t,n,r){var i=E2(function(s,f){if(fU(f)){var a=t(f.from,f.to,f.velocity),p=Vst(a,2),y=p[0],S=p[1];return Jl(Jl({},f),{},{from:y,velocity:S})}return f},n);return r<1?E2(function(s,f){return fU(f)?Jl(Jl({},f),{},{velocity:mP(f.velocity,i[s].velocity,r),from:mP(f.from,i[s].from,r)}):f},n):e(t,i,r-1)};const Wst=(function(e,t,n,r,i){var s=Tst(e,t),f=s.reduce(function(k,V){return Jl(Jl({},k),{},uU({},V,[e[V],t[V]]))},{}),a=s.reduce(function(k,V){return Jl(Jl({},k),{},uU({},V,{from:e[V],velocity:0,to:t[V]}))},{}),p=-1,y,S,E=function(){return null},I=function(){return E2(function(V,K){return K.from},a)},L=function(){return!Object.values(a).filter(fU).length},N=function(V){y||(y=V);var K=V-y,J=K/n.dt;a=Yst(n,a,J),i(Jl(Jl(Jl({},e),t),I())),y=V,L()||(p=requestAnimationFrame(E))},j=function(V){S||(S=V);var K=(V-S)/r,J=E2(function(Q,W){return mP.apply(void 0,oie(W).concat([n(K)]))},f);if(i(Jl(Jl(Jl({},e),t),J)),K<1)p=requestAnimationFrame(E);else{var ie=E2(function(Q,W){return mP.apply(void 0,oie(W).concat([n(1)]))},f);i(Jl(Jl(Jl({},e),t),ie))}};return E=n.isStepper?N:j,function(){return requestAnimationFrame(E),function(){cancelAnimationFrame(p)}}});function TS(e){"@babel/helpers - typeof";return TS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TS(e)}var Xst=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Zst(e,t){if(e==null)return{};var n=Kst(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Kst(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function t4(e){return tlt(e)||elt(e)||Jst(e)||Qst()}function Qst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jst(e,t){if(e){if(typeof e=="string")return hU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hU(e,t)}}function elt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tlt(e){if(Array.isArray(e))return hU(e)}function hU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function op(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lie(Object(n),!0).forEach(function(r){u2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u2(e,t,n){return t=$ge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nlt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rlt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$ge(r.key),r)}}function ilt(e,t,n){return t&&rlt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ge(e){var t=alt(e,"string");return TS(t)==="symbol"?t:String(t)}function alt(e,t){if(TS(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(TS(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function olt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dU(e,t)}function dU(e,t){return dU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dU(e,t)}function slt(e){var t=llt();return function(){var r=gP(e),i;if(t){var s=gP(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return pU(this,i)}}function pU(e,t){if(t&&(TS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mU(e)}function mU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function llt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gP(e){return gP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gP(e)}var u_=(function(e){olt(n,e);var t=slt(n);function n(r,i){var s;nlt(this,n),s=t.call(this,r,i);var f=s.props,a=f.isActive,p=f.attributeName,y=f.from,S=f.to,E=f.steps,I=f.children,L=f.duration;if(s.handleStyleChange=s.handleStyleChange.bind(mU(s)),s.changeStyle=s.changeStyle.bind(mU(s)),!a||L<=0)return s.state={style:{}},typeof I=="function"&&(s.state={style:S}),pU(s);if(E&&E.length)s.state={style:E[0].style};else if(y){if(typeof I=="function")return s.state={style:y},pU(s);s.state={style:p?u2({},p,y):y}}else s.state={style:{}};return s}return ilt(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,f=i.canBegin;this.mounted=!0,!(!s||!f)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,f=s.isActive,a=s.canBegin,p=s.attributeName,y=s.shouldReAnimate,S=s.to,E=s.from,I=this.state.style;if(a){if(!f){var L={style:p?u2({},p,S):S};this.state&&I&&(p&&I[p]!==S||!p&&I!==S)&&this.setState(L);return}if(!(pst(i.to,S)&&i.canBegin&&i.isActive)){var N=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var j=N||y?E:i.to;if(this.state&&I){var k={style:p?u2({},p,j):j};(p&&I[p]!==j||!p&&I!==j)&&this.setState(k)}this.runAnimation(op(op({},this.props),{},{from:j,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,f=i.from,a=i.to,p=i.duration,y=i.easing,S=i.begin,E=i.onAnimationEnd,I=i.onAnimationStart,L=Wst(f,a,Nst(y),p,this.changeStyle),N=function(){s.stopJSAnimation=L()};this.manager.start([I,S,N,p,E])}},{key:"runStepAnimation",value:function(i){var s=this,f=i.steps,a=i.begin,p=i.onAnimationStart,y=f[0],S=y.style,E=y.duration,I=E===void 0?0:E,L=function(j,k,V){if(V===0)return j;var K=k.duration,J=k.easing,ie=J===void 0?"ease":J,Q=k.style,W=k.properties,te=k.onAnimationEnd,X=V>0?f[V-1]:k,ae=W||Object.keys(Q);if(typeof ie=="function"||ie==="spring")return[].concat(t4(j),[s.runJSAnimation.bind(s,{from:X.style,to:Q,duration:K,easing:ie}),K]);var le=rie(ae,K,ie),ge=op(op(op({},X.style),Q),{},{transition:le});return[].concat(t4(j),[ge,K,te]).filter(Est)};return this.manager.start([p].concat(t4(f.reduce(L,[S,Math.max(I,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=xst());var s=i.begin,f=i.duration,a=i.attributeName,p=i.to,y=i.easing,S=i.onAnimationStart,E=i.onAnimationEnd,I=i.steps,L=i.children,N=this.manager;if(this.unSubscribe=N.subscribe(this.handleStyleChange),typeof y=="function"||typeof L=="function"||y==="spring"){this.runJSAnimation(i);return}if(I.length>1){this.runStepAnimation(i);return}var j=a?u2({},a,p):p,k=rie(Object.keys(j),f,y);N.start([S,s,op(op({},j),{},{transition:k}),f,E])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var f=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var p=Zst(i,Xst),y=be.Children.count(s),S=this.state.style;if(typeof s=="function")return s(S);if(!a||y===0||f<=0)return s;var E=function(L){var N=L.props,j=N.style,k=j===void 0?{}:j,V=N.className,K=be.cloneElement(L,op(op({},p),{},{style:op(op({},k),S),className:V}));return K};return y===1?E(be.Children.only(s)):tt.createElement("div",null,be.Children.map(s,function(I){return E(I)}))}}]),n})(be.PureComponent);u_.displayName="Animate";u_.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};u_.propTypes={from:Bn.oneOfType([Bn.object,Bn.string]),to:Bn.oneOfType([Bn.object,Bn.string]),attributeName:Bn.string,duration:Bn.number,begin:Bn.number,easing:Bn.oneOfType([Bn.string,Bn.func]),steps:Bn.arrayOf(Bn.shape({duration:Bn.number.isRequired,style:Bn.object.isRequired,easing:Bn.oneOfType([Bn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Bn.func]),properties:Bn.arrayOf("string"),onAnimationEnd:Bn.func})),children:Bn.oneOfType([Bn.node,Bn.func]),isActive:Bn.bool,canBegin:Bn.bool,onAnimationEnd:Bn.func,shouldReAnimate:Bn.bool,onAnimationStart:Bn.func,onAnimationReStart:Bn.func};function MA(e){"@babel/helpers - typeof";return MA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MA(e)}function yP(){return yP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yP.apply(this,arguments)}function ult(e,t){return dlt(e)||hlt(e,t)||flt(e,t)||clt()}function clt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function flt(e,t){if(e){if(typeof e=="string")return uie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uie(e,t)}}function uie(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hlt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function dlt(e){if(Array.isArray(e))return e}function cie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cie(Object(n),!0).forEach(function(r){plt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function plt(e,t,n){return t=mlt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mlt(e){var t=glt(e,"string");return MA(t)=="symbol"?t:t+""}function glt(e,t){if(MA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(MA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hie=function(t,n,r,i,s){var f=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,p=r>=0?1:-1,y=i>=0&&r>=0||i<0&&r<0?1:0,S;if(f>0&&s instanceof Array){for(var E=[0,0,0,0],I=0,L=4;I<L;I++)E[I]=s[I]>f?f:s[I];S="M".concat(t,",").concat(n+a*E[0]),E[0]>0&&(S+="A ".concat(E[0],",").concat(E[0],",0,0,").concat(y,",").concat(t+p*E[0],",").concat(n)),S+="L ".concat(t+r-p*E[1],",").concat(n),E[1]>0&&(S+="A ".concat(E[1],",").concat(E[1],",0,0,").concat(y,`,
        `).concat(t+r,",").concat(n+a*E[1])),S+="L ".concat(t+r,",").concat(n+i-a*E[2]),E[2]>0&&(S+="A ".concat(E[2],",").concat(E[2],",0,0,").concat(y,`,
        `).concat(t+r-p*E[2],",").concat(n+i)),S+="L ".concat(t+p*E[3],",").concat(n+i),E[3]>0&&(S+="A ".concat(E[3],",").concat(E[3],",0,0,").concat(y,`,
        `).concat(t,",").concat(n+i-a*E[3])),S+="Z"}else if(f>0&&s===+s&&s>0){var N=Math.min(f,s);S="M ".concat(t,",").concat(n+a*N,`
            A `).concat(N,",").concat(N,",0,0,").concat(y,",").concat(t+p*N,",").concat(n,`
            L `).concat(t+r-p*N,",").concat(n,`
            A `).concat(N,",").concat(N,",0,0,").concat(y,",").concat(t+r,",").concat(n+a*N,`
            L `).concat(t+r,",").concat(n+i-a*N,`
            A `).concat(N,",").concat(N,",0,0,").concat(y,",").concat(t+r-p*N,",").concat(n+i,`
            L `).concat(t+p*N,",").concat(n+i,`
            A `).concat(N,",").concat(N,",0,0,").concat(y,",").concat(t,",").concat(n+i-a*N," Z")}else S="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return S},ylt=function(t,n){if(!t||!n)return!1;var r=t.x,i=t.y,s=n.x,f=n.y,a=n.width,p=n.height;if(Math.abs(a)>0&&Math.abs(p)>0){var y=Math.min(s,s+a),S=Math.max(s,s+a),E=Math.min(f,f+p),I=Math.max(f,f+p);return r>=y&&r<=S&&i>=E&&i<=I}return!1},_lt={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Xq=function(t){var n=fie(fie({},_lt),t),r=be.useRef(),i=be.useState(-1),s=ult(i,2),f=s[0],a=s[1];be.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var ie=r.current.getTotalLength();ie&&a(ie)}catch{}},[]);var p=n.x,y=n.y,S=n.width,E=n.height,I=n.radius,L=n.className,N=n.animationEasing,j=n.animationDuration,k=n.animationBegin,V=n.isAnimationActive,K=n.isUpdateAnimationActive;if(p!==+p||y!==+y||S!==+S||E!==+E||S===0||E===0)return null;var J=ri("recharts-rectangle",L);return K?tt.createElement(u_,{canBegin:f>0,from:{width:S,height:E,x:p,y},to:{width:S,height:E,x:p,y},duration:j,animationEasing:N,isActive:K},function(ie){var Q=ie.width,W=ie.height,te=ie.x,X=ie.y;return tt.createElement(u_,{canBegin:f>0,from:"0px ".concat(f===-1?1:f,"px"),to:"".concat(f,"px 0px"),attributeName:"strokeDasharray",begin:k,duration:j,isActive:V,easing:N},tt.createElement("path",yP({},aa(n,!0),{className:J,d:hie(te,X,Q,W,I),ref:r})))}):tt.createElement("path",yP({},aa(n,!0),{className:J,d:hie(p,y,S,E,I)}))};function gU(){return gU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gU.apply(this,arguments)}var Zq=function(t){var n=t.cx,r=t.cy,i=t.r,s=t.className,f=ri("recharts-dot",s);return n===+n&&r===+r&&i===+i?be.createElement("circle",gU({},aa(t,!1),NI(t),{className:f,cx:n,cy:r,r:i})):null};function DA(e){"@babel/helpers - typeof";return DA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DA(e)}var vlt=["x","y","top","left","width","height","className"];function yU(){return yU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yU.apply(this,arguments)}function die(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function blt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?die(Object(n),!0).forEach(function(r){xlt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):die(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xlt(e,t,n){return t=wlt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wlt(e){var t=Slt(e,"string");return DA(t)=="symbol"?t:t+""}function Slt(e,t){if(DA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(DA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tlt(e,t){if(e==null)return{};var n=Elt(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Elt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Alt=function(t,n,r,i,s,f){return"M".concat(t,",").concat(s,"v").concat(i,"M").concat(f,",").concat(n,"h").concat(r)},Olt=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,s=i===void 0?0:i,f=t.top,a=f===void 0?0:f,p=t.left,y=p===void 0?0:p,S=t.width,E=S===void 0?0:S,I=t.height,L=I===void 0?0:I,N=t.className,j=Tlt(t,vlt),k=blt({x:r,y:s,top:a,left:y,width:E,height:L},j);return!Xn(r)||!Xn(s)||!Xn(E)||!Xn(L)||!Xn(a)||!Xn(y)?null:tt.createElement("path",yU({},aa(k,!0),{className:ri("recharts-cross",N),d:Alt(r,s,E,L,a,y)}))},n4,pie;function Clt(){if(pie)return n4;pie=1;var e=ume(),t=e(Object.getPrototypeOf,Object);return n4=t,n4}var r4,mie;function Mlt(){if(mie)return r4;mie=1;var e=__(),t=Clt(),n=v_(),r="[object Object]",i=Function.prototype,s=Object.prototype,f=i.toString,a=s.hasOwnProperty,p=f.call(Object);function y(S){if(!n(S)||e(S)!=r)return!1;var E=t(S);if(E===null)return!0;var I=a.call(E,"constructor")&&E.constructor;return typeof I=="function"&&I instanceof I&&f.call(I)==p}return r4=y,r4}var Dlt=Mlt();const Ilt=ma(Dlt);var i4,gie;function Plt(){if(gie)return i4;gie=1;var e=__(),t=v_(),n="[object Boolean]";function r(i){return i===!0||i===!1||t(i)&&e(i)==n}return i4=r,i4}var Rlt=Plt();const klt=ma(Rlt);function IA(e){"@babel/helpers - typeof";return IA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IA(e)}function _P(){return _P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_P.apply(this,arguments)}function Llt(e,t){return Blt(e)||Flt(e,t)||Nlt(e,t)||zlt()}function zlt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nlt(e,t){if(e){if(typeof e=="string")return yie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yie(e,t)}}function yie(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Flt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function Blt(e){if(Array.isArray(e))return e}function _ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_ie(Object(n),!0).forEach(function(r){jlt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_ie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jlt(e,t,n){return t=Ult(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ult(e){var t=$lt(e,"string");return IA(t)=="symbol"?t:t+""}function $lt(e,t){if(IA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(IA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bie=function(t,n,r,i,s){var f=r-i,a;return a="M ".concat(t,",").concat(n),a+="L ".concat(t+r,",").concat(n),a+="L ".concat(t+r-f/2,",").concat(n+s),a+="L ".concat(t+r-f/2-i,",").concat(n+s),a+="L ".concat(t,",").concat(n," Z"),a},Vlt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qlt=function(t){var n=vie(vie({},Vlt),t),r=be.useRef(),i=be.useState(-1),s=Llt(i,2),f=s[0],a=s[1];be.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var J=r.current.getTotalLength();J&&a(J)}catch{}},[]);var p=n.x,y=n.y,S=n.upperWidth,E=n.lowerWidth,I=n.height,L=n.className,N=n.animationEasing,j=n.animationDuration,k=n.animationBegin,V=n.isUpdateAnimationActive;if(p!==+p||y!==+y||S!==+S||E!==+E||I!==+I||S===0&&E===0||I===0)return null;var K=ri("recharts-trapezoid",L);return V?tt.createElement(u_,{canBegin:f>0,from:{upperWidth:0,lowerWidth:0,height:I,x:p,y},to:{upperWidth:S,lowerWidth:E,height:I,x:p,y},duration:j,animationEasing:N,isActive:V},function(J){var ie=J.upperWidth,Q=J.lowerWidth,W=J.height,te=J.x,X=J.y;return tt.createElement(u_,{canBegin:f>0,from:"0px ".concat(f===-1?1:f,"px"),to:"".concat(f,"px 0px"),attributeName:"strokeDasharray",begin:k,duration:j,easing:N},tt.createElement("path",_P({},aa(n,!0),{className:K,d:bie(te,X,ie,Q,W),ref:r})))}):tt.createElement("g",null,tt.createElement("path",_P({},aa(n,!0),{className:K,d:bie(p,y,S,E,I)})))},Hlt=["option","shapeType","propTransformer","activeClassName","isActive"];function PA(e){"@babel/helpers - typeof";return PA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PA(e)}function Glt(e,t){if(e==null)return{};var n=Ylt(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ylt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function xie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xie(Object(n),!0).forEach(function(r){Wlt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wlt(e,t,n){return t=Xlt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xlt(e){var t=Zlt(e,"string");return PA(t)=="symbol"?t:t+""}function Zlt(e,t){if(PA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(PA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Klt(e,t){return vP(vP({},t),e)}function Qlt(e,t){return e==="symbols"}function wie(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return tt.createElement(Xq,n);case"trapezoid":return tt.createElement(qlt,n);case"sector":return tt.createElement(Lge,n);case"symbols":if(Qlt(t))return tt.createElement(pq,n);break;default:return null}}function Jlt(e){return be.isValidElement(e)?e.props:e}function eut(e){var t=e.option,n=e.shapeType,r=e.propTransformer,i=r===void 0?Klt:r,s=e.activeClassName,f=s===void 0?"recharts-active-shape":s,a=e.isActive,p=Glt(e,Hlt),y;if(be.isValidElement(t))y=be.cloneElement(t,vP(vP({},p),Jlt(t)));else if(Li(t))y=t(p);else if(Ilt(t)&&!klt(t)){var S=i(t,p);y=tt.createElement(wie,{shapeType:n,elementProps:S})}else{var E=p;y=tt.createElement(wie,{shapeType:n,elementProps:E})}return a?tt.createElement(Rs,{className:f},y):y}function Ok(e,t){return t!=null&&"trapezoids"in e.props}function Ck(e,t){return t!=null&&"sectors"in e.props}function RA(e,t){return t!=null&&"points"in e.props}function tut(e,t){var n,r,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,s=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return i&&s}function nut(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function rut(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function iut(e,t){var n;return Ok(e,t)?n=tut:Ck(e,t)?n=nut:RA(e,t)&&(n=rut),n}function aut(e,t){var n;return Ok(e,t)?n="trapezoids":Ck(e,t)?n="sectors":RA(e,t)&&(n="points"),n}function out(e,t){if(Ok(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Ck(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return RA(e,t)?t.payload:{}}function sut(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=aut(n,t),s=out(n,t),f=r.filter(function(p,y){var S=Tk(s,p),E=n.props[i].filter(function(N){var j=iut(n,t);return j(N,t)}),I=n.props[i].indexOf(E[E.length-1]),L=y===I;return S&&L}),a=r.indexOf(f[f.length-1]);return a}var a4,Sie;function lut(){if(Sie)return a4;Sie=1;var e=Math.ceil,t=Math.max;function n(r,i,s,f){for(var a=-1,p=t(e((i-r)/(s||1)),0),y=Array(p);p--;)y[f?p:++a]=r,r+=s;return y}return a4=n,a4}var o4,Tie;function Vge(){if(Tie)return o4;Tie=1;var e=Eme(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return o4=r,o4}var s4,Eie;function uut(){if(Eie)return s4;Eie=1;var e=lut(),t=mk(),n=Vge();function r(i){return function(s,f,a){return a&&typeof a!="number"&&t(s,f,a)&&(f=a=void 0),s=n(s),f===void 0?(f=s,s=0):f=n(f),a=a===void 0?s<f?1:-1:n(a),e(s,f,a,i)}}return s4=r,s4}var l4,Aie;function cut(){if(Aie)return l4;Aie=1;var e=uut(),t=e();return l4=t,l4}var fut=cut();const bP=ma(fut);function kA(e){"@babel/helpers - typeof";return kA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kA(e)}function Oie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Cie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Oie(Object(n),!0).forEach(function(r){qge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qge(e,t,n){return t=hut(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hut(e){var t=dut(e,"string");return kA(t)=="symbol"?t:t+""}function dut(e,t){if(kA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var put=["Webkit","Moz","O","ms"],mut=function(t,n){var r=t.replace(/(\w)/,function(s){return s.toUpperCase()}),i=put.reduce(function(s,f){return Cie(Cie({},s),{},qge({},f+r,n))},{});return i[t]=n,i};function ES(e){"@babel/helpers - typeof";return ES=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ES(e)}function xP(){return xP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xP.apply(this,arguments)}function Mie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function u4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mie(Object(n),!0).forEach(function(r){Hf(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Die(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gge(r.key),r)}}function yut(e,t,n){return t&&Die(e.prototype,t),n&&Die(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ut(e,t,n){return t=wP(t),vut(e,Hge()?Reflect.construct(t,n||[],wP(e).constructor):t.apply(e,n))}function vut(e,t){if(t&&(ES(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return but(e)}function but(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hge=function(){return!!e})()}function wP(e){return wP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wP(e)}function xut(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_U(e,t)}function _U(e,t){return _U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_U(e,t)}function Hf(e,t,n){return t=Gge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gge(e){var t=wut(e,"string");return ES(t)=="symbol"?t:t+""}function wut(e,t){if(ES(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ES(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sut=function(t){var n=t.data,r=t.startIndex,i=t.endIndex,s=t.x,f=t.width,a=t.travellerWidth;if(!n||!n.length)return{};var p=n.length,y=S2().domain(bP(0,p)).range([s,s+f-a]),S=y.domain().map(function(E){return y(E)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:y(r),endX:y(i),scale:y,scaleValues:S}},Iie=function(t){return t.changedTouches&&!!t.changedTouches.length},AS=(function(e){function t(n){var r;return gut(this,t),r=_ut(this,t,[n]),Hf(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Hf(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Hf(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,f=i.onDragEnd,a=i.startIndex;f==null||f({endIndex:s,startIndex:a})}),r.detachDragEndListener()}),Hf(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Hf(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Hf(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Hf(r,"handleSlideDragStart",function(i){var s=Iie(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return xut(t,e),yut(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,f=this.state.scaleValues,a=this.props,p=a.gap,y=a.data,S=y.length-1,E=Math.min(i,s),I=Math.max(i,s),L=t.getIndexInRange(f,E),N=t.getIndexInRange(f,I);return{startIndex:L-L%p,endIndex:N===S?S:N-N%p}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,f=i.tickFormatter,a=i.dataKey,p=nh(s[r],a,r);return Li(f)?f(p,r):p}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,f=i.startX,a=i.endX,p=this.props,y=p.x,S=p.width,E=p.travellerWidth,I=p.startIndex,L=p.endIndex,N=p.onChange,j=r.pageX-s;j>0?j=Math.min(j,y+S-E-a,y+S-E-f):j<0&&(j=Math.max(j,y-f,y-a));var k=this.getIndex({startX:f+j,endX:a+j});(k.startIndex!==I||k.endIndex!==L)&&N&&N(k),this.setState({startX:f+j,endX:a+j,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=Iie(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,f=i.movingTravellerId,a=i.endX,p=i.startX,y=this.state[f],S=this.props,E=S.x,I=S.width,L=S.travellerWidth,N=S.onChange,j=S.gap,k=S.data,V={startX:this.state.startX,endX:this.state.endX},K=r.pageX-s;K>0?K=Math.min(K,E+I-L-y):K<0&&(K=Math.max(K,E-y)),V[f]=y+K;var J=this.getIndex(V),ie=J.startIndex,Q=J.endIndex,W=function(){var X=k.length-1;return f==="startX"&&(a>p?ie%j===0:Q%j===0)||a<p&&Q===X||f==="endX"&&(a>p?Q%j===0:ie%j===0)||a>p&&Q===X};this.setState(Hf(Hf({},f,y+K),"brushMoveStartX",r.pageX),function(){N&&W()&&N(J)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,f=this.state,a=f.scaleValues,p=f.startX,y=f.endX,S=this.state[i],E=a.indexOf(S);if(E!==-1){var I=E+r;if(!(I===-1||I>=a.length)){var L=a[I];i==="startX"&&L>=y||i==="endX"&&L<=p||this.setState(Hf({},i,L),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,f=r.width,a=r.height,p=r.fill,y=r.stroke;return tt.createElement("rect",{stroke:y,fill:p,x:i,y:s,width:f,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,f=r.width,a=r.height,p=r.data,y=r.children,S=r.padding,E=be.Children.only(y);return E?tt.cloneElement(E,{x:i,y:s,width:f,height:a,margin:S,compact:!0,data:p}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,f,a=this,p=this.props,y=p.y,S=p.travellerWidth,E=p.height,I=p.traveller,L=p.ariaLabel,N=p.data,j=p.startIndex,k=p.endIndex,V=Math.max(r,this.props.x),K=u4(u4({},aa(this.props,!1)),{},{x:V,y,width:S,height:E}),J=L||"Min value: ".concat((s=N[j])===null||s===void 0?void 0:s.name,", Max value: ").concat((f=N[k])===null||f===void 0?void 0:f.name);return tt.createElement(Rs,{tabIndex:0,role:"slider","aria-label":J,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(Q){["ArrowLeft","ArrowRight"].includes(Q.key)&&(Q.preventDefault(),Q.stopPropagation(),a.handleTravellerMoveKeyboard(Q.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(I,K))}},{key:"renderSlide",value:function(r,i){var s=this.props,f=s.y,a=s.height,p=s.stroke,y=s.travellerWidth,S=Math.min(r,i)+y,E=Math.max(Math.abs(i-r)-y,0);return tt.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:p,fillOpacity:.2,x:S,y:f,width:E,height:a})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,f=r.y,a=r.height,p=r.travellerWidth,y=r.stroke,S=this.state,E=S.startX,I=S.endX,L=5,N={pointerEvents:"none",fill:y};return tt.createElement(Rs,{className:"recharts-brush-texts"},tt.createElement(XI,xP({textAnchor:"end",verticalAnchor:"middle",x:Math.min(E,I)-L,y:f+a/2},N),this.getTextOfTick(i)),tt.createElement(XI,xP({textAnchor:"start",verticalAnchor:"middle",x:Math.max(E,I)+p+L,y:f+a/2},N),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,f=r.children,a=r.x,p=r.y,y=r.width,S=r.height,E=r.alwaysShowText,I=this.state,L=I.startX,N=I.endX,j=I.isTextActive,k=I.isSlideMoving,V=I.isTravellerMoving,K=I.isTravellerFocused;if(!i||!i.length||!Xn(a)||!Xn(p)||!Xn(y)||!Xn(S)||y<=0||S<=0)return null;var J=ri("recharts-brush",s),ie=tt.Children.count(f)===1,Q=mut("userSelect","none");return tt.createElement(Rs,{className:J,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:Q},this.renderBackground(),ie&&this.renderPanorama(),this.renderSlide(L,N),this.renderTravellerLayer(L,"startX"),this.renderTravellerLayer(N,"endX"),(j||k||V||K||E)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,f=r.width,a=r.height,p=r.stroke,y=Math.floor(s+a/2)-1;return tt.createElement(tt.Fragment,null,tt.createElement("rect",{x:i,y:s,width:f,height:a,fill:p,stroke:"none"}),tt.createElement("line",{x1:i+1,y1:y,x2:i+f-1,y2:y,fill:"none",stroke:"#fff"}),tt.createElement("line",{x1:i+1,y1:y+2,x2:i+f-1,y2:y+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return tt.isValidElement(r)?s=tt.cloneElement(r,i):Li(r)?s=r(i):s=t.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,f=r.width,a=r.x,p=r.travellerWidth,y=r.updateId,S=r.startIndex,E=r.endIndex;if(s!==i.prevData||y!==i.prevUpdateId)return u4({prevData:s,prevTravellerWidth:p,prevUpdateId:y,prevX:a,prevWidth:f},s&&s.length?Sut({data:s,width:f,x:a,travellerWidth:p,startIndex:S,endIndex:E}):{scale:null,scaleValues:null});if(i.scale&&(f!==i.prevWidth||a!==i.prevX||p!==i.prevTravellerWidth)){i.scale.range([a,a+f-p]);var I=i.scale.domain().map(function(L){return i.scale(L)});return{prevData:s,prevTravellerWidth:p,prevUpdateId:y,prevX:a,prevWidth:f,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:I}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,f=0,a=s-1;a-f>1;){var p=Math.floor((f+a)/2);r[p]>i?a=p:f=p}return i>=r[a]?a:f}}])})(be.PureComponent);Hf(AS,"displayName","Brush");Hf(AS,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var c4,Pie;function Tut(){if(Pie)return c4;Pie=1;var e=xq();function t(n,r){var i;return e(n,function(s,f,a){return i=r(s,f,a),!i}),!!i}return c4=t,c4}var f4,Rie;function Eut(){if(Rie)return f4;Rie=1;var e=nme(),t=h0(),n=Tut(),r=lf(),i=mk();function s(f,a,p){var y=r(f)?e:n;return p&&i(f,a,p)&&(a=void 0),y(f,t(a,3))}return f4=s,f4}var Aut=Eut();const Out=ma(Aut);var og=function(t,n){var r=t.alwaysShow,i=t.ifOverflow;return r&&(i="extendDomain"),i===n},h4,kie;function Cut(){if(kie)return h4;kie=1;var e=bme();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return h4=t,h4}var d4,Lie;function Mut(){if(Lie)return d4;Lie=1;var e=Cut(),t=_me(),n=h0();function r(i,s){var f={};return s=n(s,3),t(i,function(a,p,y){e(f,p,s(a,p,y))}),f}return d4=r,d4}var Dut=Mut();const Iut=ma(Dut);var p4,zie;function Put(){if(zie)return p4;zie=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(!n(t[r],r,t))return!1;return!0}return p4=e,p4}var m4,Nie;function Rut(){if(Nie)return m4;Nie=1;var e=xq();function t(n,r){var i=!0;return e(n,function(s,f,a){return i=!!r(s,f,a),i}),i}return m4=t,m4}var g4,Fie;function kut(){if(Fie)return g4;Fie=1;var e=Put(),t=Rut(),n=h0(),r=lf(),i=mk();function s(f,a,p){var y=r(f)?e:t;return p&&i(f,a,p)&&(a=void 0),y(f,n(a,3))}return g4=s,g4}var Lut=kut();const Yge=ma(Lut);var zut=["x","y"];function LA(e){"@babel/helpers - typeof";return LA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LA(e)}function vU(){return vU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vU.apply(this,arguments)}function Bie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bie(Object(n),!0).forEach(function(r){Nut(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nut(e,t,n){return t=Fut(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fut(e){var t=But(e,"string");return LA(t)=="symbol"?t:t+""}function But(e,t){if(LA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(LA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jut(e,t){if(e==null)return{};var n=Uut(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Uut(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function $ut(e,t){var n=e.x,r=e.y,i=jut(e,zut),s="".concat(n),f=parseInt(s,10),a="".concat(r),p=parseInt(a,10),y="".concat(t.height||i.height),S=parseInt(y,10),E="".concat(t.width||i.width),I=parseInt(E,10);return ZE(ZE(ZE(ZE(ZE({},t),i),f?{x:f}:{}),p?{y:p}:{}),{},{height:S,width:I,name:t.name,radius:t.radius})}function jie(e){return tt.createElement(eut,vU({shapeType:"rectangle",propTransformer:$ut,activeClassName:"recharts-active-bar"},e))}var Vut=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof t=="number")return t;var s=Xn(r)||ZZe(r);return s?t(r,i):(s||Dx(),n)}},qut=["value","background"],Wge;function OS(e){"@babel/helpers - typeof";return OS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OS(e)}function Hut(e,t){if(e==null)return{};var n=Gut(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Gut(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function SP(){return SP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SP.apply(this,arguments)}function Uie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Uie(Object(n),!0).forEach(function(r){$v(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zge(r.key),r)}}function Wut(e,t,n){return t&&$ie(e.prototype,t),n&&$ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xut(e,t,n){return t=TP(t),Zut(e,Xge()?Reflect.construct(t,n||[],TP(e).constructor):t.apply(e,n))}function Zut(e,t){if(t&&(OS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kut(e)}function Kut(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xge=function(){return!!e})()}function TP(e){return TP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TP(e)}function Qut(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bU(e,t)}function bU(e,t){return bU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bU(e,t)}function $v(e,t,n){return t=Zge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zge(e){var t=Jut(e,"string");return OS(t)=="symbol"?t:t+""}function Jut(e,t){if(OS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(OS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jO=(function(e){function t(){var n;Yut(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Xut(this,t,[].concat(i)),$v(n,"state",{isAnimationFinished:!1}),$v(n,"id",RO("recharts-bar-")),$v(n,"handleAnimationEnd",function(){var f=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),f&&f()}),$v(n,"handleAnimationStart",function(){var f=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),f&&f()}),n}return Qut(t,e),Wut(t,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,f=s.shape,a=s.dataKey,p=s.activeIndex,y=s.activeBar,S=aa(this.props,!1);return r&&r.map(function(E,I){var L=I===p,N=L?y:f,j=Xs(Xs(Xs({},S),E),{},{isActive:L,option:N,index:I,dataKey:a,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return tt.createElement(Rs,SP({className:"recharts-bar-rectangle"},FI(i.props,E,I),{key:"rectangle-".concat(E==null?void 0:E.x,"-").concat(E==null?void 0:E.y,"-").concat(E==null?void 0:E.value,"-").concat(I)}),tt.createElement(jie,j))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,f=i.layout,a=i.isAnimationActive,p=i.animationBegin,y=i.animationDuration,S=i.animationEasing,E=i.animationId,I=this.state.prevData;return tt.createElement(u_,{begin:p,duration:y,isActive:a,easing:S,from:{t:0},to:{t:1},key:"bar-".concat(E),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(L){var N=L.t,j=s.map(function(k,V){var K=I&&I[V];if(K){var J=fp(K.x,k.x),ie=fp(K.y,k.y),Q=fp(K.width,k.width),W=fp(K.height,k.height);return Xs(Xs({},k),{},{x:J(N),y:ie(N),width:Q(N),height:W(N)})}if(f==="horizontal"){var te=fp(0,k.height),X=te(N);return Xs(Xs({},k),{},{y:k.y+k.height-X,height:X})}var ae=fp(0,k.width),le=ae(N);return Xs(Xs({},k),{},{width:le})});return tt.createElement(Rs,null,r.renderRectanglesStatically(j))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,f=this.state.prevData;return s&&i&&i.length&&(!f||!Tk(f,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,f=i.dataKey,a=i.activeIndex,p=aa(this.props.background,!1);return s.map(function(y,S){y.value;var E=y.background,I=Hut(y,qut);if(!E)return null;var L=Xs(Xs(Xs(Xs(Xs({},I),{},{fill:"#eee"},E),p),FI(r.props,y,S)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:f,index:S,className:"recharts-bar-background-rectangle"});return tt.createElement(jie,SP({key:"background-bar-".concat(S),option:r.props.background,isActive:S===a},L))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,f=s.data,a=s.xAxis,p=s.yAxis,y=s.layout,S=s.children,E=td(S,BO);if(!E)return null;var I=y==="vertical"?f[0].height/2:f[0].width/2,L=function(k,V){var K=Array.isArray(k.value)?k.value[1]:k.value;return{x:k.x,y:k.y,value:K,errorVal:nh(k,V)}},N={clipPath:r?"url(#clipPath-".concat(i,")"):null};return tt.createElement(Rs,N,E.map(function(j){return tt.cloneElement(j,{key:"error-bar-".concat(i,"-").concat(j.props.dataKey),data:f,xAxis:a,yAxis:p,layout:y,offset:I,dataPointFormatter:L})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,f=r.className,a=r.xAxis,p=r.yAxis,y=r.left,S=r.top,E=r.width,I=r.height,L=r.isAnimationActive,N=r.background,j=r.id;if(i||!s||!s.length)return null;var k=this.state.isAnimationFinished,V=ri("recharts-bar",f),K=a&&a.allowDataOverflow,J=p&&p.allowDataOverflow,ie=K||J,Q=Gi(j)?this.id:j;return tt.createElement(Rs,{className:V},K||J?tt.createElement("defs",null,tt.createElement("clipPath",{id:"clipPath-".concat(Q)},tt.createElement("rect",{x:K?y:y-E/2,y:J?S:S-I/2,width:K?E:E*2,height:J?I:I*2}))):null,tt.createElement(Rs,{className:"recharts-bar-rectangles",clipPath:ie?"url(#clipPath-".concat(Q,")"):null},N?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ie,Q),(!L||k)&&Xv.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(be.PureComponent);Wge=jO;$v(jO,"displayName","Bar");$v(jO,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!hT.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});$v(jO,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,s=e.xAxis,f=e.yAxis,a=e.xAxisTicks,p=e.yAxisTicks,y=e.stackedData,S=e.dataStartIndex,E=e.displayedData,I=e.offset,L=_at(r,n);if(!L)return null;var N=t.layout,j=n.type.defaultProps,k=j!==void 0?Xs(Xs({},j),n.props):n.props,V=k.dataKey,K=k.children,J=k.minPointSize,ie=N==="horizontal"?f:s,Q=y?ie.scale.domain():null,W=Aat({numericAxis:ie}),te=td(K,Ome),X=E.map(function(ae,le){var ge,ye,De,He,Be,Ee;y?ge=vat(y[S+le],Q):(ge=nh(ae,V),Array.isArray(ge)||(ge=[W,ge]));var Fe=Vut(J,Wge.defaultProps.minPointSize)(ge[1],le);if(N==="horizontal"){var at,yt=[f.scale(ge[0]),f.scale(ge[1])],je=yt[0],Ke=yt[1];ye=Ire({axis:s,ticks:a,bandSize:i,offset:L.offset,entry:ae,index:le}),De=(at=Ke??je)!==null&&at!==void 0?at:void 0,He=L.size;var it=je-Ke;if(Be=Number.isNaN(it)?0:it,Ee={x:ye,y:f.y,width:He,height:f.height},Math.abs(Fe)>0&&Math.abs(Be)<Math.abs(Fe)){var Pe=yp(Be||Fe)*(Math.abs(Fe)-Math.abs(Be));De-=Pe,Be+=Pe}}else{var jt=[s.scale(ge[0]),s.scale(ge[1])],sn=jt[0],dn=jt[1];if(ye=sn,De=Ire({axis:f,ticks:p,bandSize:i,offset:L.offset,entry:ae,index:le}),He=dn-sn,Be=L.size,Ee={x:s.x,y:De,width:s.width,height:Be},Math.abs(Fe)>0&&Math.abs(He)<Math.abs(Fe)){var Tn=yp(He||Fe)*(Math.abs(Fe)-Math.abs(He));He+=Tn}}return Xs(Xs(Xs({},ae),{},{x:ye,y:De,width:He,height:Be,value:y?ge:ge[1],payload:ae,background:Ee},te&&te[le]&&te[le].props),{},{tooltipPayload:[Pge(n,ae)],tooltipPosition:{x:ye+He/2,y:De+Be/2}})});return Xs({data:X,layout:N},I)});function zA(e){"@babel/helpers - typeof";return zA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zA(e)}function ect(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kge(r.key),r)}}function tct(e,t,n){return t&&Vie(e.prototype,t),n&&Vie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qie(Object(n),!0).forEach(function(r){Mk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mk(e,t,n){return t=Kge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kge(e){var t=nct(e,"string");return zA(t)=="symbol"?t:t+""}function nct(e,t){if(zA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rct=function(t,n,r,i,s){var f=t.width,a=t.height,p=t.layout,y=t.children,S=Object.keys(n),E={left:r.left,leftMirror:r.left,right:f-r.right,rightMirror:f-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},I=!!Gf(y,jO);return S.reduce(function(L,N){var j=n[N],k=j.orientation,V=j.domain,K=j.padding,J=K===void 0?{}:K,ie=j.mirror,Q=j.reversed,W="".concat(k).concat(ie?"Mirror":""),te,X,ae,le,ge;if(j.type==="number"&&(j.padding==="gap"||j.padding==="no-gap")){var ye=V[1]-V[0],De=1/0,He=j.categoricalDomain.sort(JZe);if(He.forEach(function(jt,sn){sn>0&&(De=Math.min((jt||0)-(He[sn-1]||0),De))}),Number.isFinite(De)){var Be=De/ye,Ee=j.layout==="vertical"?r.height:r.width;if(j.padding==="gap"&&(te=Be*Ee/2),j.padding==="no-gap"){var Fe=Cx(t.barCategoryGap,Be*Ee),at=Be*Ee/2;te=at-Fe-(at-Fe)/Ee*Fe}}}i==="xAxis"?X=[r.left+(J.left||0)+(te||0),r.left+r.width-(J.right||0)-(te||0)]:i==="yAxis"?X=p==="horizontal"?[r.top+r.height-(J.bottom||0),r.top+(J.top||0)]:[r.top+(J.top||0)+(te||0),r.top+r.height-(J.bottom||0)-(te||0)]:X=j.range,Q&&(X=[X[1],X[0]]);var yt=gat(j,s,I),je=yt.scale,Ke=yt.realScaleType;je.domain(V).range(X),yat(je);var it=Eat(je,lp(lp({},j),{},{realScaleType:Ke}));i==="xAxis"?(ge=k==="top"&&!ie||k==="bottom"&&ie,ae=r.left,le=E[W]-ge*j.height):i==="yAxis"&&(ge=k==="left"&&!ie||k==="right"&&ie,ae=E[W]-ge*j.width,le=r.top);var Pe=lp(lp(lp({},j),it),{},{realScaleType:Ke,x:ae,y:le,scale:je,width:i==="xAxis"?r.width:j.width,height:i==="yAxis"?r.height:j.height});return Pe.bandSize=cP(Pe,it),!j.hide&&i==="xAxis"?E[W]+=(ge?-1:1)*Pe.height:j.hide||(E[W]+=(ge?-1:1)*Pe.width),lp(lp({},L),{},Mk({},N,Pe))},{})},Qge=function(t,n){var r=t.x,i=t.y,s=n.x,f=n.y;return{x:Math.min(r,s),y:Math.min(i,f),width:Math.abs(s-r),height:Math.abs(f-i)}},ict=function(t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2;return Qge({x:n,y:r},{x:i,y:s})},Jge=(function(){function e(t){ect(this,e),this.scale=t}return tct(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var f=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+f}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(i){var p=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+p}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])})();Mk(Jge,"EPS",1e-4);var Kq=function(t){var n=Object.keys(t).reduce(function(r,i){return lp(lp({},r),{},Mk({},i,Jge.create(t[i])))},{});return lp(lp({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=s.bandAware,a=s.position;return Iut(i,function(p,y){return n[y].apply(p,{bandAware:f,position:a})})},isInRange:function(i){return Yge(i,function(s,f){return n[f].isInRange(s)})}})};function act(e){return(e%180+180)%180}var oct=function(t){var n=t.width,r=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=act(i),f=s*Math.PI/180,a=Math.atan(r/n),p=f>a&&f<Math.PI-a?r/Math.sin(f):n/Math.cos(f);return Math.abs(p)},y4,Hie;function sct(){if(Hie)return y4;Hie=1;var e=h0(),t=kO(),n=dk();function r(i){return function(s,f,a){var p=Object(s);if(!t(s)){var y=e(f,3);s=n(s),f=function(E){return y(p[E],E,p)}}var S=i(s,f,a);return S>-1?p[y?s[S]:S]:void 0}}return y4=r,y4}var _4,Gie;function lct(){if(Gie)return _4;Gie=1;var e=Vge();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return _4=t,_4}var v4,Yie;function uct(){if(Yie)return v4;Yie=1;var e=dme(),t=h0(),n=lct(),r=Math.max;function i(s,f,a){var p=s==null?0:s.length;if(!p)return-1;var y=a==null?0:n(a);return y<0&&(y=r(p+y,0)),e(s,t(f,3),y)}return v4=i,v4}var b4,Wie;function cct(){if(Wie)return b4;Wie=1;var e=sct(),t=uct(),n=e(t);return b4=n,b4}var fct=cct();const hct=ma(fct);var dct=Mpe();const pct=ma(dct);var mct=pct(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Qq=be.createContext(void 0),Jq=be.createContext(void 0),eye=be.createContext(void 0),tye=be.createContext({}),nye=be.createContext(void 0),rye=be.createContext(0),iye=be.createContext(0),Xie=function(t){var n=t.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,f=t.clipPathId,a=t.children,p=t.width,y=t.height,S=mct(s);return tt.createElement(Qq.Provider,{value:r},tt.createElement(Jq.Provider,{value:i},tt.createElement(tye.Provider,{value:s},tt.createElement(eye.Provider,{value:S},tt.createElement(nye.Provider,{value:f},tt.createElement(rye.Provider,{value:y},tt.createElement(iye.Provider,{value:p},a)))))))},gct=function(){return be.useContext(nye)},aye=function(t){var n=be.useContext(Qq);n==null&&Dx();var r=n[t];return r==null&&Dx(),r},yct=function(){var t=be.useContext(Qq);return Nv(t)},_ct=function(){var t=be.useContext(Jq),n=hct(t,function(r){return Yge(r.domain,Number.isFinite)});return n||Nv(t)},oye=function(t){var n=be.useContext(Jq);n==null&&Dx();var r=n[t];return r==null&&Dx(),r},vct=function(){var t=be.useContext(eye);return t},bct=function(){return be.useContext(tye)},e9=function(){return be.useContext(iye)},t9=function(){return be.useContext(rye)};function CS(e){"@babel/helpers - typeof";return CS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CS(e)}function xct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lye(r.key),r)}}function Sct(e,t,n){return t&&wct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tct(e,t,n){return t=EP(t),Ect(e,sye()?Reflect.construct(t,n||[],EP(e).constructor):t.apply(e,n))}function Ect(e,t){if(t&&(CS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Act(e)}function Act(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sye=function(){return!!e})()}function EP(e){return EP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},EP(e)}function Oct(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xU(e,t)}function xU(e,t){return xU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xU(e,t)}function Zie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zie(Object(n),!0).forEach(function(r){n9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n9(e,t,n){return t=lye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lye(e){var t=Cct(e,"string");return CS(t)=="symbol"?t:t+""}function Cct(e,t){if(CS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(CS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Mct(e,t){return Rct(e)||Pct(e,t)||Ict(e,t)||Dct()}function Dct(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ict(e,t){if(e){if(typeof e=="string")return Qie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qie(e,t)}}function Qie(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pct(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function Rct(e){if(Array.isArray(e))return e}function wU(){return wU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wU.apply(this,arguments)}var kct=function(t,n){var r;return tt.isValidElement(t)?r=tt.cloneElement(t,n):Li(t)?r=t(n):r=tt.createElement("line",wU({},n,{className:"recharts-reference-line-line"})),r},Lct=function(t,n,r,i,s,f,a,p,y){var S=s.x,E=s.y,I=s.width,L=s.height;if(r){var N=y.y,j=t.y.apply(N,{position:f});if(og(y,"discard")&&!t.y.isInRange(j))return null;var k=[{x:S+I,y:j},{x:S,y:j}];return p==="left"?k.reverse():k}if(n){var V=y.x,K=t.x.apply(V,{position:f});if(og(y,"discard")&&!t.x.isInRange(K))return null;var J=[{x:K,y:E+L},{x:K,y:E}];return a==="top"?J.reverse():J}if(i){var ie=y.segment,Q=ie.map(function(W){return t.apply(W,{position:f})});return og(y,"discard")&&Out(Q,function(W){return!t.isInRange(W)})?null:Q}return null};function zct(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,s=e.yAxisId,f=e.shape,a=e.className,p=e.alwaysShow,y=gct(),S=aye(i),E=oye(s),I=vct();if(!y||!I)return null;Wy(p===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var L=Kq({x:S.scale,y:E.scale}),N=vl(t),j=vl(n),k=r&&r.length===2,V=Lct(L,N,j,k,I,e.position,S.orientation,E.orientation,e);if(!V)return null;var K=Mct(V,2),J=K[0],ie=J.x,Q=J.y,W=K[1],te=W.x,X=W.y,ae=og(e,"hidden")?"url(#".concat(y,")"):void 0,le=Kie(Kie({clipPath:ae},aa(e,!0)),{},{x1:ie,y1:Q,x2:te,y2:X});return tt.createElement(Rs,{className:ri("recharts-reference-line",a)},kct(f,le),Su.renderCallByParent(e,ict({x1:ie,y1:Q,x2:te,y2:X})))}var r9=(function(e){function t(){return xct(this,t),Tct(this,t,arguments)}return Oct(t,e),Sct(t,[{key:"render",value:function(){return tt.createElement(zct,this.props)}}])})(tt.Component);n9(r9,"displayName","ReferenceLine");n9(r9,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function SU(){return SU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SU.apply(this,arguments)}function MS(e){"@babel/helpers - typeof";return MS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MS(e)}function Jie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jie(Object(n),!0).forEach(function(r){Dk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cye(r.key),r)}}function Bct(e,t,n){return t&&Fct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jct(e,t,n){return t=AP(t),Uct(e,uye()?Reflect.construct(t,n||[],AP(e).constructor):t.apply(e,n))}function Uct(e,t){if(t&&(MS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ct(e)}function $ct(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uye=function(){return!!e})()}function AP(e){return AP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AP(e)}function Vct(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TU(e,t)}function TU(e,t){return TU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},TU(e,t)}function Dk(e,t,n){return t=cye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cye(e){var t=qct(e,"string");return MS(t)=="symbol"?t:t+""}function qct(e,t){if(MS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(MS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Hct=function(t){var n=t.x,r=t.y,i=t.xAxis,s=t.yAxis,f=Kq({x:i.scale,y:s.scale}),a=f.apply({x:n,y:r},{bandAware:!0});return og(t,"discard")&&!f.isInRange(a)?null:a},Ik=(function(e){function t(){return Nct(this,t),jct(this,t,arguments)}return Vct(t,e),Bct(t,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,f=r.r,a=r.alwaysShow,p=r.clipPathId,y=vl(i),S=vl(s);if(Wy(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!y||!S)return null;var E=Hct(this.props);if(!E)return null;var I=E.x,L=E.y,N=this.props,j=N.shape,k=N.className,V=og(this.props,"hidden")?"url(#".concat(p,")"):void 0,K=eae(eae({clipPath:V},aa(this.props,!0)),{},{cx:I,cy:L});return tt.createElement(Rs,{className:ri("recharts-reference-dot",k)},t.renderDot(j,K),Su.renderCallByParent(this.props,{x:I-f,y:L-f,width:2*f,height:2*f}))}}])})(tt.Component);Dk(Ik,"displayName","ReferenceDot");Dk(Ik,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Dk(Ik,"renderDot",function(e,t){var n;return tt.isValidElement(e)?n=tt.cloneElement(e,t):Li(e)?n=e(t):n=tt.createElement(Zq,SU({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function EU(){return EU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EU.apply(this,arguments)}function DS(e){"@babel/helpers - typeof";return DS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DS(e)}function tae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tae(Object(n),!0).forEach(function(r){Pk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hye(r.key),r)}}function Wct(e,t,n){return t&&Yct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xct(e,t,n){return t=OP(t),Zct(e,fye()?Reflect.construct(t,n||[],OP(e).constructor):t.apply(e,n))}function Zct(e,t){if(t&&(DS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kct(e)}function Kct(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fye=function(){return!!e})()}function OP(e){return OP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},OP(e)}function Qct(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AU(e,t)}function AU(e,t){return AU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},AU(e,t)}function Pk(e,t,n){return t=hye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hye(e){var t=Jct(e,"string");return DS(t)=="symbol"?t:t+""}function Jct(e,t){if(DS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(DS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var eft=function(t,n,r,i,s){var f=s.x1,a=s.x2,p=s.y1,y=s.y2,S=s.xAxis,E=s.yAxis;if(!S||!E)return null;var I=Kq({x:S.scale,y:E.scale}),L={x:t?I.x.apply(f,{position:"start"}):I.x.rangeMin,y:r?I.y.apply(p,{position:"start"}):I.y.rangeMin},N={x:n?I.x.apply(a,{position:"end"}):I.x.rangeMax,y:i?I.y.apply(y,{position:"end"}):I.y.rangeMax};return og(s,"discard")&&(!I.isInRange(L)||!I.isInRange(N))?null:Qge(L,N)},Rk=(function(e){function t(){return Gct(this,t),Xct(this,t,arguments)}return Qct(t,e),Wct(t,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,f=r.y1,a=r.y2,p=r.className,y=r.alwaysShow,S=r.clipPathId;Wy(y===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var E=vl(i),I=vl(s),L=vl(f),N=vl(a),j=this.props.shape;if(!E&&!I&&!L&&!N&&!j)return null;var k=eft(E,I,L,N,this.props);if(!k&&!j)return null;var V=og(this.props,"hidden")?"url(#".concat(S,")"):void 0;return tt.createElement(Rs,{className:ri("recharts-reference-area",p)},t.renderRect(j,nae(nae({clipPath:V},aa(this.props,!0)),k)),Su.renderCallByParent(this.props,k))}}])})(tt.Component);Pk(Rk,"displayName","ReferenceArea");Pk(Rk,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Pk(Rk,"renderRect",function(e,t){var n;return tt.isValidElement(e)?n=tt.cloneElement(e,t):Li(e)?n=e(t):n=tt.createElement(Xq,EU({},t,{className:"recharts-reference-area-rect"})),n});function dye(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function tft(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return oct(r,n)}function nft(e,t,n){var r=n==="width",i=e.x,s=e.y,f=e.width,a=e.height;return t===1?{start:r?i:s,end:r?i+f:s+a}:{start:r?i+f:s+a,end:r?i:s}}function CP(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function rft(e,t){return dye(e,t+1)}function ift(e,t,n,r,i){for(var s=(r||[]).slice(),f=t.start,a=t.end,p=0,y=1,S=f,E=function(){var N=r==null?void 0:r[p];if(N===void 0)return{v:dye(r,y)};var j=p,k,V=function(){return k===void 0&&(k=n(N,j)),k},K=N.coordinate,J=p===0||CP(e,K,V,S,a);J||(p=0,S=f,y+=1),J&&(S=K+e*(V()/2+i),p+=y)},I;y<=s.length;)if(I=E(),I)return I.v;return[]}function NA(e){"@babel/helpers - typeof";return NA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NA(e)}function rae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rae(Object(n),!0).forEach(function(r){aft(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aft(e,t,n){return t=oft(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oft(e){var t=sft(e,"string");return NA(t)=="symbol"?t:t+""}function sft(e,t){if(NA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(NA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lft(e,t,n,r,i){for(var s=(r||[]).slice(),f=s.length,a=t.start,p=t.end,y=function(I){var L=s[I],N,j=function(){return N===void 0&&(N=n(L,I)),N};if(I===f-1){var k=e*(L.coordinate+e*j()/2-p);s[I]=L=xu(xu({},L),{},{tickCoord:k>0?L.coordinate-k*e:L.coordinate})}else s[I]=L=xu(xu({},L),{},{tickCoord:L.coordinate});var V=CP(e,L.tickCoord,j,a,p);V&&(p=L.tickCoord-e*(j()/2+i),s[I]=xu(xu({},L),{},{isShow:!0}))},S=f-1;S>=0;S--)y(S);return s}function uft(e,t,n,r,i,s){var f=(r||[]).slice(),a=f.length,p=t.start,y=t.end;if(s){var S=r[a-1],E=n(S,a-1),I=e*(S.coordinate+e*E/2-y);f[a-1]=S=xu(xu({},S),{},{tickCoord:I>0?S.coordinate-I*e:S.coordinate});var L=CP(e,S.tickCoord,function(){return E},p,y);L&&(y=S.tickCoord-e*(E/2+i),f[a-1]=xu(xu({},S),{},{isShow:!0}))}for(var N=s?a-1:a,j=function(K){var J=f[K],ie,Q=function(){return ie===void 0&&(ie=n(J,K)),ie};if(K===0){var W=e*(J.coordinate-e*Q()/2-p);f[K]=J=xu(xu({},J),{},{tickCoord:W<0?J.coordinate-W*e:J.coordinate})}else f[K]=J=xu(xu({},J),{},{tickCoord:J.coordinate});var te=CP(e,J.tickCoord,Q,p,y);te&&(p=J.tickCoord+e*(Q()/2+i),f[K]=xu(xu({},J),{},{isShow:!0}))},k=0;k<N;k++)j(k);return f}function i9(e,t,n){var r=e.tick,i=e.ticks,s=e.viewBox,f=e.minTickGap,a=e.orientation,p=e.interval,y=e.tickFormatter,S=e.unit,E=e.angle;if(!i||!i.length||!r)return[];if(Xn(p)||hT.isSsr)return rft(i,typeof p=="number"&&Xn(p)?p:0);var I=[],L=a==="top"||a==="bottom"?"width":"height",N=S&&L==="width"?w2(S,{fontSize:t,letterSpacing:n}):{width:0,height:0},j=function(J,ie){var Q=Li(y)?y(J.value,ie):J.value;return L==="width"?tft(w2(Q,{fontSize:t,letterSpacing:n}),N,E):w2(Q,{fontSize:t,letterSpacing:n})[L]},k=i.length>=2?yp(i[1].coordinate-i[0].coordinate):1,V=nft(s,k,L);return p==="equidistantPreserveStart"?ift(k,V,j,i,f):(p==="preserveStart"||p==="preserveStartEnd"?I=uft(k,V,j,i,f,p==="preserveStartEnd"):I=lft(k,V,j,i,f),I.filter(function(K){return K.isShow}))}var cft=["viewBox"],fft=["viewBox"],hft=["ticks"];function IS(e){"@babel/helpers - typeof";return IS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IS(e)}function Sw(){return Sw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sw.apply(this,arguments)}function iae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iae(Object(n),!0).forEach(function(r){a9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function x4(e,t){if(e==null)return{};var n=dft(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function dft(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function pft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mye(r.key),r)}}function mft(e,t,n){return t&&aae(e.prototype,t),n&&aae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gft(e,t,n){return t=MP(t),yft(e,pye()?Reflect.construct(t,n||[],MP(e).constructor):t.apply(e,n))}function yft(e,t){if(t&&(IS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ft(e)}function _ft(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pye=function(){return!!e})()}function MP(e){return MP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},MP(e)}function vft(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OU(e,t)}function OU(e,t){return OU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OU(e,t)}function a9(e,t,n){return t=mye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mye(e){var t=bft(e,"string");return IS(t)=="symbol"?t:t+""}function bft(e,t){if(IS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(IS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gT=(function(e){function t(n){var r;return pft(this,t),r=gft(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return vft(t,e),mft(t,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,f=x4(r,cft),a=this.props,p=a.viewBox,y=x4(a,fft);return!zw(s,p)||!zw(f,y)||!zw(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,f=i.y,a=i.width,p=i.height,y=i.orientation,S=i.tickSize,E=i.mirror,I=i.tickMargin,L,N,j,k,V,K,J=E?-1:1,ie=r.tickSize||S,Q=Xn(r.tickCoord)?r.tickCoord:r.coordinate;switch(y){case"top":L=N=r.coordinate,k=f+ +!E*p,j=k-J*ie,K=j-J*I,V=Q;break;case"left":j=k=r.coordinate,N=s+ +!E*a,L=N-J*ie,V=L-J*I,K=Q;break;case"right":j=k=r.coordinate,N=s+ +E*a,L=N+J*ie,V=L+J*I,K=Q;break;default:L=N=r.coordinate,k=f+ +E*p,j=k+J*ie,K=j+J*I,V=Q;break}return{line:{x1:L,y1:j,x2:N,y2:k},tick:{x:V,y:K}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,f;switch(i){case"left":f=s?"start":"end";break;case"right":f=s?"end":"start";break;default:f="middle";break}return f}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,f="end";switch(i){case"left":case"right":f="middle";break;case"top":f=s?"start":"end";break;default:f=s?"end":"start";break}return f}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,f=r.width,a=r.height,p=r.orientation,y=r.mirror,S=r.axisLine,E=gl(gl(gl({},aa(this.props,!1)),aa(S,!1)),{},{fill:"none"});if(p==="top"||p==="bottom"){var I=+(p==="top"&&!y||p==="bottom"&&y);E=gl(gl({},E),{},{x1:i,y1:s+I*a,x2:i+f,y2:s+I*a})}else{var L=+(p==="left"&&!y||p==="right"&&y);E=gl(gl({},E),{},{x1:i+L*f,y1:s,x2:i+L*f,y2:s+a})}return tt.createElement("line",Sw({},E,{className:ri("recharts-cartesian-axis-line",ed(S,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var f=this,a=this.props,p=a.tickLine,y=a.stroke,S=a.tick,E=a.tickFormatter,I=a.unit,L=i9(gl(gl({},this.props),{},{ticks:r}),i,s),N=this.getTickTextAnchor(),j=this.getTickVerticalAnchor(),k=aa(this.props,!1),V=aa(S,!1),K=gl(gl({},k),{},{fill:"none"},aa(p,!1)),J=L.map(function(ie,Q){var W=f.getTickLineCoord(ie),te=W.line,X=W.tick,ae=gl(gl(gl(gl({textAnchor:N,verticalAnchor:j},k),{},{stroke:"none",fill:y},V),X),{},{index:Q,payload:ie,visibleTicksCount:L.length,tickFormatter:E});return tt.createElement(Rs,Sw({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ie.value,"-").concat(ie.coordinate,"-").concat(ie.tickCoord)},FI(f.props,ie,Q)),p&&tt.createElement("line",Sw({},K,te,{className:ri("recharts-cartesian-axis-tick-line",ed(p,"className"))})),S&&t.renderTickItem(S,ae,"".concat(Li(E)?E(ie.value,Q):ie.value).concat(I||"")))});return tt.createElement("g",{className:"recharts-cartesian-axis-ticks"},J)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,f=i.width,a=i.height,p=i.ticksGenerator,y=i.className,S=i.hide;if(S)return null;var E=this.props,I=E.ticks,L=x4(E,hft),N=I;return Li(p)&&(N=I&&I.length>0?p(this.props):p(L)),f<=0||a<=0||!N||!N.length?null:tt.createElement(Rs,{className:ri("recharts-cartesian-axis",y),ref:function(k){r.layerReference=k}},s&&this.renderAxisLine(),this.renderTicks(N,this.state.fontSize,this.state.letterSpacing),Su.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var f,a=ri(i.className,"recharts-cartesian-axis-tick-value");return tt.isValidElement(r)?f=tt.cloneElement(r,gl(gl({},i),{},{className:a})):Li(r)?f=r(gl(gl({},i),{},{className:a})):f=tt.createElement(XI,Sw({},i,{className:"recharts-cartesian-axis-tick-value"}),s),f}}])})(be.Component);a9(gT,"displayName","CartesianAxis");a9(gT,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var xft=["x1","y1","x2","y2","key"],wft=["offset"];function Ix(e){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ix(e)}function oae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oae(Object(n),!0).forEach(function(r){Sft(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sft(e,t,n){return t=Tft(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tft(e){var t=Eft(e,"string");return Ix(t)=="symbol"?t:t+""}function Eft(e,t){if(Ix(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ix(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qb(){return Qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qb.apply(this,arguments)}function sae(e,t){if(e==null)return{};var n=Aft(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Aft(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Oft=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,s=t.y,f=t.width,a=t.height,p=t.ry;return tt.createElement("rect",{x:i,y:s,ry:p,width:f,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function gye(e,t){var n;if(tt.isValidElement(e))n=tt.cloneElement(e,t);else if(Li(e))n=e(t);else{var r=t.x1,i=t.y1,s=t.x2,f=t.y2,a=t.key,p=sae(t,xft),y=aa(p,!1);y.offset;var S=sae(y,wft);n=tt.createElement("line",Qb({},S,{x1:r,y1:i,x2:s,y2:f,fill:"none",key:a}))}return n}function Cft(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,s=e.horizontalPoints;if(!i||!s||!s.length)return null;var f=s.map(function(a,p){var y=Tu(Tu({},e),{},{x1:t,y1:a,x2:t+n,y2:a,key:"line-".concat(p),index:p});return gye(i,y)});return tt.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function Mft(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,s=e.verticalPoints;if(!i||!s||!s.length)return null;var f=s.map(function(a,p){var y=Tu(Tu({},e),{},{x1:a,y1:t,x2:a,y2:t+n,key:"line-".concat(p),index:p});return gye(i,y)});return tt.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function Dft(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,s=e.width,f=e.height,a=e.horizontalPoints,p=e.horizontal,y=p===void 0?!0:p;if(!y||!t||!t.length)return null;var S=a.map(function(I){return Math.round(I+i-i)}).sort(function(I,L){return I-L});i!==S[0]&&S.unshift(0);var E=S.map(function(I,L){var N=!S[L+1],j=N?i+f-I:S[L+1]-I;if(j<=0)return null;var k=L%t.length;return tt.createElement("rect",{key:"react-".concat(L),y:I,x:r,height:j,width:s,stroke:"none",fill:t[k],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return tt.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},E)}function Ift(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,s=e.x,f=e.y,a=e.width,p=e.height,y=e.verticalPoints;if(!n||!r||!r.length)return null;var S=y.map(function(I){return Math.round(I+s-s)}).sort(function(I,L){return I-L});s!==S[0]&&S.unshift(0);var E=S.map(function(I,L){var N=!S[L+1],j=N?s+a-I:S[L+1]-I;if(j<=0)return null;var k=L%r.length;return tt.createElement("rect",{key:"react-".concat(L),x:I,y:f,width:j,height:p,stroke:"none",fill:r[k],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return tt.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},E)}var Pft=function(t,n){var r=t.xAxis,i=t.width,s=t.height,f=t.offset;return Dge(i9(Tu(Tu(Tu({},gT.defaultProps),r),{},{ticks:zy(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),f.left,f.left+f.width,n)},Rft=function(t,n){var r=t.yAxis,i=t.width,s=t.height,f=t.offset;return Dge(i9(Tu(Tu(Tu({},gT.defaultProps),r),{},{ticks:zy(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),f.top,f.top+f.height,n)},hw={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function yye(e){var t,n,r,i,s,f,a=e9(),p=t9(),y=bct(),S=Tu(Tu({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:hw.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:hw.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:hw.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:hw.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:hw.vertical,verticalFill:(f=e.verticalFill)!==null&&f!==void 0?f:hw.verticalFill,x:Xn(e.x)?e.x:y.left,y:Xn(e.y)?e.y:y.top,width:Xn(e.width)?e.width:y.width,height:Xn(e.height)?e.height:y.height}),E=S.x,I=S.y,L=S.width,N=S.height,j=S.syncWithTicks,k=S.horizontalValues,V=S.verticalValues,K=yct(),J=_ct();if(!Xn(L)||L<=0||!Xn(N)||N<=0||!Xn(E)||E!==+E||!Xn(I)||I!==+I)return null;var ie=S.verticalCoordinatesGenerator||Pft,Q=S.horizontalCoordinatesGenerator||Rft,W=S.horizontalPoints,te=S.verticalPoints;if((!W||!W.length)&&Li(Q)){var X=k&&k.length,ae=Q({yAxis:J?Tu(Tu({},J),{},{ticks:X?k:J.ticks}):void 0,width:a,height:p,offset:y},X?!0:j);Wy(Array.isArray(ae),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ix(ae),"]")),Array.isArray(ae)&&(W=ae)}if((!te||!te.length)&&Li(ie)){var le=V&&V.length,ge=ie({xAxis:K?Tu(Tu({},K),{},{ticks:le?V:K.ticks}):void 0,width:a,height:p,offset:y},le?!0:j);Wy(Array.isArray(ge),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ix(ge),"]")),Array.isArray(ge)&&(te=ge)}return tt.createElement("g",{className:"recharts-cartesian-grid"},tt.createElement(Oft,{fill:S.fill,fillOpacity:S.fillOpacity,x:S.x,y:S.y,width:S.width,height:S.height,ry:S.ry}),tt.createElement(Cft,Qb({},S,{offset:y,horizontalPoints:W,xAxis:K,yAxis:J})),tt.createElement(Mft,Qb({},S,{offset:y,verticalPoints:te,xAxis:K,yAxis:J})),tt.createElement(Dft,Qb({},S,{horizontalPoints:W})),tt.createElement(Ift,Qb({},S,{verticalPoints:te})))}yye.displayName="CartesianGrid";var kft=["type","layout","connectNulls","ref"],Lft=["key"];function PS(e){"@babel/helpers - typeof";return PS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PS(e)}function lae(e,t){if(e==null)return{};var n=zft(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zft(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function A2(){return A2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A2.apply(this,arguments)}function uae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uae(Object(n),!0).forEach(function(r){up(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dw(e){return jft(e)||Bft(e)||Fft(e)||Nft()}function Nft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fft(e,t){if(e){if(typeof e=="string")return CU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CU(e,t)}}function Bft(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jft(e){if(Array.isArray(e))return CU(e)}function CU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vye(r.key),r)}}function $ft(e,t,n){return t&&cae(e.prototype,t),n&&cae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vft(e,t,n){return t=DP(t),qft(e,_ye()?Reflect.construct(t,n||[],DP(e).constructor):t.apply(e,n))}function qft(e,t){if(t&&(PS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hft(e)}function Hft(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_ye=function(){return!!e})()}function DP(e){return DP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},DP(e)}function Gft(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MU(e,t)}function MU(e,t){return MU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MU(e,t)}function up(e,t,n){return t=vye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vye(e){var t=Yft(e,"string");return PS(t)=="symbol"?t:t+""}function Yft(e,t){if(PS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(PS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var UO=(function(e){function t(){var n;Uft(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Vft(this,t,[].concat(i)),up(n,"state",{isAnimationFinished:!0,totalLength:0}),up(n,"generateSimpleStrokeDasharray",function(f,a){return"".concat(a,"px ").concat(f-a,"px")}),up(n,"getStrokeDasharray",function(f,a,p){var y=p.reduce(function(V,K){return V+K});if(!y)return n.generateSimpleStrokeDasharray(a,f);for(var S=Math.floor(f/y),E=f%y,I=a-f,L=[],N=0,j=0;N<p.length;j+=p[N],++N)if(j+p[N]>E){L=[].concat(dw(p.slice(0,N)),[E-j]);break}var k=L.length%2===0?[0,I]:[I];return[].concat(dw(t.repeat(p,S)),dw(L),k).map(function(V){return"".concat(V,"px")}).join(", ")}),up(n,"id",RO("recharts-line-")),up(n,"pathRef",function(f){n.mainCurve=f}),up(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),up(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Gft(t,e),$ft(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,f=s.points,a=s.xAxis,p=s.yAxis,y=s.layout,S=s.children,E=td(S,BO);if(!E)return null;var I=function(j,k){return{x:j.x,y:j.y,value:j.value,errorVal:nh(j.payload,k)}},L={clipPath:r?"url(#clipPath-".concat(i,")"):null};return tt.createElement(Rs,L,E.map(function(N){return tt.cloneElement(N,{key:"bar-".concat(N.props.dataKey),data:f,xAxis:a,yAxis:p,layout:y,dataPointFormatter:I})}))}},{key:"renderDots",value:function(r,i,s){var f=this.props.isAnimationActive;if(f&&!this.state.isAnimationFinished)return null;var a=this.props,p=a.dot,y=a.points,S=a.dataKey,E=aa(this.props,!1),I=aa(p,!0),L=y.map(function(j,k){var V=qf(qf(qf({key:"dot-".concat(k),r:3},E),I),{},{index:k,cx:j.x,cy:j.y,value:j.value,dataKey:S,payload:j.payload,points:y});return t.renderDotItem(p,V)}),N={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return tt.createElement(Rs,A2({className:"recharts-line-dots",key:"dots"},N),L)}},{key:"renderCurveStatically",value:function(r,i,s,f){var a=this.props,p=a.type,y=a.layout,S=a.connectNulls;a.ref;var E=lae(a,kft),I=qf(qf(qf({},aa(E,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},f),{},{type:p,layout:y,connectNulls:S});return tt.createElement(oU,A2({},I,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,f=this.props,a=f.points,p=f.strokeDasharray,y=f.isAnimationActive,S=f.animationBegin,E=f.animationDuration,I=f.animationEasing,L=f.animationId,N=f.animateNewValues,j=f.width,k=f.height,V=this.state,K=V.prevPoints,J=V.totalLength;return tt.createElement(u_,{begin:S,duration:E,isActive:y,easing:I,from:{t:0},to:{t:1},key:"line-".concat(L),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(ie){var Q=ie.t;if(K){var W=K.length/a.length,te=a.map(function(ye,De){var He=Math.floor(De*W);if(K[He]){var Be=K[He],Ee=fp(Be.x,ye.x),Fe=fp(Be.y,ye.y);return qf(qf({},ye),{},{x:Ee(Q),y:Fe(Q)})}if(N){var at=fp(j*2,ye.x),yt=fp(k/2,ye.y);return qf(qf({},ye),{},{x:at(Q),y:yt(Q)})}return qf(qf({},ye),{},{x:ye.x,y:ye.y})});return s.renderCurveStatically(te,r,i)}var X=fp(0,J),ae=X(Q),le;if(p){var ge="".concat(p).split(/[,\s]+/gim).map(function(ye){return parseFloat(ye)});le=s.getStrokeDasharray(ae,J,ge)}else le=s.generateSimpleStrokeDasharray(J,ae);return s.renderCurveStatically(a,r,i,{strokeDasharray:le})})}},{key:"renderCurve",value:function(r,i){var s=this.props,f=s.points,a=s.isAnimationActive,p=this.state,y=p.prevPoints,S=p.totalLength;return a&&f&&f.length&&(!y&&S>0||!Tk(y,f))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(f,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,f=i.dot,a=i.points,p=i.className,y=i.xAxis,S=i.yAxis,E=i.top,I=i.left,L=i.width,N=i.height,j=i.isAnimationActive,k=i.id;if(s||!a||!a.length)return null;var V=this.state.isAnimationFinished,K=a.length===1,J=ri("recharts-line",p),ie=y&&y.allowDataOverflow,Q=S&&S.allowDataOverflow,W=ie||Q,te=Gi(k)?this.id:k,X=(r=aa(f,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},ae=X.r,le=ae===void 0?3:ae,ge=X.strokeWidth,ye=ge===void 0?2:ge,De=lKe(f)?f:{},He=De.clipDot,Be=He===void 0?!0:He,Ee=le*2+ye;return tt.createElement(Rs,{className:J},ie||Q?tt.createElement("defs",null,tt.createElement("clipPath",{id:"clipPath-".concat(te)},tt.createElement("rect",{x:ie?I:I-L/2,y:Q?E:E-N/2,width:ie?L:L*2,height:Q?N:N*2})),!Be&&tt.createElement("clipPath",{id:"clipPath-dots-".concat(te)},tt.createElement("rect",{x:I-Ee/2,y:E-Ee/2,width:L+Ee,height:N+Ee}))):null,!K&&this.renderCurve(W,te),this.renderErrorBar(W,te),(K||f)&&this.renderDots(W,Be,te),(!j||V)&&Xv.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(dw(r),[0]):r,f=[],a=0;a<i;++a)f=[].concat(dw(f),dw(s));return f}},{key:"renderDotItem",value:function(r,i){var s;if(tt.isValidElement(r))s=tt.cloneElement(r,i);else if(Li(r))s=r(i);else{var f=i.key,a=lae(i,Lft),p=ri("recharts-line-dot",typeof r!="boolean"?r.className:"");s=tt.createElement(Zq,A2({key:f},a,{className:p}))}return s}}])})(be.PureComponent);up(UO,"displayName","Line");up(UO,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!hT.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});up(UO,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,s=e.yAxisTicks,f=e.dataKey,a=e.bandSize,p=e.displayedData,y=e.offset,S=t.layout,E=p.map(function(I,L){var N=nh(I,f);return S==="horizontal"?{x:Dre({axis:n,ticks:i,bandSize:a,entry:I,index:L}),y:Gi(N)?null:r.scale(N),value:N,payload:I}:{x:Gi(N)?null:n.scale(N),y:Dre({axis:r,ticks:s,bandSize:a,entry:I,index:L}),value:N,payload:I}});return qf({points:E,layout:S},y)});function RS(e){"@babel/helpers - typeof";return RS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RS(e)}function Wft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wye(r.key),r)}}function Zft(e,t,n){return t&&Xft(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kft(e,t,n){return t=IP(t),Qft(e,bye()?Reflect.construct(t,n||[],IP(e).constructor):t.apply(e,n))}function Qft(e,t){if(t&&(RS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jft(e)}function Jft(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bye=function(){return!!e})()}function IP(e){return IP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},IP(e)}function eht(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DU(e,t)}function DU(e,t){return DU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DU(e,t)}function xye(e,t,n){return t=wye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wye(e){var t=tht(e,"string");return RS(t)=="symbol"?t:t+""}function tht(e,t){if(RS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(RS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function IU(){return IU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IU.apply(this,arguments)}function nht(e){var t=e.xAxisId,n=e9(),r=t9(),i=aye(t);return i==null?null:be.createElement(gT,IU({},i,{className:ri("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(f){return zy(f,!0)}}))}var kk=(function(e){function t(){return Wft(this,t),Kft(this,t,arguments)}return eht(t,e),Zft(t,[{key:"render",value:function(){return be.createElement(nht,this.props)}}])})(be.Component);xye(kk,"displayName","XAxis");xye(kk,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function kS(e){"@babel/helpers - typeof";return kS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kS(e)}function rht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Eye(r.key),r)}}function aht(e,t,n){return t&&iht(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oht(e,t,n){return t=PP(t),sht(e,Sye()?Reflect.construct(t,n||[],PP(e).constructor):t.apply(e,n))}function sht(e,t){if(t&&(kS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lht(e)}function lht(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sye=function(){return!!e})()}function PP(e){return PP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},PP(e)}function uht(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PU(e,t)}function PU(e,t){return PU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PU(e,t)}function Tye(e,t,n){return t=Eye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eye(e){var t=cht(e,"string");return kS(t)=="symbol"?t:t+""}function cht(e,t){if(kS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function RU(){return RU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RU.apply(this,arguments)}var fht=function(t){var n=t.yAxisId,r=e9(),i=t9(),s=oye(n);return s==null?null:be.createElement(gT,RU({},s,{className:ri("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return zy(a,!0)}}))},Lk=(function(e){function t(){return rht(this,t),oht(this,t,arguments)}return uht(t,e),aht(t,[{key:"render",value:function(){return be.createElement(fht,this.props)}}])})(be.Component);Tye(Lk,"displayName","YAxis");Tye(Lk,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function fae(e){return mht(e)||pht(e)||dht(e)||hht()}function hht(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dht(e,t){if(e){if(typeof e=="string")return kU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kU(e,t)}}function pht(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mht(e){if(Array.isArray(e))return kU(e)}function kU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var LU=function(t,n,r,i,s){var f=td(t,r9),a=td(t,Ik),p=[].concat(fae(f),fae(a)),y=td(t,Rk),S="".concat(i,"Id"),E=i[0],I=n;if(p.length&&(I=p.reduce(function(j,k){if(k.props[S]===r&&og(k.props,"extendDomain")&&Xn(k.props[E])){var V=k.props[E];return[Math.min(j[0],V),Math.max(j[1],V)]}return j},I)),y.length){var L="".concat(E,"1"),N="".concat(E,"2");I=y.reduce(function(j,k){if(k.props[S]===r&&og(k.props,"extendDomain")&&Xn(k.props[L])&&Xn(k.props[N])){var V=k.props[L],K=k.props[N];return[Math.min(j[0],V,K),Math.max(j[1],V,K)]}return j},I)}return s&&s.length&&(I=s.reduce(function(j,k){return Xn(k)?[Math.min(j[0],k),Math.max(j[1],k)]:j},I)),I},w4={exports:{}},hae;function ght(){return hae||(hae=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(p,y,S){this.fn=p,this.context=y,this.once=S||!1}function s(p,y,S,E,I){if(typeof S!="function")throw new TypeError("The listener must be a function");var L=new i(S,E||p,I),N=n?n+y:y;return p._events[N]?p._events[N].fn?p._events[N]=[p._events[N],L]:p._events[N].push(L):(p._events[N]=L,p._eventsCount++),p}function f(p,y){--p._eventsCount===0?p._events=new r:delete p._events[y]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var y=[],S,E;if(this._eventsCount===0)return y;for(E in S=this._events)t.call(S,E)&&y.push(n?E.slice(1):E);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(S)):y},a.prototype.listeners=function(y){var S=n?n+y:y,E=this._events[S];if(!E)return[];if(E.fn)return[E.fn];for(var I=0,L=E.length,N=new Array(L);I<L;I++)N[I]=E[I].fn;return N},a.prototype.listenerCount=function(y){var S=n?n+y:y,E=this._events[S];return E?E.fn?1:E.length:0},a.prototype.emit=function(y,S,E,I,L,N){var j=n?n+y:y;if(!this._events[j])return!1;var k=this._events[j],V=arguments.length,K,J;if(k.fn){switch(k.once&&this.removeListener(y,k.fn,void 0,!0),V){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,S),!0;case 3:return k.fn.call(k.context,S,E),!0;case 4:return k.fn.call(k.context,S,E,I),!0;case 5:return k.fn.call(k.context,S,E,I,L),!0;case 6:return k.fn.call(k.context,S,E,I,L,N),!0}for(J=1,K=new Array(V-1);J<V;J++)K[J-1]=arguments[J];k.fn.apply(k.context,K)}else{var ie=k.length,Q;for(J=0;J<ie;J++)switch(k[J].once&&this.removeListener(y,k[J].fn,void 0,!0),V){case 1:k[J].fn.call(k[J].context);break;case 2:k[J].fn.call(k[J].context,S);break;case 3:k[J].fn.call(k[J].context,S,E);break;case 4:k[J].fn.call(k[J].context,S,E,I);break;default:if(!K)for(Q=1,K=new Array(V-1);Q<V;Q++)K[Q-1]=arguments[Q];k[J].fn.apply(k[J].context,K)}}return!0},a.prototype.on=function(y,S,E){return s(this,y,S,E,!1)},a.prototype.once=function(y,S,E){return s(this,y,S,E,!0)},a.prototype.removeListener=function(y,S,E,I){var L=n?n+y:y;if(!this._events[L])return this;if(!S)return f(this,L),this;var N=this._events[L];if(N.fn)N.fn===S&&(!I||N.once)&&(!E||N.context===E)&&f(this,L);else{for(var j=0,k=[],V=N.length;j<V;j++)(N[j].fn!==S||I&&!N[j].once||E&&N[j].context!==E)&&k.push(N[j]);k.length?this._events[L]=k.length===1?k[0]:k:f(this,L)}return this},a.prototype.removeAllListeners=function(y){var S;return y?(S=n?n+y:y,this._events[S]&&f(this,S)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(w4)),w4.exports}var yht=ght();const _ht=ma(yht);var S4=new _ht,T4="recharts.syncMouseEvents";function FA(e){"@babel/helpers - typeof";return FA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FA(e)}function vht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Aye(r.key),r)}}function xht(e,t,n){return t&&bht(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function E4(e,t,n){return t=Aye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Aye(e){var t=wht(e,"string");return FA(t)=="symbol"?t:t+""}function wht(e,t){if(FA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(FA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sht=(function(){function e(){vht(this,e),E4(this,"activeIndex",0),E4(this,"coordinateList",[]),E4(this,"layout","horizontal")}return xht(e,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,f=n.container,a=f===void 0?null:f,p=n.layout,y=p===void 0?null:p,S=n.offset,E=S===void 0?null:S,I=n.mouseHandlerCallback,L=I===void 0?null:I;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=y??this.layout,this.offset=E??this.offset,this.mouseHandlerCallback=L??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,f=i.y,a=i.height,p=this.coordinateList[this.activeIndex].coordinate,y=((n=window)===null||n===void 0?void 0:n.scrollX)||0,S=((r=window)===null||r===void 0?void 0:r.scrollY)||0,E=s+p+y,I=f+this.offset.top+a/2+S;this.mouseHandlerCallback({pageX:E,pageY:I})}}}])})();function Tht(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],i=e==null?void 0:e[1];if(r&&i&&Xn(r)&&Xn(i))return!0}return!1}function Eht(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function Oye(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,s=e.endAngle,f=tu(t,n,r,i),a=tu(t,n,r,s);return{points:[f,a],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function Aht(e,t,n){var r,i,s,f;if(e==="horizontal")r=t.x,s=r,i=n.top,f=n.top+n.height;else if(e==="vertical")i=t.y,f=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var a=t.cx,p=t.cy,y=t.innerRadius,S=t.outerRadius,E=t.angle,I=tu(a,p,y,E),L=tu(a,p,S,E);r=I.x,i=I.y,s=L.x,f=L.y}else return Oye(t);return[{x:r,y:i},{x:s,y:f}]}function BA(e){"@babel/helpers - typeof";return BA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BA(e)}function dae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function KM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dae(Object(n),!0).forEach(function(r){Oht(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oht(e,t,n){return t=Cht(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cht(e){var t=Mht(e,"string");return BA(t)=="symbol"?t:t+""}function Mht(e,t){if(BA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(BA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dht(e){var t,n,r=e.element,i=e.tooltipEventType,s=e.isActive,f=e.activeCoordinate,a=e.activePayload,p=e.offset,y=e.activeTooltipIndex,S=e.tooltipAxisBandSize,E=e.layout,I=e.chartName,L=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!L||!s||!f||I!=="ScatterChart"&&i!=="axis")return null;var N,j=oU;if(I==="ScatterChart")N=f,j=Olt;else if(I==="BarChart")N=Eht(E,f,p,S),j=Xq;else if(E==="radial"){var k=Oye(f),V=k.cx,K=k.cy,J=k.radius,ie=k.startAngle,Q=k.endAngle;N={cx:V,cy:K,startAngle:ie,endAngle:Q,innerRadius:J,outerRadius:J},j=Lge}else N={points:Aht(E,f,p)},j=oU;var W=KM(KM(KM(KM({stroke:"#ccc",pointerEvents:"none"},p),N),aa(L,!1)),{},{payload:a,payloadIndex:y,className:ri("recharts-tooltip-cursor",L.className)});return be.isValidElement(L)?be.cloneElement(L,W):be.createElement(j,W)}var Iht=["item"],Pht=["children","className","width","height","style","compact","title","desc"];function LS(e){"@babel/helpers - typeof";return LS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LS(e)}function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tw.apply(this,arguments)}function pae(e,t){return Lht(e)||kht(e,t)||Mye(e,t)||Rht()}function Rht(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kht(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,y=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){y=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(y)throw i}}return a}}function Lht(e){if(Array.isArray(e))return e}function mae(e,t){if(e==null)return{};var n=zht(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zht(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Nht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dye(r.key),r)}}function Bht(e,t,n){return t&&Fht(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jht(e,t,n){return t=RP(t),Uht(e,Cye()?Reflect.construct(t,n||[],RP(e).constructor):t.apply(e,n))}function Uht(e,t){if(t&&(LS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ht(e)}function $ht(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cye=function(){return!!e})()}function RP(e){return RP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},RP(e)}function Vht(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zU(e,t)}function zU(e,t){return zU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zU(e,t)}function zS(e){return Ght(e)||Hht(e)||Mye(e)||qht()}function qht(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mye(e,t){if(e){if(typeof e=="string")return NU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NU(e,t)}}function Hht(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ght(e){if(Array.isArray(e))return NU(e)}function NU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gae(Object(n),!0).forEach(function(r){ni(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ni(e,t,n){return t=Dye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dye(e){var t=Yht(e,"string");return LS(t)=="symbol"?t:t+""}function Yht(e,t){if(LS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(LS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wht={xAxis:["bottom","top"],yAxis:["left","right"]},Xht={width:"100%",height:"100%"},Iye={x:0,y:0};function QM(e){return e}var Zht=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},Kht=function(t,n,r,i){var s=n.find(function(S){return S&&S.index===r});if(s){if(t==="horizontal")return{x:s.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:s.coordinate};if(t==="centric"){var f=s.coordinate,a=i.radius;return vn(vn(vn({},i),tu(i.cx,i.cy,a,f)),{},{angle:f,radius:a})}var p=s.coordinate,y=i.angle;return vn(vn(vn({},i),tu(i.cx,i.cy,p,y)),{},{angle:y,radius:p})}return Iye},zk=function(t,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,f=(r??[]).reduce(function(a,p){var y=p.props.data;return y&&y.length?[].concat(zS(a),zS(y)):a},[]);return f.length>0?f:t&&t.length&&Xn(i)&&Xn(s)?t.slice(i,s+1):[]};function Pye(e){return e==="number"?[0,"auto"]:void 0}var FU=function(t,n,r,i){var s=t.graphicalItems,f=t.tooltipAxis,a=zk(n,t);return r<0||!s||!s.length||r>=a.length?null:s.reduce(function(p,y){var S,E=(S=y.props.data)!==null&&S!==void 0?S:n;E&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(E=E.slice(t.dataStartIndex,t.dataEndIndex+1));var I;if(f.dataKey&&!f.allowDuplicatedCategory){var L=E===void 0?a:E;I=zI(L,f.dataKey,i)}else I=E&&E[r]||a[r];return I?[].concat(zS(p),[Pge(y,I)]):p},[])},yae=function(t,n,r,i){var s=i||{x:t.chartX,y:t.chartY},f=Zht(s,r),a=t.orderedTooltipTicks,p=t.tooltipAxis,y=t.tooltipTicks,S=cat(f,a,y,p);if(S>=0&&y){var E=y[S]&&y[S].value,I=FU(t,n,S,E),L=Kht(r,a,S,s);return{activeTooltipIndex:S,activeLabel:E,activePayload:I,activeCoordinate:L}}return null},Qht=function(t,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,f=n.axisIdKey,a=n.stackGroups,p=n.dataStartIndex,y=n.dataEndIndex,S=t.layout,E=t.children,I=t.stackOffset,L=Mge(S,s);return r.reduce(function(N,j){var k,V=j.type.defaultProps!==void 0?vn(vn({},j.type.defaultProps),j.props):j.props,K=V.type,J=V.dataKey,ie=V.allowDataOverflow,Q=V.allowDuplicatedCategory,W=V.scale,te=V.ticks,X=V.includeHidden,ae=V[f];if(N[ae])return N;var le=zk(t.data,{graphicalItems:i.filter(function(it){var Pe,jt=f in it.props?it.props[f]:(Pe=it.type.defaultProps)===null||Pe===void 0?void 0:Pe[f];return jt===ae}),dataStartIndex:p,dataEndIndex:y}),ge=le.length,ye,De,He;Tht(V.domain,ie,K)&&(ye=tU(V.domain,null,ie),L&&(K==="number"||W!=="auto")&&(He=T2(le,J,"category")));var Be=Pye(K);if(!ye||ye.length===0){var Ee,Fe=(Ee=V.domain)!==null&&Ee!==void 0?Ee:Be;if(J){if(ye=T2(le,J,K),K==="category"&&L){var at=QZe(ye);Q&&at?(De=ye,ye=bP(0,ge)):Q||(ye=kre(Fe,ye,j).reduce(function(it,Pe){return it.indexOf(Pe)>=0?it:[].concat(zS(it),[Pe])},[]))}else if(K==="category")Q?ye=ye.filter(function(it){return it!==""&&!Gi(it)}):ye=kre(Fe,ye,j).reduce(function(it,Pe){return it.indexOf(Pe)>=0||Pe===""||Gi(Pe)?it:[].concat(zS(it),[Pe])},[]);else if(K==="number"){var yt=mat(le,i.filter(function(it){var Pe,jt,sn=f in it.props?it.props[f]:(Pe=it.type.defaultProps)===null||Pe===void 0?void 0:Pe[f],dn="hide"in it.props?it.props.hide:(jt=it.type.defaultProps)===null||jt===void 0?void 0:jt.hide;return sn===ae&&(X||!dn)}),J,s,S);yt&&(ye=yt)}L&&(K==="number"||W!=="auto")&&(He=T2(le,J,"category"))}else L?ye=bP(0,ge):a&&a[ae]&&a[ae].hasStack&&K==="number"?ye=I==="expand"?[0,1]:Ige(a[ae].stackGroups,p,y):ye=Cge(le,i.filter(function(it){var Pe=f in it.props?it.props[f]:it.type.defaultProps[f],jt="hide"in it.props?it.props.hide:it.type.defaultProps.hide;return Pe===ae&&(X||!jt)}),K,S,!0);if(K==="number")ye=LU(E,ye,ae,s,te),Fe&&(ye=tU(Fe,ye,ie));else if(K==="category"&&Fe){var je=Fe,Ke=ye.every(function(it){return je.indexOf(it)>=0});Ke&&(ye=je)}}return vn(vn({},N),{},ni({},ae,vn(vn({},V),{},{axisType:s,domain:ye,categoricalDomain:He,duplicateDomain:De,originalDomain:(k=V.domain)!==null&&k!==void 0?k:Be,isCategorical:L,layout:S})))},{})},Jht=function(t,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,f=n.axisIdKey,a=n.stackGroups,p=n.dataStartIndex,y=n.dataEndIndex,S=t.layout,E=t.children,I=zk(t.data,{graphicalItems:r,dataStartIndex:p,dataEndIndex:y}),L=I.length,N=Mge(S,s),j=-1;return r.reduce(function(k,V){var K=V.type.defaultProps!==void 0?vn(vn({},V.type.defaultProps),V.props):V.props,J=K[f],ie=Pye("number");if(!k[J]){j++;var Q;return N?Q=bP(0,L):a&&a[J]&&a[J].hasStack?(Q=Ige(a[J].stackGroups,p,y),Q=LU(E,Q,J,s)):(Q=tU(ie,Cge(I,r.filter(function(W){var te,X,ae=f in W.props?W.props[f]:(te=W.type.defaultProps)===null||te===void 0?void 0:te[f],le="hide"in W.props?W.props.hide:(X=W.type.defaultProps)===null||X===void 0?void 0:X.hide;return ae===J&&!le}),"number",S),i.defaultProps.allowDataOverflow),Q=LU(E,Q,J,s)),vn(vn({},k),{},ni({},J,vn(vn({axisType:s},i.defaultProps),{},{hide:!0,orientation:ed(Wht,"".concat(s,".").concat(j%2),null),domain:Q,originalDomain:ie,isCategorical:N,layout:S})))}return k},{})},edt=function(t,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,f=n.graphicalItems,a=n.stackGroups,p=n.dataStartIndex,y=n.dataEndIndex,S=t.children,E="".concat(i,"Id"),I=td(S,s),L={};return I&&I.length?L=Qht(t,{axes:I,graphicalItems:f,axisType:i,axisIdKey:E,stackGroups:a,dataStartIndex:p,dataEndIndex:y}):f&&f.length&&(L=Jht(t,{Axis:s,graphicalItems:f,axisType:i,axisIdKey:E,stackGroups:a,dataStartIndex:p,dataEndIndex:y})),L},tdt=function(t){var n=Nv(t),r=zy(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:wq(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:cP(n,r)}},_ae=function(t){var n=t.children,r=t.defaultShowTooltip,i=Gf(n,AS),s=0,f=0;return t.data&&t.data.length!==0&&(f=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(f=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:f,activeTooltipIndex:-1,isTooltipActive:!!r}},ndt=function(t){return!t||!t.length?!1:t.some(function(n){var r=Yy(n&&n.type);return r&&r.indexOf("Bar")>=0})},vae=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},rdt=function(t,n){var r=t.props,i=t.graphicalItems,s=t.xAxisMap,f=s===void 0?{}:s,a=t.yAxisMap,p=a===void 0?{}:a,y=r.width,S=r.height,E=r.children,I=r.margin||{},L=Gf(E,AS),N=Gf(E,lx),j=Object.keys(p).reduce(function(Q,W){var te=p[W],X=te.orientation;return!te.mirror&&!te.hide?vn(vn({},Q),{},ni({},X,Q[X]+te.width)):Q},{left:I.left||0,right:I.right||0}),k=Object.keys(f).reduce(function(Q,W){var te=f[W],X=te.orientation;return!te.mirror&&!te.hide?vn(vn({},Q),{},ni({},X,ed(Q,"".concat(X))+te.height)):Q},{top:I.top||0,bottom:I.bottom||0}),V=vn(vn({},k),j),K=V.bottom;L&&(V.bottom+=L.props.height||AS.defaultProps.height),N&&n&&(V=dat(V,i,r,n));var J=y-V.left-V.right,ie=S-V.top-V.bottom;return vn(vn({brushBottom:K},V),{},{width:Math.max(J,0),height:Math.max(ie,0)})},idt=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},adt=function(t){var n=t.chartName,r=t.GraphicalChild,i=t.defaultTooltipEventType,s=i===void 0?"axis":i,f=t.validateTooltipEventTypes,a=f===void 0?["axis"]:f,p=t.axisComponents,y=t.legendContent,S=t.formatAxisMap,E=t.defaultProps,I=function(V,K){var J=K.graphicalItems,ie=K.stackGroups,Q=K.offset,W=K.updateId,te=K.dataStartIndex,X=K.dataEndIndex,ae=V.barSize,le=V.layout,ge=V.barGap,ye=V.barCategoryGap,De=V.maxBarSize,He=vae(le),Be=He.numericAxisName,Ee=He.cateAxisName,Fe=ndt(J),at=[];return J.forEach(function(yt,je){var Ke=zk(V.data,{graphicalItems:[yt],dataStartIndex:te,dataEndIndex:X}),it=yt.type.defaultProps!==void 0?vn(vn({},yt.type.defaultProps),yt.props):yt.props,Pe=it.dataKey,jt=it.maxBarSize,sn=it["".concat(Be,"Id")],dn=it["".concat(Ee,"Id")],Tn={},Ut=p.reduce(function(Er,Tr){var pi=K["".concat(Tr.axisType,"Map")],Fr=it["".concat(Tr.axisType,"Id")];pi&&pi[Fr]||Tr.axisType==="zAxis"||Dx();var hi=pi[Fr];return vn(vn({},Er),{},ni(ni({},Tr.axisType,hi),"".concat(Tr.axisType,"Ticks"),zy(hi)))},Tn),xe=Ut[Ee],Ye=Ut["".concat(Ee,"Ticks")],ct=ie&&ie[sn]&&ie[sn].hasStack&&Oat(yt,ie[sn].stackGroups),mt=Yy(yt.type).indexOf("Bar")>=0,Ct=cP(xe,Ye),Yt=[],gn=Fe&&fat({barSize:ae,stackGroups:ie,totalSize:idt(Ut,Ee)});if(mt){var An,ar,or=Gi(jt)?De:jt,Nr=(An=(ar=cP(xe,Ye,!0))!==null&&ar!==void 0?ar:or)!==null&&An!==void 0?An:0;Yt=hat({barGap:ge,barCategoryGap:ye,bandSize:Nr!==Ct?Nr:Ct,sizeList:gn[dn],maxBarSize:or}),Nr!==Ct&&(Yt=Yt.map(function(Er){return vn(vn({},Er),{},{position:vn(vn({},Er.position),{},{offset:Er.position.offset-Nr/2})})}))}var Pr=yt&&yt.type&&yt.type.getComposedData;Pr&&at.push({props:vn(vn({},Pr(vn(vn({},Ut),{},{displayedData:Ke,props:V,dataKey:Pe,item:yt,bandSize:Ct,barPosition:Yt,offset:Q,stackedData:ct,layout:le,dataStartIndex:te,dataEndIndex:X}))),{},ni(ni(ni({key:yt.key||"item-".concat(je)},Be,Ut[Be]),Ee,Ut[Ee]),"animationId",W)),childIndex:fKe(yt,V.children),item:yt})}),at},L=function(V,K){var J=V.props,ie=V.dataStartIndex,Q=V.dataEndIndex,W=V.updateId;if(!WJ({props:J}))return null;var te=J.children,X=J.layout,ae=J.stackOffset,le=J.data,ge=J.reverseStackOrder,ye=vae(X),De=ye.numericAxisName,He=ye.cateAxisName,Be=td(te,r),Ee=Tat(le,Be,"".concat(De,"Id"),"".concat(He,"Id"),ae,ge),Fe=p.reduce(function(it,Pe){var jt="".concat(Pe.axisType,"Map");return vn(vn({},it),{},ni({},jt,edt(J,vn(vn({},Pe),{},{graphicalItems:Be,stackGroups:Pe.axisType===De&&Ee,dataStartIndex:ie,dataEndIndex:Q}))))},{}),at=rdt(vn(vn({},Fe),{},{props:J,graphicalItems:Be}),K==null?void 0:K.legendBBox);Object.keys(Fe).forEach(function(it){Fe[it]=S(J,Fe[it],at,it.replace("Map",""),n)});var yt=Fe["".concat(He,"Map")],je=tdt(yt),Ke=I(J,vn(vn({},Fe),{},{dataStartIndex:ie,dataEndIndex:Q,updateId:W,graphicalItems:Be,stackGroups:Ee,offset:at}));return vn(vn({formattedGraphicalItems:Ke,graphicalItems:Be,offset:at,stackGroups:Ee},je),Fe)},N=(function(k){function V(K){var J,ie,Q;return Nht(this,V),Q=jht(this,V,[K]),ni(Q,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ni(Q,"accessibilityManager",new Sht),ni(Q,"handleLegendBBoxUpdate",function(W){if(W){var te=Q.state,X=te.dataStartIndex,ae=te.dataEndIndex,le=te.updateId;Q.setState(vn({legendBBox:W},L({props:Q.props,dataStartIndex:X,dataEndIndex:ae,updateId:le},vn(vn({},Q.state),{},{legendBBox:W}))))}}),ni(Q,"handleReceiveSyncEvent",function(W,te,X){if(Q.props.syncId===W){if(X===Q.eventEmitterSymbol&&typeof Q.props.syncMethod!="function")return;Q.applySyncEvent(te)}}),ni(Q,"handleBrushChange",function(W){var te=W.startIndex,X=W.endIndex;if(te!==Q.state.dataStartIndex||X!==Q.state.dataEndIndex){var ae=Q.state.updateId;Q.setState(function(){return vn({dataStartIndex:te,dataEndIndex:X},L({props:Q.props,dataStartIndex:te,dataEndIndex:X,updateId:ae},Q.state))}),Q.triggerSyncEvent({dataStartIndex:te,dataEndIndex:X})}}),ni(Q,"handleMouseEnter",function(W){var te=Q.getMouseInfo(W);if(te){var X=vn(vn({},te),{},{isTooltipActive:!0});Q.setState(X),Q.triggerSyncEvent(X);var ae=Q.props.onMouseEnter;Li(ae)&&ae(X,W)}}),ni(Q,"triggeredAfterMouseMove",function(W){var te=Q.getMouseInfo(W),X=te?vn(vn({},te),{},{isTooltipActive:!0}):{isTooltipActive:!1};Q.setState(X),Q.triggerSyncEvent(X);var ae=Q.props.onMouseMove;Li(ae)&&ae(X,W)}),ni(Q,"handleItemMouseEnter",function(W){Q.setState(function(){return{isTooltipActive:!0,activeItem:W,activePayload:W.tooltipPayload,activeCoordinate:W.tooltipPosition||{x:W.cx,y:W.cy}}})}),ni(Q,"handleItemMouseLeave",function(){Q.setState(function(){return{isTooltipActive:!1}})}),ni(Q,"handleMouseMove",function(W){W.persist(),Q.throttleTriggeredAfterMouseMove(W)}),ni(Q,"handleMouseLeave",function(W){Q.throttleTriggeredAfterMouseMove.cancel();var te={isTooltipActive:!1};Q.setState(te),Q.triggerSyncEvent(te);var X=Q.props.onMouseLeave;Li(X)&&X(te,W)}),ni(Q,"handleOuterEvent",function(W){var te=cKe(W),X=ed(Q.props,"".concat(te));if(te&&Li(X)){var ae,le;/.*touch.*/i.test(te)?le=Q.getMouseInfo(W.changedTouches[0]):le=Q.getMouseInfo(W),X((ae=le)!==null&&ae!==void 0?ae:{},W)}}),ni(Q,"handleClick",function(W){var te=Q.getMouseInfo(W);if(te){var X=vn(vn({},te),{},{isTooltipActive:!0});Q.setState(X),Q.triggerSyncEvent(X);var ae=Q.props.onClick;Li(ae)&&ae(X,W)}}),ni(Q,"handleMouseDown",function(W){var te=Q.props.onMouseDown;if(Li(te)){var X=Q.getMouseInfo(W);te(X,W)}}),ni(Q,"handleMouseUp",function(W){var te=Q.props.onMouseUp;if(Li(te)){var X=Q.getMouseInfo(W);te(X,W)}}),ni(Q,"handleTouchMove",function(W){W.changedTouches!=null&&W.changedTouches.length>0&&Q.throttleTriggeredAfterMouseMove(W.changedTouches[0])}),ni(Q,"handleTouchStart",function(W){W.changedTouches!=null&&W.changedTouches.length>0&&Q.handleMouseDown(W.changedTouches[0])}),ni(Q,"handleTouchEnd",function(W){W.changedTouches!=null&&W.changedTouches.length>0&&Q.handleMouseUp(W.changedTouches[0])}),ni(Q,"handleDoubleClick",function(W){var te=Q.props.onDoubleClick;if(Li(te)){var X=Q.getMouseInfo(W);te(X,W)}}),ni(Q,"handleContextMenu",function(W){var te=Q.props.onContextMenu;if(Li(te)){var X=Q.getMouseInfo(W);te(X,W)}}),ni(Q,"triggerSyncEvent",function(W){Q.props.syncId!==void 0&&S4.emit(T4,Q.props.syncId,W,Q.eventEmitterSymbol)}),ni(Q,"applySyncEvent",function(W){var te=Q.props,X=te.layout,ae=te.syncMethod,le=Q.state.updateId,ge=W.dataStartIndex,ye=W.dataEndIndex;if(W.dataStartIndex!==void 0||W.dataEndIndex!==void 0)Q.setState(vn({dataStartIndex:ge,dataEndIndex:ye},L({props:Q.props,dataStartIndex:ge,dataEndIndex:ye,updateId:le},Q.state)));else if(W.activeTooltipIndex!==void 0){var De=W.chartX,He=W.chartY,Be=W.activeTooltipIndex,Ee=Q.state,Fe=Ee.offset,at=Ee.tooltipTicks;if(!Fe)return;if(typeof ae=="function")Be=ae(at,W);else if(ae==="value"){Be=-1;for(var yt=0;yt<at.length;yt++)if(at[yt].value===W.activeLabel){Be=yt;break}}var je=vn(vn({},Fe),{},{x:Fe.left,y:Fe.top}),Ke=Math.min(De,je.x+je.width),it=Math.min(He,je.y+je.height),Pe=at[Be]&&at[Be].value,jt=FU(Q.state,Q.props.data,Be),sn=at[Be]?{x:X==="horizontal"?at[Be].coordinate:Ke,y:X==="horizontal"?it:at[Be].coordinate}:Iye;Q.setState(vn(vn({},W),{},{activeLabel:Pe,activeCoordinate:sn,activePayload:jt,activeTooltipIndex:Be}))}else Q.setState(W)}),ni(Q,"renderCursor",function(W){var te,X=Q.state,ae=X.isTooltipActive,le=X.activeCoordinate,ge=X.activePayload,ye=X.offset,De=X.activeTooltipIndex,He=X.tooltipAxisBandSize,Be=Q.getTooltipEventType(),Ee=(te=W.props.active)!==null&&te!==void 0?te:ae,Fe=Q.props.layout,at=W.key||"_recharts-cursor";return tt.createElement(Dht,{key:at,activeCoordinate:le,activePayload:ge,activeTooltipIndex:De,chartName:n,element:W,isActive:Ee,layout:Fe,offset:ye,tooltipAxisBandSize:He,tooltipEventType:Be})}),ni(Q,"renderPolarAxis",function(W,te,X){var ae=ed(W,"type.axisType"),le=ed(Q.state,"".concat(ae,"Map")),ge=W.type.defaultProps,ye=ge!==void 0?vn(vn({},ge),W.props):W.props,De=le&&le[ye["".concat(ae,"Id")]];return be.cloneElement(W,vn(vn({},De),{},{className:ri(ae,De.className),key:W.key||"".concat(te,"-").concat(X),ticks:zy(De,!0)}))}),ni(Q,"renderPolarGrid",function(W){var te=W.props,X=te.radialLines,ae=te.polarAngles,le=te.polarRadius,ge=Q.state,ye=ge.radiusAxisMap,De=ge.angleAxisMap,He=Nv(ye),Be=Nv(De),Ee=Be.cx,Fe=Be.cy,at=Be.innerRadius,yt=Be.outerRadius;return be.cloneElement(W,{polarAngles:Array.isArray(ae)?ae:zy(Be,!0).map(function(je){return je.coordinate}),polarRadius:Array.isArray(le)?le:zy(He,!0).map(function(je){return je.coordinate}),cx:Ee,cy:Fe,innerRadius:at,outerRadius:yt,key:W.key||"polar-grid",radialLines:X})}),ni(Q,"renderLegend",function(){var W=Q.state.formattedGraphicalItems,te=Q.props,X=te.children,ae=te.width,le=te.height,ge=Q.props.margin||{},ye=ae-(ge.left||0)-(ge.right||0),De=Age({children:X,formattedGraphicalItems:W,legendWidth:ye,legendContent:y});if(!De)return null;var He=De.item,Be=mae(De,Iht);return be.cloneElement(He,vn(vn({},Be),{},{chartWidth:ae,chartHeight:le,margin:ge,onBBoxUpdate:Q.handleLegendBBoxUpdate}))}),ni(Q,"renderTooltip",function(){var W,te=Q.props,X=te.children,ae=te.accessibilityLayer,le=Gf(X,Nm);if(!le)return null;var ge=Q.state,ye=ge.isTooltipActive,De=ge.activeCoordinate,He=ge.activePayload,Be=ge.activeLabel,Ee=ge.offset,Fe=(W=le.props.active)!==null&&W!==void 0?W:ye;return be.cloneElement(le,{viewBox:vn(vn({},Ee),{},{x:Ee.left,y:Ee.top}),active:Fe,label:Be,payload:Fe?He:[],coordinate:De,accessibilityLayer:ae})}),ni(Q,"renderBrush",function(W){var te=Q.props,X=te.margin,ae=te.data,le=Q.state,ge=le.offset,ye=le.dataStartIndex,De=le.dataEndIndex,He=le.updateId;return be.cloneElement(W,{key:W.key||"_recharts-brush",onChange:YM(Q.handleBrushChange,W.props.onChange),data:ae,x:Xn(W.props.x)?W.props.x:ge.left,y:Xn(W.props.y)?W.props.y:ge.top+ge.height+ge.brushBottom-(X.bottom||0),width:Xn(W.props.width)?W.props.width:ge.width,startIndex:ye,endIndex:De,updateId:"brush-".concat(He)})}),ni(Q,"renderReferenceElement",function(W,te,X){if(!W)return null;var ae=Q,le=ae.clipPathId,ge=Q.state,ye=ge.xAxisMap,De=ge.yAxisMap,He=ge.offset,Be=W.type.defaultProps||{},Ee=W.props,Fe=Ee.xAxisId,at=Fe===void 0?Be.xAxisId:Fe,yt=Ee.yAxisId,je=yt===void 0?Be.yAxisId:yt;return be.cloneElement(W,{key:W.key||"".concat(te,"-").concat(X),xAxis:ye[at],yAxis:De[je],viewBox:{x:He.left,y:He.top,width:He.width,height:He.height},clipPathId:le})}),ni(Q,"renderActivePoints",function(W){var te=W.item,X=W.activePoint,ae=W.basePoint,le=W.childIndex,ge=W.isRange,ye=[],De=te.props.key,He=te.item.type.defaultProps!==void 0?vn(vn({},te.item.type.defaultProps),te.item.props):te.item.props,Be=He.activeDot,Ee=He.dataKey,Fe=vn(vn({index:le,dataKey:Ee,cx:X.x,cy:X.y,r:4,fill:Wq(te.item),strokeWidth:2,stroke:"#fff",payload:X.payload,value:X.value},aa(Be,!1)),NI(Be));return ye.push(V.renderActiveDot(Be,Fe,"".concat(De,"-activePoint-").concat(le))),ae?ye.push(V.renderActiveDot(Be,vn(vn({},Fe),{},{cx:ae.x,cy:ae.y}),"".concat(De,"-basePoint-").concat(le))):ge&&ye.push(null),ye}),ni(Q,"renderGraphicChild",function(W,te,X){var ae=Q.filterFormatItem(W,te,X);if(!ae)return null;var le=Q.getTooltipEventType(),ge=Q.state,ye=ge.isTooltipActive,De=ge.tooltipAxis,He=ge.activeTooltipIndex,Be=ge.activeLabel,Ee=Q.props.children,Fe=Gf(Ee,Nm),at=ae.props,yt=at.points,je=at.isRange,Ke=at.baseLine,it=ae.item.type.defaultProps!==void 0?vn(vn({},ae.item.type.defaultProps),ae.item.props):ae.item.props,Pe=it.activeDot,jt=it.hide,sn=it.activeBar,dn=it.activeShape,Tn=!!(!jt&&ye&&Fe&&(Pe||sn||dn)),Ut={};le!=="axis"&&Fe&&Fe.props.trigger==="click"?Ut={onClick:YM(Q.handleItemMouseEnter,W.props.onClick)}:le!=="axis"&&(Ut={onMouseLeave:YM(Q.handleItemMouseLeave,W.props.onMouseLeave),onMouseEnter:YM(Q.handleItemMouseEnter,W.props.onMouseEnter)});var xe=be.cloneElement(W,vn(vn({},ae.props),Ut));function Ye(Tr){return typeof De.dataKey=="function"?De.dataKey(Tr.payload):null}if(Tn)if(He>=0){var ct,mt;if(De.dataKey&&!De.allowDuplicatedCategory){var Ct=typeof De.dataKey=="function"?Ye:"payload.".concat(De.dataKey.toString());ct=zI(yt,Ct,Be),mt=je&&Ke&&zI(Ke,Ct,Be)}else ct=yt==null?void 0:yt[He],mt=je&&Ke&&Ke[He];if(dn||sn){var Yt=W.props.activeIndex!==void 0?W.props.activeIndex:He;return[be.cloneElement(W,vn(vn(vn({},ae.props),Ut),{},{activeIndex:Yt})),null,null]}if(!Gi(ct))return[xe].concat(zS(Q.renderActivePoints({item:ae,activePoint:ct,basePoint:mt,childIndex:He,isRange:je})))}else{var gn,An=(gn=Q.getItemByXY(Q.state.activeCoordinate))!==null&&gn!==void 0?gn:{graphicalItem:xe},ar=An.graphicalItem,or=ar.item,Nr=or===void 0?W:or,Pr=ar.childIndex,Er=vn(vn(vn({},ae.props),Ut),{},{activeIndex:Pr});return[be.cloneElement(Nr,Er),null,null]}return je?[xe,null,null]:[xe,null]}),ni(Q,"renderCustomized",function(W,te,X){return be.cloneElement(W,vn(vn({key:"recharts-customized-".concat(X)},Q.props),Q.state))}),ni(Q,"renderMap",{CartesianGrid:{handler:QM,once:!0},ReferenceArea:{handler:Q.renderReferenceElement},ReferenceLine:{handler:QM},ReferenceDot:{handler:Q.renderReferenceElement},XAxis:{handler:QM},YAxis:{handler:QM},Brush:{handler:Q.renderBrush,once:!0},Bar:{handler:Q.renderGraphicChild},Line:{handler:Q.renderGraphicChild},Area:{handler:Q.renderGraphicChild},Radar:{handler:Q.renderGraphicChild},RadialBar:{handler:Q.renderGraphicChild},Scatter:{handler:Q.renderGraphicChild},Pie:{handler:Q.renderGraphicChild},Funnel:{handler:Q.renderGraphicChild},Tooltip:{handler:Q.renderCursor,once:!0},PolarGrid:{handler:Q.renderPolarGrid,once:!0},PolarAngleAxis:{handler:Q.renderPolarAxis},PolarRadiusAxis:{handler:Q.renderPolarAxis},Customized:{handler:Q.renderCustomized}}),Q.clipPathId="".concat((J=K.id)!==null&&J!==void 0?J:RO("recharts"),"-clip"),Q.throttleTriggeredAfterMouseMove=Ame(Q.triggeredAfterMouseMove,(ie=K.throttleDelay)!==null&&ie!==void 0?ie:1e3/60),Q.state={},Q}return Vht(V,k),Bht(V,[{key:"componentDidMount",value:function(){var J,ie;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(J=this.props.margin.left)!==null&&J!==void 0?J:0,top:(ie=this.props.margin.top)!==null&&ie!==void 0?ie:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var J=this.props,ie=J.children,Q=J.data,W=J.height,te=J.layout,X=Gf(ie,Nm);if(X){var ae=X.props.defaultIndex;if(!(typeof ae!="number"||ae<0||ae>this.state.tooltipTicks.length-1)){var le=this.state.tooltipTicks[ae]&&this.state.tooltipTicks[ae].value,ge=FU(this.state,Q,ae,le),ye=this.state.tooltipTicks[ae].coordinate,De=(this.state.offset.top+W)/2,He=te==="horizontal",Be=He?{x:ye,y:De}:{y:ye,x:De},Ee=this.state.formattedGraphicalItems.find(function(at){var yt=at.item;return yt.type.name==="Scatter"});Ee&&(Be=vn(vn({},Be),Ee.props.points[ae].tooltipPosition),ge=Ee.props.points[ae].tooltipPayload);var Fe={activeTooltipIndex:ae,isTooltipActive:!0,activeLabel:le,activePayload:ge,activeCoordinate:Be};this.setState(Fe),this.renderCursor(X),this.accessibilityManager.setIndex(ae)}}}},{key:"getSnapshotBeforeUpdate",value:function(J,ie){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==ie.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==J.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==J.margin){var Q,W;this.accessibilityManager.setDetails({offset:{left:(Q=this.props.margin.left)!==null&&Q!==void 0?Q:0,top:(W=this.props.margin.top)!==null&&W!==void 0?W:0}})}return null}},{key:"componentDidUpdate",value:function(J){S6([Gf(J.children,Nm)],[Gf(this.props.children,Nm)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var J=Gf(this.props.children,Nm);if(J&&typeof J.props.shared=="boolean"){var ie=J.props.shared?"axis":"item";return a.indexOf(ie)>=0?ie:s}return s}},{key:"getMouseInfo",value:function(J){if(!this.container)return null;var ie=this.container,Q=ie.getBoundingClientRect(),W=ett(Q),te={chartX:Math.round(J.pageX-W.left),chartY:Math.round(J.pageY-W.top)},X=Q.width/ie.offsetWidth||1,ae=this.inRange(te.chartX,te.chartY,X);if(!ae)return null;var le=this.state,ge=le.xAxisMap,ye=le.yAxisMap,De=this.getTooltipEventType(),He=yae(this.state,this.props.data,this.props.layout,ae);if(De!=="axis"&&ge&&ye){var Be=Nv(ge).scale,Ee=Nv(ye).scale,Fe=Be&&Be.invert?Be.invert(te.chartX):null,at=Ee&&Ee.invert?Ee.invert(te.chartY):null;return vn(vn({},te),{},{xValue:Fe,yValue:at},He)}return He?vn(vn({},te),He):null}},{key:"inRange",value:function(J,ie){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,W=this.props.layout,te=J/Q,X=ie/Q;if(W==="horizontal"||W==="vertical"){var ae=this.state.offset,le=te>=ae.left&&te<=ae.left+ae.width&&X>=ae.top&&X<=ae.top+ae.height;return le?{x:te,y:X}:null}var ge=this.state,ye=ge.angleAxisMap,De=ge.radiusAxisMap;if(ye&&De){var He=Nv(ye);return Nre({x:te,y:X},He)}return null}},{key:"parseEventsOfWrapper",value:function(){var J=this.props.children,ie=this.getTooltipEventType(),Q=Gf(J,Nm),W={};Q&&ie==="axis"&&(Q.props.trigger==="click"?W={onClick:this.handleClick}:W={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var te=NI(this.props,this.handleOuterEvent);return vn(vn({},te),W)}},{key:"addListener",value:function(){S4.on(T4,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){S4.removeListener(T4,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(J,ie,Q){for(var W=this.state.formattedGraphicalItems,te=0,X=W.length;te<X;te++){var ae=W[te];if(ae.item===J||ae.props.key===J.key||ie===Yy(ae.item.type)&&Q===ae.childIndex)return ae}return null}},{key:"renderClipPath",value:function(){var J=this.clipPathId,ie=this.state.offset,Q=ie.left,W=ie.top,te=ie.height,X=ie.width;return tt.createElement("defs",null,tt.createElement("clipPath",{id:J},tt.createElement("rect",{x:Q,y:W,height:te,width:X})))}},{key:"getXScales",value:function(){var J=this.state.xAxisMap;return J?Object.entries(J).reduce(function(ie,Q){var W=pae(Q,2),te=W[0],X=W[1];return vn(vn({},ie),{},ni({},te,X.scale))},{}):null}},{key:"getYScales",value:function(){var J=this.state.yAxisMap;return J?Object.entries(J).reduce(function(ie,Q){var W=pae(Q,2),te=W[0],X=W[1];return vn(vn({},ie),{},ni({},te,X.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(J){var ie;return(ie=this.state.xAxisMap)===null||ie===void 0||(ie=ie[J])===null||ie===void 0?void 0:ie.scale}},{key:"getYScaleByAxisId",value:function(J){var ie;return(ie=this.state.yAxisMap)===null||ie===void 0||(ie=ie[J])===null||ie===void 0?void 0:ie.scale}},{key:"getItemByXY",value:function(J){var ie=this.state,Q=ie.formattedGraphicalItems,W=ie.activeItem;if(Q&&Q.length)for(var te=0,X=Q.length;te<X;te++){var ae=Q[te],le=ae.props,ge=ae.item,ye=ge.type.defaultProps!==void 0?vn(vn({},ge.type.defaultProps),ge.props):ge.props,De=Yy(ge.type);if(De==="Bar"){var He=(le.data||[]).find(function(at){return ylt(J,at)});if(He)return{graphicalItem:ae,payload:He}}else if(De==="RadialBar"){var Be=(le.data||[]).find(function(at){return Nre(J,at)});if(Be)return{graphicalItem:ae,payload:Be}}else if(Ok(ae,W)||Ck(ae,W)||RA(ae,W)){var Ee=sut({graphicalItem:ae,activeTooltipItem:W,itemData:ye.data}),Fe=ye.activeIndex===void 0?Ee:ye.activeIndex;return{graphicalItem:vn(vn({},ae),{},{childIndex:Fe}),payload:RA(ae,W)?ye.data[Ee]:ae.props.data[Ee]}}}return null}},{key:"render",value:function(){var J=this;if(!WJ(this))return null;var ie=this.props,Q=ie.children,W=ie.className,te=ie.width,X=ie.height,ae=ie.style,le=ie.compact,ge=ie.title,ye=ie.desc,De=mae(ie,Pht),He=aa(De,!1);if(le)return tt.createElement(Xie,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},tt.createElement(E6,Tw({},He,{width:te,height:X,title:ge,desc:ye}),this.renderClipPath(),ZJ(Q,this.renderMap)));if(this.props.accessibilityLayer){var Be,Ee;He.tabIndex=(Be=this.props.tabIndex)!==null&&Be!==void 0?Be:0,He.role=(Ee=this.props.role)!==null&&Ee!==void 0?Ee:"application",He.onKeyDown=function(at){J.accessibilityManager.keyboardEvent(at)},He.onFocus=function(){J.accessibilityManager.focus()}}var Fe=this.parseEventsOfWrapper();return tt.createElement(Xie,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},tt.createElement("div",Tw({className:ri("recharts-wrapper",W),style:vn({position:"relative",cursor:"default",width:te,height:X},ae)},Fe,{ref:function(yt){J.container=yt}}),tt.createElement(E6,Tw({},He,{width:te,height:X,title:ge,desc:ye,style:Xht}),this.renderClipPath(),ZJ(Q,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(be.Component);ni(N,"displayName",n),ni(N,"defaultProps",vn({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},E)),ni(N,"getDerivedStateFromProps",function(k,V){var K=k.dataKey,J=k.data,ie=k.children,Q=k.width,W=k.height,te=k.layout,X=k.stackOffset,ae=k.margin,le=V.dataStartIndex,ge=V.dataEndIndex;if(V.updateId===void 0){var ye=_ae(k);return vn(vn(vn({},ye),{},{updateId:0},L(vn(vn({props:k},ye),{},{updateId:0}),V)),{},{prevDataKey:K,prevData:J,prevWidth:Q,prevHeight:W,prevLayout:te,prevStackOffset:X,prevMargin:ae,prevChildren:ie})}if(K!==V.prevDataKey||J!==V.prevData||Q!==V.prevWidth||W!==V.prevHeight||te!==V.prevLayout||X!==V.prevStackOffset||!zw(ae,V.prevMargin)){var De=_ae(k),He={chartX:V.chartX,chartY:V.chartY,isTooltipActive:V.isTooltipActive},Be=vn(vn({},yae(V,J,te)),{},{updateId:V.updateId+1}),Ee=vn(vn(vn({},De),He),Be);return vn(vn(vn({},Ee),L(vn({props:k},Ee),V)),{},{prevDataKey:K,prevData:J,prevWidth:Q,prevHeight:W,prevLayout:te,prevStackOffset:X,prevMargin:ae,prevChildren:ie})}if(!S6(ie,V.prevChildren)){var Fe,at,yt,je,Ke=Gf(ie,AS),it=Ke&&(Fe=(at=Ke.props)===null||at===void 0?void 0:at.startIndex)!==null&&Fe!==void 0?Fe:le,Pe=Ke&&(yt=(je=Ke.props)===null||je===void 0?void 0:je.endIndex)!==null&&yt!==void 0?yt:ge,jt=it!==le||Pe!==ge,sn=!Gi(J),dn=sn&&!jt?V.updateId:V.updateId+1;return vn(vn({updateId:dn},L(vn(vn({props:k},V),{},{updateId:dn,dataStartIndex:it,dataEndIndex:Pe}),V)),{},{prevChildren:ie,dataStartIndex:it,dataEndIndex:Pe})}return null}),ni(N,"renderActiveDot",function(k,V,K){var J;return be.isValidElement(k)?J=be.cloneElement(k,V):Li(k)?J=k(V):J=tt.createElement(Zq,V),tt.createElement(Rs,{className:"recharts-active-dot",key:K},J)});var j=be.forwardRef(function(V,K){return tt.createElement(N,Tw({},V,{ref:K}))});return j.displayName=N.displayName,j},odt=adt({chartName:"LineChart",GraphicalChild:UO,axisComponents:[{axisType:"xAxis",AxisComp:kk},{axisType:"yAxis",AxisComp:Lk}],formatAxisMap:rct});const bae=["#0077b6","#ff7f11","#009e73","#d62828","#6f4e7c","#6c757d","#118ab2","#8f2d56"],sdt=e=>Sn(e).format("MM/DD HH:mm"),ldt=e=>Sn(e).format("MM/DD/YYYY h:mm a"),udt=({rows:e,series:t,showLegend:n=!0})=>Array.isArray(e)&&e.length>0&&Array.isArray(t)&&t.length>0?Oe.jsx("div",{className:"download-chart-wrapper",role:"img","aria-label":"Rainfall results line chart",children:Oe.jsx(Yet,{width:"100%",height:460,children:Oe.jsxs(odt,{data:e,margin:{top:16,right:24,left:0,bottom:16},children:[Oe.jsx(yye,{strokeDasharray:"4 4"}),Oe.jsx(kk,{dataKey:"timestampMs",domain:["dataMin","dataMax"],minTickGap:36,tickFormatter:sdt,type:"number"}),Oe.jsx(Lk,{}),Oe.jsx(Nm,{formatter:(i,s,f)=>[i,f==null?void 0:f.name],labelFormatter:ldt}),n?Oe.jsx(lx,{}):null,t.map((i,s)=>Oe.jsx(UO,{connectNulls:!1,dataKey:i.key,dot:!1,isAnimationActive:!1,name:i.label,stroke:bae[s%bae.length],strokeWidth:2,type:"monotone"},i.key))]})})}):Oe.jsx("p",{className:"small mb-0",children:Oe.jsx("em",{children:"No chartable results were returned for this query."})}),cdt="MM/DD/YYYY HH:mm:ss",fdt="MM/DD/YYYY HH:mm",xp={start:"start",midpoint:"midpoint",end:"end"},DD={perSensor:"perSensor",averageByType:"averageByType"},xae=["start_ts","end_ts","ts","val","src","id","type"],hdt=3,wae="0:00",ddt={"5-minute":"0:05","15-minute":"0:15",hourly:"1:00",daily:"24:00",total:"0:00"},A4=(e,t="SENSOR")=>{const n=`${e??""}`.trim().toUpperCase().replace(/[^A-Z0-9_]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,""),r=n.length>0?n:t;return/^[A-Z]/.test(r)?r:`S_${r}`},pdt=e=>`${Number(e.toFixed(6))}`,mdt=e=>Number(e.toFixed(hdt)),gdt=(e,t=xp.start)=>{if(typeof e!="string")return null;const n=e.split("/");if(n.length===2){const i=Sn.parseZone(n[0].trim(),Sn.ISO_8601,!0),s=Sn.parseZone(n[1].trim(),Sn.ISO_8601,!0);return!i.isValid()||!s.isValid()?null:t===xp.end?s:t===xp.midpoint?Sn(Math.round((i.valueOf()+s.valueOf())/2)).utcOffset(i.utcOffset()):i}const r=Sn.parseZone(e,Sn.ISO_8601,!0);return r.isValid()?r:null},ydt=e=>{if(typeof e!="string")return wae;const t=e.trim().toLowerCase();return ddt[t]||wae},_dt=(e,t={})=>{const n=t.timestampRule||xp.start,r=ydt(t.rollup),i=new Map;Object.keys(e||{}).forEach(p=>{const y=e[p];Array.isArray(y)&&y.forEach(S=>{const E=S==null?void 0:S.id;if(E==null||E==="")return;const I=`${E}`,L=`${p}:${I}`,N=A4(`${p}_${I}`);i.has(L)||i.set(L,{sensorType:`${p}`,sensorId:I,gageName:A4(`RG_${N}`,"RG_SENSOR"),seriesName:A4(`TS_${N}`,"TS_SENSOR"),points:[]}),(Array.isArray(S==null?void 0:S.data)?S.data:[]).forEach(k=>{const V=gdt(k==null?void 0:k.ts,n),K=Number(k==null?void 0:k.val);V===null||!Number.isFinite(K)||i.get(L).points.push({timestampMs:V.valueOf(),dateTime:V.format(fdt),value:K})})})});const f=[...i.values()].map(p=>({...p,points:[...p.points].sort((y,S)=>y.timestampMs-S.timestampMs)})).filter(p=>p.points.length>0).sort((p,y)=>{const S=p.sensorType.localeCompare(y.sensorType);return S!==0?S:p.sensorId.localeCompare(y.sensorId,void 0,{numeric:!0,sensitivity:"base"})}),a=[";;Rainfall export for EPA SWMM",";;Generated by the 3RWW Rainfall app","","[RAINGAGES]",";;Name Form Intvl SCF DataSource SourceName"];return f.length===0?a.push(";;No valid rainfall rows available."):f.forEach(p=>{a.push(`${p.gageName} VOLUME ${r} 1.0 TIMESERIES ${p.seriesName}`)}),a.push("","[TIMESERIES]",";;Name Date Time Value"),f.length===0?a.push(";;No valid rainfall rows available."):f.forEach(p=>{p.points.forEach(y=>{const[S,E]=y.dateTime.split(" ");a.push(`${p.seriesName} ${S} ${E} ${pdt(y.value)}`)})}),a.join(`
`)},O4=e=>{if(typeof e!="string")return null;const t=Sn.parseZone(e,Sn.ISO_8601,!0);return t.isValid()?t.format(cdt):null},vdt=e=>{const t={...e},n=t.ts;if(typeof n!="string")return t;const r=n.split("/");if(r.length===2){const s=O4(r[0].trim()),f=O4(r[1].trim());if(s!==null&&f!==null){const{ts:a,...p}=t;return{...p,start_ts:s,end_ts:f}}return t}const i=O4(n);return i===null?t:{...t,ts:i}},bdt=e=>{const t=[];Object.keys(e||{}).forEach(f=>{const a=e[f];Array.isArray(a)&&a.forEach(p=>{(Array.isArray(p==null?void 0:p.data)?p.data:[]).forEach(S=>{t.push(vdt({...S,id:p==null?void 0:p.id,type:f}))})})});const r=new Set,i=[];t.forEach(f=>{Object.keys(f).forEach(a=>{r.add(a),!xae.includes(a)&&!i.includes(a)&&i.push(a)})});const s=xae.filter(f=>r.has(f));return{rows:t,fields:[...s,...i]}},xdt=(e,t)=>`${typeof e=="string"&&e.length>0?`${e[0].toUpperCase()}${e.slice(1)}`:"Sensor"} ${t}`,wdt=e=>`${typeof e=="string"&&e.length>0?`${e[0].toUpperCase()}${e.slice(1)}`:"Sensor"} Average`,Sdt=(e,t=xp.start)=>{if(typeof e!="string")return null;const n=e.split("/");if(n.length===2){const i=Sn.parseZone(n[0].trim(),Sn.ISO_8601,!0),s=Sn.parseZone(n[1].trim(),Sn.ISO_8601,!0);return!i.isValid()||!s.isValid()?null:t===xp.end?s.valueOf():t===xp.midpoint?Math.round((i.valueOf()+s.valueOf())/2):i.valueOf()}const r=Sn.parseZone(e,Sn.ISO_8601,!0);return r.isValid()?r.valueOf():null},Sae=(e,t={})=>{const n=t.timestampRule||xp.start,r=t.seriesMode||DD.perSensor,i=new Map,s=[],f=new Set;return Object.keys(e||{}).forEach(y=>{const S=e[y];Array.isArray(S)&&S.forEach(E=>{const I=E==null?void 0:E.id;if(I==null||I==="")return;(Array.isArray(E==null?void 0:E.data)?E.data:[]).forEach(N=>{const j=Sdt(N==null?void 0:N.ts,n),k=Number(N==null?void 0:N.val);if(j===null||!Number.isFinite(k))return;if(r===DD.averageByType){const J=`avg:${y}`;f.has(J)||(f.add(J),s.push({key:J,label:wdt(y),sensorType:y}));const ie=i.get(j)||{timestampMs:j},Q=ie[J]||{sum:0,count:0};Q.sum+=k,Q.count+=1,ie[J]=Q,i.set(j,ie);return}const V=`${y}:${I}`;f.has(V)||(f.add(V),s.push({key:V,label:xdt(y,I),sensorType:y,sensorId:I}));const K=i.get(j)||{timestampMs:j};K[V]=k,i.set(j,K)})})}),{rows:[...i.values()].map(y=>{if(r!==DD.averageByType)return y;const S={timestampMs:y.timestampMs};return s.forEach(E=>{const I=y[E.key];I&&I.count>0&&(S[E.key]=mdt(I.sum/I.count))}),S}).sort((y,S)=>y.timestampMs-S.timestampMs),series:s}};class Tdt extends tt.Component{constructor(t){super(t),this.handleDownloadClick=this.handleDownloadClick.bind(this),this.handleDownloadInpClick=this.handleDownloadInpClick.bind(this),this.handleAverageOnlyToggle=this.handleAverageOnlyToggle.bind(this),this.state={showAverageOnly:!0}}componentDidUpdate(t){!t.show&&this.props.show&&!this.state.showAverageOnly&&this.setState({showAverageOnly:!0})}handleDownloadClick(t){t.preventDefault();var n=new Blob([this.props.csv],{type:"application/csv"});BQ.saveAs(n,"rainfall.csv",{autoBom:!0})}handleDownloadInpClick(t){if(t.preventDefault(),!this.props.hasSwmmData)return;const n=new Blob([this.props.inp],{type:"text/plain;charset=utf-8"});BQ.saveAs(n,"rainfall_swmm.inp",{autoBom:!0})}handleAverageOnlyToggle(t){this.setState({showAverageOnly:t.currentTarget.checked})}render(){let t=this.props.fetchHistoryItem.fetchKwargs,n=t.sensorLocations,r=n.gauge,i=n.pixel,s=r.length+i.length,f=this.state.showAverageOnly?this.props.chartRowsAverageByType:this.props.chartRowsPerSensor,a=this.state.showAverageOnly?this.props.chartSeriesAverageByType:this.props.chartSeriesPerSensor,p=`${this.props.rows.length} total records across ${s} sensors`;return Oe.jsxs(Zs,{show:this.props.show,onHide:this.props.onHide,size:"xl",dialogClassName:"min-vw-95",animation:!1,fullscreen:"xl-down",children:[Oe.jsx(Zs.Header,{closeButton:!0,children:Oe.jsxs(Zs.Title,{className:"w-100",children:[Oe.jsx(xa,{children:Oe.jsxs(Gr,{children:[Oe.jsxs("h4",{children:[Sn(t.startDt).format("DD MMM YYYY, h:mm a")," to ",Sn(t.endDt).format("DD MMM YYYY, h:mm a")]}),Oe.jsx("hr",{})]})}),r.length>0?Oe.jsxs(xa,{children:[Oe.jsx(Gr,{md:3,children:Oe.jsx("small",{children:"Gauges:"})}),Oe.jsx(Gr,{md:9,children:Oe.jsx("small",{children:r.map(y=>y.label).join(", ")})})]}):null,i.length>0?Oe.jsxs(xa,{children:[Oe.jsx(Gr,{md:3,children:Oe.jsx("small",{children:"Pixels:"})}),Oe.jsx(Gr,{md:9,children:Oe.jsxs("small",{children:[i.length," pixels queried"]})})]}):null,Oe.jsxs(xa,{children:[Oe.jsx(Gr,{md:3,children:Oe.jsx("small",{children:"Interval:"})}),Oe.jsx(Gr,{md:9,children:Oe.jsx("small",{children:t.rollup})})]})]})}),Oe.jsxs(Zs.Body,{children:[Oe.jsxs(xa,{className:"download-modal-download-row",children:[Oe.jsx(Gr,{sm:3,children:Oe.jsx("p",{className:"mb-0",children:"Download as:"})}),Oe.jsx(Gr,{sm:3,children:Oe.jsx(hc,{className:"w-100",variant:"outline-primary",size:"sm",onClick:this.handleDownloadClick,children:"CSV"})}),Oe.jsx(Gr,{sm:3,children:Oe.jsx(hc,{className:"w-100",disabled:!this.props.hasSwmmData,variant:"outline-primary",size:"sm",onClick:this.handleDownloadInpClick,children:"SWMM (.inp)"})})]}),Oe.jsx(xa,{children:Oe.jsxs(Gr,{children:[Oe.jsx("p",{className:"small download-modal-chart-meta",children:Oe.jsx("em",{children:p})}),Oe.jsxs("div",{className:"border-top mt-3 py-3",children:[Oe.jsx(Vb.Check,{checked:this.state.showAverageOnly,className:"download-modal-average-toggle",id:"download-average-only-toggle",label:"Average by Type",onChange:this.handleAverageOnlyToggle,type:"switch"}),Oe.jsx(udt,{rows:f,series:a,showLegend:this.state.showAverageOnly})]})]})})]}),Oe.jsx(Zs.Footer,{children:Oe.jsx(hc,{variant:"outline-primary",onClick:this.props.onHide,children:"Close"})})]})}}const Edt=(e,t)=>{var S,E;let n=t.fetchHistoryItem.results||{},{rows:r,fields:i}=bdt(n),{rows:s,series:f}=Sae(n,{timestampRule:xp.start}),{rows:a,series:p}=Sae(n,{timestampRule:xp.start,seriesMode:DD.averageByType});const y=_dt(n,{rollup:(E=(S=t.fetchHistoryItem)==null?void 0:S.fetchKwargs)==null?void 0:E.rollup,timestampRule:xp.start});return{rows:r,chartRowsPerSensor:s,chartSeriesPerSensor:f,chartRowsAverageByType:a,chartSeriesAverageByType:p,hasSwmmData:f.length>0,inp:y,csv:r.length>0?sZe.unparse({fields:i,data:r}):""}},Adt=of(Edt)(Tdt);class Odt extends tt.Component{constructor(t,n){super(t,n),this.handleShow=this.handleShow.bind(this),this.handleClose=this.handleClose.bind(this),this.state={show:!1}}handleClose(t){this.setState({show:!1})}handleShow(t){this.setState({show:!0}),this.props.fetchHistoryItem.isActive||(console.log(t),console.log("Loading data from",this.props.fetchHistoryItem.requestId,"to the map"),this.props.dispatchPickDownload())}render(){let t=this.props.fetchHistoryItem,n=t.fetchKwargs,r=n.sensorLocations,i=r.gauge,s=r.pixel,f=t.results!==!1,a=t.processedKwargs,p=Fy(["deferred","failed","does not exist","error"],t.status);return Oe.jsxs("div",{className:"download-item-wrapper",children:[Oe.jsx(xa,{children:Oe.jsxs(Gr,{sm:12,children:[Oe.jsxs($b.Title,{children:[Sn(n.startDt).format("DD MMM YYYY, h:mm a")," to ",Sn(n.endDt).format("DD MMM YYYY, h:mm a")]}),Oe.jsx("hr",{})]})}),i.length>0?Oe.jsxs(xa,{children:[Oe.jsx(Gr,{lg:3,children:Oe.jsx("p",{className:"di-header",children:"Gauges:"})}),Oe.jsx(Gr,{lg:9,children:Oe.jsx("p",{children:i.map(y=>y.label).join(", ")})})]}):null,s.length>0?Oe.jsxs(xa,{children:[Oe.jsx(Gr,{lg:3,children:Oe.jsx("p",{className:"di-header",children:"Pixels:"})}),Oe.jsx(Gr,{lg:9,children:Oe.jsxs("p",{children:[s.length," pixels queried"]})})]}):null,Oe.jsxs(xa,{children:[Oe.jsx(Gr,{lg:3,children:Oe.jsx("p",{className:"di-header",children:"Aggregation:"})}),Oe.jsx(Gr,{lg:9,children:Oe.jsx("p",{children:n.rollup})})]}),a===void 0?null:Oe.jsxs(xa,{children:[Oe.jsx(Gr,{lg:3,children:Oe.jsx("p",{className:"di-header",children:"Date/time range queried:"})}),Oe.jsx(Gr,{lg:9,children:Oe.jsxs("p",{children:[a.start_dt,"/",a.end_dt]})})]}),f?Oe.jsx(xa,{children:Oe.jsx(Gr,{children:Oe.jsx(hc,{variant:"outline-primary",size:"sm",onClick:this.handleShow,children:"View and Download Results"})})}):null,p?t.messages.map((y,S)=>Oe.jsx(k4,{dismissible:!0,variant:"danger",children:Oe.jsx("small",{children:y})},S)):null,Oe.jsx(Adt,{show:this.state.show,onHide:this.handleClose,fetchHistoryItem:this.props.fetchHistoryItem})]})}}const Cdt=(e,t)=>({...t}),Mdt=(e,t)=>({dispatchPickDownload:n=>{let r={...t.fetchHistoryItem,contextType:t.contextType};e(ihe(r))}}),Ddt=of(Cdt,Mdt)(Odt);class Idt extends tt.Component{constructor(t,n){super(t,n),this.handleListClick=this.handleListClick.bind(this),this.handleDeleteClick=this.handleDeleteClick.bind(this)}handleListClick(t){this.props.pickDownload(t)}handleDeleteClick(t,n){t.preventDefault(),t.stopPropagation(),this.props.deleteDownload({requestId:n})}render(){return Oe.jsx(BD,{variant:"flush",children:this.props.fetchHistory.slice(0).reverse().map(t=>{let n=Fy(["deferred","failed","does not exist","error"],t.status),r;return t.isActive&&t.status==="finished"?r="primary":n?r="danger":r="",Oe.jsxs(BD.Item,{as:"div",className:"mx-0 download-list-item",action:!0,onClick:()=>this.handleListClick(t),variant:r,children:[Oe.jsx(VA,{className:"download-list-item-delete","aria-label":"Delete rainfall query result",onClick:i=>this.handleDeleteClick(i,t.requestId)}),Oe.jsxs(xa,{className:"g-0 download-list-item-row",children:[Oe.jsx(Gr,{sm:t.isFetching?11:12,className:"download-list-item-content",children:Oe.jsx(Ddt,{fetchHistoryItem:t,contextType:this.props.contextType,rainfallDataType:this.props.rainfallDataType,rainfallSensorType:this.props.rainfallSensorType})}),t.isFetching?Oe.jsx(Gr,{sm:1,className:"download-list-item-spinner",children:Oe.jsx(m$,{animation:"border",variant:"primary",children:Oe.jsx("span",{className:"visually-hidden",children:'"Fetching rainfall data...'})})}):null]})]},t.requestId)})})}}const Pdt=(e,t)=>{let n=t0(e,t.contextType);return{fetchHistory:n,hasDownloads:n.length>0,rainfallDataType:t.rainfallDataType}},Rdt=(e,t)=>({pickDownload:n=>{e(ihe({...n,contextType:t.contextType}))},deleteDownload:n=>{e(b$e({...n,contextType:t.contextType}))}}),kdt=of(Pdt,Rdt)(Idt);class Ldt extends tt.Component{constructor(t){super(),this.handleDownloadClick=this.handleDownloadClick.bind(this)}handleDownloadClick(){this.props.fetchRainfallData({rainfallDataType:this.props.rainfallDataType,contextType:this.props.contextType})}render(){return Oe.jsxs("div",{children:[Oe.jsx($b,{children:Oe.jsxs($b.Body,{children:[Oe.jsx(x7e,{rainfallDataType:this.props.rainfallDataType,contextType:this.props.contextType}),Oe.jsx("hr",{}),Oe.jsx(eZe,{rainfallDataType:this.props.rainfallDataType,contextType:this.props.contextType}),Oe.jsx("hr",{}),Oe.jsx(iZe,{rainfallDataType:this.props.rainfallDataType,contextType:this.props.contextType}),Oe.jsx("hr",{}),Oe.jsx(hc,{onClick:this.handleDownloadClick,disabled:!this.props.hasKwargs,block:!0,children:"Get Rainfall Data"})]})}),Oe.jsx("br",{}),this.props.hasDownloads?Oe.jsxs($b,{children:[Oe.jsx($b.Header,{children:"Retrieved Rainfall Data"}),Oe.jsx(kdt,{contextType:this.props.contextType,rainfallDataType:this.props.rainfallDataType})]}):null]})}}function zdt(e,t){let n=Tje(e,t.contextType),r=t0(e,t.contextType);return{hasKwargs:!Mj(n),hasDownloads:r.length>0}}const Ndt=(e,t)=>({fetchRainfallData:n=>{e(v$e(n))}}),C4=of(zdt,Ndt)(Ldt),Fdt=Oe.jsxs(ex,{id:"popover-basic",children:[Oe.jsx(ex.Header,{as:"h3",children:"Provisional Data Disclaimer"}),Oe.jsx(ex.Body,{children:"Data shown here are provisional and subject to revision until they have been thoroughly reviewed and received final approval. Current condition data relayed by satellite or other telemetry are automatically screened to not display improbable values until they can be verified. Provisional data may be inaccurate due to instrument malfunctions or physical changes at the measurement site. Subsequent review based on field inspections and measurements may result in significant revisions to the data. Data users are cautioned to consider carefully the provisional nature of the information before using it for decisions that concern personal or public safety or the conduct of business that involves substantial monetary or operational consequences. Information concerning the accuracy and appropriate uses of these data or concerning other hydrologic data may be obtained from the 3RWW."})]});class Bdt extends tt.Component{render(){return Oe.jsx(xa,{children:Oe.jsxs(Gr,{children:[Oe.jsx("h1",{className:"data-type-header",children:"Get Real-time Rainfall Data"}),Oe.jsxs("p",{children:["Download real-time, provisional rainfall measurements are available from the rain gauge network and NEXRAD radar. This data is updated every 15 minutes.",Oe.jsx("small",{className:"my-3",children:Oe.jsx(lse,{trigger:"click",placement:"bottom",overlay:Fdt,children:Oe.jsx(hc,{variant:"light",size:"sm",children:"Provisional Data Disclaimer"})})})]})]})})}}class jdt extends tt.Component{render(){return this.props.isAppThinking?Oe.jsxs("div",{className:"thinking-overlay",children:[Oe.jsx("div",{className:"d-flex thinking-content",children:Oe.jsxs("span",{className:"fa-layers fa-fw",children:[Oe.jsx(mx,{icon:qEe,pulse:!0,size:"8x"}),Oe.jsx(mx,{icon:VEe,size:"4x",transform:"right-8"})]})}),Oe.jsx("p",{className:"debug-messages",children:this.props.message})]}):null}}function Udt(e){let t=e.progress.messages;return{isAppThinking:e.progress.isThinking>0,message:t[t.length-1]}}const $dt=of(Udt)(jdt);class Vdt extends tt.Component{render(){return Oe.jsxs("div",{className:"layout-root",children:[Oe.jsx($dt,{}),Oe.jsx(xa,{children:Oe.jsx(Gr,{})}),Oe.jsxs(xa,{className:"layout-main-row g-0",children:[Oe.jsx(Gr,{sm:7,className:"map-column",children:Oe.jsx(E8e,{activeTab:this.props.tab,token:this.props.token,styleUrl:this.props.styleId,latitude:this.props.latitude,longitude:this.props.longitude,zoom:this.props.zoom})}),Oe.jsx(Gr,{sm:5,className:"sidebar-column",children:Oe.jsx(roe,{className:"sidebar mt-3",children:Oe.jsxs(UP,{children:[Oe.jsxs(Ew,{active:this.props.tab===fi.legacyRealtime,eventKey:fi.legacyRealtime,title:"Real-Time Rainfall",children:[Oe.jsx(Bdt,{}),Oe.jsx(C4,{contextType:fi.legacyRealtime,rainfallDataType:Qm.realtime,rainfallSensorTypes:[zl.gauge,zl.pixel]})]}),Oe.jsxs(Ew,{active:this.props.tab===fi.legacyGauge,eventKey:fi.legacyGauge,title:"Historical Rain Gauge",children:[Oe.jsx("h1",{className:"data-type-header",children:"Get Historical Rain Gauge Data"}),Oe.jsx("p",{children:"Download historic rain gauge data, which has been through a QA/QC process with ALCOSAN and 3RWW, during which any data errors caused by the gauge hardware have been addressed."}),Oe.jsx(C4,{contextType:fi.legacyGauge,rainfallDataType:Qm.historic,rainfallSensorTypes:[zl.gauge]})]}),Oe.jsxs(Ew,{active:this.props.tab===fi.legacyGarr,eventKey:fi.legacyGarr,title:"Calibrated Radar Rainfall",children:[Oe.jsx("h1",{className:"data-type-header",children:"Get Calibrated Radar Rainfall Data"}),Oe.jsxs("p",{children:["Download calibrated radar rainfall data, which is NEXRAD radar rainfall data adjusted using 3RWW's rain gauge network. Calibration is performed by ",Oe.jsx("a",{href:"https://www.vieuxinc.com/",target:"_blank",children:"Vieux Associates"}),"."]}),Oe.jsx(C4,{contextType:fi.legacyGarr,rainfallDataType:Qm.historic,rainfallSensorTypes:[zl.pixel]})]})]})})})]})]})}}function qdt(e){return{...e.initMap,tab:e.progress.tab}}const Hdt={switchContext:ahe},Gdt=of(qdt,Hdt)(Vdt);class Ydt extends tt.Component{render(){return Oe.jsxs("div",{className:"app-shell",children:[Oe.jsx(E$e,{isloading:this.props.loading}),Oe.jsx(Gdt,{})]})}}function Wdt(e){return{...e.initMap}}const Xdt=of(Wdt)(Ydt);console.log("Hello there curious person! The 3RWW Rainfall API is located at",e0,"- check it out for more powerful querying capability!");const Rye=document.getElementById("root");if(!Rye)throw new Error("Missing #root element");Eae.createRoot(Rye).render(Oe.jsx(qbe,{store:Hv,children:Oe.jsx(Xdt,{})}))});export default Zdt();
