var I0e=Object.defineProperty;var P0e=(e,t,n)=>t in e?I0e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var R0e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ir=(e,t,n)=>P0e(e,typeof t!="symbol"?t+"":t,n);var Cdt=R0e((Kf,Mu)=>{function k0e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ga(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function L0e(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var QL={exports:{}},xE={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h7;function z0e(){if(h7)return xE;h7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var f=null;if(s!==void 0&&(f=""+s),i.key!==void 0&&(f=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:f,ref:i!==void 0?i:null,props:s}}return xE.Fragment=t,xE.jsx=n,xE.jsxs=n,xE}var d7;function F0e(){return d7||(d7=1,QL.exports=z0e()),QL.exports}var Oe=F0e(),JL={exports:{}},wE={},e3={exports:{}},t3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p7;function N0e(){return p7||(p7=1,(function(e){function t(Ee,Ne){var at=Ee.length;Ee.push(Ne);e:for(;0<at;){var yt=at-1>>>1,je=Ee[yt];if(0<i(je,Ne))Ee[yt]=Ne,Ee[at]=je,at=yt;else break e}}function n(Ee){return Ee.length===0?null:Ee[0]}function r(Ee){if(Ee.length===0)return null;var Ne=Ee[0],at=Ee.pop();if(at!==Ne){Ee[0]=at;e:for(var yt=0,je=Ee.length,Ke=je>>>1;yt<Ke;){var it=2*(yt+1)-1,Pe=Ee[it],jt=it+1,sn=Ee[jt];if(0>i(Pe,at))jt<je&&0>i(sn,Pe)?(Ee[yt]=sn,Ee[jt]=at,yt=jt):(Ee[yt]=Pe,Ee[it]=at,yt=it);else if(jt<je&&0>i(sn,at))Ee[yt]=sn,Ee[jt]=at,yt=jt;else break e}}return Ne}function i(Ee,Ne){var at=Ee.sortIndex-Ne.sortIndex;return at!==0?at:Ee.id-Ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var f=Date,a=f.now();e.unstable_now=function(){return f.now()-a}}var p=[],_=[],S=1,E=null,I=3,z=!1,F=!1,U=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function ie(Ee){for(var Ne=n(_);Ne!==null;){if(Ne.callback===null)r(_);else if(Ne.startTime<=Ee)r(_),Ne.sortIndex=Ne.expirationTime,t(p,Ne);else break;Ne=n(_)}}function Q(Ee){if(U=!1,ie(Ee),!F)if(n(p)!==null)F=!0,W||(W=!0,ye());else{var Ne=n(_);Ne!==null&&Be(Q,Ne.startTime-Ee)}}var W=!1,te=-1,X=5,ae=-1;function le(){return k?!0:!(e.unstable_now()-ae<X)}function ge(){if(k=!1,W){var Ee=e.unstable_now();ae=Ee;var Ne=!0;try{e:{F=!1,U&&(U=!1,K(te),te=-1),z=!0;var at=I;try{t:{for(ie(Ee),E=n(p);E!==null&&!(E.expirationTime>Ee&&le());){var yt=E.callback;if(typeof yt=="function"){E.callback=null,I=E.priorityLevel;var je=yt(E.expirationTime<=Ee);if(Ee=e.unstable_now(),typeof je=="function"){E.callback=je,ie(Ee),Ne=!0;break t}E===n(p)&&r(p),ie(Ee)}else r(p);E=n(p)}if(E!==null)Ne=!0;else{var Ke=n(_);Ke!==null&&Be(Q,Ke.startTime-Ee),Ne=!1}}break e}finally{E=null,I=at,z=!1}Ne=void 0}}finally{Ne?ye():W=!1}}}var ye;if(typeof J=="function")ye=function(){J(ge)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,He=De.port2;De.port1.onmessage=ge,ye=function(){He.postMessage(null)}}else ye=function(){V(ge,0)};function Be(Ee,Ne){te=V(function(){Ee(e.unstable_now())},Ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ee){Ee.callback=null},e.unstable_forceFrameRate=function(Ee){0>Ee||125<Ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<Ee?Math.floor(1e3/Ee):5},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_next=function(Ee){switch(I){case 1:case 2:case 3:var Ne=3;break;default:Ne=I}var at=I;I=Ne;try{return Ee()}finally{I=at}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(Ee,Ne){switch(Ee){case 1:case 2:case 3:case 4:case 5:break;default:Ee=3}var at=I;I=Ee;try{return Ne()}finally{I=at}},e.unstable_scheduleCallback=function(Ee,Ne,at){var yt=e.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?yt+at:yt):at=yt,Ee){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=at+je,Ee={id:S++,callback:Ne,priorityLevel:Ee,startTime:at,expirationTime:je,sortIndex:-1},at>yt?(Ee.sortIndex=at,t(_,Ee),n(p)===null&&Ee===n(_)&&(U?(K(te),te=-1):U=!0,Be(Q,at-yt))):(Ee.sortIndex=je,t(p,Ee),F||z||(F=!0,W||(W=!0,ye()))),Ee},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(Ee){var Ne=I;return function(){var at=I;I=Ne;try{return Ee.apply(this,arguments)}finally{I=at}}}})(t3)),t3}var m7;function B0e(){return m7||(m7=1,e3.exports=N0e()),e3.exports}var n3={exports:{}},gi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g7;function j0e(){if(g7)return gi;g7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),f=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),I=Symbol.iterator;function z(Ke){return Ke===null||typeof Ke!="object"?null:(Ke=I&&Ke[I]||Ke["@@iterator"],typeof Ke=="function"?Ke:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,k={};function V(Ke,it,Pe){this.props=Ke,this.context=it,this.refs=k,this.updater=Pe||F}V.prototype.isReactComponent={},V.prototype.setState=function(Ke,it){if(typeof Ke!="object"&&typeof Ke!="function"&&Ke!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ke,it,"setState")},V.prototype.forceUpdate=function(Ke){this.updater.enqueueForceUpdate(this,Ke,"forceUpdate")};function K(){}K.prototype=V.prototype;function J(Ke,it,Pe){this.props=Ke,this.context=it,this.refs=k,this.updater=Pe||F}var ie=J.prototype=new K;ie.constructor=J,U(ie,V.prototype),ie.isPureReactComponent=!0;var Q=Array.isArray;function W(){}var te={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function ae(Ke,it,Pe){var jt=Pe.ref;return{$$typeof:e,type:Ke,key:it,ref:jt!==void 0?jt:null,props:Pe}}function le(Ke,it){return ae(Ke.type,it,Ke.props)}function ge(Ke){return typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===e}function ye(Ke){var it={"=":"=0",":":"=2"};return"$"+Ke.replace(/[=:]/g,function(Pe){return it[Pe]})}var De=/\/+/g;function He(Ke,it){return typeof Ke=="object"&&Ke!==null&&Ke.key!=null?ye(""+Ke.key):it.toString(36)}function Be(Ke){switch(Ke.status){case"fulfilled":return Ke.value;case"rejected":throw Ke.reason;default:switch(typeof Ke.status=="string"?Ke.then(W,W):(Ke.status="pending",Ke.then(function(it){Ke.status==="pending"&&(Ke.status="fulfilled",Ke.value=it)},function(it){Ke.status==="pending"&&(Ke.status="rejected",Ke.reason=it)})),Ke.status){case"fulfilled":return Ke.value;case"rejected":throw Ke.reason}}throw Ke}function Ee(Ke,it,Pe,jt,sn){var dn=typeof Ke;(dn==="undefined"||dn==="boolean")&&(Ke=null);var Sn=!1;if(Ke===null)Sn=!0;else switch(dn){case"bigint":case"string":case"number":Sn=!0;break;case"object":switch(Ke.$$typeof){case e:case t:Sn=!0;break;case S:return Sn=Ke._init,Ee(Sn(Ke._payload),it,Pe,jt,sn)}}if(Sn)return sn=sn(Ke),Sn=jt===""?"."+He(Ke,0):jt,Q(sn)?(Pe="",Sn!=null&&(Pe=Sn.replace(De,"$&/")+"/"),Ee(sn,it,Pe,"",function(Ye){return Ye})):sn!=null&&(ge(sn)&&(sn=le(sn,Pe+(sn.key==null||Ke&&Ke.key===sn.key?"":(""+sn.key).replace(De,"$&/")+"/")+Sn)),it.push(sn)),1;Sn=0;var Ut=jt===""?".":jt+":";if(Q(Ke))for(var xe=0;xe<Ke.length;xe++)jt=Ke[xe],dn=Ut+He(jt,xe),Sn+=Ee(jt,it,Pe,dn,sn);else if(xe=z(Ke),typeof xe=="function")for(Ke=xe.call(Ke),xe=0;!(jt=Ke.next()).done;)jt=jt.value,dn=Ut+He(jt,xe++),Sn+=Ee(jt,it,Pe,dn,sn);else if(dn==="object"){if(typeof Ke.then=="function")return Ee(Be(Ke),it,Pe,jt,sn);throw it=String(Ke),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(Ke).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return Sn}function Ne(Ke,it,Pe){if(Ke==null)return Ke;var jt=[],sn=0;return Ee(Ke,jt,"","",function(dn){return it.call(Pe,dn,sn++)}),jt}function at(Ke){if(Ke._status===-1){var it=Ke._result;it=it(),it.then(function(Pe){(Ke._status===0||Ke._status===-1)&&(Ke._status=1,Ke._result=Pe)},function(Pe){(Ke._status===0||Ke._status===-1)&&(Ke._status=2,Ke._result=Pe)}),Ke._status===-1&&(Ke._status=0,Ke._result=it)}if(Ke._status===1)return Ke._result.default;throw Ke._result}var yt=typeof reportError=="function"?reportError:function(Ke){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ke=="object"&&Ke!==null&&typeof Ke.message=="string"?String(Ke.message):String(Ke),error:Ke});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ke);return}console.error(Ke)},je={map:Ne,forEach:function(Ke,it,Pe){Ne(Ke,function(){it.apply(this,arguments)},Pe)},count:function(Ke){var it=0;return Ne(Ke,function(){it++}),it},toArray:function(Ke){return Ne(Ke,function(it){return it})||[]},only:function(Ke){if(!ge(Ke))throw Error("React.Children.only expected to receive a single React element child.");return Ke}};return gi.Activity=E,gi.Children=je,gi.Component=V,gi.Fragment=n,gi.Profiler=i,gi.PureComponent=J,gi.StrictMode=r,gi.Suspense=p,gi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,gi.__COMPILER_RUNTIME={__proto__:null,c:function(Ke){return te.H.useMemoCache(Ke)}},gi.cache=function(Ke){return function(){return Ke.apply(null,arguments)}},gi.cacheSignal=function(){return null},gi.cloneElement=function(Ke,it,Pe){if(Ke==null)throw Error("The argument must be a React element, but you passed "+Ke+".");var jt=U({},Ke.props),sn=Ke.key;if(it!=null)for(dn in it.key!==void 0&&(sn=""+it.key),it)!X.call(it,dn)||dn==="key"||dn==="__self"||dn==="__source"||dn==="ref"&&it.ref===void 0||(jt[dn]=it[dn]);var dn=arguments.length-2;if(dn===1)jt.children=Pe;else if(1<dn){for(var Sn=Array(dn),Ut=0;Ut<dn;Ut++)Sn[Ut]=arguments[Ut+2];jt.children=Sn}return ae(Ke.type,sn,jt)},gi.createContext=function(Ke){return Ke={$$typeof:f,_currentValue:Ke,_currentValue2:Ke,_threadCount:0,Provider:null,Consumer:null},Ke.Provider=Ke,Ke.Consumer={$$typeof:s,_context:Ke},Ke},gi.createElement=function(Ke,it,Pe){var jt,sn={},dn=null;if(it!=null)for(jt in it.key!==void 0&&(dn=""+it.key),it)X.call(it,jt)&&jt!=="key"&&jt!=="__self"&&jt!=="__source"&&(sn[jt]=it[jt]);var Sn=arguments.length-2;if(Sn===1)sn.children=Pe;else if(1<Sn){for(var Ut=Array(Sn),xe=0;xe<Sn;xe++)Ut[xe]=arguments[xe+2];sn.children=Ut}if(Ke&&Ke.defaultProps)for(jt in Sn=Ke.defaultProps,Sn)sn[jt]===void 0&&(sn[jt]=Sn[jt]);return ae(Ke,dn,sn)},gi.createRef=function(){return{current:null}},gi.forwardRef=function(Ke){return{$$typeof:a,render:Ke}},gi.isValidElement=ge,gi.lazy=function(Ke){return{$$typeof:S,_payload:{_status:-1,_result:Ke},_init:at}},gi.memo=function(Ke,it){return{$$typeof:_,type:Ke,compare:it===void 0?null:it}},gi.startTransition=function(Ke){var it=te.T,Pe={};te.T=Pe;try{var jt=Ke(),sn=te.S;sn!==null&&sn(Pe,jt),typeof jt=="object"&&jt!==null&&typeof jt.then=="function"&&jt.then(W,yt)}catch(dn){yt(dn)}finally{it!==null&&Pe.types!==null&&(it.types=Pe.types),te.T=it}},gi.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},gi.use=function(Ke){return te.H.use(Ke)},gi.useActionState=function(Ke,it,Pe){return te.H.useActionState(Ke,it,Pe)},gi.useCallback=function(Ke,it){return te.H.useCallback(Ke,it)},gi.useContext=function(Ke){return te.H.useContext(Ke)},gi.useDebugValue=function(){},gi.useDeferredValue=function(Ke,it){return te.H.useDeferredValue(Ke,it)},gi.useEffect=function(Ke,it){return te.H.useEffect(Ke,it)},gi.useEffectEvent=function(Ke){return te.H.useEffectEvent(Ke)},gi.useId=function(){return te.H.useId()},gi.useImperativeHandle=function(Ke,it,Pe){return te.H.useImperativeHandle(Ke,it,Pe)},gi.useInsertionEffect=function(Ke,it){return te.H.useInsertionEffect(Ke,it)},gi.useLayoutEffect=function(Ke,it){return te.H.useLayoutEffect(Ke,it)},gi.useMemo=function(Ke,it){return te.H.useMemo(Ke,it)},gi.useOptimistic=function(Ke,it){return te.H.useOptimistic(Ke,it)},gi.useReducer=function(Ke,it,Pe){return te.H.useReducer(Ke,it,Pe)},gi.useRef=function(Ke){return te.H.useRef(Ke)},gi.useState=function(Ke){return te.H.useState(Ke)},gi.useSyncExternalStore=function(Ke,it,Pe){return te.H.useSyncExternalStore(Ke,it,Pe)},gi.useTransition=function(){return te.H.useTransition()},gi.version="19.2.4",gi}var y7;function DP(){return y7||(y7=1,n3.exports=j0e()),n3.exports}var r3={exports:{}},vu={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _7;function U0e(){if(_7)return vu;_7=1;var e=DP();function t(p){var _="https://react.dev/errors/"+p;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+p+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(p,_,S){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:E==null?null:""+E,children:p,containerInfo:_,implementation:S}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(p,_){if(p==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return vu.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vu.createPortal=function(p,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return s(p,_,null,S)},vu.flushSync=function(p){var _=f.T,S=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=_,r.p=S,r.d.f()}},vu.preconnect=function(p,_){typeof p=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(p,_))},vu.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},vu.preinit=function(p,_){if(typeof p=="string"&&_&&typeof _.as=="string"){var S=_.as,E=a(S,_.crossOrigin),I=typeof _.integrity=="string"?_.integrity:void 0,z=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?r.d.S(p,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:E,integrity:I,fetchPriority:z}):S==="script"&&r.d.X(p,{crossOrigin:E,integrity:I,fetchPriority:z,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},vu.preinitModule=function(p,_){if(typeof p=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=a(_.as,_.crossOrigin);r.d.M(p,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(p)},vu.preload=function(p,_){if(typeof p=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,E=a(S,_.crossOrigin);r.d.L(p,S,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},vu.preloadModule=function(p,_){if(typeof p=="string")if(_){var S=a(_.as,_.crossOrigin);r.d.m(p,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(p)},vu.requestFormReset=function(p){r.d.r(p)},vu.unstable_batchedUpdates=function(p,_){return p(_)},vu.useFormState=function(p,_,S){return f.H.useFormState(p,_,S)},vu.useFormStatus=function(){return f.H.useHostTransitionStatus()},vu.version="19.2.4",vu}var v7;function _ae(){if(v7)return r3.exports;v7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),r3.exports=U0e(),r3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b7;function $0e(){if(b7)return wE;b7=1;var e=B0e(),t=DP(),n=_ae();function r(m){var x="https://react.dev/errors/"+m;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)x+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function s(m){var x=m,C=m;if(m.alternate)for(;x.return;)x=x.return;else{m=x;do x=m,(x.flags&4098)!==0&&(C=x.return),m=x.return;while(m)}return x.tag===3?C:null}function f(m){if(m.tag===13){var x=m.memoizedState;if(x===null&&(m=m.alternate,m!==null&&(x=m.memoizedState)),x!==null)return x.dehydrated}return null}function a(m){if(m.tag===31){var x=m.memoizedState;if(x===null&&(m=m.alternate,m!==null&&(x=m.memoizedState)),x!==null)return x.dehydrated}return null}function p(m){if(s(m)!==m)throw Error(r(188))}function _(m){var x=m.alternate;if(!x){if(x=s(m),x===null)throw Error(r(188));return x!==m?null:m}for(var C=m,L=x;;){var Y=C.return;if(Y===null)break;var ne=Y.alternate;if(ne===null){if(L=Y.return,L!==null){C=L;continue}break}if(Y.child===ne.child){for(ne=Y.child;ne;){if(ne===C)return p(Y),m;if(ne===L)return p(Y),x;ne=ne.sibling}throw Error(r(188))}if(C.return!==L.return)C=Y,L=ne;else{for(var Te=!1,Xe=Y.child;Xe;){if(Xe===C){Te=!0,C=Y,L=ne;break}if(Xe===L){Te=!0,L=Y,C=ne;break}Xe=Xe.sibling}if(!Te){for(Xe=ne.child;Xe;){if(Xe===C){Te=!0,C=ne,L=Y;break}if(Xe===L){Te=!0,L=ne,C=Y;break}Xe=Xe.sibling}if(!Te)throw Error(r(189))}}if(C.alternate!==L)throw Error(r(190))}if(C.tag!==3)throw Error(r(188));return C.stateNode.current===C?m:x}function S(m){var x=m.tag;if(x===5||x===26||x===27||x===6)return m;for(m=m.child;m!==null;){if(x=S(m),x!==null)return x;m=m.sibling}return null}var E=Object.assign,I=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),J=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),ge=Symbol.iterator;function ye(m){return m===null||typeof m!="object"?null:(m=ge&&m[ge]||m["@@iterator"],typeof m=="function"?m:null)}var De=Symbol.for("react.client.reference");function He(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===De?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case U:return"Fragment";case V:return"Profiler";case k:return"StrictMode";case Q:return"Suspense";case W:return"SuspenseList";case ae:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case F:return"Portal";case J:return m.displayName||"Context";case K:return(m._context.displayName||"Context")+".Consumer";case ie:var x=m.render;return m=m.displayName,m||(m=x.displayName||x.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case te:return x=m.displayName||null,x!==null?x:He(m.type)||"Memo";case X:x=m._payload,m=m._init;try{return He(m(x))}catch{}}return null}var Be=Array.isArray,Ee=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},yt=[],je=-1;function Ke(m){return{current:m}}function it(m){0>je||(m.current=yt[je],yt[je]=null,je--)}function Pe(m,x){je++,yt[je]=m.current,m.current=x}var jt=Ke(null),sn=Ke(null),dn=Ke(null),Sn=Ke(null);function Ut(m,x){switch(Pe(dn,x),Pe(sn,m),Pe(jt,null),x.nodeType){case 9:case 11:m=(m=x.documentElement)&&(m=m.namespaceURI)?AT(m):0;break;default:if(m=x.tagName,x=x.namespaceURI)x=AT(x),m=b1(x,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}it(jt),Pe(jt,m)}function xe(){it(jt),it(sn),it(dn)}function Ye(m){m.memoizedState!==null&&Pe(Sn,m);var x=jt.current,C=b1(x,m.type);x!==C&&(Pe(sn,m),Pe(jt,C))}function ct(m){sn.current===m&&(it(jt),it(sn)),Sn.current===m&&(it(Sn),Yc._currentValue=at)}var mt,Ct;function Yt(m){if(mt===void 0)try{throw Error()}catch(C){var x=C.stack.trim().match(/\n( *(at )?)/);mt=x&&x[1]||"",Ct=-1<C.stack.indexOf(`
    at`)?" (<anonymous>)":-1<C.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mt+m+Ct}var gn=!1;function En(m,x){if(!m||gn)return"";gn=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var L={DetermineComponentFrameRoot:function(){try{if(x){var wn=function(){throw Error()};if(Object.defineProperty(wn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wn,[])}catch(ln){var en=ln}Reflect.construct(m,[],wn)}else{try{wn.call()}catch(ln){en=ln}m.call(wn.prototype)}}else{try{throw Error()}catch(ln){en=ln}(wn=m())&&typeof wn.catch=="function"&&wn.catch(function(){})}}catch(ln){if(ln&&en&&typeof ln.stack=="string")return[ln.stack,en.stack]}return[null,null]}};L.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Y=Object.getOwnPropertyDescriptor(L.DetermineComponentFrameRoot,"name");Y&&Y.configurable&&Object.defineProperty(L.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ne=L.DetermineComponentFrameRoot(),Te=ne[0],Xe=ne[1];if(Te&&Xe){var St=Te.split(`
`),Qt=Xe.split(`
`);for(Y=L=0;L<St.length&&!St[L].includes("DetermineComponentFrameRoot");)L++;for(;Y<Qt.length&&!Qt[Y].includes("DetermineComponentFrameRoot");)Y++;if(L===St.length||Y===Qt.length)for(L=St.length-1,Y=Qt.length-1;1<=L&&0<=Y&&St[L]!==Qt[Y];)Y--;for(;1<=L&&0<=Y;L--,Y--)if(St[L]!==Qt[Y]){if(L!==1||Y!==1)do if(L--,Y--,0>Y||St[L]!==Qt[Y]){var mn=`
`+St[L].replace(" at new "," at ");return m.displayName&&mn.includes("<anonymous>")&&(mn=mn.replace("<anonymous>",m.displayName)),mn}while(1<=L&&0<=Y);break}}}finally{gn=!1,Error.prepareStackTrace=C}return(C=m?m.displayName||m.name:"")?Yt(C):""}function or(m,x){switch(m.tag){case 26:case 27:case 5:return Yt(m.type);case 16:return Yt("Lazy");case 13:return m.child!==x&&x!==null?Yt("Suspense Fallback"):Yt("Suspense");case 19:return Yt("SuspenseList");case 0:case 15:return En(m.type,!1);case 11:return En(m.type.render,!1);case 1:return En(m.type,!0);case 31:return Yt("Activity");default:return""}}function sr(m){try{var x="",C=null;do x+=or(m,C),C=m,m=m.return;while(m);return x}catch(L){return`
Error generating stack: `+L.message+`
`+L.stack}}var Nr=Object.prototype.hasOwnProperty,Pr=e.unstable_scheduleCallback,Er=e.unstable_cancelCallback,Tr=e.unstable_shouldYield,pi=e.unstable_requestPaint,Br=e.unstable_now,hi=e.unstable_getCurrentPriorityLevel,$t=e.unstable_ImmediatePriority,Tn=e.unstable_UserBlockingPriority,ur=e.unstable_NormalPriority,Vr=e.unstable_LowPriority,jr=e.unstable_IdlePriority,Ya=e.log,vo=e.unstable_setDisableYieldValue,Yo=null,Aa=null;function Qi(m){if(typeof Ya=="function"&&vo(m),Aa&&typeof Aa.setStrictMode=="function")try{Aa.setStrictMode(Yo,m)}catch{}}var Ri=Math.clz32?Math.clz32:lf,zs=Math.log,is=Math.LN2;function lf(m){return m>>>=0,m===0?32:31-(zs(m)/is|0)|0}var zu=256,Fu=262144,uf=4194304;function mi(m){var x=m&42;if(x!==0)return x;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function oo(m,x,C){var L=m.pendingLanes;if(L===0)return 0;var Y=0,ne=m.suspendedLanes,Te=m.pingedLanes;m=m.warmLanes;var Xe=L&134217727;return Xe!==0?(L=Xe&~ne,L!==0?Y=mi(L):(Te&=Xe,Te!==0?Y=mi(Te):C||(C=Xe&~m,C!==0&&(Y=mi(C))))):(Xe=L&~ne,Xe!==0?Y=mi(Xe):Te!==0?Y=mi(Te):C||(C=L&~m,C!==0&&(Y=mi(C)))),Y===0?0:x!==0&&x!==Y&&(x&ne)===0&&(ne=Y&-Y,C=x&-x,ne>=C||ne===32&&(C&4194048)!==0)?x:Y}function ah(m,x){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&x)===0}function Ip(m,x){switch(m){case 1:case 2:case 4:case 8:case 64:return x+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wl(){var m=uf;return uf<<=1,(uf&62914560)===0&&(uf=4194304),m}function _g(m){for(var x=[],C=0;31>C;C++)x.push(m);return x}function wc(m,x){m.pendingLanes|=x,x!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function Vt(m,x,C,L,Y,ne){var Te=m.pendingLanes;m.pendingLanes=C,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=C,m.entangledLanes&=C,m.errorRecoveryDisabledLanes&=C,m.shellSuspendCounter=0;var Xe=m.entanglements,St=m.expirationTimes,Qt=m.hiddenUpdates;for(C=Te&~C;0<C;){var mn=31-Ri(C),wn=1<<mn;Xe[mn]=0,St[mn]=-1;var en=Qt[mn];if(en!==null)for(Qt[mn]=null,mn=0;mn<en.length;mn++){var ln=en[mn];ln!==null&&(ln.lane&=-536870913)}C&=~wn}L!==0&&Sc(m,L,0),ne!==0&&Y===0&&m.tag!==0&&(m.suspendedLanes|=ne&~(Te&~x))}function Sc(m,x,C){m.pendingLanes|=x,m.suspendedLanes&=~x;var L=31-Ri(x);m.entangledLanes|=x,m.entanglements[L]=m.entanglements[L]|1073741824|C&261930}function b_(m,x){var C=m.entangledLanes|=x;for(m=m.entanglements;C;){var L=31-Ri(C),Y=1<<L;Y&x|m[L]&x&&(m[L]|=x),C&=~Y}}function Pp(m,x){var C=x&-x;return C=(C&42)!==0?1:Ar(C),(C&(m.suspendedLanes|x))!==0?0:C}function Ar(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function ut(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function me(){var m=Ne.p;return m!==0?m:(m=window.event,m===void 0?32:cC(m.type))}function we(m,x){var C=Ne.p;try{return Ne.p=m,x()}finally{Ne.p=C}}var Le=Math.random().toString(36).slice(2),Qe="__reactFiber$"+Le,ze="__reactProps$"+Le,ot="__reactContainer$"+Le,_t="__reactEvents$"+Le,lt="__reactListeners$"+Le,bt="__reactHandles$"+Le,Gt="__reactResources$"+Le,Nt="__reactMarker$"+Le;function hn(m){delete m[Qe],delete m[ze],delete m[_t],delete m[lt],delete m[bt]}function Mn(m){var x=m[Qe];if(x)return x;for(var C=m.parentNode;C;){if(x=C[ot]||C[Qe]){if(C=x.alternate,x.child!==null||C!==null&&C.child!==null)for(m=DT(m);m!==null;){if(C=m[Qe])return C;m=DT(m)}return x}m=C,C=m.parentNode}return null}function Rn(m){if(m=m[Qe]||m[ot]){var x=m.tag;if(x===5||x===6||x===13||x===31||x===26||x===27||x===3)return m}return null}function Zn(m){var x=m.tag;if(x===5||x===26||x===27||x===6)return m.stateNode;throw Error(r(33))}function rr(m){var x=m[Gt];return x||(x=m[Gt]={hoistableStyles:new Map,hoistableScripts:new Map}),x}function In(m){m[Nt]=!0}var Hn=new Set,xi={};function sa(m,x){zi(m,x),zi(m+"Capture",x)}function zi(m,x){for(xi[m]=x,m=0;m<x.length;m++)Hn.add(x[m])}var _a=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ki={},Or={};function ji(m){return Nr.call(Or,m)?!0:Nr.call(ki,m)?!1:_a.test(m)?Or[m]=!0:(ki[m]=!0,!1)}function si(m,x,C){if(ji(x))if(C===null)m.removeAttribute(x);else{switch(typeof C){case"undefined":case"function":case"symbol":m.removeAttribute(x);return;case"boolean":var L=x.toLowerCase().slice(0,5);if(L!=="data-"&&L!=="aria-"){m.removeAttribute(x);return}}m.setAttribute(x,""+C)}}function li(m,x,C){if(C===null)m.removeAttribute(x);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(x);return}m.setAttribute(x,""+C)}}function wi(m,x,C,L){if(L===null)m.removeAttribute(C);else{switch(typeof L){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(C);return}m.setAttributeNS(x,C,""+L)}}function la(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function bo(m){var x=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Ja(m,x,C){var L=Object.getOwnPropertyDescriptor(m.constructor.prototype,x);if(!m.hasOwnProperty(x)&&typeof L<"u"&&typeof L.get=="function"&&typeof L.set=="function"){var Y=L.get,ne=L.set;return Object.defineProperty(m,x,{configurable:!0,get:function(){return Y.call(this)},set:function(Te){C=""+Te,ne.call(this,Te)}}),Object.defineProperty(m,x,{enumerable:L.enumerable}),{getValue:function(){return C},setValue:function(Te){C=""+Te},stopTracking:function(){m._valueTracker=null,delete m[x]}}}}function Tc(m){if(!m._valueTracker){var x=bo(m)?"checked":"value";m._valueTracker=Ja(m,x,""+m[x])}}function as(m){if(!m)return!1;var x=m._valueTracker;if(!x)return!0;var C=x.getValue(),L="";return m&&(L=bo(m)?m.checked?"true":"false":m.value),m=L,m!==C?(x.setValue(m),!0):!1}function bs(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var ru=/[\n"\\]/g;function so(m){return m.replace(ru,function(x){return"\\"+x.charCodeAt(0).toString(16)+" "})}function Fs(m,x,C,L,Y,ne,Te,Xe){m.name="",Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"?m.type=Te:m.removeAttribute("type"),x!=null?Te==="number"?(x===0&&m.value===""||m.value!=x)&&(m.value=""+la(x)):m.value!==""+la(x)&&(m.value=""+la(x)):Te!=="submit"&&Te!=="reset"||m.removeAttribute("value"),x!=null?Nu(m,Te,la(x)):C!=null?Nu(m,Te,la(C)):L!=null&&m.removeAttribute("value"),Y==null&&ne!=null&&(m.defaultChecked=!!ne),Y!=null&&(m.checked=Y&&typeof Y!="function"&&typeof Y!="symbol"),Xe!=null&&typeof Xe!="function"&&typeof Xe!="symbol"&&typeof Xe!="boolean"?m.name=""+la(Xe):m.removeAttribute("name")}function xs(m,x,C,L,Y,ne,Te,Xe){if(ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"&&(m.type=ne),x!=null||C!=null){if(!(ne!=="submit"&&ne!=="reset"||x!=null)){Tc(m);return}C=C!=null?""+la(C):"",x=x!=null?""+la(x):C,Xe||x===m.value||(m.value=x),m.defaultValue=x}L=L??Y,L=typeof L!="function"&&typeof L!="symbol"&&!!L,m.checked=Xe?m.checked:!!L,m.defaultChecked=!!L,Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"&&(m.name=Te),Tc(m)}function Nu(m,x,C){x==="number"&&bs(m.ownerDocument)===m||m.defaultValue===""+C||(m.defaultValue=""+C)}function iu(m,x,C,L){if(m=m.options,x){x={};for(var Y=0;Y<C.length;Y++)x["$"+C[Y]]=!0;for(C=0;C<m.length;C++)Y=x.hasOwnProperty("$"+m[C].value),m[C].selected!==Y&&(m[C].selected=Y),Y&&L&&(m[C].defaultSelected=!0)}else{for(C=""+la(C),x=null,Y=0;Y<m.length;Y++){if(m[Y].value===C){m[Y].selected=!0,L&&(m[Y].defaultSelected=!0);return}x!==null||m[Y].disabled||(x=m[Y])}x!==null&&(x.selected=!0)}}function Sl(m,x,C){if(x!=null&&(x=""+la(x),x!==m.value&&(m.value=x),C==null)){m.defaultValue!==x&&(m.defaultValue=x);return}m.defaultValue=C!=null?""+la(C):""}function Rp(m,x,C,L){if(x==null){if(L!=null){if(C!=null)throw Error(r(92));if(Be(L)){if(1<L.length)throw Error(r(93));L=L[0]}C=L}C==null&&(C=""),x=C}C=la(x),m.defaultValue=C,L=m.textContent,L===C&&L!==""&&L!==null&&(m.value=L),Tc(m)}function Ec(m,x){if(x){var C=m.firstChild;if(C&&C===m.lastChild&&C.nodeType===3){C.nodeValue=x;return}}m.textContent=x}var Wx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function m0(m,x,C){var L=x.indexOf("--")===0;C==null||typeof C=="boolean"||C===""?L?m.setProperty(x,""):x==="float"?m.cssFloat="":m[x]="":L?m.setProperty(x,C):typeof C!="number"||C===0||Wx.has(x)?x==="float"?m.cssFloat=C:m[x]=(""+C).trim():m[x]=C+"px"}function x_(m,x,C){if(x!=null&&typeof x!="object")throw Error(r(62));if(m=m.style,C!=null){for(var L in C)!C.hasOwnProperty(L)||x!=null&&x.hasOwnProperty(L)||(L.indexOf("--")===0?m.setProperty(L,""):L==="float"?m.cssFloat="":m[L]="");for(var Y in x)L=x[Y],x.hasOwnProperty(Y)&&C[Y]!==L&&m0(m,Y,L)}else for(var ne in x)x.hasOwnProperty(ne)&&m0(m,ne,x[ne])}function vg(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var No=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function au(m){return jl.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function xo(){}var ou=null;function oh(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Bu=null,su=null;function cf(m){var x=Rn(m);if(x&&(m=x.stateNode)){var C=m[ze]||null;e:switch(m=x.stateNode,x.type){case"input":if(Fs(m,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name),x=C.name,C.type==="radio"&&x!=null){for(C=m;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll('input[name="'+so(""+x)+'"][type="radio"]'),x=0;x<C.length;x++){var L=C[x];if(L!==m&&L.form===m.form){var Y=L[ze]||null;if(!Y)throw Error(r(90));Fs(L,Y.value,Y.defaultValue,Y.defaultValue,Y.checked,Y.defaultChecked,Y.type,Y.name)}}for(x=0;x<C.length;x++)L=C[x],L.form===m.form&&as(L)}break e;case"textarea":Sl(m,C.value,C.defaultValue);break e;case"select":x=C.value,x!=null&&iu(m,!!C.multiple,x,!1)}}}var kp=!1;function g0(m,x,C){if(kp)return m(x,C);kp=!0;try{var L=m(x);return L}finally{if(kp=!1,(Bu!==null||su!==null)&&(_i(),Bu&&(x=Bu,m=su,su=Bu=null,cf(x),m)))for(x=0;x<m.length;x++)cf(m[x])}}function Lp(m,x){var C=m.stateNode;if(C===null)return null;var L=C[ze]||null;if(L===null)return null;C=L[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(L=!L.disabled)||(m=m.type,L=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!L;break e;default:m=!1}if(m)return null;if(C&&typeof C!="function")throw Error(r(231,x,typeof C));return C}var eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),md=!1;if(eo)try{var ff={};Object.defineProperty(ff,"passive",{get:function(){md=!0}}),window.addEventListener("test",ff,ff),window.removeEventListener("test",ff,ff)}catch{md=!1}var Ns=null,gd=null,w_=null;function S_(){if(w_)return w_;var m,x=gd,C=x.length,L,Y="value"in Ns?Ns.value:Ns.textContent,ne=Y.length;for(m=0;m<C&&x[m]===Y[m];m++);var Te=C-m;for(L=1;L<=Te&&x[C-L]===Y[ne-L];L++);return w_=Y.slice(m,1<L?1-L:void 0)}function Cr(m){var x=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&x===13&&(m=13)):m=x,m===10&&(m=13),32<=m||m===13?m:0}function hf(){return!0}function bg(){return!1}function el(m){function x(C,L,Y,ne,Te){this._reactName=C,this._targetInst=Y,this.type=L,this.nativeEvent=ne,this.target=Te,this.currentTarget=null;for(var Xe in m)m.hasOwnProperty(Xe)&&(C=m[Xe],this[Xe]=C?C(ne):ne[Xe]);return this.isDefaultPrevented=(ne.defaultPrevented!=null?ne.defaultPrevented:ne.returnValue===!1)?hf:bg,this.isPropagationStopped=bg,this}return E(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=hf)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=hf)},persist:function(){},isPersistent:hf}),x}var sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lh=el(sh),lu=E({},sh,{view:0,detail:0}),xg=el(lu),zp,y0,Ac,uu=E({},lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Ac&&(Ac&&m.type==="mousemove"?(zp=m.screenX-Ac.screenX,y0=m.screenY-Ac.screenY):y0=zp=0,Ac=m),zp)},movementY:function(m){return"movementY"in m?m.movementY:y0}}),Fp=el(uu),Xx=E({},uu,{dataTransfer:0}),yd=el(Xx),df=E({},lu,{relatedTarget:0}),ws=el(df),cu=E({},sh,{animationName:0,elapsedTime:0,pseudoElement:0}),T_=el(cu),Zx=E({},sh,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),Qr=el(Zx),_0=E({},sh,{data:0}),v0=el(_0),Kx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _d(m){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(m):(m=b0[m])?!!x[m]:!1}function os(){return _d}var E_=E({},lu,{key:function(m){if(m.key){var x=Kx[m.key]||m.key;if(x!=="Unidentified")return x}return m.type==="keypress"?(m=Cr(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Vn[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(m){return m.type==="keypress"?Cr(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?Cr(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),tl=el(E_),Cn=E({},uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yr=el(Cn),qr=E({},lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),Bs=el(qr),Np=E({},sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),ii=el(Np),A_=E({},uu,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Bp=el(A_),vd=E({},sh,{newState:0,oldState:0}),Ss=el(vd),Oa=[9,13,27,32],x0=eo&&"CompositionEvent"in window,pf=null;eo&&"documentMode"in document&&(pf=document.documentMode);var w0=eo&&"TextEvent"in window&&!pf,jp=eo&&(!x0||pf&&8<pf&&11>=pf),wg=" ",O_=!1;function Sg(m,x){switch(m){case"keyup":return Oa.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ss(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Bo=!1;function nl(m,x){switch(m){case"compositionend":return ss(x);case"keypress":return x.which!==32?null:(O_=!0,wg);case"textInput":return m=x.data,m===wg&&O_?null:m;default:return null}}function S0(m,x){if(Bo)return m==="compositionend"||!x0&&Sg(m,x)?(m=S_(),w_=gd=Ns=null,Bo=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return jp&&x.locale!=="ko"?null:x.data;default:return null}}var uh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function to(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x==="input"?!!uh[m.type]:x==="textarea"}function ju(m,x,C,L){Bu?su?su.push(L):su=[L]:Bu=L,x=ob(x,"onChange"),0<x.length&&(C=new lh("onChange","change",null,C,L),m.push({event:C,listeners:x}))}var Ul=null,Ca=null;function ch(m){rb(m,0)}function Gn(m){var x=Zn(m);if(as(x))return m}function An(m,x){if(m==="change")return x}var bd=!1;if(eo){var qn;if(eo){var Up="oninput"in document;if(!Up){var $p=document.createElement("div");$p.setAttribute("oninput","return;"),Up=typeof $p.oninput=="function"}qn=Up}else qn=!1;bd=qn&&(!document.documentMode||9<document.documentMode)}function jn(){Ul&&(Ul.detachEvent("onpropertychange",C_),Ca=Ul=null)}function C_(m){if(m.propertyName==="value"&&Gn(Ca)){var x=[];ju(x,Ca,m,oh(m)),g0(ch,x)}}function T0(m,x,C){m==="focusin"?(jn(),Ul=x,Ca=C,Ul.attachEvent("onpropertychange",C_)):m==="focusout"&&jn()}function Oc(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Gn(Ca)}function Qx(m,x){if(m==="click")return Gn(x)}function Vp(m,x){if(m==="input"||m==="change")return Gn(x)}function rl(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var il=typeof Object.is=="function"?Object.is:rl;function Tl(m,x){if(il(m,x))return!0;if(typeof m!="object"||m===null||typeof x!="object"||x===null)return!1;var C=Object.keys(m),L=Object.keys(x);if(C.length!==L.length)return!1;for(L=0;L<C.length;L++){var Y=C[L];if(!Nr.call(x,Y)||!il(m[Y],x[Y]))return!1}return!0}function Tg(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function $l(m,x){var C=Tg(m);m=0;for(var L;C;){if(C.nodeType===3){if(L=m+C.textContent.length,m<=x&&L>=x)return{node:C,offset:x-m};m=L}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=Tg(C)}}function mf(m,x){return m&&x?m===x?!0:m&&m.nodeType===3?!1:x&&x.nodeType===3?mf(m,x.parentNode):"contains"in m?m.contains(x):m.compareDocumentPosition?!!(m.compareDocumentPosition(x)&16):!1:!1}function Jx(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var x=bs(m.document);x instanceof m.HTMLIFrameElement;){try{var C=typeof x.contentWindow.location.href=="string"}catch{C=!1}if(C)m=x.contentWindow;else break;x=bs(m.document)}return x}function xd(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x&&(x==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||x==="textarea"||m.contentEditable==="true")}var Eg=eo&&"documentMode"in document&&11>=document.documentMode,gf=null,M_=null,js=null,D_=!1;function Ag(m,x,C){var L=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;D_||gf==null||gf!==bs(L)||(L=gf,"selectionStart"in L&&xd(L)?L={start:L.selectionStart,end:L.selectionEnd}:(L=(L.ownerDocument&&L.ownerDocument.defaultView||window).getSelection(),L={anchorNode:L.anchorNode,anchorOffset:L.anchorOffset,focusNode:L.focusNode,focusOffset:L.focusOffset}),js&&Tl(js,L)||(js=L,L=ob(M_,"onSelect"),0<L.length&&(x=new lh("onSelect","select",null,x,C),m.push({event:x,listeners:L}),x.target=gf)))}function Uu(m,x){var C={};return C[m.toLowerCase()]=x.toLowerCase(),C["Webkit"+m]="webkit"+x,C["Moz"+m]="moz"+x,C}var Vl={animationend:Uu("Animation","AnimationEnd"),animationiteration:Uu("Animation","AnimationIteration"),animationstart:Uu("Animation","AnimationStart"),transitionrun:Uu("Transition","TransitionRun"),transitionstart:Uu("Transition","TransitionStart"),transitioncancel:Uu("Transition","TransitionCancel"),transitionend:Uu("Transition","TransitionEnd")},E0={},A0={};eo&&(A0=document.createElement("div").style,"AnimationEvent"in window||(delete Vl.animationend.animation,delete Vl.animationiteration.animation,delete Vl.animationstart.animation),"TransitionEvent"in window||delete Vl.transitionend.transition);function wd(m){if(E0[m])return E0[m];if(!Vl[m])return m;var x=Vl[m],C;for(C in x)if(x.hasOwnProperty(C)&&C in A0)return E0[m]=x[C];return m}var I_=wd("animationend"),e1=wd("animationiteration"),Cc=wd("animationstart"),t1=wd("transitionrun"),n1=wd("transitionstart"),P_=wd("transitioncancel"),R_=wd("transitionend"),yf=new Map,Us="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Us.push("scrollEnd");function ql(m,x){yf.set(m,x),sa(x,[m])}var qp=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var x=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(x))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},Ts=[],$u=0,Og=0;function Sd(){for(var m=$u,x=Og=$u=0;x<m;){var C=Ts[x];Ts[x++]=null;var L=Ts[x];Ts[x++]=null;var Y=Ts[x];Ts[x++]=null;var ne=Ts[x];if(Ts[x++]=null,L!==null&&Y!==null){var Te=L.pending;Te===null?Y.next=Y:(Y.next=Te.next,Te.next=Y),L.pending=Y}ne!==0&&k_(C,Y,ne)}}function $s(m,x,C,L){Ts[$u++]=m,Ts[$u++]=x,Ts[$u++]=C,Ts[$u++]=L,Og|=L,m.lanes|=L,m=m.alternate,m!==null&&(m.lanes|=L)}function Td(m,x,C,L){return $s(m,x,C,L),Hp(m)}function Jt(m,x){return $s(m,null,null,x),Hp(m)}function k_(m,x,C){m.lanes|=C;var L=m.alternate;L!==null&&(L.lanes|=C);for(var Y=!1,ne=m.return;ne!==null;)ne.childLanes|=C,L=ne.alternate,L!==null&&(L.childLanes|=C),ne.tag===22&&(m=ne.stateNode,m===null||m._visibility&1||(Y=!0)),m=ne,ne=ne.return;return m.tag===3?(ne=m.stateNode,Y&&x!==null&&(Y=31-Ri(C),m=ne.hiddenUpdates,L=m[Y],L===null?m[Y]=[x]:L.push(x),x.lane=C|536870912),ne):null}function Hp(m){if(50<Rr)throw Rr=0,Pi=null,Error(r(185));for(var x=m.return;x!==null;)m=x,x=m.return;return m.tag===3?m.stateNode:null}var Mc={};function Dc(m,x,C,L){this.tag=m,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function al(m,x,C,L){return new Dc(m,x,C,L)}function _f(m){return m=m.prototype,!(!m||!m.isReactComponent)}function ol(m,x){var C=m.alternate;return C===null?(C=al(m.tag,x,m.key,m.mode),C.elementType=m.elementType,C.type=m.type,C.stateNode=m.stateNode,C.alternate=m,m.alternate=C):(C.pendingProps=x,C.type=m.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=m.flags&65011712,C.childLanes=m.childLanes,C.lanes=m.lanes,C.child=m.child,C.memoizedProps=m.memoizedProps,C.memoizedState=m.memoizedState,C.updateQueue=m.updateQueue,x=m.dependencies,C.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},C.sibling=m.sibling,C.index=m.index,C.ref=m.ref,C.refCleanup=m.refCleanup,C}function vf(m,x){m.flags&=65011714;var C=m.alternate;return C===null?(m.childLanes=0,m.lanes=x,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=C.childLanes,m.lanes=C.lanes,m.child=C.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=C.memoizedProps,m.memoizedState=C.memoizedState,m.updateQueue=C.updateQueue,m.type=C.type,x=C.dependencies,m.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),m}function Ed(m,x,C,L,Y,ne){var Te=0;if(L=m,typeof m=="function")_f(m)&&(Te=1);else if(typeof m=="string")Te=iC(m,C,jt.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case ae:return m=al(31,C,x,Y),m.elementType=ae,m.lanes=ne,m;case U:return fh(C.children,Y,ne,x);case k:Te=8,Y|=24;break;case V:return m=al(12,C,x,Y|2),m.elementType=V,m.lanes=ne,m;case Q:return m=al(13,C,x,Y),m.elementType=Q,m.lanes=ne,m;case W:return m=al(19,C,x,Y),m.elementType=W,m.lanes=ne,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case J:Te=10;break e;case K:Te=9;break e;case ie:Te=11;break e;case te:Te=14;break e;case X:Te=16,L=null;break e}Te=29,C=Error(r(130,m===null?"null":typeof m,"")),L=null}return x=al(Te,C,x,Y),x.elementType=m,x.type=L,x.lanes=ne,x}function fh(m,x,C,L){return m=al(7,m,L,x),m.lanes=C,m}function Gp(m,x,C){return m=al(6,m,null,x),m.lanes=C,m}function r1(m){var x=al(18,null,null,0);return x.stateNode=m,x}function L_(m,x,C){return x=al(4,m.children!==null?m.children:[],m.key,x),x.lanes=C,x.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},x}var z_=new WeakMap;function Wo(m,x){if(typeof m=="object"&&m!==null){var C=z_.get(m);return C!==void 0?C:(x={value:m,source:x,stack:sr(x)},z_.set(m,x),x)}return{value:m,source:x,stack:sr(x)}}var xr=[],Yp=0,F_=null,Cg=0,El=[],fu=0,ci=null,Ic=1,Vu="";function qu(m,x){xr[Yp++]=Cg,xr[Yp++]=F_,F_=m,Cg=x}function Mg(m,x,C){El[fu++]=Ic,El[fu++]=Vu,El[fu++]=ci,ci=m;var L=Ic;m=Vu;var Y=32-Ri(L)-1;L&=~(1<<Y),C+=1;var ne=32-Ri(x)+Y;if(30<ne){var Te=Y-Y%5;ne=(L&(1<<Te)-1).toString(32),L>>=Te,Y-=Te,Ic=1<<32-Ri(x)+Y|C<<Y|L,Vu=ne+m}else Ic=1<<ne|C<<Y|L,Vu=m}function Dg(m){m.return!==null&&(qu(m,1),Mg(m,1,0))}function bf(m){for(;m===F_;)F_=xr[--Yp],xr[Yp]=null,Cg=xr[--Yp],xr[Yp]=null;for(;m===ci;)ci=El[--fu],El[fu]=null,Vu=El[--fu],El[fu]=null,Ic=El[--fu],El[fu]=null}function Ad(m,x){El[fu++]=Ic,El[fu++]=Vu,El[fu++]=ci,Ic=x.id,Vu=x.overflow,ci=m}var wo=null,ua=null,Di=!1,Pc=null,Hl=!1,hh=Error(r(519));function Hu(m){var x=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wp(Wo(x,m)),hh}function Ig(m){var x=m.stateNode,C=m.type,L=m.memoizedProps;switch(x[Qe]=m,x[ze]=L,C){case"dialog":Oi("cancel",x),Oi("close",x);break;case"iframe":case"object":case"embed":Oi("load",x);break;case"video":case"audio":for(C=0;C<Em.length;C++)Oi(Em[C],x);break;case"source":Oi("error",x);break;case"img":case"image":case"link":Oi("error",x),Oi("load",x);break;case"details":Oi("toggle",x);break;case"input":Oi("invalid",x),xs(x,L.value,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name,!0);break;case"select":Oi("invalid",x);break;case"textarea":Oi("invalid",x),Rp(x,L.value,L.defaultValue,L.children)}C=L.children,typeof C!="string"&&typeof C!="number"&&typeof C!="bigint"||x.textContent===""+C||L.suppressHydrationWarning===!0||XO(x.textContent,C)?(L.popover!=null&&(Oi("beforetoggle",x),Oi("toggle",x)),L.onScroll!=null&&Oi("scroll",x),L.onScrollEnd!=null&&Oi("scrollend",x),L.onClick!=null&&(x.onclick=xo),x=!0):x=!1,x||Hu(m,!0)}function N_(m){for(wo=m.return;wo;)switch(wo.tag){case 5:case 31:case 13:Hl=!1;return;case 27:case 3:Hl=!0;return;default:wo=wo.return}}function xf(m){if(m!==wo)return!1;if(!Di)return N_(m),Di=!0,!1;var x=m.tag,C;if((C=x!==3&&x!==27)&&((C=x===5)&&(C=m.type,C=!(C!=="form"&&C!=="button")||Ph(m.type,m.memoizedProps)),C=!C),C&&ua&&Hu(m),N_(m),x===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));ua=tC(m)}else if(x===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));ua=tC(m)}else x===27?(x=ua,ac(m.type)?(m=lb,lb=null,ua=m):ua=x):ua=wo?Hc(m.stateNode.nextSibling):null;return!0}function Gu(){ua=wo=null,Di=!1}function B_(){var m=Pc;return m!==null&&(rn===null?rn=m:rn.push.apply(rn,m),Pc=null),m}function Wp(m){Pc===null?Pc=[m]:Pc.push(m)}var j_=Ke(null),hu=null,Rc=null;function dh(m,x,C){Pe(j_,x._currentValue),x._currentValue=C}function wf(m){m._currentValue=j_.current,it(j_)}function O0(m,x,C){for(;m!==null;){var L=m.alternate;if((m.childLanes&x)!==x?(m.childLanes|=x,L!==null&&(L.childLanes|=x)):L!==null&&(L.childLanes&x)!==x&&(L.childLanes|=x),m===C)break;m=m.return}}function Pg(m,x,C,L){var Y=m.child;for(Y!==null&&(Y.return=m);Y!==null;){var ne=Y.dependencies;if(ne!==null){var Te=Y.child;ne=ne.firstContext;e:for(;ne!==null;){var Xe=ne;ne=Y;for(var St=0;St<x.length;St++)if(Xe.context===x[St]){ne.lanes|=C,Xe=ne.alternate,Xe!==null&&(Xe.lanes|=C),O0(ne.return,C,m),L||(Te=null);break e}ne=Xe.next}}else if(Y.tag===18){if(Te=Y.return,Te===null)throw Error(r(341));Te.lanes|=C,ne=Te.alternate,ne!==null&&(ne.lanes|=C),O0(Te,C,m),Te=null}else Te=Y.child;if(Te!==null)Te.return=Y;else for(Te=Y;Te!==null;){if(Te===m){Te=null;break}if(Y=Te.sibling,Y!==null){Y.return=Te.return,Te=Y;break}Te=Te.return}Y=Te}}function ph(m,x,C,L){m=null;for(var Y=x,ne=!1;Y!==null;){if(!ne){if((Y.flags&524288)!==0)ne=!0;else if((Y.flags&262144)!==0)break}if(Y.tag===10){var Te=Y.alternate;if(Te===null)throw Error(r(387));if(Te=Te.memoizedProps,Te!==null){var Xe=Y.type;il(Y.pendingProps.value,Te.value)||(m!==null?m.push(Xe):m=[Xe])}}else if(Y===Sn.current){if(Te=Y.alternate,Te===null)throw Error(r(387));Te.memoizedState.memoizedState!==Y.memoizedState.memoizedState&&(m!==null?m.push(Yc):m=[Yc])}Y=Y.return}m!==null&&Pg(x,m,C,L),x.flags|=262144}function Xp(m){for(m=m.firstContext;m!==null;){if(!il(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function Sf(m){hu=m,Rc=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function ls(m){return Rg(hu,m)}function Od(m,x){return hu===null&&Sf(m),Rg(m,x)}function Rg(m,x){var C=x._currentValue;if(x={context:x,memoizedValue:C,next:null},Rc===null){if(m===null)throw Error(r(308));Rc=x,m.dependencies={lanes:0,firstContext:x},m.flags|=524288}else Rc=Rc.next=x;return C}var Zp=typeof AbortController<"u"?AbortController:function(){var m=[],x=this.signal={aborted:!1,addEventListener:function(C,L){m.push(L)}};this.abort=function(){x.aborted=!0,m.forEach(function(C){return C()})}},kg=e.unstable_scheduleCallback,i1=e.unstable_NormalPriority,Yi={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kp(){return{controller:new Zp,data:new Map,refCount:0}}function Tf(m){m.refCount--,m.refCount===0&&kg(i1,function(){m.controller.abort()})}var Gl=null,Qp=0,Ef=0,mh=null;function Jp(m,x){if(Gl===null){var C=Gl=[];Qp=0,Ef=tb(),mh={status:"pending",value:void 0,then:function(L){C.push(L)}}}return Qp++,x.then(em,em),x}function em(){if(--Qp===0&&Gl!==null){mh!==null&&(mh.status="fulfilled");var m=Gl;Gl=null,Ef=0,mh=null;for(var x=0;x<m.length;x++)(0,m[x])()}}function Lg(m,x){var C=[],L={status:"pending",value:null,reason:null,then:function(Y){C.push(Y)}};return m.then(function(){L.status="fulfilled",L.value=x;for(var Y=0;Y<C.length;Y++)(0,C[Y])(x)},function(Y){for(L.status="rejected",L.reason=Y,Y=0;Y<C.length;Y++)(0,C[Y])(void 0)}),L}var zg=Ee.S;Ee.S=function(m,x){Un=Br(),typeof x=="object"&&x!==null&&typeof x.then=="function"&&Jp(m,x),zg!==null&&zg(m,x)};var Af=Ke(null);function Fg(){var m=Af.current;return m!==null?m:st.pooledCache}function tm(m,x){x===null?Pe(Af,Af.current):Pe(Af,x.pool)}function Cd(){var m=Fg();return m===null?null:{parent:Yi._currentValue,pool:m}}var nm=Error(r(460)),C0=Error(r(474)),Ng=Error(r(542)),Bg={then:function(){}};function jg(m){return m=m.status,m==="fulfilled"||m==="rejected"}function a1(m,x,C){switch(C=m[C],C===void 0?m.push(x):C!==x&&(x.then(xo,xo),x=C),x.status){case"fulfilled":return x.value;case"rejected":throw m=x.reason,gh(m),m;default:if(typeof x.status=="string")x.then(xo,xo);else{if(m=st,m!==null&&100<m.shellSuspendCounter)throw Error(r(482));m=x,m.status="pending",m.then(function(L){if(x.status==="pending"){var Y=x;Y.status="fulfilled",Y.value=L}},function(L){if(x.status==="pending"){var Y=x;Y.status="rejected",Y.reason=L}})}switch(x.status){case"fulfilled":return x.value;case"rejected":throw m=x.reason,gh(m),m}throw Of=x,nm}}function kc(m){try{var x=m._init;return x(m._payload)}catch(C){throw C!==null&&typeof C=="object"&&typeof C.then=="function"?(Of=C,nm):C}}var Of=null;function M0(){if(Of===null)throw Error(r(459));var m=Of;return Of=null,m}function gh(m){if(m===nm||m===Ng)throw Error(r(483))}var yh=null,rm=0;function Ug(m){var x=rm;return rm+=1,yh===null&&(yh=[]),a1(yh,m,x)}function Md(m,x){x=x.props.ref,m.ref=x!==void 0?x:null}function Yu(m,x){throw x.$$typeof===I?Error(r(525)):(m=Object.prototype.toString.call(x),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":m)))}function _h(m){function x(Bt,Ot){if(m){var Zt=Bt.deletions;Zt===null?(Bt.deletions=[Ot],Bt.flags|=16):Zt.push(Ot)}}function C(Bt,Ot){if(!m)return null;for(;Ot!==null;)x(Bt,Ot),Ot=Ot.sibling;return null}function L(Bt){for(var Ot=new Map;Bt!==null;)Bt.key!==null?Ot.set(Bt.key,Bt):Ot.set(Bt.index,Bt),Bt=Bt.sibling;return Ot}function Y(Bt,Ot){return Bt=ol(Bt,Ot),Bt.index=0,Bt.sibling=null,Bt}function ne(Bt,Ot,Zt){return Bt.index=Zt,m?(Zt=Bt.alternate,Zt!==null?(Zt=Zt.index,Zt<Ot?(Bt.flags|=67108866,Ot):Zt):(Bt.flags|=67108866,Ot)):(Bt.flags|=1048576,Ot)}function Te(Bt){return m&&Bt.alternate===null&&(Bt.flags|=67108866),Bt}function Xe(Bt,Ot,Zt,bn){return Ot===null||Ot.tag!==6?(Ot=Gp(Zt,Bt.mode,bn),Ot.return=Bt,Ot):(Ot=Y(Ot,Zt),Ot.return=Bt,Ot)}function St(Bt,Ot,Zt,bn){var Dr=Zt.type;return Dr===U?mn(Bt,Ot,Zt.props.children,bn,Zt.key):Ot!==null&&(Ot.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===X&&kc(Dr)===Ot.type)?(Ot=Y(Ot,Zt.props),Md(Ot,Zt),Ot.return=Bt,Ot):(Ot=Ed(Zt.type,Zt.key,Zt.props,null,Bt.mode,bn),Md(Ot,Zt),Ot.return=Bt,Ot)}function Qt(Bt,Ot,Zt,bn){return Ot===null||Ot.tag!==4||Ot.stateNode.containerInfo!==Zt.containerInfo||Ot.stateNode.implementation!==Zt.implementation?(Ot=L_(Zt,Bt.mode,bn),Ot.return=Bt,Ot):(Ot=Y(Ot,Zt.children||[]),Ot.return=Bt,Ot)}function mn(Bt,Ot,Zt,bn,Dr){return Ot===null||Ot.tag!==7?(Ot=fh(Zt,Bt.mode,bn,Dr),Ot.return=Bt,Ot):(Ot=Y(Ot,Zt),Ot.return=Bt,Ot)}function wn(Bt,Ot,Zt){if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint")return Ot=Gp(""+Ot,Bt.mode,Zt),Ot.return=Bt,Ot;if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case z:return Zt=Ed(Ot.type,Ot.key,Ot.props,null,Bt.mode,Zt),Md(Zt,Ot),Zt.return=Bt,Zt;case F:return Ot=L_(Ot,Bt.mode,Zt),Ot.return=Bt,Ot;case X:return Ot=kc(Ot),wn(Bt,Ot,Zt)}if(Be(Ot)||ye(Ot))return Ot=fh(Ot,Bt.mode,Zt,null),Ot.return=Bt,Ot;if(typeof Ot.then=="function")return wn(Bt,Ug(Ot),Zt);if(Ot.$$typeof===J)return wn(Bt,Od(Bt,Ot),Zt);Yu(Bt,Ot)}return null}function en(Bt,Ot,Zt,bn){var Dr=Ot!==null?Ot.key:null;if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return Dr!==null?null:Xe(Bt,Ot,""+Zt,bn);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case z:return Zt.key===Dr?St(Bt,Ot,Zt,bn):null;case F:return Zt.key===Dr?Qt(Bt,Ot,Zt,bn):null;case X:return Zt=kc(Zt),en(Bt,Ot,Zt,bn)}if(Be(Zt)||ye(Zt))return Dr!==null?null:mn(Bt,Ot,Zt,bn,null);if(typeof Zt.then=="function")return en(Bt,Ot,Ug(Zt),bn);if(Zt.$$typeof===J)return en(Bt,Ot,Od(Bt,Zt),bn);Yu(Bt,Zt)}return null}function ln(Bt,Ot,Zt,bn,Dr){if(typeof bn=="string"&&bn!==""||typeof bn=="number"||typeof bn=="bigint")return Bt=Bt.get(Zt)||null,Xe(Ot,Bt,""+bn,Dr);if(typeof bn=="object"&&bn!==null){switch(bn.$$typeof){case z:return Bt=Bt.get(bn.key===null?Zt:bn.key)||null,St(Ot,Bt,bn,Dr);case F:return Bt=Bt.get(bn.key===null?Zt:bn.key)||null,Qt(Ot,Bt,bn,Dr);case X:return bn=kc(bn),ln(Bt,Ot,Zt,bn,Dr)}if(Be(bn)||ye(bn))return Bt=Bt.get(Zt)||null,mn(Ot,Bt,bn,Dr,null);if(typeof bn.then=="function")return ln(Bt,Ot,Zt,Ug(bn),Dr);if(bn.$$typeof===J)return ln(Bt,Ot,Zt,Od(Ot,bn),Dr);Yu(Ot,bn)}return null}function cr(Bt,Ot,Zt,bn){for(var Dr=null,ea=null,_r=Ot,vi=Ot=0,Fi=null;_r!==null&&vi<Zt.length;vi++){_r.index>vi?(Fi=_r,_r=null):Fi=_r.sibling;var Zi=en(Bt,_r,Zt[vi],bn);if(Zi===null){_r===null&&(_r=Fi);break}m&&_r&&Zi.alternate===null&&x(Bt,_r),Ot=ne(Zi,Ot,vi),ea===null?Dr=Zi:ea.sibling=Zi,ea=Zi,_r=Fi}if(vi===Zt.length)return C(Bt,_r),Di&&qu(Bt,vi),Dr;if(_r===null){for(;vi<Zt.length;vi++)_r=wn(Bt,Zt[vi],bn),_r!==null&&(Ot=ne(_r,Ot,vi),ea===null?Dr=_r:ea.sibling=_r,ea=_r);return Di&&qu(Bt,vi),Dr}for(_r=L(_r);vi<Zt.length;vi++)Fi=ln(_r,Bt,vi,Zt[vi],bn),Fi!==null&&(m&&Fi.alternate!==null&&_r.delete(Fi.key===null?vi:Fi.key),Ot=ne(Fi,Ot,vi),ea===null?Dr=Fi:ea.sibling=Fi,ea=Fi);return m&&_r.forEach(function(Nf){return x(Bt,Nf)}),Di&&qu(Bt,vi),Dr}function Sr(Bt,Ot,Zt,bn){if(Zt==null)throw Error(r(151));for(var Dr=null,ea=null,_r=Ot,vi=Ot=0,Fi=null,Zi=Zt.next();_r!==null&&!Zi.done;vi++,Zi=Zt.next()){_r.index>vi?(Fi=_r,_r=null):Fi=_r.sibling;var Nf=en(Bt,_r,Zi.value,bn);if(Nf===null){_r===null&&(_r=Fi);break}m&&_r&&Nf.alternate===null&&x(Bt,_r),Ot=ne(Nf,Ot,vi),ea===null?Dr=Nf:ea.sibling=Nf,ea=Nf,_r=Fi}if(Zi.done)return C(Bt,_r),Di&&qu(Bt,vi),Dr;if(_r===null){for(;!Zi.done;vi++,Zi=Zt.next())Zi=wn(Bt,Zi.value,bn),Zi!==null&&(Ot=ne(Zi,Ot,vi),ea===null?Dr=Zi:ea.sibling=Zi,ea=Zi);return Di&&qu(Bt,vi),Dr}for(_r=L(_r);!Zi.done;vi++,Zi=Zt.next())Zi=ln(_r,Bt,vi,Zi.value,bn),Zi!==null&&(m&&Zi.alternate!==null&&_r.delete(Zi.key===null?vi:Zi.key),Ot=ne(Zi,Ot,vi),ea===null?Dr=Zi:ea.sibling=Zi,ea=Zi);return m&&_r.forEach(function(yC){return x(Bt,yC)}),Di&&qu(Bt,vi),Dr}function da(Bt,Ot,Zt,bn){if(typeof Zt=="object"&&Zt!==null&&Zt.type===U&&Zt.key===null&&(Zt=Zt.props.children),typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case z:e:{for(var Dr=Zt.key;Ot!==null;){if(Ot.key===Dr){if(Dr=Zt.type,Dr===U){if(Ot.tag===7){C(Bt,Ot.sibling),bn=Y(Ot,Zt.props.children),bn.return=Bt,Bt=bn;break e}}else if(Ot.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===X&&kc(Dr)===Ot.type){C(Bt,Ot.sibling),bn=Y(Ot,Zt.props),Md(bn,Zt),bn.return=Bt,Bt=bn;break e}C(Bt,Ot);break}else x(Bt,Ot);Ot=Ot.sibling}Zt.type===U?(bn=fh(Zt.props.children,Bt.mode,bn,Zt.key),bn.return=Bt,Bt=bn):(bn=Ed(Zt.type,Zt.key,Zt.props,null,Bt.mode,bn),Md(bn,Zt),bn.return=Bt,Bt=bn)}return Te(Bt);case F:e:{for(Dr=Zt.key;Ot!==null;){if(Ot.key===Dr)if(Ot.tag===4&&Ot.stateNode.containerInfo===Zt.containerInfo&&Ot.stateNode.implementation===Zt.implementation){C(Bt,Ot.sibling),bn=Y(Ot,Zt.children||[]),bn.return=Bt,Bt=bn;break e}else{C(Bt,Ot);break}else x(Bt,Ot);Ot=Ot.sibling}bn=L_(Zt,Bt.mode,bn),bn.return=Bt,Bt=bn}return Te(Bt);case X:return Zt=kc(Zt),da(Bt,Ot,Zt,bn)}if(Be(Zt))return cr(Bt,Ot,Zt,bn);if(ye(Zt)){if(Dr=ye(Zt),typeof Dr!="function")throw Error(r(150));return Zt=Dr.call(Zt),Sr(Bt,Ot,Zt,bn)}if(typeof Zt.then=="function")return da(Bt,Ot,Ug(Zt),bn);if(Zt.$$typeof===J)return da(Bt,Ot,Od(Bt,Zt),bn);Yu(Bt,Zt)}return typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint"?(Zt=""+Zt,Ot!==null&&Ot.tag===6?(C(Bt,Ot.sibling),bn=Y(Ot,Zt),bn.return=Bt,Bt=bn):(C(Bt,Ot),bn=Gp(Zt,Bt.mode,bn),bn.return=Bt,Bt=bn),Te(Bt)):C(Bt,Ot)}return function(Bt,Ot,Zt,bn){try{rm=0;var Dr=da(Bt,Ot,Zt,bn);return yh=null,Dr}catch(_r){if(_r===nm||_r===Ng)throw _r;var ea=al(29,_r,null,Bt.mode);return ea.lanes=bn,ea.return=Bt,ea}finally{}}}var Lc=_h(!0),D0=_h(!1),sl=!1;function $g(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function im(m,x){m=m.updateQueue,x.updateQueue===m&&(x.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function zc(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function Cf(m,x,C){var L=m.updateQueue;if(L===null)return null;if(L=L.shared,(nt&2)!==0){var Y=L.pending;return Y===null?x.next=x:(x.next=Y.next,Y.next=x),L.pending=x,x=Hp(m),k_(m,null,C),x}return $s(m,L,x,C),Hp(m)}function Dd(m,x,C){if(x=x.updateQueue,x!==null&&(x=x.shared,(C&4194048)!==0)){var L=x.lanes;L&=m.pendingLanes,C|=L,x.lanes=C,b_(m,C)}}function am(m,x){var C=m.updateQueue,L=m.alternate;if(L!==null&&(L=L.updateQueue,C===L)){var Y=null,ne=null;if(C=C.firstBaseUpdate,C!==null){do{var Te={lane:C.lane,tag:C.tag,payload:C.payload,callback:null,next:null};ne===null?Y=ne=Te:ne=ne.next=Te,C=C.next}while(C!==null);ne===null?Y=ne=x:ne=ne.next=x}else Y=ne=x;C={baseState:L.baseState,firstBaseUpdate:Y,lastBaseUpdate:ne,shared:L.shared,callbacks:L.callbacks},m.updateQueue=C;return}m=C.lastBaseUpdate,m===null?C.firstBaseUpdate=x:m.next=x,C.lastBaseUpdate=x}var U_=!1;function Id(){if(U_){var m=mh;if(m!==null)throw m}}function Mf(m,x,C,L){U_=!1;var Y=m.updateQueue;sl=!1;var ne=Y.firstBaseUpdate,Te=Y.lastBaseUpdate,Xe=Y.shared.pending;if(Xe!==null){Y.shared.pending=null;var St=Xe,Qt=St.next;St.next=null,Te===null?ne=Qt:Te.next=Qt,Te=St;var mn=m.alternate;mn!==null&&(mn=mn.updateQueue,Xe=mn.lastBaseUpdate,Xe!==Te&&(Xe===null?mn.firstBaseUpdate=Qt:Xe.next=Qt,mn.lastBaseUpdate=St))}if(ne!==null){var wn=Y.baseState;Te=0,mn=Qt=St=null,Xe=ne;do{var en=Xe.lane&-536870913,ln=en!==Xe.lane;if(ln?(ft&en)===en:(L&en)===en){en!==0&&en===Ef&&(U_=!0),mn!==null&&(mn=mn.next={lane:0,tag:Xe.tag,payload:Xe.payload,callback:null,next:null});e:{var cr=m,Sr=Xe;en=x;var da=C;switch(Sr.tag){case 1:if(cr=Sr.payload,typeof cr=="function"){wn=cr.call(da,wn,en);break e}wn=cr;break e;case 3:cr.flags=cr.flags&-65537|128;case 0:if(cr=Sr.payload,en=typeof cr=="function"?cr.call(da,wn,en):cr,en==null)break e;wn=E({},wn,en);break e;case 2:sl=!0}}en=Xe.callback,en!==null&&(m.flags|=64,ln&&(m.flags|=8192),ln=Y.callbacks,ln===null?Y.callbacks=[en]:ln.push(en))}else ln={lane:en,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null},mn===null?(Qt=mn=ln,St=wn):mn=mn.next=ln,Te|=en;if(Xe=Xe.next,Xe===null){if(Xe=Y.shared.pending,Xe===null)break;ln=Xe,Xe=ln.next,ln.next=null,Y.lastBaseUpdate=ln,Y.shared.pending=null}}while(!0);mn===null&&(St=wn),Y.baseState=St,Y.firstBaseUpdate=Qt,Y.lastBaseUpdate=mn,ne===null&&(Y.shared.lanes=0),qt|=Te,m.lanes=Te,m.memoizedState=wn}}function Pd(m,x){if(typeof m!="function")throw Error(r(191,m));m.call(x)}function o1(m,x){var C=m.callbacks;if(C!==null)for(m.callbacks=null,m=0;m<C.length;m++)Pd(C[m],x)}var Rd=Ke(null),$_=Ke(0);function Vg(m,x){m=gt,Pe($_,m),Pe(Rd,x),gt=m|x.baseLanes}function kd(){Pe($_,gt),Pe(Rd,Rd.current)}function Fc(){gt=$_.current,it(Rd),it($_)}var Es=Ke(null),us=null;function Wu(m){var x=m.alternate;Pe(So,So.current&1),Pe(Es,m),us===null&&(x===null||Rd.current!==null||x.memoizedState!==null)&&(us=m)}function Ld(m){Pe(So,So.current),Pe(Es,m),us===null&&(us=m)}function qg(m){m.tag===22?(Pe(So,So.current),Pe(Es,m),us===null&&(us=m)):As()}function As(){Pe(So,So.current),Pe(Es,Es.current)}function Al(m){it(Es),us===m&&(us=null),it(So)}var So=Ke(0);function Nc(m){for(var x=m;x!==null;){if(x.tag===13){var C=x.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||CT(C)||MT(C)))return x}else if(x.tag===19&&(x.memoizedProps.revealOrder==="forwards"||x.memoizedProps.revealOrder==="backwards"||x.memoizedProps.revealOrder==="unstable_legacy-backwards"||x.memoizedProps.revealOrder==="together")){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var du=0,Kt=null,ca=null,fa=null,pu=!1,zd=!1,vh=!1,Fd=0,bh=0,xh=null,I0=0;function Ma(){throw Error(r(321))}function wh(m,x){if(x===null)return!1;for(var C=0;C<x.length&&C<m.length;C++)if(!il(m[C],x[C]))return!1;return!0}function Nd(m,x,C,L,Y,ne){return du=ne,Kt=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Ee.H=m===null||m.memoizedState===null?tv:ty,vh=!1,ne=C(L,Y),vh=!1,zd&&(ne=P0(x,C,L,Y)),Xu(m),ne}function Xu(m){Ee.H=Ku;var x=ca!==null&&ca.next!==null;if(du=0,fa=ca=Kt=null,pu=!1,bh=0,xh=null,x)throw Error(r(300));m===null||lo||(m=m.dependencies,m!==null&&Xp(m)&&(lo=!0))}function P0(m,x,C,L){Kt=m;var Y=0;do{if(zd&&(xh=null),bh=0,zd=!1,25<=Y)throw Error(r(301));if(Y+=1,fa=ca=null,m.updateQueue!=null){var ne=m.updateQueue;ne.lastEffect=null,ne.events=null,ne.stores=null,ne.memoCache!=null&&(ne.memoCache.index=0)}Ee.H=q0,ne=x(C,L)}while(zd);return ne}function s1(){var m=Ee.H,x=m.useState()[0];return x=typeof x.then=="function"?Sh(x):x,m=m.useState()[0],(ca!==null?ca.memoizedState:null)!==m&&(Kt.flags|=1024),x}function V_(){var m=Fd!==0;return Fd=0,m}function q_(m,x,C){x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~C}function Hg(m){if(pu){for(m=m.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}pu=!1}du=0,fa=ca=Kt=null,zd=!1,bh=Fd=0,xh=null}function jo(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fa===null?Kt.memoizedState=fa=m:fa=fa.next=m,fa}function Wa(){if(ca===null){var m=Kt.alternate;m=m!==null?m.memoizedState:null}else m=ca.next;var x=fa===null?Kt.memoizedState:fa.next;if(x!==null)fa=x,ca=m;else{if(m===null)throw Kt.alternate===null?Error(r(467)):Error(r(310));ca=m,m={memoizedState:ca.memoizedState,baseState:ca.baseState,baseQueue:ca.baseQueue,queue:ca.queue,next:null},fa===null?Kt.memoizedState=fa=m:fa=fa.next=m}return fa}function om(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sh(m){var x=bh;return bh+=1,xh===null&&(xh=[]),m=a1(xh,m,x),x=Kt,(fa===null?x.memoizedState:fa.next)===null&&(x=x.alternate,Ee.H=x===null||x.memoizedState===null?tv:ty),m}function Gg(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return Sh(m);if(m.$$typeof===J)return ls(m)}throw Error(r(438,String(m)))}function H_(m){var x=null,C=Kt.updateQueue;if(C!==null&&(x=C.memoCache),x==null){var L=Kt.alternate;L!==null&&(L=L.updateQueue,L!==null&&(L=L.memoCache,L!=null&&(x={data:L.data.map(function(Y){return Y.slice()}),index:0})))}if(x==null&&(x={data:[],index:0}),C===null&&(C=om(),Kt.updateQueue=C),C.memoCache=x,C=x.data[x.index],C===void 0)for(C=x.data[x.index]=Array(m),L=0;L<m;L++)C[L]=le;return x.index++,C}function Zu(m,x){return typeof x=="function"?x(m):x}function Yg(m){var x=Wa();return Wg(x,ca,m)}function Wg(m,x,C){var L=m.queue;if(L===null)throw Error(r(311));L.lastRenderedReducer=C;var Y=m.baseQueue,ne=L.pending;if(ne!==null){if(Y!==null){var Te=Y.next;Y.next=ne.next,ne.next=Te}x.baseQueue=Y=ne,L.pending=null}if(ne=m.baseState,Y===null)m.memoizedState=ne;else{x=Y.next;var Xe=Te=null,St=null,Qt=x,mn=!1;do{var wn=Qt.lane&-536870913;if(wn!==Qt.lane?(ft&wn)===wn:(du&wn)===wn){var en=Qt.revertLane;if(en===0)St!==null&&(St=St.next={lane:0,revertLane:0,gesture:null,action:Qt.action,hasEagerState:Qt.hasEagerState,eagerState:Qt.eagerState,next:null}),wn===Ef&&(mn=!0);else if((du&en)===en){Qt=Qt.next,en===Ef&&(mn=!0);continue}else wn={lane:0,revertLane:Qt.revertLane,gesture:null,action:Qt.action,hasEagerState:Qt.hasEagerState,eagerState:Qt.eagerState,next:null},St===null?(Xe=St=wn,Te=ne):St=St.next=wn,Kt.lanes|=en,qt|=en;wn=Qt.action,vh&&C(ne,wn),ne=Qt.hasEagerState?Qt.eagerState:C(ne,wn)}else en={lane:wn,revertLane:Qt.revertLane,gesture:Qt.gesture,action:Qt.action,hasEagerState:Qt.hasEagerState,eagerState:Qt.eagerState,next:null},St===null?(Xe=St=en,Te=ne):St=St.next=en,Kt.lanes|=wn,qt|=wn;Qt=Qt.next}while(Qt!==null&&Qt!==x);if(St===null?Te=ne:St.next=Xe,!il(ne,m.memoizedState)&&(lo=!0,mn&&(C=mh,C!==null)))throw C;m.memoizedState=ne,m.baseState=Te,m.baseQueue=St,L.lastRenderedState=ne}return Y===null&&(L.lanes=0),[m.memoizedState,L.dispatch]}function G_(m){var x=Wa(),C=x.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=m;var L=C.dispatch,Y=C.pending,ne=x.memoizedState;if(Y!==null){C.pending=null;var Te=Y=Y.next;do ne=m(ne,Te.action),Te=Te.next;while(Te!==Y);il(ne,x.memoizedState)||(lo=!0),x.memoizedState=ne,x.baseQueue===null&&(x.baseState=ne),C.lastRenderedState=ne}return[ne,L]}function Y_(m,x,C){var L=Kt,Y=Wa(),ne=Di;if(ne){if(C===void 0)throw Error(r(407));C=C()}else C=x();var Te=!il((ca||Y).memoizedState,C);if(Te&&(Y.memoizedState=C,lo=!0),Y=Y.queue,Bd(l1.bind(null,L,Y,m),[m]),Y.getSnapshot!==x||Te||fa!==null&&fa.memoizedState.tag&1){if(L.flags|=2048,Th(9,{destroy:void 0},X_.bind(null,L,Y,C,x),null),st===null)throw Error(r(349));ne||(du&127)!==0||W_(L,x,C)}return C}function W_(m,x,C){m.flags|=16384,m={getSnapshot:x,value:C},x=Kt.updateQueue,x===null?(x=om(),Kt.updateQueue=x,x.stores=[m]):(C=x.stores,C===null?x.stores=[m]:C.push(m))}function X_(m,x,C,L){x.value=C,x.getSnapshot=L,u1(x)&&R0(m)}function l1(m,x,C){return C(function(){u1(x)&&R0(m)})}function u1(m){var x=m.getSnapshot;m=m.value;try{var C=x();return!il(m,C)}catch{return!0}}function R0(m){var x=Jt(m,2);x!==null&&Kn(x,m,2)}function Bc(m){var x=jo();if(typeof m=="function"){var C=m;if(m=C(),vh){Qi(!0);try{C()}finally{Qi(!1)}}}return x.memoizedState=x.baseState=m,x.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zu,lastRenderedState:m},x}function k0(m,x,C,L){return m.baseState=C,Wg(m,ca,typeof L=="function"?L:Zu)}function L0(m,x,C,L,Y){if(Jg(m))throw Error(r(485));if(m=x.action,m!==null){var ne={payload:Y,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Te){ne.listeners.push(Te)}};Ee.T!==null?C(!0):ne.isTransition=!1,L(ne),C=x.pending,C===null?(ne.next=x.pending=ne,Xg(x,ne)):(ne.next=C.next,x.pending=C.next=ne)}}function Xg(m,x){var C=x.action,L=x.payload,Y=m.state;if(x.isTransition){var ne=Ee.T,Te={};Ee.T=Te;try{var Xe=C(Y,L),St=Ee.S;St!==null&&St(Te,Xe),z0(m,x,Xe)}catch(Qt){jc(m,x,Qt)}finally{ne!==null&&Te.types!==null&&(ne.types=Te.types),Ee.T=ne}}else try{ne=C(Y,L),z0(m,x,ne)}catch(Qt){jc(m,x,Qt)}}function z0(m,x,C){C!==null&&typeof C=="object"&&typeof C.then=="function"?C.then(function(L){c1(m,x,L)},function(L){return jc(m,x,L)}):c1(m,x,C)}function c1(m,x,C){x.status="fulfilled",x.value=C,Vs(x),m.state=C,x=m.pending,x!==null&&(C=x.next,C===x?m.pending=null:(C=C.next,x.next=C,Xg(m,C)))}function jc(m,x,C){var L=m.pending;if(m.pending=null,L!==null){L=L.next;do x.status="rejected",x.reason=C,Vs(x),x=x.next;while(x!==L)}m.action=null}function Vs(m){m=m.listeners;for(var x=0;x<m.length;x++)(0,m[x])()}function Df(m,x){return x}function Os(m,x){if(Di){var C=st.formState;if(C!==null){e:{var L=Kt;if(Di){if(ua){t:{for(var Y=ua,ne=Hl;Y.nodeType!==8;){if(!ne){Y=null;break t}if(Y=Hc(Y.nextSibling),Y===null){Y=null;break t}}ne=Y.data,Y=ne==="F!"||ne==="F"?Y:null}if(Y){ua=Hc(Y.nextSibling),L=Y.data==="F!";break e}}Hu(L)}L=!1}L&&(x=C[0])}}return C=jo(),C.memoizedState=C.baseState=x,L={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Df,lastRenderedState:x},C.queue=L,C=um.bind(null,Kt,L),L.dispatch=C,L=Bc(!1),ne=Qg.bind(null,Kt,!1,L.queue),L=jo(),Y={state:x,dispatch:null,action:m,pending:null},L.queue=Y,C=L0.bind(null,Kt,Y,ne,C),Y.dispatch=C,L.memoizedState=m,[x,C,!1]}function If(m){var x=Wa();return F0(x,ca,m)}function F0(m,x,C){if(x=Wg(m,x,Df)[0],m=Yg(Zu)[0],typeof x=="object"&&x!==null&&typeof x.then=="function")try{var L=Sh(x)}catch(Te){throw Te===nm?Ng:Te}else L=x;x=Wa();var Y=x.queue,ne=Y.dispatch;return C!==x.memoizedState&&(Kt.flags|=2048,Th(9,{destroy:void 0},N0.bind(null,Y,C),null)),[L,ne,m]}function N0(m,x){m.action=x}function Z_(m){var x=Wa(),C=ca;if(C!==null)return F0(x,C,m);Wa(),x=x.memoizedState,C=Wa();var L=C.queue.dispatch;return C.memoizedState=m,[x,L,!1]}function Th(m,x,C,L){return m={tag:m,create:C,deps:L,inst:x,next:null},x=Kt.updateQueue,x===null&&(x=om(),Kt.updateQueue=x),C=x.lastEffect,C===null?x.lastEffect=m.next=m:(L=C.next,C.next=m,m.next=L,x.lastEffect=m),m}function K_(){return Wa().memoizedState}function Ol(m,x,C,L){var Y=jo();Kt.flags|=m,Y.memoizedState=Th(1|x,{destroy:void 0},C,L===void 0?null:L)}function Jr(m,x,C,L){var Y=Wa();L=L===void 0?null:L;var ne=Y.memoizedState.inst;ca!==null&&L!==null&&wh(L,ca.memoizedState.deps)?Y.memoizedState=Th(x,ne,C,L):(Kt.flags|=m,Y.memoizedState=Th(1|x,ne,C,L))}function sm(m,x){Ol(8390656,8,m,x)}function Bd(m,x){Jr(2048,8,m,x)}function lm(m){Kt.flags|=4;var x=Kt.updateQueue;if(x===null)x=om(),Kt.updateQueue=x,x.events=[m];else{var C=x.events;C===null?x.events=[m]:C.push(m)}}function B0(m){var x=Wa().memoizedState;return lm({ref:x,nextImpl:m}),function(){if((nt&2)!==0)throw Error(r(440));return x.impl.apply(void 0,arguments)}}function j0(m,x){return Jr(4,2,m,x)}function Q_(m,x){return Jr(4,4,m,x)}function Eh(m,x){if(typeof x=="function"){m=m();var C=x(m);return function(){typeof C=="function"?C():x(null)}}if(x!=null)return m=m(),x.current=m,function(){x.current=null}}function Cs(m,x,C){C=C!=null?C.concat([m]):null,Jr(4,4,Eh.bind(null,x,m),C)}function Xt(){}function on(m,x){var C=Wa();x=x===void 0?null:x;var L=C.memoizedState;return x!==null&&wh(x,L[1])?L[0]:(C.memoizedState=[m,x],m)}function jd(m,x){var C=Wa();x=x===void 0?null:x;var L=C.memoizedState;if(x!==null&&wh(x,L[1]))return L[0];if(L=m(),vh){Qi(!0);try{m()}finally{Qi(!1)}}return C.memoizedState=[L,x],L}function Ui(m,x,C){return C===void 0||(du&1073741824)!==0&&(ft&261930)===0?m.memoizedState=x:(m.memoizedState=C,m=Hr(),Kt.lanes|=m,qt|=m,C)}function ht(m,x,C,L){return il(C,x)?C:Rd.current!==null?(m=Ui(m,C,L),il(m,x)||(lo=!0),m):(du&42)===0||(du&1073741824)!==0&&(ft&261930)===0?(lo=!0,m.memoizedState=C):(m=Hr(),Kt.lanes|=m,qt|=m,x)}function U0(m,x,C,L,Y){var ne=Ne.p;Ne.p=ne!==0&&8>ne?ne:8;var Te=Ee.T,Xe={};Ee.T=Xe,Qg(m,!1,x,C);try{var St=Y(),Qt=Ee.S;if(Qt!==null&&Qt(Xe,St),St!==null&&typeof St=="object"&&typeof St.then=="function"){var mn=Lg(St,L);Cl(m,x,mn,ti(m))}else Cl(m,x,L,ti(m))}catch(wn){Cl(m,x,{then:function(){},status:"rejected",reason:wn},ti())}finally{Ne.p=ne,Te!==null&&Xe.types!==null&&(Te.types=Xe.types),Ee.T=Te}}function J_(){}function Zg(m,x,C,L){if(m.tag!==5)throw Error(r(476));var Y=ev(m).queue;U0(m,Y,x,at,C===null?J_:function(){return $0(m),C(L)})}function ev(m){var x=m.memoizedState;if(x!==null)return x;x={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zu,lastRenderedState:at},next:null};var C={};return x.next={memoizedState:C,baseState:C,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zu,lastRenderedState:C},next:null},m.memoizedState=x,m=m.alternate,m!==null&&(m.memoizedState=x),x}function $0(m){var x=ev(m);x.next===null&&(x=m.alternate.memoizedState),Cl(m,x.next.queue,{},ti())}function Kg(){return ls(Yc)}function Ud(){return Wa().memoizedState}function f1(){return Wa().memoizedState}function yT(m){for(var x=m.return;x!==null;){switch(x.tag){case 24:case 3:var C=ti();m=zc(C);var L=Cf(x,m,C);L!==null&&(Kn(L,x,C),Dd(L,x,C)),x={cache:Kp()},m.payload=x;return}x=x.return}}function V0(m,x,C){var L=ti();C={lane:L,revertLane:0,gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},Jg(m)?ey(x,C):(C=Td(m,x,C,L),C!==null&&(Kn(C,m,L),cm(C,x,L)))}function um(m,x,C){var L=ti();Cl(m,x,C,L)}function Cl(m,x,C,L){var Y={lane:L,revertLane:0,gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null};if(Jg(m))ey(x,Y);else{var ne=m.alternate;if(m.lanes===0&&(ne===null||ne.lanes===0)&&(ne=x.lastRenderedReducer,ne!==null))try{var Te=x.lastRenderedState,Xe=ne(Te,C);if(Y.hasEagerState=!0,Y.eagerState=Xe,il(Xe,Te))return $s(m,x,Y,0),st===null&&Sd(),!1}catch{}finally{}if(C=Td(m,x,Y,L),C!==null)return Kn(C,m,L),cm(C,x,L),!0}return!1}function Qg(m,x,C,L){if(L={lane:2,revertLane:tb(),gesture:null,action:L,hasEagerState:!1,eagerState:null,next:null},Jg(m)){if(x)throw Error(r(479))}else x=Td(m,C,L,2),x!==null&&Kn(x,m,2)}function Jg(m){var x=m.alternate;return m===Kt||x!==null&&x===Kt}function ey(m,x){zd=pu=!0;var C=m.pending;C===null?x.next=x:(x.next=C.next,C.next=x),m.pending=x}function cm(m,x,C){if((C&4194048)!==0){var L=x.lanes;L&=m.pendingLanes,C|=L,x.lanes=C,b_(m,C)}}var Ku={readContext:ls,use:Gg,useCallback:Ma,useContext:Ma,useEffect:Ma,useImperativeHandle:Ma,useLayoutEffect:Ma,useInsertionEffect:Ma,useMemo:Ma,useReducer:Ma,useRef:Ma,useState:Ma,useDebugValue:Ma,useDeferredValue:Ma,useTransition:Ma,useSyncExternalStore:Ma,useId:Ma,useHostTransitionStatus:Ma,useFormState:Ma,useActionState:Ma,useOptimistic:Ma,useMemoCache:Ma,useCacheRefresh:Ma};Ku.useEffectEvent=Ma;var tv={readContext:ls,use:Gg,useCallback:function(m,x){return jo().memoizedState=[m,x===void 0?null:x],m},useContext:ls,useEffect:sm,useImperativeHandle:function(m,x,C){C=C!=null?C.concat([m]):null,Ol(4194308,4,Eh.bind(null,x,m),C)},useLayoutEffect:function(m,x){return Ol(4194308,4,m,x)},useInsertionEffect:function(m,x){Ol(4,2,m,x)},useMemo:function(m,x){var C=jo();x=x===void 0?null:x;var L=m();if(vh){Qi(!0);try{m()}finally{Qi(!1)}}return C.memoizedState=[L,x],L},useReducer:function(m,x,C){var L=jo();if(C!==void 0){var Y=C(x);if(vh){Qi(!0);try{C(x)}finally{Qi(!1)}}}else Y=x;return L.memoizedState=L.baseState=Y,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:Y},L.queue=m,m=m.dispatch=V0.bind(null,Kt,m),[L.memoizedState,m]},useRef:function(m){var x=jo();return m={current:m},x.memoizedState=m},useState:function(m){m=Bc(m);var x=m.queue,C=um.bind(null,Kt,x);return x.dispatch=C,[m.memoizedState,C]},useDebugValue:Xt,useDeferredValue:function(m,x){var C=jo();return Ui(C,m,x)},useTransition:function(){var m=Bc(!1);return m=U0.bind(null,Kt,m.queue,!0,!1),jo().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,x,C){var L=Kt,Y=jo();if(Di){if(C===void 0)throw Error(r(407));C=C()}else{if(C=x(),st===null)throw Error(r(349));(ft&127)!==0||W_(L,x,C)}Y.memoizedState=C;var ne={value:C,getSnapshot:x};return Y.queue=ne,sm(l1.bind(null,L,ne,m),[m]),L.flags|=2048,Th(9,{destroy:void 0},X_.bind(null,L,ne,C,x),null),C},useId:function(){var m=jo(),x=st.identifierPrefix;if(Di){var C=Vu,L=Ic;C=(L&~(1<<32-Ri(L)-1)).toString(32)+C,x="_"+x+"R_"+C,C=Fd++,0<C&&(x+="H"+C.toString(32)),x+="_"}else C=I0++,x="_"+x+"r_"+C.toString(32)+"_";return m.memoizedState=x},useHostTransitionStatus:Kg,useFormState:Os,useActionState:Os,useOptimistic:function(m){var x=jo();x.memoizedState=x.baseState=m;var C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return x.queue=C,x=Qg.bind(null,Kt,!0,C),C.dispatch=x,[m,x]},useMemoCache:H_,useCacheRefresh:function(){return jo().memoizedState=yT.bind(null,Kt)},useEffectEvent:function(m){var x=jo(),C={impl:m};return x.memoizedState=C,function(){if((nt&2)!==0)throw Error(r(440));return C.impl.apply(void 0,arguments)}}},ty={readContext:ls,use:Gg,useCallback:on,useContext:ls,useEffect:Bd,useImperativeHandle:Cs,useInsertionEffect:j0,useLayoutEffect:Q_,useMemo:jd,useReducer:Yg,useRef:K_,useState:function(){return Yg(Zu)},useDebugValue:Xt,useDeferredValue:function(m,x){var C=Wa();return ht(C,ca.memoizedState,m,x)},useTransition:function(){var m=Yg(Zu)[0],x=Wa().memoizedState;return[typeof m=="boolean"?m:Sh(m),x]},useSyncExternalStore:Y_,useId:Ud,useHostTransitionStatus:Kg,useFormState:If,useActionState:If,useOptimistic:function(m,x){var C=Wa();return k0(C,ca,m,x)},useMemoCache:H_,useCacheRefresh:f1};ty.useEffectEvent=B0;var q0={readContext:ls,use:Gg,useCallback:on,useContext:ls,useEffect:Bd,useImperativeHandle:Cs,useInsertionEffect:j0,useLayoutEffect:Q_,useMemo:jd,useReducer:G_,useRef:K_,useState:function(){return G_(Zu)},useDebugValue:Xt,useDeferredValue:function(m,x){var C=Wa();return ca===null?Ui(C,m,x):ht(C,ca.memoizedState,m,x)},useTransition:function(){var m=G_(Zu)[0],x=Wa().memoizedState;return[typeof m=="boolean"?m:Sh(m),x]},useSyncExternalStore:Y_,useId:Ud,useHostTransitionStatus:Kg,useFormState:Z_,useActionState:Z_,useOptimistic:function(m,x){var C=Wa();return ca!==null?k0(C,ca,m,x):(C.baseState=m,[m,C.queue.dispatch])},useMemoCache:H_,useCacheRefresh:f1};q0.useEffectEvent=B0;function nv(m,x,C,L){x=m.memoizedState,C=C(L,x),C=C==null?x:E({},x,C),m.memoizedState=C,m.lanes===0&&(m.updateQueue.baseState=C)}var rv={enqueueSetState:function(m,x,C){m=m._reactInternals;var L=ti(),Y=zc(L);Y.payload=x,C!=null&&(Y.callback=C),x=Cf(m,Y,L),x!==null&&(Kn(x,m,L),Dd(x,m,L))},enqueueReplaceState:function(m,x,C){m=m._reactInternals;var L=ti(),Y=zc(L);Y.tag=1,Y.payload=x,C!=null&&(Y.callback=C),x=Cf(m,Y,L),x!==null&&(Kn(x,m,L),Dd(x,m,L))},enqueueForceUpdate:function(m,x){m=m._reactInternals;var C=ti(),L=zc(C);L.tag=2,x!=null&&(L.callback=x),x=Cf(m,L,C),x!==null&&(Kn(x,m,C),Dd(x,m,C))}};function Ms(m,x,C,L,Y,ne,Te){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(L,ne,Te):x.prototype&&x.prototype.isPureReactComponent?!Tl(C,L)||!Tl(Y,ne):!0}function H0(m,x,C,L){m=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(C,L),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(C,L),x.state!==m&&rv.enqueueReplaceState(x,x.state,null)}function Ml(m,x){var C=x;if("ref"in x){C={};for(var L in x)L!=="ref"&&(C[L]=x[L])}if(m=m.defaultProps){C===x&&(C=E({},C));for(var Y in m)C[Y]===void 0&&(C[Y]=m[Y])}return C}function h1(m){qp(m)}function Ei(m){console.error(m)}function gr(m){qp(m)}function ny(m,x){try{var C=m.onUncaughtError;C(x.value,{componentStack:x.stack})}catch(L){setTimeout(function(){throw L})}}function Pf(m,x,C){try{var L=m.onCaughtError;L(C.value,{componentStack:C.stack,errorBoundary:x.tag===1?x.stateNode:null})}catch(Y){setTimeout(function(){throw Y})}}function Qu(m,x,C){return C=zc(C),C.tag=3,C.payload={element:null},C.callback=function(){ny(m,x)},C}function Uc(m){return m=zc(m),m.tag=3,m}function To(m,x,C,L){var Y=C.type.getDerivedStateFromError;if(typeof Y=="function"){var ne=L.value;m.payload=function(){return Y(ne)},m.callback=function(){Pf(x,C,L)}}var Te=C.stateNode;Te!==null&&typeof Te.componentDidCatch=="function"&&(m.callback=function(){Pf(x,C,L),typeof Y!="function"&&($n===null?$n=new Set([this]):$n.add(this));var Xe=L.stack;this.componentDidCatch(L.value,{componentStack:Xe!==null?Xe:""})})}function fm(m,x,C,L,Y){if(C.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){if(x=C.alternate,x!==null&&ph(x,C,Y,!0),C=Es.current,C!==null){switch(C.tag){case 31:case 13:return us===null?Zo():C.alternate===null&&Dt===0&&(Dt=3),C.flags&=-257,C.flags|=65536,C.lanes=Y,L===Bg?C.flags|=16384:(x=C.updateQueue,x===null?C.updateQueue=new Set([L]):x.add(L),zf(m,L,Y)),!1;case 22:return C.flags|=65536,L===Bg?C.flags|=16384:(x=C.updateQueue,x===null?(x={transitions:null,markerInstances:null,retryQueue:new Set([L])},C.updateQueue=x):(C=x.retryQueue,C===null?x.retryQueue=new Set([L]):C.add(L)),zf(m,L,Y)),!1}throw Error(r(435,C.tag))}return zf(m,L,Y),Zo(),!1}if(Di)return x=Es.current,x!==null?((x.flags&65536)===0&&(x.flags|=256),x.flags|=65536,x.lanes=Y,L!==hh&&(m=Error(r(422),{cause:L}),Wp(Wo(m,C)))):(L!==hh&&(x=Error(r(423),{cause:L}),Wp(Wo(x,C))),m=m.current.alternate,m.flags|=65536,Y&=-Y,m.lanes|=Y,L=Wo(L,C),Y=Qu(m.stateNode,L,Y),am(m,Y),Dt!==4&&(Dt=2)),!1;var ne=Error(r(520),{cause:L});if(ne=Wo(ne,C),yn===null?yn=[ne]:yn.push(ne),Dt!==4&&(Dt=2),x===null)return!0;L=Wo(L,C),C=x;do{switch(C.tag){case 3:return C.flags|=65536,m=Y&-Y,C.lanes|=m,m=Qu(C.stateNode,L,m),am(C,m),!1;case 1:if(x=C.type,ne=C.stateNode,(C.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&($n===null||!$n.has(ne))))return C.flags|=65536,Y&=-Y,C.lanes|=Y,Y=Uc(Y),To(Y,m,C,L),am(C,Y),!1}C=C.return}while(C!==null);return!1}var ry=Error(r(461)),lo=!1;function Xo(m,x,C,L){x.child=m===null?D0(x,null,C,L):Lc(x,m.child,C,L)}function Yl(m,x,C,L,Y){C=C.render;var ne=x.ref;if("ref"in L){var Te={};for(var Xe in L)Xe!=="ref"&&(Te[Xe]=L[Xe])}else Te=L;return Sf(x),L=Nd(m,x,C,Te,ne,Y),Xe=V_(),m!==null&&!lo?(q_(m,x,Y),tc(m,x,Y)):(Di&&Xe&&Dg(x),x.flags|=1,Xo(m,x,L,Y),x.child)}function Ju(m,x,C,L,Y){if(m===null){var ne=C.type;return typeof ne=="function"&&!_f(ne)&&ne.defaultProps===void 0&&C.compare===null?(x.tag=15,x.type=ne,$d(m,x,ne,L,Y)):(m=Ed(C.type,null,L,x,x.mode,Y),m.ref=x.ref,m.return=x,x.child=m)}if(ne=m.child,!Yd(m,Y)){var Te=ne.memoizedProps;if(C=C.compare,C=C!==null?C:Tl,C(Te,L)&&m.ref===x.ref)return tc(m,x,Y)}return x.flags|=1,m=ol(ne,L),m.ref=x.ref,m.return=x,x.child=m}function $d(m,x,C,L,Y){if(m!==null){var ne=m.memoizedProps;if(Tl(ne,L)&&m.ref===x.ref)if(lo=!1,x.pendingProps=L=ne,Yd(m,Y))(m.flags&131072)!==0&&(lo=!0);else return x.lanes=m.lanes,tc(m,x,Y)}return hm(m,x,C,L,Y)}function Vd(m,x,C,L){var Y=L.children,ne=m!==null?m.memoizedState:null;if(m===null&&x.stateNode===null&&(x.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),L.mode==="hidden"){if((x.flags&128)!==0){if(ne=ne!==null?ne.baseLanes|C:C,m!==null){for(L=x.child=m.child,Y=0;L!==null;)Y=Y|L.lanes|L.childLanes,L=L.sibling;L=Y&~ne}else L=0,x.child=null;return iv(m,x,ne,C,L)}if((C&536870912)!==0)x.memoizedState={baseLanes:0,cachePool:null},m!==null&&tm(x,ne!==null?ne.cachePool:null),ne!==null?Vg(x,ne):kd(),qg(x);else return L=x.lanes=536870912,iv(m,x,ne!==null?ne.baseLanes|C:C,C,L)}else ne!==null?(tm(x,ne.cachePool),Vg(x,ne),As(),x.memoizedState=null):(m!==null&&tm(x,null),kd(),As());return Xo(m,x,Y,C),x.child}function qd(m,x){return m!==null&&m.tag===22||x.stateNode!==null||(x.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.sibling}function iv(m,x,C,L,Y){var ne=Fg();return ne=ne===null?null:{parent:Yi._currentValue,pool:ne},x.memoizedState={baseLanes:C,cachePool:ne},m!==null&&tm(x,null),kd(),qg(x),m!==null&&ph(m,x,L,!0),x.childLanes=Y,null}function ec(m,x){return x=mm({mode:x.mode,children:x.children},m.mode),x.ref=m.ref,m.child=x,x.return=m,x}function av(m,x,C){return Lc(x,m.child,null,C),m=ec(x,x.pendingProps),m.flags|=2,Al(x),x.memoizedState=null,m}function Wl(m,x,C){var L=x.pendingProps,Y=(x.flags&128)!==0;if(x.flags&=-129,m===null){if(Di){if(L.mode==="hidden")return m=ec(x,L),x.lanes=536870912,qd(null,m);if(Ld(x),(m=ua)?(m=eC(m,Hl),m=m!==null&&m.data==="&"?m:null,m!==null&&(x.memoizedState={dehydrated:m,treeContext:ci!==null?{id:Ic,overflow:Vu}:null,retryLane:536870912,hydrationErrors:null},C=r1(m),C.return=x,x.child=C,wo=x,ua=null)):m=null,m===null)throw Hu(x);return x.lanes=536870912,null}return ec(x,L)}var ne=m.memoizedState;if(ne!==null){var Te=ne.dehydrated;if(Ld(x),Y)if(x.flags&256)x.flags&=-257,x=av(m,x,C);else if(x.memoizedState!==null)x.child=m.child,x.flags|=128,x=null;else throw Error(r(558));else if(lo||ph(m,x,C,!1),Y=(C&m.childLanes)!==0,lo||Y){if(L=st,L!==null&&(Te=Pp(L,C),Te!==0&&Te!==ne.retryLane))throw ne.retryLane=Te,Jt(m,Te),Kn(L,m,Te),ry;Zo(),x=av(m,x,C)}else m=ne.treeContext,ua=Hc(Te.nextSibling),wo=x,Di=!0,Pc=null,Hl=!1,m!==null&&Ad(x,m),x=ec(x,L),x.flags|=4096;return x}return m=ol(m.child,{mode:L.mode,children:L.children}),m.ref=x.ref,x.child=m,m.return=x,m}function Ah(m,x){var C=x.ref;if(C===null)m!==null&&m.ref!==null&&(x.flags|=4194816);else{if(typeof C!="function"&&typeof C!="object")throw Error(r(284));(m===null||m.ref!==C)&&(x.flags|=4194816)}}function hm(m,x,C,L,Y){return Sf(x),C=Nd(m,x,C,L,void 0,Y),L=V_(),m!==null&&!lo?(q_(m,x,Y),tc(m,x,Y)):(Di&&L&&Dg(x),x.flags|=1,Xo(m,x,C,Y),x.child)}function iy(m,x,C,L,Y,ne){return Sf(x),x.updateQueue=null,C=P0(x,L,C,Y),Xu(m),L=V_(),m!==null&&!lo?(q_(m,x,ne),tc(m,x,ne)):(Di&&L&&Dg(x),x.flags|=1,Xo(m,x,C,ne),x.child)}function ay(m,x,C,L,Y){if(Sf(x),x.stateNode===null){var ne=Mc,Te=C.contextType;typeof Te=="object"&&Te!==null&&(ne=ls(Te)),ne=new C(L,ne),x.memoizedState=ne.state!==null&&ne.state!==void 0?ne.state:null,ne.updater=rv,x.stateNode=ne,ne._reactInternals=x,ne=x.stateNode,ne.props=L,ne.state=x.memoizedState,ne.refs={},$g(x),Te=C.contextType,ne.context=typeof Te=="object"&&Te!==null?ls(Te):Mc,ne.state=x.memoizedState,Te=C.getDerivedStateFromProps,typeof Te=="function"&&(nv(x,C,Te,L),ne.state=x.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof ne.getSnapshotBeforeUpdate=="function"||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(Te=ne.state,typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount(),Te!==ne.state&&rv.enqueueReplaceState(ne,ne.state,null),Mf(x,L,ne,Y),Id(),ne.state=x.memoizedState),typeof ne.componentDidMount=="function"&&(x.flags|=4194308),L=!0}else if(m===null){ne=x.stateNode;var Xe=x.memoizedProps,St=Ml(C,Xe);ne.props=St;var Qt=ne.context,mn=C.contextType;Te=Mc,typeof mn=="object"&&mn!==null&&(Te=ls(mn));var wn=C.getDerivedStateFromProps;mn=typeof wn=="function"||typeof ne.getSnapshotBeforeUpdate=="function",Xe=x.pendingProps!==Xe,mn||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(Xe||Qt!==Te)&&H0(x,ne,L,Te),sl=!1;var en=x.memoizedState;ne.state=en,Mf(x,L,ne,Y),Id(),Qt=x.memoizedState,Xe||en!==Qt||sl?(typeof wn=="function"&&(nv(x,C,wn,L),Qt=x.memoizedState),(St=sl||Ms(x,C,St,L,en,Qt,Te))?(mn||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(x.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=L,x.memoizedState=Qt),ne.props=L,ne.state=Qt,ne.context=Te,L=St):(typeof ne.componentDidMount=="function"&&(x.flags|=4194308),L=!1)}else{ne=x.stateNode,im(m,x),Te=x.memoizedProps,mn=Ml(C,Te),ne.props=mn,wn=x.pendingProps,en=ne.context,Qt=C.contextType,St=Mc,typeof Qt=="object"&&Qt!==null&&(St=ls(Qt)),Xe=C.getDerivedStateFromProps,(Qt=typeof Xe=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(Te!==wn||en!==St)&&H0(x,ne,L,St),sl=!1,en=x.memoizedState,ne.state=en,Mf(x,L,ne,Y),Id();var ln=x.memoizedState;Te!==wn||en!==ln||sl||m!==null&&m.dependencies!==null&&Xp(m.dependencies)?(typeof Xe=="function"&&(nv(x,C,Xe,L),ln=x.memoizedState),(mn=sl||Ms(x,C,mn,L,en,ln,St)||m!==null&&m.dependencies!==null&&Xp(m.dependencies))?(Qt||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(L,ln,St),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(L,ln,St)),typeof ne.componentDidUpdate=="function"&&(x.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof ne.componentDidUpdate!="function"||Te===m.memoizedProps&&en===m.memoizedState||(x.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||Te===m.memoizedProps&&en===m.memoizedState||(x.flags|=1024),x.memoizedProps=L,x.memoizedState=ln),ne.props=L,ne.state=ln,ne.context=St,L=mn):(typeof ne.componentDidUpdate!="function"||Te===m.memoizedProps&&en===m.memoizedState||(x.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||Te===m.memoizedProps&&en===m.memoizedState||(x.flags|=1024),L=!1)}return ne=L,Ah(m,x),L=(x.flags&128)!==0,ne||L?(ne=x.stateNode,C=L&&typeof C.getDerivedStateFromError!="function"?null:ne.render(),x.flags|=1,m!==null&&L?(x.child=Lc(x,m.child,null,Y),x.child=Lc(x,null,C,Y)):Xo(m,x,C,Y),x.memoizedState=ne.state,m=x.child):m=tc(m,x,Y),m}function Xa(m,x,C,L){return Gu(),x.flags|=256,Xo(m,x,C,L),x.child}var Hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Oh(m){return{baseLanes:m,cachePool:Cd()}}function dm(m,x,C){return m=m!==null?m.childLanes&~C:0,x&&(m|=Ht),m}function Ch(m,x,C){var L=x.pendingProps,Y=!1,ne=(x.flags&128)!==0,Te;if((Te=ne)||(Te=m!==null&&m.memoizedState===null?!1:(So.current&2)!==0),Te&&(Y=!0,x.flags&=-129),Te=(x.flags&32)!==0,x.flags&=-33,m===null){if(Di){if(Y?Wu(x):As(),(m=ua)?(m=eC(m,Hl),m=m!==null&&m.data!=="&"?m:null,m!==null&&(x.memoizedState={dehydrated:m,treeContext:ci!==null?{id:Ic,overflow:Vu}:null,retryLane:536870912,hydrationErrors:null},C=r1(m),C.return=x,x.child=C,wo=x,ua=null)):m=null,m===null)throw Hu(x);return MT(m)?x.lanes=32:x.lanes=536870912,null}var Xe=L.children;return L=L.fallback,Y?(As(),Y=x.mode,Xe=mm({mode:"hidden",children:Xe},Y),L=fh(L,Y,C,null),Xe.return=x,L.return=x,Xe.sibling=L,x.child=Xe,L=x.child,L.memoizedState=Oh(C),L.childLanes=dm(m,Te,C),x.memoizedState=Hd,qd(null,L)):(Wu(x),pm(x,Xe))}var St=m.memoizedState;if(St!==null&&(Xe=St.dehydrated,Xe!==null)){if(ne)x.flags&256?(Wu(x),x.flags&=-257,x=Gd(m,x,C)):x.memoizedState!==null?(As(),x.child=m.child,x.flags|=128,x=null):(As(),Xe=L.fallback,Y=x.mode,L=mm({mode:"visible",children:L.children},Y),Xe=fh(Xe,Y,C,null),Xe.flags|=2,L.return=x,Xe.return=x,L.sibling=Xe,x.child=L,Lc(x,m.child,null,C),L=x.child,L.memoizedState=Oh(C),L.childLanes=dm(m,Te,C),x.memoizedState=Hd,x=qd(null,L));else if(Wu(x),MT(Xe)){if(Te=Xe.nextSibling&&Xe.nextSibling.dataset,Te)var Qt=Te.dgst;Te=Qt,L=Error(r(419)),L.stack="",L.digest=Te,Wp({value:L,source:null,stack:null}),x=Gd(m,x,C)}else if(lo||ph(m,x,C,!1),Te=(C&m.childLanes)!==0,lo||Te){if(Te=st,Te!==null&&(L=Pp(Te,C),L!==0&&L!==St.retryLane))throw St.retryLane=L,Jt(m,L),Kn(Te,m,L),ry;CT(Xe)||Zo(),x=Gd(m,x,C)}else CT(Xe)?(x.flags|=192,x.child=m.child,x=null):(m=St.treeContext,ua=Hc(Xe.nextSibling),wo=x,Di=!0,Pc=null,Hl=!1,m!==null&&Ad(x,m),x=pm(x,L.children),x.flags|=4096);return x}return Y?(As(),Xe=L.fallback,Y=x.mode,St=m.child,Qt=St.sibling,L=ol(St,{mode:"hidden",children:L.children}),L.subtreeFlags=St.subtreeFlags&65011712,Qt!==null?Xe=ol(Qt,Xe):(Xe=fh(Xe,Y,C,null),Xe.flags|=2),Xe.return=x,L.return=x,L.sibling=Xe,x.child=L,qd(null,L),L=x.child,Xe=m.child.memoizedState,Xe===null?Xe=Oh(C):(Y=Xe.cachePool,Y!==null?(St=Yi._currentValue,Y=Y.parent!==St?{parent:St,pool:St}:Y):Y=Cd(),Xe={baseLanes:Xe.baseLanes|C,cachePool:Y}),L.memoizedState=Xe,L.childLanes=dm(m,Te,C),x.memoizedState=Hd,qd(m.child,L)):(Wu(x),C=m.child,m=C.sibling,C=ol(C,{mode:"visible",children:L.children}),C.return=x,C.sibling=null,m!==null&&(Te=x.deletions,Te===null?(x.deletions=[m],x.flags|=16):Te.push(m)),x.child=C,x.memoizedState=null,C)}function pm(m,x){return x=mm({mode:"visible",children:x},m.mode),x.return=m,m.child=x}function mm(m,x){return m=al(22,m,null,x),m.lanes=0,m}function Gd(m,x,C){return Lc(x,m.child,null,C),m=pm(x,x.pendingProps.children),m.flags|=2,x.memoizedState=null,m}function Mh(m,x,C){m.lanes|=x;var L=m.alternate;L!==null&&(L.lanes|=x),O0(m.return,x,C)}function oy(m,x,C,L,Y,ne){var Te=m.memoizedState;Te===null?m.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:L,tail:C,tailMode:Y,treeForkCount:ne}:(Te.isBackwards=x,Te.rendering=null,Te.renderingStartTime=0,Te.last=L,Te.tail=C,Te.tailMode=Y,Te.treeForkCount=ne)}function gm(m,x,C){var L=x.pendingProps,Y=L.revealOrder,ne=L.tail;L=L.children;var Te=So.current,Xe=(Te&2)!==0;if(Xe?(Te=Te&1|2,x.flags|=128):Te&=1,Pe(So,Te),Xo(m,x,L,C),L=Di?Cg:0,!Xe&&m!==null&&(m.flags&128)!==0)e:for(m=x.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&Mh(m,C,x);else if(m.tag===19)Mh(m,C,x);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===x)break e;for(;m.sibling===null;){if(m.return===null||m.return===x)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(Y){case"forwards":for(C=x.child,Y=null;C!==null;)m=C.alternate,m!==null&&Nc(m)===null&&(Y=C),C=C.sibling;C=Y,C===null?(Y=x.child,x.child=null):(Y=C.sibling,C.sibling=null),oy(x,!1,Y,C,ne,L);break;case"backwards":case"unstable_legacy-backwards":for(C=null,Y=x.child,x.child=null;Y!==null;){if(m=Y.alternate,m!==null&&Nc(m)===null){x.child=Y;break}m=Y.sibling,Y.sibling=C,C=Y,Y=m}oy(x,!0,C,null,ne,L);break;case"together":oy(x,!1,null,null,void 0,L);break;default:x.memoizedState=null}return x.child}function tc(m,x,C){if(m!==null&&(x.dependencies=m.dependencies),qt|=x.lanes,(C&x.childLanes)===0)if(m!==null){if(ph(m,x,C,!1),(C&x.childLanes)===0)return null}else return null;if(m!==null&&x.child!==m.child)throw Error(r(153));if(x.child!==null){for(m=x.child,C=ol(m,m.pendingProps),x.child=C,C.return=x;m.sibling!==null;)m=m.sibling,C=C.sibling=ol(m,m.pendingProps),C.return=x;C.sibling=null}return x.child}function Yd(m,x){return(m.lanes&x)!==0?!0:(m=m.dependencies,!!(m!==null&&Xp(m)))}function G0(m,x,C){switch(x.tag){case 3:Ut(x,x.stateNode.containerInfo),dh(x,Yi,m.memoizedState.cache),Gu();break;case 27:case 5:Ye(x);break;case 4:Ut(x,x.stateNode.containerInfo);break;case 10:dh(x,x.type,x.memoizedProps.value);break;case 31:if(x.memoizedState!==null)return x.flags|=128,Ld(x),null;break;case 13:var L=x.memoizedState;if(L!==null)return L.dehydrated!==null?(Wu(x),x.flags|=128,null):(C&x.child.childLanes)!==0?Ch(m,x,C):(Wu(x),m=tc(m,x,C),m!==null?m.sibling:null);Wu(x);break;case 19:var Y=(m.flags&128)!==0;if(L=(C&x.childLanes)!==0,L||(ph(m,x,C,!1),L=(C&x.childLanes)!==0),Y){if(L)return gm(m,x,C);x.flags|=128}if(Y=x.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),Pe(So,So.current),L)break;return null;case 22:return x.lanes=0,Vd(m,x,C,x.pendingProps);case 24:dh(x,Yi,m.memoizedState.cache)}return tc(m,x,C)}function sy(m,x,C){if(m!==null)if(m.memoizedProps!==x.pendingProps)lo=!0;else{if(!Yd(m,C)&&(x.flags&128)===0)return lo=!1,G0(m,x,C);lo=(m.flags&131072)!==0}else lo=!1,Di&&(x.flags&1048576)!==0&&Mg(x,Cg,x.index);switch(x.lanes=0,x.tag){case 16:e:{var L=x.pendingProps;if(m=kc(x.elementType),x.type=m,typeof m=="function")_f(m)?(L=Ml(m,L),x.tag=1,x=ay(null,x,m,L,C)):(x.tag=0,x=hm(null,x,m,L,C));else{if(m!=null){var Y=m.$$typeof;if(Y===ie){x.tag=11,x=Yl(null,x,m,L,C);break e}else if(Y===te){x.tag=14,x=Ju(null,x,m,L,C);break e}}throw x=He(m)||m,Error(r(306,x,""))}}return x;case 0:return hm(m,x,x.type,x.pendingProps,C);case 1:return L=x.type,Y=Ml(L,x.pendingProps),ay(m,x,L,Y,C);case 3:e:{if(Ut(x,x.stateNode.containerInfo),m===null)throw Error(r(387));L=x.pendingProps;var ne=x.memoizedState;Y=ne.element,im(m,x),Mf(x,L,null,C);var Te=x.memoizedState;if(L=Te.cache,dh(x,Yi,L),L!==ne.cache&&Pg(x,[Yi],C,!0),Id(),L=Te.element,ne.isDehydrated)if(ne={element:L,isDehydrated:!1,cache:Te.cache},x.updateQueue.baseState=ne,x.memoizedState=ne,x.flags&256){x=Xa(m,x,L,C);break e}else if(L!==Y){Y=Wo(Error(r(424)),x),Wp(Y),x=Xa(m,x,L,C);break e}else{switch(m=x.stateNode.containerInfo,m.nodeType){case 9:m=m.body;break;default:m=m.nodeName==="HTML"?m.ownerDocument.body:m}for(ua=Hc(m.firstChild),wo=x,Di=!0,Pc=null,Hl=!0,C=D0(x,null,L,C),x.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling}else{if(Gu(),L===Y){x=tc(m,x,C);break e}Xo(m,x,L,C)}x=x.child}return x;case 26:return Ah(m,x),m===null?(C=Rh(x.type,null,x.pendingProps,null))?x.memoizedState=C:Di||(C=x.type,m=x.pendingProps,L=sb(dn.current).createElement(C),L[Qe]=x,L[ze]=m,hl(L,C,m),In(L),x.stateNode=L):x.memoizedState=Rh(x.type,m.memoizedProps,x.pendingProps,m.memoizedState),null;case 27:return Ye(x),m===null&&Di&&(L=x.stateNode=dv(x.type,x.pendingProps,dn.current),wo=x,Hl=!0,Y=ua,ac(x.type)?(lb=Y,ua=Hc(L.firstChild)):ua=Y),Xo(m,x,x.pendingProps.children,C),Ah(m,x),m===null&&(x.flags|=4194304),x.child;case 5:return m===null&&Di&&((Y=L=ua)&&(L=Uk(L,x.type,x.pendingProps,Hl),L!==null?(x.stateNode=L,wo=x,ua=Hc(L.firstChild),Hl=!1,Y=!0):Y=!1),Y||Hu(x)),Ye(x),Y=x.type,ne=x.pendingProps,Te=m!==null?m.memoizedProps:null,L=ne.children,Ph(Y,ne)?L=null:Te!==null&&Ph(Y,Te)&&(x.flags|=32),x.memoizedState!==null&&(Y=Nd(m,x,s1,null,null,C),Yc._currentValue=Y),Ah(m,x),Xo(m,x,L,C),x.child;case 6:return m===null&&Di&&((m=C=ua)&&(C=$k(C,x.pendingProps,Hl),C!==null?(x.stateNode=C,wo=x,ua=null,m=!0):m=!1),m||Hu(x)),null;case 13:return Ch(m,x,C);case 4:return Ut(x,x.stateNode.containerInfo),L=x.pendingProps,m===null?x.child=Lc(x,null,L,C):Xo(m,x,L,C),x.child;case 11:return Yl(m,x,x.type,x.pendingProps,C);case 7:return Xo(m,x,x.pendingProps,C),x.child;case 8:return Xo(m,x,x.pendingProps.children,C),x.child;case 12:return Xo(m,x,x.pendingProps.children,C),x.child;case 10:return L=x.pendingProps,dh(x,x.type,L.value),Xo(m,x,L.children,C),x.child;case 9:return Y=x.type._context,L=x.pendingProps.children,Sf(x),Y=ls(Y),L=L(Y),x.flags|=1,Xo(m,x,L,C),x.child;case 14:return Ju(m,x,x.type,x.pendingProps,C);case 15:return $d(m,x,x.type,x.pendingProps,C);case 19:return gm(m,x,C);case 31:return Wl(m,x,C);case 22:return Vd(m,x,C,x.pendingProps);case 24:return Sf(x),L=ls(Yi),m===null?(Y=Fg(),Y===null&&(Y=st,ne=Kp(),Y.pooledCache=ne,ne.refCount++,ne!==null&&(Y.pooledCacheLanes|=C),Y=ne),x.memoizedState={parent:L,cache:Y},$g(x),dh(x,Yi,Y)):((m.lanes&C)!==0&&(im(m,x),Mf(x,null,null,C),Id()),Y=m.memoizedState,ne=x.memoizedState,Y.parent!==L?(Y={parent:L,cache:L},x.memoizedState=Y,x.lanes===0&&(x.memoizedState=x.updateQueue.baseState=Y),dh(x,Yi,L)):(L=ne.cache,dh(x,Yi,L),L!==Y.cache&&Pg(x,[Yi],C,!0))),Xo(m,x,x.pendingProps.children,C),x.child;case 29:throw x.pendingProps}throw Error(r(156,x.tag))}function $c(m){m.flags|=4}function ov(m,x,C,L,Y){if((x=(m.mode&32)!==0)&&(x=!1),x){if(m.flags|=16777216,(Y&335544128)===Y)if(m.stateNode.complete)m.flags|=8192;else if(Gr())m.flags|=8192;else throw Of=Bg,C0}else m.flags&=-16777217}function Y0(m,x){if(x.type!=="stylesheet"||(x.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!BT(x))if(Gr())m.flags|=8192;else throw Of=Bg,C0}function ly(m,x){x!==null&&(m.flags|=4),m.flags&16384&&(x=m.tag!==22?wl():536870912,m.lanes|=x,xn|=x)}function ym(m,x){if(!Di)switch(m.tailMode){case"hidden":x=m.tail;for(var C=null;x!==null;)x.alternate!==null&&(C=x),x=x.sibling;C===null?m.tail=null:C.sibling=null;break;case"collapsed":C=m.tail;for(var L=null;C!==null;)C.alternate!==null&&(L=C),C=C.sibling;L===null?x||m.tail===null?m.tail=null:m.tail.sibling=null:L.sibling=null}}function ja(m){var x=m.alternate!==null&&m.alternate.child===m.child,C=0,L=0;if(x)for(var Y=m.child;Y!==null;)C|=Y.lanes|Y.childLanes,L|=Y.subtreeFlags&65011712,L|=Y.flags&65011712,Y.return=m,Y=Y.sibling;else for(Y=m.child;Y!==null;)C|=Y.lanes|Y.childLanes,L|=Y.subtreeFlags,L|=Y.flags,Y.return=m,Y=Y.sibling;return m.subtreeFlags|=L,m.childLanes=C,x}function uy(m,x,C){var L=x.pendingProps;switch(bf(x),x.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ja(x),null;case 1:return ja(x),null;case 3:return C=x.stateNode,L=null,m!==null&&(L=m.memoizedState.cache),x.memoizedState.cache!==L&&(x.flags|=2048),wf(Yi),xe(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(m===null||m.child===null)&&(xf(x)?$c(x):m===null||m.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,B_())),ja(x),null;case 26:var Y=x.type,ne=x.memoizedState;return m===null?($c(x),ne!==null?(ja(x),Y0(x,ne)):(ja(x),ov(x,Y,null,L,C))):ne?ne!==m.memoizedState?($c(x),ja(x),Y0(x,ne)):(ja(x),x.flags&=-16777217):(m=m.memoizedProps,m!==L&&$c(x),ja(x),ov(x,Y,m,L,C)),null;case 27:if(ct(x),C=dn.current,Y=x.type,m!==null&&x.stateNode!=null)m.memoizedProps!==L&&$c(x);else{if(!L){if(x.stateNode===null)throw Error(r(166));return ja(x),null}m=jt.current,xf(x)?Ig(x):(m=dv(Y,L,C),x.stateNode=m,$c(x))}return ja(x),null;case 5:if(ct(x),Y=x.type,m!==null&&x.stateNode!=null)m.memoizedProps!==L&&$c(x);else{if(!L){if(x.stateNode===null)throw Error(r(166));return ja(x),null}if(ne=jt.current,xf(x))Ig(x);else{var Te=sb(dn.current);switch(ne){case 1:ne=Te.createElementNS("http://www.w3.org/2000/svg",Y);break;case 2:ne=Te.createElementNS("http://www.w3.org/1998/Math/MathML",Y);break;default:switch(Y){case"svg":ne=Te.createElementNS("http://www.w3.org/2000/svg",Y);break;case"math":ne=Te.createElementNS("http://www.w3.org/1998/Math/MathML",Y);break;case"script":ne=Te.createElement("div"),ne.innerHTML="<script><\/script>",ne=ne.removeChild(ne.firstChild);break;case"select":ne=typeof L.is=="string"?Te.createElement("select",{is:L.is}):Te.createElement("select"),L.multiple?ne.multiple=!0:L.size&&(ne.size=L.size);break;default:ne=typeof L.is=="string"?Te.createElement(Y,{is:L.is}):Te.createElement(Y)}}ne[Qe]=x,ne[ze]=L;e:for(Te=x.child;Te!==null;){if(Te.tag===5||Te.tag===6)ne.appendChild(Te.stateNode);else if(Te.tag!==4&&Te.tag!==27&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===x)break e;for(;Te.sibling===null;){if(Te.return===null||Te.return===x)break e;Te=Te.return}Te.sibling.return=Te.return,Te=Te.sibling}x.stateNode=ne;e:switch(hl(ne,Y,L),Y){case"button":case"input":case"select":case"textarea":L=!!L.autoFocus;break e;case"img":L=!0;break e;default:L=!1}L&&$c(x)}}return ja(x),ov(x,x.type,m===null?null:m.memoizedProps,x.pendingProps,C),null;case 6:if(m&&x.stateNode!=null)m.memoizedProps!==L&&$c(x);else{if(typeof L!="string"&&x.stateNode===null)throw Error(r(166));if(m=dn.current,xf(x)){if(m=x.stateNode,C=x.memoizedProps,L=null,Y=wo,Y!==null)switch(Y.tag){case 27:case 5:L=Y.memoizedProps}m[Qe]=x,m=!!(m.nodeValue===C||L!==null&&L.suppressHydrationWarning===!0||XO(m.nodeValue,C)),m||Hu(x,!0)}else m=sb(m).createTextNode(L),m[Qe]=x,x.stateNode=m}return ja(x),null;case 31:if(C=x.memoizedState,m===null||m.memoizedState!==null){if(L=xf(x),C!==null){if(m===null){if(!L)throw Error(r(318));if(m=x.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(557));m[Qe]=x}else Gu(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;ja(x),m=!1}else C=B_(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=C),m=!0;if(!m)return x.flags&256?(Al(x),x):(Al(x),null);if((x.flags&128)!==0)throw Error(r(558))}return ja(x),null;case 13:if(L=x.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(Y=xf(x),L!==null&&L.dehydrated!==null){if(m===null){if(!Y)throw Error(r(318));if(Y=x.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(r(317));Y[Qe]=x}else Gu(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;ja(x),Y=!1}else Y=B_(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=Y),Y=!0;if(!Y)return x.flags&256?(Al(x),x):(Al(x),null)}return Al(x),(x.flags&128)!==0?(x.lanes=C,x):(C=L!==null,m=m!==null&&m.memoizedState!==null,C&&(L=x.child,Y=null,L.alternate!==null&&L.alternate.memoizedState!==null&&L.alternate.memoizedState.cachePool!==null&&(Y=L.alternate.memoizedState.cachePool.pool),ne=null,L.memoizedState!==null&&L.memoizedState.cachePool!==null&&(ne=L.memoizedState.cachePool.pool),ne!==Y&&(L.flags|=2048)),C!==m&&C&&(x.child.flags|=8192),ly(x,x.updateQueue),ja(x),null);case 4:return xe(),m===null&&g1(x.stateNode.containerInfo),ja(x),null;case 10:return wf(x.type),ja(x),null;case 19:if(it(So),L=x.memoizedState,L===null)return ja(x),null;if(Y=(x.flags&128)!==0,ne=L.rendering,ne===null)if(Y)ym(L,!1);else{if(Dt!==0||m!==null&&(m.flags&128)!==0)for(m=x.child;m!==null;){if(ne=Nc(m),ne!==null){for(x.flags|=128,ym(L,!1),m=ne.updateQueue,x.updateQueue=m,ly(x,m),x.subtreeFlags=0,m=C,C=x.child;C!==null;)vf(C,m),C=C.sibling;return Pe(So,So.current&1|2),Di&&qu(x,L.treeForkCount),x.child}m=m.sibling}L.tail!==null&&Br()>Qn&&(x.flags|=128,Y=!0,ym(L,!1),x.lanes=4194304)}else{if(!Y)if(m=Nc(ne),m!==null){if(x.flags|=128,Y=!0,m=m.updateQueue,x.updateQueue=m,ly(x,m),ym(L,!0),L.tail===null&&L.tailMode==="hidden"&&!ne.alternate&&!Di)return ja(x),null}else 2*Br()-L.renderingStartTime>Qn&&C!==536870912&&(x.flags|=128,Y=!0,ym(L,!1),x.lanes=4194304);L.isBackwards?(ne.sibling=x.child,x.child=ne):(m=L.last,m!==null?m.sibling=ne:x.child=ne,L.last=ne)}return L.tail!==null?(m=L.tail,L.rendering=m,L.tail=m.sibling,L.renderingStartTime=Br(),m.sibling=null,C=So.current,Pe(So,Y?C&1|2:C&1),Di&&qu(x,L.treeForkCount),m):(ja(x),null);case 22:case 23:return Al(x),Fc(),L=x.memoizedState!==null,m!==null?m.memoizedState!==null!==L&&(x.flags|=8192):L&&(x.flags|=8192),L?(C&536870912)!==0&&(x.flags&128)===0&&(ja(x),x.subtreeFlags&6&&(x.flags|=8192)):ja(x),C=x.updateQueue,C!==null&&ly(x,C.retryQueue),C=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),L=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(L=x.memoizedState.cachePool.pool),L!==C&&(x.flags|=2048),m!==null&&it(Af),null;case 24:return C=null,m!==null&&(C=m.memoizedState.cache),x.memoizedState.cache!==C&&(x.flags|=2048),wf(Yi),ja(x),null;case 25:return null;case 30:return null}throw Error(r(156,x.tag))}function d1(m,x){switch(bf(x),x.tag){case 1:return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 3:return wf(Yi),xe(),m=x.flags,(m&65536)!==0&&(m&128)===0?(x.flags=m&-65537|128,x):null;case 26:case 27:case 5:return ct(x),null;case 31:if(x.memoizedState!==null){if(Al(x),x.alternate===null)throw Error(r(340));Gu()}return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 13:if(Al(x),m=x.memoizedState,m!==null&&m.dehydrated!==null){if(x.alternate===null)throw Error(r(340));Gu()}return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 19:return it(So),null;case 4:return xe(),null;case 10:return wf(x.type),null;case 22:case 23:return Al(x),Fc(),m!==null&&it(Af),m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 24:return wf(Yi),null;case 25:return null;default:return null}}function W0(m,x){switch(bf(x),x.tag){case 3:wf(Yi),xe();break;case 26:case 27:case 5:ct(x);break;case 4:xe();break;case 31:x.memoizedState!==null&&Al(x);break;case 13:Al(x);break;case 19:it(So);break;case 10:wf(x.type);break;case 22:case 23:Al(x),Fc(),m!==null&&it(Af);break;case 24:wf(Yi)}}function Rf(m,x){try{var C=x.updateQueue,L=C!==null?C.lastEffect:null;if(L!==null){var Y=L.next;C=Y;do{if((C.tag&m)===m){L=void 0;var ne=C.create,Te=C.inst;L=ne(),Te.destroy=L}C=C.next}while(C!==Y)}}catch(Xe){Ai(x,x.return,Xe)}}function kf(m,x,C){try{var L=x.updateQueue,Y=L!==null?L.lastEffect:null;if(Y!==null){var ne=Y.next;L=ne;do{if((L.tag&m)===m){var Te=L.inst,Xe=Te.destroy;if(Xe!==void 0){Te.destroy=void 0,Y=x;var St=C,Qt=Xe;try{Qt()}catch(mn){Ai(Y,St,mn)}}}L=L.next}while(L!==ne)}}catch(mn){Ai(x,x.return,mn)}}function sv(m){var x=m.updateQueue;if(x!==null){var C=m.stateNode;try{o1(x,C)}catch(L){Ai(m,m.return,L)}}}function X0(m,x,C){C.props=Ml(m.type,m.memoizedProps),C.state=m.memoizedState;try{C.componentWillUnmount()}catch(L){Ai(m,x,L)}}function _m(m,x){try{var C=m.ref;if(C!==null){switch(m.tag){case 26:case 27:case 5:var L=m.stateNode;break;case 30:L=m.stateNode;break;default:L=m.stateNode}typeof C=="function"?m.refCleanup=C(L):C.current=L}}catch(Y){Ai(m,x,Y)}}function nc(m,x){var C=m.ref,L=m.refCleanup;if(C!==null)if(typeof L=="function")try{L()}catch(Y){Ai(m,x,Y)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof C=="function")try{C(null)}catch(Y){Ai(m,x,Y)}else C.current=null}function Z0(m){var x=m.type,C=m.memoizedProps,L=m.stateNode;try{e:switch(x){case"button":case"input":case"select":case"textarea":C.autoFocus&&L.focus();break e;case"img":C.src?L.src=C.src:C.srcSet&&(L.srcset=C.srcSet)}}catch(Y){Ai(m,m.return,Y)}}function Ii(m,x,C){try{var L=m.stateNode;ZO(L,m.type,C,x),L[ze]=x}catch(Y){Ai(m,m.return,Y)}}function K0(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&ac(m.type)||m.tag===4}function lv(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||K0(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&ac(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Q0(m,x,C){var L=m.tag;if(L===5||L===6)m=m.stateNode,x?(C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C).insertBefore(m,x):(x=C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C,x.appendChild(m),C=C._reactRootContainer,C!=null||x.onclick!==null||(x.onclick=xo));else if(L!==4&&(L===27&&ac(m.type)&&(C=m.stateNode,x=null),m=m.child,m!==null))for(Q0(m,x,C),m=m.sibling;m!==null;)Q0(m,x,C),m=m.sibling}function uv(m,x,C){var L=m.tag;if(L===5||L===6)m=m.stateNode,x?C.insertBefore(m,x):C.appendChild(m);else if(L!==4&&(L===27&&ac(m.type)&&(C=m.stateNode),m=m.child,m!==null))for(uv(m,x,C),m=m.sibling;m!==null;)uv(m,x,C),m=m.sibling}function vm(m){var x=m.stateNode,C=m.memoizedProps;try{for(var L=m.type,Y=x.attributes;Y.length;)x.removeAttributeNode(Y[0]);hl(x,L,C),x[Qe]=m,x[ze]=C}catch(ne){Ai(m,m.return,ne)}}var Vc=!1,uo=!1,Wd=!1,mu=typeof WeakSet=="function"?WeakSet:Set,ha=null;function Ua(m,x){if(m=m.containerInfo,_1=mb,m=Jx(m),xd(m)){if("selectionStart"in m)var C={start:m.selectionStart,end:m.selectionEnd};else e:{C=(C=m.ownerDocument)&&C.defaultView||window;var L=C.getSelection&&C.getSelection();if(L&&L.rangeCount!==0){C=L.anchorNode;var Y=L.anchorOffset,ne=L.focusNode;L=L.focusOffset;try{C.nodeType,ne.nodeType}catch{C=null;break e}var Te=0,Xe=-1,St=-1,Qt=0,mn=0,wn=m,en=null;t:for(;;){for(var ln;wn!==C||Y!==0&&wn.nodeType!==3||(Xe=Te+Y),wn!==ne||L!==0&&wn.nodeType!==3||(St=Te+L),wn.nodeType===3&&(Te+=wn.nodeValue.length),(ln=wn.firstChild)!==null;)en=wn,wn=ln;for(;;){if(wn===m)break t;if(en===C&&++Qt===Y&&(Xe=Te),en===ne&&++mn===L&&(St=Te),(ln=wn.nextSibling)!==null)break;wn=en,en=wn.parentNode}wn=ln}C=Xe===-1||St===-1?null:{start:Xe,end:St}}else C=null}C=C||{start:0,end:0}}else C=null;for(v1={focusedElem:m,selectionRange:C},mb=!1,ha=x;ha!==null;)if(x=ha,m=x.child,(x.subtreeFlags&1028)!==0&&m!==null)m.return=x,ha=m;else for(;ha!==null;){switch(x=ha,ne=x.alternate,m=x.flags,x.tag){case 0:if((m&4)!==0&&(m=x.updateQueue,m=m!==null?m.events:null,m!==null))for(C=0;C<m.length;C++)Y=m[C],Y.ref.impl=Y.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&ne!==null){m=void 0,C=x,Y=ne.memoizedProps,ne=ne.memoizedState,L=C.stateNode;try{var cr=Ml(C.type,Y);m=L.getSnapshotBeforeUpdate(cr,ne),L.__reactInternalSnapshotBeforeUpdate=m}catch(Sr){Ai(C,C.return,Sr)}}break;case 3:if((m&1024)!==0){if(m=x.stateNode.containerInfo,C=m.nodeType,C===9)fy(m);else if(C===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":fy(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(r(163))}if(m=x.sibling,m!==null){m.return=x.return,ha=m;break}ha=x.return}}function Dl(m,x,C){var L=C.flags;switch(C.tag){case 0:case 11:case 15:N(m,C),L&4&&Rf(5,C);break;case 1:if(N(m,C),L&4)if(m=C.stateNode,x===null)try{m.componentDidMount()}catch(Te){Ai(C,C.return,Te)}else{var Y=Ml(C.type,x.memoizedProps);x=x.memoizedState;try{m.componentDidUpdate(Y,x,m.__reactInternalSnapshotBeforeUpdate)}catch(Te){Ai(C,C.return,Te)}}L&64&&sv(C),L&512&&_m(C,C.return);break;case 3:if(N(m,C),L&64&&(m=C.updateQueue,m!==null)){if(x=null,C.child!==null)switch(C.child.tag){case 27:case 5:x=C.child.stateNode;break;case 1:x=C.child.stateNode}try{o1(m,x)}catch(Te){Ai(C,C.return,Te)}}break;case 27:x===null&&L&4&&vm(C);case 26:case 5:N(m,C),x===null&&L&4&&Z0(C),L&512&&_m(C,C.return);break;case 12:N(m,C);break;case 31:N(m,C),L&4&&_T(m,C);break;case 13:N(m,C),L&4&&y(m,C),L&64&&(m=C.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(C=UO.bind(null,C),Vk(m,C))));break;case 22:if(L=C.memoizedState!==null||Vc,!L){x=x!==null&&x.memoizedState!==null||uo,Y=Vc;var ne=uo;Vc=L,(uo=x)&&!ne?H(m,C,(C.subtreeFlags&8772)!==0):N(m,C),Vc=Y,uo=ne}break;case 30:break;default:N(m,C)}}function bm(m){var x=m.alternate;x!==null&&(m.alternate=null,bm(x)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(x=m.stateNode,x!==null&&hn(x)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var Da=null,ll=!1;function Lf(m,x,C){for(C=C.child;C!==null;)Xd(m,x,C),C=C.sibling}function Xd(m,x,C){if(Aa&&typeof Aa.onCommitFiberUnmount=="function")try{Aa.onCommitFiberUnmount(Yo,C)}catch{}switch(C.tag){case 26:uo||nc(C,x),Lf(m,x,C),C.memoizedState?C.memoizedState.count--:C.stateNode&&(C=C.stateNode,C.parentNode.removeChild(C));break;case 27:uo||nc(C,x);var L=Da,Y=ll;ac(C.type)&&(Da=C.stateNode,ll=!1),Lf(m,x,C),ub(C.stateNode),Da=L,ll=Y;break;case 5:uo||nc(C,x);case 6:if(L=Da,Y=ll,Da=null,Lf(m,x,C),Da=L,ll=Y,Da!==null)if(ll)try{(Da.nodeType===9?Da.body:Da.nodeName==="HTML"?Da.ownerDocument.body:Da).removeChild(C.stateNode)}catch(ne){Ai(C,x,ne)}else try{Da.removeChild(C.stateNode)}catch(ne){Ai(C,x,ne)}break;case 18:Da!==null&&(ll?(m=Da,OT(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,C.stateNode),vv(m)):OT(Da,C.stateNode));break;case 4:L=Da,Y=ll,Da=C.stateNode.containerInfo,ll=!0,Lf(m,x,C),Da=L,ll=Y;break;case 0:case 11:case 14:case 15:kf(2,C,x),uo||kf(4,C,x),Lf(m,x,C);break;case 1:uo||(nc(C,x),L=C.stateNode,typeof L.componentWillUnmount=="function"&&X0(C,x,L)),Lf(m,x,C);break;case 21:Lf(m,x,C);break;case 22:uo=(L=uo)||C.memoizedState!==null,Lf(m,x,C),uo=L;break;default:Lf(m,x,C)}}function _T(m,x){if(x.memoizedState===null&&(m=x.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{vv(m)}catch(C){Ai(x,x.return,C)}}}function y(m,x){if(x.memoizedState===null&&(m=x.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{vv(m)}catch(C){Ai(x,x.return,C)}}function l(m){switch(m.tag){case 31:case 13:case 19:var x=m.stateNode;return x===null&&(x=m.stateNode=new mu),x;case 22:return m=m.stateNode,x=m._retryCache,x===null&&(x=m._retryCache=new mu),x;default:throw Error(r(435,m.tag))}}function d(m,x){var C=l(m);x.forEach(function(L){if(!C.has(L)){C.add(L);var Y=$O.bind(null,m,L);L.then(Y,Y)}})}function v(m,x){var C=x.deletions;if(C!==null)for(var L=0;L<C.length;L++){var Y=C[L],ne=m,Te=x,Xe=Te;e:for(;Xe!==null;){switch(Xe.tag){case 27:if(ac(Xe.type)){Da=Xe.stateNode,ll=!1;break e}break;case 5:Da=Xe.stateNode,ll=!1;break e;case 3:case 4:Da=Xe.stateNode.containerInfo,ll=!0;break e}Xe=Xe.return}if(Da===null)throw Error(r(160));Xd(ne,Te,Y),Da=null,ll=!1,ne=Y.alternate,ne!==null&&(ne.return=null),Y.return=null}if(x.subtreeFlags&13886)for(x=x.child;x!==null;)O(x,m),x=x.sibling}var T=null;function O(m,x){var C=m.alternate,L=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:v(x,m),M(m),L&4&&(kf(3,m,m.return),Rf(3,m),kf(5,m,m.return));break;case 1:v(x,m),M(m),L&512&&(uo||C===null||nc(C,C.return)),L&64&&Vc&&(m=m.updateQueue,m!==null&&(L=m.callbacks,L!==null&&(C=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=C===null?L:C.concat(L))));break;case 26:var Y=T;if(v(x,m),M(m),L&512&&(uo||C===null||nc(C,C.return)),L&4){var ne=C!==null?C.memoizedState:null;if(L=m.memoizedState,C===null)if(L===null)if(m.stateNode===null){e:{L=m.type,C=m.memoizedProps,Y=Y.ownerDocument||Y;t:switch(L){case"title":ne=Y.getElementsByTagName("title")[0],(!ne||ne[Nt]||ne[Qe]||ne.namespaceURI==="http://www.w3.org/2000/svg"||ne.hasAttribute("itemprop"))&&(ne=Y.createElement(L),Y.head.insertBefore(ne,Y.querySelector("head > title"))),hl(ne,L,C),ne[Qe]=m,In(ne),L=ne;break e;case"link":var Te=my("link","href",Y).get(L+(C.href||""));if(Te){for(var Xe=0;Xe<Te.length;Xe++)if(ne=Te[Xe],ne.getAttribute("href")===(C.href==null||C.href===""?null:C.href)&&ne.getAttribute("rel")===(C.rel==null?null:C.rel)&&ne.getAttribute("title")===(C.title==null?null:C.title)&&ne.getAttribute("crossorigin")===(C.crossOrigin==null?null:C.crossOrigin)){Te.splice(Xe,1);break t}}ne=Y.createElement(L),hl(ne,L,C),Y.head.appendChild(ne);break;case"meta":if(Te=my("meta","content",Y).get(L+(C.content||""))){for(Xe=0;Xe<Te.length;Xe++)if(ne=Te[Xe],ne.getAttribute("content")===(C.content==null?null:""+C.content)&&ne.getAttribute("name")===(C.name==null?null:C.name)&&ne.getAttribute("property")===(C.property==null?null:C.property)&&ne.getAttribute("http-equiv")===(C.httpEquiv==null?null:C.httpEquiv)&&ne.getAttribute("charset")===(C.charSet==null?null:C.charSet)){Te.splice(Xe,1);break t}}ne=Y.createElement(L),hl(ne,L,C),Y.head.appendChild(ne);break;default:throw Error(r(468,L))}ne[Qe]=m,In(ne),L=ne}m.stateNode=L}else NT(Y,m.type,m.stateNode);else m.stateNode=zT(Y,L,m.memoizedProps);else ne!==L?(ne===null?C.stateNode!==null&&(C=C.stateNode,C.parentNode.removeChild(C)):ne.count--,L===null?NT(Y,m.type,m.stateNode):zT(Y,L,m.memoizedProps)):L===null&&m.stateNode!==null&&Ii(m,m.memoizedProps,C.memoizedProps)}break;case 27:v(x,m),M(m),L&512&&(uo||C===null||nc(C,C.return)),C!==null&&L&4&&Ii(m,m.memoizedProps,C.memoizedProps);break;case 5:if(v(x,m),M(m),L&512&&(uo||C===null||nc(C,C.return)),m.flags&32){Y=m.stateNode;try{Ec(Y,"")}catch(cr){Ai(m,m.return,cr)}}L&4&&m.stateNode!=null&&(Y=m.memoizedProps,Ii(m,Y,C!==null?C.memoizedProps:Y)),L&1024&&(Wd=!0);break;case 6:if(v(x,m),M(m),L&4){if(m.stateNode===null)throw Error(r(162));L=m.memoizedProps,C=m.stateNode;try{C.nodeValue=L}catch(cr){Ai(m,m.return,cr)}}break;case 3:if(Cm=null,Y=T,T=cb(x.containerInfo),v(x,m),T=Y,M(m),L&4&&C!==null&&C.memoizedState.isDehydrated)try{vv(x.containerInfo)}catch(cr){Ai(m,m.return,cr)}Wd&&(Wd=!1,R(m));break;case 4:L=T,T=cb(m.stateNode.containerInfo),v(x,m),M(m),T=L;break;case 12:v(x,m),M(m);break;case 31:v(x,m),M(m),L&4&&(L=m.updateQueue,L!==null&&(m.updateQueue=null,d(m,L)));break;case 13:v(x,m),M(m),m.child.flags&8192&&m.memoizedState!==null!=(C!==null&&C.memoizedState!==null)&&(Dn=Br()),L&4&&(L=m.updateQueue,L!==null&&(m.updateQueue=null,d(m,L)));break;case 22:Y=m.memoizedState!==null;var St=C!==null&&C.memoizedState!==null,Qt=Vc,mn=uo;if(Vc=Qt||Y,uo=mn||St,v(x,m),uo=mn,Vc=Qt,M(m),L&8192)e:for(x=m.stateNode,x._visibility=Y?x._visibility&-2:x._visibility|1,Y&&(C===null||St||Vc||uo||q(m)),C=null,x=m;;){if(x.tag===5||x.tag===26){if(C===null){St=C=x;try{if(ne=St.stateNode,Y)Te=ne.style,typeof Te.setProperty=="function"?Te.setProperty("display","none","important"):Te.display="none";else{Xe=St.stateNode;var wn=St.memoizedProps.style,en=wn!=null&&wn.hasOwnProperty("display")?wn.display:null;Xe.style.display=en==null||typeof en=="boolean"?"":(""+en).trim()}}catch(cr){Ai(St,St.return,cr)}}}else if(x.tag===6){if(C===null){St=x;try{St.stateNode.nodeValue=Y?"":St.memoizedProps}catch(cr){Ai(St,St.return,cr)}}}else if(x.tag===18){if(C===null){St=x;try{var ln=St.stateNode;Y?Am(ln,!0):Am(St.stateNode,!1)}catch(cr){Ai(St,St.return,cr)}}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===m)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break e;for(;x.sibling===null;){if(x.return===null||x.return===m)break e;C===x&&(C=null),x=x.return}C===x&&(C=null),x.sibling.return=x.return,x=x.sibling}L&4&&(L=m.updateQueue,L!==null&&(C=L.retryQueue,C!==null&&(L.retryQueue=null,d(m,C))));break;case 19:v(x,m),M(m),L&4&&(L=m.updateQueue,L!==null&&(m.updateQueue=null,d(m,L)));break;case 30:break;case 21:break;default:v(x,m),M(m)}}function M(m){var x=m.flags;if(x&2){try{for(var C,L=m.return;L!==null;){if(K0(L)){C=L;break}L=L.return}if(C==null)throw Error(r(160));switch(C.tag){case 27:var Y=C.stateNode,ne=lv(m);uv(m,ne,Y);break;case 5:var Te=C.stateNode;C.flags&32&&(Ec(Te,""),C.flags&=-33);var Xe=lv(m);uv(m,Xe,Te);break;case 3:case 4:var St=C.stateNode.containerInfo,Qt=lv(m);Q0(m,Qt,St);break;default:throw Error(r(161))}}catch(mn){Ai(m,m.return,mn)}m.flags&=-3}x&4096&&(m.flags&=-4097)}function R(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var x=m;R(x),x.tag===5&&x.flags&1024&&x.stateNode.reset(),m=m.sibling}}function N(m,x){if(x.subtreeFlags&8772)for(x=x.child;x!==null;)Dl(m,x.alternate,x),x=x.sibling}function q(m){for(m=m.child;m!==null;){var x=m;switch(x.tag){case 0:case 11:case 14:case 15:kf(4,x,x.return),q(x);break;case 1:nc(x,x.return);var C=x.stateNode;typeof C.componentWillUnmount=="function"&&X0(x,x.return,C),q(x);break;case 27:ub(x.stateNode);case 26:case 5:nc(x,x.return),q(x);break;case 22:x.memoizedState===null&&q(x);break;case 30:q(x);break;default:q(x)}m=m.sibling}}function H(m,x,C){for(C=C&&(x.subtreeFlags&8772)!==0,x=x.child;x!==null;){var L=x.alternate,Y=m,ne=x,Te=ne.flags;switch(ne.tag){case 0:case 11:case 15:H(Y,ne,C),Rf(4,ne);break;case 1:if(H(Y,ne,C),L=ne,Y=L.stateNode,typeof Y.componentDidMount=="function")try{Y.componentDidMount()}catch(Qt){Ai(L,L.return,Qt)}if(L=ne,Y=L.updateQueue,Y!==null){var Xe=L.stateNode;try{var St=Y.shared.hiddenCallbacks;if(St!==null)for(Y.shared.hiddenCallbacks=null,Y=0;Y<St.length;Y++)Pd(St[Y],Xe)}catch(Qt){Ai(L,L.return,Qt)}}C&&Te&64&&sv(ne),_m(ne,ne.return);break;case 27:vm(ne);case 26:case 5:H(Y,ne,C),C&&L===null&&Te&4&&Z0(ne),_m(ne,ne.return);break;case 12:H(Y,ne,C);break;case 31:H(Y,ne,C),C&&Te&4&&_T(Y,ne);break;case 13:H(Y,ne,C),C&&Te&4&&y(Y,ne);break;case 22:ne.memoizedState===null&&H(Y,ne,C),_m(ne,ne.return);break;case 30:break;default:H(Y,ne,C)}x=x.sibling}}function re(m,x){var C=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),m=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(m=x.memoizedState.cachePool.pool),m!==C&&(m!=null&&m.refCount++,C!=null&&Tf(C))}function ee(m,x){m=null,x.alternate!==null&&(m=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==m&&(x.refCount++,m!=null&&Tf(m))}function oe(m,x,C,L){if(x.subtreeFlags&10256)for(x=x.child;x!==null;)he(m,x,C,L),x=x.sibling}function he(m,x,C,L){var Y=x.flags;switch(x.tag){case 0:case 11:case 15:oe(m,x,C,L),Y&2048&&Rf(9,x);break;case 1:oe(m,x,C,L);break;case 3:oe(m,x,C,L),Y&2048&&(m=null,x.alternate!==null&&(m=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==m&&(x.refCount++,m!=null&&Tf(m)));break;case 12:if(Y&2048){oe(m,x,C,L),m=x.stateNode;try{var ne=x.memoizedProps,Te=ne.id,Xe=ne.onPostCommit;typeof Xe=="function"&&Xe(Te,x.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(St){Ai(x,x.return,St)}}else oe(m,x,C,L);break;case 31:oe(m,x,C,L);break;case 13:oe(m,x,C,L);break;case 23:break;case 22:ne=x.stateNode,Te=x.alternate,x.memoizedState!==null?ne._visibility&2?oe(m,x,C,L):de(m,x):ne._visibility&2?oe(m,x,C,L):(ne._visibility|=2,ce(m,x,C,L,(x.subtreeFlags&10256)!==0||!1)),Y&2048&&re(Te,x);break;case 24:oe(m,x,C,L),Y&2048&&ee(x.alternate,x);break;default:oe(m,x,C,L)}}function ce(m,x,C,L,Y){for(Y=Y&&((x.subtreeFlags&10256)!==0||!1),x=x.child;x!==null;){var ne=m,Te=x,Xe=C,St=L,Qt=Te.flags;switch(Te.tag){case 0:case 11:case 15:ce(ne,Te,Xe,St,Y),Rf(8,Te);break;case 23:break;case 22:var mn=Te.stateNode;Te.memoizedState!==null?mn._visibility&2?ce(ne,Te,Xe,St,Y):de(ne,Te):(mn._visibility|=2,ce(ne,Te,Xe,St,Y)),Y&&Qt&2048&&re(Te.alternate,Te);break;case 24:ce(ne,Te,Xe,St,Y),Y&&Qt&2048&&ee(Te.alternate,Te);break;default:ce(ne,Te,Xe,St,Y)}x=x.sibling}}function de(m,x){if(x.subtreeFlags&10256)for(x=x.child;x!==null;){var C=m,L=x,Y=L.flags;switch(L.tag){case 22:de(C,L),Y&2048&&re(L.alternate,L);break;case 24:de(C,L),Y&2048&&ee(L.alternate,L);break;default:de(C,L)}x=x.sibling}}var _e=8192;function Me(m,x,C){if(m.subtreeFlags&_e)for(m=m.child;m!==null;)Ce(m,x,C),m=m.sibling}function Ce(m,x,C){switch(m.tag){case 26:Me(m,x,C),m.flags&_e&&m.memoizedState!==null&&Zl(C,T,m.memoizedState,m.memoizedProps);break;case 5:Me(m,x,C);break;case 3:case 4:var L=T;T=cb(m.stateNode.containerInfo),Me(m,x,C),T=L;break;case 22:m.memoizedState===null&&(L=m.alternate,L!==null&&L.memoizedState!==null?(L=_e,_e=16777216,Me(m,x,C),_e=L):Me(m,x,C));break;default:Me(m,x,C)}}function Ae(m){var x=m.alternate;if(x!==null&&(m=x.child,m!==null)){x.child=null;do x=m.sibling,m.sibling=null,m=x;while(m!==null)}}function We(m){var x=m.deletions;if((m.flags&16)!==0){if(x!==null)for(var C=0;C<x.length;C++){var L=x[C];ha=L,Fe(L,m)}Ae(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)$e(m),m=m.sibling}function $e(m){switch(m.tag){case 0:case 11:case 15:We(m),m.flags&2048&&kf(9,m,m.return);break;case 3:We(m);break;case 12:We(m);break;case 22:var x=m.stateNode;m.memoizedState!==null&&x._visibility&2&&(m.return===null||m.return.tag!==13)?(x._visibility&=-3,Ge(m)):We(m);break;default:We(m)}}function Ge(m){var x=m.deletions;if((m.flags&16)!==0){if(x!==null)for(var C=0;C<x.length;C++){var L=x[C];ha=L,Fe(L,m)}Ae(m)}for(m=m.child;m!==null;){switch(x=m,x.tag){case 0:case 11:case 15:kf(8,x,x.return),Ge(x);break;case 22:C=x.stateNode,C._visibility&2&&(C._visibility&=-3,Ge(x));break;default:Ge(x)}m=m.sibling}}function Fe(m,x){for(;ha!==null;){var C=ha;switch(C.tag){case 0:case 11:case 15:kf(8,C,x);break;case 23:case 22:if(C.memoizedState!==null&&C.memoizedState.cachePool!==null){var L=C.memoizedState.cachePool.pool;L!=null&&L.refCount++}break;case 24:Tf(C.memoizedState.cache)}if(L=C.child,L!==null)L.return=C,ha=L;else e:for(C=m;ha!==null;){L=ha;var Y=L.sibling,ne=L.return;if(bm(L),L===C){ha=null;break e}if(Y!==null){Y.return=ne,ha=Y;break e}ha=ne}}}var Re={getCacheForType:function(m){var x=ls(Yi),C=x.data.get(m);return C===void 0&&(C=m(),x.data.set(m,C)),C},cacheSignal:function(){return ls(Yi).controller.signal}},et=typeof WeakMap=="function"?WeakMap:Map,nt=0,st=null,dt=null,ft=0,wt=0,It=null,pt=!1,tt=!1,At=!1,gt=0,Dt=0,qt=0,tn=0,Wt=0,Ht=0,xn=0,yn=null,rn=null,_n=!1,Dn=0,Un=0,Qn=1/0,yr=null,$n=null,Jn=0,Yn=null,Ur=null,Mr=0,ei=0,wr=null,er=null,Rr=0,Pi=null;function ti(){return(nt&2)!==0&&ft!==0?ft&-ft:Ee.T!==null?tb():me()}function Hr(){if(Ht===0)if((ft&536870912)===0||Di){var m=Fu;Fu<<=1,(Fu&3932160)===0&&(Fu=262144),Ht=m}else Ht=536870912;return m=Es.current,m!==null&&(m.flags|=32),Ht}function Kn(m,x,C){(m===st&&(wt===2||wt===9)||m.cancelPendingCommit!==null)&&(Uo(m,0),ai(m,ft,Ht,!1)),wc(m,C),((nt&2)===0||m!==st)&&(m===st&&((nt&2)===0&&(tn|=C),Dt===4&&ai(m,ft,Ht,!1)),Dh(m))}function tr(m,x,C){if((nt&6)!==0)throw Error(r(327));var L=!C&&(x&127)===0&&(x&m.expiredLanes)===0||ah(m,x),Y=L?$i(m,x):Il(m,x,!0),ne=L;do{if(Y===0){tt&&!L&&ai(m,x,0,!1);break}else{if(C=m.current.alternate,ne&&!Ji(C)){Y=Il(m,x,!1),ne=!1;continue}if(Y===2){if(ne=x,m.errorRecoveryDisabledLanes&ne)var Te=0;else Te=m.pendingLanes&-536870913,Te=Te!==0?Te:Te&536870912?536870912:0;if(Te!==0){x=Te;e:{var Xe=m;Y=yn;var St=Xe.current.memoizedState.isDehydrated;if(St&&(Uo(Xe,Te).flags|=256),Te=Il(Xe,Te,!1),Te!==2){if(At&&!St){Xe.errorRecoveryDisabledLanes|=ne,tn|=ne,Y=4;break e}ne=rn,rn=Y,ne!==null&&(rn===null?rn=ne:rn.push.apply(rn,ne))}Y=Te}if(ne=!1,Y!==2)continue}}if(Y===1){Uo(m,0),ai(m,x,0,!0);break}e:{switch(L=m,ne=Y,ne){case 0:case 1:throw Error(r(345));case 4:if((x&4194048)!==x)break;case 6:ai(L,x,Ht,!pt);break e;case 2:rn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((x&62914560)===x&&(Y=Dn+300-Br(),10<Y)){if(ai(L,x,Ht,!pt),oo(L,0,!0)!==0)break e;Mr=x,L.timeoutHandle=hv(yi.bind(null,L,C,rn,yr,_n,x,Ht,tn,xn,pt,ne,"Throttled",-0,0),Y);break e}yi(L,C,rn,yr,_n,x,Ht,tn,xn,pt,ne,null,-0,0)}}break}while(!0);Dh(m)}function yi(m,x,C,L,Y,ne,Te,Xe,St,Qt,mn,wn,en,ln){if(m.timeoutHandle=-1,wn=x.subtreeFlags,wn&8192||(wn&16785408)===16785408){wn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xo},Ce(x,ne,wn);var cr=(ne&62914560)===ne?Dn-Br():(ne&4194048)===ne?Un-Br():0;if(cr=aC(wn,cr),cr!==null){Mr=ne,m.cancelPendingCommit=cr(xm.bind(null,m,x,ne,C,L,Y,Te,Xe,St,mn,wn,null,en,ln)),ai(m,ne,Te,!Qt);return}}xm(m,x,ne,C,L,Y,Te,Xe,St)}function Ji(m){for(var x=m;;){var C=x.tag;if((C===0||C===11||C===15)&&x.flags&16384&&(C=x.updateQueue,C!==null&&(C=C.stores,C!==null)))for(var L=0;L<C.length;L++){var Y=C[L],ne=Y.getSnapshot;Y=Y.value;try{if(!il(ne(),Y))return!1}catch{return!1}}if(C=x.child,x.subtreeFlags&16384&&C!==null)C.return=x,x=C;else{if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function ai(m,x,C,L){x&=~Wt,x&=~tn,m.suspendedLanes|=x,m.pingedLanes&=~x,L&&(m.warmLanes|=x),L=m.expirationTimes;for(var Y=x;0<Y;){var ne=31-Ri(Y),Te=1<<ne;L[ne]=-1,Y&=~Te}C!==0&&Sc(m,C,x)}function _i(){return(nt&6)===0?(Tm(0),!1):!0}function cs(){if(dt!==null){if(wt===0)var m=dt.return;else m=dt,Rc=hu=null,Hg(m),yh=null,rm=0,m=dt;for(;m!==null;)W0(m.alternate,m),m=m.return;dt=null}}function Uo(m,x){var C=m.timeoutHandle;C!==-1&&(m.timeoutHandle=-1,Nk(C)),C=m.cancelPendingCommit,C!==null&&(m.cancelPendingCommit=null,C()),Mr=0,cs(),st=m,dt=C=ol(m.current,null),ft=x,wt=0,It=null,pt=!1,tt=ah(m,x),At=!1,xn=Ht=Wt=tn=qt=Dt=0,rn=yn=null,_n=!1,(x&8)!==0&&(x|=x&32);var L=m.entangledLanes;if(L!==0)for(m=m.entanglements,L&=x;0<L;){var Y=31-Ri(L),ne=1<<Y;x|=m[Y],L&=~ne}return gt=x,Sd(),C}function co(m,x){Kt=null,Ee.H=Ku,x===nm||x===Ng?(x=M0(),wt=3):x===C0?(x=M0(),wt=4):wt=x===ry?8:x!==null&&typeof x=="object"&&typeof x.then=="function"?6:1,It=x,dt===null&&(Dt=1,ny(m,Wo(x,m.current)))}function Gr(){var m=Es.current;return m===null?!0:(ft&4194048)===ft?us===null:(ft&62914560)===ft||(ft&536870912)!==0?m===us:!1}function ul(){var m=Ee.H;return Ee.H=Ku,m===null?Ku:m}function $o(){var m=Ee.A;return Ee.A=Re,m}function Zo(){Dt=4,pt||(ft&4194048)!==ft&&Es.current!==null||(tt=!0),(qt&134217727)===0&&(tn&134217727)===0||st===null||ai(st,ft,Ht,!1)}function Il(m,x,C){var L=nt;nt|=2;var Y=ul(),ne=$o();(st!==m||ft!==x)&&(yr=null,Uo(m,x)),x=!1;var Te=Dt;e:do try{if(wt!==0&&dt!==null){var Xe=dt,St=It;switch(wt){case 8:cs(),Te=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(x=!0);var Qt=wt;if(wt=0,It=null,no(m,Xe,St,Qt),C&&tt){Te=0;break e}break;default:Qt=wt,wt=0,It=null,no(m,Xe,St,Qt)}}qs(),Te=Dt;break}catch(mn){co(m,mn)}while(!0);return x&&m.shellSuspendCounter++,Rc=hu=null,nt=L,Ee.H=Y,Ee.A=ne,dt===null&&(st=null,ft=0,Sd()),Te}function qs(){for(;dt!==null;)Si(dt)}function $i(m,x){var C=nt;nt|=2;var L=ul(),Y=$o();st!==m||ft!==x?(yr=null,Qn=Br()+500,Uo(m,x)):tt=ah(m,x);e:do try{if(wt!==0&&dt!==null){x=dt;var ne=It;t:switch(wt){case 1:wt=0,It=null,no(m,x,ne,1);break;case 2:case 9:if(jg(ne)){wt=0,It=null,Ia(x);break}x=function(){wt!==2&&wt!==9||st!==m||(wt=7),Dh(m)},ne.then(x,x);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:jg(ne)?(wt=0,It=null,Ia(x)):(wt=0,It=null,no(m,x,ne,7));break;case 5:var Te=null;switch(dt.tag){case 26:Te=dt.memoizedState;case 5:case 27:var Xe=dt;if(Te?BT(Te):Xe.stateNode.complete){wt=0,It=null;var St=Xe.sibling;if(St!==null)dt=St;else{var Qt=Xe.return;Qt!==null?(dt=Qt,Wi(Qt)):dt=null}break t}}wt=0,It=null,no(m,x,ne,5);break;case 6:wt=0,It=null,no(m,x,ne,6);break;case 8:cs(),Dt=6;break e;default:throw Error(r(462))}}xa();break}catch(mn){co(m,mn)}while(!0);return Rc=hu=null,Ee.H=L,Ee.A=Y,nt=C,dt!==null?0:(st=null,ft=0,Sd(),Dt)}function xa(){for(;dt!==null&&!Tr();)Si(dt)}function Si(m){var x=sy(m.alternate,m,gt);m.memoizedProps=m.pendingProps,x===null?Wi(m):dt=x}function Ia(m){var x=m,C=x.alternate;switch(x.tag){case 15:case 0:x=iy(C,x,x.pendingProps,x.type,void 0,ft);break;case 11:x=iy(C,x,x.pendingProps,x.type.render,x.ref,ft);break;case 5:Hg(x);default:W0(C,x),x=dt=vf(x,gt),x=sy(C,x,gt)}m.memoizedProps=m.pendingProps,x===null?Wi(m):dt=x}function no(m,x,C,L){Rc=hu=null,Hg(x),yh=null,rm=0;var Y=x.return;try{if(fm(m,Y,x,C,ft)){Dt=1,ny(m,Wo(C,m.current)),dt=null;return}}catch(ne){if(Y!==null)throw dt=Y,ne;Dt=1,ny(m,Wo(C,m.current)),dt=null;return}x.flags&32768?(Di||L===1?m=!0:tt||(ft&536870912)!==0?m=!1:(pt=m=!0,(L===2||L===9||L===3||L===6)&&(L=Es.current,L!==null&&L.tag===13&&(L.flags|=16384))),cl(x,m)):Wi(x)}function Wi(m){var x=m;do{if((x.flags&32768)!==0){cl(x,pt);return}m=x.return;var C=uy(x.alternate,x,gt);if(C!==null){dt=C;return}if(x=x.sibling,x!==null){dt=x;return}dt=x=m}while(x!==null);Dt===0&&(Dt=5)}function cl(m,x){do{var C=d1(m.alternate,m);if(C!==null){C.flags&=32767,dt=C;return}if(C=m.return,C!==null&&(C.flags|=32768,C.subtreeFlags=0,C.deletions=null),!x&&(m=m.sibling,m!==null)){dt=m;return}dt=m=C}while(m!==null);Dt=6,dt=null}function xm(m,x,C,L,Y,ne,Te,Xe,St){m.cancelPendingCommit=null;do Xl();while(Jn!==0);if((nt&6)!==0)throw Error(r(327));if(x!==null){if(x===m.current)throw Error(r(177));if(ne=x.lanes|x.childLanes,ne|=Og,Vt(m,C,ne,Te,Xe,St),m===st&&(dt=st=null,ft=0),Ur=x,Yn=m,Mr=C,ei=ne,wr=Y,er=L,(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,VO(ur,function(){return ic(),null})):(m.callbackNode=null,m.callbackPriority=0),L=(x.flags&13878)!==0,(x.subtreeFlags&13878)!==0||L){L=Ee.T,Ee.T=null,Y=Ne.p,Ne.p=2,Te=nt,nt|=4;try{Ua(m,x,C)}finally{nt=Te,Ne.p=Y,Ee.T=L}}Jn=1,rc(),Zd(),Kd()}}function rc(){if(Jn===1){Jn=0;var m=Yn,x=Ur,C=(x.flags&13878)!==0;if((x.subtreeFlags&13878)!==0||C){C=Ee.T,Ee.T=null;var L=Ne.p;Ne.p=2;var Y=nt;nt|=4;try{O(x,m);var ne=v1,Te=Jx(m.containerInfo),Xe=ne.focusedElem,St=ne.selectionRange;if(Te!==Xe&&Xe&&Xe.ownerDocument&&mf(Xe.ownerDocument.documentElement,Xe)){if(St!==null&&xd(Xe)){var Qt=St.start,mn=St.end;if(mn===void 0&&(mn=Qt),"selectionStart"in Xe)Xe.selectionStart=Qt,Xe.selectionEnd=Math.min(mn,Xe.value.length);else{var wn=Xe.ownerDocument||document,en=wn&&wn.defaultView||window;if(en.getSelection){var ln=en.getSelection(),cr=Xe.textContent.length,Sr=Math.min(St.start,cr),da=St.end===void 0?Sr:Math.min(St.end,cr);!ln.extend&&Sr>da&&(Te=da,da=Sr,Sr=Te);var Bt=$l(Xe,Sr),Ot=$l(Xe,da);if(Bt&&Ot&&(ln.rangeCount!==1||ln.anchorNode!==Bt.node||ln.anchorOffset!==Bt.offset||ln.focusNode!==Ot.node||ln.focusOffset!==Ot.offset)){var Zt=wn.createRange();Zt.setStart(Bt.node,Bt.offset),ln.removeAllRanges(),Sr>da?(ln.addRange(Zt),ln.extend(Ot.node,Ot.offset)):(Zt.setEnd(Ot.node,Ot.offset),ln.addRange(Zt))}}}}for(wn=[],ln=Xe;ln=ln.parentNode;)ln.nodeType===1&&wn.push({element:ln,left:ln.scrollLeft,top:ln.scrollTop});for(typeof Xe.focus=="function"&&Xe.focus(),Xe=0;Xe<wn.length;Xe++){var bn=wn[Xe];bn.element.scrollLeft=bn.left,bn.element.scrollTop=bn.top}}mb=!!_1,v1=_1=null}finally{nt=Y,Ne.p=L,Ee.T=C}}m.current=x,Jn=2}}function Zd(){if(Jn===2){Jn=0;var m=Yn,x=Ur,C=(x.flags&8772)!==0;if((x.subtreeFlags&8772)!==0||C){C=Ee.T,Ee.T=null;var L=Ne.p;Ne.p=2;var Y=nt;nt|=4;try{Dl(m,x.alternate,x)}finally{nt=Y,Ne.p=L,Ee.T=C}}Jn=3}}function Kd(){if(Jn===4||Jn===3){Jn=0,pi();var m=Yn,x=Ur,C=Mr,L=er;(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?Jn=5:(Jn=0,Ur=Yn=null,fl(m,m.pendingLanes));var Y=m.pendingLanes;if(Y===0&&($n=null),ut(C),x=x.stateNode,Aa&&typeof Aa.onCommitFiberRoot=="function")try{Aa.onCommitFiberRoot(Yo,x,void 0,(x.current.flags&128)===128)}catch{}if(L!==null){x=Ee.T,Y=Ne.p,Ne.p=2,Ee.T=null;try{for(var ne=m.onRecoverableError,Te=0;Te<L.length;Te++){var Xe=L[Te];ne(Xe.value,{componentStack:Xe.stack})}}finally{Ee.T=x,Ne.p=Y}}(Mr&3)!==0&&Xl(),Dh(m),Y=m.pendingLanes,(C&261930)!==0&&(Y&42)!==0?m===Pi?Rr++:(Rr=0,Pi=m):Rr=0,Tm(0)}}function fl(m,x){(m.pooledCacheLanes&=x)===0&&(x=m.pooledCache,x!=null&&(m.pooledCache=null,Tf(x)))}function Xl(){return rc(),Zd(),Kd(),ic()}function ic(){if(Jn!==5)return!1;var m=Yn,x=ei;ei=0;var C=ut(Mr),L=Ee.T,Y=Ne.p;try{Ne.p=32>C?32:C,Ee.T=null,C=wr,wr=null;var ne=Yn,Te=Mr;if(Jn=0,Ur=Yn=null,Mr=0,(nt&6)!==0)throw Error(r(331));var Xe=nt;if(nt|=4,$e(ne.current),he(ne,ne.current,Te,C),nt=Xe,Tm(0,!1),Aa&&typeof Aa.onPostCommitFiberRoot=="function")try{Aa.onPostCommitFiberRoot(Yo,ne)}catch{}return!0}finally{Ne.p=Y,Ee.T=L,fl(m,x)}}function Pl(m,x,C){x=Wo(C,x),x=Qu(m.stateNode,x,2),m=Cf(m,x,2),m!==null&&(wc(m,2),Dh(m))}function Ai(m,x,C){if(m.tag===3)Pl(m,m,C);else for(;x!==null;){if(x.tag===3){Pl(x,m,C);break}else if(x.tag===1){var L=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&($n===null||!$n.has(L))){m=Wo(C,m),C=Uc(2),L=Cf(x,C,2),L!==null&&(To(C,L,x,m),wc(L,2),Dh(L));break}}x=x.return}}function zf(m,x,C){var L=m.pingCache;if(L===null){L=m.pingCache=new et;var Y=new Set;L.set(x,Y)}else Y=L.get(x),Y===void 0&&(Y=new Set,L.set(x,Y));Y.has(C)||(At=!0,Y.add(C),m=cv.bind(null,m,x,C),x.then(m,m))}function cv(m,x,C){var L=m.pingCache;L!==null&&L.delete(x),m.pingedLanes|=m.suspendedLanes&C,m.warmLanes&=~C,st===m&&(ft&C)===C&&(Dt===4||Dt===3&&(ft&62914560)===ft&&300>Br()-Dn?(nt&2)===0&&Uo(m,0):Wt|=C,xn===ft&&(xn=0)),Dh(m)}function vT(m,x){x===0&&(x=wl()),m=Jt(m,x),m!==null&&(wc(m,x),Dh(m))}function UO(m){var x=m.memoizedState,C=0;x!==null&&(C=x.retryLane),vT(m,C)}function $O(m,x){var C=0;switch(m.tag){case 31:case 13:var L=m.stateNode,Y=m.memoizedState;Y!==null&&(C=Y.retryLane);break;case 19:L=m.stateNode;break;case 22:L=m.stateNode._retryCache;break;default:throw Error(r(314))}L!==null&&L.delete(x),vT(m,C)}function VO(m,x){return Pr(m,x)}var J0=null,qc=null,p1=!1,Ko=!1,wm=!1,Sm=0;function Dh(m){m!==qc&&m.next===null&&(qc===null?J0=qc=m:qc=qc.next=m),Ko=!0,p1||(p1=!0,Lk())}function Tm(m,x){if(!wm&&Ko){wm=!0;do for(var C=!1,L=J0;L!==null;){if(m!==0){var Y=L.pendingLanes;if(Y===0)var ne=0;else{var Te=L.suspendedLanes,Xe=L.pingedLanes;ne=(1<<31-Ri(42|m)+1)-1,ne&=Y&~(Te&~Xe),ne=ne&201326741?ne&201326741|1:ne?ne|2:0}ne!==0&&(C=!0,xT(L,ne))}else ne=ft,ne=oo(L,L===st?ne:0,L.cancelPendingCommit!==null||L.timeoutHandle!==-1),(ne&3)===0||ah(L,ne)||(C=!0,xT(L,ne));L=L.next}while(C);wm=!1}}function kk(){bT()}function bT(){Ko=p1=!1;var m=0;Sm!==0&&QO()&&(m=Sm);for(var x=Br(),C=null,L=J0;L!==null;){var Y=L.next,ne=eb(L,x);ne===0?(L.next=null,C===null?J0=Y:C.next=Y,Y===null&&(qc=C)):(C=L,(m!==0||(ne&3)!==0)&&(Ko=!0)),L=Y}Jn!==0&&Jn!==5||Tm(m),Sm!==0&&(Sm=0)}function eb(m,x){for(var C=m.suspendedLanes,L=m.pingedLanes,Y=m.expirationTimes,ne=m.pendingLanes&-62914561;0<ne;){var Te=31-Ri(ne),Xe=1<<Te,St=Y[Te];St===-1?((Xe&C)===0||(Xe&L)!==0)&&(Y[Te]=Ip(Xe,x)):St<=x&&(m.expiredLanes|=Xe),ne&=~Xe}if(x=st,C=ft,C=oo(m,m===x?C:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),L=m.callbackNode,C===0||m===x&&(wt===2||wt===9)||m.cancelPendingCommit!==null)return L!==null&&L!==null&&Er(L),m.callbackNode=null,m.callbackPriority=0;if((C&3)===0||ah(m,C)){if(x=C&-C,x===m.callbackPriority)return x;switch(L!==null&&Er(L),ut(C)){case 2:case 8:C=Tn;break;case 32:C=ur;break;case 268435456:C=jr;break;default:C=ur}return L=qO.bind(null,m),C=Pr(C,L),m.callbackPriority=x,m.callbackNode=C,x}return L!==null&&L!==null&&Er(L),m.callbackPriority=2,m.callbackNode=null,2}function qO(m,x){if(Jn!==0&&Jn!==5)return m.callbackNode=null,m.callbackPriority=0,null;var C=m.callbackNode;if(Xl()&&m.callbackNode!==C)return null;var L=ft;return L=oo(m,m===st?L:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),L===0?null:(tr(m,L,x),eb(m,Br()),m.callbackNode!=null&&m.callbackNode===C?qO.bind(null,m):null)}function xT(m,x){if(Xl())return null;tr(m,x,!0)}function Lk(){Bk(function(){(nt&6)!==0?Pr($t,kk):bT()})}function tb(){if(Sm===0){var m=Ef;m===0&&(m=zu,zu<<=1,(zu&261888)===0&&(zu=256)),Sm=m}return Sm}function Ff(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:au(""+m)}function Ih(m,x){var C=x.ownerDocument.createElement("input");return C.name=x.name,C.value=x.value,m.id&&C.setAttribute("form",m.id),x.parentNode.insertBefore(C,x),m=new FormData(m),C.parentNode.removeChild(C),m}function HO(m,x,C,L,Y){if(x==="submit"&&C&&C.stateNode===Y){var ne=Ff((Y[ze]||null).action),Te=L.submitter;Te&&(x=(x=Te[ze]||null)?Ff(x.formAction):Te.getAttribute("formAction"),x!==null&&(ne=x,Te=null));var Xe=new lh("action","action",null,L,Y);m.push({event:Xe,listeners:[{instance:null,listener:function(){if(L.defaultPrevented){if(Sm!==0){var St=Te?Ih(Y,Te):new FormData(Y);Zg(C,{pending:!0,data:St,method:Y.method,action:ne},null,St)}}else typeof ne=="function"&&(Xe.preventDefault(),St=Te?Ih(Y,Te):new FormData(Y),Zg(C,{pending:!0,data:St,method:Y.method,action:ne},ne,St))},currentTarget:Y}]})}}for(var m1=0;m1<Us.length;m1++){var fv=Us[m1],wT=fv.toLowerCase(),nb=fv[0].toUpperCase()+fv.slice(1);ql(wT,"on"+nb)}ql(I_,"onAnimationEnd"),ql(e1,"onAnimationIteration"),ql(Cc,"onAnimationStart"),ql("dblclick","onDoubleClick"),ql("focusin","onFocus"),ql("focusout","onBlur"),ql(t1,"onTransitionRun"),ql(n1,"onTransitionStart"),ql(P_,"onTransitionCancel"),ql(R_,"onTransitionEnd"),zi("onMouseEnter",["mouseout","mouseover"]),zi("onMouseLeave",["mouseout","mouseover"]),zi("onPointerEnter",["pointerout","pointerover"]),zi("onPointerLeave",["pointerout","pointerover"]),sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sa("onBeforeInput",["compositionend","keypress","textInput","paste"]),sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Em="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Em));function rb(m,x){x=(x&4)!==0;for(var C=0;C<m.length;C++){var L=m[C],Y=L.event;L=L.listeners;e:{var ne=void 0;if(x)for(var Te=L.length-1;0<=Te;Te--){var Xe=L[Te],St=Xe.instance,Qt=Xe.currentTarget;if(Xe=Xe.listener,St!==ne&&Y.isPropagationStopped())break e;ne=Xe,Y.currentTarget=Qt;try{ne(Y)}catch(mn){qp(mn)}Y.currentTarget=null,ne=St}else for(Te=0;Te<L.length;Te++){if(Xe=L[Te],St=Xe.instance,Qt=Xe.currentTarget,Xe=Xe.listener,St!==ne&&Y.isPropagationStopped())break e;ne=Xe,Y.currentTarget=Qt;try{ne(Y)}catch(mn){qp(mn)}Y.currentTarget=null,ne=St}}}}function Oi(m,x){var C=x[_t];C===void 0&&(C=x[_t]=new Set);var L=m+"__bubble";C.has(L)||(Qd(x,m,2,!1),C.add(L))}function ib(m,x,C){var L=0;x&&(L|=4),Qd(C,m,L,x)}var ab="_reactListening"+Math.random().toString(36).slice(2);function g1(m){if(!m[ab]){m[ab]=!0,Hn.forEach(function(C){C!=="selectionchange"&&(GO.has(C)||ib(C,!1,m),ib(C,!0,m))});var x=m.nodeType===9?m:m.ownerDocument;x===null||x[ab]||(x[ab]=!0,ib("selectionchange",!1,x))}}function Qd(m,x,C,L){switch(cC(x)){case 2:var Y=E1;break;case 8:Y=uC;break;default:Y=gv}C=Y.bind(null,x,C,m),Y=void 0,!md||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(Y=!0),L?Y!==void 0?m.addEventListener(x,C,{capture:!0,passive:Y}):m.addEventListener(x,C,!0):Y!==void 0?m.addEventListener(x,C,{passive:Y}):m.addEventListener(x,C,!1)}function y1(m,x,C,L,Y){var ne=L;if((x&1)===0&&(x&2)===0&&L!==null)e:for(;;){if(L===null)return;var Te=L.tag;if(Te===3||Te===4){var Xe=L.stateNode.containerInfo;if(Xe===Y)break;if(Te===4)for(Te=L.return;Te!==null;){var St=Te.tag;if((St===3||St===4)&&Te.stateNode.containerInfo===Y)return;Te=Te.return}for(;Xe!==null;){if(Te=Mn(Xe),Te===null)return;if(St=Te.tag,St===5||St===6||St===26||St===27){L=ne=Te;continue e}Xe=Xe.parentNode}}L=L.return}g0(function(){var Qt=ne,mn=oh(C),wn=[];e:{var en=yf.get(m);if(en!==void 0){var ln=lh,cr=m;switch(m){case"keypress":if(Cr(C)===0)break e;case"keydown":case"keyup":ln=tl;break;case"focusin":cr="focus",ln=ws;break;case"focusout":cr="blur",ln=ws;break;case"beforeblur":case"afterblur":ln=ws;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ln=Fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ln=yd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ln=Bs;break;case I_:case e1:case Cc:ln=T_;break;case R_:ln=ii;break;case"scroll":case"scrollend":ln=xg;break;case"wheel":ln=Bp;break;case"copy":case"cut":case"paste":ln=Qr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ln=Yr;break;case"toggle":case"beforetoggle":ln=Ss}var Sr=(x&4)!==0,da=!Sr&&(m==="scroll"||m==="scrollend"),Bt=Sr?en!==null?en+"Capture":null:en;Sr=[];for(var Ot=Qt,Zt;Ot!==null;){var bn=Ot;if(Zt=bn.stateNode,bn=bn.tag,bn!==5&&bn!==26&&bn!==27||Zt===null||Bt===null||(bn=Lp(Ot,Bt),bn!=null&&Sr.push(cy(Ot,bn,Zt))),da)break;Ot=Ot.return}0<Sr.length&&(en=new ln(en,cr,null,C,mn),wn.push({event:en,listeners:Sr}))}}if((x&7)===0){e:{if(en=m==="mouseover"||m==="pointerover",ln=m==="mouseout"||m==="pointerout",en&&C!==ou&&(cr=C.relatedTarget||C.fromElement)&&(Mn(cr)||cr[ot]))break e;if((ln||en)&&(en=mn.window===mn?mn:(en=mn.ownerDocument)?en.defaultView||en.parentWindow:window,ln?(cr=C.relatedTarget||C.toElement,ln=Qt,cr=cr?Mn(cr):null,cr!==null&&(da=s(cr),Sr=cr.tag,cr!==da||Sr!==5&&Sr!==27&&Sr!==6)&&(cr=null)):(ln=null,cr=Qt),ln!==cr)){if(Sr=Fp,bn="onMouseLeave",Bt="onMouseEnter",Ot="mouse",(m==="pointerout"||m==="pointerover")&&(Sr=Yr,bn="onPointerLeave",Bt="onPointerEnter",Ot="pointer"),da=ln==null?en:Zn(ln),Zt=cr==null?en:Zn(cr),en=new Sr(bn,Ot+"leave",ln,C,mn),en.target=da,en.relatedTarget=Zt,bn=null,Mn(mn)===Qt&&(Sr=new Sr(Bt,Ot+"enter",cr,C,mn),Sr.target=Zt,Sr.relatedTarget=da,bn=Sr),da=bn,ln&&cr)t:{for(Sr=zk,Bt=ln,Ot=cr,Zt=0,bn=Bt;bn;bn=Sr(bn))Zt++;bn=0;for(var Dr=Ot;Dr;Dr=Sr(Dr))bn++;for(;0<Zt-bn;)Bt=Sr(Bt),Zt--;for(;0<bn-Zt;)Ot=Sr(Ot),bn--;for(;Zt--;){if(Bt===Ot||Ot!==null&&Bt===Ot.alternate){Sr=Bt;break t}Bt=Sr(Bt),Ot=Sr(Ot)}Sr=null}else Sr=null;ln!==null&&YO(wn,en,ln,Sr,!1),cr!==null&&da!==null&&YO(wn,da,cr,Sr,!0)}}e:{if(en=Qt?Zn(Qt):window,ln=en.nodeName&&en.nodeName.toLowerCase(),ln==="select"||ln==="input"&&en.type==="file")var ea=An;else if(to(en))if(bd)ea=Vp;else{ea=Oc;var _r=T0}else ln=en.nodeName,!ln||ln.toLowerCase()!=="input"||en.type!=="checkbox"&&en.type!=="radio"?Qt&&vg(Qt.elementType)&&(ea=An):ea=Qx;if(ea&&(ea=ea(m,Qt))){ju(wn,ea,C,mn);break e}_r&&_r(m,en,Qt),m==="focusout"&&Qt&&en.type==="number"&&Qt.memoizedProps.value!=null&&Nu(en,"number",en.value)}switch(_r=Qt?Zn(Qt):window,m){case"focusin":(to(_r)||_r.contentEditable==="true")&&(gf=_r,M_=Qt,js=null);break;case"focusout":js=M_=gf=null;break;case"mousedown":D_=!0;break;case"contextmenu":case"mouseup":case"dragend":D_=!1,Ag(wn,C,mn);break;case"selectionchange":if(Eg)break;case"keydown":case"keyup":Ag(wn,C,mn)}var vi;if(x0)e:{switch(m){case"compositionstart":var Fi="onCompositionStart";break e;case"compositionend":Fi="onCompositionEnd";break e;case"compositionupdate":Fi="onCompositionUpdate";break e}Fi=void 0}else Bo?Sg(m,C)&&(Fi="onCompositionEnd"):m==="keydown"&&C.keyCode===229&&(Fi="onCompositionStart");Fi&&(jp&&C.locale!=="ko"&&(Bo||Fi!=="onCompositionStart"?Fi==="onCompositionEnd"&&Bo&&(vi=S_()):(Ns=mn,gd="value"in Ns?Ns.value:Ns.textContent,Bo=!0)),_r=ob(Qt,Fi),0<_r.length&&(Fi=new v0(Fi,m,null,C,mn),wn.push({event:Fi,listeners:_r}),vi?Fi.data=vi:(vi=ss(C),vi!==null&&(Fi.data=vi)))),(vi=w0?nl(m,C):S0(m,C))&&(Fi=ob(Qt,"onBeforeInput"),0<Fi.length&&(_r=new v0("onBeforeInput","beforeinput",null,C,mn),wn.push({event:_r,listeners:Fi}),_r.data=vi)),HO(wn,m,Qt,C,mn)}rb(wn,x)})}function cy(m,x,C){return{instance:m,listener:x,currentTarget:C}}function ob(m,x){for(var C=x+"Capture",L=[];m!==null;){var Y=m,ne=Y.stateNode;if(Y=Y.tag,Y!==5&&Y!==26&&Y!==27||ne===null||(Y=Lp(m,C),Y!=null&&L.unshift(cy(m,Y,ne)),Y=Lp(m,x),Y!=null&&L.push(cy(m,Y,ne))),m.tag===3)return L;m=m.return}return[]}function zk(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function YO(m,x,C,L,Y){for(var ne=x._reactName,Te=[];C!==null&&C!==L;){var Xe=C,St=Xe.alternate,Qt=Xe.stateNode;if(Xe=Xe.tag,St!==null&&St===L)break;Xe!==5&&Xe!==26&&Xe!==27||Qt===null||(St=Qt,Y?(Qt=Lp(C,ne),Qt!=null&&Te.unshift(cy(C,Qt,St))):Y||(Qt=Lp(C,ne),Qt!=null&&Te.push(cy(C,Qt,St)))),C=C.return}Te.length!==0&&m.push({event:x,listeners:Te})}var Fk=/\r\n?/g,WO=/\u0000|\uFFFD/g;function ST(m){return(typeof m=="string"?m:""+m).replace(Fk,`
`).replace(WO,"")}function XO(m,x){return x=ST(x),ST(m)===x}function Pa(m,x,C,L,Y,ne){switch(C){case"children":typeof L=="string"?x==="body"||x==="textarea"&&L===""||Ec(m,L):(typeof L=="number"||typeof L=="bigint")&&x!=="body"&&Ec(m,""+L);break;case"className":li(m,"class",L);break;case"tabIndex":li(m,"tabindex",L);break;case"dir":case"role":case"viewBox":case"width":case"height":li(m,C,L);break;case"style":x_(m,L,ne);break;case"data":if(x!=="object"){li(m,"data",L);break}case"src":case"href":if(L===""&&(x!=="a"||C!=="href")){m.removeAttribute(C);break}if(L==null||typeof L=="function"||typeof L=="symbol"||typeof L=="boolean"){m.removeAttribute(C);break}L=au(""+L),m.setAttribute(C,L);break;case"action":case"formAction":if(typeof L=="function"){m.setAttribute(C,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ne=="function"&&(C==="formAction"?(x!=="input"&&Pa(m,x,"name",Y.name,Y,null),Pa(m,x,"formEncType",Y.formEncType,Y,null),Pa(m,x,"formMethod",Y.formMethod,Y,null),Pa(m,x,"formTarget",Y.formTarget,Y,null)):(Pa(m,x,"encType",Y.encType,Y,null),Pa(m,x,"method",Y.method,Y,null),Pa(m,x,"target",Y.target,Y,null)));if(L==null||typeof L=="symbol"||typeof L=="boolean"){m.removeAttribute(C);break}L=au(""+L),m.setAttribute(C,L);break;case"onClick":L!=null&&(m.onclick=xo);break;case"onScroll":L!=null&&Oi("scroll",m);break;case"onScrollEnd":L!=null&&Oi("scrollend",m);break;case"dangerouslySetInnerHTML":if(L!=null){if(typeof L!="object"||!("__html"in L))throw Error(r(61));if(C=L.__html,C!=null){if(Y.children!=null)throw Error(r(60));m.innerHTML=C}}break;case"multiple":m.multiple=L&&typeof L!="function"&&typeof L!="symbol";break;case"muted":m.muted=L&&typeof L!="function"&&typeof L!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(L==null||typeof L=="function"||typeof L=="boolean"||typeof L=="symbol"){m.removeAttribute("xlink:href");break}C=au(""+L),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":L!=null&&typeof L!="function"&&typeof L!="symbol"?m.setAttribute(C,""+L):m.removeAttribute(C);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":L&&typeof L!="function"&&typeof L!="symbol"?m.setAttribute(C,""):m.removeAttribute(C);break;case"capture":case"download":L===!0?m.setAttribute(C,""):L!==!1&&L!=null&&typeof L!="function"&&typeof L!="symbol"?m.setAttribute(C,L):m.removeAttribute(C);break;case"cols":case"rows":case"size":case"span":L!=null&&typeof L!="function"&&typeof L!="symbol"&&!isNaN(L)&&1<=L?m.setAttribute(C,L):m.removeAttribute(C);break;case"rowSpan":case"start":L==null||typeof L=="function"||typeof L=="symbol"||isNaN(L)?m.removeAttribute(C):m.setAttribute(C,L);break;case"popover":Oi("beforetoggle",m),Oi("toggle",m),si(m,"popover",L);break;case"xlinkActuate":wi(m,"http://www.w3.org/1999/xlink","xlink:actuate",L);break;case"xlinkArcrole":wi(m,"http://www.w3.org/1999/xlink","xlink:arcrole",L);break;case"xlinkRole":wi(m,"http://www.w3.org/1999/xlink","xlink:role",L);break;case"xlinkShow":wi(m,"http://www.w3.org/1999/xlink","xlink:show",L);break;case"xlinkTitle":wi(m,"http://www.w3.org/1999/xlink","xlink:title",L);break;case"xlinkType":wi(m,"http://www.w3.org/1999/xlink","xlink:type",L);break;case"xmlBase":wi(m,"http://www.w3.org/XML/1998/namespace","xml:base",L);break;case"xmlLang":wi(m,"http://www.w3.org/XML/1998/namespace","xml:lang",L);break;case"xmlSpace":wi(m,"http://www.w3.org/XML/1998/namespace","xml:space",L);break;case"is":si(m,"is",L);break;case"innerText":case"textContent":break;default:(!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(C=No.get(C)||C,si(m,C,L))}}function TT(m,x,C,L,Y,ne){switch(C){case"style":x_(m,L,ne);break;case"dangerouslySetInnerHTML":if(L!=null){if(typeof L!="object"||!("__html"in L))throw Error(r(61));if(C=L.__html,C!=null){if(Y.children!=null)throw Error(r(60));m.innerHTML=C}}break;case"children":typeof L=="string"?Ec(m,L):(typeof L=="number"||typeof L=="bigint")&&Ec(m,""+L);break;case"onScroll":L!=null&&Oi("scroll",m);break;case"onScrollEnd":L!=null&&Oi("scrollend",m);break;case"onClick":L!=null&&(m.onclick=xo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xi.hasOwnProperty(C))e:{if(C[0]==="o"&&C[1]==="n"&&(Y=C.endsWith("Capture"),x=C.slice(2,Y?C.length-7:void 0),ne=m[ze]||null,ne=ne!=null?ne[C]:null,typeof ne=="function"&&m.removeEventListener(x,ne,Y),typeof L=="function")){typeof ne!="function"&&ne!==null&&(C in m?m[C]=null:m.hasAttribute(C)&&m.removeAttribute(C)),m.addEventListener(x,L,Y);break e}C in m?m[C]=L:L===!0?m.setAttribute(C,""):si(m,C,L)}}}function hl(m,x,C){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oi("error",m),Oi("load",m);var L=!1,Y=!1,ne;for(ne in C)if(C.hasOwnProperty(ne)){var Te=C[ne];if(Te!=null)switch(ne){case"src":L=!0;break;case"srcSet":Y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,x));default:Pa(m,x,ne,Te,C,null)}}Y&&Pa(m,x,"srcSet",C.srcSet,C,null),L&&Pa(m,x,"src",C.src,C,null);return;case"input":Oi("invalid",m);var Xe=ne=Te=Y=null,St=null,Qt=null;for(L in C)if(C.hasOwnProperty(L)){var mn=C[L];if(mn!=null)switch(L){case"name":Y=mn;break;case"type":Te=mn;break;case"checked":St=mn;break;case"defaultChecked":Qt=mn;break;case"value":ne=mn;break;case"defaultValue":Xe=mn;break;case"children":case"dangerouslySetInnerHTML":if(mn!=null)throw Error(r(137,x));break;default:Pa(m,x,L,mn,C,null)}}xs(m,ne,Xe,St,Qt,Te,Y,!1);return;case"select":Oi("invalid",m),L=Te=ne=null;for(Y in C)if(C.hasOwnProperty(Y)&&(Xe=C[Y],Xe!=null))switch(Y){case"value":ne=Xe;break;case"defaultValue":Te=Xe;break;case"multiple":L=Xe;default:Pa(m,x,Y,Xe,C,null)}x=ne,C=Te,m.multiple=!!L,x!=null?iu(m,!!L,x,!1):C!=null&&iu(m,!!L,C,!0);return;case"textarea":Oi("invalid",m),ne=Y=L=null;for(Te in C)if(C.hasOwnProperty(Te)&&(Xe=C[Te],Xe!=null))switch(Te){case"value":L=Xe;break;case"defaultValue":Y=Xe;break;case"children":ne=Xe;break;case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(r(91));break;default:Pa(m,x,Te,Xe,C,null)}Rp(m,L,Y,ne);return;case"option":for(St in C)if(C.hasOwnProperty(St)&&(L=C[St],L!=null))switch(St){case"selected":m.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Pa(m,x,St,L,C,null)}return;case"dialog":Oi("beforetoggle",m),Oi("toggle",m),Oi("cancel",m),Oi("close",m);break;case"iframe":case"object":Oi("load",m);break;case"video":case"audio":for(L=0;L<Em.length;L++)Oi(Em[L],m);break;case"image":Oi("error",m),Oi("load",m);break;case"details":Oi("toggle",m);break;case"embed":case"source":case"link":Oi("error",m),Oi("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Qt in C)if(C.hasOwnProperty(Qt)&&(L=C[Qt],L!=null))switch(Qt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,x));default:Pa(m,x,Qt,L,C,null)}return;default:if(vg(x)){for(mn in C)C.hasOwnProperty(mn)&&(L=C[mn],L!==void 0&&TT(m,x,mn,L,C,void 0));return}}for(Xe in C)C.hasOwnProperty(Xe)&&(L=C[Xe],L!=null&&Pa(m,x,Xe,L,C,null))}function ZO(m,x,C,L){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Y=null,ne=null,Te=null,Xe=null,St=null,Qt=null,mn=null;for(ln in C){var wn=C[ln];if(C.hasOwnProperty(ln)&&wn!=null)switch(ln){case"checked":break;case"value":break;case"defaultValue":St=wn;default:L.hasOwnProperty(ln)||Pa(m,x,ln,null,L,wn)}}for(var en in L){var ln=L[en];if(wn=C[en],L.hasOwnProperty(en)&&(ln!=null||wn!=null))switch(en){case"type":ne=ln;break;case"name":Y=ln;break;case"checked":Qt=ln;break;case"defaultChecked":mn=ln;break;case"value":Te=ln;break;case"defaultValue":Xe=ln;break;case"children":case"dangerouslySetInnerHTML":if(ln!=null)throw Error(r(137,x));break;default:ln!==wn&&Pa(m,x,en,ln,L,wn)}}Fs(m,Te,Xe,St,Qt,mn,ne,Y);return;case"select":ln=Te=Xe=en=null;for(ne in C)if(St=C[ne],C.hasOwnProperty(ne)&&St!=null)switch(ne){case"value":break;case"multiple":ln=St;default:L.hasOwnProperty(ne)||Pa(m,x,ne,null,L,St)}for(Y in L)if(ne=L[Y],St=C[Y],L.hasOwnProperty(Y)&&(ne!=null||St!=null))switch(Y){case"value":en=ne;break;case"defaultValue":Xe=ne;break;case"multiple":Te=ne;default:ne!==St&&Pa(m,x,Y,ne,L,St)}x=Xe,C=Te,L=ln,en!=null?iu(m,!!C,en,!1):!!L!=!!C&&(x!=null?iu(m,!!C,x,!0):iu(m,!!C,C?[]:"",!1));return;case"textarea":ln=en=null;for(Xe in C)if(Y=C[Xe],C.hasOwnProperty(Xe)&&Y!=null&&!L.hasOwnProperty(Xe))switch(Xe){case"value":break;case"children":break;default:Pa(m,x,Xe,null,L,Y)}for(Te in L)if(Y=L[Te],ne=C[Te],L.hasOwnProperty(Te)&&(Y!=null||ne!=null))switch(Te){case"value":en=Y;break;case"defaultValue":ln=Y;break;case"children":break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(91));break;default:Y!==ne&&Pa(m,x,Te,Y,L,ne)}Sl(m,en,ln);return;case"option":for(var cr in C)if(en=C[cr],C.hasOwnProperty(cr)&&en!=null&&!L.hasOwnProperty(cr))switch(cr){case"selected":m.selected=!1;break;default:Pa(m,x,cr,null,L,en)}for(St in L)if(en=L[St],ln=C[St],L.hasOwnProperty(St)&&en!==ln&&(en!=null||ln!=null))switch(St){case"selected":m.selected=en&&typeof en!="function"&&typeof en!="symbol";break;default:Pa(m,x,St,en,L,ln)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Sr in C)en=C[Sr],C.hasOwnProperty(Sr)&&en!=null&&!L.hasOwnProperty(Sr)&&Pa(m,x,Sr,null,L,en);for(Qt in L)if(en=L[Qt],ln=C[Qt],L.hasOwnProperty(Qt)&&en!==ln&&(en!=null||ln!=null))switch(Qt){case"children":case"dangerouslySetInnerHTML":if(en!=null)throw Error(r(137,x));break;default:Pa(m,x,Qt,en,L,ln)}return;default:if(vg(x)){for(var da in C)en=C[da],C.hasOwnProperty(da)&&en!==void 0&&!L.hasOwnProperty(da)&&TT(m,x,da,void 0,L,en);for(mn in L)en=L[mn],ln=C[mn],!L.hasOwnProperty(mn)||en===ln||en===void 0&&ln===void 0||TT(m,x,mn,en,L,ln);return}}for(var Bt in C)en=C[Bt],C.hasOwnProperty(Bt)&&en!=null&&!L.hasOwnProperty(Bt)&&Pa(m,x,Bt,null,L,en);for(wn in L)en=L[wn],ln=C[wn],!L.hasOwnProperty(wn)||en===ln||en==null&&ln==null||Pa(m,x,wn,en,L,ln)}function ET(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function KO(){if(typeof performance.getEntriesByType=="function"){for(var m=0,x=0,C=performance.getEntriesByType("resource"),L=0;L<C.length;L++){var Y=C[L],ne=Y.transferSize,Te=Y.initiatorType,Xe=Y.duration;if(ne&&Xe&&ET(Te)){for(Te=0,Xe=Y.responseEnd,L+=1;L<C.length;L++){var St=C[L],Qt=St.startTime;if(Qt>Xe)break;var mn=St.transferSize,wn=St.initiatorType;mn&&ET(wn)&&(St=St.responseEnd,Te+=mn*(St<Xe?1:(Xe-Qt)/(St-Qt)))}if(--L,x+=8*(ne+Te)/(Y.duration/1e3),m++,10<m)break}}if(0<m)return x/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var _1=null,v1=null;function sb(m){return m.nodeType===9?m:m.ownerDocument}function AT(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b1(m,x){if(m===0)switch(x){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&x==="foreignObject"?0:m}function Ph(m,x){return m==="textarea"||m==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.children=="bigint"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var Vo=null;function QO(){var m=window.event;return m&&m.type==="popstate"?m===Vo?!1:(Vo=m,!0):(Vo=null,!1)}var hv=typeof setTimeout=="function"?setTimeout:void 0,Nk=typeof clearTimeout=="function"?clearTimeout:void 0,JO=typeof Promise=="function"?Promise:void 0,Bk=typeof queueMicrotask=="function"?queueMicrotask:typeof JO<"u"?function(m){return JO.resolve(null).then(m).catch(jk)}:hv;function jk(m){setTimeout(function(){throw m})}function ac(m){return m==="head"}function OT(m,x){var C=x,L=0;do{var Y=C.nextSibling;if(m.removeChild(C),Y&&Y.nodeType===8)if(C=Y.data,C==="/$"||C==="/&"){if(L===0){m.removeChild(Y),vv(x);return}L--}else if(C==="$"||C==="$?"||C==="$~"||C==="$!"||C==="&")L++;else if(C==="html")ub(m.ownerDocument.documentElement);else if(C==="head"){C=m.ownerDocument.head,ub(C);for(var ne=C.firstChild;ne;){var Te=ne.nextSibling,Xe=ne.nodeName;ne[Nt]||Xe==="SCRIPT"||Xe==="STYLE"||Xe==="LINK"&&ne.rel.toLowerCase()==="stylesheet"||C.removeChild(ne),ne=Te}}else C==="body"&&ub(m.ownerDocument.body);C=Y}while(C);vv(x)}function Am(m,x){var C=m;m=0;do{var L=C.nextSibling;if(C.nodeType===1?x?(C._stashedDisplay=C.style.display,C.style.display="none"):(C.style.display=C._stashedDisplay||"",C.getAttribute("style")===""&&C.removeAttribute("style")):C.nodeType===3&&(x?(C._stashedText=C.nodeValue,C.nodeValue=""):C.nodeValue=C._stashedText||""),L&&L.nodeType===8)if(C=L.data,C==="/$"){if(m===0)break;m--}else C!=="$"&&C!=="$?"&&C!=="$~"&&C!=="$!"||m++;C=L}while(C)}function fy(m){var x=m.firstChild;for(x&&x.nodeType===10&&(x=x.nextSibling);x;){var C=x;switch(x=x.nextSibling,C.nodeName){case"HTML":case"HEAD":case"BODY":fy(C),hn(C);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(C.rel.toLowerCase()==="stylesheet")continue}m.removeChild(C)}}function Uk(m,x,C,L){for(;m.nodeType===1;){var Y=C;if(m.nodeName.toLowerCase()!==x.toLowerCase()){if(!L&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(L){if(!m[Nt])switch(x){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(ne=m.getAttribute("rel"),ne==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(ne!==Y.rel||m.getAttribute("href")!==(Y.href==null||Y.href===""?null:Y.href)||m.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin)||m.getAttribute("title")!==(Y.title==null?null:Y.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(ne=m.getAttribute("src"),(ne!==(Y.src==null?null:Y.src)||m.getAttribute("type")!==(Y.type==null?null:Y.type)||m.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin))&&ne&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(x==="input"&&m.type==="hidden"){var ne=Y.name==null?null:""+Y.name;if(Y.type==="hidden"&&m.getAttribute("name")===ne)return m}else return m;if(m=Hc(m.nextSibling),m===null)break}return null}function $k(m,x,C){if(x==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!C||(m=Hc(m.nextSibling),m===null))return null;return m}function eC(m,x){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!x||(m=Hc(m.nextSibling),m===null))return null;return m}function CT(m){return m.data==="$?"||m.data==="$~"}function MT(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function Vk(m,x){var C=m.ownerDocument;if(m.data==="$~")m._reactRetry=x;else if(m.data!=="$?"||C.readyState!=="loading")x();else{var L=function(){x(),C.removeEventListener("DOMContentLoaded",L)};C.addEventListener("DOMContentLoaded",L),m._reactRetry=L}}function Hc(m){for(;m!=null;m=m.nextSibling){var x=m.nodeType;if(x===1||x===3)break;if(x===8){if(x=m.data,x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"||x==="F!"||x==="F")break;if(x==="/$"||x==="/&")return null}}return m}var lb=null;function tC(m){m=m.nextSibling;for(var x=0;m;){if(m.nodeType===8){var C=m.data;if(C==="/$"||C==="/&"){if(x===0)return Hc(m.nextSibling);x--}else C!=="$"&&C!=="$!"&&C!=="$?"&&C!=="$~"&&C!=="&"||x++}m=m.nextSibling}return null}function DT(m){m=m.previousSibling;for(var x=0;m;){if(m.nodeType===8){var C=m.data;if(C==="$"||C==="$!"||C==="$?"||C==="$~"||C==="&"){if(x===0)return m;x--}else C!=="/$"&&C!=="/&"||x++}m=m.previousSibling}return null}function dv(m,x,C){switch(x=sb(C),m){case"html":if(m=x.documentElement,!m)throw Error(r(452));return m;case"head":if(m=x.head,!m)throw Error(r(453));return m;case"body":if(m=x.body,!m)throw Error(r(454));return m;default:throw Error(r(451))}}function ub(m){for(var x=m.attributes;x.length;)m.removeAttributeNode(x[0]);hn(m)}var Xi=new Map,hy=new Set;function cb(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var Gc=Ne.d;Ne.d={f:x1,r:fb,D:hb,C:PT,L:db,m:qk,X:RT,S:nC,M:kT};function x1(){var m=Gc.f(),x=_i();return m||x}function fb(m){var x=Rn(m);x!==null&&x.tag===5&&x.type==="form"?$0(x):Gc.r(m)}var dy=typeof document>"u"?null:document;function IT(m,x,C){var L=dy;if(L&&typeof x=="string"&&x){var Y=so(x);Y='link[rel="'+m+'"][href="'+Y+'"]',typeof C=="string"&&(Y+='[crossorigin="'+C+'"]'),hy.has(Y)||(hy.add(Y),m={rel:m,crossOrigin:C,href:x},L.querySelector(Y)===null&&(x=L.createElement("link"),hl(x,"link",m),In(x),L.head.appendChild(x)))}}function hb(m){Gc.D(m),IT("dns-prefetch",m,null)}function PT(m,x){Gc.C(m,x),IT("preconnect",m,x)}function db(m,x,C){Gc.L(m,x,C);var L=dy;if(L&&m&&x){var Y='link[rel="preload"][as="'+so(x)+'"]';x==="image"&&C&&C.imageSrcSet?(Y+='[imagesrcset="'+so(C.imageSrcSet)+'"]',typeof C.imageSizes=="string"&&(Y+='[imagesizes="'+so(C.imageSizes)+'"]')):Y+='[href="'+so(m)+'"]';var ne=Y;switch(x){case"style":ne=pv(m);break;case"script":ne=Om(m)}Xi.has(ne)||(m=E({rel:"preload",href:x==="image"&&C&&C.imageSrcSet?void 0:m,as:x},C),Xi.set(ne,m),L.querySelector(Y)!==null||x==="style"&&L.querySelector(Ds(ne))||x==="script"&&L.querySelector(py(ne))||(x=L.createElement("link"),hl(x,"link",m),In(x),L.head.appendChild(x)))}}function qk(m,x){Gc.m(m,x);var C=dy;if(C&&m){var L=x&&typeof x.as=="string"?x.as:"script",Y='link[rel="modulepreload"][as="'+so(L)+'"][href="'+so(m)+'"]',ne=Y;switch(L){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ne=Om(m)}if(!Xi.has(ne)&&(m=E({rel:"modulepreload",href:m},x),Xi.set(ne,m),C.querySelector(Y)===null)){switch(L){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(C.querySelector(py(ne)))return}L=C.createElement("link"),hl(L,"link",m),In(L),C.head.appendChild(L)}}}function nC(m,x,C){Gc.S(m,x,C);var L=dy;if(L&&m){var Y=rr(L).hoistableStyles,ne=pv(m);x=x||"default";var Te=Y.get(ne);if(!Te){var Xe={loading:0,preload:null};if(Te=L.querySelector(Ds(ne)))Xe.loading=5;else{m=E({rel:"stylesheet",href:m,"data-precedence":x},C),(C=Xi.get(ne))&&FT(m,C);var St=Te=L.createElement("link");In(St),hl(St,"link",m),St._p=new Promise(function(Qt,mn){St.onload=Qt,St.onerror=mn}),St.addEventListener("load",function(){Xe.loading|=1}),St.addEventListener("error",function(){Xe.loading|=2}),Xe.loading|=4,Is(Te,x,L)}Te={type:"stylesheet",instance:Te,count:1,state:Xe},Y.set(ne,Te)}}}function RT(m,x){Gc.X(m,x);var C=dy;if(C&&m){var L=rr(C).hoistableScripts,Y=Om(m),ne=L.get(Y);ne||(ne=C.querySelector(py(Y)),ne||(m=E({src:m,async:!0},x),(x=Xi.get(Y))&&pb(m,x),ne=C.createElement("script"),In(ne),hl(ne,"link",m),C.head.appendChild(ne)),ne={type:"script",instance:ne,count:1,state:null},L.set(Y,ne))}}function kT(m,x){Gc.M(m,x);var C=dy;if(C&&m){var L=rr(C).hoistableScripts,Y=Om(m),ne=L.get(Y);ne||(ne=C.querySelector(py(Y)),ne||(m=E({src:m,async:!0,type:"module"},x),(x=Xi.get(Y))&&pb(m,x),ne=C.createElement("script"),In(ne),hl(ne,"link",m),C.head.appendChild(ne)),ne={type:"script",instance:ne,count:1,state:null},L.set(Y,ne))}}function Rh(m,x,C,L){var Y=(Y=dn.current)?cb(Y):null;if(!Y)throw Error(r(446));switch(m){case"meta":case"title":return null;case"style":return typeof C.precedence=="string"&&typeof C.href=="string"?(x=pv(C.href),C=rr(Y).hoistableStyles,L=C.get(x),L||(L={type:"style",instance:null,count:0,state:null},C.set(x,L)),L):{type:"void",instance:null,count:0,state:null};case"link":if(C.rel==="stylesheet"&&typeof C.href=="string"&&typeof C.precedence=="string"){m=pv(C.href);var ne=rr(Y).hoistableStyles,Te=ne.get(m);if(Te||(Y=Y.ownerDocument||Y,Te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ne.set(m,Te),(ne=Y.querySelector(Ds(m)))&&!ne._p&&(Te.instance=ne,Te.state.loading=5),Xi.has(m)||(C={rel:"preload",as:"style",href:C.href,crossOrigin:C.crossOrigin,integrity:C.integrity,media:C.media,hrefLang:C.hrefLang,referrerPolicy:C.referrerPolicy},Xi.set(m,C),ne||LT(Y,m,C,Te.state))),x&&L===null)throw Error(r(528,""));return Te}if(x&&L!==null)throw Error(r(529,""));return null;case"script":return x=C.async,C=C.src,typeof C=="string"&&x&&typeof x!="function"&&typeof x!="symbol"?(x=Om(C),C=rr(Y).hoistableScripts,L=C.get(x),L||(L={type:"script",instance:null,count:0,state:null},C.set(x,L)),L):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,m))}}function pv(m){return'href="'+so(m)+'"'}function Ds(m){return'link[rel="stylesheet"]['+m+"]"}function rC(m){return E({},m,{"data-precedence":m.precedence,precedence:null})}function LT(m,x,C,L){m.querySelector('link[rel="preload"][as="style"]['+x+"]")?L.loading=1:(x=m.createElement("link"),L.preload=x,x.addEventListener("load",function(){return L.loading|=1}),x.addEventListener("error",function(){return L.loading|=2}),hl(x,"link",C),In(x),m.head.appendChild(x))}function Om(m){return'[src="'+so(m)+'"]'}function py(m){return"script[async]"+m}function zT(m,x,C){if(x.count++,x.instance===null)switch(x.type){case"style":var L=m.querySelector('style[data-href~="'+so(C.href)+'"]');if(L)return x.instance=L,In(L),L;var Y=E({},C,{"data-href":C.href,"data-precedence":C.precedence,href:null,precedence:null});return L=(m.ownerDocument||m).createElement("style"),In(L),hl(L,"style",Y),Is(L,C.precedence,m),x.instance=L;case"stylesheet":Y=pv(C.href);var ne=m.querySelector(Ds(Y));if(ne)return x.state.loading|=4,x.instance=ne,In(ne),ne;L=rC(C),(Y=Xi.get(Y))&&FT(L,Y),ne=(m.ownerDocument||m).createElement("link"),In(ne);var Te=ne;return Te._p=new Promise(function(Xe,St){Te.onload=Xe,Te.onerror=St}),hl(ne,"link",L),x.state.loading|=4,Is(ne,C.precedence,m),x.instance=ne;case"script":return ne=Om(C.src),(Y=m.querySelector(py(ne)))?(x.instance=Y,In(Y),Y):(L=C,(Y=Xi.get(ne))&&(L=E({},C),pb(L,Y)),m=m.ownerDocument||m,Y=m.createElement("script"),In(Y),hl(Y,"link",L),m.head.appendChild(Y),x.instance=Y);case"void":return null;default:throw Error(r(443,x.type))}else x.type==="stylesheet"&&(x.state.loading&4)===0&&(L=x.instance,x.state.loading|=4,Is(L,C.precedence,m));return x.instance}function Is(m,x,C){for(var L=C.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Y=L.length?L[L.length-1]:null,ne=Y,Te=0;Te<L.length;Te++){var Xe=L[Te];if(Xe.dataset.precedence===x)ne=Xe;else if(ne!==Y)break}ne?ne.parentNode.insertBefore(m,ne.nextSibling):(x=C.nodeType===9?C.head:C,x.insertBefore(m,x.firstChild))}function FT(m,x){m.crossOrigin==null&&(m.crossOrigin=x.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=x.referrerPolicy),m.title==null&&(m.title=x.title)}function pb(m,x){m.crossOrigin==null&&(m.crossOrigin=x.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=x.referrerPolicy),m.integrity==null&&(m.integrity=x.integrity)}var Cm=null;function my(m,x,C){if(Cm===null){var L=new Map,Y=Cm=new Map;Y.set(C,L)}else Y=Cm,L=Y.get(C),L||(L=new Map,Y.set(C,L));if(L.has(m))return L;for(L.set(m,null),C=C.getElementsByTagName(m),Y=0;Y<C.length;Y++){var ne=C[Y];if(!(ne[Nt]||ne[Qe]||m==="link"&&ne.getAttribute("rel")==="stylesheet")&&ne.namespaceURI!=="http://www.w3.org/2000/svg"){var Te=ne.getAttribute(x)||"";Te=m+Te;var Xe=L.get(Te);Xe?Xe.push(ne):L.set(Te,[ne])}}return L}function NT(m,x,C){m=m.ownerDocument||m,m.head.insertBefore(C,x==="title"?m.querySelector("head > title"):null)}function iC(m,x,C){if(C===1||x.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof x.precedence!="string"||typeof x.href!="string"||x.href==="")break;return!0;case"link":if(typeof x.rel!="string"||typeof x.href!="string"||x.href===""||x.onLoad||x.onError)break;switch(x.rel){case"stylesheet":return m=x.disabled,typeof x.precedence=="string"&&m==null;default:return!0}case"script":if(x.async&&typeof x.async!="function"&&typeof x.async!="symbol"&&!x.onLoad&&!x.onError&&x.src&&typeof x.src=="string")return!0}return!1}function BT(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function Zl(m,x,C,L){if(C.type==="stylesheet"&&(typeof L.media!="string"||matchMedia(L.media).matches!==!1)&&(C.state.loading&4)===0){if(C.instance===null){var Y=pv(L.href),ne=x.querySelector(Ds(Y));if(ne){x=ne._p,x!==null&&typeof x=="object"&&typeof x.then=="function"&&(m.count++,m=Jd.bind(m),x.then(m,m)),C.state.loading|=4,C.instance=ne,In(ne);return}ne=x.ownerDocument||x,L=rC(L),(Y=Xi.get(Y))&&FT(L,Y),ne=ne.createElement("link"),In(ne);var Te=ne;Te._p=new Promise(function(Xe,St){Te.onload=Xe,Te.onerror=St}),hl(ne,"link",L),C.instance=ne}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(C,x),(x=C.state.preload)&&(C.state.loading&3)===0&&(m.count++,C=Jd.bind(m),x.addEventListener("load",C),x.addEventListener("error",C))}}var gy=0;function aC(m,x){return m.stylesheets&&m.count===0&&mv(m,m.stylesheets),0<m.count||0<m.imgCount?function(C){var L=setTimeout(function(){if(m.stylesheets&&mv(m,m.stylesheets),m.unsuspend){var ne=m.unsuspend;m.unsuspend=null,ne()}},6e4+x);0<m.imgBytes&&gy===0&&(gy=62500*KO());var Y=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&mv(m,m.stylesheets),m.unsuspend)){var ne=m.unsuspend;m.unsuspend=null,ne()}},(m.imgBytes>gy?50:800)+x);return m.unsuspend=C,function(){m.unsuspend=null,clearTimeout(L),clearTimeout(Y)}}:null}function Jd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mv(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var oc=null;function mv(m,x){m.stylesheets=null,m.unsuspend!==null&&(m.count++,oc=new Map,x.forEach(Mm,m),oc=null,Jd.call(m))}function Mm(m,x){if(!(x.state.loading&4)){var C=oc.get(m);if(C)var L=C.get(null);else{C=new Map,oc.set(m,C);for(var Y=m.querySelectorAll("link[data-precedence],style[data-precedence]"),ne=0;ne<Y.length;ne++){var Te=Y[ne];(Te.nodeName==="LINK"||Te.getAttribute("media")!=="not all")&&(C.set(Te.dataset.precedence,Te),L=Te)}L&&C.set(null,L)}Y=x.instance,Te=Y.getAttribute("data-precedence"),ne=C.get(Te)||L,ne===L&&C.set(null,Y),C.set(Te,Y),this.count++,L=Jd.bind(this),Y.addEventListener("load",L),Y.addEventListener("error",L),ne?ne.parentNode.insertBefore(Y,ne.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(Y,m.firstChild)),x.state.loading|=4}}var Yc={$$typeof:J,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function w1(m,x,C,L,Y,ne,Te,Xe,St){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_g(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_g(0),this.hiddenUpdates=_g(null),this.identifierPrefix=L,this.onUncaughtError=Y,this.onCaughtError=ne,this.onRecoverableError=Te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=St,this.incompleteTransitions=new Map}function S1(m,x,C,L,Y,ne,Te,Xe,St,Qt,mn,wn){return m=new w1(m,x,C,Te,St,Qt,mn,wn,Xe),x=1,ne===!0&&(x|=24),ne=al(3,null,null,x),m.current=ne,ne.stateNode=m,x=Kp(),x.refCount++,m.pooledCache=x,x.refCount++,ne.memoizedState={element:L,isDehydrated:C,cache:x},$g(ne),m}function T1(m){return m?(m=Mc,m):Mc}function oC(m,x,C,L,Y,ne){Y=T1(Y),L.context===null?L.context=Y:L.pendingContext=Y,L=zc(x),L.payload={element:C},ne=ne===void 0?null:ne,ne!==null&&(L.callback=ne),C=Cf(m,L,x),C!==null&&(Kn(C,m,x),Dd(C,m,x))}function sC(m,x){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var C=m.retryLane;m.retryLane=C!==0&&C<x?C:x}}function jT(m,x){sC(m,x),(m=m.alternate)&&sC(m,x)}function lC(m){if(m.tag===13||m.tag===31){var x=Jt(m,67108864);x!==null&&Kn(x,m,67108864),jT(m,67108864)}}function UT(m){if(m.tag===13||m.tag===31){var x=ti();x=Ar(x);var C=Jt(m,x);C!==null&&Kn(C,m,x),jT(m,x)}}var mb=!0;function E1(m,x,C,L){var Y=Ee.T;Ee.T=null;var ne=Ne.p;try{Ne.p=2,gv(m,x,C,L)}finally{Ne.p=ne,Ee.T=Y}}function uC(m,x,C,L){var Y=Ee.T;Ee.T=null;var ne=Ne.p;try{Ne.p=8,gv(m,x,C,L)}finally{Ne.p=ne,Ee.T=Y}}function gv(m,x,C,L){if(mb){var Y=A1(L);if(Y===null)y1(m,x,L,yy,C),yb(m,L);else if(hC(Y,m,x,C,L))L.stopPropagation();else if(yb(m,L),x&4&&-1<fC.indexOf(m)){for(;Y!==null;){var ne=Rn(Y);if(ne!==null)switch(ne.tag){case 3:if(ne=ne.stateNode,ne.current.memoizedState.isDehydrated){var Te=mi(ne.pendingLanes);if(Te!==0){var Xe=ne;for(Xe.pendingLanes|=2,Xe.entangledLanes|=2;Te;){var St=1<<31-Ri(Te);Xe.entanglements[1]|=St,Te&=~St}Dh(ne),(nt&6)===0&&(Qn=Br()+500,Tm(0))}}break;case 31:case 13:Xe=Jt(ne,2),Xe!==null&&Kn(Xe,ne,2),_i(),jT(ne,2)}if(ne=A1(L),ne===null&&y1(m,x,L,yy,C),ne===Y)break;Y=ne}Y!==null&&L.stopPropagation()}else y1(m,x,L,null,C)}}function A1(m){return m=oh(m),$T(m)}var yy=null;function $T(m){if(yy=null,m=Mn(m),m!==null){var x=s(m);if(x===null)m=null;else{var C=x.tag;if(C===13){if(m=f(x),m!==null)return m;m=null}else if(C===31){if(m=a(x),m!==null)return m;m=null}else if(C===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;m=null}else x!==m&&(m=null)}}return yy=m,null}function cC(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hi()){case $t:return 2;case Tn:return 8;case ur:case Vr:return 32;case jr:return 268435456;default:return 32}default:return 32}}var gb=!1,ep=null,kh=null,Lh=null,yv=new Map,_v=new Map,tp=[],fC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yb(m,x){switch(m){case"focusin":case"focusout":ep=null;break;case"dragenter":case"dragleave":kh=null;break;case"mouseover":case"mouseout":Lh=null;break;case"pointerover":case"pointerout":yv.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":_v.delete(x.pointerId)}}function gu(m,x,C,L,Y,ne){return m===null||m.nativeEvent!==ne?(m={blockedOn:x,domEventName:C,eventSystemFlags:L,nativeEvent:ne,targetContainers:[Y]},x!==null&&(x=Rn(x),x!==null&&lC(x)),m):(m.eventSystemFlags|=L,x=m.targetContainers,Y!==null&&x.indexOf(Y)===-1&&x.push(Y),m)}function hC(m,x,C,L,Y){switch(x){case"focusin":return ep=gu(ep,m,x,C,L,Y),!0;case"dragenter":return kh=gu(kh,m,x,C,L,Y),!0;case"mouseover":return Lh=gu(Lh,m,x,C,L,Y),!0;case"pointerover":var ne=Y.pointerId;return yv.set(ne,gu(yv.get(ne)||null,m,x,C,L,Y)),!0;case"gotpointercapture":return ne=Y.pointerId,_v.set(ne,gu(_v.get(ne)||null,m,x,C,L,Y)),!0}return!1}function dC(m){var x=Mn(m.target);if(x!==null){var C=s(x);if(C!==null){if(x=C.tag,x===13){if(x=f(C),x!==null){m.blockedOn=x,we(m.priority,function(){UT(C)});return}}else if(x===31){if(x=a(C),x!==null){m.blockedOn=x,we(m.priority,function(){UT(C)});return}}else if(x===3&&C.stateNode.current.memoizedState.isDehydrated){m.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}m.blockedOn=null}function O1(m){if(m.blockedOn!==null)return!1;for(var x=m.targetContainers;0<x.length;){var C=A1(m.nativeEvent);if(C===null){C=m.nativeEvent;var L=new C.constructor(C.type,C);ou=L,C.target.dispatchEvent(L),ou=null}else return x=Rn(C),x!==null&&lC(x),m.blockedOn=C,!1;x.shift()}return!0}function pC(m,x,C){O1(m)&&C.delete(x)}function Hk(){gb=!1,ep!==null&&O1(ep)&&(ep=null),kh!==null&&O1(kh)&&(kh=null),Lh!==null&&O1(Lh)&&(Lh=null),yv.forEach(pC),_v.forEach(pC)}function C1(m,x){m.blockedOn===x&&(m.blockedOn=null,gb||(gb=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hk)))}var M1=null;function mC(m){M1!==m&&(M1=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){M1===m&&(M1=null);for(var x=0;x<m.length;x+=3){var C=m[x],L=m[x+1],Y=m[x+2];if(typeof L!="function"){if($T(L||C)===null)continue;break}var ne=Rn(C);ne!==null&&(m.splice(x,3),x-=3,Zg(ne,{pending:!0,data:Y,method:C.method,action:L},L,Y))}}))}function vv(m){function x(St){return C1(St,m)}ep!==null&&C1(ep,m),kh!==null&&C1(kh,m),Lh!==null&&C1(Lh,m),yv.forEach(x),_v.forEach(x);for(var C=0;C<tp.length;C++){var L=tp[C];L.blockedOn===m&&(L.blockedOn=null)}for(;0<tp.length&&(C=tp[0],C.blockedOn===null);)dC(C),C.blockedOn===null&&tp.shift();if(C=(m.ownerDocument||m).$$reactFormReplay,C!=null)for(L=0;L<C.length;L+=3){var Y=C[L],ne=C[L+1],Te=Y[ze]||null;if(typeof ne=="function")Te||mC(C);else if(Te){var Xe=null;if(ne&&ne.hasAttribute("formAction")){if(Y=ne,Te=ne[ze]||null)Xe=Te.formAction;else if($T(Y)!==null)continue}else Xe=Te.action;typeof Xe=="function"?C[L+1]=Xe:(C.splice(L,3),L-=3),mC(C)}}}function bv(){function m(ne){ne.canIntercept&&ne.info==="react-transition"&&ne.intercept({handler:function(){return new Promise(function(Te){return Y=Te})},focusReset:"manual",scroll:"manual"})}function x(){Y!==null&&(Y(),Y=null),L||setTimeout(C,20)}function C(){if(!L&&!navigation.transition){var ne=navigation.currentEntry;ne&&ne.url!=null&&navigation.navigate(ne.url,{state:ne.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var L=!1,Y=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",x),navigation.addEventListener("navigateerror",x),setTimeout(C,100),function(){L=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",x),navigation.removeEventListener("navigateerror",x),Y!==null&&(Y(),Y=null)}}}function VT(m){this._internalRoot=m}_b.prototype.render=VT.prototype.render=function(m){var x=this._internalRoot;if(x===null)throw Error(r(409));var C=x.current,L=ti();oC(C,L,m,x,null,null)},_b.prototype.unmount=VT.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var x=m.containerInfo;oC(m.current,2,null,m,null,null),_i(),x[ot]=null}};function _b(m){this._internalRoot=m}_b.prototype.unstable_scheduleHydration=function(m){if(m){var x=me();m={blockedOn:null,target:m,priority:x};for(var C=0;C<tp.length&&x!==0&&x<tp[C].priority;C++);tp.splice(C,0,m),C===0&&dC(m)}};var vb=t.version;if(vb!=="19.2.4")throw Error(r(527,vb,"19.2.4"));Ne.findDOMNode=function(m){var x=m._reactInternals;if(x===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=_(x),m=m!==null?S(m):null,m=m===null?null:m.stateNode,m};var gC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xv.isDisabled&&xv.supportsFiber)try{Yo=xv.inject(gC),Aa=xv}catch{}}return wE.createRoot=function(m,x){if(!i(m))throw Error(r(299));var C=!1,L="",Y=h1,ne=Ei,Te=gr;return x!=null&&(x.unstable_strictMode===!0&&(C=!0),x.identifierPrefix!==void 0&&(L=x.identifierPrefix),x.onUncaughtError!==void 0&&(Y=x.onUncaughtError),x.onCaughtError!==void 0&&(ne=x.onCaughtError),x.onRecoverableError!==void 0&&(Te=x.onRecoverableError)),x=S1(m,1,!1,null,null,C,L,null,Y,ne,Te,bv),m[ot]=x.current,g1(m),new VT(x)},wE.hydrateRoot=function(m,x,C){if(!i(m))throw Error(r(299));var L=!1,Y="",ne=h1,Te=Ei,Xe=gr,St=null;return C!=null&&(C.unstable_strictMode===!0&&(L=!0),C.identifierPrefix!==void 0&&(Y=C.identifierPrefix),C.onUncaughtError!==void 0&&(ne=C.onUncaughtError),C.onCaughtError!==void 0&&(Te=C.onCaughtError),C.onRecoverableError!==void 0&&(Xe=C.onRecoverableError),C.formState!==void 0&&(St=C.formState)),x=S1(m,1,!0,x,C??null,L,Y,St,ne,Te,Xe,bv),x.context=T1(null),C=x.current,L=ti(),L=Ar(L),Y=zc(L),Y.callback=null,Cf(C,Y,L),C=L,x.current.lanes=C,wc(x,C),Dh(x),m[ot]=x.current,g1(m),new _b(x)},wE.version="19.2.4",wE}var x7;function V0e(){if(x7)return JL.exports;x7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),JL.exports=$0e(),JL.exports}var vae=V0e(),be=DP();const Je=ga(be),MD=k0e({__proto__:null,default:Je},[be]);var i3={exports:{}},a3={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w7;function q0e(){if(w7)return a3;w7=1;var e=DP();function t(p,_){return p===_&&(p!==0||1/p===1/_)||p!==p&&_!==_}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,f=e.useMemo,a=e.useDebugValue;return a3.useSyncExternalStoreWithSelector=function(p,_,S,E,I){var z=i(null);if(z.current===null){var F={hasValue:!1,value:null};z.current=F}else F=z.current;z=f(function(){function k(Q){if(!V){if(V=!0,K=Q,Q=E(Q),I!==void 0&&F.hasValue){var W=F.value;if(I(W,Q))return J=W}return J=Q}if(W=J,n(K,Q))return W;var te=E(Q);return I!==void 0&&I(W,te)?(K=Q,W):(K=Q,J=te)}var V=!1,K,J,ie=S===void 0?null:S;return[function(){return k(_())},ie===null?void 0:function(){return k(ie())}]},[_,S,E,I]);var U=r(p,z[0],z[1]);return s(function(){F.hasValue=!0,F.value=U},[U]),a(U),U},a3}var S7;function H0e(){return S7||(S7=1,i3.exports=q0e()),i3.exports}H0e();var G0e=be.version.startsWith("19"),Y0e=Symbol.for(G0e?"react.transitional.element":"react.element"),W0e=Symbol.for("react.portal"),X0e=Symbol.for("react.fragment"),Z0e=Symbol.for("react.strict_mode"),K0e=Symbol.for("react.profiler"),Q0e=Symbol.for("react.consumer"),J0e=Symbol.for("react.context"),bae=Symbol.for("react.forward_ref"),ebe=Symbol.for("react.suspense"),tbe=Symbol.for("react.suspense_list"),FU=Symbol.for("react.memo"),nbe=Symbol.for("react.lazy"),rbe=bae,ibe=FU;function abe(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case Y0e:switch(e=e.type,e){case X0e:case K0e:case Z0e:case ebe:case tbe:return e;default:switch(e=e&&e.$$typeof,e){case J0e:case bae:case nbe:case FU:return e;case Q0e:return e;default:return t}}case W0e:return t}}}function obe(e){return abe(e)===FU}function sbe(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:s,areStatePropsEqual:f}){let a=!1,p,_,S,E,I;function z(K,J){return p=K,_=J,S=e(p,_),E=t(r,_),I=n(S,E,_),a=!0,I}function F(){return S=e(p,_),t.dependsOnOwnProps&&(E=t(r,_)),I=n(S,E,_),I}function U(){return e.dependsOnOwnProps&&(S=e(p,_)),t.dependsOnOwnProps&&(E=t(r,_)),I=n(S,E,_),I}function k(){const K=e(p,_),J=!f(K,S);return S=K,J&&(I=n(S,E,_)),I}function V(K,J){const ie=!s(J,_),Q=!i(K,p,J,_);return p=K,_=J,ie&&Q?F():ie?U():Q?k():I}return function(J,ie){return a?V(J,ie):z(J,ie)}}function lbe(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...i}){const s=t(e,i),f=n(e,i),a=r(e,i);return sbe(s,f,a,e,i)}function ube(e,t){const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=(...s)=>t(i(...s)))}return n}function E4(e){return function(n){const r=e(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function T7(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function xae(e,t){return function(r,{displayName:i}){const s=function(a,p){return s.dependsOnOwnProps?s.mapToProps(a,p):s.mapToProps(a,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(a,p){s.mapToProps=e,s.dependsOnOwnProps=T7(e);let _=s(a,p);return typeof _=="function"&&(s.mapToProps=_,s.dependsOnOwnProps=T7(_),_=s(a,p)),_},s}}function NU(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function cbe(e){return e&&typeof e=="object"?E4(t=>ube(e,t)):e?typeof e=="function"?xae(e):NU(e,"mapDispatchToProps"):E4(t=>({dispatch:t}))}function fbe(e){return e?typeof e=="function"?xae(e):NU(e,"mapStateToProps"):E4(()=>({}))}function hbe(e,t,n){return{...n,...e,...t}}function dbe(e){return function(n,{displayName:r,areMergedPropsEqual:i}){let s=!1,f;return function(p,_,S){const E=e(p,_,S);return s?i(E,f)||(f=E):(s=!0,f=E),f}}}function pbe(e){return e?typeof e=="function"?dbe(e):NU(e,"mergeProps"):()=>hbe}function mbe(e){e()}function gbe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){mbe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var E7={notify(){},get:()=>[]};function wae(e,t){let n,r=E7,i=0,s=!1;function f(U){S();const k=r.subscribe(U);let V=!1;return()=>{V||(V=!0,k(),E())}}function a(){r.notify()}function p(){F.onStateChange&&F.onStateChange()}function _(){return s}function S(){i++,n||(n=t?t.addNestedSub(p):e.subscribe(p),r=gbe())}function E(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=E7)}function I(){s||(s=!0,S())}function z(){s&&(s=!1,E())}const F={addNestedSub:f,notifyNestedSubs:a,handleChangeWrapper:p,isSubscribed:_,trySubscribe:I,tryUnsubscribe:z,getListeners:()=>r};return F}var ybe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_be=ybe(),vbe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",bbe=vbe(),xbe=()=>_be||bbe?be.useLayoutEffect:be.useEffect,DD=xbe();function A7(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function o3(e,t){if(A7(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!A7(e[n[i]],t[n[i]]))return!1;return!0}var wbe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Sbe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Tbe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Sae={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ebe={[rbe]:Tbe,[ibe]:Sae};function O7(e){return obe(e)?Sae:Ebe[e.$$typeof]||wbe}var Abe=Object.defineProperty,Obe=Object.getOwnPropertyNames,C7=Object.getOwnPropertySymbols,Cbe=Object.getOwnPropertyDescriptor,Mbe=Object.getPrototypeOf,M7=Object.prototype;function A4(e,t){if(typeof t!="string"){if(M7){const s=Mbe(t);s&&s!==M7&&A4(e,s)}let n=Obe(t);C7&&(n=n.concat(C7(t)));const r=O7(e),i=O7(t);for(let s=0;s<n.length;++s){const f=n[s];if(!Sbe[f]&&!(i&&i[f])&&!(r&&r[f])){const a=Cbe(t,f);try{Abe(e,f,a)}catch{}}}}return e}var s3=Symbol.for("react-redux-context"),l3=typeof globalThis<"u"?globalThis:{};function Dbe(){if(!be.createContext)return{};const e=l3[s3]??(l3[s3]=new Map);let t=e.get(be.createContext);return t||(t=be.createContext(null),e.set(be.createContext,t)),t}var Tae=Dbe(),Ibe=[null,null];function Pbe(e,t,n){DD(()=>e(...t),n)}function Rbe(e,t,n,r,i,s){e.current=r,n.current=!1,i.current&&(i.current=null,s())}function kbe(e,t,n,r,i,s,f,a,p,_,S){if(!e)return()=>{};let E=!1,I=null;const z=()=>{if(E||!a.current)return;const U=t.getState();let k,V;try{k=r(U,i.current)}catch(K){V=K,I=K}V||(I=null),k===s.current?f.current||_():(s.current=k,p.current=k,f.current=!0,S())};return n.onStateChange=z,n.trySubscribe(),z(),()=>{if(E=!0,n.tryUnsubscribe(),n.onStateChange=null,I)throw I}}function Lbe(e,t){return e===t}function zbe(e,t,n,{pure:r,areStatesEqual:i=Lbe,areOwnPropsEqual:s=o3,areStatePropsEqual:f=o3,areMergedPropsEqual:a=o3,forwardRef:p=!1,context:_=Tae}={}){const S=_,E=fbe(e),I=cbe(t),z=pbe(n),F=!!e;return k=>{const V=k.displayName||k.name||"Component",K=`Connect(${V})`,J={shouldHandleStateChanges:F,displayName:K,wrappedComponentName:V,WrappedComponent:k,initMapStateToProps:E,initMapDispatchToProps:I,initMergeProps:z,areStatesEqual:i,areStatePropsEqual:f,areOwnPropsEqual:s,areMergedPropsEqual:a};function ie(te){const[X,ae,le]=be.useMemo(()=>{const{reactReduxForwardedRef:mt,...Ct}=te;return[te.context,mt,Ct]},[te]),ge=be.useMemo(()=>{let mt=S;return X!=null&&X.Consumer,mt},[X,S]),ye=be.useContext(ge),De=!!te.store&&!!te.store.getState&&!!te.store.dispatch,He=!!ye&&!!ye.store,Be=De?te.store:ye.store,Ee=He?ye.getServerState:Be.getState,Ne=be.useMemo(()=>lbe(Be.dispatch,J),[Be]),[at,yt]=be.useMemo(()=>{if(!F)return Ibe;const mt=wae(Be,De?void 0:ye.subscription),Ct=mt.notifyNestedSubs.bind(mt);return[mt,Ct]},[Be,De,ye]),je=be.useMemo(()=>De?ye:{...ye,subscription:at},[De,ye,at]),Ke=be.useRef(void 0),it=be.useRef(le),Pe=be.useRef(void 0),jt=be.useRef(!1),sn=be.useRef(!1),dn=be.useRef(void 0);DD(()=>(sn.current=!0,()=>{sn.current=!1}),[]);const Sn=be.useMemo(()=>()=>Pe.current&&le===it.current?Pe.current:Ne(Be.getState(),le),[Be,le]),Ut=be.useMemo(()=>Ct=>at?kbe(F,Be,at,Ne,it,Ke,jt,sn,Pe,yt,Ct):()=>{},[at]);Pbe(Rbe,[it,Ke,jt,le,Pe,yt]);let xe;try{xe=be.useSyncExternalStore(Ut,Sn,Ee?()=>Ne(Ee(),le):Sn)}catch(mt){throw dn.current&&(mt.message+=`
The error may be correlated with this previous error:
${dn.current.stack}

`),mt}DD(()=>{dn.current=void 0,Pe.current=void 0,Ke.current=xe});const Ye=be.useMemo(()=>be.createElement(k,{...xe,ref:ae}),[ae,k,xe]);return be.useMemo(()=>F?be.createElement(ge.Provider,{value:je},Ye):Ye,[ge,Ye,je])}const W=be.memo(ie);if(W.WrappedComponent=k,W.displayName=ie.displayName=K,p){const X=be.forwardRef(function(le,ge){return be.createElement(W,{...le,reactReduxForwardedRef:ge})});return X.displayName=K,X.WrappedComponent=k,A4(X,k)}return A4(W,k)}}var af=zbe;function Fbe(e){const{children:t,context:n,serverState:r,store:i}=e,s=be.useMemo(()=>{const p=wae(i);return{store:i,subscription:p,getServerState:r?()=>r:void 0}},[i,r]),f=be.useMemo(()=>i.getState(),[i]);DD(()=>{const{subscription:p}=s;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),f!==i.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[s,f]);const a=n||Tae;return be.createElement(a.Provider,{value:s},t)}var Nbe=Fbe,u3={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var D7;function Bbe(){return D7||(D7=1,(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var f=typeof s;if(f==="string"||f==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&r.push(a)}}else if(f==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var p in s)t.call(s,p)&&s[p]&&r.push(p)}}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(u3)),u3.exports}var jbe=Bbe();const ar=ga(jbe);function Kr(){return Kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kr.apply(null,arguments)}function BU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function I7(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Ube(e){var t=$be(e,"string");return typeof t=="symbol"?t:String(t)}function $be(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Eae(e,t,n){var r=be.useRef(e!==void 0),i=be.useState(t),s=i[0],f=i[1],a=e!==void 0,p=r.current;return r.current=a,!a&&p&&s!==t&&f(t),[a?e:s,be.useCallback(function(_){for(var S=arguments.length,E=new Array(S>1?S-1:0),I=1;I<S;I++)E[I-1]=arguments[I];n&&n.apply(void 0,[_].concat(E)),f(_)},[n])]}function jA(e,t){return Object.keys(t).reduce(function(n,r){var i,s=n,f=s[I7(r)],a=s[r],p=BU(s,[I7(r),r].map(Ube)),_=t[r],S=Eae(a,f,e[_]),E=S[0],I=S[1];return Kr({},p,(i={},i[r]=E,i[_]=I,i))},e)}function ID(e,t){return ID=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ID(e,t)}function Vbe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ID(e,t)}const qbe=["xxl","xl","lg","md","sm","xs"],Hbe="xs",UA=be.createContext({prefixes:{},breakpoints:qbe,minBreakpoint:Hbe}),{Consumer:Idt,Provider:Pdt}=UA;function br(e,t){const{prefixes:n}=be.useContext(UA);return e||n[t]||t}function Aae(){const{breakpoints:e}=be.useContext(UA);return e}function Oae(){const{minBreakpoint:e}=be.useContext(UA);return e}function jU(){const{dir:e}=be.useContext(UA);return e==="rtl"}function FS(e){return e&&e.ownerDocument||document}function Gbe(e){var t=FS(e);return t&&t.defaultView||window}function Ybe(e,t){return Gbe(e).getComputedStyle(e,t)}var Wbe=/([A-Z])/g;function Xbe(e){return e.replace(Wbe,"-$1").toLowerCase()}var Zbe=/^ms-/;function tM(e){return Xbe(e).replace(Zbe,"-ms-")}var Kbe=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Qbe(e){return!!(e&&Kbe.test(e))}function zy(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue(tM(t))||Ybe(e).getPropertyValue(tM(t));Object.keys(t).forEach(function(i){var s=t[i];!s&&s!==0?e.style.removeProperty(tM(i)):Qbe(i)?r+=i+"("+s+") ":n+=tM(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}var c3={exports:{}},f3,P7;function Jbe(){if(P7)return f3;P7=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return f3=e,f3}var h3,R7;function exe(){if(R7)return h3;R7=1;var e=Jbe();function t(){}function n(){}return n.resetWarningCache=t,h3=function(){function r(f,a,p,_,S,E){if(E!==e){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},h3}var k7;function txe(){return k7||(k7=1,c3.exports=exe()()),c3.exports}var nxe=txe();const Bn=ga(nxe);var UU=_ae();const Fv=ga(UU),L7={disabled:!1},Cae=Je.createContext(null);var rxe=function(t){return t.scrollTop},KE="unmounted",Iv="exited",cp="entering",Cy="entered",C2="exiting",u_=(function(e){Vbe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var f=i,a=f&&!f.isMounting?r.enter:r.appear,p;return s.appearStatus=null,r.in?a?(p=Iv,s.appearStatus=cp):p=Cy:r.unmountOnExit||r.mountOnEnter?p=KE:p=Iv,s.state={status:p},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var f=i.in;return f&&s.status===KE?{status:Iv}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var f=this.state.status;this.props.in?f!==cp&&f!==Cy&&(s=cp):(f===cp||f===Cy)&&(s=C2)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,f,a;return s=f=a=i,i!=null&&typeof i!="number"&&(s=i.exit,f=i.enter,a=i.appear!==void 0?i.appear:f),{exit:s,enter:f,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===cp){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:Fv.findDOMNode(this);f&&rxe(f)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Iv&&this.setState({status:KE})},n.performEnter=function(i){var s=this,f=this.props.enter,a=this.context?this.context.isMounting:i,p=this.props.nodeRef?[a]:[Fv.findDOMNode(this),a],_=p[0],S=p[1],E=this.getTimeouts(),I=a?E.appear:E.enter;if(!i&&!f||L7.disabled){this.safeSetState({status:Cy},function(){s.props.onEntered(_)});return}this.props.onEnter(_,S),this.safeSetState({status:cp},function(){s.props.onEntering(_,S),s.onTransitionEnd(I,function(){s.safeSetState({status:Cy},function(){s.props.onEntered(_,S)})})})},n.performExit=function(){var i=this,s=this.props.exit,f=this.getTimeouts(),a=this.props.nodeRef?void 0:Fv.findDOMNode(this);if(!s||L7.disabled){this.safeSetState({status:Iv},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:C2},function(){i.props.onExiting(a),i.onTransitionEnd(f.exit,function(){i.safeSetState({status:Iv},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,f=!0;return this.nextCallback=function(a){f&&(f=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var f=this.props.nodeRef?this.props.nodeRef.current:Fv.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!f||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var p=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],_=p[0],S=p[1];this.props.addEndListener(_,S)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===KE)return null;var s=this.props,f=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=BU(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Je.createElement(Cae.Provider,{value:null},typeof f=="function"?f(i,a):Je.cloneElement(Je.Children.only(f),a))},t})(Je.Component);u_.contextType=Cae;u_.propTypes={};function Z1(){}u_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Z1,onEntering:Z1,onEntered:Z1,onExit:Z1,onExiting:Z1,onExited:Z1};u_.UNMOUNTED=KE;u_.EXITED=Iv;u_.ENTERING=cp;u_.ENTERED=Cy;u_.EXITING=C2;function Mae(e){return e.code==="Escape"||e.keyCode===27}function ixe(){const e=be.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function Dx(e){if(!e||typeof e=="function")return null;const{major:t}=ixe();return t>=19?e.props.ref:e.ref}const NS=!!(typeof window<"u"&&window.document&&window.document.createElement);var O4=!1,C4=!1;try{var d3={get passive(){return O4=!0},get once(){return C4=O4=!0}};NS&&(window.addEventListener("test",d3,d3),window.removeEventListener("test",d3,!0))}catch{}function Dae(e,t,n,r){if(r&&typeof r!="boolean"&&!C4){var i=r.once,s=r.capture,f=n;!C4&&i&&(f=n.__once||function a(p){this.removeEventListener(t,a,s),n.call(this,p)},n.__once=f),e.addEventListener(t,f,O4?r:s)}e.addEventListener(t,n,r)}function M4(e,t,n,r){var i=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)}function My(e,t,n,r){return Dae(e,t,n,r),function(){M4(e,t,n,r)}}function axe(e,t,n,r){if(r===void 0&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}function oxe(e){var t=zy(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function sxe(e,t,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||axe(e,"transitionend",!0)},t+n),s=My(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function Iae(e,t,n,r){n==null&&(n=oxe(e)||0);var i=sxe(e,n,r),s=My(e,"transitionend",t);return function(){i(),s()}}function z7(e,t){const n=zy(e,t)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function $U(e,t){const n=z7(e,"transitionDuration"),r=z7(e,"transitionDelay"),i=Iae(e,s=>{s.target===e&&(i(),t(s))},n+r)}function SE(...e){return e.filter(t=>t!=null).reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?n:function(...i){t.apply(this,i),n.apply(this,i)}},null)}function Pae(e){e.offsetHeight}var F7=function(t){return!t||typeof t=="function"?t:function(n){t.current=n}};function lxe(e,t){var n=F7(e),r=F7(t);return function(i){n&&n(i),r&&r(i)}}function IP(e,t){return be.useMemo(function(){return lxe(e,t)},[e,t])}function PD(e){return e&&"setState"in e?Fv.findDOMNode(e):e??null}const PP=Je.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:f,children:a,childRef:p,..._},S)=>{const E=be.useRef(null),I=IP(E,p),z=W=>{I(PD(W))},F=W=>te=>{W&&E.current&&W(E.current,te)},U=be.useCallback(F(e),[e]),k=be.useCallback(F(t),[t]),V=be.useCallback(F(n),[n]),K=be.useCallback(F(r),[r]),J=be.useCallback(F(i),[i]),ie=be.useCallback(F(s),[s]),Q=be.useCallback(F(f),[f]);return Oe.jsx(u_,{ref:S,..._,onEnter:U,onEntered:V,onEntering:k,onExit:K,onExited:ie,onExiting:J,addEndListener:Q,nodeRef:E,children:typeof a=="function"?(W,te)=>a(W,{...te,ref:z}):Je.cloneElement(a,{ref:z})})});PP.displayName="TransitionWrapper";const uxe={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function cxe(e,t){const n=`offset${e[0].toUpperCase()}${e.slice(1)}`,r=t[n],i=uxe[e];return r+parseInt(zy(t,i[0]),10)+parseInt(zy(t,i[1]),10)}const fxe={[Iv]:"collapse",[C2]:"collapsing",[cp]:"collapsing",[Cy]:"collapse show"},Rae=Je.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:i,className:s,children:f,dimension:a="height",in:p=!1,timeout:_=300,mountOnEnter:S=!1,unmountOnExit:E=!1,appear:I=!1,getDimensionValue:z=cxe,...F},U)=>{const k=typeof a=="function"?a():a,V=be.useMemo(()=>SE(W=>{W.style[k]="0"},e),[k,e]),K=be.useMemo(()=>SE(W=>{const te=`scroll${k[0].toUpperCase()}${k.slice(1)}`;W.style[k]=`${W[te]}px`},t),[k,t]),J=be.useMemo(()=>SE(W=>{W.style[k]=null},n),[k,n]),ie=be.useMemo(()=>SE(W=>{W.style[k]=`${z(k,W)}px`,Pae(W)},r),[r,z,k]),Q=be.useMemo(()=>SE(W=>{W.style[k]=null},i),[k,i]);return Oe.jsx(PP,{ref:U,addEndListener:$U,...F,"aria-expanded":F.role?p:null,onEnter:V,onEntering:K,onEntered:J,onExit:ie,onExiting:Q,childRef:Dx(f),in:p,timeout:_,mountOnEnter:S,unmountOnExit:E,appear:I,children:(W,te)=>Je.cloneElement(f,{...te,className:ar(s,f.props.className,fxe[W],k==="width"&&"collapse-horizontal")})})});Rae.displayName="Collapse";function hxe(e){var t=be.useRef(e);return be.useEffect(function(){t.current=e},[e]),t}function Xy(e){var t=hxe(e);return be.useCallback(function(){return t.current&&t.current.apply(t,arguments)},[t])}const $A=(e=>be.forwardRef((t,n)=>Oe.jsx("div",{...t,ref:n,className:ar(t.className,e)}))),kae=$A("h4");kae.displayName="DivStyledAsH4";const Lae=be.forwardRef(({className:e,bsPrefix:t,as:n=kae,...r},i)=>(t=br(t,"alert-heading"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));Lae.displayName="AlertHeading";function N7(){return be.useState(null)}function dxe(e){const t=be.useRef(e);return be.useEffect(()=>{t.current=e},[e]),t}function Wh(e){const t=dxe(e);return be.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function zae(){const e=be.useRef(!0),t=be.useRef(()=>e.current);return be.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function pxe(e){const t=be.useRef(null);return be.useEffect(()=>{t.current=e}),t.current}const mxe=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",gxe=typeof document<"u",B7=gxe||mxe?be.useLayoutEffect:be.useEffect,yxe=["as","disabled"];function _xe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vxe(e){return!e||e.trim()==="#"}function VU({tagName:e,disabled:t,href:n,target:r,rel:i,role:s,onClick:f,tabIndex:a=0,type:p}){e||(n!=null||r!=null||i!=null?e="a":e="button");const _={tagName:e};if(e==="button")return[{type:p||"button",disabled:t},_];const S=I=>{if((t||e==="a"&&vxe(n))&&I.preventDefault(),t){I.stopPropagation();return}f==null||f(I)},E=I=>{I.key===" "&&(I.preventDefault(),S(I))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:t?void 0:a,href:n,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?i:void 0,onClick:S,onKeyDown:E},_]}const Fae=be.forwardRef((e,t)=>{let{as:n,disabled:r}=e,i=_xe(e,yxe);const[s,{tagName:f}]=VU(Object.assign({tagName:n,disabled:r},i));return Oe.jsx(f,Object.assign({},i,s,{ref:t}))});Fae.displayName="Button";const bxe=["onKeyDown"];function xxe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function wxe(e){return!e||e.trim()==="#"}const qU=be.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=xxe(e,bxe);const[i]=VU(Object.assign({tagName:"a"},r)),s=Wh(f=>{i.onKeyDown(f),n==null||n(f)});return wxe(r.href)||r.role==="button"?Oe.jsx("a",Object.assign({ref:t},r,i,{onKeyDown:s})):Oe.jsx("a",Object.assign({ref:t},r,{onKeyDown:n}))});qU.displayName="Anchor";const Nae=be.forwardRef(({className:e,bsPrefix:t,as:n=qU,...r},i)=>(t=br(t,"alert-link"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));Nae.displayName="AlertLink";const Sxe={[cp]:"show",[Cy]:"show"},og=be.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:r,...i},s)=>{const f={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},a=be.useCallback((p,_)=>{Pae(p),r==null||r(p,_)},[r]);return Oe.jsx(PP,{ref:s,addEndListener:$U,...f,onEnter:a,childRef:Dx(t),children:(p,_)=>be.cloneElement(t,{..._,className:ar("fade",e,t.props.className,Sxe[p],n[p])})})});og.displayName="Fade";const Txe={"aria-label":Bn.string,onClick:Bn.func,variant:Bn.oneOf(["white"])},VA=be.forwardRef(({className:e,variant:t,"aria-label":n="Close",...r},i)=>Oe.jsx("button",{ref:i,type:"button",className:ar("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...r}));VA.displayName="CloseButton";VA.propTypes=Txe;const Bae=be.forwardRef((e,t)=>{const{bsPrefix:n,show:r=!0,closeLabel:i="Close alert",closeVariant:s,className:f,children:a,variant:p="primary",onClose:_,dismissible:S,transition:E=og,...I}=jA(e,{show:"onClose"}),z=br(n,"alert"),F=Xy(V=>{_&&_(!1,V)}),U=E===!0?og:E,k=Oe.jsxs("div",{role:"alert",...U?void 0:I,ref:t,className:ar(f,z,p&&`${z}-${p}`,S&&`${z}-dismissible`),children:[S&&Oe.jsx(VA,{onClick:F,"aria-label":i,variant:s}),a]});return U?Oe.jsx(U,{unmountOnExit:!0,...I,ref:void 0,in:r,children:k}):r?k:null});Bae.displayName="Alert";const D4=Object.assign(Bae,{Link:Nae,Heading:Lae}),I4=be.forwardRef(({bsPrefix:e,bg:t="primary",pill:n=!1,text:r,className:i,as:s="span",...f},a)=>{const p=br(e,"badge");return Oe.jsx(s,{ref:a,...f,className:ar(i,p,n&&"rounded-pill",r&&`text-${r}`,t&&`bg-${t}`)})});I4.displayName="Badge";const Yf=be.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:r,active:i=!1,disabled:s=!1,className:f,...a},p)=>{const _=br(t,"btn"),[S,{tagName:E}]=VU({tagName:e,disabled:s,...a}),I=E;return Oe.jsx(I,{...S,...a,ref:p,disabled:s,className:ar(f,_,i&&"active",n&&`${_}-${n}`,r&&`${_}-${r}`,a.href&&s&&"disabled")})});Yf.displayName="Button";const HU=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=br(t,"card-body"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));HU.displayName="CardBody";const jae=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=br(t,"card-footer"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));jae.displayName="CardFooter";const GU=be.createContext(null);GU.displayName="CardHeaderContext";const Uae=be.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},i)=>{const s=br(e,"card-header"),f=be.useMemo(()=>({cardHeaderBsPrefix:s}),[s]);return Oe.jsx(GU.Provider,{value:f,children:Oe.jsx(n,{ref:i,...r,className:ar(t,s)})})});Uae.displayName="CardHeader";const $ae=be.forwardRef(({bsPrefix:e,className:t,variant:n,as:r="img",...i},s)=>{const f=br(e,"card-img");return Oe.jsx(r,{ref:s,className:ar(n?`${f}-${n}`:f,t),...i})});$ae.displayName="CardImg";const Vae=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=br(t,"card-img-overlay"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));Vae.displayName="CardImgOverlay";const qae=be.forwardRef(({className:e,bsPrefix:t,as:n="a",...r},i)=>(t=br(t,"card-link"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));qae.displayName="CardLink";const Exe=$A("h6"),Hae=be.forwardRef(({className:e,bsPrefix:t,as:n=Exe,...r},i)=>(t=br(t,"card-subtitle"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));Hae.displayName="CardSubtitle";const Gae=be.forwardRef(({className:e,bsPrefix:t,as:n="p",...r},i)=>(t=br(t,"card-text"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));Gae.displayName="CardText";const Axe=$A("h5"),Yae=be.forwardRef(({className:e,bsPrefix:t,as:n=Axe,...r},i)=>(t=br(t,"card-title"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));Yae.displayName="CardTitle";const Wae=be.forwardRef(({bsPrefix:e,className:t,bg:n,text:r,border:i,body:s=!1,children:f,as:a="div",...p},_)=>{const S=br(e,"card");return Oe.jsx(a,{ref:_,...p,className:ar(t,S,n&&`bg-${n}`,r&&`text-${r}`,i&&`border-${i}`),children:s?Oe.jsx(HU,{children:f}):f})});Wae.displayName="Card";const Ub=Object.assign(Wae,{Img:$ae,Title:Yae,Subtitle:Hae,Body:HU,Link:qae,Text:Gae,Header:Uae,Footer:jae,ImgOverlay:Vae});function Oxe(){var e=be.useRef(!0),t=be.useRef(function(){return e.current});return be.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),t.current}function Cxe(e){var t=be.useRef(e);return t.current=e,t}function Xae(e){var t=Cxe(e);be.useEffect(function(){return function(){return t.current()}},[])}var P4=Math.pow(2,31)-1;function Zae(e,t,n){var r=n-Date.now();e.current=r<=P4?setTimeout(t,r):setTimeout(function(){return Zae(e,t,n)},P4)}function Mxe(){var e=Oxe(),t=be.useRef();return Xae(function(){return clearTimeout(t.current)}),be.useMemo(function(){var n=function(){return clearTimeout(t.current)};function r(i,s){s===void 0&&(s=0),e()&&(n(),s<=P4?t.current=setTimeout(i,s):Zae(t,i,Date.now()+s))}return{set:r,clear:n}},[])}function R4(e,t){let n=0;return be.Children.map(e,r=>be.isValidElement(r)?t(r,n++):r)}function Dxe(e,t){let n=0;be.Children.forEach(e,r=>{be.isValidElement(r)&&t(r,n++)})}function Ixe(e,t){return be.Children.toArray(e).some(n=>be.isValidElement(n)&&n.type===t)}function Pxe({as:e,bsPrefix:t,className:n,...r}){t=br(t,"col");const i=Aae(),s=Oae(),f=[],a=[];return i.forEach(p=>{const _=r[p];delete r[p];let S,E,I;typeof _=="object"&&_!=null?{span:S,offset:E,order:I}=_:S=_;const z=p!==s?`-${p}`:"";S&&f.push(S===!0?`${t}${z}`:`${t}${z}-${S}`),I!=null&&a.push(`order${z}-${I}`),E!=null&&a.push(`offset${z}-${E}`)}),[{...r,className:ar(n,...f,...a)},{as:e,bsPrefix:t,spans:f}]}const kr=be.forwardRef((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:f}]=Pxe(e);return Oe.jsx(i,{...r,ref:t,className:ar(n,!f.length&&s)})});kr.displayName="Col";const Kae=be.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:r,...i},s)=>{const f=br(e,"container"),a=typeof t=="string"?`-${t}`:"-fluid";return Oe.jsx(n,{ref:s,...i,className:ar(r,t?`${f}${a}`:f)})});Kae.displayName="Container";var Rxe=Function.prototype.bind.call(Function.prototype.call,[].slice);function kb(e,t){return Rxe(e.querySelectorAll(t))}function kxe(e,t,n){const r=be.useRef(e!==void 0),[i,s]=be.useState(t),f=e!==void 0,a=r.current;return r.current=f,!f&&a&&i!==t&&s(t),[f?e:i,be.useCallback((...p)=>{const[_,...S]=p;let E=n==null?void 0:n(_,...S);return s(_),E},[n])]}function Lxe(){const[,e]=be.useReducer(t=>t+1,0);return e}var j7=Object.prototype.hasOwnProperty;function U7(e,t,n){for(n of e.keys())if(c2(n,t))return n}function c2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&c2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=U7(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=U7(t,i),!i)||!c2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(j7.call(e,n)&&++r&&!j7.call(t,n)||!(n in t)||!c2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function zxe(e){const t=zae();return[e[0],be.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var Qc="top",nd="bottom",rd="right",Jc="left",YU="auto",qA=[Qc,nd,rd,Jc],Nw="start",M2="end",Fxe="clippingParents",Qae="viewport",TE="popper",Nxe="reference",$7=qA.reduce(function(e,t){return e.concat([t+"-"+Nw,t+"-"+M2])},[]),Jae=[].concat(qA,[YU]).reduce(function(e,t){return e.concat([t,t+"-"+Nw,t+"-"+M2])},[]),Bxe="beforeRead",jxe="read",Uxe="afterRead",$xe="beforeMain",Vxe="main",qxe="afterMain",Hxe="beforeWrite",Gxe="write",Yxe="afterWrite",Wxe=[Bxe,jxe,Uxe,$xe,Vxe,qxe,Hxe,Gxe,Yxe];function Xm(e){return e.split("-")[0]}function th(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ux(e){var t=th(e).Element;return e instanceof t||e instanceof Element}function Zm(e){var t=th(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function WU(e){if(typeof ShadowRoot>"u")return!1;var t=th(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var Kb=Math.max,RD=Math.min,Bw=Math.round;function k4(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function eoe(){return!/^((?!chrome|android).)*safari/i.test(k4())}function jw(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&Zm(e)&&(i=e.offsetWidth>0&&Bw(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Bw(r.height)/e.offsetHeight||1);var f=ux(e)?th(e):window,a=f.visualViewport,p=!eoe()&&n,_=(r.left+(p&&a?a.offsetLeft:0))/i,S=(r.top+(p&&a?a.offsetTop:0))/s,E=r.width/i,I=r.height/s;return{width:E,height:I,top:S,right:_+E,bottom:S+I,left:_,x:_,y:S}}function XU(e){var t=jw(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function toe(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&WU(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Xv(e){return e?(e.nodeName||"").toLowerCase():null}function Zy(e){return th(e).getComputedStyle(e)}function Xxe(e){return["table","td","th"].indexOf(Xv(e))>=0}function a0(e){return((ux(e)?e.ownerDocument:e.document)||window.document).documentElement}function RP(e){return Xv(e)==="html"?e:e.assignedSlot||e.parentNode||(WU(e)?e.host:null)||a0(e)}function V7(e){return!Zm(e)||Zy(e).position==="fixed"?null:e.offsetParent}function Zxe(e){var t=/firefox/i.test(k4()),n=/Trident/i.test(k4());if(n&&Zm(e)){var r=Zy(e);if(r.position==="fixed")return null}var i=RP(e);for(WU(i)&&(i=i.host);Zm(i)&&["html","body"].indexOf(Xv(i))<0;){var s=Zy(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function HA(e){for(var t=th(e),n=V7(e);n&&Xxe(n)&&Zy(n).position==="static";)n=V7(n);return n&&(Xv(n)==="html"||Xv(n)==="body"&&Zy(n).position==="static")?t:n||Zxe(e)||t}function ZU(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function f2(e,t,n){return Kb(e,RD(t,n))}function Kxe(e,t,n){var r=f2(e,t,n);return r>n?n:r}function noe(){return{top:0,right:0,bottom:0,left:0}}function roe(e){return Object.assign({},noe(),e)}function ioe(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var Qxe=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,roe(typeof t!="number"?t:ioe(t,qA))};function Jxe(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,f=n.modifiersData.popperOffsets,a=Xm(n.placement),p=ZU(a),_=[Jc,rd].indexOf(a)>=0,S=_?"height":"width";if(!(!s||!f)){var E=Qxe(i.padding,n),I=XU(s),z=p==="y"?Qc:Jc,F=p==="y"?nd:rd,U=n.rects.reference[S]+n.rects.reference[p]-f[p]-n.rects.popper[S],k=f[p]-n.rects.reference[p],V=HA(s),K=V?p==="y"?V.clientHeight||0:V.clientWidth||0:0,J=U/2-k/2,ie=E[z],Q=K-I[S]-E[F],W=K/2-I[S]/2+J,te=f2(ie,W,Q),X=p;n.modifiersData[r]=(t={},t[X]=te,t.centerOffset=te-W,t)}}function e1e(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||toe(t.elements.popper,i)&&(t.elements.arrow=i))}const t1e={name:"arrow",enabled:!0,phase:"main",fn:Jxe,effect:e1e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Uw(e){return e.split("-")[1]}var n1e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function r1e(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:Bw(n*i)/i||0,y:Bw(r*i)/i||0}}function q7(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,f=e.offsets,a=e.position,p=e.gpuAcceleration,_=e.adaptive,S=e.roundOffsets,E=e.isFixed,I=f.x,z=I===void 0?0:I,F=f.y,U=F===void 0?0:F,k=typeof S=="function"?S({x:z,y:U}):{x:z,y:U};z=k.x,U=k.y;var V=f.hasOwnProperty("x"),K=f.hasOwnProperty("y"),J=Jc,ie=Qc,Q=window;if(_){var W=HA(n),te="clientHeight",X="clientWidth";if(W===th(n)&&(W=a0(n),Zy(W).position!=="static"&&a==="absolute"&&(te="scrollHeight",X="scrollWidth")),W=W,i===Qc||(i===Jc||i===rd)&&s===M2){ie=nd;var ae=E&&W===Q&&Q.visualViewport?Q.visualViewport.height:W[te];U-=ae-r.height,U*=p?1:-1}if(i===Jc||(i===Qc||i===nd)&&s===M2){J=rd;var le=E&&W===Q&&Q.visualViewport?Q.visualViewport.width:W[X];z-=le-r.width,z*=p?1:-1}}var ge=Object.assign({position:a},_&&n1e),ye=S===!0?r1e({x:z,y:U},th(n)):{x:z,y:U};if(z=ye.x,U=ye.y,p){var De;return Object.assign({},ge,(De={},De[ie]=K?"0":"",De[J]=V?"0":"",De.transform=(Q.devicePixelRatio||1)<=1?"translate("+z+"px, "+U+"px)":"translate3d("+z+"px, "+U+"px, 0)",De))}return Object.assign({},ge,(t={},t[ie]=K?U+"px":"",t[J]=V?z+"px":"",t.transform="",t))}function i1e(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,f=s===void 0?!0:s,a=n.roundOffsets,p=a===void 0?!0:a,_={placement:Xm(t.placement),variation:Uw(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,q7(Object.assign({},_,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:p})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,q7(Object.assign({},_,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const a1e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:i1e,data:{}};var nM={passive:!0};function o1e(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=i===void 0?!0:i,f=r.resize,a=f===void 0?!0:f,p=th(t.elements.popper),_=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&_.forEach(function(S){S.addEventListener("scroll",n.update,nM)}),a&&p.addEventListener("resize",n.update,nM),function(){s&&_.forEach(function(S){S.removeEventListener("scroll",n.update,nM)}),a&&p.removeEventListener("resize",n.update,nM)}}const s1e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:o1e,data:{}};var l1e={left:"right",right:"left",bottom:"top",top:"bottom"};function QM(e){return e.replace(/left|right|bottom|top/g,function(t){return l1e[t]})}var u1e={start:"end",end:"start"};function H7(e){return e.replace(/start|end/g,function(t){return u1e[t]})}function KU(e){var t=th(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function QU(e){return jw(a0(e)).left+KU(e).scrollLeft}function c1e(e,t){var n=th(e),r=a0(e),i=n.visualViewport,s=r.clientWidth,f=r.clientHeight,a=0,p=0;if(i){s=i.width,f=i.height;var _=eoe();(_||!_&&t==="fixed")&&(a=i.offsetLeft,p=i.offsetTop)}return{width:s,height:f,x:a+QU(e),y:p}}function f1e(e){var t,n=a0(e),r=KU(e),i=(t=e.ownerDocument)==null?void 0:t.body,s=Kb(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),f=Kb(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+QU(e),p=-r.scrollTop;return Zy(i||n).direction==="rtl"&&(a+=Kb(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:f,x:a,y:p}}function JU(e){var t=Zy(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function aoe(e){return["html","body","#document"].indexOf(Xv(e))>=0?e.ownerDocument.body:Zm(e)&&JU(e)?e:aoe(RP(e))}function h2(e,t){var n;t===void 0&&(t=[]);var r=aoe(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=th(r),f=i?[s].concat(s.visualViewport||[],JU(r)?r:[]):r,a=t.concat(f);return i?a:a.concat(h2(RP(f)))}function L4(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function h1e(e,t){var n=jw(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function G7(e,t,n){return t===Qae?L4(c1e(e,n)):ux(t)?h1e(t,n):L4(f1e(a0(e)))}function d1e(e){var t=h2(RP(e)),n=["absolute","fixed"].indexOf(Zy(e).position)>=0,r=n&&Zm(e)?HA(e):e;return ux(r)?t.filter(function(i){return ux(i)&&toe(i,r)&&Xv(i)!=="body"}):[]}function p1e(e,t,n,r){var i=t==="clippingParents"?d1e(e):[].concat(t),s=[].concat(i,[n]),f=s[0],a=s.reduce(function(p,_){var S=G7(e,_,r);return p.top=Kb(S.top,p.top),p.right=RD(S.right,p.right),p.bottom=RD(S.bottom,p.bottom),p.left=Kb(S.left,p.left),p},G7(e,f,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ooe(e){var t=e.reference,n=e.element,r=e.placement,i=r?Xm(r):null,s=r?Uw(r):null,f=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,p;switch(i){case Qc:p={x:f,y:t.y-n.height};break;case nd:p={x:f,y:t.y+t.height};break;case rd:p={x:t.x+t.width,y:a};break;case Jc:p={x:t.x-n.width,y:a};break;default:p={x:t.x,y:t.y}}var _=i?ZU(i):null;if(_!=null){var S=_==="y"?"height":"width";switch(s){case Nw:p[_]=p[_]-(t[S]/2-n[S]/2);break;case M2:p[_]=p[_]+(t[S]/2-n[S]/2);break}}return p}function D2(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,s=n.strategy,f=s===void 0?e.strategy:s,a=n.boundary,p=a===void 0?Fxe:a,_=n.rootBoundary,S=_===void 0?Qae:_,E=n.elementContext,I=E===void 0?TE:E,z=n.altBoundary,F=z===void 0?!1:z,U=n.padding,k=U===void 0?0:U,V=roe(typeof k!="number"?k:ioe(k,qA)),K=I===TE?Nxe:TE,J=e.rects.popper,ie=e.elements[F?K:I],Q=p1e(ux(ie)?ie:ie.contextElement||a0(e.elements.popper),p,S,f),W=jw(e.elements.reference),te=ooe({reference:W,element:J,placement:i}),X=L4(Object.assign({},J,te)),ae=I===TE?X:W,le={top:Q.top-ae.top+V.top,bottom:ae.bottom-Q.bottom+V.bottom,left:Q.left-ae.left+V.left,right:ae.right-Q.right+V.right},ge=e.modifiersData.offset;if(I===TE&&ge){var ye=ge[i];Object.keys(le).forEach(function(De){var He=[rd,nd].indexOf(De)>=0?1:-1,Be=[Qc,nd].indexOf(De)>=0?"y":"x";le[De]+=ye[Be]*He})}return le}function m1e(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,f=n.padding,a=n.flipVariations,p=n.allowedAutoPlacements,_=p===void 0?Jae:p,S=Uw(r),E=S?a?$7:$7.filter(function(F){return Uw(F)===S}):qA,I=E.filter(function(F){return _.indexOf(F)>=0});I.length===0&&(I=E);var z=I.reduce(function(F,U){return F[U]=D2(e,{placement:U,boundary:i,rootBoundary:s,padding:f})[Xm(U)],F},{});return Object.keys(z).sort(function(F,U){return z[F]-z[U]})}function g1e(e){if(Xm(e)===YU)return[];var t=QM(e);return[H7(e),t,H7(t)]}function y1e(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,f=n.altAxis,a=f===void 0?!0:f,p=n.fallbackPlacements,_=n.padding,S=n.boundary,E=n.rootBoundary,I=n.altBoundary,z=n.flipVariations,F=z===void 0?!0:z,U=n.allowedAutoPlacements,k=t.options.placement,V=Xm(k),K=V===k,J=p||(K||!F?[QM(k)]:g1e(k)),ie=[k].concat(J).reduce(function(jt,sn){return jt.concat(Xm(sn)===YU?m1e(t,{placement:sn,boundary:S,rootBoundary:E,padding:_,flipVariations:F,allowedAutoPlacements:U}):sn)},[]),Q=t.rects.reference,W=t.rects.popper,te=new Map,X=!0,ae=ie[0],le=0;le<ie.length;le++){var ge=ie[le],ye=Xm(ge),De=Uw(ge)===Nw,He=[Qc,nd].indexOf(ye)>=0,Be=He?"width":"height",Ee=D2(t,{placement:ge,boundary:S,rootBoundary:E,altBoundary:I,padding:_}),Ne=He?De?rd:Jc:De?nd:Qc;Q[Be]>W[Be]&&(Ne=QM(Ne));var at=QM(Ne),yt=[];if(s&&yt.push(Ee[ye]<=0),a&&yt.push(Ee[Ne]<=0,Ee[at]<=0),yt.every(function(jt){return jt})){ae=ge,X=!1;break}te.set(ge,yt)}if(X)for(var je=F?3:1,Ke=function(sn){var dn=ie.find(function(Sn){var Ut=te.get(Sn);if(Ut)return Ut.slice(0,sn).every(function(xe){return xe})});if(dn)return ae=dn,"break"},it=je;it>0;it--){var Pe=Ke(it);if(Pe==="break")break}t.placement!==ae&&(t.modifiersData[r]._skip=!0,t.placement=ae,t.reset=!0)}}const _1e={name:"flip",enabled:!0,phase:"main",fn:y1e,requiresIfExists:["offset"],data:{_skip:!1}};function Y7(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function W7(e){return[Qc,rd,nd,Jc].some(function(t){return e[t]>=0})}function v1e(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,f=D2(t,{elementContext:"reference"}),a=D2(t,{altBoundary:!0}),p=Y7(f,r),_=Y7(a,i,s),S=W7(p),E=W7(_);t.modifiersData[n]={referenceClippingOffsets:p,popperEscapeOffsets:_,isReferenceHidden:S,hasPopperEscaped:E},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":S,"data-popper-escaped":E})}const b1e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:v1e};function x1e(e,t,n){var r=Xm(e),i=[Jc,Qc].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,f=s[0],a=s[1];return f=f||0,a=(a||0)*i,[Jc,rd].indexOf(r)>=0?{x:a,y:f}:{x:f,y:a}}function w1e(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=i===void 0?[0,0]:i,f=Jae.reduce(function(S,E){return S[E]=x1e(E,t.rects,s),S},{}),a=f[t.placement],p=a.x,_=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=p,t.modifiersData.popperOffsets.y+=_),t.modifiersData[r]=f}const S1e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:w1e};function T1e(e){var t=e.state,n=e.name;t.modifiersData[n]=ooe({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const E1e={name:"popperOffsets",enabled:!0,phase:"read",fn:T1e,data:{}};function A1e(e){return e==="x"?"y":"x"}function O1e(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=i===void 0?!0:i,f=n.altAxis,a=f===void 0?!1:f,p=n.boundary,_=n.rootBoundary,S=n.altBoundary,E=n.padding,I=n.tether,z=I===void 0?!0:I,F=n.tetherOffset,U=F===void 0?0:F,k=D2(t,{boundary:p,rootBoundary:_,padding:E,altBoundary:S}),V=Xm(t.placement),K=Uw(t.placement),J=!K,ie=ZU(V),Q=A1e(ie),W=t.modifiersData.popperOffsets,te=t.rects.reference,X=t.rects.popper,ae=typeof U=="function"?U(Object.assign({},t.rects,{placement:t.placement})):U,le=typeof ae=="number"?{mainAxis:ae,altAxis:ae}:Object.assign({mainAxis:0,altAxis:0},ae),ge=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,ye={x:0,y:0};if(W){if(s){var De,He=ie==="y"?Qc:Jc,Be=ie==="y"?nd:rd,Ee=ie==="y"?"height":"width",Ne=W[ie],at=Ne+k[He],yt=Ne-k[Be],je=z?-X[Ee]/2:0,Ke=K===Nw?te[Ee]:X[Ee],it=K===Nw?-X[Ee]:-te[Ee],Pe=t.elements.arrow,jt=z&&Pe?XU(Pe):{width:0,height:0},sn=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:noe(),dn=sn[He],Sn=sn[Be],Ut=f2(0,te[Ee],jt[Ee]),xe=J?te[Ee]/2-je-Ut-dn-le.mainAxis:Ke-Ut-dn-le.mainAxis,Ye=J?-te[Ee]/2+je+Ut+Sn+le.mainAxis:it+Ut+Sn+le.mainAxis,ct=t.elements.arrow&&HA(t.elements.arrow),mt=ct?ie==="y"?ct.clientTop||0:ct.clientLeft||0:0,Ct=(De=ge==null?void 0:ge[ie])!=null?De:0,Yt=Ne+xe-Ct-mt,gn=Ne+Ye-Ct,En=f2(z?RD(at,Yt):at,Ne,z?Kb(yt,gn):yt);W[ie]=En,ye[ie]=En-Ne}if(a){var or,sr=ie==="x"?Qc:Jc,Nr=ie==="x"?nd:rd,Pr=W[Q],Er=Q==="y"?"height":"width",Tr=Pr+k[sr],pi=Pr-k[Nr],Br=[Qc,Jc].indexOf(V)!==-1,hi=(or=ge==null?void 0:ge[Q])!=null?or:0,$t=Br?Tr:Pr-te[Er]-X[Er]-hi+le.altAxis,Tn=Br?Pr+te[Er]+X[Er]-hi-le.altAxis:pi,ur=z&&Br?Kxe($t,Pr,Tn):f2(z?$t:Tr,Pr,z?Tn:pi);W[Q]=ur,ye[Q]=ur-Pr}t.modifiersData[r]=ye}}const C1e={name:"preventOverflow",enabled:!0,phase:"main",fn:O1e,requiresIfExists:["offset"]};function M1e(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function D1e(e){return e===th(e)||!Zm(e)?KU(e):M1e(e)}function I1e(e){var t=e.getBoundingClientRect(),n=Bw(t.width)/e.offsetWidth||1,r=Bw(t.height)/e.offsetHeight||1;return n!==1||r!==1}function P1e(e,t,n){n===void 0&&(n=!1);var r=Zm(t),i=Zm(t)&&I1e(t),s=a0(t),f=jw(e,i,n),a={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(r||!r&&!n)&&((Xv(t)!=="body"||JU(s))&&(a=D1e(t)),Zm(t)?(p=jw(t,!0),p.x+=t.clientLeft,p.y+=t.clientTop):s&&(p.x=QU(s))),{x:f.left+a.scrollLeft-p.x,y:f.top+a.scrollTop-p.y,width:f.width,height:f.height}}function R1e(e){var t=new Map,n=new Set,r=[];e.forEach(function(s){t.set(s.name,s)});function i(s){n.add(s.name);var f=[].concat(s.requires||[],s.requiresIfExists||[]);f.forEach(function(a){if(!n.has(a)){var p=t.get(a);p&&i(p)}}),r.push(s)}return e.forEach(function(s){n.has(s.name)||i(s)}),r}function k1e(e){var t=R1e(e);return Wxe.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function L1e(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function z1e(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var X7={placement:"bottom",modifiers:[],strategy:"absolute"};function Z7(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function F1e(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,s=i===void 0?X7:i;return function(a,p,_){_===void 0&&(_=s);var S={placement:"bottom",orderedModifiers:[],options:Object.assign({},X7,s),modifiersData:{},elements:{reference:a,popper:p},attributes:{},styles:{}},E=[],I=!1,z={state:S,setOptions:function(V){var K=typeof V=="function"?V(S.options):V;U(),S.options=Object.assign({},s,S.options,K),S.scrollParents={reference:ux(a)?h2(a):a.contextElement?h2(a.contextElement):[],popper:h2(p)};var J=k1e(z1e([].concat(r,S.options.modifiers)));return S.orderedModifiers=J.filter(function(ie){return ie.enabled}),F(),z.update()},forceUpdate:function(){if(!I){var V=S.elements,K=V.reference,J=V.popper;if(Z7(K,J)){S.rects={reference:P1e(K,HA(J),S.options.strategy==="fixed"),popper:XU(J)},S.reset=!1,S.placement=S.options.placement,S.orderedModifiers.forEach(function(le){return S.modifiersData[le.name]=Object.assign({},le.data)});for(var ie=0;ie<S.orderedModifiers.length;ie++){if(S.reset===!0){S.reset=!1,ie=-1;continue}var Q=S.orderedModifiers[ie],W=Q.fn,te=Q.options,X=te===void 0?{}:te,ae=Q.name;typeof W=="function"&&(S=W({state:S,options:X,name:ae,instance:z})||S)}}}},update:L1e(function(){return new Promise(function(k){z.forceUpdate(),k(S)})}),destroy:function(){U(),I=!0}};if(!Z7(a,p))return z;z.setOptions(_).then(function(k){!I&&_.onFirstUpdate&&_.onFirstUpdate(k)});function F(){S.orderedModifiers.forEach(function(k){var V=k.name,K=k.options,J=K===void 0?{}:K,ie=k.effect;if(typeof ie=="function"){var Q=ie({state:S,name:V,instance:z,options:J}),W=function(){};E.push(Q||W)}})}function U(){E.forEach(function(k){return k()}),E=[]}return z}}const N1e=F1e({defaultModifiers:[b1e,E1e,a1e,s1e,S1e,_1e,C1e,t1e]}),B1e=["enabled","placement","strategy","modifiers"];function j1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const U1e={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},$1e={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const r=(t.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==n.id);r.length?t.setAttribute("aria-describedby",r.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:r}=e.elements,i=(t=n.getAttribute("role"))==null?void 0:t.toLowerCase();if(n.id&&i==="tooltip"&&"setAttribute"in r){const s=r.getAttribute("aria-describedby");if(s&&s.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",s?`${s},${n.id}`:n.id)}}},V1e=[];function q1e(e,t,n={}){let{enabled:r=!0,placement:i="bottom",strategy:s="absolute",modifiers:f=V1e}=n,a=j1e(n,B1e);const p=be.useRef(f),_=be.useRef(),S=be.useCallback(()=>{var k;(k=_.current)==null||k.update()},[]),E=be.useCallback(()=>{var k;(k=_.current)==null||k.forceUpdate()},[]),[I,z]=zxe(be.useState({placement:i,update:S,forceUpdate:E,attributes:{},styles:{popper:{},arrow:{}}})),F=be.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:k})=>{const V={},K={};Object.keys(k.elements).forEach(J=>{V[J]=k.styles[J],K[J]=k.attributes[J]}),z({state:k,styles:V,attributes:K,update:S,forceUpdate:E,placement:k.placement})}}),[S,E,z]),U=be.useMemo(()=>(c2(p.current,f)||(p.current=f),p.current),[f]);return be.useEffect(()=>{!_.current||!r||_.current.setOptions({placement:i,strategy:s,modifiers:[...U,F,U1e]})},[s,i,F,r,U]),be.useEffect(()=>{if(!(!r||e==null||t==null))return _.current=N1e(e,t,Object.assign({},a,{placement:i,strategy:s,modifiers:[...U,$1e,F]})),()=>{_.current!=null&&(_.current.destroy(),_.current=void 0,z(k=>Object.assign({},k,{attributes:{},styles:{popper:{}}})))}},[r,e,t]),I}function I2(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}var p3,K7;function H1e(){if(K7)return p3;K7=1;var e=function(){};return p3=e,p3}var G1e=H1e();const Y1e=ga(G1e),Q7=()=>{};function W1e(e){return e.button===0}function X1e(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const JM=e=>e&&("current"in e?e.current:e),J7={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function Z1e(e,t=Q7,{disabled:n,clickTrigger:r="click"}={}){const i=be.useRef(!1),s=be.useRef(!1),f=be.useCallback(_=>{const S=JM(e);Y1e(!!S,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!S||X1e(_)||!W1e(_)||!!I2(S,_.target)||s.current,s.current=!1},[e]),a=Wh(_=>{const S=JM(e);S&&I2(S,_.target)?s.current=!0:s.current=!1}),p=Wh(_=>{i.current||t(_)});be.useEffect(()=>{var _,S;if(n||e==null)return;const E=FS(JM(e)),I=E.defaultView||window;let z=(_=I.event)!=null?_:(S=I.parent)==null?void 0:S.event,F=null;J7[r]&&(F=My(E,J7[r],a,!0));const U=My(E,r,f,!0),k=My(E,r,K=>{if(K===z){z=void 0;return}p(K)});let V=[];return"ontouchstart"in E.documentElement&&(V=[].slice.call(E.body.children).map(K=>My(K,"mousemove",Q7))),()=>{F==null||F(),U(),k(),V.forEach(K=>K())}},[e,n,r,f,a,p])}function K1e(e){const t={};return Array.isArray(e)?(e==null||e.forEach(n=>{t[n.name]=n}),t):e||t}function Q1e(e={}){return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function J1e({enabled:e,enableEvents:t,placement:n,flip:r,offset:i,fixed:s,containerPadding:f,arrowElement:a,popperConfig:p={}}){var _,S,E,I;const z=K1e(p.modifiers);return Object.assign({},p,{placement:n,enabled:e,strategy:s?"fixed":p.strategy,modifiers:Q1e(Object.assign({},z,{eventListeners:{enabled:t,options:(_=z.eventListeners)==null?void 0:_.options},preventOverflow:Object.assign({},z.preventOverflow,{options:Object.assign({padding:f},(S=z.preventOverflow)==null?void 0:S.options)}),offset:{options:Object.assign({offset:i},(E=z.offset)==null?void 0:E.options)},arrow:Object.assign({},z.arrow,{enabled:!!a,options:Object.assign({},(I=z.arrow)==null?void 0:I.options,{element:a})}),flip:Object.assign({enabled:!!r},z.flip)}))})}const soe={prefix:String(Math.round(Math.random()*1e10)),current:0},loe=Je.createContext(soe),ewe=Je.createContext(!1);let m3=new WeakMap;function twe(e=!1){let t=be.useContext(loe),n=be.useRef(null);if(n.current===null&&!e){var r,i;let s=(i=Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(s){let f=m3.get(s);f==null?m3.set(s,{id:t.current,state:s.memoizedState}):s.memoizedState!==f.state&&(t.current=f.id,m3.delete(s))}n.current=++t.current}return n.current}function nwe(e){let t=be.useContext(loe),n=twe(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`}function rwe(e){let t=Je.useId(),[n]=be.useState(lwe()),r=n?"react-aria":`react-aria${soe.prefix}`;return e||`${r}-${t}`}const iwe=typeof Je.useId=="function"?rwe:nwe;function awe(){return!1}function owe(){return!0}function swe(e){return()=>{}}function lwe(){return typeof Je.useSyncExternalStore=="function"?Je.useSyncExternalStore(swe,awe,owe):be.useContext(ewe)}const cx=be.createContext(null),$w=(e,t=null)=>e!=null?String(e):t||null,e$=be.createContext(null);e$.displayName="NavContext";const uwe="data-rr-ui-",cwe="rrUi";function kP(e){return`${uwe}${e}`}function fwe(e){return`${cwe}${e}`}const uoe=be.createContext(NS?window:void 0);uoe.Provider;function t$(){return be.useContext(uoe)}var hwe=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",dwe=typeof document<"u";const coe=dwe||hwe?be.useLayoutEffect:be.useEffect,foe=be.createContext(null);foe.displayName="InputGroupContext";const BS=be.createContext(null);BS.displayName="NavbarContext";Bn.string,Bn.bool,Bn.bool,Bn.bool,Bn.bool;const eD=be.forwardRef(({bsPrefix:e,className:t,fluid:n=!1,rounded:r=!1,roundedCircle:i=!1,thumbnail:s=!1,...f},a)=>(e=br(e,"img"),Oe.jsx("img",{ref:a,...f,className:ar(t,n&&`${e}-fluid`,r&&"rounded",i&&"rounded-circle",s&&`${e}-thumbnail`)})));eD.displayName="Image";const pwe={type:Bn.string,tooltip:Bn.bool,as:Bn.elementType},LP=be.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:r=!1,...i},s)=>Oe.jsx(e,{...i,ref:s,className:ar(t,`${n}-${r?"tooltip":"feedback"}`)}));LP.displayName="Feedback";LP.propTypes=pwe;const Ky=be.createContext({}),GA=be.forwardRef(({id:e,bsPrefix:t,className:n,type:r="checkbox",isValid:i=!1,isInvalid:s=!1,as:f="input",...a},p)=>{const{controlId:_}=be.useContext(Ky);return t=br(t,"form-check-input"),Oe.jsx(f,{...a,ref:p,type:r,id:e||_,className:ar(n,t,i&&"is-valid",s&&"is-invalid")})});GA.displayName="FormCheckInput";const kD=be.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...r},i)=>{const{controlId:s}=be.useContext(Ky);return e=br(e,"form-check-label"),Oe.jsx("label",{...r,ref:i,htmlFor:n||s,className:ar(t,e)})});kD.displayName="FormCheckLabel";const hoe=be.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:r=!1,reverse:i=!1,disabled:s=!1,isValid:f=!1,isInvalid:a=!1,feedbackTooltip:p=!1,feedback:_,feedbackType:S,className:E,style:I,title:z="",type:F="checkbox",label:U,children:k,as:V="input",...K},J)=>{t=br(t,"form-check"),n=br(n,"form-switch");const{controlId:ie}=be.useContext(Ky),Q=be.useMemo(()=>({controlId:e||ie}),[ie,e]),W=!k&&U!=null&&U!==!1||Ixe(k,kD),te=Oe.jsx(GA,{...K,type:F==="switch"?"checkbox":F,ref:J,isValid:f,isInvalid:a,disabled:s,as:V});return Oe.jsx(Ky.Provider,{value:Q,children:Oe.jsx("div",{style:I,className:ar(E,W&&t,r&&`${t}-inline`,i&&`${t}-reverse`,F==="switch"&&n),children:k||Oe.jsxs(Oe.Fragment,{children:[te,W&&Oe.jsx(kD,{title:z,children:U}),_&&Oe.jsx(LP,{type:S,tooltip:p,children:_})]})})})});hoe.displayName="FormCheck";const LD=Object.assign(hoe,{Input:GA,Label:kD}),doe=be.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:r,id:i,className:s,isValid:f=!1,isInvalid:a=!1,plaintext:p,readOnly:_,as:S="input",...E},I)=>{const{controlId:z}=be.useContext(Ky);return e=br(e,"form-control"),Oe.jsx(S,{...E,type:t,size:r,ref:I,readOnly:_,id:i||z,className:ar(s,p?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,f&&"is-valid",a&&"is-invalid")})});doe.displayName="FormControl";const poe=Object.assign(doe,{Feedback:LP}),moe=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=br(t,"form-floating"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));moe.displayName="FormFloating";const n$=be.forwardRef(({controlId:e,as:t="div",...n},r)=>{const i=be.useMemo(()=>({controlId:e}),[e]);return Oe.jsx(Ky.Provider,{value:i,children:Oe.jsx(t,{...n,ref:r})})});n$.displayName="FormGroup";const goe=be.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:r=!1,className:i,htmlFor:s,...f},a)=>{const{controlId:p}=be.useContext(Ky);t=br(t,"form-label");let _="col-form-label";typeof n=="string"&&(_=`${_} ${_}-${n}`);const S=ar(i,t,r&&"visually-hidden",n&&_);return s=s||p,n?Oe.jsx(kr,{ref:a,as:"label",className:S,htmlFor:s,...f}):Oe.jsx(e,{ref:a,className:S,htmlFor:s,...f})});goe.displayName="FormLabel";const yoe=be.forwardRef(({bsPrefix:e,className:t,id:n,...r},i)=>{const{controlId:s}=be.useContext(Ky);return e=br(e,"form-range"),Oe.jsx("input",{...r,type:"range",ref:i,className:ar(t,e),id:n||s})});yoe.displayName="FormRange";const _oe=be.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:r,isValid:i=!1,isInvalid:s=!1,id:f,...a},p)=>{const{controlId:_}=be.useContext(Ky);return e=br(e,"form-select"),Oe.jsx("select",{...a,size:n,ref:p,className:ar(r,e,t&&`${e}-${t}`,i&&"is-valid",s&&"is-invalid"),id:f||_})});_oe.displayName="FormSelect";const voe=be.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:r,...i},s)=>(e=br(e,"form-text"),Oe.jsx(n,{...i,ref:s,className:ar(t,e,r&&"text-muted")})));voe.displayName="FormText";const boe=be.forwardRef((e,t)=>Oe.jsx(LD,{...e,ref:t,type:"switch"}));boe.displayName="Switch";const mwe=Object.assign(boe,{Input:LD.Input,Label:LD.Label}),xoe=be.forwardRef(({bsPrefix:e,className:t,children:n,controlId:r,label:i,...s},f)=>(e=br(e,"form-floating"),Oe.jsxs(n$,{ref:f,className:ar(t,e),controlId:r,...s,children:[n,Oe.jsx("label",{htmlFor:r,children:i})]})));xoe.displayName="FloatingLabel";const gwe={_ref:Bn.any,validated:Bn.bool,as:Bn.elementType},r$=be.forwardRef(({className:e,validated:t,as:n="form",...r},i)=>Oe.jsx(n,{...r,ref:i,className:ar(e,t&&"was-validated")}));r$.displayName="Form";r$.propTypes=gwe;const gw=Object.assign(r$,{Group:n$,Control:poe,Floating:moe,Check:LD,Switch:mwe,Label:goe,Text:voe,Range:yoe,Select:_oe,FloatingLabel:xoe}),zP=be.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},i)=>(t=br(t,"input-group-text"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));zP.displayName="InputGroupText";const ywe=e=>Oe.jsx(zP,{children:Oe.jsx(GA,{type:"checkbox",...e})}),_we=e=>Oe.jsx(zP,{children:Oe.jsx(GA,{type:"radio",...e})}),woe=be.forwardRef(({bsPrefix:e,size:t,hasValidation:n,className:r,as:i="div",...s},f)=>{e=br(e,"input-group");const a=be.useMemo(()=>({}),[]);return Oe.jsx(foe.Provider,{value:a,children:Oe.jsx(i,{ref:f,...s,className:ar(r,e,t&&`${e}-${t}`,n&&"has-validation")})})});woe.displayName="InputGroup";const vwe=Object.assign(woe,{Text:zP,Radio:_we,Checkbox:ywe}),eY=e=>!e||typeof e=="function"?e:t=>{e.current=t};function bwe(e,t){const n=eY(e),r=eY(t);return i=>{n&&n(i),r&&r(i)}}function YA(e,t){return be.useMemo(()=>bwe(e,t),[e,t])}const jS=be.createContext(null),xwe=["as","active","eventKey"];function wwe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function i$({key:e,onClick:t,active:n,id:r,role:i,disabled:s}){const f=be.useContext(cx),a=be.useContext(e$),p=be.useContext(jS);let _=n;const S={role:i};if(a){!i&&a.role==="tablist"&&(S.role="tab");const E=a.getControllerId(e??null),I=a.getControlledId(e??null);S[kP("event-key")]=e,S.id=E||r,_=n==null&&e!=null?a.activeKey===e:n,(_||!(p!=null&&p.unmountOnExit)&&!(p!=null&&p.mountOnEnter))&&(S["aria-controls"]=I)}return S.role==="tab"&&(S["aria-selected"]=_,_||(S.tabIndex=-1),s&&(S.tabIndex=-1,S["aria-disabled"]=!0)),S.onClick=Wh(E=>{s||(t==null||t(E),e!=null&&f&&!E.isPropagationStopped()&&f(e,E))}),[S,{isActive:_}]}const Soe=be.forwardRef((e,t)=>{let{as:n=Fae,active:r,eventKey:i}=e,s=wwe(e,xwe);const[f,a]=i$(Object.assign({key:$w(i,s.href),active:r},s));return f[kP("active")]=a.isActive,Oe.jsx(n,Object.assign({},s,f,{ref:t}))});Soe.displayName="NavItem";const Swe=["as","onSelect","activeKey","role","onKeyDown"];function Twe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const tY=()=>{},nY=kP("event-key"),Toe=be.forwardRef((e,t)=>{let{as:n="div",onSelect:r,activeKey:i,role:s,onKeyDown:f}=e,a=Twe(e,Swe);const p=Lxe(),_=be.useRef(!1),S=be.useContext(cx),E=be.useContext(jS);let I,z;E&&(s=s||"tablist",i=E.activeKey,I=E.getControlledId,z=E.getControllerId);const F=be.useRef(null),U=J=>{const ie=F.current;if(!ie)return null;const Q=kb(ie,`[${nY}]:not([aria-disabled=true])`),W=ie.querySelector("[aria-selected=true]");if(!W||W!==document.activeElement)return null;const te=Q.indexOf(W);if(te===-1)return null;let X=te+J;return X>=Q.length&&(X=0),X<0&&(X=Q.length-1),Q[X]},k=(J,ie)=>{J!=null&&(r==null||r(J,ie),S==null||S(J,ie))},V=J=>{if(f==null||f(J),!E)return;let ie;switch(J.key){case"ArrowLeft":case"ArrowUp":ie=U(-1);break;case"ArrowRight":case"ArrowDown":ie=U(1);break;default:return}ie&&(J.preventDefault(),k(ie.dataset[fwe("EventKey")]||null,J),_.current=!0,p())};be.useEffect(()=>{if(F.current&&_.current){const J=F.current.querySelector(`[${nY}][aria-selected=true]`);J==null||J.focus()}_.current=!1});const K=YA(t,F);return Oe.jsx(cx.Provider,{value:k,children:Oe.jsx(e$.Provider,{value:{role:s,activeKey:$w(i),getControlledId:I||tY,getControllerId:z||tY},children:Oe.jsx(n,Object.assign({},a,{onKeyDown:V,ref:K,role:s}))})})});Toe.displayName="Nav";const Eoe=Object.assign(Toe,{Item:Soe}),Aoe=be.forwardRef(({bsPrefix:e,active:t,disabled:n,eventKey:r,className:i,variant:s,action:f,as:a,...p},_)=>{e=br(e,"list-group-item");const[S,E]=i$({key:$w(r,p.href),active:t,...p}),I=Xy(F=>{if(n){F.preventDefault(),F.stopPropagation();return}S.onClick(F)});n&&p.tabIndex===void 0&&(p.tabIndex=-1,p["aria-disabled"]=!0);const z=a||(f?p.href?"a":"button":"div");return Oe.jsx(z,{ref:_,...p,...S,onClick:I,className:ar(i,e,E.isActive&&"active",n&&"disabled",s&&`${e}-${s}`,f&&`${e}-action`)})});Aoe.displayName="ListGroupItem";const Ooe=be.forwardRef((e,t)=>{const{className:n,bsPrefix:r,variant:i,horizontal:s,numbered:f,as:a="div",...p}=jA(e,{activeKey:"onSelect"}),_=br(r,"list-group");let S;return s&&(S=s===!0?"horizontal":`horizontal-${s}`),Oe.jsx(Eoe,{ref:t,...p,as:a,className:ar(n,_,i&&`${_}-${i}`,S&&`${_}-${S}`,f&&`${_}-numbered`)})});Ooe.displayName="ListGroup";const Vw=Object.assign(Ooe,{Item:Aoe});var rM;function rY(e){if((!rM&&rM!==0||e)&&NS){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),rM=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return rM}function Ewe(){return be.useState(null)}function g3(e){e===void 0&&(e=FS());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function Awe(e){const t=be.useRef(e);return t.current=e,t}function Owe(e){const t=Awe(e);be.useEffect(()=>()=>t.current(),[])}function Cwe(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const iY=kP("modal-open");class a${constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return Cwe(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();t.style={overflow:i.style.overflow,[r]:i.style[r]},t.scrollBarWidth&&(n[r]=`${parseInt(zy(i,r)||"0",10)+t.scrollBarWidth}px`),i.setAttribute(iY,""),zy(i,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(iY),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const y3=(e,t)=>NS?e==null?(t||FS()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function z4(e,t){const n=t$(),[r,i]=be.useState(()=>y3(e,n==null?void 0:n.document));if(!r){const s=y3(e);s&&i(s)}return be.useEffect(()=>{},[t,r]),be.useEffect(()=>{const s=y3(e);s!==r&&i(s)},[e,r]),r}function o$({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=be.useRef(null),f=be.useRef(t),a=Wh(n);be.useEffect(()=>{t?f.current=!0:a(s.current)},[t,a]);const p=YA(s,Dx(e)),_=be.cloneElement(e,{ref:p});return t?_:i||!f.current&&r?null:_}const Mwe=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Dwe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Iwe(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:i,onExiting:s,onExited:f,addEndListener:a,children:p}=e,_=Dwe(e,Mwe);const S=be.useRef(null),E=YA(S,Dx(p)),I=ie=>Q=>{ie&&S.current&&ie(S.current,Q)},z=be.useCallback(I(t),[t]),F=be.useCallback(I(n),[n]),U=be.useCallback(I(r),[r]),k=be.useCallback(I(i),[i]),V=be.useCallback(I(s),[s]),K=be.useCallback(I(f),[f]),J=be.useCallback(I(a),[a]);return Object.assign({},_,{nodeRef:S},t&&{onEnter:z},n&&{onEntering:F},r&&{onEntered:U},i&&{onExit:k},s&&{onExiting:V},f&&{onExited:K},a&&{addEndListener:J},{children:typeof p=="function"?(ie,Q)=>p(ie,Object.assign({},Q,{ref:E})):be.cloneElement(p,{ref:E})})}const Pwe=["component"];function Rwe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const kwe=be.forwardRef((e,t)=>{let{component:n}=e,r=Rwe(e,Pwe);const i=Iwe(r);return Oe.jsx(n,Object.assign({ref:t},i))});function Lwe({in:e,onTransition:t}){const n=be.useRef(null),r=be.useRef(!0),i=Wh(t);return B7(()=>{if(!n.current)return;let s=!1;return i({in:e,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[e,i]),B7(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function zwe({children:e,in:t,onExited:n,onEntered:r,transition:i}){const[s,f]=be.useState(!t);t&&s&&f(!1);const a=Lwe({in:!!t,onTransition:_=>{const S=()=>{_.isStale()||(_.in?r==null||r(_.element,_.initial):(f(!0),n==null||n(_.element)))};Promise.resolve(i(_)).then(S,E=>{throw _.in||f(!0),E})}}),p=YA(a,Dx(e));return s&&!t?null:be.cloneElement(e,{ref:p})}function F4(e,t,n){return e?Oe.jsx(kwe,Object.assign({},n,{component:e})):t?Oe.jsx(zwe,Object.assign({},n,{transition:t})):Oe.jsx(o$,Object.assign({},n))}const Fwe=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Nwe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}let _3;function Bwe(e){return _3||(_3=new a$({ownerDocument:e==null?void 0:e.document})),_3}function jwe(e){const t=t$(),n=e||Bwe(t),r=be.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:be.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:be.useCallback(i=>{r.current.backdrop=i},[])})}const Coe=be.forwardRef((e,t)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:f,backdrop:a=!0,keyboard:p=!0,onBackdropClick:_,onEscapeKeyDown:S,transition:E,runTransition:I,backdropTransition:z,runBackdropTransition:F,autoFocus:U=!0,enforceFocus:k=!0,restoreFocus:V=!0,restoreFocusOptions:K,renderDialog:J,renderBackdrop:ie=gn=>Oe.jsx("div",Object.assign({},gn)),manager:Q,container:W,onShow:te,onHide:X=()=>{},onExit:ae,onExited:le,onExiting:ge,onEnter:ye,onEntering:De,onEntered:He}=e,Be=Nwe(e,Fwe);const Ee=t$(),Ne=z4(W),at=jwe(Q),yt=zae(),je=pxe(n),[Ke,it]=be.useState(!n),Pe=be.useRef(null);be.useImperativeHandle(t,()=>at,[at]),NS&&!je&&n&&(Pe.current=g3(Ee==null?void 0:Ee.document)),n&&Ke&&it(!1);const jt=Wh(()=>{if(at.add(),Ye.current=My(document,"keydown",Ut),xe.current=My(document,"focus",()=>setTimeout(dn),!0),te&&te(),U){var gn,En;const or=g3((gn=(En=at.dialog)==null?void 0:En.ownerDocument)!=null?gn:Ee==null?void 0:Ee.document);at.dialog&&or&&!I2(at.dialog,or)&&(Pe.current=or,at.dialog.focus())}}),sn=Wh(()=>{if(at.remove(),Ye.current==null||Ye.current(),xe.current==null||xe.current(),V){var gn;(gn=Pe.current)==null||gn.focus==null||gn.focus(K),Pe.current=null}});be.useEffect(()=>{!n||!Ne||jt()},[n,Ne,jt]),be.useEffect(()=>{Ke&&sn()},[Ke,sn]),Owe(()=>{sn()});const dn=Wh(()=>{if(!k||!yt()||!at.isTopModal())return;const gn=g3(Ee==null?void 0:Ee.document);at.dialog&&gn&&!I2(at.dialog,gn)&&at.dialog.focus()}),Sn=Wh(gn=>{gn.target===gn.currentTarget&&(_==null||_(gn),a===!0&&X())}),Ut=Wh(gn=>{p&&Mae(gn)&&at.isTopModal()&&(S==null||S(gn),gn.defaultPrevented||X())}),xe=be.useRef(),Ye=be.useRef(),ct=(...gn)=>{it(!0),le==null||le(...gn)};if(!Ne)return null;const mt=Object.assign({role:r,ref:at.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},Be,{style:s,className:i,tabIndex:-1});let Ct=J?J(mt):Oe.jsx("div",Object.assign({},mt,{children:be.cloneElement(f,{role:"document"})}));Ct=F4(E,I,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:ae,onExiting:ge,onExited:ct,onEnter:ye,onEntering:De,onEntered:He,children:Ct});let Yt=null;return a&&(Yt=ie({ref:at.setBackdropRef,onClick:Sn}),Yt=F4(z,F,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Yt})),Oe.jsx(Oe.Fragment,{children:Fv.createPortal(Oe.jsxs(Oe.Fragment,{children:[Yt,Ct]}),Ne)})});Coe.displayName="Modal";const Moe=Object.assign(Coe,{Manager:a$});function N4(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Uwe(e,t){e.classList?e.classList.add(t):N4(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function aY(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function $we(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=aY(e.className,t):e.setAttribute("class",aY(e.className&&e.className.baseVal||"",t))}const K1={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Doe extends a${adjustAndStore(t,n,r){const i=n.style[t];n.dataset[t]=i,zy(n,{[t]:`${parseFloat(zy(n,t))+r}px`})}restore(t,n){const r=n.dataset[t];r!==void 0&&(delete n.dataset[t],zy(n,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(Uwe(n,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";kb(n,K1.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,t.scrollBarWidth)),kb(n,K1.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-t.scrollBarWidth)),kb(n,K1.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();$we(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";kb(n,K1.FIXED_CONTENT).forEach(s=>this.restore(r,s)),kb(n,K1.STICKY_CONTENT).forEach(s=>this.restore(i,s)),kb(n,K1.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let v3;function Ioe(e){return v3||(v3=new Doe(e)),v3}const Poe=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=br(t,"modal-body"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));Poe.displayName="ModalBody";const s$=be.createContext({onHide(){}}),l$=be.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:r,size:i,fullscreen:s,children:f,scrollable:a,...p},_)=>{e=br(e,"modal");const S=`${e}-dialog`,E=typeof s=="string"?`${e}-fullscreen-${s}`:`${e}-fullscreen`;return Oe.jsx("div",{...p,ref:_,className:ar(S,t,i&&`${e}-${i}`,r&&`${S}-centered`,a&&`${S}-scrollable`,s&&E),children:Oe.jsx("div",{className:ar(`${e}-content`,n),children:f})})});l$.displayName="ModalDialog";const Roe=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=br(t,"modal-footer"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));Roe.displayName="ModalFooter";const u$=be.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:r,children:i,...s},f)=>{const a=be.useContext(s$),p=Xy(()=>{a==null||a.onHide(),r==null||r()});return Oe.jsxs("div",{ref:f,...s,children:[i,n&&Oe.jsx(VA,{"aria-label":e,variant:t,onClick:p})]})});u$.displayName="AbstractModalHeader";const koe=be.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(e=br(e,"modal-header"),Oe.jsx(u$,{ref:s,...i,className:ar(t,e),closeLabel:n,closeButton:r})));koe.displayName="ModalHeader";const Vwe=$A("h4"),Loe=be.forwardRef(({className:e,bsPrefix:t,as:n=Vwe,...r},i)=>(t=br(t,"modal-title"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));Loe.displayName="ModalTitle";function qwe(e){return Oe.jsx(og,{...e,timeout:null})}function Hwe(e){return Oe.jsx(og,{...e,timeout:null})}const zoe=be.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:r,contentClassName:i,children:s,dialogAs:f=l$,"data-bs-theme":a,"aria-labelledby":p,"aria-describedby":_,"aria-label":S,show:E=!1,animation:I=!0,backdrop:z=!0,keyboard:F=!0,onEscapeKeyDown:U,onShow:k,onHide:V,container:K,autoFocus:J=!0,enforceFocus:ie=!0,restoreFocus:Q=!0,restoreFocusOptions:W,onEntered:te,onExit:X,onExiting:ae,onEnter:le,onEntering:ge,onExited:ye,backdropClassName:De,manager:He,...Be},Ee)=>{const[Ne,at]=be.useState({}),[yt,je]=be.useState(!1),Ke=be.useRef(!1),it=be.useRef(!1),Pe=be.useRef(null),[jt,sn]=Ewe(),dn=IP(Ee,sn),Sn=Xy(V),Ut=jU();e=br(e,"modal");const xe=be.useMemo(()=>({onHide:Sn}),[Sn]);function Ye(){return He||Ioe({isRTL:Ut})}function ct($t){if(!NS)return;const Tn=Ye().getScrollbarWidth()>0,ur=$t.scrollHeight>FS($t).documentElement.clientHeight;at({paddingRight:Tn&&!ur?rY():void 0,paddingLeft:!Tn&&ur?rY():void 0})}const mt=Xy(()=>{jt&&ct(jt.dialog)});Xae(()=>{M4(window,"resize",mt),Pe.current==null||Pe.current()});const Ct=()=>{Ke.current=!0},Yt=$t=>{Ke.current&&jt&&$t.target===jt.dialog&&(it.current=!0),Ke.current=!1},gn=()=>{je(!0),Pe.current=Iae(jt.dialog,()=>{je(!1)})},En=$t=>{$t.target===$t.currentTarget&&gn()},or=$t=>{if(z==="static"){En($t);return}if(it.current||$t.target!==$t.currentTarget){it.current=!1;return}V==null||V()},sr=$t=>{F?U==null||U($t):($t.preventDefault(),z==="static"&&gn())},Nr=($t,Tn)=>{$t&&ct($t),le==null||le($t,Tn)},Pr=$t=>{Pe.current==null||Pe.current(),X==null||X($t)},Er=($t,Tn)=>{ge==null||ge($t,Tn),Dae(window,"resize",mt)},Tr=$t=>{$t&&($t.style.display=""),ye==null||ye($t),M4(window,"resize",mt)},pi=be.useCallback($t=>Oe.jsx("div",{...$t,className:ar(`${e}-backdrop`,De,!I&&"show")}),[I,De,e]),Br={...n,...Ne};Br.display="block";const hi=$t=>Oe.jsx("div",{role:"dialog",...$t,style:Br,className:ar(t,e,yt&&`${e}-static`,!I&&"show"),onClick:z?or:void 0,onMouseUp:Yt,"data-bs-theme":a,"aria-label":S,"aria-labelledby":p,"aria-describedby":_,children:Oe.jsx(f,{...Be,onMouseDown:Ct,className:r,contentClassName:i,children:s})});return Oe.jsx(s$.Provider,{value:xe,children:Oe.jsx(Moe,{show:E,ref:dn,backdrop:z,container:K,keyboard:!0,autoFocus:J,enforceFocus:ie,restoreFocus:Q,restoreFocusOptions:W,onEscapeKeyDown:sr,onShow:k,onHide:V,onEnter:Nr,onEntering:Er,onEntered:te,onExit:Pr,onExiting:ae,onExited:Tr,manager:Ye(),transition:I?qwe:void 0,backdropTransition:I?Hwe:void 0,renderBackdrop:pi,renderDialog:hi})})});zoe.displayName="Modal";const Zs=Object.assign(zoe,{Body:Poe,Header:koe,Title:Loe,Footer:Roe,Dialog:l$,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),c$=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=br(t,"nav-item"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));c$.displayName="NavItem";const f$=be.forwardRef(({bsPrefix:e,className:t,as:n=qU,active:r,eventKey:i,disabled:s=!1,...f},a)=>{e=br(e,"nav-link");const[p,_]=i$({key:$w(i,f.href),active:r,disabled:s,...f});return Oe.jsx(n,{...f,...p,ref:a,disabled:s,className:ar(t,e,s&&"disabled",_.isActive&&"active")})});f$.displayName="NavLink";const Foe=be.forwardRef((e,t)=>{const{as:n="div",bsPrefix:r,variant:i,fill:s=!1,justify:f=!1,navbar:a,navbarScroll:p,className:_,activeKey:S,...E}=jA(e,{activeKey:"onSelect"}),I=br(r,"nav");let z,F,U=!1;const k=be.useContext(BS),V=be.useContext(GU);return k?(z=k.bsPrefix,U=a??!0):V&&({cardHeaderBsPrefix:F}=V),Oe.jsx(Eoe,{as:n,ref:t,activeKey:S,className:ar(_,{[I]:!U,[`${z}-nav`]:U,[`${z}-nav-scroll`]:U&&p,[`${F}-${i}`]:!!F,[`${I}-${i}`]:!!i,[`${I}-fill`]:s,[`${I}-justified`]:f}),...E})});Foe.displayName="Nav";const sp=Object.assign(Foe,{Item:c$,Link:f$}),Noe=be.forwardRef(({bsPrefix:e,className:t,as:n,...r},i)=>{e=br(e,"navbar-brand");const s=n||(r.href?"a":"span");return Oe.jsx(s,{...r,ref:i,className:ar(t,e)})});Noe.displayName="NavbarBrand";const Boe=be.forwardRef(({children:e,bsPrefix:t,...n},r)=>{t=br(t,"navbar-collapse");const i=be.useContext(BS);return Oe.jsx(Rae,{in:!!(i&&i.expanded),...n,children:Oe.jsx("div",{ref:r,className:t,children:e})})});Boe.displayName="NavbarCollapse";const joe=be.forwardRef(({bsPrefix:e,className:t,children:n,label:r="Toggle navigation",as:i="button",onClick:s,...f},a)=>{e=br(e,"navbar-toggler");const{onToggle:p,expanded:_}=be.useContext(BS)||{},S=Xy(E=>{s&&s(E),p&&p()});return i==="button"&&(f.type="button"),Oe.jsx(i,{...f,ref:a,onClick:S,"aria-label":r,className:ar(t,e,!_&&"collapsed"),children:n||Oe.jsx("span",{className:`${e}-icon`})})});joe.displayName="NavbarToggle";var B4=new WeakMap,oY=function(t,n){if(!(!t||!n)){var r=B4.get(n)||new Map;B4.set(n,r);var i=r.get(t);return i||(i=n.matchMedia(t),i.refCount=0,r.set(i.media,i)),i}};function Gwe(e,t){t===void 0&&(t=typeof window>"u"?void 0:window);var n=oY(e,t),r=be.useState(function(){return n?n.matches:!1}),i=r[0],s=r[1];return coe(function(){var f=oY(e,t);if(!f)return s(!1);var a=B4.get(t),p=function(){s(f.matches)};return f.refCount++,f.addListener(p),p(),function(){f.removeListener(p),f.refCount--,f.refCount<=0&&(a==null||a.delete(f.media)),f=void 0}},[e]),i}function Ywe(e){var t=Object.keys(e);function n(a,p){return a===p?p:a?a+" and "+p:p}function r(a){return t[Math.min(t.indexOf(a)+1,t.length-1)]}function i(a){var p=r(a),_=e[p];return typeof _=="number"?_=_-.2+"px":_="calc("+_+" - 0.2px)","(max-width: "+_+")"}function s(a){var p=e[a];return typeof p=="number"&&(p=p+"px"),"(min-width: "+p+")"}function f(a,p,_){var S;if(typeof a=="object")S=a,_=p,p=!0;else{var E;p=p||!0,S=(E={},E[a]=p,E)}var I=be.useMemo(function(){return Object.entries(S).reduce(function(z,F){var U=F[0],k=F[1];return(k==="up"||k===!0)&&(z=n(z,s(U))),(k==="down"||k===!0)&&(z=n(z,i(U))),z},"")},[JSON.stringify(S)]);return Gwe(I,_)}return f}var Wwe=Ywe({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});const Uoe=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=br(t,"offcanvas-body"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));Uoe.displayName="OffcanvasBody";const Xwe={[cp]:"show",[Cy]:"show"},$oe=be.forwardRef(({bsPrefix:e,className:t,children:n,in:r=!1,mountOnEnter:i=!1,unmountOnExit:s=!1,appear:f=!1,...a},p)=>(e=br(e,"offcanvas"),Oe.jsx(PP,{ref:p,addEndListener:$U,in:r,mountOnEnter:i,unmountOnExit:s,appear:f,...a,childRef:Dx(n),children:(_,S)=>be.cloneElement(n,{...S,className:ar(t,n.props.className,(_===cp||_===C2)&&`${e}-toggling`,Xwe[_])})})));$oe.displayName="OffcanvasToggling";const Voe=be.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(e=br(e,"offcanvas-header"),Oe.jsx(u$,{ref:s,...i,className:ar(t,e),closeLabel:n,closeButton:r})));Voe.displayName="OffcanvasHeader";const Zwe=$A("h5"),qoe=be.forwardRef(({className:e,bsPrefix:t,as:n=Zwe,...r},i)=>(t=br(t,"offcanvas-title"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));qoe.displayName="OffcanvasTitle";function Kwe(e){return Oe.jsx($oe,{...e})}function Qwe(e){return Oe.jsx(og,{...e})}const Hoe=be.forwardRef(({bsPrefix:e,className:t,children:n,"aria-labelledby":r,placement:i="start",responsive:s,show:f=!1,backdrop:a=!0,keyboard:p=!0,scroll:_=!1,onEscapeKeyDown:S,onShow:E,onHide:I,container:z,autoFocus:F=!0,enforceFocus:U=!0,restoreFocus:k=!0,restoreFocusOptions:V,onEntered:K,onExit:J,onExiting:ie,onEnter:Q,onEntering:W,onExited:te,backdropClassName:X,manager:ae,renderStaticNode:le=!1,...ge},ye)=>{const De=be.useRef();e=br(e,"offcanvas");const[He,Be]=be.useState(!1),Ee=Xy(I),Ne=Wwe(s||"xs","up");be.useEffect(()=>{Be(s?f&&!Ne:f)},[f,s,Ne]);const at=be.useMemo(()=>({onHide:Ee}),[Ee]);function yt(){return ae||(_?(De.current||(De.current=new Doe({handleContainerOverflow:!1})),De.current):Ioe())}const je=(jt,...sn)=>{jt&&(jt.style.visibility="visible"),Q==null||Q(jt,...sn)},Ke=(jt,...sn)=>{jt&&(jt.style.visibility=""),te==null||te(...sn)},it=be.useCallback(jt=>Oe.jsx("div",{...jt,className:ar(`${e}-backdrop`,X)}),[X,e]),Pe=jt=>Oe.jsx("div",{...jt,...ge,className:ar(t,s?`${e}-${s}`:e,`${e}-${i}`),"aria-labelledby":r,children:n});return Oe.jsxs(Oe.Fragment,{children:[!He&&(s||le)&&Pe({}),Oe.jsx(s$.Provider,{value:at,children:Oe.jsx(Moe,{show:He,ref:ye,backdrop:a,container:z,keyboard:p,autoFocus:F,enforceFocus:U&&!_,restoreFocus:k,restoreFocusOptions:V,onEscapeKeyDown:S,onShow:E,onHide:Ee,onEnter:je,onEntering:W,onEntered:K,onExit:J,onExiting:ie,onExited:Ke,manager:yt(),transition:Kwe,backdropTransition:Qwe,renderBackdrop:it,renderDialog:Pe})})]})});Hoe.displayName="Offcanvas";const Jwe=Object.assign(Hoe,{Body:Uoe,Header:Voe,Title:qoe}),Goe=be.forwardRef(({onHide:e,...t},n)=>{const r=be.useContext(BS),i=Xy(()=>{r==null||r.onToggle==null||r.onToggle(),e==null||e()});return Oe.jsx(Jwe,{ref:n,show:!!(r!=null&&r.expanded),...t,renderStaticNode:!0,onHide:i})});Goe.displayName="NavbarOffcanvas";const Yoe=be.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},i)=>(t=br(t,"navbar-text"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));Yoe.displayName="NavbarText";const Woe=be.forwardRef((e,t)=>{const{bsPrefix:n,expand:r=!0,variant:i="light",bg:s,fixed:f,sticky:a,className:p,as:_="nav",expanded:S,onToggle:E,onSelect:I,collapseOnSelect:z=!1,...F}=jA(e,{expanded:"onToggle"}),U=br(n,"navbar"),k=be.useCallback((...J)=>{I==null||I(...J),z&&S&&(E==null||E(!1))},[I,z,S,E]);F.role===void 0&&_!=="nav"&&(F.role="navigation");let V=`${U}-expand`;typeof r=="string"&&(V=`${V}-${r}`);const K=be.useMemo(()=>({onToggle:()=>E==null?void 0:E(!S),bsPrefix:U,expanded:!!S,expand:r}),[U,S,r,E]);return Oe.jsx(BS.Provider,{value:K,children:Oe.jsx(cx.Provider,{value:k,children:Oe.jsx(_,{ref:t,...F,className:ar(p,U,r&&V,i&&`${U}-${i}`,s&&`bg-${s}`,a&&`sticky-${a}`,f&&`fixed-${f}`)})})})});Woe.displayName="Navbar";const EE=Object.assign(Woe,{Brand:Noe,Collapse:Boe,Offcanvas:Goe,Text:Yoe,Toggle:joe}),eSe=()=>{};function tSe(e,t,{disabled:n,clickTrigger:r}={}){const i=t||eSe;Z1e(e,i,{disabled:n,clickTrigger:r});const s=Wh(f=>{Mae(f)&&i(f)});be.useEffect(()=>{if(n||e==null)return;const f=FS(JM(e));let a=(f.defaultView||window).event;const p=My(f,"keyup",_=>{if(_===a){a=void 0;return}s(_)});return()=>{p()}},[e,n,s])}const Xoe=be.forwardRef((e,t)=>{const{flip:n,offset:r,placement:i,containerPadding:s,popperConfig:f={},transition:a,runTransition:p}=e,[_,S]=N7(),[E,I]=N7(),z=YA(S,t),F=z4(e.container),U=z4(e.target),[k,V]=be.useState(!e.show),K=q1e(U,_,J1e({placement:i,enableEvents:!!e.show,containerPadding:s||5,flip:n,offset:r,arrowElement:E,popperConfig:f}));e.show&&k&&V(!1);const J=(...ge)=>{V(!0),e.onExited&&e.onExited(...ge)},ie=e.show||!k;if(tSe(_,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!ie)return null;const{onExit:Q,onExiting:W,onEnter:te,onEntering:X,onEntered:ae}=e;let le=e.children(Object.assign({},K.attributes.popper,{style:K.styles.popper,ref:z}),{popper:K,placement:i,show:!!e.show,arrowProps:Object.assign({},K.attributes.arrow,{style:K.styles.arrow,ref:I})});return le=F4(a,p,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:le,onExit:Q,onExiting:W,onExited:J,onEnter:te,onEntering:X,onEntered:ae}),F?Fv.createPortal(le,F):null});Xoe.displayName="Overlay";const Zoe=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=br(t,"popover-header"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));Zoe.displayName="PopoverHeader";const h$=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=br(t,"popover-body"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));h$.displayName="PopoverBody";function Koe(e,t){let n=e;return e==="left"?n=t?"end":"start":e==="right"&&(n=t?"start":"end"),n}function Qoe(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const Joe=be.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:r,children:i,body:s,arrowProps:f,hasDoneInitialMeasure:a,popper:p,show:_,...S},E)=>{const I=br(e,"popover"),z=jU(),[F]=(t==null?void 0:t.split("-"))||[],U=Koe(F,z);let k=r;return _&&!a&&(k={...r,...Qoe(p==null?void 0:p.strategy)}),Oe.jsxs("div",{ref:E,role:"tooltip",style:k,"x-placement":F,className:ar(n,I,F&&`bs-popover-${U}`),...S,children:[Oe.jsx("div",{className:"popover-arrow",...f}),s?Oe.jsx(h$,{children:i}):i]})});Joe.displayName="Popover";const Qb=Object.assign(Joe,{Header:Zoe,Body:h$,POPPER_OFFSET:[0,8]}),ese=be.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:r,children:i,arrowProps:s,hasDoneInitialMeasure:f,popper:a,show:p,..._},S)=>{e=br(e,"tooltip");const E=jU(),[I]=(t==null?void 0:t.split("-"))||[],z=Koe(I,E);let F=r;return p&&!f&&(F={...r,...Qoe(a==null?void 0:a.strategy)}),Oe.jsxs("div",{ref:S,style:F,role:"tooltip","x-placement":I,className:ar(n,e,`bs-tooltip-${z}`),..._,children:[Oe.jsx("div",{className:"tooltip-arrow",...s}),Oe.jsx("div",{className:`${e}-inner`,children:i})]})});ese.displayName="Tooltip";const nSe=Object.assign(ese,{TOOLTIP_OFFSET:[0,6]});function rSe(e){const t=be.useRef(null),n=br(void 0,"popover"),r=br(void 0,"tooltip"),i=be.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(N4(t.current,n))return Qb.POPPER_OFFSET;if(N4(t.current,r))return nSe.TOOLTIP_OFFSET}return[0,0]}}}),[e,n,r]);return[t,[i]]}function iSe(e,t){const{ref:n}=e,{ref:r}=t;e.ref=n.__wrapped||(n.__wrapped=i=>n(PD(i))),t.ref=r.__wrapped||(r.__wrapped=i=>r(PD(i)))}const tse=be.forwardRef(({children:e,transition:t=og,popperConfig:n={},rootClose:r=!1,placement:i="top",show:s=!1,...f},a)=>{const p=be.useRef({}),[_,S]=be.useState(null),[E,I]=rSe(f.offset),z=IP(a,E),F=t===!0?og:t||void 0,U=Xy(k=>{S(k),n==null||n.onFirstUpdate==null||n.onFirstUpdate(k)});return coe(()=>{_&&f.target&&(p.current.scheduleUpdate==null||p.current.scheduleUpdate())},[_,f.target]),be.useEffect(()=>{s||S(null)},[s]),Oe.jsx(Xoe,{...f,ref:z,popperConfig:{...n,modifiers:I.concat(n.modifiers||[]),onFirstUpdate:U},transition:F,rootClose:r,placement:i,show:s,children:(k,{arrowProps:V,popper:K,show:J})=>{var ie;iSe(k,V);const Q=K==null?void 0:K.placement,W=Object.assign(p.current,{state:K==null?void 0:K.state,scheduleUpdate:K==null?void 0:K.update,placement:Q,outOfBoundaries:(K==null||(ie=K.state)==null||(ie=ie.modifiersData.hide)==null?void 0:ie.isReferenceHidden)||!1,strategy:n.strategy}),te=!!_;return typeof e=="function"?e({...k,placement:Q,show:J,...!t&&J&&{className:"show"},popper:W,arrowProps:V,hasDoneInitialMeasure:te}):be.cloneElement(e,{...k,placement:Q,arrowProps:V,popper:W,hasDoneInitialMeasure:te,className:ar(e.props.className,!t&&J&&"show"),style:{...e.props.style,...k.style}})}})});tse.displayName="Overlay";function aSe(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function sY(e,t,n){const[r]=t,i=r.currentTarget,s=r.relatedTarget||r.nativeEvent[n];(!s||s!==i)&&!I2(i,s)&&e(...t)}Bn.oneOf(["click","hover","focus"]);const nse=({trigger:e=["hover","focus"],overlay:t,children:n,popperConfig:r={},show:i,defaultShow:s=!1,onToggle:f,delay:a,placement:p,flip:_=p&&p.indexOf("auto")!==-1,...S})=>{const E=be.useRef(null),I=IP(E,Dx(n)),z=Mxe(),F=be.useRef(""),[U,k]=Eae(i,s,f),V=aSe(a),{onFocus:K,onBlur:J,onClick:ie}=typeof n!="function"?be.Children.only(n).props:{},Q=Be=>{I(PD(Be))},W=be.useCallback(()=>{if(z.clear(),F.current="show",!V.show){k(!0);return}z.set(()=>{F.current==="show"&&k(!0)},V.show)},[V.show,k,z]),te=be.useCallback(()=>{if(z.clear(),F.current="hide",!V.hide){k(!1);return}z.set(()=>{F.current==="hide"&&k(!1)},V.hide)},[V.hide,k,z]),X=be.useCallback((...Be)=>{W(),K==null||K(...Be)},[W,K]),ae=be.useCallback((...Be)=>{te(),J==null||J(...Be)},[te,J]),le=be.useCallback((...Be)=>{k(!U),ie==null||ie(...Be)},[ie,k,U]),ge=be.useCallback((...Be)=>{sY(W,Be,"fromElement")},[W]),ye=be.useCallback((...Be)=>{sY(te,Be,"toElement")},[te]),De=e==null?[]:[].concat(e),He={ref:Q};return De.indexOf("click")!==-1&&(He.onClick=le),De.indexOf("focus")!==-1&&(He.onFocus=X,He.onBlur=ae),De.indexOf("hover")!==-1&&(He.onMouseOver=ge,He.onMouseOut=ye),Oe.jsxs(Oe.Fragment,{children:[typeof n=="function"?n(He):be.cloneElement(n,He),Oe.jsx(tse,{...S,show:U,onHide:te,flip:_,placement:p,popperConfig:r,target:E.current,children:t})]})},lY=1e3;function oSe(e,t,n){const r=(e-t)/(n-t)*100;return Math.round(r*lY)/lY}function uY({min:e,now:t,max:n,label:r,visuallyHidden:i,striped:s,animated:f,className:a,style:p,variant:_,bsPrefix:S,...E},I){return Oe.jsx("div",{ref:I,...E,role:"progressbar",className:ar(a,`${S}-bar`,{[`bg-${_}`]:_,[`${S}-bar-animated`]:f,[`${S}-bar-striped`]:f||s}),style:{width:`${oSe(t,e,n)}%`,...p},"aria-valuenow":t,"aria-valuemin":e,"aria-valuemax":n,children:i?Oe.jsx("span",{className:"visually-hidden",children:r}):r})}const rse=be.forwardRef(({isChild:e=!1,...t},n)=>{const r={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...t};if(r.bsPrefix=br(r.bsPrefix,"progress"),e)return uY(r,n);const{min:i,now:s,max:f,label:a,visuallyHidden:p,striped:_,animated:S,bsPrefix:E,variant:I,className:z,children:F,...U}=r;return Oe.jsx("div",{ref:n,...U,className:ar(z,E),children:F?R4(F,k=>be.cloneElement(k,{isChild:!0})):uY({min:i,now:s,max:f,label:a,visuallyHidden:p,striped:_,animated:S,bsPrefix:E,variant:I},n)})});rse.displayName="ProgressBar";const ia=be.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},i)=>{const s=br(e,"row"),f=Aae(),a=Oae(),p=`${s}-cols`,_=[];return f.forEach(S=>{const E=r[S];delete r[S];let I;E!=null&&typeof E=="object"?{cols:I}=E:I=E;const z=S!==a?`-${S}`:"";I!=null&&_.push(`${p}${z}-${I}`)}),Oe.jsx(n,{ref:i,...r,className:ar(t,s,..._)})});ia.displayName="Row";const d$=be.forwardRef(({bsPrefix:e,variant:t,animation:n="border",size:r,as:i="div",className:s,...f},a)=>{e=br(e,"spinner");const p=`${e}-${n}`;return Oe.jsx(i,{ref:a,...f,className:ar(s,p,r&&`${p}-${r}`,t&&`text-${t}`)})});d$.displayName="Spinner";const sSe=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],lSe=["activeKey","getControlledId","getControllerId"],uSe=["as"];function j4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ise(e){let{active:t,eventKey:n,mountOnEnter:r,transition:i,unmountOnExit:s,role:f="tabpanel",onEnter:a,onEntering:p,onEntered:_,onExit:S,onExiting:E,onExited:I}=e,z=j4(e,sSe);const F=be.useContext(jS);if(!F)return[Object.assign({},z,{role:f}),{eventKey:n,isActive:t,mountOnEnter:r,transition:i,unmountOnExit:s,onEnter:a,onEntering:p,onEntered:_,onExit:S,onExiting:E,onExited:I}];const{activeKey:U,getControlledId:k,getControllerId:V}=F,K=j4(F,lSe),J=$w(n);return[Object.assign({},z,{role:f,id:k(n),"aria-labelledby":V(n)}),{eventKey:n,isActive:t==null&&J!=null?$w(U)===J:t,transition:i||K.transition,mountOnEnter:r??K.mountOnEnter,unmountOnExit:s??K.unmountOnExit,onEnter:a,onEntering:p,onEntered:_,onExit:S,onExiting:E,onExited:I}]}const ase=be.forwardRef((e,t)=>{let{as:n="div"}=e,r=j4(e,uSe);const[i,{isActive:s,onEnter:f,onEntering:a,onEntered:p,onExit:_,onExiting:S,onExited:E,mountOnEnter:I,unmountOnExit:z,transition:F=o$}]=ise(r);return Oe.jsx(jS.Provider,{value:null,children:Oe.jsx(cx.Provider,{value:null,children:Oe.jsx(F,{in:s,onEnter:f,onEntering:a,onEntered:p,onExit:_,onExiting:S,onExited:E,mountOnEnter:I,unmountOnExit:z,children:Oe.jsx(n,Object.assign({},i,{ref:t,hidden:!s,"aria-hidden":!s}))})})})});ase.displayName="TabPanel";const p$=e=>{const{id:t,generateChildId:n,onSelect:r,activeKey:i,defaultActiveKey:s,transition:f,mountOnEnter:a,unmountOnExit:p,children:_}=e,[S,E]=kxe(i,s,r),I=iwe(t),z=be.useMemo(()=>n||((U,k)=>I?`${I}-${k}-${U}`:null),[I,n]),F=be.useMemo(()=>({onSelect:E,activeKey:S,transition:f,mountOnEnter:a||!1,unmountOnExit:p||!1,getControlledId:U=>z(U,"tabpane"),getControllerId:U=>z(U,"tab")}),[E,S,f,a,p,z]);return Oe.jsx(jS.Provider,{value:F,children:Oe.jsx(cx.Provider,{value:E||null,children:_})})};p$.Panel=ase;function m$(e){return typeof e=="boolean"?e?og:o$:e}const ose=({transition:e,...t})=>Oe.jsx(p$,{...t,transition:m$(e)});ose.displayName="TabContainer";const FP=be.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=br(t,"tab-content"),Oe.jsx(n,{ref:i,className:ar(e,t),...r})));FP.displayName="TabContent";const Tw=be.forwardRef(({bsPrefix:e,transition:t,...n},r)=>{const[{className:i,as:s="div",...f},{isActive:a,onEnter:p,onEntering:_,onEntered:S,onExit:E,onExiting:I,onExited:z,mountOnEnter:F,unmountOnExit:U,transition:k=og}]=ise({...n,transition:m$(t)}),V=br(e,"tab-pane");return Oe.jsx(jS.Provider,{value:null,children:Oe.jsx(cx.Provider,{value:null,children:Oe.jsx(k,{in:a,onEnter:p,onEntering:_,onEntered:S,onExit:E,onExiting:I,onExited:z,mountOnEnter:F,unmountOnExit:U,children:Oe.jsx(s,{...f,ref:r,className:ar(i,V,a&&"active")})})})})});Tw.displayName="TabPane";const cSe={eventKey:Bn.oneOfType([Bn.string,Bn.number]),title:Bn.node.isRequired,disabled:Bn.bool,tabClassName:Bn.string,tabAttrs:Bn.object},sse=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};sse.propTypes=cSe;const Bb=Object.assign(sse,{Container:ose,Content:FP,Pane:Tw}),lse=be.forwardRef(({bsPrefix:e,className:t,striped:n,bordered:r,borderless:i,hover:s,size:f,variant:a,responsive:p,..._},S)=>{const E=br(e,"table"),I=ar(t,E,a&&`${E}-${a}`,f&&`${E}-${f}`,n&&`${E}-${typeof n=="string"?`striped-${n}`:"striped"}`,r&&`${E}-bordered`,i&&`${E}-borderless`,s&&`${E}-hover`),z=Oe.jsx("table",{..._,className:I,ref:S});if(p){let F=`${E}-responsive`;return typeof p=="string"&&(F=`${F}-${p}`),Oe.jsx("div",{className:F,children:z})}return z});lse.displayName="Table";function fSe(e){let t;return Dxe(e,n=>{t==null&&(t=n.props.eventKey)}),t}function hSe(e){const{title:t,eventKey:n,disabled:r,tabClassName:i,tabAttrs:s,id:f}=e.props;return t==null?null:Oe.jsx(c$,{as:"li",role:"presentation",children:Oe.jsx(f$,{as:"button",type:"button",eventKey:n,disabled:r,id:f,className:i,...s,children:t})})}const g$=e=>{const{id:t,onSelect:n,transition:r,mountOnEnter:i=!1,unmountOnExit:s=!1,variant:f="tabs",children:a,activeKey:p=fSe(a),..._}=jA(e,{activeKey:"onSelect"});return Oe.jsxs(p$,{id:t,activeKey:p,onSelect:n,transition:m$(r),mountOnEnter:i,unmountOnExit:s,children:[Oe.jsx(sp,{id:t,..._,role:"tablist",as:"ul",variant:f,children:R4(a,hSe)}),Oe.jsx(FP,{children:R4(a,S=>{const E={...S.props};return delete E.title,delete E.disabled,delete E.tabClassName,delete E.tabAttrs,Oe.jsx(Tw,{...E})})})]})};g$.displayName="Tabs";/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function dSe(e,t,n){return(t=mSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cY(Object(n),!0).forEach(function(r){dSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mSe(e){var t=pSe(e,"string");return typeof t=="symbol"?t:t+""}const fY=()=>{};let y$={},use={},cse=null,fse={mark:fY,measure:fY};try{typeof window<"u"&&(y$=window),typeof document<"u"&&(use=document),typeof MutationObserver<"u"&&(cse=MutationObserver),typeof performance<"u"&&(fse=performance)}catch{}const{userAgent:hY=""}=y$.navigator||{},Zv=y$,Po=use,dY=cse,iM=fse;Zv.document;const c_=!!Po.documentElement&&!!Po.head&&typeof Po.addEventListener=="function"&&typeof Po.createElement=="function",hse=~hY.indexOf("MSIE")||~hY.indexOf("Trident/");var gSe=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,ySe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,dse={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},_Se={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},pse=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Pu="classic",NP="duotone",vSe="sharp",bSe="sharp-duotone",mse=[Pu,NP,vSe,bSe],xSe={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},wSe={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},SSe=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),TSe={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},ESe=["fak","fa-kit","fakd","fa-kit-duotone"],pY={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},ASe=["kit"],OSe={kit:{"fa-kit":"fak"}},CSe=["fak","fakd"],MSe={kit:{fak:"fa-kit"}},mY={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},aM={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},DSe=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],ISe=["fak","fa-kit","fakd","fa-kit-duotone"],PSe={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},RSe={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},kSe={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},U4={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},LSe=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],$4=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...DSe,...LSe],zSe=["solid","regular","light","thin","duotone","brands"],gse=[1,2,3,4,5,6,7,8,9,10],FSe=gse.concat([11,12,13,14,15,16,17,18,19,20]),NSe=[...Object.keys(kSe),...zSe,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",aM.GROUP,aM.SWAP_OPACITY,aM.PRIMARY,aM.SECONDARY].concat(gse.map(e=>"".concat(e,"x"))).concat(FSe.map(e=>"w-".concat(e))),BSe={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Qy="___FONT_AWESOME___",V4=16,yse="fa",_se="svg-inline--fa",fx="data-fa-i2svg",q4="data-fa-pseudo-element",jSe="data-fa-pseudo-element-pending",_$="data-prefix",v$="data-icon",gY="fontawesome-i2svg",USe="async",$Se=["HTML","HEAD","STYLE","SCRIPT"],vse=(()=>{try{return!0}catch{return!1}})();function WA(e){return new Proxy(e,{get(t,n){return n in t?t[n]:t[Pu]}})}const bse=Ln({},dse);bse[Pu]=Ln(Ln(Ln(Ln({},{"fa-duotone":"duotone"}),dse[Pu]),pY.kit),pY["kit-duotone"]);const VSe=WA(bse),H4=Ln({},TSe);H4[Pu]=Ln(Ln(Ln(Ln({},{duotone:"fad"}),H4[Pu]),mY.kit),mY["kit-duotone"]);const yY=WA(H4),G4=Ln({},U4);G4[Pu]=Ln(Ln({},G4[Pu]),MSe.kit);const b$=WA(G4),Y4=Ln({},RSe);Y4[Pu]=Ln(Ln({},Y4[Pu]),OSe.kit);WA(Y4);const qSe=gSe,xse="fa-layers-text",HSe=ySe,GSe=Ln({},xSe);WA(GSe);const YSe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],b3=_Se,WSe=[...ASe,...NSe],d2=Zv.FontAwesomeConfig||{};function XSe(e){var t=Po.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function ZSe(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}Po&&typeof Po.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(t=>{let[n,r]=t;const i=ZSe(XSe(n));i!=null&&(d2[r]=i)});const wse={styleDefault:"solid",familyDefault:Pu,cssPrefix:yse,replacementClass:_se,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};d2.familyPrefix&&(d2.cssPrefix=d2.familyPrefix);const qw=Ln(Ln({},wse),d2);qw.autoReplaceSvg||(qw.observeMutations=!1);const Ir={};Object.keys(wse).forEach(e=>{Object.defineProperty(Ir,e,{enumerable:!0,set:function(t){qw[e]=t,p2.forEach(n=>n(Ir))},get:function(){return qw[e]}})});Object.defineProperty(Ir,"familyPrefix",{enumerable:!0,set:function(e){qw.cssPrefix=e,p2.forEach(t=>t(Ir))},get:function(){return qw.cssPrefix}});Zv.FontAwesomeConfig=Ir;const p2=[];function KSe(e){return p2.push(e),()=>{p2.splice(p2.indexOf(e),1)}}const Cv=V4,Hm={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function QSe(e){if(!e||!c_)return;const t=Po.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const n=Po.head.childNodes;let r=null;for(let i=n.length-1;i>-1;i--){const s=n[i],f=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(f)>-1&&(r=s)}return Po.head.insertBefore(t,r),e}const JSe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function P2(){let e=12,t="";for(;e-- >0;)t+=JSe[Math.random()*62|0];return t}function US(e){const t=[];for(let n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function x$(e){return e.classList?US(e.classList):(e.getAttribute("class")||"").split(" ").filter(t=>t)}function Sse(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function eTe(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,'="').concat(Sse(e[n]),'" '),"").trim()}function BP(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,": ").concat(e[n].trim(),";"),"")}function w$(e){return e.size!==Hm.size||e.x!==Hm.x||e.y!==Hm.y||e.rotate!==Hm.rotate||e.flipX||e.flipY}function tTe(e){let{transform:t,containerWidth:n,iconWidth:r}=e;const i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(t.x*32,", ").concat(t.y*32,") "),f="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)"),p={transform:"".concat(s," ").concat(f," ").concat(a)},_={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:p,path:_}}function nTe(e){let{transform:t,width:n=V4,height:r=V4,startCentered:i=!1}=e,s="";return i&&hse?s+="translate(".concat(t.x/Cv-n/2,"em, ").concat(t.y/Cv-r/2,"em) "):i?s+="translate(calc(-50% + ".concat(t.x/Cv,"em), calc(-50% + ").concat(t.y/Cv,"em)) "):s+="translate(".concat(t.x/Cv,"em, ").concat(t.y/Cv,"em) "),s+="scale(".concat(t.size/Cv*(t.flipX?-1:1),", ").concat(t.size/Cv*(t.flipY?-1:1),") "),s+="rotate(".concat(t.rotate,"deg) "),s}var rTe=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function Tse(){const e=yse,t=_se,n=Ir.cssPrefix,r=Ir.replacementClass;let i=rTe;if(n!==e||r!==t){const s=new RegExp("\\.".concat(e,"\\-"),"g"),f=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");i=i.replace(s,".".concat(n,"-")).replace(f,"--".concat(n,"-")).replace(a,".".concat(r))}return i}let _Y=!1;function x3(){Ir.autoAddCss&&!_Y&&(QSe(Tse()),_Y=!0)}var iTe={mixout(){return{dom:{css:Tse,insertCss:x3}}},hooks(){return{beforeDOMElementCreation(){x3()},beforeI2svg(){x3()}}}};const Jy=Zv||{};Jy[Qy]||(Jy[Qy]={});Jy[Qy].styles||(Jy[Qy].styles={});Jy[Qy].hooks||(Jy[Qy].hooks={});Jy[Qy].shims||(Jy[Qy].shims=[]);var Gm=Jy[Qy];const Ese=[],Ase=function(){Po.removeEventListener("DOMContentLoaded",Ase),zD=1,Ese.map(e=>e())};let zD=!1;c_&&(zD=(Po.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Po.readyState),zD||Po.addEventListener("DOMContentLoaded",Ase));function aTe(e){c_&&(zD?setTimeout(e,0):Ese.push(e))}function XA(e){const{tag:t,attributes:n={},children:r=[]}=e;return typeof e=="string"?Sse(e):"<".concat(t," ").concat(eTe(n),">").concat(r.map(XA).join(""),"</").concat(t,">")}function vY(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var w3=function(t,n,r,i){var s=Object.keys(t),f=s.length,a=n,p,_,S;for(r===void 0?(p=1,S=t[s[0]]):(p=0,S=r);p<f;p++)_=s[p],S=a(S,t[_],_,t);return S};function oTe(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=e.charCodeAt(n++);(s&64512)==56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}function W4(e){const t=oTe(e);return t.length===1?t[0].toString(16):null}function sTe(e,t){const n=e.length;let r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&n>t+1&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function bY(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t},{})}function X4(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=n,i=bY(t);typeof Gm.hooks.addPack=="function"&&!r?Gm.hooks.addPack(e,bY(t)):Gm.styles[e]=Ln(Ln({},Gm.styles[e]||{}),i),e==="fas"&&X4("fa",t)}const{styles:R2,shims:lTe}=Gm,Ose=Object.keys(b$),uTe=Ose.reduce((e,t)=>(e[t]=Object.keys(b$[t]),e),{});let S$=null,Cse={},Mse={},Dse={},Ise={},Pse={};function cTe(e){return~WSe.indexOf(e)}function fTe(e,t){const n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r===e&&i!==""&&!cTe(i)?i:null}const Rse=()=>{const e=r=>w3(R2,(i,s,f)=>(i[f]=w3(s,r,{}),i),{});Cse=e((r,i,s)=>(i[3]&&(r[i[3]]=s),i[2]&&i[2].filter(a=>typeof a=="number").forEach(a=>{r[a.toString(16)]=s}),r)),Mse=e((r,i,s)=>(r[s]=s,i[2]&&i[2].filter(a=>typeof a=="string").forEach(a=>{r[a]=s}),r)),Pse=e((r,i,s)=>{const f=i[2];return r[s]=s,f.forEach(a=>{r[a]=s}),r});const t="far"in R2||Ir.autoFetchSvg,n=w3(lTe,(r,i)=>{const s=i[0];let f=i[1];const a=i[2];return f==="far"&&!t&&(f="fas"),typeof s=="string"&&(r.names[s]={prefix:f,iconName:a}),typeof s=="number"&&(r.unicodes[s.toString(16)]={prefix:f,iconName:a}),r},{names:{},unicodes:{}});Dse=n.names,Ise=n.unicodes,S$=jP(Ir.styleDefault,{family:Ir.familyDefault})};KSe(e=>{S$=jP(e.styleDefault,{family:Ir.familyDefault})});Rse();function T$(e,t){return(Cse[e]||{})[t]}function hTe(e,t){return(Mse[e]||{})[t]}function $b(e,t){return(Pse[e]||{})[t]}function kse(e){return Dse[e]||{prefix:null,iconName:null}}function dTe(e){const t=Ise[e],n=T$("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Kv(){return S$}const Lse=()=>({prefix:null,iconName:null,rest:[]});function pTe(e){let t=Pu;const n=Ose.reduce((r,i)=>(r[i]="".concat(Ir.cssPrefix,"-").concat(i),r),{});return mse.forEach(r=>{(e.includes(n[r])||e.some(i=>uTe[r].includes(i)))&&(t=r)}),t}function jP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=Pu}=t,r=VSe[n][e];if(n===NP&&!e)return"fad";const i=yY[n][e]||yY[n][r],s=e in Gm.styles?e:null;return i||s||null}function mTe(e){let t=[],n=null;return e.forEach(r=>{const i=fTe(Ir.cssPrefix,r);i?n=i:r&&t.push(r)}),{iconName:n,rest:t}}function xY(e){return e.sort().filter((t,n,r)=>r.indexOf(t)===n)}function UP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=t;let r=null;const i=$4.concat(ISe),s=xY(e.filter(E=>i.includes(E))),f=xY(e.filter(E=>!$4.includes(E))),a=s.filter(E=>(r=E,!pse.includes(E))),[p=null]=a,_=pTe(s),S=Ln(Ln({},mTe(f)),{},{prefix:jP(p,{family:_})});return Ln(Ln(Ln({},S),vTe({values:e,family:_,styles:R2,config:Ir,canonical:S,givenPrefix:r})),gTe(n,r,S))}function gTe(e,t,n){let{prefix:r,iconName:i}=n;if(e||!r||!i)return{prefix:r,iconName:i};const s=t==="fa"?kse(i):{},f=$b(r,i);return i=s.iconName||f||i,r=s.prefix||r,r==="far"&&!R2.far&&R2.fas&&!Ir.autoFetchSvg&&(r="fas"),{prefix:r,iconName:i}}const yTe=mse.filter(e=>e!==Pu||e!==NP),_Te=Object.keys(U4).filter(e=>e!==Pu).map(e=>Object.keys(U4[e])).flat();function vTe(e){const{values:t,family:n,canonical:r,givenPrefix:i="",styles:s={},config:f={}}=e,a=n===NP,p=t.includes("fa-duotone")||t.includes("fad"),_=f.familyDefault==="duotone",S=r.prefix==="fad"||r.prefix==="fa-duotone";if(!a&&(p||_||S)&&(r.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(r.prefix="fab"),!r.prefix&&yTe.includes(n)&&(Object.keys(s).find(I=>_Te.includes(I))||f.autoFetchSvg)){const I=SSe.get(n).defaultShortPrefixId;r.prefix=I,r.iconName=$b(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||i==="fa")&&(r.prefix=Kv()||"fas"),r}class bTe{constructor(){this.definitions={}}add(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(s=>{this.definitions[s]=Ln(Ln({},this.definitions[s]||{}),i[s]),X4(s,i[s]);const f=b$[Pu][s];f&&X4(f,i[s]),Rse()})}reset(){this.definitions={}}_pullDefinitions(t,n){const r=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(r).map(i=>{const{prefix:s,iconName:f,icon:a}=r[i],p=a[2];t[s]||(t[s]={}),p.length>0&&p.forEach(_=>{typeof _=="string"&&(t[s][_]=a)}),t[s][f]=a}),t}}let wY=[],yw={};const Ew={},xTe=Object.keys(Ew);function wTe(e,t){let{mixoutsTo:n}=t;return wY=e,yw={},Object.keys(Ew).forEach(r=>{xTe.indexOf(r)===-1&&delete Ew[r]}),wY.forEach(r=>{const i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(s=>{typeof i[s]=="function"&&(n[s]=i[s]),typeof i[s]=="object"&&Object.keys(i[s]).forEach(f=>{n[s]||(n[s]={}),n[s][f]=i[s][f]})}),r.hooks){const s=r.hooks();Object.keys(s).forEach(f=>{yw[f]||(yw[f]=[]),yw[f].push(s[f])})}r.provides&&r.provides(Ew)}),n}function Z4(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(yw[e]||[]).forEach(f=>{t=f.apply(null,[t,...r])}),t}function hx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(yw[e]||[]).forEach(s=>{s.apply(null,n)})}function Qv(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Ew[e]?Ew[e].apply(null,t):void 0}function K4(e){e.prefix==="fa"&&(e.prefix="fas");let{iconName:t}=e;const n=e.prefix||Kv();if(t)return t=$b(n,t)||t,vY(zse.definitions,n,t)||vY(Gm.styles,n,t)}const zse=new bTe,STe=()=>{Ir.autoReplaceSvg=!1,Ir.observeMutations=!1,hx("noAuto")},TTe={i2svg:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return c_?(hx("beforeI2svg",e),Qv("pseudoElements2svg",e),Qv("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;Ir.autoReplaceSvg===!1&&(Ir.autoReplaceSvg=!0),Ir.observeMutations=!0,aTe(()=>{ATe({autoReplaceSvgRoot:t}),hx("watch",e)})}},ETe={icon:e=>{if(e===null)return null;if(typeof e=="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:$b(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){const t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],n=jP(e[0]);return{prefix:n,iconName:$b(n,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(Ir.cssPrefix,"-"))>-1||e.match(qSe))){const t=UP(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||Kv(),iconName:$b(t.prefix,t.iconName)||t.iconName}}if(typeof e=="string"){const t=Kv();return{prefix:t,iconName:$b(t,e)||e}}}},rh={noAuto:STe,config:Ir,dom:TTe,parse:ETe,library:zse,findIconDefinition:K4,toHtml:XA},ATe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t=Po}=e;(Object.keys(Gm.styles).length>0||Ir.autoFetchSvg)&&c_&&Ir.autoReplaceSvg&&rh.dom.i2svg({node:t})};function $P(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(n=>XA(n))}}),Object.defineProperty(e,"node",{get:function(){if(!c_)return;const n=Po.createElement("div");return n.innerHTML=e.html,n.children}}),e}function OTe(e){let{children:t,main:n,mask:r,attributes:i,styles:s,transform:f}=e;if(w$(f)&&n.found&&!r.found){const{width:a,height:p}=n,_={x:a/p/2,y:.5};i.style=BP(Ln(Ln({},s),{},{"transform-origin":"".concat(_.x+f.x/16,"em ").concat(_.y+f.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}function CTe(e){let{prefix:t,iconName:n,children:r,attributes:i,symbol:s}=e;const f=s===!0?"".concat(t,"-").concat(Ir.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ln(Ln({},i),{},{id:f}),children:r}]}]}function E$(e){const{icons:{main:t,mask:n},prefix:r,iconName:i,transform:s,symbol:f,title:a,maskId:p,titleId:_,extra:S,watchable:E=!1}=e,{width:I,height:z}=n.found?n:t,F=CSe.includes(r),U=[Ir.replacementClass,i?"".concat(Ir.cssPrefix,"-").concat(i):""].filter(Q=>S.classes.indexOf(Q)===-1).filter(Q=>Q!==""||!!Q).concat(S.classes).join(" ");let k={children:[],attributes:Ln(Ln({},S.attributes),{},{"data-prefix":r,"data-icon":i,class:U,role:S.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(I," ").concat(z)})};const V=F&&!~S.classes.indexOf("fa-fw")?{width:"".concat(I/z*16*.0625,"em")}:{};E&&(k.attributes[fx]=""),a&&(k.children.push({tag:"title",attributes:{id:k.attributes["aria-labelledby"]||"title-".concat(_||P2())},children:[a]}),delete k.attributes.title);const K=Ln(Ln({},k),{},{prefix:r,iconName:i,main:t,mask:n,maskId:p,transform:s,symbol:f,styles:Ln(Ln({},V),S.styles)}),{children:J,attributes:ie}=n.found&&t.found?Qv("generateAbstractMask",K)||{children:[],attributes:{}}:Qv("generateAbstractIcon",K)||{children:[],attributes:{}};return K.children=J,K.attributes=ie,f?CTe(K):OTe(K)}function SY(e){const{content:t,width:n,height:r,transform:i,title:s,extra:f,watchable:a=!1}=e,p=Ln(Ln(Ln({},f.attributes),s?{title:s}:{}),{},{class:f.classes.join(" ")});a&&(p[fx]="");const _=Ln({},f.styles);w$(i)&&(_.transform=nTe({transform:i,startCentered:!0,width:n,height:r}),_["-webkit-transform"]=_.transform);const S=BP(_);S.length>0&&(p.style=S);const E=[];return E.push({tag:"span",attributes:p,children:[t]}),s&&E.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),E}function MTe(e){const{content:t,title:n,extra:r}=e,i=Ln(Ln(Ln({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=BP(r.styles);s.length>0&&(i.style=s);const f=[];return f.push({tag:"span",attributes:i,children:[t]}),n&&f.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),f}const{styles:S3}=Gm;function Q4(e){const t=e[0],n=e[1],[r]=e.slice(4);let i=null;return Array.isArray(r)?i={tag:"g",attributes:{class:"".concat(Ir.cssPrefix,"-").concat(b3.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ir.cssPrefix,"-").concat(b3.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Ir.cssPrefix,"-").concat(b3.PRIMARY),fill:"currentColor",d:r[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:t,height:n,icon:i}}const DTe={found:!1,width:512,height:512};function ITe(e,t){!vse&&!Ir.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function J4(e,t){let n=t;return t==="fa"&&Ir.styleDefault!==null&&(t=Kv()),new Promise((r,i)=>{if(n==="fa"){const s=kse(e)||{};e=s.iconName||e,t=s.prefix||t}if(e&&t&&S3[t]&&S3[t][e]){const s=S3[t][e];return r(Q4(s))}ITe(e,t),r(Ln(Ln({},DTe),{},{icon:Ir.showMissingIcons&&e?Qv("missingIconAbstract")||{}:{}}))})}const TY=()=>{},ej=Ir.measurePerformance&&iM&&iM.mark&&iM.measure?iM:{mark:TY,measure:TY},QE='FA "6.7.2"',PTe=e=>(ej.mark("".concat(QE," ").concat(e," begins")),()=>Fse(e)),Fse=e=>{ej.mark("".concat(QE," ").concat(e," ends")),ej.measure("".concat(QE," ").concat(e),"".concat(QE," ").concat(e," begins"),"".concat(QE," ").concat(e," ends"))};var A$={begin:PTe,end:Fse};const tD=()=>{};function EY(e){return typeof(e.getAttribute?e.getAttribute(fx):null)=="string"}function RTe(e){const t=e.getAttribute?e.getAttribute(_$):null,n=e.getAttribute?e.getAttribute(v$):null;return t&&n}function kTe(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(Ir.replacementClass)}function LTe(){return Ir.autoReplaceSvg===!0?nD.replace:nD[Ir.autoReplaceSvg]||nD.replace}function zTe(e){return Po.createElementNS("http://www.w3.org/2000/svg",e)}function FTe(e){return Po.createElement(e)}function Nse(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=e.tag==="svg"?zTe:FTe}=t;if(typeof e=="string")return Po.createTextNode(e);const r=n(e.tag);return Object.keys(e.attributes||[]).forEach(function(s){r.setAttribute(s,e.attributes[s])}),(e.children||[]).forEach(function(s){r.appendChild(Nse(s,{ceFn:n}))}),r}function NTe(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}const nD={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach(n=>{t.parentNode.insertBefore(Nse(n),t)}),t.getAttribute(fx)===null&&Ir.keepOriginalSource){let n=Po.createComment(NTe(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){const t=e[0],n=e[1];if(~x$(t).indexOf(Ir.replacementClass))return nD.replace(e);const r=new RegExp("".concat(Ir.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((f,a)=>(a===Ir.replacementClass||a.match(r)?f.toSvg.push(a):f.toNode.push(a),f),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}const i=n.map(s=>XA(s)).join(`
`);t.setAttribute(fx,""),t.innerHTML=i}};function AY(e){e()}function Bse(e,t){const n=typeof t=="function"?t:tD;if(e.length===0)n();else{let r=AY;Ir.mutateApproach===USe&&(r=Zv.requestAnimationFrame||AY),r(()=>{const i=LTe(),s=A$.begin("mutate");e.map(i),s(),n()})}}let O$=!1;function jse(){O$=!0}function tj(){O$=!1}let FD=null;function OY(e){if(!dY||!Ir.observeMutations)return;const{treeCallback:t=tD,nodeCallback:n=tD,pseudoElementsCallback:r=tD,observeMutationsRoot:i=Po}=e;FD=new dY(s=>{if(O$)return;const f=Kv();US(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!EY(a.addedNodes[0])&&(Ir.searchPseudoElements&&r(a.target),t(a.target)),a.type==="attributes"&&a.target.parentNode&&Ir.searchPseudoElements&&r(a.target.parentNode),a.type==="attributes"&&EY(a.target)&&~YSe.indexOf(a.attributeName))if(a.attributeName==="class"&&RTe(a.target)){const{prefix:p,iconName:_}=UP(x$(a.target));a.target.setAttribute(_$,p||f),_&&a.target.setAttribute(v$,_)}else kTe(a.target)&&n(a.target)})}),c_&&FD.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function BTe(){FD&&FD.disconnect()}function jTe(e){const t=e.getAttribute("style");let n=[];return t&&(n=t.split(";").reduce((r,i)=>{const s=i.split(":"),f=s[0],a=s.slice(1);return f&&a.length>0&&(r[f]=a.join(":").trim()),r},{})),n}function UTe(e){const t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=e.innerText!==void 0?e.innerText.trim():"";let i=UP(x$(e));return i.prefix||(i.prefix=Kv()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=hTe(i.prefix,e.innerText)||T$(i.prefix,W4(e.innerText))),!i.iconName&&Ir.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function $Te(e){const t=US(e.attributes).reduce((i,s)=>(i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return Ir.autoA11y&&(n?t["aria-labelledby"]="".concat(Ir.replacementClass,"-title-").concat(r||P2()):(t["aria-hidden"]="true",t.focusable="false")),t}function VTe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Hm,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function CY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:i}=UTe(e),s=$Te(e),f=Z4("parseNodeAttributes",{},e);let a=t.styleParser?jTe(e):[];return Ln({iconName:n,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:r,transform:Hm,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:a,attributes:s}},f)}const{styles:qTe}=Gm;function Use(e){const t=Ir.autoReplaceSvg==="nest"?CY(e,{styleParser:!1}):CY(e);return~t.extra.classes.indexOf(xse)?Qv("generateLayersText",e,t):Qv("generateSvgReplacementMutation",e,t)}function HTe(){return[...ESe,...$4]}function MY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!c_)return Promise.resolve();const n=Po.documentElement.classList,r=S=>n.add("".concat(gY,"-").concat(S)),i=S=>n.remove("".concat(gY,"-").concat(S)),s=Ir.autoFetchSvg?HTe():pse.concat(Object.keys(qTe));s.includes("fa")||s.push("fa");const f=[".".concat(xse,":not([").concat(fx,"])")].concat(s.map(S=>".".concat(S,":not([").concat(fx,"])"))).join(", ");if(f.length===0)return Promise.resolve();let a=[];try{a=US(e.querySelectorAll(f))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();const p=A$.begin("onTree"),_=a.reduce((S,E)=>{try{const I=Use(E);I&&S.push(I)}catch(I){vse||I.name==="MissingIcon"&&console.error(I)}return S},[]);return new Promise((S,E)=>{Promise.all(_).then(I=>{Bse(I,()=>{r("active"),r("complete"),i("pending"),typeof t=="function"&&t(),p(),S()})}).catch(I=>{p(),E(I)})})}function GTe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Use(e).then(n=>{n&&Bse([n],t)})}function YTe(e){return function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(t||{}).icon?t:K4(t||{});let{mask:i}=n;return i&&(i=(i||{}).icon?i:K4(i||{})),e(r,Ln(Ln({},n),{},{mask:i}))}}const WTe=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Hm,symbol:r=!1,mask:i=null,maskId:s=null,title:f=null,titleId:a=null,classes:p=[],attributes:_={},styles:S={}}=t;if(!e)return;const{prefix:E,iconName:I,icon:z}=e;return $P(Ln({type:"icon"},e),()=>(hx("beforeDOMElementCreation",{iconDefinition:e,params:t}),Ir.autoA11y&&(f?_["aria-labelledby"]="".concat(Ir.replacementClass,"-title-").concat(a||P2()):(_["aria-hidden"]="true",_.focusable="false")),E$({icons:{main:Q4(z),mask:i?Q4(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:E,iconName:I,transform:Ln(Ln({},Hm),n),symbol:r,title:f,maskId:s,titleId:a,extra:{attributes:_,styles:S,classes:p}})))};var XTe={mixout(){return{icon:YTe(WTe)}},hooks(){return{mutationObserverCallbacks(e){return e.treeCallback=MY,e.nodeCallback=GTe,e}}},provides(e){e.i2svg=function(t){const{node:n=Po,callback:r=()=>{}}=t;return MY(n,r)},e.generateSvgReplacementMutation=function(t,n){const{iconName:r,title:i,titleId:s,prefix:f,transform:a,symbol:p,mask:_,maskId:S,extra:E}=n;return new Promise((I,z)=>{Promise.all([J4(r,f),_.iconName?J4(_.iconName,_.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(F=>{let[U,k]=F;I([t,E$({icons:{main:U,mask:k},prefix:f,iconName:r,transform:a,symbol:p,maskId:S,title:i,titleId:s,extra:E,watchable:!0})])}).catch(z)})},e.generateAbstractIcon=function(t){let{children:n,attributes:r,main:i,transform:s,styles:f}=t;const a=BP(f);a.length>0&&(r.style=a);let p;return w$(s)&&(p=Qv("generateAbstractTransformGrouping",{main:i,transform:s,containerWidth:i.width,iconWidth:i.width})),n.push(p||i.icon),{children:n,attributes:r}}}},ZTe={mixout(){return{layer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=t;return $P({type:"layer"},()=>{hx("beforeDOMElementCreation",{assembler:e,params:t});let r=[];return e(i=>{Array.isArray(i)?i.map(s=>{r=r.concat(s.abstract)}):r=r.concat(i.abstract)}),[{tag:"span",attributes:{class:["".concat(Ir.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}}}},KTe={mixout(){return{counter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:r=[],attributes:i={},styles:s={}}=t;return $P({type:"counter",content:e},()=>(hx("beforeDOMElementCreation",{content:e,params:t}),MTe({content:e.toString(),title:n,extra:{attributes:i,styles:s,classes:["".concat(Ir.cssPrefix,"-layers-counter"),...r]}})))}}}},QTe={mixout(){return{text(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Hm,title:r=null,classes:i=[],attributes:s={},styles:f={}}=t;return $P({type:"text",content:e},()=>(hx("beforeDOMElementCreation",{content:e,params:t}),SY({content:e,transform:Ln(Ln({},Hm),n),title:r,extra:{attributes:s,styles:f,classes:["".concat(Ir.cssPrefix,"-layers-text"),...i]}})))}}},provides(e){e.generateLayersText=function(t,n){const{title:r,transform:i,extra:s}=n;let f=null,a=null;if(hse){const p=parseInt(getComputedStyle(t).fontSize,10),_=t.getBoundingClientRect();f=_.width/p,a=_.height/p}return Ir.autoA11y&&!r&&(s.attributes["aria-hidden"]="true"),Promise.resolve([t,SY({content:t.innerHTML,width:f,height:a,transform:i,title:r,extra:s,watchable:!0})])}}};const JTe=new RegExp('"',"ug"),DY=[1105920,1112319],IY=Ln(Ln(Ln(Ln({},{FontAwesome:{normal:"fas",400:"fas"}}),wSe),BSe),PSe),nj=Object.keys(IY).reduce((e,t)=>(e[t.toLowerCase()]=IY[t],e),{}),eEe=Object.keys(nj).reduce((e,t)=>{const n=nj[t];return e[t]=n[900]||[...Object.entries(n)][0][1],e},{});function tEe(e){const t=e.replace(JTe,""),n=sTe(t,0),r=n>=DY[0]&&n<=DY[1],i=t.length===2?t[0]===t[1]:!1;return{value:W4(i?t[0]:t),isSecondary:r||i}}function nEe(e,t){const n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(t),i=isNaN(r)?"normal":r;return(nj[n]||{})[i]||eEe[n]}function PY(e,t){const n="".concat(jSe).concat(t.replace(":","-"));return new Promise((r,i)=>{if(e.getAttribute(n)!==null)return r();const f=US(e.children).filter(I=>I.getAttribute(q4)===t)[0],a=Zv.getComputedStyle(e,t),p=a.getPropertyValue("font-family"),_=p.match(HSe),S=a.getPropertyValue("font-weight"),E=a.getPropertyValue("content");if(f&&!_)return e.removeChild(f),r();if(_&&E!=="none"&&E!==""){const I=a.getPropertyValue("content");let z=nEe(p,S);const{value:F,isSecondary:U}=tEe(I),k=_[0].startsWith("FontAwesome");let V=T$(z,F),K=V;if(k){const J=dTe(F);J.iconName&&J.prefix&&(V=J.iconName,z=J.prefix)}if(V&&!U&&(!f||f.getAttribute(_$)!==z||f.getAttribute(v$)!==K)){e.setAttribute(n,K),f&&e.removeChild(f);const J=VTe(),{extra:ie}=J;ie.attributes[q4]=t,J4(V,z).then(Q=>{const W=E$(Ln(Ln({},J),{},{icons:{main:Q,mask:Lse()},prefix:z,iconName:K,extra:ie,watchable:!0})),te=Po.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(te,e.firstChild):e.appendChild(te),te.outerHTML=W.map(X=>XA(X)).join(`
`),e.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function rEe(e){return Promise.all([PY(e,"::before"),PY(e,"::after")])}function iEe(e){return e.parentNode!==document.head&&!~$Se.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(q4)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function RY(e){if(c_)return new Promise((t,n)=>{const r=US(e.querySelectorAll("*")).filter(iEe).map(rEe),i=A$.begin("searchPseudoElements");jse(),Promise.all(r).then(()=>{i(),tj(),t()}).catch(()=>{i(),tj(),n()})})}var aEe={hooks(){return{mutationObserverCallbacks(e){return e.pseudoElementsCallback=RY,e}}},provides(e){e.pseudoElements2svg=function(t){const{node:n=Po}=t;Ir.searchPseudoElements&&RY(n)}}};let kY=!1;var oEe={mixout(){return{dom:{unwatch(){jse(),kY=!0}}}},hooks(){return{bootstrap(){OY(Z4("mutationObserverCallbacks",{}))},noAuto(){BTe()},watch(e){const{observeMutationsRoot:t}=e;kY?tj():OY(Z4("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}};const LY=e=>{let t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce((n,r)=>{const i=r.toLowerCase().split("-"),s=i[0];let f=i.slice(1).join("-");if(s&&f==="h")return n.flipX=!0,n;if(s&&f==="v")return n.flipY=!0,n;if(f=parseFloat(f),isNaN(f))return n;switch(s){case"grow":n.size=n.size+f;break;case"shrink":n.size=n.size-f;break;case"left":n.x=n.x-f;break;case"right":n.x=n.x+f;break;case"up":n.y=n.y-f;break;case"down":n.y=n.y+f;break;case"rotate":n.rotate=n.rotate+f;break}return n},t)};var sEe={mixout(){return{parse:{transform:e=>LY(e)}}},hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-transform");return n&&(e.transform=LY(n)),e}}},provides(e){e.generateAbstractTransformGrouping=function(t){let{main:n,transform:r,containerWidth:i,iconWidth:s}=t;const f={transform:"translate(".concat(i/2," 256)")},a="translate(".concat(r.x*32,", ").concat(r.y*32,") "),p="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),_="rotate(".concat(r.rotate," 0 0)"),S={transform:"".concat(a," ").concat(p," ").concat(_)},E={transform:"translate(".concat(s/2*-1," -256)")},I={outer:f,inner:S,path:E};return{tag:"g",attributes:Ln({},I.outer),children:[{tag:"g",attributes:Ln({},I.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:Ln(Ln({},n.icon.attributes),I.path)}]}]}}}};const T3={x:0,y:0,width:"100%",height:"100%"};function zY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function lEe(e){return e.tag==="g"?e.children:[e]}var uEe={hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-mask"),r=n?UP(n.split(" ").map(i=>i.trim())):Lse();return r.prefix||(r.prefix=Kv()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides(e){e.generateAbstractMask=function(t){let{children:n,attributes:r,main:i,mask:s,maskId:f,transform:a}=t;const{width:p,icon:_}=i,{width:S,icon:E}=s,I=tTe({transform:a,containerWidth:S,iconWidth:p}),z={tag:"rect",attributes:Ln(Ln({},T3),{},{fill:"white"})},F=_.children?{children:_.children.map(zY)}:{},U={tag:"g",attributes:Ln({},I.inner),children:[zY(Ln({tag:_.tag,attributes:Ln(Ln({},_.attributes),I.path)},F))]},k={tag:"g",attributes:Ln({},I.outer),children:[U]},V="mask-".concat(f||P2()),K="clip-".concat(f||P2()),J={tag:"mask",attributes:Ln(Ln({},T3),{},{id:V,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[z,k]},ie={tag:"defs",children:[{tag:"clipPath",attributes:{id:K},children:lEe(E)},J]};return n.push(ie,{tag:"rect",attributes:Ln({fill:"currentColor","clip-path":"url(#".concat(K,")"),mask:"url(#".concat(V,")")},T3)}),{children:n,attributes:r}}}},cEe={provides(e){let t=!1;Zv.matchMedia&&(t=Zv.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const n=[],r={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:Ln(Ln({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=Ln(Ln({},i),{},{attributeName:"opacity"}),f={tag:"circle",attributes:Ln(Ln({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||f.children.push({tag:"animate",attributes:Ln(Ln({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Ln(Ln({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(f),n.push({tag:"path",attributes:Ln(Ln({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Ln(Ln({},s),{},{values:"1;0;0;0;0;1;"})}]}),t||n.push({tag:"path",attributes:Ln(Ln({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Ln(Ln({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},fEe={hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-symbol"),r=n===null?!1:n===""?!0:n;return e.symbol=r,e}}}},hEe=[iTe,XTe,ZTe,KTe,QTe,aEe,oEe,sEe,uEe,cEe,fEe];wTe(hEe,{mixoutsTo:rh});rh.noAuto;rh.config;rh.library;rh.dom;const rj=rh.parse;rh.findIconDefinition;rh.toHtml;const dEe=rh.icon;rh.layer;rh.text;rh.counter;var pEe={};function ij(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function mEe(e){if(Array.isArray(e))return e}function gEe(e){if(Array.isArray(e))return ij(e)}function Pv(e,t,n){return(t=TEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _Ee(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function vEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FY(Object(n),!0).forEach(function(r){Pv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xEe(e,t){if(e==null)return{};var n,r,i=wEe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function NY(e,t){return mEe(e)||_Ee(e,t)||$se(e,t)||vEe()}function aj(e){return gEe(e)||yEe(e)||$se(e)||bEe()}function SEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TEe(e){var t=SEe(e,"string");return typeof t=="symbol"?t:t+""}function ND(e){"@babel/helpers - typeof";return ND=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ND(e)}function $se(e,t){if(e){if(typeof e=="string")return ij(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ij(e,t):void 0}}var EEe="7.0.0",oj;try{var AEe=require("@fortawesome/fontawesome-svg-core/package.json");oj=AEe.version}catch{oj=typeof process<"u"&&pEe.FA_VERSION||"7.0.0"}function OEe(e){var t=e.beat,n=e.fade,r=e.beatFade,i=e.bounce,s=e.shake,f=e.flash,a=e.spin,p=e.spinPulse,_=e.spinReverse,S=e.pulse,E=e.fixedWidth,I=e.inverse,z=e.border,F=e.listItem,U=e.flip,k=e.size,V=e.rotation,K=e.pull,J=e.swapOpacity,ie=e.rotateBy,Q=e.widthAuto,W=CEe(oj,EEe),te=Pv(Pv(Pv(Pv(Pv(Pv({"fa-beat":t,"fa-fade":n,"fa-beat-fade":r,"fa-bounce":i,"fa-shake":s,"fa-flash":f,"fa-spin":a,"fa-spin-reverse":_,"fa-spin-pulse":p,"fa-pulse":S,"fa-fw":E,"fa-inverse":I,"fa-border":z,"fa-li":F,"fa-flip":U===!0,"fa-flip-horizontal":U==="horizontal"||U==="both","fa-flip-vertical":U==="vertical"||U==="both"},"fa-".concat(k),typeof k<"u"&&k!==null),"fa-rotate-".concat(V),typeof V<"u"&&V!==null&&V!==0),"fa-pull-".concat(K),typeof K<"u"&&K!==null),"fa-swap-opacity",J),"fa-rotate-by",W&&ie),"fa-width-auto",W&&Q);return Object.keys(te).map(function(X){return te[X]?X:null}).filter(function(X){return X})}function CEe(e,t){for(var n=e.split("-"),r=NY(n,2),i=r[0],s=r[1],f=t.split("-"),a=NY(f,2),p=a[0],_=a[1],S=i.split("."),E=p.split("."),I=0;I<Math.max(S.length,E.length);I++){var z=S[I]||"0",F=E[I]||"0",U=parseInt(z,10),k=parseInt(F,10);if(U!==k)return U>k}for(var V=0;V<Math.max(S.length,E.length);V++){var K=S[V]||"0",J=E[V]||"0";if(K!==J&&K.length!==J.length)return K.length<J.length}return!(s&&!_)}function MEe(e){return e=e-0,e===e}function Vse(e){return MEe(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,n){return n?n.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var DEe=["style"];function IEe(e){return e.charAt(0).toUpperCase()+e.slice(1)}function PEe(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,n){var r=n.indexOf(":"),i=Vse(n.slice(0,r)),s=n.slice(r+1).trim();return i.startsWith("webkit")?t[IEe(i)]=s:t[i]=s,t},{})}function qse(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(p){return qse(e,p)}),i=Object.keys(t.attributes||{}).reduce(function(p,_){var S=t.attributes[_];switch(_){case"class":p.attrs.className=S,delete t.attributes.class;break;case"style":p.attrs.style=PEe(S);break;default:_.indexOf("aria-")===0||_.indexOf("data-")===0?p.attrs[_.toLowerCase()]=S:p.attrs[Vse(_)]=S}return p},{attrs:{}}),s=n.style,f=s===void 0?{}:s,a=xEe(n,DEe);return i.attrs.style=Fm(Fm({},i.attrs.style),f),e.apply(void 0,[t.tag,Fm(Fm({},i.attrs),a)].concat(aj(r)))}var Hse=!1;try{Hse=!0}catch{}function REe(){if(!Hse&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function BY(e){if(e&&ND(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(rj.icon)return rj.icon(e);if(e===null)return null;if(e&&ND(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function E3(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Pv({},e,t):{}}var jY={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,rotateBy:!1,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1,widthAuto:!1},dx=Je.forwardRef(function(e,t){var n=Fm(Fm({},jY),e),r=n.icon,i=n.mask,s=n.symbol,f=n.className,a=n.title,p=n.titleId,_=n.maskId,S=BY(r),E=E3("classes",[].concat(aj(OEe(n)),aj((f||"").split(" ")))),I=E3("transform",typeof n.transform=="string"?rj.transform(n.transform):n.transform),z=E3("mask",BY(i)),F=dEe(S,Fm(Fm(Fm(Fm({},E),I),z),{},{symbol:s,title:a,titleId:p,maskId:_}));if(!F)return REe("Could not find icon",S),null;var U=F.abstract,k={ref:t};return Object.keys(n).forEach(function(V){jY.hasOwnProperty(V)||(k[V]=n[V])}),kEe(U[0],k)});dx.displayName="FontAwesomeIcon";dx.propTypes={beat:Bn.bool,border:Bn.bool,beatFade:Bn.bool,bounce:Bn.bool,className:Bn.string,fade:Bn.bool,flash:Bn.bool,mask:Bn.oneOfType([Bn.object,Bn.array,Bn.string]),maskId:Bn.string,fixedWidth:Bn.bool,inverse:Bn.bool,flip:Bn.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Bn.oneOfType([Bn.object,Bn.array,Bn.string]),listItem:Bn.bool,pull:Bn.oneOf(["right","left"]),pulse:Bn.bool,rotation:Bn.oneOf([0,90,180,270]),rotateBy:Bn.bool,shake:Bn.bool,size:Bn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Bn.bool,spinPulse:Bn.bool,spinReverse:Bn.bool,symbol:Bn.oneOfType([Bn.bool,Bn.string]),title:Bn.string,titleId:Bn.string,transform:Bn.oneOfType([Bn.string,Bn.object]),swapOpacity:Bn.bool,widthAuto:Bn.bool};var kEe=qse.bind(null,Je.createElement);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const LEe={prefix:"fas",iconName:"calendar-days",icon:[448,512,["calendar-alt"],"f073","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm64 80l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm128 0l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM64 400l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zm112 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16z"]},zEe=LEe,FEe={prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"]},NEe={prefix:"fas",iconName:"cloud-rain",icon:[512,512,[127783,9926],"f73d","M96 320c-53 0-96-43-96-96c0-42.5 27.6-78.6 65.9-91.2C64.7 126.1 64 119.1 64 112C64 50.1 114.1 0 176 0c43.1 0 80.5 24.3 99.2 60c14.7-17.1 36.5-28 60.8-28c44.2 0 80 35.8 80 80c0 5.5-.6 10.8-1.6 16c.5 0 1.1 0 1.6 0c53 0 96 43 96 96s-43 96-96 96L96 320zm-6.8 52c1.3-2.5 3.9-4 6.8-4s5.4 1.5 6.8 4l35.1 64.6c4.1 7.5 6.2 15.8 6.2 24.3l0 3c0 26.5-21.5 48-48 48s-48-21.5-48-48l0-3c0-8.5 2.1-16.9 6.2-24.3L89.2 372zm160 0c1.3-2.5 3.9-4 6.8-4s5.4 1.5 6.8 4l35.1 64.6c4.1 7.5 6.2 15.8 6.2 24.3l0 3c0 26.5-21.5 48-48 48s-48-21.5-48-48l0-3c0-8.5 2.1-16.9 6.2-24.3L249.2 372zm124.9 64.6L409.2 372c1.3-2.5 3.9-4 6.8-4s5.4 1.5 6.8 4l35.1 64.6c4.1 7.5 6.2 15.8 6.2 24.3l0 3c0 26.5-21.5 48-48 48s-48-21.5-48-48l0-3c0-8.5 2.1-16.9 6.2-24.3z"]},BEe={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},jEe={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},UEe=jEe;function $Ee(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const VEe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,qEe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,HEe={};function UY(e,t){return(HEe.jsx?qEe:VEe).test(e)}const GEe=/[ \t\n\f\r]/g;function YEe(e){return typeof e=="object"?e.type==="text"?$Y(e.value):!1:$Y(e)}function $Y(e){return e.replace(GEe,"")===""}class ZA{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}ZA.prototype.normal={};ZA.prototype.property={};ZA.prototype.space=void 0;function Gse(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new ZA(n,r,t)}function sj(e){return e.toLowerCase()}class of{constructor(t,n){this.attribute=n,this.property=t}}of.prototype.attribute="";of.prototype.booleanish=!1;of.prototype.boolean=!1;of.prototype.commaOrSpaceSeparated=!1;of.prototype.commaSeparated=!1;of.prototype.defined=!1;of.prototype.mustUseProperty=!1;of.prototype.number=!1;of.prototype.overloadedBoolean=!1;of.prototype.property="";of.prototype.spaceSeparated=!1;of.prototype.space=void 0;let WEe=0;const Ci=Ix(),Ws=Ix(),lj=Ix(),Nn=Ix(),mo=Ix(),Aw=Ix(),$f=Ix();function Ix(){return 2**++WEe}const uj=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ci,booleanish:Ws,commaOrSpaceSeparated:$f,commaSeparated:Aw,number:Nn,overloadedBoolean:lj,spaceSeparated:mo},Symbol.toStringTag,{value:"Module"})),A3=Object.keys(uj);class C$ extends of{constructor(t,n,r,i){let s=-1;if(super(t,n),VY(this,"space",i),typeof r=="number")for(;++s<A3.length;){const f=A3[s];VY(this,A3[s],(r&uj[f])===uj[f])}}}C$.prototype.defined=!0;function VY(e,t,n){n&&(e[t]=n)}function $S(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new C$(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[sj(r)]=r,n[sj(s.attribute)]=r}return new ZA(t,n,e.space)}const Yse=$S({properties:{ariaActiveDescendant:null,ariaAtomic:Ws,ariaAutoComplete:null,ariaBusy:Ws,ariaChecked:Ws,ariaColCount:Nn,ariaColIndex:Nn,ariaColSpan:Nn,ariaControls:mo,ariaCurrent:null,ariaDescribedBy:mo,ariaDetails:null,ariaDisabled:Ws,ariaDropEffect:mo,ariaErrorMessage:null,ariaExpanded:Ws,ariaFlowTo:mo,ariaGrabbed:Ws,ariaHasPopup:null,ariaHidden:Ws,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:mo,ariaLevel:Nn,ariaLive:null,ariaModal:Ws,ariaMultiLine:Ws,ariaMultiSelectable:Ws,ariaOrientation:null,ariaOwns:mo,ariaPlaceholder:null,ariaPosInSet:Nn,ariaPressed:Ws,ariaReadOnly:Ws,ariaRelevant:null,ariaRequired:Ws,ariaRoleDescription:mo,ariaRowCount:Nn,ariaRowIndex:Nn,ariaRowSpan:Nn,ariaSelected:Ws,ariaSetSize:Nn,ariaSort:null,ariaValueMax:Nn,ariaValueMin:Nn,ariaValueNow:Nn,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Wse(e,t){return t in e?e[t]:t}function Xse(e,t){return Wse(e,t.toLowerCase())}const XEe=$S({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Aw,acceptCharset:mo,accessKey:mo,action:null,allow:null,allowFullScreen:Ci,allowPaymentRequest:Ci,allowUserMedia:Ci,alt:null,as:null,async:Ci,autoCapitalize:null,autoComplete:mo,autoFocus:Ci,autoPlay:Ci,blocking:mo,capture:null,charSet:null,checked:Ci,cite:null,className:mo,cols:Nn,colSpan:null,content:null,contentEditable:Ws,controls:Ci,controlsList:mo,coords:Nn|Aw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ci,defer:Ci,dir:null,dirName:null,disabled:Ci,download:lj,draggable:Ws,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ci,formTarget:null,headers:mo,height:Nn,hidden:lj,high:Nn,href:null,hrefLang:null,htmlFor:mo,httpEquiv:mo,id:null,imageSizes:null,imageSrcSet:null,inert:Ci,inputMode:null,integrity:null,is:null,isMap:Ci,itemId:null,itemProp:mo,itemRef:mo,itemScope:Ci,itemType:mo,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ci,low:Nn,manifest:null,max:null,maxLength:Nn,media:null,method:null,min:null,minLength:Nn,multiple:Ci,muted:Ci,name:null,nonce:null,noModule:Ci,noValidate:Ci,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ci,optimum:Nn,pattern:null,ping:mo,placeholder:null,playsInline:Ci,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ci,referrerPolicy:null,rel:mo,required:Ci,reversed:Ci,rows:Nn,rowSpan:Nn,sandbox:mo,scope:null,scoped:Ci,seamless:Ci,selected:Ci,shadowRootClonable:Ci,shadowRootDelegatesFocus:Ci,shadowRootMode:null,shape:null,size:Nn,sizes:null,slot:null,span:Nn,spellCheck:Ws,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Nn,step:null,style:null,tabIndex:Nn,target:null,title:null,translate:null,type:null,typeMustMatch:Ci,useMap:null,value:Ws,width:Nn,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:mo,axis:null,background:null,bgColor:null,border:Nn,borderColor:null,bottomMargin:Nn,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ci,declare:Ci,event:null,face:null,frame:null,frameBorder:null,hSpace:Nn,leftMargin:Nn,link:null,longDesc:null,lowSrc:null,marginHeight:Nn,marginWidth:Nn,noResize:Ci,noHref:Ci,noShade:Ci,noWrap:Ci,object:null,profile:null,prompt:null,rev:null,rightMargin:Nn,rules:null,scheme:null,scrolling:Ws,standby:null,summary:null,text:null,topMargin:Nn,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Nn,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ci,disableRemotePlayback:Ci,prefix:null,property:null,results:Nn,security:null,unselectable:null},space:"html",transform:Xse}),ZEe=$S({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:$f,accentHeight:Nn,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Nn,amplitude:Nn,arabicForm:null,ascent:Nn,attributeName:null,attributeType:null,azimuth:Nn,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Nn,by:null,calcMode:null,capHeight:Nn,className:mo,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Nn,diffuseConstant:Nn,direction:null,display:null,dur:null,divisor:Nn,dominantBaseline:null,download:Ci,dx:null,dy:null,edgeMode:null,editable:null,elevation:Nn,enableBackground:null,end:null,event:null,exponent:Nn,externalResourcesRequired:null,fill:null,fillOpacity:Nn,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Aw,g2:Aw,glyphName:Aw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Nn,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Nn,horizOriginX:Nn,horizOriginY:Nn,id:null,ideographic:Nn,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Nn,k:Nn,k1:Nn,k2:Nn,k3:Nn,k4:Nn,kernelMatrix:$f,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Nn,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Nn,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Nn,overlineThickness:Nn,paintOrder:null,panose1:null,path:null,pathLength:Nn,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:mo,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Nn,pointsAtY:Nn,pointsAtZ:Nn,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:$f,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:$f,rev:$f,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:$f,requiredFeatures:$f,requiredFonts:$f,requiredFormats:$f,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Nn,specularExponent:Nn,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Nn,strikethroughThickness:Nn,string:null,stroke:null,strokeDashArray:$f,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Nn,strokeOpacity:Nn,strokeWidth:null,style:null,surfaceScale:Nn,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:$f,tabIndex:Nn,tableValues:null,target:null,targetX:Nn,targetY:Nn,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:$f,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Nn,underlineThickness:Nn,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Nn,values:null,vAlphabetic:Nn,vMathematical:Nn,vectorEffect:null,vHanging:Nn,vIdeographic:Nn,version:null,vertAdvY:Nn,vertOriginX:Nn,vertOriginY:Nn,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Nn,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Wse}),Zse=$S({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Kse=$S({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Xse}),Qse=$S({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),KEe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},QEe=/[A-Z]/g,qY=/-[a-z]/g,JEe=/^data[-\w.:]+$/i;function e2e(e,t){const n=sj(t);let r=t,i=of;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&JEe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(qY,n2e);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!qY.test(s)){let f=s.replace(QEe,t2e);f.charAt(0)!=="-"&&(f="-"+f),t="data"+f}}i=C$}return new i(r,t)}function t2e(e){return"-"+e.toLowerCase()}function n2e(e){return e.charAt(1).toUpperCase()}const r2e=Gse([Yse,XEe,Zse,Kse,Qse],"html"),M$=Gse([Yse,ZEe,Zse,Kse,Qse],"svg");function i2e(e){return e.join(" ").trim()}var Q1={},O3,HY;function a2e(){if(HY)return O3;HY=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,f=/^[;\s]*/,a=/^\s+|\s+$/g,p=`
`,_="/",S="*",E="",I="comment",z="declaration";function F(k,V){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];V=V||{};var K=1,J=1;function ie(He){var Be=He.match(t);Be&&(K+=Be.length);var Ee=He.lastIndexOf(p);J=~Ee?He.length-Ee:J+He.length}function Q(){var He={line:K,column:J};return function(Be){return Be.position=new W(He),ae(),Be}}function W(He){this.start=He,this.end={line:K,column:J},this.source=V.source}W.prototype.content=k;function te(He){var Be=new Error(V.source+":"+K+":"+J+": "+He);if(Be.reason=He,Be.filename=V.source,Be.line=K,Be.column=J,Be.source=k,!V.silent)throw Be}function X(He){var Be=He.exec(k);if(Be){var Ee=Be[0];return ie(Ee),k=k.slice(Ee.length),Be}}function ae(){X(n)}function le(He){var Be;for(He=He||[];Be=ge();)Be!==!1&&He.push(Be);return He}function ge(){var He=Q();if(!(_!=k.charAt(0)||S!=k.charAt(1))){for(var Be=2;E!=k.charAt(Be)&&(S!=k.charAt(Be)||_!=k.charAt(Be+1));)++Be;if(Be+=2,E===k.charAt(Be-1))return te("End of comment missing");var Ee=k.slice(2,Be-2);return J+=2,ie(Ee),k=k.slice(Be),J+=2,He({type:I,comment:Ee})}}function ye(){var He=Q(),Be=X(r);if(Be){if(ge(),!X(i))return te("property missing ':'");var Ee=X(s),Ne=He({type:z,property:U(Be[0].replace(e,E)),value:Ee?U(Ee[0].replace(e,E)):E});return X(f),Ne}}function De(){var He=[];le(He);for(var Be;Be=ye();)Be!==!1&&(He.push(Be),le(He));return He}return ae(),De()}function U(k){return k?k.replace(a,E):E}return O3=F,O3}var GY;function o2e(){if(GY)return Q1;GY=1;var e=Q1&&Q1.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.default=n;const t=e(a2e());function n(r,i){let s=null;if(!r||typeof r!="string")return s;const f=(0,t.default)(r),a=typeof i=="function";return f.forEach(p=>{if(p.type!=="declaration")return;const{property:_,value:S}=p;a?i(_,S,p):S&&(s=s||{},s[_]=S)}),s}return Q1}var AE={},YY;function s2e(){if(YY)return AE;YY=1,Object.defineProperty(AE,"__esModule",{value:!0}),AE.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(_){return!_||n.test(_)||e.test(_)},f=function(_,S){return S.toUpperCase()},a=function(_,S){return"".concat(S,"-")},p=function(_,S){return S===void 0&&(S={}),s(_)?_:(_=_.toLowerCase(),S.reactCompat?_=_.replace(i,a):_=_.replace(r,a),_.replace(t,f))};return AE.camelCase=p,AE}var OE,WY;function l2e(){if(WY)return OE;WY=1;var e=OE&&OE.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(o2e()),n=s2e();function r(i,s){var f={};return!i||typeof i!="string"||(0,t.default)(i,function(a,p){a&&p&&(f[(0,n.camelCase)(a,s)]=p)}),f}return r.default=r,OE=r,OE}var u2e=l2e();const c2e=ga(u2e),Jse=ele("end"),D$=ele("start");function ele(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function f2e(e){const t=D$(e),n=Jse(e);if(t&&n)return{start:t,end:n}}function m2(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?XY(e.position):"start"in e||"end"in e?XY(e):"line"in e||"column"in e?cj(e):""}function cj(e){return ZY(e&&e.line)+":"+ZY(e&&e.column)}function XY(e){return cj(e&&e.start)+"-"+cj(e&&e.end)}function ZY(e){return e&&typeof e=="number"?e:1}class Lu extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},f=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(f=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const p=r.indexOf(":");p===-1?s.ruleId=r:(s.source=r.slice(0,p),s.ruleId=r.slice(p+1))}if(!s.place&&s.ancestors&&s.ancestors){const p=s.ancestors[s.ancestors.length-1];p&&(s.place=p.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=m2(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=f&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Lu.prototype.file="";Lu.prototype.name="";Lu.prototype.reason="";Lu.prototype.message="";Lu.prototype.stack="";Lu.prototype.column=void 0;Lu.prototype.line=void 0;Lu.prototype.ancestors=void 0;Lu.prototype.cause=void 0;Lu.prototype.fatal=void 0;Lu.prototype.place=void 0;Lu.prototype.ruleId=void 0;Lu.prototype.source=void 0;const I$={}.hasOwnProperty,h2e=new Map,d2e=/[A-Z]/g,p2e=new Set(["table","tbody","thead","tfoot","tr"]),m2e=new Set(["td","th"]),tle="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function g2e(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=T2e(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=S2e(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?M$:r2e,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=nle(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function nle(e,t,n){if(t.type==="element")return y2e(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return _2e(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return b2e(e,t,n);if(t.type==="mdxjsEsm")return v2e(e,t);if(t.type==="root")return x2e(e,t,n);if(t.type==="text")return w2e(e,t)}function y2e(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=M$,e.schema=i),e.ancestors.push(t);const s=ile(e,t.tagName,!1),f=E2e(e,t);let a=R$(e,t);return p2e.has(t.tagName)&&(a=a.filter(function(p){return typeof p=="string"?!YEe(p):!0})),rle(e,f,s,t),P$(f,a),e.ancestors.pop(),e.schema=r,e.create(t,s,f,n)}function _2e(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}k2(e,t.position)}function v2e(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);k2(e,t.position)}function b2e(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=M$,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:ile(e,t.name,!0),f=A2e(e,t),a=R$(e,t);return rle(e,f,s,t),P$(f,a),e.ancestors.pop(),e.schema=r,e.create(t,s,f,n)}function x2e(e,t,n){const r={};return P$(r,R$(e,t)),e.create(t,e.Fragment,r,n)}function w2e(e,t){return t.value}function rle(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function P$(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function S2e(e,t,n){return r;function r(i,s,f,a){const _=Array.isArray(f.children)?n:t;return a?_(s,f,a):_(s,f)}}function T2e(e,t){return n;function n(r,i,s,f){const a=Array.isArray(s.children),p=D$(r);return t(i,s,f,a,{columnNumber:p?p.column-1:void 0,fileName:e,lineNumber:p?p.line:void 0},void 0)}}function E2e(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&I$.call(t.properties,i)){const s=O2e(e,i,t.properties[i]);if(s){const[f,a]=s;e.tableCellAlignToStyle&&f==="align"&&typeof a=="string"&&m2e.has(t.tagName)?r=a:n[f]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function A2e(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const f=s.expression;f.type;const a=f.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else k2(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else k2(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function R$(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:h2e;for(;++r<t.children.length;){const s=t.children[r];let f;if(e.passKeys){const p=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(p){const _=i.get(p)||0;f=p+"-"+_,i.set(p,_+1)}}const a=nle(e,s,f);a!==void 0&&n.push(a)}return n}function O2e(e,t,n){const r=e2e(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?$Ee(n):i2e(n)),r.property==="style"){let i=typeof n=="object"?n:C2e(e,String(n));return e.stylePropertyNameCase==="css"&&(i=M2e(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?KEe[r.property]||r.property:r.attribute,n]}}function C2e(e,t){try{return c2e(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new Lu("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=tle+"#cannot-parse-style-attribute",i}}function ile(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,f;for(;++s<i.length;){const a=UY(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};f=f?{type:"MemberExpression",object:f,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=f}else r=UY(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return I$.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);k2(e)}function k2(e,t){const n=new Lu("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=tle+"#cannot-handle-mdx-estrees-without-createevaluater",n}function M2e(e){const t={};let n;for(n in e)I$.call(e,n)&&(t[D2e(n)]=e[n]);return t}function D2e(e){let t=e.replace(d2e,I2e);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function I2e(e){return"-"+e.toLowerCase()}const C3={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},P2e={};function k$(e,t){const n=P2e,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ale(e,r,i)}function ale(e,t,n){if(R2e(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return KY(e.children,t,n)}return Array.isArray(e)?KY(e,t,n):""}function KY(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=ale(e[i],t,n);return r.join("")}function R2e(e){return!!(e&&typeof e=="object")}const QY=document.createElement("i");function L$(e){const t="&"+e+";";QY.innerHTML=t;const n=QY.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Qf(e,t,n,r){const i=e.length;let s=0,f;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)f=Array.from(r),f.unshift(t,n),e.splice(...f);else for(n&&e.splice(t,n);s<r.length;)f=r.slice(s,s+1e4),f.unshift(t,0),e.splice(...f),s+=1e4,t+=1e4}function qh(e,t){return e.length>0?(Qf(e,e.length,0,t),e):t}const JY={}.hasOwnProperty;function ole(e){const t={};let n=-1;for(;++n<e.length;)k2e(t,e[n]);return t}function k2e(e,t){let n;for(n in t){const i=(JY.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let f;if(s)for(f in s){JY.call(i,f)||(i[f]=[]);const a=s[f];L2e(i[f],Array.isArray(a)?a:a?[a]:[])}}}function L2e(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Qf(e,0,0,r)}function sle(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function _p(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const hc=o0(/[A-Za-z]/),Ou=o0(/[\dA-Za-z]/),z2e=o0(/[#-'*+\--9=?A-Z^-~]/);function BD(e){return e!==null&&(e<32||e===127)}const fj=o0(/\d/),F2e=o0(/[\dA-Fa-f]/),N2e=o0(/[!-/:-@[-`{-~]/);function Wr(e){return e!==null&&e<-2}function ao(e){return e!==null&&(e<0||e===32)}function Hi(e){return e===-2||e===-1||e===32}const VP=o0(new RegExp("\\p{P}|\\p{S}","u")),px=o0(/\s/);function o0(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function VS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let f="";if(s===37&&Ou(e.charCodeAt(n+1))&&Ou(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(f=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(f=String.fromCharCode(s,a),i=1):f=""}else f=String.fromCharCode(s);f&&(t.push(e.slice(r,n),encodeURIComponent(f)),r=n+i+1,f=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ma(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return f;function f(p){return Hi(p)?(e.enter(n),a(p)):t(p)}function a(p){return Hi(p)&&s++<i?(e.consume(p),a):(e.exit(n),t(p))}}const B2e={tokenize:j2e};function j2e(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ma(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const p=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=p),n=p,f(a)}function f(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Wr(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),f)}}const U2e={tokenize:$2e},eW={tokenize:V2e};function $2e(e){const t=this,n=[];let r=0,i,s,f;return a;function a(J){if(r<n.length){const ie=n[r];return t.containerState=ie[1],e.attempt(ie[0].continuation,p,_)(J)}return _(J)}function p(J){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&K();const ie=t.events.length;let Q=ie,W;for(;Q--;)if(t.events[Q][0]==="exit"&&t.events[Q][1].type==="chunkFlow"){W=t.events[Q][1].end;break}V(r);let te=ie;for(;te<t.events.length;)t.events[te][1].end={...W},te++;return Qf(t.events,Q+1,0,t.events.slice(ie)),t.events.length=te,_(J)}return a(J)}function _(J){if(r===n.length){if(!i)return I(J);if(i.currentConstruct&&i.currentConstruct.concrete)return F(J);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(eW,S,E)(J)}function S(J){return i&&K(),V(r),I(J)}function E(J){return t.parser.lazy[t.now().line]=r!==n.length,f=t.now().offset,F(J)}function I(J){return t.containerState={},e.attempt(eW,z,F)(J)}function z(J){return r++,n.push([t.currentConstruct,t.containerState]),I(J)}function F(J){if(J===null){i&&K(),V(0),e.consume(J);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),U(J)}function U(J){if(J===null){k(e.exit("chunkFlow"),!0),V(0),e.consume(J);return}return Wr(J)?(e.consume(J),k(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(J),U)}function k(J,ie){const Q=t.sliceStream(J);if(ie&&Q.push(null),J.previous=s,s&&(s.next=J),s=J,i.defineSkip(J.start),i.write(Q),t.parser.lazy[J.start.line]){let W=i.events.length;for(;W--;)if(i.events[W][1].start.offset<f&&(!i.events[W][1].end||i.events[W][1].end.offset>f))return;const te=t.events.length;let X=te,ae,le;for(;X--;)if(t.events[X][0]==="exit"&&t.events[X][1].type==="chunkFlow"){if(ae){le=t.events[X][1].end;break}ae=!0}for(V(r),W=te;W<t.events.length;)t.events[W][1].end={...le},W++;Qf(t.events,X+1,0,t.events.slice(te)),t.events.length=W}}function V(J){let ie=n.length;for(;ie-- >J;){const Q=n[ie];t.containerState=Q[1],Q[0].exit.call(t,e)}n.length=J}function K(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function V2e(e,t,n){return ma(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Hw(e){if(e===null||ao(e)||px(e))return 1;if(VP(e))return 2}function qP(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const hj={name:"attention",resolveAll:q2e,tokenize:H2e};function q2e(e,t){let n=-1,r,i,s,f,a,p,_,S;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;p=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const E={...e[r][1].end},I={...e[n][1].start};tW(E,-p),tW(I,p),f={type:p>1?"strongSequence":"emphasisSequence",start:E,end:{...e[r][1].end}},a={type:p>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:I},s={type:p>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:p>1?"strong":"emphasis",start:{...f.start},end:{...a.end}},e[r][1].end={...f.start},e[n][1].start={...a.end},_=[],e[r][1].end.offset-e[r][1].start.offset&&(_=qh(_,[["enter",e[r][1],t],["exit",e[r][1],t]])),_=qh(_,[["enter",i,t],["enter",f,t],["exit",f,t],["enter",s,t]]),_=qh(_,qP(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),_=qh(_,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(S=2,_=qh(_,[["enter",e[n][1],t],["exit",e[n][1],t]])):S=0,Qf(e,r-1,n-r+3,_),n=r+_.length-S-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function H2e(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Hw(r);let s;return f;function f(p){return s=p,e.enter("attentionSequence"),a(p)}function a(p){if(p===s)return e.consume(p),a;const _=e.exit("attentionSequence"),S=Hw(p),E=!S||S===2&&i||n.includes(p),I=!i||i===2&&S||n.includes(r);return _._open=!!(s===42?E:E&&(i||!I)),_._close=!!(s===42?I:I&&(S||!E)),t(p)}}function tW(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const G2e={name:"autolink",tokenize:Y2e};function Y2e(e,t,n){let r=0;return i;function i(z){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(z),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(z){return hc(z)?(e.consume(z),f):z===64?n(z):_(z)}function f(z){return z===43||z===45||z===46||Ou(z)?(r=1,a(z)):_(z)}function a(z){return z===58?(e.consume(z),r=0,p):(z===43||z===45||z===46||Ou(z))&&r++<32?(e.consume(z),a):(r=0,_(z))}function p(z){return z===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(z),e.exit("autolinkMarker"),e.exit("autolink"),t):z===null||z===32||z===60||BD(z)?n(z):(e.consume(z),p)}function _(z){return z===64?(e.consume(z),S):z2e(z)?(e.consume(z),_):n(z)}function S(z){return Ou(z)?E(z):n(z)}function E(z){return z===46?(e.consume(z),r=0,S):z===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(z),e.exit("autolinkMarker"),e.exit("autolink"),t):I(z)}function I(z){if((z===45||Ou(z))&&r++<63){const F=z===45?I:E;return e.consume(z),F}return n(z)}}const KA={partial:!0,tokenize:W2e};function W2e(e,t,n){return r;function r(s){return Hi(s)?ma(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Wr(s)?t(s):n(s)}}const lle={continuation:{tokenize:Z2e},exit:K2e,name:"blockQuote",tokenize:X2e};function X2e(e,t,n){const r=this;return i;function i(f){if(f===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(f),e.exit("blockQuoteMarker"),s}return n(f)}function s(f){return Hi(f)?(e.enter("blockQuotePrefixWhitespace"),e.consume(f),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(f))}}function Z2e(e,t,n){const r=this;return i;function i(f){return Hi(f)?ma(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(f):s(f)}function s(f){return e.attempt(lle,t,n)(f)}}function K2e(e){e.exit("blockQuote")}const ule={name:"characterEscape",tokenize:Q2e};function Q2e(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return N2e(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const cle={name:"characterReference",tokenize:J2e};function J2e(e,t,n){const r=this;let i=0,s,f;return a;function a(E){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(E),e.exit("characterReferenceMarker"),p}function p(E){return E===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(E),e.exit("characterReferenceMarkerNumeric"),_):(e.enter("characterReferenceValue"),s=31,f=Ou,S(E))}function _(E){return E===88||E===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(E),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,f=F2e,S):(e.enter("characterReferenceValue"),s=7,f=fj,S(E))}function S(E){if(E===59&&i){const I=e.exit("characterReferenceValue");return f===Ou&&!L$(r.sliceSerialize(I))?n(E):(e.enter("characterReferenceMarker"),e.consume(E),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return f(E)&&i++<s?(e.consume(E),S):n(E)}}const nW={partial:!0,tokenize:tAe},rW={concrete:!0,name:"codeFenced",tokenize:eAe};function eAe(e,t,n){const r=this,i={partial:!0,tokenize:Q};let s=0,f=0,a;return p;function p(W){return _(W)}function _(W){const te=r.events[r.events.length-1];return s=te&&te[1].type==="linePrefix"?te[2].sliceSerialize(te[1],!0).length:0,a=W,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),S(W)}function S(W){return W===a?(f++,e.consume(W),S):f<3?n(W):(e.exit("codeFencedFenceSequence"),Hi(W)?ma(e,E,"whitespace")(W):E(W))}function E(W){return W===null||Wr(W)?(e.exit("codeFencedFence"),r.interrupt?t(W):e.check(nW,U,ie)(W)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),I(W))}function I(W){return W===null||Wr(W)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),E(W)):Hi(W)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ma(e,z,"whitespace")(W)):W===96&&W===a?n(W):(e.consume(W),I)}function z(W){return W===null||Wr(W)?E(W):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),F(W))}function F(W){return W===null||Wr(W)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),E(W)):W===96&&W===a?n(W):(e.consume(W),F)}function U(W){return e.attempt(i,ie,k)(W)}function k(W){return e.enter("lineEnding"),e.consume(W),e.exit("lineEnding"),V}function V(W){return s>0&&Hi(W)?ma(e,K,"linePrefix",s+1)(W):K(W)}function K(W){return W===null||Wr(W)?e.check(nW,U,ie)(W):(e.enter("codeFlowValue"),J(W))}function J(W){return W===null||Wr(W)?(e.exit("codeFlowValue"),K(W)):(e.consume(W),J)}function ie(W){return e.exit("codeFenced"),t(W)}function Q(W,te,X){let ae=0;return le;function le(Be){return W.enter("lineEnding"),W.consume(Be),W.exit("lineEnding"),ge}function ge(Be){return W.enter("codeFencedFence"),Hi(Be)?ma(W,ye,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Be):ye(Be)}function ye(Be){return Be===a?(W.enter("codeFencedFenceSequence"),De(Be)):X(Be)}function De(Be){return Be===a?(ae++,W.consume(Be),De):ae>=f?(W.exit("codeFencedFenceSequence"),Hi(Be)?ma(W,He,"whitespace")(Be):He(Be)):X(Be)}function He(Be){return Be===null||Wr(Be)?(W.exit("codeFencedFence"),te(Be)):X(Be)}}}function tAe(e,t,n){const r=this;return i;function i(f){return f===null?n(f):(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),s)}function s(f){return r.parser.lazy[r.now().line]?n(f):t(f)}}const M3={name:"codeIndented",tokenize:rAe},nAe={partial:!0,tokenize:iAe};function rAe(e,t,n){const r=this;return i;function i(_){return e.enter("codeIndented"),ma(e,s,"linePrefix",5)(_)}function s(_){const S=r.events[r.events.length-1];return S&&S[1].type==="linePrefix"&&S[2].sliceSerialize(S[1],!0).length>=4?f(_):n(_)}function f(_){return _===null?p(_):Wr(_)?e.attempt(nAe,f,p)(_):(e.enter("codeFlowValue"),a(_))}function a(_){return _===null||Wr(_)?(e.exit("codeFlowValue"),f(_)):(e.consume(_),a)}function p(_){return e.exit("codeIndented"),t(_)}}function iAe(e,t,n){const r=this;return i;function i(f){return r.parser.lazy[r.now().line]?n(f):Wr(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),i):ma(e,s,"linePrefix",5)(f)}function s(f){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(f):Wr(f)?i(f):n(f)}}const aAe={name:"codeText",previous:sAe,resolve:oAe,tokenize:lAe};function oAe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function sAe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function lAe(e,t,n){let r=0,i,s;return f;function f(E){return e.enter("codeText"),e.enter("codeTextSequence"),a(E)}function a(E){return E===96?(e.consume(E),r++,a):(e.exit("codeTextSequence"),p(E))}function p(E){return E===null?n(E):E===32?(e.enter("space"),e.consume(E),e.exit("space"),p):E===96?(s=e.enter("codeTextSequence"),i=0,S(E)):Wr(E)?(e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),p):(e.enter("codeTextData"),_(E))}function _(E){return E===null||E===32||E===96||Wr(E)?(e.exit("codeTextData"),p(E)):(e.consume(E),_)}function S(E){return E===96?(e.consume(E),i++,S):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(E)):(s.type="codeTextData",_(E))}}class uAe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&CE(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),CE(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),CE(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);CE(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);CE(this.left,n.reverse())}}}function CE(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function fle(e){const t={};let n=-1,r,i,s,f,a,p,_;const S=new uAe(e);for(;++n<S.length;){for(;n in t;)n=t[n];if(r=S.get(n),n&&r[1].type==="chunkFlow"&&S.get(n-1)[1].type==="listItemPrefix"&&(p=r[1]._tokenizer.events,s=0,s<p.length&&p[s][1].type==="lineEndingBlank"&&(s+=2),s<p.length&&p[s][1].type==="content"))for(;++s<p.length&&p[s][1].type!=="content";)p[s][1].type==="chunkText"&&(p[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,cAe(S,n)),n=t[n],_=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(f=S.get(s),f[1].type==="lineEnding"||f[1].type==="lineEndingBlank")f[0]==="enter"&&(i&&(S.get(i)[1].type="lineEndingBlank"),f[1].type="lineEnding",i=s);else if(!(f[1].type==="linePrefix"||f[1].type==="listItemIndent"))break;i&&(r[1].end={...S.get(i)[1].start},a=S.slice(i,n),a.unshift(r),S.splice(i,n-i+1,a))}}return Qf(e,0,Number.POSITIVE_INFINITY,S.slice(0)),!_}function cAe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let f=n._tokenizer;f||(f=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(f._contentTypeTextTrailing=!0));const a=f.events,p=[],_={};let S,E,I=-1,z=n,F=0,U=0;const k=[U];for(;z;){for(;e.get(++i)[1]!==z;);s.push(i),z._tokenizer||(S=r.sliceStream(z),z.next||S.push(null),E&&f.defineSkip(z.start),z._isInFirstContentOfListItem&&(f._gfmTasklistFirstContentOfListItem=!0),f.write(S),z._isInFirstContentOfListItem&&(f._gfmTasklistFirstContentOfListItem=void 0)),E=z,z=z.next}for(z=n;++I<a.length;)a[I][0]==="exit"&&a[I-1][0]==="enter"&&a[I][1].type===a[I-1][1].type&&a[I][1].start.line!==a[I][1].end.line&&(U=I+1,k.push(U),z._tokenizer=void 0,z.previous=void 0,z=z.next);for(f.events=[],z?(z._tokenizer=void 0,z.previous=void 0):k.pop(),I=k.length;I--;){const V=a.slice(k[I],k[I+1]),K=s.pop();p.push([K,K+V.length-1]),e.splice(K,2,V)}for(p.reverse(),I=-1;++I<p.length;)_[F+p[I][0]]=F+p[I][1],F+=p[I][1]-p[I][0]-1;return _}const fAe={resolve:dAe,tokenize:pAe},hAe={partial:!0,tokenize:mAe};function dAe(e){return fle(e),e}function pAe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Wr(a)?e.check(hAe,f,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function f(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function mAe(e,t,n){const r=this;return i;function i(f){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),ma(e,s,"linePrefix")}function s(f){if(f===null||Wr(f))return n(f);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(f):e.interrupt(r.parser.constructs.flow,n,t)(f)}}function hle(e,t,n,r,i,s,f,a,p){const _=p||Number.POSITIVE_INFINITY;let S=0;return E;function E(V){return V===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(V),e.exit(s),I):V===null||V===32||V===41||BD(V)?n(V):(e.enter(r),e.enter(f),e.enter(a),e.enter("chunkString",{contentType:"string"}),U(V))}function I(V){return V===62?(e.enter(s),e.consume(V),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),z(V))}function z(V){return V===62?(e.exit("chunkString"),e.exit(a),I(V)):V===null||V===60||Wr(V)?n(V):(e.consume(V),V===92?F:z)}function F(V){return V===60||V===62||V===92?(e.consume(V),z):z(V)}function U(V){return!S&&(V===null||V===41||ao(V))?(e.exit("chunkString"),e.exit(a),e.exit(f),e.exit(r),t(V)):S<_&&V===40?(e.consume(V),S++,U):V===41?(e.consume(V),S--,U):V===null||V===32||V===40||BD(V)?n(V):(e.consume(V),V===92?k:U)}function k(V){return V===40||V===41||V===92?(e.consume(V),U):U(V)}}function dle(e,t,n,r,i,s){const f=this;let a=0,p;return _;function _(z){return e.enter(r),e.enter(i),e.consume(z),e.exit(i),e.enter(s),S}function S(z){return a>999||z===null||z===91||z===93&&!p||z===94&&!a&&"_hiddenFootnoteSupport"in f.parser.constructs?n(z):z===93?(e.exit(s),e.enter(i),e.consume(z),e.exit(i),e.exit(r),t):Wr(z)?(e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),S):(e.enter("chunkString",{contentType:"string"}),E(z))}function E(z){return z===null||z===91||z===93||Wr(z)||a++>999?(e.exit("chunkString"),S(z)):(e.consume(z),p||(p=!Hi(z)),z===92?I:E)}function I(z){return z===91||z===92||z===93?(e.consume(z),a++,E):E(z)}}function ple(e,t,n,r,i,s){let f;return a;function a(I){return I===34||I===39||I===40?(e.enter(r),e.enter(i),e.consume(I),e.exit(i),f=I===40?41:I,p):n(I)}function p(I){return I===f?(e.enter(i),e.consume(I),e.exit(i),e.exit(r),t):(e.enter(s),_(I))}function _(I){return I===f?(e.exit(s),p(f)):I===null?n(I):Wr(I)?(e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),ma(e,_,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),S(I))}function S(I){return I===f||I===null||Wr(I)?(e.exit("chunkString"),_(I)):(e.consume(I),I===92?E:S)}function E(I){return I===f||I===92?(e.consume(I),S):S(I)}}function g2(e,t){let n;return r;function r(i){return Wr(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Hi(i)?ma(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const gAe={name:"definition",tokenize:_Ae},yAe={partial:!0,tokenize:vAe};function _Ae(e,t,n){const r=this;let i;return s;function s(z){return e.enter("definition"),f(z)}function f(z){return dle.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(z)}function a(z){return i=_p(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),z===58?(e.enter("definitionMarker"),e.consume(z),e.exit("definitionMarker"),p):n(z)}function p(z){return ao(z)?g2(e,_)(z):_(z)}function _(z){return hle(e,S,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(z)}function S(z){return e.attempt(yAe,E,E)(z)}function E(z){return Hi(z)?ma(e,I,"whitespace")(z):I(z)}function I(z){return z===null||Wr(z)?(e.exit("definition"),r.parser.defined.push(i),t(z)):n(z)}}function vAe(e,t,n){return r;function r(a){return ao(a)?g2(e,i)(a):n(a)}function i(a){return ple(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Hi(a)?ma(e,f,"whitespace")(a):f(a)}function f(a){return a===null||Wr(a)?t(a):n(a)}}const bAe={name:"hardBreakEscape",tokenize:xAe};function xAe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Wr(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const wAe={name:"headingAtx",resolve:SAe,tokenize:TAe};function SAe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Qf(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function TAe(e,t,n){let r=0;return i;function i(S){return e.enter("atxHeading"),s(S)}function s(S){return e.enter("atxHeadingSequence"),f(S)}function f(S){return S===35&&r++<6?(e.consume(S),f):S===null||ao(S)?(e.exit("atxHeadingSequence"),a(S)):n(S)}function a(S){return S===35?(e.enter("atxHeadingSequence"),p(S)):S===null||Wr(S)?(e.exit("atxHeading"),t(S)):Hi(S)?ma(e,a,"whitespace")(S):(e.enter("atxHeadingText"),_(S))}function p(S){return S===35?(e.consume(S),p):(e.exit("atxHeadingSequence"),a(S))}function _(S){return S===null||S===35||ao(S)?(e.exit("atxHeadingText"),a(S)):(e.consume(S),_)}}const EAe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],iW=["pre","script","style","textarea"],AAe={concrete:!0,name:"htmlFlow",resolveTo:MAe,tokenize:DAe},OAe={partial:!0,tokenize:PAe},CAe={partial:!0,tokenize:IAe};function MAe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function DAe(e,t,n){const r=this;let i,s,f,a,p;return _;function _(Pe){return S(Pe)}function S(Pe){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Pe),E}function E(Pe){return Pe===33?(e.consume(Pe),I):Pe===47?(e.consume(Pe),s=!0,U):Pe===63?(e.consume(Pe),i=3,r.interrupt?t:je):hc(Pe)?(e.consume(Pe),f=String.fromCharCode(Pe),k):n(Pe)}function I(Pe){return Pe===45?(e.consume(Pe),i=2,z):Pe===91?(e.consume(Pe),i=5,a=0,F):hc(Pe)?(e.consume(Pe),i=4,r.interrupt?t:je):n(Pe)}function z(Pe){return Pe===45?(e.consume(Pe),r.interrupt?t:je):n(Pe)}function F(Pe){const jt="CDATA[";return Pe===jt.charCodeAt(a++)?(e.consume(Pe),a===jt.length?r.interrupt?t:ye:F):n(Pe)}function U(Pe){return hc(Pe)?(e.consume(Pe),f=String.fromCharCode(Pe),k):n(Pe)}function k(Pe){if(Pe===null||Pe===47||Pe===62||ao(Pe)){const jt=Pe===47,sn=f.toLowerCase();return!jt&&!s&&iW.includes(sn)?(i=1,r.interrupt?t(Pe):ye(Pe)):EAe.includes(f.toLowerCase())?(i=6,jt?(e.consume(Pe),V):r.interrupt?t(Pe):ye(Pe)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(Pe):s?K(Pe):J(Pe))}return Pe===45||Ou(Pe)?(e.consume(Pe),f+=String.fromCharCode(Pe),k):n(Pe)}function V(Pe){return Pe===62?(e.consume(Pe),r.interrupt?t:ye):n(Pe)}function K(Pe){return Hi(Pe)?(e.consume(Pe),K):le(Pe)}function J(Pe){return Pe===47?(e.consume(Pe),le):Pe===58||Pe===95||hc(Pe)?(e.consume(Pe),ie):Hi(Pe)?(e.consume(Pe),J):le(Pe)}function ie(Pe){return Pe===45||Pe===46||Pe===58||Pe===95||Ou(Pe)?(e.consume(Pe),ie):Q(Pe)}function Q(Pe){return Pe===61?(e.consume(Pe),W):Hi(Pe)?(e.consume(Pe),Q):J(Pe)}function W(Pe){return Pe===null||Pe===60||Pe===61||Pe===62||Pe===96?n(Pe):Pe===34||Pe===39?(e.consume(Pe),p=Pe,te):Hi(Pe)?(e.consume(Pe),W):X(Pe)}function te(Pe){return Pe===p?(e.consume(Pe),p=null,ae):Pe===null||Wr(Pe)?n(Pe):(e.consume(Pe),te)}function X(Pe){return Pe===null||Pe===34||Pe===39||Pe===47||Pe===60||Pe===61||Pe===62||Pe===96||ao(Pe)?Q(Pe):(e.consume(Pe),X)}function ae(Pe){return Pe===47||Pe===62||Hi(Pe)?J(Pe):n(Pe)}function le(Pe){return Pe===62?(e.consume(Pe),ge):n(Pe)}function ge(Pe){return Pe===null||Wr(Pe)?ye(Pe):Hi(Pe)?(e.consume(Pe),ge):n(Pe)}function ye(Pe){return Pe===45&&i===2?(e.consume(Pe),Ee):Pe===60&&i===1?(e.consume(Pe),Ne):Pe===62&&i===4?(e.consume(Pe),Ke):Pe===63&&i===3?(e.consume(Pe),je):Pe===93&&i===5?(e.consume(Pe),yt):Wr(Pe)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(OAe,it,De)(Pe)):Pe===null||Wr(Pe)?(e.exit("htmlFlowData"),De(Pe)):(e.consume(Pe),ye)}function De(Pe){return e.check(CAe,He,it)(Pe)}function He(Pe){return e.enter("lineEnding"),e.consume(Pe),e.exit("lineEnding"),Be}function Be(Pe){return Pe===null||Wr(Pe)?De(Pe):(e.enter("htmlFlowData"),ye(Pe))}function Ee(Pe){return Pe===45?(e.consume(Pe),je):ye(Pe)}function Ne(Pe){return Pe===47?(e.consume(Pe),f="",at):ye(Pe)}function at(Pe){if(Pe===62){const jt=f.toLowerCase();return iW.includes(jt)?(e.consume(Pe),Ke):ye(Pe)}return hc(Pe)&&f.length<8?(e.consume(Pe),f+=String.fromCharCode(Pe),at):ye(Pe)}function yt(Pe){return Pe===93?(e.consume(Pe),je):ye(Pe)}function je(Pe){return Pe===62?(e.consume(Pe),Ke):Pe===45&&i===2?(e.consume(Pe),je):ye(Pe)}function Ke(Pe){return Pe===null||Wr(Pe)?(e.exit("htmlFlowData"),it(Pe)):(e.consume(Pe),Ke)}function it(Pe){return e.exit("htmlFlow"),t(Pe)}}function IAe(e,t,n){const r=this;return i;function i(f){return Wr(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),s):n(f)}function s(f){return r.parser.lazy[r.now().line]?n(f):t(f)}}function PAe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(KA,t,n)}}const RAe={name:"htmlText",tokenize:kAe};function kAe(e,t,n){const r=this;let i,s,f;return a;function a(je){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(je),p}function p(je){return je===33?(e.consume(je),_):je===47?(e.consume(je),Q):je===63?(e.consume(je),J):hc(je)?(e.consume(je),X):n(je)}function _(je){return je===45?(e.consume(je),S):je===91?(e.consume(je),s=0,F):hc(je)?(e.consume(je),K):n(je)}function S(je){return je===45?(e.consume(je),z):n(je)}function E(je){return je===null?n(je):je===45?(e.consume(je),I):Wr(je)?(f=E,Ne(je)):(e.consume(je),E)}function I(je){return je===45?(e.consume(je),z):E(je)}function z(je){return je===62?Ee(je):je===45?I(je):E(je)}function F(je){const Ke="CDATA[";return je===Ke.charCodeAt(s++)?(e.consume(je),s===Ke.length?U:F):n(je)}function U(je){return je===null?n(je):je===93?(e.consume(je),k):Wr(je)?(f=U,Ne(je)):(e.consume(je),U)}function k(je){return je===93?(e.consume(je),V):U(je)}function V(je){return je===62?Ee(je):je===93?(e.consume(je),V):U(je)}function K(je){return je===null||je===62?Ee(je):Wr(je)?(f=K,Ne(je)):(e.consume(je),K)}function J(je){return je===null?n(je):je===63?(e.consume(je),ie):Wr(je)?(f=J,Ne(je)):(e.consume(je),J)}function ie(je){return je===62?Ee(je):J(je)}function Q(je){return hc(je)?(e.consume(je),W):n(je)}function W(je){return je===45||Ou(je)?(e.consume(je),W):te(je)}function te(je){return Wr(je)?(f=te,Ne(je)):Hi(je)?(e.consume(je),te):Ee(je)}function X(je){return je===45||Ou(je)?(e.consume(je),X):je===47||je===62||ao(je)?ae(je):n(je)}function ae(je){return je===47?(e.consume(je),Ee):je===58||je===95||hc(je)?(e.consume(je),le):Wr(je)?(f=ae,Ne(je)):Hi(je)?(e.consume(je),ae):Ee(je)}function le(je){return je===45||je===46||je===58||je===95||Ou(je)?(e.consume(je),le):ge(je)}function ge(je){return je===61?(e.consume(je),ye):Wr(je)?(f=ge,Ne(je)):Hi(je)?(e.consume(je),ge):ae(je)}function ye(je){return je===null||je===60||je===61||je===62||je===96?n(je):je===34||je===39?(e.consume(je),i=je,De):Wr(je)?(f=ye,Ne(je)):Hi(je)?(e.consume(je),ye):(e.consume(je),He)}function De(je){return je===i?(e.consume(je),i=void 0,Be):je===null?n(je):Wr(je)?(f=De,Ne(je)):(e.consume(je),De)}function He(je){return je===null||je===34||je===39||je===60||je===61||je===96?n(je):je===47||je===62||ao(je)?ae(je):(e.consume(je),He)}function Be(je){return je===47||je===62||ao(je)?ae(je):n(je)}function Ee(je){return je===62?(e.consume(je),e.exit("htmlTextData"),e.exit("htmlText"),t):n(je)}function Ne(je){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(je),e.exit("lineEnding"),at}function at(je){return Hi(je)?ma(e,yt,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(je):yt(je)}function yt(je){return e.enter("htmlTextData"),f(je)}}const z$={name:"labelEnd",resolveAll:NAe,resolveTo:BAe,tokenize:jAe},LAe={tokenize:UAe},zAe={tokenize:$Ae},FAe={tokenize:VAe};function NAe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Qf(e,0,e.length,n),e}function BAe(e,t){let n=e.length,r=0,i,s,f,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(f){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(f=n);const p={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},_={type:"label",start:{...e[s][1].start},end:{...e[f][1].end}},S={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[f-2][1].start}};return a=[["enter",p,t],["enter",_,t]],a=qh(a,e.slice(s+1,s+r+3)),a=qh(a,[["enter",S,t]]),a=qh(a,qP(t.parser.constructs.insideSpan.null,e.slice(s+r+4,f-3),t)),a=qh(a,[["exit",S,t],e[f-2],e[f-1],["exit",_,t]]),a=qh(a,e.slice(f+1)),a=qh(a,[["exit",p,t]]),Qf(e,s,e.length,a),e}function jAe(e,t,n){const r=this;let i=r.events.length,s,f;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(I){return s?s._inactive?E(I):(f=r.parser.defined.includes(_p(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(I),e.exit("labelMarker"),e.exit("labelEnd"),p):n(I)}function p(I){return I===40?e.attempt(LAe,S,f?S:E)(I):I===91?e.attempt(zAe,S,f?_:E)(I):f?S(I):E(I)}function _(I){return e.attempt(FAe,S,E)(I)}function S(I){return t(I)}function E(I){return s._balanced=!0,n(I)}}function UAe(e,t,n){return r;function r(E){return e.enter("resource"),e.enter("resourceMarker"),e.consume(E),e.exit("resourceMarker"),i}function i(E){return ao(E)?g2(e,s)(E):s(E)}function s(E){return E===41?S(E):hle(e,f,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(E)}function f(E){return ao(E)?g2(e,p)(E):S(E)}function a(E){return n(E)}function p(E){return E===34||E===39||E===40?ple(e,_,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(E):S(E)}function _(E){return ao(E)?g2(e,S)(E):S(E)}function S(E){return E===41?(e.enter("resourceMarker"),e.consume(E),e.exit("resourceMarker"),e.exit("resource"),t):n(E)}}function $Ae(e,t,n){const r=this;return i;function i(a){return dle.call(r,e,s,f,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(_p(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function f(a){return n(a)}}function VAe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const qAe={name:"labelStartImage",resolveAll:z$.resolveAll,tokenize:HAe};function HAe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),f):n(a)}function f(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const GAe={name:"labelStartLink",resolveAll:z$.resolveAll,tokenize:YAe};function YAe(e,t,n){const r=this;return i;function i(f){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelLink"),s}function s(f){return f===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(f):t(f)}}const D3={name:"lineEnding",tokenize:WAe};function WAe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ma(e,t,"linePrefix")}}const rD={name:"thematicBreak",tokenize:XAe};function XAe(e,t,n){let r=0,i;return s;function s(_){return e.enter("thematicBreak"),f(_)}function f(_){return i=_,a(_)}function a(_){return _===i?(e.enter("thematicBreakSequence"),p(_)):r>=3&&(_===null||Wr(_))?(e.exit("thematicBreak"),t(_)):n(_)}function p(_){return _===i?(e.consume(_),r++,p):(e.exit("thematicBreakSequence"),Hi(_)?ma(e,a,"whitespace")(_):a(_))}}const Wc={continuation:{tokenize:JAe},exit:tOe,name:"list",tokenize:QAe},ZAe={partial:!0,tokenize:nOe},KAe={partial:!0,tokenize:eOe};function QAe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,f=0;return a;function a(z){const F=r.containerState.type||(z===42||z===43||z===45?"listUnordered":"listOrdered");if(F==="listUnordered"?!r.containerState.marker||z===r.containerState.marker:fj(z)){if(r.containerState.type||(r.containerState.type=F,e.enter(F,{_container:!0})),F==="listUnordered")return e.enter("listItemPrefix"),z===42||z===45?e.check(rD,n,_)(z):_(z);if(!r.interrupt||z===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),p(z)}return n(z)}function p(z){return fj(z)&&++f<10?(e.consume(z),p):(!r.interrupt||f<2)&&(r.containerState.marker?z===r.containerState.marker:z===41||z===46)?(e.exit("listItemValue"),_(z)):n(z)}function _(z){return e.enter("listItemMarker"),e.consume(z),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||z,e.check(KA,r.interrupt?n:S,e.attempt(ZAe,I,E))}function S(z){return r.containerState.initialBlankLine=!0,s++,I(z)}function E(z){return Hi(z)?(e.enter("listItemPrefixWhitespace"),e.consume(z),e.exit("listItemPrefixWhitespace"),I):n(z)}function I(z){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(z)}}function JAe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(KA,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ma(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Hi(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,f(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(KAe,t,f)(a))}function f(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ma(e,e.attempt(Wc,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function eOe(e,t,n){const r=this;return ma(e,i,"listItemIndent",r.containerState.size+1);function i(s){const f=r.events[r.events.length-1];return f&&f[1].type==="listItemIndent"&&f[2].sliceSerialize(f[1],!0).length===r.containerState.size?t(s):n(s)}}function tOe(e){e.exit(this.containerState.type)}function nOe(e,t,n){const r=this;return ma(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const f=r.events[r.events.length-1];return!Hi(s)&&f&&f[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const aW={name:"setextUnderline",resolveTo:rOe,tokenize:iOe};function rOe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const f={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",f,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=f,e.push(["exit",f,t]),e}function iOe(e,t,n){const r=this;let i;return s;function s(_){let S=r.events.length,E;for(;S--;)if(r.events[S][1].type!=="lineEnding"&&r.events[S][1].type!=="linePrefix"&&r.events[S][1].type!=="content"){E=r.events[S][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||E)?(e.enter("setextHeadingLine"),i=_,f(_)):n(_)}function f(_){return e.enter("setextHeadingLineSequence"),a(_)}function a(_){return _===i?(e.consume(_),a):(e.exit("setextHeadingLineSequence"),Hi(_)?ma(e,p,"lineSuffix")(_):p(_))}function p(_){return _===null||Wr(_)?(e.exit("setextHeadingLine"),t(_)):n(_)}}const aOe={tokenize:oOe};function oOe(e){const t=this,n=e.attempt(KA,r,e.attempt(this.parser.constructs.flowInitial,i,ma(e,e.attempt(this.parser.constructs.flow,i,e.attempt(fAe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const sOe={resolveAll:gle()},lOe=mle("string"),uOe=mle("text");function mle(e){return{resolveAll:gle(e==="text"?cOe:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,f,a);return f;function f(S){return _(S)?s(S):a(S)}function a(S){if(S===null){n.consume(S);return}return n.enter("data"),n.consume(S),p}function p(S){return _(S)?(n.exit("data"),s(S)):(n.consume(S),p)}function _(S){if(S===null)return!0;const E=i[S];let I=-1;if(E)for(;++I<E.length;){const z=E[I];if(!z.previous||z.previous.call(r,r.previous))return!0}return!1}}}function gle(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function cOe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,f=-1,a=0,p;for(;s--;){const _=i[s];if(typeof _=="string"){for(f=_.length;_.charCodeAt(f-1)===32;)a++,f--;if(f)break;f=-1}else if(_===-2)p=!0,a++;else if(_!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const _={type:n===e.length||p||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?f:r.start._bufferIndex+f,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={..._.start},r.start.offset===r.end.offset?Object.assign(r,_):(e.splice(n,0,["enter",_,t],["exit",_,t]),n+=2)}n++}return e}const fOe={42:Wc,43:Wc,45:Wc,48:Wc,49:Wc,50:Wc,51:Wc,52:Wc,53:Wc,54:Wc,55:Wc,56:Wc,57:Wc,62:lle},hOe={91:gAe},dOe={[-2]:M3,[-1]:M3,32:M3},pOe={35:wAe,42:rD,45:[aW,rD],60:AAe,61:aW,95:rD,96:rW,126:rW},mOe={38:cle,92:ule},gOe={[-5]:D3,[-4]:D3,[-3]:D3,33:qAe,38:cle,42:hj,60:[G2e,RAe],91:GAe,92:[bAe,ule],93:z$,95:hj,96:aAe},yOe={null:[hj,sOe]},_Oe={null:[42,95]},vOe={null:[]},bOe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:_Oe,contentInitial:hOe,disable:vOe,document:fOe,flow:pOe,flowInitial:dOe,insideSpan:yOe,string:mOe,text:gOe},Symbol.toStringTag,{value:"Module"}));function xOe(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let f=[],a=[];const p={attempt:te(Q),check:te(W),consume:K,enter:J,exit:ie,interrupt:te(W,{interrupt:!0})},_={code:null,containerState:{},defineSkip:U,events:[],now:F,parser:e,previous:null,sliceSerialize:I,sliceStream:z,write:E};let S=t.tokenize.call(_,p);return t.resolveAll&&s.push(t),_;function E(ge){return f=qh(f,ge),k(),f[f.length-1]!==null?[]:(X(t,0),_.events=qP(s,_.events,_),_.events)}function I(ge,ye){return SOe(z(ge),ye)}function z(ge){return wOe(f,ge)}function F(){const{_bufferIndex:ge,_index:ye,line:De,column:He,offset:Be}=r;return{_bufferIndex:ge,_index:ye,line:De,column:He,offset:Be}}function U(ge){i[ge.line]=ge.column,le()}function k(){let ge;for(;r._index<f.length;){const ye=f[r._index];if(typeof ye=="string")for(ge=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===ge&&r._bufferIndex<ye.length;)V(ye.charCodeAt(r._bufferIndex));else V(ye)}}function V(ge){S=S(ge)}function K(ge){Wr(ge)?(r.line++,r.column=1,r.offset+=ge===-3?2:1,le()):ge!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===f[r._index].length&&(r._bufferIndex=-1,r._index++)),_.previous=ge}function J(ge,ye){const De=ye||{};return De.type=ge,De.start=F(),_.events.push(["enter",De,_]),a.push(De),De}function ie(ge){const ye=a.pop();return ye.end=F(),_.events.push(["exit",ye,_]),ye}function Q(ge,ye){X(ge,ye.from)}function W(ge,ye){ye.restore()}function te(ge,ye){return De;function De(He,Be,Ee){let Ne,at,yt,je;return Array.isArray(He)?it(He):"tokenize"in He?it([He]):Ke(He);function Ke(dn){return Sn;function Sn(Ut){const xe=Ut!==null&&dn[Ut],Ye=Ut!==null&&dn.null,ct=[...Array.isArray(xe)?xe:xe?[xe]:[],...Array.isArray(Ye)?Ye:Ye?[Ye]:[]];return it(ct)(Ut)}}function it(dn){return Ne=dn,at=0,dn.length===0?Ee:Pe(dn[at])}function Pe(dn){return Sn;function Sn(Ut){return je=ae(),yt=dn,dn.partial||(_.currentConstruct=dn),dn.name&&_.parser.constructs.disable.null.includes(dn.name)?sn():dn.tokenize.call(ye?Object.assign(Object.create(_),ye):_,p,jt,sn)(Ut)}}function jt(dn){return ge(yt,je),Be}function sn(dn){return je.restore(),++at<Ne.length?Pe(Ne[at]):Ee}}}function X(ge,ye){ge.resolveAll&&!s.includes(ge)&&s.push(ge),ge.resolve&&Qf(_.events,ye,_.events.length-ye,ge.resolve(_.events.slice(ye),_)),ge.resolveTo&&(_.events=ge.resolveTo(_.events,_))}function ae(){const ge=F(),ye=_.previous,De=_.currentConstruct,He=_.events.length,Be=Array.from(a);return{from:He,restore:Ee};function Ee(){r=ge,_.previous=ye,_.currentConstruct=De,_.events.length=He,a=Be,le()}}function le(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function wOe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let f;if(n===i)f=[e[n].slice(r,s)];else{if(f=e.slice(n,i),r>-1){const a=f[0];typeof a=="string"?f[0]=a.slice(r):f.shift()}s>0&&f.push(e[i].slice(0,s))}return f}function SOe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let f;if(typeof s=="string")f=s;else switch(s){case-5:{f="\r";break}case-4:{f=`
`;break}case-3:{f=`\r
`;break}case-2:{f=t?" ":"	";break}case-1:{if(!t&&i)continue;f=" ";break}default:f=String.fromCharCode(s)}i=s===-2,r.push(f)}return r.join("")}function TOe(e){const r={constructs:ole([bOe,...(e||{}).extensions||[]]),content:i(B2e),defined:[],document:i(U2e),flow:i(aOe),lazy:{},string:i(lOe),text:i(uOe)};return r;function i(s){return f;function f(a){return xOe(r,s,a)}}}function EOe(e){for(;!fle(e););return e}const oW=/[\0\t\n\r]/g;function AOe(){let e=1,t="",n=!0,r;return i;function i(s,f,a){const p=[];let _,S,E,I,z;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(f||void 0).decode(s)),E=0,t="",n&&(s.charCodeAt(0)===65279&&E++,n=void 0);E<s.length;){if(oW.lastIndex=E,_=oW.exec(s),I=_&&_.index!==void 0?_.index:s.length,z=s.charCodeAt(I),!_){t=s.slice(E);break}if(z===10&&E===I&&r)p.push(-3),r=void 0;else switch(r&&(p.push(-5),r=void 0),E<I&&(p.push(s.slice(E,I)),e+=I-E),z){case 0:{p.push(65533),e++;break}case 9:{for(S=Math.ceil(e/4)*4,p.push(-2);e++<S;)p.push(-1);break}case 10:{p.push(-4),e=1;break}default:r=!0,e=1}E=I+1}return a&&(r&&p.push(-5),t&&p.push(t),p.push(null)),p}}const OOe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function COe(e){return e.replace(OOe,MOe)}function MOe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return sle(n.slice(s?2:1),s?16:10)}return L$(n)||e}const yle={}.hasOwnProperty;function DOe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),IOe(n)(EOe(TOe(n).document().write(AOe()(e,t,!0))))}function IOe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Nr),autolinkProtocol:ae,autolinkEmail:ae,atxHeading:s(gn),blockQuote:s(Ye),characterEscape:ae,characterReference:ae,codeFenced:s(ct),codeFencedFenceInfo:f,codeFencedFenceMeta:f,codeIndented:s(ct,f),codeText:s(mt,f),codeTextData:ae,data:ae,codeFlowValue:ae,definition:s(Ct),definitionDestinationString:f,definitionLabelString:f,definitionTitleString:f,emphasis:s(Yt),hardBreakEscape:s(En),hardBreakTrailing:s(En),htmlFlow:s(or,f),htmlFlowData:ae,htmlText:s(or,f),htmlTextData:ae,image:s(sr),label:f,link:s(Nr),listItem:s(Er),listItemValue:I,listOrdered:s(Pr,E),listUnordered:s(Pr),paragraph:s(Tr),reference:Pe,referenceString:f,resourceDestinationString:f,resourceTitleString:f,setextHeading:s(gn),strong:s(pi),thematicBreak:s(hi)},exit:{atxHeading:p(),atxHeadingSequence:Q,autolink:p(),autolinkEmail:xe,autolinkProtocol:Ut,blockQuote:p(),characterEscapeValue:le,characterReferenceMarkerHexadecimal:sn,characterReferenceMarkerNumeric:sn,characterReferenceValue:dn,characterReference:Sn,codeFenced:p(k),codeFencedFence:U,codeFencedFenceInfo:z,codeFencedFenceMeta:F,codeFlowValue:le,codeIndented:p(V),codeText:p(Be),codeTextData:le,data:le,definition:p(),definitionDestinationString:ie,definitionLabelString:K,definitionTitleString:J,emphasis:p(),hardBreakEscape:p(ye),hardBreakTrailing:p(ye),htmlFlow:p(De),htmlFlowData:le,htmlText:p(He),htmlTextData:le,image:p(Ne),label:yt,labelText:at,lineEnding:ge,link:p(Ee),listItem:p(),listOrdered:p(),listUnordered:p(),paragraph:p(),referenceString:jt,resourceDestinationString:je,resourceTitleString:Ke,resource:it,setextHeading:p(X),setextHeadingLineSequence:te,setextHeadingText:W,strong:p(),thematicBreak:p()}};_le(t,(e||{}).mdastExtensions||[]);const n={};return r;function r($t){let Tn={type:"root",children:[]};const ur={stack:[Tn],tokenStack:[],config:t,enter:a,exit:_,buffer:f,resume:S,data:n},Vr=[];let jr=-1;for(;++jr<$t.length;)if($t[jr][1].type==="listOrdered"||$t[jr][1].type==="listUnordered")if($t[jr][0]==="enter")Vr.push(jr);else{const Ya=Vr.pop();jr=i($t,Ya,jr)}for(jr=-1;++jr<$t.length;){const Ya=t[$t[jr][0]];yle.call(Ya,$t[jr][1].type)&&Ya[$t[jr][1].type].call(Object.assign({sliceSerialize:$t[jr][2].sliceSerialize},ur),$t[jr][1])}if(ur.tokenStack.length>0){const Ya=ur.tokenStack[ur.tokenStack.length-1];(Ya[1]||sW).call(ur,void 0,Ya[0])}for(Tn.position={start:Mv($t.length>0?$t[0][1].start:{line:1,column:1,offset:0}),end:Mv($t.length>0?$t[$t.length-2][1].end:{line:1,column:1,offset:0})},jr=-1;++jr<t.transforms.length;)Tn=t.transforms[jr](Tn)||Tn;return Tn}function i($t,Tn,ur){let Vr=Tn-1,jr=-1,Ya=!1,vo,Yo,Aa,Qi;for(;++Vr<=ur;){const Ri=$t[Vr];switch(Ri[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ri[0]==="enter"?jr++:jr--,Qi=void 0;break}case"lineEndingBlank":{Ri[0]==="enter"&&(vo&&!Qi&&!jr&&!Aa&&(Aa=Vr),Qi=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Qi=void 0}if(!jr&&Ri[0]==="enter"&&Ri[1].type==="listItemPrefix"||jr===-1&&Ri[0]==="exit"&&(Ri[1].type==="listUnordered"||Ri[1].type==="listOrdered")){if(vo){let zs=Vr;for(Yo=void 0;zs--;){const is=$t[zs];if(is[1].type==="lineEnding"||is[1].type==="lineEndingBlank"){if(is[0]==="exit")continue;Yo&&($t[Yo][1].type="lineEndingBlank",Ya=!0),is[1].type="lineEnding",Yo=zs}else if(!(is[1].type==="linePrefix"||is[1].type==="blockQuotePrefix"||is[1].type==="blockQuotePrefixWhitespace"||is[1].type==="blockQuoteMarker"||is[1].type==="listItemIndent"))break}Aa&&(!Yo||Aa<Yo)&&(vo._spread=!0),vo.end=Object.assign({},Yo?$t[Yo][1].start:Ri[1].end),$t.splice(Yo||Vr,0,["exit",vo,Ri[2]]),Vr++,ur++}if(Ri[1].type==="listItemPrefix"){const zs={type:"listItem",_spread:!1,start:Object.assign({},Ri[1].start),end:void 0};vo=zs,$t.splice(Vr,0,["enter",zs,Ri[2]]),Vr++,ur++,Aa=void 0,Qi=!0}}}return $t[Tn][1]._spread=Ya,ur}function s($t,Tn){return ur;function ur(Vr){a.call(this,$t(Vr),Vr),Tn&&Tn.call(this,Vr)}}function f(){this.stack.push({type:"fragment",children:[]})}function a($t,Tn,ur){this.stack[this.stack.length-1].children.push($t),this.stack.push($t),this.tokenStack.push([Tn,ur||void 0]),$t.position={start:Mv(Tn.start),end:void 0}}function p($t){return Tn;function Tn(ur){$t&&$t.call(this,ur),_.call(this,ur)}}function _($t,Tn){const ur=this.stack.pop(),Vr=this.tokenStack.pop();if(Vr)Vr[0].type!==$t.type&&(Tn?Tn.call(this,$t,Vr[0]):(Vr[1]||sW).call(this,$t,Vr[0]));else throw new Error("Cannot close `"+$t.type+"` ("+m2({start:$t.start,end:$t.end})+"): its not open");ur.position.end=Mv($t.end)}function S(){return k$(this.stack.pop())}function E(){this.data.expectingFirstListItemValue=!0}function I($t){if(this.data.expectingFirstListItemValue){const Tn=this.stack[this.stack.length-2];Tn.start=Number.parseInt(this.sliceSerialize($t),10),this.data.expectingFirstListItemValue=void 0}}function z(){const $t=this.resume(),Tn=this.stack[this.stack.length-1];Tn.lang=$t}function F(){const $t=this.resume(),Tn=this.stack[this.stack.length-1];Tn.meta=$t}function U(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const $t=this.resume(),Tn=this.stack[this.stack.length-1];Tn.value=$t.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function V(){const $t=this.resume(),Tn=this.stack[this.stack.length-1];Tn.value=$t.replace(/(\r?\n|\r)$/g,"")}function K($t){const Tn=this.resume(),ur=this.stack[this.stack.length-1];ur.label=Tn,ur.identifier=_p(this.sliceSerialize($t)).toLowerCase()}function J(){const $t=this.resume(),Tn=this.stack[this.stack.length-1];Tn.title=$t}function ie(){const $t=this.resume(),Tn=this.stack[this.stack.length-1];Tn.url=$t}function Q($t){const Tn=this.stack[this.stack.length-1];if(!Tn.depth){const ur=this.sliceSerialize($t).length;Tn.depth=ur}}function W(){this.data.setextHeadingSlurpLineEnding=!0}function te($t){const Tn=this.stack[this.stack.length-1];Tn.depth=this.sliceSerialize($t).codePointAt(0)===61?1:2}function X(){this.data.setextHeadingSlurpLineEnding=void 0}function ae($t){const ur=this.stack[this.stack.length-1].children;let Vr=ur[ur.length-1];(!Vr||Vr.type!=="text")&&(Vr=Br(),Vr.position={start:Mv($t.start),end:void 0},ur.push(Vr)),this.stack.push(Vr)}function le($t){const Tn=this.stack.pop();Tn.value+=this.sliceSerialize($t),Tn.position.end=Mv($t.end)}function ge($t){const Tn=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ur=Tn.children[Tn.children.length-1];ur.position.end=Mv($t.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Tn.type)&&(ae.call(this,$t),le.call(this,$t))}function ye(){this.data.atHardBreak=!0}function De(){const $t=this.resume(),Tn=this.stack[this.stack.length-1];Tn.value=$t}function He(){const $t=this.resume(),Tn=this.stack[this.stack.length-1];Tn.value=$t}function Be(){const $t=this.resume(),Tn=this.stack[this.stack.length-1];Tn.value=$t}function Ee(){const $t=this.stack[this.stack.length-1];if(this.data.inReference){const Tn=this.data.referenceType||"shortcut";$t.type+="Reference",$t.referenceType=Tn,delete $t.url,delete $t.title}else delete $t.identifier,delete $t.label;this.data.referenceType=void 0}function Ne(){const $t=this.stack[this.stack.length-1];if(this.data.inReference){const Tn=this.data.referenceType||"shortcut";$t.type+="Reference",$t.referenceType=Tn,delete $t.url,delete $t.title}else delete $t.identifier,delete $t.label;this.data.referenceType=void 0}function at($t){const Tn=this.sliceSerialize($t),ur=this.stack[this.stack.length-2];ur.label=COe(Tn),ur.identifier=_p(Tn).toLowerCase()}function yt(){const $t=this.stack[this.stack.length-1],Tn=this.resume(),ur=this.stack[this.stack.length-1];if(this.data.inReference=!0,ur.type==="link"){const Vr=$t.children;ur.children=Vr}else ur.alt=Tn}function je(){const $t=this.resume(),Tn=this.stack[this.stack.length-1];Tn.url=$t}function Ke(){const $t=this.resume(),Tn=this.stack[this.stack.length-1];Tn.title=$t}function it(){this.data.inReference=void 0}function Pe(){this.data.referenceType="collapsed"}function jt($t){const Tn=this.resume(),ur=this.stack[this.stack.length-1];ur.label=Tn,ur.identifier=_p(this.sliceSerialize($t)).toLowerCase(),this.data.referenceType="full"}function sn($t){this.data.characterReferenceType=$t.type}function dn($t){const Tn=this.sliceSerialize($t),ur=this.data.characterReferenceType;let Vr;ur?(Vr=sle(Tn,ur==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Vr=L$(Tn);const jr=this.stack[this.stack.length-1];jr.value+=Vr}function Sn($t){const Tn=this.stack.pop();Tn.position.end=Mv($t.end)}function Ut($t){le.call(this,$t);const Tn=this.stack[this.stack.length-1];Tn.url=this.sliceSerialize($t)}function xe($t){le.call(this,$t);const Tn=this.stack[this.stack.length-1];Tn.url="mailto:"+this.sliceSerialize($t)}function Ye(){return{type:"blockquote",children:[]}}function ct(){return{type:"code",lang:null,meta:null,value:""}}function mt(){return{type:"inlineCode",value:""}}function Ct(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Yt(){return{type:"emphasis",children:[]}}function gn(){return{type:"heading",depth:0,children:[]}}function En(){return{type:"break"}}function or(){return{type:"html",value:""}}function sr(){return{type:"image",title:null,url:"",alt:null}}function Nr(){return{type:"link",title:null,url:"",children:[]}}function Pr($t){return{type:"list",ordered:$t.type==="listOrdered",start:null,spread:$t._spread,children:[]}}function Er($t){return{type:"listItem",spread:$t._spread,checked:null,children:[]}}function Tr(){return{type:"paragraph",children:[]}}function pi(){return{type:"strong",children:[]}}function Br(){return{type:"text",value:""}}function hi(){return{type:"thematicBreak"}}}function Mv(e){return{line:e.line,column:e.column,offset:e.offset}}function _le(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?_le(e,r):POe(e,r)}}function POe(e,t){let n;for(n in t)if(yle.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function sW(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+m2({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+m2({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+m2({start:t.start,end:t.end})+") is still open")}function ROe(e){const t=this;t.parser=n;function n(r){return DOe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function kOe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function LOe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function zOe(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function FOe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function NOe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function BOe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=VS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let f,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),f=e.footnoteOrder.length):f=s+1,a+=1,e.footnoteCounts.set(r,a);const p={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(f)}]};e.patch(t,p);const _={type:"element",tagName:"sup",properties:{},children:[p]};return e.patch(t,_),e.applyData(t,_)}function jOe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function UOe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function vle(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const f=i[i.length-1];return f&&f.type==="text"?f.value+=r:i.push({type:"text",value:r}),i}function $Oe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return vle(e,t);const i={src:VS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function VOe(e,t){const n={src:VS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function qOe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function HOe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return vle(e,t);const i={href:VS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function GOe(e,t){const n={href:VS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function YOe(e,t,n){const r=e.all(t),i=n?WOe(n):ble(t),s={},f=[];if(typeof t.checked=="boolean"){const S=r[0];let E;S&&S.type==="element"&&S.tagName==="p"?E=S:(E={type:"element",tagName:"p",properties:{},children:[]},r.unshift(E)),E.children.length>0&&E.children.unshift({type:"text",value:" "}),E.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const S=r[a];(i||a!==0||S.type!=="element"||S.tagName!=="p")&&f.push({type:"text",value:`
`}),S.type==="element"&&S.tagName==="p"&&!i?f.push(...S.children):f.push(S)}const p=r[r.length-1];p&&(i||p.type!=="element"||p.tagName!=="p")&&f.push({type:"text",value:`
`});const _={type:"element",tagName:"li",properties:s,children:f};return e.patch(t,_),e.applyData(t,_)}function WOe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=ble(n[r])}return t}function ble(e){const t=e.spread;return t??e.children.length>1}function XOe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const f=r[i];if(f.type==="element"&&f.tagName==="li"&&f.properties&&Array.isArray(f.properties.className)&&f.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function ZOe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function KOe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function QOe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function JOe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const f={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],f),i.push(f)}if(n.length>0){const f={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=D$(t.children[1]),p=Jse(t.children[t.children.length-1]);a&&p&&(f.position={start:a,end:p}),i.push(f)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function eCe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",f=n&&n.type==="table"?n.align:void 0,a=f?f.length:t.children.length;let p=-1;const _=[];for(;++p<a;){const E=t.children[p],I={},z=f?f[p]:void 0;z&&(I.align=z);let F={type:"element",tagName:s,properties:I,children:[]};E&&(F.children=e.all(E),e.patch(E,F),F=e.applyData(E,F)),_.push(F)}const S={type:"element",tagName:"tr",properties:{},children:e.wrap(_,!0)};return e.patch(t,S),e.applyData(t,S)}function tCe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const lW=9,uW=32;function nCe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(cW(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(cW(t.slice(i),i>0,!1)),s.join("")}function cW(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===lW||s===uW;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===lW||s===uW;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function rCe(e,t){const n={type:"text",value:nCe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function iCe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const aCe={blockquote:kOe,break:LOe,code:zOe,delete:FOe,emphasis:NOe,footnoteReference:BOe,heading:jOe,html:UOe,imageReference:$Oe,image:VOe,inlineCode:qOe,linkReference:HOe,link:GOe,listItem:YOe,list:XOe,paragraph:ZOe,root:KOe,strong:QOe,table:JOe,tableCell:tCe,tableRow:eCe,text:rCe,thematicBreak:iCe,toml:oM,yaml:oM,definition:oM,footnoteDefinition:oM};function oM(){}const xle=-1,HP=0,y2=1,jD=2,F$=3,N$=4,B$=5,j$=6,wle=7,Sle=8,fW=typeof self=="object"?self:globalThis,oCe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,f]=t[i];switch(s){case HP:case xle:return n(f,i);case y2:{const a=n([],i);for(const p of f)a.push(r(p));return a}case jD:{const a=n({},i);for(const[p,_]of f)a[r(p)]=r(_);return a}case F$:return n(new Date(f),i);case N$:{const{source:a,flags:p}=f;return n(new RegExp(a,p),i)}case B$:{const a=n(new Map,i);for(const[p,_]of f)a.set(r(p),r(_));return a}case j$:{const a=n(new Set,i);for(const p of f)a.add(r(p));return a}case wle:{const{name:a,message:p}=f;return n(new fW[a](p),i)}case Sle:return n(BigInt(f),i);case"BigInt":return n(Object(BigInt(f)),i);case"ArrayBuffer":return n(new Uint8Array(f).buffer,f);case"DataView":{const{buffer:a}=new Uint8Array(f);return n(new DataView(a),f)}}return n(new fW[s](f),i)};return r},hW=e=>oCe(new Map,e)(0),J1="",{toString:sCe}={},{keys:lCe}=Object,ME=e=>{const t=typeof e;if(t!=="object"||!e)return[HP,t];const n=sCe.call(e).slice(8,-1);switch(n){case"Array":return[y2,J1];case"Object":return[jD,J1];case"Date":return[F$,J1];case"RegExp":return[N$,J1];case"Map":return[B$,J1];case"Set":return[j$,J1];case"DataView":return[y2,n]}return n.includes("Array")?[y2,n]:n.includes("Error")?[wle,n]:[jD,n]},sM=([e,t])=>e===HP&&(t==="function"||t==="symbol"),uCe=(e,t,n,r)=>{const i=(f,a)=>{const p=r.push(f)-1;return n.set(a,p),p},s=f=>{if(n.has(f))return n.get(f);let[a,p]=ME(f);switch(a){case HP:{let S=f;switch(p){case"bigint":a=Sle,S=f.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+p);S=null;break;case"undefined":return i([xle],f)}return i([a,S],f)}case y2:{if(p){let I=f;return p==="DataView"?I=new Uint8Array(f.buffer):p==="ArrayBuffer"&&(I=new Uint8Array(f)),i([p,[...I]],f)}const S=[],E=i([a,S],f);for(const I of f)S.push(s(I));return E}case jD:{if(p)switch(p){case"BigInt":return i([p,f.toString()],f);case"Boolean":case"Number":case"String":return i([p,f.valueOf()],f)}if(t&&"toJSON"in f)return s(f.toJSON());const S=[],E=i([a,S],f);for(const I of lCe(f))(e||!sM(ME(f[I])))&&S.push([s(I),s(f[I])]);return E}case F$:return i([a,f.toISOString()],f);case N$:{const{source:S,flags:E}=f;return i([a,{source:S,flags:E}],f)}case B$:{const S=[],E=i([a,S],f);for(const[I,z]of f)(e||!(sM(ME(I))||sM(ME(z))))&&S.push([s(I),s(z)]);return E}case j$:{const S=[],E=i([a,S],f);for(const I of f)(e||!sM(ME(I)))&&S.push(s(I));return E}}const{message:_}=f;return i([a,{name:p,message:_}],f)};return s},dW=(e,{json:t,lossy:n}={})=>{const r=[];return uCe(!(t||n),!!t,new Map,r)(e),r},UD=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?hW(dW(e,t)):structuredClone(e):(e,t)=>hW(dW(e,t));function cCe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function fCe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function hCe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||cCe,r=e.options.footnoteBackLabel||fCe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",f=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let p=-1;for(;++p<e.footnoteOrder.length;){const _=e.footnoteById.get(e.footnoteOrder[p]);if(!_)continue;const S=e.all(_),E=String(_.identifier).toUpperCase(),I=VS(E.toLowerCase());let z=0;const F=[],U=e.footnoteCounts.get(E);for(;U!==void 0&&++z<=U;){F.length>0&&F.push({type:"text",value:" "});let K=typeof n=="string"?n:n(p,z);typeof K=="string"&&(K={type:"text",value:K}),F.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+I+(z>1?"-"+z:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(p,z),className:["data-footnote-backref"]},children:Array.isArray(K)?K:[K]})}const k=S[S.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const K=k.children[k.children.length-1];K&&K.type==="text"?K.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...F)}else S.push(...F);const V={type:"element",tagName:"li",properties:{id:t+"fn-"+I},children:e.wrap(S,!0)};e.patch(_,V),a.push(V)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...UD(f),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const GP=(function(e){if(e==null)return gCe;if(typeof e=="function")return YP(e);if(typeof e=="object")return Array.isArray(e)?dCe(e):pCe(e);if(typeof e=="string")return mCe(e);throw new Error("Expected function, string, or object as test")});function dCe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=GP(e[n]);return YP(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function pCe(e){const t=e;return YP(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function mCe(e){return YP(t);function t(n){return n&&n.type===e}}function YP(e){return t;function t(n,r,i){return!!(yCe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function gCe(){return!0}function yCe(e){return e!==null&&typeof e=="object"&&"type"in e}const Tle=[],_Ce=!0,dj=!1,vCe="skip";function Ele(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=GP(i),f=r?-1:1;a(e,void 0,[])();function a(p,_,S){const E=p&&typeof p=="object"?p:{};if(typeof E.type=="string"){const z=typeof E.tagName=="string"?E.tagName:typeof E.name=="string"?E.name:void 0;Object.defineProperty(I,"name",{value:"node ("+(p.type+(z?"<"+z+">":""))+")"})}return I;function I(){let z=Tle,F,U,k;if((!t||s(p,_,S[S.length-1]||void 0))&&(z=bCe(n(p,S)),z[0]===dj))return z;if("children"in p&&p.children){const V=p;if(V.children&&z[0]!==vCe)for(U=(r?V.children.length:-1)+f,k=S.concat(V);U>-1&&U<V.children.length;){const K=V.children[U];if(F=a(K,U,k)(),F[0]===dj)return F;U=typeof F[1]=="number"?F[1]:U+f}}return z}}}function bCe(e){return Array.isArray(e)?e:typeof e=="number"?[_Ce,e]:e==null?Tle:[e]}function U$(e,t,n,r){let i,s,f;typeof t=="function"&&typeof n!="function"?(s=void 0,f=t,i=n):(s=t,f=n,i=r),Ele(e,s,a,i);function a(p,_){const S=_[_.length-1],E=S?S.children.indexOf(p):void 0;return f(p,E,S)}}const pj={}.hasOwnProperty,xCe={};function wCe(e,t){const n=t||xCe,r=new Map,i=new Map,s=new Map,f={...aCe,...n.handlers},a={all:_,applyData:TCe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:f,one:p,options:n,patch:SCe,wrap:ACe};return U$(e,function(S){if(S.type==="definition"||S.type==="footnoteDefinition"){const E=S.type==="definition"?r:i,I=String(S.identifier).toUpperCase();E.has(I)||E.set(I,S)}}),a;function p(S,E){const I=S.type,z=a.handlers[I];if(pj.call(a.handlers,I)&&z)return z(a,S,E);if(a.options.passThrough&&a.options.passThrough.includes(I)){if("children"in S){const{children:U,...k}=S,V=UD(k);return V.children=a.all(S),V}return UD(S)}return(a.options.unknownHandler||ECe)(a,S,E)}function _(S){const E=[];if("children"in S){const I=S.children;let z=-1;for(;++z<I.length;){const F=a.one(I[z],S);if(F){if(z&&I[z-1].type==="break"&&(!Array.isArray(F)&&F.type==="text"&&(F.value=pW(F.value)),!Array.isArray(F)&&F.type==="element")){const U=F.children[0];U&&U.type==="text"&&(U.value=pW(U.value))}Array.isArray(F)?E.push(...F):E.push(F)}}}return E}}function SCe(e,t){e.position&&(t.position=f2e(e))}function TCe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const f="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:f}}n.type==="element"&&s&&Object.assign(n.properties,UD(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function ECe(e,t){const n=t.data||{},r="value"in t&&!(pj.call(n,"hProperties")||pj.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ACe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function pW(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function mW(e,t){const n=wCe(e,t),r=n.one(e,void 0),i=hCe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function OCe(e,t){return e&&"run"in e?async function(n,r){const i=mW(n,{file:r,...t});await e.run(i,r)}:function(n,r){return mW(n,{file:r,...e||t})}}function gW(e){if(e)throw e}var I3,yW;function CCe(){if(yW)return I3;yW=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(_){return typeof Array.isArray=="function"?Array.isArray(_):t.call(_)==="[object Array]"},s=function(_){if(!_||t.call(_)!=="[object Object]")return!1;var S=e.call(_,"constructor"),E=_.constructor&&_.constructor.prototype&&e.call(_.constructor.prototype,"isPrototypeOf");if(_.constructor&&!S&&!E)return!1;var I;for(I in _);return typeof I>"u"||e.call(_,I)},f=function(_,S){n&&S.name==="__proto__"?n(_,S.name,{enumerable:!0,configurable:!0,value:S.newValue,writable:!0}):_[S.name]=S.newValue},a=function(_,S){if(S==="__proto__")if(e.call(_,S)){if(r)return r(_,S).value}else return;return _[S]};return I3=function p(){var _,S,E,I,z,F,U=arguments[0],k=1,V=arguments.length,K=!1;for(typeof U=="boolean"&&(K=U,U=arguments[1]||{},k=2),(U==null||typeof U!="object"&&typeof U!="function")&&(U={});k<V;++k)if(_=arguments[k],_!=null)for(S in _)E=a(U,S),I=a(_,S),U!==I&&(K&&I&&(s(I)||(z=i(I)))?(z?(z=!1,F=E&&i(E)?E:[]):F=E&&s(E)?E:{},f(U,{name:S,newValue:p(K,F,I)})):typeof I<"u"&&f(U,{name:S,newValue:I}));return U},I3}var MCe=CCe();const P3=ga(MCe);function mj(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function DCe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const f=i.pop();if(typeof f!="function")throw new TypeError("Expected function as last argument, not "+f);a(null,...i);function a(p,..._){const S=e[++s];let E=-1;if(p){f(p);return}for(;++E<i.length;)(_[E]===null||_[E]===void 0)&&(_[E]=i[E]);i=_,S?ICe(S,a)(..._):f(null,..._)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function ICe(e,t){let n;return r;function r(...f){const a=e.length>f.length;let p;a&&f.push(i);try{p=e.apply(this,f)}catch(_){const S=_;if(a&&n)throw S;return i(S)}a||(p&&p.then&&typeof p.then=="function"?p.then(s,i):p instanceof Error?i(p):s(p))}function i(f,...a){n||(n=!0,t(f,...a))}function s(f){i(null,f)}}const km={basename:PCe,dirname:RCe,extname:kCe,join:LCe,sep:"/"};function PCe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');QA(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let f=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else f<0&&(s=!0,f=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=f));return n===r?r=f:r<0&&(r=e.length),e.slice(n,r)}function RCe(e){if(QA(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function kCe(e){QA(e);let t=e.length,n=-1,r=0,i=-1,s=0,f;for(;t--;){const a=e.codePointAt(t);if(a===47){if(f){r=t+1;break}continue}n<0&&(f=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function LCe(...e){let t=-1,n;for(;++t<e.length;)QA(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":zCe(n)}function zCe(e){QA(e);const t=e.codePointAt(0)===47;let n=FCe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function FCe(e,t){let n="",r=0,i=-1,s=0,f=-1,a,p;for(;++f<=e.length;){if(f<e.length)a=e.codePointAt(f);else{if(a===47)break;a=47}if(a===47){if(!(i===f-1||s===1))if(i!==f-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(p=n.lastIndexOf("/"),p!==n.length-1){p<0?(n="",r=0):(n=n.slice(0,p),r=n.length-1-n.lastIndexOf("/")),i=f,s=0;continue}}else if(n.length>0){n="",r=0,i=f,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,f):n=e.slice(i+1,f),r=f-i-1;i=f,s=0}else a===46&&s>-1?s++:s=-1}return n}function QA(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const NCe={cwd:BCe};function BCe(){return"/"}function gj(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function jCe(e){if(typeof e=="string")e=new URL(e);else if(!gj(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return UCe(e)}function UCe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const R3=["history","path","basename","stem","extname","dirname"];class Ale{constructor(t){let n;t?gj(t)?n={path:t}:typeof t=="string"||$Ce(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":NCe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<R3.length;){const s=R3[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)R3.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?km.basename(this.path):void 0}set basename(t){L3(t,"basename"),k3(t,"basename"),this.path=km.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?km.dirname(this.path):void 0}set dirname(t){_W(this.basename,"dirname"),this.path=km.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?km.extname(this.path):void 0}set extname(t){if(k3(t,"extname"),_W(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=km.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){gj(t)&&(t=jCe(t)),L3(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?km.basename(this.path,this.extname):void 0}set stem(t){L3(t,"stem"),k3(t,"stem"),this.path=km.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Lu(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function k3(e,t){if(e&&e.includes(km.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+km.sep+"`")}function L3(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function _W(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function $Ce(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const VCe=(function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),qCe={}.hasOwnProperty;class $$ extends VCe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=DCe()}copy(){const t=new $$;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(P3(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(N3("data",this.frozen),this.namespace[t]=n,this):qCe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(N3("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=lM(t),r=this.parser||this.Parser;return z3("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),z3("process",this.parser||this.Parser),F3("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,f){const a=lM(t),p=r.parse(a);r.run(p,a,function(S,E,I){if(S||!E||!I)return _(S);const z=E,F=r.stringify(z,I);YCe(F)?I.value=F:I.result=F,_(S,I)});function _(S,E){S||!E?f(S):s?s(E):n(void 0,E)}}}processSync(t){let n=!1,r;return this.freeze(),z3("processSync",this.parser||this.Parser),F3("processSync",this.compiler||this.Compiler),this.process(t,i),bW("processSync","process",n),r;function i(s,f){n=!0,gW(s),r=f}}run(t,n,r){vW(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(f,a){const p=lM(n);i.run(t,p,_);function _(S,E,I){const z=E||t;S?a(S):f?f(z):r(void 0,z,I)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),bW("runSync","run",r),i;function s(f,a){gW(f),i=a,r=!0}}stringify(t,n){this.freeze();const r=lM(n),i=this.compiler||this.Compiler;return F3("stringify",i),vW(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(N3("use",this.frozen),t!=null)if(typeof t=="function")p(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):f(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(_){if(typeof _=="function")p(_,[]);else if(typeof _=="object")if(Array.isArray(_)){const[S,...E]=_;p(S,E)}else f(_);else throw new TypeError("Expected usable value, not `"+_+"`")}function f(_){if(!("plugins"in _)&&!("settings"in _))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(_.plugins),_.settings&&(i.settings=P3(!0,i.settings,_.settings))}function a(_){let S=-1;if(_!=null)if(Array.isArray(_))for(;++S<_.length;){const E=_[S];s(E)}else throw new TypeError("Expected a list of plugins, not `"+_+"`")}function p(_,S){let E=-1,I=-1;for(;++E<r.length;)if(r[E][0]===_){I=E;break}if(I===-1)r.push([_,...S]);else if(S.length>0){let[z,...F]=S;const U=r[I][1];mj(U)&&mj(z)&&(z=P3(!0,U,z)),r[I]=[_,z,...F]}}}}const HCe=new $$().freeze();function z3(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function F3(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function N3(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function vW(e){if(!mj(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function bW(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function lM(e){return GCe(e)?e:new Ale(e)}function GCe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function YCe(e){return typeof e=="string"||WCe(e)}function WCe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const XCe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",xW=[],wW={allowDangerousHtml:!0},ZCe=/^(https?|ircs?|mailto|xmpp)$/i,KCe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function uM(e){const t=QCe(e),n=JCe(e);return eMe(t.runSync(t.parse(n),n),e)}function QCe(e){const t=e.rehypePlugins||xW,n=e.remarkPlugins||xW,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...wW}:wW;return HCe().use(ROe).use(n).use(OCe,r).use(t)}function JCe(e){const t=e.children||"",n=new Ale;return typeof t=="string"&&(n.value=t),n}function eMe(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,f=t.skipHtml,a=t.unwrapDisallowed,p=t.urlTransform||tMe;for(const S of KCe)Object.hasOwn(t,S.from)&&(""+S.from+(S.to?"use `"+S.to+"` instead":"remove it")+XCe+S.id,void 0);return U$(e,_),g2e(e,{Fragment:Oe.Fragment,components:i,ignoreInvalidStyle:!0,jsx:Oe.jsx,jsxs:Oe.jsxs,passKeys:!0,passNode:!0});function _(S,E,I){if(S.type==="raw"&&I&&typeof E=="number")return f?I.children.splice(E,1):I.children[E]={type:"text",value:S.value},E;if(S.type==="element"){let z;for(z in C3)if(Object.hasOwn(C3,z)&&Object.hasOwn(S.properties,z)){const F=S.properties[z],U=C3[z];(U===null||U.includes(S.tagName))&&(S.properties[z]=p(String(F||""),z,S))}}if(S.type==="element"){let z=n?!n.includes(S.tagName):s?s.includes(S.tagName):!1;if(!z&&r&&typeof E=="number"&&(z=!r(S,E,I)),z&&I&&typeof E=="number")return a&&S.children?I.children.splice(E,1,...S.children):I.children.splice(E,1),E}}}function tMe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||ZCe.test(e.slice(0,t))?e:""}function SW(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function nMe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function rMe(e,t,n){const i=GP((n||{}).ignore||[]),s=iMe(t);let f=-1;for(;++f<s.length;)Ele(e,"text",a);function a(_,S){let E=-1,I;for(;++E<S.length;){const z=S[E],F=I?I.children:void 0;if(i(z,F?F.indexOf(z):void 0,I))return;I=z}if(I)return p(_,S)}function p(_,S){const E=S[S.length-1],I=s[f][0],z=s[f][1];let F=0;const k=E.children.indexOf(_);let V=!1,K=[];I.lastIndex=0;let J=I.exec(_.value);for(;J;){const ie=J.index,Q={index:J.index,input:J.input,stack:[...S,_]};let W=z(...J,Q);if(typeof W=="string"&&(W=W.length>0?{type:"text",value:W}:void 0),W===!1?I.lastIndex=ie+1:(F!==ie&&K.push({type:"text",value:_.value.slice(F,ie)}),Array.isArray(W)?K.push(...W):W&&K.push(W),F=ie+J[0].length,V=!0),!I.global)break;J=I.exec(_.value)}return V?(F<_.value.length&&K.push({type:"text",value:_.value.slice(F)}),E.children.splice(k,1,...K)):K=[_],k+K.length}}function iMe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([aMe(i[0]),oMe(i[1])])}return t}function aMe(e){return typeof e=="string"?new RegExp(nMe(e),"g"):e}function oMe(e){return typeof e=="function"?e:function(){return e}}const B3="phrasing",j3=["autolink","link","image","label"];function sMe(){return{transforms:[pMe],enter:{literalAutolink:uMe,literalAutolinkEmail:U3,literalAutolinkHttp:U3,literalAutolinkWww:U3},exit:{literalAutolink:dMe,literalAutolinkEmail:hMe,literalAutolinkHttp:cMe,literalAutolinkWww:fMe}}}function lMe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:B3,notInConstruct:j3},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:B3,notInConstruct:j3},{character:":",before:"[ps]",after:"\\/",inConstruct:B3,notInConstruct:j3}]}}function uMe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function U3(e){this.config.enter.autolinkProtocol.call(this,e)}function cMe(e){this.config.exit.autolinkProtocol.call(this,e)}function fMe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function hMe(e){this.config.exit.autolinkEmail.call(this,e)}function dMe(e){this.exit(e)}function pMe(e){rMe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,mMe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),gMe]],{ignore:["link","linkReference"]})}function mMe(e,t,n,r,i){let s="";if(!Ole(i)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!yMe(n)))return!1;const f=_Me(n+r);if(!f[0])return!1;const a={type:"link",title:null,url:s+t+f[0],children:[{type:"text",value:t+f[0]}]};return f[1]?[a,{type:"text",value:f[1]}]:a}function gMe(e,t,n,r){return!Ole(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function yMe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function _Me(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=SW(e,"(");let s=SW(e,")");for(;r!==-1&&i>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function Ole(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||px(n)||VP(n))&&(!t||n!==47)}Cle.peek=OMe;function vMe(){this.buffer()}function bMe(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function xMe(){this.buffer()}function wMe(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function SMe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=_p(this.sliceSerialize(e)).toLowerCase(),n.label=t}function TMe(e){this.exit(e)}function EMe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=_p(this.sliceSerialize(e)).toLowerCase(),n.label=t}function AMe(e){this.exit(e)}function OMe(){return"["}function Cle(e,t,n,r){const i=n.createTracker(r);let s=i.move("[^");const f=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(e),{after:"]",before:s})),a(),f(),s+=i.move("]"),s}function CMe(){return{enter:{gfmFootnoteCallString:vMe,gfmFootnoteCall:bMe,gfmFootnoteDefinitionLabelString:xMe,gfmFootnoteDefinition:wMe},exit:{gfmFootnoteCallString:SMe,gfmFootnoteCall:TMe,gfmFootnoteDefinitionLabelString:EMe,gfmFootnoteDefinition:AMe}}}function MMe(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Cle},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,f){const a=s.createTracker(f);let p=a.move("[^");const _=s.enter("footnoteDefinition"),S=s.enter("label");return p+=a.move(s.safe(s.associationId(r),{before:p,after:"]"})),S(),p+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),p+=a.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),t?Mle:DMe))),_(),p}}function DMe(e,t,n){return t===0?e:Mle(e,t,n)}function Mle(e,t,n){return(n?"":"    ")+e}const IMe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Dle.peek=zMe;function PMe(){return{canContainEols:["delete"],enter:{strikethrough:kMe},exit:{strikethrough:LMe}}}function RMe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:IMe}],handlers:{delete:Dle}}}function kMe(e){this.enter({type:"delete",children:[]},e)}function LMe(e){this.exit(e)}function Dle(e,t,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let f=i.move("~~");return f+=n.containerPhrasing(e,{...i.current(),before:f,after:"~"}),f+=i.move("~~"),s(),f}function zMe(){return"~"}function FMe(e){return e.length}function NMe(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||FMe,s=[],f=[],a=[],p=[];let _=0,S=-1;for(;++S<e.length;){const U=[],k=[];let V=-1;for(e[S].length>_&&(_=e[S].length);++V<e[S].length;){const K=BMe(e[S][V]);if(n.alignDelimiters!==!1){const J=i(K);k[V]=J,(p[V]===void 0||J>p[V])&&(p[V]=J)}U.push(K)}f[S]=U,a[S]=k}let E=-1;if(typeof r=="object"&&"length"in r)for(;++E<_;)s[E]=TW(r[E]);else{const U=TW(r);for(;++E<_;)s[E]=U}E=-1;const I=[],z=[];for(;++E<_;){const U=s[E];let k="",V="";U===99?(k=":",V=":"):U===108?k=":":U===114&&(V=":");let K=n.alignDelimiters===!1?1:Math.max(1,p[E]-k.length-V.length);const J=k+"-".repeat(K)+V;n.alignDelimiters!==!1&&(K=k.length+K+V.length,K>p[E]&&(p[E]=K),z[E]=K),I[E]=J}f.splice(1,0,I),a.splice(1,0,z),S=-1;const F=[];for(;++S<f.length;){const U=f[S],k=a[S];E=-1;const V=[];for(;++E<_;){const K=U[E]||"";let J="",ie="";if(n.alignDelimiters!==!1){const Q=p[E]-(k[E]||0),W=s[E];W===114?J=" ".repeat(Q):W===99?Q%2?(J=" ".repeat(Q/2+.5),ie=" ".repeat(Q/2-.5)):(J=" ".repeat(Q/2),ie=J):ie=" ".repeat(Q)}n.delimiterStart!==!1&&!E&&V.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&K==="")&&(n.delimiterStart!==!1||E)&&V.push(" "),n.alignDelimiters!==!1&&V.push(J),V.push(K),n.alignDelimiters!==!1&&V.push(ie),n.padding!==!1&&V.push(" "),(n.delimiterEnd!==!1||E!==_-1)&&V.push("|")}F.push(n.delimiterEnd===!1?V.join("").replace(/ +$/,""):V.join(""))}return F.join(`
`)}function BMe(e){return e==null?"":String(e)}function TW(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function jMe(e,t,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const f=n.indentLines(n.containerFlow(e,s.current()),UMe);return i(),f}function UMe(e,t,n){return">"+(n?"":" ")+e}function $Me(e,t){return EW(e,t.inConstruct,!0)&&!EW(e,t.notInConstruct,!1)}function EW(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function AW(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&$Me(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function VMe(e,t){const n=String(e);let r=n.indexOf(t),i=r,s=0,f=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>f&&(f=s):s=1,i=r+t.length,r=n.indexOf(t,i);return f}function qMe(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function HMe(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function GMe(e,t,n,r){const i=HMe(n),s=e.value||"",f=i==="`"?"GraveAccent":"Tilde";if(qMe(e,n)){const E=n.enter("codeIndented"),I=n.indentLines(s,YMe);return E(),I}const a=n.createTracker(r),p=i.repeat(Math.max(VMe(s,i)+1,3)),_=n.enter("codeFenced");let S=a.move(p);if(e.lang){const E=n.enter(`codeFencedLang${f}`);S+=a.move(n.safe(e.lang,{before:S,after:" ",encode:["`"],...a.current()})),E()}if(e.lang&&e.meta){const E=n.enter(`codeFencedMeta${f}`);S+=a.move(" "),S+=a.move(n.safe(e.meta,{before:S,after:`
`,encode:["`"],...a.current()})),E()}return S+=a.move(`
`),s&&(S+=a.move(s+`
`)),S+=a.move(p),_(),S}function YMe(e,t,n){return(n?"":"    ")+e}function V$(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function WMe(e,t,n,r){const i=V$(n),s=i==='"'?"Quote":"Apostrophe",f=n.enter("definition");let a=n.enter("label");const p=n.createTracker(r);let _=p.move("[");return _+=p.move(n.safe(n.associationId(e),{before:_,after:"]",...p.current()})),_+=p.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),_+=p.move("<"),_+=p.move(n.safe(e.url,{before:_,after:">",...p.current()})),_+=p.move(">")):(a=n.enter("destinationRaw"),_+=p.move(n.safe(e.url,{before:_,after:e.title?" ":`
`,...p.current()}))),a(),e.title&&(a=n.enter(`title${s}`),_+=p.move(" "+i),_+=p.move(n.safe(e.title,{before:_,after:i,...p.current()})),_+=p.move(i),a()),f(),_}function XMe(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function L2(e){return"&#x"+e.toString(16).toUpperCase()+";"}function $D(e,t,n){const r=Hw(e),i=Hw(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Ile.peek=ZMe;function Ile(e,t,n,r){const i=XMe(n),s=n.enter("emphasis"),f=n.createTracker(r),a=f.move(i);let p=f.move(n.containerPhrasing(e,{after:i,before:a,...f.current()}));const _=p.charCodeAt(0),S=$D(r.before.charCodeAt(r.before.length-1),_,i);S.inside&&(p=L2(_)+p.slice(1));const E=p.charCodeAt(p.length-1),I=$D(r.after.charCodeAt(0),E,i);I.inside&&(p=p.slice(0,-1)+L2(E));const z=f.move(i);return s(),n.attentionEncodeSurroundingInfo={after:I.outside,before:S.outside},a+p+z}function ZMe(e,t,n){return n.options.emphasis||"*"}function KMe(e,t){let n=!1;return U$(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,dj}),!!((!e.depth||e.depth<3)&&k$(e)&&(t.options.setext||n))}function QMe(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(KMe(e,n)){const S=n.enter("headingSetext"),E=n.enter("phrasing"),I=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return E(),S(),I+`
`+(i===1?"=":"-").repeat(I.length-(Math.max(I.lastIndexOf("\r"),I.lastIndexOf(`
`))+1))}const f="#".repeat(i),a=n.enter("headingAtx"),p=n.enter("phrasing");s.move(f+" ");let _=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(_)&&(_=L2(_.charCodeAt(0))+_.slice(1)),_=_?f+" "+_:f,n.options.closeAtx&&(_+=" "+f),p(),a(),_}Ple.peek=JMe;function Ple(e){return e.value||""}function JMe(){return"<"}Rle.peek=eDe;function Rle(e,t,n,r){const i=V$(n),s=i==='"'?"Quote":"Apostrophe",f=n.enter("image");let a=n.enter("label");const p=n.createTracker(r);let _=p.move("![");return _+=p.move(n.safe(e.alt,{before:_,after:"]",...p.current()})),_+=p.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),_+=p.move("<"),_+=p.move(n.safe(e.url,{before:_,after:">",...p.current()})),_+=p.move(">")):(a=n.enter("destinationRaw"),_+=p.move(n.safe(e.url,{before:_,after:e.title?" ":")",...p.current()}))),a(),e.title&&(a=n.enter(`title${s}`),_+=p.move(" "+i),_+=p.move(n.safe(e.title,{before:_,after:i,...p.current()})),_+=p.move(i),a()),_+=p.move(")"),f(),_}function eDe(){return"!"}kle.peek=tDe;function kle(e,t,n,r){const i=e.referenceType,s=n.enter("imageReference");let f=n.enter("label");const a=n.createTracker(r);let p=a.move("![");const _=n.safe(e.alt,{before:p,after:"]",...a.current()});p+=a.move(_+"]["),f();const S=n.stack;n.stack=[],f=n.enter("reference");const E=n.safe(n.associationId(e),{before:p,after:"]",...a.current()});return f(),n.stack=S,s(),i==="full"||!_||_!==E?p+=a.move(E+"]"):i==="shortcut"?p=p.slice(0,-1):p+=a.move("]"),p}function tDe(){return"!"}Lle.peek=nDe;function Lle(e,t,n){let r=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const f=n.unsafe[s],a=n.compilePattern(f);let p;if(f.atBreak)for(;p=a.exec(r);){let _=p.index;r.charCodeAt(_)===10&&r.charCodeAt(_-1)===13&&_--,r=r.slice(0,_)+" "+r.slice(p.index+1)}}return i+r+i}function nDe(){return"`"}function zle(e,t){const n=k$(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Fle.peek=rDe;function Fle(e,t,n,r){const i=V$(n),s=i==='"'?"Quote":"Apostrophe",f=n.createTracker(r);let a,p;if(zle(e,n)){const S=n.stack;n.stack=[],a=n.enter("autolink");let E=f.move("<");return E+=f.move(n.containerPhrasing(e,{before:E,after:">",...f.current()})),E+=f.move(">"),a(),n.stack=S,E}a=n.enter("link"),p=n.enter("label");let _=f.move("[");return _+=f.move(n.containerPhrasing(e,{before:_,after:"](",...f.current()})),_+=f.move("]("),p(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(p=n.enter("destinationLiteral"),_+=f.move("<"),_+=f.move(n.safe(e.url,{before:_,after:">",...f.current()})),_+=f.move(">")):(p=n.enter("destinationRaw"),_+=f.move(n.safe(e.url,{before:_,after:e.title?" ":")",...f.current()}))),p(),e.title&&(p=n.enter(`title${s}`),_+=f.move(" "+i),_+=f.move(n.safe(e.title,{before:_,after:i,...f.current()})),_+=f.move(i),p()),_+=f.move(")"),a(),_}function rDe(e,t,n){return zle(e,n)?"<":"["}Nle.peek=iDe;function Nle(e,t,n,r){const i=e.referenceType,s=n.enter("linkReference");let f=n.enter("label");const a=n.createTracker(r);let p=a.move("[");const _=n.containerPhrasing(e,{before:p,after:"]",...a.current()});p+=a.move(_+"]["),f();const S=n.stack;n.stack=[],f=n.enter("reference");const E=n.safe(n.associationId(e),{before:p,after:"]",...a.current()});return f(),n.stack=S,s(),i==="full"||!_||_!==E?p+=a.move(E+"]"):i==="shortcut"?p=p.slice(0,-1):p+=a.move("]"),p}function iDe(){return"["}function q$(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function aDe(e){const t=q$(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function oDe(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Ble(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function sDe(e,t,n,r){const i=n.enter("list"),s=n.bulletCurrent;let f=e.ordered?oDe(n):q$(n);const a=e.ordered?f==="."?")":".":aDe(n);let p=t&&n.bulletLastUsed?f===n.bulletLastUsed:!1;if(!e.ordered){const S=e.children?e.children[0]:void 0;if((f==="*"||f==="-")&&S&&(!S.children||!S.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(p=!0),Ble(n)===f&&S){let E=-1;for(;++E<e.children.length;){const I=e.children[E];if(I&&I.type==="listItem"&&I.children&&I.children[0]&&I.children[0].type==="thematicBreak"){p=!0;break}}}}p&&(f=a),n.bulletCurrent=f;const _=n.containerFlow(e,r);return n.bulletLastUsed=f,n.bulletCurrent=s,i(),_}function lDe(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function uDe(e,t,n,r){const i=lDe(n);let s=n.bulletCurrent||q$(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let f=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(f=Math.ceil(f/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(f-s.length)),a.shift(f);const p=n.enter("listItem"),_=n.indentLines(n.containerFlow(e,a.current()),S);return p(),_;function S(E,I,z){return I?(z?"":" ".repeat(f))+E:(z?s:s+" ".repeat(f-s.length))+E}}function cDe(e,t,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),f=n.containerPhrasing(e,r);return s(),i(),f}const fDe=GP(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function hDe(e,t,n,r){return(e.children.some(function(f){return fDe(f)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function dDe(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}jle.peek=pDe;function jle(e,t,n,r){const i=dDe(n),s=n.enter("strong"),f=n.createTracker(r),a=f.move(i+i);let p=f.move(n.containerPhrasing(e,{after:i,before:a,...f.current()}));const _=p.charCodeAt(0),S=$D(r.before.charCodeAt(r.before.length-1),_,i);S.inside&&(p=L2(_)+p.slice(1));const E=p.charCodeAt(p.length-1),I=$D(r.after.charCodeAt(0),E,i);I.inside&&(p=p.slice(0,-1)+L2(E));const z=f.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:I.outside,before:S.outside},a+p+z}function pDe(e,t,n){return n.options.strong||"*"}function mDe(e,t,n,r){return n.safe(e.value,r)}function gDe(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function yDe(e,t,n){const r=(Ble(n)+(n.options.ruleSpaces?" ":"")).repeat(gDe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Ule={blockquote:jMe,break:AW,code:GMe,definition:WMe,emphasis:Ile,hardBreak:AW,heading:QMe,html:Ple,image:Rle,imageReference:kle,inlineCode:Lle,link:Fle,linkReference:Nle,list:sDe,listItem:uDe,paragraph:cDe,root:hDe,strong:jle,text:mDe,thematicBreak:yDe};function _De(){return{enter:{table:vDe,tableData:OW,tableHeader:OW,tableRow:xDe},exit:{codeText:wDe,table:bDe,tableData:$3,tableHeader:$3,tableRow:$3}}}function vDe(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function bDe(e){this.exit(e),this.data.inTable=void 0}function xDe(e){this.enter({type:"tableRow",children:[]},e)}function $3(e){this.exit(e)}function OW(e){this.enter({type:"tableCell",children:[]},e)}function wDe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,SDe));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function SDe(e,t){return t==="|"?t:e}function TDe(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:I,table:f,tableCell:p,tableRow:a}};function f(z,F,U,k){return _(S(z,U,k),z.align)}function a(z,F,U,k){const V=E(z,U,k),K=_([V]);return K.slice(0,K.indexOf(`
`))}function p(z,F,U,k){const V=U.enter("tableCell"),K=U.enter("phrasing"),J=U.containerPhrasing(z,{...k,before:s,after:s});return K(),V(),J}function _(z,F){return NMe(z,{align:F,alignDelimiters:r,padding:n,stringLength:i})}function S(z,F,U){const k=z.children;let V=-1;const K=[],J=F.enter("table");for(;++V<k.length;)K[V]=E(k[V],F,U);return J(),K}function E(z,F,U){const k=z.children;let V=-1;const K=[],J=F.enter("tableRow");for(;++V<k.length;)K[V]=p(k[V],z,F,U);return J(),K}function I(z,F,U){let k=Ule.inlineCode(z,F,U);return U.stack.includes("tableCell")&&(k=k.replace(/\|/g,"\\$&")),k}}function EDe(){return{exit:{taskListCheckValueChecked:CW,taskListCheckValueUnchecked:CW,paragraph:ODe}}}function ADe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:CDe}}}function CW(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function ODe(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let s=-1,f;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){f=a;break}}f===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function CDe(e,t,n,r){const i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",f="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(f);let p=Ule.listItem(e,t,n,{...r,...a.current()});return s&&(p=p.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,_)),p;function _(S){return S+f}}function MDe(){return[sMe(),CMe(),PMe(),_De(),EDe()]}function DDe(e){return{extensions:[lMe(),MMe(e),RMe(),TDe(e),ADe()]}}const IDe={tokenize:FDe,partial:!0},$le={tokenize:NDe,partial:!0},Vle={tokenize:BDe,partial:!0},qle={tokenize:jDe,partial:!0},PDe={tokenize:UDe,partial:!0},Hle={name:"wwwAutolink",tokenize:LDe,previous:Yle},Gle={name:"protocolAutolink",tokenize:zDe,previous:Wle},f_={name:"emailAutolink",tokenize:kDe,previous:Xle},hg={};function RDe(){return{text:hg}}let Mb=48;for(;Mb<123;)hg[Mb]=f_,Mb++,Mb===58?Mb=65:Mb===91&&(Mb=97);hg[43]=f_;hg[45]=f_;hg[46]=f_;hg[95]=f_;hg[72]=[f_,Gle];hg[104]=[f_,Gle];hg[87]=[f_,Hle];hg[119]=[f_,Hle];function kDe(e,t,n){const r=this;let i,s;return f;function f(E){return!yj(E)||!Xle.call(r,r.previous)||H$(r.events)?n(E):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(E))}function a(E){return yj(E)?(e.consume(E),a):E===64?(e.consume(E),p):n(E)}function p(E){return E===46?e.check(PDe,S,_)(E):E===45||E===95||Ou(E)?(s=!0,e.consume(E),p):S(E)}function _(E){return e.consume(E),i=!0,p}function S(E){return s&&i&&hc(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(E)):n(E)}}function LDe(e,t,n){const r=this;return i;function i(f){return f!==87&&f!==119||!Yle.call(r,r.previous)||H$(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(IDe,e.attempt($le,e.attempt(Vle,s),n),n)(f))}function s(f){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(f)}}function zDe(e,t,n){const r=this;let i="",s=!1;return f;function f(E){return(E===72||E===104)&&Wle.call(r,r.previous)&&!H$(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(E),e.consume(E),a):n(E)}function a(E){if(hc(E)&&i.length<5)return i+=String.fromCodePoint(E),e.consume(E),a;if(E===58){const I=i.toLowerCase();if(I==="http"||I==="https")return e.consume(E),p}return n(E)}function p(E){return E===47?(e.consume(E),s?_:(s=!0,p)):n(E)}function _(E){return E===null||BD(E)||ao(E)||px(E)||VP(E)?n(E):e.attempt($le,e.attempt(Vle,S),n)(E)}function S(E){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(E)}}function FDe(e,t,n){let r=0;return i;function i(f){return(f===87||f===119)&&r<3?(r++,e.consume(f),i):f===46&&r===3?(e.consume(f),s):n(f)}function s(f){return f===null?n(f):t(f)}}function NDe(e,t,n){let r,i,s;return f;function f(_){return _===46||_===95?e.check(qle,p,a)(_):_===null||ao(_)||px(_)||_!==45&&VP(_)?p(_):(s=!0,e.consume(_),f)}function a(_){return _===95?r=!0:(i=r,r=void 0),e.consume(_),f}function p(_){return i||r||!s?n(_):t(_)}}function BDe(e,t){let n=0,r=0;return i;function i(f){return f===40?(n++,e.consume(f),i):f===41&&r<n?s(f):f===33||f===34||f===38||f===39||f===41||f===42||f===44||f===46||f===58||f===59||f===60||f===63||f===93||f===95||f===126?e.check(qle,t,s)(f):f===null||ao(f)||px(f)?t(f):(e.consume(f),i)}function s(f){return f===41&&r++,e.consume(f),i}}function jDe(e,t,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),r):a===38?(e.consume(a),s):a===93?(e.consume(a),i):a===60||a===null||ao(a)||px(a)?t(a):n(a)}function i(a){return a===null||a===40||a===91||ao(a)||px(a)?t(a):r(a)}function s(a){return hc(a)?f(a):n(a)}function f(a){return a===59?(e.consume(a),r):hc(a)?(e.consume(a),f):n(a)}}function UDe(e,t,n){return r;function r(s){return e.consume(s),i}function i(s){return Ou(s)?n(s):t(s)}}function Yle(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||ao(e)}function Wle(e){return!hc(e)}function Xle(e){return!(e===47||yj(e))}function yj(e){return e===43||e===45||e===46||e===95||Ou(e)}function H$(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const $De={tokenize:ZDe,partial:!0};function VDe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:YDe,continuation:{tokenize:WDe},exit:XDe}},text:{91:{name:"gfmFootnoteCall",tokenize:GDe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:qDe,resolveTo:HDe}}}}function qDe(e,t,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let f;for(;i--;){const p=r.events[i][1];if(p.type==="labelImage"){f=p;break}if(p.type==="gfmFootnoteCall"||p.type==="labelLink"||p.type==="label"||p.type==="image"||p.type==="link")break}return a;function a(p){if(!f||!f._balanced)return n(p);const _=_p(r.sliceSerialize({start:f.end,end:r.now()}));return _.codePointAt(0)!==94||!s.includes(_.slice(1))?n(p):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),t(p))}}function HDe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},f={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",f,t],["exit",f,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function GDe(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,f;return a;function a(E){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(E),e.exit("gfmFootnoteCallLabelMarker"),p}function p(E){return E!==94?n(E):(e.enter("gfmFootnoteCallMarker"),e.consume(E),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",_)}function _(E){if(s>999||E===93&&!f||E===null||E===91||ao(E))return n(E);if(E===93){e.exit("chunkString");const I=e.exit("gfmFootnoteCallString");return i.includes(_p(r.sliceSerialize(I)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(E),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(E)}return ao(E)||(f=!0),s++,e.consume(E),E===92?S:_}function S(E){return E===91||E===92||E===93?(e.consume(E),s++,_):_(E)}}function YDe(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,f=0,a;return p;function p(F){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(F),e.exit("gfmFootnoteDefinitionLabelMarker"),_}function _(F){return F===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(F),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",S):n(F)}function S(F){if(f>999||F===93&&!a||F===null||F===91||ao(F))return n(F);if(F===93){e.exit("chunkString");const U=e.exit("gfmFootnoteDefinitionLabelString");return s=_p(r.sliceSerialize(U)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(F),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),I}return ao(F)||(a=!0),f++,e.consume(F),F===92?E:S}function E(F){return F===91||F===92||F===93?(e.consume(F),f++,S):S(F)}function I(F){return F===58?(e.enter("definitionMarker"),e.consume(F),e.exit("definitionMarker"),i.includes(s)||i.push(s),ma(e,z,"gfmFootnoteDefinitionWhitespace")):n(F)}function z(F){return t(F)}}function WDe(e,t,n){return e.check(KA,t,e.attempt($De,t,n))}function XDe(e){e.exit("gfmFootnoteDefinition")}function ZDe(e,t,n){const r=this;return ma(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const f=r.events[r.events.length-1];return f&&f[1].type==="gfmFootnoteDefinitionIndent"&&f[2].sliceSerialize(f[1],!0).length===4?t(s):n(s)}}function KDe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(f,a){let p=-1;for(;++p<f.length;)if(f[p][0]==="enter"&&f[p][1].type==="strikethroughSequenceTemporary"&&f[p][1]._close){let _=p;for(;_--;)if(f[_][0]==="exit"&&f[_][1].type==="strikethroughSequenceTemporary"&&f[_][1]._open&&f[p][1].end.offset-f[p][1].start.offset===f[_][1].end.offset-f[_][1].start.offset){f[p][1].type="strikethroughSequence",f[_][1].type="strikethroughSequence";const S={type:"strikethrough",start:Object.assign({},f[_][1].start),end:Object.assign({},f[p][1].end)},E={type:"strikethroughText",start:Object.assign({},f[_][1].end),end:Object.assign({},f[p][1].start)},I=[["enter",S,a],["enter",f[_][1],a],["exit",f[_][1],a],["enter",E,a]],z=a.parser.constructs.insideSpan.null;z&&Qf(I,I.length,0,qP(z,f.slice(_+1,p),a)),Qf(I,I.length,0,[["exit",E,a],["enter",f[p][1],a],["exit",f[p][1],a],["exit",S,a]]),Qf(f,_-1,p-_+3,I),p=_+I.length-2;break}}for(p=-1;++p<f.length;)f[p][1].type==="strikethroughSequenceTemporary"&&(f[p][1].type="data");return f}function s(f,a,p){const _=this.previous,S=this.events;let E=0;return I;function I(F){return _===126&&S[S.length-1][1].type!=="characterEscape"?p(F):(f.enter("strikethroughSequenceTemporary"),z(F))}function z(F){const U=Hw(_);if(F===126)return E>1?p(F):(f.consume(F),E++,z);if(E<2&&!n)return p(F);const k=f.exit("strikethroughSequenceTemporary"),V=Hw(F);return k._open=!V||V===2&&!!U,k._close=!U||U===2&&!!V,a(F)}}}class QDe{constructor(){this.map=[]}add(t,n,r){JDe(this,t,n,r)}consume(t){if(this.map.sort(function(s,f){return s[0]-f[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const s of i)t.push(s);i=r.pop()}this.map.length=0}}function JDe(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function eIe(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function tIe(){return{flow:{null:{name:"table",tokenize:nIe,resolveAll:rIe}}}}function nIe(e,t,n){const r=this;let i=0,s=0,f;return a;function a(le){let ge=r.events.length-1;for(;ge>-1;){const He=r.events[ge][1].type;if(He==="lineEnding"||He==="linePrefix")ge--;else break}const ye=ge>-1?r.events[ge][1].type:null,De=ye==="tableHead"||ye==="tableRow"?W:p;return De===W&&r.parser.lazy[r.now().line]?n(le):De(le)}function p(le){return e.enter("tableHead"),e.enter("tableRow"),_(le)}function _(le){return le===124||(f=!0,s+=1),S(le)}function S(le){return le===null?n(le):Wr(le)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(le),e.exit("lineEnding"),z):n(le):Hi(le)?ma(e,S,"whitespace")(le):(s+=1,f&&(f=!1,i+=1),le===124?(e.enter("tableCellDivider"),e.consume(le),e.exit("tableCellDivider"),f=!0,S):(e.enter("data"),E(le)))}function E(le){return le===null||le===124||ao(le)?(e.exit("data"),S(le)):(e.consume(le),le===92?I:E)}function I(le){return le===92||le===124?(e.consume(le),E):E(le)}function z(le){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(le):(e.enter("tableDelimiterRow"),f=!1,Hi(le)?ma(e,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(le):F(le))}function F(le){return le===45||le===58?k(le):le===124?(f=!0,e.enter("tableCellDivider"),e.consume(le),e.exit("tableCellDivider"),U):Q(le)}function U(le){return Hi(le)?ma(e,k,"whitespace")(le):k(le)}function k(le){return le===58?(s+=1,f=!0,e.enter("tableDelimiterMarker"),e.consume(le),e.exit("tableDelimiterMarker"),V):le===45?(s+=1,V(le)):le===null||Wr(le)?ie(le):Q(le)}function V(le){return le===45?(e.enter("tableDelimiterFiller"),K(le)):Q(le)}function K(le){return le===45?(e.consume(le),K):le===58?(f=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(le),e.exit("tableDelimiterMarker"),J):(e.exit("tableDelimiterFiller"),J(le))}function J(le){return Hi(le)?ma(e,ie,"whitespace")(le):ie(le)}function ie(le){return le===124?F(le):le===null||Wr(le)?!f||i!==s?Q(le):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(le)):Q(le)}function Q(le){return n(le)}function W(le){return e.enter("tableRow"),te(le)}function te(le){return le===124?(e.enter("tableCellDivider"),e.consume(le),e.exit("tableCellDivider"),te):le===null||Wr(le)?(e.exit("tableRow"),t(le)):Hi(le)?ma(e,te,"whitespace")(le):(e.enter("data"),X(le))}function X(le){return le===null||le===124||ao(le)?(e.exit("data"),te(le)):(e.consume(le),le===92?ae:X)}function ae(le){return le===92||le===124?(e.consume(le),X):X(le)}}function rIe(e,t){let n=-1,r=!0,i=0,s=[0,0,0,0],f=[0,0,0,0],a=!1,p=0,_,S,E;const I=new QDe;for(;++n<e.length;){const z=e[n],F=z[1];z[0]==="enter"?F.type==="tableHead"?(a=!1,p!==0&&(MW(I,t,p,_,S),S=void 0,p=0),_={type:"table",start:Object.assign({},F.start),end:Object.assign({},F.end)},I.add(n,0,[["enter",_,t]])):F.type==="tableRow"||F.type==="tableDelimiterRow"?(r=!0,E=void 0,s=[0,0,0,0],f=[0,n+1,0,0],a&&(a=!1,S={type:"tableBody",start:Object.assign({},F.start),end:Object.assign({},F.end)},I.add(n,0,[["enter",S,t]])),i=F.type==="tableDelimiterRow"?2:S?3:1):i&&(F.type==="data"||F.type==="tableDelimiterMarker"||F.type==="tableDelimiterFiller")?(r=!1,f[2]===0&&(s[1]!==0&&(f[0]=f[1],E=cM(I,t,s,i,void 0,E),s=[0,0,0,0]),f[2]=n)):F.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(f[0]=f[1],E=cM(I,t,s,i,void 0,E)),s=f,f=[s[1],n,0,0])):F.type==="tableHead"?(a=!0,p=n):F.type==="tableRow"||F.type==="tableDelimiterRow"?(p=n,s[1]!==0?(f[0]=f[1],E=cM(I,t,s,i,n,E)):f[1]!==0&&(E=cM(I,t,f,i,n,E)),i=0):i&&(F.type==="data"||F.type==="tableDelimiterMarker"||F.type==="tableDelimiterFiller")&&(f[3]=n)}for(p!==0&&MW(I,t,p,_,S),I.consume(t.events),n=-1;++n<t.events.length;){const z=t.events[n];z[0]==="enter"&&z[1].type==="table"&&(z[1]._align=eIe(t.events,n))}return e}function cM(e,t,n,r,i,s){const f=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},hw(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const p=hw(t.events,n[1]);if(s={type:f,start:Object.assign({},p),end:Object.assign({},p)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const _=hw(t.events,n[2]),S=hw(t.events,n[3]),E={type:a,start:Object.assign({},_),end:Object.assign({},S)};if(e.add(n[2],0,[["enter",E,t]]),r!==2){const I=t.events[n[2]],z=t.events[n[3]];if(I[1].end=Object.assign({},z[1].end),I[1].type="chunkText",I[1].contentType="text",n[3]>n[2]+1){const F=n[2]+1,U=n[3]-n[2]-1;e.add(F,U,[])}}e.add(n[3]+1,0,[["exit",E,t]])}return i!==void 0&&(s.end=Object.assign({},hw(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function MW(e,t,n,r,i){const s=[],f=hw(t.events,n);i&&(i.end=Object.assign({},f),s.push(["exit",i,t])),r.end=Object.assign({},f),s.push(["exit",r,t]),e.add(n+1,0,s)}function hw(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const iIe={name:"tasklistCheck",tokenize:oIe};function aIe(){return{text:{91:iIe}}}function oIe(e,t,n){const r=this;return i;function i(p){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(p):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(p),e.exit("taskListCheckMarker"),s)}function s(p){return ao(p)?(e.enter("taskListCheckValueUnchecked"),e.consume(p),e.exit("taskListCheckValueUnchecked"),f):p===88||p===120?(e.enter("taskListCheckValueChecked"),e.consume(p),e.exit("taskListCheckValueChecked"),f):n(p)}function f(p){return p===93?(e.enter("taskListCheckMarker"),e.consume(p),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(p)}function a(p){return Wr(p)?t(p):Hi(p)?e.check({tokenize:sIe},t,n)(p):n(p)}}function sIe(e,t,n){return ma(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function lIe(e){return ole([RDe(),VDe(),KDe(e),tIe(),aIe()])}const uIe={};function fM(e){const t=this,n=e||uIe,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),f=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(lIe(n)),s.push(MDe()),f.push(DDe(n))}const cIe=e=>e.endsWith("/")?e:`${e}/`,fIe=e=>{const t=e.trim();return t.startsWith("mapbox://styles/")||t.startsWith("http://")||t.startsWith("https://")?t:/^[^/]+\/[^/]+$/.test(t)?`mapbox://styles/${t}`:t},Zle=(e,t=!1)=>typeof e!="string"?t:["true","1","yes","on"].includes(e.trim().toLowerCase()),$v="/rainfall/",Jv=cIe("https://trwwapi.herokuapp.com/rainfall/"),hIe="pk.eyJ1IjoiY2l2aWNtYXBwZXIiLCJhIjoiY21rem9hc2NyMDN5ZzNkcHZ1Ymt1Z29iMCJ9.jbnLEUoBE1XbZ6K6EqmDVQ",dIe=fIe("mapbox://styles/mapbox/light-v11"),WP=Zle("false",!1),pIe=Zle("true",!1),mIe=`${$v}static/config.json`,gIe=`${Jv}rainfall-events/?format=json`,yIe=`${Jv}v2/latest-observations/?format=json`,_Ie=`${Jv}pixels/`,vIe=`${Jv}gauges/`,bIe=`${$v}static/data/geography-lookup.json`,xIe=1500,DW=["15-minute","Hourly","Daily","Total"],VD="5-minute",G$="2018-07-01",Km={historic:"historic",realtime:"realtime"},zl={pixel:"pixel",gauge:"gauge"},fi={legacyRealtime:"legacyRealtime",legacyGauge:"legacyGauge",legacyGarr:"legacyGarr"},Kle=e=>e===fi.legacyGauge?[zl.gauge]:e===fi.legacyGarr?[zl.pixel]:[zl.pixel,zl.gauge],Qle=e=>e===fi.legacyGauge||e===fi.legacyGarr,wIe=e=>Qle(e)?[VD,...DW]:DW,Jle=({contextType:e,rainfallDataType:t,rollup:n})=>Qle(e)&&t===Km.historic&&n===VD?"historic5":t,SIe=({contextType:e,rainfallDataType:t,rollup:n})=>Jle({contextType:e,rainfallDataType:t,rollup:n})!=="historic5",Gw="HOVER",V3="HIGHLIGHT",TIe=[{INDEX:8,id:"pixel",type:"line",source:"pixel",layout:{},paint:{"line-color":"hsl(209, 25%, 55%)","line-width":.5,"line-opacity":.2}},{INDEX:68,id:`${V3}-pixel-fill`,type:"fill",source:"pixel",layout:{},paint:{"fill-color":"#2196f3","fill-opacity":["case",["boolean",["get","selected"],!1],.2,0]}},{INDEX:70,id:`${V3}-pixel`,type:"line",source:"pixel",layout:{},paint:{"line-color":"#2196f3","line-width":1,"line-opacity":["case",["boolean",["get","selected"],!1],1,0]}},{INDEX:69,id:"pixel-results",type:"fill",source:"pixel",layout:{},paint:{"fill-color":["match",["get","total"],"","#fff",["interpolate",["linear"],["get","total"],0,"#fafa6e",10,"#2A4858"]],"fill-opacity":["match",["get","total"],"",0,.8]}},{INDEX:71,id:`${Gw}-pixel`,type:"fill",source:"pixel",layout:{},paint:{"fill-color":"#cad2d3","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.8,0]}},{INDEX:72,id:`${V3}-gauge`,type:"circle",source:"gauge",layout:{},paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,6,18,12],"circle-color":"#2196f3","circle-stroke-color":"#fff","circle-stroke-width":2,"circle-opacity":["case",["boolean",["get","selected"],!1],.4,0],"circle-stroke-opacity":["case",["boolean",["get","selected"],!1],1,0]}},{INDEX:73,id:`${Gw}-gauge`,type:"circle",source:"gauge",layout:{},paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,6,18,12],"circle-color":"hsl(209, 25%, 55%)","circle-stroke-color":"#fff","circle-stroke-width":2,"circle-opacity":["case",["boolean",["feature-state","hover"],!1],1,0],"circle-stroke-opacity":["case",["boolean",["feature-state","hover"],!1],1,0]}},{id:"pixel-points",type:"circle",source:"pixel",layout:{visibility:"none"},paint:{"circle-color":"hsl(209, 25%, 55%)","circle-opacity":0,"circle-stroke-width":1,"circle-stroke-color":"hsl(0, 0%, 31%)","circle-radius":0}},{id:"gauges",type:"circle",source:"gauge",paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,3,18,9],"circle-stroke-color":"hsl(0, 100%, 100%)","circle-stroke-opacity":.5,"circle-color":"#708da9"}},{id:"gauge-results",type:"circle",source:"gauge",layout:{},paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,8,18,14],"circle-stroke-color":"#fff","circle-stroke-width":2,"circle-color":["match",["get","total"],"","#fff",["interpolate",["linear"],["get","total"],0,"#fafa6e",10,"#2A4858"]],"circle-opacity":["match",["get","total"],"",0,1],"circle-stroke-opacity":["match",["get","total"],"",0,1]}},{id:"gauges-labels",type:"symbol",source:"gauge",layout:{"text-field":["to-string",["get","name"]],"text-anchor":"top","text-size":["interpolate",["linear"],["zoom"],8,12,18,18],"text-offset":[0,.75]},paint:{"text-color":"#708da9","text-halo-width":2,"text-halo-color":"hsl(0, 0%, 100%)"}}],EIe=[[`${Gw}-pixel`,"pixel"],[`${Gw}-gauge`,"gauge"]],q3=e=>{const t={[zl.pixel]:`${Gw}-pixel`,[zl.gauge]:`${Gw}-gauge`};return Kle(e).map(n=>t[n]).filter(n=>n!==void 0)},AIe=["pixel-results","gauge-results"],eue=["#fde725","#5dc962","#20908d","#3a528b","#440154"],tue="lch",OIe=7,CIe=[.01,.02,.04,.06,.08,.1,.12,.15,.2,.25,.3,.35,.4,.45,.5],Y$=[.1,.2,.4,.6,.8,1,1.5,2,2.5,3,3.5,4,4.5,5],MIe=[.2,.4,.8,1,1.2,1.6,2,2.4,3,4,5,6,7,8,9,10],nue={breaks_005:CIe,breaks_050:Y$,breaks_100:MIe},DIe=`
Have you ever wondered how rainfall is actually measured? Technical instruments, called rain gauges, are designed to collect and accurately measure rainfall during wet weather events. However, a rain gauge can only provide a specific rainfall measurement for the limited geographic area where the gauge is located.

On the flip side, radar systems, often used in weather reports, do not measure rainfall directly, but rather they detect the intensity of microwave energy reflected by raindrops, called reflectivity. Through the use of a mathematical formula, the reflectivity of the raindrops can be converted by the radar system into rainfall estimates for a particular defined area.

Neither measurement technique is perfect, but when the two are combinedwhen radar estimates are calibrated with actual rain gauge dataa highly accurate and valuable source of rainfall data can be calculated over large geographic areas.

Because engineers and planners addressing the wet weather issue need this level of accuracy, 3 Rivers Wet Weather created the calibrated radar rainfall system in 2001. Communities throughout Allegheny County use this dataprovided in both real-time and historical formatsto design more cost-effective solutions to reduce or eliminate sewage overflows and improve stormwater management.

The NEXRAD radar (located in Moon Township) data is calibrated with the rain gauge measurements collected during the same time period and rain event for every square kilometer in Allegheny County. The resulting rainfall data is equivalent in accuracy to having 2,313 rain gauges placed across the County.
`,IIe=`

Currently, this site offers rainfall data in three buckets:

* **Real-time Rainfall** data: provisional rainfall data from both rain gauges and radar pixels, updated every 15 minutes.
* **Historical Rain Gauge** data: QA/QC'd rain gauge data, updated by the month within 30-60 days
* **Calibrated Radar Rainfall** data: QA/QC'd, gauge-adjusted radar rainfall observations, updated by the month within 30-60 days

### Real-time Rainfall Data

Provisional data from 3RWW's 33 rain gauges and NEXRAD radar pixels is collected and updated every 15 minutes to provide accurate, quality rainfall information as it is occurring. This includes both gauge and radar rainfall data, provided by [DataWise](https://datawise.software/) and [Vieux Associates](https://www.vieuxinc.com/), respectively.

> *Data users are cautioned to consider carefully the provisional nature of the information before using it for decisions. Information concerning the accuracy and appropriate uses of these data or concerning other hydrologic data may be obtained from the 3RWW.*

### Historical Rain Gauge

The data from 33 rain gauges, which typically is updated to include data points not transmitted by the gauges in real-time, is available in this section. The data may be retrieved for any combination of the rain gauges during a specified time span. The data may also be displayed in 15-minute increments or aggregated to hourly or daily data points. [ALCOSAN](https://www.alcosan.org/) provides QA/QC'd rain gauge data.

### Calibrated Radar Rainfall

The calibrated radar rainfall section allows the retrieval of archived gauge-adjusted radar rainfall data for each of the 2313 pixels mapped by the NEXRAD radar cross-section. Calibration is performed by [Vieux Associates](https://www.vieuxinc.com/).

---

# Need something more powerful?

For technical users requiring a more powerful visualization, querying, and data exploration capability, Vieux Associates provides an advanced internal tool at [vip.vieuxinc.com](https://vip.vieuxinc.com/). To request access, please email [info@3rww.org](mailto:info@3rww.org).
`,PIe=`
## Querying Rainfall

Querying the rainfall data requires selecting the "when" and the "where".

* First, select the start and end date/time. The available calendar selector provides pre-defined time ranges to help select time periods of interest. For historic gauge and calibrated radar rainfall data, a list of documented rainfall events provides another shortcut to selected date/time ranges.
* Next, select the gauges or radar pixels. You can do this by 
  * clicking on the map;
  * under "Where" in the "By Sensor" tab: selecting or typing (If you know the name or ID of the sensor) in the dropdown menus.
  * under "Where" in the "By Geography" tab: selecting an ALCOSAN Planning Basin, Municipality, or Watershed, which will in turn select all coincident pixels for you
* Then, optionally select the time interval to aggregate the results on: 15-minute (default), hourly, daily, or sum total. Rainfall data is collected and stored in 15-minute increments, which allows for 15-minute, hourly, and daily aggregations to be calculated. Note that if a daily interval is selected, the start and end selections will begin at midnight and the start and end hour will be ignored.
* Finally, Press "Get Rainfall Data" button to get the data.

Query results will be listed in a panel below on each page and shown on the map. The tabular data output may be viewed and downloaded on the page by selecting the 'View and Download Results' Button. Download formats currently include a CSV tabular format, for use in spreadsheet software. Spatial formats will be included in the future.

The output table for each query result contains:

* a gauge or pixel ID
* date/time columns formatted for spreadsheet compatibility as 'MM/DD/YYYY HH:mm:ss'. For hourly and daily aggregations, the observation window is exported as separate \`start_ts\` and \`end_ts\` columns.
* a rainfall amount (in inches) 
* a source code, which indicates where the rainfall measurement came from. While all results include this, only Calibrated Radar Rainfall data will potentially indicate different codes, depending on the calibration methodology.

The following table describes the source code.

| Source |	Description |
| --- | --- |
| R |	Calibrated radar rainfall data |
| G-0 | No gauge or calibrated radar rainfall data is available, but not for the reasons given for N/D below |
| G-1 |	Derived from inverse distance squared weighting based on one rain gauge |
| G-2 |	Derived from inverse distance squared weighting based on two rain gauges |
| G-3 |	Derived from inverse distance squared weighting based on three rain gauges |
| N/D |	No data was collected for this data point. This may be because no data was collected at the time or the pixel may be outside of the data collection boundary. |
| RTRR | Real-time radar rainfall. Data shown are provisional.|
| RTRG | Real-time rain gauge data. Data shown are provisional. |

> Note that the source code only appears for the 15-minute increments. Hourly or daily increment may include different source codes, depending on calibration method.
`,RIe=`
## 3RWW Data API

The rainfall data is served up from 3RWW's Data **A**pplication **P**rogramming **I**nterface (API). Currently a few functions are documented and available through [${Jv}](${Jv}).

For API usage examples, see [this Jupyter notebook](https://github.com/3rww/notebooks/blob/master/rainfall/Engaging%20Rain%20Gauges.ipynb).

## Project Roadmap

You can view the project roadmap on [Github](https://github.com/3rww/rainfall/projects/1). 

Encounter a bug or want to make a feature request? Submit an [issue](https://github.com/3rww/rainfall/issues) or email [3rww@civicmapper.com](mailto:3rww@civicmapper.com)


`,kIe=()=>Oe.jsxs(g$,{defaultActiveKey:"what2",id:"about-tabs",variant:"pills",mountOnEnter:!0,children:[Oe.jsx(Bb,{eventKey:"what2",title:"Overview",children:Oe.jsxs("div",{className:"about-body",children:[Oe.jsxs("p",{className:"big-lead my-5",children:[Oe.jsx("strong",{children:"3RWW Rainfall"})," provides public access to high-resolution rainfall data downloads from gauges system and NEXRAD radar to support engineers and planners addressing wet weather issues in Allegheny County."]}),Oe.jsxs(Ub,{body:!0,className:"about-logo-background mb-5",children:[Oe.jsx("p",{children:"This app is made possible with support from:"}),Oe.jsxs(ia,{className:"g-0",children:[Oe.jsx(kr,{sm:5,children:Oe.jsx(eD,{className:"about-logo mx-auto",src:`${$v}static/assets/vieux-logo-white-300.png`,placeholder:"Vieux Associates",alt:"Vieux Associates",fluid:!0})}),Oe.jsx(kr,{sm:2,children:Oe.jsx(eD,{className:"about-logo mx-auto",src:`${$v}static/assets/alcosan-logo.svg`,placeholder:"ALCOSAN",alt:"ALCOSAN",fluid:!0})}),Oe.jsx(kr,{sm:5,children:Oe.jsx(eD,{className:"about-logo mx-auto",src:`${$v}static/assets/DataWise.png`,placeholder:"DataWise",alt:"DataWise",fluid:!0})})]})]}),Oe.jsx(uM,{remarkPlugins:[fM],children:IIe})]})}),Oe.jsx(Bb,{eventKey:"what1",title:"Methods",children:Oe.jsx("div",{className:"about-body",children:Oe.jsx(uM,{remarkPlugins:[fM],children:DIe})})}),Oe.jsx(Bb,{eventKey:"how1",title:"Getting Data",children:Oe.jsx("div",{className:"about-body",children:Oe.jsx(uM,{remarkPlugins:[fM],children:PIe})})}),Oe.jsx(Bb,{eventKey:"more",title:"Demos",children:Oe.jsxs("div",{className:"about-body",children:[Oe.jsx("h3",{children:"2021 Webinar"}),Oe.jsx("p",{children:"Our January 2021 webinar provides an overview of the rainfall system and a how-to for using this site."}),Oe.jsx("div",{className:"ratio ratio-16x9",children:Oe.jsx("iframe",{src:"https://www.youtube.com/embed/mwOu2QRx6oU",title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),Oe.jsx("hr",{}),Oe.jsx("h3",{children:"Boundary-based selections"}),Oe.jsx("p",{children:"A quick demo of the boundary-based selection feature:"}),Oe.jsx("div",{className:"ratio ratio-16x9",children:Oe.jsx("iframe",{src:"https://capture.dropbox.com/embed/XSWyyjHt6nXx2PdN?source=copy-embed",title:"Boundary-based selections demo",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}),Oe.jsx(Bb,{eventKey:"how2",title:"Under the Hood",children:Oe.jsx("div",{className:"about-body",children:Oe.jsx(uM,{remarkPlugins:[fM],children:RIe})})})]});function rue(e,t){return function(){return e.apply(t,arguments)}}const{toString:LIe}=Object.prototype,{getPrototypeOf:W$}=Object,{iterator:XP,toStringTag:iue}=Symbol,ZP=(e=>t=>{const n=LIe.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Op=e=>(e=e.toLowerCase(),t=>ZP(t)===e),KP=e=>t=>typeof t===e,{isArray:qS}=Array,Yw=KP("undefined");function JA(e){return e!==null&&!Yw(e)&&e.constructor!==null&&!Yw(e.constructor)&&ef(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const aue=Op("ArrayBuffer");function zIe(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&aue(e.buffer),t}const FIe=KP("string"),ef=KP("function"),oue=KP("number"),eO=e=>e!==null&&typeof e=="object",NIe=e=>e===!0||e===!1,iD=e=>{if(ZP(e)!=="object")return!1;const t=W$(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(iue in e)&&!(XP in e)},BIe=e=>{if(!eO(e)||JA(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},jIe=Op("Date"),UIe=Op("File"),$Ie=Op("Blob"),VIe=Op("FileList"),qIe=e=>eO(e)&&ef(e.pipe),HIe=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ef(e.append)&&((t=ZP(e))==="formdata"||t==="object"&&ef(e.toString)&&e.toString()==="[object FormData]"))},GIe=Op("URLSearchParams"),[YIe,WIe,XIe,ZIe]=["ReadableStream","Request","Response","Headers"].map(Op),KIe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tO(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),qS(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(JA(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),f=s.length;let a;for(r=0;r<f;r++)a=s[r],t.call(null,e[a],a,e)}}function sue(e,t){if(JA(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Vb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,lue=e=>!Yw(e)&&e!==Vb;function _j(){const{caseless:e,skipUndefined:t}=lue(this)&&this||{},n={},r=(i,s)=>{if(s==="__proto__"||s==="constructor"||s==="prototype")return;const f=e&&sue(n,s)||s;iD(n[f])&&iD(i)?n[f]=_j(n[f],i):iD(i)?n[f]=_j({},i):qS(i)?n[f]=i.slice():(!t||!Yw(i))&&(n[f]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&tO(arguments[i],r);return n}const QIe=(e,t,n,{allOwnKeys:r}={})=>(tO(t,(i,s)=>{n&&ef(i)?Object.defineProperty(e,s,{value:rue(i,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,s,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),e),JIe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ePe=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},tPe=(e,t,n,r)=>{let i,s,f;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)f=i[s],(!r||r(f,e,t))&&!a[f]&&(t[f]=e[f],a[f]=!0);e=n!==!1&&W$(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},nPe=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},rPe=e=>{if(!e)return null;if(qS(e))return e;let t=e.length;if(!oue(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},iPe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&W$(Uint8Array)),aPe=(e,t)=>{const r=(e&&e[XP]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},oPe=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},sPe=Op("HTMLFormElement"),lPe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),IW=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),uPe=Op("RegExp"),uue=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};tO(n,(i,s)=>{let f;(f=t(i,s,e))!==!1&&(r[s]=f||i)}),Object.defineProperties(e,r)},cPe=e=>{uue(e,(t,n)=>{if(ef(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(ef(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},fPe=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return qS(e)?r(e):r(String(e).split(t)),n},hPe=()=>{},dPe=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function pPe(e){return!!(e&&ef(e.append)&&e[iue]==="FormData"&&e[XP])}const mPe=e=>{const t=new Array(10),n=(r,i)=>{if(eO(r)){if(t.indexOf(r)>=0)return;if(JA(r))return r;if(!("toJSON"in r)){t[i]=r;const s=qS(r)?[]:{};return tO(r,(f,a)=>{const p=n(f,i+1);!Yw(p)&&(s[a]=p)}),t[i]=void 0,s}}return r};return n(e,0)},gPe=Op("AsyncFunction"),yPe=e=>e&&(eO(e)||ef(e))&&ef(e.then)&&ef(e.catch),cue=((e,t)=>e?setImmediate:t?((n,r)=>(Vb.addEventListener("message",({source:i,data:s})=>{i===Vb&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Vb.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ef(Vb.postMessage)),_Pe=typeof queueMicrotask<"u"?queueMicrotask.bind(Vb):typeof process<"u"&&process.nextTick||cue,vPe=e=>e!=null&&ef(e[XP]),un={isArray:qS,isArrayBuffer:aue,isBuffer:JA,isFormData:HIe,isArrayBufferView:zIe,isString:FIe,isNumber:oue,isBoolean:NIe,isObject:eO,isPlainObject:iD,isEmptyObject:BIe,isReadableStream:YIe,isRequest:WIe,isResponse:XIe,isHeaders:ZIe,isUndefined:Yw,isDate:jIe,isFile:UIe,isBlob:$Ie,isRegExp:uPe,isFunction:ef,isStream:qIe,isURLSearchParams:GIe,isTypedArray:iPe,isFileList:VIe,forEach:tO,merge:_j,extend:QIe,trim:KIe,stripBOM:JIe,inherits:ePe,toFlatObject:tPe,kindOf:ZP,kindOfTest:Op,endsWith:nPe,toArray:rPe,forEachEntry:aPe,matchAll:oPe,isHTMLForm:sPe,hasOwnProperty:IW,hasOwnProp:IW,reduceDescriptors:uue,freezeMethods:cPe,toObjectSet:fPe,toCamelCase:lPe,noop:hPe,toFiniteNumber:dPe,findKey:sue,global:Vb,isContextDefined:lue,isSpecCompliantForm:pPe,toJSONObject:mPe,isAsyncFn:gPe,isThenable:yPe,setImmediate:cue,asap:_Pe,isIterable:vPe};let oi=class fue extends Error{static from(t,n,r,i,s,f){const a=new fue(t.message,n||t.code,r,i,s);return a.cause=t,a.name=t.name,f&&Object.assign(a,f),a}constructor(t,n,r,i,s){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),r&&(this.config=r),i&&(this.request=i),s&&(this.response=s,this.status=s.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:un.toJSONObject(this.config),code:this.code,status:this.status}}};oi.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";oi.ERR_BAD_OPTION="ERR_BAD_OPTION";oi.ECONNABORTED="ECONNABORTED";oi.ETIMEDOUT="ETIMEDOUT";oi.ERR_NETWORK="ERR_NETWORK";oi.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";oi.ERR_DEPRECATED="ERR_DEPRECATED";oi.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";oi.ERR_BAD_REQUEST="ERR_BAD_REQUEST";oi.ERR_CANCELED="ERR_CANCELED";oi.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";oi.ERR_INVALID_URL="ERR_INVALID_URL";const bPe=null;function vj(e){return un.isPlainObject(e)||un.isArray(e)}function hue(e){return un.endsWith(e,"[]")?e.slice(0,-2):e}function PW(e,t,n){return e?e.concat(t).map(function(i,s){return i=hue(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function xPe(e){return un.isArray(e)&&!e.some(vj)}const wPe=un.toFlatObject(un,{},null,function(t){return/^is[A-Z]/.test(t)});function QP(e,t,n){if(!un.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=un.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,k){return!un.isUndefined(k[U])});const r=n.metaTokens,i=n.visitor||S,s=n.dots,f=n.indexes,p=(n.Blob||typeof Blob<"u"&&Blob)&&un.isSpecCompliantForm(t);if(!un.isFunction(i))throw new TypeError("visitor must be a function");function _(F){if(F===null)return"";if(un.isDate(F))return F.toISOString();if(un.isBoolean(F))return F.toString();if(!p&&un.isBlob(F))throw new oi("Blob is not supported. Use a Buffer instead.");return un.isArrayBuffer(F)||un.isTypedArray(F)?p&&typeof Blob=="function"?new Blob([F]):Buffer.from(F):F}function S(F,U,k){let V=F;if(F&&!k&&typeof F=="object"){if(un.endsWith(U,"{}"))U=r?U:U.slice(0,-2),F=JSON.stringify(F);else if(un.isArray(F)&&xPe(F)||(un.isFileList(F)||un.endsWith(U,"[]"))&&(V=un.toArray(F)))return U=hue(U),V.forEach(function(J,ie){!(un.isUndefined(J)||J===null)&&t.append(f===!0?PW([U],ie,s):f===null?U:U+"[]",_(J))}),!1}return vj(F)?!0:(t.append(PW(k,U,s),_(F)),!1)}const E=[],I=Object.assign(wPe,{defaultVisitor:S,convertValue:_,isVisitable:vj});function z(F,U){if(!un.isUndefined(F)){if(E.indexOf(F)!==-1)throw Error("Circular reference detected in "+U.join("."));E.push(F),un.forEach(F,function(V,K){(!(un.isUndefined(V)||V===null)&&i.call(t,V,un.isString(K)?K.trim():K,U,I))===!0&&z(V,U?U.concat(K):[K])}),E.pop()}}if(!un.isObject(e))throw new TypeError("data must be an object");return z(e),t}function RW(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function X$(e,t){this._pairs=[],e&&QP(e,this,t)}const due=X$.prototype;due.append=function(t,n){this._pairs.push([t,n])};due.toString=function(t){const n=t?function(r){return t.call(this,r,RW)}:RW;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function SPe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function pue(e,t,n){if(!t)return e;const r=n&&n.encode||SPe,i=un.isFunction(n)?{serialize:n}:n,s=i&&i.serialize;let f;if(s?f=s(t,i):f=un.isURLSearchParams(t)?t.toString():new X$(t,i).toString(r),f){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class kW{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){un.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Z$={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},TPe=typeof URLSearchParams<"u"?URLSearchParams:X$,EPe=typeof FormData<"u"?FormData:null,APe=typeof Blob<"u"?Blob:null,OPe={isBrowser:!0,classes:{URLSearchParams:TPe,FormData:EPe,Blob:APe},protocols:["http","https","file","blob","url","data"]},K$=typeof window<"u"&&typeof document<"u",bj=typeof navigator=="object"&&navigator||void 0,CPe=K$&&(!bj||["ReactNative","NativeScript","NS"].indexOf(bj.product)<0),MPe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",DPe=K$&&window.location.href||"http://localhost",IPe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:K$,hasStandardBrowserEnv:CPe,hasStandardBrowserWebWorkerEnv:MPe,navigator:bj,origin:DPe},Symbol.toStringTag,{value:"Module"})),Eu={...IPe,...OPe};function PPe(e,t){return QP(e,new Eu.classes.URLSearchParams,{visitor:function(n,r,i,s){return Eu.isNode&&un.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function RPe(e){return un.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function kPe(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function mue(e){function t(n,r,i,s){let f=n[s++];if(f==="__proto__")return!0;const a=Number.isFinite(+f),p=s>=n.length;return f=!f&&un.isArray(i)?i.length:f,p?(un.hasOwnProp(i,f)?i[f]=[i[f],r]:i[f]=r,!a):((!i[f]||!un.isObject(i[f]))&&(i[f]=[]),t(n,r,i[f],s)&&un.isArray(i[f])&&(i[f]=kPe(i[f])),!a)}if(un.isFormData(e)&&un.isFunction(e.entries)){const n={};return un.forEachEntry(e,(r,i)=>{t(RPe(r),i,n,0)}),n}return null}function LPe(e,t,n){if(un.isString(e))try{return(t||JSON.parse)(e),un.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const nO={transitional:Z$,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=un.isObject(t);if(s&&un.isHTMLForm(t)&&(t=new FormData(t)),un.isFormData(t))return i?JSON.stringify(mue(t)):t;if(un.isArrayBuffer(t)||un.isBuffer(t)||un.isStream(t)||un.isFile(t)||un.isBlob(t)||un.isReadableStream(t))return t;if(un.isArrayBufferView(t))return t.buffer;if(un.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return PPe(t,this.formSerializer).toString();if((a=un.isFileList(t))||r.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return QP(a?{"files[]":t}:t,p&&new p,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),LPe(t)):t}],transformResponse:[function(t){const n=this.transitional||nO.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(un.isResponse(t)||un.isReadableStream(t))return t;if(t&&un.isString(t)&&(r&&!this.responseType||i)){const f=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(a){if(f)throw a.name==="SyntaxError"?oi.from(a,oi.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Eu.classes.FormData,Blob:Eu.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};un.forEach(["delete","get","head","post","put","patch"],e=>{nO.headers[e]={}});const zPe=un.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FPe=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(f){i=f.indexOf(":"),n=f.substring(0,i).trim().toLowerCase(),r=f.substring(i+1).trim(),!(!n||t[n]&&zPe[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},LW=Symbol("internals");function DE(e){return e&&String(e).trim().toLowerCase()}function aD(e){return e===!1||e==null?e:un.isArray(e)?e.map(aD):String(e)}function NPe(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const BPe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function H3(e,t,n,r,i){if(un.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!un.isString(t)){if(un.isString(r))return t.indexOf(r)!==-1;if(un.isRegExp(r))return r.test(t)}}function jPe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function UPe(e,t){const n=un.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,f){return this[r].call(this,t,i,s,f)},configurable:!0})})}let tf=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(a,p,_){const S=DE(p);if(!S)throw new Error("header name must be a non-empty string");const E=un.findKey(i,S);(!E||i[E]===void 0||_===!0||_===void 0&&i[E]!==!1)&&(i[E||p]=aD(a))}const f=(a,p)=>un.forEach(a,(_,S)=>s(_,S,p));if(un.isPlainObject(t)||t instanceof this.constructor)f(t,n);else if(un.isString(t)&&(t=t.trim())&&!BPe(t))f(FPe(t),n);else if(un.isObject(t)&&un.isIterable(t)){let a={},p,_;for(const S of t){if(!un.isArray(S))throw TypeError("Object iterator must return a key-value pair");a[_=S[0]]=(p=a[_])?un.isArray(p)?[...p,S[1]]:[p,S[1]]:S[1]}f(a,n)}else t!=null&&s(n,t,r);return this}get(t,n){if(t=DE(t),t){const r=un.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return NPe(i);if(un.isFunction(n))return n.call(this,i,r);if(un.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=DE(t),t){const r=un.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||H3(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(f){if(f=DE(f),f){const a=un.findKey(r,f);a&&(!n||H3(r,r[a],a,n))&&(delete r[a],i=!0)}}return un.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||H3(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return un.forEach(this,(i,s)=>{const f=un.findKey(r,s);if(f){n[f]=aD(i),delete n[s];return}const a=t?jPe(s):String(s).trim();a!==s&&delete n[s],n[a]=aD(i),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return un.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&un.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[LW]=this[LW]={accessors:{}}).accessors,i=this.prototype;function s(f){const a=DE(f);r[a]||(UPe(i,f),r[a]=!0)}return un.isArray(t)?t.forEach(s):s(t),this}};tf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);un.reduceDescriptors(tf.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});un.freezeMethods(tf);function G3(e,t){const n=this||nO,r=t||n,i=tf.from(r.headers);let s=r.data;return un.forEach(e,function(a){s=a.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function gue(e){return!!(e&&e.__CANCEL__)}let rO=class extends oi{constructor(t,n,r){super(t??"canceled",oi.ERR_CANCELED,n,r),this.name="CanceledError",this.__CANCEL__=!0}};function yue(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new oi("Request failed with status code "+n.status,[oi.ERR_BAD_REQUEST,oi.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function $Pe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function VPe(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,f;return t=t!==void 0?t:1e3,function(p){const _=Date.now(),S=r[s];f||(f=_),n[i]=p,r[i]=_;let E=s,I=0;for(;E!==i;)I+=n[E++],E=E%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),_-f<t)return;const z=S&&_-S;return z?Math.round(I*1e3/z):void 0}}function qPe(e,t){let n=0,r=1e3/t,i,s;const f=(_,S=Date.now())=>{n=S,i=null,s&&(clearTimeout(s),s=null),e(..._)};return[(..._)=>{const S=Date.now(),E=S-n;E>=r?f(_,S):(i=_,s||(s=setTimeout(()=>{s=null,f(i)},r-E)))},()=>i&&f(i)]}const qD=(e,t,n=3)=>{let r=0;const i=VPe(50,250);return qPe(s=>{const f=s.loaded,a=s.lengthComputable?s.total:void 0,p=f-r,_=i(p),S=f<=a;r=f;const E={loaded:f,total:a,progress:a?f/a:void 0,bytes:p,rate:_||void 0,estimated:_&&a&&S?(a-f)/_:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(E)},n)},zW=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},FW=e=>(...t)=>un.asap(()=>e(...t)),HPe=Eu.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Eu.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Eu.origin),Eu.navigator&&/(msie|trident)/i.test(Eu.navigator.userAgent)):()=>!0,GPe=Eu.hasStandardBrowserEnv?{write(e,t,n,r,i,s,f){if(typeof document>"u")return;const a=[`${e}=${encodeURIComponent(t)}`];un.isNumber(n)&&a.push(`expires=${new Date(n).toUTCString()}`),un.isString(r)&&a.push(`path=${r}`),un.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),un.isString(f)&&a.push(`SameSite=${f}`),document.cookie=a.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function YPe(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function WPe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function _ue(e,t,n){let r=!YPe(t);return e&&(r||n==!1)?WPe(e,t):t}const NW=e=>e instanceof tf?{...e}:e;function mx(e,t){t=t||{};const n={};function r(_,S,E,I){return un.isPlainObject(_)&&un.isPlainObject(S)?un.merge.call({caseless:I},_,S):un.isPlainObject(S)?un.merge({},S):un.isArray(S)?S.slice():S}function i(_,S,E,I){if(un.isUndefined(S)){if(!un.isUndefined(_))return r(void 0,_,E,I)}else return r(_,S,E,I)}function s(_,S){if(!un.isUndefined(S))return r(void 0,S)}function f(_,S){if(un.isUndefined(S)){if(!un.isUndefined(_))return r(void 0,_)}else return r(void 0,S)}function a(_,S,E){if(E in t)return r(_,S);if(E in e)return r(void 0,_)}const p={url:s,method:s,data:s,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:a,headers:(_,S,E)=>i(NW(_),NW(S),E,!0)};return un.forEach(Object.keys({...e,...t}),function(S){if(S==="__proto__"||S==="constructor"||S==="prototype")return;const E=un.hasOwnProp(p,S)?p[S]:i,I=E(e[S],t[S],S);un.isUndefined(I)&&E!==a||(n[S]=I)}),n}const vue=e=>{const t=mx({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:f,auth:a}=t;if(t.headers=f=tf.from(f),t.url=pue(_ue(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&f.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),un.isFormData(n)){if(Eu.hasStandardBrowserEnv||Eu.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(un.isFunction(n.getHeaders)){const p=n.getHeaders(),_=["content-type","content-length"];Object.entries(p).forEach(([S,E])=>{_.includes(S.toLowerCase())&&f.set(S,E)})}}if(Eu.hasStandardBrowserEnv&&(r&&un.isFunction(r)&&(r=r(t)),r||r!==!1&&HPe(t.url))){const p=i&&s&&GPe.read(s);p&&f.set(i,p)}return t},XPe=typeof XMLHttpRequest<"u",ZPe=XPe&&function(e){return new Promise(function(n,r){const i=vue(e);let s=i.data;const f=tf.from(i.headers).normalize();let{responseType:a,onUploadProgress:p,onDownloadProgress:_}=i,S,E,I,z,F;function U(){z&&z(),F&&F(),i.cancelToken&&i.cancelToken.unsubscribe(S),i.signal&&i.signal.removeEventListener("abort",S)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function V(){if(!k)return;const J=tf.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),Q={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:J,config:e,request:k};yue(function(te){n(te),U()},function(te){r(te),U()},Q),k=null}"onloadend"in k?k.onloadend=V:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(V)},k.onabort=function(){k&&(r(new oi("Request aborted",oi.ECONNABORTED,e,k)),k=null)},k.onerror=function(ie){const Q=ie&&ie.message?ie.message:"Network Error",W=new oi(Q,oi.ERR_NETWORK,e,k);W.event=ie||null,r(W),k=null},k.ontimeout=function(){let ie=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const Q=i.transitional||Z$;i.timeoutErrorMessage&&(ie=i.timeoutErrorMessage),r(new oi(ie,Q.clarifyTimeoutError?oi.ETIMEDOUT:oi.ECONNABORTED,e,k)),k=null},s===void 0&&f.setContentType(null),"setRequestHeader"in k&&un.forEach(f.toJSON(),function(ie,Q){k.setRequestHeader(Q,ie)}),un.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),a&&a!=="json"&&(k.responseType=i.responseType),_&&([I,F]=qD(_,!0),k.addEventListener("progress",I)),p&&k.upload&&([E,z]=qD(p),k.upload.addEventListener("progress",E),k.upload.addEventListener("loadend",z)),(i.cancelToken||i.signal)&&(S=J=>{k&&(r(!J||J.type?new rO(null,e,k):J),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(S),i.signal&&(i.signal.aborted?S():i.signal.addEventListener("abort",S)));const K=$Pe(i.url);if(K&&Eu.protocols.indexOf(K)===-1){r(new oi("Unsupported protocol "+K+":",oi.ERR_BAD_REQUEST,e));return}k.send(s||null)})},KPe=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(_){if(!i){i=!0,a();const S=_ instanceof Error?_:this.reason;r.abort(S instanceof oi?S:new rO(S instanceof Error?S.message:S))}};let f=t&&setTimeout(()=>{f=null,s(new oi(`timeout of ${t}ms exceeded`,oi.ETIMEDOUT))},t);const a=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(s):_.removeEventListener("abort",s)}),e=null)};e.forEach(_=>_.addEventListener("abort",s));const{signal:p}=r;return p.unsubscribe=()=>un.asap(a),p}},QPe=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},JPe=async function*(e,t){for await(const n of eRe(e))yield*QPe(n,t)},eRe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},BW=(e,t,n,r)=>{const i=JPe(e,t);let s=0,f,a=p=>{f||(f=!0,r&&r(p))};return new ReadableStream({async pull(p){try{const{done:_,value:S}=await i.next();if(_){a(),p.close();return}let E=S.byteLength;if(n){let I=s+=E;n(I)}p.enqueue(new Uint8Array(S))}catch(_){throw a(_),_}},cancel(p){return a(p),i.return()}},{highWaterMark:2})},jW=64*1024,{isFunction:hM}=un,tRe=(({Request:e,Response:t})=>({Request:e,Response:t}))(un.global),{ReadableStream:UW,TextEncoder:$W}=un.global,VW=(e,...t)=>{try{return!!e(...t)}catch{return!1}},nRe=e=>{e=un.merge.call({skipUndefined:!0},tRe,e);const{fetch:t,Request:n,Response:r}=e,i=t?hM(t):typeof fetch=="function",s=hM(n),f=hM(r);if(!i)return!1;const a=i&&hM(UW),p=i&&(typeof $W=="function"?(F=>U=>F.encode(U))(new $W):async F=>new Uint8Array(await new n(F).arrayBuffer())),_=s&&a&&VW(()=>{let F=!1;const U=new n(Eu.origin,{body:new UW,method:"POST",get duplex(){return F=!0,"half"}}).headers.has("Content-Type");return F&&!U}),S=f&&a&&VW(()=>un.isReadableStream(new r("").body)),E={stream:S&&(F=>F.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(F=>{!E[F]&&(E[F]=(U,k)=>{let V=U&&U[F];if(V)return V.call(U);throw new oi(`Response type '${F}' is not supported`,oi.ERR_NOT_SUPPORT,k)})});const I=async F=>{if(F==null)return 0;if(un.isBlob(F))return F.size;if(un.isSpecCompliantForm(F))return(await new n(Eu.origin,{method:"POST",body:F}).arrayBuffer()).byteLength;if(un.isArrayBufferView(F)||un.isArrayBuffer(F))return F.byteLength;if(un.isURLSearchParams(F)&&(F=F+""),un.isString(F))return(await p(F)).byteLength},z=async(F,U)=>{const k=un.toFiniteNumber(F.getContentLength());return k??I(U)};return async F=>{let{url:U,method:k,data:V,signal:K,cancelToken:J,timeout:ie,onDownloadProgress:Q,onUploadProgress:W,responseType:te,headers:X,withCredentials:ae="same-origin",fetchOptions:le}=vue(F),ge=t||fetch;te=te?(te+"").toLowerCase():"text";let ye=KPe([K,J&&J.toAbortSignal()],ie),De=null;const He=ye&&ye.unsubscribe&&(()=>{ye.unsubscribe()});let Be;try{if(W&&_&&k!=="get"&&k!=="head"&&(Be=await z(X,V))!==0){let Ke=new n(U,{method:"POST",body:V,duplex:"half"}),it;if(un.isFormData(V)&&(it=Ke.headers.get("content-type"))&&X.setContentType(it),Ke.body){const[Pe,jt]=zW(Be,qD(FW(W)));V=BW(Ke.body,jW,Pe,jt)}}un.isString(ae)||(ae=ae?"include":"omit");const Ee=s&&"credentials"in n.prototype,Ne={...le,signal:ye,method:k.toUpperCase(),headers:X.normalize().toJSON(),body:V,duplex:"half",credentials:Ee?ae:void 0};De=s&&new n(U,Ne);let at=await(s?ge(De,le):ge(U,Ne));const yt=S&&(te==="stream"||te==="response");if(S&&(Q||yt&&He)){const Ke={};["status","statusText","headers"].forEach(sn=>{Ke[sn]=at[sn]});const it=un.toFiniteNumber(at.headers.get("content-length")),[Pe,jt]=Q&&zW(it,qD(FW(Q),!0))||[];at=new r(BW(at.body,jW,Pe,()=>{jt&&jt(),He&&He()}),Ke)}te=te||"text";let je=await E[un.findKey(E,te)||"text"](at,F);return!yt&&He&&He(),await new Promise((Ke,it)=>{yue(Ke,it,{data:je,headers:tf.from(at.headers),status:at.status,statusText:at.statusText,config:F,request:De})})}catch(Ee){throw He&&He(),Ee&&Ee.name==="TypeError"&&/Load failed|fetch/i.test(Ee.message)?Object.assign(new oi("Network Error",oi.ERR_NETWORK,F,De,Ee&&Ee.response),{cause:Ee.cause||Ee}):oi.from(Ee,Ee&&Ee.code,F,De,Ee&&Ee.response)}}},rRe=new Map,bue=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:i}=t,s=[r,i,n];let f=s.length,a=f,p,_,S=rRe;for(;a--;)p=s[a],_=S.get(p),_===void 0&&S.set(p,_=a?new Map:nRe(t)),S=_;return _};bue();const Q$={http:bPe,xhr:ZPe,fetch:{get:bue}};un.forEach(Q$,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const qW=e=>`- ${e}`,iRe=e=>un.isFunction(e)||e===null||e===!1;function aRe(e,t){e=un.isArray(e)?e:[e];const{length:n}=e;let r,i;const s={};for(let f=0;f<n;f++){r=e[f];let a;if(i=r,!iRe(r)&&(i=Q$[(a=String(r)).toLowerCase()],i===void 0))throw new oi(`Unknown adapter '${a}'`);if(i&&(un.isFunction(i)||(i=i.get(t))))break;s[a||"#"+f]=i}if(!i){const f=Object.entries(s).map(([p,_])=>`adapter ${p} `+(_===!1?"is not supported by the environment":"is not available in the build"));let a=n?f.length>1?`since :
`+f.map(qW).join(`
`):" "+qW(f[0]):"as no adapter specified";throw new oi("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const xue={getAdapter:aRe,adapters:Q$};function Y3(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rO(null,e)}function HW(e){return Y3(e),e.headers=tf.from(e.headers),e.data=G3.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),xue.getAdapter(e.adapter||nO.adapter,e)(e).then(function(r){return Y3(e),r.data=G3.call(e,e.transformResponse,r),r.headers=tf.from(r.headers),r},function(r){return gue(r)||(Y3(e),r&&r.response&&(r.response.data=G3.call(e,e.transformResponse,r.response),r.response.headers=tf.from(r.response.headers))),Promise.reject(r)})}const wue="1.13.5",JP={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{JP[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const GW={};JP.transitional=function(t,n,r){function i(s,f){return"[Axios v"+wue+"] Transitional option '"+s+"'"+f+(r?". "+r:"")}return(s,f,a)=>{if(t===!1)throw new oi(i(f," has been removed"+(n?" in "+n:"")),oi.ERR_DEPRECATED);return n&&!GW[f]&&(GW[f]=!0,console.warn(i(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,f,a):!0}};JP.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function oRe(e,t,n){if(typeof e!="object")throw new oi("options must be an object",oi.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],f=t[s];if(f){const a=e[s],p=a===void 0||f(a,s,e);if(p!==!0)throw new oi("option "+s+" must be "+p,oi.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new oi("Unknown option "+s,oi.ERR_BAD_OPTION)}}const oD={assertOptions:oRe,validators:JP},Bh=oD.validators;let Jb=class{constructor(t){this.defaults=t||{},this.interceptors={request:new kW,response:new kW}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mx(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&oD.assertOptions(r,{silentJSONParsing:Bh.transitional(Bh.boolean),forcedJSONParsing:Bh.transitional(Bh.boolean),clarifyTimeoutError:Bh.transitional(Bh.boolean),legacyInterceptorReqResOrdering:Bh.transitional(Bh.boolean)},!1),i!=null&&(un.isFunction(i)?n.paramsSerializer={serialize:i}:oD.assertOptions(i,{encode:Bh.function,serialize:Bh.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),oD.assertOptions(n,{baseUrl:Bh.spelling("baseURL"),withXsrfToken:Bh.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=s&&un.merge(s.common,s[n.method]);s&&un.forEach(["delete","get","head","post","put","patch","common"],F=>{delete s[F]}),n.headers=tf.concat(f,s);const a=[];let p=!0;this.interceptors.request.forEach(function(U){if(typeof U.runWhen=="function"&&U.runWhen(n)===!1)return;p=p&&U.synchronous;const k=n.transitional||Z$;k&&k.legacyInterceptorReqResOrdering?a.unshift(U.fulfilled,U.rejected):a.push(U.fulfilled,U.rejected)});const _=[];this.interceptors.response.forEach(function(U){_.push(U.fulfilled,U.rejected)});let S,E=0,I;if(!p){const F=[HW.bind(this),void 0];for(F.unshift(...a),F.push(..._),I=F.length,S=Promise.resolve(n);E<I;)S=S.then(F[E++],F[E++]);return S}I=a.length;let z=n;for(;E<I;){const F=a[E++],U=a[E++];try{z=F(z)}catch(k){U.call(this,k);break}}try{S=HW.call(this,z)}catch(F){return Promise.reject(F)}for(E=0,I=_.length;E<I;)S=S.then(_[E++],_[E++]);return S}getUri(t){t=mx(this.defaults,t);const n=_ue(t.baseURL,t.url,t.allowAbsoluteUrls);return pue(n,t.params,t.paramsSerializer)}};un.forEach(["delete","get","head","options"],function(t){Jb.prototype[t]=function(n,r){return this.request(mx(r||{},{method:t,url:n,data:(r||{}).data}))}});un.forEach(["post","put","patch"],function(t){function n(r){return function(s,f,a){return this.request(mx(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:f}))}}Jb.prototype[t]=n(),Jb.prototype[t+"Form"]=n(!0)});let sRe=class Sue{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const f=new Promise(a=>{r.subscribe(a),s=a}).then(i);return f.cancel=function(){r.unsubscribe(s)},f},t(function(s,f,a){r.reason||(r.reason=new rO(s,f,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Sue(function(i){t=i}),cancel:t}}};function lRe(e){return function(n){return e.apply(null,n)}}function uRe(e){return un.isObject(e)&&e.isAxiosError===!0}const xj={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(xj).forEach(([e,t])=>{xj[t]=e});function Tue(e){const t=new Jb(e),n=rue(Jb.prototype.request,t);return un.extend(n,Jb.prototype,t,{allOwnKeys:!0}),un.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return Tue(mx(e,i))},n}const _s=Tue(nO);_s.Axios=Jb;_s.CanceledError=rO;_s.CancelToken=sRe;_s.isCancel=gue;_s.VERSION=wue;_s.toFormData=QP;_s.AxiosError=oi;_s.Cancel=_s.CanceledError;_s.all=function(t){return Promise.all(t)};_s.spread=lRe;_s.isAxiosError=uRe;_s.mergeConfig=mx;_s.AxiosHeaders=tf;_s.formToJSON=e=>mue(un.isHTMLForm(e)?new FormData(e):e);_s.getAdapter=xue.getAdapter;_s.HttpStatusCode=xj;_s.default=_s;const{Axios:zdt,AxiosError:Fdt,CanceledError:Ndt,isCancel:Bdt,CancelToken:jdt,VERSION:Udt,all:$dt,Cancel:Vdt,isAxiosError:qdt,spread:Hdt,toFormData:Gdt,AxiosHeaders:Ydt,HttpStatusCode:Wdt,formToJSON:Xdt,getAdapter:Zdt,mergeConfig:Kdt}=_s;function dM(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var W3={exports:{}},YW;function cRe(){return YW||(YW=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(r,i,s){function f(_,S){if(!i[_]){if(!r[_]){var E=typeof dM=="function"&&dM;if(!S&&E)return E(_,!0);if(a)return a(_,!0);throw new Error("Cannot find module '"+_+"'")}S=i[_]={exports:{}},r[_][0].call(S.exports,function(I){var z=r[_][1][I];return f(z||I)},S,S.exports,n,r,i,s)}return i[_].exports}for(var a=typeof dM=="function"&&dM,p=0;p<s.length;p++)f(s[p]);return f})({1:[function(n,r,i){(function(s,f,a,p,_,S,E,I,z){var F=n("crypto");function U(W,te){te=K(W,te);var X;return(X=te.algorithm!=="passthrough"?F.createHash(te.algorithm):new Q).write===void 0&&(X.write=X.update,X.end=X.update),ie(te,X).dispatch(W),X.update||X.end(""),X.digest?X.digest(te.encoding==="buffer"?void 0:te.encoding):(W=X.read(),te.encoding!=="buffer"?W.toString(te.encoding):W)}(i=r.exports=U).sha1=function(W){return U(W)},i.keys=function(W){return U(W,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(W){return U(W,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(W){return U(W,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var k=F.getHashes?F.getHashes().slice():["sha1","md5"],V=(k.push("passthrough"),["buffer","hex","binary","base64"]);function K(W,te){var X={};if(X.algorithm=(te=te||{}).algorithm||"sha1",X.encoding=te.encoding||"hex",X.excludeValues=!!te.excludeValues,X.algorithm=X.algorithm.toLowerCase(),X.encoding=X.encoding.toLowerCase(),X.ignoreUnknown=te.ignoreUnknown===!0,X.respectType=te.respectType!==!1,X.respectFunctionNames=te.respectFunctionNames!==!1,X.respectFunctionProperties=te.respectFunctionProperties!==!1,X.unorderedArrays=te.unorderedArrays===!0,X.unorderedSets=te.unorderedSets!==!1,X.unorderedObjects=te.unorderedObjects!==!1,X.replacer=te.replacer||void 0,X.excludeKeys=te.excludeKeys||void 0,W===void 0)throw new Error("Object argument required.");for(var ae=0;ae<k.length;++ae)k[ae].toLowerCase()===X.algorithm.toLowerCase()&&(X.algorithm=k[ae]);if(k.indexOf(X.algorithm)===-1)throw new Error('Algorithm "'+X.algorithm+'"  not supported. supported values: '+k.join(", "));if(V.indexOf(X.encoding)===-1&&X.algorithm!=="passthrough")throw new Error('Encoding "'+X.encoding+'"  not supported. supported values: '+V.join(", "));return X}function J(W){if(typeof W=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(W))!=null}function ie(W,te,X){X=X||[];function ae(le){return te.update?te.update(le,"utf8"):te.write(le,"utf8")}return{dispatch:function(le){return this["_"+((le=W.replacer?W.replacer(le):le)===null?"null":typeof le)](le)},_object:function(le){var ge,ye=Object.prototype.toString.call(le),De=/\[object (.*)\]/i.exec(ye);if(De=(De=De?De[1]:"unknown:["+ye+"]").toLowerCase(),0<=(ye=X.indexOf(le)))return this.dispatch("[CIRCULAR:"+ye+"]");if(X.push(le),a!==void 0&&a.isBuffer&&a.isBuffer(le))return ae("buffer:"),ae(le);if(De==="object"||De==="function"||De==="asyncfunction")return ye=Object.keys(le),W.unorderedObjects&&(ye=ye.sort()),W.respectType===!1||J(le)||ye.splice(0,0,"prototype","__proto__","constructor"),W.excludeKeys&&(ye=ye.filter(function(He){return!W.excludeKeys(He)})),ae("object:"+ye.length+":"),ge=this,ye.forEach(function(He){ge.dispatch(He),ae(":"),W.excludeValues||ge.dispatch(le[He]),ae(",")});if(!this["_"+De]){if(W.ignoreUnknown)return ae("["+De+"]");throw new Error('Unknown object type "'+De+'"')}this["_"+De](le)},_array:function(le,He){He=He!==void 0?He:W.unorderedArrays!==!1;var ye=this;if(ae("array:"+le.length+":"),!He||le.length<=1)return le.forEach(function(Be){return ye.dispatch(Be)});var De=[],He=le.map(function(Be){var Ee=new Q,Ne=X.slice();return ie(W,Ee,Ne).dispatch(Be),De=De.concat(Ne.slice(X.length)),Ee.read().toString()});return X=X.concat(De),He.sort(),this._array(He,!1)},_date:function(le){return ae("date:"+le.toJSON())},_symbol:function(le){return ae("symbol:"+le.toString())},_error:function(le){return ae("error:"+le.toString())},_boolean:function(le){return ae("bool:"+le.toString())},_string:function(le){ae("string:"+le.length+":"),ae(le.toString())},_function:function(le){ae("fn:"),J(le)?this.dispatch("[native]"):this.dispatch(le.toString()),W.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(le.name)),W.respectFunctionProperties&&this._object(le)},_number:function(le){return ae("number:"+le.toString())},_xml:function(le){return ae("xml:"+le.toString())},_null:function(){return ae("Null")},_undefined:function(){return ae("Undefined")},_regexp:function(le){return ae("regex:"+le.toString())},_uint8array:function(le){return ae("uint8array:"),this.dispatch(Array.prototype.slice.call(le))},_uint8clampedarray:function(le){return ae("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(le))},_int8array:function(le){return ae("int8array:"),this.dispatch(Array.prototype.slice.call(le))},_uint16array:function(le){return ae("uint16array:"),this.dispatch(Array.prototype.slice.call(le))},_int16array:function(le){return ae("int16array:"),this.dispatch(Array.prototype.slice.call(le))},_uint32array:function(le){return ae("uint32array:"),this.dispatch(Array.prototype.slice.call(le))},_int32array:function(le){return ae("int32array:"),this.dispatch(Array.prototype.slice.call(le))},_float32array:function(le){return ae("float32array:"),this.dispatch(Array.prototype.slice.call(le))},_float64array:function(le){return ae("float64array:"),this.dispatch(Array.prototype.slice.call(le))},_arraybuffer:function(le){return ae("arraybuffer:"),this.dispatch(new Uint8Array(le))},_url:function(le){return ae("url:"+le.toString())},_map:function(le){return ae("map:"),le=Array.from(le),this._array(le,W.unorderedSets!==!1)},_set:function(le){return ae("set:"),le=Array.from(le),this._array(le,W.unorderedSets!==!1)},_file:function(le){return ae("file:"),this.dispatch([le.name,le.size,le.type,le.lastModfied])},_blob:function(){if(W.ignoreUnknown)return ae("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return ae("domwindow")},_bigint:function(le){return ae("bigint:"+le.toString())},_process:function(){return ae("process")},_timer:function(){return ae("timer")},_pipe:function(){return ae("pipe")},_tcp:function(){return ae("tcp")},_udp:function(){return ae("udp")},_tty:function(){return ae("tty")},_statwatcher:function(){return ae("statwatcher")},_securecontext:function(){return ae("securecontext")},_connection:function(){return ae("connection")},_zlib:function(){return ae("zlib")},_context:function(){return ae("context")},_nodescript:function(){return ae("nodescript")},_httpparser:function(){return ae("httpparser")},_dataview:function(){return ae("dataview")},_signal:function(){return ae("signal")},_fsevent:function(){return ae("fsevent")},_tlswrap:function(){return ae("tlswrap")}}}function Q(){return{buf:"",write:function(W){this.buf+=W},end:function(W){this.buf+=W},read:function(){return this.buf}}}i.writeToStream=function(W,te,X){return X===void 0&&(X=te,te={}),ie(te=K(W,te),X).dispatch(W)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(n,r,i){(function(s,f,a,p,_,S,E,I,z){(function(F){var U=typeof Uint8Array<"u"?Uint8Array:Array,k=43,V=47,K=48,J=97,ie=65,Q=45,W=95;function te(X){return X=X.charCodeAt(0),X===k||X===Q?62:X===V||X===W?63:X<K?-1:X<K+10?X-K+26+26:X<ie+26?X-ie:X<J+26?X-J+26:void 0}F.toByteArray=function(X){var ae,le;if(0<X.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var ge=X.length,ge=X.charAt(ge-2)==="="?2:X.charAt(ge-1)==="="?1:0,ye=new U(3*X.length/4-ge),De=0<ge?X.length-4:X.length,He=0;function Be(Ee){ye[He++]=Ee}for(ae=0;ae<De;ae+=4,0)Be((16711680&(le=te(X.charAt(ae))<<18|te(X.charAt(ae+1))<<12|te(X.charAt(ae+2))<<6|te(X.charAt(ae+3))))>>16),Be((65280&le)>>8),Be(255&le);return ge==2?Be(255&(le=te(X.charAt(ae))<<2|te(X.charAt(ae+1))>>4)):ge==1&&(Be((le=te(X.charAt(ae))<<10|te(X.charAt(ae+1))<<4|te(X.charAt(ae+2))>>2)>>8&255),Be(255&le)),ye},F.fromByteArray=function(X){var ae,le,ge,ye,De=X.length%3,He="";function Be(Ee){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Ee)}for(ae=0,ge=X.length-De;ae<ge;ae+=3)le=(X[ae]<<16)+(X[ae+1]<<8)+X[ae+2],He+=Be((ye=le)>>18&63)+Be(ye>>12&63)+Be(ye>>6&63)+Be(63&ye);switch(De){case 1:He=(He+=Be((le=X[X.length-1])>>2))+Be(le<<4&63)+"==";break;case 2:He=(He=(He+=Be((le=(X[X.length-2]<<8)+X[X.length-1])>>10))+Be(le>>4&63))+Be(le<<2&63)+"="}return He}})(i===void 0?this.base64js={}:i)}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(n,r,i){(function(s,f,k,p,_,S,E,I,z){var F=n("base64-js"),U=n("ieee754");function k(xe,Ye,ct){if(!(this instanceof k))return new k(xe,Ye,ct);var mt,Ct,Yt,gn,En=typeof xe;if(Ye==="base64"&&En=="string")for(xe=(gn=xe).trim?gn.trim():gn.replace(/^\s+|\s+$/g,"");xe.length%4!=0;)xe+="=";if(En=="number")mt=at(xe);else if(En=="string")mt=k.byteLength(xe,Ye);else{if(En!="object")throw new Error("First argument needs to be a number, array or string.");mt=at(xe.length)}if(k._useTypedArrays?Ct=k._augment(new Uint8Array(mt)):((Ct=this).length=mt,Ct._isBuffer=!0),k._useTypedArrays&&typeof xe.byteLength=="number")Ct._set(xe);else if(yt(gn=xe)||k.isBuffer(gn)||gn&&typeof gn=="object"&&typeof gn.length=="number")for(Yt=0;Yt<mt;Yt++)k.isBuffer(xe)?Ct[Yt]=xe.readUInt8(Yt):Ct[Yt]=xe[Yt];else if(En=="string")Ct.write(xe,0,Ye);else if(En=="number"&&!k._useTypedArrays&&!ct)for(Yt=0;Yt<mt;Yt++)Ct[Yt]=0;return Ct}function V(xe,Ye,ct,mt){return k._charsWritten=Pe((function(Ct){for(var Yt=[],gn=0;gn<Ct.length;gn++)Yt.push(255&Ct.charCodeAt(gn));return Yt})(Ye),xe,ct,mt)}function K(xe,Ye,ct,mt){return k._charsWritten=Pe((function(Ct){for(var Yt,gn,En=[],or=0;or<Ct.length;or++)gn=Ct.charCodeAt(or),Yt=gn>>8,gn=gn%256,En.push(gn),En.push(Yt);return En})(Ye),xe,ct,mt)}function J(xe,Ye,ct){var mt="";ct=Math.min(xe.length,ct);for(var Ct=Ye;Ct<ct;Ct++)mt+=String.fromCharCode(xe[Ct]);return mt}function ie(xe,Ye,ct,Yt){Yt||(Ut(typeof ct=="boolean","missing or invalid endian"),Ut(Ye!=null,"missing offset"),Ut(Ye+1<xe.length,"Trying to read beyond buffer length"));var Ct,Yt=xe.length;if(!(Yt<=Ye))return ct?(Ct=xe[Ye],Ye+1<Yt&&(Ct|=xe[Ye+1]<<8)):(Ct=xe[Ye]<<8,Ye+1<Yt&&(Ct|=xe[Ye+1])),Ct}function Q(xe,Ye,ct,Yt){Yt||(Ut(typeof ct=="boolean","missing or invalid endian"),Ut(Ye!=null,"missing offset"),Ut(Ye+3<xe.length,"Trying to read beyond buffer length"));var Ct,Yt=xe.length;if(!(Yt<=Ye))return ct?(Ye+2<Yt&&(Ct=xe[Ye+2]<<16),Ye+1<Yt&&(Ct|=xe[Ye+1]<<8),Ct|=xe[Ye],Ye+3<Yt&&(Ct+=xe[Ye+3]<<24>>>0)):(Ye+1<Yt&&(Ct=xe[Ye+1]<<16),Ye+2<Yt&&(Ct|=xe[Ye+2]<<8),Ye+3<Yt&&(Ct|=xe[Ye+3]),Ct+=xe[Ye]<<24>>>0),Ct}function W(xe,Ye,ct,mt){if(mt||(Ut(typeof ct=="boolean","missing or invalid endian"),Ut(Ye!=null,"missing offset"),Ut(Ye+1<xe.length,"Trying to read beyond buffer length")),!(xe.length<=Ye))return mt=ie(xe,Ye,ct,!0),32768&mt?-1*(65535-mt+1):mt}function te(xe,Ye,ct,mt){if(mt||(Ut(typeof ct=="boolean","missing or invalid endian"),Ut(Ye!=null,"missing offset"),Ut(Ye+3<xe.length,"Trying to read beyond buffer length")),!(xe.length<=Ye))return mt=Q(xe,Ye,ct,!0),2147483648&mt?-1*(4294967295-mt+1):mt}function X(xe,Ye,ct,mt){return mt||(Ut(typeof ct=="boolean","missing or invalid endian"),Ut(Ye+3<xe.length,"Trying to read beyond buffer length")),U.read(xe,Ye,ct,23,4)}function ae(xe,Ye,ct,mt){return mt||(Ut(typeof ct=="boolean","missing or invalid endian"),Ut(Ye+7<xe.length,"Trying to read beyond buffer length")),U.read(xe,Ye,ct,52,8)}function le(xe,Ye,ct,mt,Ct){if(Ct||(Ut(Ye!=null,"missing value"),Ut(typeof mt=="boolean","missing or invalid endian"),Ut(ct!=null,"missing offset"),Ut(ct+1<xe.length,"trying to write beyond buffer length"),sn(Ye,65535)),Ct=xe.length,!(Ct<=ct))for(var Yt=0,gn=Math.min(Ct-ct,2);Yt<gn;Yt++)xe[ct+Yt]=(Ye&255<<8*(mt?Yt:1-Yt))>>>8*(mt?Yt:1-Yt)}function ge(xe,Ye,ct,mt,Ct){if(Ct||(Ut(Ye!=null,"missing value"),Ut(typeof mt=="boolean","missing or invalid endian"),Ut(ct!=null,"missing offset"),Ut(ct+3<xe.length,"trying to write beyond buffer length"),sn(Ye,4294967295)),Ct=xe.length,!(Ct<=ct))for(var Yt=0,gn=Math.min(Ct-ct,4);Yt<gn;Yt++)xe[ct+Yt]=Ye>>>8*(mt?Yt:3-Yt)&255}function ye(xe,Ye,ct,mt,Ct){Ct||(Ut(Ye!=null,"missing value"),Ut(typeof mt=="boolean","missing or invalid endian"),Ut(ct!=null,"missing offset"),Ut(ct+1<xe.length,"Trying to write beyond buffer length"),dn(Ye,32767,-32768)),xe.length<=ct||le(xe,0<=Ye?Ye:65535+Ye+1,ct,mt,Ct)}function De(xe,Ye,ct,mt,Ct){Ct||(Ut(Ye!=null,"missing value"),Ut(typeof mt=="boolean","missing or invalid endian"),Ut(ct!=null,"missing offset"),Ut(ct+3<xe.length,"Trying to write beyond buffer length"),dn(Ye,2147483647,-2147483648)),xe.length<=ct||ge(xe,0<=Ye?Ye:4294967295+Ye+1,ct,mt,Ct)}function He(xe,Ye,ct,mt,Ct){Ct||(Ut(Ye!=null,"missing value"),Ut(typeof mt=="boolean","missing or invalid endian"),Ut(ct!=null,"missing offset"),Ut(ct+3<xe.length,"Trying to write beyond buffer length"),Sn(Ye,34028234663852886e22,-34028234663852886e22)),xe.length<=ct||U.write(xe,Ye,ct,mt,23,4)}function Be(xe,Ye,ct,mt,Ct){Ct||(Ut(Ye!=null,"missing value"),Ut(typeof mt=="boolean","missing or invalid endian"),Ut(ct!=null,"missing offset"),Ut(ct+7<xe.length,"Trying to write beyond buffer length"),Sn(Ye,17976931348623157e292,-17976931348623157e292)),xe.length<=ct||U.write(xe,Ye,ct,mt,52,8)}i.Buffer=k,i.SlowBuffer=k,i.INSPECT_MAX_BYTES=50,k.poolSize=8192,k._useTypedArrays=(function(){try{var xe=new ArrayBuffer(0),Ye=new Uint8Array(xe);return Ye.foo=function(){return 42},Ye.foo()===42&&typeof Ye.subarray=="function"}catch{return!1}})(),k.isEncoding=function(xe){switch(String(xe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},k.isBuffer=function(xe){return!(xe==null||!xe._isBuffer)},k.byteLength=function(xe,Ye){var ct;switch(xe+="",Ye||"utf8"){case"hex":ct=xe.length/2;break;case"utf8":case"utf-8":ct=Ke(xe).length;break;case"ascii":case"binary":case"raw":ct=xe.length;break;case"base64":ct=it(xe).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ct=2*xe.length;break;default:throw new Error("Unknown encoding")}return ct},k.concat=function(xe,Ye){if(Ut(yt(xe),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),xe.length===0)return new k(0);if(xe.length===1)return xe[0];if(typeof Ye!="number")for(Ct=Ye=0;Ct<xe.length;Ct++)Ye+=xe[Ct].length;for(var ct=new k(Ye),mt=0,Ct=0;Ct<xe.length;Ct++){var Yt=xe[Ct];Yt.copy(ct,mt),mt+=Yt.length}return ct},k.prototype.write=function(xe,Ye,ct,mt){isFinite(Ye)?isFinite(ct)||(mt=ct,ct=void 0):(or=mt,mt=Ye,Ye=ct,ct=or),Ye=Number(Ye)||0;var Ct,Yt,gn,En,or=this.length-Ye;switch((!ct||or<(ct=Number(ct)))&&(ct=or),mt=String(mt||"utf8").toLowerCase()){case"hex":Ct=(function(sr,Nr,Pr,Er){Pr=Number(Pr)||0;var Tr=sr.length-Pr;(!Er||Tr<(Er=Number(Er)))&&(Er=Tr),Ut((Tr=Nr.length)%2==0,"Invalid hex string"),Tr/2<Er&&(Er=Tr/2);for(var pi=0;pi<Er;pi++){var Br=parseInt(Nr.substr(2*pi,2),16);Ut(!isNaN(Br),"Invalid hex string"),sr[Pr+pi]=Br}return k._charsWritten=2*pi,pi})(this,xe,Ye,ct);break;case"utf8":case"utf-8":Yt=this,gn=Ye,En=ct,Ct=k._charsWritten=Pe(Ke(xe),Yt,gn,En);break;case"ascii":case"binary":Ct=V(this,xe,Ye,ct);break;case"base64":Yt=this,gn=Ye,En=ct,Ct=k._charsWritten=Pe(it(xe),Yt,gn,En);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Ct=K(this,xe,Ye,ct);break;default:throw new Error("Unknown encoding")}return Ct},k.prototype.toString=function(xe,Ye,ct){var mt,Ct,Yt,gn,En=this;if(xe=String(xe||"utf8").toLowerCase(),Ye=Number(Ye)||0,(ct=ct!==void 0?Number(ct):En.length)===Ye)return"";switch(xe){case"hex":mt=(function(or,sr,Nr){var Pr=or.length;(!sr||sr<0)&&(sr=0),(!Nr||Nr<0||Pr<Nr)&&(Nr=Pr);for(var Er="",Tr=sr;Tr<Nr;Tr++)Er+=je(or[Tr]);return Er})(En,Ye,ct);break;case"utf8":case"utf-8":mt=(function(or,sr,Nr){var Pr="",Er="";Nr=Math.min(or.length,Nr);for(var Tr=sr;Tr<Nr;Tr++)or[Tr]<=127?(Pr+=jt(Er)+String.fromCharCode(or[Tr]),Er=""):Er+="%"+or[Tr].toString(16);return Pr+jt(Er)})(En,Ye,ct);break;case"ascii":case"binary":mt=J(En,Ye,ct);break;case"base64":Ct=En,gn=ct,mt=(Yt=Ye)===0&&gn===Ct.length?F.fromByteArray(Ct):F.fromByteArray(Ct.slice(Yt,gn));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":mt=(function(or,sr,Nr){for(var Pr=or.slice(sr,Nr),Er="",Tr=0;Tr<Pr.length;Tr+=2)Er+=String.fromCharCode(Pr[Tr]+256*Pr[Tr+1]);return Er})(En,Ye,ct);break;default:throw new Error("Unknown encoding")}return mt},k.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},k.prototype.copy=function(xe,Ye,ct,mt){if(Ye=Ye||0,(mt=mt||mt===0?mt:this.length)!==(ct=ct||0)&&xe.length!==0&&this.length!==0){Ut(ct<=mt,"sourceEnd < sourceStart"),Ut(0<=Ye&&Ye<xe.length,"targetStart out of bounds"),Ut(0<=ct&&ct<this.length,"sourceStart out of bounds"),Ut(0<=mt&&mt<=this.length,"sourceEnd out of bounds"),mt>this.length&&(mt=this.length);var Ct=(mt=xe.length-Ye<mt-ct?xe.length-Ye+ct:mt)-ct;if(Ct<100||!k._useTypedArrays)for(var Yt=0;Yt<Ct;Yt++)xe[Yt+Ye]=this[Yt+ct];else xe._set(this.subarray(ct,ct+Ct),Ye)}},k.prototype.slice=function(xe,Ye){var ct=this.length;if(xe=Ne(xe,ct,0),Ye=Ne(Ye,ct,ct),k._useTypedArrays)return k._augment(this.subarray(xe,Ye));for(var mt=Ye-xe,Ct=new k(mt,void 0,!0),Yt=0;Yt<mt;Yt++)Ct[Yt]=this[Yt+xe];return Ct},k.prototype.get=function(xe){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(xe)},k.prototype.set=function(xe,Ye){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(xe,Ye)},k.prototype.readUInt8=function(xe,Ye){if(Ye||(Ut(xe!=null,"missing offset"),Ut(xe<this.length,"Trying to read beyond buffer length")),!(xe>=this.length))return this[xe]},k.prototype.readUInt16LE=function(xe,Ye){return ie(this,xe,!0,Ye)},k.prototype.readUInt16BE=function(xe,Ye){return ie(this,xe,!1,Ye)},k.prototype.readUInt32LE=function(xe,Ye){return Q(this,xe,!0,Ye)},k.prototype.readUInt32BE=function(xe,Ye){return Q(this,xe,!1,Ye)},k.prototype.readInt8=function(xe,Ye){if(Ye||(Ut(xe!=null,"missing offset"),Ut(xe<this.length,"Trying to read beyond buffer length")),!(xe>=this.length))return 128&this[xe]?-1*(255-this[xe]+1):this[xe]},k.prototype.readInt16LE=function(xe,Ye){return W(this,xe,!0,Ye)},k.prototype.readInt16BE=function(xe,Ye){return W(this,xe,!1,Ye)},k.prototype.readInt32LE=function(xe,Ye){return te(this,xe,!0,Ye)},k.prototype.readInt32BE=function(xe,Ye){return te(this,xe,!1,Ye)},k.prototype.readFloatLE=function(xe,Ye){return X(this,xe,!0,Ye)},k.prototype.readFloatBE=function(xe,Ye){return X(this,xe,!1,Ye)},k.prototype.readDoubleLE=function(xe,Ye){return ae(this,xe,!0,Ye)},k.prototype.readDoubleBE=function(xe,Ye){return ae(this,xe,!1,Ye)},k.prototype.writeUInt8=function(xe,Ye,ct){ct||(Ut(xe!=null,"missing value"),Ut(Ye!=null,"missing offset"),Ut(Ye<this.length,"trying to write beyond buffer length"),sn(xe,255)),Ye>=this.length||(this[Ye]=xe)},k.prototype.writeUInt16LE=function(xe,Ye,ct){le(this,xe,Ye,!0,ct)},k.prototype.writeUInt16BE=function(xe,Ye,ct){le(this,xe,Ye,!1,ct)},k.prototype.writeUInt32LE=function(xe,Ye,ct){ge(this,xe,Ye,!0,ct)},k.prototype.writeUInt32BE=function(xe,Ye,ct){ge(this,xe,Ye,!1,ct)},k.prototype.writeInt8=function(xe,Ye,ct){ct||(Ut(xe!=null,"missing value"),Ut(Ye!=null,"missing offset"),Ut(Ye<this.length,"Trying to write beyond buffer length"),dn(xe,127,-128)),Ye>=this.length||(0<=xe?this.writeUInt8(xe,Ye,ct):this.writeUInt8(255+xe+1,Ye,ct))},k.prototype.writeInt16LE=function(xe,Ye,ct){ye(this,xe,Ye,!0,ct)},k.prototype.writeInt16BE=function(xe,Ye,ct){ye(this,xe,Ye,!1,ct)},k.prototype.writeInt32LE=function(xe,Ye,ct){De(this,xe,Ye,!0,ct)},k.prototype.writeInt32BE=function(xe,Ye,ct){De(this,xe,Ye,!1,ct)},k.prototype.writeFloatLE=function(xe,Ye,ct){He(this,xe,Ye,!0,ct)},k.prototype.writeFloatBE=function(xe,Ye,ct){He(this,xe,Ye,!1,ct)},k.prototype.writeDoubleLE=function(xe,Ye,ct){Be(this,xe,Ye,!0,ct)},k.prototype.writeDoubleBE=function(xe,Ye,ct){Be(this,xe,Ye,!1,ct)},k.prototype.fill=function(xe,Ye,ct){if(Ye=Ye||0,ct=ct||this.length,Ut(typeof(xe=typeof(xe=xe||0)=="string"?xe.charCodeAt(0):xe)=="number"&&!isNaN(xe),"value is not a number"),Ut(Ye<=ct,"end < start"),ct!==Ye&&this.length!==0){Ut(0<=Ye&&Ye<this.length,"start out of bounds"),Ut(0<=ct&&ct<=this.length,"end out of bounds");for(var mt=Ye;mt<ct;mt++)this[mt]=xe}},k.prototype.inspect=function(){for(var xe=[],Ye=this.length,ct=0;ct<Ye;ct++)if(xe[ct]=je(this[ct]),ct===i.INSPECT_MAX_BYTES){xe[ct+1]="...";break}return"<Buffer "+xe.join(" ")+">"},k.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(k._useTypedArrays)return new k(this).buffer;for(var xe=new Uint8Array(this.length),Ye=0,ct=xe.length;Ye<ct;Ye+=1)xe[Ye]=this[Ye];return xe.buffer};var Ee=k.prototype;function Ne(xe,Ye,ct){return typeof xe!="number"?ct:Ye<=(xe=~~xe)?Ye:0<=xe||0<=(xe+=Ye)?xe:0}function at(xe){return(xe=~~Math.ceil(+xe))<0?0:xe}function yt(xe){return(Array.isArray||function(Ye){return Object.prototype.toString.call(Ye)==="[object Array]"})(xe)}function je(xe){return xe<16?"0"+xe.toString(16):xe.toString(16)}function Ke(xe){for(var Ye=[],ct=0;ct<xe.length;ct++){var mt=xe.charCodeAt(ct);if(mt<=127)Ye.push(xe.charCodeAt(ct));else for(var Ct=ct,Yt=(55296<=mt&&mt<=57343&&ct++,encodeURIComponent(xe.slice(Ct,ct+1)).substr(1).split("%")),gn=0;gn<Yt.length;gn++)Ye.push(parseInt(Yt[gn],16))}return Ye}function it(xe){return F.toByteArray(xe)}function Pe(xe,Ye,ct,mt){for(var Ct=0;Ct<mt&&!(Ct+ct>=Ye.length||Ct>=xe.length);Ct++)Ye[Ct+ct]=xe[Ct];return Ct}function jt(xe){try{return decodeURIComponent(xe)}catch{return""}}function sn(xe,Ye){Ut(typeof xe=="number","cannot write a non-number as a number"),Ut(0<=xe,"specified a negative value for writing an unsigned value"),Ut(xe<=Ye,"value is larger than maximum value for type"),Ut(Math.floor(xe)===xe,"value has a fractional component")}function dn(xe,Ye,ct){Ut(typeof xe=="number","cannot write a non-number as a number"),Ut(xe<=Ye,"value larger than maximum allowed value"),Ut(ct<=xe,"value smaller than minimum allowed value"),Ut(Math.floor(xe)===xe,"value has a fractional component")}function Sn(xe,Ye,ct){Ut(typeof xe=="number","cannot write a non-number as a number"),Ut(xe<=Ye,"value larger than maximum allowed value"),Ut(ct<=xe,"value smaller than minimum allowed value")}function Ut(xe,Ye){if(!xe)throw new Error(Ye||"Failed assertion")}k._augment=function(xe){return xe._isBuffer=!0,xe._get=xe.get,xe._set=xe.set,xe.get=Ee.get,xe.set=Ee.set,xe.write=Ee.write,xe.toString=Ee.toString,xe.toLocaleString=Ee.toString,xe.toJSON=Ee.toJSON,xe.copy=Ee.copy,xe.slice=Ee.slice,xe.readUInt8=Ee.readUInt8,xe.readUInt16LE=Ee.readUInt16LE,xe.readUInt16BE=Ee.readUInt16BE,xe.readUInt32LE=Ee.readUInt32LE,xe.readUInt32BE=Ee.readUInt32BE,xe.readInt8=Ee.readInt8,xe.readInt16LE=Ee.readInt16LE,xe.readInt16BE=Ee.readInt16BE,xe.readInt32LE=Ee.readInt32LE,xe.readInt32BE=Ee.readInt32BE,xe.readFloatLE=Ee.readFloatLE,xe.readFloatBE=Ee.readFloatBE,xe.readDoubleLE=Ee.readDoubleLE,xe.readDoubleBE=Ee.readDoubleBE,xe.writeUInt8=Ee.writeUInt8,xe.writeUInt16LE=Ee.writeUInt16LE,xe.writeUInt16BE=Ee.writeUInt16BE,xe.writeUInt32LE=Ee.writeUInt32LE,xe.writeUInt32BE=Ee.writeUInt32BE,xe.writeInt8=Ee.writeInt8,xe.writeInt16LE=Ee.writeInt16LE,xe.writeInt16BE=Ee.writeInt16BE,xe.writeInt32LE=Ee.writeInt32LE,xe.writeInt32BE=Ee.writeInt32BE,xe.writeFloatLE=Ee.writeFloatLE,xe.writeFloatBE=Ee.writeFloatBE,xe.writeDoubleLE=Ee.writeDoubleLE,xe.writeDoubleBE=Ee.writeDoubleBE,xe.fill=Ee.fill,xe.inspect=Ee.inspect,xe.toArrayBuffer=Ee.toArrayBuffer,xe}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(n,r,i){(function(s,f,F,p,_,S,E,I,z){var F=n("buffer").Buffer,U=4,k=new F(U);k.fill(0),r.exports={hash:function(V,K,J,ie){for(var Q=K((function(le,ge){le.length%U!=0&&(ye=le.length+(U-le.length%U),le=F.concat([le,k],ye));for(var ye,De=[],He=ge?le.readInt32BE:le.readInt32LE,Be=0;Be<le.length;Be+=U)De.push(He.call(le,Be));return De})(V=F.isBuffer(V)?V:new F(V),ie),8*V.length),K=ie,W=new F(J),te=K?W.writeInt32BE:W.writeInt32LE,X=0;X<Q.length;X++)te.call(W,Q[X],4*X,!0);return W}}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(n,r,i){(function(s,f,F,p,_,S,E,I,z){var F=n("buffer").Buffer,U=n("./sha"),k=n("./sha256"),V=n("./rng"),K={sha1:U,sha256:k,md5:n("./md5")},J=64,ie=new F(J);function Q(le,ge){var ye=K[le=le||"sha1"],De=[];return ye||W("algorithm:",le,"is not yet supported"),{update:function(He){return F.isBuffer(He)||(He=new F(He)),De.push(He),He.length,this},digest:function(He){var Be=F.concat(De),Be=ge?(function(Ee,Ne,at){F.isBuffer(Ne)||(Ne=new F(Ne)),F.isBuffer(at)||(at=new F(at)),Ne.length>J?Ne=Ee(Ne):Ne.length<J&&(Ne=F.concat([Ne,ie],J));for(var yt=new F(J),je=new F(J),Ke=0;Ke<J;Ke++)yt[Ke]=54^Ne[Ke],je[Ke]=92^Ne[Ke];return at=Ee(F.concat([yt,at])),Ee(F.concat([je,at]))})(ye,ge,Be):ye(Be);return De=null,He?Be.toString(He):Be}}}function W(){var le=[].slice.call(arguments).join(" ");throw new Error([le,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}ie.fill(0),i.createHash=function(le){return Q(le)},i.createHmac=Q,i.randomBytes=function(le,ge){if(!ge||!ge.call)return new F(V(le));try{ge.call(this,void 0,new F(V(le)))}catch(ye){ge(ye)}};var te,X=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],ae=function(le){i[le]=function(){W("sorry,",le,"is not implemented yet")}};for(te in X)ae(X[te])}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(n,r,i){(function(s,f,a,p,_,S,E,I,z){var F=n("./helpers");function U(W,te){W[te>>5]|=128<<te%32,W[14+(te+64>>>9<<4)]=te;for(var X=1732584193,ae=-271733879,le=-1732584194,ge=271733878,ye=0;ye<W.length;ye+=16){var De=X,He=ae,Be=le,Ee=ge,X=V(X,ae,le,ge,W[ye+0],7,-680876936),ge=V(ge,X,ae,le,W[ye+1],12,-389564586),le=V(le,ge,X,ae,W[ye+2],17,606105819),ae=V(ae,le,ge,X,W[ye+3],22,-1044525330);X=V(X,ae,le,ge,W[ye+4],7,-176418897),ge=V(ge,X,ae,le,W[ye+5],12,1200080426),le=V(le,ge,X,ae,W[ye+6],17,-1473231341),ae=V(ae,le,ge,X,W[ye+7],22,-45705983),X=V(X,ae,le,ge,W[ye+8],7,1770035416),ge=V(ge,X,ae,le,W[ye+9],12,-1958414417),le=V(le,ge,X,ae,W[ye+10],17,-42063),ae=V(ae,le,ge,X,W[ye+11],22,-1990404162),X=V(X,ae,le,ge,W[ye+12],7,1804603682),ge=V(ge,X,ae,le,W[ye+13],12,-40341101),le=V(le,ge,X,ae,W[ye+14],17,-1502002290),X=K(X,ae=V(ae,le,ge,X,W[ye+15],22,1236535329),le,ge,W[ye+1],5,-165796510),ge=K(ge,X,ae,le,W[ye+6],9,-1069501632),le=K(le,ge,X,ae,W[ye+11],14,643717713),ae=K(ae,le,ge,X,W[ye+0],20,-373897302),X=K(X,ae,le,ge,W[ye+5],5,-701558691),ge=K(ge,X,ae,le,W[ye+10],9,38016083),le=K(le,ge,X,ae,W[ye+15],14,-660478335),ae=K(ae,le,ge,X,W[ye+4],20,-405537848),X=K(X,ae,le,ge,W[ye+9],5,568446438),ge=K(ge,X,ae,le,W[ye+14],9,-1019803690),le=K(le,ge,X,ae,W[ye+3],14,-187363961),ae=K(ae,le,ge,X,W[ye+8],20,1163531501),X=K(X,ae,le,ge,W[ye+13],5,-1444681467),ge=K(ge,X,ae,le,W[ye+2],9,-51403784),le=K(le,ge,X,ae,W[ye+7],14,1735328473),X=J(X,ae=K(ae,le,ge,X,W[ye+12],20,-1926607734),le,ge,W[ye+5],4,-378558),ge=J(ge,X,ae,le,W[ye+8],11,-2022574463),le=J(le,ge,X,ae,W[ye+11],16,1839030562),ae=J(ae,le,ge,X,W[ye+14],23,-35309556),X=J(X,ae,le,ge,W[ye+1],4,-1530992060),ge=J(ge,X,ae,le,W[ye+4],11,1272893353),le=J(le,ge,X,ae,W[ye+7],16,-155497632),ae=J(ae,le,ge,X,W[ye+10],23,-1094730640),X=J(X,ae,le,ge,W[ye+13],4,681279174),ge=J(ge,X,ae,le,W[ye+0],11,-358537222),le=J(le,ge,X,ae,W[ye+3],16,-722521979),ae=J(ae,le,ge,X,W[ye+6],23,76029189),X=J(X,ae,le,ge,W[ye+9],4,-640364487),ge=J(ge,X,ae,le,W[ye+12],11,-421815835),le=J(le,ge,X,ae,W[ye+15],16,530742520),X=ie(X,ae=J(ae,le,ge,X,W[ye+2],23,-995338651),le,ge,W[ye+0],6,-198630844),ge=ie(ge,X,ae,le,W[ye+7],10,1126891415),le=ie(le,ge,X,ae,W[ye+14],15,-1416354905),ae=ie(ae,le,ge,X,W[ye+5],21,-57434055),X=ie(X,ae,le,ge,W[ye+12],6,1700485571),ge=ie(ge,X,ae,le,W[ye+3],10,-1894986606),le=ie(le,ge,X,ae,W[ye+10],15,-1051523),ae=ie(ae,le,ge,X,W[ye+1],21,-2054922799),X=ie(X,ae,le,ge,W[ye+8],6,1873313359),ge=ie(ge,X,ae,le,W[ye+15],10,-30611744),le=ie(le,ge,X,ae,W[ye+6],15,-1560198380),ae=ie(ae,le,ge,X,W[ye+13],21,1309151649),X=ie(X,ae,le,ge,W[ye+4],6,-145523070),ge=ie(ge,X,ae,le,W[ye+11],10,-1120210379),le=ie(le,ge,X,ae,W[ye+2],15,718787259),ae=ie(ae,le,ge,X,W[ye+9],21,-343485551),X=Q(X,De),ae=Q(ae,He),le=Q(le,Be),ge=Q(ge,Ee)}return Array(X,ae,le,ge)}function k(W,te,X,ae,le,ge){return Q((te=Q(Q(te,W),Q(ae,ge)))<<le|te>>>32-le,X)}function V(W,te,X,ae,le,ge,ye){return k(te&X|~te&ae,W,te,le,ge,ye)}function K(W,te,X,ae,le,ge,ye){return k(te&ae|X&~ae,W,te,le,ge,ye)}function J(W,te,X,ae,le,ge,ye){return k(te^X^ae,W,te,le,ge,ye)}function ie(W,te,X,ae,le,ge,ye){return k(X^(te|~ae),W,te,le,ge,ye)}function Q(W,te){var X=(65535&W)+(65535&te);return(W>>16)+(te>>16)+(X>>16)<<16|65535&X}r.exports=function(W){return F.hash(W,U,16)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(n,r,i){(function(s,f,a,p,_,S,E,I,z){r.exports=function(F){for(var U,k=new Array(F),V=0;V<F;V++)(3&V)==0&&(U=4294967296*Math.random()),k[V]=U>>>((3&V)<<3)&255;return k}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(n,r,i){(function(s,f,a,p,_,S,E,I,z){var F=n("./helpers");function U(K,J){K[J>>5]|=128<<24-J%32,K[15+(J+64>>9<<4)]=J;for(var ie,Q,W,te=Array(80),X=1732584193,ae=-271733879,le=-1732584194,ge=271733878,ye=-1009589776,De=0;De<K.length;De+=16){for(var He=X,Be=ae,Ee=le,Ne=ge,at=ye,yt=0;yt<80;yt++){te[yt]=yt<16?K[De+yt]:V(te[yt-3]^te[yt-8]^te[yt-14]^te[yt-16],1);var je=k(k(V(X,5),(je=ae,Q=le,W=ge,(ie=yt)<20?je&Q|~je&W:!(ie<40)&&ie<60?je&Q|je&W|Q&W:je^Q^W)),k(k(ye,te[yt]),(ie=yt)<20?1518500249:ie<40?1859775393:ie<60?-1894007588:-899497514)),ye=ge,ge=le,le=V(ae,30),ae=X,X=je}X=k(X,He),ae=k(ae,Be),le=k(le,Ee),ge=k(ge,Ne),ye=k(ye,at)}return Array(X,ae,le,ge,ye)}function k(K,J){var ie=(65535&K)+(65535&J);return(K>>16)+(J>>16)+(ie>>16)<<16|65535&ie}function V(K,J){return K<<J|K>>>32-J}r.exports=function(K){return F.hash(K,U,20,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(n,r,i){(function(s,f,a,p,_,S,E,I,z){function F(J,ie){var Q=(65535&J)+(65535&ie);return(J>>16)+(ie>>16)+(Q>>16)<<16|65535&Q}function U(J,ie){var Q,W=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),te=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),X=new Array(64);J[ie>>5]|=128<<24-ie%32,J[15+(ie+64>>9<<4)]=ie;for(var ae,le,ge=0;ge<J.length;ge+=16){for(var ye=te[0],De=te[1],He=te[2],Be=te[3],Ee=te[4],Ne=te[5],at=te[6],yt=te[7],je=0;je<64;je++)X[je]=je<16?J[je+ge]:F(F(F((le=X[je-2],V(le,17)^V(le,19)^K(le,10)),X[je-7]),(le=X[je-15],V(le,7)^V(le,18)^K(le,3))),X[je-16]),Q=F(F(F(F(yt,V(le=Ee,6)^V(le,11)^V(le,25)),Ee&Ne^~Ee&at),W[je]),X[je]),ae=F(V(ae=ye,2)^V(ae,13)^V(ae,22),ye&De^ye&He^De&He),yt=at,at=Ne,Ne=Ee,Ee=F(Be,Q),Be=He,He=De,De=ye,ye=F(Q,ae);te[0]=F(ye,te[0]),te[1]=F(De,te[1]),te[2]=F(He,te[2]),te[3]=F(Be,te[3]),te[4]=F(Ee,te[4]),te[5]=F(Ne,te[5]),te[6]=F(at,te[6]),te[7]=F(yt,te[7])}return te}var k=n("./helpers"),V=function(J,ie){return J>>>ie|J<<32-ie},K=function(J,ie){return J>>>ie};r.exports=function(J){return k.hash(J,U,32,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(n,r,i){(function(s,f,a,p,_,S,E,I,z){i.read=function(F,U,k,V,ge){var J,ie,Q=8*ge-V-1,W=(1<<Q)-1,te=W>>1,X=-7,ae=k?ge-1:0,le=k?-1:1,ge=F[U+ae];for(ae+=le,J=ge&(1<<-X)-1,ge>>=-X,X+=Q;0<X;J=256*J+F[U+ae],ae+=le,X-=8);for(ie=J&(1<<-X)-1,J>>=-X,X+=V;0<X;ie=256*ie+F[U+ae],ae+=le,X-=8);if(J===0)J=1-te;else{if(J===W)return ie?NaN:1/0*(ge?-1:1);ie+=Math.pow(2,V),J-=te}return(ge?-1:1)*ie*Math.pow(2,J-V)},i.write=function(F,U,k,V,K,ye){var ie,Q,W=8*ye-K-1,te=(1<<W)-1,X=te>>1,ae=K===23?Math.pow(2,-24)-Math.pow(2,-77):0,le=V?0:ye-1,ge=V?1:-1,ye=U<0||U===0&&1/U<0?1:0;for(U=Math.abs(U),isNaN(U)||U===1/0?(Q=isNaN(U)?1:0,ie=te):(ie=Math.floor(Math.log(U)/Math.LN2),U*(V=Math.pow(2,-ie))<1&&(ie--,V*=2),2<=(U+=1<=ie+X?ae/V:ae*Math.pow(2,1-X))*V&&(ie++,V/=2),te<=ie+X?(Q=0,ie=te):1<=ie+X?(Q=(U*V-1)*Math.pow(2,K),ie+=X):(Q=U*Math.pow(2,X-1)*Math.pow(2,K),ie=0));8<=K;F[k+le]=255&Q,le+=ge,Q/=256,K-=8);for(ie=ie<<K|Q,W+=K;0<W;F[k+le]=255&ie,le+=ge,ie/=256,W-=8);F[k+le-ge]|=128*ye}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(n,r,i){(function(s,f,a,p,_,S,E,I,z){var F,U,k;function V(){}(s=r.exports={}).nextTick=(U=typeof window<"u"&&window.setImmediate,k=typeof window<"u"&&window.postMessage&&window.addEventListener,U?function(K){return window.setImmediate(K)}:k?(F=[],window.addEventListener("message",function(K){var J=K.source;J!==window&&J!==null||K.data!=="process-tick"||(K.stopPropagation(),0<F.length&&F.shift()())},!0),function(K){F.push(K),window.postMessage("process-tick","*")}):function(K){setTimeout(K,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=V,s.addListener=V,s.once=V,s.off=V,s.removeListener=V,s.removeAllListeners=V,s.emit=V,s.binding=function(K){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(K){throw new Error("process.chdir is not supported")}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(W3)),W3.exports}var fRe=cRe(),Eue=typeof global=="object"&&global&&global.Object===Object&&global,hRe=typeof self=="object"&&self&&self.Object===Object&&self,Cp=Eue||hRe||Function("return this")(),id=Cp.Symbol,Aue=Object.prototype,dRe=Aue.hasOwnProperty,pRe=Aue.toString,IE=id?id.toStringTag:void 0;function mRe(e){var t=dRe.call(e,IE),n=e[IE];try{e[IE]=void 0;var r=!0}catch{}var i=pRe.call(e);return r&&(t?e[IE]=n:delete e[IE]),i}var gRe=Object.prototype,yRe=gRe.toString;function _Re(e){return yRe.call(e)}var vRe="[object Null]",bRe="[object Undefined]",WW=id?id.toStringTag:void 0;function Px(e){return e==null?e===void 0?bRe:vRe:WW&&WW in Object(e)?mRe(e):_Re(e)}function sg(e){return e!=null&&typeof e=="object"}var xRe="[object Symbol]";function eR(e){return typeof e=="symbol"||sg(e)&&Px(e)==xRe}function Rx(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Ru=Array.isArray,XW=id?id.prototype:void 0,ZW=XW?XW.toString:void 0;function Oue(e){if(typeof e=="string")return e;if(Ru(e))return Rx(e,Oue)+"";if(eR(e))return ZW?ZW.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var wRe=/\s/;function SRe(e){for(var t=e.length;t--&&wRe.test(e.charAt(t)););return t}var TRe=/^\s+/;function ERe(e){return e&&e.slice(0,SRe(e)+1).replace(TRe,"")}function e_(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var KW=NaN,ARe=/^[-+]0x[0-9a-f]+$/i,ORe=/^0b[01]+$/i,CRe=/^0o[0-7]+$/i,MRe=parseInt;function Cue(e){if(typeof e=="number")return e;if(eR(e))return KW;if(e_(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=e_(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ERe(e);var n=ORe.test(e);return n||CRe.test(e)?MRe(e.slice(2),n?2:8):ARe.test(e)?KW:+e}var QW=1/0,DRe=17976931348623157e292;function IRe(e){if(!e)return e===0?e:0;if(e=Cue(e),e===QW||e===-QW){var t=e<0?-1:1;return t*DRe}return e===e?e:0}function Mue(e){var t=IRe(e),n=t%1;return t===t?n?t-n:t:0}function tR(e){return e}var PRe="[object AsyncFunction]",RRe="[object Function]",kRe="[object GeneratorFunction]",LRe="[object Proxy]";function Due(e){if(!e_(e))return!1;var t=Px(e);return t==RRe||t==kRe||t==PRe||t==LRe}var X3=Cp["__core-js_shared__"],JW=(function(){var e=/[^.]+$/.exec(X3&&X3.keys&&X3.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function zRe(e){return!!JW&&JW in e}var FRe=Function.prototype,NRe=FRe.toString;function kx(e){if(e!=null){try{return NRe.call(e)}catch{}try{return e+""}catch{}}return""}var BRe=/[\\^$.*+?()[\]{}|]/g,jRe=/^\[object .+?Constructor\]$/,URe=Function.prototype,$Re=Object.prototype,VRe=URe.toString,qRe=$Re.hasOwnProperty,HRe=RegExp("^"+VRe.call(qRe).replace(BRe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function GRe(e){if(!e_(e)||zRe(e))return!1;var t=Due(e)?HRe:jRe;return t.test(kx(e))}function YRe(e,t){return e==null?void 0:e[t]}function Lx(e,t){var n=YRe(e,t);return GRe(n)?n:void 0}var wj=Lx(Cp,"WeakMap"),eX=Object.create,WRe=(function(){function e(){}return function(t){if(!e_(t))return{};if(eX)return eX(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}})();function XRe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ZRe(){}var KRe=800,QRe=16,JRe=Date.now;function eke(e){var t=0,n=0;return function(){var r=JRe(),i=QRe-(r-n);if(n=r,i>0){if(++t>=KRe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function tke(e){return function(){return e}}var HD=(function(){try{var e=Lx(Object,"defineProperty");return e({},"",{}),e}catch{}})(),nke=HD?function(e,t){return HD(e,"toString",{configurable:!0,enumerable:!1,value:tke(t),writable:!0})}:tR,rke=eke(nke);function Iue(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function ike(e,t,n,r){for(var i=e.length,s=n+-1;++s<i;)if(t(e[s],s,e))return s;return-1}function ake(e){return e!==e}function oke(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function Pue(e,t,n){return t===t?oke(e,t,n):ike(e,ake,n)}function J$(e,t){var n=e==null?0:e.length;return!!n&&Pue(e,t,0)>-1}var ske=9007199254740991,lke=/^(?:0|[1-9]\d*)$/;function eV(e,t){var n=typeof e;return t=t??ske,!!t&&(n=="number"||n!="symbol"&&lke.test(e))&&e>-1&&e%1==0&&e<t}function Rue(e,t,n){t=="__proto__"&&HD?HD(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function tV(e,t){return e===t||e!==e&&t!==t}var uke=Object.prototype,cke=uke.hasOwnProperty;function kue(e,t,n){var r=e[t];(!(cke.call(e,t)&&tV(r,n))||n===void 0&&!(t in e))&&Rue(e,t,n)}var tX=Math.max;function fke(e,t,n){return t=tX(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=tX(r.length-t,0),f=Array(s);++i<s;)f[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(f),XRe(e,this,a)}}function nR(e,t){return rke(fke(e,t,tR),e+"")}var hke=9007199254740991;function nV(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=hke}function HS(e){return e!=null&&nV(e.length)&&!Due(e)}var dke=Object.prototype;function rV(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||dke;return e===n}function Lue(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var pke="[object Arguments]";function nX(e){return sg(e)&&Px(e)==pke}var zue=Object.prototype,mke=zue.hasOwnProperty,gke=zue.propertyIsEnumerable,rR=nX((function(){return arguments})())?nX:function(e){return sg(e)&&mke.call(e,"callee")&&!gke.call(e,"callee")};function yke(){return!1}var Fue=typeof Kf=="object"&&Kf&&!Kf.nodeType&&Kf,rX=Fue&&typeof Mu=="object"&&Mu&&!Mu.nodeType&&Mu,_ke=rX&&rX.exports===Fue,iX=_ke?Cp.Buffer:void 0,vke=iX?iX.isBuffer:void 0,z2=vke||yke,bke="[object Arguments]",xke="[object Array]",wke="[object Boolean]",Ske="[object Date]",Tke="[object Error]",Eke="[object Function]",Ake="[object Map]",Oke="[object Number]",Cke="[object Object]",Mke="[object RegExp]",Dke="[object Set]",Ike="[object String]",Pke="[object WeakMap]",Rke="[object ArrayBuffer]",kke="[object DataView]",Lke="[object Float32Array]",zke="[object Float64Array]",Fke="[object Int8Array]",Nke="[object Int16Array]",Bke="[object Int32Array]",jke="[object Uint8Array]",Uke="[object Uint8ClampedArray]",$ke="[object Uint16Array]",Vke="[object Uint32Array]",Mo={};Mo[Lke]=Mo[zke]=Mo[Fke]=Mo[Nke]=Mo[Bke]=Mo[jke]=Mo[Uke]=Mo[$ke]=Mo[Vke]=!0;Mo[bke]=Mo[xke]=Mo[Rke]=Mo[wke]=Mo[kke]=Mo[Ske]=Mo[Tke]=Mo[Eke]=Mo[Ake]=Mo[Oke]=Mo[Cke]=Mo[Mke]=Mo[Dke]=Mo[Ike]=Mo[Pke]=!1;function qke(e){return sg(e)&&nV(e.length)&&!!Mo[Px(e)]}function iO(e){return function(t){return e(t)}}var Nue=typeof Kf=="object"&&Kf&&!Kf.nodeType&&Kf,_2=Nue&&typeof Mu=="object"&&Mu&&!Mu.nodeType&&Mu,Hke=_2&&_2.exports===Nue,Z3=Hke&&Eue.process,Ww=(function(){try{var e=_2&&_2.require&&_2.require("util").types;return e||Z3&&Z3.binding&&Z3.binding("util")}catch{}})(),aX=Ww&&Ww.isTypedArray,iV=aX?iO(aX):qke,Gke=Object.prototype,Yke=Gke.hasOwnProperty;function Wke(e,t){var n=Ru(e),r=!n&&rR(e),i=!n&&!r&&z2(e),s=!n&&!r&&!i&&iV(e),f=n||r||i||s,a=f?Lue(e.length,String):[],p=a.length;for(var _ in e)Yke.call(e,_)&&!(f&&(_=="length"||i&&(_=="offset"||_=="parent")||s&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||eV(_,p)))&&a.push(_);return a}function Bue(e,t){return function(n){return e(t(n))}}var Xke=Bue(Object.keys,Object),Zke=Object.prototype,Kke=Zke.hasOwnProperty;function jue(e){if(!rV(e))return Xke(e);var t=[];for(var n in Object(e))Kke.call(e,n)&&n!="constructor"&&t.push(n);return t}function wu(e){return HS(e)?Wke(e):jue(e)}var Qke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jke=/^\w*$/;function aV(e,t){if(Ru(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||eR(e)?!0:Jke.test(e)||!Qke.test(e)||t!=null&&e in Object(t)}var F2=Lx(Object,"create");function eLe(){this.__data__=F2?F2(null):{},this.size=0}function tLe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var nLe="__lodash_hash_undefined__",rLe=Object.prototype,iLe=rLe.hasOwnProperty;function aLe(e){var t=this.__data__;if(F2){var n=t[e];return n===nLe?void 0:n}return iLe.call(t,e)?t[e]:void 0}var oLe=Object.prototype,sLe=oLe.hasOwnProperty;function lLe(e){var t=this.__data__;return F2?t[e]!==void 0:sLe.call(t,e)}var uLe="__lodash_hash_undefined__";function cLe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=F2&&t===void 0?uLe:t,this}function gx(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}gx.prototype.clear=eLe;gx.prototype.delete=tLe;gx.prototype.get=aLe;gx.prototype.has=lLe;gx.prototype.set=cLe;function fLe(){this.__data__=[],this.size=0}function iR(e,t){for(var n=e.length;n--;)if(tV(e[n][0],t))return n;return-1}var hLe=Array.prototype,dLe=hLe.splice;function pLe(e){var t=this.__data__,n=iR(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():dLe.call(t,n,1),--this.size,!0}function mLe(e){var t=this.__data__,n=iR(t,e);return n<0?void 0:t[n][1]}function gLe(e){return iR(this.__data__,e)>-1}function yLe(e,t){var n=this.__data__,r=iR(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function h_(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}h_.prototype.clear=fLe;h_.prototype.delete=pLe;h_.prototype.get=mLe;h_.prototype.has=gLe;h_.prototype.set=yLe;var N2=Lx(Cp,"Map");function _Le(){this.size=0,this.__data__={hash:new gx,map:new(N2||h_),string:new gx}}function vLe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function aR(e,t){var n=e.__data__;return vLe(t)?n[typeof t=="string"?"string":"hash"]:n.map}function bLe(e){var t=aR(this,e).delete(e);return this.size-=t?1:0,t}function xLe(e){return aR(this,e).get(e)}function wLe(e){return aR(this,e).has(e)}function SLe(e,t){var n=aR(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function d_(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}d_.prototype.clear=_Le;d_.prototype.delete=bLe;d_.prototype.get=xLe;d_.prototype.has=wLe;d_.prototype.set=SLe;var TLe="Expected a function";function oV(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(TLe);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var f=e.apply(this,r);return n.cache=s.set(i,f)||s,f};return n.cache=new(oV.Cache||d_),n}oV.Cache=d_;var ELe=500;function ALe(e){var t=oV(e,function(r){return n.size===ELe&&n.clear(),r}),n=t.cache;return t}var OLe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,CLe=/\\(\\)?/g,MLe=ALe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(OLe,function(n,r,i,s){t.push(i?s.replace(CLe,"$1"):r||n)}),t});function Sj(e){return e==null?"":Oue(e)}function sV(e,t){return Ru(e)?e:aV(e,t)?[e]:MLe(Sj(e))}function aO(e){if(typeof e=="string"||eR(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Uue(e,t){t=sV(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[aO(t[n++])];return n&&n==r?e:void 0}function nf(e,t,n){var r=e==null?void 0:Uue(e,t);return r===void 0?n:r}function $ue(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var oX=id?id.isConcatSpreadable:void 0;function DLe(e){return Ru(e)||rR(e)||!!(oX&&e&&e[oX])}function lV(e,t,n,r,i){var s=-1,f=e.length;for(n||(n=DLe),i||(i=[]);++s<f;){var a=e[s];n(a)?$ue(i,a):r||(i[i.length]=a)}return i}var ILe=Bue(Object.getPrototypeOf,Object),PLe=Cp.isFinite,RLe=Math.min;function kLe(e){var t=Math[e];return function(n,r){if(n=Cue(n),r=r==null?0:RLe(Mue(r),292),r&&PLe(n)){var i=(Sj(n)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+r));return i=(Sj(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}function LLe(){this.__data__=new h_,this.size=0}function zLe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function FLe(e){return this.__data__.get(e)}function NLe(e){return this.__data__.has(e)}var BLe=200;function jLe(e,t){var n=this.__data__;if(n instanceof h_){var r=n.__data__;if(!N2||r.length<BLe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new d_(r)}return n.set(e,t),this.size=n.size,this}function Qm(e){var t=this.__data__=new h_(e);this.size=t.size}Qm.prototype.clear=LLe;Qm.prototype.delete=zLe;Qm.prototype.get=FLe;Qm.prototype.has=NLe;Qm.prototype.set=jLe;var Vue=typeof Kf=="object"&&Kf&&!Kf.nodeType&&Kf,sX=Vue&&typeof Mu=="object"&&Mu&&!Mu.nodeType&&Mu,ULe=sX&&sX.exports===Vue,lX=ULe?Cp.Buffer:void 0;lX&&lX.allocUnsafe;function $Le(e,t){return e.slice()}function uV(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var f=e[n];t(f,n,e)&&(s[i++]=f)}return s}function VLe(){return[]}var qLe=Object.prototype,HLe=qLe.propertyIsEnumerable,uX=Object.getOwnPropertySymbols,GLe=uX?function(e){return e==null?[]:(e=Object(e),uV(uX(e),function(t){return HLe.call(e,t)}))}:VLe;function YLe(e,t,n){var r=t(e);return Ru(e)?r:$ue(r,n(e))}function Tj(e){return YLe(e,wu,GLe)}var Ej=Lx(Cp,"DataView"),Aj=Lx(Cp,"Promise"),Ow=Lx(Cp,"Set"),cX="[object Map]",WLe="[object Object]",fX="[object Promise]",hX="[object Set]",dX="[object WeakMap]",pX="[object DataView]",XLe=kx(Ej),ZLe=kx(N2),KLe=kx(Aj),QLe=kx(Ow),JLe=kx(wj),Hh=Px;(Ej&&Hh(new Ej(new ArrayBuffer(1)))!=pX||N2&&Hh(new N2)!=cX||Aj&&Hh(Aj.resolve())!=fX||Ow&&Hh(new Ow)!=hX||wj&&Hh(new wj)!=dX)&&(Hh=function(e){var t=Px(e),n=t==WLe?e.constructor:void 0,r=n?kx(n):"";if(r)switch(r){case XLe:return pX;case ZLe:return cX;case KLe:return fX;case QLe:return hX;case JLe:return dX}return t});var e3e=Object.prototype,t3e=e3e.hasOwnProperty;function n3e(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&t3e.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var GD=Cp.Uint8Array;function cV(e){var t=new e.constructor(e.byteLength);return new GD(t).set(new GD(e)),t}function r3e(e,t){var n=cV(e.buffer);return new e.constructor(n,e.byteOffset,e.byteLength)}var i3e=/\w*$/;function a3e(e){var t=new e.constructor(e.source,i3e.exec(e));return t.lastIndex=e.lastIndex,t}var mX=id?id.prototype:void 0,gX=mX?mX.valueOf:void 0;function o3e(e){return gX?Object(gX.call(e)):{}}function s3e(e,t){var n=cV(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}var l3e="[object Boolean]",u3e="[object Date]",c3e="[object Map]",f3e="[object Number]",h3e="[object RegExp]",d3e="[object Set]",p3e="[object String]",m3e="[object Symbol]",g3e="[object ArrayBuffer]",y3e="[object DataView]",_3e="[object Float32Array]",v3e="[object Float64Array]",b3e="[object Int8Array]",x3e="[object Int16Array]",w3e="[object Int32Array]",S3e="[object Uint8Array]",T3e="[object Uint8ClampedArray]",E3e="[object Uint16Array]",A3e="[object Uint32Array]";function O3e(e,t,n){var r=e.constructor;switch(t){case g3e:return cV(e);case l3e:case u3e:return new r(+e);case y3e:return r3e(e);case _3e:case v3e:case b3e:case x3e:case w3e:case S3e:case T3e:case E3e:case A3e:return s3e(e);case c3e:return new r;case f3e:case p3e:return new r(e);case h3e:return a3e(e);case d3e:return new r;case m3e:return o3e(e)}}function C3e(e){return typeof e.constructor=="function"&&!rV(e)?WRe(ILe(e)):{}}var M3e="[object Map]";function D3e(e){return sg(e)&&Hh(e)==M3e}var yX=Ww&&Ww.isMap,I3e=yX?iO(yX):D3e,P3e="[object Set]";function R3e(e){return sg(e)&&Hh(e)==P3e}var _X=Ww&&Ww.isSet,k3e=_X?iO(_X):R3e,que="[object Arguments]",L3e="[object Array]",z3e="[object Boolean]",F3e="[object Date]",N3e="[object Error]",Hue="[object Function]",B3e="[object GeneratorFunction]",j3e="[object Map]",U3e="[object Number]",Gue="[object Object]",$3e="[object RegExp]",V3e="[object Set]",q3e="[object String]",H3e="[object Symbol]",G3e="[object WeakMap]",Y3e="[object ArrayBuffer]",W3e="[object DataView]",X3e="[object Float32Array]",Z3e="[object Float64Array]",K3e="[object Int8Array]",Q3e="[object Int16Array]",J3e="[object Int32Array]",eze="[object Uint8Array]",tze="[object Uint8ClampedArray]",nze="[object Uint16Array]",rze="[object Uint32Array]",po={};po[que]=po[L3e]=po[Y3e]=po[W3e]=po[z3e]=po[F3e]=po[X3e]=po[Z3e]=po[K3e]=po[Q3e]=po[J3e]=po[j3e]=po[U3e]=po[Gue]=po[$3e]=po[V3e]=po[q3e]=po[H3e]=po[eze]=po[tze]=po[nze]=po[rze]=!0;po[N3e]=po[Hue]=po[G3e]=!1;function sD(e,t,n,r,i,s){var f;if(f!==void 0)return f;if(!e_(e))return e;var a=Ru(e);if(a)f=n3e(e);else{var p=Hh(e),_=p==Hue||p==B3e;if(z2(e))return $Le(e);if(p==Gue||p==que||_&&!i)f=_?{}:C3e(e);else{if(!po[p])return i?e:{};f=O3e(e,p)}}s||(s=new Qm);var S=s.get(e);if(S)return S;s.set(e,f),k3e(e)?e.forEach(function(z){f.add(sD(z,t,n,z,e,s))}):I3e(e)&&e.forEach(function(z,F){f.set(F,sD(z,t,n,F,e,s))});var E=Tj,I=a?void 0:E(e);return Iue(I||e,function(z,F){I&&(F=z,z=e[F]),kue(f,F,sD(z,t,n,F,e,s))}),f}var ize=1,aze=4;function K3(e){return sD(e,ize|aze)}var oze="__lodash_hash_undefined__";function sze(e){return this.__data__.set(e,oze),this}function lze(e){return this.__data__.has(e)}function yx(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new d_;++t<n;)this.add(e[t])}yx.prototype.add=yx.prototype.push=sze;yx.prototype.has=lze;function uze(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function B2(e,t){return e.has(t)}var cze=1,fze=2;function Yue(e,t,n,r,i,s){var f=n&cze,a=e.length,p=t.length;if(a!=p&&!(f&&p>a))return!1;var _=s.get(e),S=s.get(t);if(_&&S)return _==t&&S==e;var E=-1,I=!0,z=n&fze?new yx:void 0;for(s.set(e,t),s.set(t,e);++E<a;){var F=e[E],U=t[E];if(r)var k=f?r(U,F,E,t,e,s):r(F,U,E,e,t,s);if(k!==void 0){if(k)continue;I=!1;break}if(z){if(!uze(t,function(V,K){if(!B2(z,K)&&(F===V||i(F,V,n,r,s)))return z.push(K)})){I=!1;break}}else if(!(F===U||i(F,U,n,r,s))){I=!1;break}}return s.delete(e),s.delete(t),I}function hze(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function fV(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var dze=1,pze=2,mze="[object Boolean]",gze="[object Date]",yze="[object Error]",_ze="[object Map]",vze="[object Number]",bze="[object RegExp]",xze="[object Set]",wze="[object String]",Sze="[object Symbol]",Tze="[object ArrayBuffer]",Eze="[object DataView]",vX=id?id.prototype:void 0,Q3=vX?vX.valueOf:void 0;function Aze(e,t,n,r,i,s,f){switch(n){case Eze:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Tze:return!(e.byteLength!=t.byteLength||!s(new GD(e),new GD(t)));case mze:case gze:case vze:return tV(+e,+t);case yze:return e.name==t.name&&e.message==t.message;case bze:case wze:return e==t+"";case _ze:var a=hze;case xze:var p=r&dze;if(a||(a=fV),e.size!=t.size&&!p)return!1;var _=f.get(e);if(_)return _==t;r|=pze,f.set(e,t);var S=Yue(a(e),a(t),r,i,s,f);return f.delete(e),S;case Sze:if(Q3)return Q3.call(e)==Q3.call(t)}return!1}var Oze=1,Cze=Object.prototype,Mze=Cze.hasOwnProperty;function Dze(e,t,n,r,i,s){var f=n&Oze,a=Tj(e),p=a.length,_=Tj(t),S=_.length;if(p!=S&&!f)return!1;for(var E=p;E--;){var I=a[E];if(!(f?I in t:Mze.call(t,I)))return!1}var z=s.get(e),F=s.get(t);if(z&&F)return z==t&&F==e;var U=!0;s.set(e,t),s.set(t,e);for(var k=f;++E<p;){I=a[E];var V=e[I],K=t[I];if(r)var J=f?r(K,V,I,t,e,s):r(V,K,I,e,t,s);if(!(J===void 0?V===K||i(V,K,n,r,s):J)){U=!1;break}k||(k=I=="constructor")}if(U&&!k){var ie=e.constructor,Q=t.constructor;ie!=Q&&"constructor"in e&&"constructor"in t&&!(typeof ie=="function"&&ie instanceof ie&&typeof Q=="function"&&Q instanceof Q)&&(U=!1)}return s.delete(e),s.delete(t),U}var Ize=1,bX="[object Arguments]",xX="[object Array]",pM="[object Object]",Pze=Object.prototype,wX=Pze.hasOwnProperty;function Rze(e,t,n,r,i,s){var f=Ru(e),a=Ru(t),p=f?xX:Hh(e),_=a?xX:Hh(t);p=p==bX?pM:p,_=_==bX?pM:_;var S=p==pM,E=_==pM,I=p==_;if(I&&z2(e)){if(!z2(t))return!1;f=!0,S=!1}if(I&&!S)return s||(s=new Qm),f||iV(e)?Yue(e,t,n,r,i,s):Aze(e,t,p,n,r,i,s);if(!(n&Ize)){var z=S&&wX.call(e,"__wrapped__"),F=E&&wX.call(t,"__wrapped__");if(z||F){var U=z?e.value():e,k=F?t.value():t;return s||(s=new Qm),i(U,k,n,r,s)}}return I?(s||(s=new Qm),Dze(e,t,n,r,i,s)):!1}function oR(e,t,n,r,i){return e===t?!0:e==null||t==null||!sg(e)&&!sg(t)?e!==e&&t!==t:Rze(e,t,n,r,oR,i)}var kze=1,Lze=2;function zze(e,t,n,r){var i=n.length,s=i;if(e==null)return!s;for(e=Object(e);i--;){var f=n[i];if(f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++i<s;){f=n[i];var a=f[0],p=e[a],_=f[1];if(f[2]){if(p===void 0&&!(a in e))return!1}else{var S=new Qm,E;if(!(E===void 0?oR(_,p,kze|Lze,r,S):E))return!1}}return!0}function Wue(e){return e===e&&!e_(e)}function Fze(e){for(var t=wu(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Wue(i)]}return t}function Xue(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function Nze(e){var t=Fze(e);return t.length==1&&t[0][2]?Xue(t[0][0],t[0][1]):function(n){return n===e||zze(n,e,t)}}function Bze(e,t){return e!=null&&t in Object(e)}function Zue(e,t,n){t=sV(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var f=aO(t[r]);if(!(s=e!=null&&n(e,f)))break;e=e[f]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&nV(i)&&eV(f,i)&&(Ru(e)||rR(e)))}function jze(e,t){return e!=null&&Zue(e,t,Bze)}var Uze=1,$ze=2;function Vze(e,t){return aV(e)&&Wue(t)?Xue(aO(e),t):function(n){var r=nf(n,e);return r===void 0&&r===t?jze(n,e):oR(t,r,Uze|$ze)}}function Kue(e){return function(t){return t==null?void 0:t[e]}}function qze(e){return function(t){return Uue(t,e)}}function Hze(e){return aV(e)?Kue(aO(e)):qze(e)}function oO(e){return typeof e=="function"?e:e==null?tR:typeof e=="object"?Ru(e)?Vze(e[0],e[1]):Nze(e):Hze(e)}function Gze(e,t,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;){var f=e[i];t(r,f,n(f),e)}return r}function Yze(e){return function(t,n,r){for(var i=-1,s=Object(t),f=r(t),a=f.length;a--;){var p=f[++i];if(n(s[p],p,s)===!1)break}return t}}var Wze=Yze();function Xze(e,t){return e&&Wze(e,t,wu)}function Zze(e,t){return function(n,r){if(n==null)return n;if(!HS(n))return e(n,r);for(var i=n.length,s=-1,f=Object(n);++s<i&&r(f[s],s,f)!==!1;);return n}}var hV=Zze(Xze);function Kze(e,t,n,r){return hV(e,function(i,s,f){t(r,i,n(i),f)}),r}function Qze(e,t){return function(n,r){var i=Ru(n)?Gze:Kze,s=t?t():{};return i(n,e,oO(r),s)}}function Xw(e){return sg(e)&&HS(e)}var Jze=200;function eFe(e,t,n,r){var i=-1,s=J$,f=!0,a=e.length,p=[],_=t.length;if(!a)return p;n&&(t=Rx(t,iO(n))),t.length>=Jze&&(s=B2,f=!1,t=new yx(t));e:for(;++i<a;){var S=e[i],E=n==null?S:n(S);if(S=S!==0?S:0,f&&E===E){for(var I=_;I--;)if(t[I]===E)continue e;p.push(S)}else s(t,E,r)||p.push(S)}return p}function YD(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function tFe(e){return typeof e=="function"?e:tR}function sR(e,t){var n=Ru(e)?Iue:hV;return n(e,tFe(t))}function nFe(e,t){var n=-1,r=HS(e)?Array(e.length):[];return hV(e,function(i,s,f){r[++n]=t(i,s,f)}),r}function rFe(e,t){var n=Ru(e)?Rx:nFe;return n(e,oO(t))}function SX(e,t){return lV(rFe(e,t))}var iFe=Object.prototype,aFe=iFe.hasOwnProperty,oFe=Qze(function(e,t,n){aFe.call(e,n)?e[n].push(t):Rue(e,n,[t])}),sFe=Object.prototype,lFe=sFe.hasOwnProperty;function uFe(e,t){return e!=null&&lFe.call(e,t)}function _w(e,t){return e!=null&&Zue(e,t,uFe)}var cFe="[object String]";function fFe(e){return typeof e=="string"||!Ru(e)&&sg(e)&&Px(e)==cFe}function hFe(e,t){return Rx(t,function(n){return e[n]})}function dFe(e){return e==null?[]:hFe(e,wu(e))}var pFe=Math.max;function Fy(e,t,n,r){e=HS(e)?e:dFe(e),n=n?Mue(n):0;var i=e.length;return n<0&&(n=pFe(i+n,0)),fFe(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Pue(e,t,n)>-1}var mFe=Math.min;function gFe(e,t,n){for(var r=J$,i=e[0].length,s=e.length,f=s,a=Array(s),p=1/0,_=[];f--;){var S=e[f];f&&t&&(S=Rx(S,iO(t))),p=mFe(S.length,p),a[f]=t||i>=120&&S.length>=120?new yx(f&&S):void 0}S=e[0];var E=-1,I=a[0];e:for(;++E<i&&_.length<p;){var z=S[E],F=t?t(z):z;if(z=z!==0?z:0,!(I?B2(I,F):r(_,F))){for(f=s;--f;){var U=a[f];if(!(U?B2(U,F):r(e[f],F)))continue e}I&&I.push(F),_.push(z)}}return _}function yFe(e){return Xw(e)?e:[]}var _Fe=nR(function(e){var t=YD(e),n=Rx(e,yFe);return t===YD(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?gFe(n,oO(t)):[]}),vFe="[object Map]",bFe="[object Set]",xFe=Object.prototype,wFe=xFe.hasOwnProperty;function Oj(e){if(e==null)return!0;if(HS(e)&&(Ru(e)||typeof e=="string"||typeof e.splice=="function"||z2(e)||iV(e)||rR(e)))return!e.length;var t=Hh(e);if(t==vFe||t==bFe)return!e.size;if(rV(e))return!jue(e).length;for(var n in e)if(wFe.call(e,n))return!1;return!0}function ts(e,t){return oR(e,t)}function SFe(e,t,n,r){if(!e_(e))return e;t=sV(t,e);for(var i=-1,s=t.length,f=s-1,a=e;a!=null&&++i<s;){var p=aO(t[i]),_=n;if(p==="__proto__"||p==="constructor"||p==="prototype")return e;if(i!=f){var S=a[p];_=void 0,_===void 0&&(_=e_(S)?S:eV(t[i+1])?[]:{})}kue(a,p,_),a=a[p]}return e}var TFe=kLe("round");function Db(e,t,n){return e==null?e:SFe(e,t,n)}var EFe=1/0,AFe=Ow&&1/fV(new Ow([,-0]))[1]==EFe?function(e){return new Ow(e)}:ZRe,OFe=200;function Cj(e,t,n){var r=-1,i=J$,s=e.length,f=!0,a=[],p=a;if(s>=OFe){var _=t?null:AFe(e);if(_)return fV(_);f=!1,i=B2,p=new yx}else p=t?[]:a;e:for(;++r<s;){var S=e[r],E=t?t(S):S;if(S=S!==0?S:0,f&&E===E){for(var I=p.length;I--;)if(p[I]===E)continue e;t&&p.push(E),a.push(S)}else i(p,E,n)||(p!==a&&p.push(E),a.push(S))}return a}var CFe=nR(function(e){var t=YD(e);return Xw(t)&&(t=void 0),Cj(lV(e,1,Xw,!0),oO(t))}),MFe=Math.max;function DFe(e){if(!(e&&e.length))return[];var t=0;return e=uV(e,function(n){if(Xw(n))return t=MFe(n.length,t),!0}),Lue(t,function(n){return Rx(e,Kue(n))})}function IFe(e,t,n){var r=e.length;if(r<2)return r?Cj(e[0]):[];for(var i=-1,s=Array(r);++i<r;)for(var f=e[i],a=-1;++a<r;)a!=i&&(s[i]=eFe(s[i]||f,e[a],t,n));return Cj(lV(s),t,n)}var PFe=nR(function(e){var t=YD(e);return Xw(t)&&(t=void 0),IFe(uV(e,Xw),oO(t))}),RFe=nR(DFe);//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Que;function Pn(){return Que.apply(null,arguments)}function kFe(e){Que=e}function xp(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function ex(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function wa(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function dV(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(wa(e,t))return!1;return!0}function Xc(e){return e===void 0}function t_(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function sO(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Jue(e,t){var n=[],r,i=e.length;for(r=0;r<i;++r)n.push(t(e[r],r));return n}function Nv(e,t){for(var n in t)wa(t,n)&&(e[n]=t[n]);return wa(t,"toString")&&(e.toString=t.toString),wa(t,"valueOf")&&(e.valueOf=t.valueOf),e}function dg(e,t,n,r){return wce(e,t,n,r,!0).utc()}function LFe(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Mi(e){return e._pf==null&&(e._pf=LFe()),e._pf}var Mj;Array.prototype.some?Mj=Array.prototype.some:Mj=function(e){var t=Object(this),n=t.length>>>0,r;for(r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function pV(e){var t=null,n=!1,r=e._d&&!isNaN(e._d.getTime());if(r&&(t=Mi(e),n=Mj.call(t.parsedDateParts,function(i){return i!=null}),r=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=r;else return r;return e._isValid}function lR(e){var t=dg(NaN);return e!=null?Nv(Mi(t),e):Mi(t).userInvalidated=!0,t}var TX=Pn.momentProperties=[],J3=!1;function mV(e,t){var n,r,i,s=TX.length;if(Xc(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Xc(t._i)||(e._i=t._i),Xc(t._f)||(e._f=t._f),Xc(t._l)||(e._l=t._l),Xc(t._strict)||(e._strict=t._strict),Xc(t._tzm)||(e._tzm=t._tzm),Xc(t._isUTC)||(e._isUTC=t._isUTC),Xc(t._offset)||(e._offset=t._offset),Xc(t._pf)||(e._pf=Mi(t)),Xc(t._locale)||(e._locale=t._locale),s>0)for(n=0;n<s;n++)r=TX[n],i=t[r],Xc(i)||(e[r]=i);return e}function lO(e){mV(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),J3===!1&&(J3=!0,Pn.updateOffset(this),J3=!1)}function wp(e){return e instanceof lO||e!=null&&e._isAMomentObject!=null}function ece(e){Pn.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function ud(e,t){var n=!0;return Nv(function(){if(Pn.deprecationHandler!=null&&Pn.deprecationHandler(null,e),n){var r=[],i,s,f,a=arguments.length;for(s=0;s<a;s++){if(i="",typeof arguments[s]=="object"){i+=`
[`+s+"] ";for(f in arguments[0])wa(arguments[0],f)&&(i+=f+": "+arguments[0][f]+", ");i=i.slice(0,-2)}else i=arguments[s];r.push(i)}ece(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var EX={};function tce(e,t){Pn.deprecationHandler!=null&&Pn.deprecationHandler(e,t),EX[e]||(ece(t),EX[e]=!0)}Pn.suppressDeprecationWarnings=!1;Pn.deprecationHandler=null;function pg(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function zFe(e){var t,n;for(n in e)wa(e,n)&&(t=e[n],pg(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Dj(e,t){var n=Nv({},e),r;for(r in t)wa(t,r)&&(ex(e[r])&&ex(t[r])?(n[r]={},Nv(n[r],e[r]),Nv(n[r],t[r])):t[r]!=null?n[r]=t[r]:delete n[r]);for(r in e)wa(e,r)&&!wa(t,r)&&ex(e[r])&&(n[r]=Nv({},n[r]));return n}function gV(e){e!=null&&this.set(e)}var Ij;Object.keys?Ij=Object.keys:Ij=function(e){var t,n=[];for(t in e)wa(e,t)&&n.push(t);return n};var FFe={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function NFe(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return pg(r)?r.call(t,n):r}function lg(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var yV=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,mM=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ez={},Cw={};function Fr(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(Cw[e]=i),t&&(Cw[t[0]]=function(){return lg(i.apply(this,arguments),t[1],t[2])}),n&&(Cw[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function BFe(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function jFe(e){var t=e.match(yV),n,r;for(n=0,r=t.length;n<r;n++)Cw[t[n]]?t[n]=Cw[t[n]]:t[n]=BFe(t[n]);return function(i){var s="",f;for(f=0;f<r;f++)s+=pg(t[f])?t[f].call(i,e):t[f];return s}}function lD(e,t){return e.isValid()?(t=nce(t,e.localeData()),ez[t]=ez[t]||jFe(t),ez[t](e)):e.localeData().invalidDate()}function nce(e,t){var n=5;function r(i){return t.longDateFormat(i)||i}for(mM.lastIndex=0;n>=0&&mM.test(e);)e=e.replace(mM,r),mM.lastIndex=0,n-=1;return e}var UFe={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function $Fe(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(yV).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[e])}var VFe="Invalid date";function qFe(){return this._invalidDate}var HFe="%d",GFe=/\d{1,2}/;function YFe(e){return this._ordinal.replace("%d",e)}var WFe={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function XFe(e,t,n,r){var i=this._relativeTime[n];return pg(i)?i(e,t,n,r):i.replace(/%d/i,e)}function ZFe(e,t){var n=this._relativeTime[e>0?"future":"past"];return pg(n)?n(t):n.replace(/%s/i,t)}var AX={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function cd(e){return typeof e=="string"?AX[e]||AX[e.toLowerCase()]:void 0}function _V(e){var t={},n,r;for(r in e)wa(e,r)&&(n=cd(r),n&&(t[n]=e[r]));return t}var KFe={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function QFe(e){var t=[],n;for(n in e)wa(e,n)&&t.push({unit:n,priority:KFe[n]});return t.sort(function(r,i){return r.priority-i.priority}),t}var rce=/\d/,ih=/\d\d/,ice=/\d{3}/,vV=/\d{4}/,uR=/[+-]?\d{6}/,Fo=/\d\d?/,ace=/\d\d\d\d?/,oce=/\d\d\d\d\d\d?/,cR=/\d{1,3}/,bV=/\d{1,4}/,fR=/[+-]?\d{1,6}/,GS=/\d+/,hR=/[+-]?\d+/,JFe=/Z|[+-]\d\d:?\d\d/gi,dR=/Z|[+-]\d\d(?::?\d\d)?/gi,eNe=/[+-]?\d+(\.\d{1,3})?/,uO=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,YS=/^[1-9]\d?/,xV=/^([1-9]\d|\d)/,WD;WD={};function hr(e,t,n){WD[e]=pg(t)?t:function(r,i){return r&&n?n:t}}function tNe(e,t){return wa(WD,e)?WD[e](t._strict,t._locale):new RegExp(nNe(e))}function nNe(e){return Ny(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,r,i,s){return n||r||i||s}))}function Ny(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Gh(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Ki(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=Gh(t)),n}var Pj={};function Qa(e,t){var n,r=t,i;for(typeof e=="string"&&(e=[e]),t_(t)&&(r=function(s,f){f[t]=Ki(s)}),i=e.length,n=0;n<i;n++)Pj[e[n]]=r}function cO(e,t){Qa(e,function(n,r,i,s){i._w=i._w||{},t(n,i._w,i,s)})}function rNe(e,t,n){t!=null&&wa(Pj,e)&&Pj[e](t,n._a,n,e)}function pR(e){return e%4===0&&e%100!==0||e%400===0}var Du=0,Dy=1,Um=2,_l=3,gp=4,Iy=5,qb=6,iNe=7,aNe=8;Fr("Y",0,0,function(){var e=this.year();return e<=9999?lg(e,4):"+"+e});Fr(0,["YY",2],0,function(){return this.year()%100});Fr(0,["YYYY",4],0,"year");Fr(0,["YYYYY",5],0,"year");Fr(0,["YYYYYY",6,!0],0,"year");hr("Y",hR);hr("YY",Fo,ih);hr("YYYY",bV,vV);hr("YYYYY",fR,uR);hr("YYYYYY",fR,uR);Qa(["YYYYY","YYYYYY"],Du);Qa("YYYY",function(e,t){t[Du]=e.length===2?Pn.parseTwoDigitYear(e):Ki(e)});Qa("YY",function(e,t){t[Du]=Pn.parseTwoDigitYear(e)});Qa("Y",function(e,t){t[Du]=parseInt(e,10)});function v2(e){return pR(e)?366:365}Pn.parseTwoDigitYear=function(e){return Ki(e)+(Ki(e)>68?1900:2e3)};var sce=WS("FullYear",!0);function oNe(){return pR(this.year())}function WS(e,t){return function(n){return n!=null?(lce(this,e,n),Pn.updateOffset(this,t),this):j2(this,e)}}function j2(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function lce(e,t,n){var r,i,s,f,a;if(!(!e.isValid()||isNaN(n))){switch(r=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}s=n,f=e.month(),a=e.date(),a=a===29&&f===1&&!pR(s)?28:a,i?r.setUTCFullYear(s,f,a):r.setFullYear(s,f,a)}}function sNe(e){return e=cd(e),pg(this[e])?this[e]():this}function lNe(e,t){if(typeof e=="object"){e=_V(e);var n=QFe(e),r,i=n.length;for(r=0;r<i;r++)this[n[r].unit](e[n[r].unit])}else if(e=cd(e),pg(this[e]))return this[e](t);return this}function uNe(e,t){return(e%t+t)%t}var Ps;Array.prototype.indexOf?Ps=Array.prototype.indexOf:Ps=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function wV(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=uNe(t,12);return e+=(t-n)/12,n===1?pR(e)?29:28:31-n%7%2}Fr("M",["MM",2],"Mo",function(){return this.month()+1});Fr("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Fr("MMMM",0,0,function(e){return this.localeData().months(this,e)});hr("M",Fo,YS);hr("MM",Fo,ih);hr("MMM",function(e,t){return t.monthsShortRegex(e)});hr("MMMM",function(e,t){return t.monthsRegex(e)});Qa(["M","MM"],function(e,t){t[Dy]=Ki(e)-1});Qa(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[Dy]=i:Mi(n).invalidMonth=e});var cNe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),uce="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),cce=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,fNe=uO,hNe=uO;function dNe(e,t){return e?xp(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||cce).test(t)?"format":"standalone"][e.month()]:xp(this._months)?this._months:this._months.standalone}function pNe(e,t){return e?xp(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[cce.test(t)?"format":"standalone"][e.month()]:xp(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function mNe(e,t,n){var r,i,s,f=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=dg([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?t==="MMM"?(i=Ps.call(this._shortMonthsParse,f),i!==-1?i:null):(i=Ps.call(this._longMonthsParse,f),i!==-1?i:null):t==="MMM"?(i=Ps.call(this._shortMonthsParse,f),i!==-1?i:(i=Ps.call(this._longMonthsParse,f),i!==-1?i:null)):(i=Ps.call(this._longMonthsParse,f),i!==-1?i:(i=Ps.call(this._shortMonthsParse,f),i!==-1?i:null))}function gNe(e,t,n){var r,i,s;if(this._monthsParseExact)return mNe.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=dg([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function fce(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Ki(t);else if(t=e.localeData().monthsParse(t),!t_(t))return e}var n=t,r=e.date();return r=r<29?r:Math.min(r,wV(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function hce(e){return e!=null?(fce(this,e),Pn.updateOffset(this,!0),this):j2(this,"Month")}function yNe(){return wV(this.year(),this.month())}function _Ne(e){return this._monthsParseExact?(wa(this,"_monthsRegex")||dce.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(wa(this,"_monthsShortRegex")||(this._monthsShortRegex=fNe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function vNe(e){return this._monthsParseExact?(wa(this,"_monthsRegex")||dce.call(this),e?this._monthsStrictRegex:this._monthsRegex):(wa(this,"_monthsRegex")||(this._monthsRegex=hNe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function dce(){function e(p,_){return _.length-p.length}var t=[],n=[],r=[],i,s,f,a;for(i=0;i<12;i++)s=dg([2e3,i]),f=Ny(this.monthsShort(s,"")),a=Ny(this.months(s,"")),t.push(f),n.push(a),r.push(a),r.push(f);t.sort(e),n.sort(e),r.sort(e),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function bNe(e,t,n,r,i,s,f){var a;return e<100&&e>=0?(a=new Date(e+400,t,n,r,i,s,f),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,n,r,i,s,f),a}function U2(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function XD(e,t,n){var r=7+t-n,i=(7+U2(e,0,r).getUTCDay()-t)%7;return-i+r-1}function pce(e,t,n,r,i){var s=(7+n-r)%7,f=XD(e,r,i),a=1+7*(t-1)+s+f,p,_;return a<=0?(p=e-1,_=v2(p)+a):a>v2(e)?(p=e+1,_=a-v2(e)):(p=e,_=a),{year:p,dayOfYear:_}}function $2(e,t,n){var r=XD(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,s,f;return i<1?(f=e.year()-1,s=i+By(f,t,n)):i>By(e.year(),t,n)?(s=i-By(e.year(),t,n),f=e.year()+1):(f=e.year(),s=i),{week:s,year:f}}function By(e,t,n){var r=XD(e,t,n),i=XD(e+1,t,n);return(v2(e)-r+i)/7}Fr("w",["ww",2],"wo","week");Fr("W",["WW",2],"Wo","isoWeek");hr("w",Fo,YS);hr("ww",Fo,ih);hr("W",Fo,YS);hr("WW",Fo,ih);cO(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=Ki(e)});function xNe(e){return $2(e,this._week.dow,this._week.doy).week}var wNe={dow:0,doy:6};function SNe(){return this._week.dow}function TNe(){return this._week.doy}function ENe(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function ANe(e){var t=$2(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Fr("d",0,"do","day");Fr("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Fr("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Fr("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Fr("e",0,0,"weekday");Fr("E",0,0,"isoWeekday");hr("d",Fo);hr("e",Fo);hr("E",Fo);hr("dd",function(e,t){return t.weekdaysMinRegex(e)});hr("ddd",function(e,t){return t.weekdaysShortRegex(e)});hr("dddd",function(e,t){return t.weekdaysRegex(e)});cO(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);i!=null?t.d=i:Mi(n).invalidWeekday=e});cO(["d","e","E"],function(e,t,n,r){t[r]=Ki(e)});function ONe(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function CNe(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function SV(e,t){return e.slice(t,7).concat(e.slice(0,t))}var MNe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),mce="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),DNe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),INe=uO,PNe=uO,RNe=uO;function kNe(e,t){var n=xp(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?SV(n,this._week.dow):e?n[e.day()]:n}function LNe(e){return e===!0?SV(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function zNe(e){return e===!0?SV(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function FNe(e,t,n){var r,i,s,f=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=dg([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?t==="dddd"?(i=Ps.call(this._weekdaysParse,f),i!==-1?i:null):t==="ddd"?(i=Ps.call(this._shortWeekdaysParse,f),i!==-1?i:null):(i=Ps.call(this._minWeekdaysParse,f),i!==-1?i:null):t==="dddd"?(i=Ps.call(this._weekdaysParse,f),i!==-1||(i=Ps.call(this._shortWeekdaysParse,f),i!==-1)?i:(i=Ps.call(this._minWeekdaysParse,f),i!==-1?i:null)):t==="ddd"?(i=Ps.call(this._shortWeekdaysParse,f),i!==-1||(i=Ps.call(this._weekdaysParse,f),i!==-1)?i:(i=Ps.call(this._minWeekdaysParse,f),i!==-1?i:null)):(i=Ps.call(this._minWeekdaysParse,f),i!==-1||(i=Ps.call(this._weekdaysParse,f),i!==-1)?i:(i=Ps.call(this._shortWeekdaysParse,f),i!==-1?i:null))}function NNe(e,t,n){var r,i,s;if(this._weekdaysParseExact)return FNe.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=dg([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function BNe(e){if(!this.isValid())return e!=null?this:NaN;var t=j2(this,"Day");return e!=null?(e=ONe(e,this.localeData()),this.add(e-t,"d")):t}function jNe(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function UNe(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=CNe(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function $Ne(e){return this._weekdaysParseExact?(wa(this,"_weekdaysRegex")||TV.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(wa(this,"_weekdaysRegex")||(this._weekdaysRegex=INe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function VNe(e){return this._weekdaysParseExact?(wa(this,"_weekdaysRegex")||TV.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(wa(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=PNe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function qNe(e){return this._weekdaysParseExact?(wa(this,"_weekdaysRegex")||TV.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(wa(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=RNe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function TV(){function e(S,E){return E.length-S.length}var t=[],n=[],r=[],i=[],s,f,a,p,_;for(s=0;s<7;s++)f=dg([2e3,1]).day(s),a=Ny(this.weekdaysMin(f,"")),p=Ny(this.weekdaysShort(f,"")),_=Ny(this.weekdays(f,"")),t.push(a),n.push(p),r.push(_),i.push(a),i.push(p),i.push(_);t.sort(e),n.sort(e),r.sort(e),i.sort(e),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function EV(){return this.hours()%12||12}function HNe(){return this.hours()||24}Fr("H",["HH",2],0,"hour");Fr("h",["hh",2],0,EV);Fr("k",["kk",2],0,HNe);Fr("hmm",0,0,function(){return""+EV.apply(this)+lg(this.minutes(),2)});Fr("hmmss",0,0,function(){return""+EV.apply(this)+lg(this.minutes(),2)+lg(this.seconds(),2)});Fr("Hmm",0,0,function(){return""+this.hours()+lg(this.minutes(),2)});Fr("Hmmss",0,0,function(){return""+this.hours()+lg(this.minutes(),2)+lg(this.seconds(),2)});function gce(e,t){Fr(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}gce("a",!0);gce("A",!1);function yce(e,t){return t._meridiemParse}hr("a",yce);hr("A",yce);hr("H",Fo,xV);hr("h",Fo,YS);hr("k",Fo,YS);hr("HH",Fo,ih);hr("hh",Fo,ih);hr("kk",Fo,ih);hr("hmm",ace);hr("hmmss",oce);hr("Hmm",ace);hr("Hmmss",oce);Qa(["H","HH"],_l);Qa(["k","kk"],function(e,t,n){var r=Ki(e);t[_l]=r===24?0:r});Qa(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});Qa(["h","hh"],function(e,t,n){t[_l]=Ki(e),Mi(n).bigHour=!0});Qa("hmm",function(e,t,n){var r=e.length-2;t[_l]=Ki(e.substr(0,r)),t[gp]=Ki(e.substr(r)),Mi(n).bigHour=!0});Qa("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[_l]=Ki(e.substr(0,r)),t[gp]=Ki(e.substr(r,2)),t[Iy]=Ki(e.substr(i)),Mi(n).bigHour=!0});Qa("Hmm",function(e,t,n){var r=e.length-2;t[_l]=Ki(e.substr(0,r)),t[gp]=Ki(e.substr(r))});Qa("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[_l]=Ki(e.substr(0,r)),t[gp]=Ki(e.substr(r,2)),t[Iy]=Ki(e.substr(i))});function GNe(e){return(e+"").toLowerCase().charAt(0)==="p"}var YNe=/[ap]\.?m?\.?/i,WNe=WS("Hours",!0);function XNe(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var _ce={calendar:FFe,longDateFormat:UFe,invalidDate:VFe,ordinal:HFe,dayOfMonthOrdinalParse:GFe,relativeTime:WFe,months:cNe,monthsShort:uce,week:wNe,weekdays:MNe,weekdaysMin:DNe,weekdaysShort:mce,meridiemParse:YNe},Ho={},PE={},V2;function ZNe(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function OX(e){return e&&e.toLowerCase().replace("_","-")}function KNe(e){for(var t=0,n,r,i,s;t<e.length;){for(s=OX(e[t]).split("-"),n=s.length,r=OX(e[t+1]),r=r?r.split("-"):null;n>0;){if(i=mR(s.slice(0,n).join("-")),i)return i;if(r&&r.length>=n&&ZNe(s,r)>=n-1)break;n--}t++}return V2}function QNe(e){return!!(e&&e.match("^[^/\\\\]*$"))}function mR(e){var t=null,n;if(Ho[e]===void 0&&typeof Mu<"u"&&Mu&&Mu.exports&&QNe(e))try{t=V2._abbr,n=require,n("./locale/"+e),Vv(t)}catch{Ho[e]=null}return Ho[e]}function Vv(e,t){var n;return e&&(Xc(t)?n=p_(e):n=AV(e,t),n?V2=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),V2._abbr}function AV(e,t){if(t!==null){var n,r=_ce;if(t.abbr=e,Ho[e]!=null)tce("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Ho[e]._config;else if(t.parentLocale!=null)if(Ho[t.parentLocale]!=null)r=Ho[t.parentLocale]._config;else if(n=mR(t.parentLocale),n!=null)r=n._config;else return PE[t.parentLocale]||(PE[t.parentLocale]=[]),PE[t.parentLocale].push({name:e,config:t}),null;return Ho[e]=new gV(Dj(r,t)),PE[e]&&PE[e].forEach(function(i){AV(i.name,i.config)}),Vv(e),Ho[e]}else return delete Ho[e],null}function JNe(e,t){if(t!=null){var n,r,i=_ce;Ho[e]!=null&&Ho[e].parentLocale!=null?Ho[e].set(Dj(Ho[e]._config,t)):(r=mR(e),r!=null&&(i=r._config),t=Dj(i,t),r==null&&(t.abbr=e),n=new gV(t),n.parentLocale=Ho[e],Ho[e]=n),Vv(e)}else Ho[e]!=null&&(Ho[e].parentLocale!=null?(Ho[e]=Ho[e].parentLocale,e===Vv()&&Vv(e)):Ho[e]!=null&&delete Ho[e]);return Ho[e]}function p_(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return V2;if(!xp(e)){if(t=mR(e),t)return t;e=[e]}return KNe(e)}function eBe(){return Ij(Ho)}function OV(e){var t,n=e._a;return n&&Mi(e).overflow===-2&&(t=n[Dy]<0||n[Dy]>11?Dy:n[Um]<1||n[Um]>wV(n[Du],n[Dy])?Um:n[_l]<0||n[_l]>24||n[_l]===24&&(n[gp]!==0||n[Iy]!==0||n[qb]!==0)?_l:n[gp]<0||n[gp]>59?gp:n[Iy]<0||n[Iy]>59?Iy:n[qb]<0||n[qb]>999?qb:-1,Mi(e)._overflowDayOfYear&&(t<Du||t>Um)&&(t=Um),Mi(e)._overflowWeeks&&t===-1&&(t=iNe),Mi(e)._overflowWeekday&&t===-1&&(t=aNe),Mi(e).overflow=t),e}var tBe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,nBe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,rBe=/Z|[+-]\d\d(?::?\d\d)?/,gM=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],tz=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],iBe=/^\/?Date\((-?\d+)/i,aBe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,oBe={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function vce(e){var t,n,r=e._i,i=tBe.exec(r)||nBe.exec(r),s,f,a,p,_=gM.length,S=tz.length;if(i){for(Mi(e).iso=!0,t=0,n=_;t<n;t++)if(gM[t][1].exec(i[1])){f=gM[t][0],s=gM[t][2]!==!1;break}if(f==null){e._isValid=!1;return}if(i[3]){for(t=0,n=S;t<n;t++)if(tz[t][1].exec(i[3])){a=(i[2]||" ")+tz[t][0];break}if(a==null){e._isValid=!1;return}}if(!s&&a!=null){e._isValid=!1;return}if(i[4])if(rBe.exec(i[4]))p="Z";else{e._isValid=!1;return}e._f=f+(a||"")+(p||""),MV(e)}else e._isValid=!1}function sBe(e,t,n,r,i,s){var f=[lBe(e),uce.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return s&&f.push(parseInt(s,10)),f}function lBe(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function uBe(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function cBe(e,t,n){if(e){var r=mce.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(r!==i)return Mi(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function fBe(e,t,n){if(e)return oBe[e];if(t)return 0;var r=parseInt(n,10),i=r%100,s=(r-i)/100;return s*60+i}function bce(e){var t=aBe.exec(uBe(e._i)),n;if(t){if(n=sBe(t[4],t[3],t[2],t[5],t[6],t[7]),!cBe(t[1],n,e))return;e._a=n,e._tzm=fBe(t[8],t[9],t[10]),e._d=U2.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Mi(e).rfc2822=!0}else e._isValid=!1}function hBe(e){var t=iBe.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(vce(e),e._isValid===!1)delete e._isValid;else return;if(bce(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Pn.createFromInputFallback(e)}Pn.createFromInputFallback=ud("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function dw(e,t,n){return e??t??n}function dBe(e){var t=new Date(Pn.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function CV(e){var t,n,r=[],i,s,f;if(!e._d){for(i=dBe(e),e._w&&e._a[Um]==null&&e._a[Dy]==null&&pBe(e),e._dayOfYear!=null&&(f=dw(e._a[Du],i[Du]),(e._dayOfYear>v2(f)||e._dayOfYear===0)&&(Mi(e)._overflowDayOfYear=!0),n=U2(f,0,e._dayOfYear),e._a[Dy]=n.getUTCMonth(),e._a[Um]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[_l]===24&&e._a[gp]===0&&e._a[Iy]===0&&e._a[qb]===0&&(e._nextDay=!0,e._a[_l]=0),e._d=(e._useUTC?U2:bNe).apply(null,r),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[_l]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==s&&(Mi(e).weekdayMismatch=!0)}}function pBe(e){var t,n,r,i,s,f,a,p,_;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,f=4,n=dw(t.GG,e._a[Du],$2(Lo(),1,4).year),r=dw(t.W,1),i=dw(t.E,1),(i<1||i>7)&&(p=!0)):(s=e._locale._week.dow,f=e._locale._week.doy,_=$2(Lo(),s,f),n=dw(t.gg,e._a[Du],_.year),r=dw(t.w,_.week),t.d!=null?(i=t.d,(i<0||i>6)&&(p=!0)):t.e!=null?(i=t.e+s,(t.e<0||t.e>6)&&(p=!0)):i=s),r<1||r>By(n,s,f)?Mi(e)._overflowWeeks=!0:p!=null?Mi(e)._overflowWeekday=!0:(a=pce(n,r,i,s,f),e._a[Du]=a.year,e._dayOfYear=a.dayOfYear)}Pn.ISO_8601=function(){};Pn.RFC_2822=function(){};function MV(e){if(e._f===Pn.ISO_8601){vce(e);return}if(e._f===Pn.RFC_2822){bce(e);return}e._a=[],Mi(e).empty=!0;var t=""+e._i,n,r,i,s,f,a=t.length,p=0,_,S;for(i=nce(e._f,e._locale).match(yV)||[],S=i.length,n=0;n<S;n++)s=i[n],r=(t.match(tNe(s,e))||[])[0],r&&(f=t.substr(0,t.indexOf(r)),f.length>0&&Mi(e).unusedInput.push(f),t=t.slice(t.indexOf(r)+r.length),p+=r.length),Cw[s]?(r?Mi(e).empty=!1:Mi(e).unusedTokens.push(s),rNe(s,r,e)):e._strict&&!r&&Mi(e).unusedTokens.push(s);Mi(e).charsLeftOver=a-p,t.length>0&&Mi(e).unusedInput.push(t),e._a[_l]<=12&&Mi(e).bigHour===!0&&e._a[_l]>0&&(Mi(e).bigHour=void 0),Mi(e).parsedDateParts=e._a.slice(0),Mi(e).meridiem=e._meridiem,e._a[_l]=mBe(e._locale,e._a[_l],e._meridiem),_=Mi(e).era,_!==null&&(e._a[Du]=e._locale.erasConvertYear(_,e._a[Du])),CV(e),OV(e)}function mBe(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0)),t)}function gBe(e){var t,n,r,i,s,f,a=!1,p=e._f.length;if(p===0){Mi(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<p;i++)s=0,f=!1,t=mV({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],MV(t),pV(t)&&(f=!0),s+=Mi(t).charsLeftOver,s+=Mi(t).unusedTokens.length*10,Mi(t).score=s,a?s<r&&(r=s,n=t):(r==null||s<r||f)&&(r=s,n=t,f&&(a=!0));Nv(e,n||t)}function yBe(e){if(!e._d){var t=_V(e._i),n=t.day===void 0?t.date:t.day;e._a=Jue([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(r){return r&&parseInt(r,10)}),CV(e)}}function _Be(e){var t=new lO(OV(xce(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function xce(e){var t=e._i,n=e._f;return e._locale=e._locale||p_(e._l),t===null||n===void 0&&t===""?lR({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),wp(t)?new lO(OV(t)):(sO(t)?e._d=t:xp(n)?gBe(e):n?MV(e):vBe(e),pV(e)||(e._d=null),e))}function vBe(e){var t=e._i;Xc(t)?e._d=new Date(Pn.now()):sO(t)?e._d=new Date(t.valueOf()):typeof t=="string"?hBe(e):xp(t)?(e._a=Jue(t.slice(0),function(n){return parseInt(n,10)}),CV(e)):ex(t)?yBe(e):t_(t)?e._d=new Date(t):Pn.createFromInputFallback(e)}function wce(e,t,n,r,i){var s={};return(t===!0||t===!1)&&(r=t,t=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(ex(e)&&dV(e)||xp(e)&&e.length===0)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,_Be(s)}function Lo(e,t,n,r){return wce(e,t,n,r,!1)}var bBe=ud("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Lo.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:lR()}),xBe=ud("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Lo.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:lR()});function Sce(e,t){var n,r;if(t.length===1&&xp(t[0])&&(t=t[0]),!t.length)return Lo();for(n=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](n))&&(n=t[r]);return n}function wBe(){var e=[].slice.call(arguments,0);return Sce("isBefore",e)}function SBe(){var e=[].slice.call(arguments,0);return Sce("isAfter",e)}var TBe=function(){return Date.now?Date.now():+new Date},RE=["year","quarter","month","week","day","hour","minute","second","millisecond"];function EBe(e){var t,n=!1,r,i=RE.length;for(t in e)if(wa(e,t)&&!(Ps.call(RE,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(r=0;r<i;++r)if(e[RE[r]]){if(n)return!1;parseFloat(e[RE[r]])!==Ki(e[RE[r]])&&(n=!0)}return!0}function ABe(){return this._isValid}function OBe(){return Mp(NaN)}function gR(e){var t=_V(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||t.isoWeek||0,f=t.day||0,a=t.hour||0,p=t.minute||0,_=t.second||0,S=t.millisecond||0;this._isValid=EBe(t),this._milliseconds=+S+_*1e3+p*6e4+a*1e3*60*60,this._days=+f+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=p_(),this._bubble()}function uD(e){return e instanceof gR}function Rj(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function CBe(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,f;for(f=0;f<r;f++)Ki(e[f])!==Ki(t[f])&&s++;return s+i}function Tce(e,t){Fr(e,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+lg(~~(n/60),2)+t+lg(~~n%60,2)})}Tce("Z",":");Tce("ZZ","");hr("Z",dR);hr("ZZ",dR);Qa(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=DV(dR,e)});var MBe=/([\+\-]|\d\d)/gi;function DV(e,t){var n=(t||"").match(e),r,i,s;return n===null?null:(r=n[n.length-1]||[],i=(r+"").match(MBe)||["-",0,0],s=+(i[1]*60)+Ki(i[2]),s===0?0:i[0]==="+"?s:-s)}function IV(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(wp(e)||sO(e)?e.valueOf():Lo(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),Pn.updateOffset(n,!1),n):Lo(e).local()}function kj(e){return-Math.round(e._d.getTimezoneOffset())}Pn.updateOffset=function(){};function DBe(e,t,n){var r=this._offset||0,i;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=DV(dR,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(i=kj(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?Oce(this,Mp(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Pn.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:kj(this)}function IBe(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function PBe(e){return this.utcOffset(0,e)}function RBe(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(kj(this),"m")),this}function kBe(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=DV(JFe,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function LBe(e){return this.isValid()?(e=e?Lo(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function zBe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function FBe(){if(!Xc(this._isDSTShifted))return this._isDSTShifted;var e={},t;return mV(e,this),e=xce(e),e._a?(t=e._isUTC?dg(e._a):Lo(e._a),this._isDSTShifted=this.isValid()&&CBe(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function NBe(){return this.isValid()?!this._isUTC:!1}function BBe(){return this.isValid()?this._isUTC:!1}function Ece(){return this.isValid()?this._isUTC&&this._offset===0:!1}var jBe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,UBe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Mp(e,t){var n=e,r=null,i,s,f;return uD(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:t_(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(r=jBe.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:Ki(r[Um])*i,h:Ki(r[_l])*i,m:Ki(r[gp])*i,s:Ki(r[Iy])*i,ms:Ki(Rj(r[qb]*1e3))*i}):(r=UBe.exec(e))?(i=r[1]==="-"?-1:1,n={y:Ib(r[2],i),M:Ib(r[3],i),w:Ib(r[4],i),d:Ib(r[5],i),h:Ib(r[6],i),m:Ib(r[7],i),s:Ib(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(f=$Be(Lo(n.from),Lo(n.to)),n={},n.ms=f.milliseconds,n.M=f.months),s=new gR(n),uD(e)&&wa(e,"_locale")&&(s._locale=e._locale),uD(e)&&wa(e,"_isValid")&&(s._isValid=e._isValid),s}Mp.fn=gR.prototype;Mp.invalid=OBe;function Ib(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function CX(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function $Be(e,t){var n;return e.isValid()&&t.isValid()?(t=IV(t,e),e.isBefore(t)?n=CX(e,t):(n=CX(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ace(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(tce(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),i=Mp(n,r),Oce(this,i,e),this}}function Oce(e,t,n,r){var i=t._milliseconds,s=Rj(t._days),f=Rj(t._months);e.isValid()&&(r=r??!0,f&&fce(e,j2(e,"Month")+f*n),s&&lce(e,"Date",j2(e,"Date")+s*n),i&&e._d.setTime(e._d.valueOf()+i*n),r&&Pn.updateOffset(e,s||f))}var VBe=Ace(1,"add"),qBe=Ace(-1,"subtract");function Cce(e){return typeof e=="string"||e instanceof String}function HBe(e){return wp(e)||sO(e)||Cce(e)||t_(e)||YBe(e)||GBe(e)||e===null||e===void 0}function GBe(e){var t=ex(e)&&!dV(e),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,s,f=r.length;for(i=0;i<f;i+=1)s=r[i],n=n||wa(e,s);return t&&n}function YBe(e){var t=xp(e),n=!1;return t&&(n=e.filter(function(r){return!t_(r)&&Cce(e)}).length===0),t&&n}function WBe(e){var t=ex(e)&&!dV(e),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,s;for(i=0;i<r.length;i+=1)s=r[i],n=n||wa(e,s);return t&&n}function XBe(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function ZBe(e,t){arguments.length===1&&(arguments[0]?HBe(arguments[0])?(e=arguments[0],t=void 0):WBe(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Lo(),r=IV(n,this).startOf("day"),i=Pn.calendarFormat(this,r)||"sameElse",s=t&&(pg(t[i])?t[i].call(this,n):t[i]);return this.format(s||this.localeData().calendar(i,this,Lo(n)))}function KBe(){return new lO(this)}function QBe(e,t){var n=wp(e)?e:Lo(e);return this.isValid()&&n.isValid()?(t=cd(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function JBe(e,t){var n=wp(e)?e:Lo(e);return this.isValid()&&n.isValid()?(t=cd(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function e5e(e,t,n,r){var i=wp(e)?e:Lo(e),s=wp(t)?t:Lo(t);return this.isValid()&&i.isValid()&&s.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(r[1]===")"?this.isBefore(s,n):!this.isAfter(s,n))):!1}function t5e(e,t){var n=wp(e)?e:Lo(e),r;return this.isValid()&&n.isValid()?(t=cd(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf())):!1}function n5e(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function r5e(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function i5e(e,t,n){var r,i,s;if(!this.isValid())return NaN;if(r=IV(e,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,t=cd(t),t){case"year":s=cD(this,r)/12;break;case"month":s=cD(this,r);break;case"quarter":s=cD(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:Gh(s)}function cD(e,t){if(e.date()<t.date())return-cD(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)||0}Pn.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Pn.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function a5e(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function o5e(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?lD(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):pg(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",lD(n,"Z")):lD(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function s5e(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,r,i,s;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",s=t+'[")]',this.format(n+r+i+s)}function l5e(e){e||(e=this.isUtc()?Pn.defaultFormatUtc:Pn.defaultFormat);var t=lD(this,e);return this.localeData().postformat(t)}function u5e(e,t){return this.isValid()&&(wp(e)&&e.isValid()||Lo(e).isValid())?Mp({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function c5e(e){return this.from(Lo(),e)}function f5e(e,t){return this.isValid()&&(wp(e)&&e.isValid()||Lo(e).isValid())?Mp({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function h5e(e){return this.to(Lo(),e)}function Mce(e){var t;return e===void 0?this._locale._abbr:(t=p_(e),t!=null&&(this._locale=t),this)}var Dce=ud("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Ice(){return this._locale}var ZD=1e3,Mw=60*ZD,KD=60*Mw,Pce=(365*400+97)*24*KD;function Dw(e,t){return(e%t+t)%t}function Rce(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-Pce:new Date(e,t,n).valueOf()}function kce(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-Pce:Date.UTC(e,t,n)}function d5e(e){var t,n;if(e=cd(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?kce:Rce,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Dw(t+(this._isUTC?0:this.utcOffset()*Mw),KD);break;case"minute":t=this._d.valueOf(),t-=Dw(t,Mw);break;case"second":t=this._d.valueOf(),t-=Dw(t,ZD);break}return this._d.setTime(t),Pn.updateOffset(this,!0),this}function p5e(e){var t,n;if(e=cd(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?kce:Rce,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=KD-Dw(t+(this._isUTC?0:this.utcOffset()*Mw),KD)-1;break;case"minute":t=this._d.valueOf(),t+=Mw-Dw(t,Mw)-1;break;case"second":t=this._d.valueOf(),t+=ZD-Dw(t,ZD)-1;break}return this._d.setTime(t),Pn.updateOffset(this,!0),this}function m5e(){return this._d.valueOf()-(this._offset||0)*6e4}function g5e(){return Math.floor(this.valueOf()/1e3)}function y5e(){return new Date(this.valueOf())}function _5e(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function v5e(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function b5e(){return this.isValid()?this.toISOString():null}function x5e(){return pV(this)}function w5e(){return Nv({},Mi(this))}function S5e(){return Mi(this).overflow}function T5e(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Fr("N",0,0,"eraAbbr");Fr("NN",0,0,"eraAbbr");Fr("NNN",0,0,"eraAbbr");Fr("NNNN",0,0,"eraName");Fr("NNNNN",0,0,"eraNarrow");Fr("y",["y",1],"yo","eraYear");Fr("y",["yy",2],0,"eraYear");Fr("y",["yyy",3],0,"eraYear");Fr("y",["yyyy",4],0,"eraYear");hr("N",PV);hr("NN",PV);hr("NNN",PV);hr("NNNN",L5e);hr("NNNNN",z5e);Qa(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?Mi(n).era=i:Mi(n).invalidEra=e});hr("y",GS);hr("yy",GS);hr("yyy",GS);hr("yyyy",GS);hr("yo",F5e);Qa(["y","yy","yyy","yyyy"],Du);Qa(["yo"],function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Du]=n._locale.eraYearOrdinalParse(e,i):t[Du]=parseInt(e,10)});function E5e(e,t){var n,r,i,s=this._eras||p_("en")._eras;for(n=0,r=s.length;n<r;++n){switch(typeof s[n].since){case"string":i=Pn(s[n].since).startOf("day"),s[n].since=i.valueOf();break}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":i=Pn(s[n].until).startOf("day").valueOf(),s[n].until=i.valueOf();break}}return s}function A5e(e,t,n){var r,i,s=this.eras(),f,a,p;for(e=e.toUpperCase(),r=0,i=s.length;r<i;++r)if(f=s[r].name.toUpperCase(),a=s[r].abbr.toUpperCase(),p=s[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return s[r];break;case"NNNN":if(f===e)return s[r];break;case"NNNNN":if(p===e)return s[r];break}else if([f,a,p].indexOf(e)>=0)return s[r]}function O5e(e,t){var n=e.since<=e.until?1:-1;return t===void 0?Pn(e.since).year():Pn(e.since).year()+(t-e.offset)*n}function C5e(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].name;return""}function M5e(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].narrow;return""}function D5e(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].abbr;return""}function I5e(){var e,t,n,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=i[e].since<=i[e].until?1:-1,r=this.clone().startOf("day").valueOf(),i[e].since<=r&&r<=i[e].until||i[e].until<=r&&r<=i[e].since)return(this.year()-Pn(i[e].since).year())*n+i[e].offset;return this.year()}function P5e(e){return wa(this,"_erasNameRegex")||RV.call(this),e?this._erasNameRegex:this._erasRegex}function R5e(e){return wa(this,"_erasAbbrRegex")||RV.call(this),e?this._erasAbbrRegex:this._erasRegex}function k5e(e){return wa(this,"_erasNarrowRegex")||RV.call(this),e?this._erasNarrowRegex:this._erasRegex}function PV(e,t){return t.erasAbbrRegex(e)}function L5e(e,t){return t.erasNameRegex(e)}function z5e(e,t){return t.erasNarrowRegex(e)}function F5e(e,t){return t._eraYearOrdinalRegex||GS}function RV(){var e=[],t=[],n=[],r=[],i,s,f,a,p,_=this.eras();for(i=0,s=_.length;i<s;++i)f=Ny(_[i].name),a=Ny(_[i].abbr),p=Ny(_[i].narrow),t.push(f),e.push(a),n.push(p),r.push(f),r.push(a),r.push(p);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}Fr(0,["gg",2],0,function(){return this.weekYear()%100});Fr(0,["GG",2],0,function(){return this.isoWeekYear()%100});function yR(e,t){Fr(0,[e,e.length],0,t)}yR("gggg","weekYear");yR("ggggg","weekYear");yR("GGGG","isoWeekYear");yR("GGGGG","isoWeekYear");hr("G",hR);hr("g",hR);hr("GG",Fo,ih);hr("gg",Fo,ih);hr("GGGG",bV,vV);hr("gggg",bV,vV);hr("GGGGG",fR,uR);hr("ggggg",fR,uR);cO(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=Ki(e)});cO(["gg","GG"],function(e,t,n,r){t[r]=Pn.parseTwoDigitYear(e)});function N5e(e){return Lce.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function B5e(e){return Lce.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function j5e(){return By(this.year(),1,4)}function U5e(){return By(this.isoWeekYear(),1,4)}function $5e(){var e=this.localeData()._week;return By(this.year(),e.dow,e.doy)}function V5e(){var e=this.localeData()._week;return By(this.weekYear(),e.dow,e.doy)}function Lce(e,t,n,r,i){var s;return e==null?$2(this,r,i).year:(s=By(e,r,i),t>s&&(t=s),q5e.call(this,e,t,n,r,i))}function q5e(e,t,n,r,i){var s=pce(e,t,n,r,i),f=U2(s.year,0,s.dayOfYear);return this.year(f.getUTCFullYear()),this.month(f.getUTCMonth()),this.date(f.getUTCDate()),this}Fr("Q",0,"Qo","quarter");hr("Q",rce);Qa("Q",function(e,t){t[Dy]=(Ki(e)-1)*3});function H5e(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Fr("D",["DD",2],"Do","date");hr("D",Fo,YS);hr("DD",Fo,ih);hr("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Qa(["D","DD"],Um);Qa("Do",function(e,t){t[Um]=Ki(e.match(Fo)[0])});var zce=WS("Date",!0);Fr("DDD",["DDDD",3],"DDDo","dayOfYear");hr("DDD",cR);hr("DDDD",ice);Qa(["DDD","DDDD"],function(e,t,n){n._dayOfYear=Ki(e)});function G5e(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Fr("m",["mm",2],0,"minute");hr("m",Fo,xV);hr("mm",Fo,ih);Qa(["m","mm"],gp);var Y5e=WS("Minutes",!1);Fr("s",["ss",2],0,"second");hr("s",Fo,xV);hr("ss",Fo,ih);Qa(["s","ss"],Iy);var W5e=WS("Seconds",!1);Fr("S",0,0,function(){return~~(this.millisecond()/100)});Fr(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Fr(0,["SSS",3],0,"millisecond");Fr(0,["SSSS",4],0,function(){return this.millisecond()*10});Fr(0,["SSSSS",5],0,function(){return this.millisecond()*100});Fr(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Fr(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Fr(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Fr(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});hr("S",cR,rce);hr("SS",cR,ih);hr("SSS",cR,ice);var Bv,Fce;for(Bv="SSSS";Bv.length<=9;Bv+="S")hr(Bv,GS);function X5e(e,t){t[qb]=Ki(("0."+e)*1e3)}for(Bv="S";Bv.length<=9;Bv+="S")Qa(Bv,X5e);Fce=WS("Milliseconds",!1);Fr("z",0,0,"zoneAbbr");Fr("zz",0,0,"zoneName");function Z5e(){return this._isUTC?"UTC":""}function K5e(){return this._isUTC?"Coordinated Universal Time":""}var Fn=lO.prototype;Fn.add=VBe;Fn.calendar=ZBe;Fn.clone=KBe;Fn.diff=i5e;Fn.endOf=p5e;Fn.format=l5e;Fn.from=u5e;Fn.fromNow=c5e;Fn.to=f5e;Fn.toNow=h5e;Fn.get=sNe;Fn.invalidAt=S5e;Fn.isAfter=QBe;Fn.isBefore=JBe;Fn.isBetween=e5e;Fn.isSame=t5e;Fn.isSameOrAfter=n5e;Fn.isSameOrBefore=r5e;Fn.isValid=x5e;Fn.lang=Dce;Fn.locale=Mce;Fn.localeData=Ice;Fn.max=xBe;Fn.min=bBe;Fn.parsingFlags=w5e;Fn.set=lNe;Fn.startOf=d5e;Fn.subtract=qBe;Fn.toArray=_5e;Fn.toObject=v5e;Fn.toDate=y5e;Fn.toISOString=o5e;Fn.inspect=s5e;typeof Symbol<"u"&&Symbol.for!=null&&(Fn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Fn.toJSON=b5e;Fn.toString=a5e;Fn.unix=g5e;Fn.valueOf=m5e;Fn.creationData=T5e;Fn.eraName=C5e;Fn.eraNarrow=M5e;Fn.eraAbbr=D5e;Fn.eraYear=I5e;Fn.year=sce;Fn.isLeapYear=oNe;Fn.weekYear=N5e;Fn.isoWeekYear=B5e;Fn.quarter=Fn.quarters=H5e;Fn.month=hce;Fn.daysInMonth=yNe;Fn.week=Fn.weeks=ENe;Fn.isoWeek=Fn.isoWeeks=ANe;Fn.weeksInYear=$5e;Fn.weeksInWeekYear=V5e;Fn.isoWeeksInYear=j5e;Fn.isoWeeksInISOWeekYear=U5e;Fn.date=zce;Fn.day=Fn.days=BNe;Fn.weekday=jNe;Fn.isoWeekday=UNe;Fn.dayOfYear=G5e;Fn.hour=Fn.hours=WNe;Fn.minute=Fn.minutes=Y5e;Fn.second=Fn.seconds=W5e;Fn.millisecond=Fn.milliseconds=Fce;Fn.utcOffset=DBe;Fn.utc=PBe;Fn.local=RBe;Fn.parseZone=kBe;Fn.hasAlignedHourOffset=LBe;Fn.isDST=zBe;Fn.isLocal=NBe;Fn.isUtcOffset=BBe;Fn.isUtc=Ece;Fn.isUTC=Ece;Fn.zoneAbbr=Z5e;Fn.zoneName=K5e;Fn.dates=ud("dates accessor is deprecated. Use date instead.",zce);Fn.months=ud("months accessor is deprecated. Use month instead",hce);Fn.years=ud("years accessor is deprecated. Use year instead",sce);Fn.zone=ud("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",IBe);Fn.isDSTShifted=ud("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",FBe);function Q5e(e){return Lo(e*1e3)}function J5e(){return Lo.apply(null,arguments).parseZone()}function Nce(e){return e}var Ea=gV.prototype;Ea.calendar=NFe;Ea.longDateFormat=$Fe;Ea.invalidDate=qFe;Ea.ordinal=YFe;Ea.preparse=Nce;Ea.postformat=Nce;Ea.relativeTime=XFe;Ea.pastFuture=ZFe;Ea.set=zFe;Ea.eras=E5e;Ea.erasParse=A5e;Ea.erasConvertYear=O5e;Ea.erasAbbrRegex=R5e;Ea.erasNameRegex=P5e;Ea.erasNarrowRegex=k5e;Ea.months=dNe;Ea.monthsShort=pNe;Ea.monthsParse=gNe;Ea.monthsRegex=vNe;Ea.monthsShortRegex=_Ne;Ea.week=xNe;Ea.firstDayOfYear=TNe;Ea.firstDayOfWeek=SNe;Ea.weekdays=kNe;Ea.weekdaysMin=zNe;Ea.weekdaysShort=LNe;Ea.weekdaysParse=NNe;Ea.weekdaysRegex=$Ne;Ea.weekdaysShortRegex=VNe;Ea.weekdaysMinRegex=qNe;Ea.isPM=GNe;Ea.meridiem=XNe;function QD(e,t,n,r){var i=p_(),s=dg().set(r,t);return i[n](s,e)}function Bce(e,t,n){if(t_(e)&&(t=e,e=void 0),e=e||"",t!=null)return QD(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=QD(e,r,n,"month");return i}function kV(e,t,n,r){typeof e=="boolean"?(t_(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,t_(t)&&(n=t,t=void 0),t=t||"");var i=p_(),s=e?i._week.dow:0,f,a=[];if(n!=null)return QD(t,(n+s)%7,r,"day");for(f=0;f<7;f++)a[f]=QD(t,(f+s)%7,r,"day");return a}function e4e(e,t){return Bce(e,t,"months")}function t4e(e,t){return Bce(e,t,"monthsShort")}function n4e(e,t,n){return kV(e,t,n,"weekdays")}function r4e(e,t,n){return kV(e,t,n,"weekdaysShort")}function i4e(e,t,n){return kV(e,t,n,"weekdaysMin")}Vv("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=Ki(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});Pn.lang=ud("moment.lang is deprecated. Use moment.locale instead.",Vv);Pn.langData=ud("moment.langData is deprecated. Use moment.localeData instead.",p_);var xy=Math.abs;function a4e(){var e=this._data;return this._milliseconds=xy(this._milliseconds),this._days=xy(this._days),this._months=xy(this._months),e.milliseconds=xy(e.milliseconds),e.seconds=xy(e.seconds),e.minutes=xy(e.minutes),e.hours=xy(e.hours),e.months=xy(e.months),e.years=xy(e.years),this}function jce(e,t,n,r){var i=Mp(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function o4e(e,t){return jce(this,e,t,1)}function s4e(e,t){return jce(this,e,t,-1)}function MX(e){return e<0?Math.floor(e):Math.ceil(e)}function l4e(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,f,a,p;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=MX(Lj(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,i=Gh(e/1e3),r.seconds=i%60,s=Gh(i/60),r.minutes=s%60,f=Gh(s/60),r.hours=f%24,t+=Gh(f/24),p=Gh(Uce(t)),n+=p,t-=MX(Lj(p)),a=Gh(n/12),n%=12,r.days=t,r.months=n,r.years=a,this}function Uce(e){return e*4800/146097}function Lj(e){return e*146097/4800}function u4e(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if(e=cd(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+r/864e5,n=this._months+Uce(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Lj(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function m_(e){return function(){return this.as(e)}}var $ce=m_("ms"),c4e=m_("s"),f4e=m_("m"),h4e=m_("h"),d4e=m_("d"),p4e=m_("w"),m4e=m_("M"),g4e=m_("Q"),y4e=m_("y"),_4e=$ce;function v4e(){return Mp(this)}function b4e(e){return e=cd(e),this.isValid()?this[e+"s"]():NaN}function zx(e){return function(){return this.isValid()?this._data[e]:NaN}}var x4e=zx("milliseconds"),w4e=zx("seconds"),S4e=zx("minutes"),T4e=zx("hours"),E4e=zx("days"),A4e=zx("months"),O4e=zx("years");function C4e(){return Gh(this.days()/7)}var Ty=Math.round,vw={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function M4e(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function D4e(e,t,n,r){var i=Mp(e).abs(),s=Ty(i.as("s")),f=Ty(i.as("m")),a=Ty(i.as("h")),p=Ty(i.as("d")),_=Ty(i.as("M")),S=Ty(i.as("w")),E=Ty(i.as("y")),I=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||f<=1&&["m"]||f<n.m&&["mm",f]||a<=1&&["h"]||a<n.h&&["hh",a]||p<=1&&["d"]||p<n.d&&["dd",p];return n.w!=null&&(I=I||S<=1&&["w"]||S<n.w&&["ww",S]),I=I||_<=1&&["M"]||_<n.M&&["MM",_]||E<=1&&["y"]||["yy",E],I[2]=t,I[3]=+e>0,I[4]=r,M4e.apply(null,I)}function I4e(e){return e===void 0?Ty:typeof e=="function"?(Ty=e,!0):!1}function P4e(e,t){return vw[e]===void 0?!1:t===void 0?vw[e]:(vw[e]=t,e==="s"&&(vw.ss=t-1),!0)}function R4e(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=vw,i,s;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(r=Object.assign({},vw,t),t.s!=null&&t.ss==null&&(r.ss=t.s-1)),i=this.localeData(),s=D4e(this,!n,r,i),n&&(s=i.pastFuture(+this,s)),i.postformat(s)}var nz=Math.abs;function ew(e){return(e>0)-(e<0)||+e}function _R(){if(!this.isValid())return this.localeData().invalidDate();var e=nz(this._milliseconds)/1e3,t=nz(this._days),n=nz(this._months),r,i,s,f,a=this.asSeconds(),p,_,S,E;return a?(r=Gh(e/60),i=Gh(r/60),e%=60,r%=60,s=Gh(n/12),n%=12,f=e?e.toFixed(3).replace(/\.?0+$/,""):"",p=a<0?"-":"",_=ew(this._months)!==ew(a)?"-":"",S=ew(this._days)!==ew(a)?"-":"",E=ew(this._milliseconds)!==ew(a)?"-":"",p+"P"+(s?_+s+"Y":"")+(n?_+n+"M":"")+(t?S+t+"D":"")+(i||r||e?"T":"")+(i?E+i+"H":"")+(r?E+r+"M":"")+(e?E+f+"S":"")):"P0D"}var ya=gR.prototype;ya.isValid=ABe;ya.abs=a4e;ya.add=o4e;ya.subtract=s4e;ya.as=u4e;ya.asMilliseconds=$ce;ya.asSeconds=c4e;ya.asMinutes=f4e;ya.asHours=h4e;ya.asDays=d4e;ya.asWeeks=p4e;ya.asMonths=m4e;ya.asQuarters=g4e;ya.asYears=y4e;ya.valueOf=_4e;ya._bubble=l4e;ya.clone=v4e;ya.get=b4e;ya.milliseconds=x4e;ya.seconds=w4e;ya.minutes=S4e;ya.hours=T4e;ya.days=E4e;ya.weeks=C4e;ya.months=A4e;ya.years=O4e;ya.humanize=R4e;ya.toISOString=_R;ya.toString=_R;ya.toJSON=_R;ya.locale=Mce;ya.localeData=Ice;ya.toIsoString=ud("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",_R);ya.lang=Dce;Fr("X",0,0,"unix");Fr("x",0,0,"valueOf");hr("x",hR);hr("X",eNe);Qa("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});Qa("x",function(e,t,n){n._d=new Date(Ki(e))});//! moment.js
Pn.version="2.30.1";kFe(Lo);Pn.fn=Fn;Pn.min=wBe;Pn.max=SBe;Pn.now=TBe;Pn.utc=dg;Pn.unix=Q5e;Pn.months=e4e;Pn.isDate=sO;Pn.locale=Vv;Pn.invalid=lR;Pn.duration=Mp;Pn.isMoment=wp;Pn.weekdays=n4e;Pn.parseZone=J5e;Pn.localeData=p_;Pn.isDuration=uD;Pn.monthsShort=t4e;Pn.weekdaysMin=i4e;Pn.defineLocale=AV;Pn.updateLocale=JNe;Pn.locales=eBe;Pn.weekdaysShort=r4e;Pn.normalizeUnits=cd;Pn.relativeTimeRounding=I4e;Pn.relativeTimeThreshold=P4e;Pn.calendarFormat=XBe;Pn.prototype=Fn;Pn.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Ql(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var k4e=typeof Symbol=="function"&&Symbol.observable||"@@observable",DX=k4e,rz=()=>Math.random().toString(36).substring(7).split("").join("."),L4e={INIT:`@@redux/INIT${rz()}`,REPLACE:`@@redux/REPLACE${rz()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${rz()}`},JD=L4e;function LV(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Vce(e,t,n){if(typeof e!="function")throw new Error(Ql(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ql(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ql(1));return n(Vce)(e,t)}let r=e,i=t,s=new Map,f=s,a=0,p=!1;function _(){f===s&&(f=new Map,s.forEach((k,V)=>{f.set(V,k)}))}function S(){if(p)throw new Error(Ql(3));return i}function E(k){if(typeof k!="function")throw new Error(Ql(4));if(p)throw new Error(Ql(5));let V=!0;_();const K=a++;return f.set(K,k),function(){if(V){if(p)throw new Error(Ql(6));V=!1,_(),f.delete(K),s=null}}}function I(k){if(!LV(k))throw new Error(Ql(7));if(typeof k.type>"u")throw new Error(Ql(8));if(typeof k.type!="string")throw new Error(Ql(17));if(p)throw new Error(Ql(9));try{p=!0,i=r(i,k)}finally{p=!1}return(s=f).forEach(K=>{K()}),k}function z(k){if(typeof k!="function")throw new Error(Ql(10));r=k,I({type:JD.REPLACE})}function F(){const k=E;return{subscribe(V){if(typeof V!="object"||V===null)throw new Error(Ql(11));function K(){const ie=V;ie.next&&ie.next(S())}return K(),{unsubscribe:k(K)}},[DX](){return this}}}return I({type:JD.INIT}),{dispatch:I,subscribe:E,getState:S,replaceReducer:z,[DX]:F}}function z4e(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:JD.INIT})>"u")throw new Error(Ql(12));if(typeof n(void 0,{type:JD.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ql(13))})}function F4e(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const f=t[s];typeof e[f]=="function"&&(n[f]=e[f])}const r=Object.keys(n);let i;try{z4e(n)}catch(s){i=s}return function(f={},a){if(i)throw i;let p=!1;const _={};for(let S=0;S<r.length;S++){const E=r[S],I=n[E],z=f[E],F=I(z,a);if(typeof F>"u")throw a&&a.type,new Error(Ql(14));_[E]=F,p=p||F!==z}return p=p||r.length!==Object.keys(f).length,p?_:f}}function eI(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function N4e(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Ql(15))};const f={getState:i.getState,dispatch:(p,..._)=>s(p,..._)},a=e.map(p=>p(f));return s=eI(...a)(i.dispatch),{...i,dispatch:s}}}function B4e(e){return LV(e)&&"type"in e&&typeof e.type=="string"}var qce=Symbol.for("immer-nothing"),IX=Symbol.for("immer-draftable"),yc=Symbol.for("immer-state");function hp(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zf=Object,Zw=Zf.getPrototypeOf,tI="constructor",vR="prototype",zj="configurable",nI="enumerable",fD="writable",q2="value",n_=e=>!!e&&!!e[yc];function Sp(e){var t;return e?Hce(e)||xR(e)||!!e[IX]||!!((t=e[tI])!=null&&t[IX])||wR(e)||SR(e):!1}var j4e=Zf[vR][tI].toString(),PX=new WeakMap;function Hce(e){if(!e||!zV(e))return!1;const t=Zw(e);if(t===null||t===Zf[vR])return!0;const n=Zf.hasOwnProperty.call(t,tI)&&t[tI];if(n===Object)return!0;if(!pw(n))return!1;let r=PX.get(n);return r===void 0&&(r=Function.toString.call(n),PX.set(n,r)),r===j4e}function bR(e,t,n=!0){fO(e)===0?(n?Reflect.ownKeys(e):Zf.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function fO(e){const t=e[yc];return t?t.type_:xR(e)?1:wR(e)?2:SR(e)?3:0}var RX=(e,t,n=fO(e))=>n===2?e.has(t):Zf[vR].hasOwnProperty.call(e,t),Fj=(e,t,n=fO(e))=>n===2?e.get(t):e[t],rI=(e,t,n,r=fO(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function U4e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var xR=Array.isArray,wR=e=>e instanceof Map,SR=e=>e instanceof Set,zV=e=>typeof e=="object",pw=e=>typeof e=="function",iz=e=>typeof e=="boolean";function $4e(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Ey=e=>e.copy_||e.base_,FV=e=>e.modified_?e.copy_:e.base_;function Nj(e,t){if(wR(e))return new Map(e);if(SR(e))return new Set(e);if(xR(e))return Array[vR].slice.call(e);const n=Hce(e);if(t===!0||t==="class_only"&&!n){const r=Zf.getOwnPropertyDescriptors(e);delete r[yc];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const f=i[s],a=r[f];a[fD]===!1&&(a[fD]=!0,a[zj]=!0),(a.get||a.set)&&(r[f]={[zj]:!0,[fD]:!0,[nI]:a[nI],[q2]:e[f]})}return Zf.create(Zw(e),r)}else{const r=Zw(e);if(r!==null&&n)return{...e};const i=Zf.create(r);return Zf.assign(i,e)}}function NV(e,t=!1){return TR(e)||n_(e)||!Sp(e)||(fO(e)>1&&Zf.defineProperties(e,{set:yM,add:yM,clear:yM,delete:yM}),Zf.freeze(e),t&&bR(e,(n,r)=>{NV(r,!0)},!1)),e}function V4e(){hp(2)}var yM={[q2]:V4e};function TR(e){return e===null||!zV(e)?!0:Zf.isFrozen(e)}var iI="MapSet",Bj="Patches",kX="ArrayMethods",Gce={};function _x(e){const t=Gce[e];return t||hp(0,e),t}var LX=e=>!!Gce[e],H2,Yce=()=>H2,q4e=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:LX(iI)?_x(iI):void 0,arrayMethodsPlugin_:LX(kX)?_x(kX):void 0});function zX(e,t){t&&(e.patchPlugin_=_x(Bj),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function jj(e){Uj(e),e.drafts_.forEach(H4e),e.drafts_=null}function Uj(e){e===H2&&(H2=e.parent_)}var FX=e=>H2=q4e(H2,e);function H4e(e){const t=e[yc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function NX(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[yc].modified_&&(jj(t),hp(4)),Sp(e)&&(e=BX(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[yc].base_,e,t)}else e=BX(t,n);return G4e(t,e,!0),jj(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==qce?e:void 0}function BX(e,t){if(TR(t))return t;const n=t[yc];if(!n)return aI(t,e.handledSet_,e);if(!ER(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Zce(n,e)}return n.copy_}function G4e(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&NV(t,n)}function Wce(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var ER=(e,t)=>e.scope_===t,Y4e=[];function Xce(e,t,n,r){const i=Ey(e),s=e.type_;if(r!==void 0&&Fj(i,r,s)===t){rI(i,r,n,s);return}if(!e.draftLocations_){const a=e.draftLocations_=new Map;bR(i,(p,_)=>{if(n_(_)){const S=a.get(_)||[];S.push(p),a.set(_,S)}})}const f=e.draftLocations_.get(t)??Y4e;for(const a of f)rI(i,a,n,s)}function W4e(e,t,n){e.callbacks_.push(function(i){var a;const s=t;if(!s||!ER(s,i))return;(a=i.mapSetPlugin_)==null||a.fixSetContents(s);const f=FV(s);Xce(e,s.draft_??s,f,n),Zce(s,i)})}function Zce(e,t){var r;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((r=e.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const s=i.getPath(e);s&&i.generatePatches_(e,s,t)}Wce(e)}}function X4e(e,t,n){const{scope_:r}=e;if(n_(n)){const i=n[yc];ER(i,r)&&i.callbacks_.push(function(){hD(e);const f=FV(i);Xce(e,n,f,t)})}else Sp(n)&&e.callbacks_.push(function(){const s=Ey(e);e.type_===3?s.has(n)&&aI(n,r.handledSet_,r):Fj(s,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&aI(Fj(e.copy_,t,e.type_),r.handledSet_,r)})}function aI(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||n_(e)||t.has(e)||!Sp(e)||TR(e)||(t.add(e),bR(e,(r,i)=>{if(n_(i)){const s=i[yc];if(ER(s,n)){const f=FV(s);rI(e,r,f,e.type_),Wce(s)}}else Sp(i)&&aI(i,t,n)})),e}function Z4e(e,t){const n=xR(e),r={type_:n?1:0,scope_:t?t.scope_:Yce(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=oI;n&&(i=[r],s=G2);const{revoke:f,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=f,[a,r]}var oI={get(e,t){if(t===yc)return e;let n=e.scope_.arrayMethodsPlugin_;const r=e.type_===1&&typeof t=="string";if(r&&n!=null&&n.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const i=Ey(e);if(!RX(i,t,e.type_))return K4e(e,i,t);const s=i[t];if(e.finalized_||!Sp(s)||r&&e.operationMethod&&(n!=null&&n.isMutatingArrayMethod(e.operationMethod))&&$4e(t))return s;if(s===az(e.base_,t)){hD(e);const f=e.type_===1?+t:t,a=Vj(e.scope_,s,e,f);return e.copy_[f]=a}return s},has(e,t){return t in Ey(e)},ownKeys(e){return Reflect.ownKeys(Ey(e))},set(e,t,n){const r=Kce(Ey(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=az(Ey(e),t),s=i==null?void 0:i[yc];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(U4e(n,i)&&(n!==void 0||RX(e.base_,t,e.type_)))return!0;hD(e),$j(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),X4e(e,t,n)),!0},deleteProperty(e,t){return hD(e),az(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),$j(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ey(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[fD]:!0,[zj]:e.type_!==1||t!=="length",[nI]:r[nI],[q2]:n[t]}},defineProperty(){hp(11)},getPrototypeOf(e){return Zw(e.base_)},setPrototypeOf(){hp(12)}},G2={};for(let e in oI){let t=oI[e];G2[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}G2.deleteProperty=function(e,t){return G2.set.call(this,e,t,void 0)};G2.set=function(e,t,n){return oI.set.call(this,e[0],t,n,e[0])};function az(e,t){const n=e[yc];return(n?Ey(n):e)[t]}function K4e(e,t,n){var i;const r=Kce(t,n);return r?q2 in r?r[q2]:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Kce(e,t){if(!(t in e))return;let n=Zw(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Zw(n)}}function $j(e){e.modified_||(e.modified_=!0,e.parent_&&$j(e.parent_))}function hD(e){e.copy_||(e.assigned_=new Map,e.copy_=Nj(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Q4e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(pw(t)&&!pw(n)){const s=n;n=t;const f=this;return function(p=s,..._){return f.produce(p,S=>n.call(this,S,..._))}}pw(n)||hp(6),r!==void 0&&!pw(r)&&hp(7);let i;if(Sp(t)){const s=FX(this),f=Vj(s,t,void 0);let a=!0;try{i=n(f),a=!1}finally{a?jj(s):Uj(s)}return zX(s,r),NX(i,s)}else if(!t||!zV(t)){if(i=n(t),i===void 0&&(i=t),i===qce&&(i=void 0),this.autoFreeze_&&NV(i,!0),r){const s=[],f=[];_x(Bj).generateReplacementPatches_(t,i,{patches_:s,inversePatches_:f}),r(s,f)}return i}else hp(1,t)},this.produceWithPatches=(t,n)=>{if(pw(t))return(f,...a)=>this.produceWithPatches(f,p=>t(p,...a));let r,i;return[this.produce(t,n,(f,a)=>{r=f,i=a}),r,i]},iz(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),iz(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),iz(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Sp(e)||hp(8),n_(e)&&(e=J4e(e));const t=FX(this),n=Vj(t,e,void 0);return n[yc].isManual_=!0,Uj(t),n}finishDraft(e,t){const n=e&&e[yc];(!n||!n.isManual_)&&hp(9);const{scope_:r}=n;return zX(r,t),NX(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=_x(Bj).applyPatches_;return n_(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Vj(e,t,n,r){const[i,s]=wR(t)?_x(iI).proxyMap_(t,n):SR(t)?_x(iI).proxySet_(t,n):Z4e(t,n);return((n==null?void 0:n.scope_)??Yce()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?W4e(n,s,r):s.callbacks_.push(function(p){var S;(S=p.mapSetPlugin_)==null||S.fixSetContents(s);const{patchPlugin_:_}=p;s.modified_&&_&&_.generatePatches_(s,[],p)}),i}function J4e(e){return n_(e)||hp(10,e),Qce(e)}function Qce(e){if(!Sp(e)||TR(e))return e;const t=e[yc];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Nj(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=Nj(e,!0);return bR(n,(i,s)=>{rI(n,i,Qce(s))},r),t&&(t.finalized_=!1),n}var eje=new Q4e,Jce=eje.produce;function efe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var tje=efe(),nje=efe,rje=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?eI:eI.apply(null,arguments)};function Na(e,t){function n(...r){return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>B4e(r)&&r.type===e,n}var tfe=class JE extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,JE.prototype)}static get[Symbol.species](){return JE}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new JE(...t[0].concat(this)):new JE(...t.concat(this))}};function jX(e){return Sp(e)?Jce(e,()=>{}):e}function ije(e){return typeof e=="boolean"}var aje=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let f=new tfe;return n&&(ije(n)?f.push(tje):f.push(nje(n.extraArgument))),f},oje="RTK_autoBatch",UX=e=>t=>{setTimeout(t,e)},sje=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,f=!1;const a=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:UX(10):e.type==="callback"?e.queueNotification:UX(e.timeout),_=()=>{f=!1,s&&(s=!1,a.forEach(S=>S()))};return Object.assign({},r,{subscribe(S){const E=()=>i&&S(),I=r.subscribe(E);return a.add(S),()=>{I(),a.delete(S)}},dispatch(S){var E;try{return i=!((E=S==null?void 0:S.meta)!=null&&E[oje]),s=!i,s&&(f||(f=!0,p(_))),r.dispatch(S)}finally{i=!0}}})},lje=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new tfe(e);return r&&i.push(sje(typeof r=="object"?r:void 0)),i};function uje(e){const t=aje(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:f=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(LV(n))a=F4e(n);else throw new Error(qj(1));let p;typeof r=="function"?p=r(t):p=t();let _=eI;i&&(_=rje({trace:!1,...typeof i=="object"&&i}));const S=N4e(...p),E=lje(S);let I=typeof f=="function"?f(E):E();const z=_(...I);return Vce(a,s,z)}function cje(e){const t={},n=[];let r;const i={addCase(s,f){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(qj(28));if(a in t)throw new Error(qj(29));return t[a]=f,i},addAsyncThunk(s,f){return f.pending&&(t[s.pending.type]=f.pending),f.rejected&&(t[s.rejected.type]=f.rejected),f.fulfilled&&(t[s.fulfilled.type]=f.fulfilled),f.settled&&n.push({matcher:s.settled,reducer:f.settled}),i},addMatcher(s,f){return n.push({matcher:s,reducer:f}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function fje(e){return typeof e=="function"}function hje(e,t){let[n,r,i]=cje(t),s;if(fje(e))s=()=>jX(e());else{const a=jX(e);s=()=>a}function f(a=s(),p){let _=[n[p.type],...r.filter(({matcher:S})=>S(p)).map(({reducer:S})=>S)];return _.filter(S=>!!S).length===0&&(_=[i]),_.reduce((S,E)=>{if(E)if(n_(S)){const z=E(S,p);return z===void 0?S:z}else{if(Sp(S))return Jce(S,I=>E(I,p));{const I=E(S,p);if(I===void 0){if(S===null)return S;throw Error("A case reducer on a non-draftable value must not return undefined")}return I}}return S},a)}return f.getInitialState=s,f}function qj(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const nfe=Na("MAP_LOADED"),rfe=Na("SET_STYLE"),ife=Na("LOAD_REF_LAYERS"),BV=Na("SWITCH_TAB"),afe=Na("ASYNC_START"),ofe=Na("ASYNC_SUCCESS"),sfe=Na("ASYNC_FAIL"),dje=Na("FETCHING"),AR=Na("THINKING_1"),OR=Na("THINKING_0"),pje=Na("CALC_EVENT_STATS"),lfe=Na("PICK_EVENT"),jV=Na("PICK_DATETIME_RANGE"),sI=Na("PICK_SENSOR"),ufe=Na("PICK_INTERVAL"),XS=Na("PICK_ACTIVE_RESULT"),cfe=Na("GETTING_RAINFALL");Na("GETTING_RAINFALL_INVALID");const ffe=Na("GETTING_RAINFALL_SUCCESS"),Lb=Na("GETTING_RAINFALL_FAIL"),hfe=Na("REMOVE_FETCH_HISTORY_ITEM"),mje=Na("FILTER_EVENT_BY_HOUR"),Y2=Na("HIGHLIGHT_SENSOR"),UV=Na("APPLY_COLOR_STRETCH"),gje=Na("SET_LAYER_STYLE"),yje=Na("BUILD_LAYER_STYLE"),$V=Na("RESET_LAYER_SRCS");Na("START_ANIMATION");Na("STOP_ANIMATION");Na("RESTART_ANIMATION");const _je=Na("SET_STATE"),dfe=e=>e.progress.tab,dp=(e,t)=>e.fetchKwargs[t].active,vje=(e,t)=>{let n={};return sR(dp(e,t).sensorLocations,(r,i)=>{r.length>0&&(n[i]=r)}),n},e0=(e,t)=>e.fetchKwargs[t].history,bje=e=>e.fetchKwargs[dfe(e)].history,xje=e=>bje(e).find(t=>t.isActive===!0),bw=(e,t,n)=>e0(e,n).find(i=>i.requestId==t),wje=(e,t,n)=>e0(e,n).filter(r=>r.requestId==t),Sje=(e,t,n)=>e0(e,n).filter(r=>r.requestId!==t),Tje=(e,t)=>{let n;return sR(e.fetchKwargs,(r,i)=>{let s=r.history.find(f=>f.requestId==t);s!==void 0&&(n=s)}),n},oz=(e,t,n)=>{let r=e.fetchKwargs[t].active.sensorLocations[n];return r===void 0?[]:r},Eje=e=>e.mapStyle.sources,sz=(e,t)=>Eje(e)[t],Aje=e=>e.mapStyle.layers,$X=(e,t)=>Aje(e).filter(n=>Fy(t,n.id)),Kw=(e,t)=>_w(e.mapStyle,["sources",t,"data","features"])?e.mapStyle.sources[t].data.features:[],Oje=(e,t)=>nf(e.refData.lookups,t,{}),Cje=e=>{let t=nf(e,"refData.lookups",{});return wu(t).map(n=>({label:n,options:wu(t[n]).map(r=>({value:`${n}.${r}`,label:r}))}))},CR=e=>e.rainfallEvents,Mje=(e,t)=>CR(e).list.find(n=>n.eventid===t),Dje=(e,t)=>CR(e).list.filter(n=>n.eventid!==t),Ije=e=>e.stats.latest,Pje=e=>({type:"geojson",data:{type:"FeatureCollection",features:e.features.map(n=>({properties:{id:n.properties.pixel_id.toString(),label:`Virtual Gauge ${n.properties.pixel_id.toString()}`,data:[],total:"",selected:!1,...n.properties},id:n.properties.pixel_id.toString(),geometry:n.geometry}))}}),Rje=e=>({type:"geojson",data:{type:"FeatureCollection",features:e.features.filter(n=>n.properties.active).map(n=>{let{id:r,...i}=n.properties;return{properties:{id:i.web_id,label:`Gauge ${i.web_id}: ${i.name}`,data:[],total:"",selected:!1,dwid:i.ext_id,active:i.active,...i},id:i.web_id,geometry:n.geometry}})}}),kje=e=>e.map((t,n)=>({...t,startDt:t.start_dt,endDt:t.end_dt,hours:t.duration,isFetching:!1,selected:!1,eventid:t.event_label})).map(t=>{let{start_dt:n,end_dt:r,event_label:i,duration:s,...f}=t;return f}).filter(t=>t.hours>0),Lje=(e,t,n,r,i)=>({type:"FeatureCollection",features:e.features.map(f=>{let a=t.find(p=>nf(p,r)===nf(f,n));return a===void 0?f:{id:f.id,geometry:f.geometry,properties:{...f.properties,...a}}})}),VX=e=>e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"rainfall"),zje=e=>Array.isArray(e)&&e.some(t=>Array.isArray(t==null?void 0:t.data)?t.data.some(n=>VX(n)):VX(t)),Fje=(e,t)=>e==="legacyGauge"?"G":e==="legacyGarr"?null:(t==null?void 0:t.src)??null,qX=(e,t,n={})=>{const r=(e==null?void 0:e.id)??t,i=(e==null?void 0:e.rainfall)??(e==null?void 0:e.val);return r==null||r===""?[]:i===void 0?[]:[{sensorId:r,sensorIdKey:`${typeof r}:${r}`,point:{ts:e==null?void 0:e.ts,val:i,src:Fje(n.contextType,e)}}]},Nje=(e,t={})=>{const n=SX(e.data??[],s=>Array.isArray(s==null?void 0:s.data)?SX(s.data,f=>qX(f,s==null?void 0:s.id,t)):qX(s,s==null?void 0:s.id,t)),r=oFe(n,"sensorIdKey"),i=new Set;return n.forEach(s=>{i.add(s.sensorIdKey)}),e.data=[...i].map(s=>{const f=r[s]??[];return{id:f[0].sensorId,data:f.map(a=>a.point)}}),e},Bje=(e,t={})=>Array.isArray(e==null?void 0:e.data)?(zje(e.data)&&(e=Nje(e,t)),e.data.forEach(n=>{if(!Array.isArray(n==null?void 0:n.data)){n.data=[],n.total=0;return}let r=0,i=n.data.length;if(i===0){n.total=0;return}let s=i>1?n.data.filter(f=>f.val>=0).map(f=>f.val).reduce((f,a)=>f+a,r):n.data[0].val;n.total=s}),e):(e.data=[],e),VV=(e,t,n)=>{n===void 0&&(n="properties.id"),t===void 0&&(t="properties.name");let r=nf(e,n,!1),i=nf(e,t,!1),s;return i?s={value:r,label:`${e.id}: ${i}`}:s={value:r,label:`${e.id}`},s},ms=e=>{if(Pn.isMoment(e))return e.isValid()?e.clone():null;if(e==null||e===!1)return null;const t=Pn(e);return t.isValid()?t:null},jje=(...e)=>{const t=e.map(n=>ms(n)).filter(n=>n!==null);return t.length===0?null:t.reduce((n,r)=>r.isAfter(n)?r:n)},HX=(e,t,n)=>{const r=ms(t),i=ms(n),s=ms(e);return!r||!i?s:s?s.isBefore(r)?r.clone():s.isAfter(i)?i.clone():s:null},Rv=({start:e,end:t,min:n,max:r})=>{const i=ms(n),s=ms(r);if(!i||!s)return{start:ms(e),end:ms(t),min:i,max:s};let f=i,a=s;f.isAfter(a)&&(f=a.clone());let p=ms(e)||f.clone(),_=ms(t)||a.clone();return p=HX(p,f,a)||f.clone(),_=HX(_,f,a)||a.clone(),_.isBefore(p)&&(_=p.clone()),{start:p,end:_,min:f,max:a}},Uje=({start:e,end:t,min:n,max:r})=>{const i=ms(e),s=ms(t),f=ms(n),a=ms(r);return!i||!s||!f||!a||s.isBefore(i)?!1:!i.isBefore(f)&&!s.isAfter(a)},pfe=({contextType:e,rainfallDataType:t,rollup:n,latest:r,rainfallMinDate:i,now:s})=>{const f=r||{},a=ms(s)||Pn(),p=ms(i)||Pn("2000-04-01"),_=a.clone().subtract(60,"days").endOf("month"),S=a.clone().subtract(60,"days").endOf("month");let E=p.clone(),I=a.clone();if(e===fi.legacyRealtime)I=jje(f["realtime-radar"],f["realtime-gauge"])||a.clone(),E=I.clone().subtract(1,"year").startOf("month");else if(e===fi.legacyGauge){const z=ms(f["calibrated-gauge"]);n===VD?(E=ms(f["earliest-5min-calibrated-gauge"])||p.clone(),I=ms(f["latest-5min-calibrated-gauge"])||z||a.clone()):(E=p.clone(),I=z||_)}else if(e===fi.legacyGarr){const z=ms(f["calibrated-radar"]);n===VD?(E=ms(f["earliest-5min-calibrated-radar"])||p.clone(),I=ms(f["latest-5min-calibrated-radar"])||z||a.clone()):(E=p.clone(),I=z||S)}return E.isAfter(I)&&(E=I.clone()),{min:E,max:I}},Hj="s",mfe="state",Gj=1,gfe=new Set([fi.legacyRealtime,fi.legacyGauge,fi.legacyGarr]);let kE=null,lz=Promise.resolve(),dD=null;const $je=new TextEncoder,GX=new TextDecoder,MR=()=>typeof window<"u"&&typeof window.location<"u"&&typeof window.history<"u",YX=e=>Array.isArray(e)?[...new Set(e.map(t=>t==null?"":`${t}`.trim()).filter(t=>t!==""))].sort():[],yfe=e=>{try{return JSON.parse(e)}catch{return null}},DR=e=>{if(e===null||typeof e!="object")return null;const t=e.c??e.context;if(!gfe.has(t))return null;let n=YX(e.g??e.gauge??[]),r=YX(e.p??e.pixel??[]);return t===fi.legacyGauge&&(r=[]),t===fi.legacyGarr&&(n=[]),{v:Gj,c:t,g:n,p:r}},Vje=e=>{if(typeof Buffer<"u")return Buffer.from(e).toString("base64");let t="";const n=32768;for(let r=0;r<e.length;r+=n)t+=String.fromCharCode(...e.subarray(r,r+n));return btoa(t)},qje=e=>{if(typeof Buffer<"u")return new Uint8Array(Buffer.from(e,"base64"));const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n},Hje=e=>e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,""),Gje=e=>{const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return`${t}${"=".repeat(n)}`},Yje=async e=>{if(typeof CompressionStream>"u")return e;const t=new CompressionStream("deflate"),n=t.writable.getWriter();n.write(e),n.close();const r=await new Response(t.readable).arrayBuffer();return new Uint8Array(r)},Wje=async e=>{if(typeof DecompressionStream>"u")return e;const t=new DecompressionStream("deflate"),n=t.writable.getWriter();n.write(e),n.close();const r=await new Response(t.readable).arrayBuffer();return new Uint8Array(r)},Xje=()=>{if(!MR())return null;const e=window.location.hash.startsWith("#")?window.location.hash.slice(1):window.location.hash;return new URLSearchParams(e).get(Hj)},_fe=e=>{if(!MR())return;const t=window.location.hash.startsWith("#")?window.location.hash.slice(1):window.location.hash,n=new URLSearchParams(t);e&&e.length>0?n.set(Hj,e):n.delete(Hj);const r=new URLSearchParams(window.location.search);r.delete(mfe);const i=r.toString(),s=n.toString(),f=`${window.location.pathname}${i?`?${i}`:""}${s?`#${s}`:""}`;window.history.replaceState(window.history.state,"",f)},WX=(e,t,n)=>{if(!Array.isArray(n)||n.length===0)return[];const r=new Map(Kw(e,t).map(i=>{var s;return[`${((s=i==null?void 0:i.properties)==null?void 0:s.id)??(i==null?void 0:i.id)}`,i]}));return n.map(i=>r.get(`${i}`)).filter(i=>i!==void 0).map(i=>VV(i))},Zje=()=>{if(!MR())return null;const t=new URLSearchParams(window.location.search).get(mfe);if(!t)return null;const n=yfe(t);return DR(n)},vfe=e=>{var s,f,a;const t=(s=e==null?void 0:e.progress)==null?void 0:s.tab;if(!gfe.has(t))return{v:Gj,c:fi.legacyRealtime,g:[],p:[]};const r=(((a=(f=e==null?void 0:e.fetchKwargs)==null?void 0:f[t])==null?void 0:a.active)??{}).sensorLocations??{};return DR({c:t,g:(r.gauge??[]).map(p=>p==null?void 0:p.value),p:(r.pixel??[]).map(p=>p==null?void 0:p.value)})??{v:Gj,c:fi.legacyRealtime,g:[],p:[]}},bfe=async e=>{const t=DR(e);if(!t)return"";const n=$je.encode(JSON.stringify(t)),r=await Yje(n);return Hje(Vje(r))},Kje=async e=>{if(!e||typeof e!="string")return null;let t;try{t=qje(Gje(e))}catch{return null}const n=[];try{const r=GX.decode(t);n.push(r)}catch{}try{const r=await Wje(t),i=GX.decode(r);n.includes(i)||n.unshift(i)}catch{}for(const r of n){const i=yfe(r),s=DR(i);if(s)return s}return null},Qje=async()=>{const e=Xje();return Kje(e)},Jje=async e=>{if(!WP)return"";const t=await bfe(e);return _fe(t),t},e6e=async({dispatch:e,getState:t})=>{if(!WP||typeof e!="function"||typeof t!="function")return!1;let n=await Qje();if(n||(n=Zje()),!n)return!1;const r=n.c;e(BV(r));const i=t(),s=WX(i,"gauge",n.g),f=WX(i,"pixel",n.p),a={contextType:r,sensorLocationType:"gauge",selectedOptions:s},p={contextType:r,sensorLocationType:"pixel",selectedOptions:f};e(sI(a)),e(Y2(a)),e(sI(p)),e(Y2(p));const _=vfe(t());return dD=await Jje(_),!0},t6e=e=>{if(!WP)return()=>{};if(kE!==null)return kE;if(!e||typeof e.subscribe!="function"||typeof e.getState!="function")return()=>{};const t=()=>{MR()&&(lz=lz.then(async()=>{const r=vfe(e.getState()),i=await bfe(r);i!==dD&&(_fe(i),dD=i)}).catch(r=>{console.warn("[urlShareState] failed to sync share state",r)}))},n=e.subscribe(t);return kE=()=>{n(),kE=null,lz=Promise.resolve(),dD=null},t(),kE},n6e={progress:{tab:fi.legacyRealtime,mapLoaded:!1,initialStyleLoaded:!1,isFetching:!0,isThinking:0,messages:[]},globalConfig:{globalNotice:{show:!1,title:"System Maintenance",content:"The rainfall database is currently undergoing maintenance. Queries may be slow or unresponsive during this time. We apologize for any inconvenience.",level:"info"}},fetchKwargs:{[fi.legacyRealtime]:{active:{startDt:null,endDt:null,sensorLocations:{gauge:[],geographies:[],pixel:[]},rollup:"15-minute",zerofill:!0,f:"sensor"},history:[]},[fi.legacyGauge]:{active:{startDt:null,endDt:null,sensorLocations:{gauge:[],geographies:[],pixel:[]},rollup:"15-minute",zerofill:!0,f:"sensor"},history:[]},[fi.legacyGarr]:{active:{startDt:null,endDt:null,sensorLocations:{gauge:[],geographies:[],pixel:[]},rollup:"15-minute",zerofill:!0,f:"sensor"},history:[]}},rainfallEvents:{list:[],stats:{latest:null,longest:null,maxDate:null,minDate:G$},filters:{maxHours:24}},stats:{latest:{}},refData:{},initMap:{token:hIe,latitude:40.4481524,longitude:-79.9864242,zoom:10,mapboxSources:{"3rww-rainfall-base":{type:"vector",url:dIe}},sourcesToAdd:[],layersToAdd:[],attribution:'<a href="https://www.3riverswetweather.org" target="_blank">3RWW</a>, <a href="https://www.civicmapper.com" target="_blank">CivicMapper</a>.'},mapStyle:{},mapLegend:{}},{min:r6e,max:i6e}=Math,tx=(e,t=0,n=1)=>r6e(i6e(t,e),n),qV=e=>{e._clipped=!1,e._unclipped=e.slice(0);for(let t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=tx(e[t],0,255)):t===3&&(e[t]=tx(e[t],0,1));return e},xfe={};for(let e of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])xfe[`[object ${e}]`]=e.toLowerCase();function Bi(e){return xfe[Object.prototype.toString.call(e)]||"object"}const Ti=(e,t=null)=>e.length>=3?Array.prototype.slice.call(e):Bi(e[0])=="object"&&t?t.split("").filter(n=>e[0][n]!==void 0).map(n=>e[0][n]):e[0].slice(0),ZS=e=>{if(e.length<2)return null;const t=e.length-1;return Bi(e[t])=="string"?e[t].toLowerCase():null},{PI:IR,min:wfe,max:Sfe}=Math,Qh=e=>Math.round(e*100)/100,Yj=e=>Math.round(e*100)/100,Ay=IR*2,uz=IR/3,a6e=IR/180,o6e=180/IR;function Tfe(e){return[...e.slice(0,3).reverse(),...e.slice(3)]}const bi={format:{},autodetect:[]};let zn=class{constructor(...t){const n=this;if(Bi(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];let r=ZS(t),i=!1;if(!r){i=!0,bi.sorted||(bi.autodetect=bi.autodetect.sort((s,f)=>f.p-s.p),bi.sorted=!0);for(let s of bi.autodetect)if(r=s.test(...t),r)break}if(bi.format[r]){const s=bi.format[r].apply(null,i?t:t.slice(0,-1));n._rgb=qV(s)}else throw new Error("unknown format: "+t);n._rgb.length===3&&n._rgb.push(1)}toString(){return Bi(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}};const s6e="3.2.0",qi=(...e)=>new zn(...e);qi.version=s6e;const Qw={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},l6e=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,u6e=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Efe=e=>{if(e.match(l6e)){(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16),n=t>>16,r=t>>8&255,i=t&255;return[n,r,i,1]}if(e.match(u6e)){(e.length===5||e.length===9)&&(e=e.substr(1)),e.length===4&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16),n=t>>24&255,r=t>>16&255,i=t>>8&255,s=Math.round((t&255)/255*100)/100;return[n,r,i,s]}throw new Error(`unknown hex color: ${e}`)},{round:_M}=Math,Afe=(...e)=>{let[t,n,r,i]=Ti(e,"rgba"),s=ZS(e)||"auto";i===void 0&&(i=1),s==="auto"&&(s=i<1?"rgba":"rgb"),t=_M(t),n=_M(n),r=_M(r);let a="000000"+(t<<16|n<<8|r).toString(16);a=a.substr(a.length-6);let p="0"+_M(i*255).toString(16);switch(p=p.substr(p.length-2),s.toLowerCase()){case"rgba":return`#${a}${p}`;case"argb":return`#${p}${a}`;default:return`#${a}`}};zn.prototype.name=function(){const e=Afe(this._rgb,"rgb");for(let t of Object.keys(Qw))if(Qw[t]===e)return t.toLowerCase();return e};bi.format.named=e=>{if(e=e.toLowerCase(),Qw[e])return Efe(Qw[e]);throw new Error("unknown color name: "+e)};bi.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&Bi(e)==="string"&&Qw[e.toLowerCase()])return"named"}});zn.prototype.alpha=function(e,t=!1){return e!==void 0&&Bi(e)==="number"?t?(this._rgb[3]=e,this):new zn([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};zn.prototype.clipped=function(){return this._rgb._clipped||!1};const Jm={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},c6e=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Py(e){const t=c6e.get(String(e).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+e);Jm.labWhitePoint=e,Jm.Xn=t[0],Jm.Zn=t[1]}function W2(){return Jm.labWhitePoint}const HV=(...e)=>{e=Ti(e,"lab");const[t,n,r]=e,[i,s,f]=f6e(t,n,r),[a,p,_]=Ofe(i,s,f);return[a,p,_,e.length>3?e[3]:1]},f6e=(e,t,n)=>{const{kE:r,kK:i,kKE:s,Xn:f,Yn:a,Zn:p}=Jm,_=(e+16)/116,S=.002*t+_,E=_-.005*n,I=S*S*S,z=E*E*E,F=I>r?I:(116*S-16)/i,U=e>s?Math.pow((e+16)/116,3):e/i,k=z>r?z:(116*E-16)/i,V=F*f,K=U*a,J=k*p;return[V,K,J]},cz=e=>{const t=Math.sign(e);return e=Math.abs(e),(e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055)*t},Ofe=(e,t,n)=>{const{MtxAdaptMa:r,MtxAdaptMaI:i,MtxXYZ2RGB:s,RefWhiteRGB:f,Xn:a,Yn:p,Zn:_}=Jm,S=a*r.m00+p*r.m10+_*r.m20,E=a*r.m01+p*r.m11+_*r.m21,I=a*r.m02+p*r.m12+_*r.m22,z=f.X*r.m00+f.Y*r.m10+f.Z*r.m20,F=f.X*r.m01+f.Y*r.m11+f.Z*r.m21,U=f.X*r.m02+f.Y*r.m12+f.Z*r.m22,k=(e*r.m00+t*r.m10+n*r.m20)*(z/S),V=(e*r.m01+t*r.m11+n*r.m21)*(F/E),K=(e*r.m02+t*r.m12+n*r.m22)*(U/I),J=k*i.m00+V*i.m10+K*i.m20,ie=k*i.m01+V*i.m11+K*i.m21,Q=k*i.m02+V*i.m12+K*i.m22,W=cz(J*s.m00+ie*s.m10+Q*s.m20),te=cz(J*s.m01+ie*s.m11+Q*s.m21),X=cz(J*s.m02+ie*s.m12+Q*s.m22);return[W*255,te*255,X*255]},GV=(...e)=>{const[t,n,r,...i]=Ti(e,"rgb"),[s,f,a]=Cfe(t,n,r),[p,_,S]=h6e(s,f,a);return[p,_,S,...i.length>0&&i[0]<1?[i[0]]:[]]};function h6e(e,t,n){const{Xn:r,Yn:i,Zn:s,kE:f,kK:a}=Jm,p=e/r,_=t/i,S=n/s,E=p>f?Math.pow(p,1/3):(a*p+16)/116,I=_>f?Math.pow(_,1/3):(a*_+16)/116,z=S>f?Math.pow(S,1/3):(a*S+16)/116;return[116*I-16,500*(E-I),200*(I-z)]}function fz(e){const t=Math.sign(e);return e=Math.abs(e),(e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4))*t}const Cfe=(e,t,n)=>{e=fz(e/255),t=fz(t/255),n=fz(n/255);const{MtxRGB2XYZ:r,MtxAdaptMa:i,MtxAdaptMaI:s,Xn:f,Yn:a,Zn:p,As:_,Bs:S,Cs:E}=Jm;let I=e*r.m00+t*r.m10+n*r.m20,z=e*r.m01+t*r.m11+n*r.m21,F=e*r.m02+t*r.m12+n*r.m22;const U=f*i.m00+a*i.m10+p*i.m20,k=f*i.m01+a*i.m11+p*i.m21,V=f*i.m02+a*i.m12+p*i.m22;let K=I*i.m00+z*i.m10+F*i.m20,J=I*i.m01+z*i.m11+F*i.m21,ie=I*i.m02+z*i.m12+F*i.m22;return K*=U/_,J*=k/S,ie*=V/E,I=K*s.m00+J*s.m10+ie*s.m20,z=K*s.m01+J*s.m11+ie*s.m21,F=K*s.m02+J*s.m12+ie*s.m22,[I,z,F]};zn.prototype.lab=function(){return GV(this._rgb)};const d6e=(...e)=>new zn(...e,"lab");Object.assign(qi,{lab:d6e,getLabWhitePoint:W2,setLabWhitePoint:Py});bi.format.lab=HV;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"lab"),Bi(e)==="array"&&e.length===3)return"lab"}});zn.prototype.darken=function(e=1){const t=this,n=t.lab();return n[0]-=Jm.Kn*e,new zn(n,"lab").alpha(t.alpha(),!0)};zn.prototype.brighten=function(e=1){return this.darken(-e)};zn.prototype.darker=zn.prototype.darken;zn.prototype.brighter=zn.prototype.brighten;zn.prototype.get=function(e){const[t,n]=e.split("."),r=this[t]();if(n){const i=t.indexOf(n)-(t.substr(0,2)==="ok"?2:0);if(i>-1)return r[i];throw new Error(`unknown channel ${n} in mode ${t}`)}else return r};const{pow:p6e}=Math,m6e=1e-7,g6e=20;zn.prototype.luminance=function(e,t="rgb"){if(e!==void 0&&Bi(e)==="number"){if(e===0)return new zn([0,0,0,this._rgb[3]],"rgb");if(e===1)return new zn([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),r=g6e;const i=(f,a)=>{const p=f.interpolate(a,.5,t),_=p.luminance();return Math.abs(e-_)<m6e||!r--?p:_>e?i(f,p):i(p,a)},s=(n>e?i(new zn([0,0,0]),this):i(this,new zn([255,255,255]))).rgb();return new zn([...s,this._rgb[3]])}return y6e(...this._rgb.slice(0,3))};const y6e=(e,t,n)=>(e=hz(e),t=hz(t),n=hz(n),.2126*e+.7152*t+.0722*n),hz=e=>(e/=255,e<=.03928?e/12.92:p6e((e+.055)/1.055,2.4)),Cu={},Jw=(e,t,n=.5,...r)=>{let i=r[0]||"lrgb";if(!Cu[i]&&!r.length&&(i=Object.keys(Cu)[0]),!Cu[i])throw new Error(`interpolation mode ${i} is not defined`);return Bi(e)!=="object"&&(e=new zn(e)),Bi(t)!=="object"&&(t=new zn(t)),Cu[i](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))};zn.prototype.mix=zn.prototype.interpolate=function(e,t=.5,...n){return Jw(this,e,t,...n)};zn.prototype.premultiply=function(e=!1){const t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new zn([t[0]*n,t[1]*n,t[2]*n,n],"rgb")};const{sin:_6e,cos:v6e}=Math,Mfe=(...e)=>{let[t,n,r]=Ti(e,"lch");return isNaN(r)&&(r=0),r=r*a6e,[t,v6e(r)*n,_6e(r)*n]},YV=(...e)=>{e=Ti(e,"lch");const[t,n,r]=e,[i,s,f]=Mfe(t,n,r),[a,p,_]=HV(i,s,f);return[a,p,_,e.length>3?e[3]:1]},b6e=(...e)=>{const t=Tfe(Ti(e,"hcl"));return YV(...t)},{sqrt:x6e,atan2:w6e,round:S6e}=Math,Dfe=(...e)=>{const[t,n,r]=Ti(e,"lab"),i=x6e(n*n+r*r);let s=(w6e(r,n)*o6e+360)%360;return S6e(i*1e4)===0&&(s=Number.NaN),[t,i,s]},WV=(...e)=>{const[t,n,r,...i]=Ti(e,"rgb"),[s,f,a]=GV(t,n,r),[p,_,S]=Dfe(s,f,a);return[p,_,S,...i.length>0&&i[0]<1?[i[0]]:[]]};zn.prototype.lch=function(){return WV(this._rgb)};zn.prototype.hcl=function(){return Tfe(WV(this._rgb))};const T6e=(...e)=>new zn(...e,"lch"),E6e=(...e)=>new zn(...e,"hcl");Object.assign(qi,{lch:T6e,hcl:E6e});bi.format.lch=YV;bi.format.hcl=b6e;["lch","hcl"].forEach(e=>bi.autodetect.push({p:2,test:(...t)=>{if(t=Ti(t,e),Bi(t)==="array"&&t.length===3)return e}}));zn.prototype.saturate=function(e=1){const t=this,n=t.lch();return n[1]+=Jm.Kn*e,n[1]<0&&(n[1]=0),new zn(n,"lch").alpha(t.alpha(),!0)};zn.prototype.desaturate=function(e=1){return this.saturate(-e)};zn.prototype.set=function(e,t,n=!1){const[r,i]=e.split("."),s=this[r]();if(i){const f=r.indexOf(i)-(r.substr(0,2)==="ok"?2:0);if(f>-1){if(Bi(t)=="string")switch(t.charAt(0)){case"+":s[f]+=+t;break;case"-":s[f]+=+t;break;case"*":s[f]*=+t.substr(1);break;case"/":s[f]/=+t.substr(1);break;default:s[f]=+t}else if(Bi(t)==="number")s[f]=t;else throw new Error("unsupported value for Color.set");const a=new zn(s,r);return n?(this._rgb=a._rgb,this):a}throw new Error(`unknown channel ${i} in mode ${r}`)}else return s};zn.prototype.tint=function(e=.5,...t){return Jw(this,"white",e,...t)};zn.prototype.shade=function(e=.5,...t){return Jw(this,"black",e,...t)};const A6e=(e,t,n)=>{const r=e._rgb,i=t._rgb;return new zn(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"rgb")};Cu.rgb=A6e;const{sqrt:dz,pow:tw}=Math,O6e=(e,t,n)=>{const[r,i,s]=e._rgb,[f,a,p]=t._rgb;return new zn(dz(tw(r,2)*(1-n)+tw(f,2)*n),dz(tw(i,2)*(1-n)+tw(a,2)*n),dz(tw(s,2)*(1-n)+tw(p,2)*n),"rgb")};Cu.lrgb=O6e;const C6e=(e,t,n)=>{const r=e.lab(),i=t.lab();return new zn(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"lab")};Cu.lab=C6e;const KS=(e,t,n,r)=>{let i,s;r==="hsl"?(i=e.hsl(),s=t.hsl()):r==="hsv"?(i=e.hsv(),s=t.hsv()):r==="hcg"?(i=e.hcg(),s=t.hcg()):r==="hsi"?(i=e.hsi(),s=t.hsi()):r==="lch"||r==="hcl"?(r="hcl",i=e.hcl(),s=t.hcl()):r==="oklch"&&(i=e.oklch().reverse(),s=t.oklch().reverse());let f,a,p,_,S,E;(r.substr(0,1)==="h"||r==="oklch")&&([f,p,S]=i,[a,_,E]=s);let I,z,F,U;return!isNaN(f)&&!isNaN(a)?(a>f&&a-f>180?U=a-(f+360):a<f&&f-a>180?U=a+360-f:U=a-f,z=f+n*U):isNaN(f)?isNaN(a)?z=Number.NaN:(z=a,(S==1||S==0)&&r!="hsv"&&(I=_)):(z=f,(E==1||E==0)&&r!="hsv"&&(I=p)),I===void 0&&(I=p+n*(_-p)),F=S+n*(E-S),r==="oklch"?new zn([F,I,z],r):new zn([z,I,F],r)},Ife=(e,t,n)=>KS(e,t,n,"lch");Cu.lch=Ife;Cu.hcl=Ife;const M6e=e=>{if(Bi(e)=="number"&&e>=0&&e<=16777215){const t=e>>16,n=e>>8&255,r=e&255;return[t,n,r,1]}throw new Error("unknown num color: "+e)},D6e=(...e)=>{const[t,n,r]=Ti(e,"rgb");return(t<<16)+(n<<8)+r};zn.prototype.num=function(){return D6e(this._rgb)};const I6e=(...e)=>new zn(...e,"num");Object.assign(qi,{num:I6e});bi.format.num=M6e;bi.autodetect.push({p:5,test:(...e)=>{if(e.length===1&&Bi(e[0])==="number"&&e[0]>=0&&e[0]<=16777215)return"num"}});const P6e=(e,t,n)=>{const r=e.num(),i=t.num();return new zn(r+n*(i-r),"num")};Cu.num=P6e;const{floor:R6e}=Math,k6e=(...e)=>{e=Ti(e,"hcg");let[t,n,r]=e,i,s,f;r=r*255;const a=n*255;if(n===0)i=s=f=r;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const p=R6e(t),_=t-p,S=r*(1-n),E=S+a*(1-_),I=S+a*_,z=S+a;switch(p){case 0:[i,s,f]=[z,I,S];break;case 1:[i,s,f]=[E,z,S];break;case 2:[i,s,f]=[S,z,I];break;case 3:[i,s,f]=[S,E,z];break;case 4:[i,s,f]=[I,S,z];break;case 5:[i,s,f]=[z,S,E];break}}return[i,s,f,e.length>3?e[3]:1]},L6e=(...e)=>{const[t,n,r]=Ti(e,"rgb"),i=wfe(t,n,r),s=Sfe(t,n,r),f=s-i,a=f*100/255,p=i/(255-f)*100;let _;return f===0?_=Number.NaN:(t===s&&(_=(n-r)/f),n===s&&(_=2+(r-t)/f),r===s&&(_=4+(t-n)/f),_*=60,_<0&&(_+=360)),[_,a,p]};zn.prototype.hcg=function(){return L6e(this._rgb)};const z6e=(...e)=>new zn(...e,"hcg");qi.hcg=z6e;bi.format.hcg=k6e;bi.autodetect.push({p:1,test:(...e)=>{if(e=Ti(e,"hcg"),Bi(e)==="array"&&e.length===3)return"hcg"}});const F6e=(e,t,n)=>KS(e,t,n,"hcg");Cu.hcg=F6e;const{cos:nw}=Math,N6e=(...e)=>{e=Ti(e,"hsi");let[t,n,r]=e,i,s,f;return isNaN(t)&&(t=0),isNaN(n)&&(n=0),t>360&&(t-=360),t<0&&(t+=360),t/=360,t<1/3?(f=(1-n)/3,i=(1+n*nw(Ay*t)/nw(uz-Ay*t))/3,s=1-(f+i)):t<2/3?(t-=1/3,i=(1-n)/3,s=(1+n*nw(Ay*t)/nw(uz-Ay*t))/3,f=1-(i+s)):(t-=2/3,s=(1-n)/3,f=(1+n*nw(Ay*t)/nw(uz-Ay*t))/3,i=1-(s+f)),i=tx(r*i*3),s=tx(r*s*3),f=tx(r*f*3),[i*255,s*255,f*255,e.length>3?e[3]:1]},{min:B6e,sqrt:j6e,acos:U6e}=Math,$6e=(...e)=>{let[t,n,r]=Ti(e,"rgb");t/=255,n/=255,r/=255;let i;const s=B6e(t,n,r),f=(t+n+r)/3,a=f>0?1-s/f:0;return a===0?i=NaN:(i=(t-n+(t-r))/2,i/=j6e((t-n)*(t-n)+(t-r)*(n-r)),i=U6e(i),r>n&&(i=Ay-i),i/=Ay),[i*360,a,f]};zn.prototype.hsi=function(){return $6e(this._rgb)};const V6e=(...e)=>new zn(...e,"hsi");qi.hsi=V6e;bi.format.hsi=N6e;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"hsi"),Bi(e)==="array"&&e.length===3)return"hsi"}});const q6e=(e,t,n)=>KS(e,t,n,"hsi");Cu.hsi=q6e;const Wj=(...e)=>{e=Ti(e,"hsl");const[t,n,r]=e;let i,s,f;if(n===0)i=s=f=r*255;else{const a=[0,0,0],p=[0,0,0],_=r<.5?r*(1+n):r+n-r*n,S=2*r-_,E=t/360;a[0]=E+1/3,a[1]=E,a[2]=E-1/3;for(let I=0;I<3;I++)a[I]<0&&(a[I]+=1),a[I]>1&&(a[I]-=1),6*a[I]<1?p[I]=S+(_-S)*6*a[I]:2*a[I]<1?p[I]=_:3*a[I]<2?p[I]=S+(_-S)*(2/3-a[I])*6:p[I]=S;[i,s,f]=[p[0]*255,p[1]*255,p[2]*255]}return e.length>3?[i,s,f,e[3]]:[i,s,f,1]},Pfe=(...e)=>{e=Ti(e,"rgba");let[t,n,r]=e;t/=255,n/=255,r/=255;const i=wfe(t,n,r),s=Sfe(t,n,r),f=(s+i)/2;let a,p;return s===i?(a=0,p=Number.NaN):a=f<.5?(s-i)/(s+i):(s-i)/(2-s-i),t==s?p=(n-r)/(s-i):n==s?p=2+(r-t)/(s-i):r==s&&(p=4+(t-n)/(s-i)),p*=60,p<0&&(p+=360),e.length>3&&e[3]!==void 0?[p,a,f,e[3]]:[p,a,f]};zn.prototype.hsl=function(){return Pfe(this._rgb)};const H6e=(...e)=>new zn(...e,"hsl");qi.hsl=H6e;bi.format.hsl=Wj;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"hsl"),Bi(e)==="array"&&e.length===3)return"hsl"}});const G6e=(e,t,n)=>KS(e,t,n,"hsl");Cu.hsl=G6e;const{floor:Y6e}=Math,W6e=(...e)=>{e=Ti(e,"hsv");let[t,n,r]=e,i,s,f;if(r*=255,n===0)i=s=f=r;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const a=Y6e(t),p=t-a,_=r*(1-n),S=r*(1-n*p),E=r*(1-n*(1-p));switch(a){case 0:[i,s,f]=[r,E,_];break;case 1:[i,s,f]=[S,r,_];break;case 2:[i,s,f]=[_,r,E];break;case 3:[i,s,f]=[_,S,r];break;case 4:[i,s,f]=[E,_,r];break;case 5:[i,s,f]=[r,_,S];break}}return[i,s,f,e.length>3?e[3]:1]},{min:X6e,max:Z6e}=Math,K6e=(...e)=>{e=Ti(e,"rgb");let[t,n,r]=e;const i=X6e(t,n,r),s=Z6e(t,n,r),f=s-i;let a,p,_;return _=s/255,s===0?(a=Number.NaN,p=0):(p=f/s,t===s&&(a=(n-r)/f),n===s&&(a=2+(r-t)/f),r===s&&(a=4+(t-n)/f),a*=60,a<0&&(a+=360)),[a,p,_]};zn.prototype.hsv=function(){return K6e(this._rgb)};const Q6e=(...e)=>new zn(...e,"hsv");qi.hsv=Q6e;bi.format.hsv=W6e;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"hsv"),Bi(e)==="array"&&e.length===3)return"hsv"}});const J6e=(e,t,n)=>KS(e,t,n,"hsv");Cu.hsv=J6e;function lI(e,t){let n=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(f=>[f]));let r=t[0].length,i=t[0].map((f,a)=>t.map(p=>p[a])),s=e.map(f=>i.map(a=>Array.isArray(f)?f.reduce((p,_,S)=>p+_*(a[S]||0),0):a.reduce((p,_)=>p+_*f,0)));return n===1&&(s=s[0]),r===1?s.map(f=>f[0]):s}const XV=(...e)=>{e=Ti(e,"lab");const[t,n,r,...i]=e,[s,f,a]=eUe([t,n,r]),[p,_,S]=Ofe(s,f,a);return[p,_,S,...i.length>0&&i[0]<1?[i[0]]:[]]};function eUe(e){var t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],n=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],r=lI(n,e);return lI(t,r.map(i=>i**3))}const ZV=(...e)=>{const[t,n,r,...i]=Ti(e,"rgb"),s=Cfe(t,n,r);return[...tUe(s),...i.length>0&&i[0]<1?[i[0]]:[]]};function tUe(e){const t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],n=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=lI(t,e);return lI(n,r.map(i=>Math.cbrt(i)))}zn.prototype.oklab=function(){return ZV(this._rgb)};const nUe=(...e)=>new zn(...e,"oklab");Object.assign(qi,{oklab:nUe});bi.format.oklab=XV;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"oklab"),Bi(e)==="array"&&e.length===3)return"oklab"}});const rUe=(e,t,n)=>{const r=e.oklab(),i=t.oklab();return new zn(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"oklab")};Cu.oklab=rUe;const iUe=(e,t,n)=>KS(e,t,n,"oklch");Cu.oklch=iUe;const{pow:pz,sqrt:mz,PI:gz,cos:XX,sin:ZX,atan2:aUe}=Math,oUe=(e,t="lrgb",n=null)=>{const r=e.length;n||(n=Array.from(new Array(r)).map(()=>1));const i=r/n.reduce(function(E,I){return E+I});if(n.forEach((E,I)=>{n[I]*=i}),e=e.map(E=>new zn(E)),t==="lrgb")return sUe(e,n);const s=e.shift(),f=s.get(t),a=[];let p=0,_=0;for(let E=0;E<f.length;E++)if(f[E]=(f[E]||0)*n[0],a.push(isNaN(f[E])?0:n[0]),t.charAt(E)==="h"&&!isNaN(f[E])){const I=f[E]/180*gz;p+=XX(I)*n[0],_+=ZX(I)*n[0]}let S=s.alpha()*n[0];e.forEach((E,I)=>{const z=E.get(t);S+=E.alpha()*n[I+1];for(let F=0;F<f.length;F++)if(!isNaN(z[F]))if(a[F]+=n[I+1],t.charAt(F)==="h"){const U=z[F]/180*gz;p+=XX(U)*n[I+1],_+=ZX(U)*n[I+1]}else f[F]+=z[F]*n[I+1]});for(let E=0;E<f.length;E++)if(t.charAt(E)==="h"){let I=aUe(_/a[E],p/a[E])/gz*180;for(;I<0;)I+=360;for(;I>=360;)I-=360;f[E]=I}else f[E]=f[E]/a[E];return S/=r,new zn(f,t).alpha(S>.99999?1:S,!0)},sUe=(e,t)=>{const n=e.length,r=[0,0,0,0];for(let i=0;i<e.length;i++){const s=e[i],f=t[i]/n,a=s._rgb;r[0]+=pz(a[0],2)*f,r[1]+=pz(a[1],2)*f,r[2]+=pz(a[2],2)*f,r[3]+=a[3]*f}return r[0]=mz(r[0]),r[1]=mz(r[1]),r[2]=mz(r[2]),r[3]>.9999999&&(r[3]=1),new zn(qV(r))},{pow:lUe}=Math;function vx(e){let t="rgb",n=qi("#ccc"),r=0,i=[0,1],s=[0,1],f=[],a=[0,0],p=!1,_=[],S=!1,E=0,I=1,z=!1,F={},U=!0,k=1;const V=function(X){if(X=X||["#fff","#000"],X&&Bi(X)==="string"&&qi.brewer&&qi.brewer[X.toLowerCase()]&&(X=qi.brewer[X.toLowerCase()]),Bi(X)==="array"){X.length===1&&(X=[X[0],X[0]]),X=X.slice(0);for(let ae=0;ae<X.length;ae++)X[ae]=qi(X[ae]);f.length=0;for(let ae=0;ae<X.length;ae++)f.push(ae/(X.length-1))}return W(),_=X},K=function(X){if(p!=null){const ae=p.length-1;let le=0;for(;le<ae&&X>=p[le];)le++;return le-1}return 0};let J=X=>X,ie=X=>X;const Q=function(X,ae){let le,ge;if(ae==null&&(ae=!1),isNaN(X)||X===null)return n;ae?ge=X:p&&p.length>2?ge=K(X)/(p.length-2):I!==E?ge=(X-E)/(I-E):ge=1,ge=ie(ge),ae||(ge=J(ge)),k!==1&&(ge=lUe(ge,k)),ge=a[0]+ge*(1-a[0]-a[1]),ge=tx(ge,0,1);const ye=Math.floor(ge*1e4);if(U&&F[ye])le=F[ye];else{if(Bi(_)==="array")for(let De=0;De<f.length;De++){const He=f[De];if(ge<=He){le=_[De];break}if(ge>=He&&De===f.length-1){le=_[De];break}if(ge>He&&ge<f[De+1]){ge=(ge-He)/(f[De+1]-He),le=qi.interpolate(_[De],_[De+1],ge,t);break}}else Bi(_)==="function"&&(le=_(ge));U&&(F[ye]=le)}return le};var W=()=>F={};V(e);const te=function(X){const ae=qi(Q(X));return S&&ae[S]?ae[S]():ae};return te.classes=function(X){if(X!=null){if(Bi(X)==="array")p=X,i=[X[0],X[X.length-1]];else{const ae=qi.analyze(i);X===0?p=[ae.min,ae.max]:p=qi.limits(ae,"e",X)}return te}return p},te.domain=function(X){if(!arguments.length)return s;s=X.slice(0),E=X[0],I=X[X.length-1],f=[];const ae=_.length;if(X.length===ae&&E!==I)for(let le of Array.from(X))f.push((le-E)/(I-E));else{for(let le=0;le<ae;le++)f.push(le/(ae-1));if(X.length>2){const le=X.map((ye,De)=>De/(X.length-1)),ge=X.map(ye=>(ye-E)/(I-E));ge.every((ye,De)=>le[De]===ye)||(ie=ye=>{if(ye<=0||ye>=1)return ye;let De=0;for(;ye>=ge[De+1];)De++;const He=(ye-ge[De])/(ge[De+1]-ge[De]);return le[De]+He*(le[De+1]-le[De])})}}return i=[E,I],te},te.mode=function(X){return arguments.length?(t=X,W(),te):t},te.range=function(X,ae){return V(X),te},te.out=function(X){return S=X,te},te.spread=function(X){return arguments.length?(r=X,te):r},te.correctLightness=function(X){return X==null&&(X=!0),z=X,W(),z?J=function(ae){const le=Q(0,!0).lab()[0],ge=Q(1,!0).lab()[0],ye=le>ge;let De=Q(ae,!0).lab()[0];const He=le+(ge-le)*ae;let Be=De-He,Ee=0,Ne=1,at=20;for(;Math.abs(Be)>.01&&at-- >0;)(function(){return ye&&(Be*=-1),Be<0?(Ee=ae,ae+=(Ne-ae)*.5):(Ne=ae,ae+=(Ee-ae)*.5),De=Q(ae,!0).lab()[0],Be=De-He})();return ae}:J=ae=>ae,te},te.padding=function(X){return X!=null?(Bi(X)==="number"&&(X=[X,X]),a=X,te):a},te.colors=function(X,ae){arguments.length<2&&(ae="hex");let le=[];if(arguments.length===0)le=_.slice(0);else if(X===1)le=[te(.5)];else if(X>1){const ge=i[0],ye=i[1]-ge;le=uUe(0,X).map(De=>te(ge+De/(X-1)*ye))}else{e=[];let ge=[];if(p&&p.length>2)for(let ye=1,De=p.length,He=1<=De;He?ye<De:ye>De;He?ye++:ye--)ge.push((p[ye-1]+p[ye])*.5);else ge=i;le=ge.map(ye=>te(ye))}return qi[ae]&&(le=le.map(ge=>ge[ae]())),le},te.cache=function(X){return X!=null?(U=X,te):U},te.gamma=function(X){return X!=null?(k=X,te):k},te.nodata=function(X){return X!=null?(n=qi(X),te):n},te}function uUe(e,t,n){let r=[],i=e<t,s=t;for(let f=e;i?f<s:f>s;i?f++:f--)r.push(f);return r}const cUe=function(e){let t=[1,1];for(let n=1;n<e;n++){let r=[1];for(let i=1;i<=t.length;i++)r[i]=(t[i]||0)+t[i-1];t=r}return t},fUe=function(e){let t,n,r,i;if(e=e.map(s=>new zn(s)),e.length===2)[n,r]=e.map(s=>s.lab()),t=function(s){const f=[0,1,2].map(a=>n[a]+s*(r[a]-n[a]));return new zn(f,"lab")};else if(e.length===3)[n,r,i]=e.map(s=>s.lab()),t=function(s){const f=[0,1,2].map(a=>(1-s)*(1-s)*n[a]+2*(1-s)*s*r[a]+s*s*i[a]);return new zn(f,"lab")};else if(e.length===4){let s;[n,r,i,s]=e.map(f=>f.lab()),t=function(f){const a=[0,1,2].map(p=>(1-f)*(1-f)*(1-f)*n[p]+3*(1-f)*(1-f)*f*r[p]+3*(1-f)*f*f*i[p]+f*f*f*s[p]);return new zn(a,"lab")}}else if(e.length>=5){let s,f,a;s=e.map(p=>p.lab()),a=e.length-1,f=cUe(a),t=function(p){const _=1-p,S=[0,1,2].map(E=>s.reduce((I,z,F)=>I+f[F]*_**(a-F)*p**F*z[E],0));return new zn(S,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return t},hUe=e=>{const t=fUe(e);return t.scale=()=>vx(t),t},{round:Rfe}=Math;zn.prototype.rgb=function(e=!0){return e===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Rfe)};zn.prototype.rgba=function(e=!0){return this._rgb.slice(0,4).map((t,n)=>n<3?e===!1?t:Rfe(t):t)};const dUe=(...e)=>new zn(...e,"rgb");Object.assign(qi,{rgb:dUe});bi.format.rgb=(...e)=>{const t=Ti(e,"rgba");return t[3]===void 0&&(t[3]=1),t};bi.autodetect.push({p:3,test:(...e)=>{if(e=Ti(e,"rgba"),Bi(e)==="array"&&(e.length===3||e.length===4&&Bi(e[3])=="number"&&e[3]>=0&&e[3]<=1))return"rgb"}});const Tp=(e,t,n)=>{if(!Tp[n])throw new Error("unknown blend mode "+n);return Tp[n](e,t)},s0=e=>(t,n)=>{const r=qi(n).rgb(),i=qi(t).rgb();return qi.rgb(e(r,i))},l0=e=>(t,n)=>{const r=[];return r[0]=e(t[0],n[0]),r[1]=e(t[1],n[1]),r[2]=e(t[2],n[2]),r},pUe=e=>e,mUe=(e,t)=>e*t/255,gUe=(e,t)=>e>t?t:e,yUe=(e,t)=>e>t?e:t,_Ue=(e,t)=>255*(1-(1-e/255)*(1-t/255)),vUe=(e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)),bUe=(e,t)=>255*(1-(1-t/255)/(e/255)),xUe=(e,t)=>e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e);Tp.normal=s0(l0(pUe));Tp.multiply=s0(l0(mUe));Tp.screen=s0(l0(_Ue));Tp.overlay=s0(l0(vUe));Tp.darken=s0(l0(gUe));Tp.lighten=s0(l0(yUe));Tp.dodge=s0(l0(xUe));Tp.burn=s0(l0(bUe));const{pow:wUe,sin:SUe,cos:TUe}=Math;function EUe(e=300,t=-1.5,n=1,r=1,i=[0,1]){let s=0,f;Bi(i)==="array"?f=i[1]-i[0]:(f=0,i=[i,i]);const a=function(p){const _=Ay*((e+120)/360+t*p),S=wUe(i[0]+f*p,r),I=(s!==0?n[0]+p*s:n)*S*(1-S)/2,z=TUe(_),F=SUe(_),U=S+I*(-.14861*z+1.78277*F),k=S+I*(-.29227*z-.90649*F),V=S+I*(1.97294*z);return qi(qV([U*255,k*255,V*255,1]))};return a.start=function(p){return p==null?e:(e=p,a)},a.rotations=function(p){return p==null?t:(t=p,a)},a.gamma=function(p){return p==null?r:(r=p,a)},a.hue=function(p){return p==null?n:(n=p,Bi(n)==="array"?(s=n[1]-n[0],s===0&&(n=n[1])):s=0,a)},a.lightness=function(p){return p==null?i:(Bi(p)==="array"?(i=p,f=p[1]-p[0]):(i=[p,p],f=0),a)},a.scale=()=>qi.scale(a),a.hue(n),a}const AUe="0123456789abcdef",{floor:OUe,random:CUe}=Math,MUe=(e=CUe)=>{let t="#";for(let n=0;n<6;n++)t+=AUe.charAt(OUe(e()*16));return new zn(t,"hex")},{log:KX,pow:DUe,floor:IUe,abs:PUe}=Math;function kfe(e,t=null){const n={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Bi(e)==="object"&&(e=Object.values(e)),e.forEach(r=>{t&&Bi(r)==="object"&&(r=r[t]),r!=null&&!isNaN(r)&&(n.values.push(r),n.sum+=r,r<n.min&&(n.min=r),r>n.max&&(n.max=r),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(r,i)=>KV(n,r,i),n}function KV(e,t="equal",n=7){Bi(e)=="array"&&(e=kfe(e));const{min:r,max:i}=e,s=e.values.sort((a,p)=>a-p);if(n===1)return[r,i];const f=[];if(t.substr(0,1)==="c"&&(f.push(r),f.push(i)),t.substr(0,1)==="e"){f.push(r);for(let a=1;a<n;a++)f.push(r+a/n*(i-r));f.push(i)}else if(t.substr(0,1)==="l"){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const a=Math.LOG10E*KX(r),p=Math.LOG10E*KX(i);f.push(r);for(let _=1;_<n;_++)f.push(DUe(10,a+_/n*(p-a)));f.push(i)}else if(t.substr(0,1)==="q"){f.push(r);for(let a=1;a<n;a++){const p=(s.length-1)*a/n,_=IUe(p);if(_===p)f.push(s[_]);else{const S=p-_;f.push(s[_]*(1-S)+s[_+1]*S)}}f.push(i)}else if(t.substr(0,1)==="k"){let a;const p=s.length,_=new Array(p),S=new Array(n);let E=!0,I=0,z=null;z=[],z.push(r);for(let k=1;k<n;k++)z.push(r+k/n*(i-r));for(z.push(i);E;){for(let V=0;V<n;V++)S[V]=0;for(let V=0;V<p;V++){const K=s[V];let J=Number.MAX_VALUE,ie;for(let Q=0;Q<n;Q++){const W=PUe(z[Q]-K);W<J&&(J=W,ie=Q),S[ie]++,_[V]=ie}}const k=new Array(n);for(let V=0;V<n;V++)k[V]=null;for(let V=0;V<p;V++)a=_[V],k[a]===null?k[a]=s[V]:k[a]+=s[V];for(let V=0;V<n;V++)k[V]*=1/S[V];E=!1;for(let V=0;V<n;V++)if(k[V]!==z[V]){E=!0;break}z=k,I++,I>200&&(E=!1)}const F={};for(let k=0;k<n;k++)F[k]=[];for(let k=0;k<p;k++)a=_[k],F[a].push(s[k]);let U=[];for(let k=0;k<n;k++)U.push(F[k][0]),U.push(F[k][F[k].length-1]);U=U.sort((k,V)=>k-V),f.push(U[0]);for(let k=1;k<U.length;k+=2){const V=U[k];!isNaN(V)&&f.indexOf(V)===-1&&f.push(V)}}return f}const RUe=(e,t)=>{e=new zn(e),t=new zn(t);const n=e.luminance(),r=t.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const QX=.027,kUe=5e-4,LUe=.1,JX=1.14,vM=.022,eZ=1.414,zUe=(e,t)=>{e=new zn(e),t=new zn(t),e.alpha()<1&&(e=Jw(t,e,e.alpha(),"rgb"));const n=tZ(...e.rgb()),r=tZ(...t.rgb()),i=n>=vM?n:n+Math.pow(vM-n,eZ),s=r>=vM?r:r+Math.pow(vM-r,eZ),f=Math.pow(s,.56)-Math.pow(i,.57),a=Math.pow(s,.65)-Math.pow(i,.62),p=Math.abs(s-i)<kUe?0:i<s?f*JX:a*JX;return(Math.abs(p)<LUe?0:p>0?p-QX:p+QX)*100};function tZ(e,t,n){return .2126729*Math.pow(e/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(n/255,2.4)}const{sqrt:wy,pow:Gs,min:FUe,max:NUe,atan2:nZ,abs:rZ,cos:bM,sin:iZ,exp:BUe,PI:aZ}=Math;function jUe(e,t,n=1,r=1,i=1){var s=function(Pe){return 360*Pe/(2*aZ)},f=function(Pe){return 2*aZ*Pe/360};e=new zn(e),t=new zn(t);const[a,p,_]=Array.from(e.lab()),[S,E,I]=Array.from(t.lab()),z=(a+S)/2,F=wy(Gs(p,2)+Gs(_,2)),U=wy(Gs(E,2)+Gs(I,2)),k=(F+U)/2,V=.5*(1-wy(Gs(k,7)/(Gs(k,7)+Gs(25,7)))),K=p*(1+V),J=E*(1+V),ie=wy(Gs(K,2)+Gs(_,2)),Q=wy(Gs(J,2)+Gs(I,2)),W=(ie+Q)/2,te=s(nZ(_,K)),X=s(nZ(I,J)),ae=te>=0?te:te+360,le=X>=0?X:X+360,ge=rZ(ae-le)>180?(ae+le+360)/2:(ae+le)/2,ye=1-.17*bM(f(ge-30))+.24*bM(f(2*ge))+.32*bM(f(3*ge+6))-.2*bM(f(4*ge-63));let De=le-ae;De=rZ(De)<=180?De:le<=ae?De+360:De-360,De=2*wy(ie*Q)*iZ(f(De)/2);const He=S-a,Be=Q-ie,Ee=1+.015*Gs(z-50,2)/wy(20+Gs(z-50,2)),Ne=1+.045*W,at=1+.015*W*ye,yt=30*BUe(-Gs((ge-275)/25,2)),Ke=-(2*wy(Gs(W,7)/(Gs(W,7)+Gs(25,7))))*iZ(2*f(yt)),it=wy(Gs(He/(n*Ee),2)+Gs(Be/(r*Ne),2)+Gs(De/(i*at),2)+Ke*(Be/(r*Ne))*(De/(i*at)));return NUe(0,FUe(100,it))}function UUe(e,t,n="lab"){e=new zn(e),t=new zn(t);const r=e.get(n),i=t.get(n);let s=0;for(let f in r){const a=(r[f]||0)-(i[f]||0);s+=a*a}return Math.sqrt(s)}const $Ue=(...e)=>{try{return new zn(...e),!0}catch{return!1}},VUe={cool(){return vx([qi.hsl(180,1,.9),qi.hsl(250,.7,.4)])},hot(){return vx(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Xj={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Lfe=Object.keys(Xj),oZ=new Map(Lfe.map(e=>[e.toLowerCase(),e])),qUe=typeof Proxy=="function"?new Proxy(Xj,{get(e,t){const n=t.toLowerCase();if(oZ.has(n))return e[oZ.get(n)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(Lfe)}}):Xj,HUe=(...e)=>{e=Ti(e,"cmyk");const[t,n,r,i]=e,s=e.length>4?e[4]:1;return i===1?[0,0,0,s]:[t>=1?0:255*(1-t)*(1-i),n>=1?0:255*(1-n)*(1-i),r>=1?0:255*(1-r)*(1-i),s]},{max:sZ}=Math,GUe=(...e)=>{let[t,n,r]=Ti(e,"rgb");t=t/255,n=n/255,r=r/255;const i=1-sZ(t,sZ(n,r)),s=i<1?1/(1-i):0,f=(1-t-i)*s,a=(1-n-i)*s,p=(1-r-i)*s;return[f,a,p,i]};zn.prototype.cmyk=function(){return GUe(this._rgb)};const YUe=(...e)=>new zn(...e,"cmyk");Object.assign(qi,{cmyk:YUe});bi.format.cmyk=HUe;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"cmyk"),Bi(e)==="array"&&e.length===4)return"cmyk"}});const WUe=(...e)=>{const t=Ti(e,"hsla");let n=ZS(e)||"lsa";return t[0]=Qh(t[0]||0)+"deg",t[1]=Qh(t[1]*100)+"%",t[2]=Qh(t[2]*100)+"%",n==="hsla"||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),n="hsla"):t.length=3,`${n.substr(0,3)}(${t.join(" ")})`},XUe=(...e)=>{const t=Ti(e,"lab");let n=ZS(e)||"lab";return t[0]=Qh(t[0])+"%",t[1]=Qh(t[1]),t[2]=Qh(t[2]),n==="laba"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`},ZUe=(...e)=>{const t=Ti(e,"lch");let n=ZS(e)||"lab";return t[0]=Qh(t[0])+"%",t[1]=Qh(t[1]),t[2]=isNaN(t[2])?"none":Qh(t[2])+"deg",n==="lcha"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`},KUe=(...e)=>{const t=Ti(e,"lab");return t[0]=Qh(t[0]*100)+"%",t[1]=Yj(t[1]),t[2]=Yj(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`},zfe=(...e)=>{const[t,n,r,...i]=Ti(e,"rgb"),[s,f,a]=ZV(t,n,r),[p,_,S]=Dfe(s,f,a);return[p,_,S,...i.length>0&&i[0]<1?[i[0]]:[]]},QUe=(...e)=>{const t=Ti(e,"lch");return t[0]=Qh(t[0]*100)+"%",t[1]=Yj(t[1]),t[2]=isNaN(t[2])?"none":Qh(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`},{round:yz}=Math,JUe=(...e)=>{const t=Ti(e,"rgba");let n=ZS(e)||"rgb";if(n.substr(0,3)==="hsl")return WUe(Pfe(t),n);if(n.substr(0,3)==="lab"){const r=W2();Py("d50");const i=XUe(GV(t),n);return Py(r),i}if(n.substr(0,3)==="lch"){const r=W2();Py("d50");const i=ZUe(WV(t),n);return Py(r),i}return n.substr(0,5)==="oklab"?KUe(ZV(t)):n.substr(0,5)==="oklch"?QUe(zfe(t)):(t[0]=yz(t[0]),t[1]=yz(t[1]),t[2]=yz(t[2]),(n==="rgba"||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),n="rgba"),`${n.substr(0,3)}(${t.slice(0,n==="rgb"?3:4).join(" ")})`)},Ffe=(...e)=>{e=Ti(e,"lch");const[t,n,r,...i]=e,[s,f,a]=Mfe(t,n,r),[p,_,S]=XV(s,f,a);return[p,_,S,...i.length>0&&i[0]<1?[i[0]]:[]]},jy=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,vp=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,uI=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,ad=/\s*/.source,QS=/\s+/.source,QV=/\s*,\s*/.source,PR=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,JS=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,Nfe=new RegExp("^rgba?\\("+ad+[jy,jy,jy].join(QS)+JS+"\\)$"),Bfe=new RegExp("^rgb\\("+ad+[jy,jy,jy].join(QV)+ad+"\\)$"),jfe=new RegExp("^rgba\\("+ad+[jy,jy,jy,vp].join(QV)+ad+"\\)$"),Ufe=new RegExp("^hsla?\\("+ad+[PR,uI,uI].join(QS)+JS+"\\)$"),$fe=new RegExp("^hsl?\\("+ad+[PR,uI,uI].join(QV)+ad+"\\)$"),Vfe=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,qfe=new RegExp("^lab\\("+ad+[vp,vp,vp].join(QS)+JS+"\\)$"),Hfe=new RegExp("^lch\\("+ad+[vp,vp,PR].join(QS)+JS+"\\)$"),Gfe=new RegExp("^oklab\\("+ad+[vp,vp,vp].join(QS)+JS+"\\)$"),Yfe=new RegExp("^oklch\\("+ad+[vp,vp,PR].join(QS)+JS+"\\)$"),{round:Wfe}=Math,rw=e=>e.map((t,n)=>n<=2?tx(Wfe(t),0,255):t),Ys=(e,t=0,n=100,r=!1)=>(typeof e=="string"&&e.endsWith("%")&&(e=parseFloat(e.substring(0,e.length-1))/100,r?e=t+(e+1)*.5*(n-t):e=t+e*(n-t)),+e),cc=(e,t)=>e==="none"?t:e,JV=e=>{if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];let t;if(bi.format.named)try{return bi.format.named(e)}catch{}if((t=e.match(Nfe))||(t=e.match(Bfe))){let n=t.slice(1,4);for(let i=0;i<3;i++)n[i]=+Ys(cc(n[i],0),0,255);n=rw(n);const r=t[4]!==void 0?+Ys(t[4],0,1):1;return n[3]=r,n}if(t=e.match(jfe)){const n=t.slice(1,5);for(let r=0;r<4;r++)n[r]=+Ys(n[r],0,255);return n}if((t=e.match(Ufe))||(t=e.match($fe))){const n=t.slice(1,4);n[0]=+cc(n[0].replace("deg",""),0),n[1]=+Ys(cc(n[1],0),0,100)*.01,n[2]=+Ys(cc(n[2],0),0,100)*.01;const r=rw(Wj(n)),i=t[4]!==void 0?+Ys(t[4],0,1):1;return r[3]=i,r}if(t=e.match(Vfe)){const n=t.slice(1,4);n[1]*=.01,n[2]*=.01;const r=Wj(n);for(let i=0;i<3;i++)r[i]=Wfe(r[i]);return r[3]=+t[4],r}if(t=e.match(qfe)){const n=t.slice(1,4);n[0]=Ys(cc(n[0],0),0,100),n[1]=Ys(cc(n[1],0),-125,125,!0),n[2]=Ys(cc(n[2],0),-125,125,!0);const r=W2();Py("d50");const i=rw(HV(n));Py(r);const s=t[4]!==void 0?+Ys(t[4],0,1):1;return i[3]=s,i}if(t=e.match(Hfe)){const n=t.slice(1,4);n[0]=Ys(n[0],0,100),n[1]=Ys(cc(n[1],0),0,150,!1),n[2]=+cc(n[2].replace("deg",""),0);const r=W2();Py("d50");const i=rw(YV(n));Py(r);const s=t[4]!==void 0?+Ys(t[4],0,1):1;return i[3]=s,i}if(t=e.match(Gfe)){const n=t.slice(1,4);n[0]=Ys(cc(n[0],0),0,1),n[1]=Ys(cc(n[1],0),-.4,.4,!0),n[2]=Ys(cc(n[2],0),-.4,.4,!0);const r=rw(XV(n)),i=t[4]!==void 0?+Ys(t[4],0,1):1;return r[3]=i,r}if(t=e.match(Yfe)){const n=t.slice(1,4);n[0]=Ys(cc(n[0],0),0,1),n[1]=Ys(cc(n[1],0),0,.4,!1),n[2]=+cc(n[2].replace("deg",""),0);const r=rw(Ffe(n)),i=t[4]!==void 0?+Ys(t[4],0,1):1;return r[3]=i,r}};JV.test=e=>Nfe.test(e)||Ufe.test(e)||qfe.test(e)||Hfe.test(e)||Gfe.test(e)||Yfe.test(e)||Bfe.test(e)||jfe.test(e)||$fe.test(e)||Vfe.test(e)||e==="transparent";zn.prototype.css=function(e){return JUe(this._rgb,e)};const e$e=(...e)=>new zn(...e,"css");qi.css=e$e;bi.format.css=JV;bi.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&Bi(e)==="string"&&JV.test(e))return"css"}});bi.format.gl=(...e)=>{const t=Ti(e,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t};const t$e=(...e)=>new zn(...e,"gl");qi.gl=t$e;zn.prototype.gl=function(){const e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};zn.prototype.hex=function(e){return Afe(this._rgb,e)};const n$e=(...e)=>new zn(...e,"hex");qi.hex=n$e;bi.format.hex=Efe;bi.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&Bi(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});const{log:xM}=Math,Xfe=e=>{const t=e/100;let n,r,i;return t<66?(n=255,r=t<6?0:-155.25485562709179-.44596950469579133*(r=t-2)+104.49216199393888*xM(r),i=t<20?0:-254.76935184120902+.8274096064007395*(i=t-10)+115.67994401066147*xM(i)):(n=351.97690566805693+.114206453784165*(n=t-55)-40.25366309332127*xM(n),r=325.4494125711974+.07943456536662342*(r=t-50)-28.0852963507957*xM(r),i=255),[n,r,i,1]},{round:r$e}=Math,i$e=(...e)=>{const t=Ti(e,"rgb"),n=t[0],r=t[2];let i=1e3,s=4e4;const f=.4;let a;for(;s-i>f;){a=(s+i)*.5;const p=Xfe(a);p[2]/p[0]>=r/n?s=a:i=a}return r$e(a)};zn.prototype.temp=zn.prototype.kelvin=zn.prototype.temperature=function(){return i$e(this._rgb)};const _z=(...e)=>new zn(...e,"temp");Object.assign(qi,{temp:_z,kelvin:_z,temperature:_z});bi.format.temp=bi.format.kelvin=bi.format.temperature=Xfe;zn.prototype.oklch=function(){return zfe(this._rgb)};const a$e=(...e)=>new zn(...e,"oklch");Object.assign(qi,{oklch:a$e});bi.format.oklch=Ffe;bi.autodetect.push({p:2,test:(...e)=>{if(e=Ti(e,"oklch"),Bi(e)==="array"&&e.length===3)return"oklch"}});Object.assign(qi,{analyze:kfe,average:oUe,bezier:hUe,blend:Tp,brewer:qUe,Color:zn,colors:Qw,contrast:RUe,contrastAPCA:zUe,cubehelix:EUe,deltaE:jUe,distance:UUe,input:bi,interpolate:Jw,limits:KV,mix:Jw,random:MUe,scale:vx,scales:VUe,valid:$Ue});const Zfe=(e,t)=>{let n=e.map(r=>r[t]).filter(r=>r>=0);return{maxValue:Math.max(...n),minValue:Math.min(...n),maxRank:n.length}},Kfe=(e,t,n,r,i,s)=>{t===void 0&&(t=Y$),r===void 0&&(r=eue),i===void 0&&(i=tue);let f;f=vx(r).mode(i).domain([0,Math.max(...t)]),s===void 0&&(s="linear");let a=["interpolate",[s],["get",e]],p=[];return t.forEach(_=>{var S=f(_).hex("rgb");a.push(_),a.push(S),p.push([_,S])}),{colorExp:a,legendContent:p}},o$e=(e,t,n,r,i,s,f,a)=>{let p=vx(r);p=p.mode(i);var _=["match",["get",n]],S=["match",["get",n]];let E=[],I=[];a===void 0?(a=Zfe(e,t),console.log("minMax on the fly",a)):console.log("minMax provided",a),a.maxValue,a.minValue,E=KV(e.map(F=>F[t]),f,s).slice(1),I=E.map(F=>{let U=E.indexOf(E.filter(V=>F<=V)[0])/E.length;return vx(r).classes(s)(U).brighten(.25).saturate(.25).hex("rgb")}),e.forEach(F=>{let U=E.indexOf(E.filter(V=>F[t]<=V)[0])/E.length,k=p.classes(s)(U).brighten(.25).saturate(.25).hex("rgb");_.push(F[n],k)}),e.forEach(F=>{let U=F[t]*500;S.push(F[n],U)});let z={method:f,content:RFe(E,I)};return _.push("rgba(255,255,255,0)"),S.push(0),{styleExp:_,legendContent:z,heightExp:S}},s$e={[BV.type]:(e,t)=>{e.progress.tab=t.payload},[afe.type]:(e,t)=>{e.progress.isFetching=!0},[ofe.type]:(e,t)=>{e.progress.isFetching=!1;const{data:n,pathArray:r,keepACopy:i}=t.payload;if(Db(e,r,n),i===!0){let s=["refData",r[r.length-1]];Db(e,s,n)}},[sfe.type]:(e,t)=>{e.progress.isFetching=!1,console.log(t.payload)},[dje.type]:(e,t)=>{e.progress.isFetching=t.payload.isFetching},[AR.type]:(e,t)=>{t.payload!==void 0&&(console.log(t.payload),e.progress.messages.push(t.payload)),e.progress.isThinking=e.progress.isThinking+1},[OR.type]:(e,t)=>{t.payload!==void 0&&(console.log(t.payload),e.progress.messages.push(t.payload)),e.progress.isThinking=e.progress.isThinking-1},[pje.type]:(e,t)=>{const n=e.rainfallEvents.list;let r=n.map(i=>i.endDt).sort()[n.length-1];e.rainfallEvents.stats.latest=r,e.rainfallEvents.stats.longest=Math.max(...n.map(i=>i.hours)),e.rainfallEvents.stats.maxDate=Pn(r).endOf("month").format()},[jV.type]:(e,t)=>{const{contextType:n,startDt:r,endDt:i}=t.payload;let s=dp(e,n);s.startDt=r,s.endDt=i,CR(e).list.filter(f=>f.selected).forEach(f=>f.selected===!1)},[lfe.type]:(e,t)=>{let{eventid:n,contextType:r}=t.payload,i=Mje(e,n);i.selected=!0,Dje(e,n).forEach((a,p)=>a.selected=!1);let f=dp(e,r);f.startDt=i.startDt,f.endDt=i.endDt},[sI.type]:(e,t)=>{const{contextType:n,sensorLocationType:r,selectedOptions:i}=t.payload;i!==null?dp(e,n).sensorLocations[r]=i.filter(s=>s!==null):dp(e,n).sensorLocations[r]=[]},[Y2.type]:(e,t)=>{const{contextType:n,sensorLocationType:r,selectedOptions:i}=t.payload;let s=i.map(f=>f.value);i!==null?Kw(e,r).forEach((f,a)=>{Fy(s,f.id)?f.properties.selected=!0:f.properties.selected=!1}):Kw(e,r).forEach((f,a)=>{f.properties.selected=!1})},[ufe.type]:(e,t)=>{let{rollup:n,contextType:r}=t.payload;dp(e,r).rollup=n},[cfe.type]:(e,t)=>{let{fetchKwargs:n,requestId:r,contextType:i,status:s,messages:f}=t.payload,a=bw(e,r,i);a==null?e0(e,i).push({fetchKwargs:n,requestId:r,isFetching:1,isActive:!1,results:!1,status:s,messages:f}):a.isFetching=a.isFetching+1},[hfe.type]:(e,t)=>{let{contextType:n,requestId:r}=t.payload;e.fetchKwargs[n].history=e0(e,n).filter(i=>i.requestId!==r)},[ffe.type]:(e,t)=>{let{requestId:n,contextType:r,results:i,processedKwargs:s,status:f,messages:a}=t.payload;console.log("request",n,f),wje(e,n,r).forEach(p=>{p.isFetching=p.isFetching-1,p.results={...i,...p.results},p.processedKwargs=s,p.status=f,p.messages=a})},[Lb.type]:(e,t)=>{let{requestId:n,results:r,status:i,messages:s}=t.payload;console.log(n,i);let f=Tje(e,n);f!==void 0&&(f.isFetching=f.isFetching-1,f.status=i,f.messages=s)},[XS.type]:(e,t)=>{let{requestId:n,contextType:r}=t.payload,i=bw(e,n,r);i!==void 0&&(Sje(e,n,r).forEach(s=>s.isActive=!1),i.isActive=!0,wu(i.results).forEach(s=>{console.log(`getting reference ${s} layer`);let f=K3(e.refData[s].data),a=i.results[s];console.log(`joining ${s} results to layer`);let p=Lje(f,a,"properties.id","id");console.log(`pushing udpated ${s} results layer to map`),sz(e,s).data=p}),wu(zl).filter(s=>!Fy(wu(i.results),s)).forEach(s=>{console.log(s);let f=K3(e.refData[s].data);sz(e,s).data=f}))},[$V.type]:(e,t)=>{let{lyrSrcNames:n}=t.payload;n===void 0&&(n=wu(zl)),n.length>0&&n.forEach(r=>{if(_w(e.refData,r)){let i=K3(e.refData[r].data);sz(e,r).data=i}})},[mje.type]:(e,t)=>{e.eventFilters.maxHours=t.payload.maxHours},[nfe.type]:(e,t)=>(e.progress.mapLoaded||(e.progress.mapLoaded=!0),e),[rfe.type]:(e,t)=>(e.mapStyle=t.payload,e.progress.initialStyleLoaded||(e.progress.initialStyleLoaded=!0),e),[ife.type]:(e,t)=>{sR(t.payload,(n,r)=>{if(_w(n,"INDEX")){let{INDEX:i,...s}=n,f=[...e.mapStyle.layers];f.splice(i,0,s),e.mapStyle.layers=f}else e.mapStyle.layers.push(n)})},[_je.type]:(e,t)=>{const{data:n,path:r,how:i}=t.payload;if(i==="replace")Db(e,r,n);else if(i==="append"){let s=nf(e,r);Db(e,r,[...s,...n])}},[yje.type]:(e,t)=>{let{requestId:n,contextType:r,sensor:i}=t.payload,s=bw(e,n,r),f=wu(s.results),a=[];f.forEach(S=>{a=a.concat(s.results[S])});let p=Zfe(a,"total");console.log(p);let _=o$e(a,"total","id",eue,tue,OIe,"e",p);Db(s,["styleExp",i],_.styleExp),Db(s,["heightExp",i],_.heightExp),Db(s,["legendContent",i],_.legendContent),s.stats=p},[gje.type]:(e,t)=>{let{requestId:n,contextType:r,sensor:i}=t.payload,s=bw(e,n,r),f=wu(s.results),a=wu(zl).filter(p=>!Fy(f,p));f.forEach(p=>{if(_w(s,["styleExp",p])&&_w(s,["heightExp",p])){let _=s.styleExp[p],S=s.heightExp[p],E=[`${p}-results`,`${p}-results-3d`];$X(e,E).forEach(I=>{I.paint[`${I.type}-color`]=_,I.type=="fill-extrusion"?(I.paint[`${I.type}-base`]=0,I.paint[`${I.type}-height`]=S,I.paint[`${I.type}-opacity`]=1):I.paint[`${I.type}-opacity`]=.5})}else console.log("style and legend not previously calculated.")}),a.forEach(p=>{let _=[`${p}-results`];$X(e,_).forEach(S=>{S.paint[`${S.type}-color`]="#fff",S.paint[`${S.type}-opacity`]=0})})},[UV.type]:(e,t)=>{const{breaks:n}=t.payload||{},{colorExp:r,legendContent:i}=Kfe("total",n),s=nf(e,["mapStyle","layers"],[]);AIe.forEach(f=>{if(!Array.isArray(s))return;const a=s.find(p=>p.id===f);if(!a||!a.type||!a.paint){console.debug(`[applyColorStretch] skipping missing/unready layer "${f}"`);return}a.paint[`${a.type}-color`]=r}),e.mapLegend||(e.mapLegend={}),e.mapLegend.content=Array.isArray(i)?i:[]}},l$e=hje(n6e,e=>{Object.entries(s$e).forEach(([t,n])=>{e.addCase(t,n)})}),qv=uje({reducer:l$e,devTools:!0});function iw(e){return function(t){const{url:n,pathArray:r,transformer:i,keepACopy:s}=e;t(AR(`getting data from "${n}"`)),t(afe(n));let f;return _s({url:n,method:"GET"}).then(a=>(i?f=i(a.data):f=a.data,t(ofe({data:f,pathArray:r,keepACopy:s})),!0),a=>(console.log("An error occurred.",a),t(sfe("An error occurred.")),!1)).finally(()=>t(OR(`data from "${n}" loaded to ${r.join(".")}`)))}}function u$e(e){return Promise.all([new Promise((t,n)=>{let r=e(iw({url:mIe,pathArray:["globalConfig"],transformer:!1,keepACopy:!1}));t(r)}),new Promise((t,n)=>{let r=e(iw({url:gIe,pathArray:["rainfallEvents","list"],transformer:kje,keepACopy:!1}));t(r)}),new Promise((t,n)=>{let r=e(iw({url:yIe,pathArray:["stats","latest"],transformer:!1,keepACopy:!1}));t(r)}),new Promise((t,n)=>{let r=e(iw({url:bIe,pathArray:["refData","lookups"],transformer:!1,keepACopy:!1}));t(r)}),new Promise((t,n)=>{let r=e(iw({url:vIe,pathArray:["mapStyle","sources","gauge"],transformer:Rje,keepACopy:!0}));t(r)}),new Promise((t,n)=>{let r=e(iw({url:_Ie,pathArray:["mapStyle","sources","pixel"],transformer:Pje,keepACopy:!0}));t(r)})])}function c$e(e){return function(t){t(AR("Loading reference data and map layers")),u$e(t).then(n=>{t(ife(TIe)),t(UV({breaks:Y$}))}).then(()=>{const n=qv.getState(),r=nf(n,"stats.latest",{}),i=Pn().toISOString(),s=({contextType:f,rainfallDataType:a,lookbackAmount:p,lookbackUnit:_})=>{const S=dp(n,f),E=pfe({contextType:f,rainfallDataType:a,rollup:S.rollup,latest:r,rainfallMinDate:G$,now:i}),I=Rv({start:E.max.clone().subtract(p,_),end:E.max,min:E.min,max:E.max});t(jV({contextType:f,startDt:I.start.toISOString(),endDt:I.end.toISOString()}))};s({contextType:fi.legacyRealtime,rainfallDataType:Km.realtime,lookbackAmount:2,lookbackUnit:"hour"}),s({contextType:fi.legacyGauge,rainfallDataType:Km.historic,lookbackAmount:1,lookbackUnit:"month"}),s({contextType:fi.legacyGarr,rainfallDataType:Km.historic,lookbackAmount:1,lookbackUnit:"month"})}).then(async()=>{WP&&(await e6e({dispatch:t,getState:qv.getState}),t6e(qv))}).then(()=>t(OR("Initial data load complete.")))}}const Qfe=(e,t,n,r,i,s)=>{let f={url:i,method:"POST"};s!==!1&&(f.data=s),_s(f).then(a=>{let p=a.data;if(console.log(`job ${p.meta.jobId} ${p.status} - ${n}`),Fy(["queued","started"],p.status))setTimeout(()=>Qfe(e,t,n,r,p.meta.jobUrl,!1),xIe);else if(Fy(["deferred","failed"],p.status))e(Lb({requestId:t,contextType:r,results:{[n]:!1},status:p.status,messages:p.messages}));else if(p.status==="finished")try{p.data===null?(console.log("No data was returned."),e(Lb({requestId:t,contextType:r,results:{[n]:!1},status:"error",messages:p.messages}))):(p=Bje(p,{contextType:r,sensor:n}),e(ffe({requestId:t,contextType:r,results:{[n]:p.data},processedKwargs:p.args,status:p.status,messages:p.messages})),e(XS({requestId:t,contextType:r})))}catch(_){console.log("An error occurred processing the result.",_),e(Lb({requestId:t,contextType:r,results:{[n]:!1},status:"error",messages:p.messages}))}else p.status==="does not exist"&&(console.log("Job was cancelled."),e(Lb({requestId:t,contextType:r,results:{[n]:!1},status:p.status,messages:p.messages})))},a=>{console.log("An error occurred.",a),e(Lb({requestId:t,contextType:r,results:{[n]:!1},status:"error",messages:["An error occurred when trying to fetch the rainfall data.",a]}))}).catch(a=>{console.error("An error occurred.",a),e(Lb({requestId:t,contextType:r,results:{[n]:!1},status:"error",messages:["An error occurred when trying to fetch the rainfall data.",a]}))})};function f$e(e){let t=qv.getState();return function(n){let{contextType:r,rainfallDataType:i}=e,s=dp(t,r),f=Jle({contextType:r,rainfallDataType:i,rollup:s.rollup}),a=SIe({contextType:r,rainfallDataType:i,rollup:s.rollup}),p=fRe.MD5(s),_=bw(t,p,r);_!==void 0&&(console.log("This exact request was already made. Keeping existing data from request",_.requestId),_.isActive===!1&&n(XS({requestId:_.requestId,contextType:r}))),["gauge","basin"].forEach((E,I)=>{let z=E==="basin"?["pixel","pixels"]:["gauge","gauges"];if(s.sensorLocations[z[0]].length===0)return;let F={start_dt:s.startDt,end_dt:s.endDt,f:s.f};a&&(F.rollup=s.rollup),F[z[1]]=s.sensorLocations[z[0]].map(V=>V.value).join(","),n(cfe({fetchKwargs:s,requestId:p,contextType:r}));let U=`${Jv}v2/${z[0]}/${f}/`,k=F;Qfe(n,p,z[0],r,U,k)})}}function Jfe(e){let{contextType:t,...n}=e;return function(r){let i=n.requestId;n.isActive||r(XS({requestId:i,contextType:t}))}}function h$e(e){let{contextType:t,requestId:n}=e;return function(r,i){let s=i(),f=bw(s,n,t);if(f===void 0)return;let a=f.isActive===!0;if(r(hfe({contextType:t,requestId:n})),!a)return;let p=i(),_=e0(p,t);if(_.length>0){let S=_[_.length-1];r(XS({requestId:S.requestId,contextType:t}))}else{r($V({lyrSrcNames:wu(zl)}));let S=dp(p,t);wu(zl).forEach(E=>{var z;let I=((z=S==null?void 0:S.sensorLocations)==null?void 0:z[E])||[];I.length>0&&r(Y2({contextType:t,sensorLocationType:E,selectedOptions:I}))})}}}function ehe(e){let t=e;return function(n){n(BV(t));let r=xje(qv.getState());n(r===void 0?$V({lyrSrcNames:wu(zl)}):XS({requestId:r.requestId,contextType:t}))}}function Iw(e,t=!0){let n=qv.getState();const{contextType:r,sensorLocationType:i,selectedOptions:s,inputType:f}=e;return async function(a){let p=[],_=[],S=[];(s!==null||nf(s,"length",0)!==0)&&(p=s.filter(I=>I!==null),_=[...dp(n,r).sensorLocations[i]],console.log(i,"existing selection",_.map(I=>I.label)),console.log(i,"incoming selection",p.map(I=>I.label)),f==="geomPicker"?p.length<_.length?S=_Fe(_,p,"value"):S=CFe(_,p,"value"):S=PFe(_,p,"value"),console.log(i,"new selection",S.map(I=>I.label)));let E={contextType:r,sensorLocationType:i,selectedOptions:S};a(sI(E)),t&&a(Y2(E))}}function d$e(e){let t=qv.getState();const{selectedOptions:n,contextType:r,inputType:i}=e;return async function(s){Iw(e,!1);const f=Kle(r);[zl.gauge,zl.pixel].filter(_=>!f.includes(_)).forEach(_=>{s(Iw({contextType:r,sensorLocationType:_,selectedOptions:[],inputType:i}))}),f.forEach(_=>{let S=new Set;(n!==null||nf(n,"length",0)!==0)&&n.forEach((U,k)=>{let V=Oje(t,U.value);nf(V,_,[]).forEach(K=>S.add(K.toString()))});let E=[...S],z=Kw(t,_).filter(U=>Fy(E,U.properties.id)).map(U=>VV(U));s(Iw({contextType:r,sensorLocationType:_,selectedOptions:z,inputType:i}))})}}class p$e extends be.Component{constructor(t,n){super(t,n),this.handleContextSwitch=this.handleContextSwitch.bind(this),this.handleShow=this.handleShow.bind(this),this.handleClose=this.handleClose.bind(this),this.state={show:!0,showWhich:"AboutButton",content:{AboutButton:{title:Oe.jsxs(ia,{children:[Oe.jsxs(kr,{lg:8,children:[Oe.jsx("h1",{children:"3RWW Rainfall"}),Oe.jsx("p",{className:"lead",children:"Map and download hyper-local rainfall measurements for Allegheny County"})]}),Oe.jsxs(kr,{children:[Oe.jsx("small",{children:"A project by "}),Oe.jsx("br",{}),Oe.jsx("img",{className:"brand-logo",src:`${$v}static/assets/3rww_logo_full_inverse_transparent_blue.png`,placeholder:"3 River Wet Weather",alt:"3RWW Logo"})]})]}),content:Oe.jsx(kIe,{})}}}}handleClose(t){this.setState({show:!1,showWhich:null})}handleShow(t){console.log(t.target.id),this.setState({show:!0,showWhich:t.target.id})}handleContextSwitch(t,n){n&&typeof n.preventDefault=="function"&&n.preventDefault(),this.props.switchContext(t)}render(){return Oe.jsxs("div",{className:"nav-container",children:[Oe.jsxs(EE,{bg:"primary",variant:"dark",expand:"md",children:[Oe.jsxs(EE.Brand,{className:"d-none d-sm-block",children:[Oe.jsx("img",{className:"nav-brand-logo",src:`${$v}static/assets/3rww_logo_full_inverse_transparent.png`,alt:"3RWW Logo"})," Rainfall"]}),Oe.jsxs(EE.Brand,{className:"d-block d-sm-none",style:{fontSize:.9+"rem"},children:[Oe.jsx("img",{className:"nav-brand-logo-xs",src:`${$v}static/assets/3rww_logo_full_inverse_transparent.png`,alt:"3RWW Logo"})," Rainfall"]}),Oe.jsx(EE.Toggle,{"aria-controls":"basic-navbar-nav"}),Oe.jsxs(EE.Collapse,{id:"basic-navbar-nav",children:[Oe.jsxs(sp,{variant:"pills",className:"me-auto py-2",defaultActiveKey:fi.legacyRealtime,children:[Oe.jsx(sp.Item,{children:Oe.jsx(sp.Link,{active:this.props.tab===fi.legacyRealtime,eventKey:fi.legacyRealtime,onClick:t=>this.handleContextSwitch(fi.legacyRealtime,t),children:"Real-Time Rainfall"})}),Oe.jsx(sp.Item,{children:Oe.jsx(sp.Link,{active:this.props.tab===fi.legacyGauge,eventKey:fi.legacyGauge,onClick:t=>this.handleContextSwitch(fi.legacyGauge,t),children:"Historical Rain Gauge"})}),Oe.jsx(sp.Item,{children:Oe.jsx(sp.Link,{active:this.props.tab===fi.legacyGarr,eventKey:fi.legacyGarr,onClick:t=>this.handleContextSwitch(fi.legacyGarr,t),children:"Calibrated Radar Rainfall"})})]}),Oe.jsxs(sp,{className:"ms-auto",children:[this.props.globalNotice.show?Oe.jsx(nse,{trigger:"click",placement:"bottom",overlay:Oe.jsxs(Qb,{id:"global-notice-popover",children:[Oe.jsx(Qb.Header,{as:"h3",children:this.props.globalNotice.title}),Oe.jsx(Qb.Body,{children:this.props.globalNotice.content})]}),children:Oe.jsx(sp.Item,{as:"button",className:`mx-3 btn btn-sm text-light btn-${this.props.globalNotice.level}`,id:"noticePopover",children:Oe.jsx(dx,{icon:UEe})})}):null,Oe.jsx(sp.Item,{className:"btn btn-outline-light btn-sm",id:"AboutButton",onClick:this.handleShow,children:"About"})]})]})]}),Oe.jsxs(Zs,{show:this.state.show,onHide:this.handleClose,size:"lg",children:[Oe.jsx(Zs.Header,{closeButton:!0,children:Oe.jsx(Zs.Title,{children:this.state.showWhich?this.state.content[this.state.showWhich].title:null})}),Oe.jsxs(Zs.Body,{children:[this.props.globalNotice.show?Oe.jsx(ia,{className:"my-3",children:Oe.jsx(kr,{children:Oe.jsxs(D4,{variant:this.props.globalNotice.level,children:[Oe.jsx(D4.Heading,{children:this.props.globalNotice.title}),Oe.jsx("p",{children:this.props.globalNotice.content})]})})}):"",this.state.showWhich?this.state.content[this.state.showWhich].content:null]}),Oe.jsx(Zs.Footer,{children:Oe.jsx(Yf,{variant:"secondary",onClick:this.handleClose,children:"Close"})})]})]})}}function m$e(e){return{isThinking:e.progress.isThinking>0,mapLoaded:e.progress.mapLoaded,tab:e.progress.tab,globalNotice:e.globalConfig.globalNotice}}const g$e={switchContext:ehe},y$e=af(m$e,g$e)(p$e);var hO="delete",Io=5,Xh=1<<Io,dc=Xh-1,aa={};function Zj(){return{value:!1}}function Zh(e){e&&(e.value=!0)}function e8(){}function eS(e){return e.size===void 0&&(e.size=e.__iterate(the)),e.size}function t0(e,t){if(typeof t!="number"){var n=t>>>0;if(""+n!==t||n===4294967295)return NaN;t=n}return t<0?eS(e)+t:t}function the(){return!0}function dO(e,t,n){return(e===0&&!rhe(e)||n!==void 0&&e<=-n)&&(t===void 0||n!==void 0&&t>=n)}function eT(e,t){return nhe(e,t,0)}function pO(e,t){return nhe(e,t,t)}function nhe(e,t,n){return e===void 0?n:rhe(e)?t===1/0?t:Math.max(0,t+e)|0:t===void 0||t===e?e:Math.min(t,e)|0}function rhe(e){return e<0||e===0&&1/e===-1/0}var ihe="@@__IMMUTABLE_ITERABLE__@@";function _c(e){return!!(e&&e[ihe])}var ahe="@@__IMMUTABLE_KEYED__@@";function yo(e){return!!(e&&e[ahe])}var ohe="@@__IMMUTABLE_INDEXED__@@";function Iu(e){return!!(e&&e[ohe])}function mO(e){return yo(e)||Iu(e)}var rs=function(t){return _c(t)?t:bc(t)},fd=(function(e){function t(n){return yo(n)?n:u0(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t})(rs),Fx=(function(e){function t(n){return Iu(n)?n:dd(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t})(rs),tT=(function(e){function t(n){return _c(n)&&!mO(n)?n:iT(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t})(rs);rs.Keyed=fd;rs.Indexed=Fx;rs.Set=tT;var she="@@__IMMUTABLE_SEQ__@@";function RR(e){return!!(e&&e[she])}var lhe="@@__IMMUTABLE_RECORD__@@";function Nx(e){return!!(e&&e[lhe])}function hd(e){return _c(e)||Nx(e)}var nT="@@__IMMUTABLE_ORDERED__@@";function Jh(e){return!!(e&&e[nT])}var gO=0,Ep=1,od=2,Kj=typeof Symbol=="function"&&Symbol.iterator,uhe="@@iterator",kR=Kj||uhe,Sa=function(t){this.next=t};Sa.prototype.toString=function(){return"[Iterator]"};Sa.KEYS=gO;Sa.VALUES=Ep;Sa.ENTRIES=od;Sa.prototype.inspect=Sa.prototype.toSource=function(){return this.toString()};Sa.prototype[kR]=function(){return this};function ko(e,t,n,r){var i=e===0?t:e===1?n:[t,n];return r?r.value=i:r={value:i,done:!1},r}function vc(){return{value:void 0,done:!0}}function t8(e){return Array.isArray(e)?!0:!!LR(e)}function lZ(e){return e&&typeof e.next=="function"}function Qj(e){var t=LR(e);return t&&t.call(e)}function LR(e){var t=e&&(Kj&&e[Kj]||e[uhe]);if(typeof t=="function")return t}function _$e(e){var t=LR(e);return t&&t===e.entries}function v$e(e){var t=LR(e);return t&&t===e.keys}var rT=Object.prototype.hasOwnProperty;function n8(e){return Array.isArray(e)||typeof e=="string"?!0:e&&typeof e=="object"&&Number.isInteger(e.length)&&e.length>=0&&(e.length===0?Object.keys(e).length===1:e.hasOwnProperty(e.length-1))}var bc=(function(e){function t(n){return n==null?i8():hd(n)?n.toSeq():x$e(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(r,i){var s=this._cache;if(s){for(var f=s.length,a=0;a!==f;){var p=s[i?f-++a:a++];if(r(p[1],p[0],this)===!1)break}return a}return this.__iterateUncached(r,i)},t.prototype.__iterator=function(r,i){var s=this._cache;if(s){var f=s.length,a=0;return new Sa(function(){if(a===f)return vc();var p=s[i?f-++a:a++];return ko(r,p[0],p[1])})}return this.__iteratorUncached(r,i)},t})(rs),u0=(function(e){function t(n){return n==null?i8().toKeyedSeq():_c(n)?yo(n)?n.toSeq():n.fromEntrySeq():Nx(n)?n.toSeq():a8(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t})(bc),dd=(function(e){function t(n){return n==null?i8():_c(n)?yo(n)?n.entrySeq():n.toIndexedSeq():Nx(n)?n.toSeq().entrySeq():che(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t})(bc),iT=(function(e){function t(n){return(_c(n)&&!mO(n)?n:dd(n)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t})(bc);bc.isSeq=RR;bc.Keyed=u0;bc.Set=iT;bc.Indexed=dd;bc.prototype[she]=!0;var bx=(function(e){function t(n){this._array=n,this.size=n.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r,i){return this.has(r)?this._array[t0(this,r)]:i},t.prototype.__iterate=function(r,i){for(var s=this._array,f=s.length,a=0;a!==f;){var p=i?f-++a:a++;if(r(s[p],p,this)===!1)break}return a},t.prototype.__iterator=function(r,i){var s=this._array,f=s.length,a=0;return new Sa(function(){if(a===f)return vc();var p=i?f-++a:a++;return ko(r,p,s[p])})},t})(dd),r8=(function(e){function t(n){var r=Object.keys(n).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n):[]);this._object=n,this._keys=r,this.size=r.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r,i){return i!==void 0&&!this.has(r)?i:this._object[r]},t.prototype.has=function(r){return rT.call(this._object,r)},t.prototype.__iterate=function(r,i){for(var s=this._object,f=this._keys,a=f.length,p=0;p!==a;){var _=f[i?a-++p:p++];if(r(s[_],_,this)===!1)break}return p},t.prototype.__iterator=function(r,i){var s=this._object,f=this._keys,a=f.length,p=0;return new Sa(function(){if(p===a)return vc();var _=f[i?a-++p:p++];return ko(r,_,s[_])})},t})(u0);r8.prototype[nT]=!0;var b$e=(function(e){function t(n){this._collection=n,this.size=n.length||n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(r,i){if(i)return this.cacheResult().__iterate(r,i);var s=this._collection,f=Qj(s),a=0;if(lZ(f))for(var p;!(p=f.next()).done&&r(p.value,a++,this)!==!1;);return a},t.prototype.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var s=this._collection,f=Qj(s);if(!lZ(f))return new Sa(vc);var a=0;return new Sa(function(){var p=f.next();return p.done?p:ko(r,a++,p.value)})},t})(dd),uZ;function i8(){return uZ||(uZ=new bx([]))}function a8(e){var t=o8(e);if(t)return t.fromEntrySeq();if(typeof e=="object")return new r8(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function che(e){var t=o8(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function x$e(e){var t=o8(e);if(t)return _$e(e)?t.fromEntrySeq():v$e(e)?t.toSetSeq():t;if(typeof e=="object")return new r8(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}function o8(e){return n8(e)?new bx(e):t8(e)?new b$e(e):void 0}var fhe="@@__IMMUTABLE_MAP__@@";function zR(e){return!!(e&&e[fhe])}function s8(e){return zR(e)&&Jh(e)}function Jj(e){return!!(e&&typeof e.equals=="function"&&typeof e.hashCode=="function")}function Fl(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if(typeof e.valueOf=="function"&&typeof t.valueOf=="function"){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!!(Jj(e)&&Jj(t)&&e.equals(t))}var LE=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(t,n){t|=0,n|=0;var r=t&65535,i=n&65535;return r*i+((t>>>16)*i+r*(n>>>16)<<16>>>0)|0};function FR(e){return e>>>1&1073741824|e&3221225471}var w$e=Object.prototype.valueOf;function Zc(e){if(e==null)return cZ(e);if(typeof e.hashCode=="function")return FR(e.hashCode(e));var t=C$e(e);if(t==null)return cZ(t);switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return S$e(t);case"string":return t.length>M$e?T$e(t):e6(t);case"object":case"function":return A$e(t);case"symbol":return E$e(t);default:if(typeof t.toString=="function")return e6(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function cZ(e){return e===null?1108378658:1108378659}function S$e(e){if(e!==e||e===1/0)return 0;var t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)e/=4294967295,t^=e;return FR(t)}function T$e(e){var t=xz[e];return t===void 0&&(t=e6(e),bz===D$e&&(bz=0,xz={}),bz++,xz[e]=t),t}function e6(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return FR(t)}function E$e(e){var t=dZ[e];return t!==void 0||(t=hhe(),dZ[e]=t),t}function A$e(e){var t;if(t6&&(t=n6.get(e),t!==void 0)||(t=e[jb],t!==void 0)||!hZ&&(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[jb],t!==void 0||(t=O$e(e),t!==void 0)))return t;if(t=hhe(),t6)n6.set(e,t);else{if(fZ!==void 0&&fZ(e)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(hZ)Object.defineProperty(e,jb,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(e.propertyIsEnumerable!==void 0&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[jb]=t;else if(e.nodeType!==void 0)e[jb]=t;else throw new Error("Unable to set a non-enumerable property on object.")}return t}var fZ=Object.isExtensible,hZ=(function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}})();function O$e(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function C$e(e){return e.valueOf!==w$e&&typeof e.valueOf=="function"?e.valueOf(e):e}function hhe(){var e=++vz;return vz&1073741824&&(vz=0),e}var t6=typeof WeakMap=="function",n6;t6&&(n6=new WeakMap);var dZ=Object.create(null),vz=0,jb="__immutablehash__";typeof Symbol=="function"&&(jb=Symbol(jb));var M$e=16,D$e=255,bz=0,xz={},NR=(function(e){function t(n,r){this._iter=n,this._useKeys=r,this.size=n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r,i){return this._iter.get(r,i)},t.prototype.has=function(r){return this._iter.has(r)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var r=this,i=l8(this,!0);return this._useKeys||(i.valueSeq=function(){return r._iter.toSeq().reverse()}),i},t.prototype.map=function(r,i){var s=this,f=yhe(this,r,i);return this._useKeys||(f.valueSeq=function(){return s._iter.toSeq().map(r,i)}),f},t.prototype.__iterate=function(r,i){var s=this;return this._iter.__iterate(function(f,a){return r(f,a,s)},i)},t.prototype.__iterator=function(r,i){return this._iter.__iterator(r,i)},t})(u0);NR.prototype[nT]=!0;var dhe=(function(e){function t(n){this._iter=n,this.size=n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(r){return this._iter.includes(r)},t.prototype.__iterate=function(r,i){var s=this,f=0;return i&&eS(this),this._iter.__iterate(function(a){return r(a,i?s.size-++f:f++,s)},i)},t.prototype.__iterator=function(r,i){var s=this,f=this._iter.__iterator(Ep,i),a=0;return i&&eS(this),new Sa(function(){var p=f.next();return p.done?p:ko(r,i?s.size-++a:a++,p.value,p)})},t})(dd),phe=(function(e){function t(n){this._iter=n,this.size=n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(r){return this._iter.includes(r)},t.prototype.__iterate=function(r,i){var s=this;return this._iter.__iterate(function(f){return r(f,f,s)},i)},t.prototype.__iterator=function(r,i){var s=this._iter.__iterator(Ep,i);return new Sa(function(){var f=s.next();return f.done?f:ko(r,f.value,f.value,f)})},t})(iT),mhe=(function(e){function t(n){this._iter=n,this.size=n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(r,i){var s=this;return this._iter.__iterate(function(f){if(f){mZ(f);var a=_c(f);return r(a?f.get(1):f[1],a?f.get(0):f[0],s)}},i)},t.prototype.__iterator=function(r,i){var s=this._iter.__iterator(Ep,i);return new Sa(function(){for(;;){var f=s.next();if(f.done)return f;var a=f.value;if(a){mZ(a);var p=_c(a);return ko(r,p?a.get(0):a[0],p?a.get(1):a[1],f)}}})},t})(u0);dhe.prototype.cacheResult=NR.prototype.cacheResult=phe.prototype.cacheResult=mhe.prototype.cacheResult=f8;function ghe(e){var t=mg(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var n=e.reverse.apply(this);return n.flip=function(){return e.reverse()},n},t.has=function(n){return e.includes(n)},t.includes=function(n){return e.has(n)},t.cacheResult=f8,t.__iterateUncached=function(n,r){var i=this;return e.__iterate(function(s,f){return n(f,s,i)!==!1},r)},t.__iteratorUncached=function(n,r){if(n===od){var i=e.__iterator(n,r);return new Sa(function(){var s=i.next();if(!s.done){var f=s.value[0];s.value[0]=s.value[1],s.value[1]=f}return s})}return e.__iterator(n===Ep?gO:Ep,r)},t}function yhe(e,t,n){var r=mg(e);return r.size=e.size,r.has=function(i){return e.has(i)},r.get=function(i,s){var f=e.get(i,aa);return f===aa?s:t.call(n,f,i,e)},r.__iterateUncached=function(i,s){var f=this;return e.__iterate(function(a,p,_){return i(t.call(n,a,p,_),p,f)!==!1},s)},r.__iteratorUncached=function(i,s){var f=e.__iterator(od,s);return new Sa(function(){var a=f.next();if(a.done)return a;var p=a.value,_=p[0];return ko(i,_,t.call(n,p[1],_,e),a)})},r}function l8(e,t){var n=this,r=mg(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var i=ghe(e);return i.reverse=function(){return e.flip()},i}),r.get=function(i,s){return e.get(t?i:-1-i,s)},r.has=function(i){return e.has(t?i:-1-i)},r.includes=function(i){return e.includes(i)},r.cacheResult=f8,r.__iterate=function(i,s){var f=this,a=0;return s&&eS(e),e.__iterate(function(p,_){return i(p,t?_:s?f.size-++a:a++,f)},!s)},r.__iterator=function(i,s){var f=0;s&&eS(e);var a=e.__iterator(od,!s);return new Sa(function(){var p=a.next();if(p.done)return p;var _=p.value;return ko(i,t?_[0]:s?n.size-++f:f++,_[1],p)})},r}function _he(e,t,n,r){var i=mg(e);return r&&(i.has=function(s){var f=e.get(s,aa);return f!==aa&&!!t.call(n,f,s,e)},i.get=function(s,f){var a=e.get(s,aa);return a!==aa&&t.call(n,a,s,e)?a:f}),i.__iterateUncached=function(s,f){var a=this,p=0;return e.__iterate(function(_,S,E){if(t.call(n,_,S,E))return p++,s(_,r?S:p-1,a)},f),p},i.__iteratorUncached=function(s,f){var a=e.__iterator(od,f),p=0;return new Sa(function(){for(;;){var _=a.next();if(_.done)return _;var S=_.value,E=S[0],I=S[1];if(t.call(n,I,E,e))return ko(s,r?E:p++,I,_)}})},i}function I$e(e,t,n){var r=jx().asMutable();return e.__iterate(function(i,s){r.update(t.call(n,i,s,e),0,function(f){return f+1})}),r.asImmutable()}function P$e(e,t,n){var r=yo(e),i=(Jh(e)?ug():jx()).asMutable();e.__iterate(function(f,a){i.update(t.call(n,f,a,e),function(p){return p=p||[],p.push(r?[a,f]:f),p})});var s=c8(e);return i.map(function(f){return ro(e,s(f))}).asImmutable()}function R$e(e,t,n){var r=yo(e),i=[[],[]];e.__iterate(function(f,a){i[t.call(n,f,a,e)?1:0].push(r?[a,f]:f)});var s=c8(e);return i.map(function(f){return ro(e,s(f))})}function u8(e,t,n,r){var i=e.size;if(dO(t,n,i))return e;if(typeof i>"u"&&(t<0||n<0))return u8(e.toSeq().cacheResult(),t,n,r);var s=eT(t,i),f=pO(n,i),a=f-s,p;a===a&&(p=a<0?0:a);var _=mg(e);return _.size=p===0?p:e.size&&p||void 0,!r&&RR(e)&&p>=0&&(_.get=function(S,E){return S=t0(this,S),S>=0&&S<p?e.get(S+s,E):E}),_.__iterateUncached=function(S,E){var I=this;if(p===0)return 0;if(E)return this.cacheResult().__iterate(S,E);var z=0,F=!0,U=0;return e.__iterate(function(k,V){if(!(F&&(F=z++<s)))return U++,S(k,r?V:U-1,I)!==!1&&U!==p}),U},_.__iteratorUncached=function(S,E){if(p!==0&&E)return this.cacheResult().__iterator(S,E);if(p===0)return new Sa(vc);var I=e.__iterator(S,E),z=0,F=0;return new Sa(function(){for(;z++<s;)I.next();if(++F>p)return vc();var U=I.next();return r||S===Ep||U.done?U:S===gO?ko(S,F-1,void 0,U):ko(S,F-1,U.value[1],U)})},_}function k$e(e,t,n){var r=mg(e);return r.__iterateUncached=function(i,s){var f=this;if(s)return this.cacheResult().__iterate(i,s);var a=0;return e.__iterate(function(p,_,S){return t.call(n,p,_,S)&&++a&&i(p,_,f)}),a},r.__iteratorUncached=function(i,s){var f=this;if(s)return this.cacheResult().__iterator(i,s);var a=e.__iterator(od,s),p=!0;return new Sa(function(){if(!p)return vc();var _=a.next();if(_.done)return _;var S=_.value,E=S[0],I=S[1];return t.call(n,I,E,f)?i===od?_:ko(i,E,I,_):(p=!1,vc())})},r}function vhe(e,t,n,r){var i=mg(e);return i.__iterateUncached=function(s,f){var a=this;if(f)return this.cacheResult().__iterate(s,f);var p=!0,_=0;return e.__iterate(function(S,E,I){if(!(p&&(p=t.call(n,S,E,I))))return _++,s(S,r?E:_-1,a)}),_},i.__iteratorUncached=function(s,f){var a=this;if(f)return this.cacheResult().__iterator(s,f);var p=e.__iterator(od,f),_=!0,S=0;return new Sa(function(){var E,I,z;do{if(E=p.next(),E.done)return r||s===Ep?E:s===gO?ko(s,S++,void 0,E):ko(s,S++,E.value[1],E);var F=E.value;I=F[0],z=F[1],_&&(_=t.call(n,z,I,a))}while(_);return s===od?E:ko(s,I,z,E)})},i}function L$e(e,t){var n=yo(e),r=[e].concat(t).map(function(f){return _c(f)?n&&(f=fd(f)):f=n?a8(f):che(Array.isArray(f)?f:[f]),f}).filter(function(f){return f.size!==0});if(r.length===0)return e;if(r.length===1){var i=r[0];if(i===e||n&&yo(i)||Iu(e)&&Iu(i))return i}var s=new bx(r);return n?s=s.toKeyedSeq():Iu(e)||(s=s.toSetSeq()),s=s.flatten(!0),s.size=r.reduce(function(f,a){if(f!==void 0){var p=a.size;if(p!==void 0)return f+p}},0),s}function bhe(e,t,n){var r=mg(e);return r.__iterateUncached=function(i,s){if(s)return this.cacheResult().__iterate(i,s);var f=0,a=!1;function p(_,S){_.__iterate(function(E,I){return(!t||S<t)&&_c(E)?p(E,S+1):(f++,i(E,n?I:f-1,r)===!1&&(a=!0)),!a},s)}return p(e,0),f},r.__iteratorUncached=function(i,s){if(s)return this.cacheResult().__iterator(i,s);var f=e.__iterator(i,s),a=[],p=0;return new Sa(function(){for(;f;){var _=f.next();if(_.done!==!1){f=a.pop();continue}var S=_.value;if(i===od&&(S=S[1]),(!t||a.length<t)&&_c(S))a.push(f),f=S.__iterator(i,s);else return n?_:ko(i,p++,S,_)}return vc()})},r}function z$e(e,t,n){var r=c8(e);return e.toSeq().map(function(i,s){return r(t.call(n,i,s,e))}).flatten(!0)}function F$e(e,t){var n=mg(e);return n.size=e.size&&e.size*2-1,n.__iterateUncached=function(r,i){var s=this,f=0;return e.__iterate(function(a){return(!f||r(t,f++,s)!==!1)&&r(a,f++,s)!==!1},i),f},n.__iteratorUncached=function(r,i){var s=e.__iterator(Ep,i),f=0,a;return new Sa(function(){return(!a||f%2)&&(a=s.next(),a.done)?a:f%2?ko(r,f++,t):ko(r,f++,a.value,a)})},n}function tS(e,t,n){t||(t=xhe);var r=yo(e),i=0,s=e.toSeq().map(function(f,a){return[a,f,i++,n?n(f,a,e):f]}).valueSeq().toArray();return s.sort(function(f,a){return t(f[3],a[3])||f[2]-a[2]}).forEach(r?function(f,a){s[a].length=2}:function(f,a){s[a]=f[1]}),r?u0(s):Iu(e)?dd(s):iT(s)}function wM(e,t,n){if(t||(t=xhe),n){var r=e.toSeq().map(function(i,s){return[i,n(i,s,e)]}).reduce(function(i,s){return pZ(t,i[1],s[1])?s:i});return r&&r[0]}return e.reduce(function(i,s){return pZ(t,i,s)?s:i})}function pZ(e,t,n){var r=e(n,t);return r===0&&n!==t&&(n==null||n!==n)||r>0}function SM(e,t,n,r){var i=mg(e),s=new bx(n).map(function(f){return f.size});return i.size=r?s.max():s.min(),i.__iterate=function(f,a){for(var p=this.__iterator(Ep,a),_,S=0;!(_=p.next()).done&&f(_.value,S++,this)!==!1;);return S},i.__iteratorUncached=function(f,a){var p=n.map(function(E){return E=rs(E),Qj(a?E.reverse():E)}),_=0,S=!1;return new Sa(function(){var E;return S||(E=p.map(function(I){return I.next()}),S=r?E.every(function(I){return I.done}):E.some(function(I){return I.done})),S?vc():ko(f,_++,t.apply(null,E.map(function(I){return I.value})))})},i}function ro(e,t){return e===t?e:RR(e)?t:e.constructor(t)}function mZ(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function c8(e){return yo(e)?fd:Iu(e)?Fx:tT}function mg(e){return Object.create((yo(e)?u0:Iu(e)?dd:iT).prototype)}function f8(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):bc.prototype.cacheResult.call(this)}function xhe(e,t){return e===void 0&&t===void 0?0:e===void 0?1:t===void 0?-1:e>t?1:e<t?-1:0}function $m(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),i=0;i<n;i++)r[i]=e[i+t];return r}function h8(e,t){if(!e)throw new Error(t)}function Wf(e){h8(e!==1/0,"Cannot perform this action with an infinite size.")}function whe(e){if(n8(e)&&typeof e!="string")return e;if(Jh(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}var N$e=Object.prototype.toString;function d8(e){if(!e||typeof e!="object"||N$e.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t,r=Object.getPrototypeOf(t);r!==null;)n=r,r=Object.getPrototypeOf(n);return n===t}function n0(e){return typeof e=="object"&&(hd(e)||Array.isArray(e)||d8(e))}function X2(e){try{return typeof e=="string"?JSON.stringify(e):String(e)}catch{return JSON.stringify(e)}}function She(e,t){return hd(e)?e.has(t):n0(e)&&rT.call(e,t)}function p8(e,t,n){return hd(e)?e.get(t,n):She(e,t)?typeof e.get=="function"?e.get(t):e[t]:n}function cI(e){if(Array.isArray(e))return $m(e);var t={};for(var n in e)rT.call(e,n)&&(t[n]=e[n]);return t}function The(e,t){if(!n0(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(hd(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!rT.call(e,t))return e;var n=cI(e);return Array.isArray(n)?n.splice(t,1):delete n[t],n}function Ehe(e,t,n){if(!n0(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(hd(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,n)}if(rT.call(e,t)&&n===e[t])return e;var r=cI(e);return r[t]=n,r}function Bx(e,t,n,r){r||(r=n,n=void 0);var i=Ahe(hd(e),e,whe(t),0,n,r);return i===aa?n:i}function Ahe(e,t,n,r,i,s){var f=t===aa;if(r===n.length){var a=f?i:t,p=s(a);return p===a?t:p}if(!f&&!n0(t))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,r).map(X2)+"]: "+t);var _=n[r],S=f?aa:p8(t,_,aa),E=Ahe(S===aa?e:hd(S),S,n,r+1,i,s);return E===S?t:E===aa?The(t,_):Ehe(f?e?pp():{}:t,_,E)}function Ohe(e,t,n){return Bx(e,t,aa,function(){return n})}function m8(e,t){return Ohe(this,e,t)}function Che(e,t){return Bx(e,t,function(){return aa})}function g8(e){return Che(this,e)}function y8(e,t,n,r){return Bx(e,[t],n,r)}function _8(e,t,n){return arguments.length===1?e(this):y8(this,e,t,n)}function v8(e,t,n){return Bx(this,e,t,n)}function Mhe(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Ihe(this,e)}function Dhe(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(typeof e!="function")throw new TypeError("Invalid merger function: "+e);return Ihe(this,t,e)}function Ihe(e,t,n){for(var r=[],i=0;i<t.length;i++){var s=fd(t[i]);s.size!==0&&r.push(s)}return r.length===0?e:e.toSeq().size===0&&!e.__ownerID&&r.length===1?e.constructor(r[0]):e.withMutations(function(f){for(var a=n?function(_,S){y8(f,S,aa,function(E){return E===aa?_:n(E,_,S)})}:function(_,S){f.set(S,_)},p=0;p<r.length;p++)r[p].forEach(a)})}function B$e(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return _O(e,t)}function j$e(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return _O(t,n,e)}function U$e(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return yO(e,t)}function $$e(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return yO(t,n,e)}function yO(e,t,n){return _O(e,t,V$e(n))}function _O(e,t,n){if(!n0(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(hd(e))return typeof n=="function"&&e.mergeWith?e.mergeWith.apply(e,[n].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var r=Array.isArray(e),i=e,s=r?Fx:fd,f=r?function(p){i===e&&(i=cI(i)),i.push(p)}:function(p,_){var S=rT.call(i,_),E=S&&n?n(i[_],p,_):p;(!S||E!==i[_])&&(i===e&&(i=cI(i)),i[_]=E)},a=0;a<t.length;a++)s(t[a]).forEach(f);return i}function V$e(e){function t(n,r,i){return n0(n)&&n0(r)&&q$e(n,r)?_O(n,[r],t):e?e(n,r,i):r}return t}function q$e(e,t){var n=bc(e),r=bc(t);return Iu(n)===Iu(r)&&yo(n)===yo(r)}function Phe(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return yO(this,e)}function Rhe(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return yO(this,t,e)}function b8(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Bx(this,e,pp(),function(r){return _O(r,t)})}function x8(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Bx(this,e,pp(),function(r){return yO(r,t)})}function vO(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function bO(){return this.__ownerID?this:this.__ensureOwner(new e8)}function xO(){return this.__ensureOwner()}function w8(){return this.__altered}var jx=(function(e){function t(n){return n==null?pp():zR(n)&&!Jh(n)?n:pp().withMutations(function(r){var i=e(n);Wf(i.size),i.forEach(function(s,f){return r.set(f,s)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return pp().withMutations(function(s){for(var f=0;f<r.length;f+=2){if(f+1>=r.length)throw new Error("Missing value for key: "+r[f]);s.set(r[f],r[f+1])}})},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(r,i){return this._root?this._root.get(0,void 0,r,i):i},t.prototype.set=function(r,i){return _Z(this,r,i)},t.prototype.remove=function(r){return _Z(this,r,aa)},t.prototype.deleteAll=function(r){var i=rs(r);return i.size===0?this:this.withMutations(function(s){i.forEach(function(f){return s.remove(f)})})},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):pp()},t.prototype.sort=function(r){return ug(tS(this,r))},t.prototype.sortBy=function(r,i){return ug(tS(this,i,r))},t.prototype.map=function(r,i){var s=this;return this.withMutations(function(f){f.forEach(function(a,p){f.set(p,r.call(i,a,p,s))})})},t.prototype.__iterator=function(r,i){return new H$e(this,r,i)},t.prototype.__iterate=function(r,i){var s=this,f=0;return this._root&&this._root.iterate(function(a){return f++,r(a[1],a[0],s)},i),f},t.prototype.__ensureOwner=function(r){return r===this.__ownerID?this:r?S8(this.size,this._root,r,this.__hash):this.size===0?pp():(this.__ownerID=r,this.__altered=!1,this)},t})(fd);jx.isMap=zR;var zo=jx.prototype;zo[fhe]=!0;zo[hO]=zo.remove;zo.removeAll=zo.deleteAll;zo.setIn=m8;zo.removeIn=zo.deleteIn=g8;zo.update=_8;zo.updateIn=v8;zo.merge=zo.concat=Mhe;zo.mergeWith=Dhe;zo.mergeDeep=Phe;zo.mergeDeepWith=Rhe;zo.mergeIn=b8;zo.mergeDeepIn=x8;zo.withMutations=vO;zo.wasAltered=w8;zo.asImmutable=xO;zo["@@transducer/init"]=zo.asMutable=bO;zo["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])};zo["@@transducer/result"]=function(e){return e.asImmutable()};var Z2=function(t,n){this.ownerID=t,this.entries=n};Z2.prototype.get=function(t,n,r,i){for(var s=this.entries,f=0,a=s.length;f<a;f++)if(Fl(r,s[f][0]))return s[f][1];return i};Z2.prototype.update=function(t,n,r,i,s,f,a){for(var p=s===aa,_=this.entries,S=0,E=_.length;S<E&&!Fl(i,_[S][0]);S++);var I=S<E;if(I?_[S][1]===s:p)return this;if(Zh(a),(p||!I)&&Zh(f),!(p&&_.length===1)){if(!I&&!p&&_.length>=K$e)return G$e(t,_,i,s);var z=t&&t===this.ownerID,F=z?_:$m(_);return I?p?S===E-1?F.pop():F[S]=F.pop():F[S]=[i,s]:F.push([i,s]),z?(this.entries=F,this):new Z2(t,F)}};var nS=function(t,n,r){this.ownerID=t,this.bitmap=n,this.nodes=r};nS.prototype.get=function(t,n,r,i){n===void 0&&(n=Zc(r));var s=1<<((t===0?n:n>>>t)&dc),f=this.bitmap;return(f&s)===0?i:this.nodes[khe(f&s-1)].get(t+Io,n,r,i)};nS.prototype.update=function(t,n,r,i,s,f,a){r===void 0&&(r=Zc(i));var p=(n===0?r:r>>>n)&dc,_=1<<p,S=this.bitmap,E=(S&_)!==0;if(!E&&s===aa)return this;var I=khe(S&_-1),z=this.nodes,F=E?z[I]:void 0,U=T8(F,t,n+Io,r,i,s,f,a);if(U===F)return this;if(!E&&U&&z.length>=Q$e)return W$e(t,z,S,p,U);if(E&&!U&&z.length===2&&vZ(z[I^1]))return z[I^1];if(E&&U&&z.length===1&&vZ(U))return U;var k=t&&t===this.ownerID,V=E?U?S:S^_:S|_,K=E?U?Lhe(z,I,U,k):Z$e(z,I,k):X$e(z,I,U,k);return k?(this.bitmap=V,this.nodes=K,this):new nS(t,V,K)};var K2=function(t,n,r){this.ownerID=t,this.count=n,this.nodes=r};K2.prototype.get=function(t,n,r,i){n===void 0&&(n=Zc(r));var s=(t===0?n:n>>>t)&dc,f=this.nodes[s];return f?f.get(t+Io,n,r,i):i};K2.prototype.update=function(t,n,r,i,s,f,a){r===void 0&&(r=Zc(i));var p=(n===0?r:r>>>n)&dc,_=s===aa,S=this.nodes,E=S[p];if(_&&!E)return this;var I=T8(E,t,n+Io,r,i,s,f,a);if(I===E)return this;var z=this.count;if(!E)z++;else if(!I&&(z--,z<J$e))return Y$e(t,S,z,p);var F=t&&t===this.ownerID,U=Lhe(S,p,I,F);return F?(this.count=z,this.nodes=U,this):new K2(t,z,U)};var rS=function(t,n,r){this.ownerID=t,this.keyHash=n,this.entries=r};rS.prototype.get=function(t,n,r,i){for(var s=this.entries,f=0,a=s.length;f<a;f++)if(Fl(r,s[f][0]))return s[f][1];return i};rS.prototype.update=function(t,n,r,i,s,f,a){r===void 0&&(r=Zc(i));var p=s===aa;if(r!==this.keyHash)return p?this:(Zh(a),Zh(f),E8(this,t,n,r,[i,s]));for(var _=this.entries,S=0,E=_.length;S<E&&!Fl(i,_[S][0]);S++);var I=S<E;if(I?_[S][1]===s:p)return this;if(Zh(a),(p||!I)&&Zh(f),p&&E===2)return new r_(t,this.keyHash,_[S^1]);var z=t&&t===this.ownerID,F=z?_:$m(_);return I?p?S===E-1?F.pop():F[S]=F.pop():F[S]=[i,s]:F.push([i,s]),z?(this.entries=F,this):new rS(t,this.keyHash,F)};var r_=function(t,n,r){this.ownerID=t,this.keyHash=n,this.entry=r};r_.prototype.get=function(t,n,r,i){return Fl(r,this.entry[0])?this.entry[1]:i};r_.prototype.update=function(t,n,r,i,s,f,a){var p=s===aa,_=Fl(i,this.entry[0]);if(_?s===this.entry[1]:p)return this;if(Zh(a),p){Zh(f);return}return _?t&&t===this.ownerID?(this.entry[1]=s,this):new r_(t,this.keyHash,[i,s]):(Zh(f),E8(this,t,n,Zc(i),[i,s]))};Z2.prototype.iterate=rS.prototype.iterate=function(e,t){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(e(n[t?i-r:r])===!1)return!1};nS.prototype.iterate=K2.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var s=n[t?i-r:r];if(s&&s.iterate(e,t)===!1)return!1}};r_.prototype.iterate=function(e,t){return e(this.entry)};var H$e=(function(e){function t(n,r,i){this._type=r,this._reverse=i,this._stack=n._root&&gZ(n._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var r=this._type,i=this._stack;i;){var s=i.node,f=i.index++,a=void 0;if(s.entry){if(f===0)return wz(r,s.entry)}else if(s.entries){if(a=s.entries.length-1,f<=a)return wz(r,s.entries[this._reverse?a-f:f])}else if(a=s.nodes.length-1,f<=a){var p=s.nodes[this._reverse?a-f:f];if(p){if(p.entry)return wz(r,p.entry);i=this._stack=gZ(p,i)}continue}i=this._stack=this._stack.__prev}return vc()},t})(Sa);function wz(e,t){return ko(e,t[0],t[1])}function gZ(e,t){return{node:e,index:0,__prev:t}}function S8(e,t,n,r){var i=Object.create(zo);return i.size=e,i._root=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}var yZ;function pp(){return yZ||(yZ=S8(0))}function _Z(e,t,n){var r,i;if(e._root){var s=Zj(),f=Zj();if(r=T8(e._root,e.__ownerID,0,void 0,t,n,s,f),!f.value)return e;i=e.size+(s.value?n===aa?-1:1:0)}else{if(n===aa)return e;i=1,r=new Z2(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=i,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?S8(i,r):pp()}function T8(e,t,n,r,i,s,f,a){return e?e.update(t,n,r,i,s,f,a):s===aa?e:(Zh(a),Zh(f),new r_(t,r,[i,s]))}function vZ(e){return e.constructor===r_||e.constructor===rS}function E8(e,t,n,r,i){if(e.keyHash===r)return new rS(t,r,[e.entry,i]);var s=(n===0?e.keyHash:e.keyHash>>>n)&dc,f=(n===0?r:r>>>n)&dc,a,p=s===f?[E8(e,t,n+Io,r,i)]:(a=new r_(t,r,i),s<f?[e,a]:[a,e]);return new nS(t,1<<s|1<<f,p)}function G$e(e,t,n,r){e||(e=new e8);for(var i=new r_(e,Zc(n),[n,r]),s=0;s<t.length;s++){var f=t[s];i=i.update(e,0,void 0,f[0],f[1])}return i}function Y$e(e,t,n,r){for(var i=0,s=0,f=new Array(n),a=0,p=1,_=t.length;a<_;a++,p<<=1){var S=t[a];S!==void 0&&a!==r&&(i|=p,f[s++]=S)}return new nS(e,i,f)}function W$e(e,t,n,r,i){for(var s=0,f=new Array(Xh),a=0;n!==0;a++,n>>>=1)f[a]=n&1?t[s++]:void 0;return f[r]=i,new K2(e,s+1,f)}function khe(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Lhe(e,t,n,r){var i=r?e:$m(e);return i[t]=n,i}function X$e(e,t,n,r){var i=e.length+1;if(r&&t+1===i)return e[t]=n,e;for(var s=new Array(i),f=0,a=0;a<i;a++)a===t?(s[a]=n,f=-1):s[a]=e[a+f];return s}function Z$e(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var i=new Array(r),s=0,f=0;f<r;f++)f===t&&(s=1),i[f]=e[f+s];return i}var K$e=Xh/4,Q$e=Xh/2,J$e=Xh/4,zhe="@@__IMMUTABLE_LIST__@@";function A8(e){return!!(e&&e[zhe])}var wO=(function(e){function t(n){var r=pD();if(n==null)return r;if(A8(n))return n;var i=e(n),s=i.size;return s===0?r:(Wf(s),s>0&&s<Xh?Q2(0,s,Io,null,new Hv(i.toArray())):r.withMutations(function(f){f.setSize(s),i.forEach(function(a,p){return f.set(p,a)})}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(r,i){if(r=t0(this,r),r>=0&&r<this.size){r+=this._origin;var s=Fhe(this,r);return s&&s.array[r&dc]}return i},t.prototype.set=function(r,i){return eVe(this,r,i)},t.prototype.remove=function(r){return this.has(r)?r===0?this.shift():r===this.size-1?this.pop():this.splice(r,1):this},t.prototype.insert=function(r,i){return this.splice(r,0,i)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Io,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):pD()},t.prototype.push=function(){var r=arguments,i=this.size;return this.withMutations(function(s){kv(s,0,i+r.length);for(var f=0;f<r.length;f++)s.set(i+f,r[f])})},t.prototype.pop=function(){return kv(this,0,-1)},t.prototype.unshift=function(){var r=arguments;return this.withMutations(function(i){kv(i,-r.length);for(var s=0;s<r.length;s++)i.set(s,r[s])})},t.prototype.shift=function(){return kv(this,1)},t.prototype.concat=function(){for(var r=arguments,i=[],s=0;s<arguments.length;s++){var f=r[s],a=e(typeof f!="string"&&t8(f)?f:[f]);a.size!==0&&i.push(a)}return i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(p){i.forEach(function(_){return _.forEach(function(S){return p.push(S)})})})},t.prototype.setSize=function(r){return kv(this,0,r)},t.prototype.map=function(r,i){var s=this;return this.withMutations(function(f){for(var a=0;a<s.size;a++)f.set(a,r.call(i,f.get(a),a,s))})},t.prototype.slice=function(r,i){var s=this.size;return dO(r,i,s)?this:kv(this,eT(r,s),pO(i,s))},t.prototype.__iterator=function(r,i){var s=i?this.size:0,f=bZ(this,i);return new Sa(function(){var a=f();return a===b2?vc():ko(r,i?--s:s++,a)})},t.prototype.__iterate=function(r,i){for(var s=i?this.size:0,f=bZ(this,i),a;(a=f())!==b2&&r(a,i?--s:s++,this)!==!1;);return s},t.prototype.__ensureOwner=function(r){return r===this.__ownerID?this:r?Q2(this._origin,this._capacity,this._level,this._root,this._tail,r,this.__hash):this.size===0?pD():(this.__ownerID=r,this.__altered=!1,this)},t})(Fx);wO.isList=A8;var Js=wO.prototype;Js[zhe]=!0;Js[hO]=Js.remove;Js.merge=Js.concat;Js.setIn=m8;Js.deleteIn=Js.removeIn=g8;Js.update=_8;Js.updateIn=v8;Js.mergeIn=b8;Js.mergeDeepIn=x8;Js.withMutations=vO;Js.wasAltered=w8;Js.asImmutable=xO;Js["@@transducer/init"]=Js.asMutable=bO;Js["@@transducer/step"]=function(e,t){return e.push(t)};Js["@@transducer/result"]=function(e){return e.asImmutable()};var Hv=function(t,n){this.array=t,this.ownerID=n};Hv.prototype.removeBefore=function(t,n,r){if(r===n?1<<n:this.array.length===0)return this;var i=r>>>n&dc;if(i>=this.array.length)return new Hv([],t);var s=i===0,f;if(n>0){var a=this.array[i];if(f=a&&a.removeBefore(t,n-Io,r),f===a&&s)return this}if(s&&!f)return this;var p=iS(this,t);if(!s)for(var _=0;_<i;_++)p.array[_]=void 0;return f&&(p.array[i]=f),p};Hv.prototype.removeAfter=function(t,n,r){if(r===(n?1<<n:0)||this.array.length===0)return this;var i=r-1>>>n&dc;if(i>=this.array.length)return this;var s;if(n>0){var f=this.array[i];if(s=f&&f.removeAfter(t,n-Io,r),s===f&&i===this.array.length-1)return this}var a=iS(this,t);return a.array.splice(i+1),s&&(a.array[i]=s),a};var b2={};function bZ(e,t){var n=e._origin,r=e._capacity,i=J2(r),s=e._tail;return f(e._root,e._level,0);function f(_,S,E){return S===0?a(_,E):p(_,S,E)}function a(_,S){var E=S===i?s&&s.array:_&&_.array,I=S>n?0:n-S,z=r-S;return z>Xh&&(z=Xh),function(){if(I===z)return b2;var F=t?--z:I++;return E&&E[F]}}function p(_,S,E){var I,z=_&&_.array,F=E>n?0:n-E>>S,U=(r-E>>S)+1;return U>Xh&&(U=Xh),function(){for(;;){if(I){var k=I();if(k!==b2)return k;I=null}if(F===U)return b2;var V=t?--U:F++;I=f(z&&z[V],S-Io,E+(V<<S))}}}}function Q2(e,t,n,r,i,s,f){var a=Object.create(Js);return a.size=t-e,a._origin=e,a._capacity=t,a._level=n,a._root=r,a._tail=i,a.__ownerID=s,a.__hash=f,a.__altered=!1,a}var xZ;function pD(){return xZ||(xZ=Q2(0,0,Io))}function eVe(e,t,n){if(t=t0(e,t),t!==t)return e;if(t>=e.size||t<0)return e.withMutations(function(f){t<0?kv(f,t).set(0,n):kv(f,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,i=e._root,s=Zj();return t>=J2(e._capacity)?r=r6(r,e.__ownerID,0,t,n,s):i=r6(i,e.__ownerID,e._level,t,n,s),s.value?e.__ownerID?(e._root=i,e._tail=r,e.__hash=void 0,e.__altered=!0,e):Q2(e._origin,e._capacity,e._level,i,r):e}function r6(e,t,n,r,i,s){var f=r>>>n&dc,a=e&&f<e.array.length;if(!a&&i===void 0)return e;var p;if(n>0){var _=e&&e.array[f],S=r6(_,t,n-Io,r,i,s);return S===_?e:(p=iS(e,t),p.array[f]=S,p)}return a&&e.array[f]===i?e:(s&&Zh(s),p=iS(e,t),i===void 0&&f===p.array.length-1?p.array.pop():p.array[f]=i,p)}function iS(e,t){return t&&e&&t===e.ownerID?e:new Hv(e?e.array.slice():[],t)}function Fhe(e,t){if(t>=J2(e._capacity))return e._tail;if(t<1<<e._level+Io){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&dc],r-=Io;return n}}function kv(e,t,n){t!==void 0&&(t|=0),n!==void 0&&(n|=0);var r=e.__ownerID||new e8,i=e._origin,s=e._capacity,f=i+t,a=n===void 0?s:n<0?s+n:i+n;if(f===i&&a===s)return e;if(f>=a)return e.clear();for(var p=e._level,_=e._root,S=0;f+S<0;)_=new Hv(_&&_.array.length?[void 0,_]:[],r),p+=Io,S+=1<<p;S&&(f+=S,i+=S,a+=S,s+=S);for(var E=J2(s),I=J2(a);I>=1<<p+Io;)_=new Hv(_&&_.array.length?[_]:[],r),p+=Io;var z=e._tail,F=I<E?Fhe(e,a-1):I>E?new Hv([],r):z;if(z&&I>E&&f<s&&z.array.length){_=iS(_,r);for(var U=_,k=p;k>Io;k-=Io){var V=E>>>k&dc;U=U.array[V]=iS(U.array[V],r)}U.array[E>>>Io&dc]=z}if(a<s&&(F=F&&F.removeAfter(r,0,a)),f>=I)f-=I,a-=I,p=Io,_=null,F=F&&F.removeBefore(r,0,f);else if(f>i||I<E){for(S=0;_;){var K=f>>>p&dc;if(K!==I>>>p&dc)break;K&&(S+=(1<<p)*K),p-=Io,_=_.array[K]}_&&f>i&&(_=_.removeBefore(r,p,f-S)),_&&I<E&&(_=_.removeAfter(r,p,I-S)),S&&(f-=S,a-=S)}return e.__ownerID?(e.size=a-f,e._origin=f,e._capacity=a,e._level=p,e._root=_,e._tail=F,e.__hash=void 0,e.__altered=!0,e):Q2(f,a,p,_,F)}function J2(e){return e<Xh?0:e-1>>>Io<<Io}var ug=(function(e){function t(n){return n==null?e2():s8(n)?n:e2().withMutations(function(r){var i=fd(n);Wf(i.size),i.forEach(function(s,f){return r.set(f,s)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(r,i){var s=this._map.get(r);return s!==void 0?this._list.get(s)[1]:i},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):e2()},t.prototype.set=function(r,i){return SZ(this,r,i)},t.prototype.remove=function(r){return SZ(this,r,aa)},t.prototype.__iterate=function(r,i){var s=this;return this._list.__iterate(function(f){return f&&r(f[1],f[0],s)},i)},t.prototype.__iterator=function(r,i){return this._list.fromEntrySeq().__iterator(r,i)},t.prototype.__ensureOwner=function(r){if(r===this.__ownerID)return this;var i=this._map.__ensureOwner(r),s=this._list.__ensureOwner(r);return r?O8(i,s,r,this.__hash):this.size===0?e2():(this.__ownerID=r,this.__altered=!1,this._map=i,this._list=s,this)},t})(jx);ug.isOrderedMap=s8;ug.prototype[nT]=!0;ug.prototype[hO]=ug.prototype.remove;function O8(e,t,n,r){var i=Object.create(ug.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}var wZ;function e2(){return wZ||(wZ=O8(pp(),pD()))}function SZ(e,t,n){var r=e._map,i=e._list,s=r.get(t),f=s!==void 0,a,p;if(n===aa){if(!f)return e;i.size>=Xh&&i.size>=r.size*2?(p=i.filter(function(_,S){return _!==void 0&&s!==S}),a=p.toKeyedSeq().map(function(_){return _[0]}).flip().toMap(),e.__ownerID&&(a.__ownerID=p.__ownerID=e.__ownerID)):(a=r.remove(t),p=s===i.size-1?i.pop():i.set(s,void 0))}else if(f){if(n===i.get(s)[1])return e;a=r,p=i.set(s,[t,n])}else a=r.set(t,i.size),p=i.set(i.size,[t,n]);return e.__ownerID?(e.size=a.size,e._map=a,e._list=p,e.__hash=void 0,e.__altered=!0,e):O8(a,p)}var Nhe="@@__IMMUTABLE_STACK__@@";function fI(e){return!!(e&&e[Nhe])}var BR=(function(e){function t(n){return n==null?TM():fI(n)?n:TM().pushAll(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(r,i){var s=this._head;for(r=t0(this,r);s&&r--;)s=s.next;return s?s.value:i},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var r=arguments;if(arguments.length===0)return this;for(var i=this.size+arguments.length,s=this._head,f=arguments.length-1;f>=0;f--)s={value:r[f],next:s};return this.__ownerID?(this.size=i,this._head=s,this.__hash=void 0,this.__altered=!0,this):t2(i,s)},t.prototype.pushAll=function(r){if(r=e(r),r.size===0)return this;if(this.size===0&&fI(r))return r;Wf(r.size);var i=this.size,s=this._head;return r.__iterate(function(f){i++,s={value:f,next:s}},!0),this.__ownerID?(this.size=i,this._head=s,this.__hash=void 0,this.__altered=!0,this):t2(i,s)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):TM()},t.prototype.slice=function(r,i){if(dO(r,i,this.size))return this;var s=eT(r,this.size),f=pO(i,this.size);if(f!==this.size)return e.prototype.slice.call(this,r,i);for(var a=this.size-s,p=this._head;s--;)p=p.next;return this.__ownerID?(this.size=a,this._head=p,this.__hash=void 0,this.__altered=!0,this):t2(a,p)},t.prototype.__ensureOwner=function(r){return r===this.__ownerID?this:r?t2(this.size,this._head,r,this.__hash):this.size===0?TM():(this.__ownerID=r,this.__altered=!1,this)},t.prototype.__iterate=function(r,i){var s=this;if(i)return new bx(this.toArray()).__iterate(function(p,_){return r(p,_,s)},i);for(var f=0,a=this._head;a&&r(a.value,f++,this)!==!1;)a=a.next;return f},t.prototype.__iterator=function(r,i){if(i)return new bx(this.toArray()).__iterator(r,i);var s=0,f=this._head;return new Sa(function(){if(f){var a=f.value;return f=f.next,ko(r,s++,a)}return vc()})},t})(Fx);BR.isStack=fI;var xc=BR.prototype;xc[Nhe]=!0;xc.shift=xc.pop;xc.unshift=xc.push;xc.unshiftAll=xc.pushAll;xc.withMutations=vO;xc.wasAltered=w8;xc.asImmutable=xO;xc["@@transducer/init"]=xc.asMutable=bO;xc["@@transducer/step"]=function(e,t){return e.unshift(t)};xc["@@transducer/result"]=function(e){return e.asImmutable()};function t2(e,t,n,r){var i=Object.create(xc);return i.size=e,i._head=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}var TZ;function TM(){return TZ||(TZ=t2(0))}var Bhe="@@__IMMUTABLE_SET__@@";function jR(e){return!!(e&&e[Bhe])}function C8(e){return jR(e)&&Jh(e)}function M8(e,t){if(e===t)return!0;if(!_c(t)||e.size!==void 0&&t.size!==void 0&&e.size!==t.size||e.__hash!==void 0&&t.__hash!==void 0&&e.__hash!==t.__hash||yo(e)!==yo(t)||Iu(e)!==Iu(t)||Jh(e)!==Jh(t))return!1;if(e.size===0&&t.size===0)return!0;var n=!mO(e);if(Jh(e)){var r=e.entries();return t.every(function(p,_){var S=r.next().value;return S&&Fl(S[1],p)&&(n||Fl(S[0],_))})&&r.next().done}var i=!1;if(e.size===void 0)if(t.size===void 0)typeof e.cacheResult=="function"&&e.cacheResult();else{i=!0;var s=e;e=t,t=s}var f=!0,a=t.__iterate(function(p,_){if(n?!e.has(p):i?!Fl(p,e.get(_,aa)):!Fl(e.get(_,aa),p))return f=!1,!1});return f&&e.size===a}function Ux(e,t){var n=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function hI(e){if(!e||typeof e!="object")return e;if(!_c(e)){if(!n0(e))return e;e=bc(e)}if(yo(e)){var t={};return e.__iterate(function(r,i){t[i]=hI(r)}),t}var n=[];return e.__iterate(function(r){n.push(hI(r))}),n}var SO=(function(e){function t(n){return n==null?n2():jR(n)&&!Jh(n)?n:n2().withMutations(function(r){var i=e(n);Wf(i.size),i.forEach(function(s){return r.add(s)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(r){return this(fd(r).keySeq())},t.intersect=function(r){return r=rs(r).toArray(),r.length?nu.intersect.apply(t(r.pop()),r):n2()},t.union=function(r){return r=rs(r).toArray(),r.length?nu.union.apply(t(r.pop()),r):n2()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(r){return this._map.has(r)},t.prototype.add=function(r){return EM(this,this._map.set(r,r))},t.prototype.remove=function(r){return EM(this,this._map.remove(r))},t.prototype.clear=function(){return EM(this,this._map.clear())},t.prototype.map=function(r,i){var s=this,f=!1,a=EM(this,this._map.mapEntries(function(p){var _=p[1],S=r.call(i,_,_,s);return S!==_&&(f=!0),[S,S]},i));return f?a:this},t.prototype.union=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return r=r.filter(function(s){return s.size!==0}),r.length===0?this:this.size===0&&!this.__ownerID&&r.length===1?this.constructor(r[0]):this.withMutations(function(s){for(var f=0;f<r.length;f++)typeof r[f]=="string"?s.add(r[f]):e(r[f]).forEach(function(a){return s.add(a)})})},t.prototype.intersect=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];if(r.length===0)return this;r=r.map(function(f){return e(f)});var s=[];return this.forEach(function(f){r.every(function(a){return a.includes(f)})||s.push(f)}),this.withMutations(function(f){s.forEach(function(a){f.remove(a)})})},t.prototype.subtract=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];if(r.length===0)return this;r=r.map(function(f){return e(f)});var s=[];return this.forEach(function(f){r.some(function(a){return a.includes(f)})&&s.push(f)}),this.withMutations(function(f){s.forEach(function(a){f.remove(a)})})},t.prototype.sort=function(r){return oS(tS(this,r))},t.prototype.sortBy=function(r,i){return oS(tS(this,i,r))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(r,i){var s=this;return this._map.__iterate(function(f){return r(f,f,s)},i)},t.prototype.__iterator=function(r,i){return this._map.__iterator(r,i)},t.prototype.__ensureOwner=function(r){if(r===this.__ownerID)return this;var i=this._map.__ensureOwner(r);return r?this.__make(i,r):this.size===0?this.__empty():(this.__ownerID=r,this._map=i,this)},t})(tT);SO.isSet=jR;var nu=SO.prototype;nu[Bhe]=!0;nu[hO]=nu.remove;nu.merge=nu.concat=nu.union;nu.withMutations=vO;nu.asImmutable=xO;nu["@@transducer/init"]=nu.asMutable=bO;nu["@@transducer/step"]=function(e,t){return e.add(t)};nu["@@transducer/result"]=function(e){return e.asImmutable()};nu.__empty=n2;nu.__make=jhe;function EM(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:t.size===0?e.__empty():e.__make(t)}function jhe(e,t){var n=Object.create(nu);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}var EZ;function n2(){return EZ||(EZ=jhe(pp()))}var Uhe=(function(e){function t(n,r,i){if(!(this instanceof t))return new t(n,r,i);if(h8(i!==0,"Cannot step a Range by 0"),n=n||0,r===void 0&&(r=1/0),i=i===void 0?1:Math.abs(i),r<n&&(i=-i),this._start=n,this._end=r,this._step=i,this.size=Math.max(0,Math.ceil((r-n)/i-1)+1),this.size===0){if(Sz)return Sz;Sz=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},t.prototype.get=function(r,i){return this.has(r)?this._start+t0(this,r)*this._step:i},t.prototype.includes=function(r){var i=(r-this._start)/this._step;return i>=0&&i<this.size&&i===Math.floor(i)},t.prototype.slice=function(r,i){return dO(r,i,this.size)?this:(r=eT(r,this.size),i=pO(i,this.size),i<=r?new t(0,0):new t(this.get(r,this._end),this.get(i,this._end),this._step))},t.prototype.indexOf=function(r){var i=r-this._start;if(i%this._step===0){var s=i/this._step;if(s>=0&&s<this.size)return s}return-1},t.prototype.lastIndexOf=function(r){return this.indexOf(r)},t.prototype.__iterate=function(r,i){for(var s=this.size,f=this._step,a=i?this._start+(s-1)*f:this._start,p=0;p!==s&&r(a,i?s-++p:p++,this)!==!1;)a+=i?-f:f;return p},t.prototype.__iterator=function(r,i){var s=this.size,f=this._step,a=i?this._start+(s-1)*f:this._start,p=0;return new Sa(function(){if(p===s)return vc();var _=a;return a+=i?-f:f,ko(r,i?s-++p:p++,_)})},t.prototype.equals=function(r){return r instanceof t?this._start===r._start&&this._end===r._end&&this._step===r._step:M8(this,r)},t})(dd),Sz;function D8(e,t,n){for(var r=whe(t),i=0;i!==r.length;)if(e=p8(e,r[i++],aa),e===aa)return n;return e}function $he(e,t){return D8(this,e,t)}function Vhe(e,t){return D8(e,t,aa)!==aa}function tVe(e){return Vhe(this,e)}function qhe(){Wf(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e}rs.isIterable=_c;rs.isKeyed=yo;rs.isIndexed=Iu;rs.isAssociative=mO;rs.isOrdered=Jh;rs.Iterator=Sa;Ux(rs,{toArray:function(){Wf(this.size);var t=new Array(this.size||0),n=yo(this),r=0;return this.__iterate(function(i,s){t[r++]=n?[s,i]:i}),t},toIndexedSeq:function(){return new dhe(this)},toJS:function(){return hI(this)},toKeyedSeq:function(){return new NR(this,!0)},toMap:function(){return jx(this.toKeyedSeq())},toObject:qhe,toOrderedMap:function(){return ug(this.toKeyedSeq())},toOrderedSet:function(){return oS(yo(this)?this.valueSeq():this)},toSet:function(){return SO(yo(this)?this.valueSeq():this)},toSetSeq:function(){return new phe(this)},toSeq:function(){return Iu(this)?this.toIndexedSeq():yo(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return BR(yo(this)?this.valueSeq():this)},toList:function(){return wO(yo(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,n){return this.size===0?t+n:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+n},concat:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return ro(this,L$e(this,t))},includes:function(t){return this.some(function(n){return Fl(n,t)})},entries:function(){return this.__iterator(od)},every:function(t,n){Wf(this.size);var r=!0;return this.__iterate(function(i,s,f){if(!t.call(n,i,s,f))return r=!1,!1}),r},filter:function(t,n){return ro(this,_he(this,t,n,!0))},partition:function(t,n){return R$e(this,t,n)},find:function(t,n,r){var i=this.findEntry(t,n);return i?i[1]:r},forEach:function(t,n){return Wf(this.size),this.__iterate(n?t.bind(n):t)},join:function(t){Wf(this.size),t=t!==void 0?""+t:",";var n="",r=!0;return this.__iterate(function(i){r?r=!1:n+=t,n+=i!=null?i.toString():""}),n},keys:function(){return this.__iterator(gO)},map:function(t,n){return ro(this,yhe(this,t,n))},reduce:function(t,n,r){return AZ(this,t,n,r,arguments.length<2,!1)},reduceRight:function(t,n,r){return AZ(this,t,n,r,arguments.length<2,!0)},reverse:function(){return ro(this,l8(this,!0))},slice:function(t,n){return ro(this,u8(this,t,n,!0))},some:function(t,n){Wf(this.size);var r=!1;return this.__iterate(function(i,s,f){if(t.call(n,i,s,f))return r=!0,!1}),r},sort:function(t){return ro(this,tS(this,t))},values:function(){return this.__iterator(Ep)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,n){return eS(t?this.toSeq().filter(t,n):this)},countBy:function(t,n){return I$e(this,t,n)},equals:function(t){return M8(this,t)},entrySeq:function(){var t=this;if(t._cache)return new bx(t._cache);var n=t.toSeq().map(rVe).toIndexedSeq();return n.fromEntrySeq=function(){return t.toSeq()},n},filterNot:function(t,n){return this.filter(Tz(t),n)},findEntry:function(t,n,r){var i=r;return this.__iterate(function(s,f,a){if(t.call(n,s,f,a))return i=[f,s],!1}),i},findKey:function(t,n){var r=this.findEntry(t,n);return r&&r[0]},findLast:function(t,n,r){return this.toKeyedSeq().reverse().find(t,n,r)},findLastEntry:function(t,n,r){return this.toKeyedSeq().reverse().findEntry(t,n,r)},findLastKey:function(t,n){return this.toKeyedSeq().reverse().findKey(t,n)},first:function(t){return this.find(the,null,t)},flatMap:function(t,n){return ro(this,z$e(this,t,n))},flatten:function(t){return ro(this,bhe(this,t,!0))},fromEntrySeq:function(){return new mhe(this)},get:function(t,n){return this.find(function(r,i){return Fl(i,t)},void 0,n)},getIn:$he,groupBy:function(t,n){return P$e(this,t,n)},has:function(t){return this.get(t,aa)!==aa},hasIn:tVe,isSubset:function(t){return t=typeof t.includes=="function"?t:rs(t),this.every(function(n){return t.includes(n)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:rs(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(n){return Fl(n,t)})},keySeq:function(){return this.toSeq().map(nVe).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return wM(this,t)},maxBy:function(t,n){return wM(this,n,t)},min:function(t){return wM(this,t?OZ(t):MZ)},minBy:function(t,n){return wM(this,n?OZ(n):MZ,t)},rest:function(){return this.slice(1)},skip:function(t){return t===0?this:this.slice(Math.max(0,t))},skipLast:function(t){return t===0?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,n){return ro(this,vhe(this,t,n,!0))},skipUntil:function(t,n){return this.skipWhile(Tz(t),n)},sortBy:function(t,n){return ro(this,tS(this,n,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,n){return ro(this,k$e(this,t,n))},takeUntil:function(t,n){return this.takeWhile(Tz(t),n)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=iVe(this))}});var ku=rs.prototype;ku[ihe]=!0;ku[kR]=ku.values;ku.toJSON=ku.toArray;ku.__toStringMapper=X2;ku.inspect=ku.toSource=function(){return this.toString()};ku.chain=ku.flatMap;ku.contains=ku.includes;Ux(fd,{flip:function(){return ro(this,ghe(this))},mapEntries:function(t,n){var r=this,i=0;return ro(this,this.toSeq().map(function(s,f){return t.call(n,[f,s],i++,r)}).fromEntrySeq())},mapKeys:function(t,n){var r=this;return ro(this,this.toSeq().flip().map(function(i,s){return t.call(n,i,s,r)}).flip())}});var TO=fd.prototype;TO[ahe]=!0;TO[kR]=ku.entries;TO.toJSON=qhe;TO.__toStringMapper=function(e,t){return X2(t)+": "+X2(e)};Ux(Fx,{toKeyedSeq:function(){return new NR(this,!1)},filter:function(t,n){return ro(this,_he(this,t,n,!1))},findIndex:function(t,n){var r=this.findEntry(t,n);return r?r[0]:-1},indexOf:function(t){var n=this.keyOf(t);return n===void 0?-1:n},lastIndexOf:function(t){var n=this.lastKeyOf(t);return n===void 0?-1:n},reverse:function(){return ro(this,l8(this,!1))},slice:function(t,n){return ro(this,u8(this,t,n,!1))},splice:function(t,n){var r=arguments.length;if(n=Math.max(n||0,0),r===0||r===2&&!n)return this;t=eT(t,t<0?this.count():this.size);var i=this.slice(0,t);return ro(this,r===1?i:i.concat($m(arguments,2),this.slice(t+n)))},findLastIndex:function(t,n){var r=this.findLastEntry(t,n);return r?r[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return ro(this,bhe(this,t,!1))},get:function(t,n){return t=t0(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?n:this.find(function(r,i){return i===t},void 0,n)},has:function(t){return t=t0(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return ro(this,F$e(this,t))},interleave:function(){var t=[this].concat($m(arguments)),n=SM(this.toSeq(),dd.of,t),r=n.flatten(!0);return n.size&&(r.size=n.size*t.length),ro(this,r)},keySeq:function(){return Uhe(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,n){return ro(this,vhe(this,t,n,!1))},zip:function(){var t=[this].concat($m(arguments));return ro(this,SM(this,CZ,t))},zipAll:function(){var t=[this].concat($m(arguments));return ro(this,SM(this,CZ,t,!0))},zipWith:function(t){var n=$m(arguments);return n[0]=this,ro(this,SM(this,t,n))}});var aT=Fx.prototype;aT[ohe]=!0;aT[nT]=!0;Ux(tT,{get:function(t,n){return this.has(t)?t:n},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var aS=tT.prototype;aS.has=ku.includes;aS.contains=aS.includes;aS.keys=aS.values;Ux(u0,TO);Ux(dd,aT);Ux(iT,aS);function AZ(e,t,n,r,i,s){return Wf(e.size),e.__iterate(function(f,a,p){i?(i=!1,n=f):n=t.call(r,n,f,a,p)},s),n}function nVe(e,t){return t}function rVe(e,t){return[t,e]}function Tz(e){return function(){return!e.apply(this,arguments)}}function OZ(e){return function(){return-e.apply(this,arguments)}}function CZ(){return $m(arguments)}function MZ(e,t){return e<t?1:e>t?-1:0}function iVe(e){if(e.size===1/0)return 0;var t=Jh(e),n=yo(e),r=t?1:0,i=e.__iterate(n?t?function(s,f){r=31*r+DZ(Zc(s),Zc(f))|0}:function(s,f){r=r+DZ(Zc(s),Zc(f))|0}:t?function(s){r=31*r+Zc(s)|0}:function(s){r=r+Zc(s)|0});return aVe(i,r)}function aVe(e,t){return t=LE(t,3432918353),t=LE(t<<15|t>>>-15,461845907),t=LE(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=LE(t^t>>>16,2246822507),t=LE(t^t>>>13,3266489909),t=FR(t^t>>>16),t}function DZ(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var oS=(function(e){function t(n){return n==null?i6():C8(n)?n:i6().withMutations(function(r){var i=tT(n);Wf(i.size),i.forEach(function(s){return r.add(s)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(r){return this(fd(r).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t})(SO);oS.isOrderedSet=C8;var $x=oS.prototype;$x[nT]=!0;$x.zip=aT.zip;$x.zipWith=aT.zipWith;$x.zipAll=aT.zipAll;$x.__empty=i6;$x.__make=Hhe;function Hhe(e,t){var n=Object.create($x);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}var IZ;function i6(){return IZ||(IZ=Hhe(e2()))}var oVe={LeftThenRight:-1,RightThenLeft:1};function sVe(e){if(Nx(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(hd(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(e===null||typeof e!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var bl=function(t,n){var r;sVe(t);var i=function(a){var p=this;if(a instanceof i)return a;if(!(this instanceof i))return new i(a);if(!r){r=!0;var _=Object.keys(t),S=s._indices={};s._name=n,s._keys=_,s._defaultValues=t;for(var E=0;E<_.length;E++){var I=_[E];S[I]=E,s[I]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+P8(this)+' with property "'+I+'" since that property name is part of the Record API.'):lVe(s,I)}}return this.__ownerID=void 0,this._values=wO().withMutations(function(z){z.setSize(p._keys.length),fd(a).forEach(function(F,U){z.set(p._indices[U],F===p._defaultValues[U]?void 0:F)})}),this},s=i.prototype=Object.create(_o);return s.constructor=i,n&&(i.displayName=n),i};bl.prototype.toString=function(){for(var t=P8(this)+" { ",n=this._keys,r,i=0,s=n.length;i!==s;i++)r=n[i],t+=(i?", ":"")+r+": "+X2(this.get(r));return t+" }"};bl.prototype.equals=function(t){return this===t||Nx(t)&&sS(this).equals(sS(t))};bl.prototype.hashCode=function(){return sS(this).hashCode()};bl.prototype.has=function(t){return this._indices.hasOwnProperty(t)};bl.prototype.get=function(t,n){if(!this.has(t))return n;var r=this._indices[t],i=this._values.get(r);return i===void 0?this._defaultValues[t]:i};bl.prototype.set=function(t,n){if(this.has(t)){var r=this._values.set(this._indices[t],n===this._defaultValues[t]?void 0:n);if(r!==this._values&&!this.__ownerID)return I8(this,r)}return this};bl.prototype.remove=function(t){return this.set(t)};bl.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:I8(this,t)};bl.prototype.wasAltered=function(){return this._values.wasAltered()};bl.prototype.toSeq=function(){return sS(this)};bl.prototype.toJS=function(){return hI(this)};bl.prototype.entries=function(){return this.__iterator(od)};bl.prototype.__iterator=function(t,n){return sS(this).__iterator(t,n)};bl.prototype.__iterate=function(t,n){return sS(this).__iterate(t,n)};bl.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var n=this._values.__ensureOwner(t);return t?I8(this,n,t):(this.__ownerID=t,this._values=n,this)};bl.isRecord=Nx;bl.getDescriptiveName=P8;var _o=bl.prototype;_o[lhe]=!0;_o[hO]=_o.remove;_o.deleteIn=_o.removeIn=g8;_o.getIn=$he;_o.hasIn=ku.hasIn;_o.merge=Mhe;_o.mergeWith=Dhe;_o.mergeIn=b8;_o.mergeDeep=Phe;_o.mergeDeepWith=Rhe;_o.mergeDeepIn=x8;_o.setIn=m8;_o.update=_8;_o.updateIn=v8;_o.withMutations=vO;_o.asMutable=bO;_o.asImmutable=xO;_o[kR]=_o.entries;_o.toJSON=_o.toObject=ku.toObject;_o.inspect=_o.toSource=function(){return this.toString()};function I8(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._values=t,r.__ownerID=n,r}function P8(e){return e.constructor.displayName||e.constructor.name||"Record"}function sS(e){return a8(e._keys.map(function(t){return[t,e.get(t)]}))}function lVe(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(n){h8(this.__ownerID,"Cannot set on an immutable record."),this.set(t,n)}})}catch{}}var uVe=(function(e){function t(n,r){if(!(this instanceof t))return new t(n,r);if(this._value=n,this.size=r===void 0?1/0:Math.max(0,r),this.size===0){if(Ez)return Ez;Ez=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},t.prototype.get=function(r,i){return this.has(r)?this._value:i},t.prototype.includes=function(r){return Fl(this._value,r)},t.prototype.slice=function(r,i){var s=this.size;return dO(r,i,s)?this:new t(this._value,pO(i,s)-eT(r,s))},t.prototype.reverse=function(){return this},t.prototype.indexOf=function(r){return Fl(this._value,r)?0:-1},t.prototype.lastIndexOf=function(r){return Fl(this._value,r)?this.size:-1},t.prototype.__iterate=function(r,i){for(var s=this.size,f=0;f!==s&&r(this._value,i?s-++f:f++,this)!==!1;);return f},t.prototype.__iterator=function(r,i){var s=this,f=this.size,a=0;return new Sa(function(){return a===f?vc():ko(r,i?f-++a:a++,s._value)})},t.prototype.equals=function(r){return r instanceof t?Fl(this._value,r._value):M8(this,r)},t})(dd),Ez;function cVe(e,t){return Ghe([],t||fVe,e,"",t&&t.length>2?[]:void 0,{"":e})}function Ghe(e,t,n,r,i,s){if(typeof n!="string"&&!hd(n)&&(n8(n)||t8(n)||d8(n))){if(~e.indexOf(n))throw new TypeError("Cannot convert circular structure to Immutable");e.push(n),i&&r!==""&&i.push(r);var f=t.call(s,r,bc(n).map(function(a,p){return Ghe(e,t,a,p,i,n)}),i&&i.slice());return e.pop(),i&&i.pop(),f}return n}function fVe(e,t){return Iu(t)?t.toList():yo(t)?t.toMap():t.toSet()}var hVe="4.3.7",Az={version:hVe,Collection:rs,Iterable:rs,Seq:bc,Map:jx,OrderedMap:ug,List:wO,Stack:BR,Set:SO,OrderedSet:oS,PairSorting:oVe,Record:bl,Range:Uhe,Repeat:uVe,is:Fl,fromJS:cVe,hash:Zc,isImmutable:hd,isCollection:_c,isKeyed:yo,isIndexed:Iu,isAssociative:mO,isOrdered:Jh,isValueObject:Jj,isPlainObject:d8,isSeq:RR,isList:A8,isMap:zR,isOrderedMap:s8,isStack:fI,isSet:jR,isOrderedSet:C8,isRecord:Nx,get:p8,getIn:D8,has:She,hasIn:Vhe,merge:B$e,mergeDeep:U$e,mergeWith:j$e,mergeDeepWith:$$e,remove:The,removeIn:Che,set:Ehe,setIn:Ohe,update:y8,updateIn:Bx},mD={exports:{}},dVe=mD.exports,PZ;function pVe(){return PZ||(PZ=1,(function(e,t){(function(n,r){e.exports=r()})(dVe,(function(){var n,r,i;function s(a,p){if(!n)n=p;else if(!r)r=p;else{var _="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",S={};n(S),i=p(S),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(i.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}s(["exports"],function(a){var p=1e-6,_=typeof Float32Array<"u"?Float32Array:Array;function S(c,o){var u=o[0],h=o[1],g=o[2],b=o[3],w=u*b-g*h;return w?(c[0]=b*(w=1/w),c[1]=-h*w,c[2]=-g*w,c[3]=u*w,c):null}function E(){var c=new _(9);return _!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function I(c,o){var u=o[0],h=o[1],g=o[2],b=o[3],w=o[4],A=o[5],D=o[6],P=o[7],B=o[8];return c[0]=w*B-A*P,c[1]=g*P-h*B,c[2]=h*A-g*w,c[3]=A*D-b*B,c[4]=u*B-g*D,c[5]=g*b-u*A,c[6]=b*P-w*D,c[7]=h*D-u*P,c[8]=u*w-h*b,c}function z(c,o,u){var h=o[0],g=o[1],b=o[2],w=o[3],A=o[4],D=o[5],P=o[6],B=o[7],j=o[8],$=u[0],G=u[1],Z=u[2],se=u[3],fe=u[4],ue=u[5],pe=u[6],ve=u[7],Se=u[8];return c[0]=$*h+G*w+Z*P,c[1]=$*g+G*A+Z*B,c[2]=$*b+G*D+Z*j,c[3]=se*h+fe*w+ue*P,c[4]=se*g+fe*A+ue*B,c[5]=se*b+fe*D+ue*j,c[6]=pe*h+ve*w+Se*P,c[7]=pe*g+ve*A+Se*B,c[8]=pe*b+ve*D+Se*j,c}function F(){var c=new _(16);return _!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c}function U(c){var o=new _(16);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o}function k(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function V(c,o){var u=o[0],h=o[1],g=o[2],b=o[3],w=o[4],A=o[5],D=o[6],P=o[7],B=o[8],j=o[9],$=o[10],G=o[11],Z=o[12],se=o[13],fe=o[14],ue=o[15],pe=u*A-h*w,ve=u*D-g*w,Se=u*P-b*w,ke=h*D-g*A,Ie=h*P-b*A,Ve=g*P-b*D,qe=B*se-j*Z,Ue=B*fe-$*Z,Ze=B*ue-G*Z,rt=j*fe-$*se,Et=j*ue-G*se,xt=$*ue-G*fe,Tt=pe*xt-ve*Et+Se*rt+ke*Ze-Ie*Ue+Ve*qe;return Tt?(c[0]=(A*xt-D*Et+P*rt)*(Tt=1/Tt),c[1]=(g*Et-h*xt-b*rt)*Tt,c[2]=(se*Ve-fe*Ie+ue*ke)*Tt,c[3]=($*Ie-j*Ve-G*ke)*Tt,c[4]=(D*Ze-w*xt-P*Ue)*Tt,c[5]=(u*xt-g*Ze+b*Ue)*Tt,c[6]=(fe*Se-Z*Ve-ue*ve)*Tt,c[7]=(B*Ve-$*Se+G*ve)*Tt,c[8]=(w*Et-A*Ze+P*qe)*Tt,c[9]=(h*Ze-u*Et-b*qe)*Tt,c[10]=(Z*Ie-se*Se+ue*pe)*Tt,c[11]=(j*Se-B*Ie-G*pe)*Tt,c[12]=(A*Ue-w*rt-D*qe)*Tt,c[13]=(u*rt-h*Ue+g*qe)*Tt,c[14]=(se*ve-Z*ke-fe*pe)*Tt,c[15]=(B*ke-j*ve+$*pe)*Tt,c):null}function K(c,o,u){var h=o[0],g=o[1],b=o[2],w=o[3],A=o[4],D=o[5],P=o[6],B=o[7],j=o[8],$=o[9],G=o[10],Z=o[11],se=o[12],fe=o[13],ue=o[14],pe=o[15],ve=u[0],Se=u[1],ke=u[2],Ie=u[3];return c[0]=ve*h+Se*A+ke*j+Ie*se,c[1]=ve*g+Se*D+ke*$+Ie*fe,c[2]=ve*b+Se*P+ke*G+Ie*ue,c[3]=ve*w+Se*B+ke*Z+Ie*pe,c[4]=(ve=u[4])*h+(Se=u[5])*A+(ke=u[6])*j+(Ie=u[7])*se,c[5]=ve*g+Se*D+ke*$+Ie*fe,c[6]=ve*b+Se*P+ke*G+Ie*ue,c[7]=ve*w+Se*B+ke*Z+Ie*pe,c[8]=(ve=u[8])*h+(Se=u[9])*A+(ke=u[10])*j+(Ie=u[11])*se,c[9]=ve*g+Se*D+ke*$+Ie*fe,c[10]=ve*b+Se*P+ke*G+Ie*ue,c[11]=ve*w+Se*B+ke*Z+Ie*pe,c[12]=(ve=u[12])*h+(Se=u[13])*A+(ke=u[14])*j+(Ie=u[15])*se,c[13]=ve*g+Se*D+ke*$+Ie*fe,c[14]=ve*b+Se*P+ke*G+Ie*ue,c[15]=ve*w+Se*B+ke*Z+Ie*pe,c}function J(c,o,u){var h,g,b,w,A,D,P,B,j,$,G,Z,se=u[0],fe=u[1],ue=u[2];return o===c?(c[12]=o[0]*se+o[4]*fe+o[8]*ue+o[12],c[13]=o[1]*se+o[5]*fe+o[9]*ue+o[13],c[14]=o[2]*se+o[6]*fe+o[10]*ue+o[14],c[15]=o[3]*se+o[7]*fe+o[11]*ue+o[15]):(g=o[1],b=o[2],w=o[3],A=o[4],D=o[5],P=o[6],B=o[7],j=o[8],$=o[9],G=o[10],Z=o[11],c[0]=h=o[0],c[1]=g,c[2]=b,c[3]=w,c[4]=A,c[5]=D,c[6]=P,c[7]=B,c[8]=j,c[9]=$,c[10]=G,c[11]=Z,c[12]=h*se+A*fe+j*ue+o[12],c[13]=g*se+D*fe+$*ue+o[13],c[14]=b*se+P*fe+G*ue+o[14],c[15]=w*se+B*fe+Z*ue+o[15]),c}function ie(c,o,u){var h=u[0],g=u[1],b=u[2];return c[0]=o[0]*h,c[1]=o[1]*h,c[2]=o[2]*h,c[3]=o[3]*h,c[4]=o[4]*g,c[5]=o[5]*g,c[6]=o[6]*g,c[7]=o[7]*g,c[8]=o[8]*b,c[9]=o[9]*b,c[10]=o[10]*b,c[11]=o[11]*b,c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c}function Q(c,o,u){var h=Math.sin(u),g=Math.cos(u),b=o[4],w=o[5],A=o[6],D=o[7],P=o[8],B=o[9],j=o[10],$=o[11];return o!==c&&(c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[4]=b*g+P*h,c[5]=w*g+B*h,c[6]=A*g+j*h,c[7]=D*g+$*h,c[8]=P*g-b*h,c[9]=B*g-w*h,c[10]=j*g-A*h,c[11]=$*g-D*h,c}function W(c,o,u){var h=Math.sin(u),g=Math.cos(u),b=o[0],w=o[1],A=o[2],D=o[3],P=o[8],B=o[9],j=o[10],$=o[11];return o!==c&&(c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=b*g-P*h,c[1]=w*g-B*h,c[2]=A*g-j*h,c[3]=D*g-$*h,c[8]=b*h+P*g,c[9]=w*h+B*g,c[10]=A*h+j*g,c[11]=D*h+$*g,c}function te(c,o,u){var h=Math.sin(u),g=Math.cos(u),b=o[0],w=o[1],A=o[2],D=o[3],P=o[4],B=o[5],j=o[6],$=o[7];return o!==c&&(c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=b*g+P*h,c[1]=w*g+B*h,c[2]=A*g+j*h,c[3]=D*g+$*h,c[4]=P*g-b*h,c[5]=B*g-w*h,c[6]=j*g-A*h,c[7]=$*g-D*h,c}function X(c,o){return c[0]=o[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=o[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function ae(c,o,u){var h,g,b,w=u[0],A=u[1],D=u[2],P=Math.sqrt(w*w+A*A+D*D);return P<p?null:(w*=P=1/P,A*=P,D*=P,h=Math.sin(o),g=Math.cos(o),c[0]=w*w*(b=1-g)+g,c[1]=A*w*b+D*h,c[2]=D*w*b-A*h,c[3]=0,c[4]=w*A*b-D*h,c[5]=A*A*b+g,c[6]=D*A*b+w*h,c[7]=0,c[8]=w*D*b+A*h,c[9]=A*D*b-w*h,c[10]=D*D*b+g,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}function le(c,o){var u=o[0],h=o[1],g=o[2],b=o[4],w=o[5],A=o[6],D=o[8],P=o[9],B=o[10];return c[0]=Math.sqrt(u*u+h*h+g*g),c[1]=Math.sqrt(b*b+w*w+A*A),c[2]=Math.sqrt(D*D+P*P+B*B),c}function ge(c,o){var u=o[0],h=o[1],g=o[2],b=o[3],w=u+u,A=h+h,D=g+g,P=u*w,B=h*w,j=h*A,$=g*w,G=g*A,Z=g*D,se=b*w,fe=b*A,ue=b*D;return c[0]=1-j-Z,c[1]=B+ue,c[2]=$-fe,c[3]=0,c[4]=B-ue,c[5]=1-P-Z,c[6]=G+se,c[7]=0,c[8]=$+fe,c[9]=G-se,c[10]=1-P-j,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}var ye=K;function De(){var c=new _(3);return _!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function He(c){var o=new _(3);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o}function Be(c){var o=c[0],u=c[1],h=c[2];return Math.sqrt(o*o+u*u+h*h)}function Ee(c,o,u){var h=new _(3);return h[0]=c,h[1]=o,h[2]=u,h}function Ne(c,o,u,h){return c[0]=o,c[1]=u,c[2]=h,c}function at(c,o,u){return c[0]=o[0]+u[0],c[1]=o[1]+u[1],c[2]=o[2]+u[2],c}function yt(c,o,u){return c[0]=o[0]-u[0],c[1]=o[1]-u[1],c[2]=o[2]-u[2],c}function je(c,o,u){return c[0]=o[0]*u[0],c[1]=o[1]*u[1],c[2]=o[2]*u[2],c}function Ke(c,o,u){return c[0]=Math.min(o[0],u[0]),c[1]=Math.min(o[1],u[1]),c[2]=Math.min(o[2],u[2]),c}function it(c,o,u){return c[0]=Math.max(o[0],u[0]),c[1]=Math.max(o[1],u[1]),c[2]=Math.max(o[2],u[2]),c}function Pe(c,o,u){return c[0]=o[0]*u,c[1]=o[1]*u,c[2]=o[2]*u,c}function jt(c,o,u,h){return c[0]=o[0]+u[0]*h,c[1]=o[1]+u[1]*h,c[2]=o[2]+u[2]*h,c}function sn(c,o){var u=o[0]-c[0],h=o[1]-c[1],g=o[2]-c[2];return Math.sqrt(u*u+h*h+g*g)}function dn(c,o){var u=o[0]-c[0],h=o[1]-c[1],g=o[2]-c[2];return u*u+h*h+g*g}function Sn(c){var o=c[0],u=c[1],h=c[2];return o*o+u*u+h*h}function Ut(c,o){return c[0]=-o[0],c[1]=-o[1],c[2]=-o[2],c}function xe(c,o){var u=o[0],h=o[1],g=o[2],b=u*u+h*h+g*g;return b>0&&(b=1/Math.sqrt(b)),c[0]=o[0]*b,c[1]=o[1]*b,c[2]=o[2]*b,c}function Ye(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]}function ct(c,o,u){var h=o[0],g=o[1],b=o[2],w=u[0],A=u[1],D=u[2];return c[0]=g*D-b*A,c[1]=b*w-h*D,c[2]=h*A-g*w,c}function mt(c,o,u,h){var g=o[0],b=o[1],w=o[2];return c[0]=g+h*(u[0]-g),c[1]=b+h*(u[1]-b),c[2]=w+h*(u[2]-w),c}function Ct(c,o,u){var h=o[0],g=o[1],b=o[2],w=u[3]*h+u[7]*g+u[11]*b+u[15];return c[0]=(u[0]*h+u[4]*g+u[8]*b+u[12])/(w=w||1),c[1]=(u[1]*h+u[5]*g+u[9]*b+u[13])/w,c[2]=(u[2]*h+u[6]*g+u[10]*b+u[14])/w,c}function Yt(c,o,u){var h=o[0],g=o[1],b=o[2];return c[0]=h*u[0]+g*u[3]+b*u[6],c[1]=h*u[1]+g*u[4]+b*u[7],c[2]=h*u[2]+g*u[5]+b*u[8],c}function gn(c,o,u){var h=u[0],g=u[1],b=u[2],w=u[3],A=o[0],D=o[1],P=o[2],B=g*P-b*D,j=b*A-h*P,$=h*D-g*A;return c[0]=A+w*(B+=B)+g*($+=$)-b*(j+=j),c[1]=D+w*j+b*B-h*$,c[2]=P+w*$+h*j-g*B,c}function En(c){return c[0]=0,c[1]=0,c[2]=0,c}function or(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]}var sr=yt,Nr=je,Pr=Be;function Er(){var c=new _(4);return _!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0,c[3]=0),c}function Tr(c,o,u){return c[0]=o[0]*u,c[1]=o[1]*u,c[2]=o[2]*u,c[3]=o[3]*u,c}function pi(c,o){var u=o[0],h=o[1],g=o[2],b=o[3],w=u*u+h*h+g*g+b*b;return w>0&&(w=1/Math.sqrt(w)),c[0]=u*w,c[1]=h*w,c[2]=g*w,c[3]=b*w,c}function Br(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]+c[3]*o[3]}function hi(c,o,u){var h=o[0],g=o[1],b=o[2],w=o[3];return c[0]=u[0]*h+u[4]*g+u[8]*b+u[12]*w,c[1]=u[1]*h+u[5]*g+u[9]*b+u[13]*w,c[2]=u[2]*h+u[6]*g+u[10]*b+u[14]*w,c[3]=u[3]*h+u[7]*g+u[11]*b+u[15]*w,c}function $t(){var c=new _(4);return _!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function Tn(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c}function ur(c,o,u){u*=.5;var h=o[0],g=o[1],b=o[2],w=o[3],A=Math.sin(u),D=Math.cos(u);return c[0]=h*D+w*A,c[1]=g*D+b*A,c[2]=b*D-g*A,c[3]=w*D-h*A,c}function Vr(c,o,u){u*=.5;var h=o[0],g=o[1],b=o[2],w=o[3],A=Math.sin(u),D=Math.cos(u);return c[0]=h*D-b*A,c[1]=g*D+w*A,c[2]=b*D+h*A,c[3]=w*D-g*A,c}De(),Er();var jr,Ya,vo,Yo=pi,Aa=(jr=De(),Ya=Ee(1,0,0),vo=Ee(0,1,0),function(c,o,u){var h=Ye(o,u);return h<-.999999?(ct(jr,Ya,o),Pr(jr)<1e-6&&ct(jr,vo,o),xe(jr,jr),(function(g,b,w){w*=.5;var A=Math.sin(w);g[0]=A*b[0],g[1]=A*b[1],g[2]=A*b[2],g[3]=Math.cos(w)})(c,jr,Math.PI),c):h>.999999?(c[0]=0,c[1]=0,c[2]=0,c[3]=1,c):(ct(jr,o,u),c[0]=jr[0],c[1]=jr[1],c[2]=jr[2],c[3]=1+h,Yo(c,c))});function Qi(){var c=new _(2);return _!=Float32Array&&(c[0]=0,c[1]=0),c}function Ri(c,o){var u=new _(2);return u[0]=c,u[1]=o,u}function zs(c,o,u){return c[0]=o,c[1]=u,c}function is(c,o,u){return c[0]=o[0]+u[0],c[1]=o[1]+u[1],c}function lf(c,o,u){return c[0]=o[0]-u[0],c[1]=o[1]-u[1],c}function zu(c,o,u){return c[0]=o[0]*u,c[1]=o[1]*u,c}function Fu(c){var o=c[0],u=c[1];return Math.sqrt(o*o+u*u)}function uf(c,o){var u=o[0],h=o[1],g=u*u+h*h;return g>0&&(g=1/Math.sqrt(g)),c[0]=o[0]*g,c[1]=o[1]*g,c}function mi(c,o){return c[0]*o[0]+c[1]*o[1]}$t(),$t(),E();var oo,ah,Ip=lf;function wl(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}Qi();var _g=(function(){if(ah)return oo;function c(o,u,h,g){this.cx=3*o,this.bx=3*(h-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(g-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=u,this.p2x=h,this.p2y=g}return ah=1,oo=c,c.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,u){if(u===void 0&&(u=1e-6),o<0)return 0;if(o>1)return 1;for(var h=o,g=0;g<8;g++){var b=this.sampleCurveX(h)-o;if(Math.abs(b)<u)return h;var w=this.sampleCurveDerivativeX(h);if(Math.abs(w)<1e-6)break;h-=b/w}var A=0,D=1;for(h=o,g=0;g<20&&(b=this.sampleCurveX(h),!(Math.abs(b-o)<u));g++)o>b?A=h:D=h,h=.5*(D-A)+A;return h},solve:function(o,u){return this.sampleCurveY(this.solveCurveX(o,u))}},oo})(),wc=wl(_g);function Vt(c,o){this.x=c,this.y=o}function Sc(c,o){if(Array.isArray(c)){if(!Array.isArray(o)||c.length!==o.length)return!1;for(let u=0;u<c.length;u++)if(!Sc(c[u],o[u]))return!1;return!0}if(typeof c=="object"&&c!==null&&o!==null){if(typeof o!="object"||Object.keys(c).length!==Object.keys(o).length)return!1;for(const u in c)if(!Sc(c[u],o[u]))return!1;return!0}return c===o}Vt.prototype={clone(){return new Vt(this.x,this.y)},add(c){return this.clone()._add(c)},sub(c){return this.clone()._sub(c)},multByPoint(c){return this.clone()._multByPoint(c)},divByPoint(c){return this.clone()._divByPoint(c)},mult(c){return this.clone()._mult(c)},div(c){return this.clone()._div(c)},rotate(c){return this.clone()._rotate(c)},rotateAround(c,o){return this.clone()._rotateAround(c,o)},matMult(c){return this.clone()._matMult(c)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(c){return this.x===c.x&&this.y===c.y},dist(c){return Math.sqrt(this.distSqr(c))},distSqr(c){const o=c.x-this.x,u=c.y-this.y;return o*o+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith(c){return this.angleWithSep(c.x,c.y)},angleWithSep(c,o){return Math.atan2(this.x*o-this.y*c,this.x*c+this.y*o)},_matMult(c){const o=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=o,this},_add(c){return this.x+=c.x,this.y+=c.y,this},_sub(c){return this.x-=c.x,this.y-=c.y,this},_mult(c){return this.x*=c,this.y*=c,this},_div(c){return this.x/=c,this.y/=c,this},_multByPoint(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint(c){return this.x/=c.x,this.y/=c.y,this},_unit(){return this._div(this.mag()),this},_perp(){const c=this.y;return this.y=this.x,this.x=-c,this},_rotate(c){const o=Math.cos(c),u=Math.sin(c),h=u*this.x+o*this.y;return this.x=o*this.x-u*this.y,this.y=h,this},_rotateAround(c,o){const u=Math.cos(c),h=Math.sin(c),g=o.y+h*(this.x-o.x)+u*(this.y-o.y);return this.x=o.x+u*(this.x-o.x)-h*(this.y-o.y),this.y=g,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Vt},Vt.convert=function(c){if(c instanceof Vt)return c;if(Array.isArray(c))return new Vt(+c[0],+c[1]);if(c.x!==void 0&&c.y!==void 0)return new Vt(+c.x,+c.y);throw new Error("Expected [x, y] or {x, y} point format")};const b_=Math.PI/180,Pp=180/Math.PI;function Ar(c){return c*b_}function ut(c){return c*Pp}const me=[[0,0],[1,0],[1,1],[0,1]];function we(c){if(c<=0)return 0;if(c>=1)return 1;const o=c*c,u=o*c;return 4*(c<.5?u:3*(c-o)+u-.75)}function Le(c,o,u,h){const g=new wc(c,o,u,h);return function(b){return g.solve(b)}}const Qe=Le(.25,.1,.25,1);function ze(c,o,u){return Math.min(u,Math.max(o,c))}function ot(c,o,u){return(u=ze((u-c)/(o-c),0,1))*u*(3-2*u)}function _t(c,o,u){const h=u-o,g=((c-o)%h+h)%h+o;return g===o?u:g}function lt(c,o,u){if(!c.length)return u(null,[]);let h=c.length;const g=new Array(c.length);let b=null;c.forEach((w,A)=>{o(w,(D,P)=>{D&&(b=D),g[A]=P,--h===0&&u(b,g)})})}let bt=1;function Gt(){return bt++}function Nt(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log2(c)))}function hn(c,o){c.forEach(u=>{o[u]&&(o[u]=o[u].bind(o))})}function Mn(c,o,u){const h={};for(const g in c)h[g]=o.call(this,c[g],g,c);return h}function Rn(c,o,u){const h={};for(const g in c)o.call(this,c[g],g,c)&&(h[g]=c[g]);return h}function Zn(c){return Array.isArray(c)?c.map(Zn):typeof c=="object"&&c?Mn(c,Zn):c}function rr(c,o){for(let u=0;u<c.length;u++)if(o.indexOf(c[u])>=0)return!0;return!1}const In={};function Hn(c){In[c]||(typeof console<"u"&&console.warn(c),In[c]=!0)}function xi(c,o,u){return(u.y-c.y)*(o.x-c.x)>(o.y-c.y)*(u.x-c.x)}function sa(c){let o=0;for(let u,h,g=0,b=c.length,w=b-1;g<b;w=g++)u=c[g],h=c[w],o+=(h.x-u.x)*(u.y+h.y);return o}function zi([c,o,u]){const h=Ar(o+90),g=Ar(u);return{x:c*Math.cos(h)*Math.sin(g),y:c*Math.sin(h)*Math.sin(g),z:c*Math.cos(g),azimuthal:o,polar:u}}function _a(c){return(typeof self<"u"||c!==void 0)&&typeof WorkerGlobalScope<"u"&&(c!==void 0?c:self)instanceof WorkerGlobalScope}function ki(c){const o={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,h,g,b)=>{const w=g||b;return o[h]=!w||w.toLowerCase(),""}),o["max-age"]){const u=parseInt(o["max-age"],10);isNaN(u)?delete o["max-age"]:o["max-age"]=u}return o}let Or=null;function ji(c,o){return[c[4*o],c[4*o+1],c[4*o+2],c[4*o+3]]}function si(c,o,u,h){for(;o<u;){const g=o+u>>1;c[g]<h?o=g+1:u=g}return o}function li(c,o,u,h){for(;o<u;){const g=o+u>>1;c[g]<=h?o=g+1:u=g}return o}function wi(c){return c>0?1/(1.001-c):1+c}function la(c){return c>0?1-1/(1.001-c):-c}function bo(c,o,u){return(c-o.min)*(u.max-u.min)/(o.max-o.min)+u.min}const Ja={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Ja.API_URL)return null;try{const c=new URL(Ja.API_URL);return c.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":c.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",BUILDING_GEN_URL:"https://api.mapbox.com/mapbox-gl-js/building-gen/building_gen_v1.2.4.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Tc(c){return Ja.API_URL_REGEX.test(c)}function as(c){return Ja.API_SPRITE_REGEX.test(c)}let bs,ru,so,Fs,xs,Nu;function iu(){return bs==null&&(bs=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),bs}const Sl={now:()=>Fs!==void 0?Fs:performance.now(),setNow(c){Fs=c},restoreNow(){Fs=void 0},frame(c){const o=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(c,o=0){const{width:u,height:h}=c;xs||(xs=document.createElement("canvas"));const g=xs.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(u>xs.width||h>xs.height)&&(xs.width=u,xs.height=h),g.clearRect(-o,-o,u+2*o,h+2*o),g.drawImage(c,0,0,u,h),g.getImageData(-o,-o,u+2*o,h+2*o)},resolveURL:c=>(ru||(ru=document.createElement("a")),ru.href=c,ru.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(so==null&&(so=window.matchMedia("(prefers-reduced-motion: reduce)")),so.matches)},hasCanvasFingerprintNoise(){if(Nu!==void 0)return Nu;if(!iu())return Nu=!1,!1;const c=new OffscreenCanvas(85,1),o=c.getContext("2d",{willReadFrequently:!0});let u=0;for(let g=0;g<c.width;++g)o.fillStyle=`rgba(${u++},${u++},${u++}, 255)`,o.fillRect(g,0,1,1);const h=o.getImageData(0,0,c.width,c.height);u=0;for(let g=0;g<h.data.length;++g)if(g%4!=3&&u++!==h.data[g])return Nu=!0,!0;return Nu=!1,!1}};function Rp(c,o){const u=c.indexOf("?");if(u<0)return`${c}?${new URLSearchParams(o).toString()}`;const h=new URLSearchParams(c.slice(u));for(const g in o)h.set(g,o[g]);return`${c.slice(0,u)}?${h.toString()}`}function Ec(c,o={persistentParams:[]}){const u=c.indexOf("?");if(u<0)return c;const h=new URLSearchParams,g=new URLSearchParams(c.slice(u));for(const w of o.persistentParams){const A=g.get(w);A&&h.set(w,A)}const b=h.toString();return`${c.slice(0,u)}${b.length>0?`?${b}`:""}`}const Wx="mapbox-tiles";let m0=500,x_=50;const vg=["language","worldview","jobid"];let No,jl;function au(){try{return caches}catch{}}function xo(){const c=au();c&&No==null&&(No=c.open(Wx))}let ou=1/0;const oh={supported:!1,testSupport:function(c){!cf&&su&&(kp?Lp(c):Bu=c)}};let Bu,su,cf=!1,kp=!1;const g0=typeof self<"u"?self:{};function Lp(c){const o=c.createTexture();c.bindTexture(c.TEXTURE_2D,o);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,su),c.isContextLost())return;oh.supported=!0}catch{}c.deleteTexture(o),cf=!0}g0.document&&(su=g0.document.createElement("img"),su.onload=function(){Bu&&Lp(Bu),Bu=null,kp=!0},su.onerror=function(){cf=!0,Bu=null},su.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const eo={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(eo);class md extends Error{constructor(o,u,h){u===401&&Tc(h)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=u,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ff=_a()?()=>self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Ns=function(c,o){if(!(/^file:/.test(u=c.url)||/^file:/.test(ff())&&!/^\w+:/.test(u))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return(function(h,g){const b=new AbortController,w=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:ff(),referrerPolicy:h.referrerPolicy,signal:b.signal});let A=!1,D=!1;const P=(B=w.url).indexOf("sku=")>0&&Tc(B);var B;h.type==="json"&&w.headers.set("Accept","application/json");const j=(G,Z,se)=>{if(D)return;if(G&&G.message!=="SecurityError"&&Hn(G.toString()),Z&&se)return $(Z);const fe=Date.now();fetch(w).then(ue=>{if(ue.ok){const pe=P?ue.clone():null;return $(ue,pe,fe)}return g(new md(ue.statusText,ue.status,h.url))}).catch(ue=>{ue.name!=="AbortError"&&g(new Error(`${ue.message} ${h.url}`))})},$=(G,Z,se)=>{(h.type==="arrayBuffer"?G.arrayBuffer():h.type==="json"?G.json():G.text()).then(fe=>{D||(Z&&se&&(function(ue,pe,ve){if(xo(),No==null)return;const Se=ki(pe.headers.get("Cache-Control")||"");if(Se["no-store"])return;const ke={status:pe.status,statusText:pe.statusText,headers:new Headers};pe.headers.forEach((qe,Ue)=>ke.headers.set(Ue,qe)),Se["max-age"]&&ke.headers.set("Expires",new Date(ve+1e3*Se["max-age"]).toUTCString());const Ie=ke.headers.get("Expires");if(!Ie||new Date(Ie).getTime()-ve<42e4)return;let Ve=Ec(ue.url,{persistentParams:vg});if(pe.status===206){const qe=ue.headers.get("Range");if(!qe)return;ke.status=200,Ve=Rp(Ve,{range:qe})}(function(qe,Ue){if(jl===void 0)try{new Response(new ReadableStream),jl=!0}catch{jl=!1}jl?Ue(qe.body):qe.blob().then(Ue).catch(Ze=>Hn(Ze.message))})(pe,qe=>{const Ue=new Response((Ze=pe.status)!==200&&Ze!==404&&[101,103,204,205,304].includes(Ze)?null:qe,ke);var Ze;xo(),No!=null&&No.then(rt=>rt.put(Ve,Ue)).catch(rt=>Hn(rt.message))})})(w,Z,se),A=!0,g(null,fe,G.headers))}).catch(fe=>{D||g(new Error(fe.message))})};return P?(function(G,Z){if(xo(),No==null)return Z(null);No.then(se=>{let fe=Ec(G.url,{persistentParams:vg});const ue=G.headers.get("Range");ue&&(fe=Rp(fe,{range:ue})),se.match(fe).then(pe=>{const ve=(function(Se){if(!Se)return!1;const ke=new Date(Se.headers.get("Expires")||0),Ie=ki(Se.headers.get("Cache-Control")||"");return Number(ke)>Date.now()&&!Ie["no-cache"]})(pe);se.delete(fe).catch(Z),ve&&se.put(fe,pe.clone()).catch(Z),Z(null,pe,ve)}).catch(Z)}).catch(Z)})(w,j):j(null,null),{cancel:()=>{D=!0,A||b.abort()}}})(c,o);if(_a(self)&&self.worker.actor)return self.worker.actor.send("getResource",c,o,void 0,!0)}var u;return(function(h,g){const b=new XMLHttpRequest;b.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(b.responseType="arraybuffer");for(const w in h.headers)b.setRequestHeader(w,h.headers[w]);return h.type==="json"&&(b.responseType="text",b.setRequestHeader("Accept","application/json")),b.withCredentials=h.credentials==="include",b.onerror=()=>{g(new Error(b.statusText))},b.onload=()=>{if((b.status>=200&&b.status<300||b.status===0)&&b.response!==null){let w=b.response;if(h.type==="json")try{w=JSON.parse(b.response)}catch(D){return g(D)}const A=new Headers;b.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(D=>{const P=D.split(": "),B=P.shift(),j=P.join(": ");A.append(B,j)}),g(null,w,A)}else g(new md(b.statusText,b.status,h.url))},b.send(h.body),{cancel:()=>b.abort()}})(c,o)},gd=function(c,o){return Ns(Object.assign(c,{type:"arrayBuffer"}),o)};function w_(c){const o=document.createElement("a");return o.href=c,o.protocol===location.protocol&&o.host===location.host}const S_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Cr,hf;Cr=[],hf=0;const bg=function(c,o){if(oh.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),hf>=Ja.MAX_PARALLEL_IMAGE_REQUESTS){const b={requestParameters:c,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return Cr.push(b),b}hf++;let u=!1;const h=()=>{if(!u)for(u=!0,hf--;Cr.length&&hf<Ja.MAX_PARALLEL_IMAGE_REQUESTS;){const b=Cr.shift(),{requestParameters:w,callback:A,cancelled:D}=b;D||(b.cancel=bg(w,A).cancel)}},g=gd(c,(b,w,A)=>{h(),b?o(b):w&&(self.createImageBitmap?(function(D,P){const B=new Blob([new Uint8Array(D)],{type:"image/png"});createImageBitmap(B).then(j=>{P(null,j)}).catch(j=>{P(new Error(`Could not load image because of ${j.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})})(w,(D,P)=>o(D,P,A)):(function(D,P){const B=new Image;B.onload=()=>{P(null,B),URL.revokeObjectURL(B.src),B.onload=null,requestAnimationFrame(()=>{B.src=S_})},B.onerror=()=>P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const j=new Blob([new Uint8Array(D)],{type:"image/png"});B.src=D.byteLength?URL.createObjectURL(j):S_})(w,(D,P)=>o(D,P,A)))});return{cancel:()=>{g.cancel(),h()}}};var el,sh,lh,lu={exports:{}},xg={exports:{}},zp={exports:{}},y0=(function(){if(lh)return lu.exports;lh=1;var c=(el||(el=1,xg.exports=function(u,h){var g,b,w,A,D,P,B,j;for(b=u.length-(g=3&u.length),w=h,D=3432918353,P=461845907,j=0;j<b;)B=255&u.charCodeAt(j)|(255&u.charCodeAt(++j))<<8|(255&u.charCodeAt(++j))<<16|(255&u.charCodeAt(++j))<<24,++j,w=27492+(65535&(A=5*(65535&(w=(w^=B=(65535&(B=(B=(65535&B)*D+(((B>>>16)*D&65535)<<16)&4294967295)<<15|B>>>17))*P+(((B>>>16)*P&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+(((A>>>16)+58964&65535)<<16);switch(B=0,g){case 3:B^=(255&u.charCodeAt(j+2))<<16;case 2:B^=(255&u.charCodeAt(j+1))<<8;case 1:w^=B=(65535&(B=(B=(65535&(B^=255&u.charCodeAt(j)))*D+(((B>>>16)*D&65535)<<16)&4294967295)<<15|B>>>17))*P+(((B>>>16)*P&65535)<<16)&4294967295}return w^=u.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),xg.exports),o=(sh||(sh=1,zp.exports=function(u,h){for(var g,b=u.length,w=h^b,A=0;b>=4;)g=1540483477*(65535&(g=255&u.charCodeAt(A)|(255&u.charCodeAt(++A))<<8|(255&u.charCodeAt(++A))<<16|(255&u.charCodeAt(++A))<<24))+((1540483477*(g>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),b-=4,++A;switch(b){case 3:w^=(255&u.charCodeAt(A+2))<<16;case 2:w^=(255&u.charCodeAt(A+1))<<8;case 1:w=1540483477*(65535&(w^=255&u.charCodeAt(A)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),zp.exports);return lu.exports=c,lu.exports.murmur3=c,lu.exports.murmur2=o,lu.exports})(),Ac=wl(y0);class uu{constructor(o,...u){Object.assign(this,u[0]||{}),this.type=o}}class Fp extends uu{constructor(o,u={}){super("error",Object.assign({error:o},u))}}function Xx(c,o,u){u[c]&&u[c].indexOf(o)!==-1||(u[c]=u[c]||[],u[c].push(o))}function yd(c,o,u){if(u&&u[c]){const h=u[c].indexOf(o);h!==-1&&u[c].splice(h,1)}}class df{on(o,u){return this._listeners=this._listeners||{},Xx(o,u,this._listeners),this}off(o,u){return yd(o,u,this._listeners),yd(o,u,this._oneTimeListeners),this}once(o,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Xx(o,u,this._oneTimeListeners),this):new Promise(h=>{this.once(o,h)})}fire(o,u){const h=typeof o=="string"?new uu(o,u):o,g=h.type;if(this.listens(g)){h.target=this;const b=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const D of b)D.call(this,h);const w=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const D of w)yd(g,D,this._oneTimeListeners),D.call(this,h);const A=this._eventedParent;if(A){const D=typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData;Object.assign(h,D),A.fire(h)}}else h instanceof Fp&&console.error(h.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,u){return this._eventedParent=o,this._eventedParentData=u,this}}class ws{constructor(o){typeof o=="string"?this.name=o:(this.name=o.name,this.iconsetId=o.iconsetId)}static from(o){return new ws(o)}static toString(o){return o.iconsetId?`${o.name}${o.iconsetId}`:o.name}static parse(o){const[u,h]=o.split("");return new ws({name:u,iconsetId:h})}static isEqual(o,u){return o.name===u.name&&o.iconsetId===u.iconsetId}toString(){return ws.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var cu,T_={},Zx=(function(){if(cu)return T_;cu=1;var c={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(b){return(b=Math.round(b))<0?0:b>255?255:b}function u(b){return o(b[b.length-1]==="%"?parseFloat(b)/100*255:parseInt(b))}function h(b){return(w=b[b.length-1]==="%"?parseFloat(b)/100:parseFloat(b))<0?0:w>1?1:w;var w}function g(b,w,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?b+(w-b)*A*6:2*A<1?w:3*A<2?b+(w-b)*(2/3-A)*6:b}try{T_.parseCSSColor=function(b){var w,A=b.replace(/ /g,"").toLowerCase();if(A in c)return c[A].slice();if(A[0]==="#")return A.length===4?(w=parseInt(A.substr(1),16))>=0&&w<=4095?[(3840&w)>>4|(3840&w)>>8,240&w|(240&w)>>4,15&w|(15&w)<<4,1]:null:A.length===7&&(w=parseInt(A.substr(1),16))>=0&&w<=16777215?[(16711680&w)>>16,(65280&w)>>8,255&w,1]:null;var D=A.indexOf("("),P=A.indexOf(")");if(D!==-1&&P+1===A.length){var B=A.substr(0,D),j=A.substr(D+1,P-(D+1)).split(","),$=1;switch(B){case"rgba":if(j.length!==4)return null;$=h(j.pop());case"rgb":return j.length!==3?null:[u(j[0]),u(j[1]),u(j[2]),$];case"hsla":if(j.length!==4)return null;$=h(j.pop());case"hsl":if(j.length!==3)return null;var G=(parseFloat(j[0])%360+360)%360/360,Z=h(j[1]),se=h(j[2]),fe=se<=.5?se*(Z+1):se+Z-se*Z,ue=2*se-fe;return[o(255*g(ue,fe,G+1/3)),o(255*g(ue,fe,G)),o(255*g(ue,fe,G-1/3)),$];default:return null}}return null}}catch{}return T_})();class Qr{constructor(o,u,h,g=1){this.r=o,this.g=u,this.b=h,this.a=g}static parse(o){if(!o)return;if(o instanceof Qr)return o;if(typeof o!="string")return;const u=Zx.parseCSSColor(o);return u?new Qr(u[0]/255,u[1]/255,u[2]/255,u[3]):void 0}toString(){const[o,u,h,g]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*o)},${Math.round(255*u)},${Math.round(255*h)},${g})`}toNonPremultipliedRenderColor(o){const{r:u,g:h,b:g,a:b}=this;return new v0(o,u,h,g,b)}toPremultipliedRenderColor(o){const{r:u,g:h,b:g,a:b}=this;return new Kx(o,u*b,h*b,g*b,b)}clone(){return new Qr(this.r,this.g,this.b,this.a)}}class _0{constructor(o,u,h,g,b,w=!1){if(this.premultiplied=!1,this.premultiplied=w,o){const A=o.image.height,D=A*A;this.premultiplied?(u=b===0?0:u/b*(A-1),h=b===0?0:h/b*(A-1),g=b===0?0:g/b*(A-1)):(u*=A-1,h*=A-1,g*=A-1),u=Math.max(0,Math.min(A-1,u)),h=Math.max(0,Math.min(A-1,h)),g=Math.max(0,Math.min(A-1,g));const P=Math.floor(u),B=Math.floor(h),j=Math.floor(g),$=Math.ceil(u),G=Math.ceil(h),Z=Math.ceil(g),se=u-P,fe=h-B,ue=g-j,pe=o.image.data,ve=4*(P+B*D+j*A),Se=4*(P+B*D+Z*A),ke=4*(P+G*D+j*A),Ie=4*(P+G*D+Z*A),Ve=4*($+B*D+j*A),qe=4*($+B*D+Z*A),Ue=4*($+G*D+j*A),Ze=4*($+G*D+Z*A);this.r=Vn(Vn(Vn(pe[ve],pe[Se],ue),Vn(pe[ke],pe[Ie],ue),fe),Vn(Vn(pe[Ve],pe[qe],ue),Vn(pe[Ue],pe[Ze],ue),fe),se)/255*(this.premultiplied?b:1),this.g=Vn(Vn(Vn(pe[ve+1],pe[Se+1],ue),Vn(pe[ke+1],pe[Ie+1],ue),fe),Vn(Vn(pe[Ve+1],pe[qe+1],ue),Vn(pe[Ue+1],pe[Ze+1],ue),fe),se)/255*(this.premultiplied?b:1),this.b=Vn(Vn(Vn(pe[ve+2],pe[Se+2],ue),Vn(pe[ke+2],pe[Ie+2],ue),fe),Vn(Vn(pe[Ve+2],pe[qe+2],ue),Vn(pe[Ue+2],pe[Ze+2],ue),fe),se)/255*(this.premultiplied?b:1),this.a=b}else this.r=u,this.g=h,this.b=g,this.a=b}toArray(){const{r:o,g:u,b:h,a:g}=this;return[255*o,255*u,255*h,g]}toHslaArray(){let{r:o,g:u,b:h,a:g}=this;if(this.premultiplied){if(g===0)return[0,0,0,0];const Z=1/g;o*=Z,u*=Z,h*=Z}const b=Math.min(Math.max(o,0),1),w=Math.min(Math.max(u,0),1),A=Math.min(Math.max(h,0),1),D=Math.min(b,w,A),P=Math.max(b,w,A),B=P-D,j=.5*(D+P);if(B===0)return[0,0,100*j,g];const $=j>.5?B/(2-P-D):B/(P+D);let G;switch(P){case b:G=60*((w-A)/B+(w<A?6:0));break;case w:G=60*((A-b)/B+2);break;default:G=60*((b-w)/B+4)}return[G,100*$,100*j,g]}toArray01(){const{r:o,g:u,b:h,a:g}=this;return[o,u,h,g]}toArray01Scaled(o){const{r:u,g:h,b:g}=this;return[u*o,h*o,g*o]}toArray01Linear(){const{r:o,g:u,b:h,a:g}=this;return[Math.pow(o,2.2),Math.pow(u,2.2),Math.pow(h,2.2),g]}}class v0 extends _0{constructor(o,u,h,g,b){super(o,u,h,g,b,!1)}}class Kx extends _0{constructor(o,u,h,g,b){super(o,u,h,g,b,!0)}}function Vn(c,o,u){return c*(1-u)+o*u}function b0(c,o,u){return c.map((h,g)=>Vn(h,o[g],u))}Qr.black=new Qr(0,0,0,1),Qr.white=new Qr(1,1,1,1),Qr.transparent=new Qr(0,0,0,0),Qr.red=new Qr(1,0,0,1),Qr.blue=new Qr(0,0,1,1);var _d=Object.freeze({__proto__:null,array:b0,color:function(c,o,u){return new Qr(Vn(c.r,o.r,u),Vn(c.g,o.g,u),Vn(c.b,o.b,u),Vn(c.a,o.a,u))},number:Vn});class os extends Error{constructor(o,u){super(u),this.message=u,this.key=o}}class E_{constructor(o,u=[]){this.parent=o,this.bindings={};for(const[h,g]of u)this.bindings[h]=g}concat(o){return new E_(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const tl={kind:"null"},Cn={kind:"number"},Yr={kind:"string"},qr={kind:"boolean"},Bs={kind:"color"},Np={kind:"object"},ii={kind:"value"},A_={kind:"collator"},Bp={kind:"formatted"},vd={kind:"resolvedImage"};function Ss(c,o){return{kind:"array",itemType:c,N:o}}function Oa(c){if(c.kind==="array"){const o=Oa(c.itemType);return typeof c.N=="number"?`array<${o}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${o}>`}return c.kind}const x0=[tl,Cn,Yr,qr,Bs,Bp,Np,Ss(ii),vd];function pf(c,o){if(o.kind==="error")return null;if(c.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!pf(c.itemType,o.itemType))&&(typeof c.N!="number"||c.N===o.N))return null}else{if(c.kind===o.kind)return null;if(c.kind==="value"){for(const u of x0)if(!pf(u,o))return null}}return`Expected ${Oa(c)} but found ${Oa(o)} instead.`}function w0(c,o){return o.some(u=>u.kind===c.kind)}function jp(c,o){return o.some(u=>u==="null"?c===null:u==="array"?Array.isArray(c):u==="object"?c&&!Array.isArray(c)&&typeof c=="object":u===typeof c)}function wg(c,o){return c.kind==="array"&&o.kind==="array"?c.N===o.N&&wg(c.itemType,o.itemType):c.kind===o.kind}class O_{constructor(o,u,h){this.sensitivity=o?u?"variant":"case":u?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,u){return this.collator.compare(o,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Sg{constructor(o,u,h,g,b){this.text=o.normalize?o.normalize():o,this.image=u,this.scale=h,this.fontStack=g,this.textColor=b}}class ss{constructor(o){this.sections=o}static fromString(o){return new ss([new Sg(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||!!o.image&&o.image.hasPrimary())}static factory(o){return o instanceof ss?o:ss.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const u of this.sections){if(u.image){const g=u.image.getPrimary().id.toString();o.push(["image",g]);continue}o.push(u.text);const h={};u.fontStack&&(h["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(h["font-scale"]=u.scale),u.textColor&&(h["text-color"]=["rgba"].concat(u.textColor.toNonPremultipliedRenderColor(null).toArray())),o.push(h)}return o}}class Bo{constructor(o,u={}){this.id=ws.from(o),this.params=u.params,this.sx=u.sx||1,this.sy=u.sy||1}toString(){return JSON.stringify(this)}static parse(o){let u,h,g,b;try{({id:u,params:h,sx:g,sy:b}=JSON.parse(o)||{})}catch{return null}return u?new Bo(u,{params:h,sx:g,sy:b}):null}scaleSelf(o,u=o){return this.sx*=o,this.sy*=u,this}}class nl{constructor(o,u,h,g,b=!1){this.primaryId=ws.from(o),this.primaryOptions=u,h&&(this.secondaryId=ws.from(h)),this.secondaryOptions=g,this.available=b}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new Bo(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new Bo(this.secondaryId,this.secondaryOptions):null}static from(o){return typeof o=="string"?nl.build({name:o}):o}static build(o,u,h,g){return!o||typeof o=="object"&&!("name"in o)?null:new nl(o,h,u,g)}}function S0(c,o,u,h){return typeof c=="number"&&c>=0&&c<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof u=="number"&&u>=0&&u<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[c,o,u,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[c,o,u,h]:[c,o,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function uh(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Qr||c instanceof O_||c instanceof ss||c instanceof nl)return!0;if(Array.isArray(c)){for(const o of c)if(!uh(o))return!1;return!0}if(typeof c=="object"){for(const o in c)if(!uh(c[o]))return!1;return!0}return!1}function to(c){if(c===null)return tl;if(typeof c=="string")return Yr;if(typeof c=="boolean")return qr;if(typeof c=="number")return Cn;if(c instanceof Qr)return Bs;if(c instanceof O_)return A_;if(c instanceof ss)return Bp;if(c instanceof nl)return vd;if(Array.isArray(c)){const o=c.length;let u;for(const h of c){const g=to(h);if(u){if(u===g)continue;u=ii;break}u=g}return Ss(u||ii,o)}return Np}function ju(c){const o=typeof c;return c===null?"":o==="string"||o==="number"||o==="boolean"?String(c):c instanceof ss||c instanceof nl||c instanceof Qr?c.toString():JSON.stringify(c)}class Ul{constructor(o,u){this.type=o,this.value=u}static parse(o,u){if(o.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!uh(o[1]))return u.error("invalid value");const h=o[1];let g=to(h);const b=u.expectedType;return g.kind!=="array"||g.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(g=b),new Ul(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Qr?["rgba"].concat(this.value.toNonPremultipliedRenderColor(null).toArray()):this.value instanceof ss?this.value.serialize():this.value}}class Ca{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const ch={string:Yr,number:Cn,boolean:qr,object:Np};class Gn{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");let h,g=1;const b=o[0];if(b==="array"){let A,D;if(o.length>2){const P=o[1];if(typeof P!="string"||!(P in ch)||P==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);A=ch[P],g++}else A=ii;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return u.error('The length argument to "array" must be a positive integer literal',2);D=o[2],g++}h=Ss(A,D)}else h=ch[b];const w=[];for(;g<o.length;g++){const A=u.parse(o[g],g,ii);if(!A)return null;w.push(A)}return new Gn(h,w)}evaluate(o){for(let u=0;u<this.args.length;u++){const h=this.args[u].evaluate(o);if(!pf(this.type,to(h)))return h;if(u===this.args.length-1)throw new Ca(`The expression ${JSON.stringify(this.args[u].serialize())} evaluated to ${Oa(to(h))} but was expected to be of type ${Oa(this.type)}.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,u=[o.kind];if(o.kind==="array"){const h=o.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){u.push(h.kind);const g=o.N;(typeof g=="number"||this.args.length>1)&&u.push(g)}}return u.concat(this.args.map(h=>h.serialize()))}}class An{constructor(o){this.type=Bp,this.sections=o}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const h=o[1];if(!Array.isArray(h)&&typeof h=="object")return u.error("First argument must be an image or text section.");const g=[];let b=!1;for(let w=1;w<=o.length-1;++w){const A=o[w];if(b&&typeof A=="object"&&!Array.isArray(A)){b=!1;let D=null;if(A["font-scale"]&&(D=u.parseObjectValue(A["font-scale"],w,"font-scale",Cn),!D))return null;let P=null;if(A["text-font"]&&(P=u.parseObjectValue(A["text-font"],w,"text-font",Ss(Yr)),!P))return null;let B=null;if(A["text-color"]&&(B=u.parseObjectValue(A["text-color"],w,"text-color",Bs),!B))return null;const j=g[g.length-1];j.scale=D,j.font=P,j.textColor=B}else{const D=u.parse(o[w],w,ii);if(!D)return null;const P=D.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,g.push({content:D,scale:null,font:null,textColor:null})}}return new An(g)}evaluate(o){return new ss(this.sections.map(u=>{const h=u.content.evaluate(o);return wg(to(h),vd)?new Sg("",h,null,null,null):new Sg(ju(h),null,u.scale?u.scale.evaluate(o):null,u.font?u.font.evaluate(o).join(","):null,u.textColor?u.textColor.evaluate(o):null)}))}eachChild(o){for(const u of this.sections)o(u.content),u.scale&&o(u.scale),u.font&&o(u.font),u.textColor&&o(u.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const u of this.sections){o.push(u.content.serialize());const h={};u.scale&&(h["font-scale"]=u.scale.serialize()),u.font&&(h["text-font"]=u.font.serialize()),u.textColor&&(h["text-color"]=u.textColor.serialize()),o.push(h)}return o}}class bd{constructor(o,u,h,g){this._imageWarnHistory={},this.type=vd,this.namePrimary=o,this.nameSecondary=u,h&&(this.paramsPrimary=h.params,this.iconsetIdPrimary=h.iconset?h.iconset.id:void 0),g&&(this.paramsSecondary=g.params,this.iconsetIdSecondary=g.iconset?g.iconset.id:void 0)}static parse(o,u){if(o.length<2)return u.error("Expected two or more arguments.");let h=1;const g=[];function b(){if(h<o.length){const A=u.parse(o[h],h++,Yr);return A?(g.push({image:A,options:{}}),!0):(u.error(g.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function w(){if(h<o.length){const D=o[h];if((A=D)===null||typeof A!="object"||Array.isArray(A))return!0;const P=D.params,B=D.iconset,j=u.concat(h);if(!P&&!B)return h++,!0;if(P){if(typeof P!="object"||P.constructor!==Object)return j.error('Image options "params" should be an object'),!1;const $={},G=j.concat(void 0,"params");for(const Z in P){if(!Z)return G.error("Image parameter name should be non-empty"),!1;const se=G.concat(void 0,Z).parse(P[Z],void 0,Bs,void 0,{typeAnnotation:"coerce"});if(!se)return!1;$[Z]=se}g[g.length-1].options.params=$}if(B){if(typeof B!="object"||B.constructor!==Object)return j.error('Image options "iconset" should be an object'),!1;if(!B.id)return j.error('Image options "iconset" should have an "id" property'),!1;g[g.length-1].options.iconset=B}return h++,!0}var A;return!0}for(let A=0;A<2;A++)if(!b()||!w())return;return new bd(g[0].image,g[1]?g[1].image:void 0,g[0].options,g[1]?g[1].options:void 0)}evaluateParams(o,u){const h={};if(u){for(const g in u)if(u[g])try{h[g]=u[g].evaluate(o)}catch{continue}if(Object.keys(h).length!==0)return{params:h}}}evaluate(o){const u={name:this.namePrimary.evaluate(o),iconsetId:this.iconsetIdPrimary},h=this.nameSecondary?{name:this.nameSecondary.evaluate(o),iconsetId:this.iconsetIdSecondary}:void 0,g=nl.build(u,h,this.paramsPrimary?this.evaluateParams(o,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(o,this.paramsSecondary):void 0);if(g&&o.availableImages){const b=g.getPrimary().id;if(g.available=o.availableImages.some(w=>ws.isEqual(w,b)),g.available){const w=g.getSecondary()?g.getSecondary().id:null;w&&(g.available=o.availableImages.some(A=>ws.isEqual(A,w)))}}return g}eachChild(o){if(o(this.namePrimary),this.paramsPrimary)for(const u in this.paramsPrimary)this.paramsPrimary[u]&&o(this.paramsPrimary[u]);if(this.nameSecondary&&(o(this.nameSecondary),this.paramsSecondary))for(const u in this.paramsSecondary)this.paramsSecondary[u]&&o(this.paramsSecondary[u])}outputDefined(){return!1}serializeOptions(o,u){const h={};if(u&&(h.iconset={id:u}),o){h.params={};for(const g in o)o[g]&&(h.params[g]=o[g].serialize())}return Object.keys(h).length>0?h:void 0}serialize(){const o=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const u=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);u&&o.push(u)}if(this.nameSecondary&&(o.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const u=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);u&&o.push(u)}return o}}function qn(c){return $p(c)?"string":jn(c)?"number":C_(c)?"boolean":Array.isArray(c)?"array":c===null?"null":Up(c)?"object":typeof c}function Up(c){return c!=null&&!Array.isArray(c)&&typeof c!="function"&&!(c instanceof String||c instanceof Number||c instanceof Boolean)&&typeof c=="object"}function $p(c){return typeof c=="string"||c instanceof String}function jn(c){return typeof c=="number"||c instanceof Number}function C_(c){return typeof c=="boolean"||c instanceof Boolean}const T0={"to-boolean":qr,"to-color":Bs,"to-number":Cn,"to-string":Yr};class Oc{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const h=o[0],g=[];let b=tl;if(h==="to-array"){if(!Array.isArray(o[1]))return null;const w=o[1].length;if(u.expectedType){if(u.expectedType.kind!=="array")return u.error(`Expected ${u.expectedType.kind} but found array.`);b=Ss(u.expectedType.itemType,w)}else{if(!(w>0&&uh(o[1][0])))return null;b=Ss(to(o[1][0]),w)}for(let A=0;A<w;A++){const D=o[1][A];let P;if(Array.isArray(D))P=u.parse(D,void 0,b.itemType);else{const B=qn(D);if(B!==b.itemType.kind)return u.error(`Expected ${b.itemType.kind} but found ${B}.`);P=u.registry.literal.parse(["literal",D===void 0?null:D],u)}if(!P)return null;g.push(P)}}else{if((h==="to-boolean"||h==="to-string")&&o.length!==2)return u.error("Expected one argument.");b=T0[h];for(let w=1;w<o.length;w++){const A=u.parse(o[w],w,ii);if(!A)return null;g.push(A)}}return new Oc(b,g)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let u,h;for(const g of this.args){if(u=g.evaluate(o),h=null,u instanceof Qr)return u;if(typeof u=="string"){const b=o.parseColor(u);if(b)return b}else if(Array.isArray(u)&&(h=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:S0(u[0],u[1],u[2],u[3]),!h))return new Qr(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Ca(h||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const h of this.args){if(u=h.evaluate(o),u===null)return 0;const g=Number(u);if(!isNaN(g))return g}throw new Ca(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?ss.fromString(ju(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?nl.build(ju(this.args[0].evaluate(o))):this.type.kind==="array"?this.args.map(u=>u.evaluate(o)):ju(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if(this.type.kind==="formatted")return new An([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new bd(this.args[0]).serialize();const o=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(u=>{o.push(u.serialize())}),o}}const Qx=["Unknown","Point","LineString","Polygon"];class Vp{constructor(o,u,h){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=o,this.options=u,this.iconImageUseTheme=h}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Qx[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(o){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,u=this.featureDistanceData.scale,{x:h,y:g}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(h*u-o[0])+this.featureDistanceData.bearing[1]*(g*u-o[1])}return 0}parseColor(o){let u=this._parseColorCache[o];return u||(u=this._parseColorCache[o]=Qr.parse(o)),u}getConfig(o){return this.options?this.options.get(o):null}}class rl{constructor(o,u,h,g,b){this.name=o,this.type=u,this._evaluate=h,this.args=g,this._overloadIndex=b}evaluate(o){if(!this._evaluate){const u=rl.definitions[this.name];this._evaluate=Array.isArray(u)?u[2]:u.overloads[this._overloadIndex][1]}return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,u){const h=o[0],g=rl.definitions[h];if(!g)return u.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,A=[];let D=null,P=-1;for(const[B,j]of w){if(Array.isArray(B)&&B.length!==o.length-1)continue;A.push(B),P++,D=new Ig(u.registry,u.path,null,u.scope,void 0,u._scope,u.options,u.iconImageUseTheme);const $=[];let G=!1;for(let Z=1;Z<o.length;Z++){const se=o[Z],fe=Array.isArray(B)?B[Z-1]:B.type,ue=D.parse(se,1+$.length,fe);if(!ue){G=!0;break}$.push(ue)}if(!G)if(Array.isArray(B)&&B.length!==$.length)D.error(`Expected ${B.length} arguments, but found ${$.length} instead.`);else{for(let Z=0;Z<$.length;Z++){const se=Array.isArray(B)?B[Z]:B.type,fe=$[Z];D.concat(Z+1).checkSubtype(se,fe.type)}if(D.errors.length===0)return new rl(h,b,j,$,P)}}if(A.length===1)u.errors.push(...D.errors);else{const B=(A.length?A:w.map(([$])=>$)).map(il).join(" | "),j=[];for(let $=1;$<o.length;$++){const G=u.parse(o[$],1+j.length);if(!G)return null;j.push(Oa(G.type))}u.error(`Expected arguments of type ${B}, but found (${j.join(", ")}) instead.`)}return null}static register(o,u){rl.definitions=u;for(const h in u)o[h]=rl}}function il(c){return Array.isArray(c)?`(${c.map(Oa).join(", ")})`:`(${Oa(c.type)}...)`}class Tl{constructor(o,u,h){this.type=A_,this.locale=h,this.caseSensitive=o,this.diacriticSensitive=u}static parse(o,u){if(o.length!==2)return u.error("Expected one argument.");const h=o[1];if(typeof h!="object"||Array.isArray(h))return u.error("Collator options argument must be an object.");const g=h["case-sensitive"]===void 0?u.parse(!1,1,qr):u.parseObjectValue(h["case-sensitive"],1,"case-sensitive",qr);if(!g)return null;const b=h["diacritic-sensitive"]===void 0?u.parse(!1,1,qr):u.parseObjectValue(h["diacritic-sensitive"],1,"diacritic-sensitive",qr);if(!b)return null;let w=null;return h.locale&&(w=u.parseObjectValue(h.locale,1,"locale",Yr),!w)?null:new Tl(g,b,w)}evaluate(o){return new O_(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}function Tg(c,o,u=0,h=c.length-1,g=mf){for(;h>u;){if(h-u>600){const D=h-u+1,P=o-u+1,B=Math.log(D),j=.5*Math.exp(2*B/3),$=.5*Math.sqrt(B*j*(D-j)/D)*(P-D/2<0?-1:1);Tg(c,o,Math.max(u,Math.floor(o-P*j/D+$)),Math.min(h,Math.floor(o+(D-P)*j/D+$)),g)}const b=c[o];let w=u,A=h;for($l(c,u,o),g(c[h],b)>0&&$l(c,u,h);w<A;){for($l(c,w,A),w++,A--;g(c[w],b)<0;)w++;for(;g(c[A],b)>0;)A--}g(c[u],b)===0?$l(c,u,A):(A++,$l(c,A,h)),A<=o&&(u=A+1),o<=A&&(h=A-1)}}function $l(c,o,u){const h=c[o];c[o]=c[u],c[u]=h}function mf(c,o){return c<o?-1:c>o?1:0}function Jx(c){let o=0;for(let u,h,g=0,b=c.length,w=b-1;g<b;w=g++)u=c[g],h=c[w],o+=(h.x-u.x)*(u.y+h.y);return o}function xd(c,o){c[0]=Math.min(c[0],o[0]),c[1]=Math.min(c[1],o[1]),c[2]=Math.max(c[2],o[0]),c[3]=Math.max(c[3],o[1])}function Eg(c,o){return!(c[0]<=o[0]||c[2]>=o[2]||c[1]<=o[1]||c[3]>=o[3])}function gf(c,o,u){const h=c[0]-o[0],g=c[1]-o[1],b=c[0]-u[0],w=c[1]-u[1];return h*w-b*g===0&&h*b<=0&&g*w<=0}function M_(c,o,u){return o[1]>c[1]!=u[1]>c[1]&&c[0]<(u[0]-o[0])*(c[1]-o[1])/(u[1]-o[1])+o[0]}function js(c,o,u=!1){let h=!1;for(let g=0,b=o.length;g<b;g++){const w=o[g];for(let A=0,D=w.length,P=D-1;A<D;P=A++){const B=w[P],j=w[A];if(gf(c,B,j))return u;M_(c,B,j)&&(h=!h)}}return h}function D_(c,o,u,h){const g=h[0]-u[0],b=h[1]-u[1],w=(c[0]-u[0])*b-g*(c[1]-u[1]),A=(o[0]-u[0])*b-g*(o[1]-u[1]);return w>0&&A<0||w<0&&A>0}function Ag(c,o,u,h){return(g=[h[0]-u[0],h[1]-u[1]])[0]*(b=[o[0]-c[0],o[1]-c[1]])[1]-g[1]*b[0]!==0&&!(!D_(c,o,u,h)||!D_(u,h,c,o));var g,b}function Uu(c){const o=new Vt(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),u=new Vt(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const h of c[0])o.x>h.x&&(o.x=h.x),o.y>h.y&&(o.y=h.y),u.x<h.x&&(u.x=h.x),u.y<h.y&&(u.y=h.y);return{min:o,max:u}}const Vl=8192;function E0(c,o){const u=(180+c[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(u*g*Vl),Math.round(h*g*Vl)]}function A0(c,o){for(let u=0;u<o.length;u++)if(js(c,o[u]))return!0;return!1}function wd(c,o,u){for(const h of u)for(let g=0,b=h.length,w=b-1;g<b;w=g++)if(Ag(c,o,h[w],h[g]))return!0;return!1}function I_(c,o){for(let u=0;u<c.length;++u)if(!js(c[u],o))return!1;for(let u=0;u<c.length-1;++u)if(wd(c[u],c[u+1],o))return!1;return!0}function e1(c,o){for(let u=0;u<o.length;u++)if(I_(c,o[u]))return!0;return!1}function Cc(c,o,u){const h=[];for(let g=0;g<c.length;g++){const b=[];for(let w=0;w<c[g].length;w++){const A=E0(c[g][w],u);xd(o,A),b.push(A)}h.push(b)}return h}function t1(c,o,u){const h=[];for(let g=0;g<c.length;g++){const b=Cc(c[g],o,u);h.push(b)}return h}function n1(c,o,u,h){if(c[0]<u[0]||c[0]>u[2]){const g=.5*h;let b=c[0]-u[0]>g?-h:u[0]-c[0]>g?h:0;b===0&&(b=c[0]-u[2]>g?-h:u[2]-c[0]>g?h:0),c[0]+=b}xd(o,c)}function P_(c,o,u,h){const g=Math.pow(2,h.z)*Vl,b=[h.x*Vl,h.y*Vl],w=[];if(!c)return w;for(const A of c)for(const D of A){const P=[D.x+b[0],D.y+b[1]];n1(P,o,u,g),w.push(P)}return w}function R_(c,o,u,h){const g=Math.pow(2,h.z)*Vl,b=[h.x*Vl,h.y*Vl],w=[];if(!c)return w;for(const D of c){const P=[];for(const B of D){const j=[B.x+b[0],B.y+b[1]];xd(o,j),P.push(j)}w.push(P)}if(o[2]-o[0]<=g/2){(A=o)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const D of w)for(const P of D)n1(P,o,u,g)}var A;return w}class yf{constructor(o,u){this.type=qr,this.geojson=o,this.geometries=u}static parse(o,u){if(o.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(uh(o[1])){const h=o[1];if(h.type==="FeatureCollection")for(let g=0;g<h.features.length;++g){const b=h.features[g].geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new yf(h,h.features[g].geometry)}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new yf(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new yf(h,h)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return(function(u,h){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(!w)return!1;if(h.type==="Polygon"){const A=Cc(h.coordinates,b,w),D=P_(u.geometry(),g,b,w);if(!Eg(g,b))return!1;for(const P of D)if(!js(P,A))return!1}if(h.type==="MultiPolygon"){const A=t1(h.coordinates,b,w),D=P_(u.geometry(),g,b,w);if(!Eg(g,b))return!1;for(const P of D)if(!A0(P,A))return!1}return!0})(o,this.geometries);if(o.geometryType()==="LineString")return(function(u,h){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(!w)return!1;if(h.type==="Polygon"){const A=Cc(h.coordinates,b,w),D=R_(u.geometry(),g,b,w);if(!Eg(g,b))return!1;for(const P of D)if(!I_(P,A))return!1}if(h.type==="MultiPolygon"){const A=t1(h.coordinates,b,w),D=R_(u.geometry(),g,b,w);if(!Eg(g,b))return!1;for(const P of D)if(!e1(P,A))return!1}return!0})(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Us={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},ql=1/298.257223563,qp=ql*(2-ql),Ts=Math.PI/180;class $u{static fromTile(o,u,h){const g=Math.PI*(1-2*(o+.5)/Math.pow(2,u)),b=Math.atan(.5*(Math.exp(g)-Math.exp(-g)))/Ts;return new $u(b,h)}static get units(){return Us}constructor(o,u){if(o===void 0)throw new Error("No latitude given.");if(u&&!Us[u])throw new Error(`Unknown unit ${u}. Use one of: ${Object.keys(Us).join(", ")}`);const h=6378.137*Ts*(u?Us[u]:1),g=Math.cos(o*Ts),b=1/(1-qp*(1-g*g)),w=Math.sqrt(b);this.kx=h*w*g,this.ky=h*w*b*(1-qp)}distance(o,u){const h=$s(o[0]-u[0])*this.kx,g=(o[1]-u[1])*this.ky;return Math.sqrt(h*h+g*g)}bearing(o,u){const h=$s(u[0]-o[0])*this.kx;return Math.atan2(h,(u[1]-o[1])*this.ky)/Ts}destination(o,u,h){const g=h*Ts;return this.offset(o,Math.sin(g)*u,Math.cos(g)*u)}offset(o,u,h){return[o[0]+u/this.kx,o[1]+h/this.ky]}lineDistance(o){let u=0;for(let h=0;h<o.length-1;h++)u+=this.distance(o[h],o[h+1]);return u}area(o){let u=0;for(let h=0;h<o.length;h++){const g=o[h];for(let b=0,w=g.length,A=w-1;b<w;A=b++)u+=$s(g[b][0]-g[A][0])*(g[b][1]+g[A][1])*(h?-1:1)}return Math.abs(u)/2*this.kx*this.ky}along(o,u){let h=0;if(u<=0)return o[0];for(let g=0;g<o.length-1;g++){const b=o[g],w=o[g+1],A=this.distance(b,w);if(h+=A,h>u)return Sd(b,w,(u-(h-A))/A)}return o[o.length-1]}pointToSegmentDistance(o,u,h){let[g,b]=u,w=$s(h[0]-g)*this.kx,A=(h[1]-b)*this.ky;if(w!==0||A!==0){const D=($s(o[0]-g)*this.kx*w+(o[1]-b)*this.ky*A)/(w*w+A*A);D>1?(g=h[0],b=h[1]):D>0&&(g+=w/this.kx*D,b+=A/this.ky*D)}return w=$s(o[0]-g)*this.kx,A=(o[1]-b)*this.ky,Math.sqrt(w*w+A*A)}pointOnLine(o,u){let h=1/0,g=o[0][0],b=o[0][1],w=0,A=0;for(let D=0;D<o.length-1;D++){let P=o[D][0],B=o[D][1],j=$s(o[D+1][0]-P)*this.kx,$=(o[D+1][1]-B)*this.ky,G=0;j===0&&$===0||(G=($s(u[0]-P)*this.kx*j+(u[1]-B)*this.ky*$)/(j*j+$*$),G>1?(P=o[D+1][0],B=o[D+1][1]):G>0&&(P+=j/this.kx*G,B+=$/this.ky*G)),j=$s(u[0]-P)*this.kx,$=(u[1]-B)*this.ky;const Z=j*j+$*$;Z<h&&(h=Z,g=P,b=B,w=D,A=G)}return{point:[g,b],index:w,t:Math.max(0,Math.min(1,A))}}lineSlice(o,u,h){let g=this.pointOnLine(h,o),b=this.pointOnLine(h,u);if(g.index>b.index||g.index===b.index&&g.t>b.t){const P=g;g=b,b=P}const w=[g.point],A=g.index+1,D=b.index;!Og(h[A],w[0])&&A<=D&&w.push(h[A]);for(let P=A+1;P<=D;P++)w.push(h[P]);return Og(h[D],b.point)||w.push(b.point),w}lineSliceAlong(o,u,h){let g=0;const b=[];for(let w=0;w<h.length-1;w++){const A=h[w],D=h[w+1],P=this.distance(A,D);if(g+=P,g>o&&b.length===0&&b.push(Sd(A,D,(o-(g-P))/P)),g>=u)return b.push(Sd(A,D,(u-(g-P))/P)),b;g>o&&b.push(D)}return b}bufferPoint(o,u){const h=u/this.ky,g=u/this.kx;return[o[0]-g,o[1]-h,o[0]+g,o[1]+h]}bufferBBox(o,u){const h=u/this.ky,g=u/this.kx;return[o[0]-g,o[1]-h,o[2]+g,o[3]+h]}insideBBox(o,u){return $s(o[0]-u[0])>=0&&$s(o[0]-u[2])<=0&&o[1]>=u[1]&&o[1]<=u[3]}}function Og(c,o){return c[0]===o[0]&&c[1]===o[1]}function Sd(c,o,u){const h=$s(o[0]-c[0]);return[c[0]+h*u,c[1]+(o[1]-c[1])*u]}function $s(c){for(;c<-180;)c+=360;for(;c>180;)c-=360;return c}class Td{constructor(o=[],u=(h,g)=>h<g?-1:h>g?1:0){if(this.data=o,this.length=this.data.length,this.compare=u,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:u,compare:h}=this,g=u[o];for(;o>0;){const b=o-1>>1,w=u[b];if(h(g,w)>=0)break;u[o]=w,o=b}u[o]=g}_down(o){const{data:u,compare:h}=this,g=this.length>>1,b=u[o];for(;o<g;){let w=1+(o<<1);const A=w+1;if(A<this.length&&h(u[A],u[w])<0&&(w=A),h(u[w],b)>=0)break;u[o]=u[w],o=w}u[o]=b}}var Jt=8192;function k_(c,o){return o.dist-c.dist}function Hp(c){const o=[1/0,1/0,-1/0,-1/0];if(o.length!==c.length)return!1;for(let u=0;u<o.length;u++)if(o[u]!==c[u])return!1;return!0}function Mc(c){return c[1]-c[0]+1}function Dc(c,o){const u=c[1]>=c[0]&&c[1]<o;return u||console.warn("Distance Expression: Index is out of range"),u}function al(c,o){if(c[0]>c[1])return[null,null];const u=Mc(c);if(o){if(u===2)return[c,null];const h=Math.floor(u/2);return[[c[0],c[0]+h],[c[0]+h,c[1]]]}{if(u===1)return[c,null];const h=Math.floor(u/2)-1;return[[c[0],c[0]+h],[c[0]+h+1,c[1]]]}}function _f(c,o){const u=[1/0,1/0,-1/0,-1/0];if(!Dc(o,c.length))return u;for(let h=o[0];h<=o[1];++h)xd(u,c[h]);return u}function ol(c){const o=[1/0,1/0,-1/0,-1/0];for(let u=0;u<c.length;++u)for(let h=0;h<c[u].length;++h)xd(o,c[u][h]);return o}function vf(c,o,u){if(Hp(c)||Hp(o))return NaN;let h=0,g=0;return c[2]<o[0]&&(h=o[0]-c[2]),c[0]>o[2]&&(h=c[0]-o[2]),c[1]>o[3]&&(g=c[1]-o[3]),c[3]<o[1]&&(g=o[1]-c[3]),u.distance([0,0],[h,g])}function Ed(c){return 360*c-180}function fh(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function Gp(c,o){const u=Math.pow(2,o.z),h=(c.y/Jt+o.y)/u;return[Ed((c.x/Jt+o.x)/u),fh(h)]}function r1(c,o){const u=[];for(let h=0;h<c.length;++h)u.push(Gp(c[h],o));return u}function L_(c,o,u){const h=u.pointOnLine(o,c).point;return u.distance(c,h)}function z_(c,o,u,h,g){const b=u.slice(h[0],h[1]+1);let w=1/0;for(let A=o[0];A<=o[1];++A)if((w=Math.min(w,L_(c[A],b,g)))===0)return 0;return w}function Wo(c,o,u,h,g){const b=Math.min(g.pointToSegmentDistance(c,u,h),g.pointToSegmentDistance(o,u,h)),w=Math.min(g.pointToSegmentDistance(u,c,o),g.pointToSegmentDistance(h,c,o));return Math.min(b,w)}function xr(c,o,u,h,g){if(!Dc(o,c.length)||!Dc(h,u.length))return NaN;let b=1/0;for(let w=o[0];w<o[1];++w)for(let A=h[0];A<h[1];++A){if(Ag(c[w],c[w+1],u[A],u[A+1]))return 0;b=Math.min(b,Wo(c[w],c[w+1],u[A],u[A+1],g))}return b}function Yp(c,o,u,h,g){if(!Dc(o,c.length)||!Dc(h,u.length))return NaN;let b=1/0;for(let w=o[0];w<=o[1];++w)for(let A=h[0];A<=h[1];++A)if((b=Math.min(b,g.distance(c[w],u[A])))===0)return b;return b}function F_(c,o,u){if(js(c,o,!0))return 0;let h=1/0;for(const g of o){const b=g.length;if(b<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(g[0]!==g[b-1]&&(h=Math.min(h,u.pointToSegmentDistance(c,g[b-1],g[0])))===0||(h=Math.min(h,L_(c,g,u)))===0)return h}return h}function Cg(c,o,u,h){if(!Dc(o,c.length))return NaN;for(let b=o[0];b<=o[1];++b)if(js(c[b],u,!0))return 0;let g=1/0;for(let b=o[0];b<o[1];++b)for(const w of u)for(let A=0,D=w.length,P=D-1;A<D;P=A++){if(Ag(c[b],c[b+1],w[P],w[A]))return 0;g=Math.min(g,Wo(c[b],c[b+1],w[P],w[A],h))}return g}function El(c,o){for(const u of c)for(let h=0;h<=u.length-1;++h)if(js(u[h],o,!0))return!0;return!1}function fu(c,o,u,h=1/0){const g=ol(c),b=ol(o);if(h!==1/0&&vf(g,b,u)>=h)return h;if(Eg(g,b)){if(El(c,o))return 0}else if(El(o,c))return 0;let w=h;for(const A of c)for(let D=0,P=A.length,B=P-1;D<P;B=D++)for(const j of o)for(let $=0,G=j.length,Z=G-1;$<G;Z=$++){if(Ag(A[B],A[D],j[Z],j[$]))return 0;w=Math.min(w,Wo(A[B],A[D],j[Z],j[$],u))}return w}function ci(c,o,u,h,g,b,w){if(b===null||w===null)return;const A=vf(_f(h,b),_f(g,w),u);A<o&&c.push({dist:A,range1:b,range2:w})}function Ic(c,o,u,h,g=1/0){let b=Math.min(h.distance(c[0],u[0][0]),g);if(b===0)return b;const w=new Td([{dist:0,range1:[0,c.length-1],range2:[0,0]}],k_),A=o?50:100,D=ol(u);for(;w.length;){const P=w.pop();if(P.dist>=b)continue;const B=P.range1;if(Mc(B)<=A){if(!Dc(B,c.length))return NaN;if(o){const j=Cg(c,B,u,h);if((b=Math.min(b,j))===0)return b}else for(let j=B[0];j<=B[1];++j){const $=F_(c[j],u,h);if((b=Math.min(b,$))===0)return b}}else{const j=al(B,o);if(j[0]!==null){const $=vf(_f(c,j[0]),D,h);$<b&&w.push({dist:$,range1:j[0],range2:[0,0]})}if(j[1]!==null){const $=vf(_f(c,j[1]),D,h);$<b&&w.push({dist:$,range1:j[1],range2:[0,0]})}}}return b}function Vu(c,o,u,h,g,b=1/0){let w=Math.min(b,g.distance(c[0],u[0]));if(w===0)return w;const A=new Td([{dist:0,range1:[0,c.length-1],range2:[0,u.length-1]}],k_),D=o?50:100,P=h?50:100;for(;A.length;){const B=A.pop();if(B.dist>=w)continue;const j=B.range1,$=B.range2;if(Mc(j)<=D&&Mc($)<=P){if(!Dc(j,c.length)||!Dc($,u.length))return NaN;if(o&&h?w=Math.min(w,xr(c,j,u,$,g)):o||h?o&&!h?w=Math.min(w,z_(u,$,c,j,g)):!o&&h&&(w=Math.min(w,z_(c,j,u,$,g))):w=Math.min(w,Yp(c,j,u,$,g)),w===0)return w}else{const G=al(j,o),Z=al($,h);ci(A,w,g,c,u,G[0],Z[0]),ci(A,w,g,c,u,G[0],Z[1]),ci(A,w,g,c,u,G[1],Z[0]),ci(A,w,g,c,u,G[1],Z[1])}}return w}function qu(c,o,u,h,g=1/0){let b=g;const w=_f(c,[0,c.length-1]);for(const A of u)if(!(b!==1/0&&vf(w,_f(A,[0,A.length-1]),h)>=b)&&(b=Math.min(b,Vu(c,o,A,!0,h,b)),b===0))return b;return b}function Mg(c,o,u,h,g=1/0){let b=g;const w=_f(c,[0,c.length-1]);for(const A of u){if(b!==1/0&&vf(w,ol(A),h)>=b)continue;const D=Ic(c,o,A,h,b);if(isNaN(D))return D;if((b=Math.min(b,D))===0)return b}return b}function Dg(c){return c==="Point"||c==="MultiPoint"||c==="LineString"||c==="MultiLineString"||c==="Polygon"||c==="MultiPolygon"}class bf{constructor(o,u){this.type=Cn,this.geojson=o,this.geometries=u}static parse(o,u){if(o.length!==2)return u.error(`'distance' expression requires either one argument, but found ' ${o.length-1} instead.`);if(uh(o[1])){const h=o[1];if(h.type==="FeatureCollection"){for(let g=0;g<h.features.length;++g)if(Dg(h.features[g].geometry.type))return new bf(h,h.features[g].geometry)}else if(h.type==="Feature"){if(Dg(h.geometry.type))return new bf(h,h.geometry)}else if(Dg(h.type))return new bf(h,h)}return u.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(o){const u=o.geometry(),h=o.canonicalID();if(u!=null&&h!=null){if(o.geometryType()==="Point")return(function(g,b,w){const A=[];for(const P of g)for(const B of P)A.push(Gp(B,b));const D=new $u(A[0][1],"meters");return w.type==="Point"||w.type==="MultiPoint"||w.type==="LineString"?Vu(A,!1,w.type==="Point"?[w.coordinates]:w.coordinates,w.type==="LineString",D):w.type==="MultiLineString"?qu(A,!1,w.coordinates,D):w.type==="Polygon"||w.type==="MultiPolygon"?Mg(A,!1,w.type==="Polygon"?[w.coordinates]:w.coordinates,D):null})(u,h,this.geometries);if(o.geometryType()==="LineString")return(function(g,b,w){const A=[];for(const P of g){const B=[];for(const j of P)B.push(Gp(j,b));A.push(B)}const D=new $u(A[0][0][1],"meters");if(w.type==="Point"||w.type==="MultiPoint"||w.type==="LineString")return qu(w.type==="Point"?[w.coordinates]:w.coordinates,w.type==="LineString",A,D);if(w.type==="MultiLineString"){let P=1/0;for(let B=0;B<w.coordinates.length;B++){const j=qu(w.coordinates[B],!0,A,D,P);if(isNaN(j))return j;if((P=Math.min(P,j))===0)return P}return P}if(w.type==="Polygon"||w.type==="MultiPolygon"){let P=1/0;for(let B=0;B<A.length;B++){const j=Mg(A[B],!0,w.type==="Polygon"?[w.coordinates]:w.coordinates,D,P);if(isNaN(j))return j;if((P=Math.min(P,j))===0)return P}return P}return null})(u,h,this.geometries);if(o.geometryType()==="Polygon")return(function(g,b,w){const A=[];for(const P of(function(B){const j=B.length;if(j<=1)return[B];const $=[];let G,Z;for(let se=0;se<j;se++){const fe=Jx(B[se]);fe!==0&&(B[se].area=Math.abs(fe),Z===void 0&&(Z=fe<0),Z===fe<0?(G&&$.push(G),G=[B[se]]):G.push(B[se]))}return G&&$.push(G),$})(g)){const B=[];for(let j=0;j<P.length;++j)B.push(r1(P[j],b));A.push(B)}const D=new $u(A[0][0][0][1],"meters");if(w.type==="Point"||w.type==="MultiPoint"||w.type==="LineString")return Mg(w.type==="Point"?[w.coordinates]:w.coordinates,w.type==="LineString",A,D);if(w.type==="MultiLineString"){let P=1/0;for(let B=0;B<w.coordinates.length;B++){const j=Mg(w.coordinates[B],!0,A,D,P);if(isNaN(j))return j;if((P=Math.min(P,j))===0)return P}return P}return w.type==="Polygon"||w.type==="MultiPolygon"?(function(P,B,j){let $=1/0;for(const G of P)for(const Z of B){const se=fu(G,Z,j,$);if(isNaN(se))return se;if(($=Math.min($,se))===0)return $}return $})(w.type==="Polygon"?[w.coordinates]:w.coordinates,A,D):null})(u,h,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Ad(c){if(c instanceof rl&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof yf||c instanceof bf)return!1;if(c instanceof hh)return c.featureConstant;let o=!0;return c.eachChild(u=>{o&&!Ad(u)&&(o=!1)}),o}function wo(c){if(c instanceof rl&&c.name==="feature-state")return!1;let o=!0;return c.eachChild(u=>{o&&!wo(u)&&(o=!1)}),o}function ua(c,o){if(c instanceof rl&&o.indexOf(c.name)>=0)return!1;let u=!0;return c.eachChild(h=>{u&&!ua(h,o)&&(u=!1)}),u}function Di(c,o,u){return[c,o,u].filter(Boolean).join("")}function Pc(c,o){switch(c){case"string":return ju(o);case"number":return+o;case"boolean":return!!o;case"color":return Qr.parse(o);case"formatted":return ss.fromString(ju(o));case"resolvedImage":return nl.build(ju(o))}return o}function Hl(c,o,u,h){return h!==void 0&&(c=h*Math.round(c/h)),o!==void 0&&c<o&&(c=o),u!==void 0&&c>u&&(c=u),c}class hh{constructor(o,u,h,g=!1){this.type=o,this.key=u,this.scope=h,this.featureConstant=g}static parse(o,u){let h=u.expectedType;if(h==null&&(h=ii),o.length<2||o.length>3)return u.error("Invalid number of arguments for 'config' expression.");const g=u.parse(o[1],1);if(!(g instanceof Ul))return u.error("Key name of 'config' expression must be a string literal.");let b,w=!0;const A=ju(g.value);if(o.length>=3){const D=u.parse(o[2],2);if(!(D instanceof Ul))return u.error("Scope of 'config' expression must be a string literal.");b=ju(D.value)}if(u.options){const D=Di(A,b,u._scope),P=u.options.get(D);P&&(w=Ad(P.value||P.default))}return new hh(h,A,b,w)}evaluate(o){const u=Di(this.key,this.scope,o.scope),h=o.getConfig(u);if(!h)return null;const{type:g,value:b,values:w,minValue:A,maxValue:D,stepValue:P}=h,B=h.default.evaluate(o);let j=B;if(b){const $=o.scope;o.scope=($||"").split("").slice(1).join(""),j=b.evaluate(o),o.scope=$}return g&&(j=Pc(g,j)),j===void 0||A===void 0&&D===void 0&&P===void 0||(typeof j=="number"?j=Hl(j,A,D,P):Array.isArray(j)&&(j=j.map($=>typeof $=="number"?Hl($,A,D,P):$))),b!==void 0&&j!==void 0&&w&&!w.includes(j)&&(j=B,g&&(j=Pc(g,j))),(g&&g!==this.type||j!==void 0&&!wg(to(j),this.type))&&(j=Pc(this.type.kind,j)),j}eachChild(){}outputDefined(){return!1}serialize(){const o=["config",this.key];return this.scope&&o.concat(this.scope),o}}class Hu{constructor(o,u){this.type=u.type,this.name=o,this.boundExpression=u}static parse(o,u){if(o.length!==2||typeof o[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const h=o[1];return u.scope.has(h)?new Hu(h,u.scope.get(h)):u.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ig{constructor(o,u=[],h,g=new E_,b=[],w,A,D){this.registry=o,this.path=u,this.key=u.map(P=>typeof P=="string"?`['${P}']`:`[${P}]`).join(""),this.scope=g,this.errors=b,this.expectedType=h,this._scope=w,this.options=A,this.iconImageUseTheme=D}parse(o,u,h,g,b={}){return u||h?this.concat(u,null,h,g)._parse(o,b):this._parse(o,b)}parseObjectValue(o,u,h,g,b,w={}){return this.concat(u,h,g,b)._parse(o,w)}_parse(o,u){function h(g,b,w){return w==="assert"?new Gn(b,[g]):w==="coerce"?new Oc(b,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=typeof o[0]=="string"?this.registry[o[0]]:void 0;if(g){let b=g.parse(o,this);if(!b)return null;if(this.expectedType){const w=this.expectedType,A=b.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||A.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string"){if(this.checkSubtype(w,A))return null}else b=h(b,w,u.typeAnnotation||"coerce");else b=h(b,w,u.typeAnnotation||"assert")}if(!(b instanceof Ul)&&b.type.kind!=="resolvedImage"&&N_(b)){const w=new Vp(this._scope,this.options,this.iconImageUseTheme);try{b=new Ul(b.type,b.evaluate(w))}catch(A){return this.error(A.message),null}}return b}return Oc.parse(["to-array",o],this)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,u,h,g){let b=typeof o=="number"?this.path.concat(o):this.path;b=typeof u=="string"?b.concat(u):b;const w=g?this.scope.concat(g):this.scope;return new Ig(this.registry,b,h||null,w,this.errors,this._scope,this.options,this.iconImageUseTheme)}error(o,...u){const h=`${this.key}${u.map(g=>`[${g}]`).join("")}`;this.errors.push(new os(h,o))}checkSubtype(o,u){const h=pf(o,u);return h&&this.error(h),h}}function N_(c){if(c instanceof Hu)return N_(c.boundExpression);if(c instanceof rl&&c.name==="error"||c instanceof Tl||c instanceof yf||c instanceof bf||c instanceof hh)return!1;const o=c instanceof Oc||c instanceof Gn;let u=!0;return c.eachChild(h=>{u=o?u&&N_(h):u&&h instanceof Ul}),!!u&&Ad(c)&&ua(c,["zoom","heatmap-density","worldview","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function xf(c,o){const u=c.length-1;let h,g,b=0,w=u,A=0;for(;b<=w;)if(A=Math.floor((b+w)/2),h=c[A],g=c[A+1],h<=o){if(A===u||o<g)return A;b=A+1}else{if(!(h>o))throw new Ca("Input is not a number.");w=A-1}return 0}class Gu{constructor(o,u,h){this.type=o,this.input=u,this.labels=[],this.outputs=[];for(const[g,b]of h)this.labels.push(g),this.outputs.push(b)}static parse(o,u){if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");const h=u.parse(o[1],1,Cn);if(!h)return null;const g=[];let b=null;u.expectedType&&u.expectedType.kind!=="value"&&(b=u.expectedType);for(let w=1;w<o.length;w+=2){const A=w===1?-1/0:o[w],D=o[w+1],P=w,B=w+1;if(typeof A!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(g.length&&g[g.length-1][0]>=A)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const j=u.parse(D,B,b);if(!j)return null;b=b||j.type,g.push([A,j])}return new Gu(b,h,g)}evaluate(o){const u=this.labels,h=this.outputs;if(u.length===1)return h[0].evaluate(o);const g=this.input.evaluate(o);if(g<=u[0])return h[0].evaluate(o);const b=u.length;return g>=u[b-1]?h[b-1].evaluate(o):h[xf(u,g)].evaluate(o)}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&o.push(this.labels[u]),o.push(this.outputs[u].serialize());return o}}const B_=.95047,Wp=1.08883,j_=4/29,hu=6/29,Rc=3*hu*hu,dh=hu*hu*hu,wf=Math.PI/180,O0=180/Math.PI;function Pg(c){return c>dh?Math.pow(c,1/3):c/Rc+j_}function ph(c){return c>hu?c*c*c:Rc*(c-j_)}function Xp(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function Sf(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function ls(c){const o=Sf(c.r),u=Sf(c.g),h=Sf(c.b),g=Pg((.4124564*o+.3575761*u+.1804375*h)/B_),b=Pg((.2126729*o+.7151522*u+.072175*h)/1);return{l:116*b-16,a:500*(g-b),b:200*(b-Pg((.0193339*o+.119192*u+.9503041*h)/Wp)),alpha:c.a}}function Od(c){let o=(c.l+16)/116,u=isNaN(c.a)?o:o+c.a/500,h=isNaN(c.b)?o:o-c.b/200;return o=1*ph(o),u=B_*ph(u),h=Wp*ph(h),new Qr(Xp(3.2404542*u-1.5371385*o-.4985314*h),Xp(-.969266*u+1.8760108*o+.041556*h),Xp(.0556434*u-.2040259*o+1.0572252*h),c.alpha)}function Rg(c,o,u){const h=o-c;return c+u*(h>180||h<-180?h-360*Math.round(h/360):h)}const Zp={forward:ls,reverse:Od,interpolate:function(c,o,u){return{l:Vn(c.l,o.l,u),a:Vn(c.a,o.a,u),b:Vn(c.b,o.b,u),alpha:Vn(c.alpha,o.alpha,u)}}},kg={forward:function(c){const{l:o,a:u,b:h}=ls(c),g=Math.atan2(h,u)*O0;return{h:g<0?g+360:g,c:Math.sqrt(u*u+h*h),l:o,alpha:c.a}},reverse:function(c){const o=c.h*wf,u=c.c;return Od({l:c.l,a:Math.cos(o)*u,b:Math.sin(o)*u,alpha:c.alpha})},interpolate:function(c,o,u){return{h:Rg(c.h,o.h,u),c:Vn(c.c,o.c,u),l:Vn(c.l,o.l,u),alpha:Vn(c.alpha,o.alpha,u)}}};var i1=Object.freeze({__proto__:null,hcl:kg,lab:Zp});class Yi{constructor(o,u,h,g,b){this.type=o,this.operator=u,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[w,A]of b)this.labels.push(w),this.outputs.push(A)}static interpolationFactor(o,u,h,g){let b=0;if(o.name==="exponential")b=Kp(u,o.base,h,g);else if(o.name==="linear")b=Kp(u,1,h,g);else if(o.name==="cubic-bezier"){const w=o.controlPoints;b=new wc(w[0],w[1],w[2],w[3]).solve(Kp(u,1,h,g))}return b}static parse(o,u){let[h,g,b,...w]=o;if(!Array.isArray(g)||g.length===0)return u.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const P=g[1];if(typeof P!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:P}}else{if(g[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const P=g.slice(1);if(P.length!==4||P.some(B=>typeof B!="number"||B<0||B>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:P}}}if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length-1>3&&(o.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(b=u.parse(b,2,Cn),!b)return null;const A=[];let D=null;h==="interpolate-hcl"||h==="interpolate-lab"?D=Bs:u.expectedType&&u.expectedType.kind!=="value"&&(D=u.expectedType);for(let P=0;P<w.length;P+=2){const B=w[P],j=w[P+1],$=P+3,G=P+4;if(typeof B!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(A.length&&A[A.length-1][0]>=B)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const Z=u.parse(j,G,D);if(!Z)return null;D=D||Z.type,A.push([B,Z])}return D.kind==="number"||D.kind==="color"||D.kind==="array"&&D.itemType.kind==="number"&&typeof D.N=="number"?new Yi(D,h,g,b,A):u.error(`Type ${Oa(D)} is not interpolatable.`)}evaluate(o){const u=this.labels,h=this.outputs;if(u.length===1)return h[0].evaluate(o);const g=this.input.evaluate(o);if(g<=u[0])return h[0].evaluate(o);const b=u.length;if(g>=u[b-1])return h[b-1].evaluate(o);const w=xf(u,g),A=Yi.interpolationFactor(this.interpolation,g,u[w],u[w+1]),D=h[w].evaluate(o),P=h[w+1].evaluate(o);return this.operator==="interpolate"?_d[this.type.kind.toLowerCase()](D,P,A):this.operator==="interpolate-hcl"?kg.reverse(kg.interpolate(kg.forward(D),kg.forward(P),A)):Zp.reverse(Zp.interpolate(Zp.forward(D),Zp.forward(P),A))}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const u=[this.operator,o,this.input.serialize()];for(let h=0;h<this.labels.length;h++)u.push(this.labels[h],this.outputs[h].serialize());return u}}function Kp(c,o,u,h){const g=h-u,b=c-u;return g===0?0:o===1?b/g:(Math.pow(o,b)-1)/(Math.pow(o,g)-1)}class Tf{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expectected at least one argument.");let h=null;const g=u.expectedType;g&&g.kind!=="value"&&(h=g);const b=[];for(const A of o.slice(1)){const D=u.parse(A,1+b.length,h,void 0,{typeAnnotation:"omit"});if(!D)return null;h=h||D.type,b.push(D)}const w=g&&b.some(A=>pf(g,A.type));return new Tf(w?ii:h,b)}evaluate(o){let u,h=null,g=0;for(const b of this.args){if(g++,h=b.evaluate(o),h&&h instanceof nl&&!h.available&&(u||(u=h),h=null,g===this.args.length))return u;if(h!==null)break}return h}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(u=>{o.push(u.serialize())}),o}}class Gl{constructor(o,u){this.type=u.type,this.bindings=[].concat(o),this.result=u}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const u of this.bindings)o(u[1]);o(this.result)}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const h=[];for(let b=1;b<o.length-1;b+=2){const w=o[b];if(typeof w!="string")return u.error(`Expected string, but found ${typeof w} instead.`,b);if(/[^a-zA-Z0-9_]/.test(w))return u.error("Variable names must contain only alphanumeric characters or '_'.",b);const A=u.parse(o[b+1],b+1);if(!A)return null;h.push([w,A])}const g=u.parse(o[o.length-1],o.length-1,u.expectedType,h);return g?new Gl(h,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[u,h]of this.bindings)o.push(u,h.serialize());return o.push(this.result.serialize()),o}}class Qp{constructor(o,u,h){this.type=o,this.index=u,this.input=h}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=u.parse(o[1],1,Cn),g=u.parse(o[2],2,Ss(u.expectedType||ii));return h&&g?new Qp(g.type.itemType,h,g):null}evaluate(o){const u=this.index.evaluate(o),h=this.input.evaluate(o);if(u<0)throw new Ca("Array index out of bounds: negative index");if(u>=h.length)throw new Ca("Array index out of bounds: index exceeds array size");if(u!==Math.floor(u))throw new Ca("Array index must be an integer. Use at-interpolated for fractional indices");return h[u]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Ef{constructor(o,u,h){this.type=o,this.index=u,this.input=h}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=u.parse(o[1],1,Cn),g=u.parse(o[2],2,Ss(u.expectedType||ii));return h&&g?new Ef(g.type.itemType,h,g):null}evaluate(o){const u=this.index.evaluate(o),h=this.input.evaluate(o);if(u<0)throw new Ca(`Array index out of bounds: ${u} < 0.`);if(u>h.length-1)throw new Ca(`Array index out of bounds: ${u} > ${h.length-1}.`);if(u===Math.floor(u))return h[u];const g=Math.floor(u),b=Math.ceil(u),w=h[g],A=h[b];if(typeof w!="number"||typeof A!="number")throw new Ca(`Cannot interpolate between non-number values at index ${u}.`);const D=u-g;return w*(1-D)+A*D}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class mh{constructor(o,u){this.type=qr,this.needle=o,this.haystack=u}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=u.parse(o[1],1,ii),g=u.parse(o[2],2,ii);return h&&g?w0(h.type,[qr,Yr,Cn,tl,ii])?new mh(h,g):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Oa(h.type)} instead`):null}evaluate(o){const u=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(h==null)return!1;if(!jp(u,["boolean","string","number","null"]))throw new Ca(`Expected first argument to be of type boolean, string, number or null, but found ${Oa(to(u))} instead.`);if(!jp(h,["string","array"]))throw new Ca(`Expected second argument to be of type array or string, but found ${Oa(to(h))} instead.`);return h.indexOf(u)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Jp{constructor(o,u,h){this.type=Cn,this.needle=o,this.haystack=u,this.fromIndex=h}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const h=u.parse(o[1],1,ii),g=u.parse(o[2],2,ii);if(!h||!g)return null;if(!w0(h.type,[qr,Yr,Cn,tl,ii]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Oa(h.type)} instead`);if(o.length===4){const b=u.parse(o[3],3,Cn);return b?new Jp(h,g,b):null}return new Jp(h,g)}evaluate(o){const u=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(!jp(u,["boolean","string","number","null"]))throw new Ca(`Expected first argument to be of type boolean, string, number or null, but found ${Oa(to(u))} instead.`);if(!jp(h,["string","array"]))throw new Ca(`Expected second argument to be of type array or string, but found ${Oa(to(h))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(o);return h.indexOf(u,g)}return h.indexOf(u)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class em{constructor(o,u,h,g,b,w){this.inputType=o,this.type=u,this.input=h,this.cases=g,this.outputs=b,this.otherwise=w}static parse(o,u){if(o.length<5)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return u.error("Expected an even number of arguments.");let h,g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const b={},w=[];for(let P=2;P<o.length-1;P+=2){let B=o[P];const j=o[P+1];Array.isArray(B)||(B=[B]);const $=u.concat(P);if(B.length===0)return $.error("Expected at least one branch label.");for(const Z of B){if(typeof Z!="number"&&typeof Z!="string")return $.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Z=="number"&&Math.floor(Z)!==Z)return $.error("Numeric branch labels must be integer values.");if(h){if($.checkSubtype(h,to(Z)))return null}else h=to(Z);if(b[String(Z)]!==void 0)return $.error("Branch labels must be unique.");b[String(Z)]=w.length}const G=u.parse(j,P,g);if(!G)return null;g=g||G.type,w.push(G)}const A=u.parse(o[1],1,ii);if(!A)return null;const D=u.parse(o[o.length-1],o.length-1,g);return D?A.type.kind!=="value"&&u.concat(1).checkSubtype(h,A.type)?null:new em(h,g,A,b,w,D):null}evaluate(o){const u=this.input.evaluate(o);return(wg(to(u),this.inputType)&&this.outputs[this.cases[u]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),h=[],g={};for(const w of u){const A=g[this.cases[w]];A===void 0?(g[this.cases[w]]=h.length,h.push([this.cases[w],[w]])):h[A][1].push(w)}const b=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,A]of h)o.push(A.length===1?b(A[0]):A.map(b)),o.push(this.outputs[w].serialize());return o.push(this.otherwise.serialize()),o}}class Lg{constructor(o,u,h){this.type=o,this.branches=u,this.otherwise=h}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return u.error("Expected an odd number of arguments.");let h;u.expectedType&&u.expectedType.kind!=="value"&&(h=u.expectedType);const g=[];for(let w=1;w<o.length-1;w+=2){const A=u.parse(o[w],w,qr);if(!A)return null;const D=u.parse(o[w+1],w+1,h);if(!D)return null;g.push([A,D]),h=h||D.type}const b=u.parse(o[o.length-1],o.length-1,h);return b?new Lg(h,g,b):null}evaluate(o){for(const[u,h]of this.branches)if(u.evaluate(o))return h.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[u,h]of this.branches)o(u),o(h);o(this.otherwise)}outputDefined(){return this.branches.every(([o,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(u=>{o.push(u.serialize())}),o}}class zg{constructor(o,u,h,g){this.type=o,this.input=u,this.beginIndex=h,this.endIndex=g}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const h=u.parse(o[1],1,ii),g=u.parse(o[2],2,Cn);if(!h||!g)return null;if(!w0(h.type,[Ss(ii),Yr,ii]))return u.error(`Expected first argument to be of type array or string, but found ${Oa(h.type)} instead`);if(o.length===4){const b=u.parse(o[3],3,Cn);return b?new zg(h.type,h,g,b):null}return new zg(h.type,h,g)}evaluate(o){const u=this.input.evaluate(o),h=this.beginIndex.evaluate(o);if(!jp(u,["string","array"]))throw new Ca(`Expected first argument to be of type array or string, but found ${Oa(to(u))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(o);return u.slice(h,g)}return u.slice(h)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}class Af{constructor(o,u){this.type=Ss(Yr),this.str=o,this.delimiter=u}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=u.parse(o[1],1,Yr),g=u.parse(o[2],2,Yr);return h&&g?new Af(h,g):void 0}evaluate(o){const u=this.str.evaluate(o),h=this.delimiter.evaluate(o);return u.split(h)}eachChild(o){o(this.str),o(this.delimiter)}outputDefined(){return!1}serialize(){return["split",this.str.serialize(),this.delimiter.serialize()]}}function Fg(c,o){return c==="=="||c==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function tm(c,o,u,h){return h.compare(o,u)===0}function Cd(c,o,u){const h=c!=="=="&&c!=="!=";return class Yhe{constructor(b,w,A){this.type=qr,this.lhs=b,this.rhs=w,this.collator=A,this.hasUntypedArgument=b.type.kind==="value"||w.type.kind==="value"}static parse(b,w){if(b.length!==3&&b.length!==4)return w.error("Expected two or three arguments.");const A=b[0];let D=w.parse(b[1],1,ii);if(!D)return null;if(!Fg(A,D.type))return w.concat(1).error(`"${A}" comparisons are not supported for type '${Oa(D.type)}'.`);let P=w.parse(b[2],2,ii);if(!P)return null;if(!Fg(A,P.type))return w.concat(2).error(`"${A}" comparisons are not supported for type '${Oa(P.type)}'.`);if(D.type.kind!==P.type.kind&&D.type.kind!=="value"&&P.type.kind!=="value")return w.error(`Cannot compare types '${Oa(D.type)}' and '${Oa(P.type)}'.`);h&&(D.type.kind==="value"&&P.type.kind!=="value"?D=new Gn(P.type,[D]):D.type.kind!=="value"&&P.type.kind==="value"&&(P=new Gn(D.type,[P])));let B=null;if(b.length===4){if(D.type.kind!=="string"&&P.type.kind!=="string"&&D.type.kind!=="value"&&P.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(B=w.parse(b[3],3,A_),!B)return null}return new Yhe(D,P,B)}evaluate(b){const w=this.lhs.evaluate(b),A=this.rhs.evaluate(b);if(h&&this.hasUntypedArgument){const D=to(w),P=to(A);if(D.kind!==P.kind||D.kind!=="string"&&D.kind!=="number")throw new Ca(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${D.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const D=to(w),P=to(A);if(D.kind!=="string"||P.kind!=="string")return o(b,w,A)}return this.collator?u(b,w,A,this.collator.evaluate(b)):o(b,w,A)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}serialize(){const b=[c];return this.eachChild(w=>{b.push(w.serialize())}),b}}}const nm=Cd("==",function(c,o,u){return o===u},tm),C0=Cd("!=",function(c,o,u){return o!==u},function(c,o,u,h){return!tm(0,o,u,h)}),Ng=Cd("<",function(c,o,u){return o<u},function(c,o,u,h){return h.compare(o,u)<0}),Bg=Cd(">",function(c,o,u){return o>u},function(c,o,u,h){return h.compare(o,u)>0}),jg=Cd("<=",function(c,o,u){return o<=u},function(c,o,u,h){return h.compare(o,u)<=0}),a1=Cd(">=",function(c,o,u){return o>=u},function(c,o,u,h){return h.compare(o,u)>=0});class kc{constructor(o,u,h,g,b,w){this.type=Yr,this.number=o,this.locale=u,this.currency=h,this.unit=g,this.minFractionDigits=b,this.maxFractionDigits=w}static parse(o,u){if(o.length!==3)return u.error("Expected two arguments.");const h=u.parse(o[1],1,Cn);if(!h)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return u.error("NumberFormat options argument must be an object.");let b=null;if(g.locale&&(b=u.parseObjectValue(g.locale,2,"locale",Yr),!b))return null;let w=null;if(g.currency&&(w=u.parseObjectValue(g.currency,2,"currency",Yr),!w))return null;let A=null;if(g.unit&&(A=u.parseObjectValue(g.unit,2,"unit",Yr),!A))return null;let D=null;if(g["min-fraction-digits"]&&(D=u.parseObjectValue(g["min-fraction-digits"],2,"min-fraction-digits",Cn),!D))return null;let P=null;return g["max-fraction-digits"]&&(P=u.parseObjectValue(g["max-fraction-digits"],2,"max-fraction-digits",Cn),!P)?null:new kc(h,b,w,A,D,P)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class Of{constructor(o){this.type=Cn,this.input=o}static parse(o,u){if(o.length!==2)return u.error(`Expected 1 argument, but found ${o.length-1} instead.`);const h=u.parse(o[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Oa(h.type)} instead.`):new Of(h):null}evaluate(o){const u=this.input.evaluate(o);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Ca(`Expected value to be of type string or array, but found ${Oa(to(u))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(u=>{o.push(u.serialize())}),o}}function M0(c){return function(){c=1831565813+(c|=0)|0;let o=Math.imul(c^c>>>15,1|c);return o=o+Math.imul(o^o>>>7,61|o)^o,((o^o>>>14)>>>0)/4294967296}}const gh={"==":nm,"!=":C0,">":Bg,"<":Ng,">=":a1,"<=":jg,array:Gn,at:Qp,"at-interpolated":Ef,boolean:Gn,case:Lg,coalesce:Tf,collator:Tl,format:An,image:bd,in:mh,"index-of":Jp,interpolate:Yi,"interpolate-hcl":Yi,"interpolate-lab":Yi,length:Of,let:Gl,literal:Ul,match:em,number:Gn,"number-format":kc,object:Gn,slice:zg,step:Gu,string:Gn,"to-boolean":Oc,"to-color":Oc,"to-number":Oc,"to-string":Oc,var:Hu,within:yf,distance:bf,config:hh,split:Af};function yh(c,[o,u,h,g]){o=o.evaluate(c),u=u.evaluate(c),h=h.evaluate(c);const b=g?g.evaluate(c):1,w=S0(o,u,h,b);if(w)throw new Ca(w);return new Qr(o/255,u/255,h/255,b)}function rm(c,[o,u,h,g]){o=o.evaluate(c),u=u.evaluate(c),h=h.evaluate(c);const b=g?g.evaluate(c):1,w=(function(P,B,j,$){return typeof P=="number"&&P>=0&&P<=360?typeof B=="number"&&B>=0&&B<=100&&typeof j=="number"&&j>=0&&j<=100?$===void 0||typeof $=="number"&&$>=0&&$<=1?null:`Invalid hsla value [${[P,B,j,$].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof $=="number"?[P,B,j,$]:[P,B,j]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof $=="number"?[P,B,j,$]:[P,B,j]).join(", ")}]: 'h' must be between 0 and 360.`})(o,u,h,b);if(w)throw new Ca(w);const A=`hsla(${o}, ${u}%, ${h}%, ${b})`,D=Qr.parse(A);if(!D)throw new Ca(`Failed to parse HSLA color: ${A}`);return D}function Ug(c,o){return c in o}function Md(c,o){const u=o[c];return u===void 0?null:u}function Yu(c){return{type:c}}function _h(c){if(c instanceof hh)return new Set([c.key]);let o=new Set;return c.eachChild(u=>{o=new Set([...o,..._h(u)])}),o}function Lc(c){if(c instanceof rl&&c.name==="is-active-floor")return!0;let o=!1;return c.eachChild(u=>{!o&&Lc(u)&&(o=!0)}),o}function D0(c){return{result:"success",value:c}}function sl(c){return{result:"error",value:c}}function $g(c,o){return!!c&&!!c.parameters&&c.parameters.indexOf(o)>-1}function im(c){return c["property-type"]==="data-driven"}function zc(c){return $g(c.expression,"measure-light")}function Cf(c){return $g(c.expression,"zoom")}function Dd(c){return!!c.expression&&c.expression.interpolated}function am(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function U_(c){return c}function Id(c,o){const u=o.type==="color",h=c.stops&&typeof c.stops[0][0]=="object",g=h||!(h||c.property!==void 0),b=c.type||(Dd(o)?"exponential":"interval");if(u&&((c=Object.assign({},c)).stops&&(c.stops=c.stops.map(P=>[P[0],Qr.parse(P[1])])),c.default=Qr.parse(c.default?c.default:o.default)),c.colorSpace&&c.colorSpace!=="rgb"&&!i1[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let w,A,D;if(b==="exponential")w=Rd;else if(b==="interval")w=o1;else if(b==="categorical"){w=Pd,A=Object.create(null);for(const P of c.stops)A[P[0]]=P[1];D=typeof c.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);w=$_}if(h){const P={},B=[];for(let G=0;G<c.stops.length;G++){const Z=c.stops[G],se=Z[0].zoom;P[se]===void 0&&(P[se]={zoom:se,type:c.type,property:c.property,default:c.default,stops:[]},B.push(se)),P[se].stops.push([Z[0].value,Z[1]])}const j=[];for(const G of B)j.push([P[G].zoom,Id(P[G],o)]);const $={name:"linear"};return{kind:"composite",interpolationType:$,interpolationFactor:Yi.interpolationFactor.bind(void 0,$),zoomStops:j.map(G=>G[0]),evaluate:({zoom:G},Z)=>Rd({stops:j,base:c.base},o,G).evaluate(G,Z)}}if(g){const P=b==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:Yi.interpolationFactor.bind(void 0,P),zoomStops:c.stops.map(B=>B[0]),evaluate:({zoom:B})=>w(c,o,B,A,D)}}return{kind:"source",evaluate(P,B){const j=B&&B.properties?B.properties[c.property]:void 0;return j===void 0?Mf(c.default,o.default):w(c,o,j,A,D)}}}function Mf(c,o,u){return c!==void 0?c:o!==void 0?o:u!==void 0?u:void 0}function Pd(c,o,u,h,g){return Mf(typeof u===g?h[u]:void 0,c.default,o.default)}function o1(c,o,u){if(!jn(u))return Mf(c.default,o.default);const h=c.stops.length;if(h===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[h-1][0])return c.stops[h-1][1];const g=xf(c.stops.map(b=>b[0]),u);return c.stops[g][1]}function Rd(c,o,u){const h=c.base!==void 0?c.base:1;if(!jn(u))return Mf(c.default,o.default);const g=c.stops.length;if(g===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[g-1][0])return c.stops[g-1][1];const b=xf(c.stops.map(B=>B[0]),u),w=(function(B,j,$,G){const Z=G-$,se=B-$;return Z===0?0:j===1?se/Z:(Math.pow(j,se)-1)/(Math.pow(j,Z)-1)})(u,h,c.stops[b][0],c.stops[b+1][0]),A=c.stops[b][1],D=c.stops[b+1][1];let P=_d[o.type]||U_;if(c.colorSpace&&c.colorSpace!=="rgb"){const B=i1[c.colorSpace];P=(j,$)=>B.reverse(B.interpolate(B.forward(j),B.forward($),w))}return typeof A.evaluate=="function"?{evaluate(...B){const j=A.evaluate.apply(void 0,B),$=D.evaluate.apply(void 0,B);if(j!==void 0&&$!==void 0)return P(j,$,w)}}:P(A,D,w)}function $_(c,o,u){return o.type==="color"?u=Qr.parse(u):o.type==="formatted"?u=ss.fromString(u.toString()):o.type==="resolvedImage"?u=nl.build(u.toString()):qn(u)===o.type||o.type==="enum"&&o.values[u]||(u=void 0),Mf(u,c.default,o.default)}rl.register(gh,{error:[{kind:"error"},[Yr],(c,[o])=>{throw new Ca(o.evaluate(c))}],typeof:[Yr,[ii],(c,[o])=>Oa(to(o.evaluate(c)))],"to-rgba":[Ss(Cn,4),[Bs],(c,[o])=>o.evaluate(c).toNonPremultipliedRenderColor(null).toArray()],"to-hsla":[Ss(Cn,4),[Bs],(c,[o])=>o.evaluate(c).toNonPremultipliedRenderColor(null).toHslaArray()],rgb:[Bs,[Cn,Cn,Cn],yh],rgba:[Bs,[Cn,Cn,Cn,Cn],yh],hsl:[Bs,[Cn,Cn,Cn],rm],hsla:[Bs,[Cn,Cn,Cn,Cn],rm],has:{type:qr,overloads:[[[Yr],(c,[o])=>Ug(o.evaluate(c),c.properties())],[[Yr,Np],(c,[o,u])=>Ug(o.evaluate(c),u.evaluate(c))]]},get:{type:ii,overloads:[[[Yr],(c,[o])=>Md(o.evaluate(c),c.properties())],[[Yr,Np],(c,[o,u])=>Md(o.evaluate(c),u.evaluate(c))]]},"feature-state":[ii,[Yr],(c,[o])=>Md(o.evaluate(c),c.featureState||{})],properties:[Np,[],c=>c.properties()],"geometry-type":[Yr,[],c=>c.geometryType()],worldview:[Yr,[],c=>c.globals.worldview||""],"is-active-floor":[qr,Yu(Yr),(c,o)=>{if(!(c.globals.activeFloors&&c.globals.activeFloors.size>0))return!1;const u=c.globals.activeFloors;return o.some(h=>{const g=h.evaluate(c);return u.has(g)})}],id:[ii,[],c=>c.id()],zoom:[Cn,[],c=>c.globals.zoom],pitch:[Cn,[],c=>c.globals.pitch||0],"distance-from-center":[Cn,[],c=>c.distanceFromCenter()],"measure-light":[Cn,[Yr],(c,[o])=>c.measureLight(o.evaluate(c))],"heatmap-density":[Cn,[],c=>c.globals.heatmapDensity||0],"line-progress":[Cn,[],c=>c.globals.lineProgress||0],"raster-value":[Cn,[],c=>c.globals.rasterValue||0],"raster-particle-speed":[Cn,[],c=>c.globals.rasterParticleSpeed||0],"sky-radial-progress":[Cn,[],c=>c.globals.skyRadialProgress||0],accumulated:[ii,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Cn,Yu(Cn),(c,o)=>{let u=0;for(const h of o)u+=h.evaluate(c);return u}],"*":[Cn,Yu(Cn),(c,o)=>{let u=1;for(const h of o)u*=h.evaluate(c);return u}],"-":{type:Cn,overloads:[[[Cn,Cn],(c,[o,u])=>o.evaluate(c)-u.evaluate(c)],[[Cn],(c,[o])=>-o.evaluate(c)]]},"/":[Cn,[Cn,Cn],(c,[o,u])=>o.evaluate(c)/u.evaluate(c)],"%":[Cn,[Cn,Cn],(c,[o,u])=>o.evaluate(c)%u.evaluate(c)],ln2:[Cn,[],()=>Math.LN2],pi:[Cn,[],()=>Math.PI],e:[Cn,[],()=>Math.E],"^":[Cn,[Cn,Cn],(c,[o,u])=>Math.pow(o.evaluate(c),u.evaluate(c))],sqrt:[Cn,[Cn],(c,[o])=>Math.sqrt(o.evaluate(c))],log10:[Cn,[Cn],(c,[o])=>Math.log(o.evaluate(c))/Math.LN10],ln:[Cn,[Cn],(c,[o])=>Math.log(o.evaluate(c))],log2:[Cn,[Cn],(c,[o])=>Math.log2(o.evaluate(c))],sin:[Cn,[Cn],(c,[o])=>Math.sin(o.evaluate(c))],cos:[Cn,[Cn],(c,[o])=>Math.cos(o.evaluate(c))],tan:[Cn,[Cn],(c,[o])=>Math.tan(o.evaluate(c))],asin:[Cn,[Cn],(c,[o])=>Math.asin(o.evaluate(c))],acos:[Cn,[Cn],(c,[o])=>Math.acos(o.evaluate(c))],atan:[Cn,[Cn],(c,[o])=>Math.atan(o.evaluate(c))],min:[Cn,Yu(Cn),(c,o)=>Math.min(...o.map(u=>u.evaluate(c)))],max:[Cn,Yu(Cn),(c,o)=>Math.max(...o.map(u=>u.evaluate(c)))],abs:[Cn,[Cn],(c,[o])=>Math.abs(o.evaluate(c))],round:[Cn,[Cn],(c,[o])=>{const u=o.evaluate(c);return u<0?-Math.round(-u):Math.round(u)}],floor:[Cn,[Cn],(c,[o])=>Math.floor(o.evaluate(c))],ceil:[Cn,[Cn],(c,[o])=>Math.ceil(o.evaluate(c))],"filter-==":[qr,[Yr,ii],(c,[o,u])=>c.properties()[o.value]===u.value],"filter-id-==":[qr,[ii],(c,[o])=>c.id()===o.value],"filter-type-==":[qr,[Yr],(c,[o])=>c.geometryType()===o.value],"filter-<":[qr,[Yr,ii],(c,[o,u])=>{const h=c.properties()[o.value],g=u.value;return typeof h==typeof g&&h<g}],"filter-id-<":[qr,[ii],(c,[o])=>{const u=c.id(),h=o.value;return typeof u==typeof h&&u<h}],"filter->":[qr,[Yr,ii],(c,[o,u])=>{const h=c.properties()[o.value],g=u.value;return typeof h==typeof g&&h>g}],"filter-id->":[qr,[ii],(c,[o])=>{const u=c.id(),h=o.value;return typeof u==typeof h&&u>h}],"filter-<=":[qr,[Yr,ii],(c,[o,u])=>{const h=c.properties()[o.value],g=u.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[qr,[ii],(c,[o])=>{const u=c.id(),h=o.value;return typeof u==typeof h&&u<=h}],"filter->=":[qr,[Yr,ii],(c,[o,u])=>{const h=c.properties()[o.value],g=u.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[qr,[ii],(c,[o])=>{const u=c.id(),h=o.value;return typeof u==typeof h&&u>=h}],"filter-has":[qr,[ii],(c,[o])=>o.value in c.properties()],"filter-has-id":[qr,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[qr,[Ss(Yr)],(c,[o])=>o.value.indexOf(c.geometryType())>=0],"filter-id-in":[qr,[Ss(ii)],(c,[o])=>o.value.indexOf(c.id())>=0],"filter-in-small":[qr,[Yr,Ss(ii)],(c,[o,u])=>u.value.indexOf(c.properties()[o.value])>=0],"filter-in-large":[qr,[Yr,Ss(ii)],(c,[o,u])=>(function(h,g,b,w){for(;b<=w;){const A=b+w>>1;if(g[A]===h)return!0;g[A]>h?w=A-1:b=A+1}return!1})(c.properties()[o.value],u.value,0,u.value.length-1)],all:{type:qr,overloads:[[[qr,qr],(c,[o,u])=>o.evaluate(c)&&u.evaluate(c)],[Yu(qr),(c,o)=>{for(const u of o)if(!u.evaluate(c))return!1;return!0}]]},any:{type:qr,overloads:[[[qr,qr],(c,[o,u])=>o.evaluate(c)||u.evaluate(c)],[Yu(qr),(c,o)=>{for(const u of o)if(u.evaluate(c))return!0;return!1}]]},"!":[qr,[qr],(c,[o])=>!o.evaluate(c)],"is-supported-script":[qr,[Yr],(c,[o])=>{const u=c.globals&&c.globals.isSupportedScript;return!u||u(o.evaluate(c))}],upcase:[Yr,[Yr],(c,[o])=>o.evaluate(c).toUpperCase()],downcase:[Yr,[Yr],(c,[o])=>o.evaluate(c).toLowerCase()],concat:[Yr,Yu(ii),(c,o)=>o.map(u=>ju(u.evaluate(c))).join("")],"resolved-locale":[Yr,[A_],(c,[o])=>o.evaluate(c).resolvedLocale()],random:[Cn,[Cn,Cn,ii],(c,o)=>{const[u,h,g]=o.map(w=>w.evaluate(c));if(u>h||u===h)return u;let b;if(typeof g=="string")b=(function(w){let A=0;if(w.length===0)return A;for(let D=0;D<w.length;D++)A=(A<<5)-A+w.charCodeAt(D),A&=A;return A})(g);else{if(typeof g!="number")throw new Ca(`Invalid seed input: ${g}`);b=g}return u+M0(b)()*(h-u)}]});class Vg{constructor(o,u,h,g,b){this.expression=o,this._warningHistory={},this._scope=h,this._options=g,this._iconImageUseTheme=b,this._evaluator=new Vp(h,g,b),this._defaultValue=u?(function(w){return w.type==="color"&&(am(w.default)||Array.isArray(w.default))?new Qr(0,0,0,0):w.type==="color"?Qr.parse(w.default)||null:w.default===void 0?null:w.default})(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this.configDependencies=_h(o),this.isIndoorDependent=Lc(o)}evaluateWithoutErrorHandling(o,u,h,g,b,w,A,D){return this._evaluator.globals=o,this._evaluator.feature=u,this._evaluator.featureState=h,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=A||null,this._evaluator.featureDistanceData=D||null,this.expression.evaluate(this._evaluator)}evaluate(o,u,h,g,b,w,A,D,P){this._evaluator||(this._evaluator=new Vp(this._scope,this._options,this._iconImageUseTheme)),this._evaluator.globals=o,this._evaluator.feature=u||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=A||null,this._evaluator.featureDistanceData=D||null,this._evaluator.iconImageUseTheme=P||null;try{const B=this.expression.evaluate(this._evaluator);if(B==null||typeof B=="number"&&B!=B)return this._defaultValue;if(this._enumValues&&!(B in this._enumValues))throw new Ca(`Expected value to be one of ${Object.keys(this._enumValues).map(j=>JSON.stringify(j)).join(", ")}, but found ${JSON.stringify(B)} instead.`);return B}catch(B){const j=B;return this._warningHistory[j.message]||(this._warningHistory[j.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${j.message}`)),this._defaultValue}}}function kd(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in gh}function Fc(c,o,u,h,g){const b=new Ig(gh,[],o?(function(A){const D={color:Bs,string:Yr,number:Cn,enum:Yr,boolean:qr,formatted:Bp,resolvedImage:vd};return A.type==="array"?Ss(D[A.value]||ii,A.length):D[A.type]})(o):void 0,void 0,void 0,u,h,g),w=b.parse(c,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return w?D0(new Vg(w,o,u,h,g)):sl(b.errors)}class Es{constructor(o,u,h,g){this.kind=o,this._styleExpression=u,this.isLightConstant=h,this.isLineProgressConstant=g,this.isStateDependent=o!=="constant"&&!wo(u.expression),this.configDependencies=_h(u.expression),this.isIndoorDependent=Lc(u.expression)}evaluateWithoutErrorHandling(o,u,h,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,h,g,b,w)}evaluate(o,u,h,g,b,w,A){return this._styleExpression.evaluate(o,u,h,g,b,w,void 0,void 0,A)}}class us{constructor(o,u,h,g,b,w){this.kind=o,this.zoomStops=h,this._styleExpression=u,this.isStateDependent=o!=="camera"&&!wo(u.expression),this.isIndoorDependent=Lc(u.expression),this.isLightConstant=b,this.isLineProgressConstant=w,this.configDependencies=_h(u.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,u,h,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,h,g,b,w)}evaluate(o,u,h,g,b,w){return this._styleExpression.evaluate(o,u,h,g,b,w)}interpolationFactor(o,u,h){return this.interpolationType?Yi.interpolationFactor(this.interpolationType,o,u,h):0}}function Wu(c,o,u,h,g){if((c=Fc(c,o,u,h,g)).result==="error")return c;const b=c.value.expression,w=Ad(b);if(!w&&!im(o))return sl([new os("","data expressions not supported")]);const A=ua(b,["zoom","pitch","distance-from-center"]);if(!A&&!Cf(o))return sl([new os("","zoom expressions not supported")]);const D=ua(b,["measure-light"]);if(!D&&!zc(o))return sl([new os("","measure-light expression not supported")]);const P=ua(b,["line-progress"]);if(!P&&!(function($){return $g($.expression,"line-progress")})(o))return sl([new os("","line-progress expression not supported")]);const B=o.expression&&o.expression.relaxZoomRestriction,j=qg(b);return j||A||B?j instanceof os?sl([j]):j instanceof Yi&&!Dd(o)?sl([new os("",'"interpolate" expressions cannot be used with this property')]):D0(j?new us(w&&P?"camera":"composite",c.value,j.labels,j instanceof Yi?j.interpolation:void 0,D,P):new Es(w&&P?"constant":"source",c.value,D,P)):sl([new os("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Ld{constructor(o,u){this._parameters=o,this._specification=u,Object.assign(this,Id(this._parameters,this._specification))}static deserialize(o){return new Ld(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function qg(c){let o=null;if(c instanceof Gl)o=qg(c.result);else if(c instanceof Tf){for(const u of c.args)if(o=qg(u),o)break}else(c instanceof Gu||c instanceof Yi)&&c.input instanceof rl&&c.input.name==="zoom"&&(o=c);return o instanceof os||c.eachChild(u=>{const h=qg(u);h instanceof os?o=h:o&&h&&o!==h&&(o=new os("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}var As,Al,So=(function(){if(Al)return As;Al=1,As=o;var c=3;function o(u,h,g){var b=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var w=new Int32Array(this.arrayBuffer);u=w[0],this.d=(h=w[1])+2*(g=w[2]);for(var A=0;A<this.d*this.d;A++){var D=w[c+A],P=w[c+A+1];b.push(D===P?null:w.subarray(D,P))}var B=w[c+b.length+1];this.keys=w.subarray(w[c+b.length],B),this.bboxes=w.subarray(B),this.insert=this._insertReadonly}else{this.d=h+2*g;for(var j=0;j<this.d*this.d;j++)b.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=u,this.padding=g,this.scale=h/u,this.uid=0;var $=g/h*u;this.min=-$,this.max=u+$}return o.prototype.insert=function(u,h,g,b,w){this._forEachCell(h,g,b,w,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(w)},o.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},o.prototype._insertCell=function(u,h,g,b,w,A){this.cells[w].push(A)},o.prototype.query=function(u,h,g,b,w){var A=this.min,D=this.max;if(u<=A&&h<=A&&D<=g&&D<=b&&!w)return Array.prototype.slice.call(this.keys);var P=[];return this._forEachCell(u,h,g,b,this._queryCell,P,{},w),P},o.prototype._queryCell=function(u,h,g,b,w,A,D,P){var B=this.cells[w];if(B!==null)for(var j=this.keys,$=this.bboxes,G=0;G<B.length;G++){var Z=B[G];if(D[Z]===void 0){var se=4*Z;(P?P($[se+0],$[se+1],$[se+2],$[se+3]):u<=$[se+2]&&h<=$[se+3]&&g>=$[se+0]&&b>=$[se+1])?(D[Z]=!0,A.push(j[Z])):D[Z]=!1}}},o.prototype._forEachCell=function(u,h,g,b,w,A,D,P){for(var B=this._convertToCellCoord(u),j=this._convertToCellCoord(h),$=this._convertToCellCoord(g),G=this._convertToCellCoord(b),Z=B;Z<=$;Z++)for(var se=j;se<=G;se++){var fe=this.d*se+Z;if((!P||P(this._convertFromCellCoord(Z),this._convertFromCellCoord(se),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(se+1)))&&w.call(this,u,h,g,b,fe,A,D,P))return}},o.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},o.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},o.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,h=c+this.cells.length+1+1,g=0,b=0;b<this.cells.length;b++)g+=this.cells[b].length;var w=new Int32Array(h+g+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;for(var A=h,D=0;D<u.length;D++){var P=u[D];w[c+D]=A,w.set(P,A),A+=P.length}return w[c+u.length]=A,w.set(this.keys,A),w[c+u.length+1]=A+=this.keys.length,w.set(this.bboxes,A),A+=this.bboxes.length,w.buffer},As})(),Nc=wl(So);const du={};function Kt(c,o,u={}){Object.defineProperty(c,"_classRegistryKey",{value:o,writable:!1}),du[o]={klass:c,omit:u.omit||[]}}Kt(Object,"Object"),Nc.serialize=function(c,o){const u=c.toArrayBuffer();return o&&o.add(u),{buffer:u}},Nc.deserialize=function(c){return new Nc(c.buffer)},Object.defineProperty(Nc,"name",{value:"Grid"}),Kt(Nc,"Grid"),delete Vt.prototype.constructor,Kt(Qr,"Color"),Kt(Error,"Error"),Kt(ss,"Formatted"),Kt(Sg,"FormattedSection"),Kt(md,"AJAXError"),Kt(nl,"ResolvedImage"),Kt(Ld,"StylePropertyFunction"),Kt(Vg,"StyleExpression",{omit:["_evaluator"]}),Kt(ws,"ImageId"),Kt(Bo,"ImageVariant"),Kt(us,"ZoomDependentExpression"),Kt(Es,"ZoomConstantExpression"),Kt(rl,"CompoundExpression",{omit:["_evaluate"]});for(const c in gh)du[gh[c]._classRegistryKey]||Kt(gh[c],`Expression${c}`);function ca(c){return c&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function fa(c,o){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp)return c;if(ca(c)||c instanceof ImageBitmap)return o&&o.add(c),c;if(ArrayBuffer.isView(c))return o&&o.add(c.buffer),c;if(c instanceof ImageData)return o&&o.add(c.data.buffer),c;if(Array.isArray(c)){const u=[];for(const h of c)u.push(fa(h,o));return u}if(c instanceof Map){const u={$name:"Map",entries:[]};for(const[h,g]of c.entries())u.entries.push(fa(h),fa(g,o));return u}if(c instanceof Set){const u={$name:"Set"};let h=0;for(const g of c.values())u[++h]=fa(g);return u}if(typeof c=="bigint")return{$name:"BigInt",value:c.toString()};if(typeof c=="object"){const u=c.constructor,h=u._classRegistryKey;if(!h)throw new Error(`Can't serialize object of unregistered class "${u.name}".`);const g=u.serialize?u.serialize(c,o):{};if(!u.serialize){for(const b in c)c.hasOwnProperty(b)&&(du[h].omit.indexOf(b)>=0||(g[b]=fa(c[b],o)));c instanceof Error&&(g.message=c.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(g.$name=h),g}throw new Error("can't serialize object of type "+typeof c)}function pu(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||ca(c)||c instanceof ImageBitmap||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(pu);if(typeof c=="object"){const o=c.$name||"Object";if(o==="Map"){const g=c.entries||[],b=new Map;for(let w=0;w<g.length;w+=2)b.set(pu(g[w]),pu(g[w+1]));return b}if(o==="Set"){const g=new Set;for(const b of Object.keys(c))b!=="$name"&&g.add(pu(c[b]));return g}if(o==="BigInt")return BigInt(c.value);const{klass:u}=du[o];if(!u)throw new Error(`Can't deserialize unregistered class "${o}".`);if(u.deserialize)return u.deserialize(c);const h=Object.create(u.prototype);for(const g of Object.keys(c))g!=="$name"&&(h[g]=pu(c[g]));return h}throw new Error("can't deserialize object of type "+typeof c)}const zd=c=>c>=1536&&c<=1791,vh=c=>c>=1872&&c<=1919,Fd=c=>c>=2208&&c<=2303,bh=c=>c>=11904&&c<=12031,xh=c=>c>=12032&&c<=12255,I0=c=>c>=12272&&c<=12287,Ma=c=>c>=12288&&c<=12351,wh=c=>c>=12352&&c<=12447,Nd=c=>c>=12448&&c<=12543,Xu=c=>c>=12544&&c<=12591,P0=c=>c>=12704&&c<=12735,s1=c=>c>=12736&&c<=12783,V_=c=>c>=12784&&c<=12799,q_=c=>c>=12800&&c<=13055,Hg=c=>c>=13056&&c<=13311,jo=c=>c>=13312&&c<=19903,Wa=c=>c>=19968&&c<=40959,om=c=>c>=40960&&c<=42127,Sh=c=>c>=42128&&c<=42191,Gg=c=>c>=44032&&c<=55215,H_=c=>c>=63744&&c<=64255,Zu=c=>c>=64336&&c<=65023,Yg=c=>c>=65040&&c<=65055,Wg=c=>c>=65072&&c<=65103,G_=c=>c>=65104&&c<=65135,Y_=c=>c>=65136&&c<=65279,W_=c=>c>=65280&&c<=65519;function X_(c){for(const o of c)if(Bc(o.charCodeAt(0)))return!0;return!1}function l1(c){for(const o of c)if(!u1(o.charCodeAt(0)))return!1;return!0}function u1(c){return!(zd(c)||vh(c)||Fd(c)||Zu(c)||Y_(c))}function R0(c){return!(c<11904||!(P0(c)||Xu(c)||Wg(c)||H_(c)||Hg(c)||bh(c)||s1(c)||Ma(c)||jo(c)||Wa(c)||q_(c)||W_(c)||wh(c)||I0(c)||xh(c)||V_(c)||Nd(c)||Yg(c)||Sh(c)||om(c)))}function Bc(c){return!(c!==746&&c!==747&&(c<4352||!(P0(c)||Xu(c)||Wg(c)&&!(c>=65097&&c<=65103)||H_(c)||Hg(c)||bh(c)||s1(c)||!(!Ma(c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||jo(c)||Wa(c)||q_(c)||(o=>o>=12592&&o<=12687)(c)||(o=>o>=43360&&o<=43391)(c)||(o=>o>=55216&&o<=55295)(c)||(o=>o>=4352&&o<=4607)(c)||Gg(c)||wh(c)||I0(c)||(o=>o>=12688&&o<=12703)(c)||xh(c)||V_(c)||Nd(c)&&c!==12540||!(!W_(c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!G_(c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||(o=>o>=5120&&o<=5759)(c)||(o=>o>=6320&&o<=6399)(c)||Yg(c)||(o=>o>=19904&&o<=19967)(c)||om(c)||Sh(c))))}function k0(c){return c===12312||c===12313||c===12316||c===12540||c===12448}function L0(c){return!(Bc(c)||(function(o){return!!((u=>u>=128&&u<=255)(o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||(u=>u>=8192&&u<=8303)(o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||(u=>u>=8448&&u<=8527)(o)||(u=>u>=8528&&u<=8591)(o)||(u=>u>=8960&&u<=9215)(o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||(u=>u>=9216&&u<=9279)(o)&&o!==9251||(u=>u>=9280&&u<=9311)(o)||(u=>u>=9312&&u<=9471)(o)||(u=>u>=9632&&u<=9727)(o)||(u=>u>=9728&&u<=9983)(o)&&!(o>=9754&&o<=9759)||(u=>u>=11008&&u<=11263)(o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||Ma(o)||Nd(o)||(u=>u>=57344&&u<=63743)(o)||Wg(o)||G_(o)||W_(o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)})(c))}function Xg(c){return zd(c)||vh(c)||Fd(c)||Zu(c)||Y_(c)}function z0(c){return c>=1424&&c<=2303||Zu(c)||Y_(c)}function c1(c,o){return!(!o&&z0(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||(u=>u>=6016&&u<=6143)(c))}function jc(c){for(const o of c)if(z0(o.charCodeAt(0)))return!0;return!1}const Vs={unavailable:"unavailable",deferred:"deferred",loading:"loading",parsing:"parsing",parsed:"parsed",loaded:"loaded",error:"error"};let Df=null,Os=Vs.unavailable,If=null;const F0=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(Os=Vs.error),Df&&Df(c)};function N0(){Z_.fire(new uu("pluginStateChange",{pluginStatus:Os,pluginURL:If}))}const Z_=new df,Th=function(){return Os},K_=function(){if(Os!==Vs.deferred||!If)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Os=Vs.loading,N0(),If&&gd({url:If},c=>{c?F0(c):(Os=Vs.loaded,N0())})},Ol={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Os===Vs.loaded||Ol.applyArabicShaping!=null,isLoading:()=>Os===Vs.loading,setState(c){Os=c.pluginStatus,If=c.pluginURL},isParsing:()=>Os===Vs.parsing,isParsed:()=>Os===Vs.parsed,getPluginURL:()=>If};class Jr{constructor(o,u){this.zoom=o,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch,this.brightness=u.brightness,this.worldview=u.worldview,this.activeFloors=u.activeFloors):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(o){return(function(u,h){for(const g of u)if(!c1(g.charCodeAt(0),h))return!1;return!0})(o,Ol.isLoaded())}}class sm{constructor(o,u,h,g,b){this.property=o,this.value=u,this.expression=(function(w,A,D,P,B){if(am(w))return new Ld(w,A);if(kd(w)||Array.isArray(w)&&w.length>0){const j=Wu(w,A,D,P,B);if(j.result==="error")throw new Error(j.value.map($=>`${$.key}: ${$.message}`).join(", "));return j.value}{let j=w;return typeof w=="string"&&A.type==="color"&&(j=Qr.parse(w)),{kind:"constant",configDependencies:new Set,isIndoorDependent:!1,evaluate:()=>j}}})(u===void 0?o.specification.default:u,o.specification,h,g,b)}isIndoorDependent(){return this.expression.isIndoorDependent}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,u,h,g){return this.property.possiblyEvaluate(this,o,u,h,g)}}class Bd{constructor(o,u,h,g){this.property=o,this.value=new sm(o,void 0,u,h,g)}transitioned(o,u){return new B0(this.property,this.value,u,Object.assign({},o.transition,this.transition),o.now)}untransitioned(){return new B0(this.property,this.value,null,{},0)}}class lm{constructor(o,u,h,g){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues),this._scope=u,this._options=h,this._iconImageUseTheme=g,this._isIndoorDependent=!1,this.configDependencies=new Set}getValue(o){return Zn(this._values[o].value.value)}setValue(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new Bd(this._values[o].property,this._scope,this._options,this._iconImageUseTheme)),this._values[o].value=new sm(this._values[o].property,u===null?void 0:Zn(u),this._scope,this._options,this._iconImageUseTheme),this._values[o].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[o].value.expression.configDependencies]),this._isIndoorDependent=this._isIndoorDependent||this._values[o].value.isIndoorDependent())}setTransitionOrValue(o,u){u&&(this._options=u);const h=this._properties.properties;if(o)for(const g in o){const b=o[g];if(g.endsWith("-transition")){const w=g.slice(0,-11);h[w]&&this.setTransition(w,b)}else h.hasOwnProperty(g)&&this.setValue(g,b)}}getTransition(o){return Zn(this._values[o].transition)}setTransition(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new Bd(this._values[o].property)),this._values[o].transition=Zn(u)||void 0}serialize(){const o={};for(const u of Object.keys(this._values)){const h=this.getValue(u);h!==void 0&&(o[u]=h);const g=this.getTransition(u);g!==void 0&&(o[`${u}-transition`]=g)}return o}transitioned(o,u){const h=new j0(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(o,u._values[g]);return h}untransitioned(){const o=new j0(this._properties);for(const u of Object.keys(this._values))o._values[u]=this._values[u].untransitioned();return o}isIndoorDependent(){return this._isIndoorDependent}}class B0{constructor(o,u,h,g,b){const w=g.delay||0,A=g.duration||0;b=b||0,this.property=o,this.value=u,this.begin=b+w,this.end=this.begin+A,o.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(o,u,h){const g=o.now||0,b=this.value.possiblyEvaluate(o,u,h),w=this.prior;if(w){if(g>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(g<this.begin)return w.possiblyEvaluate(o,u,h);{const A=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,u,h),b,we(A))}}return b}}class j0{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,u,h){const g=new Cs(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].possiblyEvaluate(o,u,h);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class Q_{constructor(o,u,h,g){this._properties=o,this._values=Object.create(o.defaultPropertyValues),this._scope=u,this._options=h,this._iconImageUseTheme=g,this._isIndoorDependent=!1,this.configDependencies=new Set}getValue(o){return Zn(this._values[o].value)}setValue(o,u){this._values[o]=new sm(this._values[o].property,u===null?void 0:Zn(u),this._scope,this._options,this._iconImageUseTheme),this._values[o].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[o].expression.configDependencies]),this._isIndoorDependent=this._isIndoorDependent||this._values[o].isIndoorDependent())}serialize(){const o={};for(const u of Object.keys(this._values)){const h=this.getValue(u);h!==void 0&&(o[u]=h)}return o}possiblyEvaluate(o,u,h,g){const b=new Cs(this._properties);for(const w of Object.keys(this._values))b._values[w]=this._values[w].possiblyEvaluate(o,u,h,g);return b}isIndoorDependent(){return this._isIndoorDependent}}class Eh{constructor(o,u,h,g){this.property=o,this.value=u,this.parameters=h,this.iconImageUseTheme=g}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,u,h,g){return this.property.evaluate(this.value,this.parameters,o,u,h,g,this.iconImageUseTheme)}}class Cs{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Xt{constructor(o){this.specification=o}possiblyEvaluate(o,u){return o.expression.evaluate(u)}interpolate(o,u,h){const g=_d[this.specification.type];return g?g(o,u,h):o}}class on{constructor(o,u){this.specification=o,this.overrides=u}possiblyEvaluate(o,u,h,g,b){return o.expression.kind==="constant"||o.expression.kind==="camera"?new Eh(this,{kind:"constant",value:o.expression.evaluate(u,null,{},h,g,void 0,b)},u):new Eh(this,o.expression,u,b)}interpolate(o,u,h){if(o.value.kind!=="constant"||u.value.kind!=="constant")return o;if(o.value.value===void 0||u.value.value===void 0)return new Eh(this,{kind:"constant",value:void 0},o.parameters);const g=_d[this.specification.type];return g?new Eh(this,{kind:"constant",value:g(o.value.value,u.value.value,h)},o.parameters):o}evaluate(o,u,h,g,b,w,A){return o.kind==="constant"?o.value:o.evaluate(u,h,g,b,w,void 0,A)}}class jd{constructor(o){this.specification=o}possiblyEvaluate(o,u,h,g){return!!o.expression.evaluate(u,null,{},h,g)}interpolate(){return!1}}class Ui{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new Jr(0,{});for(const h in o){const g=o[h];g.specification.overridable&&this.overridableProperties.push(h);const b=this.defaultPropertyValues[h]=new sm(g,void 0),w=this.defaultTransitionablePropertyValues[h]=new Bd(g);this.defaultTransitioningPropertyValues[h]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=b.possiblyEvaluate(u)}}}Kt(on,"DataDrivenProperty"),Kt(Xt,"DataConstantProperty"),Kt(jd,"ColorRampProperty");var ht=JSON.parse('{"$version":8,"$root":{"version":{"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow"},"rain":{"type":"rain"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor"},"imports":{"type":"array","value":"import"},"iconsets":{"type":"iconsets"},"schema":{"type":"schema"},"sources":{"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"type":"featuresets"}},"featuresets":{"*":{"type":"featureset"}},"featureset":{"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"layer":{"type":"string"},"properties":{"type":"selectorProperty"},"featureNamespace":{"type":"string"},"_uniqueFeatureID":{"type":"boolean"}},"selectorProperty":{"*":{"type":"*"}},"model":{"type":"string"},"import":{"id":{"type":"string"},"url":{"type":"string"},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","expression":{}},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string"},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false},"shadow-quality":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]}},"shadow-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"shadow-draw-before-layer":{"type":"string"}},"properties_light_ambient":{"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"type":"enum","values":{"sprite":1}},"url":{"type":"string"}},"iconset_source":{"type":{"type":"enum","values":{"source":1}},"source":{"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"type":"enum","values":{"video":1}},"urls":{"type":"array","value":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"type":"enum","values":{"image":1}},"url":{"type":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"modelNodeOverride":{"orientation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360}},"modelNodeOverrides":{"*":{"type":"modelNodeOverride"}},"modelMaterialOverride":{"model-color":{"type":"color"},"model-color-mix-intensity":{"type":"number"},"model-opacity":{"type":"number"},"model-emissive-strength":{"type":"number"}},"modelMaterialOverrides":{"*":{"type":"modelMaterialOverride"}},"modelSourceModel":{"uri":{"type":"string"},"position":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[-180,-90],"maximum":[180,90]},"orientation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360},"nodeOverrides":{"type":"modelNodeOverrides"},"materialOverrides":{"type":"modelMaterialOverrides"},"nodeOverrideNames":{"type":"array","value":"string"},"materialOverrideNames":{"type":"array","value":"string"},"featureProperties":{"type":"*"}},"modelSourceModels":{"*":{"type":"modelSourceModel"}},"source_model":{"type":{"type":"enum","values":{"model":1,"batched-model":1}},"url":{"type":"string"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"},"models":{"type":"modelSourceModels"}},"layer":{"id":{"type":"string"},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"building":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{},"clip":{}}},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"},"appearances":{"type":"array","value":"appearance","supported-layer-types":["symbol"]}},"appearance":{"condition":{"type":"boolean","expression":{"interpolated":true,"parameters":["zoom","pitch","feature","feature-state","measure-light","distance-from-center"]},"property-type":"data-driven"},"name":{"type":"string"},"properties":{"type":"*"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_building","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"model-allow-density-reduction":{"type":"boolean","default":true}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{}},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","expression":{}},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-extrusion-edge-radius":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}}},"layout_building":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"building-facade":{"type":"boolean","default":false,"expression":{"parameters":["feature"]},"property-type":"data-driven"},"building-facade-floors":{"type":"number","minimum":1,"maximum":200,"default":3,"property-type":"data-driven","expression":{"parameters":["feature"]}},"building-facade-unit-width":{"type":"number","minimum":1,"maximum":20,"default":3.1,"property-type":"data-driven","expression":{"parameters":["feature"]}},"building-facade-window":{"type":"array","length":2,"value":"number","minimum":0.1,"maximum":1,"default":[0.9,0.9],"property-type":"data-driven","expression":{"parameters":["feature"]}},"building-roof-shape":{"type":"enum","values":{"flat":1,"hipped":1,"gabled":1,"parapet":1,"mansard":1,"skillion":1,"pyramidal":1},"default":"flat","expression":{"parameters":["feature"]},"property-type":"data-driven"},"building-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"},"building-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"},"building-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"building-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"building-flip-roof-orientation":{"property-type":"data-driven","type":"boolean","default":false,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","expression":{}},"line-cross-slope":{"type":"number","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","expression":{"parameters":["zoom"]}}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]}},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]}},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]}},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","expression":{"parameters":["zoom"]}},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"icon-size":{"type":"number","default":1,"minimum":0,"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":[0.1,0.1],"maximum":[10,10],"expression":{}},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"appearance":true,"use-theme":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":[0.1,0.1],"maximum":[10,10],"expression":{}},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]}},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]}},"text-rotate":{"type":"number","default":0,"period":360,"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"appearance":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_building":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*"}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"high-color":{"type":"color","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"space-color":{"type":"color","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"horizon-blend":{"type":"number","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"center-thinning":{"type":"number","default":0.4,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","default":0.71,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"opacity":{"type":"number","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"center-thinning":{"type":"number","default":0.57,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","default":0.7,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective"}},"colorTheme":{"data":{"type":"string","expression":{}}},"indoor_source":{"sourceId":{"type":"string"},"sourceLayers":{"type":"array","value":"string"}},"indoor":{"*":{"type":"indoor_source"}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator"},"center":{"type":"array","length":2,"value":"number","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string"},"exaggeration":{"type":"number","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_building","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"flat"},"fill-extrusion-base-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"terrain"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-ambient-occlusion-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"type":"color","default":"#ffffff","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true}},"paint_building":{"building-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-ambient-occlusion-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"parameters":[]},"transition":true},"building-ambient-occlusion-ground-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-cast-shadows":{"type":"boolean","default":true},"building-color":{"type":"color","default":"rgba(193, 154, 127, 1)","use-theme":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"},"building-emissive-strength":{"type":"number","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"},"building-facade-emissive-chance":{"type":"number","default":0.35,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["measure-light","zoom"]}},"building-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"building-flood-light-color":{"type":"color","default":"#ffffff","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"building-flood-light-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"building-flood-light-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-gradient":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["line-progress"]}},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1]},"line-trim-fade-range":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-trim-color":{"type":"color","default":"transparent","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"line-border-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"use-theme":true,"expression":{"interpolated":true,"parameters":["heatmap-density"]}},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-image-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{}},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["raster-value"]}},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]}},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"raster-array-band":{"type":"string"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string"},"raster-particle-count":{"type":"number","default":512,"minimum":1},"raster-particle-color":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["raster-particle-speed"]}},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-shadow-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-accent-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]}},"background-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]}},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]}},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]}},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"use-theme":true,"expression":{"interpolated":true,"parameters":["sky-radial-progress"]}},"sky-atmosphere-halo-color":{"type":"color","default":"white","use-theme":true},"sky-atmosphere-color":{"type":"color","default":"white","use-theme":true},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"use-theme":true,"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d"},"model-cast-shadows":{"type":"boolean","default":true},"model-receive-shadows":{"type":"boolean","default":true},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"model-front-cutoff":{"type":"array","value":"number","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]},"model-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","expression":{}}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"promoteId":{"*":{"type":"*"}}}');function U0(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function J_(c){if(Array.isArray(c))return c.map(J_);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const o={};for(const u in c)o[u]=J_(c[u]);return o}return U0(c)}function Zg(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const o of c.slice(1))if(!Zg(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function ev(c,o="",u=null,h="fill"){if(c==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Zg(c)||(c=um(c));const g=c;let b=!0;try{b=(function(B){if(!Ud(B))return B;let j=J_(B);return Kg(j),j=$0(j),j})(g)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(g,null,2)}
        `)}let w=null,A=null;if(h!=="background"&&h!=="sky"&&h!=="slot"){A=ht[`filter_${h}`];const B=Fc(b,A,o,u);if(B.result==="error")throw new Error(B.value.map(j=>`${j.key}: ${j.message}`).join(", "));w=(j,$,G)=>B.value.evaluate(j,$,{},G)}let D=null,P=null;if(b!==g){const B=Fc(g,A,o,u);if(B.result==="error")throw new Error(B.value.map(j=>`${j.key}: ${j.message}`).join(", "));D=(j,$,G,Z,se)=>B.value.evaluate(j,$,{},G,void 0,void 0,Z,se),P=!Ad(B.value.expression)}return{filter:w,dynamicFilter:D||void 0,needGeometry:V0(b),needFeature:!!P}}function $0(c){if(!Array.isArray(c))return c;const o=(function(u){if(f1.has(u[0])){for(let h=1;h<u.length;h++)if(Ud(u[h]))return!0}return u})(c);return o===!0?o:o.map(u=>$0(u))}function Kg(c){let o=!1;const u=[];if(c[0]==="case"){for(let h=1;h<c.length-1;h+=2)o=o||Ud(c[h]),u.push(c[h+1]);u.push(c[c.length-1])}else if(c[0]==="match"){o=o||Ud(c[1]);for(let h=2;h<c.length-1;h+=2)u.push(c[h+1]);u.push(c[c.length-1])}else if(c[0]==="step"){o=o||Ud(c[1]);for(let h=1;h<c.length-1;h+=2)u.push(c[h+1])}o&&(c.length=0,c.push("any",...u));for(let h=1;h<c.length;h++)Kg(c[h])}function Ud(c){if(!Array.isArray(c))return!1;if((o=c[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let u=1;u<c.length;u++)if(Ud(c[u]))return!0;return!1}const f1=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function yT(c,o){return c<o?-1:c>o?1:0}function V0(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let o=1;o<c.length;o++)if(V0(c[o]))return!0;return!1}function um(c){if(!c)return!0;const o=c[0];return c.length<=1?o!=="any":o==="=="?Cl(c[1],c[2],"=="):o==="!="?ey(Cl(c[1],c[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Cl(c[1],c[2],o):o==="any"?(u=c.slice(1),["any"].concat(u.map(um))):o==="all"?["all"].concat(c.slice(1).map(um)):o==="none"?["all"].concat(c.slice(1).map(um).map(ey)):o==="in"?Qg(c[1],c.slice(2)):o==="!in"?ey(Qg(c[1],c.slice(2))):o==="has"?Jg(c[1]):o!=="!has"||ey(Jg(c[1]));var u}function Cl(c,o,u){switch(c){case"$type":return[`filter-type-${u}`,o];case"$id":return[`filter-id-${u}`,o];default:return[`filter-${u}`,c,o]}}function Qg(c,o){if(o.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(u=>typeof u!=typeof o[0])?["filter-in-large",c,["literal",o.sort(yT)]]:["filter-in-small",c,["literal",o]]}}function Jg(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function ey(c){return["!",c]}const cm="";function Ku(c,o){return o?`${c}${cm}${o}`:c}let tv;const ty=()=>tv||(tv=new Ui({"icon-size":new on(ht.layout_symbol["icon-size"]),"icon-image":new on(ht.layout_symbol["icon-image"]),"icon-rotate":new on(ht.layout_symbol["icon-rotate"]),"icon-offset":new on(ht.layout_symbol["icon-offset"]),"text-size":new on(ht.layout_symbol["text-size"]),"text-rotate":new on(ht.layout_symbol["text-rotate"]),"text-offset":new on(ht.layout_symbol["text-offset"])}));class q0{constructor(o,u,h,g,b,w){const A=Fc(o,ht.appearance.condition);if(A.result==="success"&&(this.condition=A.value),this.name=u,h){this.properties=new Cs(ty()),this.unevaluatedLayout=new Q_(ty(),g,b,w);for(const D in h)this.unevaluatedLayout.setValue(D,h[D])}}isActive(o){return!(this.condition||!o.isHidden||this.name!=="hidden")||this.condition.evaluate(o.globals,o.feature,o.featureState,o.canonical)}getCondition(){return this.condition}getName(){return this.name}getProperty(o){return this.properties.get(o)}getUnevaluatedProperties(){return this.unevaluatedLayout}getUnevaluatedProperty(o){return this.unevaluatedLayout._values[o]}recalculate(o,u,h){this.unevaluatedLayout&&(this.properties=this.unevaluatedLayout.possiblyEvaluate(o,void 0,u,h))}serialize(){const o={};return o.condition=this.condition.expression.serialize(),this.name&&(o.name=this.name),this.unevaluatedLayout&&(o.properties=this.unevaluatedLayout.serialize()),o}hasIconProperties(){const o=this.hasProperty("icon-image"),u=this.hasProperty("icon-size"),h=this.hasProperty("icon-offset"),g=this.hasProperty("icon-rotate");return o||u||h||g}hasTextProperties(){const o=this.hasProperty("text-size"),u=this.hasProperty("text-offset"),h=this.hasProperty("text-rotate");return o||u||h}hasProperty(o){return this.getUnevaluatedProperty(o).value!==void 0}}const nv="-transition",rv=new Set(["fill","line","background","hillshade","raster"]);class Ms extends df{constructor(o,u,h,g,b,w){if(super(),this.id=o.id,this.fqid=Ku(this.id,h),this.type=o.type,this.scope=h,this.lut=g,this.options=b,this.iconImageUseTheme=w,this.appearances=new Array,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.expressionDependencies={isIndoorDependent:!1,configDependencies:new Set},o.type!=="custom"){if(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type&&o.type!=="background"&&o.type!=="sky"&&o.type!=="slot"){this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter;const A=Fc(this.filter,ht[`filter_${o.type}`]);A.result!=="error"&&(this.expressionDependencies.configDependencies=new Set([...this.expressionDependencies.configDependencies,...A.value.configDependencies]),this.expressionDependencies.isIndoorDependent=this.expressionDependencies.isIndoorDependent||A.value.isIndoorDependent)}if(o.slot&&(this.slot=o.slot),o.appearances&&this.setAppearances(o.appearances),u.layout&&(this._unevaluatedLayout=new Q_(u.layout,this.scope,b,this.iconImageUseTheme),this.expressionDependencies.configDependencies=new Set([...this.expressionDependencies.configDependencies,...this._unevaluatedLayout.configDependencies]),this.expressionDependencies.isIndoorDependent=this.expressionDependencies.isIndoorDependent||this._unevaluatedLayout.isIndoorDependent()),u.paint){this._transitionablePaint=new lm(u.paint,this.scope,b);for(const A in o.paint)this.setPaintProperty(A,o.paint[A]);for(const A in o.layout)this.setLayoutProperty(A,o.layout[A]);this.expressionDependencies.configDependencies=new Set([...this.expressionDependencies.configDependencies,...this._transitionablePaint.configDependencies]),this.expressionDependencies.isIndoorDependent=this.expressionDependencies.isIndoorDependent||this._transitionablePaint.isIndoorDependent(),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Cs(u.paint)}}}onAdd(o){}onRemove(o){}isDraped(o){return!this.is3D(!0)&&rv.has(this.type)}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,u){if(this.type==="custom"&&o==="visibility")return void(this.visibility=u);const h=this._unevaluatedLayout;h._properties.properties[o]&&(h.setValue(o,u),this.expressionDependencies.configDependencies=new Set([...this.expressionDependencies.configDependencies,...h.configDependencies]),this.expressionDependencies.isIndoorDependent=this.expressionDependencies.isIndoorDependent||h.isIndoorDependent(),o==="visibility"&&this.possiblyEvaluateVisibility())}setAppearances(o){this.appearances=[],o.forEach(u=>{this.appearances.push(new q0(u.condition,u.name,u.properties,this.scope,this.options,this.iconImageUseTheme))})}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(o){return o.endsWith(nv)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}isPaintProperty(o){return!!this._transitionablePaint._properties.properties[o]}setPaintProperty(o,u){const h=this._transitionablePaint,g=h._properties.properties;if(o.endsWith(nv)){const j=o.slice(0,-11);return g[j]&&h.setTransition(j,u||void 0),!1}if(!g[o])return!1;const b=h._values[o],w=b.value.isDataDriven(),A=b.value;h.setValue(o,u),this.expressionDependencies.configDependencies=new Set([...this.expressionDependencies.configDependencies,...h.configDependencies]),this.expressionDependencies.isIndoorDependent=this.expressionDependencies.isIndoorDependent||h.isIndoorDependent(),this._handleSpecialPaintPropertyUpdate(o);const D=h._values[o].value,P=D.isDataDriven(),B=o.endsWith("pattern")||o==="line-dasharray";return P||w||B||this._handleOverridablePaintPropertyUpdate(o,A,D)}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getDefaultProgramParams(o,u,h){return null}_handleOverridablePaintPropertyUpdate(o,u,h){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,u,this.iconImageUseTheme)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,u)}serialize(){const o={id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.appearances.length!==0&&(o.appearances=this.appearances.map(u=>u.serialize())),Rn(o,(u,h)=>!(u===void 0||h==="layout"&&!Object.keys(u).length||h==="paint"&&!Object.keys(u).length))}is3D(o){return!1}hasElevation(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}_clear(){}isStateDependent(){for(const o in this.paint._values){const u=this.paint.get(o);if(u instanceof Eh&&im(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}for(const o of this.appearances)if(!wo(o.condition.expression))return!0;return!1}compileFilter(o){this._filterCompiled||(this._featureFilter=ev(this.filter,this.scope,o),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(o){this._stats&&(o.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}getAppearances(){return this.appearances}queryRenderedFeatures(o,u,h){return{}}queryRadius(o){}queryIntersectsFeature(o,u,h,g,b,w,A,D,P,B){}}const H0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ml{constructor(o,u){this._structArray=o,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}const h1=new ArrayBuffer(0);class Ei{constructor(){this._reallocCount=0,this.capacity=0,this.length=0}static serialize(o,u){return o._trim(),u&&o.arrayBuffer&&u.add(o.arrayBuffer),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const u=Object.create(this.prototype);return u.arrayBuffer=o.arrayBuffer,u.length=o.length,o.arrayBuffer?u.capacity=o.arrayBuffer.byteLength/u.bytesPerElement:(u.capacity=0,u.arrayBuffer=h1),u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this._reallocCount++,this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}reserveForAdditional(o){this.reserve(this.length+o)}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...o){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...o){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function gr(c,o=1){let u=0,h=0;return{members:c.map(g=>{const b=H0[g.type].BYTES_PER_ELEMENT,w=u=ny(u,Math.max(o,b)),A=g.components||1;return h=Math.max(h,b),u+=b*A,{name:g.name,type:g.type,components:A,offset:w}}),size:ny(u,Math.max(h,o)),alignment:o}}function ny(c,o){return Math.ceil(c/o)*o}class Pf extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u){const h=this.length;return this.resize(h+1),this.emplace(h,o,u)}emplace(o,u,h){const g=2*o;return this.int16[g+0]=u,this.int16[g+1]=h,o}}Pf.prototype.bytesPerElement=4,Kt(Pf,"StructArrayLayout2i4");class Qu extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,h)}emplace(o,u,h,g){const b=3*o;return this.int16[b+0]=u,this.int16[b+1]=h,this.int16[b+2]=g,o}}Qu.prototype.bytesPerElement=6,Kt(Qu,"StructArrayLayout3i6");class Uc extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,u,h,g)}emplace(o,u,h,g,b){const w=4*o;return this.int16[w+0]=u,this.int16[w+1]=h,this.int16[w+2]=g,this.int16[w+3]=b,o}}Uc.prototype.bytesPerElement=8,Kt(Uc,"StructArrayLayout4i8");class To extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.float32[1*o+0]=u,o}}To.prototype.bytesPerElement=4,Kt(To,"StructArrayLayout1f4");class fm extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,h)}emplace(o,u,h,g){const b=4*o,w=2*o;return this.int16[b+0]=u,this.int16[b+1]=h,this.float32[w+1]=g,o}}fm.prototype.bytesPerElement=8,Kt(fm,"StructArrayLayout2i1f8");class ry extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,h)}emplace(o,u,h,g){const b=4*o;return this.int16[b+0]=u,this.int16[b+1]=h,this.int16[b+2]=g,o}}ry.prototype.bytesPerElement=8,Kt(ry,"StructArrayLayout3i8");class lo extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,h,g,b)}emplace(o,u,h,g,b,w){const A=5*o;return this.int16[A+0]=u,this.int16[A+1]=h,this.int16[A+2]=g,this.int16[A+3]=b,this.int16[A+4]=w,o}}lo.prototype.bytesPerElement=10,Kt(lo,"StructArrayLayout5i10");class Xo extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A){const D=this.length;return this.resize(D+1),this.emplace(D,o,u,h,g,b,w,A)}emplace(o,u,h,g,b,w,A,D){const P=6*o,B=12*o,j=3*o;return this.int16[P+0]=u,this.int16[P+1]=h,this.uint8[B+4]=g,this.uint8[B+5]=b,this.uint8[B+6]=w,this.uint8[B+7]=A,this.float32[j+2]=D,o}}Xo.prototype.bytesPerElement=12,Kt(Xo,"StructArrayLayout2i4ub1f12");class Yl extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,h)}emplace(o,u,h,g){const b=3*o;return this.float32[b+0]=u,this.float32[b+1]=h,this.float32[b+2]=g,o}}Yl.prototype.bytesPerElement=12,Kt(Yl,"StructArrayLayout3f12");class Ju extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,h,g,b)}emplace(o,u,h,g,b,w){const A=6*o,D=3*o;return this.uint16[A+0]=u,this.uint16[A+1]=h,this.uint16[A+2]=g,this.uint16[A+3]=b,this.float32[D+2]=w,o}}Ju.prototype.bytesPerElement=12,Kt(Ju,"StructArrayLayout4ui1f12");class $d extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,h,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,u,h,g)}emplace(o,u,h,g,b){const w=4*o;return this.uint16[w+0]=u,this.uint16[w+1]=h,this.uint16[w+2]=g,this.uint16[w+3]=b,o}}$d.prototype.bytesPerElement=8,Kt($d,"StructArrayLayout4ui8");class Vd extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w){const A=this.length;return this.resize(A+1),this.emplace(A,o,u,h,g,b,w)}emplace(o,u,h,g,b,w,A){const D=6*o;return this.int16[D+0]=u,this.int16[D+1]=h,this.int16[D+2]=g,this.int16[D+3]=b,this.int16[D+4]=w,this.int16[D+5]=A,o}}Vd.prototype.bytesPerElement=12,Kt(Vd,"StructArrayLayout6i12");class qd extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P,B,j,$){const G=this.length;return this.resize(G+1),this.emplace(G,o,u,h,g,b,w,A,D,P,B,j,$)}emplace(o,u,h,g,b,w,A,D,P,B,j,$,G){const Z=12*o;return this.int16[Z+0]=u,this.int16[Z+1]=h,this.int16[Z+2]=g,this.int16[Z+3]=b,this.uint16[Z+4]=w,this.uint16[Z+5]=A,this.uint16[Z+6]=D,this.uint16[Z+7]=P,this.int16[Z+8]=B,this.int16[Z+9]=j,this.int16[Z+10]=$,this.int16[Z+11]=G,o}}qd.prototype.bytesPerElement=24,Kt(qd,"StructArrayLayout4i4ui4i24");class iv extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w){const A=this.length;return this.resize(A+1),this.emplace(A,o,u,h,g,b,w)}emplace(o,u,h,g,b,w,A){const D=10*o,P=5*o;return this.int16[D+0]=u,this.int16[D+1]=h,this.int16[D+2]=g,this.float32[P+2]=b,this.float32[P+3]=w,this.float32[P+4]=A,o}}iv.prototype.bytesPerElement=20,Kt(iv,"StructArrayLayout3i3f20");class ec extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,u,h,g)}emplace(o,u,h,g,b){const w=4*o;return this.float32[w+0]=u,this.float32[w+1]=h,this.float32[w+2]=g,this.float32[w+3]=b,o}}ec.prototype.bytesPerElement=16,Kt(ec,"StructArrayLayout4f16");class av extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint32[1*o+0]=u,o}}av.prototype.bytesPerElement=4,Kt(av,"StructArrayLayout1ul4");class Wl extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u){const h=this.length;return this.resize(h+1),this.emplace(h,o,u)}emplace(o,u,h){const g=2*o;return this.uint16[g+0]=u,this.uint16[g+1]=h,o}}Wl.prototype.bytesPerElement=4,Kt(Wl,"StructArrayLayout2ui4");class Ah extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P,B,j,$,G){const Z=this.length;return this.resize(Z+1),this.emplace(Z,o,u,h,g,b,w,A,D,P,B,j,$,G)}emplace(o,u,h,g,b,w,A,D,P,B,j,$,G,Z){const se=20*o,fe=10*o;return this.int16[se+0]=u,this.int16[se+1]=h,this.int16[se+2]=g,this.int16[se+3]=b,this.int16[se+4]=w,this.float32[fe+3]=A,this.float32[fe+4]=D,this.float32[fe+5]=P,this.float32[fe+6]=B,this.int16[se+14]=j,this.uint32[fe+8]=$,this.uint16[se+18]=G,this.uint16[se+19]=Z,o}}Ah.prototype.bytesPerElement=40,Kt(Ah,"StructArrayLayout5i4f1i1ul2ui40");class hm extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A){const D=this.length;return this.resize(D+1),this.emplace(D,o,u,h,g,b,w,A)}emplace(o,u,h,g,b,w,A,D){const P=8*o;return this.int16[P+0]=u,this.int16[P+1]=h,this.int16[P+2]=g,this.int16[P+4]=b,this.int16[P+5]=w,this.int16[P+6]=A,this.int16[P+7]=D,o}}hm.prototype.bytesPerElement=16,Kt(hm,"StructArrayLayout3i2i2i16");class iy extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,h,g,b)}emplace(o,u,h,g,b,w){const A=4*o,D=8*o;return this.float32[A+0]=u,this.float32[A+1]=h,this.float32[A+2]=g,this.int16[D+6]=b,this.int16[D+7]=w,o}}iy.prototype.bytesPerElement=16,Kt(iy,"StructArrayLayout2f1f2i16");class ay extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w){const A=this.length;return this.resize(A+1),this.emplace(A,o,u,h,g,b,w)}emplace(o,u,h,g,b,w,A){const D=20*o,P=5*o;return this.uint8[D+0]=u,this.uint8[D+1]=h,this.float32[P+1]=g,this.float32[P+2]=b,this.float32[P+3]=w,this.float32[P+4]=A,o}}ay.prototype.bytesPerElement=20,Kt(ay,"StructArrayLayout2ub4f20");class Xa extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,h)}emplace(o,u,h,g){const b=3*o;return this.uint16[b+0]=u,this.uint16[b+1]=h,this.uint16[b+2]=g,o}}Xa.prototype.bytesPerElement=6,Kt(Xa,"StructArrayLayout3ui6");class Hd extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe,ue,pe,ve,Se,ke){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe,ue,pe,ve,Se,ke)}emplace(o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe,ue,pe,ve,Se,ke,Ie){const Ve=30*o,qe=15*o,Ue=60*o;return this.int16[Ve+0]=u,this.int16[Ve+1]=h,this.int16[Ve+2]=g,this.float32[qe+2]=b,this.float32[qe+3]=w,this.uint16[Ve+8]=A,this.uint16[Ve+9]=D,this.uint32[qe+5]=P,this.uint32[qe+6]=B,this.uint32[qe+7]=j,this.uint16[Ve+16]=$,this.uint16[Ve+17]=G,this.uint16[Ve+18]=Z,this.float32[qe+10]=se,this.float32[qe+11]=fe,this.uint8[Ue+48]=ue,this.uint8[Ue+49]=pe,this.uint8[Ue+50]=ve,this.uint32[qe+13]=Se,this.int16[Ve+28]=ke,this.uint8[Ue+58]=Ie,o}}Hd.prototype.bytesPerElement=60,Kt(Hd,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Oh extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe,ue,pe,ve,Se,ke,Ie,Ve,qe,Ue,Ze,rt,Et,xt,Tt,kt,Pt,Rt){const vt=this.length;return this.resize(vt+1),this.emplace(vt,o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe,ue,pe,ve,Se,ke,Ie,Ve,qe,Ue,Ze,rt,Et,xt,Tt,kt,Pt,Rt)}emplace(o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe,ue,pe,ve,Se,ke,Ie,Ve,qe,Ue,Ze,rt,Et,xt,Tt,kt,Pt,Rt,vt){const zt=20*o,Mt=40*o,Ft=80*o;return this.float32[zt+0]=u,this.float32[zt+1]=h,this.int16[Mt+4]=g,this.int16[Mt+5]=b,this.int16[Mt+6]=w,this.int16[Mt+7]=A,this.int16[Mt+8]=D,this.int16[Mt+9]=P,this.int16[Mt+10]=B,this.int16[Mt+11]=j,this.int16[Mt+12]=$,this.uint16[Mt+13]=G,this.uint16[Mt+14]=Z,this.uint16[Mt+15]=se,this.uint16[Mt+16]=fe,this.uint16[Mt+17]=ue,this.uint16[Mt+18]=pe,this.uint16[Mt+19]=ve,this.uint16[Mt+20]=Se,this.uint16[Mt+21]=ke,this.uint16[Mt+22]=Ie,this.uint16[Mt+23]=Ve,this.uint16[Mt+24]=qe,this.uint16[Mt+25]=Ue,this.uint16[Mt+26]=Ze,this.uint16[Mt+27]=rt,this.uint32[zt+14]=Et,this.float32[zt+15]=xt,this.float32[zt+16]=Tt,this.float32[zt+17]=kt,this.float32[zt+18]=Pt,this.uint8[Ft+76]=Rt,this.uint16[Mt+39]=vt,o}}Oh.prototype.bytesPerElement=80,Kt(Oh,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class dm extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w){const A=this.length;return this.resize(A+1),this.emplace(A,o,u,h,g,b,w)}emplace(o,u,h,g,b,w,A){const D=6*o;return this.float32[D+0]=u,this.float32[D+1]=h,this.float32[D+2]=g,this.float32[D+3]=b,this.float32[D+4]=w,this.float32[D+5]=A,o}}dm.prototype.bytesPerElement=24,Kt(dm,"StructArrayLayout6f24");class Ch extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,h,g,b)}emplace(o,u,h,g,b,w){const A=5*o;return this.float32[A+0]=u,this.float32[A+1]=h,this.float32[A+2]=g,this.float32[A+3]=b,this.float32[A+4]=w,o}}Ch.prototype.bytesPerElement=20,Kt(Ch,"StructArrayLayout5f20");class pm extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A){const D=this.length;return this.resize(D+1),this.emplace(D,o,u,h,g,b,w,A)}emplace(o,u,h,g,b,w,A,D){const P=7*o;return this.float32[P+0]=u,this.float32[P+1]=h,this.float32[P+2]=g,this.float32[P+3]=b,this.float32[P+4]=w,this.float32[P+5]=A,this.float32[P+6]=D,o}}pm.prototype.bytesPerElement=28,Kt(pm,"StructArrayLayout7f28");class mm extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P,B,j){const $=this.length;return this.resize($+1),this.emplace($,o,u,h,g,b,w,A,D,P,B,j)}emplace(o,u,h,g,b,w,A,D,P,B,j,$){const G=11*o;return this.float32[G+0]=u,this.float32[G+1]=h,this.float32[G+2]=g,this.float32[G+3]=b,this.float32[G+4]=w,this.float32[G+5]=A,this.float32[G+6]=D,this.float32[G+7]=P,this.float32[G+8]=B,this.float32[G+9]=j,this.float32[G+10]=$,o}}mm.prototype.bytesPerElement=44,Kt(mm,"StructArrayLayout11f44");class Gd extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P){const B=this.length;return this.resize(B+1),this.emplace(B,o,u,h,g,b,w,A,D,P)}emplace(o,u,h,g,b,w,A,D,P,B){const j=9*o;return this.float32[j+0]=u,this.float32[j+1]=h,this.float32[j+2]=g,this.float32[j+3]=b,this.float32[j+4]=w,this.float32[j+5]=A,this.float32[j+6]=D,this.float32[j+7]=P,this.float32[j+8]=B,o}}Gd.prototype.bytesPerElement=36,Kt(Gd,"StructArrayLayout9f36");class Mh extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u){const h=this.length;return this.resize(h+1),this.emplace(h,o,u)}emplace(o,u,h){const g=2*o;return this.float32[g+0]=u,this.float32[g+1]=h,o}}Mh.prototype.bytesPerElement=8,Kt(Mh,"StructArrayLayout2f8");class oy extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,h,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,u,h,g)}emplace(o,u,h,g,b){const w=6*o;return this.uint32[3*o+0]=u,this.uint16[w+2]=h,this.uint16[w+3]=g,this.uint16[w+4]=b,o}}oy.prototype.bytesPerElement=12,Kt(oy,"StructArrayLayout1ul3ui12");class gm extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint16[1*o+0]=u,o}}gm.prototype.bytesPerElement=2,Kt(gm,"StructArrayLayout1ui2");class tc extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe){const ue=this.length;return this.resize(ue+1),this.emplace(ue,o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe)}emplace(o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe,ue){const pe=16*o;return this.float32[pe+0]=u,this.float32[pe+1]=h,this.float32[pe+2]=g,this.float32[pe+3]=b,this.float32[pe+4]=w,this.float32[pe+5]=A,this.float32[pe+6]=D,this.float32[pe+7]=P,this.float32[pe+8]=B,this.float32[pe+9]=j,this.float32[pe+10]=$,this.float32[pe+11]=G,this.float32[pe+12]=Z,this.float32[pe+13]=se,this.float32[pe+14]=fe,this.float32[pe+15]=ue,o}}tc.prototype.bytesPerElement=64,Kt(tc,"StructArrayLayout16f64");class Yd extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,h,g,b,w,A){const D=this.length;return this.resize(D+1),this.emplace(D,o,u,h,g,b,w,A)}emplace(o,u,h,g,b,w,A,D){const P=10*o,B=5*o;return this.uint16[P+0]=u,this.uint16[P+1]=h,this.uint16[P+2]=g,this.uint16[P+3]=b,this.float32[B+2]=w,this.float32[B+3]=A,this.float32[B+4]=D,o}}Yd.prototype.bytesPerElement=20,Kt(Yd,"StructArrayLayout4ui3f20");class G0 extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.int16[1*o+0]=u,o}}G0.prototype.bytesPerElement=2,Kt(G0,"StructArrayLayout1i2");class sy extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint8[1*o+0]=u,o}}sy.prototype.bytesPerElement=1,Kt(sy,"StructArrayLayout1ub1");class $c extends Ml{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}$c.prototype.size=40;class ov extends Ah{get(o){return new $c(this,o)}}Kt(ov,"CollisionBoxArray");class Y0 extends Ml{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}Y0.prototype.size=60;class ly extends Hd{get(o){return new Y0(this,o)}}Kt(ly,"PlacedSymbolArray");class ym extends Ml{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(o){this._structArray.uint32[this._pos4+14]=o}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(o){this._structArray.float32[this._pos4+18]=o}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}ym.prototype.size=80;class ja extends Oh{get(o){return new ym(this,o)}}Kt(ja,"SymbolInstanceArray");class uy extends To{getoffsetX(o){return this.float32[1*o+0]}}Kt(uy,"GlyphOffsetArray");class d1 extends Pf{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}Kt(d1,"SymbolLineVertexArray");class W0 extends Ml{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}W0.prototype.size=12;class Rf extends oy{get(o){return new W0(this,o)}}Kt(Rf,"FeatureIndexArray");class kf extends Wl{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}Kt(kf,"FillExtrusionCentroidArray");class sv extends Ml{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}sv.prototype.size=6;class X0 extends Qu{get(o){return new sv(this,o)}}Kt(X0,"FillExtrusionWallArray");const _m=gr([{name:"a_pos",components:2,type:"Int16"}],4),nc=gr([{name:"a_circle_z_offset",components:1,type:"Float32"}],4),Z0=gr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ii{constructor(o=[]){this.segments=o}_prepareSegment(o,u,h,g){let b=this.segments[this.segments.length-1];return o>Ii.MAX_VERTEX_ARRAY_LENGTH&&Hn(`Max vertices per segment is ${Ii.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!b||b.vertexLength+o>Ii.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==g)&&(b={vertexOffset:u,primitiveOffset:h,vertexLength:0,primitiveLength:0},g!==void 0&&(b.sortKey=g),this.segments.push(b)),b}prepareSegment(o,u,h,g){return this._prepareSegment(o,u.length,h.length,g)}get(){return this.segments}destroy(){for(const o of this.segments)for(const u in o.vaos)o.vaos[u].destroy()}static simpleSegment(o,u,h,g){return new Ii([{vertexOffset:o,primitiveOffset:u,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function K0(c,o){return 256*(c=ze(Math.floor(c),0,255))+ze(Math.floor(o),0,255)}Ii.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Kt(Ii,"SegmentVector");const lv=gr([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Q0=gr([{name:"a_pattern_b",components:4,type:"Uint16"}]),uv=gr([{name:"a_dash",components:4,type:"Uint16"}]);class vm{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(o,u,h,g){this.ids.push(Vc(o)),this.positions.push(u,h,g)}eachPosition(o,u){const h=Vc(o);let g=0,b=this.ids.length-1;for(;g<b;){const w=g+b>>1;this.ids[w]>=h?b=w:g=w+1}for(;this.ids[g]===h;)u(this.positions[3*g],this.positions[3*g+1],this.positions[3*g+2]),g++}static serialize(o,u){const h=new Float64Array(o.ids),g=new Uint32Array(o.positions);return uo(h,g,0,h.length-1),u&&(u.add(h.buffer),u.add(g.buffer)),{ids:h,positions:g}}static deserialize(o){const u=new vm;let h;u.ids=o.ids,u.positions=o.positions;for(const g of u.ids)g!==h&&u.uniqueIds.push(g),h=g;return u.indexed=!0,u}}function Vc(c){const o=+c;return Number.isSafeInteger(o)?o:Ac(String(c))}function uo(c,o,u,h){for(;u<h;){const g=c[u+h>>1];let b=u-1,w=h+1;for(;;){do b++;while(c[b]<g);do w--;while(c[w]>g);if(b>=w)break;Wd(c,b,w),Wd(o,3*b,3*w),Wd(o,3*b+1,3*w+1),Wd(o,3*b+2,3*w+2)}w-u<h-w?(uo(c,o,u,w),u=w+1):(uo(c,o,w+1,h),h=w)}}function Wd(c,o,u){const h=c[o];c[o]=c[u],c[u]=h}Kt(vm,"FeaturePositionMap");class mu{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,u),this.initialized=!0),!!this.location}set(o,u,h){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class ha extends mu{constructor(o){super(o),this.current=0}set(o,u,h){this.fetchUniformLocation(o,u)&&this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}}class Ua extends mu{constructor(o){super(o),this.current=0}set(o,u,h){this.fetchUniformLocation(o,u)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class Dl extends mu{constructor(o){super(o),this.current=[0,0]}set(o,u,h){this.fetchUniformLocation(o,u)&&(h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1])))}}class bm extends mu{constructor(o){super(o),this.current=[0,0,0]}set(o,u,h){this.fetchUniformLocation(o,u)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2])))}}class Da extends mu{constructor(o){super(o),this.current=[0,0,0,0]}set(o,u,h){this.fetchUniformLocation(o,u)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class ll extends mu{constructor(o){super(o),this.current=Qr.transparent.toPremultipliedRenderColor(null)}set(o,u,h){this.fetchUniformLocation(o,u)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const Lf=new Float32Array(16);class Xd extends mu{constructor(o){super(o),this.current=Lf}set(o,u,h){if(this.fetchUniformLocation(o,u)){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let g=1;g<16;g++)if(h[g]!==this.current[g]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}}}const _T=new Float32Array(9),y=new Float32Array(4);class l extends mu{constructor(o){super(o),this.current=y}set(o,u,h){if(this.fetchUniformLocation(o,u)){for(let g=0;g<4;g++)if(h[g]!==this.current[g]){this.current=h,this.gl.uniformMatrix2fv(this.location,!1,h);break}}}}function d(c){return[K0(255*c.r,255*c.g),K0(255*c.b,255*c.a)]}function v(c,o,u,h,g,b,w,A){return!!c&&(c.kind==="composite"||c.kind==="source"?c.evaluate(new Jr(0,{brightness:b,worldview:A}),o,u,g,h,w)==="none":c.value==="none")}class T{constructor(o,u,h,g){this.value=o,this.uniformNames=u.map(b=>`u_${b}`),this.type=h,this.context=g}setUniform(o,u,h,g,b){const w=g.constantOr(this.value);u.set(o,b,w instanceof Qr?w.toPremultipliedRenderColor(this.lutExpression&&this.lutExpression.kind==="constant"&&this.lutExpression.value==="none"?null:this.context.lut):w)}getBinding(o,u){return this.type==="color"?new ll(o):new Ua(o)}}class O{constructor(o,u){this.uniformNames=u.map(h=>`u_${h}`),this.pattern=null,this.patternTransition=null,this.pixelRatio=1}setConstantPatternPositions(o,u){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br),this.patternTransition=u?u.tl.concat(u.br):this.pattern}setUniform(o,u,h,g,b){let w=null;b!=="u_pattern"&&b!=="u_dash"||(w=this.pattern),b==="u_pattern_b"&&(w=this.patternTransition),b==="u_pixel_ratio"&&(w=this.pixelRatio),w&&u.set(o,b,w)}getBinding(o,u){return u==="u_pattern"||u==="u_pattern_b"||u==="u_dash"?new Da(o):new Ua(o)}}class M{constructor(o,u,h,g){this.expression=o,this.type=h,this.maxValue=0,this.paintVertexAttributes=u.map(b=>({name:`a_${b}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(o,u,h,g,b,w,A,D){const P=this.paintVertexArray.length,B=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new Jr(0,{brightness:w,worldview:D}),u,{},b,g,A):this.expression.kind==="constant"&&this.expression.value,j=v(this.lutExpression,u,{},g,b,w,A,D);this.paintVertexArray.resize(o),this._setPaintValue(P,o,B,j?null:this.context.lut)}updatePaintArray(o,u,h,g,b,w,A,D){const P=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:A,worldview:D},h,g,void 0,b):this.expression.kind==="constant"&&this.expression.value,B=v(this.lutExpression,h,g,b,void 0,A,void 0,D);this._setPaintValue(o,u,P,B?null:this.context.lut)}_setPaintValue(o,u,h,g){if(this.type==="color"){const b=d(h.toPremultipliedRenderColor(g));for(let w=o;w<u;w++)this.paintVertexArray.emplace(w,b[0],b[1])}else{for(let b=o;b<u;b++)this.paintVertexArray.emplace(b,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class R{constructor(o,u,h,g,b,w){this.expression=o,this.uniformNames=u.map(A=>`u_${A}_t`),this.type=h,this.useIntegerZoom=g,this.context=b,this.maxValue=0,this.paintVertexAttributes=u.map(A=>({name:`a_${A}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(o,u,h,g,b,w,A,D){const P=this.expression.evaluate(new Jr(this.context.zoom,{brightness:w,worldview:D}),u,{},b,g,A),B=this.expression.evaluate(new Jr(this.context.zoom+1,{brightness:w,worldview:D}),u,{},b,g,A),j=v(this.lutExpression,u,{},g,b,w,A,D),$=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue($,o,P,B,j?null:this.context.lut)}updatePaintArray(o,u,h,g,b,w,A,D){const P=this.expression.evaluate({zoom:this.context.zoom,brightness:A,worldview:D},h,g,void 0,b),B=this.expression.evaluate({zoom:this.context.zoom+1,brightness:A,worldview:D},h,g,void 0,b),j=v(this.lutExpression,h,g,b,void 0,A,void 0,D);this._setPaintValue(o,u,P,B,j?null:this.context.lut)}_setPaintValue(o,u,h,g,b){if(this.type==="color"){const w=d(h.toPremultipliedRenderColor(b)),A=d(g.toPremultipliedRenderColor(b));for(let D=o;D<u;D++)this.paintVertexArray.emplace(D,w[0],w[1],A[0],A[1])}else{for(let w=o;w<u;w++)this.paintVertexArray.emplace(w,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,u,h,g,b){const w=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,A=ze(this.expression.interpolationFactor(w,this.context.zoom,this.context.zoom+1),0,1);u.set(o,b,A)}getBinding(o,u){return new Ua(o)}}class N{constructor(o,u,h,g,b){this.expression=o,this.layerId=b,this.paintVertexAttributes=(h==="array"?uv:lv).members;for(let w=0;w<u.length;++w);this.paintVertexArray=new g,this.paintTransitionVertexArray=new $d}populatePaintArray(o,u,h,g){const b=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(b,o,u.patterns&&u.patterns[this.layerId],h)}updatePaintArray(o,u,h,g,b,w,A){this._setPaintValues(o,u,h.patterns&&h.patterns[this.layerId],w)}_setPaintValues(o,u,h,g){if(!g||!h)return;const b=g[h[0]],w=g[h[1]];if(b){if(b){const{tl:A,br:D,pixelRatio:P}=b;for(let B=o;B<u;B++)this.paintVertexArray.emplace(B,A[0],A[1],D[0],D[1],P)}if(w){this.paintTransitionVertexArray.resize(this.paintVertexArray.length);const{tl:A,br:D}=w;for(let P=o;P<u;P++)this.paintTransitionVertexArray.emplace(P,A[0],A[1],D[0],D[1])}}}upload(o){const u=this.expression.isStateDependent||!this.expression.isLightConstant;this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,u)),this.paintTransitionVertexArray&&this.paintTransitionVertexArray.length&&(this.paintTransitionVertexBuffer=o.createVertexBuffer(this.paintTransitionVertexArray,Q0.members,u))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy(),this.paintTransitionVertexBuffer&&this.paintTransitionVertexBuffer.destroy()}}class q{constructor(o,u,h=()=>!0){this.binders={},this._buffers=[],this.context=u;const g=[];for(const b in o.paint._values){const w=o.paint.get(b);if(b.endsWith("-use-theme")||!h(b)||!(w instanceof Eh&&im(w.property.specification)))continue;const A=ee(b,o.type),D=w.value,P=w.property.specification.type,B=!!w.property.useIntegerZoom,j=b==="line-dasharray"||b.endsWith("pattern"),$=o.paint.get(`${b}-use-theme`),G=b==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant"||$&&$.value.kind!=="constant";if(D.kind!=="constant"||G)if(D.kind==="source"||G||j){const Z=ce(b,P,"source");this.binders[b]=j?new N(D,A,P,Z,o.id):new M(D,A,P,Z),g.push(`/a_${b}`)}else{const Z=ce(b,P,"composite");this.binders[b]=new R(D,A,P,B,u,Z),g.push(`/z_${b}`)}else this.binders[b]=j?new O(D.value,A):new T(D.value,A,P,u),g.push(`/u_${b}`);$&&(this.binders[b].lutExpression=$.value)}this.cacheKey=g.sort().join("")}getMaxValue(o){const u=this.binders[o];return u instanceof M||u instanceof R?u.maxValue:0}populatePaintArrays(o,u,h,g,b,w,A,D){for(const P in this.binders){const B=this.binders[P];B.context=this.context,(B instanceof M||B instanceof R||B instanceof N)&&B.populatePaintArray(o,u,h,g,b,w,A,D)}}setConstantPatternPositions(o,u){for(const h in this.binders){const g=this.binders[h];g instanceof O&&g.setConstantPatternPositions(o,u)}}getPatternTransitionVertexBuffer(o){const u=this.binders[o];return u instanceof N?u.paintTransitionVertexBuffer:null}updatePaintArrays(o,u,h,g,b,w,A,D,P,B){let j=!1;const $=Object.keys(o),G=$.length!==0&&!D,Z=G?$:u.uniqueIds;this.context.lut=b.lut;for(const se in this.binders){const fe=this.binders[se];if(fe.context=this.context,(fe instanceof M||fe instanceof R||fe instanceof N)&&fe.expression&&fe.expression.kind&&fe.expression.kind!=="constant"&&(fe.expression.isStateDependent===!0||fe.expression.isLightConstant===!1)){const ue=b.paint.get(se);fe.expression=ue.value;for(const pe of Z){const ve=o[pe.toString()];u.eachPosition(pe,(Se,ke,Ie)=>{const Ve=g.feature(Se);fe.updatePaintArray(ke,Ie,Ve,ve,w,A,P,B)})}if(!G)for(const pe of h.uniqueIds){const ve=o[pe.toString()];h.eachPosition(pe,(Se,ke,Ie)=>{const Ve=g.feature(Se);fe.updatePaintArray(ke,Ie,Ve,ve,w,A,P,B)})}j=!0}}return j}defines(){const o=[];for(const u in this.binders){const h=this.binders[u];(h instanceof T||h instanceof O)&&o.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const u=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof T||g instanceof O||g instanceof R)for(const b of g.uniformNames)u.push({name:b,property:h,binding:g.getBinding(o,b)})}return u}setUniforms(o,u,h,g,b){for(const{name:w,property:A,binding:D}of h)this.binders[A].setUniform(o,D,b,g.get(A),w)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const u=this.binders[o];(u instanceof M||u instanceof R||u instanceof N)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer),u instanceof N&&u.paintTransitionVertexBuffer&&this._buffers.push(u.paintTransitionVertexBuffer)}}upload(o){for(const u in this.binders){const h=this.binders[u];(h instanceof M||h instanceof R||h instanceof N)&&h.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const u=this.binders[o];(u instanceof M||u instanceof R||u instanceof N)&&u.destroy()}}}class H{constructor(o,u,h=()=>!0){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new q(g,u,h);this.needsUpload=!1,this._featureMap=new vm,this._featureMapWithoutIds=new vm,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(o,u,h,g,b,w,A,D,P){for(const B in this.programConfigurations)this.programConfigurations[B].populatePaintArrays(o,u,g,b,w,A,D,P);u.id!==void 0?this._featureMap.add(u.id,h,this._bufferOffset,o):(this._featureMapWithoutIds.add(this._idlessCounter,h,this._bufferOffset,o),this._idlessCounter+=1),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,u,h,g,b,w,A,D){for(const P of h)this.needsUpload=this.programConfigurations[P.id].updatePaintArrays(o,this._featureMap,this._featureMapWithoutIds,u,P,g,b,w,A||0,D)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const re={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio","pattern_b"],"fill-pattern":["pattern","pixel_ratio","pattern_b"],"fill-extrusion-pattern":["pattern","pixel_ratio","pattern_b"],"line-dasharray":["dash"],"fill-bridge-guard-rail-color":["structure_color"],"fill-tunnel-structure-color":["structure_color"]};function ee(c,o){return re[c]||[c.replace(`${o}-`,"").replace(/-/g,"_")]}const oe={"line-pattern":{source:Ju,composite:Ju},"fill-pattern":{source:Ju,composite:Ju},"fill-extrusion-pattern":{source:Ju,composite:Ju},"line-dasharray":{source:$d,composite:$d}},he={color:{source:Mh,composite:ec},number:{source:To,composite:Mh}};function ce(c,o,u){const h=oe[c];return h&&h[u]||he[o][u]}Kt(T,"ConstantBinder"),Kt(O,"PatternConstantBinder"),Kt(M,"SourceExpressionBinder"),Kt(N,"PatternCompositeBinder"),Kt(R,"CompositeExpressionBinder"),Kt(q,"ProgramConfiguration",{omit:["_buffers"]}),Kt(H,"ProgramConfigurationSet");const de=Jt/Math.PI/2,_e=64,Me=[_e,32,16],Ce=-de,Ae=de;function We(c,o,u,h=de){return u=Ar(u),[c*Math.sin(u)*h,-o*h,c*Math.cos(u)*h]}function $e(c,o,u){return We(Math.cos(Ar(c)),Math.sin(Ar(c)),o,u)}const Ge=63710088e-1,Fe=2*Math.PI*Ge;class Re{constructor(o,u){if(isNaN(o)||isNaN(u))throw new Error(`Invalid LngLat object: (${o}, ${u})`);if(this.lng=+o,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Re(_t(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const u=Math.PI/180,h=this.lat*u,g=o.lat*u,b=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((o.lng-this.lng)*u);return Ge*Math.acos(Math.min(b,1))}toBounds(o=0){const u=360*o/40075017,h=u/Math.cos(Math.PI/180*this.lat);return new et({lng:this.lng-h,lat:this.lat-u},{lng:this.lng+h,lat:this.lat+u})}toEcef(o){return $e(this.lat,this.lng,de+o*de/Ge)}static convert(o){if(o instanceof Re)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Re(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Re(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class et{constructor(o,u){o&&(u?this.setSouthWest(o).setNorthEast(u):Array.isArray(o)&&o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof Re?new Re(o.lng,o.lat):Re.convert(o),this}setSouthWest(o){return this._sw=o instanceof Re?new Re(o.lng,o.lat):Re.convert(o),this}extend(o){const u=this._sw,h=this._ne;let g,b;if(o instanceof Re)g=o,b=o;else{if(!(o instanceof et))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(et.convert(o)):this.extend(Re.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(Re.convert(o)):this;if(g=o._sw,b=o._ne,!g||!b)return this}return u||h?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),h.lng=Math.max(b.lng,h.lng),h.lat=Math.max(b.lat,h.lat)):(this._sw=new Re(g.lng,g.lat),this._ne=new Re(b.lng,b.lat)),this}getCenter(){return new Re((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Re(this.getWest(),this.getNorth())}getSouthEast(){return new Re(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:u,lat:h}=Re.convert(o);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&g}static convert(o){if(o)return o instanceof et?o:new et(o)}}function nt(c){return Fe*Math.cos(c*Math.PI/180)}function st(c){return(180+c)/360}function dt(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function ft(c,o){return c/nt(o)}function wt(c){return 360*c-180}function It(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function pt(c,o){return c*nt(It(o))}const tt=85.051129;function At(c){return Math.cos(Ar(ze(c,-85.051129,tt)))}function gt(c,o){const u=ze(o,0,25.5),h=Math.pow(2,u);return At(c)*Fe/(512*h)}function Dt(c){return 1/Math.cos(c*Math.PI/180)}function qt(c,o=0){const u=Math.exp(Math.PI*(1-(c.y+o/Jt)/(1<<c.z)*2));return 80150034*u/(u*u+1)/Jt/(1<<c.z)}class tn{constructor(o,u,h=0){this.x=+o,this.y=+u,this.z=+h}static fromLngLat(o,u=0){const h=Re.convert(o);return new tn(st(h.lng),dt(h.lat),ft(u,h.lat))}toLngLat(){return new Re(wt(this.x),It(this.y))}toAltitude(){return pt(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Fe*Dt(It(this.y))}}function Wt(c,o,u,h,g,b,w,A,D){const P=(o+h)/2,B=(u+g)/2,j=new Vt(P,B);A(j),(function($,G,Z,se,fe,ue){const pe=Z-fe,ve=se-ue;return Math.abs((se-G)*pe-(Z-$)*ve)/Math.hypot(pe,ve)})(j.x,j.y,b.x,b.y,w.x,w.y)>=D?(Wt(c,o,u,P,B,b,j,A,D),Wt(c,P,B,h,g,j,w,A,D)):c.push(w)}function Ht(c,o,u){let h=c[0],g=h.x,b=h.y;o(h);const w=[h];for(let A=1;A<c.length;A++){const D=c[A],{x:P,y:B}=D;o(D),Wt(w,g,b,P,B,h,D,o,u),g=P,b=B,h=D}return w}function xn(c,o,u,h){if(h(o,u)){const g=o.add(u)._mult(.5);xn(c,o,g,h),xn(c,g,u,h)}else c.push(u)}function yn(c,o){let u=c[0];const h=[u];for(let g=1;g<c.length;g++){const b=c[g];xn(h,u,b,o),u=b}return h}const rn=Math.pow(2,14)-1,_n=-rn-1;function Dn(c,o){const u=Math.round(c.x*o),h=Math.round(c.y*o);return c.x=ze(u,_n,rn),c.y=ze(h,_n,rn),(u<c.x||u>c.x+1||h<c.y||h>c.y+1)&&Hn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),c}function Un(c,o,u){const h=c.loadGeometry(),g=c.extent,b=Jt/g;if(o&&u&&u.projection.isReprojectedInTileSpace){const w=1<<o.z,{scale:A,x:D,y:P,projection:B}=u,j=$=>{const G=wt((o.x+$.x/g)/w),Z=It((o.y+$.y/g)/w),se=B.project(G,Z);$.x=(se.x*A-D)*g,$.y=(se.y*A-P)*g};for(let $=0;$<h.length;$++)if(c.type!==1)h[$]=Ht(h[$],j,1);else{const G=[];for(const Z of h[$])Z.x<0||Z.x>=g||Z.y<0||Z.y>=g||(j(Z),G.push(Z));h[$]=G}}for(const w of h)for(const A of w)Dn(A,b);return h}function Qn(c,o){return{type:c.type,id:c.id,properties:c.properties,geometry:o?Un(c):[]}}class yr{constructor(o,u,h,g,b){this.properties={},this.extent=h,this.type=0,this.id=void 0,this._pbf=o,this._geometry=-1,this._keys=g,this._values=b,o.readFields($n,this,u)}loadGeometry(){const o=this._pbf;o.pos=this._geometry;const u=o.readVarint()+o.pos,h=[];let g,b=1,w=0,A=0,D=0;for(;o.pos<u;){if(w<=0){const P=o.readVarint();b=7&P,w=P>>3}if(w--,b===1||b===2)A+=o.readSVarint(),D+=o.readSVarint(),b===1&&(g&&h.push(g),g=[]),g&&g.push(new Vt(A,D));else{if(b!==7)throw new Error(`unknown command ${b}`);g&&g.push(g[0].clone())}}return g&&h.push(g),h}bbox(){const o=this._pbf;o.pos=this._geometry;const u=o.readVarint()+o.pos;let h=1,g=0,b=0,w=0,A=1/0,D=-1/0,P=1/0,B=-1/0;for(;o.pos<u;){if(g<=0){const j=o.readVarint();h=7&j,g=j>>3}if(g--,h===1||h===2)b+=o.readSVarint(),w+=o.readSVarint(),b<A&&(A=b),b>D&&(D=b),w<P&&(P=w),w>B&&(B=w);else if(h!==7)throw new Error(`unknown command ${h}`)}return[A,P,D,B]}toGeoJSON(o,u,h){const g=this.extent*Math.pow(2,h),b=this.extent*o,w=this.extent*u,A=this.loadGeometry();function D($){return[360*($.x+b)/g-180,360/Math.PI*Math.atan(Math.exp((1-2*($.y+w)/g)*Math.PI))-90]}function P($){return $.map(D)}let B;if(this.type===1){const $=[];for(const Z of A)$.push(Z[0]);const G=P($);B=$.length===1?{type:"Point",coordinates:G[0]}:{type:"MultiPoint",coordinates:G}}else if(this.type===2){const $=A.map(P);B=$.length===1?{type:"LineString",coordinates:$[0]}:{type:"MultiLineString",coordinates:$}}else{if(this.type!==3)throw new Error("unknown feature type");{const $=(function(Z){const se=Z.length;if(se<=1)return[Z];const fe=[];let ue,pe;for(let ve=0;ve<se;ve++){const Se=Jn(Z[ve]);Se!==0&&(pe===void 0&&(pe=Se<0),pe===Se<0?(ue&&fe.push(ue),ue=[Z[ve]]):ue&&ue.push(Z[ve]))}return ue&&fe.push(ue),fe})(A),G=[];for(const Z of $)G.push(Z.map(P));B=G.length===1?{type:"Polygon",coordinates:G[0]}:{type:"MultiPolygon",coordinates:G}}}const j={type:"Feature",geometry:B,properties:this.properties};return this.id!=null&&(j.id=this.id),j}}function $n(c,o,u){c===1?o.id=u.readVarint():c===2?(function(h,g){const b=h.readVarint()+h.pos;for(;h.pos<b;){const w=g._keys[h.readVarint()],A=g._values[h.readVarint()];g.properties[w]=A}})(u,o):c===3?o.type=u.readVarint():c===4&&(o._geometry=u.pos)}function Jn(c){let o=0;for(let u,h,g=0,b=c.length,w=b-1;g<b;w=g++)u=c[g],h=c[w],o+=(h.x-u.x)*(u.y+h.y);return o}yr.types=["Unknown","Point","LineString","Polygon"];class Yn{constructor(o,u){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(Ur,this,u),this.length=this._features.length}feature(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];const u=this._pbf.readVarint()+this._pbf.pos;return new yr(this._pbf,u,this.extent,this._keys,this._values)}}function Ur(c,o,u){c===15?o.version=u.readVarint():c===1?o.name=u.readString():c===5?o.extent=u.readVarint():c===2?o._features.push(u.pos):c===3?o._keys.push(u.readString()):c===4&&o._values.push((function(h){let g=null;const b=h.readVarint()+h.pos;for(;h.pos<b;){const w=h.readVarint()>>3;g=w===1?h.readString():w===2?h.readFloat():w===3?h.readDouble():w===4?h.readVarint64():w===5?h.readVarint():w===6?h.readSVarint():w===7?h.readBoolean():null}if(g==null)throw new Error("unknown feature value");return g})(u))}class Mr{constructor(o,u){this.layers=o.readFields(ei,{},u)}}function ei(c,o,u){if(c===3){const h=new Yn(u,u.readVarint()+u.pos);h.length&&(o[h.name]=h)}}const wr="3d_elevation_id",er="level";class Rr{constructor(){this._valid=!1}reset(o){return this.feature=o,this._valid=!0,this._geometry=o.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(o,u){return this._valid&&o(u(this._geometry)),this}require(o,u,h){return this.get(o,!0,u,h)}optional(o,u,h){return this.get(o,!1,u,h)}success(){return this._valid}get(o,u,h,g){const b=this.feature.properties.hasOwnProperty(o)?+this.feature.properties[o]:void 0;return this._valid&&b!==void 0&&!Number.isNaN(b)?h(g?g(b):b):u&&(this._valid=!1),this}}class Pi{constructor(o,u){this.featureFunc=o,this.vertexFunc=u}parseFeature(o,u,h){return this.featureFunc(o,u,h)}parseVertex(o,u,h){return this.vertexFunc(o,u,h)}}const ti=new Pi((c,o,u)=>c.reset(o).require(wr,h=>{u.id=h}).optional("fixed_height_relative",h=>{u.constantHeight=h},Kn.decodeRelativeHeight).geometry(h=>{u.bounds=h},Uu).success(),(c,o,u)=>c.reset(o).require(wr,h=>{u.id=h}).require("elevation_idx",h=>{u.idx=h}).require("extent",h=>{u.extent=h}).require("height_relative",h=>{u.height=h},Kn.decodeRelativeHeight).geometry(h=>{u.position=h},Kn.getPoint).success()),Hr=new Pi((c,o,u)=>c.reset(o).require(wr,h=>{u.id=h}).optional("fixed_height",h=>{u.constantHeight=h},Kn.decodeMetricHeight).geometry(h=>{u.bounds=h},Uu).success(),(c,o,u)=>c.reset(o).require(wr,h=>{u.id=h}).require("elevation_idx",h=>{u.idx=h}).require("extent",h=>{u.extent=h}).require("height",h=>{u.height=h},Kn.decodeMetricHeight).geometry(h=>{u.position=h},Kn.getPoint).success());class Kn{static getPoint(o){return Ri(o[0][0].x,o[0][0].y)}static decodeRelativeHeight(o){return 1e-4*o*5}static decodeMetricHeight(o){return 1e-4*o}static getVersionSchema(o){return o?o==="1.0.1"?Hr:void 0:ti}static parse(o){const u=[],h=[],g=o.length,b=new Rr;for(let w=0;w<g;w++){const A=o.feature(w),D=A.properties.version,P=Kn.getVersionSchema(D);if(P===void 0){Hn(`Unknown elevation feature version number ${D||"(unknown)"}`);continue}const B=A.properties.type;if(!B)continue;const j=yr.types[A.type];if(j==="Point"&&B==="curve_point"){const $={};P.parseVertex(b,A,$)&&u.push($)}else if(j==="Polygon"&&B==="curve_meta"){const $={};P.parseFeature(b,A,$)&&h.push($)}}return{vertices:u,features:h}}}class tr{constructor(o,u){this.pos=o,this.dir=u}intersectsPlane(o,u,h){const g=mi(u,this.dir);if(Math.abs(g)<1e-6)return!1;const b=((o[0]-this.pos[0])*u[0]+(o[1]-this.pos[1])*u[1])/g;return h[0]=this.pos[0]+this.dir[0]*b,h[1]=this.pos[1]+this.dir[1]*b,!0}}class yi{constructor(o,u){this.pos=o,this.dir=u}intersectsPlane(o,u,h){const g=Ye(u,this.dir);if(Math.abs(g)<1e-6)return!1;const b=((o[0]-this.pos[0])*u[0]+(o[1]-this.pos[1])*u[1]+(o[2]-this.pos[2])*u[2])/g;return h[0]=this.pos[0]+this.dir[0]*b,h[1]=this.pos[1]+this.dir[1]*b,h[2]=this.pos[2]+this.dir[2]*b,!0}closestPointOnSphere(o,u,h){if((function(G,Z){var se=G[0],fe=G[1],ue=G[2],pe=Z[0],ve=Z[1],Se=Z[2];return Math.abs(se-pe)<=p*Math.max(1,Math.abs(se),Math.abs(pe))&&Math.abs(fe-ve)<=p*Math.max(1,Math.abs(fe),Math.abs(ve))&&Math.abs(ue-Se)<=p*Math.max(1,Math.abs(ue),Math.abs(Se))})(this.pos,o)||u===0)return h[0]=h[1]=h[2]=0,!1;const[g,b,w]=this.dir,A=this.pos[0]-o[0],D=this.pos[1]-o[1],P=this.pos[2]-o[2],B=g*g+b*b+w*w,j=2*(A*g+D*b+P*w),$=j*j-4*B*(A*A+D*D+P*P-u*u);if($<0){const G=Math.max(-j/2,0),Z=A+g*G,se=D+b*G,fe=P+w*G,ue=Math.hypot(Z,se,fe);return h[0]=Z*u/ue,h[1]=se*u/ue,h[2]=fe*u/ue,!1}{const G=(-j-Math.sqrt($))/(2*B);if(G<0){const Z=Math.hypot(A,D,P);return h[0]=A*u/Z,h[1]=D*u/Z,h[2]=P*u/Z,!1}return h[0]=A+g*G,h[1]=D+b*G,h[2]=P+w*G,!0}}}class Ji{constructor(o,u,h,g,b){this.TL=o,this.TR=u,this.BR=h,this.BL=g,this.horizon=b}static fromInvProjectionMatrix(o,u,h){const g=[-1,1,1],b=[1,1,1],w=[1,-1,1],A=[-1,-1,1],D=Ct(g,g,o),P=Ct(b,b,o),B=Ct(w,w,o),j=Ct(A,A,o);return new Ji(D,P,B,j,u/h)}}function ai(c,o,u){let h=1/0,g=-1/0;const b=[];for(const w of c){sr(b,w,o);const A=Ye(b,u);h=Math.min(h,A),g=Math.max(g,A)}return[h,g]}function _i(c,o){let u=!0;for(let h=0;h<c.planes.length;h++){const g=c.planes[h];let b=0;for(let w=0;w<o.length;w++)b+=+(Ye(g,o[w])+g[3]>=0);if(b===0)return 0;b!==o.length&&(u=!1)}return u?2:1}function cs(c,o){for(const u of c.projections){const h=ai(o,c.points[0],u.axis);if(u.projection[1]<h[0]||u.projection[0]>h[1])return 0}return 1}function Uo(c,o){let u=0;const h=[0,0,0,0];for(let g=0;g<c.length;g++)h[0]=c[g][0],h[1]=c[g][1],h[2]=c[g][2],h[3]=1,Br(h,o)>=0&&u++;return u}class co{constructor(o,u){this.points=o||new Array(8).fill([0,0,0]),this.planes=u||new Array(6).fill([0,0,0,0]),this.bounds=Gr.fromPoints(this.points),this.projections=[],this.frustumEdges=[sr([],this.points[2],this.points[3]),sr([],this.points[0],this.points[3]),sr([],this.points[4],this.points[0]),sr([],this.points[5],this.points[1]),sr([],this.points[6],this.points[2]),sr([],this.points[7],this.points[3])];for(const h of this.frustumEdges){const g=[0,-h[2],h[1]],b=[h[2],0,-h[0]];this.projections.push({axis:g,projection:ai(this.points,this.points[0],g)}),this.projections.push({axis:b,projection:ai(this.points,this.points[0],b)})}}static fromInvProjectionMatrix(o,u,h,g){const b=Math.pow(2,h),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const B=hi([],P,o),j=1/B[3]/u*b;return($=B)[0]=(G=B)[0]*(Z=[j,j,g?1/B[3]:j,j])[0],$[1]=G[1]*Z[1],$[2]=G[2]*Z[2],$[3]=G[3]*Z[3],$;var $,G,Z}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const B=xe([],ct([],sr([],w[P[0]],w[P[1]]),sr([],w[P[2]],w[P[1]]))),j=-Ye(B,w[P[1]]);return B.concat(j)}),D=[];for(let P=0;P<w.length;P++)D.push([w[P][0],w[P][1],w[P][2]]);return new co(D,A)}intersectsPrecise(o,u,h){for(let g=0;g<u.length;g++)if(!Uo(o,u[g]))return 0;for(let g=0;g<this.planes.length;g++)if(!Uo(o,this.planes[g]))return 0;for(const g of h)for(const b of this.frustumEdges){const w=ct([],g,b),A=Be(w);if(A===0)continue;Pe(w,w,1/A);const D=ai(this.points,this.points[0],w),P=ai(o,this.points[0],w);if(D[0]>P[1]||P[0]>D[1])return 0}return 1}containsPoint(o){for(const u of this.planes){const h=u[3];if(Ye([u[0],u[1],u[2]],o)+h<0)return!1}return!0}}class Gr{static fromPoints(o){const u=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0];for(const g of o)Ke(u,u,g),it(h,h,g);return new Gr(u,h)}static fromTileIdAndHeight(o,u,h){const g=1<<o.canonical.z,b=o.canonical.x,w=o.canonical.y;return new Gr([b/g,w/g,u],[(b+1)/g,(w+1)/g,h])}static applyTransform(o,u){const h=o.getCorners();for(let g=0;g<h.length;++g)Ct(h[g],h[g],u);return Gr.fromPoints(h)}static applyTransformFast(o,u){const h=[u[12],u[13],u[14]],g=[...h];for(let b=0;b<3;b++)for(let w=0;w<3;w++){const A=u[4*w+b],D=A*o.min[w],P=A*o.max[w];h[b]+=Math.min(D,P),g[b]+=Math.max(D,P)}return new Gr(h,g)}static projectAabbCorners(o,u){const h=o.getCorners();for(let g=0;g<h.length;++g)Ct(h[g],h[g],u);return h}constructor(o,u){this.min=o,this.max=u,this.center=Pe([],at([],this.min,this.max),.5)}quadrant(o){const u=[o%2==0,o<2],h=He(this.min),g=He(this.max);for(let b=0;b<u.length;b++)h[b]=u[b]?this.min[b]:this.center[b],g[b]=u[b]?this.center[b]:this.max[b];return g[2]=this.max[2],new Gr(h,g)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,u=this.max;return[[o[0],o[1],o[2]],[u[0],o[1],o[2]],[u[0],u[1],o[2]],[o[0],u[1],o[2]],[o[0],o[1],u[2]],[u[0],o[1],u[2]],[u[0],u[1],u[2]],[o[0],u[1],u[2]]]}intersects(o){return this.intersectsAabb(o.bounds)?_i(o,this.getCorners()):0}intersectsFlat(o){return this.intersectsAabb(o.bounds)?_i(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(o,u){return u||this.intersects(o)?cs(o,this.getCorners()):0}intersectsPreciseFlat(o,u){return u||this.intersectsFlat(o)?cs(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(o){for(let u=0;u<3;++u)if(this.min[u]>o.max[u]||o.min[u]>this.max[u])return!1;return!0}intersectsAabbXY(o){return!(this.min[0]>o.max[0]||o.min[0]>this.max[0]||this.min[1]>o.max[1]||o.min[1]>this.max[1])}encapsulate(o){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],o.min[u]),this.max[u]=Math.max(this.max[u],o.max[u])}encapsulatePoint(o){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],o[u]),this.max[u]=Math.max(this.max[u],o[u])}closestPoint(o){return[Math.max(Math.min(this.max[0],o[0]),this.min[0]),Math.max(Math.min(this.max[1],o[1]),this.min[1]),Math.max(Math.min(this.max[2],o[2]),this.min[2])]}}Kt(Gr,"Aabb");class ul{constructor(o,u){this.feature=o,this.metersToTile=u,this.index=0}get(){const o=this.feature.vertices[this.index],u=this.feature.vertexProps[this.index].dir,h=u[1],g=-u[0],b=(o.extent+1)*this.metersToTile;return[new Vt(Math.trunc(o.position[0]+h*b),Math.trunc(o.position[1]+g*b)),new Vt(Math.trunc(o.position[0]-h*b),Math.trunc(o.position[1]-g*b))]}next(){this.index++}valid(){return this.index<this.feature.vertices.length}}class $o{constructor(o,u,h,g,b,w){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this._tmpVec2=[Qi(),Qi(),Qi(),Qi(),Qi(),Qi(),Qi()],this.id=o,this.heightRange={min:h,max:h},this.safeArea=u,this.constantHeight=h,this.constantHeight==null&&(this.constantHeight!=null||g.length!==0)){this.vertices=g,this.edges=b,this.edges=this.edges.filter(A=>{return A.a<this.vertices.length&&A.b<this.vertices.length&&!((D=this.vertices[A.a].position)[0]===(P=this.vertices[A.b].position)[0]&&D[1]===P[1]);var D,P}),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const A of this.vertices)this.vertexProps.push({dir:Ri(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,A.height),this.heightRange.max=Math.max(this.heightRange.max,A.height);for(const A of this.edges){const D=this.vertices[A.a].position,P=this.vertices[A.b].position,B=lf(Qi(),P,D),j=Fu(B),$=zu(Qi(),B,1/j);this.edgeProps.push({vec:B,dir:$,len:j});const G=this.vertexProps[A.a].dir,Z=this.vertexProps[A.b].dir;is(G,G,$),is(Z,Z,$)}for(const A of this.vertexProps)A.dir[0]===0&&A.dir[1]===0||uf(A.dir,A.dir);this.tessellate(w)}}pointElevation(o){if(this.constantHeight!=null)return this.constantHeight;const u=this.getClosestEdge(o);if(u==null)return 0;const[h,g]=u;return Vn(this.vertices[this.edges[h].a].height,this.vertices[this.edges[h].b].height,g)}computeSlopeNormal(o,u){const h=this.getClosestEdge(o);if(!h)return Ee(0,0,1);const g=h[0],b=this.edges[g],w=this.edgeProps[g].vec,A=Ee(w[0],w[1],(this.vertices[b.b].height-this.vertices[b.a].height)*u),D=Ee(A[1],-A[0],0);ct(D,D,A);const P=Be(D);return P>0?Pe(D,D,1/P):Ne(D,0,0,1)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(o){if(this.edges.length===0)return;let u=0,h=Number.POSITIVE_INFINITY,g=0;const[b,w,A,D,P,B,j]=this._tmpVec2;zs(j,o.x,o.y);const $=new tr(j,null);for(let G=0;G<this.edges.length;G++){const Z=this.edges[G],se=this.edgeProps[G].dir;$.dir=se;const fe=this.vertices[Z.a].position,ue=this.vertices[Z.b].position,pe=$.intersectsPlane(fe,this.vertexProps[Z.a].dir,b),ve=$.intersectsPlane(ue,this.vertexProps[Z.b].dir,w);if(!pe||!ve)continue;lf(A,w,b),lf(D,j,b);const Se=mi(A,A),ke=Se>0?mi(D,A)/Se:0,Ie=ze(ke,0,1),Ve=Math.abs((ke-Ie)*this.edgeProps[G].len);lf(P,j,fe),zs(B,se[1],-se[0]);const qe=Ve+Math.abs(mi(P,B));qe<h&&(u=G,h=qe,g=Ie)}return[u,g]}tessellate(o){const u=De(),h=De(),g=De(),b=De();for(let w=this.edges.length-1;w>=0;--w){const A=this.edges[w].a,D=this.edges[w].b,{position:P,height:B,extent:j}=this.vertices[A],{position:$,height:G,extent:Z}=this.vertices[D],se=this.vertexProps[A].dir,fe=this.vertexProps[D].dir;if(Ne(u,P[0]/o,P[1]/o,B),Ne(h,$[0]/o,$[1]/o,G),Ne(g,se[1],-se[0],0),Pe(g,g,j),Ne(b,fe[1],-fe[0],0),Pe(b,b,Z),this.distSqLines(Ee(u[0]+.5*g[0],u[1]+.5*g[1],u[2]+.5*g[2]),Ee(h[0]-.5*b[0],h[1]-.5*b[1],h[2]-.5*b[2]),Ee(u[0]-.5*g[0],u[1]-.5*g[1],u[2]-.5*g[2]),Ee(h[0]+.5*b[0],h[1]+.5*b[1],h[2]+.5*b[2]))<=.0025000000000000005)continue;const ue=this.vertices.length,pe=is(Qi(),P,$);this.vertices.push({position:zu(pe,pe,.5),height:.5*(B+G),extent:.5*(j+Z)});const ve=is(Qi(),se,fe);this.vertexProps.push({dir:uf(ve,ve)}),this.edges.splice(w,1),this.edgeProps.splice(w,1),this.edges.push({a:A,b:ue}),this.edges.push({a:ue,b:D});const Se=lf(Qi(),this.vertices[ue].position,P),ke=Fu(Se),Ie={vec:Se,dir:zu(Qi(),Se,1/ke),len:ke};this.edgeProps.push(Ie),this.edgeProps.push(Ie)}}distSqLines(o,u,h,g){const b=yt(De(),u,o),w=yt(De(),g,h),A=yt(De(),o,h),D=Ye(b,b),P=Ye(b,w),B=Ye(b,A),j=Ye(w,w),$=Ye(w,A),G=D*j-P*P;if(G===0)return dn(mt(b,h,g,Ye(A,w)/Ye(w,w)),o);const Z=(D*$-P*B)/G;return dn(mt(b,o,u,(P*$-B*j)/G),mt(w,h,g,Z))}}class Zo{static parseFrom(o,u){const h=Kn.parse(o);if(!h)return[];let{vertices:g,features:b}=h;const w=1/qt(u);b.sort((B,j)=>B.id-j.id),g.sort((B,j)=>B.id-j.id||B.idx-j.idx),g=g.filter((B,j,$)=>j===$.findIndex(G=>G.id===B.id&&G.idx===B.idx));const A=new Array;let D=0;const P=g.length;for(const B of b){if(B.constantHeight){A.push(new $o(B.id,B.bounds,B.constantHeight));continue}for(;D!==P&&g[D].id<B.id;)D++;if(D===P||g[D].id!==B.id)continue;const j=new Array,$=new Array,G=D;for(;D!==P&&g[D].id===B.id;){const Z=g[D];if(j.push({position:Z.position,height:Z.height,extent:Z.extent}),D!==G&&g[D-1].idx===Z.idx-1){const se=D-G;$.push({a:se-1,b:se})}D++}A.push(new $o(B.id,B.bounds,void 0,j,$,w))}return A}static getElevationFeature(o,u){if(!u)return;const h=+o.properties[wr];return Number.isNaN(h)?void 0:u.find(g=>g.id===h)}}class Il{constructor(o,u){this.zScale=1,this.xOffset=0,this.yOffset=0,o.equals(u)||(this.zScale=Math.pow(2,u.z-o.z),this.xOffset=(o.x*this.zScale-u.x)*Jt,this.yOffset=(o.y*this.zScale-u.y)*Jt)}constantElevation(o,u){if(o.constantHeight!=null)return this.computeBiasedHeight(o.constantHeight,u)}pointElevation(o,u,h){const g=this.constantElevation(u,h);return g??(o.x=o.x*this.zScale+this.xOffset,o.y=o.y*this.zScale+this.yOffset,this.computeBiasedHeight(u.pointElevation(o),h))}computeBiasedHeight(o,u){return u<=0?o:o+u*ot(0,u,o>=0?o:Math.abs(.5*o))}}Kt($o,"ElevationFeature");class qs{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new Pf,this.indexArray=new Xa,this.segments=new Ii,this.programConfigurations=new H(o.layers,{zoom:o.zoom,lut:o.lut}),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.elevationMode=this.layers[0].layout.get("circle-elevation-reference"),this.hasElevation=!1,this.elevationMode!=="none"&&(this.elevatedLayoutVertexArray=new To),this.worldview=o.worldview,this.hasAppearances=null}updateFootprints(o,u){}updateAppearances(o,u,h,g){}populate(o,u,h,g){const b=this.layers[0],w=[];let A=null;b.type==="circle"&&(A=b.layout.get("circle-sort-key"));for(const{feature:P,id:B,index:j,sourceLayerIndex:$}of o){const G=this.layers[0]._featureFilter.needGeometry,Z=Qn(P,G);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),Z,h))continue;const se=A?A.evaluate(Z,{},h):void 0,fe={id:B,properties:P.properties,type:P.type,sourceLayerIndex:$,index:j,geometry:G?Z.geometry:Un(P,h,g),patterns:{},sortKey:se};w.push(fe)}A&&w.sort((P,B)=>P.sortKey-B.sortKey);let D=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new Vd,D=g.projection);for(const P of w){const{geometry:B,index:j,sourceLayerIndex:$}=P,G=o[j].feature;this.addFeature(P,B,j,u.availableImages,h,D,u.brightness,u.elevationFeatures),u.featureIndex.insert(G,B,j,$,this.index)}this.hasElevation||(this.elevatedLayoutVertexArray=void 0)}update(o,u,h,g,b,w,A){this.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A,this.worldview)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,_m.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,Z0.members)),this.elevatedLayoutVertexArray&&(this.elevatedLayoutVertexBuffer=o.createVertexBuffer(this.elevatedLayoutVertexArray,nc.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy())}addFeature(o,u,h,g,b,w,A,D){let P;this.elevationMode!=="none"&&(P=Zo.getElevationFeature(o,D));for(const B of u)for(const j of B){const $=j.x,G=j.y;if($<0||$>=Jt||G<0||G>=Jt)continue;if(w){const fe=w.projectTilePoint($,G,b),ue=w.upVector(b,$,G);this.addGlobeExtVertex(fe,ue),this.addGlobeExtVertex(fe,ue),this.addGlobeExtVertex(fe,ue),this.addGlobeExtVertex(fe,ue)}const Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),se=Z.vertexLength;if(this.addCircleVertex($,G,-1,-1),this.addCircleVertex($,G,1,-1),this.addCircleVertex($,G,1,1),this.addCircleVertex($,G,-1,1),this.elevationMode!=="none"){const fe=P?P.pointElevation(new Vt($,G)):0;this.hasElevation=this.hasElevation||fe!==0;for(let ue=0;ue<4;ue++)this.elevatedLayoutVertexArray.emplaceBack(fe)}this.indexArray.emplaceBack(se,se+1,se+2),this.indexArray.emplaceBack(se,se+2,se+3),Z.vertexLength+=4,Z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,{},g,b,A,void 0,this.worldview)}addCircleVertex(o,u,h,g){this.layoutVertexArray.emplaceBack(2*o+(h+1)/2,2*u+(g+1)/2)}addGlobeExtVertex(o,u){this.globeExtVertexArray.emplaceBack(o.x,o.y,o.z,u[0]*16384,u[1]*16384,u[2]*16384)}}function $i(c,o){for(let u=0;u<c.length;u++)if(fl(o,c[u]))return!0;for(let u=0;u<o.length;u++)if(fl(c,o[u]))return!0;return!!no(c,o)}function xa(c,o,u){return!!fl(c,o)||!!rc(o,c,u)}function Si(c,o){if(c.length===1)return Kd(o,c[0]);for(let u=0;u<o.length;u++){const h=o[u];for(let g=0;g<h.length;g++)if(fl(c,h[g]))return!0}for(let u=0;u<c.length;u++)if(Kd(o,c[u]))return!0;for(let u=0;u<o.length;u++)if(no(c,o[u]))return!0;return!1}function Ia(c,o,u){if(c.length>1){if(no(c,o))return!0;for(let h=0;h<o.length;h++)if(rc(o[h],c,u))return!0}for(let h=0;h<c.length;h++)if(rc(c[h],o,u))return!0;return!1}function no(c,o){if(c.length===0||o.length===0)return!1;for(let u=0;u<c.length-1;u++){const h=c[u],g=c[u+1];for(let b=0;b<o.length-1;b++)if(Wi(h,g,o[b],o[b+1]))return!0}return!1}function Wi(c,o,u,h){return xi(c,u,h)!==xi(o,u,h)&&xi(c,o,u)!==xi(c,o,h)}function cl(c,o,u){return(c.x-u.x)*(o.y-u.y)-(c.y-u.y)*(o.x-u.x)}function xm(c,o,u,h){const g=cl(c,o,h),b=cl(c,o,u);if(Math.sign(g)===Math.sign(b))return;const w=cl(u,h,c),A=w+b-g;return Math.sign(w)!==Math.sign(A)?[w/(w-A),b/(b-g)]:void 0}function rc(c,o,u){const h=u*u;if(o.length===1)return c.distSqr(o[0])<h;for(let g=1;g<o.length;g++)if(Zd(c,o[g-1],o[g])<h)return!0;return!1}function Zd(c,o,u){const h=o.distSqr(u);if(h===0)return c.distSqr(o);const g=((c.x-o.x)*(u.x-o.x)+(c.y-o.y)*(u.y-o.y))/h;return c.distSqr(g<0?o:g>1?u:u.sub(o)._mult(g)._add(o))}function Kd(c,o){let u,h,g,b=!1;for(let w=0;w<c.length;w++){u=c[w];for(let A=0,D=u.length-1;A<u.length;D=A++)h=u[A],g=u[D],h.y>o.y!=g.y>o.y&&o.x<(g.x-h.x)*(o.y-h.y)/(g.y-h.y)+h.x&&(b=!b)}return b}function fl(c,o){let u=!1;for(let h=0,g=c.length-1;h<c.length;g=h++){const b=c[h],w=c[g];b.y>o.y!=w.y>o.y&&o.x<(w.x-b.x)*(o.y-b.y)/(w.y-b.y)+b.x&&(u=!u)}return u}function Xl(c,o,u,h,g){for(const w of c)if(o<=w.x&&u<=w.y&&h>=w.x&&g>=w.y)return!0;const b=[new Vt(o,u),new Vt(o,g),new Vt(h,g),new Vt(h,u)];if(c.length>2){for(const w of b)if(fl(c,w))return!0}for(let w=0;w<c.length-1;w++)if(ic(c[w],c[w+1],b))return!0;return!1}function ic(c,o,u){const h=u[0],g=u[2];if(c.x<h.x&&o.x<h.x||c.x>g.x&&o.x>g.x||c.y<h.y&&o.y<h.y||c.y>g.y&&o.y>g.y)return!1;const b=xi(c,o,u[0]);return b!==xi(c,o,u[1])||b!==xi(c,o,u[2])||b!==xi(c,o,u[3])}function Pl(c,o,u,h,g,b){let w=o.y-c.y,A=c.x-o.x;if(b=b||0){const D=w*w+A*A;if(D===0)return!0;const P=Math.sqrt(D);w/=P,A/=P}return!((u.x-c.x)*w+(u.y-c.y)*A-b<0||(h.x-c.x)*w+(h.y-c.y)*A-b<0||(g.x-c.x)*w+(g.y-c.y)*A-b<0)}function Ai(c,o,u,h,g,b,w){return!(Pl(c,o,h,g,b,w)||Pl(o,u,h,g,b,w)||Pl(u,c,h,g,b,w)||Pl(h,g,c,o,u,w)||Pl(g,b,c,o,u,w)||Pl(b,h,c,o,u,w))}function zf(c,o,u){const h=o.paint.get(c).value;return h.kind==="constant"?h.value:u.programConfigurations.get(o.id).getMaxValue(c)}function cv(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function vT(c,o,u,h,g){if(!o[0]&&!o[1])return c;const b=Vt.convert(o)._mult(g);u==="viewport"&&b._rotate(-h);const w=[];for(let A=0;A<c.length;A++)w.push(c[A].sub(b));return w}function UO(c,o,u,h){const g=Vt.convert(c)._mult(h);return o==="viewport"&&g._rotate(-u),g}let $O,VO;function J0(c,o,u){var h=2*Math.PI*6378137/256/Math.pow(2,u);return[c*h-2*Math.PI*6378137/2,o*h-2*Math.PI*6378137/2]}Kt(qs,"CircleBucket",{omit:["layers"]});class qc{constructor(o,u,h){this.z=o,this.x=u,this.y=h,this.key=wm(0,o,o,u,h)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}isChildOf(o){const u=this.z-o.z;return o.z===0||o.z<this.z&&o.x===this.x>>u&&o.y===this.y>>u}url(o,u){const h=(function(b,w,A){var D=J0(256*b,256*(w=Math.pow(2,A)-w-1),A),P=J0(256*(b+1),256*(w+1),A);return D[0]+","+D[1]+","+P[0]+","+P[1]})(this.x,this.y,this.z),g=(function(b,w,A){let D,P="";for(let B=b;B>0;B--)D=1<<B-1,P+=(w&D?1:0)+(A&D?2:0);return P})(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class p1{constructor(o,u){this.wrap=o,this.canonical=u,this.key=wm(o,u.z,u.z,u.x,u.y)}}class Ko{constructor(o,u,h,g,b){this.overscaledZ=o,this.wrap=u,this.canonical=new qc(h,+g,+b),this.key=u===0&&o===h?this.canonical.key:wm(u,o,h,g,b)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const u=this.canonical.z-o;return o>this.canonical.z?new Ko(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ko(o,this.wrap,o,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(o,u=!0){if(this.overscaledZ===o&&u)return this.key;if(o>this.canonical.z)return wm(this.wrap*+u,o,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-o;return wm(this.wrap*+u,o,o,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const u=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.z<this.canonical.z&&o.canonical.x===this.canonical.x>>u&&o.canonical.y===this.canonical.y>>u}children(o){if(this.overscaledZ>=o)return[new Ko(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Ko(u,this.wrap,u,h,g),new Ko(u,this.wrap,u,h+1,g),new Ko(u,this.wrap,u,h,g+1),new Ko(u,this.wrap,u,h+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Ko(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Ko(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new p1(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function wm(c,o,u,h,g){const b=1<<Math.min(u,22);let w=b*(g%b)+h%b;return c&&u<22&&(w+=b*b*((c<0?-2*c-1:2*c)%(1<<2*(22-u)))),16*(32*w+u)+(o-u)}const Sm=[c=>{let o=c.canonical.x-1,u=c.wrap;return o<0&&(o=(1<<c.canonical.z)-1,u--),new Ko(c.overscaledZ,u,c.canonical.z,o,c.canonical.y)},c=>{let o=c.canonical.x+1,u=c.wrap;return o===1<<c.canonical.z&&(o=0,u++),new Ko(c.overscaledZ,u,c.canonical.z,o,c.canonical.y)},c=>new Ko(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,(c.canonical.y===0?1<<c.canonical.z:c.canonical.y)-1),c=>new Ko(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y===(1<<c.canonical.z)-1?0:c.canonical.y+1)];Kt(qc,"CanonicalTileID"),Kt(Ko,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Dh=gr([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Tm}=Dh,kk=gr([{name:"a_pos_3",components:3,type:"Int16"}]);var bT=gr([{name:"a_pos",type:"Int16",components:2}]);function eb(c){return c*de/Ge}const qO=[new Gr([Ce,Ce,Ce],[Ae,Ae,Ae]),new Gr([Ce,Ce,Ce],[0,0,Ae]),new Gr([0,Ce,Ce],[Ae,0,Ae]),new Gr([Ce,0,Ce],[0,Ae,Ae]),new Gr([0,0,Ce],[Ae,Ae,Ae])];function xT(c,o,u,h=!0){const g=Pe([],c._camera.position,c.worldSize),b=[o,u,1,1];hi(b,b,c.pixelMatrixInverse),Tr(b,b,1/b[3]);const w=xe([],sr([],b,g)),A=c.globeMatrix,D=[A[12],A[13],A[14]],P=sr([],D,g),B=Be(P),j=xe([],P),$=c.worldSize/(2*Math.PI),G=Ye(j,w),Z=Math.asin($/B);if(Z<Math.acos(G)){if(!h)return null;const Ze=[],rt=[];Pe(Ze,w,B/G),xe(rt,sr(rt,Ze,P)),xe(w,at(w,P,Pe(w,rt,Math.tan(Z)*B)))}const se=[];new yi(g,w).closestPointOnSphere(D,$,se);const fe=xe([],ji(A,0)),ue=xe([],ji(A,1)),pe=xe([],ji(A,2)),ve=Ye(fe,se),Se=Ye(ue,se),ke=Ye(pe,se),Ie=ut(Math.asin(-Se/$));let Ve=ut(Math.atan2(ve,ke));Ve=c.center.lng+(function(Ze,rt){const Et=(rt-Ze+180)%360-180;return Et<-180?Et+360:Et})(c.center.lng,Ve);const qe=st(Ve),Ue=ze(dt(Ie),0,1);return new tn(qe,Ue)}class Lk{constructor(o,u,h){this.a=sr([],o,h),this.b=sr([],u,h),this.center=h;const g=xe([],this.a),b=xe([],this.b);this.angle=Math.acos(Ye(g,b))}}function tb(c,o){if(c.angle===0)return null;let u;return u=c.a[o]===0?1/c.angle*.5*Math.PI:1/c.angle*Math.atan(c.b[o]/c.a[o]/Math.sin(c.angle)-1/Math.tan(c.angle)),u<0||u>1?null:(function(h,g,b,w){const A=Math.sin(b);return h*(Math.sin((1-w)*b)/A)+g*(Math.sin(w*b)/A)})(c.a[o],c.b[o],c.angle,ze(u,0,1))+c.center[o]}function Ff(c){if(c.z<=1)return qO[c.z+2*c.y+c.x];const o=wT(fv(c));return Gr.fromPoints(o)}function Ih(c,o,u){return Pe(c,c,1-u),jt(c,c,o,u)}function HO(c,o,u){for(const h of c)Ct(h,h,o),Pe(h,h,u)}function m1(c,o,u,h){const g=o/c.worldSize,b=c.globeMatrix;if(u.z<=1){const Ue=Ff(u).getCorners();return HO(Ue,b,g),Gr.fromPoints(Ue)}const w=fv(u,h),A=wT(w,de+eb(c._tileCoverLift));HO(A,b,g);const D=Number.MAX_VALUE,P=[-D,-D,-D],B=[D,D,D];if(w.contains(c.center)){for(const rt of A)Ke(B,B,rt),it(P,P,rt);P[2]=0;const Ue=c.point,Ze=[Ue.x*g,Ue.y*g,0];return Ke(B,B,Ze),it(P,P,Ze),new Gr(B,P)}if(c._tileCoverLift>0){for(const Ue of A)Ke(B,B,Ue),it(P,P,Ue);return new Gr(B,P)}const j=[b[12]*g,b[13]*g,b[14]*g],$=w.getCenter(),G=ze(c.center.lat,-85.051129,tt),Z=ze($.lat,-85.051129,tt),se=st(c.center.lng),fe=dt(G);let ue=se-st($.lng);const pe=fe-dt(Z);ue>.5?ue-=1:ue<-.5&&(ue+=1);let ve=0;Math.abs(ue)>Math.abs(pe)?ve=ue>=0?1:3:(ve=pe>=0?0:2,jt(j,j,[b[4]*g,b[5]*g,b[6]*g],-Math.sin(Ar(pe>=0?w.getSouth():w.getNorth()))*de));const Se=A[ve],ke=A[(ve+1)%4],Ie=new Lk(Se,ke,j),Ve=[tb(Ie,0)||Se[0],tb(Ie,1)||Se[1],tb(Ie,2)||Se[2]],qe=Qd(c.zoom);if(qe>0){const Ue=(function({x:rt,y:Et,z:xt},Tt,kt,Pt,Rt){const vt=1/(1<<xt);let zt=rt*vt,Mt=zt+vt,Ft=Et*vt,Lt=Ft+vt,fn=0;const pn=(zt+Mt)/2-Pt;return pn>.5?fn=-1:pn<-.5&&(fn=1),zt=((zt+fn)*Tt-(Pt*=Tt))*kt+Pt,Mt=((Mt+fn)*Tt-Pt)*kt+Pt,Ft=(Ft*Tt-(Rt*=Tt))*kt+Rt,Lt=(Lt*Tt-Rt)*kt+Rt,[[zt,Lt,0],[Mt,Lt,0],[Mt,Ft,0],[zt,Ft,0]]})(u,o,c._pixelsPerMercatorPixel,se,fe);for(let rt=0;rt<A.length;rt++)Ih(A[rt],Ue[rt],qe);const Ze=at([],Ue[ve],Ue[(ve+1)%4]);Pe(Ze,Ze,.5),Ih(Ve,Ze,qe)}for(const Ue of A)Ke(B,B,Ue),it(P,P,Ue);return B[2]=Math.min(Se[2],ke[2]),Ke(B,B,Ve),it(P,P,Ve),new Gr(B,P)}function fv({x:c,y:o,z:u},h=!1){const g=1/(1<<u),b=new Re(wt(c*g),o===(1<<u)-1&&h?-90:It((o+1)*g)),w=new Re(wt((c+1)*g),o===0&&h?90:It(o*g));return new et(b,w)}function wT(c,o=de){const u=Ar(c.getNorth()),h=Ar(c.getSouth()),g=Math.cos(u),b=Math.cos(h),w=Math.sin(u),A=Math.sin(h),D=c.getWest(),P=c.getEast();return[We(b,A,D,o),We(b,A,P,o),We(g,w,P,o),We(g,w,D,o)]}function nb(c,o,u,h){const g=1<<u.z,b=(c/Jt+u.x)/g;return $e(It((o/Jt+u.y)/g),wt(b),h)}function Em({min:c,max:o}){return 16383/Math.max(o[0]-c[0],o[1]-c[1],o[2]-c[2])}const GO=new Float64Array(16);function rb(c){const o=Em(c),u=X(GO,[o,o,o]);return J(u,u,Ut([],c.min))}function Oi(c){const o=(function(h,g){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=g[0],h[13]=g[1],h[14]=g[2],h[15]=1,h})(GO,c.min),u=1/Em(c);return ie(o,o,[u,u,u])}function ib(c){const o=Jt/(2*Math.PI);return c/(2*Math.PI)/o}function ab(c,o){return Jt/(512*Math.pow(2,c))*Em(Ff(o))}function g1(c,o,u,h,g){const b=ib(u),w=[c,o,-u/(2*Math.PI)],A=k(new Float64Array(16));return J(A,A,w),ie(A,A,[b,b,b]),Q(A,A,Ar(-g)),W(A,A,Ar(-h)),A}function Qd(c){return ot(5,6,c)}function y1(c,o){const u=$e(o.lat,o.lng),h=(function(Z){const se=$e(Z._center.lat,Z._center.lng);let fe=ct([],Ee(0,1,0),se);const ue=ae([],-Z.angle,se);fe=Ct(fe,fe,ue),ae(ue,-Z._pitch,fe);const pe=xe([],se);return Pe(pe,pe,eb(Z.cameraToCenterDistance/Z.pixelsPerMeter)),Ct(pe,pe,ue),at([],se,pe)})(c);return w=(g=yt([],h,u))[0],A=g[1],D=g[2],P=(b=u)[0],B=b[1],j=b[2],G=($=Math.sqrt((w*w+A*A+D*D)*(P*P+B*B+j*j)))&&Ye(g,b)/$,Math.acos(Math.min(Math.max(G,-1),1));var g,b,w,A,D,P,B,j,$,G}function cy(c,o){return y1(c,o)>Math.PI/2*1.01}const ob=Ar(85),zk=Math.cos(ob),YO=Math.sin(ob),Fk=F(),WO=c=>{const o=[];return c.paint.get("circle-pitch-alignment")==="map"&&o.push("PITCH_WITH_MAP"),c.paint.get("circle-pitch-scale")==="map"&&o.push("SCALE_WITH_MAP"),o};function ST(c,o,u,h,g,b,w,A,D){if(b&&c.queryGeometry.isAboveHorizon)return!1;b&&(D*=c.pixelToTileUnitsFactor);const P=c.tileID.canonical,B=u.projection.upVectorScale(P,u.center.lat,u.worldSize).metersToTile;for(const j of o)for(const $ of j){const G=$.add(A),Z=g&&u.elevation?u.elevation.exaggeration()*g.getElevationAt(G.x,G.y,!0):0,se=u.projection.projectTilePoint(G.x,G.y,P);if(Z>0){const ve=u.projection.upVector(P,G.x,G.y);se.x+=ve[0]*B*Z,se.y+=ve[1]*B*Z,se.z+=ve[2]*B*Z}const fe=b?G:XO(se.x,se.y,se.z,h),ue=b?c.tilespaceRays.map(ve=>hl(ve,Z)):c.queryGeometry.screenGeometry,pe=hi([],[se.x,se.y,se.z,1],h);if(!w&&b?D*=pe[3]/u.cameraToCenterDistance:w&&!b&&(D*=u.cameraToCenterDistance/pe[3]),b){const ve=It(($.y/Jt+P.y)/(1<<P.z));D/=u.projection.pixelsPerMeter(ve,1)/ft(1,ve)}if(xa(ue,fe,D))return!0}return!1}function XO(c,o,u,h){const g=hi([],[c,o,u,1],h);return new Vt(g[0]/g[3],g[1]/g[3])}const Pa=Ee(0,0,0),TT=Ee(0,0,1);function hl(c,o){const u=De();return Pa[2]=o,c.intersectsPlane(Pa,TT,u),new Vt(u[0],u[1])}class ZO extends qs{}let ET,KO,_1,v1;function sb(c,{width:o,height:u},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*u*h)throw new RangeError("mismatched image size")}else g=new Uint8Array(o*u*h);return c.width=o,c.height=u,c.data=g,c}function AT(c,o,u){const{width:h,height:g}=o;h===c.width&&g===c.height||(b1(c,o,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,h),height:Math.min(c.height,g)},u,null),c.width=h,c.height=g,c.data=o.data)}function b1(c,o,u,h,g,b,w,A){if(g.width===0||g.height===0)return o;if(g.width>c.width||g.height>c.height||u.x>c.width-g.width||u.y>c.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||h.x>o.width-g.width||h.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const D=c.data,P=o.data,B=b===4&&A;for(let j=0;j<g.height;j++){const $=((u.y+j)*c.width+u.x)*b,G=((h.y+j)*o.width+h.x)*b;if(B)for(let Z=0;Z<g.width;Z++){const se=$+Z*b+3,fe=G+Z*b;P[fe+0]=255,P[fe+1]=255,P[fe+2]=255,P[fe+3]=D[se]}else if(w)for(let Z=0;Z<g.width;Z++){const se=$+Z*b,fe=G+Z*b,ue=new Qr(D[se+0]/255,D[se+1]/255,D[se+2]/255,D[se+3]).toNonPremultipliedRenderColor(w).toArray();P[fe+0]=ue[0],P[fe+1]=ue[1],P[fe+2]=ue[2],P[fe+3]=ue[3]}else for(let Z=0;Z<g.width*b;Z++)P[G+Z]=D[$+Z]}return o}Kt(ZO,"HeatmapBucket",{omit:["layers"]});class Ph{constructor(o,u){sb(this,o,1,u)}resize(o){AT(this,new Ph(o),1)}clone(){return new Ph({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,h,g,b){b1(o,u,h,g,b,1,null)}}class Vo{constructor(o,u){sb(this,o,4,u)}resize(o){AT(this,new Vo(o),4)}replace(o,u){u?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Vo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,h,g,b,w,A){b1(o,u,h,g,b,4,w,A)}}class QO{constructor(o,u){this.width=o.width,this.height=o.height,this.data=u instanceof Uint8Array?new Float32Array(u.buffer):u}}function hv(c){const o={},u=c.resolution||256,h=c.clips?c.clips.length:1,g=c.image||new Vo({width:u,height:h}),b=(w,A,D)=>{o[c.evaluationKey]=D;const P=c.expression.evaluate(o),B=P?P.toNonPremultipliedRenderColor(null):null;B&&(g.data[w+A+0]=Math.floor(255*B.r),g.data[w+A+1]=Math.floor(255*B.g),g.data[w+A+2]=Math.floor(255*B.b),g.data[w+A+3]=Math.floor(255*B.a))};if(c.clips)for(let w=0,A=0;w<h;++w,A+=4*u)for(let D=0,P=0;D<u;D++,P+=4){const B=D/(u-1),{start:j,end:$}=c.clips[w];b(A,P,j*(1-B)+$*B)}else for(let w=0,A=0;w<u;w++,A+=4)b(0,A,w/(u-1));return g}Kt(Ph,"AlphaImage"),Kt(Vo,"RGBAImage");const Nk=gr([{name:"a_pos",components:2,type:"Int16"}],4),JO=gr([{name:"a_road_z_offset",components:1,type:"Float32"}],4),Bk=gr([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),jk=gr([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function ac(c,o,u=2){const h=o&&o.length,g=h?o[0]*u:c.length;let b=OT(c,0,g,u,!0);const w=[];if(!b||b.next===b.prev)return w;let A,D,P;if(h&&(b=(function(B,j,$,G){const Z=[];for(let se=0,fe=j.length;se<fe;se++){const ue=OT(B,j[se]*G,se<fe-1?j[se+1]*G:B.length,G,!1);ue===ue.next&&(ue.steiner=!0),Z.push(tC(ue))}Z.sort(MT);for(let se=0;se<Z.length;se++)$=Vk(Z[se],$);return $})(c,o,b,u)),c.length>80*u){A=c[0],D=c[1];let B=A,j=D;for(let $=u;$<g;$+=u){const G=c[$],Z=c[$+1];G<A&&(A=G),Z<D&&(D=Z),G>B&&(B=G),Z>j&&(j=Z)}P=Math.max(B-A,j-D),P=P!==0?32767/P:0}return fy(b,w,u,A,D,P,0),w}function OT(c,o,u,h,g){let b;if(g===(function(w,A,D,P){let B=0;for(let j=A,$=D-P;j<D;j+=P)B+=(w[$]-w[j])*(w[j+1]+w[$+1]),$=j;return B})(c,o,u,h)>0)for(let w=o;w<u;w+=h)b=IT(w/h|0,c[w],c[w+1],b);else for(let w=u-h;w>=o;w-=h)b=IT(w/h|0,c[w],c[w+1],b);return b&&hy(b,b.next)&&(hb(b),b=b.next),b}function Am(c,o){if(!c)return c;o||(o=c);let u,h=c;do if(u=!1,h.steiner||!hy(h,h.next)&&Xi(h.prev,h,h.next)!==0)h=h.next;else{if(hb(h),h=o=h.prev,h===h.next)break;u=!0}while(u||h!==o);return o}function fy(c,o,u,h,g,b,w){if(!c)return;!w&&b&&(function(D,P,B,j){let $=D;do $.z===0&&($.z=lb($.x,$.y,P,B,j)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next;while($!==D);$.prevZ.nextZ=null,$.prevZ=null,(function(G){let Z,se=1;do{let fe,ue=G;G=null;let pe=null;for(Z=0;ue;){Z++;let ve=ue,Se=0;for(let Ie=0;Ie<se&&(Se++,ve=ve.nextZ,ve);Ie++);let ke=se;for(;Se>0||ke>0&&ve;)Se!==0&&(ke===0||!ve||ue.z<=ve.z)?(fe=ue,ue=ue.nextZ,Se--):(fe=ve,ve=ve.nextZ,ke--),pe?pe.nextZ=fe:G=fe,fe.prevZ=pe,pe=fe;ue=ve}pe.nextZ=null,se*=2}while(Z>1)})($)})(c,h,g,b);let A=c;for(;c.prev!==c.next;){const D=c.prev,P=c.next;if(b?$k(c,h,g,b):Uk(c))o.push(D.i,c.i,P.i),hb(c),c=P.next,A=P.next;else if((c=P)===A){w?w===1?fy(c=eC(Am(c),o),o,u,h,g,b,2):w===2&&CT(c,o,u,h,g,b):fy(Am(c),o,u,h,g,b,1);break}}}function Uk(c){const o=c.prev,u=c,h=c.next;if(Xi(o,u,h)>=0)return!1;const g=o.x,b=u.x,w=h.x,A=o.y,D=u.y,P=h.y,B=Math.min(g,b,w),j=Math.min(A,D,P),$=Math.max(g,b,w),G=Math.max(A,D,P);let Z=h.next;for(;Z!==o;){if(Z.x>=B&&Z.x<=$&&Z.y>=j&&Z.y<=G&&dv(g,A,b,D,w,P,Z.x,Z.y)&&Xi(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function $k(c,o,u,h){const g=c.prev,b=c,w=c.next;if(Xi(g,b,w)>=0)return!1;const A=g.x,D=b.x,P=w.x,B=g.y,j=b.y,$=w.y,G=Math.min(A,D,P),Z=Math.min(B,j,$),se=Math.max(A,D,P),fe=Math.max(B,j,$),ue=lb(G,Z,o,u,h),pe=lb(se,fe,o,u,h);let ve=c.prevZ,Se=c.nextZ;for(;ve&&ve.z>=ue&&Se&&Se.z<=pe;){if(ve.x>=G&&ve.x<=se&&ve.y>=Z&&ve.y<=fe&&ve!==g&&ve!==w&&dv(A,B,D,j,P,$,ve.x,ve.y)&&Xi(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,Se.x>=G&&Se.x<=se&&Se.y>=Z&&Se.y<=fe&&Se!==g&&Se!==w&&dv(A,B,D,j,P,$,Se.x,Se.y)&&Xi(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;ve&&ve.z>=ue;){if(ve.x>=G&&ve.x<=se&&ve.y>=Z&&ve.y<=fe&&ve!==g&&ve!==w&&dv(A,B,D,j,P,$,ve.x,ve.y)&&Xi(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;Se&&Se.z<=pe;){if(Se.x>=G&&Se.x<=se&&Se.y>=Z&&Se.y<=fe&&Se!==g&&Se!==w&&dv(A,B,D,j,P,$,Se.x,Se.y)&&Xi(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function eC(c,o){let u=c;do{const h=u.prev,g=u.next.next;!hy(h,g)&&cb(h,u,u.next,g)&&fb(h,g)&&fb(g,h)&&(o.push(h.i,u.i,g.i),hb(u),hb(u.next),u=c=g),u=u.next}while(u!==c);return Am(u)}function CT(c,o,u,h,g,b){let w=c;do{let A=w.next.next;for(;A!==w.prev;){if(w.i!==A.i&&ub(w,A)){let D=dy(w,A);return w=Am(w,w.next),D=Am(D,D.next),fy(w,o,u,h,g,b,0),void fy(D,o,u,h,g,b,0)}A=A.next}w=w.next}while(w!==c)}function MT(c,o){let u=c.x-o.x;return u===0&&(u=c.y-o.y,u===0)&&(u=(c.next.y-c.y)/(c.next.x-c.x)-(o.next.y-o.y)/(o.next.x-o.x)),u}function Vk(c,o){const u=(function(g,b){let w=b;const A=g.x,D=g.y;let P,B=-1/0;if(hy(g,w))return w;do{if(hy(g,w.next))return w.next;if(D<=w.y&&D>=w.next.y&&w.next.y!==w.y){const se=w.x+(D-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(se<=A&&se>B&&(B=se,P=w.x<w.next.x?w:w.next,se===A))return P}w=w.next}while(w!==b);if(!P)return null;const j=P,$=P.x,G=P.y;let Z=1/0;w=P;do{if(A>=w.x&&w.x>=$&&A!==w.x&&DT(D<G?A:B,D,$,G,D<G?B:A,D,w.x,w.y)){const se=Math.abs(D-w.y)/(A-w.x);fb(w,g)&&(se<Z||se===Z&&(w.x>P.x||w.x===P.x&&Hc(P,w)))&&(P=w,Z=se)}w=w.next}while(w!==j);return P})(c,o);if(!u)return o;const h=dy(u,c);return Am(h,h.next),Am(u,u.next)}function Hc(c,o){return Xi(c.prev,c,o.prev)<0&&Xi(o.next,c,c.next)<0}function lb(c,o,u,h,g){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-u)*g|0)|c<<8))|c<<4))|c<<2))|c<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-h)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function tC(c){let o=c,u=c;do(o.x<u.x||o.x===u.x&&o.y<u.y)&&(u=o),o=o.next;while(o!==c);return u}function DT(c,o,u,h,g,b,w,A){return(g-w)*(o-A)>=(c-w)*(b-A)&&(c-w)*(h-A)>=(u-w)*(o-A)&&(u-w)*(b-A)>=(g-w)*(h-A)}function dv(c,o,u,h,g,b,w,A){return!(c===w&&o===A)&&DT(c,o,u,h,g,b,w,A)}function ub(c,o){return c.next.i!==o.i&&c.prev.i!==o.i&&!(function(u,h){let g=u;do{if(g.i!==u.i&&g.next.i!==u.i&&g.i!==h.i&&g.next.i!==h.i&&cb(g,g.next,u,h))return!0;g=g.next}while(g!==u);return!1})(c,o)&&(fb(c,o)&&fb(o,c)&&(function(u,h){let g=u,b=!1;const w=(u.x+h.x)/2,A=(u.y+h.y)/2;do g.y>A!=g.next.y>A&&g.next.y!==g.y&&w<(g.next.x-g.x)*(A-g.y)/(g.next.y-g.y)+g.x&&(b=!b),g=g.next;while(g!==u);return b})(c,o)&&(Xi(c.prev,c,o.prev)||Xi(c,o.prev,o))||hy(c,o)&&Xi(c.prev,c,c.next)>0&&Xi(o.prev,o,o.next)>0)}function Xi(c,o,u){return(o.y-c.y)*(u.x-o.x)-(o.x-c.x)*(u.y-o.y)}function hy(c,o){return c.x===o.x&&c.y===o.y}function cb(c,o,u,h){const g=x1(Xi(c,o,u)),b=x1(Xi(c,o,h)),w=x1(Xi(u,h,c)),A=x1(Xi(u,h,o));return g!==b&&w!==A||!(g!==0||!Gc(c,u,o))||!(b!==0||!Gc(c,h,o))||!(w!==0||!Gc(u,c,h))||!(A!==0||!Gc(u,o,h))}function Gc(c,o,u){return o.x<=Math.max(c.x,u.x)&&o.x>=Math.min(c.x,u.x)&&o.y<=Math.max(c.y,u.y)&&o.y>=Math.min(c.y,u.y)}function x1(c){return c>0?1:c<0?-1:0}function fb(c,o){return Xi(c.prev,c,c.next)<0?Xi(c,o,c.next)>=0&&Xi(c,c.prev,o)>=0:Xi(c,o,c.prev)<0||Xi(c,c.next,o)<0}function dy(c,o){const u=PT(c.i,c.x,c.y),h=PT(o.i,o.x,o.y),g=c.next,b=o.prev;return c.next=o,o.prev=c,u.next=g,g.prev=u,h.next=u,u.prev=h,b.next=h,h.prev=b,h}function IT(c,o,u,h){const g=PT(c,o,u);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function hb(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function PT(c,o,u){return{i:c,x:o,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function db(c,o){const u=c.length;if(u<=1)return[c];const h=[];let g,b;for(let w=0;w<u;w++){const A=sa(c[w]);A!==0&&(c[w].area=Math.abs(A),b===void 0&&(b=A<0),b===A<0?(g&&h.push(g),g=[c[w]]):g.push(c[w]))}if(g&&h.push(g),o>1)for(let w=0;w<h.length;w++)h[w].length<=o||(Tg(h[w],o,1,h[w].length-1,qk),h[w]=h[w].slice(0,o));return h}function qk(c,o){return o.area-c.area}function nC(c,o,u=1){if(!c)return null;const h=typeof c=="string"?nl.from(c).getPrimary():c.getPrimary(),g=typeof c=="string"?null:c.getSecondary();for(const b of[h,g]){if(!b)continue;const w=b.id.toString();o.has(w)||o.set(w,[]),b.scaleSelf(u),o.get(w).push(b)}return{primary:h.toString(),secondary:g?g.toString():null}}function RT(c,o,u,h){const g=h.patternDependencies;let b=!1;for(const w of o){const A=w.paint.get(`${c}-pattern`);A.isConstant()||(b=!0),nC(A.constantOr(null),g,u)&&(b=!0)}return b}function kT(c,o,u,h,g,b){const w=b.patternDependencies;for(const A of o){const D=A.paint.get(`${c}-pattern`).value;if(D.kind!=="constant"){let P=D.evaluate({zoom:h},u,{},b.availableImages);P=P&&P.name?P.name:P;const B=nC(P,w,g);if(!B)continue;const{primary:j,secondary:$}=B;j&&(u.patterns[A.id]=[j,$].filter(Boolean))}}return u}class Rh{constructor(){this.portals=[]}static isOnBorder(o,u){return o<=0&&u<=0||o>=Jt&&u>=Jt}static evaluate(o){if(o.length===0)return new Rh;let u=[];for(const D of o)u.push(...D.portals);if(u.length===0)return new Rh;for(const D of u){const P=D.va,B=D.vb;(Rh.isOnBorder(P.x,B.x)||Rh.isOnBorder(P.y,B.y))&&(D.type="border")}const h=u.filter(D=>D.type!=="unevaluated"),g=u.filter(D=>D.type==="unevaluated");if(g.length===0)return new Rh;g.sort((D,P)=>D.hash===P.hash?D.isTunnel===P.isTunnel?0:D.isTunnel?-1:1:D.hash<P.hash?1:-1),u=h.concat(g);let b=h.length,w=b,A=b;do if(w++,w===u.length||u[b].hash!==u[w].hash){if(w-b===2){A<b&&(u[A]=u[b],u[b]=null);const D=u[A],P=u[w-1];D.type=D.isTunnel!==P.isTunnel?"tunnel":"polygon",D.connection={a:D.connection.a,b:P.connection.a},A++}b=w}while(b!==u.length);return u.splice(A),u.sort((D,P)=>D.hash<P.hash?1:-1),{portals:u}}}Kt(Rh,"ElevationPortalGraph");class pv{constructor(o,u,h){this.outPositions=o,this.outNormals=u,this.outIndices=h,this.vertexLookup=new Map}addVertex(o,u,h){let g=o[2];h!=null&&(g*=h);const b=`${o[0]},${o[1]},${o[2]},${u[0]},${u[1]},${u[2]}`,w=this.vertexLookup.get(b);if(w!=null)return w;const A=this.outPositions.length;this.vertexLookup.set(b,A);const D=Math.trunc(16384*u[0]),P=Math.trunc(16384*u[1]),B=Math.trunc(16384*u[2]);return this.outPositions.emplaceBack(o[0],o[1],g),this.outNormals.emplaceBack(D,P,B),A}addTriangle(o,u,h){this.outIndices.emplaceBack(o,u,h)}addTriangles(o,u,h){if(o.length===0)return;const g=h.length===1,b=De(),w=De();for(let A=0;A<o.length;A+=3){const D=u[o[A+0]],P=u[o[A+1]],B=u[o[A+2]],j=g?h[0]:h[o[A+1]],$=g?h[0]:h[o[A+2]];Ne(b,D.x,D.y,g?h[0]:h[o[A+0]]);const G=this.addVertex(b,w);Ne(b,P.x,P.y,j);const Z=this.addVertex(b,w);Ne(b,B.x,B.y,$);const se=this.addVertex(b,w);this.outIndices.emplaceBack(G,Z,se)}}addQuad(o,u,h,g,b,w){const A=this.addVertex(o,b,w),D=this.addVertex(u,b,w),P=this.addVertex(h,b,w),B=this.addVertex(g,b,w);this.addTriangle(A,D,P),this.addTriangle(P,B,A)}getVertexCount(){return this.outPositions.length}clearVertexLookup(){this.vertexLookup.clear()}}class Ds{constructor(o,u,h,g){this.unevaluatedPortals=new Rh,this.bridgeFeatureSections=[],this.tunnelFeatureSections=[],this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new fm,this.vertexNormals=new ry,this.indexArray=new Xa,this.tileToMeters=qt(o),this.bridgeProgramConfigurations=new H(u,{zoom:h,lut:g},b=>b!=="fill-tunnel-structure-color"),this.tunnelProgramConfigurations=new H(u,{zoom:h,lut:g},b=>b!=="fill-bridge-guard-rail-color")}addVertices(o,u){const h=this.unevalVertices.length;for(let g=0;g<o.length;g++)this.unevalVertices.push(o[g]),this.unevalHeights.push(u[g]);return h}addTriangles(o,u,h){const g=h?this.unevalTunnelTriangles:this.unevalTriangles;for(const b of o)g.push(b+u)}addRenderableRing(o,u,h,g,b,w){const A=[new Vt(b.min.x,b.min.y),new Vt(b.max.x,b.min.y),new Vt(b.max.x,b.max.y),new Vt(b.min.x,b.max.y)];for(let D=0;D<h-1;D++){const P=u+D,B=P+1,j=this.unevalVertices[P],$=this.unevalVertices[B];if(!(j.x>=b.min.x&&j.x<=b.max.x&&j.y>=b.min.y&&j.y<=b.max.y||$.x>=b.min.x&&$.x<=b.max.x&&$.y>=b.min.y&&$.y<=b.max.y||ic(j,$,A))||this.isOnBorder(j.x,$.x)||this.isOnBorder(j.y,$.y))continue;const G=Ds.computeEdgeHash(this.unevalVertices[P],this.unevalVertices[B]);let Z,se=this.vertexHashLookup.get(Ds.computePosHash(j));se!=null?Z=se.next:(se=this.vertexHashLookup.get(Ds.computePosHash($)),Z=se!=null?se.prev:G),this.unevalEdges.push({polygonIdx:o,a:P,b:B,hash:G,portalHash:Z,isTunnel:g,type:"unevaluated",featureInfo:w})}}addPortalCandidates(o,u,h,g,b){if(u.length!==0){this.vertexHashLookup.clear();for(const w of u){if(w.length===0)continue;const A=w[0];let D=Ds.computeEdgeHash(A[A.length-2],A[A.length-1]);for(let P=0;P<A.length-1;P++){const B=A[P+0],j=A[P+1],$=Ri(j.x-B.x,j.y-B.y),G=Fu($);if(G===0)continue;let Z="unevaluated";const se=g.pointElevation(B),fe=g.pointElevation(j);Math.abs(se)<.01&&Math.abs(fe)<.01?Z="entrance":(this.isOnBorder(B.x,j.x)||this.isOnBorder(B.y,j.y))&&(Z="border");const ue=Ds.computeEdgeHash(B,j);this.unevaluatedPortals.portals.push({connection:{a:o,b:void 0},va:B,vb:j,vab:$,length:G,hash:ue,isTunnel:h,type:Z});const pe=Ds.computePosHash(B);this.vertexHashLookup.set(pe,{prev:D,next:ue}),D=ue}}}}construct(o){if(this.unevalVertices.length===0)return;const u=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),h=$=>{$.primitiveLength=this.indexArray.length-$.primitiveOffset},g=new pv(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(o.portals,this.unevalEdges);const b=u(),w=u(),A=u(),D=($,G)=>{$.sort((se,fe)=>se.type===G&&fe.type!==G?-1:se.type!==G&&fe.type===G?1:0);const Z=$.findIndex(se=>se.type!==G);return Z>=0?Z:$.length};let P=0;this.unevalEdges.length>0&&(P=D(this.unevalEdges,"none"),this.constructBridgeStructures(g,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:P},this.tileToMeters)),h(A);const B=u(),j=u();if(this.unevalEdges.length>0){const $=this.unevalEdges.splice(P),G=D($,"tunnel")+P;this.unevalEdges.push(...$),this.constructTunnelStructures(g,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:P},{min:P,max:G})}h(B),g.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),h(j),g.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),h(w),g.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),h(b),this.maskSegments=Ii.simpleSegment(0,j.primitiveOffset,0,j.primitiveLength),this.depthSegments=Ii.simpleSegment(0,w.primitiveOffset,0,w.primitiveLength),this.renderableBridgeSegments=Ii.simpleSegment(0,A.primitiveOffset,0,A.primitiveLength),this.renderableTunnelSegments=Ii.simpleSegment(0,B.primitiveOffset,0,B.primitiveLength),this.shadowCasterSegments=Ii.simpleSegment(0,b.primitiveOffset,0,b.primitiveLength)}update(o,u,h,g,b,w,A,D){this.bridgeProgramConfigurations.updatePaintArrays(o,u,b,h,g,w,A,D),this.tunnelProgramConfigurations.updatePaintArrays(o,u,b,h,g,w,A,D)}upload(o){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=o.createVertexBuffer(this.vertexPositions,Bk.members),this.vertexBufferNormal=o.createVertexBuffer(this.vertexNormals,jk.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.bridgeProgramConfigurations.upload(o),this.tunnelProgramConfigurations.upload(o))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableBridgeSegments.destroy(),this.renderableTunnelSegments.destroy(),this.shadowCasterSegments.destroy()),this.bridgeProgramConfigurations.destroy(),this.tunnelProgramConfigurations.destroy()}populatePaintArrays(o,u,h,g,b){const w=(A,D)=>{for(let P=0;P<D.length-1;P++){const B=D[P].featureIndex,j=D[P+1].vertexStart,$=o.feature(B);A.populatePaintArrays(j,$,B,{},h,u,g,void 0,b)}};w(this.bridgeProgramConfigurations,this.bridgeFeatureSections),w(this.tunnelProgramConfigurations,this.tunnelFeatureSections)}computeVertexConnections(o,u,h,g,b){const w=new Map;for(let A=g;A<b;A++){const D=h[A],P=D.a,B=D.b,j=Ds.computePosHash(o[P]),$=Ds.computePosHash(o[B]);let G=w.get(j);G||(G={},w.set(j,G));let Z=w.get($);Z||(Z={},w.set($,Z)),u[P]<=0&&u[B]<=0||(G.to=B,Z.from=P)}return w}isTerminalVertex(o,u){const h=Ds.computePosHash(this.unevalVertices[o]),g=u.get(h);return!g||!g.from||!g.to}constructBridgeStructures(o,u,h,g,b,w){o.clearVertexLookup();const A=this.computeVertexConnections(u,h,g,b.min,b.max),D=1/w,P=.5*D,B=(kt,Pt)=>Ne(kt,u[Pt].x,u[Pt].y,h[Pt]*D),j=De(),$=De(),G=De(),Z=De(),se=De(),fe=(kt,Pt)=>{const Rt=A.get(Ds.computePosHash(u[Pt])),vt=Rt.from,zt=Rt.to;if(!vt||!zt)return;B(j,vt),B($,Pt),B(G,zt),En(Z),or(j,$)||(sr(se,$,j),xe(Z,se)),or(G,$)||(sr(se,G,$),at(Z,Z,xe(se,se)));const Mt=Pr(Z);return Mt>0?Pe(kt,Z,1/Mt):void 0};let ue=Number.POSITIVE_INFINITY;this.sortSubarray(g,b.min,b.max,(kt,Pt)=>kt.featureInfo.featureIndex-Pt.featureInfo.featureIndex);const pe=De(),ve=De(),Se=De(),ke=De(),Ie=De(),Ve=De(),qe=De(),Ue=De(),Ze=De(),rt=[De(),De(),De(),De()],Et=[De(),De(),De(),De()],xt=[{coord:new Vt(0,0),height:0},{coord:new Vt(0,0),height:0}],Tt=(kt,Pt)=>kt>Pt;for(let kt=b.min;kt<b.max;kt++){const Pt=g[kt];if(!Pt.featureInfo.guardRailEnabled||!this.prepareEdgePoints(xt,u,h,Pt,Tt))continue;const[Rt,vt]=xt;if(Ne(pe,Rt.coord.x,Rt.coord.y,D*Rt.height),Ne(ve,vt.coord.x,vt.coord.y,D*vt.height),or(pe,ve))continue;sr(Se,ve,pe),xe(Se,Se);const zt=fe(Ue,Pt.a)||Se,Mt=fe(Ze,Pt.b)||Se;Ne(ke,zt[1],-zt[0],0),xe(ke,ke),Ne(Ie,Mt[1],-Mt[0],0),xe(Ie,Ie),ct(Ue,ke,zt),xe(Ve,Ue),ct(Ue,Ie,Mt),xe(qe,Ue),at(rt[0],pe,Pe(Ue,sr(Ue,ke,Ve),P)),at(rt[1],pe,Pe(Ue,at(Ue,ke,Ve),P)),at(rt[2],pe,Pe(Ue,Ve,P)),rt[3]=pe,at(Et[0],ve,Pe(Ue,sr(Ue,Ie,qe),P)),at(Et[1],ve,Pe(Ue,at(Ue,Ie,qe),P)),at(Et[2],ve,Pe(Ue,qe,P)),Et[3]=ve,ue=this.addFeatureSection(Pt.featureInfo.featureIndex,ue,this.bridgeFeatureSections,o);const Ft=o.addVertex(rt[0],ke,w),Lt=o.addVertex(rt[1],ke,w),fn=o.addVertex(Et[0],Ie,w),pn=o.addVertex(Et[1],Ie,w);o.addTriangle(Ft,Lt,fn),o.addTriangle(Lt,pn,fn);const nn=o.addVertex(rt[1],Ve,w),an=o.addVertex(rt[2],Ve,w),kn=o.addVertex(Et[1],qe,w),On=o.addVertex(Et[2],qe,w);o.addTriangle(nn,an,kn),o.addTriangle(an,On,kn),Ut(ke,ke),Ut(Ie,Ie);const cn=o.addVertex(rt[2],ke,w),Wn=o.addVertex(rt[3],ke,w),vr=o.addVertex(Et[2],Ie,w),Zr=o.addVertex(Et[3],Ie,w);o.addTriangle(cn,Wn,vr),o.addTriangle(Wn,Zr,vr);const pr=this.isTerminalVertex(Pt.a,A),di=this.isTerminalVertex(Pt.b,A);Rt.height<.01&&pr&&o.addQuad(rt[3],rt[2],rt[1],rt[0],Ut(zt,zt),w),vt.height<.01&&di&&o.addQuad(Et[0],Et[1],Et[2],Et[3],Mt,w)}this.bridgeFeatureSections.push({featureIndex:Number.POSITIVE_INFINITY,vertexStart:o.getVertexCount()})}constructTunnelStructures(o,u,h,g,b,w){o.clearVertexLookup();let A=Number.POSITIVE_INFINITY;const D=(ue,pe)=>ue.featureInfo.featureIndex-pe.featureInfo.featureIndex;this.sortSubarray(g,b.min,b.max,D),this.sortSubarray(g,w.min,w.max,D);const P=ue=>xe(ue,ue),B=[{coord:new Vt(0,0),height:0},{coord:new Vt(0,0),height:0}],j=(ue,pe)=>ue<pe,$=De(),G=De(),Z=De(),se=De(),fe=De();for(let ue=b.min;ue<b.max;ue++){if(!this.prepareEdgePoints(B,u,h,g[ue],j))continue;const[pe,ve]=B,Se=P(Ne(fe,-(ve.coord.y-pe.coord.y),ve.coord.x-pe.coord.x,0));A=this.addFeatureSection(g[ue].featureInfo.featureIndex,A,this.tunnelFeatureSections,o),o.addQuad(Ne($,pe.coord.x,pe.coord.y,pe.height),Ne(G,ve.coord.x,ve.coord.y,ve.height),Ne(Z,ve.coord.x,ve.coord.y,g[ue].isTunnel?-.1:0),Ne(se,pe.coord.x,pe.coord.y,g[ue].isTunnel?-.1:0),Se)}for(let ue=w.min;ue<w.max;ue++){const pe=g[ue];pe.isTunnel&&([pe.a,pe.b]=[pe.b,pe.a]);const ve=u[pe.a],Se=u[pe.b],ke=P(Ne(fe,-(Se.y-ve.y),Se.x-ve.x,0));A=this.addFeatureSection(pe.featureInfo.featureIndex,A,this.tunnelFeatureSections,o),o.addQuad(Ne($,Se.x,Se.y,0),Ne(G,ve.x,ve.y,0),Ne(Z,ve.x,ve.y,h[pe.a]+4),Ne(se,Se.x,Se.y,h[pe.b]+4),ke),o.addQuad(Ne($,ve.x,ve.y,0),Ne(G,Se.x,Se.y,0),Ne(Z,Se.x,Se.y,h[pe.b]+4),Ne(se,ve.x,ve.y,h[pe.a]+4),ke)}this.tunnelFeatureSections.push({featureIndex:Number.POSITIVE_INFINITY,vertexStart:o.getVertexCount()})}setElevatedPoint(o,u,h,g){o.coord.x=u,o.coord.y=h,o.height=g}prepareEdgePoints(o,u,h,g,b){let w=u[g.a].x,A=u[g.a].y,D=u[g.b].x,P=u[g.b].y,B=h[g.a],j=h[g.b];const $=b(B,0),G=b(j,0);if($&&G)return this.setElevatedPoint(o[0],w,A,B),this.setElevatedPoint(o[1],D,P,j),!0;if(!$&&!G)return!1;if($){if(!G){const Z=j/(j-B);D=Vn(D,w,Z),P=Vn(P,A,Z),j=Vn(j,B,Z)}}else{const Z=B/(B-j);w=Vn(w,D,Z),A=Vn(A,P,Z),B=Vn(B,j,Z)}return this.setElevatedPoint(o[0],w,A,B),this.setElevatedPoint(o[1],D,P,j),!0}prepareEdges(o,u){if(u.length===0)return;u.sort((A,D)=>A.hash===D.hash?D.polygonIdx-A.polygonIdx:D.hash>A.hash?1:-1);let h=0,g=0,b=0,w=u[h].polygonIdx;do g++,(g===u.length||u[h].hash!==u[g].hash)&&((g-h===1||u[g-1].polygonIdx!==w)&&(b<h&&(u[b]=u[h],u[h]=null),u[b].type="none",b++),h=g,h!==u.length&&(w=u[h].polygonIdx));while(h!==u.length);if(u.splice(b),u.length!==0&&o.length!==0){u.sort((P,B)=>P.portalHash<B.portalHash?1:-1);let A=0,D=0;for(;A!==u.length&&D!==o.length;){const P=u[A],B=o[D];P.portalHash>B.hash?A++:B.hash>P.portalHash?D++:(P.type=B.type,A++)}}}isOnBorder(o,u){return o<=0&&u<=0||o>=Jt&&u>=Jt}addFeatureSection(o,u,h,g){return o!==u&&(u=o,h.push({featureIndex:o,vertexStart:g.getVertexCount()}),g.clearVertexLookup()),u}sortSubarray(o,u,h,g){const b=o.slice(u,h);b.sort(g),o.splice(u,b.length,...b)}static computeEdgeHash(o,u){return(o.y===u.y&&o.x>u.x||o.y>u.y)&&([o,u]=[u,o]),BigInt(Ds.computePosHash(o))<<32n|BigInt(Ds.computePosHash(u))}static computePosHash(o){return((65535&o.x)<<16|65535&o.y)>>>0}}function rC(c,o){return c>o?1:c<o?-1:0}class LT{constructor(o=rC,u=!1){this._compare=o,this._root=null,this._size=0,this._noDuplicates=!!u}rotateLeft(o){var u=o.right;u&&(o.right=u.left,u.left&&(u.left.parent=o),u.parent=o.parent),o.parent?o===o.parent.left?o.parent.left=u:o.parent.right=u:this._root=u,u&&(u.left=o),o.parent=u}rotateRight(o){var u=o.left;u&&(o.left=u.right,u.right&&(u.right.parent=o),u.parent=o.parent),o.parent?o===o.parent.left?o.parent.left=u:o.parent.right=u:this._root=u,u&&(u.right=o),o.parent=u}_splay(o){for(;o.parent;){var u=o.parent;u.parent?u.left===o&&u.parent.left===u?(this.rotateRight(u.parent),this.rotateRight(u)):u.right===o&&u.parent.right===u?(this.rotateLeft(u.parent),this.rotateLeft(u)):u.left===o&&u.parent.right===u?(this.rotateRight(u),this.rotateLeft(u)):(this.rotateLeft(u),this.rotateRight(u)):u.left===o?this.rotateRight(u):this.rotateLeft(u)}}splay(o){for(var u,h,g,b,w;o.parent;)(h=(u=o.parent).parent)&&h.parent?((g=h.parent).left===h?g.left=o:g.right=o,o.parent=g):(o.parent=null,this._root=o),b=o.left,w=o.right,o===u.left?(h&&(h.left===u?(u.right?(h.left=u.right,h.left.parent=h):h.left=null,u.right=h,h.parent=u):(b?(h.right=b,b.parent=h):h.right=null,o.left=h,h.parent=o)),w?(u.left=w,w.parent=u):u.left=null,o.right=u,u.parent=o):(h&&(h.right===u?(u.left?(h.right=u.left,h.right.parent=h):h.right=null,u.left=h,h.parent=u):(w?(h.left=w,w.parent=h):h.left=null,o.right=h,h.parent=o)),b?(u.right=b,b.parent=u):u.right=null,o.left=u,u.parent=o)}replace(o,u){o.parent?o===o.parent.left?o.parent.left=u:o.parent.right=u:this._root=u,u&&(u.parent=o.parent)}minNode(o=this._root){if(o)for(;o.left;)o=o.left;return o}maxNode(o=this._root){if(o)for(;o.right;)o=o.right;return o}insert(o,u){var h=this._root,g=null,b=this._compare;if(this._noDuplicates)for(;h;){if(g=h,b(h.key,o)===0)return;h=b(h.key,o)<0?h.right:h.left}else for(;h;)g=h,h=b(h.key,o)<0?h.right:h.left;return h={key:o,data:u,left:null,right:null,parent:g},g?b(g.key,h.key)<0?g.right=h:g.left=h:this._root=h,this.splay(h),this._size++,h}find(o){for(var u=this._root,h=this._compare;u;){var g=h(u.key,o);if(g<0)u=u.right;else{if(!(g>0))return u;u=u.left}}return null}contains(o){for(var u=this._root,h=this._compare;u;){var g=h(o,u.key);if(g===0)return!0;u=g<0?u.left:u.right}return!1}remove(o){var u=this.find(o);if(!u)return!1;if(this.splay(u),u.left)if(u.right){var h=this.minNode(u.right);h.parent!==u&&(this.replace(h,h.right),h.right=u.right,h.right.parent=h),this.replace(u,h),h.left=u.left,h.left.parent=h}else this.replace(u,u.left);else this.replace(u,u.right);return this._size--,!0}removeNode(o){if(!o)return!1;if(this.splay(o),o.left)if(o.right){var u=this.minNode(o.right);u.parent!==o&&(this.replace(u,u.right),u.right=o.right,u.right.parent=u),this.replace(o,u),u.left=o.left,u.left.parent=u}else this.replace(o,o.left);else this.replace(o,o.right);return this._size--,!0}erase(o){var u=this.find(o);if(u){this.splay(u);var h=u.left,g=u.right,b=null;h&&(h.parent=null,b=this.maxNode(h),this.splay(b),this._root=b),g&&(h?b.right=g:this._root=g,g.parent=b),this._size--}}pop(){var o=this._root,u=null;if(o){for(;o.left;)o=o.left;u={key:o.key,data:o.data},this.remove(o.key)}return u}next(o){var u=o;if(u)if(u.right)for(u=u.right;u&&u.left;)u=u.left;else for(u=o.parent;u&&u.right===o;)o=u,u=u.parent;return u}prev(o){var u=o;if(u)if(u.left)for(u=u.left;u&&u.right;)u=u.right;else for(u=o.parent;u&&u.left===o;)o=u,u=u.parent;return u}forEach(o){for(var u=this._root,h=[],g=!1,b=0;!g;)u?(h.push(u),u=u.left):h.length>0?(o(u=h.pop(),b++),u=u.right):g=!0;return this}range(o,u,h,g){const b=[],w=this._compare;let A,D=this._root;for(;b.length!==0||D;)if(D)b.push(D),D=D.left;else{if(D=b.pop(),A=w(D.key,u),A>0)break;if(w(D.key,o)>=0&&h.call(g,D))return this;D=D.right}return this}keys(){for(var o=this._root,u=[],h=[],g=!1;!g;)o?(u.push(o),o=o.left):u.length>0?(o=u.pop(),h.push(o.key),o=o.right):g=!0;return h}values(){for(var o=this._root,u=[],h=[],g=!1;!g;)o?(u.push(o),o=o.left):u.length>0?(o=u.pop(),h.push(o.data),o=o.right):g=!0;return h}at(o){for(var u=this._root,h=[],g=!1,b=0;!g;)if(u)h.push(u),u=u.left;else if(h.length>0){if(u=h.pop(),b===o)return u;b++,u=u.right}else g=!0;return null}load(o=[],u=[],h=!1){if(this._size!==0)throw new Error("bulk-load: tree is not empty");const g=o.length;return h&&py(o,u,0,g-1,this._compare),this._root=Om(null,o,u,0,g),this._size=g,this}min(){var o=this.minNode(this._root);return o?o.key:null}max(){var o=this.maxNode(this._root);return o?o.key:null}isEmpty(){return this._root===null}get size(){return this._size}static createTree(o,u,h,g,b){return new LT(h,b).load(o,u,g)}}function Om(c,o,u,h,g){const b=g-h;if(b>0){const w=h+Math.floor(b/2),A={key:o[w],data:u[w],parent:c};return A.left=Om(A,o,u,h,w),A.right=Om(A,o,u,w+1,g),A}return null}function py(c,o,u,h,g){if(u>=h)return;const b=c[u+h>>1];let w=u-1,A=h+1;for(;;){do w++;while(g(c[w],b)<0);do A--;while(g(c[A],b)>0);if(w>=A)break;let D=c[w];c[w]=c[A],c[A]=D,D=o[w],o[w]=o[A],o[A]=D}py(c,o,u,A,g),py(c,o,A+1,h,g)}const zT=11102230246251565e-32,Is=134217729,FT=(3+8*zT)*zT;function pb(c,o,u,h,g){let b,w,A,D,P=o[0],B=h[0],j=0,$=0;B>P==B>-P?(b=P,P=o[++j]):(b=B,B=h[++$]);let G=0;if(j<c&&$<u)for(B>P==B>-P?(w=P+b,A=b-(w-P),P=o[++j]):(w=B+b,A=b-(w-B),B=h[++$]),b=w,A!==0&&(g[G++]=A);j<c&&$<u;)B>P==B>-P?(w=b+P,D=w-b,A=b-(w-D)+(P-D),P=o[++j]):(w=b+B,D=w-b,A=b-(w-D)+(B-D),B=h[++$]),b=w,A!==0&&(g[G++]=A);for(;j<c;)w=b+P,D=w-b,A=b-(w-D)+(P-D),P=o[++j],b=w,A!==0&&(g[G++]=A);for(;$<u;)w=b+B,D=w-b,A=b-(w-D)+(B-D),B=h[++$],b=w,A!==0&&(g[G++]=A);return b===0&&G!==0||(g[G++]=b),G}function Cm(c){return new Float64Array(c)}const my=Cm(4),NT=Cm(8),iC=Cm(12),BT=Cm(16),Zl=Cm(4);function gy(c,o,u){o===null?(c.inOut=!1,c.otherInOut=!0):(c.isSubject===o.isSubject?(c.inOut=!o.inOut,c.otherInOut=o.otherInOut):(c.inOut=!o.otherInOut,c.otherInOut=o.isVertical()?!o.inOut:o.inOut),o&&(c.prevInResult=!aC(o,u)||o.isVertical()?o.prevInResult:o)),c.resultTransition=aC(c,u)?(function(h,g){let b,w=!h.inOut,A=!h.otherInOut;switch(g){case 0:b=w&&A;break;case 1:b=w||A;break;case 3:b=w!==A;break;case 2:b=h.isSubject?w&&!A:A&&!w}return b?1:-1})(c,u):0}function aC(c,o){switch(c.type){case 0:switch(o){case 0:return!c.otherInOut;case 1:return c.otherInOut;case 2:return c.isSubject&&c.otherInOut||!c.isSubject&&!c.otherInOut;case 3:return!0}break;case 2:return o===0||o===1;case 3:return o===2;case 1:return!1}return!1}class Jd{constructor(o,u,h,g,b){this.left=u,this.point=o,this.otherEvent=h,this.isSubject=g??!1,this.type=b||0,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0}isBelow(o){const u=this.point,h=this.otherEvent.point;return this.left?(u[0]-o[0])*(h[1]-o[1])-(h[0]-o[0])*(u[1]-o[1])>0:(h[0]-o[0])*(u[1]-o[1])-(u[0]-o[0])*(h[1]-o[1])>0}isAbove(o){return!this.isBelow(o)}isVertical(){return this.point[0]===this.otherEvent.point[0]}get inResult(){return this.resultTransition!==0}clone(){const o=new Jd(this.point,this.left,this.otherEvent,this.isSubject,this.type);return o.contourId=this.contourId,o.resultTransition=this.resultTransition,o.prevInResult=this.prevInResult,o.isExteriorRing=this.isExteriorRing,o.inOut=this.inOut,o.otherInOut=this.otherInOut,o}}function oc(c,o){return c[0]===o[0]&&c[1]===o[1]}function mv(c,o,u){const h=(function(g,b,w,A,D,P){const B=(b-P)*(w-D),j=(g-D)*(A-P),$=B-j;if(B===0||j===0||B>0!=j>0)return $;const G=Math.abs(B+j);return Math.abs($)>=33306690738754716e-32*G?$:-(function(Z,se,fe,ue,pe,ve,Se){let ke,Ie,Ve,qe,Ue,Ze,rt,Et,xt,Tt,kt,Pt,Rt,vt,zt,Mt,Ft,Lt;const fn=Z-pe,pn=fe-pe,nn=se-ve,an=ue-ve;vt=fn*an,Ze=Is*fn,rt=Ze-(Ze-fn),Et=fn-rt,Ze=Is*an,xt=Ze-(Ze-an),Tt=an-xt,zt=Et*Tt-(vt-rt*xt-Et*xt-rt*Tt),Mt=nn*pn,Ze=Is*nn,rt=Ze-(Ze-nn),Et=nn-rt,Ze=Is*pn,xt=Ze-(Ze-pn),Tt=pn-xt,Ft=Et*Tt-(Mt-rt*xt-Et*xt-rt*Tt),kt=zt-Ft,Ue=zt-kt,my[0]=zt-(kt+Ue)+(Ue-Ft),Pt=vt+kt,Ue=Pt-vt,Rt=vt-(Pt-Ue)+(kt-Ue),kt=Rt-Mt,Ue=Rt-kt,my[1]=Rt-(kt+Ue)+(Ue-Mt),Lt=Pt+kt,Ue=Lt-Pt,my[2]=Pt-(Lt-Ue)+(kt-Ue),my[3]=Lt;let kn=(function(Zr,pr){let di=pr[0];for(let Lr=1;Lr<4;Lr++)di+=pr[Lr];return di})(0,my),On=22204460492503146e-32*Se;if(kn>=On||-kn>=On||(Ue=Z-fn,ke=Z-(fn+Ue)+(Ue-pe),Ue=fe-pn,Ve=fe-(pn+Ue)+(Ue-pe),Ue=se-nn,Ie=se-(nn+Ue)+(Ue-ve),Ue=ue-an,qe=ue-(an+Ue)+(Ue-ve),ke===0&&Ie===0&&Ve===0&&qe===0)||(On=11093356479670487e-47*Se+FT*Math.abs(kn),kn+=fn*qe+an*ke-(nn*Ve+pn*Ie),kn>=On||-kn>=On))return kn;vt=ke*an,Ze=Is*ke,rt=Ze-(Ze-ke),Et=ke-rt,Ze=Is*an,xt=Ze-(Ze-an),Tt=an-xt,zt=Et*Tt-(vt-rt*xt-Et*xt-rt*Tt),Mt=Ie*pn,Ze=Is*Ie,rt=Ze-(Ze-Ie),Et=Ie-rt,Ze=Is*pn,xt=Ze-(Ze-pn),Tt=pn-xt,Ft=Et*Tt-(Mt-rt*xt-Et*xt-rt*Tt),kt=zt-Ft,Ue=zt-kt,Zl[0]=zt-(kt+Ue)+(Ue-Ft),Pt=vt+kt,Ue=Pt-vt,Rt=vt-(Pt-Ue)+(kt-Ue),kt=Rt-Mt,Ue=Rt-kt,Zl[1]=Rt-(kt+Ue)+(Ue-Mt),Lt=Pt+kt,Ue=Lt-Pt,Zl[2]=Pt-(Lt-Ue)+(kt-Ue),Zl[3]=Lt;const cn=pb(4,my,4,Zl,NT);vt=fn*qe,Ze=Is*fn,rt=Ze-(Ze-fn),Et=fn-rt,Ze=Is*qe,xt=Ze-(Ze-qe),Tt=qe-xt,zt=Et*Tt-(vt-rt*xt-Et*xt-rt*Tt),Mt=nn*Ve,Ze=Is*nn,rt=Ze-(Ze-nn),Et=nn-rt,Ze=Is*Ve,xt=Ze-(Ze-Ve),Tt=Ve-xt,Ft=Et*Tt-(Mt-rt*xt-Et*xt-rt*Tt),kt=zt-Ft,Ue=zt-kt,Zl[0]=zt-(kt+Ue)+(Ue-Ft),Pt=vt+kt,Ue=Pt-vt,Rt=vt-(Pt-Ue)+(kt-Ue),kt=Rt-Mt,Ue=Rt-kt,Zl[1]=Rt-(kt+Ue)+(Ue-Mt),Lt=Pt+kt,Ue=Lt-Pt,Zl[2]=Pt-(Lt-Ue)+(kt-Ue),Zl[3]=Lt;const Wn=pb(cn,NT,4,Zl,iC);vt=ke*qe,Ze=Is*ke,rt=Ze-(Ze-ke),Et=ke-rt,Ze=Is*qe,xt=Ze-(Ze-qe),Tt=qe-xt,zt=Et*Tt-(vt-rt*xt-Et*xt-rt*Tt),Mt=Ie*Ve,Ze=Is*Ie,rt=Ze-(Ze-Ie),Et=Ie-rt,Ze=Is*Ve,xt=Ze-(Ze-Ve),Tt=Ve-xt,Ft=Et*Tt-(Mt-rt*xt-Et*xt-rt*Tt),kt=zt-Ft,Ue=zt-kt,Zl[0]=zt-(kt+Ue)+(Ue-Ft),Pt=vt+kt,Ue=Pt-vt,Rt=vt-(Pt-Ue)+(kt-Ue),kt=Rt-Mt,Ue=Rt-kt,Zl[1]=Rt-(kt+Ue)+(Ue-Mt),Lt=Pt+kt,Ue=Lt-Pt,Zl[2]=Pt-(Lt-Ue)+(kt-Ue),Zl[3]=Lt;const vr=pb(Wn,iC,4,Zl,BT);return BT[vr-1]})(g,b,w,A,D,P,G)})(c[0],c[1],o[0],o[1],u[0],u[1]);return h>0?-1:h<0?1:0}function Mm(c,o){const u=c.point,h=o.point;return u[0]>h[0]?1:u[0]<h[0]?-1:u[1]!==h[1]?u[1]>h[1]?1:-1:(function(g,b,w){return g.left!==b.left?g.left?1:-1:mv(w,g.otherEvent.point,b.otherEvent.point)!==0?g.isBelow(b.otherEvent.point)?-1:1:!g.isSubject&&b.isSubject?1:-1})(c,o,u)}function Yc(c,o,u){const h=new Jd(o,!1,c,c.isSubject),g=new Jd(o,!0,c.otherEvent,c.isSubject);return oc(c.point,c.otherEvent.point)&&console.warn("what is that, a collapsed segment?",c),h.contourId=g.contourId=c.contourId,Mm(g,c.otherEvent)>0&&(c.otherEvent.left=!0,g.left=!1),c.otherEvent.otherEvent=g,c.otherEvent=h,u.push(g),u.push(h),u}function w1(c,o){return c[0]*o[1]-c[1]*o[0]}function S1(c,o){return c[0]*o[0]+c[1]*o[1]}function T1(c,o,u){const h=(function(D,P,B,j){const $=[P[0]-D[0],P[1]-D[1]],G=[j[0]-B[0],j[1]-B[1]];function Z(Ve,qe,Ue){return[Ve[0]+qe*Ue[0],Ve[1]+qe*Ue[1]]}const se=[B[0]-D[0],B[1]-D[1]];let fe=w1($,G),ue=fe*fe;const pe=S1($,$);if(ue>0){const Ve=w1(se,G)/fe;if(Ve<0||Ve>1)return null;const qe=w1(se,$)/fe;return qe<0||qe>1?null:Ve===0||Ve===1?[Z(D,Ve,$)]:qe===0||qe===1?[Z(B,qe,G)]:[Z(D,Ve,$)]}if(fe=w1(se,$),ue=fe*fe,ue>0)return null;const ve=S1($,se)/pe,Se=ve+S1($,G)/pe,ke=Math.min(ve,Se),Ie=Math.max(ve,Se);return ke<=1&&Ie>=0?ke===1?[Z(D,ke>0?ke:0,$)]:Ie===0?[Z(D,Ie<1?Ie:1,$)]:[Z(D,ke>0?ke:0,$),Z(D,Ie<1?Ie:1,$)]:null})(c.point,c.otherEvent.point,o.point,o.otherEvent.point),g=h?h.length:0;if(g===0||g===1&&(oc(c.point,o.point)||oc(c.otherEvent.point,o.otherEvent.point))||g===2&&c.isSubject===o.isSubject)return 0;if(g===1)return!oc(c.point,h[0])&&!oc(c.otherEvent.point,h[0])&&Yc(c,h[0],u),!oc(o.point,h[0])&&!oc(o.otherEvent.point,h[0])&&Yc(o,h[0],u),1;const b=[];let w=!1,A=!1;return oc(c.point,o.point)?w=!0:Mm(c,o)===1?b.push(o,c):b.push(c,o),oc(c.otherEvent.point,o.otherEvent.point)?A=!0:Mm(c.otherEvent,o.otherEvent)===1?b.push(o.otherEvent,c.otherEvent):b.push(c.otherEvent,o.otherEvent),w&&A||w?(o.type=1,c.type=o.inOut===c.inOut?2:3,w&&!A&&Yc(b[1].otherEvent,b[0].point,u),2):A?(Yc(b[0],b[1].point,u),3):b[0]!==b[3].otherEvent?(Yc(b[0],b[1].point,u),Yc(b[1],b[2].point,u),3):(Yc(b[0],b[1].point,u),Yc(b[3].otherEvent,b[2].point,u),3)}function oC(c,o){if(c===o)return 0;if(mv(c.point,c.otherEvent.point,o.point)!==0||mv(c.point,c.otherEvent.point,o.otherEvent.point)!==0)return oc(c.point,o.point)?c.isBelow(o.otherEvent.point)?-1:1:c.point[0]===o.point[0]?c.point[1]<o.point[1]?-1:1:Mm(c,o)===1?o.isAbove(c.point)?-1:1:c.isBelow(o.point)?-1:1;if(c.isSubject!==o.isSubject)return c.isSubject?-1:1;{let u=c.point,h=o.point;if(u[0]===h[0]&&u[1]===h[1])return u=c.otherEvent.point,h=o.otherEvent.point,u[0]===h[0]&&u[1]===h[1]?0:(c.contourId??0)>(o.contourId??0)?1:-1}return Mm(c,o)===1?1:-1}class sC{constructor(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null}isExterior(){return this.holeOf==null}}function jT(c,o,u,h){let g,b=c+1,w=o[c].point;const A=o.length;for(b<A&&(g=o[b].point);b<A&&g[0]===w[0]&&g[1]===w[1];){if(!u[b])return b;b++,b<A&&(g=o[b].point)}for(b=c-1;u[b]&&b>h;)b--;return b}function lC(c,o,u){const h=new sC;if(c.prevInResult!=null){const g=c.prevInResult,b=g.outputContourId;if(g.resultTransition>0){const w=o[b];if(w.holeOf!=null){const A=w.holeOf;o[A].holeIds.push(u),h.holeOf=A,h.depth=o[b].depth}else o[b].holeIds.push(u),h.holeOf=b,h.depth=o[b].depth+1}else h.holeOf=null,h.depth=o[b].depth}else h.holeOf=null,h.depth=0;return h}const UT=Math.max,mb=Math.min;let E1=0;function uC(c,o,u,h,g,b){let w,A,D,P,B,j;for(w=0,A=c.length-1;w<A;w++){if(D=c[w],P=c[w+1],B=new Jd(D,!1,void 0,o),j=new Jd(P,!1,B,o),B.otherEvent=j,D[0]===P[0]&&D[1]===P[1])continue;B.contourId=j.contourId=u,b||(B.isExteriorRing=!1,j.isExteriorRing=!1),Mm(B,j)>0?j.left=!0:B.left=!0;const $=D[0],G=D[1];g[0]=mb(g[0],$),g[1]=mb(g[1],G),g[2]=UT(g[2],$),g[3]=UT(g[3],G),h.push(B),h.push(j)}}const gv=[];function A1(c,o,u){let h=c,g=o;typeof c[0][0][0]=="number"&&(h=[c]),typeof o[0][0][0]=="number"&&(g=[o]);let b=(function($,G,Z){let se=null;return $.length*G.length===0&&(Z===0?se=gv:Z===2?se=$:(Z===1||Z===3)&&(se=$.length===0?G:$)),se})(h,g,u);if(b)return b===gv?null:b;const w=[1/0,1/0,-1/0,-1/0],A=[1/0,1/0,-1/0,-1/0],D=(function($,G,Z,se,fe){const ue=new Td(void 0,Mm);let pe,ve,Se,ke,Ie,Ve;for(Se=0,ke=$.length;Se<ke;Se++)for(pe=$[Se],Ie=0,Ve=pe.length;Ie<Ve;Ie++)ve=Ie===0,ve&&E1++,uC(pe[Ie],!0,E1,ue,Z,ve);for(Se=0,ke=G.length;Se<ke;Se++)for(pe=G[Se],Ie=0,Ve=pe.length;Ie<Ve;Ie++)ve=Ie===0,fe===2&&(ve=!1),ve&&E1++,uC(pe[Ie],!1,E1,ue,se,ve);return ue})(h,g,w,A,u);if(b=(function($,G,Z,se,fe){let ue=null;return(Z[0]>se[2]||se[0]>Z[2]||Z[1]>se[3]||se[1]>Z[3])&&(fe===0?ue=gv:fe===2?ue=$:(fe===1||fe===3)&&(ue=$.concat(G))),ue})(h,g,w,A,u),b)return b===gv?null:b;const P=(function($,G,Z,se,fe,ue){const pe=new LT(oC),ve=[],Se=Math.min(se[2],fe[2]);let ke,Ie,Ve;for(;$.length!==0;){let qe=$.pop();if(ve.push(qe),ue===0&&qe.point[0]>Se||ue===2&&qe.point[0]>se[2])break;if(qe.left){Ie=ke=pe.insert(qe),Ve=pe.minNode(),ke=ke!==Ve?pe.prev(ke):null,Ie=pe.next(Ie);const Ue=ke?ke.key:null;let Ze;if(gy(qe,Ue,ue),Ie&&T1(qe,Ie.key,$)===2&&(gy(qe,Ue,ue),gy(Ie.key,qe,ue)),ke&&T1(ke.key,qe,$)===2){let rt=ke;rt=rt!==Ve?pe.prev(rt):null,Ze=rt?rt.key:null,gy(Ue,Ze,ue),gy(qe,Ue,ue)}}else qe=qe.otherEvent,Ie=ke=pe.find(qe),ke&&Ie&&(ke=ke!==Ve?pe.prev(ke):null,Ie=pe.next(Ie),pe.remove(qe),Ie&&ke&&T1(ke.key,Ie.key,$))}return ve})(D,0,0,w,A,u),B=(function($){let G,Z;const se=(function(pe){let ve,Se,ke,Ie,Ve;const qe=[];for(Se=0,ke=pe.length;Se<ke;Se++)ve=pe[Se],(ve.left&&ve.inResult||!ve.left&&ve.otherEvent.inResult)&&qe.push(ve);let Ue=!1;for(;!Ue;)for(Ue=!0,Se=0,ke=qe.length;Se<ke;Se++)Se+1<ke&&Mm(qe[Se],qe[Se+1])===1&&(Ie=qe[Se],qe[Se]=qe[Se+1],qe[Se+1]=Ie,Ue=!1);for(Se=0,ke=qe.length;Se<ke;Se++)ve=qe[Se],ve.otherPos=Se;for(Se=0,ke=qe.length;Se<ke;Se++)ve=qe[Se],ve.left||(Ve=ve.otherPos,ve.otherPos=ve.otherEvent.otherPos,ve.otherEvent.otherPos=Ve);return qe})($),fe={},ue=[];for(G=0,Z=se.length;G<Z;G++){if(fe[G])continue;const pe=ue.length,ve=lC(se[G],ue,pe),Se=Ve=>{fe[Ve]=!0,Ve<se.length&&se[Ve]&&(se[Ve].outputContourId=pe)};let ke=G,Ie=G;for(ve.points.push(se[G].point);Se(ke),ke=se[ke].otherPos,Se(ke),ve.points.push(se[ke].point),ke=jT(ke,se,fe,Ie),!(ke==Ie||ke>=se.length)&&se[ke];);ue.push(ve)}return ue})(P),j=[];for(let $=0;$<B.length;$++){let G=B[$];if(G.isExterior()){let Z=[G.points];for(let se=0;se<G.holeIds.length;se++)Z.push(B[G.holeIds[se]].points);j.push(Z)}}return j}function yy(c,o,u,h){const g=[],b=h===0?(w,A,D,P,B,j)=>{w.push(new Vt(j,D+(j-A)/(P-A)*(B-D)))}:(w,A,D,P,B,j)=>{w.push(new Vt(A+(j-D)/(B-D)*(P-A),j))};for(const w of c){const A=[];for(const D of w){if(D.length<=2)continue;const P=[];for(let $=0;$<D.length-1;$++){const G=D[$].x,Z=D[$].y,se=D[$+1].x,fe=D[$+1].y,ue=h===0?G:Z,pe=h===0?se:fe;ue<o?pe>o&&b(P,G,Z,se,fe,o):ue>u?pe<u&&b(P,G,Z,se,fe,u):P.push(D[$]),pe<o&&ue>=o&&b(P,G,Z,se,fe,o),pe>u&&ue<=u&&b(P,G,Z,se,fe,u)}let B=D[D.length-1];const j=h===0?B.x:B.y;j>=o&&j<=u&&P.push(B),P.length&&(B=P[P.length-1],P[0].x===B.x&&P[0].y===B.y||P.push(P[0]),A.push(P))}A.length&&g.push(A)}return g}function $T(c,o){const u=A1(gb(c),gb([o]),0);return u==null?[]:ep(u)}function cC(c,o){let h=gb(c,65536);const g=[];for(;o.valid();o.next()){const[b,w]=o.get(),A=b.x*65536,D=b.y*65536,P=w.x*65536,B=w.y*65536,j=P-A,$=B-D,G=Math.hypot(j,$);if(G===0)continue;const Z=Math.trunc($/G*3),se=-Math.trunc(j/G*3);g.push([[[A,D],[P,B],[P+Z,B+se],[A+Z,D+se],[A,D]]])}return g.length>0&&(h=A1(h,g,2)),ep(h,1/65536,128)}function gb(c,o=1){return[c.map(u=>u.map(h=>[h.x*o,h.y*o]))]}function ep(c,o=1,u){return c.map(h=>h.map((g,b)=>{const w=g.map(A=>{let D=A[0],P=A[1];return u&&(D=Math.round(D/u)*u,P=Math.round(P/u)*u),new Vt(D*o,P*o)._round()});return b>0&&w.reverse(),w}))}class kh{constructor(o,u){this.layoutVertexArray=new Pf,this.indexArray=new Xa,this.lineIndexArray=new Wl,this.triangleSegments=new Ii,this.lineSegments=new Ii,this.programConfigurations=new H(o.layers,{zoom:o.zoom,lut:o.lut}),this.uploaded=!1,u&&(this.elevatedLayoutVertexArray=new To)}update(o,u,h,g,b,w,A,D){this.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A,D)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Nk.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.lineIndexBuffer=o.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=o.createVertexBuffer(this.elevatedLayoutVertexArray,JO.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(o,u,h,g,b,w,A){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,u,h,g,b,w,void 0,A)}}class Lh{constructor(o){this.zoom=o.zoom,this.pixelRatio=o.pixelRatio,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lut=o.lut,this.bufferData=new kh(o,!1),this.elevationBufferData=new kh(o,!0),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=o.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference"),this.sourceLayerIndex=o.sourceLayerIndex,this.worldview=o.worldview,this.hasAppearances=null}updateFootprints(o,u){}updateAppearances(o,u,h,g){}populate(o,u,h,g){this.hasPattern=RT("fill",this.layers,this.pixelRatio,u);const b=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:A,id:D,index:P,sourceLayerIndex:B}of o){const j=this.layers[0]._featureFilter.needGeometry,$=Qn(A,j);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),$,h))continue;const G=b?b.evaluate($,{},h,u.availableImages):void 0,Z={id:D,properties:A.properties,type:A.type,sourceLayerIndex:B,index:P,geometry:j?$.geometry:Un(A,h,g),patterns:{},sortKey:G};w.push(Z)}b&&w.sort((A,D)=>A.sortKey-D.sortKey);for(const A of w){const{geometry:D,index:P,sourceLayerIndex:B}=A;if(this.hasPattern){const j=kT("fill",this.layers,A,this.zoom,this.pixelRatio,u);this.patternFeatures.push(j)}else this.addFeature(A,D,P,h,{},u.availableImages,u.brightness,u.elevationFeatures);u.featureIndex.insert(o[P].feature,D,P,B,this.index)}}update(o,u,h,g,b,w,A){this.bufferData.update(o,u,h,g,b,w,A,this.worldview),this.elevationBufferData.update(o,u,h,g,b,w,A,this.worldview),this.elevatedStructures&&this.elevatedStructures.update(o,u,h,g,b,w,A,this.worldview)}addFeatures(o,u,h,g,b,w){for(const A of this.patternFeatures)this.addFeature(A,A.geometry,A.index,u,h,g,w,o.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(o){this.bufferData.upload(o),this.elevationBufferData.upload(o),this.elevatedStructures&&this.elevatedStructures.upload(o)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(o,u,h,g,b,w=[],A,D){const P=db(u,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(o,P,g,h,D):this.addGeometry(P,this.bufferData),this.bufferData.populatePaintArrays(o,h,b,w,g,A,this.worldview),this.elevationBufferData.populatePaintArrays(o,h,b,w,g,A,this.worldview)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}setEvaluatedPortalGraph(o,u,h,g,b){this.elevatedStructures&&(this.elevatedStructures.construct(o),this.elevatedStructures.populatePaintArrays(u,h,g,b,this.worldview))}addElevatedRoadFeature(o,u,h,g,b){const w=new Array,A=Zo.getElevationFeature(o,b);if(!A)return void this.addGeometry(u,this.bufferData);{const P=this.clipPolygonsToTile(u,1);P.length>0&&w.push({polygons:P,elevationFeature:A,elevationTileID:h})}const D={guardRailEnabled:this.layers[0].layout.get("fill-construct-bridge-guard-rail").evaluate(o,{},h),featureIndex:g};for(const P of w)if(P.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new Ds(P.elevationTileID,this.layers,this.zoom,this.lut));const j=P.elevationFeature.isTunnel();let $=0;o.properties.hasOwnProperty(er)&&($=+o.properties[er]),this.elevatedStructures.addPortalCandidates(P.elevationFeature.id,P.polygons,j,P.elevationFeature,$)}P.elevationFeature.constantHeight==null&&(P.polygons=this.prepareElevatedPolygons(P.polygons,P.elevationFeature,P.elevationTileID));const B=new Il(h,P.elevationTileID);this.addElevatedGeometry(P.polygons,B,P.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,g,D)}}addElevatedGeometry(o,u,h,g,b,w){const A={elevation:h,elevationSampler:u,bias:g,index:b,featureInfo:w},[D,P]=this.addGeometry(o,this.elevationBufferData,A);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:D,max:P}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,D),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,P))}addGeometry(o,u,h){let g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,w=null;h&&(w=h.elevationSampler.constantElevation(h.elevation,h.bias),w!=null&&(g=w,b=w));const A=(D,P,B)=>{if(h!=null)if(P.push(D),w!=null)u.elevatedLayoutVertexArray.emplaceBack(w),B.push(w);else{const j=h.elevationSampler.pointElevation(D,h.elevation,h.bias);u.elevatedLayoutVertexArray.emplaceBack(j),B.push(j),g=Math.min(g,j),b=Math.max(b,j)}};for(const D of o){let P=0;for(const ve of D)P+=ve.length;const B=u.triangleSegments.prepareSegment(P,u.layoutVertexArray,u.indexArray),j=B.vertexLength,$=[],G=[],Z=[],se=[],fe=[],ue=u.layoutVertexArray.length;for(const ve of D){if(ve.length===0)continue;ve!==D[0]&&G.push($.length/2);const Se=u.lineSegments.prepareSegment(ve.length,u.layoutVertexArray,u.lineIndexArray),ke=Se.vertexLength;h&&fe.push(u.layoutVertexArray.length-ue),A(ve[0],Z,se),u.layoutVertexArray.emplaceBack(ve[0].x,ve[0].y),u.lineIndexArray.emplaceBack(ke+ve.length-1,ke),$.push(ve[0].x),$.push(ve[0].y);for(let Ie=1;Ie<ve.length;Ie++)A(ve[Ie],Z,se),u.layoutVertexArray.emplaceBack(ve[Ie].x,ve[Ie].y),u.lineIndexArray.emplaceBack(ke+Ie-1,ke+Ie),$.push(ve[Ie].x),$.push(ve[Ie].y);Se.vertexLength+=ve.length,Se.primitiveLength+=ve.length}const pe=ac($,G);for(let ve=0;ve<pe.length;ve+=3)u.indexArray.emplaceBack(j+pe[ve],j+pe[ve+1],j+pe[ve+2]);if(pe.length>0&&h&&this.elevationMode==="hd-road-base"){const ve=h.elevation.isTunnel(),Se=h.elevation.safeArea,ke=this.elevatedStructures.addVertices(Z,se);this.elevatedStructures.addTriangles(pe,ke,ve);const Ie=fe.length;if(Ie>0){for(let Ve=0;Ve<Ie-1;Ve++)this.elevatedStructures.addRenderableRing(h.index,fe[Ve]+ke,fe[Ve+1]-fe[Ve],ve,Se,h.featureInfo);this.elevatedStructures.addRenderableRing(h.index,fe[Ie-1]+ke,Z.length-fe[Ie-1],ve,Se,h.featureInfo)}}B.vertexLength+=P,B.primitiveLength+=pe.length/3}return[g,b]}prepareElevatedPolygons(o,u,h){const g=1/qt(h),b=[];for(const w of o){const A=cC(w,new ul(u,g));b.push(...A)}return b}clipPolygonsToTile(o,u){const h=-u,g=-u,b=Jt+u,w=Jt+u;let A=0;const D=[],P=[];for(;A<o.length;A++){const $=o[A],G=Uu($);(G.min.x>=h&&G.max.x<=b&&G.min.y>=g&&G.max.y<=w?D:P).push($)}if(D.length===o.length)return o;const B=[new Vt(h,g),new Vt(b,g),new Vt(b,w),new Vt(h,w),new Vt(h,g)],j=D;for(const $ of P)j.push(...$T($,B));return j}}let yv,_v,tp,fC;Kt(Lh,"FillBucket",{omit:["layers","patternFeatures"]}),Kt(kh,"FillBufferData"),Kt(Ds,"ElevatedStructures");class yb{constructor(o,u,h,g){if(this.triangleCount=u.length/3,this.min=new Vt(0,0),this.max=new Vt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||o.length===0)return;const[b,w]=[o[0].clone(),o[0].clone()];for(let j=1;j<o.length;++j){const $=o[j];b.x=Math.min(b.x,$.x),b.y=Math.min(b.y,$.y),w.x=Math.max(w.x,$.x),w.y=Math.max(w.y,$.y)}if(g){const j=Math.ceil(Math.max(w.x-b.x,w.y-b.y)/g);h=Math.max(h,j)}if(h===0)return;this.min=b,this.max=w;const A=this.max.sub(this.min);A.x=Math.max(A.x,1),A.y=Math.max(A.y,1);const D=Math.max(A.x,A.y)/h;this.cellsX=Math.max(1,Math.ceil(A.x/D)),this.cellsY=Math.max(1,Math.ceil(A.y/D)),this.xScale=1/D,this.yScale=1/D;const P=[];for(let j=0;j<this.triangleCount;j++){const $=o[u[3*j+0]].sub(this.min),G=o[u[3*j+1]].sub(this.min),Z=o[u[3*j+2]].sub(this.min),se=gu(Math.floor(Math.min($.x,G.x,Z.x)),this.xScale,this.cellsX),fe=gu(Math.floor(Math.max($.x,G.x,Z.x)),this.xScale,this.cellsX),ue=gu(Math.floor(Math.min($.y,G.y,Z.y)),this.yScale,this.cellsY),pe=gu(Math.floor(Math.max($.y,G.y,Z.y)),this.yScale,this.cellsY),ve=new Vt(0,0),Se=new Vt(0,0),ke=new Vt(0,0),Ie=new Vt(0,0);for(let Ve=ue;Ve<=pe;++Ve){ve.y=Se.y=Ve*D,ke.y=Ie.y=(Ve+1)*D;for(let qe=se;qe<=fe;++qe)ve.x=ke.x=qe*D,Se.x=Ie.x=(qe+1)*D,(Ai($,G,Z,ve,Se,Ie)||Ai($,G,Z,ve,Ie,ke))&&P.push({cellIdx:Ve*this.cellsX+qe,triIdx:j})}}if(P.length===0)return;P.sort((j,$)=>j.cellIdx-$.cellIdx||j.triIdx-$.triIdx);let B=0;for(;B<P.length;){const j=P[B].cellIdx,$={start:this.payload.length,len:0};for(;B<P.length&&P[B].cellIdx===j;)++$.len,this.payload.push(P[B++].triIdx);this.cells[j]=$}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(o,u){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>o.x||o.y>this.max.y||this.min.y>o.y)return;const h=gu(o.x-this.min.x,this.xScale,this.cellsX),g=gu(o.y-this.min.y,this.yScale,this.cellsY),b=this.cells[g*this.cellsX+h];if(b){this._lazyInitLookup();for(let w=0;w<b.len;w++){const A=this.payload[b.start+w],D=Math.floor(A/8),P=1<<A%8;if(!(this.lookup[D]&P)&&(this.lookup[D]|=P,u.push(A),u.length===this.triangleCount))return}}}query(o,u,h){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>u.x||o.y>this.max.y||this.min.y>u.y)return;this._lazyInitLookup();const g=gu(o.x-this.min.x,this.xScale,this.cellsX),b=gu(u.x-this.min.x,this.xScale,this.cellsX),w=gu(o.y-this.min.y,this.yScale,this.cellsY),A=gu(u.y-this.min.y,this.yScale,this.cellsY);for(let D=w;D<=A;D++)for(let P=g;P<=b;P++){const B=this.cells[D*this.cellsX+P];if(B)for(let j=0;j<B.len;j++){const $=this.payload[B.start+j],G=Math.floor($/8),Z=1<<$%8;if(!(this.lookup[G]&Z)&&(this.lookup[G]|=Z,h.push($),h.length===this.triangleCount))return}}}}function gu(c,o,u){return Math.max(0,Math.min(u-1,Math.floor(c*o)))}Kt(yb,"TriangleGridIndex");class hC{constructor(o){this.zoom=o.zoom,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.footprints=[],this.worldview=o.worldview,this.hasAppearances=null}updateFootprints(o,u){for(const h of this.footprints)u.push({footprint:h,id:o})}updateAppearances(o,u,h,g){}populate(o,u,h,g){const b=[];for(const{feature:w,id:A,index:D,sourceLayerIndex:P}of o){const B=this.layers[0]._featureFilter.needGeometry,j=Qn(w,B);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),j,h))continue;const $={id:A,properties:w.properties,type:w.type,sourceLayerIndex:P,index:D,geometry:B?j.geometry:Un(w,h,g),patterns:{}};b.push($)}for(const w of b){const{geometry:A,index:D,sourceLayerIndex:P}=w;this.addFeature(w,A,D,h,{},u.availableImages,u.brightness),u.featureIndex.insert(o[D].feature,A,D,P,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(o){}update(o,u,h,g,b,w,A){}destroy(){}addFeature(o,u,h,g,b,w=[],A){for(const D of db(u,2)){const P=[],B=[],j=[],$=new Vt(1/0,1/0),G=new Vt(-1/0,-1/0);for(const fe of D)if(fe.length!==0){fe!==D[0]&&j.push(B.length/2);for(let ue=0;ue<fe.length;ue++)B.push(fe[ue].x),B.push(fe[ue].y),P.push(fe[ue]),$.x=Math.min($.x,fe[ue].x),$.y=Math.min($.y,fe[ue].y),G.x=Math.max(G.x,fe[ue].x),G.y=Math.max(G.y,fe[ue].y)}const Z=ac(B,j),se=new yb(P,Z,8,256);this.footprints.push({vertices:P,indices:Z,grid:se,min:$,max:G})}}}Kt(hC,"ClipBucket",{omit:["layers"]});const dC=gr([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),O1=gr([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),pC=gr([{name:"a_flood_light_ground_radius",components:1,type:"Float32"}]),Hk=gr([{name:"a_centroid_pos",components:2,type:"Uint16"}]),C1=gr([{name:"a_join_normal_inside",components:3,type:"Int16"}]),M1=gr([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),mC=gr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:vv}=dC,bv=Number.MAX_SAFE_INTEGER,VT=bv-1;function _b(c,o,u,h){return c.order<o||c.order===bv||!(c.clipMask&u)||(function(g,b){return b.length!==0&&b.find(w=>w===g)===void 0})(h,c.clipScope)}function vb(c,o){return c.x-o.x||c.y-o.y}function gC(c,o){return vb(c.min,o.min)===0&&vb(c.max,o.max)===0}function xv(c,o){return!(c.min.x>o.max.x||c.max.x<o.min.x||c.min.y>o.max.y||c.max.y<o.min.y)}function m(c,o){if(c.length!==o.length)return!1;for(let u=0;u<c.length;u++)if(c[u].sourceId!==o[u].sourceId||!gC(c[u],o[u])||c[u].order!==o[u].order||c[u].clipMask!==o[u].clipMask||!Sc(c[u].clipScope,o[u].clipScope))return!1;return!0}function x(c,o,u){const h=1/Jt,g=1/(1<<u.canonical.z),b=(o.x*h+u.canonical.x)*g+u.wrap,w=(o.y*h+u.canonical.y)*g;return{min:new Vt((c.x*h+u.canonical.x)*g+u.wrap,(c.y*h+u.canonical.y)*g),max:new Vt(b,w)}}function C(c,o,u){const h=1<<u.canonical.z,g=((o.x-u.wrap)*h-u.canonical.x)*Jt,b=(o.y*h-u.canonical.y)*Jt;return{min:new Vt(((c.x-u.wrap)*h-u.canonical.x)*Jt,(c.y*h-u.canonical.y)*Jt),max:new Vt(g,b)}}function L(c,o,u,h,g,b,w){const A=c.indices,D=c.vertices,P=[];for(let B=h;B<h+g;B+=3){const j=o[u[B+0]+b],$=o[u[B+1]+b],G=o[u[B+2]+b],Z=Math.min(j.x,$.x,G.x),se=Math.max(j.x,$.x,G.x),fe=Math.min(j.y,$.y,G.y),ue=Math.max(j.y,$.y,G.y);P.length=0,c.grid.query(new Vt(Z,fe),new Vt(se,ue),P);for(let pe=0;pe<P.length;pe++){const ve=P[pe];if(Ai(D[A[3*ve+0]],D[A[3*ve+1]],D[A[3*ve+2]],j,$,G,w))return!0}}return!1}function Y(c,o,u,h){if(!c||!u)return!1;let g=c.vertices;if(!o.canonical.equals(h.canonical)||o.wrap!==h.wrap){if(u.vertices.length<c.vertices.length)return Y(u,h,c,o);const b=o.canonical,w=h.canonical,A=Math.pow(2,w.z-b.z);g=c.vertices.map(D=>new Vt((D.x+b.x*Jt)*A-w.x*Jt,(D.y+b.y*Jt)*A-w.y*Jt))}return L(u,g,c.indices,0,c.indices.length,0,0)}function ne(c,o,u,h){const g=Math.pow(2,h.z-u.z);return new Vt((c+u.x*Jt)*g-h.x*Jt,(o+u.y*Jt)*g-h.y*Jt)}function Te(c,o){const u=[];o.grid.queryPoint(c,u);const h=o.indices,g=o.vertices;for(let b=0;b<u.length;b++){const w=u[b];if(fl([g[h[3*w+0]],g[h[3*w+1]],g[h[3*w+2]]],c))return!0}return!1}const Xe=[new Vt(0,0),new Vt(Jt,0),new Vt(Jt,Jt),new Vt(0,Jt)];function St(c,o){const u=[];let h=[];if(!o||c.length<2)return[c];if(c.length===2)return ic(c[0],c[1],Xe)?[c]:[];for(let g=0;g<c.length+2;g++){const b=c[g%c.length],w=c[(g+1)%c.length],A=ic(g===0?c[c.length-1]:c[(g-1)%c.length],b,Xe),D=ic(b,w,Xe),P=A||D;P&&h.push(b),P&&D||h.length>0&&(h.length>1&&u.push(h),h=[])}return h.length>1&&u.push(h),u}const Qt=yr.types,mn=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],wn=["fill-extrusion-flood-light-ground-radius"],en=Math.pow(2,13),ln=Math.pow(2,15)-1,cr=new Vt(0,1),Sr=2147483648;function da(c,o,u,h,g,b,w,A){c.emplaceBack((o<<1)+w,(u<<1)+b,(Math.floor(h*en)<<1)+g,Math.round(A))}function Bt(c,o,u){c.emplaceBack(o.x*Jt,o.y*Jt,u?1:0)}function Ot(c,o,u,h,g,b){c.emplaceBack(o.x,o.y,(u.x<<1)+h,(u.y<<1)+g,b)}function Zt(c,o,u){c.emplaceBack(o.x,o.y,o.z,u[0]*16384,u[1]*16384,u[2]*16384)}class bn{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class Dr{constructor(){this.centroidXY=new Vt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Vt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Vt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0,this.buildingId=0}span(){return new Vt(this.max.x-this.min.x,this.max.y-this.min.y)}}class ea{constructor(){this.acc=new Vt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(o,u){o.min.x===Number.MAX_VALUE&&(o.min.x=o.max.x=u.x,o.min.y=o.max.y=u.y)}appendEdge(o,u,h){this.accCount++,this.acc._add(u);let g=!!this.borders;u.x<o.min.x?(o.min.x=u.x,g=!0):u.x>o.max.x&&(o.max.x=u.x,g=!0),u.y<o.min.y?(o.min.y=u.y,g=!0):u.y>o.max.y&&(o.max.y=u.y,g=!0),((u.x===0||u.x===Jt)&&u.x===h.x)!=((u.y===0||u.y===Jt)&&u.y===h.y)&&this.processBorderOverlap(u,h),g&&this.checkBorderIntersection(u,h)}checkBorderIntersection(o,u){u.x<0!=o.x<0&&this.addBorderIntersection(0,Vn(u.y,o.y,(0-u.x)/(o.x-u.x))),u.x>Jt!=o.x>Jt&&this.addBorderIntersection(1,Vn(u.y,o.y,(Jt-u.x)/(o.x-u.x))),u.y<0!=o.y<0&&this.addBorderIntersection(2,Vn(u.x,o.x,(0-u.y)/(o.y-u.y))),u.y>Jt!=o.y>Jt&&this.addBorderIntersection(3,Vn(u.x,o.x,(Jt-u.y)/(o.y-u.y)))}addBorderIntersection(o,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[o];u<h[0]&&(h[0]=u),u>h[1]&&(h[1]=u)}processBorderOverlap(o,u){if(o.x===u.x){if(o.y===u.y)return;const h=o.x===0?0:1;this.addBorderIntersection(h,u.y),this.addBorderIntersection(h,o.y)}else{const h=o.y===0?2:3;this.addBorderIntersection(h,u.x),this.addBorderIntersection(h,o.x)}}centroid(){return this.accCount===0?new Vt(0,0):new Vt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((o,u)=>o+ +(u[0]!==Number.MAX_VALUE),0):0}}function _r(c,o){const u=c.add(o)._unit(),h=ze(c.x*u.x+c.y*u.y,-1,1);var g,b,w;return w=Math.acos(h),Math.min(4,Math.max(-4,Math.tan(w)))/4*ln*((g=c).x*(b=o).y-g.y*b.x<0?-1:1)}const vi=[c=>c.x<0,c=>c.x>Jt,c=>c.y<0,c=>c.y>Jt];function Fi(c,o,u,h){const g=[4];if(h===0)return g;u._mult(h);const b=c.sub(u),w=o.sub(u),A=[c,o,b,w];for(let D=0;D<4;D++)for(const P of A)if(vi[D](P)){g.push(D);break}return g}class Zi{constructor(o){this.groundRadiusArray=null,this.groundRadiusBuffer=null,this.vertexArray=new lo,this.indexArray=new Xa,this.programConfigurations=new H(o.layers,{zoom:o.zoom,lut:o.lut},u=>wn.includes(u)),this._segments=new Ii,this.hiddenByLandmarkVertexArray=new sy,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Ii}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(o,u,h,g=!1){const b=o.length;if(b>2){let w=Math.max(0,this._segments.get().length-1);const A=this._segments._prepareSegment(4*b,this.vertexArray.length,2*this._segmentToGroundQuads[w].length);let D;w!==this._segments.get().length-1&&(w++,this._segmentToGroundQuads[w]=[],this._segmentToRegionTriCounts[w]=[0,0,0,0,0]);{const P=o[0],B=o[1];D=_r(P.sub(o[b-1])._perp()._unit(),B.sub(P)._perp()._unit())}for(let P=0;P<b;P++){const B=P===b-1?0:P+1,j=o[P],$=o[B],G=o[B===b-1?0:B+1],Z=$.sub(j)._perp()._unit(),se=_r(Z,G.sub($)._perp()._unit()),fe=D,ue=se;if(Gk(j,$,u)||g&&a9(j,u)&&a9($,u)){D=se;continue}const pe=A.vertexLength;Ot(this.vertexArray,j,$,1,1,fe),Ot(this.vertexArray,j,$,1,0,fe),Ot(this.vertexArray,j,$,0,1,ue),Ot(this.vertexArray,j,$,0,0,ue),A.vertexLength+=4;const ve=Fi(j,$,Z,h);for(const Se of ve)this._segmentToGroundQuads[w].push({id:pe,region:Se}),this._segmentToRegionTriCounts[w][Se]+=2,A.primitiveLength+=2;D=se}}}prepareBorderSegments(){if(!this.hasData())return;const o=this._segments.get(),u=o.length;for(let h=0;h<u;h++)this._segmentToGroundQuads[h].sort((g,b)=>g.region-b.region);for(let h=0;h<u;h++){const g=this._segmentToGroundQuads[h],b=o[h],w=this._segmentToRegionTriCounts[h];w.reduce((D,P)=>D+P,0);let A=0;for(let D=0;D<=4;D++){const P=w[D];if(P!==0){let B=this.regionSegments[D];B||(B=this.regionSegments[D]=new Ii);const j={vertexOffset:b.vertexOffset,primitiveOffset:b.primitiveOffset+A,vertexLength:b.vertexLength,primitiveLength:P};B.get().push(j)}A+=P}for(let D=0;D<g.length;D++){const P=g[D].id;this.indexArray.emplaceBack(P,P+1,P+3),this.indexArray.emplaceBack(P,P+3,P+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(o,u,h,g,b,w,A){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,o,u,h,g,b,w,void 0,A)}upload(o){this.hasData()&&(this.vertexBuffer=o.createVertexBuffer(this.vertexArray,O1.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.groundRadiusArray!=null&&(this.groundRadiusBuffer=o.createVertexBuffer(this.groundRadiusArray,pC.members)))}uploadPaintProperties(o){this.hasData()&&this.programConfigurations.upload(o)}update(o,u,h,g,b,w,A,D){this.hasData()&&this.programConfigurations.updatePaintArrays(o,u,h,g,b,w,A,D)}updateHiddenByLandmark(o){this.updateHiddenByLandmarkRange(o.groundVertexArrayOffset,o.groundVertexCount,!!(o.flags&Sr))}updateHiddenByLandmarkRange(o,u,h){if(!this.hasData())return;const g=u+o;if(u!==0){for(let b=o;b<g;++b)this.hiddenByLandmarkVertexArray.emplace(b,h?1:0);this._needsHiddenByLandmarkUpdate=!0}}uploadHiddenByLandmark(o){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=o.createVertexBuffer(this.hiddenByLandmarkVertexArray,M1.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this.groundRadiusBuffer&&this.groundRadiusBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let o=0;o<=4;o++){const u=this.regionSegments[o];u&&u.destroy()}}}}class Nf{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.pixelRatio=o.pixelRatio,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Xa,this.footprintVertices=new Pf,this.footprintSegments=[],this.layoutVertexArray=new Uc,this.centroidVertexArray=new kf,this.wallVertexArray=new X0,this.indexArray=new Xa,this.programConfigurations=new H(o.layers,{zoom:o.zoom,lut:o.lut},u=>mn.includes(u)),this.segments=new Ii,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.groundEffect=new Zi(o),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[],this.worldview=o.worldview,this.hasAppearances=null}updateFootprints(o,u){}updateAppearances(o,u,h,g){}populate(o,u,h,g){this.features=[],this.hasPattern=RT("fill-extrusion",this.layers,this.pixelRatio,u),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=qt(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:b,id:w,index:A,sourceLayerIndex:D}of o){const P=this.layers[0]._featureFilter.needGeometry,B=Qn(b,P);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),B,h))continue;const j={id:w,sourceLayerIndex:D,index:A,geometry:P?B.geometry:Un(b,h,g),properties:b.properties,type:b.type,patterns:{}},$=this.layoutVertexArray.length,G=Qt[j.type]==="Polygon";if(this.hasPattern)this.features.push({featureId:b.id,feature:kT("fill-extrusion",this.layers,j,this.zoom,this.pixelRatio,u)});else if(this.wallMode)for(const Z of j.geometry)for(const se of St(Z,G))this.addFeature(b.id,j,[se],A,h,{},u.availableImages,g,u.brightness);else this.addFeature(b.id,j,j.geometry,A,h,{},u.availableImages,g,u.brightness);u.featureIndex.insert(b,j.geometry,A,D,this.index,$)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(o,u,h,g,b,w){for(const{featureId:A,feature:D}of this.features){const P=Qt[D.type]==="Polygon",{geometry:B}=D;if(this.wallMode)for(const j of B)for(const $ of St(j,P))this.addFeature(A,D,[$],D.index,u,h,g,b,w);else this.addFeature(A,D,B,D.index,u,h,g,b,w)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(o,u,h,g,b,w,A){this.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A,this.worldview),this.groundEffect.update(o,u,b,h,g,w,A,this.worldview)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,vv),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.wallVertexBuffer=o.createVertexBuffer(this.wallVertexArray,C1.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,mC.members,!0)),this.groundEffect.upload(o)),this.groundEffect.uploadPaintProperties(o),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.groundEffect.uploadHiddenByLandmark(o),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,Hk.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,u,h,g,b,w,A,D,P){const B=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(u,{})/this.tileToMeter,j=[new Vt(0,0),new Vt(Jt,Jt)],$=D.projection,G=$.name==="globe",Z=this.wallMode||Qt[u.type]==="Polygon",se=new ea;se.centroidDataIndex=this.centroidData.length;const fe=new Dr;fe.buildingId=o,u.properties&&u.properties.hasOwnProperty("building_id")&&(fe.buildingId=Number(u.properties.building_id));const ue=this.layers[0].paint.get("fill-extrusion-base").evaluate(u,{},b)<=0,pe=this.layers[0].paint.get("fill-extrusion-height").evaluate(u,{},b);let ve;if(fe.height=pe,fe.vertexArrayOffset=this.layoutVertexArray.length,fe.groundVertexArrayOffset=this.groundEffect.vertexArray.length,G&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Vd),this.wallMode){if(G)return void Hn("Non zero fill-extrusion-line-width is not yet supported on globe.");if(h.length!==1)return;ve=(function(Ze){const rt=Ze[0].x===Ze[Ze.length-1].x&&Ze[0].y===Ze[Ze.length-1].y;(function(nn){let an=0;const kn=nn.length;for(let On=0;On<kn;On++)an+=(nn[(On+1)%kn].x-nn[On].x)*(nn[(On+1)%kn].y+nn[On].y);return an>=0})(Ze)||(Ze=Ze.reverse());const xt={geometry:[],joinNormals:[],indices:[]},Tt=[],kt=[],Pt=[];let Rt=Ze.length;for(;Rt>=2&&Ze[Rt-1].equals(Ze[Rt-2]);)Rt--;if(Rt<(rt?3:2))return xt;let vt,zt,Mt,Ft,Lt,fn=0;for(;fn<Rt-1&&Ze[fn].equals(Ze[fn+1]);)fn++;rt&&(vt=Ze[Rt-2],Lt=Ze[fn].sub(vt)._unit()._perp());for(let nn=fn;nn<Rt;nn++){if(Mt=nn===Rt-1?rt?Ze[fn+1]:void 0:Ze[nn+1],Mt&&Ze[nn].equals(Mt))continue;Lt&&(Ft=Lt),vt&&(zt=vt),vt=Ze[nn],Lt=Mt?Mt.sub(vt)._unit()._perp():Ft,Ft=Ft||Lt;let an=Ft.add(Lt);an.x===0&&an.y===0||an._unit();const kn=an.x*Lt.x+an.y*Lt.y,On=kn!==0?1/kn:1/0,cn=Ft.x*Lt.y-Ft.y*Lt.x>0;let Wn="miter";const vr=2;Wn==="miter"&&On>vr&&(Wn="bevel"),Wn==="bevel"&&(On>100&&(Wn="flipbevel"),On<vr&&(Wn="miter"));const Zr=(pr,di,Lr,Ra)=>{const $r=new Vt(pr.x,pr.y),ui=new Vt(pr.x,pr.y);$r.x+=di.x*Ra,$r.y+=di.y*Ra,ui.x-=di.x*Math.max(Lr,1),ui.y-=di.y*Math.max(Lr,1),Pt.push(di),Tt.push($r),kt.push(ui)};if(Wn==="miter")an._mult(On),Zr(vt,an,0,0);else if(Wn==="flipbevel")an=Lt.mult(-1),Zr(vt,an,0,0),Zr(vt,an.mult(-1),0,0);else{const pr=-Math.sqrt(On*On-1),di=cn?pr:0,Lr=cn?0:pr;zt&&Zr(vt,Ft,di,Lr),Mt&&Zr(vt,Lt,di,Lr)}}xt.geometry=[...Tt,...kt.reverse(),Tt[0]],xt.joinNormals=[...Pt,...Pt.reverse(),Pt[Pt.length-1]];const pn=xt.geometry.length-1;for(let nn=0;nn<pn/2;nn++)if(nn+1<pn/2){let an=nn,kn=nn+1,On=pn-1-nn,cn=pn-2-nn;an=an===0?pn-1:an-1,kn=kn===0?pn-1:kn-1,On=On===0?pn-1:On-1,cn=cn===0?pn-1:cn-1,xt.indices.push(On),xt.indices.push(kn),xt.indices.push(an),xt.indices.push(On),xt.indices.push(cn),xt.indices.push(kn)}return xt})(h[0]),h=[ve.geometry]}const Se=(Ze,rt)=>Ze<(rt.length-1)/2||Ze===rt.length-1,ke=this.wallMode?[h]:db(h,500);for(let Ze=ke.length-1;Ze>=0;Ze--){const rt=ke[Ze];(rt.length===0||Mye(rt[0]))&&ke.splice(Ze,1)}let Ie;if(G)Ie=u9(ke,j,b);else{Ie=[];for(const Ze of ke)Ie.push({polygon:Ze,bounds:j})}const Ve=Z?this.edgeRadius:0,qe=Ve>0&&this.zoom<17,Ue=(Ze,rt)=>{if(Ze.length===0)return!1;const Et=Ze[Ze.length-1];return rt.x===Et.x&&rt.y===Et.y};for(const{polygon:Ze,bounds:rt}of Ie){let Et=0,xt=0;for(const Rt of Ze)Z&&!Rt[0].equals(Rt[Rt.length-1])&&Rt.push(Rt[0]),xt+=Z?Rt.length-1:Rt.length;const Tt=this.segments.prepareSegment((Z?5:4)*xt,this.layoutVertexArray,this.indexArray);fe.footprintSegIdx<0&&(fe.footprintSegIdx=this.footprintSegments.length),fe.polygonSegIdx<0&&(fe.polygonSegIdx=this.polygonSegments.length);const kt={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Pt=new bn;if(Pt.vertexOffset=this.footprintVertices.length,Pt.indexOffset=3*this.footprintIndices.length,Pt.ringIndices=[],Z){const Rt=[],vt=[];Et=Tt.vertexLength;for(let Mt=0;Mt<Ze.length;Mt++){const Ft=Ze[Mt];Ft.length&&Mt!==0&&vt.push(Rt.length/2);const Lt=[];let fn,pn;fn=Ft[1].sub(Ft[0])._perp()._unit(),Pt.ringIndices.push(Ft.length-1);for(let nn=1;nn<Ft.length;nn++){const an=Ft[nn],kn=Ft[nn===Ft.length-1?1:nn+1],On=an.clone();if(Ve){pn=kn.sub(an)._perp()._unit();const cn=fn.add(pn)._unit(),Wn=Ve*Math.min(4,1/(fn.x*cn.x+fn.y*cn.y));On.x+=Wn*cn.x,On.y+=Wn*cn.y,On.x=Math.round(On.x),On.y=Math.round(On.y),fn=pn}if(!ue||Ve!==0&&!qe||Ue(Lt,On)||Lt.push(On),da(this.layoutVertexArray,On.x,On.y,0,0,1,1,0),this.wallMode){const cn=Se(nn,Ft);Bt(this.wallVertexArray,ve.joinNormals[nn],!cn)}Tt.vertexLength++,this.footprintVertices.emplaceBack(an.x,an.y),Rt.push(an.x,an.y),G&&Zt(this.layoutVertexExtArray,$.projectTilePoint(On.x,On.y,b),$.upVector(b,On.x,On.y))}ue&&(Ve===0||qe)&&(Lt.length!==0&&Ue(Lt,Lt[0])&&Lt.pop(),this.groundEffect.addData(Lt,rt,B))}const zt=this.wallMode?ve.indices:ac(Rt,vt);for(let Mt=0;Mt<zt.length;Mt+=3)this.footprintIndices.emplaceBack(Pt.vertexOffset+zt[Mt+0],Pt.vertexOffset+zt[Mt+1],Pt.vertexOffset+zt[Mt+2]),this.indexArray.emplaceBack(Et+zt[Mt],Et+zt[Mt+2],Et+zt[Mt+1]),Tt.primitiveLength++;Pt.indexCount+=zt.length,Pt.vertexCount+=this.footprintVertices.length-Pt.vertexOffset}for(let Rt=0;Rt<Ze.length;Rt++){const vt=Ze[Rt];se.startRing(fe,vt[0]);let zt=vt.length>4&&o9(vt[vt.length-2],vt[0],vt[1]),Mt=Ve?Cye(vt[vt.length-2],vt[0],vt[1],Ve):0;const Ft=[];let Lt,fn,pn;fn=vt[1].sub(vt[0])._perp()._unit();let nn=!0;for(let an=1,kn=0;an<vt.length;an++){let On=vt[an-1],cn=vt[an];const Wn=vt[an===vt.length-1?1:an+1];if(se.appendEdge(fe,cn,On),Gk(cn,On,rt)){Ve&&(fn=Wn.sub(cn)._perp()._unit(),nn=!nn);continue}const vr=cn.sub(On)._perp(),Zr=vr.x/(Math.abs(vr.x)+Math.abs(vr.y)),pr=vr.y>0?1:0,di=On.dist(cn);if(kn+di>32768&&(kn=0),Ve){pn=Wn.sub(cn)._perp()._unit();let ui=i9(On,cn,Wn,yC(fn,pn),Ve);isNaN(ui)&&(ui=0);const Vi=cn.sub(On)._unit();On=On.add(Vi.mult(Mt))._round(),cn=cn.add(Vi.mult(-ui))._round(),Mt=ui,fn=pn,ue&&this.zoom>=17&&(Ue(Ft,On)||Ft.push(On),Ue(Ft,cn)||Ft.push(cn))}const Lr=Tt.vertexLength,Ra=vt.length>4&&o9(On,cn,Wn);let $r=s9(kn,zt,nn);if(da(this.layoutVertexArray,On.x,On.y,Zr,pr,0,0,$r),da(this.layoutVertexArray,On.x,On.y,Zr,pr,0,1,$r),this.wallMode){const ui=Se(an-1,vt),Vi=ve.joinNormals[an-1];Bt(this.wallVertexArray,Vi,ui),Bt(this.wallVertexArray,Vi,ui)}if(kn+=di,$r=s9(kn,Ra,!nn),zt=Ra,da(this.layoutVertexArray,cn.x,cn.y,Zr,pr,0,0,$r),da(this.layoutVertexArray,cn.x,cn.y,Zr,pr,0,1,$r),this.wallMode){const ui=Se(an,vt),Vi=ve.joinNormals[an];Bt(this.wallVertexArray,Vi,ui),Bt(this.wallVertexArray,Vi,ui)}if(Tt.vertexLength+=4,this.indexArray.emplaceBack(Lr+0,Lr+1,Lr+2),this.indexArray.emplaceBack(Lr+1,Lr+3,Lr+2),Tt.primitiveLength+=2,Ve){const ui=Et+(an===1?vt.length-2:an-2),Vi=an===1?Et:ui+1;if(this.indexArray.emplaceBack(Lr+1,ui,Lr+3),this.indexArray.emplaceBack(ui,Vi,Lr+3),Tt.primitiveLength+=2,Lt===void 0&&(Lt=Lr),!Gk(Wn,vt[an],rt)){const ta=an===vt.length-1?Lt:Tt.vertexLength;this.indexArray.emplaceBack(Lr+2,Lr+3,ta),this.indexArray.emplaceBack(Lr+3,ta+1,ta),this.indexArray.emplaceBack(Lr+3,Vi,ta+1),Tt.primitiveLength+=3}nn=!nn}if(G){const ui=this.layoutVertexExtArray,Vi=$.projectTilePoint(On.x,On.y,b),ta=$.projectTilePoint(cn.x,cn.y,b),na=$.upVector(b,On.x,On.y),ka=$.upVector(b,cn.x,cn.y);Zt(ui,Vi,na),Zt(ui,Vi,na),Zt(ui,ta,ka),Zt(ui,ta,ka)}}Z&&(Et+=vt.length-1),ue&&Ve&&this.zoom>=17&&(Ft.length!==0&&Ue(Ft,Ft[0])&&Ft.pop(),this.groundEffect.addData(Ft,rt,B,Ve>0))}this.footprintSegments.push(Pt),kt.triangleCount=this.indexArray.length-kt.triangleArrayOffset,this.polygonSegments.push(kt),++fe.footprintSegLen,++fe.polygonSegLen}if(fe.vertexCount=this.layoutVertexArray.length-fe.vertexArrayOffset,fe.groundVertexCount=this.groundEffect.vertexArray.length-fe.groundVertexArrayOffset,fe.vertexCount!==0){if(fe.centroidXY=se.borders?cr:this.encodeCentroid(se,fe),this.centroidData.push(fe),se.borders){this.featuresOnBorder.push(se);const Ze=this.featuresOnBorder.length-1;for(let rt=0;rt<se.borders.length;rt++)se.borders[rt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[rt].push(Ze)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,w,A,b,P,void 0,this.worldview),this.groundEffect.addPaintPropertiesData(u,g,w,A,b,P,this.worldview),this.maxHeight=Math.max(this.maxHeight,pe)}}sortBorders(){for(let o=0;o<this.borderFeatureIndices.length;o++)this.borderFeatureIndices[o].sort((u,h)=>this.featuresOnBorder[u].borders[o][0]-this.featuresOnBorder[h].borders[o][0])}splitToSubtiles(){const o=[];for(let A=0;A<this.centroidData.length;A++){const D=this.centroidData[A],P=+(D.min.y+D.max.y>Jt),B=2*P+(+(D.min.x+D.max.x>Jt)^P);for(let j=0;j<D.polygonSegLen;j++){const $=D.polygonSegIdx+j;o.push({centroidIdx:A,subtile:B,polygonSegmentIdx:$,triangleSegmentIdx:this.polygonSegments[$].triangleSegIdx})}}const u=new Xa;o.sort((A,D)=>A.triangleSegmentIdx===D.triangleSegmentIdx?A.subtile-D.subtile:A.triangleSegmentIdx-D.triangleSegmentIdx);let h=0,g=0,b=0;for(const A of o){if(A.triangleSegmentIdx!==h)break;b++}const w=o.length;for(;g!==o.length;){h=o[g].triangleSegmentIdx;let A=0,D=g,P=g;for(let B=D;B<b&&o[B].subtile===A;B++)P++;for(;D!==b;){const B=o[D];A=B.subtile;const j=this.centroidData[B.centroidIdx].min.clone(),$=this.centroidData[B.centroidIdx].max.clone(),G={vertexOffset:this.segments.segments[h].vertexOffset,primitiveOffset:u.length,vertexLength:this.segments.segments[h].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let Z=D;Z<P;Z++){const se=o[Z],fe=this.polygonSegments[se.polygonSegmentIdx],ue=this.centroidData[se.centroidIdx].min,pe=this.centroidData[se.centroidIdx].max,ve=this.indexArray.uint16;for(let Se=fe.triangleArrayOffset;Se<fe.triangleArrayOffset+fe.triangleCount;Se++)u.emplaceBack(ve[3*Se],ve[3*Se+1],ve[3*Se+2]);G.primitiveLength+=fe.triangleCount,j.x=Math.min(j.x,ue.x),j.y=Math.min(j.y,ue.y),$.x=Math.max($.x,pe.x),$.y=Math.max($.y,pe.y)}G.primitiveLength>0&&this.triangleSubSegments.push({segment:G,min:j,max:$}),D=P;for(let Z=D;Z<b&&o[Z].subtile===o[D].subtile;Z++)P++}g=b;for(let B=g;B<w&&o[B].triangleSegmentIdx===o[g].triangleSegmentIdx;B++)b++}u._trim(),this.indexArray=u}getVisibleSegments(o,u,h){const g=new Ii;if(this.wallMode){for(const se of this.triangleSubSegments)g.segments.push(se.segment);return g}let b=0,w=0;const A=1<<o.canonical.z;if(u){const se=u.getMinMaxForTile(o);se&&(b=se.min,w=se.max)}w+=this.maxHeight;const D=o.toUnwrapped();let P;const B=[D.canonical.x/A+D.wrap,D.canonical.y/A],j=[(D.canonical.x+1)/A+D.wrap,(D.canonical.y+1)/A],$=(se,fe,ue)=>[se[0]*(1-ue[0])+fe[0]*ue[0],se[1]*(1-ue[1])+fe[1]*ue[1]],G=[],Z=[];for(const se of this.triangleSubSegments){G[0]=se.min.x/Jt,G[1]=se.min.y/Jt,Z[0]=se.max.x/Jt,Z[1]=se.max.y/Jt;const fe=$(B,j,G),ue=$(B,j,Z);if(new Gr([fe[0],fe[1],b],[ue[0],ue[1],w]).intersectsPrecise(h)===0){P&&(g.segments.push(P),P=void 0);continue}const pe=se.segment;P&&P.vertexOffset!==pe.vertexOffset&&(g.segments.push(P),P=void 0),P?(P.vertexLength+=pe.vertexLength,P.primitiveLength+=pe.primitiveLength):P={vertexOffset:pe.vertexOffset,primitiveLength:pe.primitiveLength,vertexLength:pe.vertexLength,primitiveOffset:pe.primitiveOffset,sortKey:void 0,vaos:{}}}return P&&g.segments.push(P),g}encodeCentroid(o,u){const h=o.centroid(),g=u.span(),b=Math.min(7,Math.round(g.x*this.tileToMeter/10)),w=Math.min(7,Math.round(g.y*this.tileToMeter/10));return new Vt(ze(h.x,1,8191)<<3|b,ze(h.y,1,8191)<<3|w)}encodeBorderCentroid(o){if(!o.borders)return new Vt(0,0);const u=o.borders,h=Number.MAX_VALUE;if(u[0][0]!==h||u[1][0]!==h){const g=u[0][0]!==h?0:1;return new Vt(6|(u[0][0]!==h?0:65528),(u[g][0]+u[g][1])/2<<3|6)}{const g=u[2][0]!==h?2:3;return new Vt((u[g][0]+u[g][1])/2<<3|6,6|(u[2][0]!==h?0:65528))}}showCentroid(o){const u=this.centroidData[o.centroidDataIndex];u.flags&=2147483647,u.centroidXY.x=0,u.centroidXY.y=0,this.writeCentroidToBuffer(u)}writeCentroidToBuffer(o){this.groundEffect.updateHiddenByLandmark(o);const u=o.vertexArrayOffset,h=o.vertexCount+o.vertexArrayOffset,g=o.flags&Sr?cr:o.centroidXY,b=this.centroidVertexArray.geta_centroid_pos0(u);if(this.centroidVertexArray.geta_centroid_pos1(u)!==g.y||b!==g.x){for(let w=u;w<h;++w)this.centroidVertexArray.emplace(w,g.x,g.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const o of this.centroidData)this.writeCentroidToBuffer(o)}updateReplacement(o,u,h){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const g=u.getReplacementRegionsForTile(o.toUnwrapped());if(m(this.activeReplacements,g))return;if(this.activeReplacements=g,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const w of this.centroidData)w.flags&=2147483647;const b=[];for(const w of this.activeReplacements){if(w.order<h)continue;const A=Math.max(1,Math.pow(2,w.footprintTileId.canonical.z-o.canonical.z));if(w.footprint.buildingIds)for(const D of this.centroidData)D.flags&Sr||w.min.x>D.max.x||D.min.x>w.max.x||w.min.y>D.max.y||D.min.y>w.max.y||w.footprint.buildingIds.has(D.buildingId)&&(D.flags|=Sr);else for(const D of this.centroidData)if(!(D.flags&Sr||w.min.x>D.max.x||D.min.x>w.max.x||w.min.y>D.max.y||D.min.y>w.max.y))for(let P=0;P<D.footprintSegLen;P++){const B=this.footprintSegments[D.footprintSegIdx+P];if(b.length=0,Dye(this.footprintVertices,B.vertexOffset,B.vertexCount,w.footprintTileId.canonical,o.canonical,b),L(w.footprint,b,this.footprintIndices.uint16,B.indexOffset,B.indexCount,-B.vertexOffset,-A)){D.flags|=Sr;break}}}for(const w of this.centroidData)this.writeCentroidToBuffer(w);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(o,u,h){let g=!1;for(let b=0;b<h.footprintSegLen;b++){const w=this.footprintSegments[h.footprintSegIdx+b];let A=0;for(const D of w.ringIndices){for(let P=A,B=D+A-1;P<D+A;B=P++){const j=this.footprintVertices.int16[2*(P+w.vertexOffset)+0],$=this.footprintVertices.int16[2*(P+w.vertexOffset)+1],G=this.footprintVertices.int16[2*(B+w.vertexOffset)+1];$>u!=G>u&&o<(this.footprintVertices.int16[2*(B+w.vertexOffset)+0]-j)*(u-$)/(G-$)+j&&(g=!g)}A=D}}return g}getHeightAtTileCoord(o,u){let h=Number.NEGATIVE_INFINITY,g=!0;const b=4*(o+Jt)*Jt+(u+Jt);if(this.partLookup.hasOwnProperty(b)){const w=this.partLookup[b];return w?{height:w.height,hidden:!!(w.flags&Sr)}:void 0}for(const w of this.centroidData)o>w.max.x||w.min.x>o||u>w.max.y||w.min.y>u||w.height<=h||this.footprintContainsPoint(o,u,w)&&(h=w.height,this.partLookup[b]=w,g=!!(w.flags&Sr));if(h!==Number.NEGATIVE_INFINITY)return{height:h,hidden:g};this.partLookup[b]=void 0}}function yC(c,o){const u=c.add(o)._unit();return c.x*u.x+c.y*u.y}function Cye(c,o,u,h){const g=o.sub(c)._perp()._unit(),b=u.sub(o)._perp()._unit();return i9(c,o,u,yC(g,b),h)}function i9(c,o,u,h,g){const b=Math.sqrt(1-h*h);return Math.min(c.dist(o)/3,o.dist(u)/3,g*b/h)}function Gk(c,o,u){return c.x<u[0].x&&o.x<u[0].x||c.x>u[1].x&&o.x>u[1].x||c.y<u[0].y&&o.y<u[0].y||c.y>u[1].y&&o.y>u[1].y}function a9(c,o){return c.x<o[0].x||c.x>o[1].x||c.y<o[0].y||c.y>o[1].y}function Mye(c){return c.every(o=>o.x<=0)||c.every(o=>o.x>=Jt)||c.every(o=>o.y<=0)||c.every(o=>o.y>=Jt)}function o9(c,o,u){if(c.x<0||c.x>=Jt||o.x<0||o.x>=Jt||u.x<0||u.x>=Jt)return!1;const h=u.sub(o),g=h.perp(),b=c.sub(o);return(h.x*b.x+h.y*b.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(b.x*b.x+b.y*b.y))>-.866&&g.x*b.x+g.y*b.y<0}function s9(c,o,u){const h=o?2|c:-3&c;return u?1|h:-2&h}function l9(){const c=Math.PI/32,o=Math.tan(c),u=Ge;return u*Math.sqrt(1+2*o*o)-u}function u9(c,o,u){const h=1<<u.z,g=wt(u.x/h),b=wt((u.x+1)/h),w=It(u.y/h),A=It((u.y+1)/h);return(function(D,P,B,j,$=0,G){const Z=[];if(!D.length||!B||!j)return Z;const se=(Ie,Ve)=>{for(const qe of Ie)Z.push({polygon:qe,bounds:Ve})},fe=Math.ceil(Math.log2(B)),ue=Math.ceil(Math.log2(j)),pe=fe-ue,ve=[];for(let Ie=0;Ie<Math.abs(pe);Ie++)ve.push(pe>0?0:1);for(let Ie=0;Ie<Math.min(fe,ue);Ie++)ve.push(0),ve.push(1);let Se=D;if(Se=yy(Se,P[0].y-$,P[1].y+$,1),Se=yy(Se,P[0].x-$,P[1].x+$,0),!Se.length)return Z;const ke=[];for(ve.length?ke.push({polygons:Se,bounds:P,depth:0}):se(Se,P);ke.length;){const Ie=ke.pop(),Ve=Ie.depth,qe=ve[Ve],Ue=Ie.bounds[0],Ze=Ie.bounds[1],rt=qe===0?Ue.x:Ue.y,Et=qe===0?Ze.x:Ze.y,xt=G?G(qe,rt,Et):.5*(rt+Et),Tt=yy(Ie.polygons,rt-$,xt+$,qe),kt=yy(Ie.polygons,xt-$,Et+$,qe);if(Tt.length){const Pt=[Ue,new Vt(qe===0?xt:Ze.x,qe===1?xt:Ze.y)];ve.length>Ve+1?ke.push({polygons:Tt,bounds:Pt,depth:Ve+1}):se(Tt,Pt)}if(kt.length){const Pt=[new Vt(qe===0?xt:Ue.x,qe===1?xt:Ue.y),Ze];ve.length>Ve+1?ke.push({polygons:kt,bounds:Pt,depth:Ve+1}):se(kt,Pt)}}return Z})(c,o,Math.ceil((b-g)/11.25),Math.ceil((w-A)/11.25),1,(D,P,B)=>{if(D===0)return .5*(P+B);{const j=It((u.y+P/Jt)/h);return(dt(.5*(It((u.y+B/Jt)/h)+j))*h-u.y)*Jt}})}function Dye(c,o,u,h,g,b){const w=Math.pow(2,h.z-g.z);for(let A=0;A<u;A++){let D=c.int16[2*(A+o)+0],P=c.int16[2*(A+o)+1];D=(D+g.x*Jt)*w-h.x*Jt,P=(P+g.y*Jt)*w-h.y*Jt,b.push(new Vt(D,P))}}let c9,f9;Kt(Nf,"FillExtrusionBucket",{omit:["layers","features"]}),Kt(Dr,"PartData"),Kt(bn,"FootprintSegment"),Kt(ea,"BorderCentroidData"),Kt(Zi,"GroundEffect");class bb extends Vt{constructor(o,u,h){super(o,u),this.z=h}}class h9 extends bb{constructor(o,u,h,g){super(o,u,h),this.w=g}}function d9(c,o,u,h){const g=u==="x"?"y":"x",b=(h-c[u])/(o[u]-c[u]);c[g]=Math.round(c[g]+(o[g]-c[g])*b),c[u]=h,c.hasOwnProperty("z")&&(c.z=Vn(c.z,o.z,b)),c.hasOwnProperty("w")&&(c.w=Vn(c.w,o.w,b))}function p9(c,o,u,h){const g=u,b=h;for(const w of["x","y"]){let A=c,D=o;A[w]>=D[w]&&(A=o,D=c),A[w]<g&&D[w]>g&&d9(A,D,w,g),A[w]<b&&D[w]>b&&d9(D,A,w,b)}}function _C(c,o,u,h,g,b){const w=[];for(let A=0;A<c.length;A++){const D=c[A];let P;const B=w.length;let j=0;for(let $=0;$<D.length-1;$++){let G=D[$],Z=D[$+1],se=0;const fe=j;let ue,pe;b&&(se=Math.hypot(Z.x-G.x,Z.y-G.y),j+=se,ue=G,pe=Z),G.x<o&&Z.x<o||(G.x<o?G=new Vt(o,G.y+(o-G.x)/(Z.x-G.x)*(Z.y-G.y))._round():Z.x<o&&(Z=new Vt(o,G.y+(o-G.x)/(Z.x-G.x)*(Z.y-G.y))._round()),G.y<u&&Z.y<u||(G.y<u?G=new Vt(G.x+(u-G.y)/(Z.y-G.y)*(Z.x-G.x),u)._round():Z.y<u&&(Z=new Vt(G.x+(u-G.y)/(Z.y-G.y)*(Z.x-G.x),u)._round()),G.x>=h&&Z.x>=h||(G.x>=h?G=new Vt(h,G.y+(h-G.x)/(Z.x-G.x)*(Z.y-G.y))._round():Z.x>=h&&(Z=new Vt(h,G.y+(h-G.x)/(Z.x-G.x)*(Z.y-G.y))._round()),G.y>=g&&Z.y>=g||(G.y>=g?G=new Vt(G.x+(g-G.y)/(Z.y-G.y)*(Z.x-G.x),g)._round():Z.y>=g&&(Z=new Vt(G.x+(g-G.y)/(Z.y-G.y)*(Z.x-G.x),g)._round()),P&&G.equals(P[P.length-1])||(P=[G],w.push(P),b&&b.push({progress:{min:fe+m9(ue,pe,G)*se,max:1},parentIndex:A,prevPoint:ue,nextPoint:pe})),P.push(Z),b&&(b[b.length-1].progress.max=fe+m9(ue,pe,Z)*se,b[b.length-1].nextPoint=pe)))))}if(b&&j>0)for(let $=B;$<w.length;$++)b[$].progress.min/=j,b[$].progress.max/=j}return w}function Iye(c,o,u,h,g){if(c.length<2)return void h.push(c);const b=[];for(;o.valid();){const[P,B]=o.get();for(let j=0;j<c.length-1;j++){const $=c[j],G=c[j+1],Z=xm($,G,P,B);if(Z){const[se]=Z,fe=new Vt(Vn($.x,G.x,se),Vn($.y,G.y,se));b.push({t:j+se,distance:0,point:fe})}}o.next()}if(b.length===0)return void h.push(c);b.sort((P,B)=>P.t-B.t);let w=0,A=0,D=[];for(h.push(D);w!==c.length;){if(A===b.length){for(;w!==c.length;)D.length!==0&&D[D.length-1].equals(c[w])||D.push(c[w]),w++;break}b[A].t<=w?(D.length!==0&&D[D.length-1].equals(b[A].point)||D.push(b[A].point),Math.trunc(b[A].t),A++):(D.length!==0&&D[D.length-1].equals(c[w])||D.push(c[w]),w++)}}function m9(c,o,u){return c.x!==o.x?(u.x-c.x)/(o.x-c.x):c.y!==o.y?(u.y-c.y)/(o.y-c.y):0}function qT(c,o){return c.x*o.x+c.y*o.y}function g9(c,o){if(c.length===1){let u=0;const h=o[u++];let g;for(;!g||h.equals(g);)if(g=o[u++],!g)return 1/0;for(;u<o.length;u++){const b=o[u],w=c[0],A=g.sub(h),D=b.sub(h),P=w.sub(h),B=qT(A,A),j=qT(A,D),$=qT(D,D),G=qT(P,A),Z=qT(P,D),se=B*$-j*j,fe=($*G-j*Z)/se,ue=(B*Z-j*G)/se,pe=h.z*(1-fe-ue)+g.z*fe+b.z*ue;if(isFinite(pe))return pe}return 1/0}{let u=1/0;for(const h of o)u=Math.min(u,h.z);return u}}function y9(c,o,u){let h=1/0;Si(u,o)&&(h=g9(u,o[0]));for(let g=0;g<o.length;g++){const b=o[g],w=c[g];for(let A=0;A<b.length-1;A++){const D=b[A],P=[D,b[A+1],w[A+1],w[A],D];$i(u,P)&&(h=Math.min(h,g9(u,P)))}}return h!==1/0&&h}function _9(c,o,u,h,g,b,w,A,D,P,B){return c.projection.name==="globe"?(function(j,$,G,Z,se,fe,ue,pe,ve,Se,ke){const Ie=[],Ve=[],qe=j.projection.upVectorScale(ke,j.center.lat,j.worldSize).metersToTile,Ue=[0,0,0,1],Ze=[0,0,0,1],rt=(xt,Tt,kt,Pt)=>{xt[0]=Tt,xt[1]=kt,xt[2]=Pt,xt[3]=1},Et=l9();G>0&&(G+=Et),Z+=Et;for(const xt of $){const Tt=[],kt=[];for(const Pt of xt){const Rt=Pt.x+se.x,vt=Pt.y+se.y,zt=j.projection.projectTilePoint(Rt,vt,ke),Mt=j.projection.upVector(ke,Pt.x,Pt.y);let Ft=G,Lt=Z;if(ue){const fn=v9(Rt,vt,G,Z,ue,pe,ve,Se);Ft+=fn.base,Lt+=fn.top}G!==0?rt(Ue,zt.x+Mt[0]*qe*Ft,zt.y+Mt[1]*qe*Ft,zt.z+Mt[2]*qe*Ft):rt(Ue,zt.x,zt.y,zt.z),rt(Ze,zt.x+Mt[0]*qe*Lt,zt.y+Mt[1]*qe*Lt,zt.z+Mt[2]*qe*Lt),Ct(Ue,Ue,fe),Ct(Ze,Ze,fe),Tt.push(new bb(Ue[0],Ue[1],Ue[2])),kt.push(new bb(Ze[0],Ze[1],Ze[2]))}Ie.push(Tt),Ve.push(kt)}return[Ie,Ve]})(c,o,u,h,g,b,w,A,D,P,B):w?(function(j,$,G,Z,se,fe,ue,pe,ve){const Se=[],ke=[],Ie=[0,0,0,1];for(const Ve of j){const qe=[],Ue=[];for(const Ze of Ve){const rt=Ze.x+Z.x,Et=Ze.y+Z.y,xt=v9(rt,Et,$,G,fe,ue,pe,ve);Ie[0]=rt,Ie[1]=Et,Ie[2]=xt.base,Ie[3]=1,hi(Ie,Ie,se),Ie[3]=Math.max(Ie[3],1e-5);const Tt=new bb(Ie[0]/Ie[3],Ie[1]/Ie[3],Ie[2]/Ie[3]);Ie[0]=rt,Ie[1]=Et,Ie[2]=xt.top,Ie[3]=1,hi(Ie,Ie,se),Ie[3]=Math.max(Ie[3],1e-5);const kt=new bb(Ie[0]/Ie[3],Ie[1]/Ie[3],Ie[2]/Ie[3]);qe.push(Tt),Ue.push(kt)}Se.push(qe),ke.push(Ue)}return[Se,ke]})(o,u,h,g,b,w,A,D,P):(function(j,$,G,Z,se){const fe=[],ue=[],pe=se[8]*$,ve=se[9]*$,Se=se[10]*$,ke=se[11]*$,Ie=se[8]*G,Ve=se[9]*G,qe=se[10]*G,Ue=se[11]*G;for(const Ze of j){const rt=[],Et=[];for(const xt of Ze){const Tt=xt.x+Z.x,kt=xt.y+Z.y,Pt=se[0]*Tt+se[4]*kt+se[12],Rt=se[1]*Tt+se[5]*kt+se[13],vt=se[2]*Tt+se[6]*kt+se[14],zt=se[3]*Tt+se[7]*kt+se[15],Mt=Pt+pe,Ft=Rt+ve,Lt=vt+Se,fn=Math.max(zt+ke,1e-5),pn=Pt+Ie,nn=Rt+Ve,an=vt+qe,kn=Math.max(zt+Ue,1e-5);rt.push(new bb(Mt/fn,Ft/fn,Lt/fn)),Et.push(new bb(pn/kn,nn/kn,an/kn))}fe.push(rt),ue.push(Et)}return[fe,ue]})(o,u,h,g,b)}function v9(c,o,u,h,g,b,w,A){const D=w*g.getElevationAt(c,o,!0,!0),P=b[0]!==0,B=P?b[1]===0?w*(b[0]/7-450):w*(function(j,$,G){const Z=Math.floor($[0]/8),se=Math.floor($[1]/8),fe=10*($[0]-8*Z),ue=10*($[1]-8*se),pe=j.getElevationAt(Z,se,!0,!0),ve=j.getMeterToDEM(G),Se=Math.floor(.5*(fe*ve-1)),ke=Math.floor(.5*(ue*ve-1)),Ie=j.tileCoordToPixel(Z,se),Ve=2*Se+1,qe=2*ke+1,Ue=(function(kt,Pt,Rt,vt,zt){return[kt.getElevationAtPixel(Pt,Rt,!0),kt.getElevationAtPixel(Pt+zt,Rt,!0),kt.getElevationAtPixel(Pt,Rt+zt,!0),kt.getElevationAtPixel(Pt+vt,Rt+zt,!0)]})(j,Ie.x-Se,Ie.y-ke,Ve,qe),Ze=Math.abs(Ue[0]-Ue[1]),rt=Math.abs(Ue[2]-Ue[3]),Et=Math.abs(Ue[0]-Ue[2])+Math.abs(Ue[1]-Ue[3]),xt=Math.min(.25,.5*ve*(Ze+rt)/Ve),Tt=Math.min(.25,.5*ve*Et/qe);return pe+Math.max(xt*fe,Tt*ue)})(g,b,A):D;return{base:D+(u===0?-1:u),top:P?Math.max(B+h,D+u+2):D+h}}class Pye{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Rye{constructor(){this.tasks={},this.taskQueue=[],hn(["process"],this),this.invoker=new Pye(this.process),this.nextId=0}add(o,u){const h=this.nextId++,g=(function({type:b,isSymbolTile:w,zoom:A}){return A=A||0,b==="message"?0:b!=="maybePrepare"||w?b!=="parseTile"||w?b==="parseTile"&&w?300-A:b==="maybePrepare"&&w?400-A:500:200-A:100-A})(u);if(g===0){try{o()}finally{}return null}return this.tasks[h]={fn:o,metadata:u,priority:g,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const u=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let o=null,u=1/0;for(let g=0;g<this.taskQueue.length;g++){const b=this.tasks[this.taskQueue[g]];b.priority<u&&(u=b.priority,o=g)}if(o===null)return null;const h=this.taskQueue[o];return this.taskQueue.splice(o,1),h}remove(){this.invoker.remove()}}class b9{constructor(o,u,h){this.target=o,this.parent=u,this.mapId=h,this.callbacks={},this.cancelCallbacks={},hn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new Rye}send(o,u,h,g,b=!1,w){const A=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(h.metadata=w,this.callbacks[A]=h);const D=new Set;return this.target.postMessage({id:A,type:o,hasCallback:!!h,targetMapId:g,mustQueue:b,sourceMapId:this.mapId,data:fa(u,D)},D),{cancel:()=>{h&&delete this.callbacks[A],this.target.postMessage({id:A,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(o){const u=o.data;if(!u)return;const h=u.id;if(h&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){const g=this.cancelCallbacks[h];delete this.cancelCallbacks[h],g&&g.cancel()}else if(u.mustQueue||_a(self)){const g=this.callbacks[h],b=this.scheduler.add(()=>this.processTask(h,u),g&&g.metadata||{type:"message"});b&&(this.cancelCallbacks[h]=b)}else this.processTask(h,u)}processTask(o,u){if(delete this.cancelCallbacks[o],u.type==="<response>"){const h=this.callbacks[o];delete this.callbacks[o],h&&(u.error?h(pu(u.error)):h(null,pu(u.data)))}else{const h=new Set,g=u.hasCallback?(w,A)=>{this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:w?fa(w):null,data:fa(A,h)},h)}:()=>{},b=pu(u.data);if(this.parent[u.type])this.parent[u.type](u.sourceMapId,b,g);else if(this.parent.getWorkerSource){const w=u.type.split("."),{source:A,scope:D}=b;this.parent.getWorkerSource(u.sourceMapId,w[0],A,D)[w[1]](b,g)}else g(new Error(`Could not find function ${u.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var HT={workerUrl:"",workerClass:null,workerParams:void 0};function kye(c){return HT.workerClass!=null?new HT.workerClass:new self.Worker(HT.workerUrl,Object.assign({name:c},HT.workerParams))}const Yk="mapboxgl_preloaded_worker_pool";class xb{constructor(o){this.active={},this.name=o}acquire(o,u=xb.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<u;){const h=kye(`${this.name||""}WorkerPool: ${o}-${this.workers.length}`);this.workers.push(h)}return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.workers&&this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Yk]}numActive(){return Object.keys(this.active).length}}xb.workerCount=2;class D1{constructor(o,u,h="Worker",g=xb.workerCount){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=Gt();const b=this.workerPool.acquire(this.id,g);for(let w=0;w<b.length;w++){const A=new D1.Actor(b[w],u,this.id);A.name=`${h} ${w}`,this.actors.push(A)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,u,h){lt(this.actors,(g,b)=>{g.send(o,u,b)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}let GT,Wk;function vC(){return GT||(GT=new xb),GT}D1.Actor=b9;const Xk=4096;class Lye{constructor(o){this.module=o,this.memoryStack=this.module.malloc(Xk),this.memoryStackNextFree=this.memoryStack}createIntArray(o){const u=this.memoryStackNextFree;return this.memoryStackNextFree+=o.length*Int32Array.BYTES_PER_ELEMENT,this.memoryStackNextFree-this.memoryStack>Xk?-1:(new Int32Array(this.module.heap32.buffer,u,o.length).set(o),u)}createFloatArray(o){const u=this.memoryStackNextFree;return this.memoryStackNextFree+=o.length*Float32Array.BYTES_PER_ELEMENT,this.memoryStackNextFree-this.memoryStack>Xk?-1:(new Float32Array(this.module.heapF32.buffer,u,o.length).set(o),u)}readStringBuffer(o){let u="";for(;this.module.heapU8[o]!==0;)u+=String.fromCharCode(this.module.heapU8[o]),++o;return u}setStyle(o){const u=o.normalScale;this.module.setStyle(u[0],u[1],u[2],o.tileToMeters)}setAOOptions(o,u){this.module.setAOOptions(o?1:0,u)}setMetricOptions(o,u){this.module.setMetricOptions(o?1:0,u)}setStructuralOptions(o){this.module.setStructuralOptions(o?1:0)}setFacadeOptions(o,u){this.module.setFacadeOptions(o,u?1:0)}setFauxFacadeOptions(o,u,h){this.module.setFauxFacadeOptions(o?1:0,u?1:0,h)}setFacadeClassifierOptions(o){this.module.setFacadeClassifierOptions(o)}generateMesh(o,u){this.memoryStackNextFree=this.memoryStack;for(const A of o){const D=this.createIntArray(A.ringIndices),P=this.createFloatArray(A.coordinates);if(D===-1||P===-1)return`building_gen: Out of stack memory: ${this.memoryStackNextFree-this.memoryStack}/4096`;this.module.addFeature(A.id,A.sourceId,A.minHeight,A.height,A.roofType,P,D,A.ringIndices.length-1)}for(const A of u){let D;D=A.entrances?JSON.parse(A.entrances):[];const P=this.createFloatArray(D),B=this.createFloatArray(A.coordinates);if(P===-1||B===-1)return`building_gen: Out of stack memory: ${this.memoryStackNextFree-this.memoryStack}/4096`;this.module.addFacade(A.sourceId,A.crossPerc,A.distanceToRoad,P,D.length,B,A.coordinates.length)}if(!this.module.generateMesh()){const A=this.module.getLastError();return this.readStringBuffer(A)}const h=this.module.getMeshCount(),g=new Array(h);for(let A=0;A<h;A++){const D=this.module.getPositionsPtr(A),P=this.module.getPositionsLength(A),B=new Float32Array(this.module.heapF32.buffer,D,P),j=this.module.getNormalsPtr(A),$=this.module.getNormalsLength(A),G=new Float32Array(this.module.heapF32.buffer,j,$),Z=this.module.getAOPtr(A),se=this.module.getAOLength(A),fe=new Float32Array(this.module.heapF32.buffer,Z,se),ue=this.module.getUVPtr(A),pe=this.module.getUVLength(A),ve=new Float32Array(this.module.heapF32.buffer,ue,pe),Se=this.module.getFauxFacadePtr(A),ke=this.module.getFauxFacadeLength(A),Ie=new Uint8Array(this.module.heapU8.buffer,Se,ke),Ve=this.module.getIndicesPtr(A),qe=this.module.getIndicesLength(A),Ue=new Int16Array(this.module.heap16.buffer,Ve,qe),Ze=this.module.getBuildingPart(A);g[A]={positions:B,normals:G,ao:fe,uv:ve,isFauxFacade:Ie,indices:Ue,buildingPart:Ze}}const b=this.module.getRingCount(),w=[];for(let A=0;A<b;A++){const D=this.module.getRingPtr(A),P=this.module.getRingLength(A),B=new Float32Array(this.module.heapF32.buffer,D,P);w.push(B)}return{meshes:g,outerRingLength:this.module.getOuterRingLength(),modifiedPolygonRings:w}}}let YT,Zk,np,I1,Kk,P1=null,R1=null,x9=null,bC=null;function w9(){return _a(self)&&self.worker.dracoUrl?self.worker.dracoUrl:Zk||Ja.DRACO_URL}function S9(){if(_a(self)&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(I1)return I1;const c=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return I1=WebAssembly.validate(c)?Ja.MESHOPT_SIMD_URL:Ja.MESHOPT_URL,I1}function zye(){return bC}const T9=5120,E9=5121,A9=5122,O9=5123,C9=5125,M9=5126,xC={[T9]:Int8Array,[E9]:Uint8Array,[A9]:Int16Array,[O9]:Uint16Array,[C9]:Uint32Array,[M9]:Float32Array},Fye={[T9]:"DT_INT8",[E9]:"DT_UINT8",[A9]:"DT_INT16",[O9]:"DT_UINT16",[C9]:"DT_UINT32",[M9]:"DT_FLOAT32"},WT={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function D9(c,o,u){const h=u.json.bufferViews.length,g=u.buffers.length;o.bufferView=h,u.json.bufferViews[h]={buffer:g,byteLength:c.byteLength},u.buffers[g]=c}const Qk="KHR_draco_mesh_compression";function Nye(c,o){const u=c.extensions&&c.extensions[Qk];if(!u)return;const h=new np.Decoder,g=k9(o,u.bufferView),b=new np.Mesh;if(!h.DecodeArrayToMesh(g,g.byteLength,b))throw new Error("Failed to decode Draco mesh");const w=o.json.accessors[c.indices],A=xC[w.componentType],D=w.count*A.BYTES_PER_ELEMENT,P=np._malloc(D);A===Uint16Array?h.GetTrianglesUInt16Array(b,D,P):h.GetTrianglesUInt32Array(b,D,P),D9(np.memory.buffer.slice(P,P+D),w,o),np._free(P);for(const B of Object.keys(u.attributes)){const j=h.GetAttributeByUniqueId(b,u.attributes[B]),$=o.json.accessors[c.attributes[B]],G=Fye[$.componentType],Z=$.count*WT[$.type]*xC[$.componentType].BYTES_PER_ELEMENT,se=np._malloc(Z);h.GetAttributeDataArrayForAllPoints(b,j,np[G],Z,se),D9(np.memory.buffer.slice(se,se+Z),$,o),np._free(se)}h.destroy(),b.destroy(),delete c.extensions[Qk]}const wC="EXT_meshopt_compression";function Bye(c,o){if(!c.extensions||!c.extensions[wC])return;const u=c.extensions[wC],h=new Uint8Array(o.buffers[u.buffer],u.byteOffset||0,u.byteLength||0),g=new Uint8Array(u.count*u.byteStride);Kk.decodeGltfBuffer(g,u.count,u.byteStride,h,u.mode,u.filter),c.buffer=o.buffers.length,c.byteOffset=0,o.buffers[c.buffer]=g.buffer,delete c.extensions[wC]}const I9=1179937895,P9=new TextDecoder("utf8");function R9(c,o){return new URL(c,o).href}function jye(c,o,u,h){return fetch(R9(c.uri,h)).then(g=>g.arrayBuffer()).then(g=>{o.buffers[u]=g})}function k9(c,o){const u=c.json.bufferViews[o];return new Uint8Array(c.buffers[u.buffer],u.byteOffset||0,u.byteLength)}function Uye(c,o,u,h){if(c.uri){const g=R9(c.uri,h);return fetch(g).then(b=>b.blob()).then(b=>createImageBitmap(b)).then(b=>{o.images[u]=b})}if(c.bufferView!==void 0){const g=k9(o,c.bufferView),b=new Blob([g],{type:c.mimeType});return createImageBitmap(b).then(w=>{o.images[u]=w})}}function L9(c,o=0,u){const h={json:null,images:[],buffers:[]};if(new Uint32Array(c,o,1)[0]===I9){const B=new Uint32Array(c,o);let j=2;const $=(B[j++]>>2)-3,G=B[j++]>>2;if(j++,h.json=JSON.parse(P9.decode(B.subarray(j,j+G))),j+=G,j<$){const Z=B[j++];j++;const se=o+(j<<2);h.buffers[0]=c.slice(se,se+Z)}}else h.json=JSON.parse(P9.decode(new Uint8Array(c,o)));const{buffers:g,images:b,meshes:w,extensionsUsed:A,bufferViews:D}=h.json;let P=Promise.resolve();if(g){const B=[];for(let j=0;j<g.length;j++){const $=g[j];$.uri?B.push(jye($,h,j,u)):h.buffers[j]||(h.buffers[j]=null)}P=Promise.all(B)}return P.then(()=>{const B=[],j=A&&A.includes(Qk),$=A&&A.includes(wC);if(j&&B.push((function(){if(!np)return YT??(YT=(function(G){let Z,se=null;function fe(){Z=new Uint8Array(se.buffer)}function ue(){throw new Error("Unexpected Draco error.")}const pe={a:{a:ue,d:function(ve,Se,ke){return Z.copyWithin(ve,Se,Se+ke)},c:function(ve){const Se=Z.length,ke=Math.max(ve>>>0,Math.ceil(1.2*Se)),Ie=Math.ceil((ke-Se)/65536);try{return se.grow(Ie),fe(),!0}catch{return!1}},b:ue}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(G,pe):G.then(ve=>ve.arrayBuffer()).then(ve=>WebAssembly.instantiate(ve,pe))).then(ve=>{const{Rb:Se,Qb:ke,P:Ie,T:Ve,X:qe,Ja:Ue,La:Ze,Qa:rt,Va:Et,Wa:xt,eb:Tt,jb:kt,f:Pt,e:Rt,yb:vt,zb:zt,Ab:Mt,Bb:Ft,Db:Lt,Gb:fn}=ve.instance.exports;se=Rt;const pn=(()=>{let nn=0,an=0,kn=0,On=0;return cn=>{kn&&(Se(On),Se(nn),an+=kn,kn=nn=0),nn||(an+=128,nn=ke(an));const Wn=cn.length+7&-8;let vr=nn;Wn>=an&&(kn=Wn,vr=On=ke(Wn));for(let Zr=0;Zr<cn.length;Zr++)Z[vr+Zr]=cn[Zr];return vr}})();return fe(),Pt(),{memory:Rt,_free:Se,_malloc:ke,Mesh:class{constructor(){this.ptr=Ie()}destroy(){Ve(this.ptr)}},Decoder:class{constructor(){this.ptr=Ue()}destroy(){kt(this.ptr)}DecodeArrayToMesh(nn,an,kn){const On=pn(nn),cn=Ze(this.ptr,On,an,kn.ptr);return!!qe(cn)}GetAttributeByUniqueId(nn,an){return{ptr:rt(this.ptr,nn.ptr,an)}}GetTrianglesUInt16Array(nn,an,kn){Et(this.ptr,nn.ptr,an,kn)}GetTrianglesUInt32Array(nn,an,kn){xt(this.ptr,nn.ptr,an,kn)}GetAttributeDataArrayForAllPoints(nn,an,kn,On,cn){Tt(this.ptr,nn.ptr,an.ptr,kn,On,cn)}},DT_INT8:vt(),DT_UINT8:zt(),DT_INT16:Mt(),DT_UINT16:Ft(),DT_UINT32:Lt(),DT_FLOAT32:fn()}})})(fetch(w9())),YT.then(G=>{np=G,YT=void 0}))})()),$&&B.push((function(){if(Kk)return;const G=(function(Z){let se;const fe=WebAssembly.instantiateStreaming(Z,{}).then(ve=>{se=ve.instance,se.exports.__wasm_call_ctors()}),ue={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},pe={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:fe,supported:!0,decodeGltfBuffer(ve,Se,ke,Ie,Ve,qe){(function(Ue,Ze,rt,Et,xt,Tt,kt){const Pt=Ue.exports.sbrk,Rt=Et+3&-4,vt=Pt(Rt*xt),zt=Pt(Tt.length),Mt=new Uint8Array(Ue.exports.memory.buffer);Mt.set(Tt,zt);const Ft=Ze(vt,Et,xt,zt,Tt.length);if(Ft===0&&kt&&kt(vt,Rt,xt),rt.set(Mt.subarray(vt,vt+Et*xt)),Pt(vt-Pt(0)),Ft!==0)throw new Error(`Malformed buffer data: ${Ft}`)})(se,se.exports[pe[Ve]],ve,Se,ke,Ie,se.exports[ue[qe]])}}})(fetch(S9()));return G.ready.then(()=>{Kk=G})})()),b)for(let G=0;G<b.length;G++)B.push(Uye(b[G],h,G,u));return(B.length?Promise.all(B):Promise.resolve()).then(()=>{if(j&&w)for(const{primitives:G}of w)for(const Z of G)Nye(Z,h);if($&&w&&D)for(const G of D)Bye(G,h);return h})})}function z9(c){return fetch(c).then(o=>o.arrayBuffer()).then(o=>L9(o,0,c))}function Jk(c){switch(c){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function eL(c){switch(c){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class tL{constructor(o,u,h,g){this.context=o,this.format=h,this.useMipmap=g&&g.useMipmap,this.texture=o.gl.createTexture(),this.update(u,{premultiply:g&&g.premultiply})}update(o,u){const h=o&&o instanceof HTMLVideoElement&&o.width===0?o.videoWidth:o.width,g=o&&o instanceof HTMLVideoElement&&o.height===0?o.videoHeight:o.height,{context:b}=this,{gl:w}=b,{x:A,y:D}=u&&u.position?u.position:{x:0,y:0},P=A+h,B=D+g;!this.size||this.size[0]===P&&this.size[1]===B||(w.bindTexture(w.TEXTURE_2D,null),w.deleteTexture(this.texture),this.texture=w.createTexture(),this.size=null),w.bindTexture(w.TEXTURE_2D,this.texture),b.pixelStoreUnpackFlipY.set(!1),b.pixelStoreUnpack.set(1),b.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA8&&(!u||u.premultiply!==!1));const j=o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||ImageBitmap&&o instanceof ImageBitmap;if(!this.size&&P>0&&B>0){const $=this.useMipmap?Math.floor(Math.log2(Math.max(P,B)))+1:1;w.texStorage2D(w.TEXTURE_2D,$,this.format,P,B),this.size=[P,B]}this.size&&(j?w.texSubImage2D(w.TEXTURE_2D,0,A,D,Jk(this.format),eL(this.format),o):"data"in o&&o.data&&w.texSubImage2D(w.TEXTURE_2D,0,A,D,h,g,Jk(this.format),eL(this.format),o.data)),this.useMipmap&&w.generateMipmap(w.TEXTURE_2D)}bind(o,u,h=!1){const{context:g}=this,{gl:b}=g;b.bindTexture(b.TEXTURE_2D,this.texture),o!==this.minFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,o),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,this.useMipmap&&!h?o===b.NEAREST?b.NEAREST_MIPMAP_NEAREST:b.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),u!==this.wrapS&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,u),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,u),this.wrapS=u)}bindExtraParam(o,u,h,g,b){const{context:w}=this,{gl:A}=w;A.bindTexture(A.TEXTURE_2D,this.texture),u!==this.magFilter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,u),this.magFilter=u),o!==this.minFilter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,this.useMipmap?o===A.NEAREST?A.NEAREST_MIPMAP_NEAREST:A.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),h!==this.wrapS&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,h),this.wrapS=h),g!==this.wrapT&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,g),this.wrapT=g),b!==this.compareMode&&(b?(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_COMPARE_MODE,A.COMPARE_REF_TO_TEXTURE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_COMPARE_FUNC,b)):A.texParameteri(A.TEXTURE_2D,A.TEXTURE_COMPARE_MODE,A.NONE),this.compareMode=b)}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class XT{constructor(o,u){this.context=o,this.texture=u}bind(o,u){const{context:h}=this,{gl:g}=h;g.bindTexture(g.TEXTURE_2D,this.texture),o!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,o),this.minFilter=o),u!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,u),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,u),this.wrapS=u)}}const $ye=gr([{name:"a_pos_3f",components:3,type:"Float32"}]),Vye=gr([{name:"a_color_3f",components:3,type:"Float32"}]),qye=gr([{name:"a_color_4f",components:4,type:"Float32"}]),Hye=gr([{name:"a_uv_2f",components:2,type:"Float32"}]),Gye=gr([{name:"a_normal_3f",components:3,type:"Float32"}]),Yye=gr([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),Wye=gr([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);function F9(c,o){const u=SC(c.projection,c.zoom,c.width,c.height),h=(function(b,w,A,D,P){const B=new Re(A.lng-180*wv,A.lat),j=new Re(A.lng+180*wv,A.lat),$=b.project(B.lng,B.lat),G=b.project(j.lng,j.lat),Z=-Math.atan2(G.y-$.y,G.x-$.x),se=tn.fromLngLat(A);se.y=ze(se.y,-1+wv,1-wv);const fe=se.toLngLat(),ue=b.project(fe.lng,fe.lat),pe=tn.fromLngLat(fe);pe.x+=wv;const ve=pe.toLngLat(),Se=b.project(ve.lng,ve.lat),ke=B9(Se.x-ue.x,Se.y-ue.y,Z),Ie=tn.fromLngLat(fe);Ie.y+=wv;const Ve=Ie.toLngLat(),qe=b.project(Ve.lng,Ve.lat),Ue=B9(qe.x-ue.x,qe.y-ue.y,Z),Ze=Math.abs(ke.x)/Math.abs(Ue.y),rt=k([]);te(rt,rt,-Z*(1-(P?0:D)));const Et=k([]);return ie(Et,Et,[1,1-(1-Ze)*D,1]),Et[4]=-Ue.x/Ue.y*D,te(Et,Et,Z),K(Et,rt,Et),Et})(c.projection,0,c.center,u,o),g=N9(c);return ie(h,h,[g,g,1]),h}function N9(c){const o=c.projection,u=SC(c.projection,c.zoom,c.width,c.height),h=nL(o,c.center),g=nL(o,Re.convert(o.center));return Math.pow(2,h*u+(1-u)*g)}function SC(c,o,u,h,g=1/0){const b=c.range;if(!b)return 0;const w=Math.min(g,Math.max(u,h)),A=Math.log2(w/1024);return ot(b[0]+A,b[1]+A,o)}const wv=1/4e4;function nL(c,o){const u=ze(o.lat,-85.051129,tt),h=new Re(o.lng-180*wv,u),g=new Re(o.lng+180*wv,u),b=c.project(h.lng,u),w=c.project(g.lng,u),A=tn.fromLngLat(h),D=tn.fromLngLat(g),P=w.x-b.x,B=w.y-b.y,j=D.x-A.x,$=D.y-A.y,G=Math.sqrt((j*j+$*$)/(P*P+B*B));return Math.log2(G)}function B9(c,o,u){const h=Math.cos(u),g=Math.sin(u);return{x:c*h-o*g,y:c*g+o*h}}function j9(c,o,u){k(c),te(c,c,Ar(o[2])),Q(c,c,Ar(o[0])),W(c,c,Ar(o[1])),ie(c,c,u),K(c,c,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function TC(c,o,u,h,g,b,w,A){const D=[u[0]-o[0],u[1]-o[1],0],P=[h[0]-o[0],h[1]-o[1],0];if(Be(D)<1e-12||Be(P)<1e-12)return Tn(c);const B=ct([],D,P);xe(B,B),yt(P,h,o),D[2]=(b-g)*A,P[2]=(w-g)*A;const j=D;return ct(j,D,P),xe(j,j),Aa(c,B,j)}function EC(c,o,u=!1){const h=Qd(o.zoom),g=(function(b,w,A){const D=w.worldSize,P=[b[12],b[13],b[14]],B=It(P[1]/D),j=wt(P[0]/D),$=k([]),G=ft(1,B)*D,Z=ft(1,0)*D*gt(B,w.zoom),se=1/ib(D);let fe=Z*se;if(A){const Se=SC(w.projection,w.zoom,w.width,w.height,1024);fe=se*w.projection.pixelSpaceConversion(w.center.lat,D,Se)}const ue=$e(B,j);at(ue,ue,Pe([],xe([],ue),G*fe*P[2]));const pe=(function(Se){const ke=[Se[0],Se[1],Se[2]];let Ie=[0,1,0];const Ve=ct([],Ie,ke);return ct(Ie,ke,Ve),Sn(Ie)===0&&(Ie=[0,1,0],ct(Ve,ke,Ie)),xe(Ve,Ve),xe(Ie,Ie),xe(ke,ke),[Ve[0],Ve[1],Ve[2],0,Ie[0],Ie[1],Ie[2],0,ke[0],ke[1],ke[2],0,Se[0],Se[1],Se[2],1]})(ue);ie($,$,[fe,fe,fe*G]),J($,$,[-P[0],-P[1],-P[2]]);const ve=K([],w.globeMatrix,pe);return K(ve,ve,$),K(ve,ve,b),ve})(c,o,u);if(h>0){const b=(function(w,A){const D=A.worldSize,P=ft(1,0)*D*gt(A.center.lat,A.zoom)/ib(D),B=ft(1,A.center.lat)*D,j=k([]);W(j,j,Ar(A.center.lng)),Q(j,j,Ar(A.center.lat)),J(j,j,[0,0,de]),ie(j,j,[P,P,P*B]);const $=A.point;return J(j,j,[-$.x,-$.y,0]),K(j,j,w),K(j,A.globeMatrix,j)})(c,o);return(function(w,A,D){const P=(Z,se,fe)=>{const ue=Be(Z),pe=Be(se),ve=Ih(Z,se,fe);return Pe(ve,ve,1/Be(ve)*Vn(ue,pe,fe))},B=P([w[0],w[1],w[2]],[A[0],A[1],A[2]],D),j=P([w[4],w[5],w[6]],[A[4],A[5],A[6]],D),$=P([w[8],w[9],w[10]],[A[8],A[9],A[10]],D),G=Ih([w[12],w[13],w[14]],[A[12],A[13],A[14]],D);return[B[0],B[1],B[2],0,j[0],j[1],j[2],0,$[0],$[1],$[2],0,G[0],G[1],G[2],1]})(g,b,h)}return g}function rL(c,o,u,h){const g=Gr.projectAabbCorners(h,u);let b=Number.MAX_VALUE;for(let A=0;A<g.length;++A){const D=g[A];D[0]=(.5*D[0]+.5)*o.width,D[1]=(.5-.5*D[1])*o.height,D[2]<b&&(b=D[2])}const w=(function(A){const D=[];let P=0;for(let G=1;G<A.length;G++)(A[G][0]<A[P][0]||A[G][0]===A[P][0]&&A[G][1]<A[P][1])&&(P=G);let B,j=P;const $=new Uint8Array(A.length);do{if($[j])break;D.push(new Vt(A[j][0],A[j][1])),$[j]=1,B=(j+1)%A.length;for(let G=0;G<A.length;G++){if(A[G][0]===A[B][0]&&A[G][1]===A[B][1]||A[G][0]===A[j][0]&&A[G][1]===A[j][1])continue;const Z=[A[G][0]-A[j][0],A[G][1]-A[j][1]],se=[A[B][0]-A[j][0],A[B][1]-A[j][1]],fe=Z[0]*se[1]-Z[1]*se[0];(fe>0||fe===0&&Z[0]*se[0]+Z[1]*se[1]>=0&&Z[0]*Z[0]+Z[1]*Z[1]>se[0]*se[0]+se[1]*se[1])&&(B=G)}j=B}while(j!==P);return D.length>0&&D.push(D[0]),D})(g);if($i(c,w))return b}const wb=64,k1={CoordinateSpaceTile:1,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function AC(c,o,u,h,g,b,w,A,D,P=!1){const B=u.zoom,j=u.project(h),$=gt(h.lat,B),G=1/$;k(c),J(c,c,[j.x+w[0]*G,j.y+w[1]*G,w[2]]);let Z=1,se=1;const fe=u.worldSize;if(P){if(u.projection.name==="mercator"){let Se=0;u.elevation&&(Se=u.elevation.getAtPointOrZero(new tn(j.x/fe,j.y/fe),0));const ke=hi([],[j.x,j.y,Se,1],u.projMatrix)[3]/u.cameraToCenterDistance;Z=ke,se=ke*gt(u.center.lat,B)}else if(u.projection.name==="globe"){const Se=EC(c,u),ke=[0,0,0,1];hi(ke,ke,K([],u.projMatrix,Se));const Ie=ke[3]/u.cameraToCenterDistance,Ve=Qd(B),qe=u.projection.pixelsPerMeter(h.lat,fe)*gt(h.lat,B),Ue=u.projection.pixelsPerMeter(u.center.lat,fe)*gt(u.center.lat,B);Z=Ie/Vn(qe,At(u.center.lat),Ve),se=Ie*$/qe,Z*=Ue,se*=Ue}}else Z=G;ie(c,c,[Z,Z,se]);const ue=[...c],pe=o.orientation,ve=[];if(j9(ve,[pe[0]+(g?g[0]:0),pe[1]+(g?g[1]:0),pe[2]+(g?g[2]:0)],b),K(c,ue,ve),A&&u.elevation){let Se=0;const ke=[];if(D&&u.elevation){Se=(function(Ve,qe,Ue,Ze,rt){const Et=qe.elevation;if(!Et)return 0;const xt=Gr.projectAabbCorners(Ue,Ze),Tt=ft(1,rt.lat)*qe.worldSize,kt=(function(an,kn){const On=[0,0,1],cn=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Wn of cn){const vr=an[Wn.corners[0]],Zr=an[Wn.corners[1]],pr=an[Wn.corners[2]],di=[Zr[0]-vr[0],Zr[1]-vr[1],kn*(Zr[2]-vr[2])],Lr=ct(di,di,[pr[0]-vr[0],pr[1]-vr[1],kn*(pr[2]-vr[2])]);xe(Lr,Lr),Wn.dotProductWithUp=Ye(Lr,On)}return cn.sort((Wn,vr)=>Wn.dotProductWithUp-vr.dotProductWithUp),cn[0].corners})(xt,Tt),Pt=xt[kt[0]],Rt=xt[kt[1]],vt=xt[kt[2]],zt=xt[kt[3]],Mt=Et.getAtPointOrZero(new tn(Pt[0]/qe.worldSize,Pt[1]/qe.worldSize),0),Ft=Et.getAtPointOrZero(new tn(Rt[0]/qe.worldSize,Rt[1]/qe.worldSize),0),Lt=Et.getAtPointOrZero(new tn(vt[0]/qe.worldSize,vt[1]/qe.worldSize),0),fn=Et.getAtPointOrZero(new tn(zt[0]/qe.worldSize,zt[1]/qe.worldSize),0),pn=(Mt+fn)/2,nn=(Ft+Lt)/2;return pn>nn?Ft<Lt?TC(Ve,Rt,zt,Pt,Ft,fn,Mt,Tt):TC(Ve,vt,Pt,zt,Lt,Mt,fn,Tt):Mt<fn?TC(Ve,Pt,Rt,vt,Mt,Ft,Lt,Tt):TC(Ve,zt,vt,Rt,fn,Lt,Ft,Tt),Math.max(pn,nn)})(ke,u,o.aabb,c,h);const Ie=K([],ge([],ke),ve);K(c,ue,Ie)}else Se=u.elevation.getAtPointOrZero(new tn(j.x/fe,j.y/fe),0);Se!==0&&(c[14]+=Se)}}class U9{constructor(o,u,h,g,b){this.materialOverrides=new Map,this.nodeOverrides=new Map,this.materialOverrideNames=[],this.nodeOverrideNames=[],this.featureProperties={},this.id=o,this.uri=u,this.position=h!=null?new Re(h[0],h[1]):new Re(0,0),this.orientation=g??[0,0,0],this.nodes=b,this.uploaded=!1,this.aabb=new Gr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(o,u){K(o.globalMatrix,u,o.localMatrix);const h=this.nodeOverrides.get(o.name);if(h!==void 0){const w=[];b=h.orientation,k(g=w),W(g,g,Ar(b[1])),te(g,g,Ar(b[2])),Q(g,g,Ar(b[0])),K(o.globalMatrix,o.globalMatrix,w)}var g,b;if(o.meshes)for(const w of o.meshes){const A=Gr.applyTransformFast(w.aabb,o.globalMatrix);this.aabb.encapsulate(A)}if(o.children)for(const w of o.children)this._applyTransformations(w,o.globalMatrix)}computeBoundsAndApplyParent(){const o=k([]);this.aabb=new Gr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const u of this.nodes)this._applyTransformations(u,o)}computeModelMatrix(o,u,h,g,b,w,A=!1){AC(this.matrix,this,o.transform,this.position,u,h,g,b,w,A)}upload(o){if(!this.uploaded){for(const u of this.nodes)iL(u,o);for(const u of this.nodes)OC(u);this.uploaded=!0}}destroy(){for(const o of this.nodes)aL(o)}}function ZT(c,o,u=!1){c.uploaded||(c.gfxTexture=new tL(o,c.image,u?o.gl.R8:o.gl.RGBA8,{useMipmap:c.sampler.minFilter>=o.gl.NEAREST_MIPMAP_NEAREST}),c.uploaded=!0,c.image=null)}function Xye(c,o,u){c.indexBuffer=o.createIndexBuffer(c.indexArray,!1,!0),c.vertexBuffer=o.createVertexBuffer(c.vertexArray,$ye.members,!1,!0),c.normalArray&&(c.normalBuffer=o.createVertexBuffer(c.normalArray,Gye.members,!1,!0)),c.texcoordArray&&(c.texcoordBuffer=o.createVertexBuffer(c.texcoordArray,Hye.members,!1,!0)),c.colorArray&&(c.colorBuffer=o.createVertexBuffer(c.colorArray,(c.colorArray.bytesPerElement===12?Vye:qye).members,!1,!0)),c.featureArray&&(c.pbrBuffer=o.createVertexBuffer(c.featureArray,Wye.members,!0)),c.segments=Ii.simpleSegment(0,0,c.vertexArray.length,c.indexArray.length);const h=c.material;h.pbrMetallicRoughness.baseColorTexture&&ZT(h.pbrMetallicRoughness.baseColorTexture,o),h.pbrMetallicRoughness.metallicRoughnessTexture&&ZT(h.pbrMetallicRoughness.metallicRoughnessTexture,o),h.normalTexture&&ZT(h.normalTexture,o),h.occlusionTexture&&ZT(h.occlusionTexture,o,u),h.emissionTexture&&ZT(h.emissionTexture,o)}function iL(c,o,u){if(c.meshes)for(const h of c.meshes)Xye(h,o,u);if(c.children)for(const h of c.children)iL(h,o,u)}function OC(c){if(c.meshes)for(const o of c.meshes)o.indexArray.destroy(),o.vertexArray.destroy(),o.colorArray&&o.colorArray.destroy(),o.normalArray&&o.normalArray.destroy(),o.texcoordArray&&o.texcoordArray.destroy(),o.featureArray&&o.featureArray.destroy();if(c.children)for(const o of c.children)OC(o)}function Zye(c){c.pbrMetallicRoughness.baseColorTexture&&c.pbrMetallicRoughness.baseColorTexture.gfxTexture&&c.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),c.pbrMetallicRoughness.metallicRoughnessTexture&&c.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&c.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),c.normalTexture&&c.normalTexture.gfxTexture&&c.normalTexture.gfxTexture.destroy(),c.emissionTexture&&c.emissionTexture.gfxTexture&&c.emissionTexture.gfxTexture.destroy(),c.occlusionTexture&&c.occlusionTexture.gfxTexture&&c.occlusionTexture.gfxTexture.destroy()}function aL(c){if(c.meshes)for(const o of c.meshes)o.vertexBuffer&&(o.vertexBuffer.destroy(),o.indexBuffer.destroy(),o.normalBuffer&&o.normalBuffer.destroy(),o.texcoordBuffer&&o.texcoordBuffer.destroy(),o.colorBuffer&&o.colorBuffer.destroy(),o.pbrBuffer&&o.pbrBuffer.destroy(),o.segments.destroy(),o.material&&Zye(o.material));if(c.children)for(const o of c.children)aL(o)}function Sb(c,o){const u=c.json.bufferViews[o.bufferView],h=xC[o.componentType];return new h(c.buffers[u.buffer],(o.byteOffset||0)+(u.byteOffset||0),o.count*(u.byteStride&&u.byteStride!==WT[o.type]*h.BYTES_PER_ELEMENT?u.byteStride/h.BYTES_PER_ELEMENT:WT[o.type]))}function oL(c,o,u,h){const g=xC[o.componentType],b=(function(B){switch(B){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}})(g),w=c.json.bufferViews[o.bufferView],A=w.byteStride?w.byteStride/g.BYTES_PER_ELEMENT:WT[o.type],D=u.float32,P=D.length/u.capacity;for(let B=0,j=0;B<o.count*A;B+=A,j+=P)for(let $=0;$<P;$++)D[j+$]=h[B+$]*b;u._trim()}function Kye(c,o,u){const h=c.indices,g=c.attributes,b={};b.indexArray=new Xa;const w=o.json.accessors[h],A=w.count/3;b.indexArray.reserve(A);const D=Sb(o,w);for(let $=0;$<A;$++)b.indexArray.emplaceBack(D[3*$],D[3*$+1],D[3*$+2]);b.indexArray._trim(),b.vertexArray=new Yl;const P=o.json.accessors[g.POSITION];b.vertexArray.reserve(P.count);const B=Sb(o,P);for(let $=0;$<P.count;$++)b.vertexArray.emplaceBack(B[3*$],B[3*$+1],B[3*$+2]);if(b.vertexArray._trim(),b.aabb=new Gr(P.min,P.max),b.centroid=(function($,G){const Z=[0,0,0],se=$.length;if(se>0){for(let fe=0;fe<se;fe++){const ue=3*$[fe];Z[0]+=G[ue],Z[1]+=G[ue+1],Z[2]+=G[ue+2]}Z[0]/=se,Z[1]/=se,Z[2]/=se}return Z})(D,B),g.COLOR_0!==void 0){const $=o.json.accessors[g.COLOR_0],G=WT[$.type],Z=Sb(o,$);b.colorArray=G===3?new Yl:new ec,b.colorArray.resize($.count),oL(o,$,b.colorArray,Z)}if(g.NORMAL!==void 0){b.normalArray=new Yl;const $=o.json.accessors[g.NORMAL];b.normalArray.resize($.count);const G=Sb(o,$);oL(o,$,b.normalArray,G)}if(g.TEXCOORD_0!==void 0&&u.length>0){b.texcoordArray=new Mh;const $=o.json.accessors[g.TEXCOORD_0];b.texcoordArray.resize($.count);const G=Sb(o,$);oL(o,$,b.texcoordArray,G)}if(g._FEATURE_ID_RGBA4444!==void 0){const $=o.json.accessors[g._FEATURE_ID_RGBA4444];o.json.extensionsUsed&&o.json.extensionsUsed.includes("EXT_meshopt_compression")&&(b.featureData=Sb(o,$))}g._FEATURE_RGBA4444!==void 0&&(b.featureData=new Uint32Array(Sb(o,o.json.accessors[g._FEATURE_RGBA4444]).buffer));const j=c.material;return b.material=(function($,G){const{emissiveFactor:Z=[0,0,0],alphaMode:se="OPAQUE",alphaCutoff:fe=.5,normalTexture:ue,occlusionTexture:pe,emissiveTexture:ve,doubleSided:Se,name:ke}=$,{baseColorFactor:Ie=[1,1,1,1],metallicFactor:Ve=1,roughnessFactor:qe=1,baseColorTexture:Ue,metallicRoughnessTexture:Ze}=$.pbrMetallicRoughness||{},rt=pe?G[pe.index]:void 0;if(pe&&pe.extensions&&pe.extensions.KHR_texture_transform&&rt){const Et=pe.extensions.KHR_texture_transform;rt.offsetScale=[Et.offset[0],Et.offset[1],Et.scale[0],Et.scale[1]]}return{name:ke,pbrMetallicRoughness:{baseColorFactor:new Qr(...Ie),metallicFactor:Ve,roughnessFactor:qe,baseColorTexture:Ue?G[Ue.index]:void 0,metallicRoughnessTexture:Ze?G[Ze.index]:void 0},doubleSided:Se,emissiveFactor:new Qr(...Z),alphaMode:se,alphaCutoff:fe,normalTexture:ue?G[ue.index]:void 0,occlusionTexture:rt,emissionTexture:ve?G[ve.index]:void 0,defined:$.defined===void 0}})(j!==void 0?o.json.materials[j]:{defined:!1},u),b}function $9(c,o,u){const{matrix:h,rotation:g,translation:b,scale:w,mesh:A,extras:D,children:P,name:B}=c,j={};if(j.name=B,j.localMatrix=h||(function($,G,Z,se){var fe=G[0],ue=G[1],pe=G[2],ve=G[3],Se=fe+fe,ke=ue+ue,Ie=pe+pe,Ve=fe*Se,qe=fe*ke,Ue=fe*Ie,Ze=ue*ke,rt=ue*Ie,Et=pe*Ie,xt=ve*Se,Tt=ve*ke,kt=ve*Ie,Pt=se[0],Rt=se[1],vt=se[2];return $[0]=(1-(Ze+Et))*Pt,$[1]=(qe+kt)*Pt,$[2]=(Ue-Tt)*Pt,$[3]=0,$[4]=(qe-kt)*Rt,$[5]=(1-(Ve+Et))*Rt,$[6]=(rt+xt)*Rt,$[7]=0,$[8]=(Ue+Tt)*vt,$[9]=(rt-xt)*vt,$[10]=(1-(Ve+Ze))*vt,$[11]=0,$[12]=Z[0],$[13]=Z[1],$[14]=Z[2],$[15]=1,$})([],g||[0,0,0,1],b||[0,0,0],w||[1,1,1]),j.globalMatrix=U(j.localMatrix),A!==void 0){j.meshes=u[A];const $=j.anchor=[0,0];for(const G of j.meshes){const{min:Z,max:se}=G.aabb;$[0]+=Z[0]+se[0],$[1]+=Z[1]+se[1]}$[0]=Math.floor($[0]/j.meshes.length/2),$[1]=Math.floor($[1]/j.meshes.length/2)}if(D&&(D.id&&(j.id=D.id),D.lights&&(j.lights=(function($){if(!$.length)return[];const G=(function(pe){const ve=atob(pe),Se=new Uint8Array(ve.length);for(let ke=0;ke<ve.length;ke++)Se[ke]=ve.codePointAt(ke);return Se})($),Z=[],se=G.length/24,fe=new Uint16Array(G.buffer),ue=new Float32Array(G.buffer);for(let pe=0;pe<se;pe++){const ve=fe[2*pe*6]/30,Se=fe[2*pe*6+1]/30,ke=fe[2*pe*6+10]/100,Ie=ue[6*pe+1],Ve=ue[6*pe+2],qe=ue[6*pe+3],Ue=ue[6*pe+4],Ze=qe-Ie,rt=Ue-Ve,Et=Math.hypot(Ze,rt);Z.push({pos:[Ie+.5*Ze,Ve+.5*rt,Se],normal:[rt/Et,-Ze/Et,0],width:Et,height:ve,depth:ke,points:[Ie,Ve,qe,Ue]})}return Z})(D.lights)),D.MAPBOX_geometry_bloom&&(j.isGeometryBloom=D.MAPBOX_geometry_bloom)),P){const $=[];for(const G of P)$.push($9(o.json.nodes[G],o,u));j.children=$}return j}function Qye(c){if(c.vertices.length===0||c.indices.length===0)return null;const o=new yb(c.vertices,c.indices,8,256),[u,h]=[o.min.clone(),o.max.clone()];return{vertices:c.vertices,indices:c.indices,grid:o,min:u,max:h}}function Jye(c){if(!c.extras||!c.extras.ground)return null;const o=c.extras.ground;if(!o||!Array.isArray(o)||o.length===0)return null;const u=o[0];if(!u||!Array.isArray(u)||u.length===0)return null;const h=[];for(const w of u){if(!Array.isArray(w)||w.length!==2)continue;const A=w[0],D=w[1];typeof A=="number"&&typeof D=="number"&&h.push(new Vt(A,D))}if(h.length<3)return null;h.length>1&&h[h.length-1].equals(h[0])&&h.pop();let g=0;for(let w=0;w<h.length;w++){const A=h[w],D=h[(w+1)%h.length],P=h[(w+2)%h.length];g+=(A.x-D.x)*(P.y-D.y)-(P.x-D.x)*(A.y-D.y)}g>0&&h.reverse();const b=ac(h.flatMap(w=>[w.x,w.y]),[]);return b.length===0?null:{vertices:h,indices:b}}function e_e(c,o){const u=[],h=[];let g=0;const b=[];for(const w of c){g=u.length;const A=w.vertexArray.float32,D=w.indexArray.uint16;for(let P=0;P<w.vertexArray.length;P++)b[0]=A[3*P+0],b[1]=A[3*P+1],b[2]=A[3*P+2],Ct(b,b,o),u.push(new Vt(b[0],b[1]));for(let P=0;P<3*w.indexArray.length;P++)h.push(D[P]+g)}if(h.length%3!=0)return null;for(let w=0;w<h.length;w+=3){const A=u[h[w+0]],D=u[h[w+1]],P=u[h[w+2]];(A.x-D.x)*(P.y-D.y)-(P.x-D.x)*(A.y-D.y)>0&&([h[w+1],h[w+2]]=[h[w+2],h[w+1]])}return{vertices:u,indices:h}}function sL(c){const o=(function(D,P){const B=[],j=WebGL2RenderingContext;if(D.json.textures)for(const $ of D.json.textures){const G={magFilter:j.LINEAR,minFilter:j.NEAREST,wrapS:j.REPEAT,wrapT:j.REPEAT};$.sampler!==void 0&&Object.assign(G,D.json.samplers[$.sampler]),B.push({image:P[$.source],sampler:G,uploaded:!1})}return B})(c,c.images),u=(function(D,P){const B=[];for(const j of D.json.meshes){const $=[];for(const G of j.primitives)$.push(Kye(G,D,P));B.push($)}return B})(c,o),{scenes:h,scene:g,nodes:b}=c.json,w=h?h[g||0].nodes:[...b.keys()],A=[];for(const D of w)A.push($9(b[D],c,u));return(function(D,P,B){const j={},$=new Set;for(let G=0;G<D.length;G++){const Z=B[P[G]];if(!Z.extras)continue;const se=Z.extras["mapbox:footprint:version"],fe=Z.extras["mapbox:footprint:id"];(se||fe)&&$.add(G),se==="1.0.0"&&fe&&(j[fe]=G)}for(let G=0;G<D.length;G++){if($.has(G))continue;const Z=D[G],se=B[P[G]];if(!se.extras)continue;let fe=null;Z.id in j&&(fe=e_e(D[j[Z.id]].meshes,Z.localMatrix)),fe||(fe=Jye(se)),fe&&(Z.footprint=Qye(fe))}if($.size>0){const G=Array.from($.values()).sort((Z,se)=>Z-se);for(let Z=G.length-1;Z>=0;Z--)D.splice(G[Z],1)}})(A,w,c.json.nodes),A}function t_e(c){c.heightmap=new Float32Array(4096),c.heightmap.fill(-1);const o=c.vertexArray.float32,u=c.aabb.min[0]-1,h=c.aabb.min[1]-1,g=wb/(c.aabb.max[0]-u+2),b=wb/(c.aabb.max[1]-h+2);for(let w=0;w<o.length;w+=3){const A=o[w+2],D=(o[w+0]-u)*g|0,P=(o[w+1]-h)*b|0;A>c.heightmap[P*wb+D]&&(c.heightmap[P*wb+D]=A)}}function V9(c,o,u,h,g){u.reserve(u.length+4*c.length),h.reserve(h.length+10*c.length),g.reserve(g.length+10*c.length);let b=h.length;for(const w of c){const A=Math.min(10,Math.max(4,1.3*w.height))*o,D=[-w.normal[1],w.normal[0],0],P=Math.min(.29,.1*w.width/w.depth),B=w.width-2*w.depth*o*(P+.01),j=jt([],w.pos,D,B/2),$=jt([],w.pos,D,-B/2),G=[j[0],j[1],j[2]+w.height],Z=[$[0],$[1],$[2]+w.height],se=jt([],w.normal,D,P);Pe(se,se,A);const fe=jt([],w.normal,D,-P);Pe(fe,fe,A),at(se,j,se),at(fe,$,fe),j[2]+=.1,$[2]+=.1,h.emplaceBack(se[0],se[1],se[2]),h.emplaceBack(fe[0],fe[1],fe[2]),h.emplaceBack(j[0],j[1],j[2]),h.emplaceBack($[0],$[1],$[2]),h.emplaceBack(G[0],G[1],G[2]),h.emplaceBack(Z[0],Z[1],Z[2]),h.emplaceBack(j[0],j[1],j[2]),h.emplaceBack($[0],$[1],$[2]),h.emplaceBack(se[0],se[1],se[2]),h.emplaceBack(fe[0],fe[1],fe[2]);const ue=B/A/2;g.emplaceBack(-ue-P,-1,ue,.8),g.emplaceBack(ue+P,-1,ue,.8),g.emplaceBack(-ue,0,ue,1.3),g.emplaceBack(ue,0,ue,1.3),g.emplaceBack(ue+P,-.8,ue,.7),g.emplaceBack(ue+P,-.8,ue,.7),g.emplaceBack(0,0,ue,1.3),g.emplaceBack(0,0,ue,1.3),g.emplaceBack(ue+P,-1.2,ue,.8),g.emplaceBack(ue+P,-1.2,ue,.8),u.emplaceBack(6+b,4+b,8+b),u.emplaceBack(7+b,9+b,5+b),u.emplaceBack(0+b,1+b,2+b),u.emplaceBack(1+b,3+b,2+b),b+=10}}function n_e(c,o){const u={};u.indexArray=new Xa,u.vertexArray=new Yl,u.colorArray=new ec,V9(c,o,u.indexArray,u.vertexArray,u.colorArray);const h={defined:!0};h.emissiveFactor=Qr.black;const g={};return g.baseColorFactor=Qr.white,h.pbrMetallicRoughness=g,u.material=h,u.aabb=new Gr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),u}const q9=gr([{name:"a_pos_3f",components:3,type:"Float32"}]),r_e=gr([{name:"a_normal_3",components:3,type:"Int16"}]),i_e=gr([{name:"a_centroid_3",components:3,type:"Int16"}]),H9=gr([{name:"a_part_color_emissive",components:2,type:"Uint16"}]),a_e=gr([{name:"a_faux_facade_color_emissive",components:2,type:"Uint16"}]),o_e=gr([{name:"a_faux_facade_data",components:4,type:"Uint16"}]),s_e=gr([{name:"a_faux_facade_vertical_range",components:2,type:"Uint16"}]),l_e=gr([{name:"a_bloom_attenuation",components:4,type:"Float32"}]),u_e=gr([{name:"a_flood_light_wall_radius_1i16",components:1,type:"Uint16"}]),G9=yr.types,CC=32767;function c_e(c,o){const u=Jt+o;for(const h of c)for(const g of h)if(g.x<-o||g.x>u||g.y<-o||g.y>u)return!1;return!0}function f_e(c){switch(c){case"flat":return 3;case"hipped":return 1;case"gabled":return 2;case"parapet":return 0;case"mansard":return 4;case"skillion":return 5;case"pyramidal":return 6;default:throw new Error(`Unknown roof shape: ${c}`)}}class lL{constructor(){this.layoutVertexArray=new Yl,this.layoutAttenuationArray=new ec,this.layoutColorArray=new Wl,this.indexArray=new Xa,this.indexArrayForConflation=new Xa,this.segmentsBucket=new Ii}}class uL{constructor(o){this.layoutFacadePaintArray=null,this.layoutFacadeDataArray=null,this.layoutFacadeVerticalRangeArray=null,this.segmentsBucket=new Ii,this.entranceBloom=new lL;const u=66560;this.layoutVertexArray=new Yl,this.layoutVertexArray.reserve(u),this.layoutNormalArray=new Qu,this.layoutNormalArray.reserve(u),this.layoutCentroidArray=new Qu,this.layoutCentroidArray.reserve(u),this.layoutColorArray=new Wl,this.layoutColorArray.reserve(u),this.layoutFloodLightDataArray=new gm,this.layoutFloodLightDataArray.reserve(u),this.layoutAOArray=new sy,this.layoutAOArray.reserve(u),this.indexArray=new Xa,this.indexArray.reserve(66560),this.indexArrayForConflation=new Xa,this.segmentsBucket=new Ii,this.entranceBloom=new lL,o&&(this.layoutFacadePaintArray=new Wl,this.layoutFacadeDataArray=new $d,this.layoutFacadeVerticalRangeArray=new Wl)}reserve(o,u,h){this.layoutVertexArray.reserveForAdditional(o),this.layoutCentroidArray.reserveForAdditional(o),this.layoutFloodLightDataArray.reserveForAdditional(o),this.layoutNormalArray.reserveForAdditional(o),this.layoutAOArray.reserveForAdditional(o),this.layoutColorArray.reserveForAdditional(o),this.indexArray.reserveForAdditional(u),h&&(this.layoutFacadePaintArray.reserveForAdditional(o),this.layoutFacadeDataArray.reserveForAdditional(o),this.layoutFacadeVerticalRangeArray.reserveForAdditional(o))}}class Y9{constructor(o){this.colorBufferUploaded=!1,this.maxHeight=0,this.replacementUpdateTime=0,this.activeReplacements=[],this.footprints=[],this.footprintsVertices=new Mh,this.footprintsIndices=new gm,this.footprintsMin=new Vt(1/0,1/0),this.footprintsMax=new Vt(-1/0,-1/0),this.featuresOnBorder=[],this.buildingWithoutFacade=new uL(!1),this.buildingWithFacade=new uL(!0),this.indexArrayForConflationUploaded=!1,this.featureFootprintLookup=new Map,this.buildingIds=new Set,this.footprintLookup={},this.zoom=o.zoom,this.canonical=o.canonical,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.worldview=o.worldview,this.lut=o.lut,this.programConfigurations=new H(o.layers,{zoom:o.zoom,lut:o.lut}),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=o.projection,this.groundEffect=new Zi(o),this.groundEffect.groundRadiusArray=new To,this.hasAppearances=null}updateFootprints(o,u){const h=new yb([],[],1),g={vertices:[],indices:new Uint32Array(0),grid:h,min:this.footprintsMin,max:this.footprintsMax,buildingIds:this.buildingIds};u.push({footprint:g,id:o})}updateAppearances(o,u,h,g){}prepare(){return(function(){if(bC!=null||x9!=null)return null;if(R1!=null)return R1;const o=fetch(Ja.BUILDING_GEN_URL);return R1=(function(u){let h,g,b,w,A;function D(){h=new Uint8Array(A.buffer),g=new Int16Array(A.buffer),b=new Int32Array(A.buffer),w=new Float32Array(A.buffer)}function P(){throw new Error("Unexpected BuildingGen error.")}const B=()=>{},j={a:{a:P,f:function($){const G=h.length,Z=Math.max($>>>0,Math.ceil(1.2*G)),se=Math.ceil((Z-G)/65536);try{return A.grow(se),D(),!0}catch{return!1}},g:P,b:B,c:B,d:B,e:B}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(u,j):u.then($=>$.arrayBuffer()).then($=>WebAssembly.instantiate($,j))).then($=>{const G=$.instance.exports;return(0,G.g)(),A=G.f,D(),new Lye({setStyle:G.h,setAOOptions:G.i,setMetricOptions:G.j,setStructuralOptions:G.k,setFacadeOptions:G.l,setFauxFacadeOptions:G.m,setFacadeClassifierOptions:G.n,addFeature:G.o,addFacade:G.p,generateMesh:G.q,getLastError:G.r,getOuterRingLength:G.s,getMeshCount:G.t,getPositionsPtr:G.u,getPositionsLength:G.v,getNormalsPtr:G.w,getNormalsLength:G.x,getAOPtr:G.y,getAOLength:G.z,getUVPtr:G.A,getUVLength:G.B,getFauxFacadePtr:G.C,getFauxFacadeLength:G.D,getIndicesPtr:G.E,getIndicesLength:G.F,getBuildingPart:G.G,getRingCount:G.H,getRingPtr:G.I,getRingLength:G.J,malloc:G.K,free:G.L,heapU8:h,heap16:g,heap32:b,heapF32:w})})})(o).then(u=>(R1=null,bC=u,bC)).catch(u=>{Hn("Could not load building-gen"),R1=null,x9=u}),R1})()}populate(o,u,h,g){const b=zye();if(!b)return;const w=qt(h);this.tileToMeter=w,this.brightness=u.brightness,b.setStyle({normalScale:[1,-1,w],tileToMeters:w}),b.setAOOptions(!1,.3),b.setMetricOptions(!1,16),b.setStructuralOptions(!0),b.setFacadeClassifierOptions(3);const A=new Map,D=new Map;let P=0;for(const{feature:ue}of o){if(G9[ue.type]!=="LineString"){A.set(ue.id,ue.properties.source_id);continue}const pe=this.layers[0]._featureFilter.needGeometry;if(pe&&!this.layers[0]._featureFilter.filter(new Jr(this.zoom),ue,h))continue;const ve=Qn(ue,pe);if(!pe&&!this.layers[0]._featureFilter.filter(new Jr(this.zoom),ve,h))continue;const Se=pe?ve.geometry:Un(ue,h,g),ke=[];for(const Ue of Se)for(const Ze of Ue)ke.push(Ze.x),ke.push(Ze.y);const Ie={coordinates:ke,crossPerc:ue.properties.cross_perc,distanceToRoad:ue.properties.distance_to_road,entrances:ue.properties.entrances,sourceId:0},Ve=ue.properties.source_id;let qe=D.get(Ve);qe||(qe=[],D.set(Ve,qe)),qe.push(Ie),++P}this.maxHeight=0;const B=new Array,j=new Set,$=ue=>{ue!=null&&j.add(ue)},G=(ue,pe)=>{ue!=null&&B.push({buildingId:ue,footprintIndex:pe})},Z=64*(o.length-P),se=Z/2;this.buildingWithFacade.reserve(Z,se,!0),this.buildingWithoutFacade.reserve(2*Z,2*se,!1),this.footprintsIndices.reserve(16*(o.length-P)),this.footprintsVertices.reserve(8*(o.length-P));for(const{feature:ue,id:pe,index:ve,sourceLayerIndex:Se}of o){if(G9[ue.type]==="LineString")continue;const ke=this.layers[0]._featureFilter.needGeometry;if(ke&&!this.layers[0]._featureFilter.filter(new Jr(this.zoom),ue,h))continue;let Ie=null;if(ue.properties&&ue.properties.hasOwnProperty("building_id")&&(Ie=Number(ue.properties.building_id),j.has(Ie)))continue;const Ve=Qn(ue,ke);if(!ke&&!this.layers[0]._featureFilter.filter(new Jr(this.zoom),Ve,h))continue;const qe=ke?Ve.geometry:Un(ue,h,g),Ue=db(qe,500);let Ze=!1;for(const mr of Ue)if(mr.length!==1){Ze=!0;break}if(Ze){$(Ie);continue}if(!c_e(qe,163)){$(Ie);continue}const rt=this.layers[0],Et=f_e(rt.layout.get("building-roof-shape").evaluate(ue,{},h)),xt=rt.layout.get("building-base").evaluate(ue,{},h),Tt=rt.layout.get("building-height").evaluate(ue,{},h),kt=rt.layout.get("building-flood-light-ground-radius").evaluate(ue,{},h),Pt=rt.paint.get("building-ambient-occlusion-intensity"),Rt=kt/this.tileToMeter;ue.properties["building-part"]="roof";const vt=rt.paint.get("building-color").evaluate(ue,{},this.canonical).toPremultipliedRenderColor(this.lut),zt=rt.paint.get("building-emissive-strength").evaluate(ue,{},this.canonical);ue.properties["building-part"]="wall";const Mt=rt.paint.get("building-color").evaluate(ue,{},this.canonical).toPremultipliedRenderColor(this.lut),Ft=rt.paint.get("building-emissive-strength").evaluate(ue,{},this.canonical);ue.properties["building-part"]="window";const Lt=rt.paint.get("building-color").evaluate(ue,{},this.canonical).toPremultipliedRenderColor(this.lut),fn=rt.paint.get("building-emissive-strength").evaluate(ue,{},this.canonical);ue.properties["building-part"]="door";const pn=rt.paint.get("building-color").evaluate(ue,{},this.canonical).toPremultipliedRenderColor(this.lut),nn=rt.paint.get("building-emissive-strength").evaluate(ue,{},this.canonical);let an=rt.layout.get("building-flood-light-wall-radius").evaluate(ue,{},h);an=ze(an,0,2048);const kn=an/2048*CC,On=A.get(pe),cn=D.get(On)||[],Wn=cn.length!==0&&rt.layout.get("building-facade").evaluate(ue,{},h);b.setFacadeOptions(4,!0),b.setFauxFacadeOptions(Wn,!1,1);let vr=0,Zr=0,pr=0,di=0,Lr=0,Ra=0,$r=0,ui=0,Vi=0,ta=0,na=0;if(Wn){let mr=Math.round(rt.layout.get("building-facade-floors").evaluate(ue,{},h));if(xt===0){mr=Math.max(1,mr-(cn.length>0?1:0));let La=4;if(Tt>100){const Oo=[10,13,15];La=Oo[ue.id?ue.id%Oo.length:0]}else Tt<=10&&(La=3);b.setFacadeOptions(La,!0),Lr=(Tt<15?1.3:1.61803)*La/w}else Lr=xt/w;Ra=Tt/w,Lr=Math.min(Lr,Ra),pr=rt.layout.get("building-facade-unit-width").evaluate(ue,{},h)/w,di=(Ra-Lr)/mr,b.setFauxFacadeOptions(!0,!0,pr);const Jo=rt.layout.get("building-facade-window").evaluate(ue,{},h);vr=Jo[0],Zr=Jo[1],$r=Math.floor(65535*Math.min(1,Lr/Jt)),ui=Math.floor(65535*Math.min(1,Ra/Jt)),Vi=Math.floor(255*vr)<<8|Math.floor(255*Zr),ta=Math.floor(65535*Math.min(1,pr/Jt)),na=Math.floor(65535*Math.min(1,di/Jt))}const ka=Array(Ue.length),fs={x:1/0,y:1/0},Hs={x:-1/0,y:-1/0},fo={x:0,y:0};let Ao=0;for(let mr=0;mr<Ue.length;mr++){const Jo=Ue[mr];if(Jo.length>0){const La=[],Oo=Array(Jo.length+1);Oo[0]=0;for(let Uf=0;Uf<Jo.length;Uf++){const yu=Jo[Uf];for(let uc=0;uc<yu.length;uc++){const es=yu[yu.length-uc-1];fs.x=Math.min(fs.x,es.x),fs.y=Math.min(fs.y,es.y),Hs.x=Math.max(Hs.x,es.x),Hs.y=Math.max(Hs.y,es.y),fo.x+=es.x,fo.y+=es.y,Ao++,La.push(es.x),La.push(es.y)}Oo[Uf+1]=La.length}ka[mr]={id:ue.id?ue.id:0,height:Tt,minHeight:xt,sourceId:0,roofType:Et,coordinates:La,ringIndices:Oo}}}fo.x/=Ao||1,fo.y/=Ao||1;const qo=b.generateMesh(ka,cn);if(typeof qo=="string"){Hn(`Unable to generate building ${ue.id}: ${qo}`),$(Ie);continue}if(qo.meshes.length===0||qo.modifiedPolygonRings.length===0){$(Ie);continue}const fr=Wn?this.buildingWithFacade:this.buildingWithoutFacade;let ra=0;for(const mr of qo.meshes)ra+=mr.positions.length/3;const va=fr.segmentsBucket.prepareSegment(ra,fr.layoutVertexArray,fr.indexArray),lc=[];let Rl=null,hs=0,kl=-1;const Dm=fr.layoutVertexArray.length,dl=Dm+ra;fr.layoutVertexArray.resize(dl),fr.layoutCentroidArray.resize(dl),fr.layoutNormalArray.resize(dl),fr.layoutAOArray.resize(dl),fr.layoutColorArray.resize(dl),fr.layoutFloodLightDataArray.resize(dl),Wn&&(fr.layoutFacadePaintArray.resize(dl),fr.layoutFacadeDataArray.resize(dl),fr.layoutFacadeVerticalRangeArray.resize(dl));const JC=fr.indexArray.length;let G1=0,Kl=Dm;for(const mr of qo.meshes){let Jo,La;if(mr.buildingPart===1)Jo=vt,La=zt;else if(mr.buildingPart===0)Jo=Mt,La=Ft;else if(mr.buildingPart===2)Jo=Lt,La=fn;else{if(mr.buildingPart!==3)continue;Jo=pn,La=nn}if(La=ze(La,0,1),mr.buildingPart===3){const ho=new Array;for(let ml=0;ml<mr.positions.length;ml+=12){const Ov=mr.positions[ml+0],ps=mr.positions[ml+1],_u=mr.positions[ml+3],Nh=mr.positions[ml+4],Rm=mr.positions[ml+2],WL=mr.positions[ml+8]-Rm,XL=1,bE=_u-Ov,W1=Nh-ps,ap=Math.hypot(bE,W1);ho.push({pos:[Ov+.5*bE,ps+.5*W1,Rm],normal:[W1/ap,-bE/ap,0],width:ap,height:WL,depth:XL,points:[Ov,ps,_u,Nh]})}const ds=fr.entranceBloom.segmentsBucket.prepareSegment(10*ho.length,fr.entranceBloom.layoutVertexArray,fr.entranceBloom.indexArray),Co=fr.entranceBloom.layoutVertexArray.length;hs=fr.entranceBloom.indexArray.length,V9(ho,.5/this.tileToMeter,fr.entranceBloom.indexArray,fr.entranceBloom.layoutVertexArray,fr.entranceBloom.layoutAttenuationArray);const pl=fr.entranceBloom.layoutVertexArray.length-Co;kl=fr.entranceBloom.indexArray.length-hs;for(let ml=0;ml<pl;ml++)fr.entranceBloom.layoutColorArray.emplaceBack(255*pn.r<<8|255*pn.g,255*pn.b<<8|51*nn);ds.vertexLength+=pl,ds.primitiveLength+=kl,Rl={part:mr.buildingPart,vertexOffset:Co,vertexLength:pl}}fr.layoutVertexArray.float32.set(mr.positions,3*Kl);const Oo=mr.positions.length/3;for(let ho=0;ho<Oo;++ho){const ds=3*ho;G1=Math.max(G1,mr.positions[ds+2]);const Co=mr.normals[ds+1]*CC,pl=mr.normals[ds+2]*CC,ml=3*(Kl+ho);fr.layoutNormalArray.int16[ml]=mr.normals[ds]*CC,fr.layoutNormalArray.int16[ml+1]=Co,fr.layoutNormalArray.int16[ml+2]=pl;const Ov=mr.ao[ho];fr.layoutAOArray.uint8[Kl+ho]=255*Ov;const ps=1+(Ov-1)*Pt,_u=255*Jo.b*ps<<8|255*La;fr.layoutColorArray.uint16[2*(Kl+ho)]=255*Jo.r*ps<<8|255*Jo.g*ps,fr.layoutColorArray.uint16[2*(Kl+ho)+1]=_u}const Uf=Math.floor(fo.x),yu=Math.floor(fo.y),uc=Math.floor(Tt);for(let ho=0;ho<Oo;++ho){const ds=3*(Kl+ho);fr.layoutCentroidArray.int16[ds]=Uf,fr.layoutCentroidArray.int16[ds+1]=yu,fr.layoutCentroidArray.int16[ds+2]=uc}if(fr.layoutFloodLightDataArray.uint16.fill(mr.buildingPart===0?kn:0,Kl,Kl+Oo),Wn){const ho=255*Lt.r<<8|255*Lt.g,ds=255*Lt.b<<8|255*fn;for(let Co=0;Co<Oo;++Co){const pl=2*(Kl+Co);fr.layoutFacadePaintArray.uint16[pl]=ho,fr.layoutFacadePaintArray.uint16[pl+1]=ds}for(let Co=0;Co<Oo;++Co)if(mr.isFauxFacade[Co]){const pl=Math.min(65535,Math.floor(mr.uv[2*Co]*qo.outerRingLength));fr.layoutFacadeDataArray.emplace(Kl+Co,1|pl,Vi,ta,na),fr.layoutFacadeVerticalRangeArray.emplace(Kl+Co,$r,ui)}else fr.layoutFacadeDataArray.emplace(Kl+Co,0,0,0,0),fr.layoutFacadeVerticalRangeArray.emplace(Kl+Co,0,0)}const es=va.vertexLength,vE=mr.indices.length/3,Pm=fr.indexArray.length;fr.indexArray.resize(Pm+vE);for(let ho=0;ho<vE;++ho){const ds=3*ho,Co=3*Pm+ds;fr.indexArray.uint16[Co]=es+mr.indices[ds],fr.indexArray.uint16[Co+1]=es+mr.indices[ds+1],fr.indexArray.uint16[Co+2]=es+mr.indices[ds+2]}mr.buildingPart!==1&&mr.buildingPart!==0&&mr.buildingPart!==2&&mr.buildingPart!==3||lc.push({part:mr.buildingPart,vertexOffset:Kl,vertexLength:mr.positions.length/3}),Kl+=Oo,va.vertexLength+=Oo,va.primitiveLength+=mr.indices.length/3}this.maxHeight=Math.max(this.maxHeight,G1);const eM=fr.indexArray.length-JC,Im=this.footprintsIndices.length,by=this.footprintsVertices.length,Av=[],jf=new Vt(1/0,1/0),Fh=new Vt(-1/0,-1/0),_E=this.groundEffect.vertexArray.length;for(const mr of qo.modifiedPolygonRings){const Jo=[],La=new Vt(1/0,1/0),Oo=new Vt(-1/0,-1/0);for(let Uf=0;Uf<mr.length;Uf+=2){const yu=mr.length-Uf-2;La.x=Math.min(La.x,mr[yu]),La.y=Math.min(La.y,mr[yu+1]),Oo.x=Math.max(Oo.x,mr[yu]),Oo.y=Math.max(Oo.y,mr[yu+1]);const uc=new Vt(mr[yu],mr[yu+1]);Jo.push(uc),Av.push(uc.x,uc.y),this.footprintsVertices.emplaceBack(uc.x,uc.y)}jf.x=Math.min(jf.x,La.x),jf.y=Math.min(jf.y,La.y),Fh.x=Math.max(Fh.x,Oo.x),Fh.y=Math.max(Fh.y,Oo.y),this.groundEffect.addData(Jo,[La,Oo],Rt)}const Y1=this.groundEffect.vertexArray.length-_E;this.groundEffect.groundRadiusArray.reserveForAdditional(Y1);for(let mr=0;mr<Y1;mr++)this.groundEffect.groundRadiusArray.emplaceBack(kt);(fs.x<0||Hs.x>Jt||fs.y<0||Hs.y>Jt)&&this.featuresOnBorder.push({featureId:ue.id,footprintIndex:this.footprints.length});{const mr=ac(Av,null,2);this.footprintsIndices.resize(this.footprintsIndices.length+mr.length),this.footprintsIndices.uint16.set(mr,Im),this.buildingIds.add(Ie??ue.id),this.footprintsMin.x=Math.min(this.footprintsMin.x,jf.x),this.footprintsMin.y=Math.min(this.footprintsMin.y,jf.y),this.footprintsMax.x=Math.max(this.footprintsMax.x,Fh.x),this.footprintsMax.y=Math.max(this.footprintsMax.y,Fh.y);const Jo={footprintVertexOffset:by,footprintVertexLength:this.footprintsVertices.length-by,footprintIndexOffset:Im,footprintIndexLength:this.footprintsIndices.length-Im,min:jf,max:Fh,hiddenFlags:0,indicesOffset:JC,indicesLength:eM,bloomIndicesOffset:hs,bloomIndicesLength:kl,groundEffectVertexOffset:_E,groundEffectVertexLength:Y1,hasFauxFacade:Wn,height:G1,promoteId:pe,feature:Ve,parts:lc,buildingBloom:Rl},La=this.footprints.length;ue.id!==void 0&&this.featureFootprintLookup.set(ue.id,La),G(Ie,La),this.footprints.push(Jo)}this.programConfigurations.populatePaintArrays(fr.layoutVertexArray.length,ue,ve,{},u.availableImages,h,u.brightness),this.groundEffect.addPaintPropertiesData(ue,ve,{},u.availableImages,h,u.brightness),u.featureIndex.insert(ue,qe,ve,Se,this.index,Dm)}B.forEach(({buildingId:ue,footprintIndex:pe})=>{j.has(ue)&&(this.footprints[pe].hiddenFlags|=4)});const fe=new Set;this.buildingIds.forEach((ue,pe,ve)=>{j.has(ue)||fe.add(ue)}),this.buildingIds=fe,this.groundEffect.prepareBorderSegments()}update(o,u,h,g,b,w,A){this.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A),this.groundEffect.update(o,u,b,h,g,w,A),this.evaluate(this.layers[0],o),this.colorBufferUploaded=!1}isEmpty(){return this.buildingWithoutFacade.layoutVertexArray.length===0&&this.buildingWithFacade.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(o){const u=h=>{h.layoutVertexBuffer=o.createVertexBuffer(h.layoutVertexArray,q9.members),h.layoutNormalBuffer=o.createVertexBuffer(h.layoutNormalArray,r_e.members),h.layoutCentroidBuffer=o.createVertexBuffer(h.layoutCentroidArray,i_e.members),h.layoutFloodLightDataBuffer=o.createVertexBuffer(h.layoutFloodLightDataArray,u_e.members),h.layoutFacadeDataArray&&h.layoutFacadeDataArray.length&&(h.layoutFacadeDataBuffer=o.createVertexBuffer(h.layoutFacadeDataArray,o_e.members)),h.layoutFacadeVerticalRangeArray&&h.layoutFacadeVerticalRangeArray.length&&(h.layoutFacadeVerticalRangeBuffer=o.createVertexBuffer(h.layoutFacadeVerticalRangeArray,s_e.members)),h.entranceBloom.layoutVertexArray.length&&(h.entranceBloom.layoutVertexBuffer=o.createVertexBuffer(h.entranceBloom.layoutVertexArray,q9.members),h.entranceBloom.layoutAttenuationBuffer=o.createVertexBuffer(h.entranceBloom.layoutAttenuationArray,l_e.members)),this.uploadUpdatedColorBuffer(o),this.uploadUpdatedIndexBuffer(o)};this.uploaded||(u(this.buildingWithoutFacade),u(this.buildingWithFacade),this.groundEffect.upload(o)),this.groundEffect.uploadPaintProperties(o),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){const o=u=>{u.layoutVertexBuffer&&(u.layoutVertexBuffer.destroy(),u.layoutNormalBuffer.destroy(),u.layoutColorBuffer.destroy(),u.segmentsBucket.destroy(),u.indexBuffer&&u.indexBuffer.destroy(),u.entranceBloom.layoutVertexBuffer&&(u.entranceBloom.layoutVertexBuffer.destroy(),u.entranceBloom.layoutColorBuffer.destroy(),u.entranceBloom.layoutAttenuationBuffer.destroy(),u.entranceBloom.indexBuffer.destroy(),u.entranceBloom.segmentsBucket.destroy()))};o(this.buildingWithoutFacade),o(this.buildingWithFacade),this.groundEffect.destroy(),this.programConfigurations.destroy()}updateFootprintHiddenFlags(o,u,h=!0){let g=!1;const b=h?u:0,w=0|(h?-1:~u);this.groundEffect.hiddenByLandmarkVertexArray.length===0&&this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const A of o){const D=this.footprints[A],P=D.hiddenFlags&w|b;D.hiddenFlags!==P&&(D.hiddenFlags=P,g=!0,this.groundEffect.updateHiddenByLandmarkRange(D.groundEffectVertexOffset,D.groundEffectVertexLength,D.hiddenFlags!==0))}return g&&(this.indexArrayForConflationUploaded=!1),g}uploadUpdatedIndexBuffer(o){if(this.groundEffect.uploadHiddenByLandmark(o),this.indexArrayForConflationUploaded)return;const u=g=>{g.indexArray.length!==0&&(g.indexArrayForConflation.resize(g.indexArray.length),g.indexArrayForConflation.uint16.set(g.indexArray.uint16),g.entranceBloom.indexArrayForConflation.resize(g.entranceBloom.indexArray.length),g.entranceBloom.indexArrayForConflation.uint16.set(g.entranceBloom.indexArray.uint16))};u(this.buildingWithoutFacade),u(this.buildingWithFacade);for(const g of this.footprints){const b=g.hasFauxFacade?this.buildingWithFacade:this.buildingWithoutFacade,w=g.indicesOffset+g.indicesLength;if(g.hiddenFlags!==0){for(let D=g.indicesOffset;D<w;D++)b.indexArrayForConflation.uint16[3*D+0]=0,b.indexArrayForConflation.uint16[3*D+1]=0,b.indexArrayForConflation.uint16[3*D+2]=0;const A=g.bloomIndicesOffset+g.bloomIndicesLength;for(let D=g.bloomIndicesOffset;D<A;D++)b.entranceBloom.indexArrayForConflation.uint16[3*D+0]=0,b.entranceBloom.indexArrayForConflation.uint16[3*D+1]=0,b.entranceBloom.indexArrayForConflation.uint16[3*D+2]=0}}const h=g=>{g.indexArray.length!==0&&(g.indexBuffer?g.indexBuffer.updateData(g.indexArrayForConflation):g.indexBuffer=o.createIndexBuffer(g.indexArrayForConflation,!0),g.entranceBloom.indexBuffer?g.entranceBloom.indexBuffer.updateData(g.entranceBloom.indexArrayForConflation):g.entranceBloom.indexBuffer=o.createIndexBuffer(g.entranceBloom.indexArrayForConflation,!0))};h(this.buildingWithoutFacade),h(this.buildingWithFacade),this.indexArrayForConflationUploaded=!0}uploadUpdatedColorBuffer(o){const u=h=>{h.layoutColorBuffer?h.layoutColorBuffer.updateData(h.layoutColorArray):h.layoutColorBuffer=o.createVertexBuffer(h.layoutColorArray,H9.members,!0),h.layoutFacadePaintArray&&(h.layoutFacadePaintBuffer?h.layoutFacadePaintBuffer.updateData(h.layoutFacadePaintArray):h.layoutFacadePaintBuffer=o.createVertexBuffer(h.layoutFacadePaintArray,a_e.members,!0)),h.entranceBloom.layoutColorBuffer?h.entranceBloom.layoutColorBuffer.updateData(h.entranceBloom.layoutColorArray):h.entranceBloom.layoutColorBuffer=o.createVertexBuffer(h.entranceBloom.layoutColorArray,H9.members,!0)};u(this.buildingWithoutFacade),u(this.buildingWithFacade),this.colorBufferUploaded=!0}evaluate(o,u){const h=o.paint.get("building-ambient-occlusion-intensity");for(const g of this.footprints){if(4&g.hiddenFlags)continue;const b=u[g.promoteId],w=g.feature;w.properties["building-part"]="roof";const A=o.paint.get("building-color").evaluate(w,b,this.canonical).toPremultipliedRenderColor(this.lut),D=o.paint.get("building-emissive-strength").evaluate(w,b,this.canonical);w.properties["building-part"]="wall";const P=o.paint.get("building-color").evaluate(w,b,this.canonical).toPremultipliedRenderColor(this.lut),B=o.paint.get("building-emissive-strength").evaluate(w,b,this.canonical);w.properties["building-part"]="window";const j=o.paint.get("building-color").evaluate(w,b,this.canonical).toPremultipliedRenderColor(this.lut),$=o.paint.get("building-emissive-strength").evaluate(w,b,this.canonical);w.properties["building-part"]="door";const G=o.paint.get("building-color").evaluate(w,b,this.canonical).toPremultipliedRenderColor(this.lut),Z=o.paint.get("building-emissive-strength").evaluate(w,b,this.canonical),se=g.hasFauxFacade?this.buildingWithFacade:this.buildingWithoutFacade;for(const ue of g.parts){let pe,ve=A;ue.part===1?(ve=A,pe=D):ue.part===0?(ve=P,pe=B):ue.part===2?(ve=j,pe=$):ue.part===3&&(ve=G,pe=Z),pe=ze(pe,0,1);for(let Se=0;Se<ue.vertexLength;Se++){const ke=ue.vertexOffset+Se,Ie=1+(se.layoutAOArray.uint8[ke]/255-1)*h;se.layoutColorArray.emplace(ke,ve.r*Ie*255<<8|ve.g*Ie*255,ve.b*Ie*255<<8|255*pe),g.hasFauxFacade&&se.layoutFacadePaintArray.emplace(ke,255*j.r<<8|255*j.g,255*j.b<<8|255*$)}}const fe=g.buildingBloom;if(fe)for(let ue=0;ue<fe.vertexLength;ue++)se.entranceBloom.layoutColorArray.emplace(fe.vertexOffset+ue,255*G.r<<8|255*G.g,255*G.b<<8|51*Z)}}needsEvaluation(){return!this.colorBufferUploaded}updateReplacement(o,u,h){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const g=u.getReplacementRegionsForTile(o.toUnwrapped());if(m(this.activeReplacements,g))return;this.activeReplacements=g;for(const w of this.footprints)w.hiddenFlags&=-2;const b=[];for(const w of this.activeReplacements){if(w.order<h)continue;const A=Math.max(1,Math.pow(2,w.footprintTileId.canonical.z-o.canonical.z));for(const D of this.footprints)D.min.x>w.max.x||D.max.x<w.min.x||D.min.y>w.max.y||D.max.y<w.min.y||(b.length=0,d_e(this.footprintsVertices,D.footprintVertexOffset,D.footprintVertexLength,w.footprintTileId.canonical,o.canonical,b),L(w.footprint,b,this.footprintsIndices.uint16,D.footprintIndexOffset,D.footprintIndexLength,0,-A)&&(D.hiddenFlags|=1))}this.groundEffect.hiddenByLandmarkVertexArray.length===0&&this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const w of this.footprints)this.groundEffect.updateHiddenByLandmarkRange(w.groundEffectVertexOffset,w.groundEffectVertexLength,w.hiddenFlags!==0);this.indexArrayForConflationUploaded=!1}getFootprint(o){if(o.id!==void 0){const u=this.featureFootprintLookup.get(o.id);return this.footprints[u]}return null}getHeightAtTileCoord(o,u){let h=Number.NEGATIVE_INFINITY,g=!0;const b=4*(o+Jt)*Jt+(u+Jt);if(this.footprintLookup.hasOwnProperty(b)){const A=this.footprintLookup[b];return A?{height:A.height,hidden:A.hiddenFlags!==0}:void 0}const w=new Vt(o,u);for(const A of this.footprints)o>A.max.x||A.min.x>o||u>A.max.y||A.min.y>u||A.height<=h||h_e(w,this.footprintsVertices.float32.subarray(2*A.footprintVertexOffset,2*(A.footprintVertexOffset+A.footprintVertexLength)),this.footprintsIndices.uint16.subarray(A.footprintIndexOffset,A.footprintIndexOffset+A.footprintIndexLength))&&(h=A.height,this.footprintLookup[b]=A,g=A.hiddenFlags!==0);if(h!==Number.NEGATIVE_INFINITY)return{height:h,hidden:g};this.footprintLookup[b]=void 0}}function h_e(c,o,u){for(let h=0;h<u.length;h+=3){const g=u[h],b=u[h+1],w=u[h+2],A=o[2*g+0],D=o[2*g+1],P=o[2*b+0],B=o[2*b+1],j=o[2*w+0],$=o[2*w+1],G=(A-j)*(c.y-$)-(D-$)*(c.x-j),Z=(P-A)*(c.y-D)-(B-D)*(c.x-A);if(G<0!=Z<0&&G!==0&&Z!==0)continue;const se=(j-P)*(c.y-B)-($-B)*(c.x-P);if(se===0||se<0==G+Z<=0)return!0}return!1}function d_e(c,o,u,h,g,b){const w=Math.pow(2,h.z-g.z);for(let A=0;A<u;A++){let D=c.float32[2*(A+o)+0],P=c.float32[2*(A+o)+1];D=(D+g.x*Jt)*w-h.x*Jt,P=(P+g.y*Jt)*w-h.y*Jt,b.push(new Vt(D,P))}}let W9,X9;Kt(Y9,"BuildingBucket",{omit:["layers"]}),Kt(uL,"BuildingGeometry"),Kt(lL,"BuildingBloomGeometry");const p_e=gr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),m_e=gr([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:g_e}=p_e,y_e=gr([{name:"a_packed",components:3,type:"Float32"}]),{members:__e}=y_e,v_e=gr([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:b_e}=v_e;class Z9{constructor(o,u){this.width=o,this.height=u,this.nextRow=0,this.image=new Ph({width:o,height:u}),this.positions={},this.uploaded=!1}getDash(o,u){const h=this.getKey(o,u);return this.positions[h]}trim(){const o=this.width,u=this.height=Nt(this.nextRow);this.image.resize({width:o,height:u})}getKey(o,u){return o.join(",")+u}getDashRanges(o,u,h){const g=[];let b=o.length%2==1?-o[o.length-1]*h:0,w=o[0]*h,A=!0;g.push({left:b,right:w,isDash:A,zeroLength:o[0]===0});let D=o[0];for(let P=1;P<o.length;P++){A=!A;const B=o[P];b=D*h,D+=B,w=D*h,g.push({left:b,right:w,isDash:A,zeroLength:B===0})}return g}addRoundDash(o,u,h){const g=u/2;for(let b=-h;b<=h;b++){const w=this.width*(this.nextRow+h+b);let A=0,D=o[A];for(let P=0;P<this.width;P++){P/D.right>1&&(D=o[++A]);const B=Math.abs(P-D.left),j=Math.abs(P-D.right),$=Math.min(B,j);let G;const Z=b/h*(g+1);if(D.isDash){const se=g-Math.abs(Z);G=Math.sqrt($*$+se*se)}else G=g-Math.sqrt($*$+Z*Z);this.image.data[w+P]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(o,u){for(let D=o.length-1;D>=0;--D){const P=o[D],B=o[D+1];P.zeroLength?o.splice(D,1):B&&B.isDash===P.isDash&&(B.left=P.left,o.splice(D,1))}const h=o[0],g=o[o.length-1];h.isDash===g.isDash&&(h.left=g.left-this.width,g.right=h.right+this.width);const b=this.width*this.nextRow;let w=0,A=o[w];for(let D=0;D<this.width;D++){D/A.right>1&&(A=o[++w]);const P=Math.abs(D-A.left),B=Math.abs(D-A.right),j=Math.min(P,B);this.image.data[b+D]=Math.max(0,Math.min(255,(A.isDash?j:-j)+u+128))}}addDash(o,u){const h=this.getKey(o,u);if(this.positions[h])return this.positions[h];const g=u==="round",b=g?7:0,w=2*b+1;if(this.nextRow+w>this.height)return Hn("LineAtlas out of space"),null;o.length===0&&o.push(1);let A=0;for(let B=0;B<o.length;B++)o[B]<0&&(Hn("Negative value is found in line dasharray, replacing values with 0"),o[B]=0),A+=o[B];if(A!==0){const B=this.width/A,j=this.getDashRanges(o,this.width,B);g?this.addRoundDash(j,B,b):this.addRegularDash(j,u==="square"?.5*B:0)}const D=this.nextRow+b;this.nextRow+=w;const P={tl:[D,b],br:[A,0]};return this.positions[h]=P,P}}Kt(Z9,"LineAtlas");const x_e=yr.types,w_e=Math.cos(Math.PI/180*37.5),S_e=Math.cos(Math.PI/180*5);class cL{constructor(o){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.elevationType="none",this.zoom=o.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=o.overscaling,this.pixelRatio=o.pixelRatio,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Xo,this.layoutVertexArray2=new Yl,this.patternVertexArray=new Yl,this.indexArray=new Xa,this.programConfigurations=new H(o.layers,{zoom:o.zoom,lut:o.lut}),this.segments=new Ii,this.maxLineLength=0,this.zOffsetVertexArray=new Yl,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.tessellationStep=o.tessellationStep?o.tessellationStep:128,this.worldview=o.worldview,this.hasAppearances=null}updateFootprints(o,u){}updateAppearances(o,u,h,g){}populate(o,u,h,g){this.hasPattern=RT("line",this.layers,this.pixelRatio,u);const b=this.layers[0].layout.get("line-sort-key");this.tileToMeter=qt(h);const w=this.layers[0].layout.get("line-elevation-reference");if(w==="hd-road-markup")this.elevationType="road";else{const $=this.layers[0].layout.get("line-z-offset"),G=$.isConstant()&&!$.constantOr(0);this.elevationType=w!=="sea"&&w!=="ground"&&G?"none":"offset",this.elevationType==="offset"&&w==="none"&&Hn(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`)}const A=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.elevationType==="offset"&&A!==void 0;const D=[];for(const{feature:$,id:G,index:Z,sourceLayerIndex:se}of o){const fe=this.layers[0]._featureFilter.needGeometry,ue=Qn($,fe);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),ue,h))continue;const pe=b?b.evaluate(ue,{},h):void 0,ve={id:G,properties:$.properties,type:$.type,sourceLayerIndex:se,index:Z,geometry:fe?ue.geometry:Un($,h,g),patterns:{},sortKey:pe};D.push(ve)}b&&D.sort(($,G)=>$.sortKey-G.sortKey);const{lineAtlas:P,featureIndex:B}=u,j=this.addConstantDashes(P);for(const $ of D){const{geometry:G,index:Z,sourceLayerIndex:se}=$;if(j&&this.addFeatureDashes($,P),this.hasPattern){const fe=kT("line",this.layers,$,this.zoom,this.pixelRatio,u);this.patternFeatures.push(fe)}else this.addFeature($,G,Z,h,P.positions,u.availableImages,u.brightness,u.elevationFeatures);B.insert(o[Z].feature,G,Z,se,this.index)}}addConstantDashes(o){let u=!1;for(const h of this.layers){const g=h.paint.get("line-dasharray").value,b=h.layout.get("line-cap").value;if(g.kind!=="constant"||b.kind!=="constant")u=!0;else{const w=b.value,A=g.value;if(!A)continue;o.addDash(A,w)}}return u}addFeatureDashes(o,u){const h=this.zoom;for(const g of this.layers){const b=g.paint.get("line-dasharray").value,w=g.layout.get("line-cap").value;if(b.kind==="constant"&&w.kind==="constant")continue;let A,D;if(b.kind==="constant"){if(A=b.value,!A)continue}else A=b.evaluate({zoom:h},o);D=w.kind==="constant"?w.value:w.evaluate({zoom:h},o),u.addDash(A,D),o.patterns[g.id]=[u.getKey(A,D)]}}update(o,u,h,g,b,w,A,D){this.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A,D)}addFeatures(o,u,h,g,b,w){for(const A of this.patternFeatures)this.addFeature(A,A.geometry,A.index,u,h,g,w,o.elevationFeatures)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,__e)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=o.createVertexBuffer(this.patternVertexArray,b_e)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,m_e.members,!0)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,g_e),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o,u){let h,g;if(u&&u>0?(h=`mapbox_clip_start_${u}`,g=`mapbox_clip_end_${u}`):(h="mapbox_clip_start",g="mapbox_clip_end"),o.properties&&o.properties.hasOwnProperty(h)&&o.properties.hasOwnProperty(g))return{start:+o.properties[h],end:+o.properties[g]}}addFeature(o,u,h,g,b,w,A,D){const P=this.layers[0].layout,B=P.get("line-join").evaluate(o,{}),j=P.get("line-cap").evaluate(o,{}),$=P.get("line-miter-limit"),G=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(o),this.lineFeature=o;const Z=!(!o.properties||!o.properties.hasOwnProperty("mapbox_line_metrics"))&&o.properties.mapbox_line_metrics;this.zOffsetValue=P.get("line-z-offset").value;const se=this.layers[0].paint.get("line-width").value;if(se.kind!=="constant"&&se.isLineProgressConstant===!1&&(this.variableWidthValue=se),this.elevationType==="road"){const fe=this.layoutVertexArray.length;if(!this.addElevatedRoadFeature(o,u,g,D,B,j,$,G)){const[ue,pe]=this.clipRuntimeLinesToTile(u,1);for(let ve=0;ve<ue.length;ve++){const Se=ue[ve],ke=pe[ve],Ie={progress:{min:ke.progress.min,max:ke.progress.max},nextDir:this.computeSegNextDir(ke,Se),prevDir:this.computeSegPrevDir(ke,Se)};this.addLine(Se,o,g,B,j,$,G,Ie,Z&&ke.parentIndex>0?ke.parentIndex:null)}this.fillNonElevatedRoadSegment(fe)}}else for(let fe=0;fe<u.length;fe++)this.addLine(u[fe],o,g,B,j,$,G,void 0,Z&&fe>0?fe:null);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,b,w,g,A,void 0,this.worldview)}computeSegNextDir(o,u){return o.nextPoint.sub(u.at(-2)).unit()}computeSegPrevDir(o,u){return u[1].sub(o.prevPoint).unit()}clipLinesToTile(o,u){return _C(o,-u,-u,Jt+u,Jt+u)}clipRuntimeLinesToTile(o,u){const h=[];return[_C(o,-u,-u,Jt+u,Jt+u,h),h]}addElevatedRoadFeature(o,u,h,g,b,w,A,D){const P=[],B=Zo.getElevationFeature(o,g);if(B){const j=this.clipLinesToTile(u,1),$=this.prepareElevatedLines(j,B,h);for(const G of $)P.push({geometry:G,elevation:B,elevationTileID:h,segment:{progress:{min:0,max:1},nextDir:void 0,prevDir:void 0}})}if(P.length===0)return!1;for(const j of P){const $=this.layoutVertexArray.length;this.addLine(j.geometry,o,h,b,w,A,D);const G=new Il(h,j.elevationTileID);if(j.elevation)for(let Z=$;Z<this.layoutVertexArray.length;Z++){const se=new Vt(this.layoutVertexArray.int16[6*Z]>>1,this.layoutVertexArray.int16[6*Z+1]>>1),fe=G.pointElevation(se,j.elevation,.05);this.updateHeightRange(fe),this.zOffsetVertexArray.emplaceBack(fe,0,0)}else this.fillNonElevatedRoadSegment($)}return!0}prepareElevatedLines(o,u,h){if(u.constantHeight!=null)return o;const g=[],b=1/qt(h);for(const w of o)Iye(w,new ul(u,b),0,g);return g}fillNonElevatedRoadSegment(o){for(let u=o;u<this.layoutVertexArray.length;u++)this.zOffsetVertexArray.emplaceBack(0,0,0)}updateHeightRange(o){this.heightRange?(this.heightRange.min=Math.min(this.heightRange.min,o),this.heightRange.max=Math.max(this.heightRange.max,o)):this.heightRange={min:o,max:o}}addLine(o,u,h,g,b,w,A,D,P){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0,this.lineClips=P?this.lineFeatureClips(u,P):this.lineClips;const B=g==="none";this.patternJoinNone=this.hasPattern&&B,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[];const j=D&&D.progress.min>0,$=D&&D.progress.max<1;if(this.lineClips){let Ue={min:this.lineClips.start,max:this.lineClips.end},Ze=1;if(D){const xt=this.lineClips.end-this.lineClips.start;Ue=(function(Tt,kt,Pt){return{min:bo(Tt.min,kt,Pt),max:bo(Tt.max,kt,Pt)}})(D.progress,{min:0,max:1},Ue),xt>0&&(Ze=(Ue.max-Ue.min)/xt)}const rt=+u.properties.mapbox_clip_feature_len,Et=+u.properties.mapbox_clip_seg_len;if(Number.isNaN(rt)||Number.isNaN(Et)){for(let Tt=0;Tt<o.length-1;Tt++)this.totalDistance+=o[Tt].dist(o[Tt+1]);const xt=this.totalDistance/(Ue.max-Ue.min);this.totalFeatureLength=Number.isFinite(xt)?xt:0,this.lineClips.start=Ue.min,this.lineClips.end=Ue.max,this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}else this.totalFeatureLength=rt,this.distance=Et*Ze,this.lineClips.start=Ue.min,this.lineClips.end=Ue.max,this.maxLineLength=Math.max(this.maxLineLength,this.distance);this.lineClipsArray.push(this.lineClips),this.updateScaledDistance()}const G=x_e[u.type]==="Polygon";let Z=o.length;for(;Z>=2&&o[Z-1].equals(o[Z-2]);)Z--;let se=0;for(;se<Z-1&&o[se].equals(o[se+1]);)se++;if(Z<(G?3:2))return;g==="bevel"&&(w=1.05);const fe=this.segments.prepareSegment(10*Z,this.layoutVertexArray,this.indexArray);let ue,pe,ve,Se,ke,Ie,Ve,qe;D&&D.prevDir&&(Ie=D.prevDir.perp()),D&&D.nextDir&&(Ve=D.nextDir.perp()),this.e1=this.e2=-1,G&&(ue=o[Z-2],ke=o[se].sub(ue)._unit()._perp());for(let Ue=se;Ue<Z;Ue++){if(ve=Ue===Z-1?G?o[se+1]:void 0:o[Ue+1],ve&&o[Ue].equals(ve))continue;ke&&(Se=ke),ue&&(pe=ue),ue=o[Ue],qe=this.evaluateLineProgressFeatures(pe?pe.dist(ue):0),ke=ve?ve.sub(ue)._unit()._perp():Se,Se=Se||ke;const Ze=pe&&ve;let rt=Ze?g:G||B?"butt":b;const Et=Se.x*ke.x+Se.y*ke.y;if(B){const Mt=function(Ft){if(Ft.patternJoinNone){const Lt=Ft.segmentPoints.length/2,fn=Ft.lineSoFar-Ft.segmentStart;for(let pn=0;pn<Lt;++pn){const nn=Ft.segmentPoints[2*pn+1],an=Math.round(Ft.segmentPoints[2*pn])+.5+.25*nn;Ft.patternVertexArray.emplaceBack(an,fn,Ft.segmentStart),Ft.patternVertexArray.emplaceBack(an,fn,Ft.segmentStart)}Ft.segmentPoints.length=0}Ft.e1=Ft.e2=-1};if(Ze&&Et<S_e){this.updateDistance(pe,ue),this.addCurrentVertex(ue,Se,1,1,fe,qe),Mt(this),this.addCurrentVertex(ue,ke,-1,-1,fe,qe);continue}if(pe){if(!ve){this.updateDistance(pe,ue),this.addCurrentVertex(ue,Se,1,1,fe,qe),Mt(this);continue}rt="miter"}}let xt=Se.add(ke);xt.x===0&&xt.y===0||xt._unit();const Tt=xt.x*ke.x+xt.y*ke.y,kt=Tt!==0?1/Tt:1/0,Pt=2*Math.sqrt(2-2*Tt),Rt=Tt<w_e&&pe&&ve,vt=Se.x*ke.y-Se.y*ke.x>0,zt=this.overscaling<=16?122880/(512*this.overscaling):0;if(Ze&&rt==="round"){if(kt<A)rt="miter";else if(kt<=2){const Mt=fL(ue,-10,8202);rt=this.elevationType==="offset"&&(Mt||this.hasCrossSlope)?"miter":"fakeround"}}if(rt==="miter"&&kt>w&&(rt="bevel"),rt==="bevel"&&(kt>2&&(rt="flipbevel"),kt<w&&(rt="miter")),pe&&!(rt==="miter"&&Rt)&&this.updateDistance(pe,ue),rt==="miter")if(Rt){const Mt=ue.dist(pe);if(Mt>2*zt){const Lt=ue.sub(ue.sub(pe)._mult(zt/Mt)._round());this.updateDistance(pe,Lt),this.addCurrentVertex(Lt,Se,0,0,fe,qe),pe=Lt}this.updateDistance(pe,ue),xt._mult(kt),this.addCurrentVertex(ue,xt,0,0,fe,qe);const Ft=ue.dist(ve);if(Ft>2*zt){const Lt=ue.add(ve.sub(ue)._mult(zt/Ft)._round());this.updateDistance(ue,Lt),this.addCurrentVertex(Lt,ke,0,0,fe,qe),ue=Lt}}else xt._mult(kt),this.addCurrentVertex(ue,xt,0,0,fe,qe);else if(rt==="flipbevel"){if(kt>100)xt=ke.mult(-1);else{const Mt=kt*Se.add(ke).mag()/Se.sub(ke).mag();xt._perp()._mult(Mt*(vt?-1:1))}this.addCurrentVertex(ue,xt,0,0,fe,qe),this.addCurrentVertex(ue,xt.mult(-1),0,0,fe,qe)}else if(rt==="bevel"||rt==="fakeround"){qe!=null&&pe&&this.addCurrentVertex(ue,Ve||Se,-1,-1,fe,qe);const Mt=ue.dist(pe)<=2*zt&&rt!=="bevel",Ft=xt.mult(vt?1:-1);Ft._mult(kt);const Lt=ke.mult(vt?-1:1),fn=Se.mult(vt?-1:1),pn=this.evaluateLineProgressFeatures(this.distance);if(qe==null&&(this.addHalfVertex(ue,Ft.x,Ft.y,!1,!vt,0,fe,pn),Mt||this.addHalfVertex(ue,Ft.x+2*fn.x,Ft.y+2*fn.y,!1,vt,0,fe,pn)),rt==="fakeround"){const nn=Math.round(180*Pt/Math.PI/20);this.addHalfVertex(ue,fn.x,fn.y,!1,vt,0,fe,pn);for(let an=0;an<nn;an++){let kn=an/nn;if(kn!==.5){const cn=kn-.5;kn+=kn*cn*(kn-1)*((1.0904+Et*(Et*(3.55645-1.43519*Et)-3.2452))*cn*cn+(.848013+Et*(.215638*Et-1.06021)))}const On=Lt.sub(fn)._mult(kn)._add(fn)._unit();this.addHalfVertex(ue,On.x,On.y,!1,vt,0,fe,pn)}this.addHalfVertex(ue,Lt.x,Lt.y,!1,vt,0,fe,pn)}Mt||qe!=null||this.addHalfVertex(ue,Ft.x+2*Lt.x,Ft.y+2*Lt.y,!1,vt,0,fe,pn),qe!=null&&ve&&this.addCurrentVertex(ue,Ie||ke,1,1,fe,qe)}else if(rt==="butt")this.addCurrentVertex(ue,xt,0,0,fe,qe);else if(rt==="square"){if(!pe){const Mt=j?0:-1;this.addCurrentVertex(ue,xt,Mt,Mt,fe,qe)}if(this.addCurrentVertex(ue,xt,0,0,fe,qe),pe){const Mt=$?0:1;this.addCurrentVertex(ue,xt,Mt,Mt,fe,qe)}}else if(rt==="round"){if(pe){const Mt=!Ze&&Ve?Ve:Se;this.addCurrentVertex(ue,Mt,0,0,fe,qe),!Ze&&$||this.addCurrentVertex(ue,Mt,1,1,fe,qe,!0)}if(ve){const Mt=!Ze&&Ie?Ie:ke;!Ze&&j||this.addCurrentVertex(ue,Mt,-1,-1,fe,qe,!0),this.addCurrentVertex(ue,Mt,0,0,fe,qe)}}}}addVerticesTo(o,u,h,g,b,w,A,D,P,B){const j=(u.w-o.w)/this.tessellationStep|0;let $=0;const G=this.scaledDistance;if(j>1){this.lineSoFar=o.w;const se=(u.x-o.x)/j,fe=(u.y-o.y)/j,ue=(u.z-o.z)/j,pe=(u.w-o.w)/j;for(let ve=1;ve<j;++ve){o.x+=se,o.y+=fe,o.z+=ue,this.lineSoFar+=pe,$+=pe;const Se=this.evaluateLineProgressFeatures(this.prevDistance+$);this.scaledDistance=(this.prevDistance+$)/this.totalDistance,this.addHalfVertex(o,h,g,B,!1,A,P,Se),this.addHalfVertex(o,b,w,B,!0,-D,P,Se)}}this.lineSoFar=u.w,this.scaledDistance=G;const Z=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(u,h,g,B,!1,A,P,Z),this.addHalfVertex(u,b,w,B,!0,-D,P,Z)}evaluateLineProgressFeatures(o){if(!this.variableWidthValue&&this.elevationType!=="offset")return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+o)/this.totalFeatureLength):Hn(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let u=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(u=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.elevationType!=="offset"?{zOffset:0,variableWidth:u}:this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:u}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:u}}addCurrentVertex(o,u,h,g,b,w,A=!1){const D=u.x+u.y*h,P=u.y-u.x*h,B=u.y*g-u.x,j=-u.y-u.x*g;if(w!=null){const $=this.elevationType==="offset",G=-10,Z=8202,se=w.zOffset,fe=new h9(o.x,o.y,se,this.lineSoFar),ue=!!$&&fL(o,G,Z),pe=this.lineSoFar,ve=this.distance;if(this.currentVertex)if(ue){const Se=this.currentVertexIsOutside,ke=this.currentVertex,Ie=new h9(o.x,o.y,se,this.lineSoFar);if(p9(ke,Ie,G,Z),!fL(Ie,G,Z)){if(Se){this.e1=this.e2=-1,this.distance-=ke.dist(fe),this.lineSoFar=ke.w;const Ve=this.evaluateLineProgressFeatures(ke.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(ke,D,P,A,!1,h,b,Ve),this.addHalfVertex(ke,B,j,A,!0,-g,b,Ve),this.prevDistance=this.distance}this.distance=this.prevDistance+ke.dist(Ie),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(ke,Ie,D,P,B,j,h,g,b,A),this.distance=ve,this.scaledDistance=this.distance/this.totalDistance}}else{const Se=this.currentVertex;if(this.currentVertexIsOutside){p9(Se,fe,G,Z),this.e1=this.e2=-1,this.distance-=Se.dist(fe),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=Se.w;const ke=this.evaluateLineProgressFeatures(Se.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(Se,D,P,A,!1,h,b,ke),this.addHalfVertex(Se,B,j,A,!0,-g,b,ke),this.prevDistance=this.distance,this.distance=ve,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(Se,fe,D,P,B,j,h,g,b,A)}else ue||(this.addHalfVertex(o,D,P,A,!1,h,b,w),this.addHalfVertex(o,B,j,A,!0,-g,b,w));this.currentVertex=fe,this.currentVertexIsOutside=ue,this.lineSoFar=pe}else this.addHalfVertex(o,D,P,A,!1,h,b,w),this.addHalfVertex(o,B,j,A,!0,-g,b,w)}addHalfVertex({x:o,y:u},h,g,b,w,A,D,P){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),w||this.segmentPoints.push(this.lineSoFar-this.segmentStart,A)),this.layoutVertexArray.emplaceBack((o<<1)+(b?1:0),(u<<1)+(w?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(A===0?0:A<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const j=Vn(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,j)}const B=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,B),D.primitiveLength++),w?this.e2=B:this.e1=B,P!=null&&this.zOffsetVertexArray.emplaceBack(P.zOffset,P.variableWidth,P.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(o,u){this.prevDistance=this.distance,this.distance+=o.dist(u),this.updateScaledDistance()}}function fL(c,o,u){return c.x<o||c.x>u||c.y<o||c.y>u}let K9,Q9;function J9(c,o,u){return o*(Jt/(c.tileSize*Math.pow(2,u-c.tileID.overscaledZ)))}Kt(cL,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const eH=(c,o,u)=>(1-u)*c+u*o;function tH(c,o){return 1/J9(c,1,o.tileZoom)}function nH(c,o,u,h){return c.translatePosMatrix(h||o.tileID.projMatrix,o,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const rH=c=>{const o=[];iH(c)&&o.push("RENDER_LINE_DASH"),c.paint.get("line-gradient")&&o.push("RENDER_LINE_GRADIENT");const u=c.paint.get("line-trim-offset");u[0]===0&&u[1]===0||o.push("RENDER_LINE_TRIM_OFFSET"),c.paint.get("line-border-width").constantOr(1)!==0&&o.push("RENDER_LINE_BORDER");const h=c.layout.get("line-join").constantOr("miter")==="none",g=!!c.paint.get("line-pattern").constantOr(1);return h&&g&&o.push("LINE_JOIN_NONE"),o};function iH(c){const o=c.paint.get("line-dasharray").value;return o.kind!=="constant"||o.value}let hL;const aH=()=>hL||(hL={layout:K9||(K9=new Ui({"line-cap":new on(ht.layout_line["line-cap"]),"line-join":new on(ht.layout_line["line-join"]),"line-miter-limit":new Xt(ht.layout_line["line-miter-limit"]),"line-round-limit":new Xt(ht.layout_line["line-round-limit"]),"line-sort-key":new on(ht.layout_line["line-sort-key"]),"line-z-offset":new on(ht.layout_line["line-z-offset"]),"line-elevation-reference":new Xt(ht.layout_line["line-elevation-reference"]),"line-cross-slope":new Xt(ht.layout_line["line-cross-slope"]),visibility:new Xt(ht.layout_line.visibility),"line-width-unit":new Xt(ht.layout_line["line-width-unit"])})),paint:Q9||(Q9=new Ui({"line-opacity":new on(ht.paint_line["line-opacity"]),"line-color":new on(ht.paint_line["line-color"]),"line-translate":new Xt(ht.paint_line["line-translate"]),"line-translate-anchor":new Xt(ht.paint_line["line-translate-anchor"]),"line-width":new on(ht.paint_line["line-width"]),"line-gap-width":new on(ht.paint_line["line-gap-width"]),"line-offset":new on(ht.paint_line["line-offset"]),"line-blur":new on(ht.paint_line["line-blur"]),"line-dasharray":new on(ht.paint_line["line-dasharray"]),"line-pattern":new on(ht.paint_line["line-pattern"]),"line-pattern-cross-fade":new Xt(ht.paint_line["line-pattern-cross-fade"]),"line-gradient":new jd(ht.paint_line["line-gradient"]),"line-trim-offset":new Xt(ht.paint_line["line-trim-offset"]),"line-trim-fade-range":new Xt(ht.paint_line["line-trim-fade-range"]),"line-trim-color":new Xt(ht.paint_line["line-trim-color"]),"line-emissive-strength":new on(ht.paint_line["line-emissive-strength"]),"line-border-width":new on(ht.paint_line["line-border-width"]),"line-border-color":new on(ht.paint_line["line-border-color"]),"line-occlusion-opacity":new Xt(ht.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},hL);class T_e extends on{possiblyEvaluate(o,u){return u=new Jr(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,transition:u.transition,worldview:u.worldview}),super.possiblyEvaluate(o,u)}evaluate(o,u,h,g){return u=Object.assign({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(o,u,h,g)}}let KT;function oH(c,o){return o>0?o+2*c:c}const E_e=gr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),A_e=gr([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),O_e=gr([{name:"a_projected_pos",components:4,type:"Float32"}],4);gr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const C_e=gr([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),M_e=gr([{name:"a_x_axis",components:3,type:"Float32"},{name:"a_y_axis",components:3,type:"Float32"}]),D_e=gr([{name:"a_texb",components:2,type:"Uint16"}]),I_e=gr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),P_e=gr([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);gr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const sH=gr([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),R_e=gr([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);gr([{name:"triangle",components:3,type:"Uint16"}]),gr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),gr([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),gr([{type:"Float32",name:"offsetX"}]),gr([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Qo=24;function k_e(c,o,u){return c.sections.forEach(h=>{h.text=(function(g,b,w){const A=b.layout.get("text-transform").evaluate(w,{});return A==="uppercase"?g=g.toLocaleUpperCase():A==="lowercase"&&(g=g.toLocaleLowerCase()),Ol.applyArabicShaping&&(g=Ol.applyArabicShaping(g)),g})(h.text,o,u)}),c}const QT={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function L_e(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}function z_e(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}const dL=4294967296,lH=1/dL,uH=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");let MC=class{constructor(c=new Uint8Array(16)){this.buf=ArrayBuffer.isView(c)?c:new Uint8Array(c),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(c,o,u=this.length){for(;this.pos<u;){const h=this.readVarint(),g=h>>3,b=this.pos;this.type=7&h,c(g,o,this),this.pos===b&&this.skip(h)}return o}readMessage(c,o){return this.readFields(c,o,this.readVarint()+this.pos)}readFixed32(){const c=this.dataView.getUint32(this.pos,!0);return this.pos+=4,c}readSFixed32(){const c=this.dataView.getInt32(this.pos,!0);return this.pos+=4,c}readFixed64(){const c=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*dL;return this.pos+=8,c}readSFixed64(){const c=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*dL;return this.pos+=8,c}readFloat(){const c=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,c}readDouble(){const c=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,c}readVarint(c){const o=this.buf;let u,h;return h=o[this.pos++],u=127&h,h<128?u:(h=o[this.pos++],u|=(127&h)<<7,h<128?u:(h=o[this.pos++],u|=(127&h)<<14,h<128?u:(h=o[this.pos++],u|=(127&h)<<21,h<128?u:(h=o[this.pos],u|=(15&h)<<28,(function(g,b,w){const A=w.buf;let D,P;if(P=A[w.pos++],D=(112&P)>>4,P<128||(P=A[w.pos++],D|=(127&P)<<3,P<128)||(P=A[w.pos++],D|=(127&P)<<10,P<128)||(P=A[w.pos++],D|=(127&P)<<17,P<128)||(P=A[w.pos++],D|=(127&P)<<24,P<128)||(P=A[w.pos++],D|=(1&P)<<31,P<128))return L1(g,D,b);throw new Error("Expected varint not more than 10 bytes")})(u,c,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const c=this.readVarint();return c%2==1?(c+1)/-2:c/2}readBoolean(){return!!this.readVarint()}readString(){const c=this.readVarint()+this.pos,o=this.pos;return this.pos=c,c-o>=12&&uH?uH.decode(this.buf.subarray(o,c)):(function(u,h,g){let b="",w=h;for(;w<g;){const A=u[w];let D,P,B,j=null,$=A>239?4:A>223?3:A>191?2:1;if(w+$>g)break;$===1?A<128&&(j=A):$===2?(D=u[w+1],(192&D)==128&&(j=(31&A)<<6|63&D,j<=127&&(j=null))):$===3?(D=u[w+1],P=u[w+2],(192&D)==128&&(192&P)==128&&(j=(15&A)<<12|(63&D)<<6|63&P,(j<=2047||j>=55296&&j<=57343)&&(j=null))):$===4&&(D=u[w+1],P=u[w+2],B=u[w+3],(192&D)==128&&(192&P)==128&&(192&B)==128&&(j=(15&A)<<18|(63&D)<<12|(63&P)<<6|63&B,(j<=65535||j>=1114112)&&(j=null))),j===null?(j=65533,$=1):j>65535&&(j-=65536,b+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),b+=String.fromCharCode(j),w+=$}return b})(this.buf,o,c)}readBytes(){const c=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,c);return this.pos=c,o}readPackedVarint(c=[],o){const u=this.readPackedEnd();for(;this.pos<u;)c.push(this.readVarint(o));return c}readPackedSVarint(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readSVarint());return c}readPackedBoolean(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readBoolean());return c}readPackedFloat(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readFloat());return c}readPackedDouble(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readDouble());return c}readPackedFixed32(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readFixed32());return c}readPackedSFixed32(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readSFixed32());return c}readPackedFixed64(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readFixed64());return c}readPackedSFixed64(c=[]){const o=this.readPackedEnd();for(;this.pos<o;)c.push(this.readSFixed64());return c}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(c){const o=7&c;if(o===0)for(;this.buf[this.pos++]>127;);else if(o===2)this.pos=this.readVarint()+this.pos;else if(o===5)this.pos+=4;else{if(o!==1)throw new Error(`Unimplemented type: ${o}`);this.pos+=8}}writeTag(c,o){this.writeVarint(c<<3|o)}realloc(c){let o=this.length||16;for(;o<this.pos+c;)o*=2;if(o!==this.length){const u=new Uint8Array(o);u.set(this.buf),this.buf=u,this.dataView=new DataView(u.buffer),this.length=o}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(c){this.realloc(4),this.dataView.setInt32(this.pos,c,!0),this.pos+=4}writeSFixed32(c){this.realloc(4),this.dataView.setInt32(this.pos,c,!0),this.pos+=4}writeFixed64(c){this.realloc(8),this.dataView.setInt32(this.pos,-1&c,!0),this.dataView.setInt32(this.pos+4,Math.floor(c*lH),!0),this.pos+=8}writeSFixed64(c){this.realloc(8),this.dataView.setInt32(this.pos,-1&c,!0),this.dataView.setInt32(this.pos+4,Math.floor(c*lH),!0),this.pos+=8}writeVarint(c){(c=+c||0)>268435455||c<0?(function(o,u){let h,g;if(o>=0?(h=o%4294967296|0,g=o/4294967296|0):(h=~(-o%4294967296),g=~(-o/4294967296),4294967295^h?h=h+1|0:(h=0,g=g+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),(function(b,w,A){A.buf[A.pos++]=127&b|128,b>>>=7,A.buf[A.pos++]=127&b|128,b>>>=7,A.buf[A.pos++]=127&b|128,b>>>=7,A.buf[A.pos++]=127&b|128,A.buf[A.pos]=127&(b>>>=7)})(h,0,u),(function(b,w){const A=(7&b)<<4;w.buf[w.pos++]|=A|((b>>>=3)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b)))))})(g,u)})(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))}writeSVarint(c){this.writeVarint(c<0?2*-c-1:2*c)}writeBoolean(c){this.writeVarint(+c)}writeString(c){c=String(c),this.realloc(4*c.length),this.pos++;const o=this.pos;this.pos=(function(h,g,b){for(let w,A,D=0;D<g.length;D++){if(w=g.charCodeAt(D),w>55295&&w<57344){if(!A){w>56319||D+1===g.length?(h[b++]=239,h[b++]=191,h[b++]=189):A=w;continue}if(w<56320){h[b++]=239,h[b++]=191,h[b++]=189,A=w;continue}w=A-55296<<10|w-56320|65536,A=null}else A&&(h[b++]=239,h[b++]=191,h[b++]=189,A=null);w<128?h[b++]=w:(w<2048?h[b++]=w>>6|192:(w<65536?h[b++]=w>>12|224:(h[b++]=w>>18|240,h[b++]=w>>12&63|128),h[b++]=w>>6&63|128),h[b++]=63&w|128)}return b})(this.buf,c,this.pos);const u=this.pos-o;u>=128&&cH(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u}writeFloat(c){this.realloc(4),this.dataView.setFloat32(this.pos,c,!0),this.pos+=4}writeDouble(c){this.realloc(8),this.dataView.setFloat64(this.pos,c,!0),this.pos+=8}writeBytes(c){const o=c.length;this.writeVarint(o),this.realloc(o);for(let u=0;u<o;u++)this.buf[this.pos++]=c[u]}writeRawMessage(c,o){this.pos++;const u=this.pos;c(o,this);const h=this.pos-u;h>=128&&cH(u,h,this),this.pos=u-1,this.writeVarint(h),this.pos+=h}writeMessage(c,o,u){this.writeTag(c,2),this.writeRawMessage(o,u)}writePackedVarint(c,o){o.length&&this.writeMessage(c,F_e,o)}writePackedSVarint(c,o){o.length&&this.writeMessage(c,N_e,o)}writePackedBoolean(c,o){o.length&&this.writeMessage(c,U_e,o)}writePackedFloat(c,o){o.length&&this.writeMessage(c,B_e,o)}writePackedDouble(c,o){o.length&&this.writeMessage(c,j_e,o)}writePackedFixed32(c,o){o.length&&this.writeMessage(c,$_e,o)}writePackedSFixed32(c,o){o.length&&this.writeMessage(c,V_e,o)}writePackedFixed64(c,o){o.length&&this.writeMessage(c,q_e,o)}writePackedSFixed64(c,o){o.length&&this.writeMessage(c,H_e,o)}writeBytesField(c,o){this.writeTag(c,2),this.writeBytes(o)}writeFixed32Field(c,o){this.writeTag(c,5),this.writeFixed32(o)}writeSFixed32Field(c,o){this.writeTag(c,5),this.writeSFixed32(o)}writeFixed64Field(c,o){this.writeTag(c,1),this.writeFixed64(o)}writeSFixed64Field(c,o){this.writeTag(c,1),this.writeSFixed64(o)}writeVarintField(c,o){this.writeTag(c,0),this.writeVarint(o)}writeSVarintField(c,o){this.writeTag(c,0),this.writeSVarint(o)}writeStringField(c,o){this.writeTag(c,2),this.writeString(o)}writeFloatField(c,o){this.writeTag(c,5),this.writeFloat(o)}writeDoubleField(c,o){this.writeTag(c,1),this.writeDouble(o)}writeBooleanField(c,o){this.writeVarintField(c,+o)}};function L1(c,o,u){return u?4294967296*o+(c>>>0):4294967296*(o>>>0)+(c>>>0)}function cH(c,o,u){const h=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));u.realloc(h);for(let g=u.pos-1;g>=c;g--)u.buf[g+h]=u.buf[g]}function F_e(c,o){for(let u=0;u<c.length;u++)o.writeVarint(c[u])}function N_e(c,o){for(let u=0;u<c.length;u++)o.writeSVarint(c[u])}function B_e(c,o){for(let u=0;u<c.length;u++)o.writeFloat(c[u])}function j_e(c,o){for(let u=0;u<c.length;u++)o.writeDouble(c[u])}function U_e(c,o){for(let u=0;u<c.length;u++)o.writeBoolean(c[u])}function $_e(c,o){for(let u=0;u<c.length;u++)o.writeFixed32(c[u])}function V_e(c,o){for(let u=0;u<c.length;u++)o.writeSFixed32(c[u])}function q_e(c,o){for(let u=0;u<c.length;u++)o.writeFixed64(c[u])}function H_e(c,o){for(let u=0;u<c.length;u++)o.writeSFixed64(c[u])}function G_e(c,o,u){o.glyphs=[],c===1&&u.readMessage(Y_e,o)}function Y_e(c,o,u){if(c===3){const{id:h,bitmap:g,width:b,height:w,left:A,top:D,advance:P}=u.readMessage(W_e,{});o.glyphs.push({id:h,bitmap:new Ph({width:b+6,height:w+6},g),metrics:{width:b,height:w,left:A,top:D,advance:P}})}else c===4?o.ascender=u.readSVarint():c===5&&(o.descender=u.readSVarint())}function W_e(c,o,u){c===1?o.id=u.readVarint():c===2?o.bitmap=u.readBytes():c===3?o.width=u.readVarint():c===4?o.height=u.readVarint():c===5?o.left=u.readSVarint():c===6?o.top=u.readSVarint():c===7&&(o.advance=u.readVarint())}const sc={horizontal:1,vertical:2,horizontalOnly:3};class JT{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(o,u){const h=new JT;return h.scale=o||1,h.fontStack=u,h}static forImage(o){const u=new JT;return u.image=o,u}}class z1{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,u,h){const g=new z1;for(let b=0;b<o.sections.length;b++){const w=o.sections[b];w.image?g.addImageSection(w,h):g.addTextSection(w,u)}return g}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCodePoint(o){return this.text.codePointAt(o)}verticalizePunctuation(o){this.text=(function(u,h){let g="";for(let b=0;b<u.length;b++){const w=u.charCodeAt(b+1)||null,A=u.charCodeAt(b-1)||null;g+=!h&&(w&&L0(w)&&!QT[u[b+1]]||A&&L0(A)&&!QT[u[b-1]])||!QT[u[b]]?u[b]:QT[u[b]]}return g})(this.text,o)}trim(){let o=0;for(let h=0;h<this.text.length&&DC[this.text.charCodeAt(h)];h++)o++;let u=this.text.length;for(let h=this.text.length-1;h>=0&&h>=o&&DC[this.text.charCodeAt(h)];h--)u--;this.text=this.text.substring(o,u),this.sectionIndex=this.sectionIndex.slice(o,u)}substring(o,u){const h=new z1;return h.text=this.text.substring(o,u),h.sectionIndex=this.sectionIndex.slice(o,u),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,u)=>Math.max(o,this.sections[u].scale),0)}addTextSection(o,u){this.text+=o.text,this.sections.push(JT.forText(o.scale,o.fontStack||u));const h=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(h)}addImageSection(o,u){const h=o.image?o.image.getPrimary():null;if(!h)return void Hn("Can't add FormattedSection with an empty image.");h.scaleSelf(u);const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCodePoint(g),this.sections.push(JT.forImage(h)),this.sectionIndex.push(this.sections.length-1)):Hn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function pL(c,o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se=1){const fe=z1.fromFeature(c,g,se);j===sc.vertical&&fe.verticalizePunctuation($);let ue=[];const pe=(function(Ve,qe,Ue,Ze,rt,Et){if(!Ve)return[];const xt=[],Tt=(function(Rt,vt,zt,Mt,Ft,Lt){let fn=0;for(let pn=0;pn<Rt.length();pn++){const nn=Rt.getSection(pn);fn+=fH(Rt.getCodePoint(pn),nn,Mt,Ft,vt,Lt)}return fn/Math.max(1,Math.ceil(fn/zt))})(Ve,qe,Ue,Ze,rt,Et),kt=Ve.text.indexOf("")>=0;let Pt=0;for(let Rt=0;Rt<Ve.length();Rt++){const vt=Ve.getSection(Rt),zt=Ve.getCodePoint(Rt);if(DC[zt]||(Pt+=fH(zt,vt,Ze,rt,qe,Et)),Rt<Ve.length()-1){const Mt=R0(zt);(X_e[zt]||Mt||vt.image)&&xt.push(dH(Rt+1,Pt,Tt,xt,Z_e(zt,Ve.getCodePoint(Rt+1),Mt&&kt),!1))}}return pH(dH(Ve.length(),Pt,Tt,xt,0,!0))})(fe,P,b,o,h,G),{processBidirectionalText:ve,processStyledBidirectionalText:Se}=Ol;if(ve&&fe.sections.length===1){const Ve=ve(fe.toString(),pe);for(const qe of Ve){const Ue=new z1;Ue.text=qe,Ue.sections=fe.sections;for(let Ze=0;Ze<qe.length;Ze++)Ue.sectionIndex.push(0);ue.push(Ue)}}else if(Se){const Ve=Se(fe.text,fe.sectionIndex,pe);for(const qe of Ve){const Ue=new z1;Ue.text=qe[0],Ue.sectionIndex=qe[1],Ue.sections=fe.sections,ue.push(Ue)}}else ue=(function(Ve,qe){const Ue=[],Ze=Ve.text;let rt=0;for(const Et of qe)Ue.push(Ve.substring(rt,Et)),rt=Et;return rt<Ze.length&&Ue.push(Ve.substring(rt,Ze.length)),Ue})(fe,pe);const ke=[],Ie={positionedLines:ke,text:fe.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:j,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if((function(Ve,qe,Ue,Ze,rt,Et,xt,Tt,kt,Pt,Rt,vt){let zt=0,Mt=0,Ft=0;const Lt=Tt==="right"?1:Tt==="left"?0:.5;let fn=!1;for(const On of rt){const cn=On.getSections();for(const Wn of cn){if(Wn.image)continue;const vr=qe[Wn.fontStack];if(vr&&(fn=vr.ascender!==void 0&&vr.descender!==void 0,!fn))break}if(!fn)break}let pn=0;for(const On of rt){On.trim();const cn=On.getMaxScale(),Wn=(cn-1)*Qo,vr={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[pn]=vr;const Zr=vr.positionedGlyphs;let pr=0;if(!On.length()){Mt+=Et,++pn;continue}let di=0,Lr=0;for(let $r=0;$r<On.length();$r++){const ui=On.getSection($r),Vi=On.getSectionIndex($r),ta=On.getCodePoint($r);let na=ui.scale,ka=null,fs=null,Hs=null,fo=Qo,Ao=0,qo=kt;qo===sc.vertical&&k0(ta)&&(qo=sc.horizontal);const fr=!(qo===sc.horizontal||!Rt&&!Bc(ta)||Rt&&(DC[ta]||Xg(ta)));if(ui.image){const ra=Ze.get(ui.image.toString());if(!ra)continue;Hs=ui.image,Ve.iconsInText=Ve.iconsInText||!0,fs=ra.paddedRect;const va=ra.displaySize;na=na*Qo/vt,ka={width:va[0],height:va[1],left:0,top:-3,advance:fr?va[1]:va[0],localGlyph:!1},Ao=fn?-ka.height*na:cn*Qo-17-va[1]*na,fo=ka.advance;const lc=(fr?va[0]:va[1])*na-Qo*cn;lc>0&&lc>pr&&(pr=lc)}else{const ra=Ue[ui.fontStack];if(!ra)continue;ra[ta]&&(fs=ra[ta]);const va=qe[ui.fontStack];if(!va)continue;const lc=va.glyphs[ta];if(!lc)continue;if(ka=lc.metrics,fo=ta!==8203?Qo:0,fn){const Rl=va.ascender!==void 0?Math.abs(va.ascender):0,hs=va.descender!==void 0?Math.abs(va.descender):0,kl=(Rl+hs)*na;di<kl&&(di=kl,Lr=(Rl-hs)/2*na),Ao=-Rl*na}else Ao=(cn-na)*Qo-17}fr?(Ve.verticalizable=!0,Zr.push({glyph:ta,image:Hs,x:zt,y:Mt+Ao,vertical:fr,scale:na,localGlyph:ka.localGlyph,fontStack:ui.fontStack,sectionIndex:Vi,metrics:ka,rect:fs}),zt+=fo*na+Pt):(Zr.push({glyph:ta,image:Hs,x:zt,y:Mt+Ao,vertical:fr,scale:na,localGlyph:ka.localGlyph,fontStack:ui.fontStack,sectionIndex:Vi,metrics:ka,rect:fs}),zt+=ka.advance*na+Pt)}Zr.length!==0&&(Ft=Math.max(zt-Pt,Ft),fn?mH(Zr,Lt,pr,Lr,Et*cn/2):mH(Zr,Lt,pr,0,Et/2)),zt=0;const Ra=Et*cn+pr;vr.lineOffset=Math.max(pr,Wn),Mt+=Ra,++pn}const nn=Mt,{horizontalAlign:an,verticalAlign:kn}=mL(xt);(function(On,cn,Wn,vr,Zr,pr){const di=(cn-Wn)*Zr,Lr=-pr*vr;for(const Ra of On)for(const $r of Ra.positionedGlyphs)$r.x+=di,$r.y+=Lr})(Ve.positionedLines,Lt,an,kn,Ft,nn),Ve.top+=-kn*nn,Ve.bottom=Ve.top+nn,Ve.left+=-an*Ft,Ve.right=Ve.left+Ft,Ve.hasBaseline=fn})(Ie,o,u,h,ue,w,A,D,j,P,$,Z),!(function(Ve){for(const qe of Ve)if(qe.positionedGlyphs.length!==0)return!1;return!0})(ke))return Ie}const DC={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},X_e={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function fH(c,o,u,h,g,b){if(o.image){const w=h.get(o.image.toString());return w?w.displaySize[0]*o.scale*Qo/b+g:0}{const w=u[o.fontStack],A=w&&w.glyphs[c];return A?A.metrics.advance*o.scale+g:0}}function hH(c,o,u,h){const g=Math.pow(c-o,2);return h?c<o?g/2:2*g:g+Math.abs(u)*u}function Z_e(c,o,u){let h=0;return c===10&&(h-=1e4),u&&(h+=150),c!==40&&c!==65288||(h+=50),o!==41&&o!==65289||(h+=50),h}function dH(c,o,u,h,g,b){let w=null,A=hH(o,u,g,b);for(const D of h){const P=hH(o-D.x,u,g,b)+D.badness;P<=A&&(w=D,A=P)}return{index:c,x:o,priorBreak:w,badness:A}}function pH(c){return c?pH(c.priorBreak).concat(c.index):[]}function mL(c){let o=.5,u=.5;switch(c){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:o,verticalAlign:u}}function mH(c,o,u,h,g){if(!(o||u||h||g))return;const b=c.length-1,w=c[b],A=(w.x+w.metrics.advance*w.scale)*o;for(let D=0;D<=b;D++)c[D].x-=A,c[D].y+=u+h+g}function gL(c){return c.imagePrimary!==void 0&&c.top!==void 0&&c.bottom!==void 0&&c.left!==void 0&&c.right!==void 0}function IC(c,o,u,h){const{horizontalAlign:g,verticalAlign:b}=mL(h),w=u[0]-c.displaySize[0]*g,A=u[1]-c.displaySize[1]*b;return{imagePrimary:c,imageSecondary:o,top:A,bottom:A+c.displaySize[1],left:w,right:w+c.displaySize[0]}}function yL(c,o,u,h,g,b){const w=c.imagePrimary;let A;if(w.content){const fe=w.content,ue=w.pixelRatio||1;A=[fe[0]/ue,fe[1]/ue,w.displaySize[0]-fe[2]/ue,w.displaySize[1]-fe[3]/ue]}const D=o.left*b,P=o.right*b;let B,j,$,G;u==="width"||u==="both"?(G=g[0]+D-h[3],j=g[0]+P+h[1]):(G=g[0]+(D+P-w.displaySize[0])/2,j=G+w.displaySize[0]);const Z=o.top*b,se=o.bottom*b;return u==="height"||u==="both"?(B=g[1]+Z-h[0],$=g[1]+se+h[2]):(B=g[1]+(Z+se-w.displaySize[1])/2,$=B+w.displaySize[1]),{imagePrimary:w,imageSecondary:void 0,top:B,right:j,bottom:$,left:G,collisionPadding:A}}function gH(c){return!c.imagePrimary.stretchX}function yH(c){return!c.imagePrimary.stretchY}function _H(c){return{width:c.right-c.left,height:c.bottom-c.top}}const _y=128;function Tb(c,o,u,h){const{expression:g}=o;if(g.kind==="constant")return{kind:"constant",layoutSize:g.evaluate(new Jr(c+1,{worldview:u}),void 0,void 0,void 0,h)};if(g.kind==="source")return{kind:"source"};{const{zoomStops:b,interpolationType:w}=g;let A=0;for(;A<b.length&&b[A]<=c;)A++;A=Math.max(0,A-1);let D=A;for(;D<b.length&&b[D]<c+1;)D++;D=Math.min(b.length-1,D);const P=b[A],B=b[D];return g.kind==="composite"?{kind:"composite",minZoom:P,maxZoom:B,interpolationType:w}:{kind:"camera",minZoom:P,maxZoom:B,minSize:g.evaluate(new Jr(P,{worldview:u}),void 0,void 0,void 0,h),maxSize:g.evaluate(new Jr(B,{worldview:u}),void 0,void 0,void 0,h),interpolationType:w}}}function _L(c,{uSize:o,uSizeT:u},{lowerSize:h,upperSize:g}){return c.kind==="source"?h/_y:c.kind==="composite"?Vn(h/_y,g/_y,u):o}function F1(c,o,u=1){let h=0,g=0;if(c.kind==="constant")g=c.layoutSize*u;else if(c.kind!=="source"){const{interpolationType:b,minZoom:w,maxZoom:A}=c,D=b?ze(Yi.interpolationFactor(b,o,w,A),0,1):0;c.kind==="camera"?g=Vn(c.minSize,c.maxSize,D)*u:h=D*u}return{uSizeT:h,uSize:g}}class vy extends Vt{constructor(o,u,h,g,b){super(o,u),this.angle=g,this.z=h,b!==void 0&&(this.segment=b)}clone(){return new vy(this.x,this.y,this.z,this.angle,this.segment)}}function vH(c,o,u,h,g){if(o.segment===void 0)return!0;let b=o,w=o.segment+1,A=0;for(;A>-u/2;){if(w--,w<0)return!1;A-=c[w].dist(b),b=c[w]}A+=c[w].dist(c[w+1]),w++;const D=[];let P=0;for(;A<u/2;){const B=c[w],j=c[w+1];if(!j)return!1;let $=c[w-1].angleTo(B)-B.angleTo(j);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:A,angleDelta:$}),P+=$;A-D[0].distance>h;)P-=D.shift().angleDelta;if(P>g)return!1;w++,A+=B.dist(j)}return!0}function bH(c){let o=0;for(let u=0;u<c.length-1;u++)o+=c[u].dist(c[u+1]);return o}function xH(c,o,u){return c?.6*o*u:0}function wH(c,o){return Math.max(c?c.right-c.left:0,o?o.right-o.left:0)}function K_e(c,o,u,h,g,b){const w=xH(u,g,b),A=wH(u,h)*b;let D=0;const P=bH(c)/2;for(let B=0;B<c.length-1;B++){const j=c[B],$=c[B+1],G=j.dist($);if(D+G>P){const Z=(P-D)/G,se=Vn(j.x,$.x,Z),fe=Vn(j.y,$.y,Z),ue=new vy(se,fe,0,$.angleTo(j),B);return!w||vH(c,ue,A,w,o)?ue:void 0}D+=G}}function Q_e(c,o,u,h,g,b,w,A,D){const P=xH(h,b,w),B=wH(h,g),j=B*w,$=c[0].x===0||c[0].x===D||c[0].y===0||c[0].y===D;return o-j<o/4&&(o=j+o/4),SH(c,$?o/2*A%o:(B/2+2*b)*w*A%o,o,P,u,j,$,!1,D)}function SH(c,o,u,h,g,b,w,A,D){const P=b/2,B=bH(c);let j=0,$=o-u,G=[];for(let Z=0;Z<c.length-1;Z++){const se=c[Z],fe=c[Z+1],ue=se.dist(fe),pe=fe.angleTo(se);for(;$+u<j+ue;){$+=u;const ve=($-j)/ue,Se=Vn(se.x,fe.x,ve),ke=Vn(se.y,fe.y,ve);if(Se>=0&&Se<D&&ke>=0&&ke<D&&$-P>=0&&$+P<=B){const Ie=new vy(Se,ke,0,pe,Z);h&&!vH(c,Ie,b,h,g)||G.push(Ie)}}j+=ue}return A||G.length||w||(G=SH(c,j/2,u,h,g,b,w,!0,D)),G}function TH(c){let o=0,u=0;for(const w of c)o+=w.w*w.h,u=Math.max(u,w.w);c.sort((w,A)=>A.h-w.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),u),h:1/0}];let g=0,b=0;for(const w of c)for(let A=h.length-1;A>=0;A--){const D=h[A];if(!(w.w>D.w||w.h>D.h)){if(w.x=D.x,w.y=D.y,b=Math.max(b,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===D.w&&w.h===D.h){const P=h.pop();P&&A<h.length&&(h[A]=P)}else w.h===D.h?(D.x+=w.w,D.w-=w.w):w.w===D.w?(D.y+=w.h,D.h-=w.h):(h.push({x:D.x+w.w,y:D.y,w:D.w-w.w,h:w.h}),D.y+=w.h,D.h-=w.h);break}}return{w:g,h:b,fill:o/(g*b)||0}}Kt(vy,"Anchor");class eE{static getImagePositionScale(o,u,h){if(u&&o){const{sx:g,sy:b}=o;return{x:g,y:b}}return{x:h,y:h}}constructor(o,u,h,g){this.paddedRect=o;const{pixelRatio:b,version:w,stretchX:A,stretchY:D,content:P,sdf:B,usvg:j}=u;this.pixelRatio=b,this.stretchX=A,this.stretchY=D,this.content=P,this.version=w,this.padding=h,this.sdf=B,this.usvg=j,this.scale=eE.getImagePositionScale(g,j,b)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function vL(c,o,u){const h=Bo.parse(c),g=(function(b,w,A=[1,1]){return{x:0,y:0,w:(b.data?b.data.width:b.width*A[0])+2*w,h:(b.data?b.data.height:b.height*A[1])+2*w}})(o,u,[h.sx,h.sy]);return{bin:g,imagePosition:new eE(g,o,u,h),imageVariant:h}}class EH{constructor(o,u,h){const g=new Map,b=new Map;this.haveRenderCallbacks=[];const w=[];this.addImages(o,g,1,w),this.addImages(u,b,2,w);const{w:A,h:D}=TH(w),P=new Vo({width:A||1,height:D||1});for(const[B,j]of o.entries()){const $=g.get(B).paddedRect;Vo.copy(j.data,P,{x:0,y:0},{x:$.x+1,y:$.y+1},j.data,null,j.sdf)}for(const[B,j]of u.entries()){const $=b.get(B),G=$.paddedRect;let Z=$.padding;const se=G.x+Z,fe=G.y+Z,ue=j.data.width,pe=j.data.height;Z=Z>1?Z-1:Z,Vo.copy(j.data,P,{x:0,y:0},{x:se,y:fe},j.data,h),Vo.copy(j.data,P,{x:0,y:pe-Z},{x:se,y:fe-Z},{width:ue,height:Z},h),Vo.copy(j.data,P,{x:0,y:0},{x:se,y:fe+pe},{width:ue,height:Z},h),Vo.copy(j.data,P,{x:ue-Z,y:0},{x:se-Z,y:fe},{width:Z,height:pe},h),Vo.copy(j.data,P,{x:0,y:0},{x:se+ue,y:fe},{width:Z,height:pe},h),Vo.copy(j.data,P,{x:ue-Z,y:pe-Z},{x:se-Z,y:fe-Z},{width:Z,height:Z},h),Vo.copy(j.data,P,{x:0,y:pe-Z},{x:se+ue,y:fe-Z},{width:Z,height:Z},h),Vo.copy(j.data,P,{x:0,y:0},{x:se+ue,y:fe+pe},{width:Z,height:Z},h),Vo.copy(j.data,P,{x:ue-Z,y:0},{x:se-Z,y:fe+pe},{width:Z,height:Z},h)}this.lut=h,this.image=P,this.iconPositions=g,this.patternPositions=b}addImages(o,u,h,g){for(const[b,w]of o.entries()){const{bin:A,imagePosition:D,imageVariant:P}=vL(b,w,h);u.set(b,D),g.push(A),w.hasRenderCallback&&this.haveRenderCallbacks.push(P.id)}}patchUpdatedImages(o,u,h,g){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(b=>o.hasImage(b,h)),o.dispatchRenderCallbacks(this.haveRenderCallbacks,h);for(const b of o.getUpdatedImages(h)){for(const w of this.iconPositions.keys()){const A=Bo.parse(w);if(ws.isEqual(A.id,b)){const D=o.getImage(b,h);this.patchUpdatedImage(this.iconPositions.get(w),D,u,null)}}for(const w of this.patternPositions.keys()){const A=Bo.parse(w);if(ws.isEqual(A.id,b)){const D=o.getImage(b,h);this.patchUpdatedImage(this.patternPositions.get(w),D,u,g||this.lut)}}}}patchUpdatedImage(o,u,h,g=null){if(!o||!u||o.version===u.version)return;o.version=u.version;const[b,w]=o.tl,A=o.sdf;if(this.lut||A){const D={width:u.data.width,height:u.data.height},P=new Vo(D);Vo.copy(u.data,P,{x:0,y:0},{x:0,y:0},D,g,A),h.update(P,{position:{x:b,y:w}})}else h.update(u.data,{position:{x:b,y:w}})}}Kt(eE,"ImagePosition"),Kt(EH,"ImageAtlas",{omit:["lut"]});const tE=1e20;function AH(c,o,u,h,g,b,w,A,D){for(let P=o;P<o+h;P++)OH(c,u*b+P,b,g,w,A,D);for(let P=u;P<u+g;P++)OH(c,P*b+o,1,h,w,A,D)}function OH(c,o,u,h,g,b,w){b[0]=0,w[0]=-tE,w[1]=tE,g[0]=c[o];for(let A=1,D=0,P=0;A<h;A++){g[A]=c[o+A*u];const B=A*A;do{const j=b[D];P=(g[A]-g[j]+B-j*j)/(A-j)/2}while(P<=w[D]&&--D>-1);D++,b[D]=A,w[D]=P,w[D+1]=tE}for(let A=0,D=0;A<h;A++){for(;w[D+1]<A;)D++;const P=b[D],B=A-P;c[o+A*u]=g[P]+B*B}}const bL={none:0,ideographs:1,all:2};class N1{constructor(o,u,h){this.requestManager=o,this.localGlyphMode=u,this.localFontFamily=h,this.url="",this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o){this.url=o}getGlyphs(o,u){const h=[],g=this.url||Ja.GLYPHS_URL;for(const b in o)for(const w of o[b])h.push({stack:b,id:w});lt(h,({stack:b,id:w},A)=>{let D=this.entries[b];D||(D=this.entries[b]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let P=D.glyphs[w];if(P!==void 0)return void A(null,{stack:b,id:w,glyph:P});if(P=this._tinySDF(D,b,w),P)return D.glyphs[w]=P,void A(null,{stack:b,id:w,glyph:P});const B=Math.floor(w/256);if(256*B>65535)return Hn("glyphs > 65535 not supported"),void A(null,{stack:b,id:w,glyph:P});if(D.ranges[B])return void A(null,{stack:b,id:w,glyph:P});let j=D.requests[B];j||(j=D.requests[B]=[],N1.loadGlyphRange(b,B,g,this.requestManager,($,G)=>{if(G){D.ascender=G.ascender,D.descender=G.descender;for(const Z in G.glyphs)this._doesCharSupportLocalGlyph(+Z)||(D.glyphs[+Z]=G.glyphs[+Z]);D.ranges[B]=!0}for(const Z of j)Z($,G);delete D.requests[B]})),j.push(($,G)=>{$?A($):G&&A(null,{stack:b,id:w,glyph:G.glyphs[w]||null})})},(b,w)=>{if(b)u(b);else if(w){const A={};for(const{stack:D,id:P,glyph:B}of w)A[D]===void 0&&(A[D]={}),A[D].glyphs===void 0&&(A[D].glyphs={}),A[D].glyphs[P]=B&&{id:B.id,bitmap:B.bitmap.clone(),metrics:B.metrics},A[D].ascender=this.entries[D].ascender,A[D].descender=this.entries[D].descender;u(null,A)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==bL.none&&(this.localGlyphMode===bL.all?!!this.localFontFamily:!!this.localFontFamily&&(Wa(o)||Gg(o)||wh(o)||Nd(o)||Ma(o)||jo(o)||(u=o)>=131072&&u<=173791||(h=>h>=66736&&h<=66815)(o)));var u}_tinySDF(o,u,h){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(h))return;let b=o.tinySDF;if(!b){let se="400";/bold/i.test(u)?se="900":/medium/i.test(u)?se="500":/light/i.test(u)&&(se="200"),b=o.tinySDF=new N1.TinySDF({fontFamily:g,fontWeight:se,fontSize:48,buffer:6,radius:16}),b.fontWeight=se}if(this.localGlyphs[b.fontWeight][h])return this.localGlyphs[b.fontWeight][h];const w=String.fromCodePoint(h),{data:A,width:D,height:P,glyphWidth:B,glyphHeight:j,glyphLeft:$,glyphTop:G,glyphAdvance:Z}=b.draw(w);return this.localGlyphs[b.fontWeight][h]={id:h,bitmap:new Ph({width:D,height:P},A),metrics:{width:B/2,height:j/2,left:$/2,top:G/2-27,advance:Z/2,localGlyph:!0}}}}function CH(c,o){return c+o[1]-o[0]}function xL(c,o,u,h,g=1){const b=[],w=c.imagePrimary,A=w.pixelRatio,D=w.paddedRect.w-2,P=w.paddedRect.h-2,B=(c.right-c.left)*g,j=(c.bottom-c.top)*g,$=w.stretchX||[[0,D]],G=w.stretchY||[[0,P]],Z=$.reduce(CH,0),se=G.reduce(CH,0),fe=D-Z,ue=P-se;let pe=0,ve=Z,Se=0,ke=se,Ie=0,Ve=fe,qe=0,Ue=ue;if(w.content&&h){const rt=w.content;pe=PC($,0,rt[0]),Se=PC(G,0,rt[1]),ve=PC($,rt[0],rt[2]),ke=PC(G,rt[1],rt[3]),Ie=rt[0]-pe,qe=rt[1]-Se,Ve=rt[2]-rt[0]-ve,Ue=rt[3]-rt[1]-ke}const Ze=(rt,Et,xt,Tt)=>{const kt=RC(rt.stretch-pe,ve,B,c.left*g),Pt=kC(rt.fixed-Ie,Ve,rt.stretch,Z),Rt=RC(Et.stretch-Se,ke,j,c.top*g),vt=kC(Et.fixed-qe,Ue,Et.stretch,se),zt=RC(xt.stretch-pe,ve,B,c.left*g),Mt=kC(xt.fixed-Ie,Ve,xt.stretch,Z),Ft=RC(Tt.stretch-Se,ke,j,c.top*g),Lt=kC(Tt.fixed-qe,Ue,Tt.stretch,se),fn=new Vt(kt,Rt),pn=new Vt(zt,Rt),nn=new Vt(zt,Ft),an=new Vt(kt,Ft),kn=new Vt(Pt/A,vt/A),On=new Vt(Mt/A,Lt/A),cn=o*Math.PI/180;if(cn){const Lr=Math.sin(cn),Ra=Math.cos(cn),$r=[Ra,-Lr,Lr,Ra];fn._matMult($r),pn._matMult($r),an._matMult($r),nn._matMult($r)}const Wn=rt.stretch+rt.fixed,vr=xt.stretch+xt.fixed,Zr=Et.stretch+Et.fixed,pr=Tt.stretch+Tt.fixed,di=c.imageSecondary;return{tl:fn,tr:pn,bl:an,br:nn,texPrimary:{x:w.paddedRect.x+1+Wn,y:w.paddedRect.y+1+Zr,w:vr-Wn,h:pr-Zr},texSecondary:di?{x:di.paddedRect.x+1+Wn,y:di.paddedRect.y+1+Zr,w:vr-Wn,h:pr-Zr}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:kn,pixelOffsetBR:On,minFontScaleX:Ve/A/B,minFontScaleY:Ue/A/j,isSDF:u}};if(w.stretchX||w.stretchY){const rt=MH($,fe,Z),Et=MH(G,ue,se);for(let xt=0;xt<rt.length-1;xt++){const Tt=rt[xt],kt=rt[xt+1];for(let Pt=0;Pt<Et.length-1;Pt++)b.push(Ze(Tt,Et[Pt],kt,Et[Pt+1]))}}else b.push(Ze({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:P+1}));return b}function J_e(c,o){const u=c.stretchY||[[0,c.paddedRect.h-2]];return c.stretchX||c.stretchY?DH(c.stretchX||[[0,c.paddedRect.w-2]])*DH(u):1}function PC(c,o,u){let h=0;for(const g of c)h+=Math.max(o,Math.min(u,g[1]))-Math.max(o,Math.min(u,g[0]));return h}function MH(c,o,u){const h=[{fixed:-1,stretch:0}];for(const[g,b]of c){const w=h[h.length-1];h.push({fixed:g-w.stretch,stretch:w.stretch}),h.push({fixed:g-w.stretch,stretch:w.stretch+(b-g)})}return h.push({fixed:o+1,stretch:u}),h}function DH(c){return 2*c.length+1}function RC(c,o,u,h){return c/o*u+h}function kC(c,o,u,h){return c-o*u/h}function eve(c,o,u,h){const g=o+c.positionedLines[h].lineOffset;return h===0?u+g/2:u+(g+(o+c.positionedLines[h-1].lineOffset))/2}function IH(c,o,u,h,g,b,w,A,D){const P=[];if(o.positionedLines.length===0)return P;const B=(D!==void 0?D:h.layout.get("text-rotate").evaluate(b,{}))*Math.PI/180,j=(function(fe){const ue=fe[0],pe=fe[1],ve=ue*pe;return ve>0?[ue,-pe]:ve<0?[-ue,pe]:ue===0?[pe,ue]:[pe,-ue]})(u);let $=Math.abs(o.top-o.bottom);for(const fe of o.positionedLines)$-=fe.lineOffset;const G=o.positionedLines.length,Z=$/G;let se=o.top-u[1];for(let fe=0;fe<G;++fe){const ue=o.positionedLines[fe];se=eve(o,Z,se,fe);for(const pe of ue.positionedGlyphs){if(!pe.rect)continue;const ve=pe.rect||{};let Se=4,ke=!0,Ie=1,Ve=0;if(pe.image){const pn=w.get(pe.image.toString());if(!pn)continue;if(pn.sdf){Hn("SDF images are not supported in formatted text and will be ignored.");continue}ke=!1,Ie=pn.pixelRatio,Se=1/Ie}const qe=(g||A)&&pe.vertical,Ue=pe.metrics.advance*pe.scale/2,Ze=pe.metrics,rt=pe.rect;if(rt===null)continue;A&&o.verticalizable&&(Ve=pe.image?Ue-pe.metrics.width*pe.scale/2:0);const Et=g?[pe.x+Ue,pe.y]:[0,0];let xt=[0,0],Tt=[0,0],kt=!1;g||(qe?(Tt=[pe.x+Ue+j[0],pe.y+j[1]-Ve],kt=!0):xt=[pe.x+Ue+u[0],pe.y+u[1]-Ve]);const Pt=rt.w*pe.scale/(Ie*(pe.localGlyph?2:1)),Rt=rt.h*pe.scale/(Ie*(pe.localGlyph?2:1));let vt,zt,Mt,Ft;if(qe){const pn=pe.y-se,nn=new Vt(-Ue,Ue-pn),an=-Math.PI/2,kn=new Vt(...Tt);vt=new Vt(-Ue+xt[0],xt[1]),vt._rotateAround(an,nn)._add(kn),vt.x+=-pn+Ue,vt.y-=(Ze.left-Se)*pe.scale;const On=pe.image?Ze.advance*pe.scale:Qo*pe.scale,cn=String.fromCodePoint(pe.glyph);L_e(cn)?vt.x+=(1-Se)*pe.scale:z_e(cn)?vt.x+=On-Ze.height*pe.scale+(-Se-1)*pe.scale:vt.x+=pe.image||Ze.width+2*Se===rt.w&&Ze.height+2*Se===rt.h?(On-Rt)/2:(On-(Ze.height+2*Se)*pe.scale)/2,zt=new Vt(vt.x,vt.y-Pt),Mt=new Vt(vt.x+Rt,vt.y),Ft=new Vt(vt.x+Rt,vt.y-Pt)}else{const pn=(Ze.left-Se)*pe.scale-Ue+xt[0],nn=(-Ze.top-Se)*pe.scale+xt[1],an=pn+Pt,kn=nn+Rt;vt=new Vt(pn,nn),zt=new Vt(an,nn),Mt=new Vt(pn,kn),Ft=new Vt(an,kn)}if(B){let pn;pn=g?new Vt(0,0):kt?new Vt(j[0],j[1]):new Vt(u[0],u[1]),vt._rotateAround(B,pn),zt._rotateAround(B,pn),Mt._rotateAround(B,pn),Ft._rotateAround(B,pn)}const Lt=new Vt(0,0),fn=new Vt(0,0);P.push({tl:vt,tr:zt,bl:Mt,br:Ft,texPrimary:ve,texSecondary:void 0,writingMode:o.writingMode,glyphOffset:Et,sectionIndex:pe.sectionIndex,isSDF:ke,pixelOffsetTL:Lt,pixelOffsetBR:fn,minFontScaleX:0,minFontScaleY:0})}}return P}function tve(c,o=1,u=!1){let h=1/0,g=1/0,b=-1/0,w=-1/0;const A=c[0];for(let G=0;G<A.length;G++){const Z=A[G];(!G||Z.x<h)&&(h=Z.x),(!G||Z.y<g)&&(g=Z.y),(!G||Z.x>b)&&(b=Z.x),(!G||Z.y>w)&&(w=Z.y)}const D=Math.min(b-h,w-g);let P=D/2;const B=new Td([],nve);if(D===0)return new Vt(h,g);for(let G=h;G<b;G+=D)for(let Z=g;Z<w;Z+=D)B.push(new B1(G+P,Z+P,P,c));let j=(function(G){let Z=0,se=0,fe=0;const ue=G[0];for(let pe=0,ve=ue.length,Se=ve-1;pe<ve;Se=pe++){const ke=ue[pe],Ie=ue[Se],Ve=ke.x*Ie.y-Ie.x*ke.y;se+=(ke.x+Ie.x)*Ve,fe+=(ke.y+Ie.y)*Ve,Z+=3*Ve}return new B1(se/Z,fe/Z,0,G)})(c),$=B.length;for(;B.length;){const G=B.pop();(G.d>j.d||!j.d)&&(j=G,u&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,$)),G.max-j.d<=o||(P=G.h/2,B.push(new B1(G.p.x-P,G.p.y-P,P,c)),B.push(new B1(G.p.x+P,G.p.y-P,P,c)),B.push(new B1(G.p.x-P,G.p.y+P,P,c)),B.push(new B1(G.p.x+P,G.p.y+P,P,c)),$+=4)}return u&&(console.log(`num probes: ${$}`),console.log(`best distance: ${j.d}`)),j.p}function nve(c,o){return o.max-c.max}N1.loadGlyphRange=function(c,o,u,h,g){const b=256*o,w=b+255,A=h.transformRequest(h.normalizeGlyphsURL(u).replace("{fontstack}",c).replace("{range}",`${b}-${w}`),eo.Glyphs);gd(A,(D,P)=>{if(D)g(D);else if(P){const B={},j=(function($){return new MC($).readFields(G_e,{})})(P);for(const $ of j.glyphs)B[$.id]=$;g(null,{glyphs:B,ascender:j.ascender,descender:j.descender})}})},N1.TinySDF=class{constructor({fontSize:c=24,buffer:o=3,radius:u=8,cutoff:h=.25,fontFamily:g="sans-serif",fontWeight:b="normal",fontStyle:w="normal",lang:A=null}={}){this.buffer=o,this.cutoff=h,this.radius=u,this.lang=A;const D=this.size=c+4*o,P=this._createCanvas(D),B=this.ctx=P.getContext("2d",{willReadFrequently:!0});B.font=`${w} ${b} ${c}px ${g}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(D*D),this.gridInner=new Float64Array(D*D),this.f=new Float64Array(D),this.z=new Float64Array(D+1),this.v=new Uint16Array(D)}_createCanvas(c){const o=document.createElement("canvas");return o.width=o.height=c,o}draw(c){const{width:o,actualBoundingBoxAscent:u,actualBoundingBoxDescent:h,actualBoundingBoxLeft:g,actualBoundingBoxRight:b}=this.ctx.measureText(c),w=Math.ceil(u),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-g))),D=Math.min(this.size-this.buffer,w+Math.ceil(h)),P=A+2*this.buffer,B=D+2*this.buffer,j=Math.max(P*B,0),$=new Uint8ClampedArray(j),G={data:$,width:P,height:B,glyphWidth:A,glyphHeight:D,glyphTop:w,glyphLeft:0,glyphAdvance:o};if(A===0||D===0)return G;const{ctx:Z,buffer:se,gridInner:fe,gridOuter:ue}=this;this.lang&&(Z.lang=this.lang),Z.clearRect(se,se,A,D),Z.fillText(c,se,se+w);const pe=Z.getImageData(se,se,A,D);ue.fill(tE,0,j),fe.fill(0,0,j);for(let ve=0;ve<D;ve++)for(let Se=0;Se<A;Se++){const ke=pe.data[4*(ve*A+Se)+3]/255;if(ke===0)continue;const Ie=(ve+se)*P+Se+se;if(ke===1)ue[Ie]=0,fe[Ie]=tE;else{const Ve=.5-ke;ue[Ie]=Ve>0?Ve*Ve:0,fe[Ie]=Ve<0?Ve*Ve:0}}AH(ue,0,0,P,B,P,this.f,this.v,this.z),AH(fe,se,se,A,D,P,this.f,this.v,this.z);for(let ve=0;ve<j;ve++){const Se=Math.sqrt(ue[ve])-Math.sqrt(fe[ve]);$[ve]=Math.round(255-255*(Se/this.radius+this.cutoff))}return G}};class B1{constructor(o,u,h,g){this.p=new Vt(o,u),this.h=h,this.d=(function(b,w){let A=!1,D=1/0;for(let P=0;P<w.length;P++){const B=w[P];for(let j=0,$=B.length,G=$-1;j<$;G=j++){const Z=B[j],se=B[G];Z.y>b.y!=se.y>b.y&&b.x<(se.x-Z.x)*(b.y-Z.y)/(se.y-Z.y)+Z.x&&(A=!A),D=Math.min(D,Zd(b,Z,se))}}return(A?1:-1)*Math.sqrt(D)})(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const rve=Object.keys,wL=Number.POSITIVE_INFINITY,ive=Math.sqrt(2);function Sv(c,o,u,h,g){const b=gL(c)&&c.collisionPadding?c.collisionPadding:[0,0,0,0],w={top:c.top-b[1],bottom:c.bottom+b[3],left:c.left-b[0],right:c.right+b[2],scaled:!1};return h!==void 0&&(function(A,D){A.top*=D,A.bottom*=D,A.left*=D,A.right*=D,A.scaled=!0})(w,h),u&&(function(A,D){if(!D)return;const P=Ar(D),B=new Vt(A.left,A.top),j=new Vt(A.right,A.top),$=new Vt(A.left,A.bottom),G=new Vt(A.right,A.bottom),Z=new Vt(0,0);B._rotateAround(P,Z),j._rotateAround(P,Z),$._rotateAround(P,Z),G._rotateAround(P,Z),A.left=Math.min(B.x,j.x,$.x,G.x),A.right=Math.max(B.x,j.x,$.x,G.x),A.top=Math.min(B.y,j.y,$.y,G.y),A.bottom=Math.max(B.y,j.y,$.y,G.y)})(w,u),g&&(w.left+=g[0],w.right+=g[0],w.top+=g[1],w.bottom+=g[1]),o?{top:Math.min(o.top,w.top),bottom:Math.max(o.bottom,w.bottom),left:Math.min(o.left,w.left),right:Math.max(o.right,w.right),scaled:o.scaled||w.scaled}:w}function PH(c,[o,u]){let h=0,g=0;if(u===wL){o<0&&(o=0);const b=o/ive;switch(c){case"top-right":case"top-left":g=b-7;break;case"bottom-right":case"bottom-left":g=7-b;break;case"bottom":g=7-o;break;case"top":g=o-7}switch(c){case"top-right":case"bottom-right":h=-b;break;case"top-left":case"bottom-left":h=b;break;case"left":h=o;break;case"right":h=-o}}else{switch(o=Math.abs(o),u=Math.abs(u),c){case"top-right":case"top-left":case"top":g=u-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-u}switch(c){case"top-right":case"bottom-right":case"right":h=-o;break;case"top-left":case"bottom-left":case"left":h=o}}return[h,g]}function ave(c,o,u,h,g,b,w,A,D,P,B,j,$,G,Z){const se=c.layers[0],fe=se.appearances;if(fe.length===0)return{iconBBox:null,iconVerticalBBox:null,textBBox:null,textVerticalBBox:null};const ue={iconBBox:null,iconVerticalBBox:null},pe={textBBox:null,textVerticalBBox:null},{baseIconRotate:ve,baseTextRotate:Se,iconScaleFactor:ke}=(function(Ve,qe,Ue){const Ze=Ve.get("icon-rotate").evaluate(qe,{},Ue),rt=Ve.get("text-rotate").evaluate(qe,{},Ue),[Et,xt]=Ve.get("icon-size-scale-range");return{baseIconRotate:Ze,baseTextRotate:rt,iconScaleFactor:ze(1,Et,xt)}})(h,g,b);o&&(ue.iconBBox=Sv(o,ue.iconBBox,ve,w),u)&&(ue.iconVerticalBBox=Sv(u,ue.iconVerticalBBox,ve+90,w));const Ie=zC(j.horizontal);Ie&&(pe.textBBox=Sv(Ie,pe.textBBox,Se,1,G)),j.vertical&&(pe.textVerticalBBox=Sv(j.vertical,pe.textVerticalBBox,Se+90,1,G));for(const Ve of fe)Ve.hasIconProperties()&&ove(ue,c,se,Ve,g,b,A,ve,w,D,o,P,ke,B,Z),Ve.hasTextProperties()&&sve(pe,se,Ve,g,b,G,Se,$,Ie,j.vertical);return{iconBBox:ue.iconBBox,iconVerticalBBox:ue.iconVerticalBBox,textBBox:pe.textBBox,textVerticalBBox:pe.textVerticalBBox}}function ove(c,o,u,h,g,b,w,A,D,P,B,j,$,G,Z){const{appearanceIconOffset:se,appearanceIconRotate:fe,appearanceIconSize:ue}=RH(h,u,g,b,w,A,D,P.iconScaleFactor);let pe=null,ve=null,Se=null;h.hasProperty("icon-image")?Se=(function(ke,Ie,Ve,qe,Ue,Ze,rt,Et){let xt=null;const Tt=Ie.getAppearanceValueAndResolveTokens(Ve,"icon-image",qe,Ue,Et);if(Tt){const kt=ke.getResolvedImageFromTokens(Tt),Pt=Ve.getUnevaluatedProperty("icon-size"),Rt=nE(kt,Tb(ke.zoom,Pt,ke.worldview,Et),Pt,Ue,ke.zoom,qe,ke.pixelRatio,rt,ke.worldview,Et);xt=Ze.get(Rt.iconPrimary.toString())}return xt})(o,u,h,g,b,j,$,Z):B&&(Se=B.imagePrimary),Se&&(pe=IC(Se,null,se,G),o.allowVerticalPlacement&&(ve=IC(Se,null,se,G))),pe&&(c.iconBBox=Sv(pe,c.iconBBox,fe,ue)),ve&&(c.iconVerticalBBox=Sv(ve,c.iconVerticalBBox,fe+90,ue))}function RH(c,o,u,h,g,b,w,A){const D=c.hasProperty("icon-offset")?o.getAppearanceValueAndResolveTokens(c,"icon-offset",u,h,[]):null,P=D&&Array.isArray(D)?D:g,B=c.hasProperty("icon-rotate")?o.getAppearanceValueAndResolveTokens(c,"icon-rotate",u,h,[]):null,j=typeof B=="number"?B:b,$=c.hasProperty("icon-size")?o.getAppearanceValueAndResolveTokens(c,"icon-size",u,h,[]):null;return{appearanceIconOffset:P,appearanceIconRotate:j,appearanceIconSize:typeof $=="number"?$*A:w}}function sve(c,o,u,h,g,b,w,A,D,P){const{appearanceTextOffset:B,appearanceTextRotate:j,appearanceTextSize:$}=kH(u,o,h,g,b,w,A),G=$/A;D&&(c.textBBox=Sv(D,c.textBBox,j,G,B)),P&&(c.textVerticalBBox=Sv(P,c.textVerticalBBox,j+90,G,B))}function kH(c,o,u,h,g,b,w){const A=c.hasProperty("text-offset")?o.getAppearanceValueAndResolveTokens(c,"text-offset",u,h,[]):null,D=A&&Array.isArray(A)?[A[0]*Qo,A[1]*Qo]:g,P=c.hasProperty("text-rotate")?o.getAppearanceValueAndResolveTokens(c,"text-rotate",u,h,[]):null,B=typeof P=="number"?P:b,j=c.hasProperty("text-size")?o.getAppearanceValueAndResolveTokens(c,"text-size",u,h,[]):null;return{appearanceTextOffset:D,appearanceTextRotate:B,appearanceTextSize:typeof j=="number"?j:w}}function LC(c,o,u,h,g,b,w,A,D){if(!o||!o.usvg)return;const P=_H(h),B=_H(g),j=b!=="both"&&b!=="width"||!gH(h)?1:B.width/P.width,$=b!=="both"&&b!=="height"||!yH(h)?1:B.height/P.height;u.scaleSelf(j,$);const G=u.toString();w.set(G,u),A.set(G,o);const{imagePosition:Z}=vL(G,o,1);D.set(G,Z)}function LH(c,o,u,h,g,b,w,A,D,P){if(!c)return;const B=(function(j,$,G,Z,se,fe,ue){if(j.kind==="camera")return j.maxSize;if(j.kind==="composite"){const pe=$.possiblyEvaluate(new Jr(j.maxZoom,{worldview:fe}),G,ue).evaluate(se,{},G,ue),ve=$.possiblyEvaluate(new Jr(j.minZoom,{worldview:fe}),G,ue).evaluate(se,{},G,ue);return Math.max(pe,ve)}return $.possiblyEvaluate(new Jr(Z,{worldview:fe}),G,ue).evaluate(se,{},G,ue)})(o,u,h,g,b,D,P);return c.scaleSelf(B*A*w)}function nE(c,o,u,h,g,b,w,A,D,P){return{iconPrimary:LH(c.getPrimary(),o,u,h,g,b,w,A,D,P),iconSecondary:LH(c.getSecondary(),o,u,h,g,b,w,A,D,P)}}function lve(c,o,u){if(!o)return;const h=u.get(c.toString()),g=u.get(o.toString());h&&g&&(h.paddedRect.w===g.paddedRect.w&&h.paddedRect.h===g.paddedRect.h||Hn(`Mismatch in icon variant sizes: ${c.toString()} and ${o.toString()}`),h.usvg!==g.usvg&&Hn(`Mismatch in icon variant image types: ${c.id} and ${o.id}`))}function zH(c,o,u,h){if(!c)return;const g=o.get(u.toString());if(c.imagePrimary=g,h){const b=o.get(h.toString());c.imageSecondary=b}}function uve(c,o){for(const u in c.horizontal)FH(c.horizontal[u],o);FH(c.vertical,o)}function FH(c,o){if(c){for(const u of c.positionedLines)for(const h of u.positionedGlyphs)if(h.image!==null){const g=h.image.toString();h.rect=o.get(g).paddedRect}}}function SL(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function cve(c,o,u,h,g,b,w,A,D){const P=zC(b.horizontal)||b.vertical,B=u.get("icon-text-fit-padding").evaluate(h,{},g);let j,$=o;return o&&D!=="none"&&(c.allowVerticalPlacement&&b.vertical&&(j=yL(o,b.vertical,D,B,A,w)),P&&($=yL(o,P,D,B,A,w))),{defaultShapedIcon:$,verticallyShapedIcon:j}}function NH(c,o){return c*o/24}function fve(c,o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe,ue,pe,ve,Se,ke,Ie,Ve){let qe=w.textMaxSize.evaluate(o,{},$);qe===void 0?qe=A*w.textScaleFactor:qe*=w.textScaleFactor;const Ue=c.layers[0].layout,Ze=NH(A,w.textScaleFactor),rt=zC(u.horizontal)||u.vertical,Et=c.hasAnyAppearanceProperty(["text-size","text-offset","text-rotate"]);if((fe!=="none"||Et)&&c.appearanceFeatureData&&c.featureToAppearanceIndex[o.index]<c.appearanceFeatureData.length){const nn=c.appearanceFeatureData[c.featureToAppearanceIndex[o.index]];nn&&(nn.textShaping=rt,nn.iconTextFitPadding=Ue.get("icon-text-fit-padding").evaluate(o,{},$),nn.fontScale=Ze,nn.textScaleFactor=w.textScaleFactor)}const xt=G.name==="globe",Tt=c.tilePixelRatio*qe/24,kt=(Ft=c.overscaling,c.zoom>18&&Ft>2&&(Ft>>=1),Math.max(Jt/(512*Ft),1)*Ue.get("symbol-spacing")),Pt=Ue.get("text-padding")*c.tilePixelRatio,Rt=Ue.get("icon-padding")*c.tilePixelRatio,vt=Ar(Ue.get("text-max-angle")),zt=Ue.get("icon-rotation-alignment")==="map"&&ve!=="point",Mt=kt/2;var Ft;c.hasAnyIconTextFit===!1&&fe!=="none"&&(c.hasAnyIconTextFit=!0);const Lt=o.properties?+o.properties[wr]:null,fn=Lt&&c.elevationFeatureIdToIndex?c.elevationFeatureIdToIndex.get(Lt):65535,pn=(nn,an,kn)=>{if(an.x<0||an.x>=Jt||an.y<0||an.y>=Jt)return;let On=null;if(xt){const{x:cn,y:Wn,z:vr}=G.projectTilePoint(an.x,an.y,kn);On={anchor:new vy(cn,Wn,vr,0,void 0),up:G.upVector(kn,an.x,an.y)}}(function(cn,Wn,vr,Zr,pr,di,Lr,Ra,$r,ui,Vi,ta,na,ka,fs,Hs,fo,Ao,qo,fr,ra,va,lc,Rl,hs,kl,Dm,dl,JC,G1,Kl,eM){const Im=cn.addToLineVertexArray(Wn,Zr);let by,Av,jf,Fh,_E,Y1,mr,Jo=0,La=0,Oo=0,Uf=0,yu=-1,uc=-1;const es={};let vE=Ac("");const Pm=vr?vr.anchor:Wn,ho=dl!=="none";let ds=0,Co=0;if($r._unevaluatedLayout.getValue("text-radial-offset")===void 0){const ps=$r.layout.get("text-offset").evaluate(ra,{},hs);ds=ps[0]*Qo,Co=ps[1]*Qo}else ds=$r.layout.get("text-radial-offset").evaluate(ra,{},hs)*Qo,Co=wL;if(cn.allowVerticalPlacement&&pr.vertical){const ps=pr.vertical;if(fs)Y1=AL(ps),Ra&&(mr=AL(Ra));else{const _u=$r.layout.get("text-rotate").evaluate(ra,{},hs)+90;jf=FC(ui,Pm,Wn,Vi,ta,na,ps,ka,_u,Hs,eM),Ra&&(Fh=FC(ui,Pm,Wn,Vi,ta,na,Ra,Ao,_u,null,Kl))}}if(di){const ps=$r.layout.get("icon-rotate").evaluate(ra,{},hs),_u=xL(di,ps,lc,ho,va.iconScaleFactor),Nh=Ra?xL(Ra,ps,lc,ho,va.iconScaleFactor):void 0;Av=FC(ui,Pm,Wn,Vi,ta,na,di,Ao,ps,null,G1);const Rm=(function(ap,S0e,n7,T0e,E0e,r7,i7,A0e,Mdt,ZL){const a7=ap.layers[0],o7=a7.appearances;let X1=S0e.length;if(n7&&(X1=Math.max(X1,n7.length)),o7.length===0)return X1;const[O0e,C0e]=T0e.get("icon-size-scale-range"),M0e=ze(1,O0e,C0e);for(const KL of o7){const s7=KL.getUnevaluatedProperties();if(s7._values["icon-image"].value!==void 0){const l7=a7.getAppearanceValueAndResolveTokens(KL,"icon-image",r7,i7,ZL);if(l7){const u7=ap.getResolvedImageFromTokens(l7);if(u7){const c7=KL.hasProperty("icon-size")?s7._values["icon-size"]:E0e._values["icon-size"],D0e=nE(u7,Tb(ap.zoom,c7,ap.worldview,ZL),c7,i7,ap.zoom,r7,ap.pixelRatio,M0e,ap.worldview,ZL),f7=A0e.get(D0e.iconPrimary.toString());f7&&(X1=Math.max(X1,J_e(f7)))}}}}return X1})(cn,_u,Nh,$r.layout,$r._unevaluatedLayout,ra,hs,cn.iconAtlasPositions,0,Rl);Jo=4*Rm;const WL=$r.layout.get("icon-size").evaluate(ra,{},hs,Rl),XL=va.compositeIconSizes?va.compositeIconSizes[0].evaluate(ra,{},hs,Rl):0,bE=va.compositeIconSizes?va.compositeIconSizes[1].evaluate(ra,{},hs,Rl):0,W1=EL(cn.layerIds[0],cn.iconSizeData,WL,va.iconScaleFactor,XL,bE);cn.addSymbols(cn.icon,_u,W1,fr,qo,ra,void 0,vr,Wn,Im.lineStartIndex,Im.lineLength,-1,Rl,hs,kl,Dm,cn.symbolInstances.length,Rm),yu=cn.icon.placedSymbolArray.length-1,Nh&&(La=4*Rm,cn.addSymbols(cn.icon,Nh,W1,fr,qo,ra,sc.vertical,vr,Wn,Im.lineStartIndex,Im.lineLength,-1,Rl,hs,kl,Dm,cn.symbolInstances.length,Rm),uc=cn.icon.placedSymbolArray.length-1)}for(const ps in pr.horizontal){const _u=ps,Nh=pr.horizontal[_u];by||(vE=Ac(Nh.text),fs?_E=AL(Nh):by=FC(ui,Pm,Wn,Vi,ta,na,Nh,ka,$r.layout.get("text-rotate").evaluate(ra,{},hs),Hs,eM));const Rm=Nh.positionedLines.length===1;if(Oo+=BH(cn,vr,Wn,Nh,Lr,$r,fs,ra,Hs,Im,pr.vertical?sc.horizontal:sc.horizontalOnly,Rm?rve(pr.horizontal):[_u],es,yu,va,Rl,hs,cn.symbolInstances.length,kl),Rm)break}pr.vertical&&(Uf+=BH(cn,vr,Wn,pr.vertical,Lr,$r,fs,ra,Hs,Im,sc.vertical,["vertical"],es,uc,va,Rl,hs,cn.symbolInstances.length,kl));let pl=-1;const ml=(ps,_u)=>ps?Math.max(ps,_u):_u;pl=ml(_E,pl),pl=ml(Y1,pl),pl=ml(mr,pl);const Ov=pl>-1?1:0;cn.glyphOffsetArray.length>=65535&&Hn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ra.sortKey!==void 0&&cn.addToSortKeyRanges(cn.symbolInstances.length,ra.sortKey),cn.symbolInstances.emplaceBack(Wn.x,Wn.y,Pm.x,Pm.y,Pm.z,es.right>=0?es.right:-1,es.center>=0?es.center:-1,es.left>=0?es.left:-1,es.vertical>=0?es.vertical:-1,yu,uc,vE,by!==void 0?by:cn.collisionBoxArray.length,by!==void 0?by+1:cn.collisionBoxArray.length,jf!==void 0?jf:cn.collisionBoxArray.length,jf!==void 0?jf+1:cn.collisionBoxArray.length,Av!==void 0?Av:cn.collisionBoxArray.length,Av!==void 0?Av+1:cn.collisionBoxArray.length,Fh||cn.collisionBoxArray.length,Fh?Fh+1:cn.collisionBoxArray.length,Vi,Oo,Uf,Jo,La,Ov,0,ds,Co,pl,0,ho?1:0,JC)})(c,an,On,nn,u,h,b,g,c.layers[0],c.collisionBoxArray,o.index,o.sourceLayerIndex,c.index,Pt,pe,P,0,Rt,zt,ue,o,w,B,j,$,Z,se,fe,fn,Se,ke,Ie)};if(ve==="line")for(const nn of _C(o.geometry,0,0,Jt,Jt)){const an=Q_e(nn,kt,vt,u.vertical||rt,h,24,Tt,c.overscaling,Jt);for(const kn of an)rt&&hve(c,rt.text,Mt,kn)||pn(nn,kn,$)}else if(ve==="line-center"){for(const nn of o.geometry)if(nn.length>1){const an=K_e(nn,vt,u.vertical||rt,h,24,Tt);an&&pn(nn,an,$)}}else if(o.type==="Polygon")for(const nn of db(o.geometry,0)){const an=tve(nn,16);pn(nn[0],new vy(an.x,an.y,0,0,void 0),$)}else if(o.type==="LineString")for(const nn of o.geometry)pn(nn,new vy(nn[0].x,nn[0].y,0,0,void 0),$);else if(o.type==="Point")for(const nn of o.geometry)for(const an of nn)pn([an],new vy(an.x,an.y,0,0,void 0),$)}const TL=255,Eb=TL*_y;function BH(c,o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe,ue,pe){const ve=IH(0,h,D,b,w,A,g,c.allowVerticalPlacement,void 0),Se=b.layout.get("text-size").evaluate(A,{},fe),ke=Z.compositeTextSizes?Z.compositeTextSizes[0].evaluate(A,{},fe):0,Ie=Z.compositeTextSizes?Z.compositeTextSizes[1].evaluate(A,{},fe):0,Ve=EL(c.layerIds[0],c.textSizeData,Se,Z.textScaleFactor,ke,Ie);c.addSymbols(c.text,ve,Ve,D,w,A,B,o,u,P.lineStartIndex,P.lineLength,G,se,fe,pe,!1,ue,ve.length);for(const qe of j)$[qe]=c.text.placedSymbolArray.length-1;return 4*ve.length}function EL(c,o,u,h,g,b){const w=o;let A=null;return w.kind==="source"?(A=[_y*u*h],A[0]>Eb&&Hn(`${c}: Value for "text-size" is >= ${TL}. Reduce your "text-size".`)):w.kind==="composite"&&(A=[_y*g*h,_y*b*h],(A[0]>Eb||A[1]>Eb)&&Hn(`${c}: Value for "text-size" is >= ${TL}. Reduce your "text-size".`)),A}function zC(c){for(const o in c)return c[o];return null}function FC(c,o,u,h,g,b,w,A,D,P,B){let j,$,G,Z;if(j=B?B.top:w.top,$=B?B.bottom:w.bottom,G=B?B.left:w.left,Z=B?B.right:w.right,gL(w)&&w.collisionPadding){const se=w.collisionPadding;G-=se[0],j-=se[1],Z+=se[2],$+=se[3]}if(D){const se=new Vt(G,j),fe=new Vt(Z,j),ue=new Vt(G,$),pe=new Vt(Z,$),ve=Ar(D);let Se=new Vt(0,0);P&&(Se=new Vt(P[0],P[1])),se._rotateAround(ve,Se),fe._rotateAround(ve,Se),ue._rotateAround(ve,Se),pe._rotateAround(ve,Se),G=Math.min(se.x,fe.x,ue.x,pe.x),Z=Math.max(se.x,fe.x,ue.x,pe.x),j=Math.min(se.y,fe.y,ue.y,pe.y),$=Math.max(se.y,fe.y,ue.y,pe.y)}return c.emplaceBack(o.x,o.y,o.z,u.x,u.y,G,j,Z,$,A,h,g,b),c.length-1}function AL(c){gL(c)&&c.collisionPadding&&(c.top-=c.collisionPadding[1],c.bottom+=c.collisionPadding[3]);const o=c.bottom-c.top;return o>0?Math.max(10,o):null}function hve(c,o,u,h){const g=c.compareText;if(o in g){const b=g[o];for(let w=b.length-1;w>=0;w--)if(h.dist(b[w])<u)return!0}else g[o]=[];return g[o].push(h),!1}function jH(c,o){const u=c.fovAboveCenter,h=c.elevation?c.elevation.getMinElevationBelowMSL()*o:0,g=(c._camera.position[2]*c.worldSize-h)/Math.cos(c._pitch),b=Math.sin(u)*g/Math.sin(Math.max(Math.PI/2-c._pitch-u,.01));let w=Math.sin(c._pitch)*b+g;const A=g*(1/c._horizonShift);if(!c.elevation||c.elevation.exaggeration()===0){let D=Math.max(c.zoom-17,0);c.isOrthographic&&(D/=10),w*=1+D}return Math.min(1.01*w,A)}function rE(c,o){if(!o.isReprojectedInTileSpace)return{scale:1<<c.z,x:c.x,y:c.y,x2:c.x+1,y2:c.y+1,projection:o};const u=Math.pow(2,-c.z),h=c.x*u,g=(c.x+1)*u,b=c.y*u,w=(c.y+1)*u,A=wt(h),D=wt(g),P=It(b),B=It(w),j=o.project(A,P),$=o.project(D,P),G=o.project(D,B),Z=o.project(A,B);let se=Math.min(j.x,$.x,G.x,Z.x),fe=Math.min(j.y,$.y,G.y,Z.y),ue=Math.max(j.x,$.x,G.x,Z.x),pe=Math.max(j.y,$.y,G.y,Z.y);const ve=u/16;function Se(Ie,Ve,qe,Ue,Ze,rt){const Et=(qe+Ze)/2,xt=(Ue+rt)/2,Tt=o.project(wt(Et),It(xt)),kt=Math.max(0,se-Tt.x,fe-Tt.y,Tt.x-ue,Tt.y-pe);se=Math.min(se,Tt.x),ue=Math.max(ue,Tt.x),fe=Math.min(fe,Tt.y),pe=Math.max(pe,Tt.y),kt>ve&&(Se(Ie,Tt,qe,Ue,Et,xt),Se(Tt,Ve,Et,xt,Ze,rt))}Se(j,$,h,b,g,b),Se($,G,g,b,g,w),Se(G,Z,g,w,h,w),Se(Z,j,h,w,h,b),se-=ve,fe-=ve,ue+=ve,pe+=ve;const ke=1/Math.max(ue-se,pe-fe);return{scale:ke,x:se*ke,y:fe*ke,x2:ue*ke,y2:pe*ke,projection:o}}function UH(c,{x:o,y:u},h=0){return new Vt(((o-h)*c.scale-c.x)*Jt,(u*c.scale-c.y)*Jt)}const dve=k(new Float32Array(16));class Tv{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,u){return{x:0,y:0,z:0}}unproject(o,u){return new Re(0,0)}projectTilePoint(o,u,h){return{x:o,y:u,z:0}}locationPoint(o,u,h,g=!0){return o._coordinatePoint(o.locationCoordinate(u,h),g)}pixelsPerMeter(o,u){return ft(1,o)*u}pixelSpaceConversion(o,u,h){return 1}farthestPixelDistance(o){return jH(o,o.pixelsPerMeter)}pointCoordinate(o,u,h,g){const b=o.horizonLineFromTop(!1),w=new Vt(u,Math.max(b,h));return o.rayIntersectionCoordinate(o.pointRayIntersection(w,g))}pointCoordinate3D(o,u,h){const g=new Vt(u,h);if(o.elevation)return o.elevation.pointCoordinate(g);{const b=this.pointCoordinate(o,g.x,g.y,0);return[b.x,b.y,b.z]}}isPointAboveHorizon(o,u){if(o.elevation&&o.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(o,u.x,u.y);const h=o.horizonLineFromTop();return u.y<h}createInversionMatrix(o,u){return dve}createTileMatrix(o,u,h){let g,b,w;const A=h.canonical,D=k(new Float64Array(16));if(this.isReprojectedInTileSpace){const P=rE(A,this);g=1,b=P.x+h.wrap*P.scale,w=P.y,ie(D,D,[g/P.scale,g/P.scale,o.pixelsPerMeter/u])}else g=u/o.zoomScale(A.z),b=(A.x+Math.pow(2,A.z)*h.wrap)*g,w=A.y*g;return J(D,D,[b,w,0]),ie(D,D,[g/Jt,g/Jt,1]),D}upVector(o,u,h){return[0,0,1]}upVectorScale(o,u,h){return{metersToTile:1}}}class pve extends Tv{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[u,h]=this.parallels=o.parallels||[29.5,45.5],g=Math.sin(Ar(u));this.n=(g+Math.sin(Ar(h)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(o,u){const{n:h,c:g,r0:b}=this,w=Ar(o-this.center[0]),A=Ar(u),D=Math.sqrt(g-2*h*Math.sin(A))/h;return{x:D*Math.sin(w*h),y:D*Math.cos(w*h)-b,z:0}}unproject(o,u){const{n:h,c:g,r0:b}=this,w=b+u;let A=Math.atan2(o,Math.abs(w))*Math.sign(w);w*h<0&&(A-=Math.PI*Math.sign(o)*Math.sign(w));const D=Ar(this.center[0])*h;A=_t(A,-Math.PI-D,Math.PI-D);const P=ze(ut(A/h)+this.center[0],-180,180),B=Math.asin(ze((g-(o*o+w*w)*h*h)/(2*h),-1,1)),j=ze(ut(B),-85.051129,tt);return new Re(P,j)}}const iE=1.340264,aE=-.081106,oE=893e-6,sE=.003796,NC=Math.sqrt(3)/2;class mve extends Tv{project(o,u){u=u/180*Math.PI,o=o/180*Math.PI;const h=Math.asin(NC*Math.sin(u)),g=h*h,b=g*g*g;return{x:.5*(o*Math.cos(h)/(NC*(iE+3*aE*g+b*(7*oE+9*sE*g)))/Math.PI+.5),y:1-.5*(h*(iE+aE*g+b*(oE+sE*g))/Math.PI+1),z:0}}unproject(o,u){o=(2*o-.5)*Math.PI;let h=u=(2*(1-u)-1)*Math.PI,g=h*h,b=g*g*g;for(let B,j,$,G=0;G<12&&(j=h*(iE+aE*g+b*(oE+sE*g))-u,$=iE+3*aE*g+b*(7*oE+9*sE*g),B=j/$,h=ze(h-B,-Math.PI/3,Math.PI/3),g=h*h,b=g*g*g,!(Math.abs(B)<1e-12));++G);const w=NC*o*(iE+3*aE*g+b*(7*oE+9*sE*g))/Math.cos(h),A=Math.asin(Math.sin(h)/NC),D=ze(180*w/Math.PI,-180,180),P=ze(180*A/Math.PI,-85.051129,tt);return new Re(D,P)}}class gve extends Tv{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,u){return{x:.5+o/360,y:.5-u/360,z:0}}unproject(o,u){const h=360*(o-.5),g=ze(360*(.5-u),-85.051129,tt);return new Re(h,g)}}const j1=Math.PI/2;function BC(c){return Math.tan((j1+c)/2)}class yve extends Tv{constructor(o){super(o),this.center=o.center||[0,30];const[u,h]=this.parallels=o.parallels||[30,30];let g=Ar(u),b=Ar(h);this.southernCenter=g+b<0,this.southernCenter&&(g=-g,b=-b);const w=Math.cos(g),A=BC(g);this.n=g===b?Math.sin(g):Math.log(w/Math.cos(b))/Math.log(BC(b)/A),this.f=w*Math.pow(BC(g),this.n)/this.n}project(o,u){u=Ar(u),this.southernCenter&&(u=-u),o=Ar(o-this.center[0]);const h=1e-6,{n:g,f:b}=this;b>0?u<-j1+h&&(u=-j1+h):u>j1-h&&(u=j1-h);const w=b/Math.pow(BC(u),g);let A=w*Math.sin(g*o),D=b-w*Math.cos(g*o);return A=.5*(A/Math.PI+.5),D=.5*(D/Math.PI+.5),{x:A,y:this.southernCenter?D:1-D,z:0}}unproject(o,u){o=(2*o-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:h,f:g}=this,b=g-u,w=Math.sign(b),A=Math.sign(h)*Math.sqrt(o*o+b*b);let D=Math.atan2(o,Math.abs(b))*w;b*h<0&&(D-=Math.PI*Math.sign(o)*w);const P=ze(ut(D/h)+this.center[0],-180,180),B=ze(ut(2*Math.atan(Math.pow(g/A,1/h))-j1),-85.051129,tt);return new Re(P,this.southernCenter?-B:B)}}class $H extends Tv{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,u){return{x:st(o),y:dt(u),z:0}}unproject(o,u){const h=wt(o),g=It(u);return new Re(h,g)}}const VH=Ar(tt);class _ve extends Tv{project(o,u){const h=(u=Ar(u))*u,g=h*h;return{x:.5*((o=Ar(o))*(.8707-.131979*h+g*(g*(.003971*h-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+h*(.015085+g*(.028874*h-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(o,u){o=(2*o-.5)*Math.PI;let h=u=(2*(1-u)-1)*Math.PI,g=25,b=0,w=h*h;do{w=h*h;const P=w*w;b=(h*(1.007226+w*(.015085+P*(.028874*w-.044475-.005916*P)))-u)/(1.007226+w*(.045255+P*(.259866*w-.311325-.005916*11*P))),h=ze(h-b,-VH,VH)}while(Math.abs(b)>1e-6&&--g>0);w=h*h;const A=ze(ut(o/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),D=ut(h);return new Re(A,D)}}const qH=Ar(tt);class vve extends Tv{project(o,u){u=Ar(u),o=Ar(o);const h=Math.cos(u),g=2/Math.PI,b=Math.acos(h*Math.cos(o/2)),w=Math.sin(b)/b,A=.5*(o*g+2*h*Math.sin(o/2)/w)||0,D=.5*(u+Math.sin(u)/w)||0;return{x:.5*(A/Math.PI+.5),y:1-.5*(D/Math.PI+1),z:0}}unproject(o,u){let h=o=(2*o-.5)*Math.PI,g=u=(2*(1-u)-1)*Math.PI,b=25;const w=1e-6;let A=0,D=0;do{const P=Math.cos(g),B=Math.sin(g),j=2*B*P,$=B*B,G=P*P,Z=Math.cos(h/2),se=Math.sin(h/2),fe=2*Z*se,ue=se*se,pe=1-G*Z*Z,ve=pe?1/pe:0,Se=pe?Math.acos(P*Z)*Math.sqrt(1/pe):0,ke=.5*(2*Se*P*se+2*h/Math.PI)-o,Ie=.5*(Se*B+g)-u,Ve=.5*ve*(G*ue+Se*P*Z*$)+1/Math.PI,qe=ve*(fe*j/4-Se*B*se),Ue=.125*ve*(j*se-Se*B*G*fe),Ze=.5*ve*($*Z+Se*ue*P)+.5,rt=qe*Ue-Ze*Ve;A=(Ie*qe-ke*Ze)/rt,D=(ke*Ue-Ie*Ve)/rt,h=ze(h-A,-Math.PI,Math.PI),g=ze(g-D,-qH,qH)}while((Math.abs(A)>w||Math.abs(D)>w)&&--b>0);return new Re(ut(h),ut(g))}}class HH extends Tv{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Ar(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,u){const{scale:h,cosPhi:g}=this;return{x:Ar(o)*g*h+.5,y:-Math.sin(Ar(u))/g*h+.5,z:0}}unproject(o,u){const{scale:h,cosPhi:g}=this,b=-(u-.5)/h,w=ze(ut((o-.5)/h)/g,-180,180),A=Math.asin(ze(b*g,-1,1)),D=ze(ut(A),-85.051129,tt);return new Re(w,D)}}class bve extends $H{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,u,h){const g=nb(o,u,h);return Ct(g,g,rb(Ff(h))),{x:g[0],y:g[1],z:g[2]}}locationPoint(o,u,h){const g=$e(u.lat,u.lng),b=xe([],g),w=h?o._centerAltitude+h:o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(u),o._centerAltitude):o._centerAltitude;jt(g,g,b,ft(1,0)*Jt*w);const A=k(new Float64Array(16));return K(A,o.pixelMatrix,o.globeMatrix),Ct(g,g,A),new Vt(g[0],g[1])}pixelsPerMeter(o,u){return ft(1,0)*u}pixelSpaceConversion(o,u,h){const g=ft(1,o)*u,b=Vn(ft(1,45)*u,g,h);return this.pixelsPerMeter(o,u)/b}createTileMatrix(o,u,h){const g=Oi(Ff(h.canonical));return K(new Float64Array(16),o.globeMatrix,g)}createInversionMatrix(o,u){const{center:h}=o,g=rb(Ff(u));return W(g,g,Ar(h.lng)),Q(g,g,Ar(h.lat)),ie(g,g,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(o,u,h,g){return xT(o,u,h,!0)||new tn(0,0)}pointCoordinate3D(o,u,h){const g=this.pointCoordinate(o,u,h,0);return[g.x,g.y,g.z]}isPointAboveHorizon(o,u){return!xT(o,u.x,u.y,!1)}farthestPixelDistance(o){const u=(function(g,b){const w=g.cameraToCenterDistance,A=g._centerAltitude*b,D=g._camera,P=g._camera.forward(),B=at([],Pe([],P,-w),[0,0,A]),j=g.worldSize/(2*Math.PI),$=[0,0,-j],G=g.width/g.height,Z=Math.tan(g.fovAboveCenter),se=Pe([],D.up(),Z),fe=Pe([],D.right(),Z*G),ue=xe([],at([],at([],P,se),fe)),pe=[];let ve;if(new yi(B,ue).closestPointOnSphere($,j,pe)){const Se=at([],pe,$),ke=sr([],Se,B);ve=Math.cos(g.fovAboveCenter)*Be(ke)}else{const Se=sr([],B,$),ke=sr([],$,B);xe(ke,ke);const Ie=Be(Se)-j;ve=Math.sqrt(Ie*(Ie+2*j));const Ve=Math.acos(ve/(j+Ie))-Math.acos(Ye(P,ke));ve*=Math.cos(Ve)}return 1.01*ve})(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),h=Qd(o.zoom);if(h>0){const g=jH(o,ft(1,o.center.lat)*o.worldSize),b=o.worldSize/(2*Math.PI),w=Math.max(o.width,o.height)/o.worldSize*Math.PI;return Vn(u,g+b*(1-Math.cos(w)),Math.pow(h,10))}return u}upVector(o,u,h){return nb(u,h,o,1)}upVectorScale(o){return{metersToTile:eb(Em(Ff(o)))}}}function GH(c){const o=c.parallels,u=!!o&&Math.abs(o[0]+o[1])<.01;switch(c.name){case"mercator":return new $H(c);case"equirectangular":return new gve(c);case"naturalEarth":return new _ve(c);case"equalEarth":return new mve(c);case"winkelTripel":return new vve(c);case"albers":return u?new HH(c):new pve(c);case"lambertConformalConic":return u?new HH(c):new yve(c);case"globe":return new bve(c)}throw new Error(`Invalid projection name: ${c.name}`)}const xve=yr.types,wve=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lE(c,o,u,h,g,b,w,A,D,P,B,j,$){const G=A?Math.min(Eb,Math.round(A[0])):0,Z=A?Math.min(Eb,Math.round(A[1])):0;c.emplaceBack(o,u,Math.round(32*h),Math.round(32*g),b,w,(G<<1)+(D?1:0),0+(Z<<1),16*P,16*B,256*j,256*$)}function uE(c,o,u){c.emplaceBack(o,u)}function cE(c,o,u,h,g,b,w){c.emplaceBack(o,u,h,g,b,w)}const jC=(c,o,u,h)=>{for(let g=0;g<o;g++)c.emplaceBack(u[0],u[1],u[2],h[0],h[1],h[2])};function U1(c,o,u,h,g){c.emplaceBack(o,u,h,g),c.emplaceBack(o,u,h,g),c.emplaceBack(o,u,h,g),c.emplaceBack(o,u,h,g)}function Sve(c){for(const o of c.sections)if(jc(o.text))return!0;return!1}class OL{constructor(o){this.layoutVertexArray=new qd,this.indexArray=new Xa,this.programConfigurations=o,this.segments=new Ii,this.dynamicLayoutVertexArray=new ec,this.opacityVertexArray=new av,this.placedSymbolArray=new ly,this.iconTransitioningVertexArray=new Wl,this.globeExtVertexArray=new iv,this.zOffsetVertexArray=new To,this.orientationVertexArray=new dm,this.symbolInstanceIndices=[]}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}getSymbolVertexData(o,u){const h=[],g=this.layoutVertexArray.uint16;for(let b=0;b<u;++b){const w=12*(o+b);h.push(...g.slice(w,w+12))}return h}updateSymbolVertexData(o,u,h,g,b,w,A,D,P,B,j,$,G){const Z=this.layoutVertexArray.uint16,se=12*o;Z[se]=u,Z[se+1]=h,Z[se+2]=g,Z[se+3]=b,Z[se+4]=w,Z[se+5]=A,Z[se+6]=D,Z[se+7]=P,Z[se+8]=B,Z[se+9]=j,Z[se+10]=$,Z[se+11]=G}upload(o,u,h,g,b,w){this.isEmpty()||(h&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,E_e.members,!!w),this.indexBuffer=o.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,O_e.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,wve,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=o.createVertexBuffer(this.iconTransitioningVertexArray,D_e.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,A_e.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||b)&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,C_e.members,!0)),!this.orientationVertexBuffer&&this.orientationVertexArray&&this.orientationVertexArray.length>0&&(this.orientationVertexBuffer=o.createVertexBuffer(this.orientationVertexArray,M_e.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.orientationVertexBuffer&&this.orientationVertexBuffer.destroy())}}Kt(OL,"SymbolBuffers");class CL{constructor(o,u,h){this.layoutVertexArray=new o,this.layoutAttributes=u,this.indexArray=new h,this.segments=new Ii,this.collisionVertexArray=new ay,this.collisionVertexArrayExt=new ec}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,I_e.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,P_e.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Kt(CL,"CollisionBuffers");class UC{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(w=>w.fqid),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=k([]),this.placementViewportMatrix=k([]);const u=this.layers[0]._unevaluatedLayout._values;this.worldview=o.worldview,this.localizable=o.localizable,this.textSizeData=Tb(this.zoom,u["text-size"],this.worldview,o.availableImages),this.iconSizeData=Tb(this.zoom,u["icon-size"],this.worldview,o.availableImages);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),b=h.get("symbol-z-order");this.lut=o.lut,this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(w=>sc[w]),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=o.sourceID,this.projection=o.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0,this.hasAnySecondaryIcon=!1,this.hasAppearances=null,this.lastActiveApperance=null,this.featureToAppearanceIndex={}}hasAnyAppearanceProperty(o){const u=this.layers[0].getAppearances();if(!u||u.length===0)return!1;const h=Array.isArray(o)?o:[o];return u.some(g=>h.some(b=>g.getProperty(b)!=null))}createArrays(){this.text=new OL(new H(this.layers,{zoom:this.zoom,lut:this.lut},o=>o.startsWith("text")||o.startsWith("symbol"))),this.icon=new OL(new H(this.layers,{zoom:this.zoom,lut:this.lut},o=>o.startsWith("icon")||o.startsWith("symbol"))),this.glyphOffsetArray=new uy,this.lineVertexArray=new d1,this.symbolInstances=new ja}calculateGlyphDependencies(o,u,h,g,b){for(const w of o){const A=w.codePointAt(0);if(A===void 0)break;if(u[A]=!0,g&&b&&A<=65535){const D=QT[w];D&&(u[D.charCodeAt(0)]=!0)}}}calculateEffectiveAppearanceIconSize(o,u,h,g,b,w,A){if(!o.hasProperty("icon-size"))return A*w;let D=1;const P=o.getUnevaluatedProperties()._values["icon-size"],B=Tb(this.zoom,P,this.worldview,b),j=F1(B,u);if(B.kind!=="constant"&&B.kind!=="camera"||(D=j.uSize),B.kind==="composite"){const{minZoom:$,maxZoom:G}=B,Z=P.possiblyEvaluate(new Jr($,{worldview:this.worldview}),g),se=P.possiblyEvaluate(new Jr(G,{worldview:this.worldview}),g),fe=Z.evaluate(h,{},g,b);D=fe+(se.evaluate(h,{},g,b)-fe)*j.uSizeT}return B.kind==="source"&&(D=P.possiblyEvaluate(new Jr(this.zoom,{worldview:this.worldview}),g).evaluate(h,{},g,b)),D*w}updateFootprints(o,u){}updateReplacement(o,u){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const h=u.getReplacementRegionsForTile(o.toUnwrapped(),!0);return!m(this.activeReplacements,h)&&(this.activeReplacements=h,!0)}getResolvedImageFromTokens(o){return typeof o=="string"?nl.build(o):o}populate(o,u,h,g){const b=this.layers[0],w=b.layout,A=this.projection.name==="globe",D=w.get("text-font"),P=w.get("text-field"),B=w.get("icon-image"),[j,$]=w.get("icon-size-scale-range"),G=ze(u.scaleFactor||1,j,$),Z=(P.value.kind!=="constant"||P.value.value instanceof ss&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(D.value.kind!=="constant"||D.value.value.length>0),se=B.value.kind!=="constant"||!!B.value.value||Object.keys(B.parameters).length>0,fe=this.hasAnyAppearanceProperty("icon-image"),ue=w.get("symbol-sort-key");if(this.features=[],this.appearanceFeatureData=[],!Z&&!se&&!fe)return;const pe=u.iconDependencies,ve=u.glyphDependencies,Se=u.availableImages,ke=new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),Ie=Ve=>{const qe=Ve.id.toString();pe.has(qe)?pe.get(qe).push(Ve):pe.set(qe,[Ve])};for(const Ve of o){const{feature:qe,id:Ue,index:Ze,sourceLayerIndex:rt}=Ve,Et=b._featureFilter.needGeometry,xt=Qn(qe,Et);if(!b._featureFilter.filter(ke,xt,h))continue;if(Et||(xt.geometry=Un(qe,h,g)),A&&qe.type!==1&&h.z<=5){const Ft=xt.geometry,Lt=.98078528056,fn=(pn,nn)=>Ye(nb(pn.x,pn.y,h,1),nb(nn.x,nn.y,h,1))<Lt;for(let pn=0;pn<Ft.length;pn++)Ft[pn]=yn(Ft[pn],fn)}let Tt,kt;if(Z){const Ft=b.getValueAndResolveTokens("text-field",xt,h,Se),Lt=ss.factory(Ft);Sve(Lt)&&(this.hasRTLText=!0),(!this.hasRTLText||Th()==="unavailable"||this.hasRTLText&&Ol.isParsed())&&(Tt=k_e(Lt,b,xt))}if(se){const Ft=b.getValueAndResolveTokens("icon-image",xt,h,Se);kt=this.getResolvedImageFromTokens(Ft)}const Pt=this.layers[0];let Rt=!1;if(!kt&&fe){const Ft=Pt.getAppearances();for(const Lt of Ft)if(Lt.getProperty("icon-image")){const fn=Pt.getAppearanceValueAndResolveTokens(Lt,"icon-image",xt,h,Se);if(fn){kt=this.getResolvedImageFromTokens(fn),Rt=!0;break}}}if(!Tt&&!kt)continue;const vt=this.sortFeaturesByKey?ue.evaluate(xt,{},h):void 0,zt={id:Ue,text:Tt,icon:kt,index:Ze,sourceLayerIndex:rt,geometry:xt.geometry,properties:qe.properties,type:xve[qe.type],sortKey:vt};if(this.features.push(zt),this.featureToAppearanceIndex[Ze]=this.appearanceFeatureData.length,this.appearanceFeatureData.push({id:Ue,properties:qe.properties,usesAppearanceIconAsPlaceholder:Rt,isUsingAppearanceIconVertexData:!1,isUsingAppearanceTextVertexData:!1,layoutBasedIconVertexData:[],layoutBasedTextVertexData:[],activeAppearance:null}),kt){const Ft=Pt._unevaluatedLayout._values,{iconPrimary:Lt,iconSecondary:fn}=nE(kt,this.iconSizeData,Ft["icon-size"],h,this.zoom,zt,this.pixelRatio,G,this.worldview,Se);Ie(Lt),fn&&(this.hasAnySecondaryIcon=!0,Ie(fn))}const Mt=Pt.getAppearances();if(Mt.length!==0&&Mt.forEach(Ft=>{if(!Ft.getProperty("icon-image"))return;const Lt=this.getCombinedIconPrimary(Ft,Pt,xt,h,Se,zt,G);Lt&&Ie(Lt)}),Tt){const Ft=D.evaluate(xt,{},h).join(","),Lt=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(sc.vertical)>=0;for(const fn of Tt.sections)if(fn.image){const pn=fn.image.getPrimary().scaleSelf(this.pixelRatio),nn=pn.id.toString(),an=pe.get(nn)||[];an.push(pn),pe.set(nn,an)}else{const pn=X_(Tt.toString()),nn=fn.fontStack||Ft,an=ve[nn]=ve[nn]||{};this.calculateGlyphDependencies(fn.text,an,Lt,this.allowVerticalPlacement,pn)}}}if(w.get("symbol-placement")==="line"&&(this.features=(function(Ve){const qe={},Ue={},Ze=[];let rt=0;function Et(Pt){Ze.push(Ve[Pt]),rt++}function xt(Pt,Rt,vt){const zt=Ue[Pt];return delete Ue[Pt],Ue[Rt]=zt,Ze[zt].geometry[0].pop(),Ze[zt].geometry[0]=Ze[zt].geometry[0].concat(vt[0]),zt}function Tt(Pt,Rt,vt){const zt=qe[Rt];return delete qe[Rt],qe[Pt]=zt,Ze[zt].geometry[0].shift(),Ze[zt].geometry[0]=vt[0].concat(Ze[zt].geometry[0]),zt}function kt(Pt,Rt,vt){const zt=vt?Rt[0][Rt[0].length-1]:Rt[0][0];return`${Pt}:${zt.x}:${zt.y}`}for(let Pt=0;Pt<Ve.length;Pt++){const Rt=Ve[Pt],vt=Rt.geometry,zt=Rt.text?Rt.text.toString():null;if(!zt){Et(Pt);continue}const Mt=kt(zt,vt),Ft=kt(zt,vt,!0);if(Mt in Ue&&Ft in qe&&Ue[Mt]!==qe[Ft]){const Lt=Tt(Mt,Ft,vt),fn=xt(Mt,Ft,Ze[Lt].geometry);delete qe[Mt],delete Ue[Ft],Ue[kt(zt,Ze[fn].geometry,!0)]=fn,Ze[Lt].geometry=null}else Mt in Ue?xt(Mt,Ft,vt):Ft in qe?Tt(Mt,Ft,vt):(Et(Pt),qe[Mt]=rt-1,Ue[Ft]=rt-1)}return Ze.filter(Pt=>Pt.geometry)})(this.features)),w.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",u.elevationFeatures){!this.elevationFeatures&&u.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const Ve of u.elevationFeatures)this.elevationFeatureIdToIndex.set(Ve.id,this.elevationFeatures.length),this.elevationFeatures.push(Ve)}}else w.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((Ve,qe)=>Ve.sortKey-qe.sortKey)}getCombinedIconPrimary(o,u,h,g,b,w,A){let D,P;const B=o.getUnevaluatedProperties();if(B._values["icon-image"].value!==void 0){const j=u.getAppearanceValueAndResolveTokens(o,"icon-image",h,g,b);D=this.getResolvedImageFromTokens(j)}else{const j=u.getValueAndResolveTokens("icon-image",h,g,b);D=this.getResolvedImageFromTokens(j)}if(D){const j=o.hasProperty("icon-size")?B._values["icon-size"]:u._unevaluatedLayout._values["icon-size"];P=nE(D,Tb(this.zoom,j,this.worldview,b),j,g,this.zoom,w,this.pixelRatio,A,this.worldview,b).iconPrimary}return P}updateSymbolInstanceIconVertices(o,u,h,g,b,w,A,D,P,B,j,$,G,Z){if(o.placedIconSymbolIndex<0)return{vertexOffsetDelta:0,hasChanges:!1};if(u.activeAppearance===h)return{vertexOffsetDelta:o.numIconVertices,hasChanges:!1};if(h){const se=this.getCombinedIconPrimary(h,P,g,w,A,{sortKey:void 0,text:void 0,icon:null,index:o.featureIndex,sourceLayerIndex:o.featureIndex,geometry:[],properties:u.properties,type:"Point",id:u.id},B);if(!se)return{vertexOffsetDelta:0,hasChanges:!1};const fe=se.toString(),ue=this.iconAtlasPositions&&this.iconAtlasPositions.get(fe);if(ue){const{appearanceIconOffset:pe,appearanceIconRotate:ve}=RH(h,P,g,w,$,Z,G,B);let Se=IC(ue,void 0,pe,P.layout.get("icon-anchor").evaluate(g,j,w));const ke=ue.sdf,Ie=P.layout.get("icon-text-fit").constantOr("none");Ie!=="none"&&u.textShaping&&u.iconTextFitPadding&&u.fontScale&&(Se=yL(Se,u.textShaping,Ie,u.iconTextFitPadding,pe,u.fontScale));const Ve=this.calculateEffectiveAppearanceIconSize(h,D.zoom,g,w,A,B,G),qe=0,Ue=1+(Math.min(Eb,Math.round(Ve*_y))<<1),Ze=xL(Se,ve,ke,Ie!=="none",B);u.isUsingAppearanceIconVertexData||(u.isUsingAppearanceIconVertexData=!0,u.layoutBasedIconVertexData=this.icon.getSymbolVertexData(b,o.numIconVertices));let rt=b;for(let xt=0;xt<Ze.length;++xt){const Tt=Ze[xt],kt=u.layoutBasedIconVertexData[0]||o.tileAnchorX,Pt=u.layoutBasedIconVertexData[1]||o.tileAnchorY,Rt=16*Tt.pixelOffsetTL.x,vt=16*Tt.pixelOffsetTL.y,zt=16*Tt.pixelOffsetBR.x,Mt=16*Tt.pixelOffsetBR.y,Ft=16*Tt.minFontScaleX,Lt=16*Tt.minFontScaleY;this.icon.updateSymbolVertexData(rt,kt,Pt,Math.round(32*Tt.tl.x),Math.round(32*Tt.tl.y),Tt.texPrimary.x,Tt.texPrimary.y,qe,Ue,Rt,vt,Ft,Lt),this.icon.updateSymbolVertexData(rt+1,kt,Pt,Math.round(32*Tt.tr.x),Math.round(32*Tt.tr.y),Tt.texPrimary.x+Tt.texPrimary.w,Tt.texPrimary.y,qe,Ue,zt,vt,Ft,Lt),this.icon.updateSymbolVertexData(rt+2,kt,Pt,Math.round(32*Tt.bl.x),Math.round(32*Tt.bl.y),Tt.texPrimary.x,Tt.texPrimary.y+Tt.texPrimary.h,qe,Ue,Rt,Mt,Ft,Lt),this.icon.updateSymbolVertexData(rt+3,kt,Pt,Math.round(32*Tt.br.x),Math.round(32*Tt.br.y),Tt.texPrimary.x+Tt.texPrimary.w,Tt.texPrimary.y+Tt.texPrimary.h,qe,Ue,zt,Mt,Ft,Lt),rt+=4}const Et=o.numIconVertices-4*Ze.length;for(let xt=0;xt<Et;++xt)this.icon.updateSymbolVertexData(rt+xt,0,0,0,0,0,0,0,0,0,0,0,0);return{vertexOffsetDelta:o.numIconVertices,hasChanges:!0}}}else if(u.usesAppearanceIconAsPlaceholder){if(this.layers[0].appearances&&this.layers[0].appearances.length>0)return this.icon.updateSymbolVertexData(b,0,0,0,0,0,0,0,0,0,0,0,0),this.icon.updateSymbolVertexData(b+1,0,0,0,0,0,0,0,0,0,0,0,0),this.icon.updateSymbolVertexData(b+2,0,0,0,0,0,0,0,0,0,0,0,0),this.icon.updateSymbolVertexData(b+3,0,0,0,0,0,0,0,0,0,0,0,0),{vertexOffsetDelta:o.numIconVertices,hasChanges:!0}}else if(u.isUsingAppearanceIconVertexData){const fe=u.layoutBasedIconVertexData.length/12;for(let ue=0;ue<fe;++ue){const pe=ue*12;this.icon.updateSymbolVertexData(b+ue,u.layoutBasedIconVertexData[pe+0],u.layoutBasedIconVertexData[pe+1],u.layoutBasedIconVertexData[pe+2],u.layoutBasedIconVertexData[pe+3],u.layoutBasedIconVertexData[pe+4],u.layoutBasedIconVertexData[pe+5],u.layoutBasedIconVertexData[pe+6],u.layoutBasedIconVertexData[pe+7],u.layoutBasedIconVertexData[pe+8],u.layoutBasedIconVertexData[pe+9],u.layoutBasedIconVertexData[pe+10],u.layoutBasedIconVertexData[pe+11])}return u.isUsingAppearanceIconVertexData=!1,{vertexOffsetDelta:fe,hasChanges:!0}}return{vertexOffsetDelta:o.numIconVertices,hasChanges:!1}}updateSymbolInstanceTextVertices(o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe,ue,pe){const ve=o.numHorizontalGlyphVertices>0||o.numVerticalGlyphVertices>0;if(!ve)return{vertexOffsetDelta:ve?o.numHorizontalGlyphVertices+o.numVerticalGlyphVertices:0,hasChanges:!1};if(u.activeAppearance===h)return{vertexOffsetDelta:o.numHorizontalGlyphVertices+o.numVerticalGlyphVertices,hasChanges:!1};if(h&&u.textShaping){const{appearanceTextOffset:Se,appearanceTextRotate:ke,appearanceTextSize:Ie}=kH(h,A,g,w,j,G,$);u.fontScale=NH(Ie,u.textScaleFactor);const Ve=h.getUnevaluatedProperty("text-size");let qe=this.textSizeData,Ue=fe,Ze=ue;h.hasProperty("text-size")&&(qe=Tb(this.zoom,Ve,this.worldview,pe),Ue=this.textSizeData.kind==="composite"?this.textSizeData.minZoom:0,Ze=this.textSizeData.kind==="composite"?this.textSizeData.maxZoom:0);const rt=u.textShaping.bottom-j[1],Et=u.textShaping.left-j[0],xt=u.textShaping.right-j[0];u.textShaping.top=Se[1]+(u.textShaping.top-j[1]),u.textShaping.bottom=Se[1]+rt,u.textShaping.left=Se[0]+Et,u.textShaping.right=Se[0]+xt;const Tt=IH(0,u.textShaping,Se,A,!1,g,P,this.allowVerticalPlacement,ke),kt=Ie&&qe.kind==="composite"?Ve.possiblyEvaluate(new Jr(Ue,{}),w).evaluate(g,B,w):Z,Pt=Ie&&qe.kind==="composite"?Ve.possiblyEvaluate(new Jr(Ze,{}),w).evaluate(g,B,w):se,Rt=EL(h.name,qe,Ie,D,kt,Pt),vt=Array.isArray(Rt)?Rt[1]:Ie,zt=0,Mt=1+(Math.min(Eb,Math.round(vt*_y))<<1);u.isUsingAppearanceTextVertexData||(u.isUsingAppearanceTextVertexData=!0,u.layoutBasedTextVertexData=this.text.getSymbolVertexData(b,o.numHorizontalGlyphVertices+o.numVerticalGlyphVertices));for(let Ft=0;Ft<Tt.length&&Ft<(o.numHorizontalGlyphVertices+o.numVerticalGlyphVertices)/4;++Ft){const Lt=Tt[Ft],fn=Lt.glyphOffset[1],pn=o.tileAnchorX,nn=o.tileAnchorY,an=b+4*Ft;this.text.updateSymbolVertexData(an,pn,nn,Math.round(32*Lt.tl.x),Math.round(32*(fn+Lt.tl.y)),Lt.texPrimary.x,Lt.texPrimary.y,zt,Mt,Lt.pixelOffsetTL.x,Lt.pixelOffsetTL.y,Lt.minFontScaleX,Lt.minFontScaleY),this.text.updateSymbolVertexData(an+1,pn,nn,Math.round(32*Lt.tr.x),Math.round(32*(fn+Lt.tr.y)),Lt.texPrimary.x+Lt.texPrimary.w,Lt.texPrimary.y,zt,Mt,Lt.pixelOffsetBR.x,Lt.pixelOffsetTL.y,Lt.minFontScaleX,Lt.minFontScaleY),this.text.updateSymbolVertexData(an+2,pn,nn,Math.round(32*Lt.bl.x),Math.round(32*(fn+Lt.bl.y)),Lt.texPrimary.x,Lt.texPrimary.y+Lt.texPrimary.h,zt,Mt,Lt.pixelOffsetTL.x,Lt.pixelOffsetBR.y,Lt.minFontScaleX,Lt.minFontScaleY),this.text.updateSymbolVertexData(an+3,pn,nn,Math.round(32*Lt.br.x),Math.round(32*(fn+Lt.br.y)),Lt.texPrimary.x+Lt.texPrimary.w,Lt.texPrimary.y+Lt.texPrimary.h,zt,Mt,Lt.pixelOffsetBR.x,Lt.pixelOffsetBR.y,Lt.minFontScaleX,Lt.minFontScaleY)}return{vertexOffsetDelta:o.numHorizontalGlyphVertices+o.numVerticalGlyphVertices,hasChanges:!0}}if(u.isUsingAppearanceTextVertexData){const ke=u.layoutBasedTextVertexData.length/12;for(let Ie=0;Ie<ke;++Ie){const Ve=Ie*12;this.text.updateSymbolVertexData(b+Ie,u.layoutBasedTextVertexData[Ve+0],u.layoutBasedTextVertexData[Ve+1],u.layoutBasedTextVertexData[Ve+2],u.layoutBasedTextVertexData[Ve+3],u.layoutBasedTextVertexData[Ve+4],u.layoutBasedTextVertexData[Ve+5],u.layoutBasedTextVertexData[Ve+6],u.layoutBasedTextVertexData[Ve+7],u.layoutBasedTextVertexData[Ve+8],u.layoutBasedTextVertexData[Ve+9],u.layoutBasedTextVertexData[Ve+10],u.layoutBasedTextVertexData[Ve+11])}return u.isUsingAppearanceTextVertexData=!1,{vertexOffsetDelta:ke,hasChanges:!0}}return{vertexOffsetDelta:o.numHorizontalGlyphVertices+o.numVerticalGlyphVertices,hasChanges:!1}}update(o,u,h,g,b,w,A){this.text.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A,this.worldview),this.icon.programConfigurations.updatePaintArrays(o,u,b,h,g,w,A,this.worldview)}updateRoadElevation(o){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let u=!1;const h=qt(o),g=1/h;let b=!1,w=!1;for(let A=0;A<this.symbolInstances.length;A++){const D=this.symbolInstances.get(A),P=Ee(1,0,0),B=Ee(0,1,0),{numHorizontalGlyphVertices:j,numVerticalGlyphVertices:$,numIconVertices:G,numVerticalIconVertices:Z}=D,se=j>0||$>0,fe=G>0,ue=this.elevationFeatures[D.elevationFeatureIndex];if(ue){const pe=new Vt(D.tileAnchorX,D.tileAnchorY),ve=.075+ue.pointElevation(pe);D.zOffset!==ve&&(u=!0,D.zOffset=ve),ve!==0&&(this.hasAnyZOffset=!0);const Se=ue.computeSlopeNormal(pe,g),ke=Aa($t(),Ee(0,0,1),Se);gn(P,P,ke),gn(B,B,ke),P[2]*=h,B[2]*=h,P[0]===1&&P[1]===0&&P[2]===0&&B[0]===0&&B[1]===1&&B[2]===0||(b=b||se,w=w||fe)}if(se&&(jC(this.text.orientationVertexArray,j,P,B),jC(this.text.orientationVertexArray,$,P,B)),fe){const{placedIconSymbolIndex:pe,verticalPlacedIconSymbolIndex:ve}=D;pe>=0&&jC(this.icon.orientationVertexArray,G,P,B),ve>=0&&jC(this.icon.orientationVertexArray,Z,P,B)}}b||(this.text.orientationVertexArray=void 0),w||(this.icon.orientationVertexArray=void 0),u&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const o=(b,w,A)=>{h+=w,h>b.length&&b.resize(h);for(let D=-w;D<0;D++)b.emplace(D+h,A)},u=(b,w,A)=>{g+=w,g>b.length&&b.resize(g);for(let D=-w;D<0;D++)b.emplace(D+g,A)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let h=0,g=0;for(let b=0;b<this.symbolInstances.length;b++){const w=this.symbolInstances.get(b),{numHorizontalGlyphVertices:A,numVerticalGlyphVertices:D,numIconVertices:P}=w,B=w.zOffset,j=P>0;if((A>0||D>0)&&(o(this.text.zOffsetVertexArray,A,B),o(this.text.zOffsetVertexArray,D,B)),j){const{placedIconSymbolIndex:$,verticalPlacedIconSymbolIndex:G}=w;$>=0&&u(this.icon.zOffsetVertexArray,P,B),G>=0&&u(this.icon.zOffsetVertexArray,w.numVerticalIconVertices,B)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o,u,h,g,b){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload,this.hasAppearances),this.hasAppearances===null&&(this.hasAppearances=this.layers.some(w=>w.appearances&&w.appearances.length>0)),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload,this.hasAppearances),this.uploaded=!0}updateAppearances(o,u,h,g,b){if(!(o&&u&&h&&this.appearanceFeatureData))return!1;const w=this.icon.layoutVertexArray&&this.icon.layoutVertexArray.length>0&&this.icon.layoutVertexArray.arrayBuffer,A=this.text.layoutVertexArray&&this.text.layoutVertexArray.length>0&&this.text.layoutVertexArray.arrayBuffer;if(!w&&!A)return!1;const D=this.layers[0],P=D.layout;let B=1,j=0,$=!1;if(w){const[ue,pe]=P.get("icon-size-scale-range");B=ze(1,ue,pe)}let G=1,Z=0,se=!1;if(A){const[ue,pe]=P.get("text-size-scale-range");G=ze(1,ue,pe)}const fe=new Map;if(b&&h)for(const ue of h){const pe=b.getImage(ue,D.scope);if(pe){const ve=new Bo(ue.toString());fe.set(ve.toString(),pe)}}for(let ue=0;ue<this.symbolInstances.length;ue++){const pe=this.symbolInstances.get(ue),ve=this.featureToAppearanceIndex[pe.featureIndex],Se=ve!==void 0?this.appearanceFeatureData[ve]:void 0;if(!Se)continue;const ke=Se.id,Ie=u&&ke!==void 0?u[String(ke)]:void 0,Ve={type:"Point",id:Se.id,properties:Se.properties,geometry:[]},qe=D.appearances&&D.appearances.find(Ue=>Ue.isActive({globals:g,feature:Ve,canonical:o,featureState:Ie}));if(A){const Ue=P.get("text-size"),Ze=P.get("text-offset").evaluate(Ve,Ie,o),rt=Ue.evaluate(Ve,Ie,o),Et=P.get("text-rotate").evaluate(Ve,Ie,o),xt=this.textSizeData.kind==="composite"?this.textSizeData.minZoom:0,Tt=this.textSizeData.kind==="composite"?this.textSizeData.maxZoom:0,kt=Ue.evaluate(Ve,{zoom:xt},o),Pt=Ue.evaluate(Ve,{zoom:Tt},o),Rt=this.updateSymbolInstanceTextVertices(pe,Se,qe,Ve,Z,o,D,G,fe,Ie,Ze,rt,Et,kt,Pt,xt,Tt,h);Z+=Rt.vertexOffsetDelta,se=se||Rt.hasChanges}if(w){const Ue=P.get("icon-offset").evaluate(Ve,Ie,o),Ze=P.get("icon-size").evaluate(Ve,Ie,o,h),rt=P.get("icon-rotate").evaluate(Ve,Ie,o),Et=this.updateSymbolInstanceIconVertices(pe,Se,qe,Ve,j,o,h,g,D,B,Ie,Ue,Ze,rt);j+=Et.vertexOffsetDelta,$=$||Et.hasChanges}Se.activeAppearance=qe}return $&&this.icon.layoutVertexBuffer&&this.icon.layoutVertexArray.arrayBuffer!==null&&this.icon.layoutVertexArray.length===this.icon.layoutVertexBuffer.length&&this.icon.layoutVertexBuffer.updateData(this.icon.layoutVertexArray),se&&this.text.layoutVertexBuffer&&this.text.layoutVertexArray.arrayBuffer!==null&&this.text.layoutVertexArray.length===this.text.layoutVertexBuffer.length&&this.text.layoutVertexBuffer.updateData(this.text.layoutVertexArray),$||se}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=GH(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,u){const h=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:g,y:b}of u)this.lineVertexArray.emplaceBack(g,b);return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se,fe,ue,pe){const ve=o.indexArray,Se=o.layoutVertexArray,ke=o.globeExtVertexArray,Ie=o.segments.prepareSegment(4*pe,Se,ve,this.canOverlap?w.sortKey:void 0),Ve=this.glyphOffsetArray.length,qe=Ie.vertexLength,Ue=this.allowVerticalPlacement&&A===sc.vertical?Math.PI/2:0,Ze=w.text&&w.text.sections;for(let xt=0;xt<u.length;xt++){const{tl:Tt,tr:kt,bl:Pt,br:Rt,texPrimary:vt,texSecondary:zt,pixelOffsetTL:Mt,pixelOffsetBR:Ft,minFontScaleX:Lt,minFontScaleY:fn,glyphOffset:pn,isSDF:nn,sectionIndex:an}=u[xt],kn=Ie.vertexLength,On=pn[1];if(lE(Se,P.x,P.y,Tt.x,On+Tt.y,vt.x,vt.y,h,nn,Mt.x,Mt.y,Lt,fn),lE(Se,P.x,P.y,kt.x,On+kt.y,vt.x+vt.w,vt.y,h,nn,Ft.x,Mt.y,Lt,fn),lE(Se,P.x,P.y,Pt.x,On+Pt.y,vt.x,vt.y+vt.h,h,nn,Mt.x,Ft.y,Lt,fn),lE(Se,P.x,P.y,Rt.x,On+Rt.y,vt.x+vt.w,vt.y+vt.h,h,nn,Ft.x,Ft.y,Lt,fn),D){const{x:cn,y:Wn,z:vr}=D.anchor,[Zr,pr,di]=D.up;cE(ke,cn,Wn,vr,Zr,pr,di),cE(ke,cn,Wn,vr,Zr,pr,di),cE(ke,cn,Wn,vr,Zr,pr,di),cE(ke,cn,Wn,vr,Zr,pr,di),U1(o.dynamicLayoutVertexArray,cn,Wn,vr,Ue)}else U1(o.dynamicLayoutVertexArray,P.x,P.y,P.z,Ue);if(fe){const cn=zt||vt;uE(o.iconTransitioningVertexArray,cn.x,cn.y),uE(o.iconTransitioningVertexArray,cn.x+cn.w,cn.y),uE(o.iconTransitioningVertexArray,cn.x,cn.y+cn.h),uE(o.iconTransitioningVertexArray,cn.x+cn.w,cn.y+cn.h)}ve.emplaceBack(kn,kn+1,kn+2),ve.emplaceBack(kn+1,kn+2,kn+3),Ie.vertexLength+=4,Ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(pn[0]),xt!==u.length-1&&an===u[xt+1].sectionIndex||o.programConfigurations.populatePaintArrays(Se.length,w,w.index,{},G,Z,se,Ze&&Ze[an],this.worldview)}const rt=pe-u.length;rt!==0&&this._addNullVertices(rt,Se,h,D,ke,o,fe,Ie,ve);const Et=D?D.anchor:P;o.placedSymbolArray.emplaceBack(Et.x,Et.y,Et.z,P.x,P.y,Ve,this.glyphOffsetArray.length-Ve,qe,B,j,P.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],A,0,0,0,$,0),o.symbolInstanceIndices.push(ue)}_addNullVertices(o,u,h,g,b,w,A,D,P){for(let B=0;B<o;B++){for(let $=0;$<4;$++)lE(u,0,0,0,0,0,0,h,!1,0,0,0,0),g&&cE(b,0,0,0,0,0,0),U1(w.dynamicLayoutVertexArray,0,0,0,0),A&&uE(w.iconTransitioningVertexArray,0,0);const j=D.vertexLength;P.emplaceBack(j,j+1,j+2),P.emplaceBack(j+1,j+2,j+3),D.vertexLength+=4,D.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(0)}}_commitLayoutVertex(o,u,h,g,b,w,A){o.emplaceBack(u,h,g,b,w,Math.round(A.x),Math.round(A.y))}_addCollisionDebugVertices(o,u,h,g,b,w,A){const D=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),P=D.vertexLength,B=A.tileAnchorX,j=A.tileAnchorY;for(let G=0;G<4;G++)h.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(h.collisionVertexArrayExt,u,o.padding,A.zOffset),this._commitLayoutVertex(h.layoutVertexArray,g,b,w,B,j,new Vt(o.x1,o.y1)),this._commitLayoutVertex(h.layoutVertexArray,g,b,w,B,j,new Vt(o.x2,o.y1)),this._commitLayoutVertex(h.layoutVertexArray,g,b,w,B,j,new Vt(o.x2,o.y2)),this._commitLayoutVertex(h.layoutVertexArray,g,b,w,B,j,new Vt(o.x1,o.y2)),D.vertexLength+=4;const $=h.indexArray;$.emplaceBack(P,P+1),$.emplaceBack(P+1,P+2),$.emplaceBack(P+2,P+3),$.emplaceBack(P+3,P),D.primitiveLength+=4}_addTextDebugCollisionBoxes(o,u,h,g,b,w){for(let A=g;A<b;A++){const D=h.get(A),P=this.getSymbolInstanceTextSize(o,w,u,A);this._addCollisionDebugVertices(D,P,this.textCollisionBox,D.projectedAnchorX,D.projectedAnchorY,D.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(o,u,h,g,b,w){for(let A=g;A<b;A++){const D=h.get(A),P=this.getSymbolInstanceIconSize(o,u,w.placedIconSymbolIndex);this._addCollisionDebugVertices(D,P,this.iconCollisionBox,D.projectedAnchorX,D.projectedAnchorY,D.projectedAnchorZ,w)}}generateCollisionDebugBuffers(o,u,h){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new CL(hm,sH.members,Wl),this.iconCollisionBox=new CL(hm,sH.members,Wl);const g=F1(this.iconSizeData,o),b=F1(this.textSizeData,o,h);for(let w=0;w<this.symbolInstances.length;w++){const A=this.symbolInstances.get(w);this._addTextDebugCollisionBoxes(b,o,u,A.textBoxStartIndex,A.textBoxEndIndex,A),this._addTextDebugCollisionBoxes(b,o,u,A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A),this._addIconDebugCollisionBoxes(g,o,u,A.iconBoxStartIndex,A.iconBoxEndIndex,A),this._addIconDebugCollisionBoxes(g,o,u,A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A)}}getSymbolInstanceTextSize(o,u,h,g){const b=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:g),w=_L(this.textSizeData,o,b)/Qo;return this.tilePixelRatio*w}getSymbolInstanceIconSize(o,u,h){const g=this.icon.placedSymbolArray.get(h),b=_L(this.iconSizeData,o,g);return this.tilePixelRatio*b}_commitDebugCollisionVertexUpdate(o,u,h,g){o.emplaceBack(u,-h,-h,g),o.emplaceBack(u,h,-h,g),o.emplaceBack(u,h,h,g),o.emplaceBack(u,-h,h,g)}_updateTextDebugCollisionBoxes(o,u,h,g,b,w,A){for(let D=g;D<b;D++){const P=h.get(D),B=this.getSymbolInstanceTextSize(o,w,u,D);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,B,P.padding,w.zOffset)}}_updateIconDebugCollisionBoxes(o,u,h,g,b,w,A){for(let D=g;D<b;D++){const P=h.get(D),B=this.getSymbolInstanceIconSize(o,u,w.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,B,P.padding,w.zOffset)}}updateCollisionDebugBuffers(o,u,h,g){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const b=F1(this.iconSizeData,o,g),w=F1(this.textSizeData,o,h);for(let A=0;A<this.symbolInstances.length;A++){const D=this.symbolInstances.get(A);this._updateTextDebugCollisionBoxes(w,o,u,D.textBoxStartIndex,D.textBoxEndIndex,D,h),this._updateTextDebugCollisionBoxes(w,o,u,D.verticalTextBoxStartIndex,D.verticalTextBoxEndIndex,D,h),this._updateIconDebugCollisionBoxes(b,o,u,D.iconBoxStartIndex,D.iconBoxEndIndex,D,g),this._updateIconDebugCollisionBoxes(b,o,u,D.verticalIconBoxStartIndex,D.verticalIconBoxEndIndex,D,g)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,u,h,g,b,w,A,D,P){const B={};if(u<h){const{x1:j,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se,featureIndex:ke}=o.get(u);B.textBox={x1:j,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se},B.textFeatureIndex=ke}if(g<b){const{x1:j,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se,featureIndex:ke}=o.get(g);B.verticalTextBox={x1:j,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se},B.verticalTextFeatureIndex=ke}if(w<A){const{x1:j,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se,featureIndex:ke}=o.get(w);B.iconBox={x1:j,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se},B.iconFeatureIndex=ke}if(D<P){const{x1:j,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se,featureIndex:ke}=o.get(D);B.verticalIconBox={x1:j,y1:$,x2:G,y2:Z,padding:se,projectedAnchorX:fe,projectedAnchorY:ue,projectedAnchorZ:pe,tileAnchorX:ve,tileAnchorY:Se},B.verticalIconFeatureIndex=ke}return B}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const h=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(o,u){const h=o.placedSymbolArray.get(u),g=h.vertexStartIndex+4*h.numGlyphs;for(let b=h.vertexStartIndex;b<g;b+=4)o.indexArray.emplaceBack(b,b+1,b+2),o.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(o),h=Math.cos(o),g=[],b=[],w=[];for(let A=0;A<this.symbolInstances.length;++A){w.push(A);const D=this.symbolInstances.get(A);g.push(0|Math.round(u*D.tileAnchorX+h*D.tileAnchorY)),b.push(D.featureIndex)}return w.sort((A,D)=>g[A]-g[D]||b[D]-b[A]),w}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let o=0;o<this.symbolInstances.length;++o)this.symbolInstanceIndexesSortedZOffset.push(o)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((o,u)=>this.symbolInstances.get(u).zOffset-this.symbolInstances.get(o).zOffset)}addToSortKeyRanges(o,u){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===u?h.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const h=this.symbolInstances.get(u);this.featureSortOrder.push(h.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:b,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:A,placedIconSymbolIndex:D,verticalPlacedIconSymbolIndex:P}=h;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),b>=0&&b!==g&&this.addIndicesForPlacedSymbol(this.text,b),w>=0&&w!==b&&w!==g&&this.addIndicesForPlacedSymbol(this.text,w),A>=0&&this.addIndicesForPlacedSymbol(this.text,A),D>=0&&this.addIndicesForPlacedSymbol(this.icon,D),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}getElevationFeatureForText(o){const u=this.symbolInstances.get(this.text.symbolInstanceIndices[o]).elevationFeatureIndex;let h;return this.elevationFeatures&&u<this.elevationFeatures.length&&(h=this.elevationFeatures[u]),h}}function YH(c,o){return o.replace(/{([^{}]+)}/g,(u,h)=>h in c?String(c[h]):"")}let WH,XH,ML;Kt(UC,"SymbolBucket",{omit:["layers","collisionBoxArray","compareText","features"]}),UC.addDynamicAttributes=U1;class ZH{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:tl,this.defaultValue=o}evaluate(o){if(o.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(o.formattedSection))return u.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Kt(ZH,"FormatSectionOverride",{omit:["defaultValue"]});const DL=()=>ML||(ML={layout:WH||(WH=new Ui({"symbol-placement":new Xt(ht.layout_symbol["symbol-placement"]),"symbol-spacing":new Xt(ht.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Xt(ht.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new on(ht.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Xt(ht.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Xt(ht.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new Xt(ht.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new Xt(ht.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Xt(ht.layout_symbol["icon-ignore-placement"]),"icon-optional":new Xt(ht.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Xt(ht.layout_symbol["icon-rotation-alignment"]),"icon-size":new on(ht.layout_symbol["icon-size"]),"icon-size-scale-range":new Xt(ht.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new on(ht.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new on(ht.layout_symbol["icon-text-fit-padding"]),"icon-image":new on(ht.layout_symbol["icon-image"]),"icon-image-use-theme":new Xt({type:"string",default:"default","property-type":"data-constant"}),"icon-rotate":new on(ht.layout_symbol["icon-rotate"]),"icon-padding":new Xt(ht.layout_symbol["icon-padding"]),"icon-keep-upright":new Xt(ht.layout_symbol["icon-keep-upright"]),"icon-offset":new on(ht.layout_symbol["icon-offset"]),"icon-anchor":new on(ht.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Xt(ht.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Xt(ht.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Xt(ht.layout_symbol["text-rotation-alignment"]),"text-field":new on(ht.layout_symbol["text-field"]),"text-font":new on(ht.layout_symbol["text-font"]),"text-size":new on(ht.layout_symbol["text-size"]),"text-size-scale-range":new Xt(ht.layout_symbol["text-size-scale-range"]),"text-max-width":new on(ht.layout_symbol["text-max-width"]),"text-line-height":new on(ht.layout_symbol["text-line-height"]),"text-letter-spacing":new on(ht.layout_symbol["text-letter-spacing"]),"text-justify":new on(ht.layout_symbol["text-justify"]),"text-radial-offset":new on(ht.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Xt(ht.layout_symbol["text-variable-anchor"]),"text-anchor":new on(ht.layout_symbol["text-anchor"]),"text-max-angle":new Xt(ht.layout_symbol["text-max-angle"]),"text-writing-mode":new Xt(ht.layout_symbol["text-writing-mode"]),"text-rotate":new on(ht.layout_symbol["text-rotate"]),"text-padding":new Xt(ht.layout_symbol["text-padding"]),"text-keep-upright":new Xt(ht.layout_symbol["text-keep-upright"]),"text-transform":new on(ht.layout_symbol["text-transform"]),"text-offset":new on(ht.layout_symbol["text-offset"]),"text-allow-overlap":new Xt(ht.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Xt(ht.layout_symbol["text-ignore-placement"]),"text-optional":new Xt(ht.layout_symbol["text-optional"]),visibility:new Xt(ht.layout_symbol.visibility)})),paint:XH||(XH=new Ui({"icon-opacity":new on(ht.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new on(ht.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new on(ht.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new on(ht.paint_symbol["text-emissive-strength"]),"icon-color":new on(ht.paint_symbol["icon-color"]),"icon-halo-color":new on(ht.paint_symbol["icon-halo-color"]),"icon-halo-width":new on(ht.paint_symbol["icon-halo-width"]),"icon-halo-blur":new on(ht.paint_symbol["icon-halo-blur"]),"icon-translate":new Xt(ht.paint_symbol["icon-translate"]),"icon-translate-anchor":new Xt(ht.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Xt(ht.paint_symbol["icon-image-cross-fade"]),"text-opacity":new on(ht.paint_symbol["text-opacity"]),"text-occlusion-opacity":new on(ht.paint_symbol["text-occlusion-opacity"]),"text-color":new on(ht.paint_symbol["text-color"],{runtimeType:Bs,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new on(ht.paint_symbol["text-halo-color"]),"text-halo-width":new on(ht.paint_symbol["text-halo-width"]),"text-halo-blur":new on(ht.paint_symbol["text-halo-blur"]),"text-translate":new Xt(ht.paint_symbol["text-translate"]),"text-translate-anchor":new Xt(ht.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Xt(ht.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Xt(ht.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Xt(ht.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Xt(ht.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new on(ht.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},ML);class $C extends Ms{constructor(o,u,h,g){super(o,DL(),u,h,g,o.layout?o.layout["icon-image-use-theme"]:null),this._colorAdjustmentMatrix=k([]),this.hasOcclusionOpacityProperties=o.paint!==void 0&&("icon-occlusion-opacity"in o.paint||"text-occlusion-opacity"in o.paint)}_handleSpecialPaintPropertyUpdate(o){o!=="icon-occlusion-opacity"&&o!=="text-occlusion-opacity"||(this.hasOcclusionOpacityProperties=!0)}recalculate(o,u){super.recalculate(o,u),this.appearances&&this.appearances.forEach(g=>{g.recalculate(o,u,this.iconImageUseTheme)}),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const b of h)g.indexOf(b)<0&&g.push(b);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(o,u,h,g){return this._saturation===o&&this._contrast===u&&this._brightnessMin===h&&this._brightnessMax===g||(this._colorAdjustmentMatrix=(function(b,w,A,D){b=la(b),w=wi(w);const P=F(),B=b/3,j=1-2*B,$=[j,B,B,0,B,j,B,0,B,B,j,0,0,0,0,1],G=.5-.5*w,Z=D-A;return K(P,[Z,0,0,0,0,Z,0,0,0,0,Z,0,A,A,A,1],[w,0,0,0,0,w,0,0,0,0,w,0,G,G,G,1]),K(P,P,$),P})(o,u,h,g),this._saturation=o,this._contrast=u,this._brightnessMin=h,this._brightnessMax=g),this._colorAdjustmentMatrix}getValueAndResolveTokens(o,u,h,g){const b=this.layout.get(o).evaluate(u,{},h,g),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||kd(w.value)||!b?b:YH(u.properties,b)}getAppearanceValueAndResolveTokens(o,u,h,g,b){const w=o.getProperty(u);if(!w)return;const A=w.evaluate(h,{},g,b),D=o.getUnevaluatedProperties()._values[u];return D.isDataDriven()||kd(D.value)||!A||typeof A!="string"?A:YH(h.properties,A)}createBucket(o){return new UC(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of DL().paint.overridableProperties){if(!$C.hasPaintOverride(this.layout,o))continue;const u=this.paint.get(o),h=new ZH(u),g=new Vg(h,u.property.specification,this.scope,this.options,this.layout.get("icon-image-use-theme"));let b=null;b=u.value.kind==="constant"||u.value.kind==="source"?new Es("source",g):new us("composite",g,u.value.zoomStops,u.value.interpolationType),this.paint._values[o]=new Eh(u.property,b,u.parameters)}}_handleOverridablePaintPropertyUpdate(o,u,h){return!(!this.layout||u.isDataDriven()||h.isDataDriven())&&$C.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,u){const h=o.get("text-field"),g=DL().paint.properties[u];let b=!1;const w=A=>{for(const D of A)if(g.overrides&&g.overrides.hasOverride(D))return void(b=!0)};if(h.value.kind==="constant"&&h.value.value instanceof ss)w(h.value.value.sections);else if(h.value.kind==="source"){const A=P=>{b||(P instanceof Ul&&to(P.value)===Bp?w(P.value.sections):P instanceof An?w(P.sections):P.eachChild(A))},D=h.value;D._styleExpression&&A(D._styleExpression.expression)}return b}getProgramIds(){return["symbol"]}getDefaultProgramParams(o,u,h){return{config:new q(this,{zoom:u,lut:h}),overrideFog:!1}}hasElevation(){return this.layout&&this.layout.get("symbol-elevation-reference")==="hd-road-markup"}}let KH,QH,JH,eG;var IL=gr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function VC(c,o,u,h,g,b,w,A){const D=[c,o,1,u,h,1,g,b,1],P=[w,A,1],B=I([],D),[j,$,G]=Yt(P,P,B);return z(D,D,[j,0,0,0,$,0,0,0,G])}function tG(c,o,u,h,g,b,w,A){const D=(function(P,B,j,$,G,Z,se,fe){const ue=VC(0,0,1,0,1,1,0,1),pe=VC(P,B,j,$,G,Z,se,fe);return z(pe,pe,I([],ue))})(c,o,u,h,g,b,w,A);return[D[2]/D[8]/Jt,D[5]/D[8]/Jt]}function qC(c){return[c[0],Math.min(Math.max(c[1],-85.051129),tt)]}class nG extends df{constructor(o,u,h,g){super(),this.id=o,this.dispatcher=h,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(g),this.options=u,this._dirty=!1}load(o,u){if(this._loaded=u||!1,this.fire(new uu("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return o&&(this.coordinates=o),this._loaded=!0,void this._finishLoading();this._imageRequest=bg(this.map._requestManager.transformRequest(this.url,eo.Image),(h,g)=>{this._imageRequest=null,this._loaded=!0,h?this.fire(new Fp(h)):g&&(this.image=g instanceof HTMLImageElement?Sl.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return o.url?(this._imageRequest&&o.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}setTexture(o){if(!(o.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new XT(this.map.painter.context,o.handle),this.width=o.dimensions[0],this.height=o.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new uu("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(o){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof XT||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(o){if(this.coordinates=o,this._boundsArray=void 0,this._unsupportedCoords=!1,!o.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let u=o[0][1],h=o[0][1];for(const b of o)b[1]>h&&(h=b[1]),b[1]<u&&(u=b[1]);const g=(h+u)/2;if(g>tt?this.onNorthPole=!0:g<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const b=o.map(tn.fromLngLat);this.tileID=(function(w){let A=1/0,D=1/0,P=-1/0,B=-1/0;for(const se of w)A=Math.min(A,se.x),D=Math.min(D,se.y),P=Math.max(P,se.x),B=Math.max(B,se.y);const j=Math.max(P-A,B-D),$=Math.max(0,Math.floor(-Math.log2(j))),G=Math.pow(2,$);let Z=Math.floor((A+P)/2*G);return Z>1&&(Z-=1),new qc($,Z,Math.floor((D+B)/2*G))})(b),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new uu("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){!this.texture||this.texture instanceof XT||(this.texture.destroy(),this._dirty=!0),this.texture=null,this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(o){for(const ue in this.tiles){const pe=this.tiles[ue];pe.state!=="loaded"&&(pe.state="loaded",pe.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const u=rE(new qc(0,0,0),this.map.transform.projection),h=[u.projection.project(this.coordinates[0][0],this.coordinates[0][1]),u.projection.project(this.coordinates[1][0],this.coordinates[1][1]),u.projection.project(this.coordinates[2][0],this.coordinates[2][1]),u.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!(function(ue){const pe=ue[1].x-ue[0].x,ve=ue[1].y-ue[0].y,Se=ue[2].x-ue[1].x,ke=ue[2].y-ue[1].y,Ie=ue[3].x-ue[2].x,Ve=ue[3].y-ue[2].y,qe=ue[0].x-ue[3].x,Ue=ue[0].y-ue[3].y,Ze=pe*ke-Se*ve,rt=Se*Ve-Ie*ke,Et=Ie*Ue-qe*Ve,xt=qe*ve-pe*Ue;return Ze>0&&rt>0&&Et>0&&xt>0||Ze<0&&rt<0&&Et<0&&xt<0})(h))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const g=rE(this.tileID,this.map.transform.projection),[b,w,A,D]=this.coordinates.map(ue=>{const pe=g.projection.project(ue[0],ue[1]);return UH(g,pe)._round()});this.perspectiveTransform=tG(b.x,b.y,w.x,w.y,A.x,A.y,D.x,D.y);const P=this._boundsArray=new Uc;P.emplaceBack(b.x,b.y,0,0),P.emplaceBack(w.x,w.y,Jt,0),P.emplaceBack(D.x,D.y,0,Jt),P.emplaceBack(A.x,A.y,Jt,Jt),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=o.createVertexBuffer(P,IL.members),this.boundsSegments=Ii.simpleSegment(0,0,4,2);const B=[],j=[qC(($=this.coordinates)[0]),qC($[1]),qC($[2]),qC($[3])];var $;const[G,Z,se,fe]=(function(ue){let pe=ue[0][0],ve=pe,Se=ue[0][1],ke=Se;for(let Ie=1;Ie<ue.length;Ie++)ue[Ie][0]<pe?pe=ue[Ie][0]:ue[Ie][0]>ve&&(ve=ue[Ie][0]),ue[Ie][1]<Se?Se=ue[Ie][1]:ue[Ie][1]>ke&&(ke=ue[Ie][1]);return[pe,Se,ve-pe,ke-Se]})(j);{const ue=new Uc,[pe,ve,Se,ke]=(function(Rt){let vt=Rt[0].x,zt=vt,Mt=Rt[0].y,Ft=Mt;for(let Lt=1;Lt<Rt.length;Lt++)Rt[Lt].x<vt?vt=Rt[Lt].x:Rt[Lt].x>zt&&(zt=Rt[Lt].x),Rt[Lt].y<Mt?Mt=Rt[Lt].y:Rt[Lt].y>Ft&&(Ft=Rt[Lt].y);return[vt,Mt,zt-vt,Ft-Mt]})(h),Ie=Rt=>[(Rt.x-pe)/Se,(Rt.y-ve)/ke],[Ve,qe,Ue,Ze]=h.map(Ie),rt=(function(Rt,vt,zt,Mt,Ft,Lt,fn,pn){const nn=VC(0,0,1,0,1,1,0,1);return z(nn,nn,I([],VC(Rt,vt,zt,Mt,Ft,Lt,fn,pn)))})(Ve[0],Ve[1],qe[0],qe[1],Ue[0],Ue[1],Ze[0],Ze[1]);this.elevatedGlobePerspectiveTransform=tG(Ve[0],Ve[1],qe[0],qe[1],Ue[0],Ue[1],Ze[0],Ze[1]);const Et=(Rt,vt)=>{B.push(Rt.lng);const zt=Math.round((Rt.lng-G)/se*Jt),Mt=Math.round((Rt.lat-Z)/fe*Jt),Ft=Ie(vt),Lt=Yt([],[Ft[0],Ft[1],1],rt),fn=Math.round(Lt[0]/Lt[2]*Jt),pn=Math.round(Lt[1]/Lt[2]*Jt);ue.emplaceBack(zt,Mt,fn,pn)},xt=h[3].x-h[0].x,Tt=h[3].y-h[0].y,kt=h[2].x-h[1].x,Pt=h[2].y-h[1].y;for(let Rt=0;Rt<65;Rt++){const vt=Rt/64,zt=[h[0].x+vt*xt,h[0].y+vt*Tt],Mt=[h[1].x+vt*kt,h[1].y+vt*Pt],Ft=Mt[0]-zt[0],Lt=Mt[1]-zt[1];for(let fn=0;fn<65;fn++){const pn=fn/64,nn={x:zt[0]+Ft*pn,y:zt[1]+Lt*pn};Et(u.projection.unproject(nn.x,nn.y),nn)}}this.elevatedGlobeVertexBuffer=o.createVertexBuffer(ue,IL.members)}{this.maxLongitudeTriangleSize=0;let ue=[],pe=new Xa;const ve=(Se,ke,Ie)=>{pe.emplaceBack(Se,ke,Ie);const Ve=B[Se],qe=B[ke],Ue=B[Ie],Ze=Math.min(Math.min(Ve,qe),Ue),rt=Math.max(Math.max(Ve,qe),Ue)-Ze;rt>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=rt),ue.push(Ze+rt/2)};for(let Se=0;Se<64;Se++)for(let ke=0;ke<64;ke++){const Ie=65*Se+ke,Ve=Ie+1,qe=Ie+65,Ue=qe+1;ve(Ie,qe,Ve),ve(Ve,qe,Ue)}[ue,pe]=(function(Se,ke){const Ie=Array.from({length:Se.length},(Ue,Ze)=>Ze);Ie.sort((Ue,Ze)=>Se[Ue]-Se[Ze]);const Ve=[],qe=new Xa;for(let Ue=0;Ue<Ie.length;Ue++){const Ze=Ie[Ue];Ve.push(Se[Ze]);const rt=3*Ze,Et=rt+1;qe.emplaceBack(ke.uint16[rt],ke.uint16[Et],ke.uint16[Et+1])}return[Ve,qe]})(ue,pe),this.elevatedGlobeTrianglesCenterLongitudes=ue,this.elevatedGlobeIndexBuffer=o.createIndexBuffer(pe)}this.elevatedGlobeSegments=Ii.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,se/Jt,0,fe/Jt,0,0,Z,G,0])}prepare(){const o=Object.keys(this.tiles).length!==0;if(this.tileID&&!o)return;const u=this.map.painter.context,h=u.gl;!this._dirty||this.texture instanceof XT||(this.texture?this.texture.update(this.image):(this.texture=new tL(u,this.image,h.RGBA8),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),o&&this._prepareData(u)}loadTile(o,u){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},u(null)):(o.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(o){const u=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!u)return null;const h=this.elevatedGlobeTrianglesCenterLongitudes;let g=(b=o+180)+360*Math.round((h[0]-b)/360);var b;const w=new Ii,A=(j,$)=>{w.segments.push({vertexOffset:0,primitiveOffset:j,vertexLength:u.segments[0].vertexLength,primitiveLength:$,sortKey:void 0,vaos:{}})},D=.51*this.maxLongitudeTriangleSize;if(Math.abs(h[0]-g)<=D){const j=li(h,0,h.length,g+D);return j===h.length||A(j,si(h,j+1,h.length,g+360-D)-j),w}g<h[0]&&(g+=360);const P=si(h,0,h.length,g-D);if(P===h.length)return A(0,h.length),w;A(0,P-0);const B=li(h,P+1,h.length,g+D);return B!==h.length&&A(B,h.length-B),w}}const PL=1024,Tve=(Math.pow(PL,2)-1)/268170240;class rG extends Ms{constructor(o,u,h,g){super(o,{layout:JH||(JH=new Ui({visibility:new Xt(ht.layout_raster.visibility)})),paint:eG||(eG=new Ui({"raster-opacity":new Xt(ht.paint_raster["raster-opacity"]),"raster-color":new jd(ht.paint_raster["raster-color"]),"raster-color-mix":new Xt(ht.paint_raster["raster-color-mix"]),"raster-color-range":new Xt(ht.paint_raster["raster-color-range"]),"raster-hue-rotate":new Xt(ht.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Xt(ht.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Xt(ht.paint_raster["raster-brightness-max"]),"raster-saturation":new Xt(ht.paint_raster["raster-saturation"]),"raster-contrast":new Xt(ht.paint_raster["raster-contrast"]),"raster-resampling":new Xt(ht.paint_raster["raster-resampling"]),"raster-fade-duration":new Xt(ht.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Xt(ht.paint_raster["raster-emissive-strength"]),"raster-array-band":new Xt(ht.paint_raster["raster-array-band"]),"raster-elevation":new Xt(ht.paint_raster["raster-elevation"]),"raster-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},u,h,g),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(o){return!(o&&o._source instanceof nG&&(o._source.onNorthPole||o._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(o){o!=="raster-color"&&o!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}_clear(){this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}updateColorRamp(o){if(!this.hasColorMap()||!this._curRampRange)return;const u=this._transitionablePaint._values["raster-color"].value.expression,[h,g]=o||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(h)&&isNaN(g)||h===this._curRampRange[0]&&g===this._curRampRange[1]||(this.colorRamp=hv({expression:u,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:h,end:g}],resolution:PL}),this.colorRampTexture=null,this._curRampRange=[h,g])}is3D(o){return this.paint.get("raster-elevation")>0}}let iG,aG,oG,sG,lG;class uG extends Ms{constructor(o,u,h,g){super(o,{layout:iG||(iG=new Ui({visibility:new Xt(ht["layout_raster-particle"].visibility)})),paint:aG||(aG=new Ui({"raster-particle-array-band":new Xt(ht["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Xt(ht["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new jd(ht["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Xt(ht["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Xt(ht["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Xt(ht["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Xt(ht["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Xt(ht["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},u,h,g),this._updateColorRamp(),this.lastInvalidatedAt=Sl.now()}_clear(){this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null),this.tileFramebuffer&&(this.tileFramebuffer.destroy(),this.tileFramebuffer=null),this.particleFramebuffer&&(this.particleFramebuffer.destroy(),this.particleFramebuffer=null)}onRemove(o){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(o){return!1}_handleSpecialPaintPropertyUpdate(o){o!=="raster-particle-color"&&o!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),o==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const o=this._transitionablePaint._values["raster-particle-color"].value.expression,u=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=hv({expression:o,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:u}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Sl.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class Eve extends Ms{constructor(o,u){super(o,{},u,null),this.implementation=o,o.slot&&(this.slot=o.slot)}is3D(o){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(o){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}function RL(c,o,u){const h=[0,0,1],g=Tn([]);return Vr(g,g,u?-Ar(c)+Math.PI:Ar(c)),ur(g,g,-Ar(o)),gn(h,h,g),xe(h,h)}const cG={None:0,Model:1,Symbol:2,FillExtrusion:4};class HC{constructor(o,u,h,g){this.message=(o?`${o}: `:"")+h,g&&(this.identifier=g),u!=null&&u.__line__&&(this.line=u.__line__)}}function kL(c,o){const u=c.indexOf("://")===-1;try{return new URL(c,u&&o?"http://example.com":void 0),!0}catch{return!1}}class fG{constructor(o,u){this.feature=o,this.instancedDataOffset=u,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class hG{constructor(){this.maxScale=1,this.maxXYTranslationDistance=0,this.instancedDataArray=new tc,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}colorForInstance(o){const u=16*o,h=this.instancedDataArray.float32;let g=Math.floor(h[u+2]);const b=1.05*(h[u+2]-g);return g/=100,[h[u]%1*1.05,h[u+1]%1*1.05,b,g]}tileCoordinatesForInstance(o){const u=16*o,h=this.instancedDataArray.float32;let g=h[u+0];return g=g>Jt?g-Jt:g,new Vt(Math.trunc(g),Math.trunc(h[u+1]))}translationForInstance(o){const u=16*o,h=this.instancedDataArray.float32;return[h[u+4],h[u+5],h[u+6]]}rotationScaleForInstance(o){const u=16*o,h=this.instancedDataArray.float32;return[h[u+7],h[u+8],h[u+9],h[u+10],h[u+11],h[u+12],h[u+13],h[u+14],h[u+15]]}transformForInstance(o){const u=16*o,h=this.instancedDataArray.float32;return[h[u+7],h[u+8],h[u+9],h[u+4],h[u+10],h[u+11],h[u+12],h[u+5],h[u+13],h[u+14],h[u+15],h[u+6],0,0,0,1]}}class LL{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaledZ=this.canonical.z+Math.log2(o.overscaling),this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.projection=o.projection,this.index=o.index,this.worldview=o.worldview,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z+1?0:this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0,this.styleDefinedModelURLs=o.styleDefinedModelURLs,this.hasAppearances=null}updateFootprints(o,u){}updateAppearances(o,u,h,g){}populate(o,u,h,g){this.tileToMeter=qt(h);const b=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);const w=this.layers[0].paint.get("model-elevation-reference")==="hd-road-markup"?u.elevationFeatures:void 0;for(const{feature:A,id:D,index:P,sourceLayerIndex:B}of o){const j=D??(A.properties&&A.properties.hasOwnProperty("id")?A.properties.id:void 0),$=Qn(A,b);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom,{worldview:this.worldview,activeFloors:u.activeFloors}),$,h))continue;const G={id:j,sourceLayerIndex:B,index:P,geometry:b?$.geometry:Un(A,h,g),properties:A.properties,type:A.type,patterns:{}},Z=this.addFeature(G,G.geometry,$,w,h);Z&&u.featureIndex.insert(A,G.geometry,P,B,this.index,this.instancesPerModel[Z].instancedDataArray.length,256)}this.lookup=null}evaluateQueryRenderedFeaturePadding(){const o=this.layers[0].modelManager,u=this.layers[0].scope;let h=0;for(const g of this.modelUris){const b=o.getModel(g,u);if(!b)continue;const w=this.instancesPerModel[g];if(w){const A=.5*sn(b.aabb.max,b.aabb.min)*w.maxScale+w.maxXYTranslationDistance,D=Math.min(Jt,Math.max(A/this.tileToMeter,256));h=Math.max(D,h)}}return h}update(o,u,h,g){for(const b in this.instancesPerModel){const w=this.instancesPerModel[b];for(const A in o)w.idToFeaturesIndex.hasOwnProperty(A)&&(this.evaluate(w.features[w.idToFeaturesIndex[A]],o[A],w,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let o=!1;for(const u in this.instancesPerModel){const h=this.instancesPerModel[u];for(const g of h.features){const b=this.layers[0],w=g.feature,A=this.canonical,D=b.paint.get("model-rotation").evaluate(w,{},A),P=b.paint.get("model-scale").evaluate(w,{},A),B=b.paint.get("model-translation").evaluate(w,{},A);or(g.rotation,D)&&or(g.scale,P)&&or(g.translation,B)||(this.evaluate(g,g.featureStates,h,!0),o=!0)}}return o}updateReplacement(o,u,h,g){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const b=u.getReplacementRegionsForTile(o.toUnwrapped(),!0);if(m(this.activeReplacements,b))return!1;this.activeReplacements=b;let w=!1;for(const A in this.instancesPerModel){const D=this.instancesPerModel[A],P=D.instancedDataArray;for(const B of D.features){const j=B.instancedDataOffset,$=B.instancedDataCount;for(let G=0;G<$;G++){const Z=16*(G+j);let se=P.float32[Z+0];const fe=se>Jt;se=fe?se-Jt:se;const ue=Math.floor(se),pe=Math.floor(P.float32[Z+1]);let ve=!1;for(const Se of this.activeReplacements)if(!_b(Se,h,cG.Model,g)&&!(Se.min.x>ue||ue>Se.max.x||Se.min.y>pe||pe>Se.max.y)&&(ve=Te(ne(ue,pe,o.canonical,Se.footprintTileId.canonical),Se.footprint),ve))break;P.float32[Z]=ve?se+Jt:se,w=w||ve!==fe}}}return w}isEmpty(){for(const o in this.instancesPerModel)if(this.instancesPerModel[o].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(o){if(!this.uploaded)for(const u in this.instancesPerModel){const h=this.instancesPerModel[u];h.instancedDataArray.length<0||h.instancedDataArray.length===0||(h.instancedDataBuffer?h.instancedDataBuffer.updateData(h.instancedDataArray):h.instancedDataBuffer=o.createVertexBuffer(h.instancedDataArray,Yye.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(o){for(const h in this.instancesPerModel){const g=this.instancesPerModel[h];g.instancedDataArray.length!==0&&g.instancedDataBuffer&&g.instancedDataBuffer.destroy()}const u=this.layers[0].modelManager;if(o&&u&&this.modelUris&&this.modelsRequested)for(const h of this.modelUris)u.removeModel(h,"",!0)}addFeature(o,u,h,g,b){const w=this.layers[0],A=w.layout.get("model-id"),D=w.layout.get("model-allow-density-reduction"),P=A.evaluate(h,{},this.canonical);if(!P)return Hn(`modelId is not evaluated for layer ${w.id} and it is not going to get rendered.`),P;(kL(P,!1)||this.styleDefinedModelURLs[P]!==void 0)&&(this.modelUris.includes(P)||this.modelUris.push(P)),this.instancesPerModel[P]||(this.instancesPerModel[P]=new hG);const B=this.instancesPerModel[P],j=B.instancedDataArray,$=new fG(h,j.length);let G;g&&(G=Zo.getElevationFeature(o,g));for(const Z of u)for(const se of Z){if(se.x<0||se.x>=Jt||se.y<0||se.y>=Jt)continue;if(this.lookupDim!==0&&D){const ue=(this.lookupDim-1)/Jt,pe=this.lookupDim*(se.y*ue|0)+se.x*ue|0;if(this.lookup){if(this.lookup[pe]!==0)continue;this.lookup[pe]=1}}this.instanceCount++;const fe=j.length;if(j.resize(fe+1),g){B.instancesRoadElevation||(B.instancesRoadElevation=[]);const ue=G?G.pointElevation(new Vt(se.x,se.y)):0;B.instancesRoadElevation.push(ue)}B.instancesEvaluatedElevation.push(0),j.float32[16*fe]=se.x,j.float32[16*fe+1]=se.y}return $.instancedDataCount=B.instancedDataArray.length-$.instancedDataOffset,$.instancedDataCount>0&&(o.id&&(B.idToFeaturesIndex[o.id]=B.features.length),B.features.push($),this.evaluate($,{},B,!1)),P}getModelUris(){return this.modelUris}evaluate(o,u,h,g){const b=this.layers[0],w=o.feature,A=this.canonical,D=o.rotation=b.paint.get("model-rotation").evaluate(w,u,A),P=o.scale=b.paint.get("model-scale").evaluate(w,u,A),B=o.translation=b.paint.get("model-translation").evaluate(w,u,A),j=Object.assign({},b.paint.get("model-color").evaluate(w,u,A));j.a=b.paint.get("model-color-mix-intensity").evaluate(w,u,A);const $=[];this.maxVerticalOffset<B[2]&&(this.maxVerticalOffset=B[2]);const G=B[0]*B[0]+B[1]*B[1],Z=G>0?Math.sqrt(G):0;h.maxScale=Math.max(Math.max(h.maxScale,P[0]),Math.max(P[1],P[2])),h.maxXYTranslationDistance=Math.max(h.maxXYTranslationDistance,Z),this.maxScale=Math.max(Math.max(this.maxScale,P[0]),Math.max(P[1],P[2])),j9($,D,P);const se=Math.round(100*j.a)+j.b/1.05;for(let fe=0;fe<o.instancedDataCount;++fe){const ue=o.instancedDataOffset+fe,pe=16*ue,ve=h.instancedDataArray.float32;let Se=0;g&&(Se=ve[pe+6]-h.instancesEvaluatedElevation[ue]);const ke=0|ve[pe+1];ve[pe]=(0|ve[pe])+j.r/1.05,ve[pe+1]=ke+j.g/1.05,ve[pe+2]=se,ve[pe+3]=1/(A.z>10?this.tileToMeter:qt(A,ke)),ve[pe+4]=B[0],ve[pe+5]=B[1],ve[pe+6]=B[2]+(h.instancesRoadElevation?h.instancesRoadElevation[ue]:0)+Se,ve[pe+7]=$[0],ve[pe+8]=$[1],ve[pe+9]=$[2],ve[pe+10]=$[4],ve[pe+11]=$[5],ve[pe+12]=$[6],ve[pe+13]=$[8],ve[pe+14]=$[9],ve[pe+15]=$[10],h.instancesEvaluatedElevation[ue]=B[2]}}}let dG,pG;Kt(LL,"ModelBucket",{omit:["layers"]}),Kt(hG,"PerModelAttributes"),Kt(fG,"ModelFeature");class $1{constructor(o,u,h){this._demTile=o,this._dem=this._demTile.dem,this._scale=u,this._offset=h}static create(o,u,h){const g=h||o.findDEMTileFor(u);if(!g||!g.dem)return;const b=g.dem,w=g.tileID,A=1<<u.canonical.z-w.canonical.z;return new $1(g,b.dim/Jt/A,[(u.canonical.x/A-w.canonical.x)*b.dim,(u.canonical.y/A-w.canonical.y)*b.dim])}tileCoordToPixel(o,u){const h=u*this._scale+this._offset[1];return new Vt(Math.floor(o*this._scale+this._offset[0]),Math.floor(h))}getElevationAt(o,u,h,g){const b=o*this._scale+this._offset[0],w=u*this._scale+this._offset[1],A=Math.floor(b),D=Math.floor(w),P=this._dem;return g=!!g,h?Vn(Vn(P.get(A,D,g),P.get(A,D+1,g),w-D),Vn(P.get(A+1,D,g),P.get(A+1,D+1,g),w-D),b-A):P.get(A,D,g)}getElevationAtPixel(o,u,h){return this._dem.get(o,u,!!h)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*ft(1,o)*this._dem.stride}}const zL=new Float32Array(262144),Ab=new Uint8Array(262144);function mG(c){let o=0;if(c.meshes)for(const u of c.meshes)o=Math.max(o,u.aabb.max[2]);if(c.children)for(const u of c.children)o=Math.max(o,mG(u));return o}function gG(c,o,u){if(c.meshes)for(const h of c.meshes){if(h.aabb.min[0]===1/0)continue;const g=Gr.applyTransform(h.aabb,c.globalMatrix);u.insert(o,g.min[0],g.min[1],g.max[0],g.max[1])}if(c.children)for(const h of c.children)gG(h,o,u)}const yG=["","wall","door","roof","window","lamp","logo"];class _G{constructor(o){this.node=o,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedTranslation=[0,0,0],this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:o.id,geometry:[],properties:{height:mG(o)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new Gr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let o=0;const u=new Gr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const h of this.node.meshes)this.node.lightMeshIndex!==o&&(h.transformedAabb=Gr.applyTransformFast(h.aabb,this.node.globalMatrix),u.encapsulate(h.transformedAabb)),o++;this.aabb=u}return this.aabb}}class GC{constructor(o,u,h,g,b,w,A,D){this.id=h,this.layers=o,this.layerIds=this.layers.map(P=>P.fqid),this.stateDependentLayerIds=this.layers.filter(P=>P.isStateDependent()).map(P=>P.id),this.modelTraits|=k1.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,g&&(this.modelTraits|=k1.HasMapboxMeshFeatures),b&&(this.modelTraits|=k1.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=w,this.worldview=D,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const P of u)this.nodesInfo.push(new _G(P)),gG(P,A.featureIndexArray.length,A.grid),A.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,A.bucketLayerIDs.length-1,0);this.states={},this.hasAppearances=null}updateFootprints(o,u){for(const h of this.getNodesInfo()){const g=h.node;g.footprint&&u.push({footprint:g.footprint,id:o})}}updateAppearances(o,u,h,g){}update(o){const u=Object.keys(o).length!==0;if(u&&!this.stateDependentLayers.length)return;const h=u?this.stateDependentLayers:this.layers;if(!Sc(o,this.states))for(const g of h)this.evaluate(g,o);this.states=structuredClone(o)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(o){if(!this.needsUpload)return;const u=this.getNodesInfo();for(const h of u){const g=h.node;this.uploaded?this.updatePbrBuffer(g):iL(g,o,!0)}for(const h of u)OC(h.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(o){let u=!1;if(!o.meshes)return u;for(const h of o.meshes)h.pbrBuffer&&(h.pbrBuffer.updateData(h.featureArray),u=!0);return u}needsReEvaluation(o,u,h){const g=o.transform.projectionOptions,b=o.style.getBrightness(),w=this.brightness!==b;if(!this.uploaded||this.dirty||g.name!==this.projection.name||fE(h.paint.get("model-color").value,w)||fE(h.paint.get("model-color-mix-intensity").value,w)||fE(h.paint.get("model-roughness").value,w)||fE(h.paint.get("model-emissive-strength").value,w)||fE(h.paint.get("model-height-based-emissive-strength-multiplier").value,w)){this.projection=g,this.brightness=b;const A=this.getNodesInfo();for(const D of A)D.state=null;return!0}return!1}evaluateTransform(o,u){if(o.transform.zoom===this.zoom)return;this.zoom=o.transform.zoom;const h=this.getNodesInfo(),g=this.id.canonical;for(const b of h){const w=b.feature;b.evaluatedTranslation=u.paint.get("model-translation").evaluate(w,{},g),b.evaluatedScale=u.paint.get("model-scale").evaluate(w,{},g)}}evaluate(o,u){const h=this.getNodesInfo();for(const g of h){if(!g.node.meshes)continue;const b=g.feature,w=u&&u[b.id];if(Sc(w,g.state))continue;g.state=structuredClone(w);const A=g.node.meshes&&g.node.meshes[0].featureData,D=g.evaluatedColor[2],P=g.evaluatedRMEA[2],B=this.id.canonical;if(g.hasTranslucentParts=!1,A){for(let j=0;j<yG.length;j++){const $=yG[j];$.length&&(b.properties.part=$);const G=o.paint.get("model-color").evaluate(b,w,B).toPremultipliedRenderColor(null),Z=o.paint.get("model-color-mix-intensity").evaluate(b,w,B);g.evaluatedColor[j]=[G.r,G.g,G.b,Z],g.evaluatedRMEA[j][0]=o.paint.get("model-roughness").evaluate(b,w,B),g.evaluatedRMEA[j][2]=o.paint.get("model-emissive-strength").evaluate(b,w,B),g.evaluatedRMEA[j][3]=G.a,g.emissionHeightBasedParams[j]=o.paint.get("model-height-based-emissive-strength-multiplier").evaluate(b,w,B),!g.hasTranslucentParts&&G.a<1&&(g.hasTranslucentParts=!0)}delete b.properties.part,Ove(g,D!==g.evaluatedColor[2]||P!==g.evaluatedRMEA[2],this.modelTraits)}else g.evaluatedRMEA[0][2]=o.paint.get("model-emissive-strength").evaluate(b,w,B);g.evaluatedTranslation=o.paint.get("model-translation").evaluate(b,w,B),g.evaluatedScale=o.paint.get("model-scale").evaluate(b,w,B),this.updatePbrBuffer(g.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(o,u,h,g){const b=o.findDEMTileFor(h);if(b&&(b.tileID.canonical!==this.terrainTile||u!==this.terrainExaggeration)){if(b.dem&&b.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=b.tileID.overscaledZ;const w=$1.create(o,h,b);if(!w)return;this.modelTraits&k1.HasMapboxMeshFeatures&&this.updateDEM(o,w,h,g);for(const A of this.getNodesInfo()){const D=A.node;if(!D.footprint||!D.footprint.vertices||!D.footprint.vertices.length)continue;const P=D.footprint.vertices;let B=w.getElevationAt(P[0].x,P[0].y,!0,!0);for(let j=1;j<P.length;j++)B=Math.min(B,w.getElevationAt(P[j].x,P[j].y,!0,!0));D.elevation=B}}this.terrainTile=b.tileID.canonical,this.terrainExaggeration=u}}updateDEM(o,u,h,g){let b=u._dem._modifiedForSources[g];if(b===void 0&&(u._dem._modifiedForSources[g]=[],b=u._dem._modifiedForSources[g]),b.includes(h.canonical))return;const w=u._dem.dim;b.push(h.canonical);let A=!1;for(const D of this.getNodesInfo()){const P=D.node;if(!P.footprint||!P.footprint.grid)continue;const B=P.footprint.grid,j=u.tileCoordToPixel(B.min.x,B.min.y),$=u.tileCoordToPixel(B.max.x,B.max.y),G=Math.min(Math.min(w-$.y,j.x),Math.min(j.y,w-$.x));if(G<0)continue;const Z=ze(G,2,5);let se=Math.max(0,j.x-Z),fe=Math.max(0,j.y-Z),ue=Math.min($.x+Z,w-1),pe=Math.min($.y+Z,w-1);for(let Ie=fe;Ie<=pe;++Ie)for(let Ve=se;Ve<=ue;++Ve)Ab[Ie*w+Ve]=255;let ve=0,Se=0;for(let Ie=0;Ie<B.cellsY;++Ie)for(let Ve=0;Ve<B.cellsX;++Ve){if(!B.cells[Ie*B.cellsX+Ve])continue;const qe=u.tileCoordToPixel(B.min.x+Ve/B.xScale,B.min.y+Ie/B.yScale),Ue=u.tileCoordToPixel(B.min.x+(Ve+1)/B.xScale,B.min.y+(Ie+1)/B.yScale);for(let Ze=qe.y;Ze<=Math.min(Ue.y+1,w-1);++Ze)for(let rt=qe.x;rt<=Math.min(Ue.x+1,w-1);++rt)Ab[Ze*w+rt]===255&&(Ab[Ze*w+rt]=0,ve+=u.getElevationAtPixel(rt,Ze),Se++)}const ke=ve/Se;se=Math.max(1,j.x-Z),fe=Math.max(1,j.y-Z),ue=Math.min($.x+Z,w-2),pe=Math.min($.y+Z,w-2),A=!0;for(let Ie=fe;Ie<=pe;++Ie)for(let Ve=se;Ve<=ue;++Ve)Ab[Ie*w+Ve]===0&&(zL[Ie*w+Ve]=u._dem.set(Ve,Ie,ke));for(let Ie=1;Ie<Z;++Ie){se=Math.max(1,j.x-Ie),fe=Math.max(1,j.y-Ie),ue=Math.min($.x+Ie,w-2),pe=Math.min($.y+Ie,w-2);for(let Ve=fe;Ve<=pe;++Ve)for(let qe=se;qe<=ue;++qe){const Ue=Ve*w+qe;if(Ab[Ue]===255){let Ze=0,rt=0,Et=-1,xt=-1;for(let Tt=-1;Tt<=1;++Tt)for(let kt=-1;kt<=1;++kt){const Pt=(Ve+Tt)*w+qe+kt;if(Ab[Pt]>=Ie)continue;const Rt=zL[Pt],vt=Math.abs(Rt);vt>rt&&(Ze=Rt,rt=vt,Et=kt,xt=Tt)}if(rt>.1){const Tt=1-(Ie+.5*Math.abs(Et*xt))/Z;let kt=u._dem.get(qe,Ve)+Ze*Tt;const Pt=u._dem.get(qe+Et,Ve+xt),Rt=u._dem.get(qe-Et,Ve-xt,!0);(kt-Pt)*(kt-Rt)>0&&(kt=(Pt+Rt)/2),zL[Ue]=u._dem.set(qe,Ve,kt),Ab[Ue]=Ie}}}}}A&&(u._demTile.needsDEMTextureUpload=!0,u._dem._timestamp=Sl.now())}setFilter(o){this.filter=o?ev(o):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(o=>this.filter.filter(new Jr(this.id.overscaledZ,{worldview:this.worldview}),o.feature,this.id.canonical)):this.nodesInfo}destroy(){const o=this.getNodesInfo();for(const u of o)OC(u.node),aL(u.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(o,u){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const h=u.getReplacementRegionsForTile(o.toUnwrapped());for(const g of this.getNodesInfo()){const b=g.node.footprint;g.hiddenByReplacement=!!b&&!h.find(w=>w.footprint===b)}}getHeightAtTileCoord(o,u){const h=[],g=[0,0,0],b=k([]);for(const w of this.getNodesInfo()){const A=w.node.meshes[0],D=A.transformedAabb;if(o<D.min[0]||u<D.min[1]||o>D.max[0]||u>D.max[1])continue;if(w.node.hidden===!0)return{height:1/0,maxHeight:w.feature.properties.height,hidden:!1,verticalScale:w.evaluatedScale[2]};V(b,w.node.globalMatrix),g[0]=o,g[1]=u,Ct(g,g,b);const P=(g[0]-A.aabb.min[0])/(A.aabb.max[0]-A.aabb.min[0])*wb|0,B=Math.min(63,(g[1]-A.aabb.min[1])/(A.aabb.max[1]-A.aabb.min[1])*wb|0)*wb+Math.min(63,P),j=A.heightmap[B];if(!(j<0&&w.node.footprint))return w.hiddenByReplacement?void 0:{height:j,maxHeight:w.feature.properties.height,hidden:!1,verticalScale:w.evaluatedScale[2]};if(w.node.footprint.grid.query(new Vt(o,u),new Vt(o,u),h),h.length>0)return{height:void 0,maxHeight:w.feature.properties.height,hidden:w.hiddenByReplacement,verticalScale:w.evaluatedScale[2]}}}}function fE(c,o){return c instanceof Es&&!c.isLightConstant&&o}function Ave(c,o,u,h,g,b,w,A){let D=(61440&o|(61440&o)>>4)>>8,P=(3840&o|(3840&o)>>4)>>4,B=240&o|(240&o)>>4;u[3]>0&&(D=Vn(D,255*u[0],u[3]),P=Vn(P,255*u[1],u[3]),B=Vn(B,255*u[2],u[3]));const j=D<<8|P,$=B<<8|Math.floor(255*h[3]),G=(function(Ie){const Ve=ze(Ie,0,2);return Math.min(Math.round(.5*Ve*255),255)})(h[2])<<8|15*h[0]<<4|15*h[1],Z=ze(g[0],0,1),se=ze(g[1],0,1),fe=ze(g[2],0,1),ue=ze(g[3],0,1);let pe,ve,Se,ke;if(Z!==se&&w!==b&&se!==Z){const Ie=w-b;ve=1/(Ie*(se-Z)),Se=-(b+Ie*Z)/(Ie*(se-Z));const Ve=ze(g[4],-1,1);ke=Math.pow(10,Ve),pe=255*fe<<8|255*ue}else pe=65535,ve=0,Se=1,ke=1;if(c.emplaceBack(j,$,G,pe,ve,Se,ke),A){const Ie=A.length;A.clear();for(let Ve=0;Ve<Ie;Ve++)A.emplaceBack(j,$,G,pe,ve,Se,ke)}}function Ove(c,o,u){const h=c.node;let g=0;const b=u&k1.HasMeshoptCompression;for(const w of h.meshes){if(h.lights&&h.lightMeshIndex===g||!w.featureData)continue;w.featureArray=new Yd,w.featureArray.reserve(w.featureData.length);let A=o;for(const D of w.featureData){const P=b?65535&D:D>>16&65535,B=b?D>>16&65535:65535&D,j=(15&B)<8?15&B:0,$=c.evaluatedRMEA[j],G=c.evaluatedColor[j],Z=c.emissionHeightBasedParams[j];let se;if(A&&j===2&&h.lights&&(se=new Yd,se.resize(10*h.lights.length)),Ave(w.featureArray,P,G,$,Z,w.aabb.min[2],w.aabb.max[2],se),se&&A){A=!1;const fe=h.meshes[h.lightMeshIndex];fe.featureArray=se,fe.featureArray._trim()}}w.featureArray._trim(),g++}}Kt(GC,"Tiled3dModelBucket",{omit:["layers"]}),Kt(_G,"Tiled3dModelFeature");const Cve=["id","tile","layer","source","sourceLayer","state"];class Ob{constructor(o,u,h,g,b){this.type="Feature",this._vectorTileFeature=o,this._z=u,this._x=h,this._y=g,this.properties=o?o.properties:{},this.id=b}clone(){const o=new Ob(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(o.state=Object.assign({},this.state)),this.layer&&(o.layer=Object.assign({},this.layer)),this.source&&(o.source=this.source),this.sourceLayer&&(o.sourceLayer=this.sourceLayer),o}get geometry(){return this._geometry===void 0&&this._vectorTileFeature&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const u of Cve)this[u]!==void 0&&(o[u]=this[u]);return o}}class Cb extends df{constructor(o,u,h,g){super(),this.id=o,this.type="model",this.models=[],this._options=u,this._modelsInfo=new Map}loadGLTFFromURI(o){return z9(this.map._requestManager.transformRequest(o,eo.Model).url)}load(){for(const o in this._options.models){const u=this._options.models[o],h=this._modelsInfo.get(o);if(h){h.modelSpec=u;const g=h.model;g&&(g.position=u.position!=null?new Re(u.position[0],u.position[1]):new Re(0,0),g.orientation=u.orientation!=null?u.orientation:[0,0,0],Cb.applyModelSpecification(g,u),g.computeBoundsAndApplyParent(),this.models.push(g))}else this._modelsInfo.set(o,{modelSpec:u,model:null}),this.loadGLTFFromURI(u.uri).then(g=>{if(!g)return;const b=this._modelsInfo.get(o);if(!b)return;const w=sL(g),A=b.modelSpec,D=new U9(o,A.uri,A.position,A.orientation,w);Cb.applyModelSpecification(D,A),D.computeBoundsAndApplyParent(),this.models.push(D),b.model=D,this.loaded()&&this.fire(new uu("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(g=>{this.fire(new Fp(new Error(`Could not load model ${o} from ${u.uri}: ${g.message}`)))})}this.loaded()&&this.fire(new uu("data",{dataType:"source",sourceDataType:"metadata"}))}static applyModelSpecification(o,u){u.nodeOverrides&&Cb.convertNodeOverrides(o,u.nodeOverrides),u.materialOverrides&&Cb.convertMaterialOverrides(o,u.materialOverrides),u.nodeOverrideNames&&(o.nodeOverrideNames=[...u.nodeOverrideNames]),u.materialOverrideNames&&(o.materialOverrideNames=[...u.materialOverrideNames]),u.featureProperties&&(o.featureProperties=u.featureProperties)}static convertNodeOverrides(o,u){if(Array.isArray(u)&&u.every(h=>typeof h=="string")){o.nodeOverrideNames=[];for(const h of u)o.nodeOverrideNames.push(h)}else Object.entries(u).forEach(([h,g])=>{const b={orientation:[0,0,0]};if(g.hasOwnProperty("orientation")){const w=g.orientation;w&&(b.orientation=w)}o.nodeOverrides.set(h,b)})}static convertMaterialOverrides(o,u){if(Array.isArray(u)&&u.every(h=>typeof h=="string")){o.materialOverrideNames=[];for(const h of u)o.materialOverrideNames.push(h)}else Object.entries(u).forEach(([h,g])=>{const b={color:new Qr(1,1,1),colorMix:0,emissionStrength:0,opacity:1},w=g["model-color"];w!==void 0&&(b.color.r=w[0],b.color.g=w[1],b.color.b=w[2]);const A=g["model-color-mix-intensity"];A!==void 0&&(b.colorMix=A);const D=g["model-emissive-strength"];D!==void 0&&(b.emissionStrength=D);const P=g["model-opacity"];P!==void 0&&(b.opacity=P),o.materialOverrides.set(h,b)})}onAdd(o){this.map=o,this.load()}hasTransition(){return!1}loaded(){if(this._modelsInfo.size===0)return!0;for(const o of this._modelsInfo.values())if(o.model==null)return!1;return!0}getModels(){return this.models}loadTile(o,u){}serialize(){return this._options}setProperty(o,u){return!1}reload(){const o=Ku(this.id,this.scope);this.map.style.clearSource(o),this.models=[],this._modelsInfo.clear(),this.load()}setModels(o){this.models=[];const u=new Map;for(const h in o){const g=o[h];if(this._modelsInfo.has(h)){const b=this._modelsInfo.get(h);b&&b.modelSpec.uri===g.uri&&u.set(h,b)}}this._modelsInfo=u,this._options.models=o,this.load()}}function FL(c,o,u,h){const g=1<<c.z;o.lat=It((h/Jt+c.y)/g),o.lng=wt((u/Jt+c.x)/g)}function Mve(c,o,u,h){const g=c.getNodesInfo()[o];if(!g||g.hiddenByReplacement||!g.node.meshes)return;let b=Number.MAX_VALUE;const w=g.node,A=u.tile,D=h.calculatePosMatrix(A.tileID.toUnwrapped(),h.worldSize),P=g.evaluatedScale;let B=0;h.elevation&&w.elevation&&(B=w.elevation*h.elevation.exaggeration()),J(D,D,[(w.anchor?w.anchor[0]:0)*(P[0]-1),(w.anchor?w.anchor[1]:0)*(P[1]-1),B]),ie(D,D,P);const j=u.queryGeometry,$=j.isPointQuery()?j.screenBounds:j.screenGeometry,G=function(se){const fe=K([],D,se.globalMatrix);K(fe,h.expandedFarZProjMatrix,fe);for(let ue=0;ue<se.meshes.length;++ue){const pe=se.meshes[ue];if(ue===se.lightMeshIndex)continue;const ve=rL($,h,fe,pe.aabb);ve!=null&&(b=Math.min(ve,b))}if(se.children)for(const ue of se.children)G(ue)};if(G(w),b===Number.MAX_VALUE)return;const Z=new Re(0,0);return FL(A.tileID.canonical,Z,g.node.anchor[0],g.node.anchor[1]),{intersectionZ:b,position:Z,feature:g.feature}}const Dve={circle:class extends Ms{constructor(c,o,u,h){super(c,{layout:$O||($O=new Ui({"circle-sort-key":new on(ht.layout_circle["circle-sort-key"]),"circle-elevation-reference":new Xt(ht.layout_circle["circle-elevation-reference"]),visibility:new Xt(ht.layout_circle.visibility)})),paint:VO||(VO=new Ui({"circle-radius":new on(ht.paint_circle["circle-radius"]),"circle-color":new on(ht.paint_circle["circle-color"]),"circle-blur":new on(ht.paint_circle["circle-blur"]),"circle-opacity":new on(ht.paint_circle["circle-opacity"]),"circle-translate":new Xt(ht.paint_circle["circle-translate"]),"circle-translate-anchor":new Xt(ht.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Xt(ht.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Xt(ht.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new on(ht.paint_circle["circle-stroke-width"]),"circle-stroke-color":new on(ht.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new on(ht.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Xt(ht.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h)}createBucket(c){return new qs(c)}queryRadius(c){const o=c;return zf("circle-radius",this,o)+zf("circle-stroke-width",this,o)+cv(this.paint.get("circle-translate"))}queryIntersectsFeature(c,o,u,h,g,b,w,A){const D=UO(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),P=this.paint.get("circle-radius").evaluate(o,u)+this.paint.get("circle-stroke-width").evaluate(o,u);return ST(c,h,b,w,A,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",D,P)}getProgramIds(){return["circle"]}getDefaultProgramParams(c,o,u){const h=WO(this);return{config:new q(this,{zoom:o,lut:u}),defines:h,overrideFog:!1}}is3D(c){return!c&&!!this.layout&&this.layout.get("circle-elevation-reference")!=="none"}hasElevation(){return this.layout&&this.layout.get("circle-elevation-reference")!=="none"}},heatmap:class extends Ms{createBucket(c){return new ZO(c)}constructor(c,o,u,h){super(c,{layout:ET||(ET=new Ui({visibility:new Xt(ht.layout_heatmap.visibility)})),paint:KO||(KO=new Ui({"heatmap-radius":new on(ht.paint_heatmap["heatmap-radius"]),"heatmap-weight":new on(ht.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Xt(ht.paint_heatmap["heatmap-intensity"]),"heatmap-color":new jd(ht.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Xt(ht.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}_clear(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}queryRadius(c){return zf("heatmap-radius",this,c)}queryIntersectsFeature(c,o,u,h,g,b,w,A){const D=this.paint.get("heatmap-radius").evaluate(o,u);return ST(c,h,b,w,A,!0,!0,new Vt(0,0),D)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(c,o,u){return c==="heatmap"?{config:new q(this,{zoom:o,lut:u}),overrideFog:!1}:{}}},hillshade:class extends Ms{constructor(c,o,u,h){super(c,{layout:_1||(_1=new Ui({visibility:new Xt(ht.layout_hillshade.visibility)})),paint:v1||(v1=new Ui({"hillshade-illumination-direction":new Xt(ht.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Xt(ht.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Xt(ht.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Xt(ht.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Xt(ht.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Xt(ht.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Xt(ht.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(c,o,u){return{overrideFog:!1}}},fill:class extends Ms{constructor(c,o,u,h){super(c,{layout:yv||(yv=new Ui({"fill-sort-key":new on(ht.layout_fill["fill-sort-key"]),visibility:new Xt(ht.layout_fill.visibility),"fill-elevation-reference":new Xt(ht.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new on(ht.layout_fill["fill-construct-bridge-guard-rail"])})),paint:_v||(_v=new Ui({"fill-antialias":new Xt(ht.paint_fill["fill-antialias"]),"fill-opacity":new on(ht.paint_fill["fill-opacity"]),"fill-color":new on(ht.paint_fill["fill-color"]),"fill-outline-color":new on(ht.paint_fill["fill-outline-color"]),"fill-translate":new Xt(ht.paint_fill["fill-translate"]),"fill-translate-anchor":new Xt(ht.paint_fill["fill-translate-anchor"]),"fill-pattern":new on(ht.paint_fill["fill-pattern"]),"fill-pattern-cross-fade":new Xt(ht.paint_fill["fill-pattern-cross-fade"]),"fill-emissive-strength":new Xt(ht.paint_fill["fill-emissive-strength"]),"fill-z-offset":new on(ht.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new on(ht.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new on(ht.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h)}getProgramIds(){const c=this.paint.get("fill-pattern"),o=c&&c.constantOr(1),u=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getDefaultProgramParams(c,o,u){return{config:new q(this,{zoom:o,lut:u}),overrideFog:!1}}recalculate(c,o){super.recalculate(c,o);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new Lh(c)}queryRadius(){return cv(this.paint.get("fill-translate"))}queryIntersectsFeature(c,o,u,h,g,b){return!c.queryGeometry.isAboveHorizon&&Si(vT(c.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),h)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(c){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const o=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return c!=null?o&&!c:o}hasElevation(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}hasShadowPass(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}},"fill-extrusion":class extends Ms{constructor(c,o,u,h){super(c,{layout:c9||(c9=new Ui({visibility:new Xt(ht["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Xt(ht["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:f9||(f9=new Ui({"fill-extrusion-opacity":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new on(ht["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new on(ht["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-pattern-cross-fade":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-pattern-cross-fade"]),"fill-extrusion-height":new on(ht["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new on(ht["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new on(ht["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new on(ht["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new on(ht["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new on(ht["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Xt(ht["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(c){return new Nf(c)}queryRadius(){return cv(this.paint.get("fill-extrusion-translate"))}is3D(c){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(c,o,u,h,g,b,w,A,D){const P=UO(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),B=this.paint.get("fill-extrusion-height").evaluate(o,u),j=this.paint.get("fill-extrusion-base").evaluate(o,u),$=[0,0],G=A&&b.elevation,Z=b.elevation?b.elevation.exaggeration():1,se=c.tile.getBucket(this);if(G&&se instanceof Nf){const Se=se.centroidVertexArray,ke=D+1;ke<Se.length&&($[0]=Se.geta_centroid_pos0(ke),$[1]=Se.geta_centroid_pos1(ke))}if($[0]===0&&$[1]===1)return!1;b.projection.name==="globe"&&(h=u9([h],[new Vt(0,0),new Vt(Jt,Jt)],c.tileID.canonical).map(Se=>Se.polygon).flat());const fe=G?A:null,[ue,pe]=_9(b,h,j,B,P,w,fe,$,Z,b.center.lat,c.tileID.canonical),ve=c.queryGeometry;return y9(ue,pe,ve.isPointQuery()?ve.screenBounds:ve.screenGeometry)}},building:class extends Ms{constructor(c,o,u,h){super(c,{layout:W9||(W9=new Ui({visibility:new Xt(ht.layout_building.visibility),"building-facade":new on(ht.layout_building["building-facade"]),"building-facade-floors":new on(ht.layout_building["building-facade-floors"]),"building-facade-unit-width":new on(ht.layout_building["building-facade-unit-width"]),"building-facade-window":new on(ht.layout_building["building-facade-window"]),"building-roof-shape":new on(ht.layout_building["building-roof-shape"]),"building-height":new on(ht.layout_building["building-height"]),"building-base":new on(ht.layout_building["building-base"]),"building-flood-light-wall-radius":new on(ht.layout_building["building-flood-light-wall-radius"]),"building-flood-light-ground-radius":new on(ht.layout_building["building-flood-light-ground-radius"]),"building-flip-roof-orientation":new on(ht.layout_building["building-flip-roof-orientation"])})),paint:X9||(X9=new Ui({"building-opacity":new Xt(ht.paint_building["building-opacity"]),"building-ambient-occlusion-intensity":new Xt(ht.paint_building["building-ambient-occlusion-intensity"]),"building-ambient-occlusion-ground-intensity":new Xt(ht.paint_building["building-ambient-occlusion-ground-intensity"]),"building-ambient-occlusion-ground-radius":new Xt(ht.paint_building["building-ambient-occlusion-ground-radius"]),"building-ambient-occlusion-ground-attenuation":new Xt(ht.paint_building["building-ambient-occlusion-ground-attenuation"]),"building-vertical-scale":new Xt(ht.paint_building["building-vertical-scale"]),"building-cast-shadows":new Xt(ht.paint_building["building-cast-shadows"]),"building-color":new on(ht.paint_building["building-color"]),"building-emissive-strength":new on(ht.paint_building["building-emissive-strength"]),"building-facade-emissive-chance":new Xt(ht.paint_building["building-facade-emissive-chance"]),"building-cutoff-fade-range":new Xt(ht.paint_building["building-cutoff-fade-range"]),"building-flood-light-color":new Xt(ht.paint_building["building-flood-light-color"]),"building-flood-light-intensity":new Xt(ht.paint_building["building-flood-light-intensity"]),"building-flood-light-ground-attenuation":new Xt(ht.paint_building["building-flood-light-ground-attenuation"]),"building-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"building-flood-light-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(c){return new Y9(c)}cutoffRange(){return this.paint.get("building-cutoff-fade-range")}hasShadowPass(){return this.paint.get("building-cast-shadows")}hasLightBeamPass(){return!0}canCastShadows(){return!0}is3D(c){return!0}queryRadius(c){return 0}queryIntersectsFeature(c,o,u,h,g,b,w,A,D,P){let B=this.layout.get("building-height").evaluate(o,u);const j=this.layout.get("building-base").evaluate(o,u),$=c.tile.getBucket(this).getFootprint(o);if($){if($.hiddenFlags!==0)return!1;B=$.height}const[G,Z]=_9(b,h,j,B,new Vt(0,0),w,null,[0,0],1,b.center.lat,c.tileID.canonical),se=c.queryGeometry;return y9(G,Z,se.isPointQuery()?se.screenBounds:se.screenGeometry)}},line:class extends Ms{constructor(c,o,u,h){const g=aH();super(c,g,o,u,h),g.layout&&(this.layout=new Cs(g.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof Gu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}emissiveStrengthExpression(){return this._transitionablePaint._values["line-emissive-strength"].value.expression}recalculate(c,o){super.recalculate(c,o),this.paint._values["line-floorwidth"]=(()=>{if(KT)return KT;const u=aH();return KT=new T_e(u.paint.properties["line-width"].specification),KT.useIntegerZoom=!0,KT})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new cL(c)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(c,o,u){const h=rH(this);return{config:new q(this,{zoom:o,lut:u}),defines:h,overrideFog:!1}}queryRadius(c){const o=c,u=oH(zf("line-width",this,o),zf("line-gap-width",this,o)),h=zf("line-offset",this,o);return u/2+Math.abs(h)+cv(this.paint.get("line-translate"))}queryIntersectsFeature(c,o,u,h,g,b){if(c.queryGeometry.isAboveHorizon)return!1;const w=vT(c.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),A=c.pixelToTileUnitsFactor/2*oH(this.paint.get("line-width").evaluate(o,u),this.paint.get("line-gap-width").evaluate(o,u)),D=this.paint.get("line-offset").evaluate(o,u);return D&&(h=(function(P,B){const j=[],$=new Vt(0,0);for(let G=0;G<P.length;G++){const Z=P[G],se=[];for(let fe=0;fe<Z.length;fe++){const ue=Z[fe],pe=Z[fe+1],ve=fe===0?$:ue.sub(Z[fe-1])._unit()._perp(),Se=fe===Z.length-1?$:pe.sub(ue)._unit()._perp(),ke=ve._add(Se)._unit();ke._mult(1/(ke.x*Se.x+ke.y*Se.y)),se.push(ke._mult(B)._add(ue))}j.push(se)}return j})(h,D*c.pixelToTileUnitsFactor)),(function(P,B,j){for(let $=0;$<B.length;$++){const G=B[$];if(P.length>=3){for(let Z=0;Z<G.length;Z++)if(fl(P,G[Z]))return!0}if(Ia(P,G,j))return!0}return!1})(w,h,A)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(c){return!this.hasElevatedBuckets||this.layout&&this.layout.get("line-elevation-reference")==="hd-road-markup"}hasElevation(){return this.layout&&this.layout.get("line-elevation-reference")!=="none"}},symbol:$C,background:class extends Ms{constructor(c,o,u,h){super(c,{layout:KH||(KH=new Ui({visibility:new Xt(ht.layout_background.visibility)})),paint:QH||(QH=new Ui({"background-pitch-alignment":new Xt(ht.paint_background["background-pitch-alignment"]),"background-color":new Xt(ht.paint_background["background-color"]),"background-pattern":new Xt(ht.paint_background["background-pattern"]),"background-opacity":new Xt(ht.paint_background["background-opacity"]),"background-emissive-strength":new Xt(ht.paint_background["background-emissive-strength"]),"background-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(c,o,u){return{overrideFog:!1}}is3D(c){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:rG,"raster-particle":uG,sky:class extends Ms{constructor(c,o,u,h){super(c,{layout:oG||(oG=new Ui({visibility:new Xt(ht.layout_sky.visibility)})),paint:sG||(sG=new Ui({"sky-type":new Xt(ht.paint_sky["sky-type"]),"sky-atmosphere-sun":new Xt(ht.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Xt(ht.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Xt(ht.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Xt(ht.paint_sky["sky-gradient-radius"]),"sky-gradient":new jd(ht.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Xt(ht.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Xt(ht.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Xt(ht.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h),this._updateColorRamp()}_clear(){this.skyboxFbo&&(this.skyboxFbo.destroy(),this.skyboxFbo=null),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null),this._skyboxInvalidated=!0}_handleSpecialPaintPropertyUpdate(c){c==="sky-gradient"?this._updateColorRamp():c!=="sky-atmosphere-sun"&&c!=="sky-atmosphere-halo-color"&&c!=="sky-atmosphere-color"&&c!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=hv({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(c){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=c.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(c,o){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),g=!h,b=c.style.light,w=b.properties.get("position");return g&&b.properties.get("anchor")==="viewport"&&Hn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?RL(w.azimuthal,90-w.polar,o):RL(h[0],90-h[1],o)}const u=this.paint.get("sky-gradient-center");return RL(u[0],90-u[1],o)}isSky(){return!0}markSkyboxValid(c){this._skyboxInvalidated=!1,this._lightPosition=c.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const c=this.paint.get("sky-type");return c==="atmosphere"?["skyboxCapture","skybox"]:c==="gradient"?["skyboxGradient"]:null}},slot:class extends Ms{constructor(c,o,u,h){super(c,{paint:lG||(lG=new Ui({}))},o,null)}},model:class extends Ms{constructor(c,o,u,h){super(c,{layout:dG||(dG=new Ui({visibility:new Xt(ht.layout_model.visibility),"model-id":new on(ht.layout_model["model-id"]),"model-allow-density-reduction":new Xt(ht.layout_model["model-allow-density-reduction"])})),paint:pG||(pG=new Ui({"model-opacity":new on(ht.paint_model["model-opacity"]),"model-rotation":new on(ht.paint_model["model-rotation"]),"model-scale":new on(ht.paint_model["model-scale"]),"model-translation":new on(ht.paint_model["model-translation"]),"model-color":new on(ht.paint_model["model-color"]),"model-color-mix-intensity":new on(ht.paint_model["model-color-mix-intensity"]),"model-type":new Xt(ht.paint_model["model-type"]),"model-cast-shadows":new Xt(ht.paint_model["model-cast-shadows"]),"model-receive-shadows":new Xt(ht.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Xt(ht.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new on(ht.paint_model["model-emissive-strength"]),"model-roughness":new on(ht.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new on(ht.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Xt(ht.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Xt(ht.paint_model["model-front-cutoff"]),"model-elevation-reference":new Xt(ht.paint_model["model-elevation-reference"]),"model-color-use-theme":new on({type:"string",default:"default","property-type":"data-driven"})}))},o,u,h),this.layer=c,this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(c){return new LL(c)}getProgramIds(){return["model"]}is3D(c){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(c){return c instanceof GC?8191:0}queryRenderedFeatures(c,o,u){const h=o.getSource();if(!(h&&h instanceof Cb))return{};const g=h,b={};b[this.id]=[];const w=b[this.id];let A=0;for(const D of g.models){const P=o.getFeatureState(this.sourceLayer,D.id),B={type:"Unknown",id:D.id,properties:D.featureProperties},j=this.paint.get("model-rotation").evaluate(B,P),$=this.paint.get("model-scale").evaluate(B,P),G=this.paint.get("model-translation").evaluate(B,P),Z=this.paint.get("model-elevation-reference");let se=[];AC(se,D,u,D.position,j,$,G,Z==="ground",Z==="ground",!1),u.projection.name==="globe"&&(se=EC(se,u));const fe=K([],u.projMatrix,se),ue=rL(c.isPointQuery()?c.screenBounds:c.screenGeometry,u,fe,D.aabb);if(ue!=null){const pe=new Ob(void 0,0,0,0,D.id);pe.layer=this.layer,pe.properties=structuredClone(D.featureProperties),pe.properties.layer=this.id,pe.properties.uri=D.uri,pe.properties.orientation=D.orientation,pe.sourceLayer=this.sourceLayer,pe.geometry={type:"Point",coordinates:[D.position.lng,D.position.lat]},pe.state=P,pe.source=this.source,w.push({featureIndex:A,feature:pe,intersectionZ:ue})}++A}return b}queryIntersectsFeature(c,o,u,h,g,b,w,A,D,P){if(!this.modelManager)return!1;const B=this.modelManager,j=c.tile.getBucket(this);if(!(j&&j instanceof LL))return!1;for(const $ in j.instancesPerModel){const G=j.instancesPerModel[$],Z=o.id!==void 0?o.id:o.properties&&o.properties.hasOwnProperty("id")?o.properties.id:void 0;if(G.idToFeaturesIndex.hasOwnProperty(Z)){const se=G.features[G.idToFeaturesIndex[Z]],fe=B.getModel($,P||this.scope);if(!fe)return!1;let ue=[];const pe=new Re(0,0),ve=j.canonical;let Se=Number.MAX_VALUE;for(let ke=0;ke<se.instancedDataCount;++ke){const Ie=16*(se.instancedDataOffset+ke),Ve=G.instancedDataArray.float32,qe=[Ve[Ie+4],Ve[Ie+5],Ve[Ie+6]];FL(ve,pe,Math.floor(Ve[Ie]),Math.floor(Ve[Ie+1])),AC(ue,fe,b,pe,se.rotation,se.scale,qe,!1,!1,!1),b.projection.name==="globe"&&(ue=EC(ue,b));const Ue=K([],b.projMatrix,ue),Ze=c.queryGeometry,rt=rL(Ze.isPointQuery()?Ze.screenBounds:Ze.screenGeometry,b,Ue,fe.aabb);rt!=null&&(Se=Math.min(rt,Se))}return Se!==Number.MAX_VALUE&&Se}}return!1}_handleOverridablePaintPropertyUpdate(c,o,u){return!(!this.layout||o.isDataDriven()||u.isDataDriven()||c!=="model-color"&&c!=="model-color-mix-intensity"&&c!=="model-rotation"&&c!=="model-scale"&&c!=="model-translation"&&c!=="model-emissive-strength")}_isPropertyZoomDependent(c){const o=this._transitionablePaint._values[c];return o!=null&&o.value!=null&&o.value.expression!=null&&o.value.expression instanceof us}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends Ms{constructor(c,o,u,h){super(c,{layout:tp||(tp=new Ui({"clip-layer-types":new Xt(ht.layout_clip["clip-layer-types"]),"clip-layer-scope":new Xt(ht.layout_clip["clip-layer-scope"]),visibility:new Xt(ht.layout_clip.visibility)})),paint:fC||(fC=new Ui({}))},o,u,h)}recalculate(c,o){super.recalculate(c,o)}createBucket(c){return new hC(c)}is3D(c){return!0}}},NL=new Qr(0,0,0);function Ive(c,o,u){c===1&&o.icons.push((function(h,g){return(function(b){if(b.usvg_tree.height||(b.usvg_tree.height=b.usvg_tree.width),!b.metadata)return b;const{metadata:w}=b;if(w.content_area){const{content_area:A}=w;A.left==null&&(A.left=0),A.top==null&&(A.top=A.left),A.width==null&&(A.width=b.usvg_tree.width),A.height==null&&(A.height=A.width)}if(w.text_placeholder){const{text_placeholder:A}=w;A.top==null&&(A.top=A.left),A.height==null&&(A.height=A.width)}return w.stretch_x&&w.stretch_x.length&&vG(w,"x"),w.stretch_y&&w.stretch_y.length&&vG(w,"y"),b})(h.readFields(Pve,{name:void 0},g))})(u,u.readVarint()+u.pos))}function vG(c,o){const u=[],h=c[`stretch_${o}`];let g=null;for(let b=0;b<h.length;b++)g===null?g=u.length===0?h[0]:u[u.length-1][1]+h[b]:(u.push([g,g+h[b]]),g=null);c[`stretch_${o}_areas`]=u}function Pve(c,o,u){c===1?o.name=u.readString():c===2?o.metadata=(function(h,g){return h.readFields(Rve,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},g)})(u,u.readVarint()+u.pos):c===3&&(o.usvg_tree=(function(h,g){return h.readFields(zve,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},g)})(u,u.readVarint()+u.pos),o.data="usvg_tree")}function Rve(c,o,u){c===1?o.stretch_x=u.readPackedVarint():c===2?o.stretch_y=u.readPackedVarint():c===3?o.content_area=bG(u,u.readVarint()+u.pos):c===4?o.variables.push((function(h,g){return h.readFields(Lve,{name:void 0},g)})(u,u.readVarint()+u.pos)):c===5&&(o.text_placeholder=bG(u,u.readVarint()+u.pos))}function bG(c,o){return c.readFields(kve,{},o)}function kve(c,o,u){c===1?o.left=u.readVarint():c===2?o.width=u.readVarint():c===3?o.top=u.readVarint():c===4&&(o.height=u.readVarint())}function Lve(c,o,u){c===1?o.name=u.readString():c===2&&(o.rgb_color=XC(u.readVarint()),o.value="rgb_color")}function zve(c,o,u){c===1?o.width=o.height=u.readVarint():c===2?o.height=u.readVarint():c===3?o.children.push(YC(u,u.readVarint()+u.pos)):c===4?o.linear_gradients.push((function(h,g){return h.readFields(Vve,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},g)})(u,u.readVarint()+u.pos)):c===5?o.radial_gradients.push((function(h,g){return h.readFields(Hve,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},g)})(u,u.readVarint()+u.pos)):c===7?o.clip_paths.push((function(h,g){return h.readFields(Gve,{children:[]},g)})(u,u.readVarint()+u.pos)):c===8&&o.masks.push((function(h,g){const b=h.readFields(Yve,{left:0,width:20,mask_type:1,children:[]},g);return b.height==null&&(b.height=b.width),b.top==null&&(b.top=b.left),b})(u,u.readVarint()+u.pos))}function YC(c,o){return c.readFields(Fve,{},o)}function Fve(c,o,u){c===1?(o.group=(function(h,g){return h.readFields(Nve,{opacity:255,children:[]},g)})(u,u.readVarint()+u.pos),o.node="group"):c===2&&(o.path=(function(h,g){return h.readFields(jve,{paint_order:1,commands:[],step:1,diffs:[],rule:1},g)})(u,u.readVarint()+u.pos),o.node="path")}function Nve(c,o,u){c===1?o.transform=WC(u,u.readVarint()+u.pos):c===2?o.opacity=u.readVarint():c===5?o.clip_path_idx=u.readVarint():c===6?o.mask_idx=u.readVarint():c===7&&o.children.push(YC(u,u.readVarint()+u.pos))}function WC(c,o){return c.readFields(Bve,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},o)}function Bve(c,o,u){c===1?o.sx=u.readFloat():c===2?o.ky=u.readFloat():c===3?o.kx=u.readFloat():c===4?o.sy=u.readFloat():c===5?o.tx=u.readFloat():c===6&&(o.ty=u.readFloat())}function jve(c,o,u){c===1?o.fill=(function(h,g){return h.readFields(Uve,{rgb_color:NL,paint:"rgb_color",opacity:255},g)})(u,u.readVarint()+u.pos):c===2?o.stroke=(function(h,g){return h.readFields($ve,{rgb_color:NL,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},g)})(u,u.readVarint()+u.pos):c===3?o.paint_order=u.readVarint():c===5?u.readPackedVarint(o.commands):c===6?o.step=u.readFloat():c===7?u.readPackedSVarint(o.diffs):c===8&&(o.rule=u.readVarint())}function Uve(c,o,u){c===1?(o.rgb_color=XC(u.readVarint()),o.paint="rgb_color"):c===2?(o.linear_gradient_idx=u.readVarint(),o.paint="linear_gradient_idx"):c===3?(o.radial_gradient_idx=u.readVarint(),o.paint="radial_gradient_idx"):c===5&&(o.opacity=u.readVarint())}function XC(c){return new Qr((c>>16&255)/255,(c>>8&255)/255,(255&c)/255,1)}function $ve(c,o,u){c===1?(o.rgb_color=XC(u.readVarint()),o.paint="rgb_color"):c===2?(o.linear_gradient_idx=u.readVarint(),o.paint="linear_gradient_idx"):c===3?(o.radial_gradient_idx=u.readVarint(),o.paint="radial_gradient_idx"):c===5?u.readPackedFloat(o.dasharray):c===6?o.dashoffset=u.readFloat():c===7?o.miterlimit=u.readFloat():c===8?o.opacity=u.readVarint():c===9?o.width=u.readFloat():c===10?o.linecap=u.readVarint():c===11&&(o.linejoin=u.readVarint())}function Vve(c,o,u){c===1?o.transform=WC(u,u.readVarint()+u.pos):c===2?o.spread_method=u.readVarint():c===3?o.stops.push(xG(u,u.readVarint()+u.pos)):c===4?o.x1=u.readFloat():c===5?o.y1=u.readFloat():c===6?o.x2=u.readFloat():c===7&&(o.y2=u.readFloat())}function xG(c,o){return c.readFields(qve,{offset:0,opacity:255,rgb_color:NL},o)}function qve(c,o,u){c===1?o.offset=u.readFloat():c===2?o.opacity=u.readVarint():c===3&&(o.rgb_color=XC(u.readVarint()))}function Hve(c,o,u){c===1?o.transform=WC(u,u.readVarint()+u.pos):c===2?o.spread_method=u.readVarint():c===3?o.stops.push(xG(u,u.readVarint()+u.pos)):c===4?o.cx=u.readFloat():c===5?o.cy=u.readFloat():c===6?o.r=u.readFloat():c===7?o.fx=u.readFloat():c===8?o.fy=u.readFloat():c===9&&(o.fr=u.readFloat())}function Gve(c,o,u){c===1?o.transform=WC(u,u.readVarint()+u.pos):c===2?o.clip_path_idx=u.readVarint():c===3&&o.children.push(YC(u,u.readVarint()+u.pos))}function Yve(c,o,u){c===1?o.left=o.top=u.readFloat():c===2?o.width=o.height=u.readFloat():c===3?o.top=u.readFloat():c===4?o.height=u.readFloat():c===5?o.mask_type=u.readVarint():c===6?o.mask_idx=u.readVarint():c===7&&o.children.push(YC(u,u.readVarint()+u.pos))}class Wve{static calculate(o={},u=[]){const h=new Map,g=new Map;if(Object.keys(o).length===0)return h;u.forEach(b=>{g.set(b.name,b.rgb_color||new Qr(0,0,0))});for(const[b,w]of Object.entries(o))g.has(b)?h.set(g.get(b).toString(),w):console.warn(`Ignoring unknown image variable "${b}"`);return h}}function V1(c,o=255,u){const h=o/255,g=c.toString(),b=u.has(g)?u.get(g).clone():c.clone();return b.a*=h,b.toString()}function hE(c,o){if(!iu()){const u=document.createElement("canvas");return u.width=c,u.height=o,u}return new OffscreenCanvas(c,o)}let BL,dE=null;function jL(c,o,u,h,g){for(const b of h.children)wG(c,o,u,b,g)}function wG(c,o,u,h,g){h.group?(c.save(),(function(b,w,A,D,P){const B=D.mask_idx!=null?A.masks[D.mask_idx]:null,j=D.clip_path_idx!=null?A.clip_paths[D.clip_path_idx]:null;if(D.transform&&(w=q1(D.transform).preMultiplySelf(w)),!(function(Z,se,fe){return Z.opacity!==255||se||fe})(D,j!=null,B!=null))return void jL(b,w,A,D,P);const $=hE(b.canvas.width,b.canvas.height),G=$.getContext("2d");jL(G,w,A,D,P),j&&MG(G,w,A,j),B&&DG(G,w,A,B,P),b.globalAlpha=D.opacity/255,b.drawImage($,0,0)})(c,o,u,h.group,g),c.restore()):h.path&&(c.save(),(function(b,w,A,D,P){b.setTransform(w),D.paint_order===1?(SG(b,A,D,P),EG(b,A,D,P)):(EG(b,A,D,P),SG(b,A,D,P))})(c,o,u,h.path,g),c.restore())}function SG(c,o,u,h){const g=u.fill;if(!g)return;const b=g.opacity/255;switch(c.save(),c.beginPath(),IG(u,c),g.paint){case"rgb_color":c.fillStyle=V1(g.rgb_color,g.opacity,h);break;case"linear_gradient_idx":{const w=o.linear_gradients[g.linear_gradient_idx];w.transform&&c.setTransform(q1(w.transform).preMultiplySelf(c.getTransform())),c.fillStyle=AG(c,w,b,h);break}case"radial_gradient_idx":{const w=o.radial_gradients[g.radial_gradient_idx];w.transform&&c.setTransform(q1(w.transform).preMultiplySelf(c.getTransform())),c.fillStyle=OG(c,w,b,h)}}c.fill(TG(u)),c.restore()}function TG(c){return c.rule===1?"nonzero":c.rule===2?"evenodd":void 0}function EG(c,o,u,h){const g=u.stroke;if(!g)return;const b=PG(u);c.lineWidth=g.width,c.miterLimit=g.miterlimit,c.setLineDash(g.dasharray),c.lineDashOffset=g.dashoffset;const w=g.opacity/255;switch(g.paint){case"rgb_color":c.strokeStyle=V1(g.rgb_color,g.opacity,h);break;case"linear_gradient_idx":c.strokeStyle=AG(c,o.linear_gradients[g.linear_gradient_idx],w,h,!0);break;case"radial_gradient_idx":c.strokeStyle=OG(c,o.radial_gradients[g.radial_gradient_idx],w,h,!0)}switch(g.linejoin){case 2:case 1:c.lineJoin="miter";break;case 3:c.lineJoin="round";break;case 4:c.lineJoin="bevel"}switch(g.linecap){case 1:c.lineCap="butt";break;case 2:c.lineCap="round";break;case 3:c.lineCap="square"}c.stroke(b)}function AG(c,o,u,h,g=!1){if(o.stops.length===1){const $=o.stops[0];return V1($.rgb_color,$.opacity*u,h)}const{x1:b,y1:w,x2:A,y2:D}=o;let P=new DOMPoint(b,w),B=new DOMPoint(A,D);if(g){const $=q1(o.transform);P=$.transformPoint(P),B=$.transformPoint(B)}const j=c.createLinearGradient(P.x,P.y,B.x,B.y);for(const $ of o.stops)j.addColorStop($.offset,V1($.rgb_color,$.opacity*u,h));return j}function OG(c,o,u,h,g=!1){if(o.stops.length===1){const ue=o.stops[0];return V1(ue.rgb_color,ue.opacity*u,h)}const b=q1(o.transform),{fx:w,fy:A,fr:D,cx:P,cy:B,r:j}=o;let $=new DOMPoint(w,A),G=new DOMPoint(P,B),Z=D,se=j;if(g){$=b.transformPoint($),G=b.transformPoint(G);const ue=(b.a+b.d)/2;Z=D*ue,se=o.r*ue}const fe=c.createRadialGradient($.x,$.y,Z,G.x,G.y,se);for(const ue of o.stops)fe.addColorStop(ue.offset,V1(ue.rgb_color,ue.opacity*u,h));return fe}function CG(c,o,u,h){const g=h.transform?q1(h.transform).preMultiplySelf(o):o,b=hE(c.canvas.width,c.canvas.height),w=b.getContext("2d");for(const D of h.children)if(D.group)CG(w,g,u,D.group);else if(D.path){const P=D.path,B=new Path2D;B.addPath(PG(P),g),w.fill(B,TG(P))}const A=h.clip_path_idx!=null?u.clip_paths[h.clip_path_idx]:null;A&&MG(w,g,u,A),c.globalCompositeOperation="source-over",c.drawImage(b,0,0)}function MG(c,o,u,h){const g=hE(c.canvas.width,c.canvas.height);CG(g.getContext("2d"),o,u,h),c.globalCompositeOperation="destination-in",c.drawImage(g,0,0)}function DG(c,o,u,h,g){if(h.children.length===0)return;const b=h.mask_idx!=null?u.masks[h.mask_idx]:null;b&&DG(c,o,u,b,g);const w=c.canvas.width,A=c.canvas.height,D=hE(w,A),P=D.getContext("2d"),B=h.width,j=h.height,$=h.left,G=h.top,Z=new Path2D,se=new Path2D;se.rect($,G,B,j),Z.addPath(se,o),P.clip(Z);for(const pe of h.children)wG(P,o,u,pe,g);const fe=P.getImageData(0,0,w,A),ue=fe.data;if(h.mask_type===1)for(let pe=0;pe<ue.length;pe+=4)ue[pe+3]=ue[pe+3]/255*(.2126*ue[pe]+.7152*ue[pe+1]+.0722*ue[pe+2]);P.putImageData(fe,0,0),c.globalCompositeOperation="destination-in",c.drawImage(D,0,0)}function q1(c){return c?new DOMMatrix([c.sx,c.ky,c.kx,c.sy,c.tx,c.ty]):new DOMMatrix}function IG(c,o){const u=c.step;let h=c.diffs[0]*u,g=c.diffs[1]*u;o.moveTo(h,g);for(let b=0,w=2;b<c.commands.length;b++)switch(c.commands[b]){case 1:h+=c.diffs[w++]*u,g+=c.diffs[w++]*u,o.moveTo(h,g);break;case 2:h+=c.diffs[w++]*u,g+=c.diffs[w++]*u,o.lineTo(h,g);break;case 3:{const A=h+c.diffs[w++]*u,D=g+c.diffs[w++]*u;h=A+c.diffs[w++]*u,g=D+c.diffs[w++]*u,o.quadraticCurveTo(A,D,h,g);break}case 4:{const A=h+c.diffs[w++]*u,D=g+c.diffs[w++]*u,P=A+c.diffs[w++]*u,B=D+c.diffs[w++]*u;h=P+c.diffs[w++]*u,g=B+c.diffs[w++]*u,o.bezierCurveTo(A,D,P,B,h,g);break}case 5:o.closePath();break}return o}function PG(c){return IG(c,new Path2D)}class ZC{constructor(o){this.capacity=o,this.cache=new Map}get(o){if(!this.cache.has(o))return;const u=this.cache.get(o);return this.cache.delete(o),this.cache.set(o,u),u}put(o,u){this.cache.has(o)?this.cache.delete(o):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(o,u)}delete(o){this.cache.delete(o)}}Kt(ZC,"LRUCache");class UL{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(o){return new Vo(o,o.data)}getFromCache(o,u,h){return this.cacheMap.has(h)||this.cacheMap.set(h,new ZC(150)),this.cacheMap.get(h).get(Ku(o.toString(),u))}setInCache(o,u,h,g){this.cacheDependenciesMap.has(g)||this.cacheDependenciesMap.set(g,new Map),this.cacheMap.has(g)||this.cacheMap.set(g,new ZC(150));const b=this.cacheDependenciesMap.get(g),w=Ku(o.id.toString(),h);b.get(w)||b.set(w,new Set);const A=this.cacheMap.get(g),D=o.toString();b.get(w).add(D),A.put(Ku(o.toString(),h),u)}removeImagesFromCacheByIds(o,u,h=0){if(!this.cacheMap.has(h)||!this.cacheDependenciesMap.has(h))return;const g=this.cacheMap.get(h),b=this.cacheDependenciesMap.get(h);for(const w of o){const A=Ku(w.toString(),u);if(b.has(A)){for(const D of b.get(A))g.delete(D);b.delete(A)}}}rasterize(o,u,h,g){const b=this.getFromCache(o,h,g);if(b)return b.clone();const w=(function(D,P){const B=Wve.calculate(P.params,D.metadata?D.metadata.variables:[]),j=D.usvg_tree,$=j.width,G=j.height,Z=Math.max(1,Math.round($*P.sx)),se=Math.max(1,Math.round(G*P.sy)),fe=new DOMMatrix([Z/$,0,0,se/G,0,0]);return dE===null&&(dE=hE(10,10),BL=dE.getContext("2d",{willReadFrequently:!0})),dE.width=Z,dE.height=se,jL(BL,fe,j,j,B),BL.getImageData(0,0,Z,se)})(u.icon,o),A=UL._getImage(w);return this.setInCache(o,A,h,g),A.clone()}}class RG{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,u){const h=this.toIdx(o,u);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(o,u){return this.leaves[this.toIdx(o,u)]}toIdx(o,u){return u*this.size+o}}function kG(c,o,u,h){let g=0,b=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(h[w])<1e-15){if(u[w]<c[w]||u[w]>o[w])return null}else{const A=1/h[w];let D=(c[w]-u[w])*A,P=(o[w]-u[w])*A;if(D>P){const B=D;D=P,P=B}if(D>g&&(g=D),P<b&&(b=P),g>b)return null}return g}function LG(c,o,u,h,g,b,w,A,D,P,B){const j=h-c,$=g-o,G=b-u,Z=w-c,se=A-o,fe=D-u,ue=B[1]*fe-B[2]*se,pe=B[2]*Z-B[0]*fe,ve=B[0]*se-B[1]*Z,Se=j*ue+$*pe+G*ve;if(Math.abs(Se)<1e-15)return null;const ke=1/Se,Ie=P[0]-c,Ve=P[1]-o,qe=P[2]-u,Ue=(Ie*ue+Ve*pe+qe*ve)*ke;if(Ue<0||Ue>1)return null;const Ze=Ve*G-qe*$,rt=qe*j-Ie*G,Et=Ie*$-Ve*j,xt=(B[0]*Ze+B[1]*rt+B[2]*Et)*ke;return xt<0||Ue+xt>1?null:(Z*Ze+se*rt+fe*Et)*ke}function zG(c,o,u){return(c-o)/(u-o)}function FG(c,o,u,h,g,b,w,A,D){const P=1<<u,B=b-h,j=w-g,$=(c+1)/P*B+h,G=(o+0)/P*j+g,Z=(o+1)/P*j+g;A[0]=(c+0)/P*B+h,A[1]=G,D[0]=$,D[1]=Z}class NG{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=(function(b){const w=Math.ceil(Math.log2(b.dim/8)),A=[];let D=Math.ceil(Math.pow(2,w));const P=1/D,B=(G,Z,se,fe,ue)=>{const pe=fe?1:0,ve=(G+1)*se-pe,Se=Z*se,ke=(Z+1)*se-pe;ue[0]=G*se,ue[1]=Se,ue[2]=ve,ue[3]=ke};let j=new RG(D);const $=[];for(let G=0;G<D*D;G++){B(G%D,Math.floor(G/D),P,!1,$);const Z=Ev($[0],$[1],b),se=Ev($[2],$[1],b),fe=Ev($[2],$[3],b),ue=Ev($[0],$[3],b);j.minimums.push(Math.min(Z,se,fe,ue)),j.maximums.push(Math.max(Z,se,fe,ue)),j.leaves.push(1)}for(A.push(j),D/=2;D>=1;D/=2){const G=A[A.length-1];j=new RG(D);for(let Z=0;Z<D*D;Z++){B(Z%D,Math.floor(Z/D),2,!0,$);const se=G.getElevation($[0],$[1]),fe=G.getElevation($[2],$[1]),ue=G.getElevation($[2],$[3]),pe=G.getElevation($[0],$[3]),ve=G.isLeaf($[0],$[1]),Se=G.isLeaf($[2],$[1]),ke=G.isLeaf($[2],$[3]),Ie=G.isLeaf($[0],$[3]),Ve=Math.min(se.min,fe.min,ue.min,pe.min),qe=Math.max(se.max,fe.max,ue.max,pe.max),Ue=ve&&Se&&ke&&Ie;j.maximums.push(qe),j.minimums.push(Ve),j.leaves.push(qe-Ve<=5&&Ue?1:0)}A.push(j)}return A})(this.dem),h=u.length-1,g=u[h];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(u,0,0,h,0)}raycastRoot(o,u,h,g,b,w,A=1){return kG([o,u,-100],[h,g,this.maximums[0]*A],b,w)}raycast(o,u,h,g,b,w,A=1){if(!this.nodeCount)return null;const D=this.raycastRoot(o,u,h,g,b,w,A);if(D==null)return null;const P=[],B=[],j=[],$=[],G=[{idx:0,t:D,nodex:0,nodey:0,depth:0}];for(;G.length>0;){const{idx:Z,t:se,nodex:fe,nodey:ue,depth:pe}=G.pop();if(this.leaves[Z]){FG(fe,ue,pe,o,u,h,g,j,$);const Se=1<<pe,ke=(fe+0)/Se,Ie=(fe+1)/Se,Ve=(ue+0)/Se,qe=(ue+1)/Se,Ue=Ev(ke,Ve,this.dem)*A,Ze=Ev(Ie,Ve,this.dem)*A,rt=Ev(Ie,qe,this.dem)*A,Et=Ev(ke,qe,this.dem)*A,xt=LG(j[0],j[1],Ue,$[0],j[1],Ze,$[0],$[1],rt,b,w),Tt=LG($[0],$[1],rt,j[0],$[1],Et,j[0],j[1],Ue,b,w),kt=Math.min(xt!==null?xt:Number.MAX_VALUE,Tt!==null?Tt:Number.MAX_VALUE);if(kt!==Number.MAX_VALUE)return kt;{const Pt=jt([],b,w,se);if(BG(Ue,Ze,Et,rt,zG(Pt[0],j[0],$[0]),zG(Pt[1],j[1],$[1]))>=Pt[2])return se}continue}let ve=0;for(let Se=0;Se<this._siblingOffset.length;Se++){FG((fe<<1)+this._siblingOffset[Se][0],(ue<<1)+this._siblingOffset[Se][1],pe+1,o,u,h,g,j,$),j[2]=-100,$[2]=this.maximums[this.childOffsets[Z]+Se]*A;const ke=kG(j,$,b,w);if(ke!=null){const Ie=ke;P[Se]=Ie;let Ve=!1;for(let qe=0;qe<ve&&!Ve;qe++)Ie>=P[B[qe]]&&(B.splice(qe,0,Se),Ve=!0);Ve||(B[ve]=Se),ve++}}for(let Se=0;Se<ve;Se++){const ke=B[Se];G.push({idx:this.childOffsets[Z]+ke,t:P[ke],nodex:(fe<<1)+this._siblingOffset[ke][0],nodey:(ue<<1)+this._siblingOffset[ke][1],depth:pe+1})}}return null}_addNode(o,u,h){return this.minimums.push(o),this.maximums.push(u),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(o,u,h,g,b){if(o[g].isLeaf(u,h)===1)return;this.childOffsets[b]||(this.childOffsets[b]=this.nodeCount);const w=g-1,A=o[w];let D=0,P=0;for(let B=0;B<this._siblingOffset.length;B++){const j=2*u+this._siblingOffset[B][0],$=2*h+this._siblingOffset[B][1],G=A.getElevation(j,$),Z=A.isLeaf(j,$),se=this._addNode(G.min,G.max,Z);Z&&(D|=1<<B),P||(P=se)}for(let B=0;B<this._siblingOffset.length;B++)D&1<<B||this._construct(o,2*u+this._siblingOffset[B][0],2*h+this._siblingOffset[B][1],w,P+B)}}function BG(c,o,u,h,g,b){return Vn(Vn(c,u,b),Vn(o,h,b),g)}function Ev(c,o,u){const h=u.dim,g=ze(c*h-.5,0,h-1),b=ze(o*h-.5,0,h-1),w=Math.floor(g),A=Math.floor(b),D=Math.min(w+1,h-1),P=Math.min(A+1,h-1);return BG(u.get(w,A),u.get(D,A),u.get(w,P),u.get(D,P),g-w,b-A)}const Xve={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Zve(c,o,u){return(256*c*256+256*o+u)/10-1e4}function Kve(c,o,u){return 256*c+o+u/256-32768}class KC{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,u,h,g=!1){if(this.uid=o,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void Hn(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const b=this.dim=u.height-2,w=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.floatView=new Float32Array(u.data.buffer),this.borderReady=g,this._modifiedForSources={},!g){for(let D=0;D<b;D++)w[this._idx(-1,D)]=w[this._idx(0,D)],w[this._idx(b,D)]=w[this._idx(b-1,D)],w[this._idx(D,-1)]=w[this._idx(D,0)],w[this._idx(D,b)]=w[this._idx(D,b-1)];w[this._idx(-1,-1)]=w[this._idx(0,0)],w[this._idx(b,-1)]=w[this._idx(b-1,0)],w[this._idx(-1,b)]=w[this._idx(0,b-1)],w[this._idx(b,b)]=w[this._idx(b-1,b-1)]}const A=h==="terrarium"?Kve:Zve;for(let D=0;D<w.length;++D){const P=4*D;this.floatView[D]=A(this.pixels[P],this.pixels[P+1],this.pixels[P+2])}this._timestamp=Sl.now()}_buildQuadTree(){this._tree=new NG(this)}get(o,u,h=!1){h&&(o=ze(o,-1,this.dim),u=ze(u,-1,this.dim));const g=this._idx(o,u);return this.floatView[g]}set(o,u,h){const g=this._idx(o,u),b=this.floatView[g];return this.floatView[g]=h,h-b}static getUnpackVector(o){return Xve[o]}_idx(o,u){if(o<-1||o>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(o+1)}static pack(o,u){const h=[0,0,0,0],g=KC.getUnpackVector(u);let b=Math.floor((o+g[3])/g[2]);return h[2]=b%256,b=Math.floor(b/256),h[1]=b%256,b=Math.floor(b/256),h[0]=b,h}getPixels(){return new QO({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,u,h){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=u*this.dim,b=u*this.dim+this.dim,w=h*this.dim,A=h*this.dim+this.dim;switch(u){case-1:g=b-1;break;case 1:b=g+1}switch(h){case-1:w=A-1;break;case 1:A=w+1}const D=-u*this.dim,P=-h*this.dim;for(let B=w;B<A;B++)for(let j=g;j<b;j++){const $=4*this._idx(j,B),G=4*this._idx(j+D,B+P);this.pixels[$+0]=o.pixels[G+0],this.pixels[$+1]=o.pixels[G+1],this.pixels[$+2]=o.pixels[G+2],this.pixels[$+3]=o.pixels[G+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function Qve(c,o,u){c===1?o.headerLength=u.readFixed32():c===2?o.x=u.readVarint():c===3?o.y=u.readVarint():c===4?o.z=u.readVarint():c===5&&o.layers.push((function(h,g){return h.readFields(r0e,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},g)})(u,u.readVarint()+u.pos))}function Jve(c,o,u){c===1?(o.delta_filter=(function(h,g){return h.readFields(e0e,{blockSize:0},g)})(u,u.readVarint()+u.pos),o.filter="delta_filter"):c===2?(u.readVarint(),o.filter="zigzag_filter"):c===3?(u.readVarint(),o.filter="bitshuffle_filter"):c===4&&(u.readVarint(),o.filter="byteshuffle_filter")}function e0e(c,o,u){c===1&&(o.blockSize=u.readVarint())}function t0e(c,o,u){c===1?(u.readVarint(),o.codec="gzip_data"):c===2?(u.readVarint(),o.codec="jpeg_image"):c===3?(u.readVarint(),o.codec="webp_image"):c===4&&(u.readVarint(),o.codec="png_image")}function n0e(c,o,u){let h=0,g=0;c===1?o.firstByte=u.readFixed64():c===2?o.lastByte=u.readFixed64():c===3?o.filters.push((function(b,w){return b.readFields(Jve,{},w)})(u,u.readVarint()+u.pos)):c===4?o.codec=(function(b,w){return b.readFields(t0e,{},w)})(u,u.readVarint()+u.pos):c===5?g=u.readFloat():c===6?h=u.readFloat():c===7?o.bands.push(u.readString()):c===8?o.offset=u.readDouble():c===9&&(o.scale=u.readDouble()),o.offset===0&&(o.offset=g),o.scale===0&&(o.scale=h)}function r0e(c,o,u){c===1?o.version=u.readVarint():c===2?o.name=u.readString():c===3?o.units=u.readString():c===4?o.tileSize=u.readVarint():c===5?o.buffer=u.readVarint():c===6?o.pixelFormat=u.readVarint():c===7&&o.dataIndex.push((function(h,g){return h.readFields(n0e,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},g)})(u,u.readVarint()+u.pos))}function i0e(c,o,u){if(c===2)(function(h,g,b){h.readFields(a0e,b,g)})(u,u.readVarint()+u.pos,o);else if(c===3)throw new Error("Not implemented")}function a0e(c,o,u){if(c===1){let h=0;const g=u.readVarint()+u.pos;for(;u.pos<g;)o[h++]=u.readVarint()}}function o0e(c,o){if(o.length!==4)throw new Error(`Expected data of dimension 4 but got ${o.length}.`);let u=o[3];for(let h=2;h>=1;h--){const g=h===1?1:0,b=h===2?1:0;for(let w=0;w<o[0];w++){const A=o[1]*w;for(let D=g;D<o[1];D++){const P=o[2]*(D+A);for(let B=b;B<o[2];B++){const j=o[3]*(B+P);for(let $=0;$<o[3];$++){const G=j+$;c[G]+=c[G-u]}}}}u*=o[h]}return c}function s0e(c){for(let o=0,u=c.length;o<u;o++)c[o]=c[o]>>>1^-(1&c[o]);return c}function l0e(c,o){switch(o){case"uint32":return c;case"uint16":for(let u=0;u<c.length;u+=2){const h=c[u],g=c[u+1];c[u]=(240&h)>>4|(61440&h)>>8|(240&g)<<4|61440&g,c[u+1]=15&h|(3840&h)>>4|(15&g)<<8|(3840&g)<<4}return c;case"uint8":for(let u=0;u<c.length;u+=4){const h=c[u],g=c[u+1],b=c[u+2],w=c[u+3];c[u+0]=(192&h)>>6|(192&g)>>4|(192&b)>>2|192&w,c[u+1]=(48&h)>>4|(48&g)>>2|48&b|(48&w)<<2,c[u+2]=(12&h)>>2|12&g|(12&b)<<2|(12&w)<<4,c[u+3]=3&h|(3&g)<<2|(3&b)<<4|(3&w)<<6}return c;default:throw new Error(`Invalid pixel format, "${o}"`)}}Kt(KC,"DEMData"),Kt(NG,"DemMinMaxQuadTree",{omit:["dem"]});var Bf=Uint8Array,pE=Uint16Array,u0e=Int32Array,jG=new Bf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),UG=new Bf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c0e=new Bf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$G=function(c,o){for(var u=new pE(31),h=0;h<31;++h)u[h]=o+=1<<c[h-1];var g=new u0e(u[30]);for(h=1;h<30;++h)for(var b=u[h];b<u[h+1];++b)g[b]=b-u[h]<<5|h;return{b:u,r:g}},VG=$G(jG,2),qG=VG.b,f0e=VG.r;qG[28]=258,f0e[258]=28;for(var h0e=$G(UG,0).b,HG=new pE(32768),Eo=0;Eo<32768;++Eo){var H1=(43690&Eo)>>1|(21845&Eo)<<1;HG[Eo]=((65280&(H1=(61680&(H1=(52428&H1)>>2|(13107&H1)<<2))>>4|(3855&H1)<<4))>>8|(255&H1)<<8)>>1}var mE=function(c,o,u){for(var h=c.length,g=0,b=new pE(o);g<h;++g)c[g]&&++b[c[g]-1];var w,A=new pE(o);for(g=1;g<o;++g)A[g]=A[g-1]+b[g-1]<<1;w=new pE(1<<o);var D=15-o;for(g=0;g<h;++g)if(c[g])for(var P=g<<4|c[g],B=o-c[g],j=A[c[g]-1]++<<B,$=j|(1<<B)-1;j<=$;++j)w[HG[j]>>D]=P;return w},gE=new Bf(288);for(Eo=0;Eo<144;++Eo)gE[Eo]=8;for(Eo=144;Eo<256;++Eo)gE[Eo]=9;for(Eo=256;Eo<280;++Eo)gE[Eo]=7;for(Eo=280;Eo<288;++Eo)gE[Eo]=8;var GG=new Bf(32);for(Eo=0;Eo<32;++Eo)GG[Eo]=5;var d0e=mE(gE,9),p0e=mE(GG,5),$L=function(c){for(var o=c[0],u=1;u<c.length;++u)c[u]>o&&(o=c[u]);return o},rp=function(c,o,u){var h=o/8|0;return(c[h]|c[h+1]<<8)>>(7&o)&u},VL=function(c,o){var u=o/8|0;return(c[u]|c[u+1]<<8|c[u+2]<<16)>>(7&o)},m0e=function(c){return(c+7)/8|0},g0e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ip=function(c,o,u){var h=new Error(o||g0e[c]);if(h.code=c,Error.captureStackTrace&&Error.captureStackTrace(h,ip),!u)throw h;return h},y0e=new Bf(0),_0e=typeof TextDecoder<"u"&&new TextDecoder;try{_0e.decode(y0e,{stream:!0})}catch{}const v0e={gzip_data:"gzip"};class zh extends Error{constructor(o){super(o),this.name="MRTError"}}const b0e={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},YG={uint32:1,uint16:2,uint8:4},x0e={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let qL;class QC{constructor(o=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=o}getLayer(o){const u=this.layers[o];if(!u)throw new zh(`Layer '${o}' not found`);return u}getHeaderLength(o){const u=new Uint8Array(o),h=new DataView(o);if(u[0]!==13)throw new zh("File is not a valid MRT.");return h.getUint32(1,!0)}parseHeader(o){const u=new Uint8Array(o),h=this.getHeaderLength(o);if(u.length<h)throw new zh(`Expected header with length >= ${h} but got buffer of length ${u.length}`);const g=new qL(u.subarray(0,h)).readFields(Qve,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0);if(!isNaN(this.x)&&(this.x!==g.x||this.y!==g.y||this.z!==g.z))throw new zh(`Invalid attempt to parse header ${g.z}/${g.x}/${g.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=g.x,this.y=g.y,this.z=g.z;for(const b of g.layers)this.layers[b.name]=new WG(b,{cacheSize:this._cacheSize});return this}createDecodingTask(o){const u=[],h=this.getLayer(o.layerName);for(let g of o.blockIndices){const b=h.dataIndex[g],w=b.firstByte-o.firstByte,A=b.lastByte-o.firstByte;if(h._blocksInProgress.has(g))continue;const D={layerName:h.name,firstByte:w,lastByte:A,pixelFormat:h.pixelFormat,blockIndex:g,blockShape:[b.bands.length].concat(h.bandShape),buffer:h.buffer,codec:b.codec.codec,filters:b.filters.map(P=>P.filter)};h._blocksInProgress.add(g),u.push(D)}return new XG(u,()=>{u.forEach(g=>h._blocksInProgress.delete(g.blockIndex))},(g,b)=>{if(u.forEach(w=>h._blocksInProgress.delete(w.blockIndex)),g)throw g;b.forEach(w=>{this.getLayer(w.layerName).processDecodedData(w)})})}}class WG{constructor({version:o,name:u,units:h,tileSize:g,pixelFormat:b,buffer:w,dataIndex:A},D){if(this.version=o,this.version!==1)throw new zh(`Cannot parse raster layer encoded with MRT version ${o}`);this.name=u,this.units=h,this.tileSize=g,this.buffer=w,this.pixelFormat=b0e[b],this.dataIndex=A,this.bandShape=[g+2*w,g+2*w,YG[this.pixelFormat]],this._decodedBlocks=new ZC(D?D.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return YG[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:o})=>o).flat()}processDecodedData(o){const u=o.blockIndex.toString();this._decodedBlocks.get(u)||this._decodedBlocks.put(u,o.data)}getBlockForBand(o){let u=0;switch(typeof o){case"string":for(const[h,g]of this.dataIndex.entries()){for(const[b,w]of g.bands.entries())if(w===o)return{bandIndex:u+b,blockIndex:h,blockBandIndex:b};u+=g.bands.length}break;case"number":for(const[h,g]of this.dataIndex.entries()){if(o>=u&&o<u+g.bands.length)return{bandIndex:o,blockIndex:h,blockBandIndex:o-u};u+=g.bands.length}break;default:throw new zh(`Invalid band \`${JSON.stringify(o)}\`. Expected string or integer.`)}return{blockIndex:-1,blockBandIndex:-1}}getDataRange(o){let u=1/0,h=-1/0;const g=[],b=new Set;for(const w of o){const{blockIndex:A}=this.getBlockForBand(w);if(A<0)throw new zh(`Invalid band: ${JSON.stringify(w)}`);const D=this.dataIndex[A];g.includes(A)||g.push(A),b.add(A),u=Math.min(u,D.firstByte),h=Math.max(h,D.lastByte)}if(b.size>this.cacheSize)throw new zh(`Number of blocks to decode (${b.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:u,lastByte:h,blockIndices:g}}hasBand(o){const{blockIndex:u}=this.getBlockForBand(o);return u>=0}hasDataForBand(o){const{blockIndex:u}=this.getBlockForBand(o);return u>=0&&!!this._decodedBlocks.get(u.toString())}getBandView(o){const{blockIndex:u,blockBandIndex:h}=this.getBlockForBand(o);if(u<0)throw new zh(`Band not found: ${JSON.stringify(o)}`);const g=this._decodedBlocks.get(u.toString());if(!g)throw new zh(`Data for band ${JSON.stringify(o)} of layer "${this.name}" not decoded.`);const b=this.dataIndex[u],w=this.bandShape.reduce((P,B)=>P*B,1),A=h*w,D=g.subarray(A,A+w);return{data:D,bytes:new Uint8Array(D.buffer).subarray(D.byteOffset,D.byteOffset+D.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:b.offset,scale:b.scale}}}QC.setPbf=function(c){qL=c};class XG{constructor(o,u,h){this.tasks=o,this._onCancel=u,this._onComplete=h,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(o,u){this._finalized||(this._onComplete(o,u),this._finalized=!0)}}QC.performDecoding=function(c,o){const u=new Uint8Array(c);return Promise.all(o.tasks.map(h=>{const{layerName:g,firstByte:b,lastByte:w,pixelFormat:A,blockShape:D,blockIndex:P,filters:B,codec:j}=h,$=u.subarray(b,w+1),G=new Uint32Array(D[0]*D[1]*D[2]);let Z;if(j!=="gzip_data")throw new zh(`Unhandled codec: ${j}`);return Z=(function(se,fe){if(!globalThis.DecompressionStream&&fe==="gzip_data")return Promise.resolve((ke=(function(qe){qe[0]==31&&qe[1]==139&&qe[2]==8||ip(6,"invalid gzip data");var Ue=qe[3],Ze=10;4&Ue&&(Ze+=2+(qe[10]|qe[11]<<8));for(var rt=(Ue>>3&1)+(Ue>>4&1);rt>0;rt-=!qe[Ze++]);return Ze+(2&Ue)})(ue=se),ke+8>ue.length&&ip(6,"invalid gzip data"),(function(qe,Ue,Ze,rt){var Et=qe.length;if(!Et||Ue.f&&!Ue.l)return Ze||new Bf(0);var xt=!Ze,Tt=xt||Ue.i!=2,kt=Ue.i;xt&&(Ze=new Bf(3*Et));var Pt=function(kl){var Dm=Ze.length;if(kl>Dm){var dl=new Bf(Math.max(2*Dm,kl));dl.set(Ze),Ze=dl}},Rt=Ue.f||0,vt=Ue.p||0,zt=Ue.b||0,Mt=Ue.l,Ft=Ue.d,Lt=Ue.m,fn=Ue.n,pn=8*Et;do{if(!Mt){Rt=rp(qe,vt,1);var nn=rp(qe,vt+1,3);if(vt+=3,!nn){var an=qe[($r=m0e(vt)+4)-4]|qe[$r-3]<<8,kn=$r+an;if(kn>Et){kt&&ip(0);break}Tt&&Pt(zt+an),Ze.set(qe.subarray($r,kn),zt),Ue.b=zt+=an,Ue.p=vt=8*kn,Ue.f=Rt;continue}if(nn==1)Mt=d0e,Ft=p0e,Lt=9,fn=5;else if(nn==2){var On=rp(qe,vt,31)+257,cn=rp(qe,vt+10,15)+4,Wn=On+rp(qe,vt+5,31)+1;vt+=14;for(var vr=new Bf(Wn),Zr=new Bf(19),pr=0;pr<cn;++pr)Zr[c0e[pr]]=rp(qe,vt+3*pr,7);vt+=3*cn;var di=$L(Zr),Lr=(1<<di)-1,Ra=mE(Zr,di);for(pr=0;pr<Wn;){var $r,ui=Ra[rp(qe,vt,Lr)];if(vt+=15&ui,($r=ui>>4)<16)vr[pr++]=$r;else{var Vi=0,ta=0;for($r==16?(ta=3+rp(qe,vt,3),vt+=2,Vi=vr[pr-1]):$r==17?(ta=3+rp(qe,vt,7),vt+=3):$r==18&&(ta=11+rp(qe,vt,127),vt+=7);ta--;)vr[pr++]=Vi}}var na=vr.subarray(0,On),ka=vr.subarray(On);Lt=$L(na),fn=$L(ka),Mt=mE(na,Lt),Ft=mE(ka,fn)}else ip(1);if(vt>pn){kt&&ip(0);break}}Tt&&Pt(zt+131072);for(var fs=(1<<Lt)-1,Hs=(1<<fn)-1,fo=vt;;fo=vt){var Ao=(Vi=Mt[VL(qe,vt)&fs])>>4;if((vt+=15&Vi)>pn){kt&&ip(0);break}if(Vi||ip(2),Ao<256)Ze[zt++]=Ao;else{if(Ao==256){fo=vt,Mt=null;break}var qo=Ao-254;Ao>264&&(qo=rp(qe,vt,(1<<(va=jG[pr=Ao-257]))-1)+qG[pr],vt+=va);var fr=Ft[VL(qe,vt)&Hs],ra=fr>>4;if(fr||ip(3),vt+=15&fr,ka=h0e[ra],ra>3){var va=UG[ra];ka+=VL(qe,vt)&(1<<va)-1,vt+=va}if(vt>pn){kt&&ip(0);break}Tt&&Pt(zt+131072);var lc=zt+qo;if(zt<ka){var Rl=0-ka,hs=Math.min(ka,lc);for(Rl+zt<0&&ip(3);zt<hs;++zt)Ze[zt]=rt[Rl+zt]}for(;zt<lc;++zt)Ze[zt]=Ze[zt-ka]}}Ue.l=Mt,Ue.p=fo,Ue.b=zt,Ue.f=Rt,Mt&&(Rt=1,Ue.m=Lt,Ue.d=Ft,Ue.n=fn)}while(!Rt);return zt!=Ze.length&&xt?(function(kl,Dm,dl){return(dl==null||dl>kl.length)&&(dl=kl.length),new Bf(kl.subarray(0,dl))})(Ze,0,zt):Ze.subarray(0,zt)})(ue.subarray(ke,-8),{i:2},new Bf(((ve=ue)[(Se=ve.length)-4]|ve[Se-3]<<8|ve[Se-2]<<16|ve[Se-1]<<24)>>>0),pe)));var ue,pe,ve,Se,ke;const Ie=v0e[fe];if(!Ie)throw new Error(`Unhandled codec: ${fe}`);const Ve=new globalThis.DecompressionStream(Ie);return new Response(new Blob([se]).stream().pipeThrough(Ve)).arrayBuffer().then(qe=>new Uint8Array(qe))})($,j).then(se=>((function(fe,ue){fe.readFields(i0e,ue)})(new qL(se),G),new x0e[A](G.buffer))),Z.then(se=>{for(let fe=B.length-1;fe>=0;fe--)switch(B[fe]){case"delta_filter":o0e(se,D);break;case"zigzag_filter":s0e(se);break;case"bitshuffle_filter":l0e(se,A);break;default:throw new zh(`Unhandled filter "${B[fe]}"`)}return{layerName:g,blockIndex:P,data:se}}).catch(se=>{throw se})}))},Kt(XG,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),Kt(QC,"MapboxRasterTile"),Kt(WG,"MapboxRasterLayer",{omit:["_blocksInProgress"]});class ZG{constructor(o){this._stringToNumber={},this._numberToString=[];for(let u=0;u<o.length;u++){const h=o[u];this._stringToNumber[h]=u,this._numberToString[u]=h}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}class KG{constructor(o,u){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Nc(Jt,16,0),this.featureIndexArray=new Rf,this.promoteId=u,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(o,u,h,g,b,w=0,A=0){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,b,w);const P=this.grid;for(let B=0;B<u.length;B++){const j=u[B],$=[1/0,1/0,-1/0,-1/0];for(let G=0;G<j.length;G++){const Z=j[G];$[0]=Math.min($[0],Z.x),$[1]=Math.min($[1],Z.y),$[2]=Math.max($[2],Z.x),$[3]=Math.max($[3],Z.y)}A!==0&&($[0]-=A,$[1]-=A,$[2]+=A,$[3]+=A),$[0]<Jt&&$[1]<Jt&&$[2]>=0&&$[3]>=0&&P.insert(D,$[0],$[1],$[2],$[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Mr(new MC(this.rawTileData)).layers,this.sourceLayerCoder=new ZG(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,u){const{tilespaceGeometry:h,transform:g,tileTransform:b,pixelPosMatrix:w,availableImages:A,worldview:D}=u;this.loadVTLayers(),this.serializedLayersCache.clear();const P=u.queryRadius?u.queryRadius:0,B=h.bufferedTilespaceBounds,j=this.grid.query(B.min.x,B.min.y,B.max.x,B.max.y,(se,fe,ue,pe)=>Xl(h.bufferedTilespaceGeometry,se-P,fe-P,ue+P,pe+P));j.sort(w0e);let $=null;g.elevation&&j.length>0&&($=$1.create(g.elevation,this.tileID));const G={};let Z;for(let se=0;se<j.length;se++){const fe=j[se];if(fe===Z)continue;Z=fe;const ue=this.featureIndexArray.get(fe);let pe=null;this.is3DTile?this.loadMatchingModelFeature(G,ue,o,h,g,D):this.loadMatchingFeature(G,ue,o,A,D,(ve,Se,ke,Ie=0)=>(pe||(pe=Un(ve,this.tileID.canonical,b)),Se.queryIntersectsFeature(h,ve,ke,pe,this.z,g,w,$,Ie,u.scope)))}return G}loadMatchingFeature(o,u,h,g,b,w){const{featureIndex:A,bucketIndex:D,sourceLayerIndex:P,layoutVertexArrayOffset:B}=u,j=this.bucketLayerIDs[D],$=h.layers,G=Object.keys($);if(G.length&&!rr(G,j))return;const Z=h.sourceCache,se=this.sourceLayerCoder.decode(P),fe=this.vtLayers[se].feature(A),ue=this.getId(fe,se);for(let pe=0;pe<j.length;pe++){const ve=j[pe];if(!$[ve])continue;const{styleLayer:Se,targets:ke}=$[ve];let Ie={};ue!==void 0&&(Ie=Z.getFeatureState(Se.sourceLayer,ue));const Ve=!w||w(fe,Se,Ie,B);if(!Ve)continue;const qe=new Ob(fe,this.z,this.x,this.y,ue);qe.tile=this.tileID.canonical,qe.state=Ie;let Ue=this.serializedLayersCache.get(ve);Ue||(Ue=Se.serialize(),Ue.id=ve,this.serializedLayersCache.set(ve,Ue)),qe.source=Ue.source,qe.sourceLayer=Ue["source-layer"],qe.layer=Object.assign({},Ue),qe.layer.paint=QG(Ue.paint,Se.paint,fe,Ie,g),qe.layer.layout=QG(Ue.layout,Se.layout,fe,Ie,g);let Ze=!1;for(const rt of ke){this.updateFeatureProperties(qe,rt);const{filter:Et}=rt;if(Et){if(fe.properties=qe.properties,Et.needGeometry){const xt=Qn(fe,!0);if(!Et.filter(new Jr(this.tileID.overscaledZ,{worldview:b}),xt,this.tileID.canonical))continue}else if(!Et.filter(new Jr(this.tileID.overscaledZ,{worldview:b}),fe))continue}Ze=!0,rt.targetId&&this.addFeatureVariant(qe,rt)}Ze&&this.appendToResult(o,ve,A,qe,Ve)}}loadMatchingModelFeature(o,u,h,g,b,w){const{featureIndex:A,bucketIndex:D}=u,P=this.bucketLayerIDs[D],B=h.layers,j=Object.keys(B);if(!j.length||rr(j,P))for(let $=0;$<P.length;$++){const G=P[$],{styleLayer:Z,targets:se}=B[G];if(Z.type!=="model")continue;const fe=g.tile,ue=fe.getBucket(Z);if(!(ue&&ue instanceof GC))continue;const pe=Mve(ue,A,g,b);if(!pe)continue;const{z:ve,x:Se,y:ke}=fe.tileID.canonical,{feature:Ie,intersectionZ:Ve,position:qe}=pe;let Ue={};Ie.id!==void 0&&(Ue=h.sourceCache.getFeatureState(Z.sourceLayer,Ie.id));const Ze=new Ob({},ve,Se,ke,Ie.id);Ze.tile=this.tileID.canonical,Ze.state=Ue,Ze.properties=Ie.properties,Ze.geometry={type:"Point",coordinates:[qe.lng,qe.lat]};let rt=this.serializedLayersCache.get(G);rt||(rt=Z.serialize(),rt.id=G,this.serializedLayersCache.set(G,rt)),Ze.source=rt.source,Ze.sourceLayer=rt["source-layer"],Ze.layer=Object.assign({},rt);let Et=!1;for(const xt of se){this.updateFeatureProperties(Ze,xt);const{filter:Tt}=xt;if(Tt){if(Ie.properties=Ze.properties,Tt.needGeometry){if(!Tt.filter(new Jr(this.tileID.overscaledZ,{worldview:w}),Ie,this.tileID.canonical))continue}else if(!Tt.filter(new Jr(this.tileID.overscaledZ,{worldview:w}),Ie))continue}Et=!0,xt.targetId&&this.addFeatureVariant(Ze,xt)}Et&&this.appendToResult(o,G,A,Ze,Ve)}}updateFeatureProperties(o,u,h){if(u.properties){const g={};for(const b in u.properties){const w=u.properties[b].evaluate({zoom:this.z},o._vectorTileFeature,o.state,o.tile,h);w!=null&&(g[b]=w)}o.properties=g}}addFeatureVariant(o,u,h){const g={target:u.target,namespace:u.namespace,uniqueFeatureID:u.uniqueFeatureID};u.properties&&(g.properties=o.properties),o.variants=o.variants||{},o.variants[u.targetId]=o.variants[u.targetId]||[],o.variants[u.targetId].push(g)}appendToResult(o,u,h,g,b){let w=o[u];w===void 0&&(w=o[u]=[]),w.push({featureIndex:h,feature:g,intersectionZ:b})}lookupSymbolFeatures(o,u,h,g,b,w){const A={};this.loadVTLayers();for(const D of o)this.loadMatchingFeature(A,{bucketIndex:u,sourceLayerIndex:h,featureIndex:D,layoutVertexArrayOffset:0},g,b,w);return A}loadFeature(o){const{featureIndex:u,sourceLayerIndex:h}=o;this.loadVTLayers();const g=this.sourceLayerCoder.decode(h),b=this.vtFeatures[g];if(b[u])return b[u];const w=this.vtLayers[g].feature(u);return b[u]=w,w}hasLayer(o){for(const u of this.bucketLayerIDs)for(const h of u)if(o===h)return!0;return!1}getId(o,u){let h=o.id;if(this.promoteId){const g=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[u];if(g!=null)if(Array.isArray(g)){if(!this.promoteIdExpression){const b=Fc(g);if(b.result!=="success"){const w=b.value.map(A=>`${A.key}: ${A.message}`).join(", ");return void Hn(`Failed to create expression for promoteId: ${w}`)}this.promoteIdExpression=b.value}h=this.promoteIdExpression.evaluate({zoom:0},o)}else h=o.properties[g];typeof h=="boolean"&&(h=Number(h))}return h}}function QG(c,o,u,h,g){return Mn(c,(b,w)=>{const A=o instanceof Cs?o.get(w):null;return A&&A.evaluate?A.evaluate(u,h,void 0,g):A})}function w0e(c,o){return o-c}Kt(KG,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const JG=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class HL{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,h]=new Uint8Array(o,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const b=JG[15&h];if(!b)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[A]=new Uint32Array(o,4,1);return new HL(A,w,b,o)}constructor(o,u=64,h=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=h,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const b=JG.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,A=o*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-A%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+A+D,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+A+D),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+A+D,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=o)}add(o,u){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=o,this.coords[this._pos++]=u,h}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return GL(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,u,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:w,nodeSize:A}=this,D=[0,b.length-1,0],P=[];for(;D.length;){const B=D.pop()||0,j=D.pop()||0,$=D.pop()||0;if(j-$<=A){for(let fe=$;fe<=j;fe++){const ue=w[2*fe],pe=w[2*fe+1];ue>=o&&ue<=h&&pe>=u&&pe<=g&&P.push(b[fe])}continue}const G=$+j>>1,Z=w[2*G],se=w[2*G+1];Z>=o&&Z<=h&&se>=u&&se<=g&&P.push(b[G]),(B===0?o<=Z:u<=se)&&(D.push($),D.push(G-1),D.push(1-B)),(B===0?h>=Z:g>=se)&&(D.push(G+1),D.push(j),D.push(1-B))}return P}within(o,u,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:b,nodeSize:w}=this,A=[0,g.length-1,0],D=[],P=h*h;for(;A.length;){const B=A.pop()||0,j=A.pop()||0,$=A.pop()||0;if(j-$<=w){for(let fe=$;fe<=j;fe++)t7(b[2*fe],b[2*fe+1],o,u)<=P&&D.push(g[fe]);continue}const G=$+j>>1,Z=b[2*G],se=b[2*G+1];t7(Z,se,o,u)<=P&&D.push(g[G]),(B===0?o-h<=Z:u-h<=se)&&(A.push($),A.push(G-1),A.push(1-B)),(B===0?o+h>=Z:u+h>=se)&&(A.push(G+1),A.push(j),A.push(1-B))}return D}}function GL(c,o,u,h,g,b){if(g-h<=u)return;const w=h+g>>1;e7(c,o,w,h,g,b),GL(c,o,u,h,w-1,1-b),GL(c,o,u,w+1,g,1-b)}function e7(c,o,u,h,g,b){for(;g>h;){if(g-h>600){const P=g-h+1,B=u-h+1,j=Math.log(P),$=.5*Math.exp(2*j/3),G=.5*Math.sqrt(j*$*(P-$)/P)*(B-P/2<0?-1:1);e7(c,o,u,Math.max(h,Math.floor(u-B*$/P+G)),Math.min(g,Math.floor(u+(P-B)*$/P+G)),b)}const w=o[2*u+b];let A=h,D=g;for(yE(c,o,h,u),o[2*g+b]>w&&yE(c,o,h,g);A<D;){for(yE(c,o,A,D),A++,D--;o[2*A+b]<w;)A++;for(;o[2*D+b]>w;)D--}o[2*h+b]===w?yE(c,o,h,D):(D++,yE(c,o,D,g)),D<=u&&(h=D+1),u<=D&&(g=D-1)}}function yE(c,o,u,h){YL(c,u,h),YL(o,2*u,2*h),YL(o,2*u+1,2*h+1)}function YL(c,o,u){const h=c[o];c[o]=c[u],c[u]=h}function t7(c,o,u,h){const g=c-u,b=o-h;return g*g+b*b}a.$=C_,a.A=Bo,a.B=Ku,a.C=2,a.D=D1,a.E=df,a.F=eE,a.G=TH,a.H=Up,a.I=ws,a.J=U0,a.K=qn,a.L=jn,a.M=Dd,a.N=im,a.O=Cf,a.P=Vt,a.Q=kd,a.R=eo,a.S=J_,a.T=tL,a.U=Fc,a.V=HC,a.W=Wu,a.X=ua,a.Y=Ad,a.Z=wo,a._=rl,a.a=function(c){return Ja.API_CDN_URL_REGEX.test(c)},a.a$=It,a.a0=$p,a.a1=Zx,a.a2=Zg,a.a3=class extends HC{},a.a4=am,a.a5=zc,a.a6=ht,a.a7=function(c){const o=c.value;return o?$p(o)?kL(o,!0)?[]:[new HC(c.key,o,`invalid url "${o}"`)]:[new HC(c.key,o,`string expected, "${qn(o)}" found`)]:[]},a.a8=lm,a.a9=Ui,a.aA=ze,a.aB=K,a.aC=hi,a.aD=de,a.aE=fl,a.aF=st,a.aG=Ht,a.aH=function(c,o){const u={};for(let h=0;h<o.length;h++){const g=o[h];g in c&&(u[g]=c[g])}return u},a.aI=et,a.aJ=dt,a.aK=class{constructor(c){this.entries={},this.scheduler=c}request(c,o,u,h){const g=this.entries[c]=this.entries[c]||{callbacks:[]};if(g.result){const[b,w]=g.result;return this.scheduler?this.scheduler.add(()=>{h(b,w)},o):h(b,w),()=>{}}return g.callbacks.push(h),g.cancel||(g.cancel=u((b,w)=>{g.result=[b,w];for(const A of g.callbacks)this.scheduler?this.scheduler.add(()=>{A(b,w)},o):A(b,w);setTimeout(()=>delete this.entries[c],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(b=>b!==h),g.callbacks.length||(g.cancel(),delete this.entries[c]))}}},a.aL=function(c,o,u){const h=JSON.stringify(c.request);return c.data&&(this.deduped.entries[h]={result:[null,c.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom},g=>{const b=gd(c.request,(w,A,D)=>{w?g(w):A&&g(null,{rawData:A,vectorTile:u?void 0:new Mr(new MC(A)),responseHeaders:new Map(D.entries())})});return()=>{b.cancel(),g()}},o)},a.aM=function(c){return c?{cacheControl:c.get("Cache-Control"),expires:c.get("Expires")}:{cacheControl:void 0,expires:void 0}},a.aN=md,a.aO=function(c){ou++,ou>x_&&(c.getActor().send("enforceCacheSizeLimit",m0),ou=0)},a.aP=function(c){return c<=1?1:Math.pow(2,Math.floor(Math.log2(c)))},a.aQ=Ko,a.aR=rG,a.aS=uG,a.aT=Re,a.aU=nG,a.aV=function(c,o){const u=document.createElement("video");u.muted=!0,u.onloadstart=function(){o(null,u)};for(let h=0;h<c.length;h++){const g=document.createElement("source");w_(c[h])||(u.crossOrigin="Anonymous"),g.src=c[h],u.appendChild(g)}return{cancel:()=>{}}},a.aW=XT,a.aX=Cb,a.aY=hn,a.aZ=rE,a.a_=wt,a.aa=Xt,a.ab=class{constructor(c){this.specification=c}possiblyEvaluate(c,o){return zi(c.expression.evaluate(o))}interpolate(c,o,u){return{x:Vn(c.x,o.x,u),y:Vn(c.y,o.y,u),z:Vn(c.z,o.z,u),azimuthal:Vn(c.azimuthal,o.azimuthal,u),polar:Vn(c.polar,o.polar,u)}}},a.ac=Jr,a.ad=us,a.ae=tn,a.af=Ct,a.ag=Be,a.ah=ot,a.ai=Cs,a.aj=Qd,a.ak=Vn,a.al=Jt,a.am=b0,a.an=Ar,a.ao=Qr,a.ap=class{constructor(c){this.specification=c}possiblyEvaluate(c,o){return(function([u,h]){const g=zi([1,u,h]);return{x:g.x,y:g.y,z:g.z}})(c.expression.evaluate(o))}interpolate(c,o,u){return{x:Vn(c.x,o.x,u),y:Vn(c.y,o.y,u),z:Vn(c.z,o.z,u)}}},a.aq=function(c,o,u=0,h=!0){const g=new Vt(u,u),b=c.sub(g),w=o.add(g),A=[b,new Vt(w.x,b.y),w,new Vt(b.x,w.y)];return h&&A.push(b.clone()),A},a.ar=function(c,o){const u=[];for(let h=0;h<c.length;h++){const g=_t(h-1,-1,c.length-1),b=_t(h+1,-1,c.length-1),w=c[h],A=c[b],D=c[g].sub(w).unit(),P=A.sub(w).unit(),B=P.angleWithSep(D.x,D.y),j=D.add(P).unit().mult(-1*o/Math.sin(B/2));u.push(w.add(j))}return u},a.as=UH,a.at=Xl,a.au=function(c,o,u=0){return Ee(((o.x-u)*c.scale-c.x)*Jt,(o.y*c.scale-c.y)*Jt,pt(o.z,o.y))},a.av=sr,a.aw=xe,a.ax=yi,a.ay=J9,a.az=function(c){let o=1/0,u=1/0,h=-1/0,g=-1/0;for(const b of c)o=Math.min(o,b.x),u=Math.min(u,b.y),h=Math.max(h,b.x),g=Math.max(g,b.y);return{min:new Vt(o,u),max:new Vt(h,g)}},a.b=function(c){return Ja.API_FONTS_REGEX.test(c)},a.b$=ne,a.b0=Xa,a.b1=Uc,a.b2=Gt,a.b3=ov,a.b4=UC,a.b5=function(){Ol.isLoading()||Ol.isLoaded()||Th()!=="deferred"||K_()},a.b6=ev,a.b7=Qn,a.b8=Ob,a.b9=ki,a.bA=k,a.bB=te,a.bC=F,a.bD=function(c,o){const{x:u,y:h}=c.point,g=g1(u,h,c.worldSize/c._pixelsPerMercatorPixel,0,0);return K(g,g,Oi(Ff(o)))},a.bE=S,a.bF=En,a.bG=sn,a.bH=jt,a.bI=ct,a.bJ=Ye,a.bK=F1,a.bL=sc,a.bM=_L,a.bN=function(c,o,u,h,g){const b=5*o+2;c.float32[b+0]=u,c.float32[b+1]=h,c.float32[b+2]=g},a.bO=U1,a.bP=Ri,a.bQ=zu,a.bR=is,a.bS=Ip,a.bT=_t,a.bU=function(c,o,u,h){var g=new _(4);return g[0]=c,g[1]=o,g[2]=u,g[3]=h,g},a.bV=class{isDataAvailableAtPoint(c){const o=this._source();if(this.isUsingMockSource()||!o||c.y<0||c.y>1)return!1;const u=o.getSource().maxzoom,h=1<<u,g=Math.floor(c.x),b=Math.floor((c.x-g)*h),w=Math.floor(c.y*h),A=this.findDEMTileFor(new Ko(u,g,u,b,w));return!(!A||!A.dem)}getAtPointOrZero(c,o=0){return this.getAtPoint(c,o)||0}getAtPoint(c,o,u=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const h=this._source();if(!h||c.y<0||c.y>1)return o;const g=h.getSource().maxzoom,b=1<<g,w=Math.floor(c.x),A=c.x-w,D=new Ko(g,w,g,Math.floor(A*b),Math.floor(c.y*b)),P=this.findDEMTileFor(D);if(!P||!P.dem)return o;const B=P.dem,j=1<<P.tileID.canonical.z,$=(A*j-P.tileID.canonical.x)*B.dim,G=(c.y*j-P.tileID.canonical.y)*B.dim,Z=Math.floor($),se=Math.floor(G);return(u?this.exaggeration():1)*Vn(Vn(B.get(Z,se),B.get(Z,se+1),G-se),Vn(B.get(Z+1,se),B.get(Z+1,se+1),G-se),$-Z)}static getAtTileOffset(c,o,u,h){const g=1<<c.canonical.z;return h?h.pointElevation(o):u?u.getAtPointOrZero(new tn(c.wrap+(c.canonical.x+o.x/Jt)/g,(c.canonical.y+o.y/Jt)/g)):0}static getAtTileOffsetFunc(c,o,u,h){return(g,b,w)=>{const A=this.getAtTileOffset(c,g,b,w),D=h.upVector(c.canonical,g.x,g.y);return Pe(D,D,A*h.upVectorScale(c.canonical,o,u).metersToTile),D}}getForTilePoints(c,o,u,h){if(this.isUsingMockSource())return!1;const g=$1.create(this,c,h);return!!g&&(o.forEach(b=>{b[2]=this.exaggeration()*g.getElevationAt(b[0],b[1],u)}),!0)}getMinMaxForTile(c){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(c);if(!o||!o.dem)return null;const u=o.dem.tree,h=o.tileID,g=1<<c.canonical.z-h.canonical.z;let b=c.canonical.x/g-h.canonical.x,w=c.canonical.y/g-h.canonical.y,A=0;for(let D=0;D<c.canonical.z-h.canonical.z&&!u.leaves[A];D++){b*=2,w*=2;const P=2*Math.floor(w)+Math.floor(b);A=u.childOffsets[A]+P,b%=1,w%=1}return{min:this.exaggeration()*u.minimums[A],max:this.exaggeration()*u.maximums[A]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(c,o,u){throw new Error("Pure virtual method called.")}pointCoordinate(c){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(c){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const c=this.visibleDemTiles;if(c.length===0)return null;let o=!1,u=Number.MAX_VALUE,h=Number.MIN_VALUE;for(const g of c){const b=this.getMinMaxForTile(g.tileID);b&&(u=Math.min(u,b.min),h=Math.max(h,b.max),o=!0)}return o?{min:u,max:h}:null}},a.bW=_C,a.bX=$i,a.bY=Qo,a.bZ=_b,a.b_=cG,a.ba=cL,a.bb=Lh,a.bc=Un,a.bd=Pf,a.be=gm,a.bf=bT,a.bg=Ii,a.bh=ac,a.bi=IL,a.bj=function(c,o){const u=Qd(o.zoom);if(u===0)return Ff(c);const h=fv(c),g=wT(h),b=st(h.getWest())*o.worldSize,w=st(h.getEast())*o.worldSize,A=dt(h.getNorth())*o.worldSize,D=dt(h.getSouth())*o.worldSize,P=[b,A,0],B=[w,A,0],j=[b,D,0],$=[w,D,0],G=V([],o.globeMatrix);return Ct(P,P,G),Ct(B,B,G),Ct(j,j,G),Ct($,$,G),g[0]=Ih(g[0],j,u),g[1]=Ih(g[1],$,u),g[2]=Ih(g[2],B,u),g[3]=Ih(g[3],P,u),Gr.fromPoints(g)},a.bk=rb,a.bl=V,a.bm=nb,a.bn=Ih,a.bo=Qu,a.bp=kk,a.bq=X,a.br=J,a.bs=QC,a.bt=MC,a.bu=gd,a.bv=function(c,o){const u=[];for(const h in c)h in o||u.push(h);return u},a.bw=lt,a.bx=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.by=Sc,a.bz=U,a.c=as,a.c$=function(c,o,u){let h=0;for(let g=0;g<2;++g)c[g]>0&&(h+=(c[g]-0)*(c[g]-0)),o[g]<0&&(h+=(0-o[g])*(0-o[g]));return h},a.c0=Te,a.c1=mL,a.c2=PH,a.c3=SL,a.c4=HL,a.c5=Pe,a.c6=Pr,a.c7=Tn,a.c8=function(c,o,u){u*=.5;var h=o[0],g=o[1],b=o[2],w=o[3],A=Math.sin(u),D=Math.cos(u);return c[0]=h*D+g*A,c[1]=g*D-h*A,c[2]=b*D+w*A,c[3]=w*D-b*A,c},a.c9=ur,a.cA=De,a.cB=co,a.cC=N9,a.cD=qc,a.cE=m1,a.cF=function(c,o,u,h,g,b,w,A,D){if(D.name==="globe")return m1(c,o,new qc(u,h,g),!1);const P=rE({z:u,x:h,y:g},D);return new Gr([(b+P.x/P.scale)*o,o*(P.y/P.scale),w],[(b+P.x2/P.scale)*o,o*(P.y2/P.scale),A])},a.cG=function(c,o,u){return c[0]=Math.min(o[0],u[0]),c[1]=Math.min(o[1],u[1]),c[2]=Math.min(o[2],u[2]),c[3]=Math.min(o[3],u[3]),c},a.cH=function(c,o,u){return c[0]=Math.max(o[0],u[0]),c[1]=Math.max(o[1],u[1]),c[2]=Math.max(o[2],u[2]),c[3]=Math.max(o[3],u[3]),c},a.cI=function(c){const o=Math.round((c+45+360)%360/90)%4;return me[o]},a.cJ=tt,a.cK=Tr,a.cL=6,a.cM=function(c){const o=k(new Float64Array(16));K(o,c.pixelMatrix,c.globeMatrix);const u=[0,Ce,0],h=[0,Ae,0];return Ct(u,u,o),Ct(h,h,o),[u[0]>0&&u[0]<=c.width&&u[1]>0&&u[1]<=c.height&&!cy(c,new Re(c.center.lat,90)),h[0]>0&&h[0]<=c.width&&h[1]>0&&h[1]<=c.height&&!cy(c,new Re(c.center.lat,-90))]},a.cN=function(c,o){const{scale:u}=c.tileTransform,h=u*Jt/(c.tileSize*Math.pow(2,o.zoom-c.tileID.overscaledZ+c.tileID.canonical.z));return(function(g,b,w){var A=b[1],D=b[2],P=b[3],B=w[0],j=w[1];return g[0]=b[0]*B,g[1]=A*B,g[2]=D*j,g[3]=P*j,g})(new Float32Array(4),o.inverseAdjustmentMatrix,[h,h])},a.cO=SC,a.cP=ye,a.cQ=F9,a.cR=function(c){const o=F9(c,!0);return S([],[o[0],o[1],o[4],o[5]])},a.cS=ie,a.cT=Ji,a.cU=Q,a.cV=function(c){const{x:o,y:u}=c.point,{lng:h,lat:g}=c._center;return g1(o,u,c.worldSize,h,g)},a.cW=je,a.cX=ut,a.cY=wm,a.cZ=ic,a.c_=5,a.ca=ji,a.cb=function(c,o){return c[0]=-o[0],c[1]=-o[1],c[2]=-o[2],c[3]=o[3],c},a.cc=ge,a.cd=function(c,o,u,h,g){var b=1/Math.tan(o/2);if(c[0]=b/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=b,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,g!=null&&g!==1/0){var w=1/(h-g);c[10]=(g+h)*w,c[14]=2*g*h*w}else c[10]=-1,c[14]=-2*h;return c},a.ce=function(c,o,u,h,g,b,w){var A=1/(o-u),D=1/(h-g),P=1/(b-w);return c[0]=-2*A,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*D,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*P,c[11]=0,c[12]=(o+u)*A,c[13]=(g+h)*D,c[14]=(w+b)*P,c[15]=1,c},a.cf=ft,a.cg=function(c,o,u){c[4*o+0]=u[0],c[4*o+1]=u[1],c[4*o+2]=u[2],c[4*o+3]=u[3]},a.ch=ha,a.ci=bm,a.cj=Ua,a.ck=Dl,a.cl=Xd,a.cm=GH,a.cn=function(){var c=new _(4);return _!=Float32Array&&(c[1]=0,c[2]=0),c[0]=1,c[3]=1,c},a.co=function(c,o,u){var h=o[0],g=o[1],b=o[2],w=o[3],A=Math.sin(u),D=Math.cos(u);return c[0]=h*D+b*A,c[1]=g*D+w*A,c[2]=h*-A+b*D,c[3]=g*-A+w*D,c},a.cp=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]&&c[3]===o[3]},a.cq=or,a.cr=function(c){var o=c[0],u=c[1],h=c[2],g=c[3];return Math.sqrt(o*o+u*u+h*h+g*g)},a.cs=Yo,a.ct=gn,a.cu=p1,a.cv=3,a.cw=2,a.cx=7,a.cy=6,a.cz=mt,a.d=function(c){return Ja.API_TILEJSON_REGEX.test(c)},a.d$=class{constructor(c,o,u,h){this.context=c,this.format=h,this.size=u,this.texture=c.gl.createTexture();const[g,b,w]=this.size,{gl:A}=c;A.bindTexture(A.TEXTURE_3D,this.texture),c.pixelStoreUnpackFlipY.set(!1),c.pixelStoreUnpack.set(1),c.pixelStoreUnpackPremultiplyAlpha.set(!1),"data"in o&&o.data&&A.texImage3D(A.TEXTURE_3D,0,this.format,g,b,w,0,Jk(this.format),eL(this.format),o.data)}bind(c,o){const{context:u}=this,{gl:h}=u;h.bindTexture(h.TEXTURE_3D,this.texture),c!==this.minFilter&&(h.texParameteri(h.TEXTURE_3D,h.TEXTURE_MAG_FILTER,c),h.texParameteri(h.TEXTURE_3D,h.TEXTURE_MIN_FILTER,c),this.minFilter=c),o!==this.wrapS&&(h.texParameteri(h.TEXTURE_3D,h.TEXTURE_WRAP_S,o),h.texParameteri(h.TEXTURE_3D,h.TEXTURE_WRAP_T,o),this.wrapS=o)}destroy(){const{gl:c}=this.context;c.deleteTexture(this.texture),this.texture=null}},a.d0=function(c){return c*c*c*c*c},a.d1=nt,a.d2=45,a.d3=Da,a.d4=function(c,o,u){const h=Math.sqrt(c*c+o*o+u*u),g=h>0?Math.acos(u/h)*Pp:0;let b=c!==0||o!==0?Math.atan2(-o,-c)*Pp+90:0;return b<0&&(b+=360),[h,b,g]},a.d5=Ee,a.d6=zi,a.d7=qt,a.d8=at,a.d9=Gr,a.dA=function(c){return c({pluginStatus:Os,pluginURL:If}),Z_.on("pluginStateChange",c),c},a.dB=ll,a.dC=class extends mu{constructor(c){super(c),this.current=_T}set(c,o,u){if(this.fetchUniformLocation(c,o)){for(let h=0;h<9;h++)if(u[h]!==this.current[h]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},a.dD=we,a.dE=function(c,o,u){const h=Qd(u.zoom),g=c.style.map._antialias,b=c.terrain&&c.terrain.exaggeration()>0;return h===0&&!g&&!b},a.dF=function(c){const o=c.pixelsPerMeter,u=o/ft(1,c.center.lat),h=k(new Float64Array(16));return J(h,h,[c.point.x,c.point.y,0]),ie(h,h,[u,u,o]),Float32Array.from(h)},a.dG=fv,a.dH=function(c){const o=80.051129;c=ze(c,-80.051129,o)/o*90;const u=Math.pow(Math.abs(Math.sin(Ar(c))),3);return Math.round(u*(Me.length-1))},a.dI=function(c,o,u,h){const g=o.getNorth(),b=o.getSouth(),w=o.getWest(),A=o.getEast(),D=1<<c.z,P=A-w,B=g-b,j=P/_e,$=-B/Me[u],G=[0,j,0,$,0,0,g,w,0];if(c.z>0){const Z=180/h;z(G,G,[Z/P+1,0,0,0,Z/B+1,0,-.5*Z/j,.5*Z/$,1])}return G[2]=D,G[5]=c.x,G[8]=c.y,G},a.dJ=Ff,a.dK=function(c,o,u){const h=k(new Float64Array(16)),g=(o/(1<<c)-.5)*Math.PI*2;return W(h,u.globeMatrix,g),Float32Array.from(h)},a.dL=QO,a.dM=eb,a.dN=function(c,o){return[Math.pow(c[0],2.2)*o,Math.pow(c[1],2.2)*o,Math.pow(c[2],2.2)*o]},a.dO=E,a.dP=function(c,o){var u=Math.sin(o),h=Math.cos(o);return c[0]=h,c[1]=u,c[2]=0,c[3]=-u,c[4]=h,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},a.dQ=Yt,a.dR=ab,a.dS=wi,a.dT=la,a.dU=PL,a.dV=function(c,o){const u=[0,0,0];return Ct(u,u,rb(Ff(o.canonical))),Ct(u,u,c),u},a.dW=c=>({u_matrix:new Xd(c),u_texsize:new Dl(c),u_pixels_to_tile_units:new l(c),u_device_pixel_ratio:new Ua(c),u_width_scale:new Ua(c),u_floor_width_scale:new Ua(c),u_image:new ha(c),u_units_to_pixels:new Dl(c),u_tile_units_to_pixels:new Ua(c),u_alpha_discard_threshold:new Ua(c),u_trim_offset:new Dl(c),u_trim_fade_range:new Dl(c),u_trim_gradient_mix_range:new Dl(c),u_trim_color:new Da(c),u_zbias_factor:new Ua(c),u_tile_to_meter:new Ua(c),u_ground_shadow_factor:new bm(c),u_pattern_transition:new Ua(c)}),a.dX=c=>({u_matrix:new Xd(c),u_pixels_to_tile_units:new l(c),u_device_pixel_ratio:new Ua(c),u_width_scale:new Ua(c),u_floor_width_scale:new Ua(c),u_units_to_pixels:new Dl(c),u_dash_image:new ha(c),u_gradient_image:new ha(c),u_image_height:new Ua(c),u_texsize:new Dl(c),u_tile_units_to_pixels:new Ua(c),u_alpha_discard_threshold:new Ua(c),u_trim_offset:new Dl(c),u_trim_fade_range:new Dl(c),u_trim_gradient_mix_range:new Dl(c),u_trim_color:new Da(c),u_zbias_factor:new Ua(c),u_tile_to_meter:new Ua(c),u_ground_shadow_factor:new bm(c)}),a.dY=c=>({u_camera_to_center_distance:new Ua(c),u_extrude_scale:new l(c),u_device_pixel_ratio:new Ua(c),u_matrix:new Xd(c),u_inv_rot_matrix:new Xd(c),u_merc_center:new Dl(c),u_tile_id:new bm(c),u_zoom_transition:new Ua(c),u_up_dir:new bm(c),u_emissive_strength:new Ua(c)}),a.dZ=iy,a.d_=R_e,a.da=yt,a.db=function(c){return[Math.pow(c[0],1/2.2),Math.pow(c[1],1/2.2),Math.pow(c[2],1/2.2)]},a.dc=z9,a.dd=sL,a.de=U9,a.df=kL,a.dg=function(c,o){return c.readFields(Ive,{icons:[]},o)},a.dh=vC,a.di=N1,a.dj=bL,a.dk=ff,a.dl=F0,a.dm=Ec,a.dn=Ac,a.dp=Zn,a.dq=function(c){const o=c.indexOf(cm);return o>=0?c.slice(0,o):c},a.dr=function(c){return c.indexOf(cm)>=0},a.ds=function(c){const o=c.lastIndexOf(cm);return o>=0?c.slice(o+1):""},a.dt=function(c){const o=[],u=c.id;return u===void 0&&o.push({message:`layers.${u}: missing required property "id"`}),c.render===void 0&&o.push({message:`layers.${u}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&o.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),o},a.du=function(c,o,u,h){return c.type==="custom"?new Eve(c,o):new Dve[c.type](c,o,u,h)},a.dv=Rn,a.dw=function(c){const o=c.indexOf(cm);return o>=0?c.slice(o+1):""},a.dx=class extends Ob{constructor(c,o){super(c._vectorTileFeature,c._z,c._x,c._y,c.id),c.state&&(this.state=Object.assign({},c.state)),this.target=o.target,this.namespace=o.namespace,o.properties&&(this.properties=o.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=c.source,this.sourceLayer=c.sourceLayer,this.layer=c.layer)}toJSON(){const c=super.toJSON();return c.target=this.target,c.namespace=this.namespace,c}},a.dy=Z_,a.dz=Ns,a.e=Ja,a.e$=Ne,a.e0=WO,a.e1=(c,o,u,h,g,b)=>{const w=c.transform,A=w.projection.name==="globe";let D;if(b.paint.get("circle-pitch-alignment")==="map")if(A){const B=ab(w.zoom,o.canonical)*w._pixelsPerMercatorPixel;D=Float32Array.from([B,0,0,B])}else D=w.calculatePixelsToTileUnitsMatrix(u);else D=new Float32Array([w.pixelsToGLUnits[0],0,0,w.pixelsToGLUnits[1]]);const P={u_camera_to_center_distance:c.transform.getCameraToCenterDistance(w.projection),u_matrix:c.translatePosMatrix(o.projMatrix,u,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Sl.devicePixelRatio,u_extrude_scale:D,u_inv_rot_matrix:Fk,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:b.paint.get("circle-emissive-strength")};if(A){P.u_inv_rot_matrix=h,P.u_merc_center=g,P.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],P.u_zoom_transition=Qd(w.zoom);const B=g[0]*Jt,j=g[1]*Jt;P.u_up_dir=w.projection.upVector(new qc(0,0,0),B,j)}return P},a.e2=rH,a.e3=nl,a.e4=(c,o,u,h,g,b,w,A,D,P)=>{const B=c.transform,j=B.pitch<15?eH(.07,.7,ze((14-B.zoom)/5,0,1)):.07,$=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:nH(c,o,u,h),u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:B.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:g,u_width_scale:b,u_floor_width_scale:w,u_image:0,u_tile_units_to_pixels:tH(o,B),u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:A,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_gradient_mix_range:[1,1],u_trim_color:u.paint.get("line-trim-color").toPremultipliedRenderColor($?null:u.lut).toArray01(),u_zbias_factor:j,u_tile_to_meter:qt(o.tileID.canonical,0),u_ground_shadow_factor:D,u_pattern_transition:P}},a.e5=(c,o,u,h,g,b,w,A,D,P)=>{const B=c.transform,j=B.calculatePixelsToTileUnitsMatrix(o),$=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none",G=B.pitch<15?eH(.07,.7,ze((14-B.zoom)/5,0,1)):.07;return{u_matrix:nH(c,o,u,h),u_pixels_to_tile_units:j,u_device_pixel_ratio:b,u_width_scale:w,u_floor_width_scale:A,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:iH(u)&&o.lineAtlasTexture?o.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:tH(o,c.transform),u_alpha_discard_threshold:0,u_trim_offset:D,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_gradient_mix_range:[1,1],u_trim_color:u.paint.get("line-trim-color").toPremultipliedRenderColor($?null:u.lut).toArray01(),u_zbias_factor:G,u_tile_to_meter:qt(o.tileID.canonical,0),u_ground_shadow_factor:P}},a.e6=Nt,a.e7=hv,a.e8=pt,a.e9=Sm,a.eA=function(c,o){var u=2*Math.acos(o[3]),h=Math.sin(u/2);return h>p?(c[0]=o[0]/h,c[1]=o[1]/h,c[2]=o[2]/h):(c[0]=1,c[1]=0,c[2]=0),u},a.eB=FL,a.eC=AC,a.eD=EC,a.eE=[1,1,1],a.eF=$1,a.eG=Er,a.eH=function(c,o,u,h){var g=o[0],b=o[1],w=o[2],A=o[3];return c[0]=g+h*(u[0]-g),c[1]=b+h*(u[1]-b),c[2]=w+h*(u[2]-w),c[3]=A+h*(u[3]-A),c},a.eI=k1,a.eJ=Wl,a.eK=Mh,a.eL=function(c,o,u,h,g,b,w,A,D,P,B,j,$,G,Z,se){var fe=new _(16);return fe[0]=c,fe[1]=o,fe[2]=u,fe[3]=h,fe[4]=g,fe[5]=b,fe[6]=w,fe[7]=A,fe[8]=D,fe[9]=P,fe[10]=B,fe[11]=j,fe[12]=$,fe[13]=G,fe[14]=Z,fe[15]=se,fe},a.eM=Ge,a.eN=Gd,a.eO=mm,a.eP=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Vt(1/0,1/0),max:new Vt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(c,o=!1){const u=x(new Vt(0,0),new Vt(Jt,Jt),c),h=[];if(o&&!xv(u,this._globalClipBounds))return h;for(const g of this._activeRegions){if(g.hiddenByOverlap||!xv(u,g))continue;const b=C(g.min,g.max,c);h.push({min:b.min,max:b.max,sourceId:this._sourceIds[g.priority],footprint:g.footprint,footprintTileId:g.tileId,order:g.order,clipMask:g.clipMask,clipScope:g.clipScope})}return h}setSources(c){this._setSources(c.map(o=>({getSourceId:()=>o.cache.id,getFootprints:()=>{const u=[];for(const h of o.cache.getVisibleCoordinates()){const g=o.cache.getTile(h).buckets[o.layer];g&&g.updateFootprints(h.toUnwrapped(),u)}return u},getOrder:()=>o.order,getClipMask:()=>o.clipMask,getClipScope:()=>o.clipScope})))}_addSource(c){const o=c.getFootprints();if(o.length===0)return;const u=c.getOrder(),h=c.getClipMask(),g=c.getClipScope();for(const b of o){if(!b.footprint)continue;const w=x(b.footprint.min,b.footprint.max,b.id);this._activeRegions.push({min:w.min,max:w.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:b.id,footprint:b.footprint,order:u,clipMask:h,clipScope:g})}this._sourceIds.push(c.getSourceId())}_computeReplacement(){this._activeRegions.sort((o,u)=>o.priority-u.priority||vb(o.min,u.min)||vb(o.max,u.max)||o.order-u.order||o.clipMask-u.clipMask||(function(h,g){const b=(w,A)=>w+A;return h.length-g.length||h.reduce(b,"").localeCompare(g.reduce(b,""))})(o.clipScope,u.clipScope));let c=this._activeRegions.length!==this._prevRegions.length;if(!c){let o=0;for(;!c&&o!==this._activeRegions.length;){const u=this._activeRegions[o],h=this._prevRegions[o];c=u.priority!==h.priority||!gC(u,h)||u.order!==h.order||u.clipMask!==h.clipMask||!Sc(u.clipScope,h.clipScope),this._activeRegions[o].hiddenByOverlap=h.hiddenByOverlap,++o}}if(c){++this._updateTime;for(const u of this._activeRegions)u.order!==bv&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,u.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,u.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,u.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,u.max.y));const o=u=>{const h=this._activeRegions;if(u>=h.length)return u;const g=h[u].priority;for(;u<h.length&&h[u].priority===g;)++u;return u};if(this._sourceIds.length>1){let u=0,h=o(u);for(;u!==h;){let g=u;const b=u;for(;g!==h;){const w=this._activeRegions[g];w.hiddenByOverlap=!1;for(let A=0;A<b;A++){const D=this._activeRegions[A];if(!D.hiddenByOverlap&&w.order===bv&&xv(w,D)&&(w.hiddenByOverlap=Y(w.footprint,w.tileId,D.footprint,D.tileId),w.hiddenByOverlap))break}++g}u=h,h=o(u)}}}}_setSources(c){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let o=c.length-1;o>=0;o--)this._addSource(c[o]);this._computeReplacement()}},a.eQ=bv,a.eR=class{constructor(c){this._createGrid(c),this._createPoles(c)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const c of this._poleSegments)c.destroy();for(const c of this._gridSegments)c.withSkirts.destroy(),c.withoutSkirts.destroy()}_fillGridMeshWithLods(c,o){const u=new Pf,h=new Xa,g=[],b=c+1+2,w=o[0]+1,A=o[0]+1+(1+o.length),D=(P,B,j)=>{let $=P===b-1?P-2:P===0?P:P-1;return $+=j?24575:0,[$,B]};for(let P=0;P<b;++P)u.emplaceBack(...D(P,0,!0));for(let P=0;P<w;++P)for(let B=0;B<b;++B)u.emplaceBack(...D(B,P,(B===0||B===b-1)&&!0));for(let P=0;P<o.length;++P){const B=o[P];for(let j=0;j<b;++j)u.emplaceBack(...D(j,B,!0))}for(let P=0;P<o.length;++P){const B=h.length,j=o[P]+1+2,$=new Xa;for(let se=0;se<j-1;se++){const fe=se===j-2,ue=fe?b*(A-o.length+P-se):b;for(let pe=0;pe<b-1;pe++){const ve=se*b+pe;se===0||fe||pe===0||pe===b-2?($.emplaceBack(ve+1,ve,ve+ue),$.emplaceBack(ve+ue,ve+ue+1,ve+1)):(h.emplaceBack(ve+1,ve,ve+ue),h.emplaceBack(ve+ue,ve+ue+1,ve+1))}}const G=Ii.simpleSegment(0,B,u.length,h.length-B);for(let se=0;se<$.uint16.length;se+=3)h.emplaceBack($.uint16[se],$.uint16[se+1],$.uint16[se+2]);const Z=Ii.simpleSegment(0,B,u.length,h.length-B);g.push({withoutSkirts:G,withSkirts:Z})}return{vertices:u,indices:h,segments:g}}_createGrid(c){const o=this._fillGridMeshWithLods(_e,Me);this._gridSegments=o.segments,this._gridBuffer=c.createVertexBuffer(o.vertices,bT.members),this._gridIndexBuffer=c.createIndexBuffer(o.indices,!0)}_createPoles(c){const o=new Xa;for(let w=0;w<=_e;w++)o.emplaceBack(0,w+1,w+2);this._poleIndexBuffer=c.createIndexBuffer(o,!0);const u=new Ch,h=new Ch,g=new Ch,b=new Ch;this._poleSegments=[];for(let w=0,A=0;w<5;w++){const D=360/(1<<w);u.emplaceBack(0,-de,0,.5,0),h.emplaceBack(0,-de,0,.5,1),g.emplaceBack(0,-de,0,.5,.5),b.emplaceBack(0,-de,0,.5,.5);for(let P=0;P<=_e;P++){let B=P/_e,j=0;const $=Vn(0,D,B),[G,Z,se]=We(zk,YO,$,de);u.emplaceBack(G,Z,se,B,j),h.emplaceBack(G,Z,se,B,1-j);const fe=Ar($);B=.5+.5*Math.sin(fe),j=.5+.5*Math.cos(fe),g.emplaceBack(G,Z,se,B,j),b.emplaceBack(G,Z,se,B,1-j)}this._poleSegments.push(Ii.simpleSegment(A,0,66,64)),A+=66}this._poleNorthVertexBuffer=c.createVertexBuffer(u,Tm,!1),this._poleSouthVertexBuffer=c.createVertexBuffer(h,Tm,!1),this._texturedPoleNorthVertexBuffer=c.createVertexBuffer(g,Tm,!1),this._texturedPoleSouthVertexBuffer=c.createVertexBuffer(b,Tm,!1)}getGridBuffers(c,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[c].withSkirts:this._gridSegments[c].withoutSkirts]}getPoleBuffers(c,o){return[o?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,o?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[c]]}},a.eS=VT,a.eT=Le,a.eU=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},a.eV=Qe,a.eW=Dt,a.eX=function(c,o,u){return c[0]=o[0]/u[0],c[1]=o[1]/u[1],c[2]=o[2]/u[2],c},a.eY=Nr,a.eZ=$e,a.e_=Sn,a.ea=Nf,a.eb=l9,a.ec=Sr,a.ed=450,a.ee=7,a.ef=gt,a.eg=function(c,o){if(c===o){var u=o[1],h=o[2],g=o[3],b=o[6],w=o[7],A=o[11];c[1]=o[4],c[2]=o[8],c[3]=o[12],c[4]=u,c[6]=o[9],c[7]=o[13],c[8]=h,c[9]=b,c[11]=o[14],c[12]=g,c[13]=w,c[14]=A}else c[0]=o[0],c[1]=o[4],c[2]=o[8],c[3]=o[12],c[4]=o[1],c[5]=o[5],c[6]=o[9],c[7]=o[13],c[8]=o[2],c[9]=o[6],c[10]=o[10],c[11]=o[14],c[12]=o[3],c[13]=o[7],c[14]=o[11],c[15]=o[15];return c},a.eh=Tve,a.ei=gr,a.ej=G0,a.ek=256,a.el=Oi,a.em=Yl,a.en=W,a.eo=function(c,o){return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[4],c[4]=o[5],c[5]=o[6],c[6]=o[8],c[7]=o[9],c[8]=o[10],c},a.ep=Ch,a.eq=M0,a.er=pm,a.es=function(c,o,u,h,g){return ze((c-o)/(u-o)*(g-h)+h,h,g)},a.et=Vr,a.eu=function(c,o){var u=o[0],h=o[1],g=o[2],b=o[3],w=o[4],A=o[5],D=o[6],P=o[7],B=o[8],j=B*w-A*P,$=-B*b+A*D,G=P*b-w*D,Z=u*j+h*$+g*G;return Z?(c[0]=j*(Z=1/Z),c[1]=(-B*h+g*P)*Z,c[2]=(A*h-g*w)*Z,c[3]=$*Z,c[4]=(B*u-g*D)*Z,c[5]=(-A*u+g*b)*Z,c[6]=G*Z,c[7]=(-P*u+h*D)*Z,c[8]=(w*u-h*b)*Z,c):null},a.ev=2,a.ew=Ut,a.ex=$t,a.ey=le,a.ez=function(c,o){var u=new _(3);le(u,o);var h=1/u[0],g=1/u[1],b=1/u[2],w=o[0]*h,A=o[1]*g,D=o[2]*b,P=o[4]*h,B=o[5]*g,j=o[6]*b,$=o[8]*h,G=o[9]*g,Z=o[10]*b,se=w+B+Z,fe=0;return se>0?(fe=2*Math.sqrt(se+1),c[3]=.25*fe,c[0]=(j-G)/fe,c[1]=($-D)/fe,c[2]=(A-P)/fe):w>B&&w>Z?(fe=2*Math.sqrt(1+w-B-Z),c[3]=(j-G)/fe,c[0]=.25*fe,c[1]=(A+P)/fe,c[2]=($+D)/fe):B>Z?(fe=2*Math.sqrt(1+B-w-Z),c[3]=($-D)/fe,c[0]=(A+P)/fe,c[1]=.25*fe,c[2]=(j+G)/fe):(fe=2*Math.sqrt(1+Z-w-B),c[3]=(A-P)/fe,c[0]=($+D)/fe,c[1]=(j+G)/fe,c[2]=.25*fe),c},a.f=function(c){return btoa(encodeURIComponent(c).replace(/%([0-9A-F]{2})/g,(o,u)=>String.fromCharCode(+("0x"+u))))},a.f0=function([c,o,u]){const h=Math.hypot(c,o,u),g=Math.atan2(c,u),b=.5*Math.PI-Math.acos(-o/h);return new Re(ut(g),ut(b))},a.f1=pi,a.f2=nL,a.f3=function(c){const o=c.navigator?c.navigator.userAgent:null;return!!(function(u){if(Or==null){const h=u.navigator?u.navigator.userAgent:null;Or=!!u.safari||!(!h||!(/\b(iPad|iPhone|iPod)\b/.test(h)||h.match("Safari")&&!h.match("Chrome")))}return Or})(c)&&!(!o||!(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/)))},a.f4=function(c,o){m0=c,x_=o},a.f5=cy,a.f6=y1,a.f7=function(c){const o=[0,0,0],u=k(new Float64Array(16));return K(u,c.pixelMatrix,c.globeMatrix),Ct(o,o,u),new Vt(o[0],o[1])},a.f8=function(){const c=GT;c&&(c.isPreloaded()&&c.numActive()===1?(c.release(Yk),GT=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.f9=function(){vC().acquire(Yk)},a.fA=KC,a.fB=yr,a.fC=function(c){let o=0;if(new Uint32Array(c,0,1)[0]!==I9){const u=new Uint32Array(c,0,7),[,,h,g,b,w]=u;o=u.byteLength+g+b+w+b,(h!==c.byteLength||o>=c.byteLength)&&Hn("Invalid b3dm header information.")}return L9(c,o)},a.fD=function(c,o){const u=sL(c);for(const h of u){for(const g of h.meshes)t_e(g);h.lights&&(h.lightMeshIndex=h.meshes.length,h.meshes.push(n_e(h.lights,o)))}return u},a.fE=GC,a.fF=_a,a.fG=b9,a.fH=Ol,a.fI=Vs,a.fJ=function(c){xo(),No!=null&&No.then(o=>{o.keys().then(u=>{for(let h=0;h<u.length-c;h++)o.delete(u[h]).catch(g=>Hn(g.message))}).catch(u=>Hn(u.message))}).catch(o=>Hn(o.message))},a.fa=Th,a.fb=function(c,o,u=!1){if(Os===Vs.deferred||Os===Vs.loading||Os===Vs.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");If=Sl.resolveURL(c),Os=Vs.deferred,Df=o,N0(),u||K_()},a.fc=function(c){I1=Sl.resolveURL(c),P1||(P1=new D1(vC(),new df)),P1.broadcast("setMeshoptUrl",I1)},a.fd=S9,a.fe=function(c){Zk=Sl.resolveURL(c),P1||(P1=new D1(vC(),new df)),P1.broadcast("setDracoUrl",Zk)},a.ff=w9,a.fg=HT,a.fh=function(c){const o=au();if(!o)return;const u=o.delete(Wx);c&&u.then(()=>c()).catch(c)},a.fi=xb,a.fj=Kt,a.fk=Ph,a.fl=2,a.fm=ZG,a.fn=KG,a.fo=Z9,a.fp=wr,a.fq="hd_road_elevation",a.fr=Zo,a.fs=Mn,a.ft=Rh,a.fu=vL,a.fv=1,a.fw=function(c,o,u,h,g,b,w,A=1,D,P,B,j){c.createArrays(),c.tilePixelRatio=Jt/(512*c.overscaling),c.compareText={},c.iconsNeedLinear=!1;const $=c.layers[0].layout,G=c.layers[0]._unevaluatedLayout._values,Z={};Z.scaleFactor=A,Z.textSizeScaleRange=$.get("text-size-scale-range"),Z.iconSizeScaleRange=$.get("icon-size-scale-range");const[se,fe]=Z.textSizeScaleRange,[ue,pe]=Z.iconSizeScaleRange;Z.textScaleFactor=ze(Z.scaleFactor,se,fe),Z.iconScaleFactor=ze(Z.scaleFactor,ue,pe);const ve=G["text-size"],Se=G["icon-size"];if(c.textSizeData.kind==="composite"){const{minZoom:Ze,maxZoom:rt}=c.textSizeData;Z.compositeTextSizes=[ve.possiblyEvaluate(new Jr(Ze,{worldview:B}),b),ve.possiblyEvaluate(new Jr(rt,{worldview:B}),b)]}if(c.iconSizeData.kind==="composite"){const{minZoom:Ze,maxZoom:rt}=c.iconSizeData;Z.compositeIconSizes=[Se.possiblyEvaluate(new Jr(Ze,{worldview:B}),b,j),Se.possiblyEvaluate(new Jr(rt,{worldview:B}),b,j)]}Z.layoutTextSize=ve.possiblyEvaluate(new Jr(w+1,{worldview:B}),b),Z.layoutIconSize=Se.possiblyEvaluate(new Jr(w+1,{worldview:B}),b,j),Z.textMaxSize=ve.possiblyEvaluate(new Jr(18,{worldview:B}),b);const ke=$.get("symbol-placement"),Ie=$.get("text-rotation-alignment")==="map"&&ke!=="point",Ve=$.get("text-size");let qe=!1;const Ue=[];for(const Ze of c.features){const rt=$.get("text-font").evaluate(Ze,{},b).join(","),Et=Ve.evaluate(Ze,{},b)*Z.textScaleFactor,xt=Z.layoutTextSize.evaluate(Ze,{},b)*Z.textScaleFactor,Tt=Z.layoutIconSize.evaluate(Ze,{},b,j)*Z.iconScaleFactor,kt={horizontal:{},vertical:void 0},Pt=Ze.text;let Rt,vt=[0,0];if(Pt){const Lr=Pt.toString(),Ra=$.get("text-letter-spacing").evaluate(Ze,{},b)*Qo,$r=$.get("text-line-height").evaluate(Ze,{},b)*Qo,ui=l1(Lr)?Ra:0,Vi=$.get("text-anchor").evaluate(Ze,{},b),ta=$.get("text-variable-anchor");if(!ta){const fo=$.get("text-radial-offset").evaluate(Ze,{},b);if(fo)vt=PH(Vi,[fo*Qo,wL]);else{const Ao=$.get("text-offset").evaluate(Ze,{},b);vt=[Ao[0]*Qo,Ao[1]*Qo]}}let na=Ie?"center":$.get("text-justify").evaluate(Ze,{},b);const ka=ke==="point",fs=ka?$.get("text-max-width").evaluate(Ze,{},b)*Qo:1/0,Hs=fo=>{c.allowVerticalPlacement&&X_(Lr)&&(kt.vertical=pL(Pt,o,u,g,rt,fs,$r,Vi,fo,ui,vt,sc.vertical,!0,xt,Et,D))};if(!Ie&&ta){const fo=na==="auto"?ta.map(qo=>SL(qo)):[na];let Ao=!1;for(let qo=0;qo<fo.length;qo++){const fr=fo[qo];if(!kt.horizontal[fr])if(Ao)kt.horizontal[fr]=kt.horizontal[0];else{const ra=pL(Pt,o,u,g,rt,fs,$r,"center",fr,ui,vt,sc.horizontal,!1,xt,Et,D);ra&&(kt.horizontal[fr]=ra,Ao=ra.positionedLines.length===1)}}Hs("left")}else{if(na==="auto"&&(na=SL(Vi)),ka||$.get("text-writing-mode").indexOf("horizontal")>=0||!X_(Lr)){const fo=pL(Pt,o,u,g,rt,fs,$r,Vi,na,ui,vt,sc.horizontal,!1,xt,Et,D);fo&&(kt.horizontal[na]=fo)}Hs(ka?"left":na)}}let zt,Mt,Ft,Lt,fn,pn,nn=!1;const an=$.get("icon-text-fit").evaluate(Ze,{},b);if(Ze.icon&&Ze.icon.hasPrimary()){const Lr=nE(Ze.icon,c.iconSizeData,G["icon-size"],b,c.zoom,Ze,D,Z.iconScaleFactor,B,j);zt=Lr.iconPrimary,Ft=Lr.iconSecondary;const Ra=zt.toString();if(Mt=h.get(Ra),Mt&&(fn=$.get("icon-offset").evaluate(Ze,{},b),pn=$.get("icon-anchor").evaluate(Ze,{},b),Rt=IC(g.get(Ra),Ft?g.get(Ft.toString()):void 0,fn,pn),nn=Mt.sdf,c.sdfIcons===void 0?c.sdfIcons=Mt.sdf:c.sdfIcons!==Mt.sdf&&Hn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Mt.pixelRatio!==c.pixelRatio||$.get("icon-rotate").constantOr(1)!==0)&&(c.iconsNeedLinear=!0)),Ft){const $r=Ft.toString();Lt=h.get($r)}}qe=qe||!(!Ze.icon||!Ze.icon.hasSecondary());const kn=zC(kt.horizontal)||kt.vertical;c.iconsInText||(c.iconsInText=!!kn&&kn.iconsInText);const On=xt*Z.textScaleFactor/Qo,{defaultShapedIcon:cn,verticallyShapedIcon:Wn}=cve(c,Rt,$,Ze,b,kt,On,fn,an);an!=="none"&&Rt&&(gH(Rt)||yH(Rt))&&(LC(0,Mt,zt,Rt,cn,an,P,h,g),LC(0,Lt,Ft,Rt,cn,an,P,h,g),Wn&&(LC(0,Mt,zt,Rt,Wn,an,P,h,g),LC(0,Lt,Ft,Rt,Wn,an,P,h,g))),Rt=cn;const{iconBBox:vr,iconVerticalBBox:Zr,textBBox:pr,textVerticalBBox:di}=ave(c,Rt,Wn,$,Ze,b,Tt,fn,Z,g,pn,kt,xt,vt,j);Ue.push({feature:Ze,shapedTextOrientations:kt,shapedText:kn,shapedIcon:Rt,iconPrimary:zt,iconSecondary:Ft,iconOffset:fn,iconAnchor:pn,verticallyShapedIcon:Wn,layoutTextSize:xt,layoutIconSize:Tt,textOffset:vt,isSDFIcon:nn,iconTextFit:an,iconCollisionBounds:vr,iconVerticalCollisionBounds:Zr,textCollisionBounds:pr,textVerticalCollisionBounds:di})}return{featureData:Ue,sizes:Z,hasAnySecondaryIcon:qe,textAlongLine:Ie,symbolPlacement:ke}},a.fx=EH,a.fy=function(c,o,u,h,g,b,w,A,D,P){c.iconAtlasPositions=P.iconPositions;const{featureData:B,hasAnySecondaryIcon:j,sizes:$,textAlongLine:G,symbolPlacement:Z}=o;for(const se of B){const{shapedIcon:fe,verticallyShapedIcon:ue,feature:pe,shapedTextOrientations:ve,shapedText:Se,layoutTextSize:ke,textOffset:Ie,isSDFIcon:Ve,iconPrimary:qe,iconSecondary:Ue,iconTextFit:Ze,iconOffset:rt,iconCollisionBounds:Et,iconVerticalCollisionBounds:xt,textCollisionBounds:Tt}=se;zH(fe,P.iconPositions,qe,Ue),zH(ue,P.iconPositions,qe,Ue),uve(ve,P.iconPositions),lve(qe,Ue,P.iconPositions),(Se||fe)&&fve(c,pe,ve,fe,ue,D,$,ke,0,Ie,Ve,h,g,w,A,j,Ze,rt,G,Z,Et,xt,Tt)}u&&c.generateCollisionDebugBuffers(b,c.collisionBoxArray,$.textScaleFactor)},a.fz=Mr,a.g=function(c,o){return Ns(Object.assign(c,{method:"GET"}),o)},a.h=function(c){return c.indexOf("mapbox:")===0},a.i=function(c){return Ja.API_STYLE_REGEX.test(c)&&!as(c)},a.j=Tc,a.k=oh,a.l=function(c){return decodeURIComponent(atob(c).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join(""))},a.m=function(c,o){return Ns(Object.assign(c,{type:"json"}),o)},a.n=bg,a.o=Sl,a.p=function(c,o){return Ns(Object.assign(c,{method:"POST"}),o)},a.q=Vo,a.r=iu,a.s=function(c){try{const o=self[c];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}},a.t=function(){return Wk||(Wk=new xb("ImageRasterizer")),Wk},a.u=function(){return(function c(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,c)})()},a.v=function(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)},a.w=Hn,a.x=UL,a.y=Fp,a.z=uu}),s(["./shared"],function(a){function p(ut){const me=ut?ut.url.toString():void 0;return me?performance.getEntriesByName(me):[]}function _(ut){if(typeof ut=="number"||typeof ut=="boolean"||typeof ut=="string"||ut==null)return JSON.stringify(ut);if(Array.isArray(ut)){let we="[";for(const Le of ut)we+=`${_(Le)},`;return`${we}]`}let me="{";for(const we of Object.keys(ut).sort())me+=`${we}:${_(ut[we])},`;return`${me}}`}function S(ut){let me="";for(const we of a.bx)me+=`/${_(ut[we])}`;return me}function E(ut,me){return(function we(Le){return typeof Le=="string"&&Le===me||(Array.isArray(Le)?Le.some(we):!(!Le||typeof Le!="object")&&Object.values(Le).some(we))})(ut)}class I{constructor(me){this.keyCache={},this._layers={},this._layerConfigs={},me&&this.replace(me)}replace(me,we){this._layerConfigs={},this._layers={},this.update(me,[],we)}update(me,we,Le){this._options=Le;for(const ze of me)this._layerConfigs[ze.id]=ze,(this._layers[ze.id]=a.du(ze,this.scope,null,this._options)).compileFilter(Le),this.keyCache[ze.id]&&delete this.keyCache[ze.id];for(const ze of we)delete this.keyCache[ze],delete this._layerConfigs[ze],delete this._layers[ze];this.familiesBySource={};const Qe=(function(ze,ot){const _t={};for(let bt=0;bt<ze.length;bt++){const Gt=ze[bt];let Nt=ot&&ot[Gt.id];Nt||(Gt.type==="symbol"?Nt=Gt.id:(Nt=S(Gt),Gt.type==="line"&&Gt.paint&&E(Gt.paint["line-width"],"line-progress")&&(Nt+=`/${_(Gt.paint["line-width"])}`))),ot&&(ot[Gt.id]=Nt);let hn=_t[Nt];hn||(hn=_t[Nt]=[]),hn.push(Gt)}const lt=[];for(const bt in _t)lt.push(_t[bt]);return lt})(Object.values(this._layerConfigs),this.keyCache);for(const ze of Qe){const ot=ze.map(hn=>this._layers[hn.id]),_t=ot[0];if(_t.visibility==="none")continue;const lt=_t.source||"";let bt=this.familiesBySource[lt];bt||(bt=this.familiesBySource[lt]={});const Gt=_t.sourceLayer||"_geojsonTileLayer";let Nt=bt[Gt];Nt||(Nt=bt[Gt]=[]),Nt.push(ot)}}}const z=1*a.fl;class F{constructor(me){const we={},Le=[];for(const _t in me){const lt=me[_t],bt=we[_t]={};for(const Gt in lt.glyphs){const Nt=lt.glyphs[+Gt];if(!Nt||Nt.bitmap.width===0||Nt.bitmap.height===0)continue;const hn=Nt.metrics.localGlyph?z:1,Mn={x:0,y:0,w:Nt.bitmap.width+2*hn,h:Nt.bitmap.height+2*hn};Le.push(Mn),bt[Gt]=Mn}}const{w:Qe,h:ze}=a.G(Le),ot=new a.fk({width:Qe||1,height:ze||1});for(const _t in me){const lt=me[_t];for(const bt in lt.glyphs){const Gt=lt.glyphs[+bt];if(!Gt||Gt.bitmap.width===0||Gt.bitmap.height===0)continue;const Nt=we[_t][bt],hn=Gt.metrics.localGlyph?z:1;a.fk.copy(Gt.bitmap,ot,{x:0,y:0},{x:Nt.x+hn,y:Nt.y+hn},Gt.bitmap)}}this.image=ot,this.positions=we}}function U(ut,me,we){ut[me]?we&&(ut[me].center=we):ut[me]={floorIds:new Set,center:we||[0,0],floors:{}}}function k(ut,me,we,Le){for(const Qe of me)U(ut,Qe),ut[Qe].floors[we]=Le,ut[Qe].floorIds.add(we)}function V(ut){return{id:ut.properties.id.toString(),center:ut.properties.center.toString().split(";").map(Number)}}function K(ut){return{id:ut.properties.id.toString(),isDefault:!!ut.properties.is_default&&ut.properties.is_default,connections:ut.properties.connected_floor_ids?new Set(ut.properties.connected_floor_ids.toString().split(";")):new Set,conflicts:ut.properties.conflicted_floor_ids?new Set(ut.properties.conflicted_floor_ids.toString().split(";")):new Set,buildings:ut.properties.building_ids?new Set(ut.properties.building_ids.toString().split(";")):new Set,name:ut.properties.name.toString(),zIndex:ut.properties.z_index}}function J(ut,me){return me.every(we=>ut.properties&&ut.properties[we]!=null)}function ie(ut){return J(ut,["type","id","name"])&&ut.properties.type==="building"}function Q(ut){return J(ut,["type","id","name","z_index"])&&ut.properties.type==="floor"}a.fj(F,"GlyphAtlas");class W{constructor(me){this.tileID=new a.aQ(me.tileID.overscaledZ,me.tileID.wrap,me.tileID.canonical.z,me.tileID.canonical.x,me.tileID.canonical.y),this.tileZoom=me.tileZoom,this.uid=me.uid,this.zoom=me.zoom,this.lut=me.lut,this.canonical=me.tileID.canonical,this.pixelRatio=me.pixelRatio,this.tileSize=me.tileSize,this.source=me.source,this.scope=me.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=me.showCollisionBoxes,this.collectResourceTiming=!!me.request&&me.request.collectResourceTiming,this.promoteId=me.promoteId,this.isSymbolTile=me.isSymbolTile,this.tileTransform=a.aZ(me.tileID.canonical,me.projection),this.projection=me.projection,this.worldview=me.worldview,this.localizableLayerIds=me.localizableLayerIds,this.brightness=me.brightness,this.extraShadowCaster=!!me.extraShadowCaster,this.tessellationStep=me.tessellationStep,this.scaleFactor=me.scaleFactor,this.worldview=me.worldview,this.indoor=me.indoor}parse(me,we,Le,Qe,ze,ot){this.status="parsing",this.data=me,this.collisionBoxArray=new a.b3;const _t=new a.fm(Object.keys(me.layers).sort()),lt=new a.fn(this.tileID,this.promoteId);lt.bucketLayerIDs=[];const bt={},Gt=new a.fo(256,256),Nt={featureIndex:lt,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:Gt,availableImages:Le,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0,activeFloors:void 0};if(this.indoor){const Zn=this.indoor.indoorState.activeFloorsVisible,rr=(function(In,Hn,xi){const sa=(function(ki,Or){if(!ki)return a.w("No source layers defined in indoor specification"),Or;if(ki.size===0)return Or;const ji=ki.difference(Or);for(const si of ji)a.w(`Missing source layer required in indoor specification: ${si}`);return Or.intersection(Or)})(Hn.sourceLayers,new Set(Object.keys(In.layers))),zi=Hn.indoorState,_a=(function(ki,Or,ji,si){const li=new Set,wi=new Set,la=new Set,bo=new Map,Ja={},Tc=as=>{const bs=bo.get(as)||new Set;for(const ru of li)if((bo.get(ru)||new Set).has(as)||bs.has(ru))return!0;return!1};for(const as of Or){const bs=ki.layers[as];if(bs)for(let ru=0;ru<bs.length;ru++){const so=bs.feature(ru);if(ie(so)){const{id:Fs,center:xs}=V(so);U(Ja,Fs,xs),li.add(Fs);continue}if(Q(so)){const{id:Fs,isDefault:xs,connections:Nu,conflicts:iu,buildings:Sl,name:Rp,zIndex:Ec}=K(so);k(Ja,Sl,Fs,{name:Rp,zIndex:Ec}),bo.set(Fs,iu),(Fs===si||Nu.has(si))&&li.add(Fs),wi.add(Fs),xs&&la.add(Fs)}}else a.w(`indoor source layer not found: ${as}`)}if(ji)for(const as of ji)wi.has(as)&&(Tc(as)||li.add(as));for(const as of la)li.has(as)||Tc(as)||li.add(as);return{buildings:Ja,activeFloors:li}})(In,sa,zi.lastActiveFloors,zi.selectedFloorId);return xi.send("setIndoorData",_a),_a})(me,this.indoor,ze);Nt.activeFloors=Zn?rr.activeFloors:void 0}const hn=[],Mn=we.familiesBySource[this.source];for(const Zn in Mn){const rr=me.layers[Zn];if(!rr)continue;let In=!1,Hn=!1,xi=!1;for(const Or of Mn[Zn])Or[0].type==="symbol"?In=!0:Hn=!0,Or[0].is3D()&&Or[0].type!=="model"&&(xi=!0);if(this.extraShadowCaster&&!xi||this.isSymbolTile===!0&&!In||this.isSymbolTile===!1&&!Hn)continue;rr.version===1&&a.w(`Vector tile source "${this.source}" layer "${Zn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const sa=_t.encode(Zn),zi=[],_a=this.localizableLayerIds&&this.localizableLayerIds.has(Zn);let ki=!1;for(let Or=0,ji=0;Or<rr.length;Or++){const si=rr.feature(Or),li=lt.getId(si,Zn),wi=si.properties?si.properties.worldview:null;if(_a&&this.worldview&&typeof wi=="string")if(wi==="all")si.properties.$localized=!0;else{if(!wi.split(",").includes(this.worldview))continue;si.properties.$localized=!0,si.properties.worldview=this.worldview}!ki&&si.properties&&si.properties.hasOwnProperty(a.fp)&&(ki=!0),zi.push({feature:si,id:li,index:ji,sourceLayerIndex:sa}),ji++}ki&&!Nt.elevationFeatures&&me.layers.hasOwnProperty(a.fq)&&(Nt.elevationFeatures=a.fr.parseFrom(me.layers[a.fq],this.canonical));for(const Or of Mn[Zn]){const ji=Or[0];if(this.extraShadowCaster&&(!ji.is3D()||ji.type==="model")||this.isSymbolTile!==void 0&&ji.type==="symbol"!==this.isSymbolTile||ji.minzoom&&this.zoom<Math.floor(ji.minzoom)||ji.maxzoom&&this.zoom>=ji.maxzoom||ji.visibility==="none")continue;te(Or,this.zoom,Nt.brightness,Le,this.worldview);const si=bt[ji.id]=ji.createBucket({index:lt.bucketLayerIDs.length,layers:Or,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:sa,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep,styleDefinedModelURLs:Qe,worldview:this.worldview,localizable:_a,availableImages:Le});lt.bucketLayerIDs.push(Or.map(wi=>a.B(wi.id,wi.scope)));let li=si.prepare?si.prepare():null;li!=null?(li=li.then(()=>si.populate(zi,Nt,this.tileID.canonical,this.tileTransform)),hn.push(li)):si.populate(zi,Nt,this.tileID.canonical,this.tileTransform)}}const Rn=()=>{let Zn,rr,In,Hn,xi,sa;Gt.trim();const zi={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},_a=()=>{if(Zn)return this.status="done",ot(Zn);if(this.extraShadowCaster)this.status="done",ot(null,{buckets:Object.values(bt).filter(Or=>!Or.isEmpty()),featureIndex:lt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Nt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(rr&&In&&Hn){const Or=new F(rr),ji=new Map;for(const[wi,la]of In.entries()){const{imagePosition:bo}=a.fu(wi,la,a.fv);ji.set(wi,bo)}const si={};for(const wi in bt){const la=bt[wi];la instanceof a.b4&&(te(la.layers,this.zoom,Nt.brightness,Le,this.worldview),si[wi]=a.fw(la,rr,Or.positions,In,ji,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio,xi,this.worldview,Le))}const li={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(ze,In,xi,()=>{li.iconsPending=!1,ki(si,Or,li)}),this.rasterizeIfNeeded(ze,Hn,sa,()=>{li.patternsPending=!1,ki(si,Or,li)})}},ki=(Or,ji,si,li)=>{if(si.iconsPending||si.patternsPending)return;const wi=new a.fx(In,Hn,this.lut);for(const la in bt){const bo=bt[la];if(la in Or)a.fy(bo,Or[la],this.showCollisionBoxes,Le,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,In,wi);else if(bo.hasPattern&&(bo instanceof a.ba||bo instanceof a.bb||bo instanceof a.ea)){te(bo.layers,this.zoom,Nt.brightness,Le,this.worldview);const Ja=Object.fromEntries(wi.patternPositions);bo.addFeatures(Nt,this.tileID.canonical,Ja,Le,this.tileTransform,this.brightness)}}this.status="done",ot(null,{buckets:Object.values(bt).filter(la=>!la.isEmpty()),featureIndex:lt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ji.image,lineAtlas:Gt,imageAtlas:wi,brightness:Nt.brightness})};if(!this.extraShadowCaster){const Or=a.fs(Nt.glyphDependencies,li=>Object.keys(li).map(Number));Object.keys(Or).length?ze.send("getGlyphs",{uid:this.uid,stacks:Or},(li,wi)=>{Zn||(Zn=li,rr=wi,_a())},void 0,!1,zi):rr={};const ji=Array.from(Nt.iconDependencies.keys()).map(li=>a.I.parse(li));ji.length?ze.send("getImages",{images:ji,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(li,wi)=>{Zn||(Zn=li,In=new Map,xi=this.updateImageMapAndGetImageTaskQueue(In,wi,Nt.iconDependencies),_a())},void 0,!1,zi):(In=new Map,xi=new Map);const si=Array.from(Nt.patternDependencies.keys()).map(li=>a.I.parse(li));si.length?ze.send("getImages",{images:si,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(li,wi)=>{Zn||(Zn=li,Hn=new Map,sa=this.updateImageMapAndGetImageTaskQueue(Hn,wi,Nt.patternDependencies),_a())},void 0,!1,zi):(Hn=new Map,sa=new Map)}if(Nt.elevationFeatures&&Nt.elevationFeatures.length>0){const Or=[];for(const si of Object.values(bt))if(si instanceof a.bb){const li=si.getUnevaluatedPortalGraph();li&&Or.push(li)}const ji=a.ft.evaluate(Or);for(const si of Object.values(bt))if(si instanceof a.bb){const li=me.layers[_t.decode(si.sourceLayerIndex)];si.setEvaluatedPortalGraph(ji,li,this.tileID.canonical,Nt.availableImages,Nt.brightness)}}_a()};hn.length>0?Promise.allSettled(hn).then(Rn).catch(ot):Rn()}updateParameters(me){this.scaleFactor=me.scaleFactor,this.showCollisionBoxes=me.showCollisionBoxes,this.projection=me.projection,this.brightness=me.brightness,this.tileTransform=a.aZ(me.tileID.canonical,me.projection),this.extraShadowCaster=me.extraShadowCaster,this.lut=me.lut,this.worldview=me.worldview,this.indoor=me.indoor}rasterizeIfNeeded(me,we,Le,Qe){Array.from(we.values()).some(ze=>ze.usvg)?this.rasterize(me,we,Le,Qe):Qe()}updateImageMapAndGetImageTaskQueue(me,we,Le){const Qe=new Map;for(const ze of we.keys()){const ot=Le.get(ze)||[];for(const _t of ot){const lt=_t.toString(),bt=we.get(_t.id.toString());bt.usvg?Qe.has(lt)||(Qe.set(lt,_t),me.set(lt,Object.assign({},bt))):me.set(lt,bt)}}return Qe}rasterize(me,we,Le,Qe){this.rasterizeTask=me.send("rasterizeImages",{scope:this.scope,tasks:Le},(ze,ot)=>{if(!ze)for(const[_t,lt]of ot.entries()){const bt=Object.assign(we.get(_t),{data:lt});we.set(_t,bt)}Qe()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function te(ut,me,we,Le,Qe){const ze=new a.ac(me,{brightness:we,worldview:Qe});for(const ot of ut)ot.recalculate(ze,Le)}class X extends a.E{constructor(me,we,Le,Qe,ze,ot,_t){super(),this.actor=me,this.layerIndex=we,this.availableImages=Le,this.availableModels=Qe,this.loadVectorData=ot||a.aL,this.loading={},this.loaded={},this.deduped=new a.aK(me.scheduler),this.isSpriteLoaded=ze,this.scheduler=me.scheduler,this.brightness=_t}loadTile(me,we){const Le=me.uid,Qe=me&&me.request,ze=Qe&&Qe.collectResourceTiming,ot=this.loading[Le]=new W(me);ot.abort=this.loadVectorData(me,(_t,lt)=>{const bt=!this.loading[Le];if(delete this.loading[Le],ot.cancelRasterize(),bt||_t||!lt)return ot.status="done",bt||(this.loaded[Le]=ot),we(_t);const Gt=lt.rawData,Nt={},hn=a.aM(lt.responseHeaders);hn&&hn.expires&&(Nt.expires=hn.expires),hn&&hn.cacheControl&&(Nt.cacheControl=hn.cacheControl),ot.vectorTile=lt.vectorTile||new a.fz(new a.bt(Gt));const Mn=()=>{ot.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,(Rn,Zn)=>{if(Rn||!Zn)return we(Rn);const rr={};if(ze){const In=p(Qe);In.length>0&&(rr.resourceTiming=JSON.parse(JSON.stringify(In)))}we(null,Object.assign({rawTileData:Gt.slice(0),responseHeaders:lt.responseHeaders},Zn,Nt,rr))})};this.isSpriteLoaded?Mn():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Mn,{type:"parseTile",isSymbolTile:me.isSymbolTile,zoom:me.tileZoom}):Mn()}),this.loaded=this.loaded||{},this.loaded[Le]=ot})}reloadTile(me,we){const Le=this.loaded,Qe=me.uid;if(Le&&Le[Qe]){const ze=Le[Qe];ze.updateParameters(me);const ot=(_t,lt)=>{const bt=ze.reloadCallback;bt&&(delete ze.reloadCallback,ze.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,bt)),we(_t,lt)};ze.status==="parsing"?ze.reloadCallback=ot:ze.status==="done"&&(ze.vectorTile?ze.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,ot):ot())}else we(null,void 0)}abortTile(me,we){const Le=me.uid,Qe=this.loading[Le];Qe&&(Qe.abort&&Qe.abort(),delete this.loading[Le]),we()}removeTile(me,we){const Le=this.loaded,Qe=me.uid;Le&&Le[Qe]&&delete Le[Qe],we()}}class ae{loadTile(me,we){const{uid:Le,encoding:Qe,rawImageData:ze,padding:ot}=me,_t=ImageBitmap&&ze instanceof ImageBitmap?this.getImageData(ze,ot):ze;we(null,new a.fA(Le,_t,Qe,ot<1))}reloadTile(me,we){we(null,null)}abortTile(me,we){we()}removeTile(me,we){we()}getImageData(me,we){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(me.width,me.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=me.width,this.offscreenCanvas.height=me.height,this.offscreenCanvasContext.drawImage(me,0,0,me.width,me.height);const Le=this.offscreenCanvasContext.getImageData(-we,-we,me.width+2*we,me.height+2*we);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Le}}a.bs.setPbf(a.bt);class le{constructor(me){this._mrt=new a.bs(me.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=me.uid,this.tileID=me.tileID,this.source=me.source}parse(me,we){const Le=this._mrt;this.status="parsing",this._entireBuffer=me;try{Le.parseHeader(me),this._isHeaderLoaded=!0;const Qe=[];for(const ze in Le.layers){const ot=Le.getLayer(ze),_t=ot.getDataRange(ot.getBandList()),lt=Le.createDecodingTask(_t),bt=me.slice(_t.firstByte,_t.lastByte+1),Gt=a.bs.performDecoding(bt,lt).then(Nt=>lt.complete(null,Nt)).catch(Nt=>lt.complete(Nt,null));Qe.push(Gt)}Promise.allSettled(Qe).then(()=>we(null,Le)).catch(ze=>we(ze))}catch(Qe){we(Qe)}}}class ge{constructor(me){this.actor=me,this.loading={},this.loaded={}}loadTile(me,we){const Le=me.uid,Qe=me.request,ze=this.loading[Le]=new le(me),{cancel:ot}=a.bu(Qe,(_t,lt,bt)=>{const Gt=!this.loading[Le];if(delete this.loading[Le],Gt||_t||!lt)return ze.status="done",Gt||(this.loaded[Le]=ze),we(_t);ze.parse(lt,(Nt,hn)=>{if(Nt||!hn)return we(Nt);we(null,hn,bt)}),this.loaded[Le]=ze});ze.abort=ot}reloadTile(me,we){we(null,void 0)}abortTile(me,we){const Le=me.uid,Qe=this.loading[Le];Qe&&(Qe.abort&&Qe.abort(),delete this.loading[Le]),we()}removeTile(me,we){const Le=me.uid;this.loaded[Le]&&delete this.loaded[Le],we()}decodeRasterArray(me,we){a.bs.performDecoding(me.buffer,me.task).then(Le=>we(null,Le)).catch(Le=>we(Le))}}const ye=a.fB.prototype.toGeoJSON;class De{constructor(me){this._feature=me,this.extent=a.al,this.type=me.type,this.properties=me.tags,"id"in me&&!isNaN(me.id)&&(this.id=parseInt(me.id,10))}loadGeometry(){if(this._feature.type===1){const me=[];for(const we of this._feature.geometry)me.push([new a.P(we[0],we[1])]);return me}{const me=[];for(const we of this._feature.geometry){const Le=[];for(const Qe of we)Le.push(new a.P(Qe[0],Qe[1]));me.push(Le)}return me}}toGeoJSON(me,we,Le){return ye.call(this,me,we,Le)}}class He{constructor(me,we){this.name=me,this.extent=a.al,this.length=we.length,this._jsonFeatures=we}feature(me){return new De(this._jsonFeatures[me])}}class Be{constructor(me){this.layers={},this.extent=a.al;for(const we of Object.keys(me))this.layers[we]=new He(we,me[we])}}const Ee=64/4096;class Ne{constructor(){this.features=new Map}clear(){this.features.clear()}load(me=[],we){for(const Le of me){const Qe=Le.id;if(Qe==null)continue;let ze=this.features.get(Qe);ze&&this.updateCache(ze,we),Le.geometry?(ze=yt(Le),this.updateCache(ze,we),this.features.set(Qe,ze)):this.features.delete(Qe),this.updateCache(ze,we)}}updateCache(me,we){for(const{canonical:Le,uid:Qe}of Object.values(we)){const{z:ze,x:ot,y:_t}=Le;at(me,Math.pow(2,ze),ot,_t)&&delete we[Qe]}}getTile(me,we,Le){const Qe=Math.pow(2,me),ze=[];for(const ot of this.features.values())at(ot,Qe,we,Le)&&ze.push(Pe(ot,Qe,we,Le));return{features:ze}}getFeatures(){return[...this.features.values()]}}function at({minX:ut,minY:me,maxX:we,maxY:Le},Qe,ze,ot){return ut<(ze+1+Ee)/Qe&&me<(ot+1+Ee)/Qe&&we>(ze-Ee)/Qe&&Le>(ot-Ee)/Qe}function yt(ut){const{id:me,geometry:we,properties:Le}=ut;if(!we)return;if(we.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Qe,coordinates:ze}=we,ot={id:me,type:1,geometry:[],tags:Le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},_t=ot.geometry;if(Qe==="Point")je(ze,_t,ot);else if(Qe==="MultiPoint")for(const lt of ze)je(lt,_t,ot);else if(Qe==="LineString")ot.type=2,Ke(ze,_t,ot);else if(Qe==="MultiLineString")ot.type=2,it(ze,_t,ot);else if(Qe==="Polygon")ot.type=3,it(ze,_t,ot,!0);else{if(Qe!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");ot.type=3;for(const lt of ze)it(lt,_t,ot,!0)}return ot}function je([ut,me],we,Le){const Qe=a.aF(ut);let ze=a.aJ(me);ze=ze<0?0:ze>1?1:ze,we.push(Qe,ze),Le.minX=Math.min(Le.minX,Qe),Le.minY=Math.min(Le.minY,ze),Le.maxX=Math.max(Le.maxX,Qe),Le.maxY=Math.max(Le.maxY,ze)}function Ke(ut,me,we,Le=!1,Qe=!1){const ze=[];for(const ot of ut)je(ot,ze,we);me.push(ze),Le&&(function(ot,_t){let lt=0;for(let bt=0,Gt=ot.length,Nt=Gt-2;bt<Gt;Nt=bt,bt+=2)lt+=(ot[bt]-ot[Nt])*(ot[bt+1]+ot[Nt+1]);if(lt>0===_t)for(let bt=0,Gt=ot.length;bt<Gt/2;bt+=2){const Nt=ot[bt],hn=ot[bt+1];ot[bt]=ot[Gt-2-bt],ot[bt+1]=ot[Gt-1-bt],ot[Gt-2-bt]=Nt,ot[Gt-1-bt]=hn}})(ze,Qe)}function it(ut,me,we,Le=!1){for(let Qe=0;Qe<ut.length;Qe++)Ke(ut[Qe],me,we,Le,Qe===0)}function Pe(ut,me,we,Le){const{id:Qe,type:ze,geometry:ot,tags:_t}=ut,lt=[];if(ze===1)(function(bt,Gt,Nt,hn,Mn){for(let Rn=0;Rn<bt.length;Rn+=2){const Zn=Math.round(a.al*(bt[Rn+0]*Gt-Nt)),rr=Math.round(a.al*(bt[Rn+1]*Gt-hn));Mn.push([Zn,rr])}})(ot,me,we,Le,lt);else if(ze===2)for(const bt of ot)jt(bt,me,we,Le,lt);else if(ze===3)for(const bt of ot)sn(bt,me,we,Le,lt);return{id:Qe,type:ze,geometry:lt,tags:_t}}function jt(ut,me,we,Le,Qe){const ot=a.al+128;let _t;for(let lt=0;lt<ut.length-2;lt+=2){let bt=Math.round(a.al*(ut[lt+0]*me-we)),Gt=Math.round(a.al*(ut[lt+1]*me-Le)),Nt=Math.round(a.al*(ut[lt+2]*me-we)),hn=Math.round(a.al*(ut[lt+3]*me-Le));const Mn=Nt-bt,Rn=hn-Gt;bt<-128&&Nt<-128||(bt<-128?(Gt+=Math.round(Rn*((-128-bt)/Mn)),bt=-128):Nt<-128&&(hn=Gt+Math.round(Rn*((-128-bt)/Mn)),Nt=-128),Gt<-128&&hn<-128||(Gt<-128?(bt+=Math.round(Mn*((-128-Gt)/Rn)),Gt=-128):hn<-128&&(Nt=bt+Math.round(Mn*((-128-Gt)/Rn)),hn=-128),bt>=ot&&Nt>=ot||(bt>=ot?(Gt+=Math.round(Rn*((ot-bt)/Mn)),bt=ot):Nt>=ot&&(hn=Gt+Math.round(Rn*((ot-bt)/Mn)),Nt=ot),Gt>=ot&&hn>=ot||(Gt>=ot?(bt+=Math.round(Mn*((ot-Gt)/Rn)),Gt=ot):hn>=ot&&(Nt=bt+Math.round(Mn*((ot-Gt)/Rn)),hn=ot),_t&&bt===_t[_t.length-1][0]&&Gt===_t[_t.length-1][1]||(_t=[[bt,Gt]],Qe.push(_t)),_t.push([Nt,hn])))))}}function sn(ut,me,we,Le,Qe){const ze=(we-Ee)/me,ot=(Le-Ee)/me,_t=(we+1+Ee)/me,lt=(Le+1+Ee)/me;function bt(hn,Mn){let Rn=0;return hn<ze?Rn|=1:hn>_t&&(Rn|=2),Mn<ot?Rn|=4:Mn>lt&&(Rn|=8),Rn}let Gt=[];for(let hn=1;hn<=8;hn*=2){let Mn=ut[ut.length-2],Rn=ut[ut.length-1],Zn=!(bt(Mn,Rn)&hn);for(let rr=0;rr<ut.length;rr+=2){const In=ut[rr],Hn=ut[rr+1],xi=!(bt(In,Hn)&hn);xi!==Zn&&(8&hn?Gt.push(Mn+(In-Mn)*(lt-Rn)/(Hn-Rn),lt):4&hn?Gt.push(Mn+(In-Mn)*(ot-Rn)/(Hn-Rn),ot):2&hn?Gt.push(_t,Rn+(Hn-Rn)*(_t-Mn)/(In-Mn)):1&hn&&Gt.push(ze,Rn+(Hn-Rn)*(ze-Mn)/(In-Mn))),xi&&Gt.push(In,Hn),Mn=In,Rn=Hn,Zn=xi}if(!(ut=Gt).length||hn===8)break;Gt=[]}const Nt=[];for(let hn=0;hn<Gt.length;hn+=2)Nt.push([Math.round(a.al*(Gt[hn]*me-we)),Math.round(a.al*(Gt[hn+1]*me-Le))]);Nt.length&&Qe.push(Nt)}function dn({name:ut,features:me},we){we.writeStringField(1,ut),we.writeVarintField(5,a.al);const Le=new Map,Qe=new Map,ze={keys:Le,values:Qe,feature:null};for(const ot of me)ze.feature=ot,we.writeMessage(2,Sn,ze);for(const ot of Le.keys())we.writeStringField(3,ot);for(const ot of Qe.keys())we.writeMessage(4,mt,ot)}function Sn(ut,me){const we=ut.feature;we.id!==void 0&&Number.isSafeInteger(+we.id)&&me.writeVarintField(1,+we.id),we.tags&&me.writeMessage(2,Ut,ut),me.writeVarintField(3,we.type),me.writeMessage(4,ct,we)}function Ut({keys:ut,values:me,feature:we},Le){for(const Qe of Object.keys(we.tags)){let ze=we.tags[Qe];if(ze===null)continue;let ot=ut.get(Qe);ot===void 0&&(ot=ut.size,ut.set(Qe,ot)),Le.writeVarint(ot);const _t=typeof ze;_t!=="string"&&_t!=="boolean"&&_t!=="number"&&(ze=JSON.stringify(ze));let lt=me.get(ze);lt===void 0&&(lt=me.size,me.set(ze,lt)),Le.writeVarint(lt)}}function xe(ut,me){return(me<<3)+(7&ut)}function Ye(ut){return ut<<1^ut>>31}function ct(ut,me){const{geometry:we,type:Le}=ut;let Qe=0,ze=0;if(Le===1){me.writeVarint(xe(1,we.length));for(const ot of we){const _t=ot[0]-Qe,lt=ot[1]-ze;me.writeVarint(Ye(_t)),me.writeVarint(Ye(lt)),Qe+=_t,ze+=lt}}else for(const ot of we){if(ot.length===0)continue;me.writeVarint(xe(1,1));const _t=ot.length-(Le===3?1:0);for(let lt=0;lt<_t;lt++){lt===1&&me.writeVarint(xe(2,_t-1));const bt=ot[lt][0]-Qe,Gt=ot[lt][1]-ze;me.writeVarint(Ye(bt)),me.writeVarint(Ye(Gt)),Qe+=bt,ze+=Gt}Le===3&&me.writeVarint(xe(7,1))}}function mt(ut,me){const we=typeof ut;we==="string"?me.writeStringField(1,ut):we==="boolean"?me.writeBooleanField(7,ut):we==="number"&&(ut%1!=0?me.writeDoubleField(3,ut):ut<0?me.writeSVarintField(6,ut):me.writeVarintField(5,ut))}const Ct={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ut=>ut},Yt=Math.fround||(gn=new Float32Array(1),ut=>(gn[0]=+ut,gn[0]));var gn;class En{constructor(me){this.options=Object.assign(Object.create(Ct),me),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(me){const{log:we,minZoom:Le,maxZoom:Qe}=this.options;we&&console.time("total time");const ze=`prepare ${me.length} points`;we&&console.time(ze),this.points=me;const ot=[];for(let lt=0;lt<me.length;lt++){const bt=me[lt];if(!bt.geometry)continue;const[Gt,Nt]=bt.geometry.coordinates,hn=Yt(Nr(Gt)),Mn=Yt(Pr(Nt));ot.push(hn,Mn,1/0,lt,-1,1),this.options.reduce&&ot.push(0)}let _t=this.trees[Qe+1]=this._createTree(ot);we&&console.timeEnd(ze);for(let lt=Qe;lt>=Le;lt--){const bt=+Date.now();_t=this.trees[lt]=this._createTree(this._cluster(_t,lt)),we&&console.log("z%d: %d clusters in %dms",lt,_t.numItems,+Date.now()-bt)}return we&&console.timeEnd("total time"),this}getClusters(me,we){let Le=((me[0]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,me[1]));let ze=me[2]===180?180:((me[2]+180)%360+360)%360-180;const ot=Math.max(-90,Math.min(90,me[3]));if(me[2]-me[0]>=360)Le=-180,ze=180;else if(Le>ze){const Nt=this.getClusters([Le,Qe,180,ot],we),hn=this.getClusters([-180,Qe,ze,ot],we);return Nt.concat(hn)}const _t=this.trees[this._limitZoom(we)],lt=_t.range(Nr(Le),Pr(ot),Nr(ze),Pr(Qe)),bt=_t.data,Gt=[];for(const Nt of lt){const hn=this.stride*Nt;Gt.push(bt[hn+5]>1?or(bt,hn,this.clusterProps):this.points[bt[hn+3]])}return Gt}getChildren(me){const we=this._getOriginId(me),Le=this._getOriginZoom(me),Qe="No cluster with the specified id.",ze=this.trees[Le];if(!ze)throw new Error(Qe);const ot=ze.data;if(we*this.stride>=ot.length)throw new Error(Qe);const _t=this.options.radius/(this.options.extent*Math.pow(2,Le-1)),lt=ze.within(ot[we*this.stride],ot[we*this.stride+1],_t),bt=[];for(const Gt of lt){const Nt=Gt*this.stride;ot[Nt+4]===me&&bt.push(ot[Nt+5]>1?or(ot,Nt,this.clusterProps):this.points[ot[Nt+3]])}if(bt.length===0)throw new Error(Qe);return bt}getLeaves(me,we,Le){const Qe=[];return this._appendLeaves(Qe,me,we=we||10,Le=Le||0,0),Qe}getTile(me,we,Le){const Qe=this.trees[this._limitZoom(me)],ze=Math.pow(2,me),{extent:ot,radius:_t}=this.options,lt=_t/ot,bt=(Le-lt)/ze,Gt=(Le+1+lt)/ze,Nt={features:[]};return this._addTileFeatures(Qe.range((we-lt)/ze,bt,(we+1+lt)/ze,Gt),Qe.data,we,Le,ze,Nt),we===0&&this._addTileFeatures(Qe.range(1-lt/ze,bt,1,Gt),Qe.data,ze,Le,ze,Nt),we===ze-1&&this._addTileFeatures(Qe.range(0,bt,lt/ze,Gt),Qe.data,-1,Le,ze,Nt),Nt.features.length?Nt:null}getClusterExpansionZoom(me){let we=this._getOriginZoom(me)-1;for(;we<=this.options.maxZoom;){const Le=this.getChildren(me);if(we++,Le.length!==1)break;me=Le[0].properties.cluster_id}return we}_appendLeaves(me,we,Le,Qe,ze){const ot=this.getChildren(we);for(const _t of ot){const lt=_t.properties;if(lt&&lt.cluster?ze+lt.point_count<=Qe?ze+=lt.point_count:ze=this._appendLeaves(me,lt.cluster_id,Le,Qe,ze):ze<Qe?ze++:me.push(_t),me.length===Le)break}return ze}_createTree(me){const we=new a.c4(me.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Le=0;Le<me.length;Le+=this.stride)we.add(me[Le],me[Le+1]);return we.finish(),we.data=me,we}_addTileFeatures(me,we,Le,Qe,ze,ot){for(const _t of me){const lt=_t*this.stride,bt=we[lt+5]>1;let Gt,Nt,hn;if(bt)Gt=sr(we,lt,this.clusterProps),Nt=we[lt],hn=we[lt+1];else{const Zn=this.points[we[lt+3]];Gt=Zn.properties;const[rr,In]=Zn.geometry.coordinates;Nt=Nr(rr),hn=Pr(In)}const Mn={type:1,geometry:[[Math.round(this.options.extent*(Nt*ze-Le)),Math.round(this.options.extent*(hn*ze-Qe))]],tags:Gt};let Rn;Rn=bt||this.options.generateId?we[lt+3]:this.points[we[lt+3]].id,Rn!==void 0&&(Mn.id=Rn),ot.features.push(Mn)}}_limitZoom(me){return Math.max(this.options.minZoom,Math.min(Math.floor(+me),this.options.maxZoom+1))}_cluster(me,we){const{radius:Le,extent:Qe,reduce:ze,minPoints:ot}=this.options,_t=Le/(Qe*Math.pow(2,we)),lt=me.data,bt=[],Gt=this.stride;for(let Nt=0;Nt<lt.length;Nt+=Gt){if(lt[Nt+2]<=we)continue;lt[Nt+2]=we;const hn=lt[Nt],Mn=lt[Nt+1],Rn=me.within(lt[Nt],lt[Nt+1],_t),Zn=lt[Nt+5];let rr=Zn;for(const In of Rn){const Hn=In*Gt;lt[Hn+2]>we&&(rr+=lt[Hn+5])}if(rr>Zn&&rr>=ot){let In,Hn=hn*Zn,xi=Mn*Zn,sa=-1;const zi=(Nt/Gt<<5)+(we+1)+this.points.length;for(const _a of Rn){const ki=_a*Gt;if(lt[ki+2]<=we)continue;lt[ki+2]=we;const Or=lt[ki+5];Hn+=lt[ki]*Or,xi+=lt[ki+1]*Or,lt[ki+4]=zi,ze&&(In||(In=this._map(lt,Nt,!0),sa=this.clusterProps.length,this.clusterProps.push(In)),ze(In,this._map(lt,ki)))}lt[Nt+4]=zi,bt.push(Hn/rr,xi/rr,1/0,zi,-1,rr),ze&&bt.push(sa)}else{for(let In=0;In<Gt;In++)bt.push(lt[Nt+In]);if(rr>1)for(const In of Rn){const Hn=In*Gt;if(!(lt[Hn+2]<=we)){lt[Hn+2]=we;for(let xi=0;xi<Gt;xi++)bt.push(lt[Hn+xi])}}}}return bt}_getOriginId(me){return me-this.points.length>>5}_getOriginZoom(me){return(me-this.points.length)%32}_map(me,we,Le){if(me[we+5]>1){const ot=this.clusterProps[me[we+6]];return Le?Object.assign({},ot):ot}const Qe=this.points[me[we+3]].properties,ze=this.options.map(Qe);return Le&&ze===Qe?Object.assign({},ze):ze}}function or(ut,me,we){return{type:"Feature",id:ut[me+3],properties:sr(ut,me,we),geometry:{type:"Point",coordinates:[(Le=ut[me],360*(Le-.5)),Er(ut[me+1])]}};var Le}function sr(ut,me,we){const Le=ut[me+5],Qe=Le>=1e4?`${Math.round(Le/1e3)}k`:Le>=1e3?Math.round(Le/100)/10+"k":Le,ze=ut[me+6],ot=ze===-1?{}:Object.assign({},we[ze]);return Object.assign(ot,{cluster:!0,cluster_id:ut[me+3],point_count:Le,point_count_abbreviated:Qe})}function Nr(ut){return ut/360+.5}function Pr(ut){const me=Math.sin(ut*Math.PI/180),we=.5-.25*Math.log((1+me)/(1-me))/Math.PI;return we<0?0:we>1?1:we}function Er(ut){const me=(180-360*ut)*Math.PI/180;return 360*Math.atan(Math.exp(me))/Math.PI-90}function Tr(ut,me,we,Le){let Qe=Le;const ze=me+(we-me>>1);let ot,_t=we-me;const lt=ut[me],bt=ut[me+1],Gt=ut[we],Nt=ut[we+1];for(let hn=me+3;hn<we;hn+=3){const Mn=pi(ut[hn],ut[hn+1],lt,bt,Gt,Nt);if(Mn>Qe)ot=hn,Qe=Mn;else if(Mn===Qe){const Rn=Math.abs(hn-ze);Rn<_t&&(ot=hn,_t=Rn)}}Qe>Le&&(ot-me>3&&Tr(ut,me,ot,Le),ut[ot+2]=Qe,we-ot>3&&Tr(ut,ot,we,Le))}function pi(ut,me,we,Le,Qe,ze){let ot=Qe-we,_t=ze-Le;if(ot!==0||_t!==0){const lt=((ut-we)*ot+(me-Le)*_t)/(ot*ot+_t*_t);lt>1?(we=Qe,Le=ze):lt>0&&(we+=ot*lt,Le+=_t*lt)}return ot=ut-we,_t=me-Le,ot*ot+_t*_t}function Br(ut,me,we,Le){const Qe={id:ut??null,type:me,geometry:we,tags:Le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(me==="Point"||me==="MultiPoint"||me==="LineString")hi(Qe,we);else if(me==="Polygon")hi(Qe,we[0]);else if(me==="MultiLineString")for(const ze of we)hi(Qe,ze);else if(me==="MultiPolygon")for(const ze of we)hi(Qe,ze[0]);return Qe}function hi(ut,me){for(let we=0;we<me.length;we+=3)ut.minX=Math.min(ut.minX,me[we]),ut.minY=Math.min(ut.minY,me[we+1]),ut.maxX=Math.max(ut.maxX,me[we]),ut.maxY=Math.max(ut.maxY,me[we+1])}function $t(ut,me,we,Le){if(!me.geometry)return;const Qe=me.geometry.coordinates;if(Qe&&Qe.length===0)return;const ze=me.geometry.type,ot=Math.pow(we.tolerance/((1<<we.maxZoom)*we.extent),2);let _t=[],lt=me.id;if(we.promoteId?lt=me.properties[we.promoteId]:we.generateId&&(lt=Le||0),ze==="Point")Tn(Qe,_t);else if(ze==="MultiPoint")for(const bt of Qe)Tn(bt,_t);else if(ze==="LineString")ur(Qe,_t,ot,!1);else if(ze==="MultiLineString"){if(we.lineMetrics){for(const bt of Qe)_t=[],ur(bt,_t,ot,!1),ut.push(Br(lt,"LineString",_t,me.properties));return}Vr(Qe,_t,ot,!1)}else if(ze==="Polygon")Vr(Qe,_t,ot,!0);else{if(ze!=="MultiPolygon"){if(ze==="GeometryCollection"){for(const bt of me.geometry.geometries)$t(ut,{id:lt,geometry:bt,properties:me.properties},we,Le);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const bt of Qe){const Gt=[];Vr(bt,Gt,ot,!0),_t.push(Gt)}}ut.push(Br(lt,ze,_t,me.properties))}function Tn(ut,me){me.push(jr(ut[0]),Ya(ut[1]),0)}function ur(ut,me,we,Le){let Qe,ze,ot=0;for(let lt=0;lt<ut.length;lt++){const bt=jr(ut[lt][0]),Gt=Ya(ut[lt][1]);me.push(bt,Gt,0),lt>0&&(ot+=Le?(Qe*Gt-bt*ze)/2:Math.sqrt(Math.pow(bt-Qe,2)+Math.pow(Gt-ze,2))),Qe=bt,ze=Gt}const _t=me.length-3;me[2]=1,Tr(me,0,_t,we),me[_t+2]=1,me.size=Math.abs(ot),me.start=0,me.end=me.size}function Vr(ut,me,we,Le){for(let Qe=0;Qe<ut.length;Qe++){const ze=[];ur(ut[Qe],ze,we,Le),me.push(ze)}}function jr(ut){return ut/360+.5}function Ya(ut){const me=Math.sin(ut*Math.PI/180),we=.5-.25*Math.log((1+me)/(1-me))/Math.PI;return we<0?0:we>1?1:we}function vo(ut,me,we,Le,Qe,ze,ot,_t){if(Le/=me,ze>=(we/=me)&&ot<Le)return ut;if(ot<we||ze>=Le)return null;const lt=[];for(const bt of ut){const Gt=bt.geometry;let Nt=bt.type;const hn=Qe===0?bt.minX:bt.minY,Mn=Qe===0?bt.maxX:bt.maxY;if(hn>=we&&Mn<Le){lt.push(bt);continue}if(Mn<we||hn>=Le)continue;let Rn=[];if(Nt==="Point"||Nt==="MultiPoint")Yo(Gt,Rn,we,Le,Qe);else if(Nt==="LineString")Aa(Gt,Rn,we,Le,Qe,!1,_t.lineMetrics);else if(Nt==="MultiLineString")Ri(Gt,Rn,we,Le,Qe,!1);else if(Nt==="Polygon")Ri(Gt,Rn,we,Le,Qe,!0);else if(Nt==="MultiPolygon")for(const Zn of Gt){const rr=[];Ri(Zn,rr,we,Le,Qe,!0),rr.length&&Rn.push(rr)}if(Rn.length){if(_t.lineMetrics&&Nt==="LineString"){for(const Zn of Rn)lt.push(Br(bt.id,Nt,Zn,bt.tags));continue}Nt!=="LineString"&&Nt!=="MultiLineString"||(Rn.length===1?(Nt="LineString",Rn=Rn[0]):Nt="MultiLineString"),Nt!=="Point"&&Nt!=="MultiPoint"||(Nt=Rn.length===3?"Point":"MultiPoint"),lt.push(Br(bt.id,Nt,Rn,bt.tags))}}return lt.length?lt:null}function Yo(ut,me,we,Le,Qe){for(let ze=0;ze<ut.length;ze+=3){const ot=ut[ze+Qe];ot>=we&&ot<=Le&&zs(me,ut[ze],ut[ze+1],ut[ze+2])}}function Aa(ut,me,we,Le,Qe,ze,ot){let _t=Qi(ut);const lt=Qe===0?is:lf;let bt,Gt,Nt=ut.start;for(let rr=0;rr<ut.length-3;rr+=3){const In=ut[rr],Hn=ut[rr+1],xi=ut[rr+2],sa=ut[rr+3],zi=ut[rr+4],_a=Qe===0?In:Hn,ki=Qe===0?sa:zi;let Or=!1;ot&&(bt=Math.sqrt(Math.pow(In-sa,2)+Math.pow(Hn-zi,2))),_a<we?ki>we&&(Gt=lt(_t,In,Hn,sa,zi,we),ot&&(_t.start=Nt+bt*Gt)):_a>Le?ki<Le&&(Gt=lt(_t,In,Hn,sa,zi,Le),ot&&(_t.start=Nt+bt*Gt)):zs(_t,In,Hn,xi),ki<we&&_a>=we&&(Gt=lt(_t,In,Hn,sa,zi,we),Or=!0),ki>Le&&_a<=Le&&(Gt=lt(_t,In,Hn,sa,zi,Le),Or=!0),!ze&&Or&&(ot&&(_t.end=Nt+bt*Gt),me.push(_t),_t=Qi(ut)),ot&&(Nt+=bt)}let hn=ut.length-3;const Mn=ut[hn],Rn=ut[hn+1],Zn=Qe===0?Mn:Rn;Zn>=we&&Zn<=Le&&zs(_t,Mn,Rn,ut[hn+2]),hn=_t.length-3,ze&&hn>=3&&(_t[hn]!==_t[0]||_t[hn+1]!==_t[1])&&zs(_t,_t[0],_t[1],_t[2]),_t.length&&me.push(_t)}function Qi(ut){const me=[];return me.size=ut.size,me.start=ut.start,me.end=ut.end,me}function Ri(ut,me,we,Le,Qe,ze){for(const ot of ut)Aa(ot,me,we,Le,Qe,ze,!1)}function zs(ut,me,we,Le){ut.push(me,we,Le)}function is(ut,me,we,Le,Qe,ze){const ot=(ze-me)/(Le-me);return zs(ut,ze,we+(Qe-we)*ot,1),ot}function lf(ut,me,we,Le,Qe,ze){const ot=(ze-we)/(Qe-we);return zs(ut,me+(Le-me)*ot,ze,1),ot}function zu(ut,me){const we=[];for(let Le=0;Le<ut.length;Le++){const Qe=ut[Le],ze=Qe.type;let ot;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")ot=Fu(Qe.geometry,me);else if(ze==="MultiLineString"||ze==="Polygon"){ot=[];for(const _t of Qe.geometry)ot.push(Fu(_t,me))}else if(ze==="MultiPolygon"){ot=[];for(const _t of Qe.geometry){const lt=[];for(const bt of _t)lt.push(Fu(bt,me));ot.push(lt)}}we.push(Br(Qe.id,ze,ot,Qe.tags))}return we}function Fu(ut,me){const we=[];we.size=ut.size,ut.start!==void 0&&(we.start=ut.start,we.end=ut.end);for(let Le=0;Le<ut.length;Le+=3)we.push(ut[Le]+me,ut[Le+1],ut[Le+2]);return we}function uf(ut,me){if(ut.transformed)return ut;const we=1<<ut.z,Le=ut.x,Qe=ut.y;for(const ze of ut.features){const ot=ze.geometry,_t=ze.type;if(ze.geometry=[],_t===1)for(let lt=0;lt<ot.length;lt+=2)ze.geometry.push(mi(ot[lt],ot[lt+1],me,we,Le,Qe));else for(let lt=0;lt<ot.length;lt++){const bt=[];for(let Gt=0;Gt<ot[lt].length;Gt+=2)bt.push(mi(ot[lt][Gt],ot[lt][Gt+1],me,we,Le,Qe));ze.geometry.push(bt)}}return ut.transformed=!0,ut}function mi(ut,me,we,Le,Qe,ze){return[Math.round(we*(ut*Le-Qe)),Math.round(we*(me*Le-ze))]}function oo(ut,me,we,Le,Qe){const ze=me===Qe.maxZoom?0:Qe.tolerance/((1<<me)*Qe.extent),ot={features:[],numPoints:0,numSimplified:0,numFeatures:ut.length,source:null,x:we,y:Le,z:me,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const _t of ut)ah(ot,_t,ze,Qe);return ot}function ah(ut,me,we,Le){const Qe=me.geometry,ze=me.type,ot=[];if(ut.minX=Math.min(ut.minX,me.minX),ut.minY=Math.min(ut.minY,me.minY),ut.maxX=Math.max(ut.maxX,me.maxX),ut.maxY=Math.max(ut.maxY,me.maxY),ze==="Point"||ze==="MultiPoint")for(let _t=0;_t<Qe.length;_t+=3)ot.push(Qe[_t],Qe[_t+1]),ut.numPoints++,ut.numSimplified++;else if(ze==="LineString")Ip(ot,Qe,ut,we,!1,!1);else if(ze==="MultiLineString"||ze==="Polygon")for(let _t=0;_t<Qe.length;_t++)Ip(ot,Qe[_t],ut,we,ze==="Polygon",_t===0);else if(ze==="MultiPolygon")for(let _t=0;_t<Qe.length;_t++){const lt=Qe[_t];for(let bt=0;bt<lt.length;bt++)Ip(ot,lt[bt],ut,we,!0,bt===0)}if(ot.length){let _t=me.tags||null;if(ze==="LineString"&&Le.lineMetrics){_t={};for(const bt in me.tags)_t[bt]=me.tags[bt];_t.mapbox_clip_start=Qe.start/Qe.size,_t.mapbox_clip_end=Qe.end/Qe.size}const lt={geometry:ot,type:ze==="Polygon"||ze==="MultiPolygon"?3:ze==="LineString"||ze==="MultiLineString"?2:1,tags:_t};me.id!==null&&(lt.id=me.id),ut.features.push(lt)}}function Ip(ut,me,we,Le,Qe,ze){const ot=Le*Le;if(Le>0&&me.size<(Qe?ot:Le))return void(we.numPoints+=me.length/3);const _t=[];for(let lt=0;lt<me.length;lt+=3)(Le===0||me[lt+2]>ot)&&(we.numSimplified++,_t.push(me[lt],me[lt+1])),we.numPoints++;Qe&&(function(lt,bt){let Gt=0;for(let Nt=0,hn=lt.length,Mn=hn-2;Nt<hn;Mn=Nt,Nt+=2)Gt+=(lt[Nt]-lt[Mn])*(lt[Nt+1]+lt[Mn+1]);if(Gt>0===bt)for(let Nt=0,hn=lt.length;Nt<hn/2;Nt+=2){const Mn=lt[Nt],Rn=lt[Nt+1];lt[Nt]=lt[hn-2-Nt],lt[Nt+1]=lt[hn-1-Nt],lt[hn-2-Nt]=Mn,lt[hn-1-Nt]=Rn}})(_t,ze),ut.push(_t)}const wl={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class _g{constructor(me,we){const Le=(we=this.options=(function(ze,ot){for(const _t in ot)ze[_t]=ot[_t];return ze})(Object.create(wl),we)).debug;if(Le&&console.time("preprocess data"),we.maxZoom<0||we.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(we.promoteId&&we.generateId)throw new Error("promoteId and generateId cannot be used together.");let Qe=(function(ze,ot){const _t=[];if(ze.type==="FeatureCollection")for(let lt=0;lt<ze.features.length;lt++)$t(_t,ze.features[lt],ot,lt);else $t(_t,ze.type==="Feature"?ze:{geometry:ze},ot);return _t})(me,we);this.tiles={},this.tileCoords=[],Le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",we.indexMaxZoom,we.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Qe=(function(ze,ot){const _t=ot.buffer/ot.extent;let lt=ze;const bt=vo(ze,1,-1-_t,_t,0,-1,2,ot),Gt=vo(ze,1,1-_t,2+_t,0,-1,2,ot);return(bt||Gt)&&(lt=vo(ze,1,-_t,1+_t,0,-1,2,ot)||[],bt&&(lt=zu(bt,1).concat(lt)),Gt&&(lt=lt.concat(zu(Gt,-1)))),lt})(Qe,we),Qe.length&&this.splitTile(Qe,0,0,0),Le&&(Qe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(me,we,Le,Qe,ze,ot,_t){const lt=[me,we,Le,Qe],bt=this.options,Gt=bt.debug;for(;lt.length;){Qe=lt.pop(),Le=lt.pop(),we=lt.pop(),me=lt.pop();const Nt=1<<we,hn=wc(we,Le,Qe);let Mn=this.tiles[hn];if(!Mn&&(Gt>1&&console.time("creation"),Mn=this.tiles[hn]=oo(me,we,Le,Qe,bt),this.tileCoords.push({z:we,x:Le,y:Qe}),Gt)){Gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",we,Le,Qe,Mn.numFeatures,Mn.numPoints,Mn.numSimplified),console.timeEnd("creation"));const Or=`z${we}`;this.stats[Or]=(this.stats[Or]||0)+1,this.total++}if(Mn.source=me,ze==null){if(we===bt.indexMaxZoom||Mn.numPoints<=bt.indexMaxPoints)continue}else{if(we===bt.maxZoom||we===ze)continue;if(ze!=null){const Or=ze-we;if(Le!==ot>>Or||Qe!==_t>>Or)continue}}if(Mn.source=null,me.length===0)continue;Gt>1&&console.time("clipping");const Rn=.5*bt.buffer/bt.extent,Zn=.5-Rn,rr=.5+Rn,In=1+Rn;let Hn=null,xi=null,sa=null,zi=null,_a=vo(me,Nt,Le-Rn,Le+rr,0,Mn.minX,Mn.maxX,bt),ki=vo(me,Nt,Le+Zn,Le+In,0,Mn.minX,Mn.maxX,bt);me=null,_a&&(Hn=vo(_a,Nt,Qe-Rn,Qe+rr,1,Mn.minY,Mn.maxY,bt),xi=vo(_a,Nt,Qe+Zn,Qe+In,1,Mn.minY,Mn.maxY,bt),_a=null),ki&&(sa=vo(ki,Nt,Qe-Rn,Qe+rr,1,Mn.minY,Mn.maxY,bt),zi=vo(ki,Nt,Qe+Zn,Qe+In,1,Mn.minY,Mn.maxY,bt),ki=null),Gt>1&&console.timeEnd("clipping"),lt.push(Hn||[],we+1,2*Le,2*Qe),lt.push(xi||[],we+1,2*Le,2*Qe+1),lt.push(sa||[],we+1,2*Le+1,2*Qe),lt.push(zi||[],we+1,2*Le+1,2*Qe+1)}}getTile(me,we,Le){me=+me,we=+we,Le=+Le;const Qe=this.options,{extent:ze,debug:ot}=Qe;if(me<0||me>24)return null;const _t=1<<me,lt=wc(me,we=we+_t&_t-1,Le);if(this.tiles[lt])return uf(this.tiles[lt],ze);ot>1&&console.log("drilling down to z%d-%d-%d",me,we,Le);let bt,Gt=me,Nt=we,hn=Le;for(;!bt&&Gt>0;)Gt--,Nt>>=1,hn>>=1,bt=this.tiles[wc(Gt,Nt,hn)];return bt&&bt.source?(ot>1&&(console.log("found parent tile z%d-%d-%d",Gt,Nt,hn),console.time("drilling down")),this.splitTile(bt.source,Gt,Nt,hn,me,we,Le),ot>1&&console.timeEnd("drilling down"),this.tiles[lt]?uf(this.tiles[lt],ze):null):null}}function wc(ut,me,we){return 32*((1<<ut)*we+me)+ut}function Vt(ut,me){const we=ut.tileID.canonical;if(!this._geoJSONIndex)return void me(null,null);const Le=this._geoJSONIndex.getTile(we.z,we.x,we.y);if(!Le)return void me(null,null);const Qe=bt=>bt.tags&&"3d_elevation_id"in bt.tags&&"source"in bt.tags&&bt.tags.source==="elevation",ze=Le.features.filter(bt=>Qe(bt));let ot={_geojsonTileLayer:Le.features};ze.length>0&&(ot={_geojsonTileLayer:Le.features.filter(bt=>!Qe(bt)),hd_road_elevation:ze});const _t=new Be(ot),lt=(function(bt){const Gt=new a.bt;for(const Nt of Object.keys(bt))Gt.writeMessage(3,dn,{name:Nt,features:bt[Nt]});return Gt.finish()})(ot).buffer;me(null,{vectorTile:_t,rawData:lt})}class Sc extends X{constructor(me,we,Le,Qe,ze,ot,_t){super(me,we,Le,Qe,ze,Vt,_t),ot&&(this.loadGeoJSON=ot),this._dynamicIndex=new Ne}loadData(me,we){const Le=me&&me.request,Qe=Le&&Le.collectResourceTiming;this._geoJSONIndex=null,this.loadGeoJSON(me,(ze,ot)=>{if(ze||!ot)return we(ze);if(typeof ot!="object")return we(new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`));{try{if(me.filter){const lt=a.U(me.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(lt.result==="error")throw new Error(lt.value.map(bt=>`${bt.key}: ${bt.message}`).join(", "));ot.features=ot.features.filter(bt=>lt.value.evaluate({zoom:0},bt))}me.dynamic?(ot.type==="Feature"&&(ot={type:"FeatureCollection",features:[ot]}),me.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(ot.features,this.loaded),me.cluster&&(ot.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=me.cluster?new En((function({superclusterOptions:lt,clusterProperties:bt}){if(!bt||!lt)return lt;const Gt={},Nt={},hn={accumulated:null,zoom:0},Mn={properties:null},Rn=Object.keys(bt);for(const Zn of Rn){const[rr,In]=bt[Zn],Hn=a.U(In),xi=a.U(typeof rr=="string"?[rr,["accumulated"],["get",Zn]]:rr);Gt[Zn]=Hn.value,Nt[Zn]=xi.value}return lt.map=Zn=>{Mn.properties=Zn;const rr={};for(const In of Rn)rr[In]=Gt[In].evaluate(hn,Mn);return rr},lt.reduce=(Zn,rr)=>{Mn.properties=rr;for(const In of Rn)hn.accumulated=Zn[In],Zn[In]=Nt[In].evaluate(hn,Mn)},lt})(me)).load(ot.features):me.dynamic?this._dynamicIndex:(function(lt,bt){return new _g(lt,bt)})(ot,me.geojsonVtOptions)}catch(lt){return we(lt)}const _t={};if(Qe){const lt=p(Le);lt&&(_t.resourceTiming={},_t.resourceTiming[me.source]=JSON.parse(JSON.stringify(lt)))}we(null,_t)}})}reloadTile(me,we){const Le=this.loaded;return Le&&Le[me.uid]?me.partial?we(null,void 0):super.reloadTile(me,we):this.loadTile(me,we)}loadGeoJSON(me,we){if(me.request)a.m(me.request,we);else{if(typeof me.data!="string")return we(new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`));setTimeout(()=>{try{return we(null,JSON.parse(me.data))}catch{return we(new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`))}},0)}}getClusterExpansionZoom(me,we){try{we(null,this._geoJSONIndex.getClusterExpansionZoom(me.clusterId))}catch(Le){we(Le)}}getClusterChildren(me,we){try{we(null,this._geoJSONIndex.getChildren(me.clusterId))}catch(Le){we(Le)}}getClusterLeaves(me,we){try{we(null,this._geoJSONIndex.getLeaves(me.clusterId,me.limit,me.offset))}catch(Le){we(Le)}}}class b_{constructor(me,we,Le){this.tileID=new a.aQ(me.tileID.overscaledZ,me.tileID.wrap,me.tileID.canonical.z,me.tileID.canonical.x,me.tileID.canonical.y),this.tileZoom=me.tileZoom,this.uid=me.uid,this.zoom=me.zoom,this.canonical=me.tileID.canonical,this.pixelRatio=me.pixelRatio,this.tileSize=me.tileSize,this.source=me.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=me.projection,this.brightness=we,this.worldview=Le}parse(me,we,Le,Qe){this.status="parsing";const ze=new a.aQ(Le.tileID.overscaledZ,Le.tileID.wrap,Le.tileID.canonical.z,Le.tileID.canonical.x,Le.tileID.canonical.y),ot=[],_t=we.familiesBySource[Le.source],lt=new a.fn(ze,Le.promoteId);lt.bucketLayerIDs=[],lt.is3DTile=!0,a.fC(me).then(bt=>{if(!bt)return Qe(new Error("Could not parse tile"));const Gt=bt.json.extensionsUsed&&bt.json.extensionsUsed.includes("MAPBOX_mesh_features")||bt.json.asset.extras&&bt.json.asset.extras.MAPBOX_mesh_features,Nt=bt.json.extensionsUsed&&bt.json.extensionsUsed.includes("EXT_meshopt_compression"),hn=new a.ac(this.zoom,{brightness:this.brightness,worldview:this.worldview});for(const Mn in _t)for(const Rn of _t[Mn]){const Zn=Rn[0];lt.bucketLayerIDs.push(Rn.map(Hn=>a.B(Hn.id,Hn.scope))),Zn.recalculate(hn,[]);const rr=a.fD(bt,1/a.d7(Le.tileID.canonical)),In=new a.fE(Rn,rr,ze,Gt,Nt,this.brightness,lt,this.worldview);Gt||(In.needsUpload=!0),ot.push(In),In.evaluate(Zn)}this.status="done",Qe(null,{buckets:ot,featureIndex:lt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(bt=>Qe(new Error(bt.message)))}}class Pp{constructor(me,we,Le,Qe,ze,ot,_t,lt){this.actor=me,this.layerIndex=we,this.availableImages=Le,this.availableModels=Qe,this.brightness=_t,this.loading={},this.loaded={},this.worldview=lt}loadTile(me,we){const Le=me.uid,Qe=this.loading[Le]=new b_(me,this.brightness,this.worldview);a.bu(me.request,(ze,ot)=>{const _t=!this.loading[Le];return delete this.loading[Le],_t||ze?(Qe.status="done",_t||(this.loaded[Le]=Qe),we(ze)):ot&&ot.byteLength!==0?void Qe.parse(ot,this.layerIndex,me,(lt,bt)=>{Qe.status="done",this.loaded=this.loaded||{},this.loaded[Le]=Qe,lt||!bt?we(lt):we(null,bt)}):(Qe.status="done",this.loaded[Le]=Qe,we())})}reloadTile(me,we){const Le=this.loaded,Qe=me.uid;if(Le&&Le[Qe]){const ze=Le[Qe];ze.projection=me.projection,ze.brightness=me.brightness;const ot=(_t,lt)=>{ze.reloadCallback&&(delete ze.reloadCallback,this.loadTile(me,we)),we(_t,lt)};ze.status==="parsing"?ze.reloadCallback=ot:ze.status==="done"&&this.loadTile(me,we)}}abortTile(me,we){const Le=me.uid;this.loading[Le]&&delete this.loading[Le],we()}removeTile(me,we){const Le=this.loaded,Qe=me.uid;Le&&Le[Qe]&&delete Le[Qe],we()}}class Ar{constructor(me){this.self=me,this.actor=new a.fG(me,this),this.layerIndexes={},this.availableImages={},this.availableModels={},this.isSpriteLoaded={},this.imageRasterizer=new a.x,this.rtlPluginParsingListeners=[],this.projections={},this.defaultProjection=a.cm({name:"mercator"}),this.workerSourceTypes={vector:X,geojson:Sc,"raster-dem":ae,"raster-array":ge,"batched-model":Pp},this.workerSources={},this.self.registerWorkerSource=(we,Le)=>{if(this.workerSourceTypes[we])throw new Error(`Worker source with name "${we}" already registered.`);this.workerSourceTypes[we]=Le},this.self.registerRTLTextPlugin=we=>{if(a.fH.isParsed())throw new Error("RTL text plugin already registered.");a.fH.setState({pluginStatus:a.fI.parsed,pluginURL:a.fH.getPluginURL()}),a.fH.applyArabicShaping=we.applyArabicShaping,a.fH.processBidirectionalText=we.processBidirectionalText,a.fH.processStyledBidirectionalText=we.processStyledBidirectionalText;for(const Le of this.rtlPluginParsingListeners)Le(null,!0);this.rtlPluginParsingListeners=[]}}clearCaches(me,we,Le){delete this.layerIndexes[me],delete this.availableImages[me],delete this.availableModels[me],delete this.workerSources[me],Le()}checkIfReady(me,we,Le){Le()}setReferrer(me,we){this.referrer=we}spriteLoaded(me,we){this.isSpriteLoaded[me]||(this.isSpriteLoaded[me]={});const{scope:Le,isLoaded:Qe}=we;if(this.isSpriteLoaded[me][Le]=Qe,this.workerSources[me]&&this.workerSources[me][Le])for(const ze in this.workerSources[me][Le]){const ot=this.workerSources[me][Le][ze];for(const _t in ot){const lt=ot[_t];lt instanceof X&&(lt.isSpriteLoaded=Qe,lt.fire(new a.z("isSpriteLoaded")))}}}setImages(me,we,Le){this.availableImages[me]||(this.availableImages[me]={});const{scope:Qe,images:ze}=we;if(this.availableImages[me][Qe]=ze,this.workerSources[me]&&this.workerSources[me][Qe]){for(const ot in this.workerSources[me][Qe]){const _t=this.workerSources[me][Qe][ot];for(const lt in _t)_t[lt].availableImages=ze}Le()}else Le()}setModels(me,{scope:we,models:Le},Qe){if(this.availableModels[me]||(this.availableModels[me]={}),this.availableModels[me][we]=Le,this.workerSources[me]&&this.workerSources[me][we]){for(const ze in this.workerSources[me][we]){const ot=this.workerSources[me][we][ze];for(const _t in ot)ot[_t].availableModels=Le}Qe()}else Qe()}setProjection(me,we){this.projections[me]=a.cm(we)}setBrightness(me,we,Le){this.brightness=we,Le()}setWorldview(me,we,Le){this.worldview=we,Le()}setLayers(me,we,Le){this.getLayerIndex(me,we.scope).replace(we.layers,we.options),Le()}updateLayers(me,we,Le){this.getLayerIndex(me,we.scope).update(we.layers,we.removedIds,we.options),Le()}loadTile(me,we,Le){we.projection=this.projections[me]||this.defaultProjection,this.getWorkerSource(me,we.type,we.source,we.scope).loadTile(we,Le)}decodeRasterArray(me,we,Le){this.getWorkerSource(me,we.type,we.source,we.scope).decodeRasterArray(we,Le)}reloadTile(me,we,Le){we.projection=this.projections[me]||this.defaultProjection,this.getWorkerSource(me,we.type,we.source,we.scope).reloadTile(we,Le)}abortTile(me,we,Le){this.getWorkerSource(me,we.type,we.source,we.scope).abortTile(we,Le)}removeTile(me,we,Le){this.getWorkerSource(me,we.type,we.source,we.scope).removeTile(we,Le)}removeSource(me,we,Le){if(!(this.workerSources[me]&&this.workerSources[me][we.scope]&&this.workerSources[me][we.scope][we.type]&&this.workerSources[me][we.scope][we.type][we.source]))return;const Qe=this.workerSources[me][we.scope][we.type][we.source];delete this.workerSources[me][we.scope][we.type][we.source],Qe.removeSource!==void 0?Qe.removeSource(we,Le):Le()}loadWorkerSource(me,we,Le){try{this.self.importScripts(we.url),Le()}catch(Qe){Le(Qe)}}syncRTLPluginState(me,we,Le){if(a.fH.isParsed())Le(null,!0);else if(a.fH.isParsing())this.rtlPluginParsingListeners.push(Le);else try{a.fH.setState(we);const Qe=a.fH.getPluginURL();!a.fH.isLoaded()||a.fH.isParsed()||a.fH.isParsing()||Qe==null||(a.fH.setState({pluginStatus:a.fI.parsing,pluginURL:a.fH.getPluginURL()}),this.self.importScripts(Qe),a.fH.isParsed()?Le(null,!0):this.rtlPluginParsingListeners.push(Le))}catch(Qe){Le(Qe)}}setDracoUrl(me,we){this.dracoUrl=we}getAvailableImages(me,we){this.availableImages[me]||(this.availableImages[me]={});let Le=this.availableImages[me][we];return Le||(Le=[]),Le}getAvailableModels(me,we){this.availableModels[me]||(this.availableModels[me]={});let Le=this.availableModels[me][we];return Le||(Le={}),Le}getLayerIndex(me,we){this.layerIndexes[me]||(this.layerIndexes[me]={});let Le=this.layerIndexes[me][we];return Le||(Le=this.layerIndexes[me][we]=new I,Le.scope=we),Le}getWorkerSource(me,we,Le,Qe){const ze=this.workerSources;return ze[me]||(ze[me]={}),ze[me][Qe]||(ze[me][Qe]={}),ze[me][Qe][we]||(ze[me][Qe][we]={}),this.isSpriteLoaded[me]||(this.isSpriteLoaded[me]={}),ze[me][Qe][we][Le]||(ze[me][Qe][we][Le]=new this.workerSourceTypes[we]({send:(ot,_t,lt,bt,Gt,Nt)=>this.actor.send(ot,_t,lt,me,Gt,Nt),scheduler:this.actor.scheduler},this.getLayerIndex(me,Qe),this.getAvailableImages(me,Qe),this.getAvailableModels(me,Qe),this.isSpriteLoaded[me][Qe],void 0,this.brightness,this.worldview)),ze[me][Qe][we][Le]}rasterizeImagesWorker(me,we,Le){const Qe=new Map;for(const[ze,{image:ot,imageVariant:_t}]of we.tasks.entries()){const lt=this.imageRasterizer.rasterize(_t,ot,we.scope,me);Qe.set(ze,lt)}Le(void 0,Qe)}removeRasterizedImages(me,we,Le){this.imageRasterizer.removeImagesFromCacheByIds(we.imageIds,we.scope,me),Le()}enforceCacheSizeLimit(me,we){a.fJ(we)}getWorkerPerformanceMetrics(me,we,Le){Le(void 0,void 0)}}return a.fF(self)&&(self.worker=new Ar(self)),Ar}),s(["./shared"],function(a){var p="3.18.1";const _={create:"create",load:"load",fullLoad:"fullLoad"},S={mark(y){performance.mark(y)},measure(y,l,d){performance.measure(y,l,d)}};function E(y){const l=y.name.split("?")[0];return a.a(l)&&l.includes("mapbox-gl.js")?"javascript":a.a(l)&&l.includes("mapbox-gl.css")?"css":a.b(l)?"fontRange":a.c(l)?"sprite":a.i(l)?"style":a.d(l)?"tilejson":"other"}var I,z={},F=(function(){if(I)return z;function y(v){return!l(v)}function l(v){return typeof window>"u"||typeof document>"u"?"not a browser":(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var O,M,R=new Blob([""],{type:"text/javascript"}),N=URL.createObjectURL(R);try{M=new Worker(N),O=!0}catch{O=!1}return M&&M.terminate(),URL.revokeObjectURL(N),O})()?(function(){var O=document.createElement("canvas");O.width=O.height=1;var M=O.getContext("2d");if(!M)return!1;var R=M.getImageData(0,0,1,1);return R&&R.width===O.width})()?(d[T=v&&v.failIfMajorPerformanceCaveat]===void 0&&(d[T]=(function(O){var M,R=(function(N){var q=document.createElement("canvas"),H=Object.create(y.webGLContextAttributes);return H.failIfMajorPerformanceCaveat=N,q.getContext("webgl2",H)})(O);if(!R)return!1;try{M=R.createShader(R.VERTEX_SHADER)}catch{return!1}return!(!M||R.isContextLost())&&(R.shaderSource(M,"void main() {}"),R.compileShader(M),R.getShaderParameter(M,R.COMPILE_STATUS)===!0)})(T)),d[T]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var T}I=1,z.supported=y,z.notSupportedReason=l;var d={};return y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},z})();function U(y,l,d){const v=document.createElement(y);return l!=null&&(v.className=l),d&&d.appendChild(v),v}function k(y,l,d){const v=document.createElementNS("http://www.w3.org/2000/svg",y);for(const T of Object.keys(l))v.setAttributeNS(null,T,String(l[T]));return d&&d.appendChild(v),v}const V=typeof document<"u"?document.documentElement&&document.documentElement.style:null,K=V&&V.userSelect!==void 0?"userSelect":"WebkitUserSelect";let J;function ie(){V&&K&&(J=V[K],V[K]="none")}function Q(){V&&K&&(V[K]=J)}function W(y){y.preventDefault(),y.stopPropagation(),window.removeEventListener("click",W,!0)}function te(){window.addEventListener("click",W,!0),window.setTimeout(()=>{window.removeEventListener("click",W,!0)},0)}function X(y,l){const d=y.getBoundingClientRect();return ge(y,d,l)}function ae(y,l){const d=y.getBoundingClientRect(),v=[];for(let T=0;T<l.length;T++)v.push(ge(y,d,l[T]));return v}function le(y){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&y.button===2&&y.ctrlKey?0:y.button}function ge(y,l,d){const v=y.offsetWidth===l.width?1:y.offsetWidth/l.width;return new a.P((d.clientX-l.left)*v,(d.clientY-l.top)*v)}const ye="01",De="NO_ACCESS_TOKEN";class He{constructor(l,d,v){this._transformRequestFn=l,this._customAccessToken=d,this._silenceAuthErrors=!!v,this._createSkuToken()}_createSkuToken(){const l=(function(){let d="";for(let v=0;v<10;v++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ye,d].join(""),tokenExpiresAt:Date.now()+432e5}})();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(l,d){return this._transformRequestFn&&this._transformRequestFn(l,d)||{url:l}}normalizeStyleURL(l,d){if(!a.h(l))return l;const v=Ee(l);return v.params.push(`sdk=js-${p}`),v.path=`/styles/v1${v.path}`,this._makeAPIURL(v,this._customAccessToken||d)}normalizeGlyphsURL(l,d){if(!a.h(l))return l;const v=Ee(l);return v.path=`/fonts/v1${v.path}`,this._makeAPIURL(v,this._customAccessToken||d)}normalizeModelURL(l,d){if(!a.h(l))return l;const v=Ee(l);return v.path=`/models/v1${v.path}`,this._makeAPIURL(v,this._customAccessToken||d)}normalizeSourceURL(l,d,v,T){if(!a.h(l))return l;const O=Ee(l);return O.path=`/v4/${O.authority}.json`,O.params.push("secure"),v&&O.params.push(`language=${v}`),T&&O.params.push(`worldview=${T}`),this._makeAPIURL(O,this._customAccessToken||d)}normalizeIconsetURL(l,d){const v=Ee(l);return a.h(l)?(v.path=`/styles/v1${v.path}/iconset.pbf`,this._makeAPIURL(v,this._customAccessToken||d)):Ne(v)}normalizeSpriteURL(l,d,v,T){const O=Ee(l);return a.h(l)?(O.path=`/styles/v1${O.path}/sprite${d}${v}`,this._makeAPIURL(O,this._customAccessToken||T)):(O.path+=`${d}${v}`,Ne(O))}normalizeTileURL(l,d,v){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!a.h(l))return l;const T=Ee(l);T.path=T.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${d||v&&T.authority!=="raster"&&v===512?"@2x":""}${a.k.supported?".webp":"$1"}`),T.authority==="raster"?T.path=`/${a.e.RASTER_URL_PREFIX}${T.path}`:T.authority==="rasterarrays"?T.path=`/${a.e.RASTERARRAYS_URL_PREFIX}${T.path}`:T.authority==="3dtiles"?T.path=`/${a.e.TILES3D_URL_PREFIX}${T.path}`:(T.path=T.path.replace(/^.+\/v4\//,"/"),T.path=`/${a.e.TILE_URL_VERSION}${T.path}`);const O=this._customAccessToken||(function(M){for(const R of M){const N=R.match(/^access_token=(.*)$/);if(N)return N[1]}return null})(T.params)||a.e.ACCESS_TOKEN;return a.e.REQUIRE_ACCESS_TOKEN&&O&&this._skuToken&&T.params.push(`sku=${this._skuToken}`),this._makeAPIURL(T,O)}canonicalizeTileURL(l,d){const v=Ee(l);if(!v.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!v.path.match(/\.[\w]+$/))return l;let T="mapbox://";v.path.match(/^\/raster\/v1\//)?T+=`raster/${v.path.replace(`/${a.e.RASTER_URL_PREFIX}/`,"")}`:v.path.match(/^\/rasterarrays\/v1\//)?T+=`rasterarrays/${v.path.replace(`/${a.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:T+=`tiles/${v.path.replace(`/${a.e.TILE_URL_VERSION}/`,"")}`;let O=v.params;return d&&(O=O.filter(M=>!M.match(/^access_token=/))),O.length&&(T+=`?${O.join("&")}`),T}canonicalizeTileset(l,d){const v=!!d&&a.h(d),T=[];for(const O of l.tiles||[])a.j(O)?T.push(this.canonicalizeTileURL(O,v)):T.push(O);return T}_makeAPIURL(l,d){const v="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",T=Ee(a.e.API_URL);if(l.protocol=T.protocol,l.authority=T.authority,l.protocol==="http"){const O=l.params.indexOf("secure");O>=0&&l.params.splice(O,1)}if(T.path!=="/"&&(l.path=`${T.path}${l.path}`),!a.e.REQUIRE_ACCESS_TOKEN)return Ne(l);if(d=d||a.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!d)throw new Error(`An API access token is required to use Mapbox GL. ${v}`);if(d[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${v}`)}return l.params=l.params.filter(O=>O.indexOf("access_token")===-1),l.params.push(`access_token=${d||""}`),Ne(l)}}const Be=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ee(y){const l=y.match(Be);if(!l)throw new Error("Unable to parse URL object");return{protocol:l[1],authority:l[2],path:l[3]||"/",params:l[4]?l[4].split("&"):[]}}function Ne(y){const l=y.params.length?`?${y.params.join("&")}`:"";return`${y.protocol}://${y.authority}${y.path}${l}`}const at="mapbox.eventData";function yt(y){if(!y)return null;const l=y.split(".");if(!l||l.length!==3)return null;try{return JSON.parse(a.l(l[1]))}catch{return null}}class je{constructor(l){this.type=l,this.anonId=null,this.anonIdTimestamp=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(l){const d=yt(a.e.ACCESS_TOKEN);let v="";return v=d&&d.u?a.f(d.u):a.e.ACCESS_TOKEN||"",l?`${at}.${l}:${v}`:`${at}:${v}`}fetchEventData(){const l=a.s("localStorage"),d=this.getStorageKey(),v=this.getStorageKey("uuid"),T=this.getStorageKey("uuidTimestamp");if(l)try{const O=localStorage.getItem(d);O&&(this.eventData=JSON.parse(O));const M=localStorage.getItem(v);M&&(this.anonId=M);const R=localStorage.getItem(T);R&&(this.anonIdTimestamp=Number(R));const N=Date.now()-864e5;(!this.anonIdTimestamp||this.anonIdTimestamp<N)&&this.refreshUUID()}catch{a.w("Unable to read from LocalStorage")}}refreshUUID(){this.anonId=a.u(),this.anonIdTimestamp=Date.now()}saveEventData(){const l=a.s("localStorage"),d=this.getStorageKey(),v=this.getStorageKey("uuid"),T=this.getStorageKey("uuidTimestamp"),O=this.anonId,M=this.anonIdTimestamp;if(l&&O)try{localStorage.setItem(v,O),Object.keys(this.eventData).length>=1&&localStorage.setItem(d,JSON.stringify(this.eventData)),M&&localStorage.setItem(T,M.toString())}catch{a.w("Unable to write to LocalStorage")}}processRequests(l){}postEvent(l,d,v,T){if(!a.e.EVENTS_URL)return;const O=Ee(a.e.EVENTS_URL);O.params.push(`access_token=${T||a.e.ACCESS_TOKEN||""}`);const M={event:this.type,created:new Date(l).toISOString()},R=d?Object.assign(M,d):M,N={url:Ne(O),headers:{"Content-Type":"text/plain"},body:JSON.stringify([R])};this.pendingRequest=a.p(N,q=>{this.pendingRequest=null,v(q),this.saveEventData(),this.processRequests(T)})}queueRequest(l,d){this.queue.push(l),this.processRequests(d)}}class Ke extends je{constructor(l){super("metrics"),l&&(this.data=l)}postMetricsEvent(l){if(!a.e.EVENTS_URL||!l&&!a.e.ACCESS_TOKEN)return;this.anonId||this.fetchEventData(),a.v(this.anonId)||this.refreshUUID();const d=Object.assign({},this.data,{sessionId:this.anonId});this.queueRequest({timestamp:Date.now(),payload:d},l)}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:d,payload:v}=this.queue.shift();this.postEvent(d,v,()=>{},l)}}const it=new class extends je{constructor(y){super("appUserTurnstile"),this._customAccessToken=y}postTurnstileEvent(y,l){a.e.EVENTS_URL&&a.e.ACCESS_TOKEN&&Array.isArray(y)&&y.some(d=>a.h(d)||a.j(d))&&this.queueRequest(Date.now(),l)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.anonIdTimestamp&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const l=yt(a.e.ACCESS_TOKEN),d=l?l.u:a.e.ACCESS_TOKEN;let v=d!==this.eventData.tokenU;a.v(this.anonId)||(this.refreshUUID(),v=!0);const T=this.queue.shift();if(this.eventData.lastSuccess){const O=new Date(this.eventData.lastSuccess),M=new Date(T),R=(T-this.eventData.lastSuccess)/864e5;v=v||R>=1||R<-1||O.getDate()!==M.getDate()}else v=!0;v?this.postEvent(T,{sdkIdentifier:"mapbox-gl-js",sdkVersion:p,skuId:ye,"enabled.telemetry":!1,userId:this.anonId},O=>{O||(this.eventData.lastSuccess=T,this.eventData.tokenU=d)},y):this.processRequests()}},Pe=it.postTurnstileEvent.bind(it),jt=new class extends je{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(y,l,d,v){this.skuToken=l,this.errorCb=v,a.e.EVENTS_URL&&(d||a.e.ACCESS_TOKEN?this.queueRequest({id:y,timestamp:Date.now()},d):this.errorCb(new Error(De)))}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{id:l,timestamp:d}=this.queue.shift();l&&this.success[l]||(this.anonId&&this.anonIdTimestamp||this.fetchEventData(),a.v(this.anonId)||this.refreshUUID(),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:p,skuId:ye,skuToken:this.skuToken,userId:this.anonId},v=>{v?this.errorCb(v):l&&(this.success[l]=!0)},y))}remove(){this.errorCb=null}},sn=jt.postMapLoadEvent.bind(jt),dn=new class extends je{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(y){let l=this.mapInstanceIdMap.get(y);return l||(l=a.u(),this.mapInstanceIdMap.set(y,l)),l}getEventId(y){const l=this.eventIdPerMapInstanceMap.get(y)||0;return this.eventIdPerMapInstanceMap.set(y,l+1),l}postStyleLoadEvent(y,l){const{map:d,style:v,importedStyles:T}=l;if(!a.e.EVENTS_URL||!y&&!a.e.ACCESS_TOKEN)return;const O=this.getMapInstanceId(d),M={mapInstanceId:O,eventId:this.getEventId(O),style:v};T.length&&(M.importedStyles=T),this.queueRequest({timestamp:Date.now(),payload:M},y)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:l,payload:d}=this.queue.shift();this.postEvent(l,d,()=>{},y)}},Sn=dn.postStyleLoadEvent.bind(dn),Ut=new Ke({attributes:[{name:"maps/js/layer-animations/style-with-appearances"}]}),xe=Ut.postMetricsEvent.bind(Ut),Ye=new Ke({attributes:[{name:"maps/js/layer-animations/runtime-appearances"}]}),ct=Ye.postMetricsEvent.bind(Ye),mt=new class extends je{constructor(){super("gljs.performance")}postPerformanceEvent(y,l){a.e.EVENTS_URL&&(y||a.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:l},y)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:l,performanceData:d}=this.queue.shift(),v=(function(T){const O=performance.getEntriesByType("resource"),M=performance.getEntriesByType("mark"),R=(function(oe){const he={};if(oe){for(const ce in oe)if(ce!=="other")for(const de of oe[ce]){const _e=`${ce}ResolveRangeMin`,Me=`${ce}ResolveRangeMax`,Ce=`${ce}RequestCount`,Ae=`${ce}RequestCachedCount`;he[_e]=Math.min(he[_e]||1/0,de.startTime),he[Me]=Math.max(he[Me]||-1/0,de.responseEnd);const We=$e=>{he[$e]===void 0&&(he[$e]=0),++he[$e]};de.transferSize!==void 0&&de.transferSize===0&&We(Ae),We(Ce)}}return he})((function(oe,he){const ce={};if(oe)for(const de of oe){const _e=he(de);ce[_e]===void 0&&(ce[_e]=[]),ce[_e].push(de)}return ce})(O,E)),N=window.devicePixelRatio,q=navigator.connection||navigator.mozConnection||navigator.webkitConnection,H=q?q.effectiveType:void 0,re={counters:[],metadata:[],attributes:[]},ee=(oe,he,ce)=>{ce!=null&&oe.push({name:he,value:ce.toString()})};for(const oe in R)ee(re.counters,oe,R[oe]);if(T.interactionRange[0]!==1/0&&T.interactionRange[1]!==-1/0&&(ee(re.counters,"interactionRangeMin",T.interactionRange[0]),ee(re.counters,"interactionRangeMax",T.interactionRange[1])),M)for(const oe of Object.values(_)){const he=M.find(ce=>ce.name===oe);he&&ee(re.counters,oe,he.startTime)}return ee(re.counters,"visibilityHidden",T.visibilityHidden),ee(re.attributes,"style",(function(oe){if(oe)for(const he of oe){const ce=he.name.split("?")[0];if(a.i(ce)){const de=ce.split("/").slice(-2);if(de.length===2)return`mapbox://styles/${de[0]}/${de[1]}`}}})(O)),ee(re.attributes,"terrainEnabled",T.terrainEnabled?"true":"false"),ee(re.attributes,"fogEnabled",T.fogEnabled?"true":"false"),ee(re.attributes,"projection",T.projection),ee(re.attributes,"zoom",T.zoom),ee(re.metadata,"devicePixelRatio",N),ee(re.metadata,"connectionEffectiveType",H),ee(re.metadata,"navigatorUserAgent",navigator.userAgent),ee(re.metadata,"screenWidth",window.screen.width),ee(re.metadata,"screenHeight",window.screen.height),ee(re.metadata,"windowWidth",window.innerWidth),ee(re.metadata,"windowHeight",window.innerHeight),ee(re.metadata,"mapWidth",T.width/N),ee(re.metadata,"mapHeight",T.height/N),ee(re.metadata,"webglRenderer",T.renderer),ee(re.metadata,"webglVendor",T.vendor),ee(re.metadata,"sdkVersion",p),ee(re.metadata,"sdkIdentifier","mapbox-gl-js"),re})(d);for(const T of v.metadata);for(const T of v.counters);for(const T of v.attributes);this.postEvent(l,v,()=>{},y)}},Ct=mt.postPerformanceEvent.bind(mt),Yt=new class extends je{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(y,l,d,v){if(!a.e.API_URL||!a.e.SESSION_PATH)return;const T=Ee(a.e.API_URL+a.e.SESSION_PATH);T.params.push(`sku=${l||""}`),T.params.push(`access_token=${v||a.e.ACCESS_TOKEN||""}`);const O={url:Ne(T),headers:{"Content-Type":"text/plain"}};this.pendingRequest=a.g(O,M=>{this.pendingRequest=null,d(M),this.saveEventData(),this.processRequests(v)})}getSessionAPI(y,l,d,v){this.skuToken=l,this.errorCb=v,a.e.SESSION_PATH&&a.e.API_URL&&(d||a.e.ACCESS_TOKEN?this.queueRequest({id:y,timestamp:Date.now()},d):this.errorCb(new Error(De)))}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{id:l,timestamp:d}=this.queue.shift();l&&this.success[l]||this.getSession(d,this.skuToken,v=>{v?this.errorCb(v):l&&(this.success[l]=!0)},y)}remove(){this.errorCb=null}},gn=Yt.getSessionAPI.bind(Yt),En=new Set;function or(y,l){l?En.add(y):En.delete(y)}class sr{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages={}}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(l,d){this._updatedSourceCaches[l]=d,this.setDirty()}discardSourceCacheUpdate(l){delete this._updatedSourceCaches[l]}updateLayer(l){const d=l.scope;this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._updatedLayers[d].add(l.id),this.setDirty()}removeLayer(l){const d=l.scope;this._removedLayers[d]=this._removedLayers[d]||{},this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._removedLayers[d][l.id]=l,this._updatedLayers[d].delete(l.id),this._updatedPaintProps.delete(l.fqid),this.setDirty()}getRemovedLayer(l){return this._removedLayers[l.scope]?this._removedLayers[l.scope][l.id]:null}discardLayerRemoval(l){this._removedLayers[l.scope]&&delete this._removedLayers[l.scope][l.id]}getLayerUpdatesByScope(){const l={};for(const d in this._updatedLayers)l[d]=l[d]||{},l[d].updatedIds=Array.from(this._updatedLayers[d].values());for(const d in this._removedLayers)l[d]=l[d]||{},l[d].removedIds=Object.keys(this._removedLayers[d]);return l}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(l){this._updatedPaintProps.add(l.fqid),this.setDirty()}getUpdatedImages(l){return this._updatedImages[l]?Array.from(this._updatedImages[l].values()):[]}updateImage(l,d){this._updatedImages[d]=this._updatedImages[d]||new Set,this._updatedImages[d].add(a.I.toString(l)),this.setDirty()}resetUpdatedImages(l){this._updatedImages[l]&&this._updatedImages[l].clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages={}}}function Nr(y){const{userImage:l}=y;return!!(l&&l.render&&l.render())&&(y.data.replace(new Uint8Array(l.data.buffer)),!0)}class Pr extends a.E{constructor(l){super(),this.imageProviders=new Map,this.images=new Map,this.updatedImages=new Map,this.callbackDispatchedThisFrame=new Map,this.loaded=new Map,this.requestors=[],this.patterns=new Map,this.patternsInFlight=new Set,this.atlasImage=new Map,this.atlasTexture=new Map,this.dirty=!0,this.spriteFormat=l,l!=="raster"&&a.r()&&(this.imageRasterizerDispatcher=new a.D(a.t(),this,"Image Rasterizer Worker",1))}addScope(l){this.loaded.set(l,!1),this.imageProviders.set(l,new Map),this.images.set(l,new Map),this.updatedImages.set(l,new Set),this.callbackDispatchedThisFrame.set(l,new Set),this.patterns.set(l,new Map),this.atlasImage.set(l,new a.q({width:1,height:1}))}removeScope(l){this.loaded.delete(l),this.imageProviders.delete(l),this.images.delete(l),this.updatedImages.delete(l),this.callbackDispatchedThisFrame.delete(l),this.patterns.delete(l),this.atlasImage.delete(l);const d=this.atlasTexture.get(l);d&&(d.destroy(),this.atlasTexture.delete(l))}addImageProvider(l,d){this.imageProviders.has(d)||this.imageProviders.set(d,new Map),this.imageProviders.get(d).set(l.id,l)}removeImageProvider(l,d){this.imageProviders.has(d)&&this.imageProviders.get(d).delete(l)}getPendingImageProviders(){const l=[];for(const d of this.imageProviders.values())for(const v of d.values())v.hasPendingRequests()&&l.push(v);return l}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new a.x),this._imageRasterizer}isLoaded(){for(const l of this.loaded.keys())if(!this.loaded.get(l))return!1;return!0}setLoaded(l,d){if(this.loaded.get(d)!==l&&(this.loaded.set(d,l),l)){for(const{ids:v,callback:T}of this.requestors)this._notify(v,d,T);this.requestors=[]}}hasImage(l,d){return!!this.getImage(l,d)}getImage(l,d){return this.images.get(d).get(l.toString())}addImage(l,d,v){this._validate(l,v)&&this.images.get(d).set(l.toString(),v)}_validate(l,d){let v=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new a.y(new Error(`Image "${l.name}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new a.y(new Error(`Image "${l.name}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new a.y(new Error(`Image "${l.name}" has invalid "content" value`))),v=!1),v}_validateStretch(l,d){if(!l)return!0;let v=0;for(const T of l){if(T[0]<v||T[1]<T[0]||d<T[1])return!1;v=T[1]}return!0}_validateContent(l,d){return l?l.length!==4||!d.usvg&&(l[0]<0||d.data.width<l[0]||l[1]<0||d.data.height<l[1]||l[2]<0||d.data.width<l[2]||l[3]<0||d.data.height<l[3])?!1:!(l[2]<l[0]||l[3]<l[1]):!0}updateImage(l,d,v){const T=this.images.get(d).get(l.toString());v.version=T.version+1,this.images.get(d).set(l.toString(),v),this.updatedImages.get(d).add(l),this.removeFromImageRasterizerCache(l,d)}clearUpdatedImages(l){this.updatedImages.get(l).clear()}removeFromImageRasterizerCache(l,d){this.spriteFormat!=="raster"&&(a.r()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[l],scope:d}):this.imageRasterizer.removeImagesFromCacheByIds([l],d))}removeImage(l,d){const v=this.images.get(d),T=v.get(l.toString());v.delete(l.toString()),this.patterns.get(d).delete(l.toString()),this.removeFromImageRasterizerCache(l,d),T.userImage&&T.userImage.onRemove&&T.userImage.onRemove()}listImages(l){return Array.from(this.images.get(l).keys()).map(d=>a.I.from(d))}getImages(l,d,v){const T=[],O=[],M=this.imageProviders.get(d);for(const H of l){if(!H.iconsetId){T.push(H);continue}const re=M.get(H.iconsetId);re&&(this.getImage(H,d)?O.push(H):re.addPendingRequest(H))}if(T.length===0)return void this._notify(O,d,v);let R=!0;const N=!!this.loaded.get(d),q=this.images.get(d);if(!N)for(const H of T)q.has(H.toString())||(R=!1);N||R?this._notify(T,d,v):this.requestors.push({ids:T,scope:d,callback:v})}rasterizeImages(l,d){const v=new Map,{tasks:T,scope:O}=l;for(const[M,R]of T.entries()){const N=this.getImage(R.id,O);N&&v.set(M,{image:N,imageVariant:R})}this._rasterizeImages(O,v,d)}_rasterizeImages(l,d,v){if(a.r())this.imageRasterizerDispatcher.getActor().send("rasterizeImagesWorker",{tasks:d,scope:l},v);else{const T=new Map;for(const[O,{image:M,imageVariant:R}]of d.entries())T.set(O,this.imageRasterizer.rasterize(R,M,l,0));v(void 0,T)}}getUpdatedImages(l){return this.updatedImages.get(l)||new Set}_notify(l,d,v){const T=this.images.get(d),O=new Map;for(const M of l){if(!T.get(M.toString())){if(M.iconsetId)continue;this.fire(new a.z("styleimagemissing",{id:M.name}))}const R=T.get(M.toString());if(!R){a.w(`Image "${M.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`);continue}const N={data:R.usvg?null:R.data.clone(),pixelRatio:R.pixelRatio,sdf:R.sdf,usvg:R.usvg,version:R.version,stretchX:R.stretchX,stretchY:R.stretchY,content:R.content,hasRenderCallback:!!(R.userImage&&R.userImage.render)};R.usvg&&Object.assign(N,{width:R.icon.usvg_tree.width,height:R.icon.usvg_tree.height}),O.set(a.I.toString(M),N)}v(null,O)}getPixelSize(l){const{width:d,height:v}=this.atlasImage.get(l);return{width:d,height:v}}getPattern(l,d,v){const T=l.toString(),O=this.patterns.get(d),M=O.get(T),R=this.getImage(l,d);if(!R)return null;if(M){if(M.position.version===R.version)return M.position;M.position.version=R.version}else{if(R.usvg&&!R.data){const N=this.getPatternInFlightId(T,d);if(this.patternsInFlight.has(N))return null;this.patternsInFlight.add(N);const q=new a.A(l).scaleSelf(a.o.devicePixelRatio),H=new Map([[q.toString(),{image:R,imageVariant:q}]]);return this._rasterizeImages(d,H,(re,ee)=>this.storePatternImage(q,d,R,v,ee)),null}this.storePattern(l,d,R)}return this._updatePatternAtlas(d,v),O.get(T).position}getPatternInFlightId(l,d){return a.B(l,d)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(l,d,v,T,O){const M=l.toString(),R=O?O.get(M):void 0;R&&(v.data=R,this.storePattern(l.id,d,v),this._updatePatternAtlas(d,T),this.patternsInFlight.delete(this.getPatternInFlightId(l.id.toString(),d)))}storePattern(l,d,v){const T={w:v.data.width+2*a.C,h:v.data.height+2*a.C,x:0,y:0},O=new a.F(T,v,a.C);this.patterns.get(d).set(l.toString(),{bin:T,position:O})}destroyAtlasTextures(){for(const l of this.atlasTexture.values())l&&l.destroy();this.atlasTexture.clear()}bind(l,d){const v=l.gl;let T=this.atlasTexture.get(d);T?this.dirty&&(T.update(this.atlasImage.get(d)),this.dirty=!1):(T=new a.T(l,this.atlasImage.get(d),v.RGBA8),this.atlasTexture.set(d,T)),T.bind(v.LINEAR,v.CLAMP_TO_EDGE)}_updatePatternAtlas(l,d){const v=this.patterns.get(l),T=Array.from(v.values()).map(({bin:q})=>q),{w:O,h:M}=a.G(T),R=this.atlasImage.get(l);R.resize({width:O||1,height:M||1});const N=this.images.get(l);for(const[q,{bin:H,position:re}]of v.entries()){let ee=re.padding;const oe=H.x+ee,he=H.y+ee,ce=N.get(q).data,de=ce.width,_e=ce.height;ee=ee>1?ee-1:ee,a.q.copy(ce,R,{x:0,y:0},{x:oe,y:he},{width:de,height:_e},d),a.q.copy(ce,R,{x:0,y:_e-ee},{x:oe,y:he-ee},{width:de,height:ee},d),a.q.copy(ce,R,{x:0,y:0},{x:oe,y:he+_e},{width:de,height:ee},d),a.q.copy(ce,R,{x:de-ee,y:0},{x:oe-ee,y:he},{width:ee,height:_e},d),a.q.copy(ce,R,{x:0,y:0},{x:oe+de,y:he},{width:ee,height:_e},d),a.q.copy(ce,R,{x:de-ee,y:_e-ee},{x:oe-ee,y:he-ee},{width:ee,height:ee},d),a.q.copy(ce,R,{x:0,y:_e-ee},{x:oe+de,y:he-ee},{width:ee,height:ee},d),a.q.copy(ce,R,{x:0,y:0},{x:oe+de,y:he+_e},{width:ee,height:ee},d),a.q.copy(ce,R,{x:de-ee,y:0},{x:oe-ee,y:he+_e},{width:ee,height:ee},d)}this.dirty=!0}beginFrame(){for(const l of this.images.keys())this.callbackDispatchedThisFrame.set(l,new Set)}dispatchRenderCallbacks(l,d){const v=this.images.get(d);for(const T of l){if(this.callbackDispatchedThisFrame.get(d).has(T.toString()))continue;this.callbackDispatchedThisFrame.get(d).add(T.toString());const O=v.get(T.toString());Nr(O)&&this.updateImage(T,d,O)}}destroy(){this.imageRasterizerDispatcher&&this.imageRasterizerDispatcher.remove()}}function Er(y){const l=y.value,d=y.valueSpec,v=y.style,T=y.styleSpec,O=y.key,M=y.arrayElementValidator||mi;if(!Array.isArray(l))return[new a.V(O,l,`array expected, ${a.K(l)} found`)];if(d.length&&l.length!==d.length)return[new a.V(O,l,`array length ${d.length} expected, length ${l.length} found`)];if(d["min-length"]&&l.length<d["min-length"])return[new a.V(O,l,`array length at least ${d["min-length"]} expected, length ${l.length} found`)];let R={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};T.$version<7&&(R.function=d.function),a.H(d.value)&&(R=d.value);let N=[];for(let q=0;q<l.length;q++)N=N.concat(M({array:l,arrayIndex:q,value:l[q],valueSpec:R,style:v,styleSpec:T,key:`${O}[${q}]`},!0));return N}function Tr(y){const l=y.key,d=y.value,v=y.valueSpec;if(!a.L(d))return[new a.V(l,d,`number expected, ${a.K(d)} found`)];if(d!=d)return[new a.V(l,d,"number expected, NaN found")];if("minimum"in v){let T=v.minimum;if(Array.isArray(v.minimum)&&(T=v.minimum[y.arrayIndex]),d<T)return[new a.V(l,d,`${d} is less than the minimum value ${T}`)]}if("maximum"in v){let T=v.maximum;if(Array.isArray(v.maximum)&&(T=v.maximum[y.arrayIndex]),d>T)return[new a.V(l,d,`${d} is greater than the maximum value ${T}`)]}return[]}function pi(y){const l=y.key,d=y.value;if(!a.H(d))return[new a.V(l,d,`object expected, ${a.K(d)} found`)];const v=y.valueSpec,T=a.J(d.type);let O,M,R,N={};const q=T!=="categorical"&&d.property===void 0,H=!q,re=(function(ce){const de=ce.stops;return Array.isArray(de)&&Array.isArray(de[0])&&a.H(de[0][0])})(d),ee=oo({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:function(ce){if(T==="identity")return[new a.V(ce.key,ce.value,'identity function may not have a "stops" property')];let de=[];const _e=ce.value;return de=de.concat(Er({key:ce.key,value:_e,valueSpec:ce.valueSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:oe})),Array.isArray(_e)&&_e.length===0&&de.push(new a.V(ce.key,_e,"array must have at least one stop")),de},default:function(ce){return mi({key:ce.key,value:ce.value,valueSpec:v,style:ce.style,styleSpec:ce.styleSpec})}}});return T==="identity"&&q&&ee.push(new a.V(y.key,y.value,'missing required property "property"')),T==="identity"||d.stops||ee.push(new a.V(y.key,y.value,'missing required property "stops"')),T==="exponential"&&v.expression&&!a.M(v)&&ee.push(new a.V(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(H&&!a.N(v)?ee.push(new a.V(y.key,y.value,"property functions not supported")):q&&!a.O(v)&&ee.push(new a.V(y.key,y.value,"zoom functions not supported"))),T!=="categorical"&&!re||d.property!==void 0||ee.push(new a.V(y.key,y.value,'"property" property is required')),ee;function oe(ce){let de=[];const _e=ce.value,Me=ce.key;if(!Array.isArray(_e))return[new a.V(Me,_e,`array expected, ${a.K(_e)} found`)];if(_e.length!==2)return[new a.V(Me,_e,`array length 2 expected, length ${_e.length} found`)];if(re){if(!a.H(_e[0]))return[new a.V(Me,_e,`object expected, ${a.K(_e[0])} found`)];const Ce=_e[0];if(Ce.zoom===void 0)return[new a.V(Me,_e,"object stop key must have zoom")];if(Ce.value===void 0)return[new a.V(Me,_e,"object stop key must have value")];const Ae=a.J(Ce.zoom);if(typeof Ae!="number")return[new a.V(Me,Ce.zoom,"stop zoom values must be numbers")];if(R&&R>Ae)return[new a.V(Me,Ce.zoom,"stop zoom values must appear in ascending order")];Ae!==R&&(R=Ae,M=void 0,N={}),de=de.concat(oo({key:`${Me}[0]`,value:_e[0],valueSpec:{zoom:{}},style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Tr,value:he}}))}else de=de.concat(he({key:`${Me}[0]`,value:_e[0],style:ce.style,styleSpec:ce.styleSpec},_e));return a.Q(a.S(_e[1]))?de.concat([new a.V(`${Me}[1]`,_e[1],"expressions are not allowed in function stops.")]):de.concat(mi({key:`${Me}[1]`,value:_e[1],valueSpec:v,style:ce.style,styleSpec:ce.styleSpec}))}function he(ce,de){const _e=a.K(ce.value),Me=a.J(ce.value),Ce=ce.value!==null?ce.value:de;if(O){if(_e!==O)return[new a.V(ce.key,Ce,`${_e} stop domain type must match previous stop domain type ${O}`)]}else O=_e;if(_e!=="number"&&_e!=="string"&&_e!=="boolean"&&typeof Me!="number"&&typeof Me!="string"&&typeof Me!="boolean")return[new a.V(ce.key,Ce,"stop domain value must be a number, string, or boolean")];if(_e!=="number"&&T!=="categorical"){let Ae=`number expected, ${_e} found`;return a.N(v)&&T===void 0&&(Ae+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new a.V(ce.key,Ce,Ae)]}return T!=="categorical"||_e!=="number"||typeof Me=="number"&&isFinite(Me)&&Math.floor(Me)===Me?T!=="categorical"&&_e==="number"&&typeof Me=="number"&&typeof M=="number"&&M!==void 0&&Me<M?[new a.V(ce.key,Ce,"stop domain values must appear in ascending order")]:(M=Me,T==="categorical"&&Me in N?[new a.V(ce.key,Ce,"stop domain values must be unique")]:(N[Me]=!0,[])):[new a.V(ce.key,Ce,`integer expected, found ${String(Me)}`)]}}function Br(y){const l=(y.expressionContext==="property"?a.W:a.U)(a.S(y.value),y.valueSpec);if(l.result==="error")return l.value.map(v=>new a.V(`${y.key}${v.key}`,y.value,v.message));const d=l.value.expression||l.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!d.outputDefined())return[new a.V(y.key,y.value,`Invalid data expression for "${y.propertyKey}". Output values must be contained as literals within the expression.`)];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!a.Z(d))return[new a.V(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter")return hi(d,y);if(y.expressionContext==="appearance")return $t(d,y);if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!a.X(d,["zoom","feature-state"]))return[new a.V(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!a.Y(d))return[new a.V(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function hi(y,l){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(l.valueSpec&&l.valueSpec.expression)for(const T of l.valueSpec.expression.parameters)d.delete(T);if(d.size===0)return[];const v=[];return y instanceof a._&&d.has(y.name)?[new a.V(l.key,l.value,`["${y.name}"] expression is not supported in a filter for a ${l.object.type} layer with id: ${l.object.id}`)]:(y.eachChild(T=>{v.push(...hi(T,l))}),v)}function $t(y,l){const d=new Set;if(l.valueSpec&&l.valueSpec.expression)for(const T of l.valueSpec.expression.parameters)d.add(T);if(d.size===0)return[];const v=[];return y instanceof a._&&!d.has(y.name)?[new a.V(l.key,l.value,`["${y.name}"] is not an allowed parameter`)]:(y.eachChild(T=>{v.push(...$t(T,l))}),v)}function Tn(y){const l=y.key,d=y.value,v=y.valueSpec,T=[];return Array.isArray(v.values)?v.values.indexOf(a.J(d))===-1&&T.push(new a.V(l,d,`expected one of [${v.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(v.values).indexOf(a.J(d))===-1&&T.push(new a.V(l,d,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(d)} found`)),T}function ur(y){return a.a2(a.S(y.value))?Br(Object.assign({},y,{expressionContext:"filter",valueSpec:y.styleSpec[`filter_${y.layerType||"fill"}`]})):Vr(y)}function Vr(y){const l=y.value,d=y.key;if(!Array.isArray(l))return[new a.V(d,l,`array expected, ${a.K(l)} found`)];if(l.length<1)return[new a.V(d,l,"filter array must have at least 1 element")];const v=y.styleSpec;let T=Tn({key:`${d}[0]`,value:l[0],valueSpec:v.filter_operator});const O=()=>{l.length>=2&&(a.a0(l[1])||T.push(new a.V(`${d}[1]`,l[1],`string expected, ${a.K(l[1])} found`)));for(let M=2;M<l.length;M++)a.J(l[1])==="$type"?T=T.concat(Tn({key:`${d}[${M}]`,value:l[M],valueSpec:v.geometry_type})):a.a0(l[M])||a.L(l[M])||a.$(l[M])||T.push(new a.V(`${d}[${M}]`,l[M],`string, number, or boolean expected, ${a.K(l[M])} found.`))};switch(a.J(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&a.J(l[1])==="$type"&&T.push(new a.V(d,l,`"$type" cannot be use with operator "${l[0]}"`)),l.length!==3&&T.push(new a.V(d,l,`filter array for operator "${l[0]}" must have 3 elements`)),O();break;case"==":case"!=":l.length!==3&&T.push(new a.V(d,l,`filter array for operator "${l[0]}" must have 3 elements`)),O();break;case"in":case"!in":O();break;case"any":case"all":case"none":for(let M=1;M<l.length;M++)T=T.concat(Vr({key:`${d}[${M}]`,value:l[M],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":l.length!==2?T.push(new a.V(d,l,`filter array for "${l[0]}" operator must have 2 elements`)):a.a0(l[1])||T.push(new a.V(`${d}[1]`,l[1],`string expected, ${a.K(l[1])} found`))}return T}function jr(y,l){const d=y.key,v=y.style,T=y.layer,O=y.styleSpec,M=y.value,R=y.objectKey,N=O[`${l}_${y.layerType}`];if(!N)return[];const q=R.match(/^(.*)-use-theme$/);if(q&&N[q[1]])return a.Q(a.S(M))?[].concat(mi({key:d,value:M,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:v,styleSpec:O,expressionContext:"property",propertyType:l,propertyKey:R})):mi({key:d,value:M,valueSpec:{type:"string"},style:v,styleSpec:O});const H=R.match(/^(.*)-transition$/);if(l==="paint"&&H&&N[H[1]]&&N[H[1]].transition)return mi({key:d,value:M,valueSpec:O.transition,style:v,styleSpec:O});const re=y.valueSpec||N[R];if(!re)return[new a.a3(d,M,`unknown property "${R}"`)];let ee;if(a.a0(M)&&a.N(re)&&!re.tokens&&(ee=/^{([^}]+)}$/.exec(M))){const he=`\`{ "type": "identity", "property": ${ee?JSON.stringify(ee[1]):'"_"'} }\``;return[new a.V(d,M,`"${R}" does not support interpolation syntax
Use an identity property function instead: ${he}.`)]}const oe=[];if(y.layerType==="symbol")R!=="text-field"||!v||v.glyphs||v.imports||oe.push(new a.V(d,M,'use of "text-field" requires a style "glyphs" property')),R==="text-font"&&a.a4(a.S(M))&&a.J(M.type)==="identity"&&oe.push(new a.V(d,M,'"text-font" does not support identity functions'));else if(y.layerType==="model"&&l==="paint"&&T&&T.layout&&T.layout.hasOwnProperty("model-id")&&a.N(re)&&(a.a5(re)||a.O(re))){const he=a.W(a.S(M),re).value,ce="expression"in he&&he.expression||"_styleExpression"in he&&he._styleExpression&&he._styleExpression.expression;ce&&!a.X(ce,["measure-light"])&&(R==="model-emissive-strength"&&a.Y(ce)&&a.Z(ce)||oe.push(new a.V(d,M,`${R} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return oe.concat(mi({key:y.key,value:M,valueSpec:re,style:v,styleSpec:O,expressionContext:"property",propertyType:l,propertyKey:R}))}function Ya(y){return jr(y,"paint")}function vo(y){return jr(y,"layout")}function Yo(y){let l=[];const d=y.value,v=y.key,T=y.style,O=y.styleSpec;if(!a.H(d))return[new a.V(v,d,"object expected")];d.type||d.ref||l.push(new a.V(v,d,'either "type" or "ref" is required'));let M=a.J(d.type);const R=a.J(d.ref);if(d.id){const N=a.J(d.id);for(let q=0;q<y.arrayIndex;q++){const H=T.layers[q];a.J(H.id)===N&&l.push(new a.V(v,d.id,`duplicate layer id "${N}", previously used at line ${H.id.__line__}`))}}if("ref"in d){let N;["type","source","source-layer","filter","layout"].forEach(q=>{q in d&&l.push(new a.V(v,d[q],`"${q}" is prohibited for ref layers`))}),T.layers.forEach(q=>{a.J(q.id)===R&&(N=q)}),N?N.ref?l.push(new a.V(v,d.ref,"ref cannot reference another ref layer")):M=a.J(N.type):typeof R=="string"&&l.push(new a.V(v,d.ref,`ref layer "${R}" not found`))}else if(M!=="background"&&M!=="sky"&&M!=="slot")if(d.source)if(a.a0(d.source)){const N=T.sources&&T.sources[d.source],q=N&&a.J(N.type);N?q==="vector"&&M==="raster"?l.push(new a.V(v,d.source,`layer "${d.id}" requires a raster source`)):q==="raster"&&M!=="raster"?l.push(new a.V(v,d.source,`layer "${d.id}" requires a vector source`)):q!=="vector"||d["source-layer"]?q==="raster-dem"&&M!=="hillshade"?l.push(new a.V(v,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):q!=="raster-array"||["raster","raster-particle"].includes(M)?M==="line"&&d.paint&&(d.paint["line-gradient"]||d.paint["line-trim-offset"])&&q==="geojson"&&!N.lineMetrics?l.push(new a.V(v,d,`layer "${d.id}" specifies a line-gradient, which requires the GeoJSON source to have \`lineMetrics\` enabled.`)):M==="raster-particle"&&q!=="raster-array"&&l.push(new a.V(v,d.source,`layer "${d.id}" requires a 'raster-array' source.`)):l.push(new a.V(v,d.source,"raster-array source can only be used with layer type 'raster'.")):l.push(new a.V(v,d,`layer "${d.id}" must specify a "source-layer"`)):l.push(new a.V(v,d.source,`source "${d.source}" not found`))}else l.push(new a.V(`${v}.source`,d.source,'"source" must be a string'));else l.push(new a.V(v,d,'missing required property "source"'));return l=l.concat(oo({key:v,value:d,valueSpec:O.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":()=>[],type:()=>mi({key:`${v}.type`,value:d.type,valueSpec:O.layer.type,style:y.style,styleSpec:y.styleSpec,object:d,objectKey:"type"}),filter:N=>ur(Object.assign({layerType:M},N)),layout:N=>oo({layer:d,key:N.key,value:N.value,valueSpec:{},style:N.style,styleSpec:N.styleSpec,objectElementValidators:{"*":q=>vo(Object.assign({layerType:M},q))}}),paint:N=>oo({layer:d,key:N.key,value:N.value,valueSpec:{},style:N.style,styleSpec:N.styleSpec,objectElementValidators:{"*":q=>Ya(Object.assign({layerType:M,layer:d},q))}}),appearances(N){const q=Er({key:N.key,value:N.value,valueSpec:N.valueSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:ee=>(function(oe){const{key:he,layer:ce,layerType:de}=oe,_e=a.J(oe.value),Me=a.J(_e.name),Ce=a.J(_e.condition),Ae=oo({key:he,value:_e,valueSpec:oe.styleSpec.appearance,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{condition:We=>(function($e){const Ge=[];return Ge.push(...Br({key:$e.key,value:$e.object.condition,valueSpec:a.a6.appearance.condition,expressionContext:"appearance"})),Ge})(Object.assign({layer:ce,layerType:de},We)),properties:We=>(function($e){const Ge=[],{styleSpec:Fe,layer:Re,layerType:et}=$e,nt=Fe[`paint_${et}`],st=Fe[`layout_${et}`],dt=$e.object[$e.objectKey];for(const ft in dt){const wt=ft in nt?"paint":ft in st?"layout":void 0;if(!wt){Ge.push(new a.V($e.key,ft,`unknown property "${ft}" for layer type "${et}"`));continue}const It=Object.assign({},$e,{key:`${$e.key}.${ft}`,object:dt,objectKey:ft,layer:Re,layerType:et,value:dt[ft],valueSpec:wt==="paint"?nt[ft]:st[ft]});Ge.push(...jr(It,wt))}return Ge})(Object.assign({layer:ce,layerType:de},We))}});return Me!=="hidden"&&Ce===void 0&&Ae.push(new a.V(oe.key,"name",'Appearance with name different than "hidden" must have a condition')),Ae})(Object.assign({layerType:M,layer:d},ee))}),H=Array.isArray(N.value)?N.value:[],re=new Set;return H.forEach((ee,oe)=>{const he=a.J(ee.name);if(he)if(re.has(he)){const ce=a.J(d.id);q.push(new a.V(N.key,he,`Duplicated appearance name "${he}" for layer "${ce}"`))}else re.add(he)}),q}}})),l}function Aa({key:y,value:l}){return a.a0(l)?[]:[new a.V(y,l,`string expected, ${a.K(l)} found`)]}const Qi={promoteId:function y({key:l,value:d}){if(a.a0(d))return Aa({key:l,value:d});if(Array.isArray(d)){const T=[],O=a.S(d),M=a.U(O);return M.result==="error"&&M.value.forEach(R=>{T.push(new a.V(`${l}${R.key}`,null,`${R.message}`))}),a.X(M.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||T.push(new a.V(`${l}`,null,"promoteId expression should be only feature dependent")),T}if(!a.H(d))return[new a.V(l,d,`string, expression or object expected, "${a.K(d)}" found`)];const v=[];for(const T in d)v.push(...y({key:`${l}.${T}`,value:d[T]}));return v}};function Ri(y){const l=y.value,d=y.key,v=y.styleSpec,T=y.style;if(!a.H(l))return[new a.V(d,l,`object expected, ${a.K(l)} found`)];if(!("type"in l))return[new a.V(d,l,'"type" is required')];const O=a.J(l.type);let M=[];switch(["vector","raster","raster-dem","raster-array"].includes(O)&&("url"in l||"tiles"in l||M.push(new a.a3(d,l,'Either "url" or "tiles" is required.'))),O){case"vector":case"raster":case"raster-dem":case"raster-array":return M=M.concat(oo({key:d,value:l,valueSpec:v[`source_${O.replace("-","_")}`],style:y.style,styleSpec:v,objectElementValidators:Qi})),M;case"geojson":if(M=oo({key:d,value:l,valueSpec:v.source_geojson,style:T,styleSpec:v,objectElementValidators:Qi}),"cluster"in l&&"clusterProperties"in l){if(!a.H(l.clusterProperties))return[new a.V(`${d}.clusterProperties`,l,`object expected, ${a.K(l)} found`)];for(const R in l.clusterProperties){const N=l.clusterProperties[R];if(!Array.isArray(N))return[new a.V(`${d}.clusterProperties.${R}`,N,"array expected")];const[q,H]=N,re=typeof q=="string"?[q,["accumulated"],["get",R]]:q;M.push(...Br({key:`${d}.${R}.map`,value:H,expressionContext:"cluster-map"})),M.push(...Br({key:`${d}.${R}.reduce`,value:re,expressionContext:"cluster-reduce"}))}}return M;case"video":return oo({key:d,value:l,valueSpec:v.source_video,style:T,styleSpec:v});case"image":return oo({key:d,value:l,valueSpec:v.source_image,style:T,styleSpec:v});case"canvas":return[new a.V(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Tn({key:`${d}.type`,value:l.type,valueSpec:{values:zs(v)}})}}function zs(y){return y.source.reduce((l,d)=>{const v=y[d];return v.type.type==="enum"&&(l=l.concat(Object.keys(v.type.values||{}))),l},[])}function is(y){const l=y.value,d=y.styleSpec,v=d.light,T=y.style;if(l===void 0)return[];if(!a.H(l))return[new a.V("light",l,`object expected, ${a.K(l)} found`)];let O=[];for(const M in l){const R=M.match(/^(.*)-transition$/),N=M.match(/^(.*)-use-theme$/);O=O.concat(N&&v[N[1]]?mi({key:M,value:l[M],valueSpec:{type:"string"},style:T,styleSpec:d}):R&&v[R[1]]&&v[R[1]].transition?mi({key:M,value:l[M],valueSpec:d.transition,style:T,styleSpec:d}):v[M]?mi({key:M,value:l[M],valueSpec:v[M],style:T,styleSpec:d}):[new a.V(M,l[M],`unknown property "${M}"`)])}return O}function lf(y){const l=y.value;if(!l)return[];const d=y.key;if(!a.H(l))return[new a.V(d,l,`object expected, ${a.K(l)} found`)];let v=[];const T=y.styleSpec,O=T["light-3d"],M=y.style,R=y.style.lights;for(const H of["type","id"])if(!(H in l))return v=v.concat([new a.V(d,l,`missing property "${H}"`)]),v;if(!a.a0(l.type))return v=v.concat([new a.V(`${d}.type`,l.type,"string expected")]),v;if(R)for(let H=0;H<y.arrayIndex;H++){const re=a.J(l.type),ee=R[H];a.J(ee.type)===re&&v.push(new a.V(d,l.id,`duplicate light type "${l.type}", previously defined at line ${ee.id.__line__}`))}const N=`properties_light_${l.type}`;if(!(N in T))return v=v.concat([new a.V(`${d}.type`,l,`Invalid light type ${l.type}`)]),v;const q=T[N];for(const H in l)if(H==="properties"){const re=l[H];if(!a.H(re))return v=v.concat([new a.V("properties",re,`object expected, ${a.K(re)} found`)]),v;for(const ee in re){const oe=ee.match(/^(.*)-transition$/),he=ee.match(/^(.*)-use-theme$/);v=v.concat(he&&q[he[1]]?mi({key:H,value:re[ee],valueSpec:{type:"string"},style:M,styleSpec:T}):oe&&q[oe[1]]&&q[oe[1]].transition?mi({key:H,value:l[H],valueSpec:T.transition,style:M,styleSpec:T}):q[ee]?mi({key:ee,value:re[ee],valueSpec:q[ee],style:M,styleSpec:T}):[new a.a3(y.key,re[ee],`unknown property "${ee}"`)])}}else v=v.concat(O[H]?mi({key:H,value:l[H],valueSpec:O[H],style:M,styleSpec:T}):[new a.a3(H,l[H],`unknown property "${H}"`)]);return v}function zu(y){const l=y.value,d=y.key,v=y.style,T=y.styleSpec,O=T.terrain;if(l==null)return[];if(!a.H(l))return[new a.V("terrain",l,`object expected, ${a.K(l)} found`)];let M=[];for(const R in l){const N=R.match(/^(.*)-transition$/),q=R.match(/^(.*)-use-theme$/);M=M.concat(q&&O[q[1]]?mi({key:R,value:l[R],valueSpec:{type:"string"},style:v,styleSpec:T}):N&&O[N[1]]&&O[N[1]].transition?mi({key:R,value:l[R],valueSpec:T.transition,style:v,styleSpec:T}):O[R]?mi({key:R,value:l[R],valueSpec:O[R],style:v,styleSpec:T}):[new a.a3(R,l[R],`unknown property "${R}"`)])}if(l.source)if(a.a0(l.source)){const R=v.sources&&v.sources[l.source],N=R&&a.J(R.type);R?N!=="raster-dem"&&M.push(new a.V(`${d}.source`,l.source,`terrain cannot be used with a source of type ${N}, it only be used with a "raster-dem" source type`)):M.push(new a.V(`${d}.source`,l.source,`source "${l.source}" not found`))}else M.push(new a.V(`${d}.source`,l.source,"source must be a string"));else M.push(new a.V(d,l,'terrain is missing required property "source"'));return M}function Fu(y){const l=y.value,d=y.style,v=y.styleSpec,T=v.fog;if(l===void 0)return[];if(!a.H(l))return[new a.V("fog",l,`object expected, ${a.K(l)} found`)];let O=[];for(const M in l){const R=M.match(/^(.*)-transition$/),N=M.match(/^(.*)-use-theme$/);O=O.concat(N&&T[N[1]]?mi({key:M,value:l[M],valueSpec:{type:"string"},style:d,styleSpec:v}):R&&T[R[1]]&&T[R[1]].transition?mi({key:M,value:l[M],valueSpec:v.transition,style:d,styleSpec:v}):T[M]?mi({key:M,value:l[M],valueSpec:T[M],style:d,styleSpec:v}):[new a.a3(M,l[M],`unknown property "${M}"`)])}return O}const uf={"*":()=>[],array:Er,boolean:function(y){const l=y.value,d=y.key;return a.$(l)?[]:[new a.V(d,l,`boolean expected, ${a.K(l)} found`)]},number:Tr,color:function({key:y,value:l}){return a.a0(l)?a.a1.parseCSSColor(l)===null?[new a.V(y,l,`color expected, "${l}" found`)]:[]:[new a.V(y,l,`color expected, ${a.K(l)} found`)]},enum:Tn,filter:ur,function:pi,layer:Yo,object:oo,source:Ri,model:a.a7,light:is,"light-3d":lf,terrain:zu,fog:Fu,string:Aa,formatted:function(y){return Aa(y).length===0?[]:Br(y)},resolvedImage:function(y){return Aa(y).length===0?[]:Br(y)},projection:function(y){const l=y.value,d=y.styleSpec,v=d.projection,T=y.style;if(a.H(l)){let O=[];for(const M in l)O=O.concat(mi({key:M,value:l[M],valueSpec:v[M],style:T,styleSpec:d}));return O}return a.a0(l)?[]:[new a.V("projection",l,`object or string expected, ${a.K(l)} found`)]},import:function(y){const l=y.key,{value:d,styleSpec:v}=y;if(!a.H(d))return[new a.V(l,d,"import must be an object")];const{data:T,...O}=d;Object.defineProperty(O,"__line__",{value:d.__line__,enumerable:!1});let M=oo(Object.assign({},y,{value:O,valueSpec:v.import}));return a.J(O.id)===""&&M.push(new a.V(`${y.key}.id`,O,"import id can't be an empty string")),T&&(M=M.concat(Ip(T,v,{key:`${y.key}.data`}))),M},iconset:function(y){const l=y.value,d=y.key,v=y.styleSpec,T=y.style;if(!a.H(l))return[new a.V(d,l,"object expected")];if(!l.type)return[new a.V(d,l,'"type" is required')];const O=a.J(l.type);let M=[];if(M=M.concat(oo({key:d,value:l,valueSpec:v[`iconset_${O}`],style:T,styleSpec:v})),(function(R,N){return!(R!=="source"||!N.source)})(O,l)){const R=T.sources&&T.sources[l.source],N=R&&a.J(R.type);R?N!=="raster-array"&&M.push(new a.V(d,l.source,`iconset cannot be used with a source of type ${String(N)}, it only be used with a "raster-array" source type`)):M.push(new a.V(d,l.source,`source "${l.source}" not found`))}return M}};function mi(y,l=!1){const d=y.value,v=y.valueSpec,T=y.styleSpec;if(v.expression){if(a.a4(a.J(d)))return pi(y);if(a.Q(a.S(d)))return Br(y)}if(v.type&&uf[v.type]){const O=uf[v.type](y);return l===!0&&O.length>0&&Array.isArray(y.value)?Br(y):O}return oo(Object.assign({},y,{valueSpec:v.type?T[v.type]:v}))}function oo(y){const l=y.key,d=y.value,v=y.valueSpec||{},T=y.objectElementValidators||{},O=y.style,M=y.styleSpec;if(!a.H(d))return[new a.V(l,d,`object expected, ${a.K(d)} found`)];let R=[];for(const N in d){const q=N.split(".")[0];let H;T[q]?H=T[q]:v[q]?H=mi:T["*"]?H=T["*"]:v["*"]&&(H=mi),H?R=R.concat(H({key:(l&&`${l}.`)+N,value:d[N],valueSpec:v[q]||v["*"],style:O,styleSpec:M,object:d,objectKey:N},d)):R.push(new a.a3(l,d[N],`unknown property "${N}"`))}for(const N in v){if(T[N])continue;const q=v[N];q.required&&q.default===void 0&&d[N]===void 0&&R.push(new a.V(l,d,`missing required property "${N}"`))}return R}function ah({key:y,value:l}){const d=Aa({key:y,value:l});if(d.length)return d;const v=l;return v.indexOf("{fontstack}")===-1&&d.push(new a.V(y,l,'"glyphs" url must include a "{fontstack}" token')),v.indexOf("{range}")===-1&&d.push(new a.V(y,l,'"glyphs" url must include a "{range}" token')),d}function Ip(y,l=a.a6,d={}){return oo({key:d.key||"",value:y,valueSpec:Object.assign(l.$root,{"*":{type:"*"}}),styleSpec:l,style:y,objectElementValidators:{glyphs:ah}})}function wl(y,l=a.a6){return ze(Ip(y,l))}const _g=y=>ze(Ri(y)),wc=y=>ze(is(y)),Vt=y=>ze(lf(y)),Sc=y=>ze(zu(y)),b_=y=>ze(Fu(y)),Pp=y=>ze((function(l){const d=l.value,v=l.style,T=l.styleSpec,O=T.snow;if(d===void 0)return[];if(!a.H(d))return[new a.V("snow",d,`object expected, ${a.K(d)} found`)];let M=[];for(const R in d){const N=R.match(/^(.*)-transition$/);M=M.concat(N&&O[N[1]]&&O[N[1]].transition?mi({key:R,value:d[R],valueSpec:T.transition,style:v,styleSpec:T}):O[R]?mi({key:R,value:d[R],valueSpec:O[R],style:v,styleSpec:T}):[new a.a3(R,d[R],`unknown property "${R}"`)])}return M})(y)),Ar=y=>ze((function(l){const d=l.value,v=l.style,T=l.styleSpec,O=T.rain;if(d===void 0)return[];if(!a.H(d))return[new a.V("rain",d,`object expected, ${a.K(d)} found`)];let M=[];for(const R in d){const N=R.match(/^(.*)-transition$/);M=M.concat(N&&O[N[1]]&&O[N[1]].transition?mi({key:R,value:d[R],valueSpec:T.transition,style:v,styleSpec:T}):O[R]?mi({key:R,value:d[R],valueSpec:O[R],style:v,styleSpec:T}):[new a.a3(R,d[R],`unknown property "${R}"`)])}return M})(y)),ut=y=>ze(Yo(y)),me=y=>ze(ur(y)),we=y=>ze(Ya(y)),Le=y=>ze(vo(y)),Qe=y=>ze(a.a7(y));function ze(y){return y.slice().sort((l,d)=>l.line&&d.line?l.line-d.line:0)}function ot(y,l){let d=!1;if(l&&l.length)for(const v of l)v instanceof a.a3?a.w(v.message):(y.fire(new a.y(new Error(v.message))),d=!0);return d}const _t=a.a6.light;let lt;class bt extends a.E{constructor(l,d="flat"){super(),this._transitionable=new a.a8(lt||(lt=new a.a9({anchor:new a.aa(_t.anchor),position:new a.ab(_t.position),color:new a.aa(_t.color),intensity:new a.aa(_t.intensity)}))),this.setLight(l,d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,d,v={}){this._validate(wc,l,v)||(this._transitionable.setTransitionOrValue(l),this.id=d)}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,v){return(!v||v.validate!==!1)&&ot(this,l.call(wl,Object.assign({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.a6})))}}const Gt=a.a6.terrain;let Nt=class extends a.E{constructor(y,l,d,v,T){super(),this.scope=d,this._transitionable=new a.a8(new a.a9({source:new a.aa(Gt.source),exaggeration:new a.aa(Gt.exaggeration)}),d,v),this._transitionable.setTransitionOrValue(y,v),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l,this.worldview=T}get(){return this._transitionable.serialize()}set(y,l){this._transitionable.setTransitionOrValue(y,l)}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}getExaggeration(y){return this._transitioning.possiblyEvaluate(new a.ac(y,{worldview:this.worldview})).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const y=this._transitionable._values.exaggeration;if(!y)return null;const l=y.value.expression;if(!l)return null;let d=-1,v=-1,T=1;for(const O of l.zoomStops)T=l.evaluate(new a.ac(O,{worldview:this.worldview})),T>.01?(d=O,v=-1):v=O;return T<.01&&d>0&&v>d?[d,v]:null}isZoomDependent(){const y=this._transitionable._values.exaggeration;return y!=null&&y.value!=null&&y.value.expression!=null&&y.value.expression instanceof a.ad}};const hn=.05;function Mn(y,l,d,v){const T=a.ah(45,65,d),[O,M]=Rn(y,v);let R=1-Math.min(1,Math.exp((l-O)/(M-O)*-6));return R*=R*R,R=Math.min(1,1.00747*R),R*T*y.alpha}function Rn(y,l){const d=.5/Math.tan(.5*l);return[y.range[0]+d,y.range[1]+d]}function Zn(y,l,d,v,T){const O=a.af([],[l,d,v],T.mercatorFogMatrix);return Mn(y,a.ag(O),T.pitch,T._fov)}function rr(y,l,d,v,T,O,M){const R=[[d,v,0],[T,v,0],[T,O,0],[d,O,0]];let N=Number.MAX_VALUE,q=-Number.MAX_VALUE;for(const H of R){const re=a.af([],H,l),ee=a.ag(re);N=Math.min(N,ee),q=Math.max(q,ee)}return[Mn(y,N,M.pitch,M._fov),Mn(y,q,M.pitch,M._fov)]}const In=a.a6.fog;class Hn extends a.E{constructor(l,d,v,T){super();const O=new a.a9({range:new a.aa(In.range),color:new a.aa(In.color),"color-use-theme":new a.aa({type:"string","property-type":"data-constant",default:"default"}),"high-color":new a.aa(In["high-color"]),"high-color-use-theme":new a.aa({type:"string","property-type":"data-constant",default:"default"}),"space-color":new a.aa(In["space-color"]),"space-color-use-theme":new a.aa({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new a.aa(In["horizon-blend"]),"star-intensity":new a.aa(In["star-intensity"]),"vertical-range":new a.aa(In["vertical-range"])});this._transitionable=new a.a8(O,v,new Map(T)),this.set(l,T),this._transitioning=this._transitionable.untransitioned(),this._transform=d,this.properties=new a.ai(O),this.scope=v}get state(){const l=this._transform,d=l.projection.name==="globe",v=a.aj(l.zoom),T=this.properties.get("range"),O=[.5,3];return{range:d?[a.ak(O[0],T[0],v),a.ak(O[1],T[1],v)]:T,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,d,v={}){if(this._validate(b_,l,v))return;const T=Object.assign({},l);for(const O of Object.keys(In))T[O]===void 0&&(T[O]=In[O].default);this._options=T,this._transitionable.setTransitionOrValue(this._options,d)}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:a.ah(45,65,l))*d.a}getOpacityAtLatLng(l,d){return this._transform.projection.supportsFog?(function(v,T,O){const M=a.ae.fromLngLat(T),R=O.elevation?O.elevation.getAtPointOrZero(M):0;return Zn(v,M.x,M.y,R,O)})(this.state,l,d):0}getOpacityForTile(l){if(!this._transform.projection.supportsFog)return[1,1];const d=this._transform.calculateFogTileMatrix(l.toUnwrapped());return rr(this.state,d,0,0,a.al,a.al,this._transform)}getOpacityForBounds(l,d,v,T,O){return this._transform.projection.supportsFog?rr(this.state,l,d,v,T,O,this._transform):[1,1]}getFovAdjustedRange(l){return this._transform.projection.supportsFog?Rn(this.state,l):[0,1]}isVisibleOnFrustum(l){if(!this._transform.projection.supportsFog)return!1;const d=[4,5,6,7];for(const v of d){const T=l.points[v];let O;if(T[2]>=0)O=T;else{const M=l.points[v-4];O=a.am(M,T,M[2]/(M[2]-T[2]))}if(Zn(this.state,O[0],O[1],0,this._transform)>=hn)return!0}return!1}updateConfig(l){this._transitionable.setTransitionOrValue(this._options,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,v){return(!v||v.validate!==!1)&&ot(this,l.call(wl,Object.assign({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.a6})))}}let xi,sa,zi,_a=class extends a.E{constructor(y,l,d,v){super();const T=xi||(xi=new a.a9({density:new a.aa(a.a6.snow.density),intensity:new a.aa(a.a6.snow.intensity),color:new a.aa(a.a6.snow.color),opacity:new a.aa(a.a6.snow.opacity),vignette:new a.aa(a.a6.snow.vignette),"vignette-color":new a.aa(a.a6.snow["vignette-color"]),"center-thinning":new a.aa(a.a6.snow["center-thinning"]),direction:new a.aa(a.a6.snow.direction),"flake-size":new a.aa(a.a6.snow["flake-size"])}));this._transitionable=new a.a8(T,d,new Map(v)),this.set(y,v),this._transitioning=this._transitionable.untransitioned(),this.properties=new a.ai(T),this.scope=d}get state(){const y=this.properties.get("opacity"),l=this.properties.get("color"),d=this.properties.get("direction"),v=a.an(d[0]),T=-Math.max(a.an(d[1]),.01),O=[Math.cos(v)*Math.cos(T),Math.sin(v)*Math.cos(T),Math.sin(T)],M=this.properties.get("vignette"),R=this.properties.get("vignette-color");return R.a=M,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new a.ao(l.r,l.g,l.b,l.a*y),direction:O,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:R}}get(){return this._transitionable.serialize()}set(y,l,d={}){if(this._validate(Pp,y,d))return;const v=Object.assign({},y),T=a.a6.snow;for(const O of Object.keys(T))v[O]===void 0&&(v[O]=T[O].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,l)}updateConfig(y){this._transitionable.setTransitionOrValue(this._options,new Map(y))}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}_validate(y,l,d){return(!d||d.validate!==!1)&&ot(this,y.call(wl,Object.assign({value:l,style:{glyphs:!0,sprite:!0},styleSpec:a.a6})))}},ki=class extends a.E{constructor(y,l,d,v){super();const T=sa||(sa=new a.a9({density:new a.aa(a.a6.rain.density),intensity:new a.aa(a.a6.rain.intensity),color:new a.aa(a.a6.rain.color),opacity:new a.aa(a.a6.rain.opacity),vignette:new a.aa(a.a6.rain.vignette),"vignette-color":new a.aa(a.a6.rain["vignette-color"]),"center-thinning":new a.aa(a.a6.rain["center-thinning"]),direction:new a.aa(a.a6.rain.direction),"droplet-size":new a.aa(a.a6.rain["droplet-size"]),"distortion-strength":new a.aa(a.a6.rain["distortion-strength"])}));this._transitionable=new a.a8(T,d,new Map(v)),this.set(y,v),this._transitioning=this._transitionable.untransitioned(),this.properties=new a.ai(T),this.scope=d}get state(){const y=this.properties.get("opacity"),l=this.properties.get("color"),d=this.properties.get("direction"),v=a.an(d[0]),T=-Math.max(a.an(d[1]),.01),O=[Math.cos(v)*Math.cos(T),Math.sin(v)*Math.cos(T),Math.sin(T)],M=this.properties.get("vignette-color");return M.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new a.ao(l.r,l.g,l.b,l.a*y),direction:O,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:M}}get(){return this._transitionable.serialize()}set(y,l,d={}){if(this._validate(Ar,y,d))return;const v=Object.assign({},y),T=a.a6.rain;for(const O of Object.keys(T))v[O]===void 0&&(v[O]=T[O].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,l)}updateConfig(y){this._transitionable.setTransitionOrValue(this._options,new Map(y))}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}_validate(y,l,d){return(!d||d.validate!==!1)&&ot(this,y.call(wl,Object.assign({value:l,style:{glyphs:!0,sprite:!0},styleSpec:a.a6})))}};class Or extends a.E{constructor(l,d,v,T){super(),this.scope=v,this._options=l,this.properties=new a.ai(d),this._transitionable=new a.a8(d,v,new Map(T)),this._transitionable.setTransitionOrValue(l.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(l){this._transitionable.setTransitionOrValue(this._options.properties,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(l,d){this._options=l,this._transitionable.setTransitionOrValue(l.properties,d)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}const ji=()=>zi||(zi=new a.a9({color:new a.aa(a.a6.properties_light_ambient.color),"color-use-theme":new a.aa({type:"string",default:"default","property-type":"data-constant"}),intensity:new a.aa(a.a6.properties_light_ambient.intensity)}));let si;const li=()=>si||(si=new a.a9({direction:new a.ap(a.a6.properties_light_directional.direction),color:new a.aa(a.a6.properties_light_directional.color),"color-use-theme":new a.aa({type:"string",default:"default","property-type":"data-constant"}),intensity:new a.aa(a.a6.properties_light_directional.intensity),"cast-shadows":new a.aa(a.a6.properties_light_directional["cast-shadows"]),"shadow-quality":new a.aa(a.a6.properties_light_directional["shadow-quality"]),"shadow-intensity":new a.aa(a.a6.properties_light_directional["shadow-intensity"]),"shadow-draw-before-layer":new a.aa(a.a6.properties_light_directional["shadow-draw-before-layer"])}));class wi{constructor(l,d,v){this.screenBounds=l,this.cameraPoint=v.getCameraPoint(),this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=d,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(l,d){let v,T;if(l instanceof a.P||typeof l[0]=="number"){const O=a.P.convert(l);v=[O],T=d.isPointAboveHorizon(O)}else{const O=a.P.convert(l[0]),M=a.P.convert(l[1]),R=O.add(M)._div(2);v=[O,M],T=a.aq(O,M).every(N=>d.isPointAboveHorizon(N))&&d.isPointAboveHorizon(R)}return new wi(v,T,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return a.aq(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const d=this.screenBounds[0],v=this.screenBounds.length===1?this.screenBounds[0].add(new a.P(1,1)):this.screenBounds[1],T=a.aq(d,v,0,!1);return this.cameraPoint.y>v.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<v.x?T.splice(3,0,this.cameraPoint):this.cameraPoint.x>=v.x?T[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(T[3]=this.cameraPoint)),a.ar(T,l)}bufferedCameraGeometryGlobe(l){const d=this.screenBounds[0],v=this.screenBounds.length===1?this.screenBounds[0].add(new a.P(1,1)):this.screenBounds[1],T=a.aq(d,v,l),O=this.cameraPoint.clone();switch(3*((O.y>d.y)+(O.y>v.y))+((O.x>d.x)+(O.x>v.x))){case 0:T[0]=O,T[4]=O.clone();break;case 1:T.splice(1,0,O);break;case 2:T[1]=O;break;case 3:T.splice(4,0,O);break;case 5:T.splice(2,0,O);break;case 6:T[3]=O;break;case 7:T.splice(3,0,O);break;case 8:T[2]=O}return T}containsTile(l,d,v,T=0){const O=Math.max(l.queryPadding,l.evaluateQueryRenderedFeaturePadding())/d._pixelsPerMercatorPixel+1,M=v?this._bufferedCameraMercator(O,d):this._bufferedScreenMercator(O,d);let R=l.tileID.wrap+(M.unwrapped?T:0);const N=M.polygon.map(de=>a.as(l.tileTransform,de,R));if(!a.at(N,0,0,a.al,a.al))return;R=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?T:0);const q=this.screenGeometryMercator.polygon.map(de=>a.au(l.tileTransform,de,R)),H=q.map(de=>new a.P(de[0],de[1])),re=d.getFreeCameraOptions().position||new a.ae(0,0,0),ee=a.au(l.tileTransform,re,R),oe=q.map(de=>{const _e=a.av(de,de,ee);return a.aw(_e,_e),new a.ax(ee,_e)}),he=a.ay(l,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:H,tilespaceRays:oe,bufferedTilespaceGeometry:N,bufferedTilespaceBounds:(ce=a.az(N),ce.min.x=a.aA(ce.min.x,0,a.al),ce.min.y=a.aA(ce.min.y,0,a.al),ce.max.x=a.aA(ce.max.x,0,a.al),ce.max.y=a.aA(ce.max.y,0,a.al),ce),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:he};var ce}_bufferedScreenMercator(l,d){const v=Ja(l);if(this._screenRaycastCache[v])return this._screenRaycastCache[v];{let T;return T=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),d):{polygon:this.bufferedScreenGeometry(l).map(O=>d.pointCoordinate3D(O)),unwrapped:!0},this._screenRaycastCache[v]=T,T}}_bufferedCameraMercator(l,d){const v=Ja(l);if(this._cameraRaycastCache[v])return this._cameraRaycastCache[v];{let T;return T=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),d):{polygon:this.bufferedCameraGeometry(l).map(O=>d.pointCoordinate3D(O)),unwrapped:!0},this._cameraRaycastCache[v]=T,T}}_projectAndResample(l,d){const v=(function(O,M){const R=a.aB([],M.pixelMatrix,M.globeMatrix),N=[0,-a.aD,0,1],q=[0,a.aD,0,1],H=[0,0,0,1];a.aC(N,N,R),a.aC(q,q,R),a.aC(H,H,R);const re=new a.P(N[0]/N[3],N[1]/N[3]),ee=new a.P(q[0]/q[3],q[1]/q[3]),oe=a.aE(O,re)&&N[3]<H[3],he=a.aE(O,ee)&&q[3]<H[3];if(!oe&&!he)return null;const ce=(function(Ge,Fe,Re){for(let et=1;et<Ge.length;et++){const nt=bo(Fe.pointCoordinate3D(Ge[et-1]).x),st=bo(Fe.pointCoordinate3D(Ge[et]).x);if(Re<0){if(nt<st)return{idx:et,t:-nt/(st-1-nt)}}else if(st<nt)return{idx:et,t:(1-nt)/(st+1-nt)}}return null})(O,M,oe?-1:1);if(!ce)return null;const{idx:de,t:_e}=ce;let Me=de>1?la(O.slice(0,de),M):[],Ce=de<O.length?la(O.slice(de),M):[];Me=Me.map(Ge=>new a.P(bo(Ge.x),Ge.y)),Ce=Ce.map(Ge=>new a.P(bo(Ge.x),Ge.y));const Ae=[...Me];Ae.length===0&&Ae.push(Ce[Ce.length-1]);const We=a.ak(Ae[Ae.length-1].y,(Ce.length===0?Me[0]:Ce[0]).y,_e);let $e;return $e=oe?[new a.P(0,We),new a.P(0,0),new a.P(1,0),new a.P(1,We)]:[new a.P(1,We),new a.P(1,1),new a.P(0,1),new a.P(0,We)],Ae.push(...$e),Ce.length===0?Ae.push(Me[0]):Ae.push(...Ce),{polygon:Ae.map(Ge=>new a.ae(Ge.x,Ge.y)),unwrapped:!1}})(l,d);if(v)return v;const T=(function(O,M){let R=!1,N=-1/0,q=0;for(let re=0;re<O.length-1;re++)O[re].x>N&&(N=O[re].x,q=re);for(let re=0;re<O.length-1;re++){const ee=(q+re)%(O.length-1),oe=O[ee],he=O[ee+1];Math.abs(oe.x-he.x)>.5&&(oe.x<he.x?(oe.x+=1,ee===0&&(O[O.length-1].x+=1)):(he.x+=1,ee+1===O.length-1&&(O[0].x+=1)),R=!0)}const H=a.aF(M.center.lng);return R&&H<Math.abs(H-1)&&O.forEach(re=>{re.x-=1}),{polygon:O,unwrapped:R}})(la(l,d).map(O=>new a.P(bo(O.x),O.y)),d);return{polygon:T.polygon.map(O=>new a.ae(O.x,O.y)),unwrapped:T.unwrapped}}}function la(y,l){return a.aG(y,d=>{const v=l.pointCoordinate3D(d);d.x=v.x,d.y=v.y},1/256)}function bo(y){return y<0?1+y%1:y%1}function Ja(y){return 100*y|0}function Tc(y,l,d,v,T){const O=function(R,N){if(R)return T(R);if(N){if(y.url&&N.tiles&&y.tiles&&delete y.tiles,N.variants){if(!Array.isArray(N.variants))return T(new Error("variants must be an array"));for(const H of N.variants){if(H==null||typeof H!="object"||H.constructor!==Object)return T(new Error("variant must be an object"));if(!Array.isArray(H.capabilities))return T(new Error("capabilities must be an array"));if(H.capabilities.length===1&&H.capabilities[0]==="meshopt"){N=Object.assign(N,H);break}}}const q=a.aH(Object.assign({},N,y),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","extra_bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);q.tiles=l.canonicalizeTileset(q,y.url),T(null,q)}},M=(function(R,N,q){if(!R)return null;if(!N&&!q)return R;q=q||R.worldview_default;const H=Object.values(R.language||{});if(H.length===0)return null;const re=Object.values(R.worldview||{});if(re.length===0)return null;const ee=H.every(he=>he===N),oe=re.every(he=>he===q);return ee&&oe?R:N in(R.language_options||{})||q in(R.worldview_options||{})?null:R.language_options&&R.worldview_options?R:null})(y.data,d,v);return M?a.o.frame(()=>O(null,M)):y.url?a.m(l.transformRequest(l.normalizeSourceURL(y.url,null,d,v),a.R.Source),O):a.o.frame(()=>{const{data:R,...N}=y;O(null,N)})}function as(y,l){const d=Math.pow(2,l.z),v=Math.floor(a.aF(y.getWest())*d),T=Math.floor(a.aJ(y.getNorth())*d),O=Math.ceil(a.aF(y.getEast())*d),M=Math.ceil(a.aJ(y.getSouth())*d);return l.x>=v&&l.x<O&&l.y>=T&&l.y<M}class bs{constructor(l,d,v){this.bounds=l?a.aI.convert(this.validateBounds(l)):null,this.minzoom=d||0,this.maxzoom=v||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}addExtraBounds(l){if(l){this.extraBounds||(this.extraBounds=[]);for(const d of l)this.extraBounds.push(a.aI.convert(this.validateBounds(d)))}}contains(l){if(l.z>this.maxzoom||l.z<this.minzoom||this.bounds&&!as(this.bounds,l))return!1;if(!this.extraBounds)return!0;for(const d of this.extraBounds)if(as(d,l))return!0;return!1}static fromTileJSON(l){if(!l.bounds&&!l.extra_bounds)return null;const d=new bs(l.bounds,l.minzoom,l.maxzoom);return d.addExtraBounds(l.extra_bounds),d}}class ru extends a.E{constructor(l,d,v,T){if(super(),this.id=l,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,Object.assign(this,a.aH(d,["url","scheme","tileSize","promoteId"])),this._options=Object.assign({type:"vector"},d),this._collectResourceTiming=!!d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(T),this._tileWorkers={},this._deduped=new a.aK}load(l){this._loaded=!1,this.fire(new a.z("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,v=this.map.getWorldview();this._tileJSONRequest=Tc(this._options,this.map._requestManager,d,v,(T,O)=>{if(this._tileJSONRequest=null,this._loaded=!0,T)d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),v&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${v}`),this.fire(new a.y(T));else if(O){if(Object.assign(this,O),this.hasWorldviews=!!O.worldview_options,O.worldview_default&&(this.worldviewDefault=O.worldview_default),O.vector_layers){this.vectorLayers=O.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const M of O.vector_layers)this.vectorLayerIds.push(M.id),O.worldview&&O.worldview[M.source]&&this.localizableLayerIds.add(M.id)}this.tileBounds=bs.fromTileJSON(O),Pe(O.tiles,this.map._requestManager._customAccessToken),this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))}l&&l(T)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=a.B(this.id,this.scope);this.load(()=>this.map.style.clearSource(l))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(l){this.cancelTileJSONRequest()}serialize(){return Object.assign({},this._options)}loadTile(l,d){const v=l.tileID.canonical.url(this.tiles,this.scheme),T=this.map._requestManager.normalizeTileURL(v),O=this.map._requestManager.transformRequest(T,a.R.Tile),M=this.map.style?this.map.style.getLut(this.scope):null,R=M?{image:M.image.clone()}:null,N={request:O,data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,lut:R,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:a.o.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:l.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor(),worldview:this.map.getWorldview()||this.worldviewDefault,indoor:this.map.getIndoorTileOptions(this.id,this.scope)};if(this.hasWorldviews&&a.h(v)&&(N.localizableLayerIds=this.localizableLayerIds),N.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=d:l.request=l.actor.send("reloadTile",N,q.bind(this));else if(l.actor=this._tileWorkers[T]=this._tileWorkers[T]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",N,q.bind(this),void 0,!0);else{const H=a.aL.call({deduped:this._deduped},N,(re,ee)=>{if(re||!ee)q.call(this,re);else{const oe=a.aM(ee.responseHeaders);N.data={rawData:ee.rawData.slice(0),expires:oe.expires,cacheControl:oe.cacheControl},l.actor&&l.actor.send("loadTile",N,q.bind(this),void 0,!0)}},!0);l.request={cancel:H}}function q(H,re){return delete l.request,l.aborted?d(null):H&&H instanceof a.aN&&H.status!==404?d(H):(re&&re.resourceTiming&&(l.resourceTiming=re.resourceTiming),this.map._refreshExpiredTiles&&re&&l.setExpiryData(re),l.loadVectorData(re,this.map.painter),a.aO(this.dispatcher),d(null,re),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(l,d){l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope}),l.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class so extends a.E{constructor(l,d,v,T){super(),this.id=l,this.dispatcher=v,this.setEventedParent(T),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=Object.assign({type:"raster"},d),Object.assign(this,a.aH(d,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new a.z("dataloading",{dataType:"source"}));const d=this.map.getWorldview();this._tileJSONRequest=Tc(this._options,this.map._requestManager,null,d,(v,T)=>{this._tileJSONRequest=null,this._loaded=!0,v?this.fire(new a.y(v)):T&&(Object.assign(this,T),T.raster_layers&&(this.rasterLayers=T.raster_layers,this.rasterLayerIds=this.rasterLayers.map(O=>O.id)),this.tileBounds=bs.fromTileJSON(T),Pe(T.tiles),this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))),l&&l(v)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=a.B(this.id,this.scope);this.load(()=>this.map.style.clearSource(l))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(l){this.cancelTileJSONRequest()}serialize(){return Object.assign({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,d){const v=a.o.devicePixelRatio>=2,T=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),v,this.tileSize);l.request=a.n(this.map._requestManager.transformRequest(T,a.R.Tile),(O,M,R)=>{if(delete l.request,l.aborted)return l.state="unloaded",d(null);if(O)return l.state="errored",d(O);if(!M)return d(null);const N=a.aM(R);this.map._refreshExpiredTiles&&l.setExpiryData(N),l.setTexture(M,this.map.painter),l.state="loaded",a.aO(this.dispatcher),d(null)})}abortTile(l,d){l.request&&(l.request.cancel(),delete l.request),d&&d()}unloadTile(l,d){l.texture&&l.texture instanceof a.T?(l.destroy(!1),l.texture&&l.texture instanceof a.T&&this.map.painter.saveTileTexture(l.texture)):l.destroy(),d&&d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Fs([y,l],d,v,{scaled:T=!0}={}){const{tileSize:O,buffer:M}=v,{x:R,y:N,z:q}=d;if(!isFinite(R)||!isFinite(N)||!isFinite(q))throw new Error("Invalid MRT header");const H=2**q,re=H*a.aF(y),ee=H*a.aJ(l);return(function([oe,he],ce,{scaled:de=!0}={}){if(!ce)throw new Error("bandView is undefined");const{data:_e,tileSize:Me,buffer:Ce,offset:Ae,scale:We,dimension:$e}=ce;if(oe<-Ce||oe>Me+Ce||he<-Ce||he>Me+Ce)throw new Error(`Point (${oe}, ${he}) out of bounds for tileSize=${Me}, buffer=${Ce}`);const Ge=(he+Ce)*(Me+2*Ce)+(oe+Ce);if(new Uint32Array(_e.buffer)[Ge]===4294967295)return null;let Fe=[];Fe=de?[]:new ce.data.constructor($e);for(let Re=0;Re<$e;Re++)Fe[Re]=Math.round(1e12*(_e[$e*Ge+Re]*We+Ae))/1e12;return Fe})([Math.min(Math.max(-M,Math.floor((re-R)*O)),O-1+M),Math.min(Math.max(-M,Math.floor((ee-N)*O)),O-1+M)],v,{scaled:T})}class xs extends so{constructor(l,d,v,T){super(l,d,v,T),this.type="raster-array",this.maxzoom=22,this.partial=!0,this._loadTilePending={},this._loadTileLoaded={},this._options=Object.assign({type:"raster-array"},d)}triggerRepaint(l){const d=this.map.painter._terrain,v=this.map.style.getSourceCache(this.id);d&&d.enabled&&v&&d._clearRenderCacheForTile(v.id,l.tileID),this.map.triggerRepaint()}loadTile(l,d){const v=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),T=this.map._requestManager.transformRequest(v,a.R.Tile),O={request:T,uid:l.uid,tileID:l.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};l.source=this.id,l.scope=this.scope,l.requestParams=T,l.actor||(l.actor=this.dispatcher.getActor());const M=(R,N,q)=>{if(delete l.request,l.aborted)return l.state="unloaded",d(null);if(R)return R.name==="AbortError"?void 0:(l.state="errored",d(R));if(this.map._refreshExpiredTiles&&N){const H=a.aM(q);l.setExpiryData(H)}if(this.partial&&l.state!=="expired")l.state="empty";else if(!this.partial){if(!N)return d(null);l.state="loaded",l._isHeaderLoaded=!0,l._mrt=N}d(null)};l.request=this.partial?l.fetchHeader(void 0,M.bind(this)):l.actor.send("loadTile",O,M.bind(this),void 0,!0)}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(l,d){const v=l.texturePerLayer;if(l.flushAllQueues(),v.size){l.destroy(!1);for(const T of v.values())this.map.painter.saveTileTexture(T)}else l.destroy()}prepareTile(l,d,v,T){l._isHeaderLoaded&&(l.state!=="empty"&&(l.state="reloading"),l.fetchBandForRender(d,v,T,(O,M)=>{if(O)return l.state="errored",this.fire(new a.y(O)),void this.triggerRepaint(l);M&&(l._isHeaderLoaded=!0,l.setTexturePerLayer(v,M,this.map.painter),l.state="loaded",this.triggerRepaint(l))}))}getInitialBand(l){if(!this.rasterLayers)return 0;const d=this.rasterLayers.find(({id:O})=>O===l),v=d&&d.fields,T=v&&v.bands&&v.bands;return T?T[0]:0}getTextureDescriptor(l,d,v){if(!l)return;const T=d.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!T)return;let O=null;d instanceof a.aR?O=d.paint.get("raster-array-band"):d instanceof a.aS&&(O=d.paint.get("raster-particle-array-band"));const M=O||this.getInitialBand(T);if(M==null)return;if(!l.textureDescriptorPerLayer.get(d.id))return void this.prepareTile(l,T,d.id,M);if(l.updateNeeded(d.id,M)&&!v)return;const R=l.textureDescriptorPerLayer.get(d.id);return Object.assign({},R,{texture:l.texturePerLayer.get(d.id)})}getImages(l,d){const v=new Map;for(const T of l)for(const O of d){const[M,R]=O.split("/"),N=T.getLayer(M);if(!N||!N.hasBand(R)||!N.hasDataForBand(R))continue;const{bytes:q,tileSize:H,buffer:re}=N.getBandView(R),ee=H+2*re,oe={data:new a.q({width:ee,height:ee},q),pixelRatio:2,sdf:!1,usvg:!1,version:0};v.set(O,oe)}return v}queryRasterArrayValueByBandId(l,d,v){const T=d._mrt;return new Promise(O=>{const M={},R=new Set;for(const[N,q]of Object.entries(T.layers)){if(v.layerName&&N!==v.layerName)continue;const H={};M[N]=H;for(const{bands:re}of q.dataIndex)for(const ee of re)v.bands&&!v.bands.includes(ee)||(R.add(a.B(N,ee)),d.fetchBand(N,null,ee,oe=>{a.o.frame(()=>{H[ee]=oe?null:Fs([l.lng,l.lat],T,q.getBandView(ee)),R.delete(a.B(N,ee)),R.size===0&&O(M)})},!1))}R.size===0&&O(M)})}_loadTileForQuery(l,d){if(this._loadTileLoaded[l.uid])return void d(null,l._mrt);if(this._loadTilePending[l.uid])return void this._loadTilePending[l.uid].push(d);this._loadTilePending[l.uid]=[d];const v=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),T=this.map._requestManager.transformRequest(v,a.R.Tile);l.actor.send("loadTile",{request:T,uid:l.uid,tileID:l.tileID,type:this.type,source:this.id,scope:this.scope,partial:!1},(O,M,R)=>{if(O)return this._loadTilePending[l.uid].forEach(N=>N(O,null)),void delete this._loadTilePending[l.uid];if(!M)return this._loadTilePending[l.uid].forEach(N=>N(null,null)),void delete this._loadTilePending[l.uid];if(this.map._refreshExpiredTiles&&M){const N=a.aM(R);l.setExpiryData(N)}l._mrt=M,l._isHeaderLoaded=!0,l.state="loaded",this._loadTilePending[l.uid].forEach(N=>N(null,M)),this._loadTileLoaded[l.uid]=!0,delete this._loadTilePending[l.uid]},void 0,!0)}queryRasterArrayValueByAllBands(l,d,v){return new Promise((T,O)=>{this._loadTileForQuery(d,(M,R)=>{M?O(M):T(R?this.queryRasterArrayValueByBandId(l,d,v):null)})})}queryRasterArrayValue(l,d){const v=a.aT.convert(l),T=this.findLoadedParent(v);return T&&T._mrt?d.bands||!this.partial?this.queryRasterArrayValueByBandId(v,T,d):this.queryRasterArrayValueByAllBands(v,T,d):Promise.resolve(null)}findLoadedParent(l){const d=a.ae.fromLngLat(l,this.map.transform.tileSize),v=this.maxzoom+1,T=1<<v,O=Math.floor(d.x),M=Math.floor((d.x-O)*T),R=Math.floor(d.y*T),N=this.map.style.getSourceCache(this.id),q=new a.aQ(v,O,v,M,R);return N.findLoadedParent(q,this.minzoom)}}const Nu={vector:ru,raster:so,"raster-dem":class extends so{constructor(y,l,d,v){super(y,l,d,v),this.type="raster-dem",this.maxzoom=22,this._options=Object.assign({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(y,l){const d=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function v(T,O){T&&(y.state="errored",l(T)),O&&(y.dem=O,y.dem.onDeserialize(),y.needsHillshadePrepare=!0,y.needsDEMTextureUpload=!0,y.state="loaded",l(null))}y.request=a.n(this.map._requestManager.transformRequest(d,a.R.Tile),(function(T,O,M){if(delete y.request,y.aborted)y.state="unloaded",l(null);else if(T)y.state="errored",l(T);else if(O){const R=a.aM(M);this.map._refreshExpiredTiles&&y.setExpiryData(R);const N=ImageBitmap&&O instanceof ImageBitmap&&a.r(),q=1-(O.width-a.aP(O.width))/2;q<1||y.neighboringTiles||(y.neighboringTiles=this._getNeighboringTiles(y.tileID));const H=N?O:a.o.getImageData(O,q),re={uid:y.uid,tileID:y.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:H,encoding:this.encoding,padding:q};y.actor&&y.state!=="expired"||(y.actor=this.dispatcher.getActor(),y.actor.send("loadTile",re,v.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(y){const l=y.canonical,d=Math.pow(2,l.z),v=(l.x-1+d)%d,T=l.x===0?y.wrap-1:y.wrap,O=(l.x+1+d)%d,M=l.x+1===d?y.wrap+1:y.wrap,R={};return R[new a.aQ(y.overscaledZ,T,l.z,v,l.y).key]={backfilled:!1},R[new a.aQ(y.overscaledZ,M,l.z,O,l.y).key]={backfilled:!1},l.y>0&&(R[new a.aQ(y.overscaledZ,T,l.z,v,l.y-1).key]={backfilled:!1},R[new a.aQ(y.overscaledZ,y.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},R[new a.aQ(y.overscaledZ,M,l.z,O,l.y-1).key]={backfilled:!1}),l.y+1<d&&(R[new a.aQ(y.overscaledZ,T,l.z,v,l.y+1).key]={backfilled:!1},R[new a.aQ(y.overscaledZ,y.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},R[new a.aQ(y.overscaledZ,M,l.z,O,l.y+1).key]={backfilled:!1}),R}},"raster-array":xs,geojson:class extends a.E{constructor(y,l,d,v){super(),this.id=y,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(v),this._data=l.data,this._options=Object.assign({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.minzoom!==void 0&&(this.minzoom=l.minzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const T=a.al/this.tileSize;this.workerOptions=Object.assign({source:this.id,scope:this.scope,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*T,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*T,extent:a.al,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:a.al,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*T,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter,dynamic:l.dynamic},l.workerOptions)}onAdd(y){this.map=y,this.setData(this._data)}setData(y){return this._data=y,this._updateWorkerData(),this}updateData(y){if(!this._options.dynamic)return this.fire(new a.y(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof y!="string"&&(y.type==="Feature"&&(y={type:"FeatureCollection",features:[y]}),y.type!=="FeatureCollection"))return this.fire(new a.y(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof y!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const l=new Map;for(const d of this._data.features)l.set(d.id,d);for(const d of y.features)l.set(d.id,d);this._data.features=[...l.values()]}else this._data=y;return this._updateWorkerData(!0),this}getClusterExpansionZoom(y,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:y,source:this.id,scope:this.scope},l),this}getClusterChildren(y,l){return this.actor.send("geojson.getClusterChildren",{clusterId:y,source:this.id,scope:this.scope},l),this}getClusterLeaves(y,l,d,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:y,limit:l,offset:d},v),this}_updateWorkerData(y=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new a.z("dataloading",{dataType:"source"})),this._loaded=!1;const l=Object.assign({append:y},this.workerOptions);l.scope=this.scope;const d=this._data;typeof d=="string"?(l.request=this.map._requestManager.transformRequest(a.o.resolveURL(d),a.R.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,l,(v,T)=>{if(this._loaded=!0,this._pendingLoad=null,v)this.fire(new a.y(v));else{const O={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&T&&T.resourceTiming&&T.resourceTiming[this.id]&&(O.resourceTiming=T.resourceTiming[this.id]),y&&(this._partialReload=!0),this.fire(new a.z("data",O)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(y),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const y=a.B(this.id,this.scope);this.map.style.clearSource(y),this._updateWorkerData()}loadTile(y,l){const d=y.actor?"reloadTile":"loadTile";y.actor=this.actor;const v=this.map.style?this.map.style.getLut(this.scope):null,T=v?{image:v.image.clone()}:null,O=this._partialReload,M={type:this.type,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:T,scope:this.scope,pixelRatio:a.o.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:y.isExtraShadowCaster,scaleFactor:this.map.getScaleFactor(),partial:O,worldview:this.map.getWorldview(),indoor:this.map.getIndoorTileOptions(this.id,this.scope)};y.request=this.actor.send(d,M,(R,N)=>O&&!N?(y.state="loaded",l(null)):(delete y.request,y.destroy(!1),y.aborted?l(null):R?l(R):(y.loadVectorData(N,this.map.painter,d==="reloadTile"),l(null))),void 0,d==="loadTile")}abortTile(y){y.request&&(y.request.cancel(),delete y.request),y.aborted=!0}unloadTile(y,l){this.actor.send("removeTile",{uid:y.uid,type:this.type,source:this.id,scope:this.scope}),y.destroy()}onRemove(y){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return Object.assign({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends a.aU{constructor(y,l,d,v){super(y,l,d,v),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const y=this.options;this.urls=[];for(const l of y.urls)this.urls.push(this.map._requestManager.transformRequest(l,a.R.Source).url);a.aV(this.urls,(l,d)=>{this._loaded=!0,l?this.fire(new a.y(l)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(y){if(this.video){const l=this.video.seekable;y<l.start(0)||y>l.end(0)?this.fire(new a.y(new a.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=y}}getVideo(){return this.video}onAdd(y){this.map||(this.map=y,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const y=this.map.painter.context,l=y.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(y,this.video,l.RGBA8),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(y)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:a.aU,model:a.aX,"batched-model":class extends a.E{constructor(y,l,d,v){super(),this.type="batched-model",this.id=y,this.tileSize=512,this._options=l,this.tiles=this._options.tiles,this.maxzoom=l.maxzoom||19,this.minzoom=l.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=d,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(v)}onAdd(y){this.map=y,this.load()}reload(){this.cancelTileJSONRequest();const y=a.B(this.id,this.scope);this.load(()=>this.map.style.clearSource(y))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(y){this._loaded=!1,this.fire(new a.z("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map.getWorldview();this._tileJSONRequest=Tc(this._options,this.map._requestManager,l,d,(v,T)=>{this._tileJSONRequest=null,this._loaded=!0,v?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),d&&d.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new a.y(v))):T&&(Object.assign(this,T),T.bounds&&(this.tileBounds=new bs(T.bounds,this.minzoom,this.maxzoom)),Pe(T.tiles,this.map._requestManager._customAccessToken),this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))),y&&y(v)})}hasTransition(){return!1}hasTile(y){return!this.tileBounds||this.tileBounds.contains(y.canonical)}loaded(){return this._loaded}loadTile(y,l){const d=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(d,a.R.Tile),data:void 0,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,tileSize:this.tileSize*y.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:y.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:a.o.devicePixelRatio,promoteId:this.promoteId};if(y.actor&&y.state!=="expired")if(y.state==="loading")y.reloadCallback=l;else{if(y.buckets){const O=Object.values(y.buckets);for(const M of O)M.dirty=!0;return void(y.state="loaded")}y.request=y.actor.send("reloadTile",v,T.bind(this))}else y.actor=this.dispatcher.getActor(),y.request=y.actor.send("loadTile",v,T.bind(this),void 0,!0);function T(O,M){return y.aborted?l(null):O&&O.status!==404?l(O):(this.map._refreshExpiredTiles&&M&&y.setExpiryData(M),y.loadModelData(M,this.map.painter),y.state="loaded",void l(null))}}serialize(){return Object.assign({},this._options)}},canvas:class extends a.aU{constructor(y,l,d,v){super(y,l,d,v),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(O=>typeof O!="number"))||this.fire(new a.y(new a.V(`sources.${y}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.y(new a.V(`sources.${y}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new a.y(new a.V(`sources.${y}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new a.y(new a.V(`sources.${y}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.y(new a.V(`sources.${y}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.y(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(y){this.map=y,this.load(),this.canvas&&this.animate&&this.play()}onRemove(y){this.pause()}prepare(){let y=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,y=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,y=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?!y&&!this._playing||this.texture instanceof a.aW||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(l,this.canvas,l.gl.RGBA8,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const y of[this.canvas.width,this.canvas.height])if(isNaN(y)||y<=0)return!0;return!1}},custom:class extends a.E{constructor(y,l,d,v){super(),this.id=y,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=l,this.setEventedParent(v),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new a.y(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new a.y(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new bs(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),Object.assign(this,a.aH(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return a.aH(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(y){this.map=y,this._loaded=!1,this.fire(new a.z("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(y),this.load()}onRemove(y){this._implementation.onRemove&&this._implementation.onRemove(y)}hasTile(y){if(this._implementation.hasTile){const{x:l,y:d,z:v}=y.canonical;return this._implementation.hasTile({x:l,y:d,z:v})}return!this.tileBounds||this.tileBounds.contains(y.canonical)}loadTile(y,l){const{x:d,y:v,z:T}=y.tileID.canonical,O=new AbortController;y.request=Promise.resolve(this._implementation.loadTile({x:d,y:v,z:T},{signal:O.signal})).then((function(M){return delete y.request,y.aborted?(y.state="unloaded",l(null)):M===void 0?(y.state="errored",l(null)):M===null?(this.loadTileData(y,{width:this.tileSize,height:this.tileSize,data:null}),y.state="loaded",l(null)):(function(R){return R instanceof ImageData||R instanceof HTMLCanvasElement||R instanceof ImageBitmap||R instanceof HTMLImageElement})(M)?(this.loadTileData(y,M),y.state="loaded",void l(null)):(y.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(M=>{M.name!=="AbortError"&&(y.state="errored",l(M))}),y.request.cancel=()=>O.abort()}loadTileData(y,l){y.setTexture(l,this.map.painter)}unloadTile(y,l){if(y.texture&&y.texture instanceof a.T?(y.destroy(!1),y.texture&&y.texture instanceof a.T&&this.map.painter.saveTileTexture(y.texture)):y.destroy(),this._implementation.unloadTile){const{x:d,y:v,z:T}=y.tileID.canonical;this._implementation.unloadTile({x:d,y:v,z:T})}l&&l()}abortTile(y,l){y.request&&y.request.cancel&&(y.request.cancel(),delete y.request),l&&l()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(y=>({x:y.canonical.x,y:y.canonical.y,z:y.canonical.z}))}_clearTiles(){const y=a.B(this.id,this.scope);this.map.style.clearSource(y)}_update(){this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))}}},iu=function(y,l,d,v){const T=new Nu[l.type](y,l,d,v);if(T.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${T.id}`);return a.aY(["load","abort","unload","serialize","prepare"],T),T};function Sl(y,l,d=""){return`${d}:${l.id||""}:${l.layer.id}:${(function(v){if("layerId"in v)return`layer:${v.layerId}`;{const{featuresetId:T,importId:O}=v;return`featureset:${T}${O?`:import:${O}`:""}`}})(y.target)}`}function Rp(y,l,d,v=""){if(y.uniqueFeatureID){const T=Sl(y,l,v);if(d.has(T))return!0;d.add(T)}return!1}function Ec(y,l,d,v,T=!1,O=void 0){const M=l.sourceCache.transform,R=l.sourceCache.tilesIn(y,l.has3DLayers,T);R.sort(x_);const N=[];for(const q of R){const H=q.tile.queryRenderedFeatures(l,q,d,v,M,T,O);Object.keys(H).length&&N.push({wrappedTileID:q.tile.tileID.wrapped().key,queryResults:H})}for(const q in l.layers){const H=l.layers[q];if(H.styleLayer){const re=H.styleLayer.queryRenderedFeatures(y,l.sourceCache,v);Object.keys(re).length&&N.push({wrappedTileID:0,queryResults:re})}}return N.length===0?{}:(function(q){const H={},re={};for(const ee of q){const oe=ee.queryResults,he=ee.wrappedTileID,ce=re[he]=re[he]||{};for(const de in oe){const _e=oe[de],Me=ce[de]=ce[de]||{},Ce=H[de]=H[de]||[];for(const Ae of _e)Me[Ae.featureIndex]||(Me[Ae.featureIndex]=!0,Ce.push(Ae))}}return H})(N)}function Wx(y,l,d,v,T,O){const M={},R=v.queryRenderedSymbols(y),N=[];for(const q of Object.keys(R).map(Number))N.push(T[q]);N.sort(x_);for(const q of N){const H=q.featureIndex.lookupSymbolFeatures(R[q.bucketInstanceId],q.bucketIndex,q.sourceLayerIndex,l,d,O);for(const re in H){const ee=M[re]=M[re]||[],oe=H[re];oe.sort((he,ce)=>{const de=q.featureSortOrder;if(de){const _e=de.indexOf(he.featureIndex);return de.indexOf(ce.featureIndex)-_e}return ce.featureIndex-he.featureIndex});for(const he of oe)ee.push(he)}}return M}function m0(y,l){const d=y.getRenderableIds().map(O=>y.getTileByID(O)),v=[],T={};for(let O=0;O<d.length;O++){const M=d[O],R=M.tileID.canonical.key;T[R]||(T[R]=!0,M.querySourceFeatures(v,l))}return v}function x_(y,l){const d=y.tileID,v=l.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function vg(y,l){const d={};if(!l)return d;for(const v of y){const T=v.layerIds.map(O=>l.getLayer(O)).filter(Boolean);if(T.length!==0){v.layers=T,v.stateDependentLayerIds&&(v.stateDependentLayers=v.stateDependentLayerIds.map(O=>T.filter(M=>M.id===O)[0]));for(const O of T)d[O.fqid]=v}}return d}const No=32,jl=33,au=new Uint16Array(8184);for(let y=0;y<2046;y++){let l=y+2,d=0,v=0,T=0,O=0,M=0,R=0;for(1&l?T=O=M=No:d=v=R=No;(l>>=1)>1;){const q=d+T>>1,H=v+O>>1;1&l?(T=d,O=v,d=M,v=R):(d=T,v=O,T=M,O=R),M=q,R=H}const N=4*y;au[N+0]=d,au[N+1]=v,au[N+2]=T,au[N+3]=O}const xo=new Uint16Array(2178),ou=new Uint8Array(1089),oh=new Uint16Array(1089);function Bu(y){return y===0?-.03125:y===32?.03125:0}const su={type:2,extent:a.al,loadGeometry:()=>[[new a.P(0,0),new a.P(a.al+1,0),new a.P(a.al+1,a.al+1),new a.P(0,a.al+1),new a.P(0,0)]]};class cf{constructor(l,d,v,T,O,M){this.tileID=l,this.uid=a.b2(),this.uses=0,this.tileSize=d,this.tileZoom=v,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=O,T&&T.style&&(this._lastUpdatedBrightness=T.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",T&&T.transform&&(this.projection=T.transform.projection),this.worldview=M,this._hasAppearances=null}registerFadeDuration(l){const d=l+this.timeAdded;d<a.o.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=a.aZ(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(l,d,v){if(this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=vg(l.buckets,d.style),this.hasSymbolBuckets=!1;for(const T in this.buckets){const O=this.buckets[T];if(O instanceof a.b4){if(this.hasSymbolBuckets=!0,!v)break;O.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const T in this.buckets){const O=this.buckets[T];if(O instanceof a.b4&&O.hasRTLText){this.hasRTLText=!0,a.b5();break}}this.queryPadding=0;for(const T in this.buckets){const O=this.buckets[T],M=d.style.getOwnLayer(T);if(!M)continue;const R=M.queryRadius(O);this.queryPadding=Math.max(this.queryPadding,R)}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),l.lineAtlas&&(this.lineAtlas=l.lineAtlas),this._lastUpdatedBrightness=l.brightness}else this.collisionBoxArray=new a.b3}unloadVectorData(){if(this.hasData()){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(l,d,v){l&&(l.resourceTiming&&(this.resourceTiming=l.resourceTiming),this.buckets=Object.assign({},this.buckets,vg(l.buckets,d.style)),l.featureIndex&&(this.latestFeatureIndex=l.featureIndex))}getBucket(l){return this.buckets[l.fqid]}upload(l,d){for(const O in this.buckets){const M=this.buckets[O];if(M.uploadPending()){let R={},N=[],q={zoom:0,pitch:0,brightness:0,worldview:""};if(d){if(d.style){N=d.style.listImages();const H=M.layers[0],re=H.sourceLayer||"_geojsonTileLayer",ee=d.style.getLayerSourceCache(H);ee&&(R=ee._state.getState(re,void 0))}q={zoom:d.transform.zoom||0,pitch:d.transform.pitch||0,brightness:d.style.getBrightness()||0,worldview:d.worldview||""}}M.upload(l,this.tileID.canonical,R,N,q)}}const v=l.gl,T=this.imageAtlas;T&&!T.uploaded&&(this.imageAtlasTexture=new a.T(l,T.image,v.RGBA8,{useMipmap:!!T.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(l,this.glyphAtlasImage,v.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new a.T(l,this.lineAtlas.image,v.R8),this.lineAtlas.uploaded=!0)}prepare(l,d,v){if(this.imageAtlas&&this.imageAtlasTexture&&d){const O=d.style.getLut(v);this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture,v,O)}if(!d||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const T=d.style.getBrightness();this._hasAppearances===null&&(this._hasAppearances=this.hasAppearances(d)),(this._lastUpdatedBrightness||T||this._hasAppearances)&&(!this._hasAppearances&&this._lastUpdatedBrightness&&T&&Math.abs(this._lastUpdatedBrightness-T)<.001||(this.updateBuckets(d,this._lastUpdatedBrightness!==T),this._lastUpdatedBrightness=T))}evaluateQueryRenderedFeaturePadding(){let l=0;for(const d in this.buckets){const v=this.buckets[d];v.evaluateQueryRenderedFeaturePadding&&(l=Math.max(l,v.evaluateQueryRenderedFeaturePadding()))}return l}queryRenderedFeatures(l,d,v,T,O,M,R){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const N=this.evaluateQueryRenderedFeaturePadding(),q=(function(H,re){const ee=a.bq([],[.5*H.width,.5*-H.height,1]);return a.br(ee,ee,[1,-1,0]),a.aB(ee,ee,H.calculateProjMatrix(re.toUnwrapped())),Float32Array.from(ee)})(O,this.tileID);return this.latestFeatureIndex.query(l,{tilespaceGeometry:d,pixelPosMatrix:q,transform:T,availableImages:v,tileTransform:this.tileTransform,worldview:this.worldview,queryRadius:N,scope:R})}querySourceFeatures(l,d){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const T=v.loadVTLayers(),O=d?d.sourceLayer:"",M=T._geojsonTileLayer||T[O];if(!M)return;const R=a.b6(d&&d.filter),{z:N,x:q,y:H}=this.tileID.canonical,re={z:N,x:q,y:H};for(let ee=0;ee<M.length;ee++){const oe=M.feature(ee);if(R.needGeometry){const de=a.b7(oe,!0);if(!R.filter(new a.ac(this.tileID.overscaledZ,{worldview:this.worldview}),de,this.tileID.canonical))continue}else if(!R.filter(new a.ac(this.tileID.overscaledZ,{worldview:this.worldview}),oe))continue;const he=v.getId(oe,O),ce=new a.b8(oe,N,q,H,he);ce.tile=re,l.push(ce)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(l){const d=this.expirationTime;if(l.cacheControl){const v=a.b9(l.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const v=Date.now();let T=!1;if(this.expirationTime>v)T=!1;else if(d)if(this.expirationTime<d)T=!0;else{const O=this.expirationTime-d;O?this.expirationTime=v+Math.max(O,3e4):T=!0}else T=!0;T?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(l){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&l&&this.updateBuckets(l)}hasAppearances(l){for(const d in this.buckets)if(l.style.hasLayer(d)&&this.buckets[d].layers.some(v=>v.appearances&&v.appearances.length>0))return!0;return!1}updateBuckets(l,d){if(!this.latestFeatureIndex||!l.style)return;const v=l.style.listImages(),T=l.style.getBrightness();for(const O in this.buckets){if(!l.style.hasLayer(O))continue;const M=this.buckets[O],R=M.layers[0],N=R.sourceLayer||"_geojsonTileLayer",q=l.style.getLayerSourceCache(R);let H={};q&&(H=q._state.getState(N,void 0));const re=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},ee=Object.keys(H).length>0&&!d;M.hasAppearances=M.layers.some(ce=>ce.appearances&&ce.appearances.length>0);const oe=ee?M.stateDependentLayers:M.layers;if(ee&&M.stateDependentLayers.length!==0||d){const ce=this.latestFeatureIndex.loadVTLayers();M.update(H,ce[N],v,re,oe,d,T)}if(ee&&M.stateDependentLayers.length!==0||d||M.hasAppearances){const ce={zoom:l.transform.zoom,pitch:l.transform.pitch,brightness:l.style.getBrightness()||0,worldview:l.worldview};M.updateAppearances(this.tileID.canonical,H,v,ce,l.imageManager)}(M instanceof a.ba||M instanceof a.bb)&&l._terrain&&l._terrain.enabled&&q&&M.uploadPending()&&l._terrain._clearRenderCacheForTile(q.id,this.tileID);const he=l&&l.style&&l.style.getOwnLayer(O);he&&(this.queryPadding=Math.max(this.queryPadding,he.queryRadius(M)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.o.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=a.o.now()+l}setTexture(l,d){const v=d.context,T=v.gl;this.texture=this.texture||d.getTileTexture(l.width),this.texture&&this.texture instanceof a.T?this.texture.update(l):(this.texture=new a.T(v,l,T.RGBA8,{useMipmap:!0}),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE))}setDependencies(l,d){const v={};for(const T of d)v[T]=!0;this.dependencies[l]=v}hasDependency(l,d){for(const v of l){const T=this.dependencies[v];if(T){for(const O of d)if(T[O])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(l,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const v=a.bc(su,this.tileID.canonical,this.tileTransform)[0],T=new a.bd,O=new a.be;for(let M=0;M<v.length;M++){const{x:R,y:N}=v[M];T.emplaceBack(R,N),O.emplaceBack(M)}O.emplaceBack(0),this._tileDebugIndexBuffer=l.createIndexBuffer(O),this._tileDebugBuffer=l.createVertexBuffer(T,a.bf.members),this._tileDebugSegments=a.bg.simpleSegment(0,0,T.length,O.length)}_makeTileBoundsBuffers(l,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const v=a.bc(su,this.tileID.canonical,this.tileTransform)[0];let T,O;if(this.isRaster){const M=(function(R,N){const q=a.aZ(R,N),H=Math.pow(2,R.z);for(let de=0;de<jl;de++)for(let _e=0;_e<jl;_e++){const Me=a.a_((R.x+(_e+Bu(_e))/No)/H),Ce=a.a$((R.y+(de+Bu(de))/No)/H),Ae=N.project(Me,Ce),We=de*jl+_e;xo[2*We+0]=Math.round((Ae.x*q.scale-q.x)*a.al),xo[2*We+1]=Math.round((Ae.y*q.scale-q.y)*a.al)}ou.fill(0),oh.fill(0);for(let de=2045;de>=0;de--){const _e=4*de,Me=au[_e+0],Ce=au[_e+1],Ae=au[_e+2],We=au[_e+3],$e=Me+Ae>>1,Ge=Ce+We>>1,Fe=$e+Ge-Ce,Re=Ge+Me-$e,et=Ce*jl+Me,nt=We*jl+Ae,st=Ge*jl+$e,dt=Math.hypot((xo[2*et+0]+xo[2*nt+0])/2-xo[2*st+0],(xo[2*et+1]+xo[2*nt+1])/2-xo[2*st+1])>=16;ou[st]=ou[st]||(dt?1:0),de<1022&&(ou[st]=ou[st]||ou[(Ce+Re>>1)*jl+(Me+Fe>>1)]||ou[(We+Re>>1)*jl+(Ae+Fe>>1)])}const re=new a.b1,ee=new a.b0;let oe=0;function he(de,_e){const Me=_e*jl+de;return oh[Me]===0&&(re.emplaceBack(xo[2*Me+0],xo[2*Me+1],de*a.al/No,_e*a.al/No),oh[Me]=++oe),oh[Me]-1}function ce(de,_e,Me,Ce,Ae,We){const $e=de+Me>>1,Ge=_e+Ce>>1;if(Math.abs(de-Ae)+Math.abs(_e-We)>1&&ou[Ge*jl+$e])ce(Ae,We,de,_e,$e,Ge),ce(Me,Ce,Ae,We,$e,Ge);else{const Fe=he(de,_e),Re=he(Me,Ce),et=he(Ae,We);ee.emplaceBack(Fe,Re,et)}}return ce(0,0,No,No,No,0),ce(No,No,0,0,0,No),{vertices:re,indices:ee}})(this.tileID.canonical,d);T=M.vertices,O=M.indices}else{T=new a.b1,O=new a.b0;for(const{x:R,y:N}of v)T.emplaceBack(R,N,0,0);const M=a.bh(T.int16.subarray(0,4*T.length),void 0,4);for(let R=0;R<M.length;R+=3)O.emplaceBack(M[R],M[R+1],M[R+2])}this._tileBoundsBuffer=l.createVertexBuffer(T,a.bi.members),this._tileBoundsIndexBuffer=l.createIndexBuffer(O),this._tileBoundsSegments=a.bg.simpleSegment(0,0,T.length,O.length)}_makeGlobeTileDebugBuffers(l,d){const v=d.projection;if(!v||v.name!=="globe"||d.freezeTileCoverage)return;const T=this.tileID.canonical,O=a.bj(T,d),M=a.bk(O),R=a.aj(d.zoom);let N;R>0&&(N=a.bl(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(l,T,d,M,N,R),this._makeGlobeTileDebugTextBuffer(l,T,d,M,N,R)}_globePoint(l,d,v,T,O,M,R){let N=a.bm(l,d,v);if(M){const q=1<<v.z,H=a.aF(T.center.lng),re=a.aJ(T.center.lat),ee=(v.x+.5)/q-H;let oe=0;ee>.5?oe=-1:ee<-.5&&(oe=1);let he=(l/a.al+v.x)/q+oe,ce=(d/a.al+v.y)/q;he=(he-H)*T._pixelsPerMercatorPixel+H,ce=(ce-re)*T._pixelsPerMercatorPixel+re;const de=[he*T.worldSize,ce*T.worldSize,0];a.af(de,de,M),N=a.bn(N,de,R)}return a.af(N,N,O)}_makeGlobeTileDebugBorderBuffer(l,d,v,T,O,M){const R=new a.bd,N=new a.be,q=new a.bo,H=(ee,oe,he,ce,de)=>{const _e=(he-ee)/(de-1),Me=(ce-oe)/(de-1),Ce=R.length;for(let Ae=0;Ae<de;Ae++){const We=ee+Ae*_e,$e=oe+Ae*Me;R.emplaceBack(We,$e);const Ge=this._globePoint(We,$e,d,v,T,O,M);q.emplaceBack(Ge[0],Ge[1],Ge[2]),N.emplaceBack(Ce+Ae)}},re=a.al;H(0,0,re,0,16),H(re,0,re,re,16),H(re,re,0,re,16),H(0,re,0,0,16),this._tileDebugIndexBuffer=l.createIndexBuffer(N),this._tileDebugBuffer=l.createVertexBuffer(R,a.bf.members),this._globeTileDebugBorderBuffer=l.createVertexBuffer(q,a.bp.members),this._tileDebugSegments=a.bg.simpleSegment(0,0,R.length,N.length)}_makeGlobeTileDebugTextBuffer(l,d,v,T,O,M){const R=a.al/4,N=new a.bd,q=new a.b0,H=new a.bo,re=25;q.reserve(32),N.reserve(re),H.reserve(re);const ee=(oe,he)=>re*oe+he;for(let oe=0;oe<re;oe++){const he=oe*R;for(let ce=0;ce<re;ce++){const de=ce*R;N.emplaceBack(de,he);const _e=this._globePoint(de,he,d,v,T,O,M);H.emplaceBack(_e[0],_e[1],_e[2])}}for(let oe=0;oe<4;oe++)for(let he=0;he<4;he++){const ce=ee(oe,he),de=ee(oe,he+1),_e=ee(oe+1,he),Me=ee(oe+1,he+1);q.emplaceBack(ce,de,_e),q.emplaceBack(_e,de,Me)}this._tileDebugTextIndexBuffer=l.createIndexBuffer(q),this._tileDebugTextBuffer=l.createVertexBuffer(N,a.bf.members),this._globeTileDebugTextBuffer=l.createVertexBuffer(H,a.bp.members),this._tileDebugTextSegments=a.bg.simpleSegment(0,0,re,32)}destroy(l=!0){for(const d in this.buckets)this.buckets[d].destroy(l);this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),l&&this.texture&&this.texture instanceof a.T&&(this.texture.destroy(),delete this.texture),this.emissiveTexture&&this.emissiveTexture instanceof a.T&&(this.emissiveTexture.destroy(),delete this.emissiveTexture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}a.bs.setPbf(a.bt);class kp extends cf{constructor(l,d,v,T,O){super(l,d,v,T,O),this._workQueuePerLayer=new Map,this._fetchQueuePerLayer=new Map,this._taskQueue=new Map,this._isHeaderLoaded=!1,this.textureDescriptorPerLayer=new Map,this.texturePerLayer=new Map}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(l){return this._mrt&&this._mrt.getLayer(l)}setTexturePerLayer(l,d,v){const T=v.context,O=T.gl;let M=this.texturePerLayer.get(l)||v.getTileTexture(d.width);M&&M instanceof a.T?M.update(d,{premultiply:!1}):M=new a.T(T,d,O.RGBA8,{premultiply:!1}),this.texturePerLayer.has(l)||this.texturePerLayer.set(l,M)}flushQueues(l){const d=this._workQueuePerLayer.get(l)||[],v=this._fetchQueuePerLayer.get(l)||[];for(;d.length;)d.pop()();for(;v.length;)v.pop()()}flushAllQueues(){for(const l of this._workQueuePerLayer.keys()){const d=this._workQueuePerLayer.get(l)||[];for(;d.length;)d.pop()()}for(const l of this._fetchQueuePerLayer.keys()){const d=this._fetchQueuePerLayer.get(l)||[];for(;d.length;)d.pop()()}}fetchHeader(l=16384,d){const v=this._mrt=new a.bs(30),T=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(l-1)}});return this.entireBuffer=null,this.request=a.bu(T,(O,M,R)=>{if(O)d(O);else try{const N=v.getHeaderLength(M);if(N>l)return void(this.request=this.fetchHeader(N,d));v.parseHeader(M),this._isHeaderLoaded=!0;let q=0;for(const H of Object.values(v.layers))q=Math.max(q,H.dataIndex[H.dataIndex.length-1].lastByte);M.byteLength>=q&&(this.entireBuffer=M),d(null,this.entireBuffer||M,R)}catch(N){d(N)}}),this.request}fetchBandForRender(l,d,v,T){this.fetchBand(l,d,v,O=>{if(O)return void T(O);this.updateTextureDescriptor(l,d,v);const M=this.textureDescriptorPerLayer.get(d);T(null,M?M.img:null)})}fetchBand(l,d,v,T,O=!0){const M=this._mrt;if(!this._isHeaderLoaded||!M)return void T(new Error("Tile header is not ready"));const R=this.actor;if(!R)return void T(new Error("Can't fetch tile band without an actor"));let N;const q=a.B(String(v),a.B(this.tileID.key,l));let H=this._taskQueue.get(q);H?H.add(T):(H=new Set,H.add(T),this._taskQueue.set(q,H));const re=(ce,de)=>{N.complete(ce,de),ce?T(ce):(H.forEach(_e=>_e(null,de)),this._taskQueue.delete(q))},ee=(ce,de)=>{if(ce)return T(ce);const _e=R.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:de,task:N},re,void 0,!0);if(d!==null){const Me=this._workQueuePerLayer.get(d)||[];Me.push(()=>{_e&&_e.cancel(),N.cancel()}),this._workQueuePerLayer.has(d)||this._workQueuePerLayer.set(d,Me)}};let oe;try{oe=M.getLayer(l)}catch(ce){if(this.state==="reloading")return;throw ce}if(!oe)return void T(new Error(`Unknown sourceLayer "${l}"`));if(oe.hasDataForBand(v))return H.forEach(ce=>ce(null,null)),void this._taskQueue.delete(q);const he=oe.getDataRange([v]);if(N=M.createDecodingTask(he),!N||N.tasks.length)if(d!==null&&this.flushQueues(d),this.entireBuffer)ee(null,this.entireBuffer.slice(he.firstByte,he.lastByte+1));else{const ce=Object.assign({},this.requestParams,{headers:{Range:`bytes=${he.firstByte}-${he.lastByte}`}}),de=a.bu(ce,ee);if(d!==null){const _e=this._fetchQueuePerLayer.get(d)||[];_e.push(()=>{de.cancel(),N.cancel()}),this._fetchQueuePerLayer.has(d)||this._fetchQueuePerLayer.set(d,_e)}}}updateNeeded(l,d){return(!this.textureDescriptorPerLayer.get(l)||this.textureDescriptorPerLayer.get(l).band!==d||this.refreshedUponExpiration)&&this.state!=="errored"}updateTextureDescriptor(l,d,v){if(!this._mrt)return;const T=this._mrt.getLayer(l);if(!T||!T.hasBand(v)||!T.hasDataForBand(v))return;const{bytes:O,tileSize:M,buffer:R,offset:N,scale:q}=T.getBandView(v),H=M+2*R,re=new a.q({width:H,height:H},O),ee=this.texturePerLayer.get(d);ee&&ee instanceof a.T&&ee.update(re,{premultiply:!1}),this.textureDescriptorPerLayer.set(d,{layer:l,band:v,img:re,buffer:R,offset:N,tileSize:M,format:T.pixelFormat,mix:[q,256*q,65536*q,16777216*q]})}destroy(l=!1){if(super.destroy(l),delete this._mrt,!l)for(const d of this.texturePerLayer.values())d&&d instanceof a.T&&d.destroy();this.texturePerLayer.clear(),this.textureDescriptorPerLayer.clear(),this.fbo&&(this.fbo.destroy(),delete this.fbo),delete this.request,delete this.requestParams,this._isHeaderLoaded=!1}}class g0{constructor(l,d){this.max=l,this.onRemove=d,this.reset()}reset(){for(const l in this.data)for(const d of this.data[l])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(l,d,v){const T=l.wrapped().key;this.data[T]===void 0&&(this.data[T]=[]);const O={value:d,timeout:void 0};if(v!==void 0&&(O.timeout=setTimeout(()=>{this.remove(l,O)},v)),this.data[T].push(O),this.order.push(T),this.order.length>this.max){const M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const d=this.data[l].shift();return d.timeout&&clearTimeout(d.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),d.value}getByKey(l){const d=this.data[l];return d?d[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,d){if(!this.has(l))return this;const v=l.wrapped().key,T=d===void 0?0:this.data[v].indexOf(d),O=this.data[v][T];return this.data[v].splice(T,1),O.timeout&&clearTimeout(O.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(O.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(l){const d=[];for(const v in this.data)for(const T of this.data[v])l(T.value)||d.push(T);for(const v of d)this.remove(v.value.tileID,v)}}class Lp{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,d,v){const T=String(d);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][T]=this.stateChanges[l][T]||{},Object.assign(this.stateChanges[l][T],v),this.deletedStates[l]===null){this.deletedStates[l]={};for(const O in this.state[l])O!==T&&(this.deletedStates[l][O]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][T]===null){this.deletedStates[l][T]={};for(const O in this.state[l][T])v[O]||(this.deletedStates[l][T][O]=null)}else for(const O in v)this.deletedStates[l]&&this.deletedStates[l][T]&&this.deletedStates[l][T][O]===null&&delete this.deletedStates[l][T][O]}removeFeatureState(l,d,v){if(this.deletedStates[l]===null)return;const T=String(d);if(this.deletedStates[l]=this.deletedStates[l]||{},v&&d!==void 0)this.deletedStates[l][T]!==null&&(this.deletedStates[l][T]=this.deletedStates[l][T]||{},this.deletedStates[l][T][v]=null);else if(d!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][T])for(v in this.deletedStates[l][T]={},this.stateChanges[l][T])this.deletedStates[l][T][v]=null;else this.deletedStates[l][T]=null;else this.deletedStates[l]=null}getState(l,d){const v=this.state[l]||{},T=this.stateChanges[l]||{},O=this.deletedStates[l];if(O===null)return{};if(d!==void 0){const R=String(d),N=Object.assign({},v[R],T[R]);if(O){const q=O[d];if(q===null)return{};for(const H in q)delete N[H]}return N}const M=Object.assign({},v,T);if(O)for(const R in O)delete M[R];return M}initializeTileState(l,d){l.refreshFeatureState(d)}coalesceChanges(l,d){const v={};for(const T in this.stateChanges){this.state[T]=this.state[T]||{};const O={};for(const M in this.stateChanges[T])this.state[T][M]||(this.state[T][M]={}),Object.assign(this.state[T][M],this.stateChanges[T][M]),O[M]=this.state[T][M];v[T]=O}for(const T in this.deletedStates){this.state[T]=this.state[T]||{};const O={};if(this.deletedStates[T]===null)for(const M in this.state[T])O[M]={},this.state[T][M]={};else for(const M in this.deletedStates[T]){if(this.deletedStates[T][M]===null)this.state[T][M]={};else if(this.state[T][M])for(const R of Object.keys(this.deletedStates[T][M]))delete this.state[T][M][R];O[M]=this.state[T][M]}v[T]=v[T]||{},Object.assign(v[T],O)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const T in l)l[T].refreshFeatureState(d)}}class eo extends a.E{constructor(l,d,v){super(),this.id=l,this._onlySymbols=v,d.on("data",T=>{T.dataType==="source"&&T.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&T.dataType==="source"&&T.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),d.on("error",()=>{this._sourceErrored=!0}),this._source=d,this._tiles={},this._cache=new g0(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Lp,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(l){this.map=l,this._minTileCacheSize=this._minTileCacheSize===void 0&&l?l._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&l?l._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles)if(!this._tiles[l].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(l,d){return l.isSymbolTile=this._onlySymbols,l.isExtraShadowCaster=this._shadowCasterTiles[l.tileID.key],this._source.loadTile(l,d)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l)}_abortTile(l){if(this._source.abortTile)return this._source.abortTile(l)}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const v=this._tiles[d];v.upload(l,this.map?this.map.painter:void 0),v.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(md).map(l=>l.key)}getRenderableIds(l,d){const v=[];for(const T in this._tiles)this._isIdRenderable(+T,l,d)&&v.push(this._tiles[T]);return l?v.sort((T,O)=>{const M=T.tileID,R=O.tileID,N=new a.P(M.canonical.x,M.canonical.y)._rotate(this.transform.angle),q=new a.P(R.canonical.x,R.canonical.y)._rotate(this.transform.angle);return M.overscaledZ-R.overscaledZ||q.y-N.y||q.x-N.x}).map(T=>T.tileID.key):v.map(T=>T.tileID).sort(md).map(T=>T.key)}hasRenderableParent(l){const d=this.findLoadedParent(l,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(l,d,v){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(d||!this._tiles[l].holdingForFade())&&(v||!this._shadowCasterTiles[l])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(+l,"reloading")}}_reloadTile(l,d){const v=this._tiles[l];v&&(v.state!=="loading"&&(v.state=d),this._loadTile(v,this._tileLoaded.bind(this,v,l,d)))}_tileLoaded(l,d,v,T,O){if(T){if(l.state="errored",T.status!==404)this._source.fire(new a.y(T,{tile:l}));else{if(this._source.fire(new a.z("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:l})),!(l.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const R=this.map.painter.terrain;this.update(this.transform,R.getScaledDemTileSize(),!0),R.resetTileLookupCache(this.id)}else this.update(this.transform)}return}l.timeAdded=a.o.now(),v==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(d,l),this._source.type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null);let M=new Map;O&&O.responseHeaders&&(M=O.responseHeaders),this._source.fire(new a.z("data",{dataType:"source",tile:l,coord:l.tileID,sourceCacheId:this.id,responseHeaders:M}))}_backfillDEM(l){const d=this.getRenderableIds();for(let T=0;T<d.length;T++){const O=d[T];if(l.neighboringTiles&&l.neighboringTiles[O]){const M=this.getTileByID(O);v(l,M),v(M,l)}}function v(T,O){if(!T.dem||T.dem.borderReady)return;T.needsHillshadePrepare=!0,T.needsDEMTextureUpload=!0;let M=O.tileID.canonical.x-T.tileID.canonical.x;const R=O.tileID.canonical.y-T.tileID.canonical.y,N=Math.pow(2,T.tileID.canonical.z),q=O.tileID.key;M===0&&R===0||Math.abs(R)>1||(Math.abs(M)>1&&(Math.abs(M+N)===1?M+=N:Math.abs(M-N)===1&&(M-=N)),O.dem&&T.dem&&(T.dem.backfillBorder(O.dem,M,R),T.neighboringTiles&&T.neighboringTiles[q]&&(T.neighboringTiles[q].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,d,v,T){for(const O in this._tiles){let M=this._tiles[O];if(T[O]||!M.hasData()||M.tileID.overscaledZ<=d||M.tileID.overscaledZ>v)continue;let R=M.tileID;for(;M&&M.tileID.overscaledZ>d+1;){const q=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[q.key],M&&M.hasData()&&(R=q)}let N=R;for(;N.overscaledZ>d;)if(N=N.scaledTo(N.overscaledZ-1),l[N.key]){T[R.key]=R;break}}}findLoadedParent(l,d){if(l.key in this._loadedParentTiles){const v=this._loadedParentTiles[l.key];return v&&v.tileID.overscaledZ>=d?v:null}for(let v=l.overscaledZ-1;v>=d;v--){const T=l.scaledTo(v),O=this._getLoadedTile(T);if(O)return O}}_getLoadedTile(l){const d=this._tiles[l.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?l.wrapped().key:l.canonical.key)}updateCacheSize(l,d){d=d||this._source.tileSize;const v=Math.ceil(l.width/d)+1,T=Math.ceil(l.height/d)+1,O=Math.floor(v*T*5),M=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,O):O,R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(R)}handleWrapJump(l){const d=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,d){const v={};for(const T in this._tiles){const O=this._tiles[T];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+d),v[O.tileID.key]=O}this._tiles=v;for(const T in this._timers)clearTimeout(this._timers[T]),delete this._timers[T];for(const T in this._tiles)this._setTileReloadTimer(+T,this._tiles[T])}}update(l,d,v,T,O){if(this.transform=l,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!v)return;this.updateCacheSize(l,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const M=this._source.type==="batched-model";let R,N=this._source.maxzoom;const q=this.map&&this.map.painter?this.map.painter._terrain:null;if(q&&q.sourceCache===this&&q.attenuationRange()){const ee=q.attenuationRange()[0],oe=Math.floor(ee)-Math.log2(q.getDemUpscale());N>oe&&(N=oe)}if(this.used||this.usedForTerrain){if(this._source.tileID)R=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(ee=>new a.aQ(ee.canonical.z,ee.wrap,ee.canonical.z,ee.canonical.x,ee.canonical.y));else if(this.tileCoverLift!==0){const ee=l.clone();ee.tileCoverLift=this.tileCoverLift,R=ee.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:N,roundZoom:this._source.roundZoom&&!v,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:M}),this._source.minzoom<=1&&l.projection.name==="globe"&&(R.push(new a.aQ(1,0,1,0,0)),R.push(new a.aQ(1,0,1,1,0)),R.push(new a.aQ(1,0,1,0,1)),R.push(new a.aQ(1,0,1,1,1)))}else if(R=l.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:N,roundZoom:this._source.roundZoom&&!v,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:M}),this._source.hasTile){const ee=this._source.hasTile.bind(this._source);R=R.filter(oe=>ee(oe))}}else R=[];if(R.length>0&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!ff(this._source.type)){const ee=l.coveringZoomLevel({tileSize:d||this._source.tileSize,roundZoom:this._source.roundZoom&&!v}),oe=Math.min(ee,this._source.maxzoom);if(M){const he=l.extendTileCover(R,oe);for(const ce of he)R.push(ce)}else if(O){const he=l.extendTileCoverToNearPlane(R,this.transform.getFrustum(oe),oe);for(const ce of he)R.push(ce)}else if(this.castsShadows&&T){const he=l.extendTileCover(R,oe,T,16);for(const ce of he)this._shadowCasterTiles[ce.key]=!0,R.push(ce)}}const H=this._updateRetainedTiles(R);if(ff(this._source.type)&&R.length!==0){const ee={},oe={},he=Object.keys(H);for(const de of he){const _e=H[de],Me=this._tiles[de];if(!Me||Me.fadeEndTime&&Me.fadeEndTime<=a.o.now())continue;const Ce=this.findLoadedParent(_e,Math.max(_e.overscaledZ-eo.maxOverzooming,this._source.minzoom));Ce&&(this._addTile(Ce.tileID),ee[Ce.tileID.key]=Ce.tileID),oe[de]=_e}const ce=R[R.length-1].overscaledZ;for(const de in this._tiles){const _e=this._tiles[de];if(H[de]||!_e.hasData())continue;let Me=_e.tileID;for(;Me.overscaledZ>ce;){Me=Me.scaledTo(Me.overscaledZ-1);const Ce=this._tiles[Me.key];if(Ce&&Ce.hasData()&&oe[Me.key]){H[de]=_e.tileID;break}}}for(const de in ee)H[de]||(this._coveredTiles[de]=!0,H[de]=ee[de])}for(const ee in H)this._tiles[ee].clearFadeHold();const re=a.bv(this._tiles,H);for(const ee of re){const oe=this._tiles[ee];oe.hasSymbolBuckets&&!oe.holdingForFade()?oe.setHoldDuration(this.map._fadeDuration):oe.hasSymbolBuckets&&!oe.symbolFadeFinished()||this._removeTile(+ee)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(+l)}_updateRetainedTiles(l){const d={};if(l.length===0)return d;const v={},T=l.reduce((q,H)=>Math.min(q,H.overscaledZ),1/0),O=l[0].overscaledZ,M=Math.max(O-eo.maxOverzooming,this._source.minzoom),R=Math.max(O+eo.maxUnderzooming,this._source.minzoom),N={};for(const q of l){const H=this._addTile(q);d[q.key]=q,H.hasData()||T<this._source.maxzoom&&(N[q.key]=q)}this._retainLoadedChildren(N,T,R,d);for(const q of l){let H=this._tiles[q.key];if(H.hasData())continue;if(q.canonical.z>=this._source.maxzoom){const ee=q.children(this._source.maxzoom)[0],oe=this.getTile(ee);if(oe&&oe.hasData()){d[ee.key]=ee;continue}}else{const ee=q.children(this._source.maxzoom);if(d[ee[0].key]&&d[ee[1].key]&&d[ee[2].key]&&d[ee[3].key])continue}let re=H.wasRequested();for(let ee=q.overscaledZ-1;ee>=M;--ee){const oe=q.scaledTo(ee);if(v[oe.key]||(v[oe.key]=!0,H=this.getTile(oe),!H&&re&&(H=this._addTile(oe)),H&&(d[oe.key]=oe,re=H.wasRequested(),H.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const d=[];let v,T=this._tiles[l].tileID;for(;T.overscaledZ>0;){if(T.key in this._loadedParentTiles){v=this._loadedParentTiles[T.key];break}d.push(T.key);const O=T.scaledTo(T.overscaledZ-1);if(v=this._getLoadedTile(O),v)break;T=O}for(const O of d)this._loadedParentTiles[O]=v}}_addTile(l){let d=this._tiles[l.key];if(d)return d.isExtraShadowCaster!==!0||this._shadowCasterTiles[l.key]||this._reloadTile(l.key,"reloading"),d;d=this._cache.getAndRemove(l),d&&(this._setTileReloadTimer(l.key,d),d.tileID=l,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,d)));const v=!!d;if(!v){const T=this.map?this.map.painter:null,O=this._source.tileSize*l.overscaleFactor();d=this._source.type==="raster-array"?new kp(l,O,this.transform.tileZoom,T,this._isRaster):new cf(l,O,this.transform.tileZoom,T,this._isRaster,this._source.worldview),this._loadTile(d,this._tileLoaded.bind(this,d,l.key,d.state))}return d.uses++,this._tiles[l.key]=d,v||this._source.fire(new a.z("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(l,d){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const v=d.getExpiryTimeout();v&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},v))}_removeTile(l){const d=this._tiles[l];d&&(d.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),d.uses>0||(d.hasData()&&d.state!=="reloading"||d.state==="empty"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(+l);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(l,d,v){const T=[],O=this.transform;if(!O)return T;const M=O.projection.name==="globe",R=a.aF(O.center.lng);for(const N in this._tiles){const q=this._tiles[N];if(v&&q.clearQueryDebugViz(),q.holdingForFade())continue;let H;if(M){const re=q.tileID.canonical;if(re.z===0){const ee=[Math.abs(a.aA(R,...Ns(re,-1))-R),Math.abs(a.aA(R,...Ns(re,1))-R)];H=[0,2*ee.indexOf(Math.min(...ee))-1]}else{const ee=[Math.abs(a.aA(R,...Ns(re,-1))-R),Math.abs(a.aA(R,...Ns(re,0))-R),Math.abs(a.aA(R,...Ns(re,1))-R)];H=[ee.indexOf(Math.min(...ee))-1]}}else H=[0];for(const re of H){const ee=l.containsTile(q,O,d,re);ee&&T.push(ee)}}return T}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(l){return this._getRenderableCoordinates(l)}_getRenderableCoordinates(l,d){const v=this.getRenderableIds(l,d).map(O=>this._tiles[O].tileID),T=this.transform.projection.name==="globe";for(const O of v)O.projMatrix=this.transform.calculateProjMatrix(O.toUnwrapped()),O.expandedProjMatrix=T?this.transform.calculateProjMatrix(O.toUnwrapped(),!1,!0):O.projMatrix;return v}sortCoordinatesByDistance(l){const d=l.slice(),v=this.transform._camera.position,T=this.transform._camera.forward(),O={};for(const M of d){const R=1/(1<<M.canonical.z);O[M.key]=((M.canonical.x+.5)*R+M.wrap-v[0])*T[0]+((M.canonical.y+.5)*R-v[1])*T[1]-v[2]*T[2]}return d.sort((M,R)=>O[M.key]-O[R.key]),d}hasTransition(){if(this._source.hasTransition())return!0;if(ff(this._source.type))for(const l in this._tiles){const d=this._tiles[l];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=a.o.now())return!0}return!1}setFeatureState(l,d,v){this._state.updateState(l=l||"_geojsonTileLayer",d,v)}removeFeatureState(l,d,v){this._state.removeFeatureState(l=l||"_geojsonTileLayer",d,v)}getFeatureState(l,d){return this._state.getState(l=l||"_geojsonTileLayer",d)}setDependencies(l,d,v){const T=this._tiles[l];T&&T.setDependencies(d,v)}reloadTilesForDependencies(l,d){for(const v in this._tiles)this._tiles[v].hasDependency(l,d)&&this._reloadTile(+v,"reloading");this._cache.filter(v=>!v.hasDependency(l,d))}_preloadTiles(l,d){if(!this._sourceLoaded){const N=()=>{this._sourceLoaded&&(this._source.off("data",N),this._preloadTiles(l,d))};return void this._source.on("data",N)}const v=new Map,T=Array.isArray(l)?l:[l],O=this.map.painter.terrain,M=this.usedForTerrain&&O?O.getScaledDemTileSize():this._source.tileSize;for(const N of T){const q=N.coveringTiles({tileSize:M,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const H of q)v.set(H.key,H);this.usedForTerrain&&N.updateElevation(!1)}const R=Array.from(v.values());a.bw(R,(N,q)=>{const H=new cf(N,this._source.tileSize*N.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster,this._source.worldview);this._loadTile(H,re=>{this._source.type==="raster-dem"&&H.dem&&this._backfillDEM(H),q(re,H)})},d)}}function md(y,l){const d=Math.abs(2*y.wrap)-+(y.wrap<0),v=Math.abs(2*l.wrap)-+(l.wrap<0);return y.overscaledZ-l.overscaledZ||v-d||l.canonical.y-y.canonical.y||l.canonical.x-y.canonical.x}function ff(y){return y==="raster"||y==="image"||y==="video"||y==="custom"}function Ns(y,l){const d=1<<y.z;return[y.x/d+l,(y.x+1)/d+l]}eo.maxOverzooming=10,eo.maxUnderzooming=3;class gd{constructor(l){this.style=l,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const l=!1,d=!1;for(const v in this.style._mergedLayers){const T=this.style._mergedLayers[v];if(T.type==="fill-extrusion"||T.type==="building")this.layers.push({layer:T,visible:l,visibilityChanged:d});else if(T.type==="model"){const O=this.style.getLayerSource(T);O&&O.type==="batched-model"&&this.layers.push({layer:T,visible:l,visibilityChanged:d})}}}onNewFrame(l){this.layersGotHidden=!1;for(const d of this.layers){const v=d.layer;let T=!1;v.type==="fill-extrusion"?T=!v.isHidden(l)&&v.paint.get("fill-extrusion-opacity")>0:v.type==="building"?T=!v.isHidden(l)&&v.paint.get("building-opacity")>0:v.type==="model"&&(T=!v.isHidden(l)&&v.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!T&&d.visible,d.visible=T}}updateZOffset(l,d){this.currentBuildingBuckets=[];for(const T of this.layers){const O=T.layer,M=this.style.getLayerSourceCache(O);let R=1;O.type==="fill-extrusion"?R=T.visible?O.paint.get("fill-extrusion-vertical-scale"):0:O.type==="building"&&(R=T.visible?O.paint.get("building-vertical-scale"):0);let N=M?M.getTile(d):null;if(!N&&M)for(const q in M._tiles){const H=M._tiles[q];if(d.canonical.isChildOf(H.tileID.canonical)){N=H;break}}this.currentBuildingBuckets.push({bucket:N?N.getBucket(O):null,tileID:N?N.tileID:d,verticalScale:R})}l.hasAnyZOffset=!1;let v=!1;for(let T=0;T<l.symbolInstances.length;T++){const O=l.symbolInstances.get(T),M=O.zOffset,R=this._getHeightAtTileOffset(d,O.tileAnchorX,O.tileAnchorY);O.zOffset=R!==Number.NEGATIVE_INFINITY?R:M,v||M===O.zOffset||(v=!0),l.hasAnyZOffset||O.zOffset===0||(l.hasAnyZOffset=!0)}v&&(l.zOffsetBuffersNeedUpload=!0,l.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(l,d,v,T){let O=d,M=v;if(l.canonical.z!==T.canonical.z){const R=T.canonical,N=1/(1<<l.canonical.z-R.z);O=(d+l.canonical.x*a.al)*N-R.x*a.al|0,M=(v+l.canonical.y*a.al)*N-R.y*a.al|0}return{tileX:O,tileY:M}}_getHeightAtTileOffset(l,d,v){let T,O;for(let M=0;M<this.layers.length;++M){const R=this.layers[M].layer;if(R.type!=="fill-extrusion"&&R.type!=="building")continue;const{bucket:N,tileID:q,verticalScale:H}=this.currentBuildingBuckets[M];if(!N)continue;const{tileX:re,tileY:ee}=this._mapCoordToOverlappingTile(l,d,v,q),oe=N.getHeightAtTileCoord(re,ee);oe&&oe.height!==void 0&&(oe.hidden?T=oe.height:O=Math.max(oe.height*H,O||0))}if(O!==void 0)return O;for(let M=0;M<this.layers.length;++M){const R=this.layers[M];if(R.layer.type!=="model"||!R.visible)continue;const{bucket:N,tileID:q}=this.currentBuildingBuckets[M];if(!N)continue;const{tileX:H,tileY:re}=this._mapCoordToOverlappingTile(l,d,v,q),ee=N.getHeightAtTileCoord(H,re);if(ee&&!ee.hidden)return ee.height===void 0&&T!==void 0?Math.min(ee.maxHeight,T)*ee.verticalScale:ee.height?ee.height*ee.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function w_(y,l){const d={};for(const v in y)v!=="ref"&&(d[v]=y[v]);return a.bx.forEach(v=>{v in l&&(d[v]=l[v])}),d}function S_(y){y=y.slice();const l=Object.create(null);for(let d=0;d<y.length;d++)l[y[d].id]=y[d];for(let d=0;d<y.length;d++)"ref"in y[d]&&(y[d]=w_(y[d],l[y[d].ref]));return y}const Cr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport",addIconset:"addIconset",removeIconset:"removeIconset"};function hf(y,l,d){d.push({command:Cr.addSource,args:[y,l[y]]})}function bg(y,l,d){l.push({command:Cr.removeSource,args:[y]}),d[y]=!0}function el(y,l,d,v){bg(y,d,v),hf(y,l,d)}function sh(y,l,d){let v;for(v in y[d])if(y[d].hasOwnProperty(v)&&v!=="data"&&!a.by(y[d][v],l[d][v]))return!1;for(v in l[d])if(l[d].hasOwnProperty(v)&&v!=="data"&&!a.by(y[d][v],l[d][v]))return!1;return!0}function lh(y,l,d,v,T,O){let M;for(M in l=l||{},y=y||{})y.hasOwnProperty(M)&&(a.by(y[M],l[M])||d.push({command:O,args:[v,M,l[M],T]}));for(M in l)l.hasOwnProperty(M)&&!y.hasOwnProperty(M)&&(a.by(y[M],l[M])||d.push({command:O,args:[v,M,l[M],T]}))}function lu(y){return y.id}function xg(y,l){return y[l.id]=l,y}function zp(y,l,d){const v=l.createTileMatrix(y,y.worldSize,d.toUnwrapped());return a.aB(new Float32Array(16),y.projMatrix,v)}function y0(y,l,d){if(l.projection.name===d.projection.name)return y.projMatrix;const v=d.clone();return v.setProjection(l.projection),zp(v,l.getProjection(),y)}function Ac(y,l,d){return l.name===d.projection.name?y.projMatrix:zp(d,l,y)}class uu{constructor(l,d){this.reset(l,d)}reset(l,d){this.points=l||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.aA(l,0,1);let d=1,v=this._distances[d];const T=l*this.paddedLength+this.padding;for(;v<T&&d<this._distances.length;)v=this._distances[++d];const O=d-1,M=this._distances[O],R=v-M,N=R>0?(T-M)/R:0;return this.points[O].mult(1-N).add(this.points[d].mult(N))}}class Fp{constructor(l,d,v){const T=this.boxCells=[],O=this.circleCells=[];this.xCellCount=Math.ceil(l/v),this.yCellCount=Math.ceil(d/v);for(let M=0;M<this.xCellCount*this.yCellCount;M++)T.push([]),O.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=d,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,d,v,T,O){this._forEachCell(d,v,T,O,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(T),this.bboxes.push(O)}insertCircle(l,d,v,T){this._forEachCell(d-T,v-T,d+T,v+T,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(d),this.circles.push(v),this.circles.push(T)}_insertBoxCell(l,d,v,T,O,M){this.boxCells[O].push(M)}_insertCircleCell(l,d,v,T,O,M){this.circleCells[O].push(M)}_query(l,d,v,T,O,M){if(v<0||l>this.width||T<0||d>this.height)return!O&&[];const R=[];if(l<=0&&d<=0&&this.width<=v&&this.height<=T){if(O)return!0;for(let N=0;N<this.boxKeys.length;N++)R.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const q=this.circles[3*N],H=this.circles[3*N+1],re=this.circles[3*N+2];R.push({key:this.circleKeys[N],x1:q-re,y1:H-re,x2:q+re,y2:H+re})}return M?R.filter(M):R}return this._forEachCell(l,d,v,T,this._queryCell,R,{hitTest:O,seenUids:{box:{},circle:{}}},M),O?R.length>0:R}_queryCircle(l,d,v,T,O){const M=l-v,R=l+v,N=d-v,q=d+v;if(R<0||M>this.width||q<0||N>this.height)return!T&&[];const H=[];return this._forEachCell(M,N,R,q,this._queryCellCircle,H,{hitTest:T,circle:{x:l,y:d,radius:v},seenUids:{box:{},circle:{}}},O),T?H.length>0:H}query(l,d,v,T,O){return this._query(l,d,v,T,!1,O)}hitTest(l,d,v,T,O){return this._query(l,d,v,T,!0,O)}hitTestCircle(l,d,v,T){return this._queryCircle(l,d,v,!0,T)}_queryCell(l,d,v,T,O,M,R,N){const q=R.seenUids,H=this.boxCells[O];if(H!==null){const ee=this.bboxes;for(const oe of H)if(!q.box[oe]){q.box[oe]=!0;const he=4*oe;if(l<=ee[he+2]&&d<=ee[he+3]&&v>=ee[he+0]&&T>=ee[he+1]&&(!N||N(this.boxKeys[oe]))){if(R.hitTest)return M.push(!0),!0;M.push({key:this.boxKeys[oe],x1:ee[he],y1:ee[he+1],x2:ee[he+2],y2:ee[he+3]})}}}const re=this.circleCells[O];if(re!==null){const ee=this.circles;for(const oe of re)if(!q.circle[oe]){q.circle[oe]=!0;const he=3*oe;if(this._circleAndRectCollide(ee[he],ee[he+1],ee[he+2],l,d,v,T)&&(!N||N(this.circleKeys[oe]))){if(R.hitTest)return M.push(!0),!0;{const ce=ee[he],de=ee[he+1],_e=ee[he+2];M.push({key:this.circleKeys[oe],x1:ce-_e,y1:de-_e,x2:ce+_e,y2:de+_e})}}}}}_queryCellCircle(l,d,v,T,O,M,R,N){const q=R.circle,H=R.seenUids,re=this.boxCells[O];if(re!==null){const oe=this.bboxes;for(const he of re)if(!H.box[he]){H.box[he]=!0;const ce=4*he;if(this._circleAndRectCollide(q.x,q.y,q.radius,oe[ce+0],oe[ce+1],oe[ce+2],oe[ce+3])&&(!N||N(this.boxKeys[he])))return M.push(!0),!0}}const ee=this.circleCells[O];if(ee!==null){const oe=this.circles;for(const he of ee)if(!H.circle[he]){H.circle[he]=!0;const ce=3*he;if(this._circlesCollide(oe[ce],oe[ce+1],oe[ce+2],q.x,q.y,q.radius)&&(!N||N(this.circleKeys[he])))return M.push(!0),!0}}}_forEachCell(l,d,v,T,O,M,R,N){const q=this._convertToXCellCoord(l),H=this._convertToYCellCoord(d),re=this._convertToXCellCoord(v),ee=this._convertToYCellCoord(T);for(let oe=q;oe<=re;oe++)for(let he=H;he<=ee;he++)if(O.call(this,l,d,v,T,this.xCellCount*he+oe,M,R,N))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,d,v,T,O,M){const R=T-l,N=O-d,q=v+M;return q*q>R*R+N*N}_circleAndRectCollide(l,d,v,T,O,M,R){const N=(M-T)/2,q=Math.abs(l-(T+N));if(q>N+v)return!1;const H=(R-O)/2,re=Math.abs(d-(O+H));if(re>H+v)return!1;if(q<=N||re<=H)return!0;const ee=q-N,oe=re-H;return ee*ee+oe*oe<=v*v}}const Xx=Math.tan(85*Math.PI/180);function yd(y,l,d,v,T,O,M){const R=a.bC();if(d)if(O.name==="globe"){const N=a.bD(T,l);a.aB(R,R,N)}else{const N=a.bE([],M);R[0]=N[0],R[1]=N[1],R[4]=N[2],R[5]=N[3],v||a.bB(R,R,T.angle)}else a.aB(R,T.labelPlaneMatrix,y);return R}function df(y,l,d,v,T,O,M){const R=yd(y,l,d,v,T,O,M);return O.name==="globe"&&d||(R[2]=R[6]=R[10]=R[14]=0),R}function ws(y,l,d,v,T,O,M){if(d){if(O.name==="globe"){const R=yd(y,l,d,v,T,O,M);return a.bl(R,R),a.aB(R,y,R),R}{const R=a.bz(y),N=a.bA([]);return N[0]=M[0],N[1]=M[1],N[4]=M[2],N[5]=M[3],a.aB(R,R,N),v||a.bB(R,R,-T.angle),R}}return T.glCoordMatrix}function cu(y,l,d,v){const T=[y,l,d,1];d?a.aC(T,T,v):E_(T,T,v);const O=T[3];return T[0]/=O,T[1]/=O,T[2]/=O,T}function T_(y,l){return Math.min(.5+y/l*.5,1.5)}function Zx(y,l){const d=y[0]/y[3],v=y[1]/y[3];return d>=-l[0]&&d<=l[0]&&v>=-l[1]&&v<=l[1]}function Qr(y,l,d,v,T,O,M,R,N,q,H=1){const re=d.transform,ee=v?y.textSizeData:y.iconSizeData,oe=a.bK(ee,d.transform.zoom,H),he=re.projection.name==="globe",ce=[256/d.width*2+1,256/d.height*2+1],de=v?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;de.clear();let _e=null;he&&(_e=v?y.text.globeExtVertexArray:y.icon.globeExtVertexArray);const Me=y.lineVertexArray,Ce=v?y.text.placedSymbolArray:y.icon.placedSymbolArray,Ae=d.transform.width/d.transform.height;let We,$e=!1;for(let Ge=0;Ge<Ce.length;Ge++){const Fe=Ce.get(Ge),{numGlyphs:Re,writingMode:et}=Fe;if(et!==a.bL.vertical||$e||We===a.bL.horizontal||($e=!0),We=et,(Fe.hidden||et===a.bL.vertical)&&!$e){os(Re,de);continue}$e=!1;const nt=new a.P(Fe.tileAnchorX,Fe.tileAnchorY),st=y.elevationType==="road",dt=!!re.elevation||st;let{x:ft,y:wt,z:It}=re.projection.projectTilePoint(nt.x,nt.y,q.canonical),pt=null;if(dt){const _n=st?y.getElevationFeatureForText(Ge):null;pt={getElevation:N,elevation:re.elevation,elevationFeature:_n};const[Dn,Un,Qn]=N(nt,re.elevation,_n);ft+=Dn,wt+=Un,It+=Qn}const tt=[ft,wt,It,1];if(a.aC(tt,tt,l),!Zx(tt,ce)){os(Re,de);continue}const At=tt[3],gt=T_(d.transform.getCameraToCenterDistance(re.projection),At),Dt=a.bM(ee,oe,Fe),qt=M?Dt/gt:Dt*gt,tn=cu(ft,wt,It,T);if(tn[3]<=0){os(Re,de);continue}let Wt={};const Ht=a.an(y.layers[0].layout.get("text-max-angle")),xn=Math.cos(Ht),yn=M?null:pt,rn=Kx(Fe,qt,!1,R,l,T,O,y.glyphOffsetArray,Me,de,_e,tn,nt,Wt,Ae,yn,re.projection,q,M,xn);$e=rn.useVertical,yn&&rn.needsFlipping&&(Wt={}),(rn.notEnoughRoom||$e||rn.needsFlipping&&Kx(Fe,qt,!0,R,l,T,O,y.glyphOffsetArray,Me,de,_e,tn,nt,Wt,Ae,yn,re.projection,q,M,xn).notEnoughRoom)&&os(Re,de)}v?(y.text.dynamicLayoutVertexBuffer.updateData(de),_e&&y.text.globeExtVertexBuffer&&y.text.globeExtVertexBuffer.updateData(_e)):(y.icon.dynamicLayoutVertexBuffer.updateData(de),_e&&y.icon.globeExtVertexBuffer&&y.icon.globeExtVertexBuffer.updateData(_e))}function _0(y,l,d,v,T,O,M,R,N,q,H,re,ee,oe,he,ce,de){const{lineStartIndex:_e,glyphStartIndex:Me,segment:Ce}=R,Ae=Me+R.numGlyphs,We=_e+R.lineLength,$e=l.getoffsetX(Me),Ge=l.getoffsetX(Ae-1),Fe=_d(y*$e,d,v,T,O,M,Ce,_e,We,N,q,H,re,ee,!0,oe,he,ce,de);if(!Fe)return null;const Re=_d(y*Ge,d,v,T,O,M,Ce,_e,We,N,q,H,re,ee,!0,oe,he,ce,de);return Re?{first:Fe,last:Re}:null}function v0(y,l,d,v){return y===a.bL.horizontal&&Math.abs(v)>Math.abs(d)?{useVertical:!0}:y===a.bL.vertical?v>0?{needsFlipping:!0}:null:l!==0&&(function(T,O){return T===0||Math.abs(O/T)>Xx})(d,v)?l===1?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function Kx(y,l,d,v,T,O,M,R,N,q,H,re,ee,oe,he,ce,de,_e,Me,Ce){const Ae=l/24,We=y.lineOffsetX*Ae,$e=y.lineOffsetY*Ae,{lineStartIndex:Ge,glyphStartIndex:Fe,numGlyphs:Re,segment:et,writingMode:nt,flipState:st}=y,dt=Ge+y.lineLength,ft=wt=>{if(H){const[At,gt,Dt]=wt.up,qt=q.length;a.bN(H,qt+0,At,gt,Dt),a.bN(H,qt+1,At,gt,Dt),a.bN(H,qt+2,At,gt,Dt),a.bN(H,qt+3,At,gt,Dt)}const[It,pt,tt]=wt.point;a.bO(q,It,pt,tt,wt.angle)};if(Re>1){const wt=_0(Ae,R,We,$e,d,re,ee,y,N,O,oe,ce,!1,de,_e,Me,Ce);if(!wt)return{notEnoughRoom:!0};if(v&&!d){let[It,pt,tt]=wt.first.point,[At,gt,Dt]=wt.last.point;[It,pt]=cu(It,pt,tt,M),[At,gt]=cu(At,gt,Dt,M);const qt=v0(nt,st,(At-It)*he,gt-pt);if(y.flipState=qt&&qt.needsFlipping?1:2,qt)return qt}ft(wt.first);for(let It=Fe+1;It<Fe+Re-1;It++){const pt=_d(Ae*R.getoffsetX(It),We,$e,d,re,ee,et,Ge,dt,N,O,oe,ce,!1,!1,de,_e,Me,Ce);if(!pt)return q.length-=4*(It-Fe),{notEnoughRoom:!0};ft(pt)}ft(wt.last)}else{if(v&&!d){const It=cu(ee.x,ee.y,0,T),pt=Ge+et+1,tt=new a.P(N.getx(pt),N.gety(pt)),At=cu(tt.x,tt.y,0,T),gt=At[3]>0?At:b0(ee,tt,It,1,T,void 0,de,_e.canonical),Dt=v0(nt,st,(gt[0]-It[0])*he,gt[1]-It[1]);if(y.flipState=Dt&&Dt.needsFlipping?1:2,Dt)return Dt}const wt=_d(Ae*R.getoffsetX(Fe),We,$e,d,re,ee,et,Ge,dt,N,O,oe,ce,!1,!1,de,_e,Me,Ce);if(!wt)return{notEnoughRoom:!0};ft(wt)}return{}}function Vn(y,l,d,v,T){const{x:O,y:M,z:R}=v.projectTilePoint(y.x,y.y,l);if(!T)return cu(O,M,R,d);const[N,q,H]=T.getElevation(y,T.elevation,T.elevationFeature);return cu(O+N,M+q,R+H,d)}function b0(y,l,d,v,T,O,M,R){const N=Vn(y.sub(l)._unit()._add(y),R,T,M,O);return a.av(N,d,N),a.aw(N,N),a.bH(N,d,N,v)}function _d(y,l,d,v,T,O,M,R,N,q,H,re,ee,oe,he,ce,de,_e,Me){const Ce=v?y-l:y+l;let Ae=Ce>0?1:-1,We=0;v&&(Ae*=-1,We=Math.PI),Ae<0&&(We+=Math.PI);let $e=R+M+(Ae>0?0:1)|0,Ge=T,Fe=T,Re=0,et=0;const nt=Math.abs(Ce),st=[],dt=[];let ft=O,wt=ft,It=a.bF([]);const pt=()=>b0(wt,ft,Fe,nt-Re+1,H,ee,ce,de.canonical);for(;Re+et<=nt;){if($e+=Ae,$e<R||$e>=N)return null;if(Fe=Ge,wt=ft,st.push(Fe),oe&&dt.push(wt),ft=new a.P(q.getx($e),q.gety($e)),Ge=re[$e],!Ge){const yn=Vn(ft,de.canonical,H,ce,ee);Ge=yn[3]>0?re[$e]=yn:pt()}Re+=et;const Ht=a.av([],Ge,Fe),xn=a.bG(Fe,Ge);if(d&&xn>0&&et>0&&a.bJ(It,Ht)/(et*xn)<Me)return null;et=xn,It=Ht}he&&ee&&(re[$e]&&(Ge=pt(),et=a.bG(Fe,Ge),It=a.av([],Ge,Fe)),re[$e]=Ge);const tt=(nt-Re)/et,At=ft.sub(wt)._mult(tt)._add(wt),gt=a.bH([],Fe,It,tt);let Dt=[0,0,1],qt=It[0],tn=It[1];if(_e&&(Dt=ce.upVector(de.canonical,At.x,At.y),Dt[0]!==0||Dt[1]!==0||Dt[2]!==1)){const Ht=[Dt[2],0,-Dt[0]],xn=a.bI([],Dt,Ht);a.aw(Ht,Ht),a.aw(xn,xn),qt=a.bJ(It,Ht),tn=a.bJ(It,xn)}if(d){const Ht=a.bI([],Dt,It);a.aw(Ht,Ht),a.bH(gt,gt,Ht,d*Ae)}const Wt=We+Math.atan2(tn,qt);return st.push(gt),oe&&dt.push(At),{point:gt,angle:Wt,path:st,tilePath:dt,up:Dt}}function os(y,l){const d=l.length,v=d+4*y;l.resize(v),l.float32.fill(-1/0,4*d,4*v)}function E_(y,l,d){const v=l[0],T=l[1];return y[0]=d[0]*v+d[4]*T+d[12],y[1]=d[1]*v+d[5]*T+d[13],y[3]=d[3]*v+d[7]*T+d[15],y}const tl=100;class Cn{constructor(l,d,v=new Fp(l.width+200,l.height+200,25),T=new Fp(l.width+200,l.height+200,25)){this.transform=l,this.grid=v,this.ignoredGrid=T,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+tl,this.screenBottomBoundary=l.height+tl,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=d}placeCollisionBox(l,d,v,T,O,M,R,N,q,H,re){let ee=v.projectedAnchorX,oe=v.projectedAnchorY,he=v.projectedAnchorZ;const ce=v.tileAnchorX,de=v.tileAnchorY,_e=v.elevation,Me=v.tileID,Ce=l.getProjection();if(_e&&Me){const[dt,ft,wt]=Ce.upVector(Me.canonical,v.tileAnchorX,v.tileAnchorY),It=Ce.upVectorScale(Me.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;ee+=dt*_e*It,oe+=ft*_e*It,he+=wt*_e*It}const Ae=l.projection.name==="globe",We=l.projection.name==="globe"?a.aj(this.transform.zoom):0;if(Me&&Ae&&We<1&&!M){const dt=1<<Me.canonical.z,ft=a.bP(ce,de);a.bQ(ft,ft,1/a.al),a.bR(ft,ft,a.bP(Me.canonical.x,Me.canonical.y)),a.bQ(ft,ft,1/dt),a.bS(ft,ft,a.bP(T[0],T[1])),ft[0]=a.bT(ft[0],-.5,.5),a.bQ(ft,ft,a.al);const wt=a.bU(ft[0],ft[1],a.al/(2*Math.PI),1);a.aC(wt,wt,O),ee=a.ak(ee,wt[0],We),oe=a.ak(oe,wt[1],We),he=a.ak(he,wt[2],We)}const $e=this.projectAndGetPerspectiveRatio(H,ee,oe,he,v.tileID,Ce.name==="globe"||!!_e||this.transform.pitch>0,Ce),Ge=q*$e.perspectiveRatio,Fe=(v.x1*d+R.x-v.padding)*Ge+$e.point.x,Re=(v.y1*d+R.y-v.padding)*Ge+$e.point.y,et=(v.x2*d+R.x+v.padding)*Ge+$e.point.x,nt=(v.y2*d+R.y+v.padding)*Ge+$e.point.y,st=$e.perspectiveRatio<=.55||$e.occluded;return!this.isInsideGrid(Fe,Re,et,nt)||!N&&this.grid.hitTest(Fe,Re,et,nt,re)||st?{box:[],offscreen:!1,occluded:$e.occluded}:{box:[Fe,Re,et,nt],offscreen:this.isOffscreen(Fe,Re,et,nt),occluded:!1}}placeCollisionCircles(l,d,v,T,O,M,R,N,q,H,re,ee,oe,he,ce,de){const _e=[],Me=this.transform.elevation,Ce=l.getProjection(),Ae=l.elevationType==="road",We=!!Me||Ae,$e=a.bV.getAtTileOffsetFunc(de,this.transform.center.lat,this.transform.worldSize,Ce),Ge=new a.P(v.tileAnchorX,v.tileAnchorY),Fe=new a.P(v.tileAnchorX,v.tileAnchorY);let{x:Re,y:et,z:nt}=Ce.projectTilePoint(Fe.x,Fe.y,de.canonical),st=null;if(We){const xn=Ae?l.getElevationFeatureForText(T):null;st={getElevation:$e,elevation:Me,elevationFeature:xn};const[yn,rn,_n]=$e(Ge,Me,xn);Re+=yn,et+=rn,nt+=_n}const dt=Ce.name==="globe",ft=this.projectAndGetPerspectiveRatio(N,Re,et,nt,de,dt||!!Me||this.transform.pitch>0,Ce),{perspectiveRatio:wt}=ft,It=(ee?R/wt:R*wt)/a.bY,pt=cu(Re,et,nt,q),tt=v.lineOffsetX*It,At=v.lineOffsetY*It,gt=a.an(l.layers[0].layout.get("text-max-angle")),Dt=Math.cos(gt),qt=ft.signedDistanceFromCamera>0?_0(It,M,tt,At,Ae&&v.flipState===1,pt,Fe,v,O,q,{},We&&!ee?st:null,ee&&We,Ce,de,ee,Dt):null;let tn=!1,Wt=!1,Ht=!0;if(qt&&!ft.occluded){const xn=.5*he*wt+ce,yn=new a.P(-100,-100),rn=new a.P(this.screenRightBoundary,this.screenBottomBoundary),_n=new uu,{first:Dn,last:Un}=qt,Qn=Dn.path.length;let yr=[];for(let Yn=Qn-1;Yn>=1;Yn--)yr.push(Dn.path[Yn]);for(let Yn=1;Yn<Un.path.length;Yn++)yr.push(Un.path[Yn]);const $n=2.5*xn;H&&(yr=yr.map(([Yn,Ur,Mr],ei)=>(We&&!dt&&(Mr=$e(ei<Qn-1?Dn.tilePath[Qn-1-ei]:Un.tilePath[ei-Qn+2],Me,st.elevationFeature)[2]),cu(Yn,Ur,Mr,H))),yr.some(Yn=>Yn[3]<=0)&&(yr=[]));let Jn=[];if(yr.length>0){let Yn=1/0,Ur=-1/0,Mr=1/0,ei=-1/0;for(const wr of yr)Yn=Math.min(Yn,wr[0]),Mr=Math.min(Mr,wr[1]),Ur=Math.max(Ur,wr[0]),ei=Math.max(ei,wr[1]);Ur>=yn.x&&Yn<=rn.x&&ei>=yn.y&&Mr<=rn.y&&(Jn=[yr.map(wr=>new a.P(wr[0],wr[1]))],(Yn<yn.x||Ur>rn.x||Mr<yn.y||ei>rn.y)&&(Jn=a.bW(Jn,yn.x,yn.y,rn.x,rn.y)))}for(const Yn of Jn){_n.reset(Yn,.25*xn);let Ur=0;Ur=_n.length<=.5*xn?1:Math.ceil(_n.paddedLength/$n)+1;for(let Mr=0;Mr<Ur;Mr++){const ei=Mr/Math.max(Ur-1,1),wr=_n.lerp(ei),er=wr.x+tl,Rr=wr.y+tl;_e.push(er,Rr,xn,0);const Pi=er-xn,ti=Rr-xn,Hr=er+xn,Kn=Rr+xn;if(Ht=Ht&&this.isOffscreen(Pi,ti,Hr,Kn),Wt=Wt||this.isInsideGrid(Pi,ti,Hr,Kn),!d&&this.grid.hitTestCircle(er,Rr,xn,oe)&&(tn=!0,!re))return{circles:[],offscreen:!1,collisionDetected:tn,occluded:!1}}}}return{circles:!re&&tn||!Wt?[]:_e,offscreen:Ht,collisionDetected:tn,occluded:ft.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let v=1/0,T=1/0,O=-1/0,M=-1/0;for(const H of l){const re=new a.P(H.x+tl,H.y+tl);v=Math.min(v,re.x),T=Math.min(T,re.y),O=Math.max(O,re.x),M=Math.max(M,re.y),d.push(re)}const R=this.grid.query(v,T,O,M).concat(this.ignoredGrid.query(v,T,O,M)),N={},q={};for(const H of R){const re=H.key;if(N[re.bucketInstanceId]===void 0&&(N[re.bucketInstanceId]={}),N[re.bucketInstanceId][re.featureIndex])continue;const ee=[new a.P(H.x1,H.y1),new a.P(H.x2,H.y1),new a.P(H.x2,H.y2),new a.P(H.x1,H.y2)];a.bX(d,ee)&&(N[re.bucketInstanceId][re.featureIndex]=!0,q[re.bucketInstanceId]===void 0&&(q[re.bucketInstanceId]=[]),q[re.bucketInstanceId].push(re.featureIndex))}return q}insertCollisionBox(l,d,v,T,O){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:T,collisionGroupID:O},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,d,v,T,O){const M=d?this.ignoredGrid:this.grid,R={bucketInstanceId:v,featureIndex:T,collisionGroupID:O};for(let N=0;N<l.length;N+=4)M.insertCircle(R,l[N],l[N+1],l[N+2])}projectAndGetPerspectiveRatio(l,d,v,T,O,M,R){const N=[d,v,T,1];let q=!1;T||this.transform.pitch>0?(a.aC(N,N,l),this.fogState&&O&&R.name!=="globe"&&(q=(function(ee,oe,he,ce,de,_e){const Me=_e.calculateFogTileMatrix(de),Ce=[oe,he,ce];return a.af(Ce,Ce,Me),Mn(ee,a.ag(Ce),_e.pitch,_e._fov)})(this.fogState,d,v,T,O.toUnwrapped(),this.transform)>.9)):E_(N,N,l);const H=N[3];return{point:new a.P((N[0]/H+1)/2*this.transform.width+tl,(-N[1]/H+1)/2*this.transform.height+tl),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(R)/H*.5,1.5),signedDistanceFromCamera:H,occluded:M&&N[2]>H||q}}isOffscreen(l,d,v,T){return v<tl||l>=this.screenRightBoundary||T<tl||d>this.screenBottomBoundary}isInsideGrid(l,d,v,T){return v>=0&&l<this.gridRightBoundary&&T>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const l=a.bA([]);return a.br(l,l,[-100,-100,0]),l}}class Yr{constructor(l,d,v,T){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?d:-d))):T&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class qr{constructor(l,d,v,T,O,M=!1){this.text=new Yr(l?l.text:null,d,v,O),this.icon=new Yr(l?l.icon:null,d,T,O),this.clipped=M}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Bs{constructor(l,d,v,T=!1){this.text=l,this.icon=d,this.skipFade=v,this.clipped=T}}class Np{constructor(){this.invProjMatrix=a.bC(),this.viewportMatrix=a.bC(),this.circles=[]}}class ii{constructor(l,d,v,T,O){this.bucketInstanceId=l,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=T,this.tileID=O}}class A_{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const d=++this.maxGroupID;this.collisionGroups[l]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[l]}}function Bp(y,l,d,v,T){const{horizontalAlign:O,verticalAlign:M}=a.c1(y),R=-(O-.5)*l,N=-(M-.5)*d,q=a.c2(y,v);return new a.P(R+q[0]*T,N+q[1]*T)}function vd(y,l,d,v,T){const O=new a.P(y,l);return d&&O._rotate(v?T:-T),O}class Ss{constructor(l,d,v,T,O,M){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new Cn(this.transform,O),this.buildingIndex=M,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new A_(v),this.collisionCircleArrays={},this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={},this.lastReplacementSourceUpdateTime=0}getBucketParts(l,d,v,T,O=1){const M=v.getBucket(d),R=v.latestFeatureIndex;if(!M||!R||d.fqid!==M.layerIds[0])return;const N=M.layers[0].layout,q=M.layers[0].paint,H=v.collisionBoxArray,re=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),ee=v.tileSize/a.al,oe=v.tileID.toUnwrapped();this.transform.setProjection(M.projection);const he=(ce=v.tileID,de=M.getProjection(),_e=this.transform,de.name===this.projection?_e.calculateProjMatrix(ce.toUnwrapped()):zp(_e,de,ce));var ce,de,_e;const Me=N.get("text-pitch-alignment")==="map",Ce=N.get("text-rotation-alignment")==="map";d.compileFilter(d.options);const Ae=d.dynamicFilter(),We=d.dynamicFilterNeedsFeature(),$e=this.transform.calculatePixelsToTileUnitsMatrix(v),Ge=df(he,v.tileID.canonical,Me,Ce,this.transform,M.getProjection(),$e);let Fe=null;const Re=M.getProjection().createInversionMatrix(this.transform,v.tileID.canonical);if(Me){const tt=ws(he,v.tileID.canonical,Me,Ce,this.transform,M.getProjection(),$e);Fe=a.aB([],this.transform.labelPlaneMatrix,tt)}let et=null;Ae&&v.latestFeatureIndex&&(et={unwrappedTileID:oe,dynamicFilter:Ae,dynamicFilterNeedsFeature:We}),this.retainedQueryData[M.bucketInstanceId]=new ii(M.bucketInstanceId,R,M.sourceLayerIndex,M.index,v.tileID);const[nt,st]=M.layers[0].layout.get("text-size-scale-range"),dt=a.aA(O,nt,st),[ft,wt]=N.get("icon-size-scale-range"),It=a.aA(O,ft,wt),pt={bucket:M,layout:N,paint:q,posMatrix:he,invMatrix:Re,mercatorCenter:[a.aF(this.transform.center.lng),a.aJ(this.transform.center.lat)],textLabelPlaneMatrix:Ge,labelToScreenMatrix:Fe,clippingData:et,scale:re,textPixelRatio:ee,holdingForFade:v.holdingForFade(),collisionBoxArray:H,partiallyEvaluatedTextSize:a.bK(M.textSizeData,this.transform.zoom,dt),partiallyEvaluatedIconSize:a.bK(M.iconSizeData,this.transform.zoom,It),collisionGroup:this.collisionGroups.get(M.sourceID),latestFeatureIndex:v.latestFeatureIndex};if(T)for(const tt of M.sortKeyRanges){const{sortKey:At,symbolInstanceStart:gt,symbolInstanceEnd:Dt}=tt;l.push({sortKey:At,symbolInstanceStart:gt,symbolInstanceEnd:Dt,parameters:pt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:pt})}attemptAnchorPlacement(l,d,v,T,O,M,R,N,q,H,re,ee,oe,he,ce,de,_e,Me,Ce,Ae,We){const{textOffset0:$e,textOffset1:Ge,crossTileID:Fe}=ce,Re=[$e,Ge],et=Bp(l,M,R,Re,N),nt=this.collisionIndex.placeCollisionBox(_e,N,d,v,T,O,vd(et.x,et.y,q,H,this.transform.angle),he,re,ee,oe.predicate);if(Ce){const st=_e.getSymbolInstanceIconSize(We,this.transform.zoom,ce.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(_e,st,Ce,v,T,O,vd(et.x,et.y,q,H,this.transform.angle),he,re,ee,oe.predicate).box.length===0)return}if(nt.box.length>0){let st;return this.prevPlacement&&this.prevPlacement.variableOffsets[Fe]&&this.prevPlacement.placements[Fe]&&this.prevPlacement.placements[Fe].text&&(st=this.prevPlacement.variableOffsets[Fe].anchor),this.variableOffsets[Fe]={textOffset:Re,width:M,height:R,anchor:l,textScale:N,prevAnchor:st},this.markUsedJustification(_e,l,ce,Me),_e.allowVerticalPlacement&&(this.markUsedOrientation(_e,Me,ce),this.placedOrientations[Fe]=Me),{shift:et,placedGlyphBoxes:nt}}}placeLayerBucketPart(l,d,v,T,O=1){const{bucket:M,layout:R,paint:N,posMatrix:q,textLabelPlaneMatrix:H,labelToScreenMatrix:re,clippingData:ee,textPixelRatio:oe,mercatorCenter:he,invMatrix:ce,holdingForFade:de,collisionBoxArray:_e,partiallyEvaluatedTextSize:Me,partiallyEvaluatedIconSize:Ce,collisionGroup:Ae,latestFeatureIndex:We}=l.parameters,$e=R.get("text-optional"),Ge=R.get("icon-optional"),Fe=R.get("text-allow-overlap"),Re=R.get("icon-allow-overlap"),et=R.get("text-rotation-alignment")==="map",nt=R.get("icon-rotation-alignment")==="map",st=R.get("text-pitch-alignment")==="map",dt=N.get("symbol-z-offset"),ft=R.get("symbol-elevation-reference")==="sea",wt=R.get("symbol-placement"),[It,pt]=R.get("text-size-scale-range"),[tt,At]=R.get("icon-size-scale-range"),gt=a.aA(O,It,pt),Dt=a.aA(O,tt,At),qt=R.get("text-variable-anchor"),tn=et&&wt!=="point",Wt=nt&&wt!=="point",Ht=qt&&M.hasTextData(),xn=M.hasIconTextFit()&&Ht&&M.hasIconData();this.transform.setProjection(M.projection);const yn=Ht||tn,rn=Wt||xn;let _n=Fe&&(Re||!M.hasIconData()||Ge),Dn=Re&&(Fe||!M.hasTextData()||$e);const Un=!dt.isConstant();!M.collisionArrays&&_e&&M.deserializeCollisionBoxes(_e),v&&T&&M.updateCollisionDebugBuffers(this.transform.zoom,_e,gt,Dt);const Qn=($n,Jn,Yn)=>{const{crossTileID:Ur,numVerticalGlyphVertices:Mr}=$n;let ei=null;if(ee&&ee.dynamicFilterNeedsFeature||Un){const $i=this.retainedQueryData[M.bucketInstanceId];ei=We.loadFeature({featureIndex:$n.featureIndex,bucketIndex:$i.bucketIndex,sourceLayerIndex:$i.sourceLayerIndex,layoutVertexArrayOffset:0});const xa=ei.properties?ei.properties.worldview:null;if(M.localizable&&M.worldview&&typeof xa=="string")if(xa==="all")ei.properties.$localized=!0;else{if(!xa.split(",").includes(M.worldview))return;ei.properties.$localized=!0,ei.properties.worldview=M.worldview}}if(ee&&!(0,ee.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch,worldview:M.worldview},ei,this.retainedQueryData[M.bucketInstanceId].tileID.canonical,new a.P($n.tileAnchorX,$n.tileAnchorY),this.transform.calculateDistanceTileData(ee.unwrappedTileID)))return this.placements[Ur]=new Bs(!1,!1,!1,!0),void d.add(Ur);const wr=dt.evaluate(ei,{});if(d.has(Ur))return;if(de)return void(this.placements[Ur]=new Bs(!1,!1,!1));let er=!1,Rr=!1,Pi=!0,ti=!1,Hr=!1,Kn=null,tr={box:null,offscreen:null,occluded:null},yi={box:null},Ji=null,ai=null,_i=null,cs=0,Uo=0,co=0;Yn.textFeatureIndex?cs=Yn.textFeatureIndex:$n.useRuntimeCollisionCircles&&(cs=$n.featureIndex),Yn.verticalTextFeatureIndex&&(Uo=Yn.verticalTextFeatureIndex);const Gr=M.elevationFeatures?M.elevationFeatures[$n.elevationFeatureIndex]:void 0,ul=$i=>{$i.tileID=this.retainedQueryData[M.bucketInstanceId].tileID;const xa=this.transform.elevation;$i.elevation=ft?wr:wr+a.bV.getAtTileOffset($i.tileID,new a.P($i.tileAnchorX,$i.tileAnchorY),xa,Gr),$i.elevation+=$n.zOffset},$o=Yn.textBox;if($o){ul($o);const $i=Si=>{let Ia=a.bL.horizontal;if(M.allowVerticalPlacement&&!Si&&this.prevPlacement){const no=this.prevPlacement.placedOrientations[Ur];no&&(this.placedOrientations[Ur]=no,Ia=no,this.markUsedOrientation(M,Ia,$n))}return Ia},xa=(Si,Ia)=>{if(M.allowVerticalPlacement&&Mr>0&&Yn.verticalTextBox){for(const no of M.writingModes)if(no===a.bL.vertical?(tr=Ia(),yi=tr):tr=Si(),tr&&tr.box&&tr.box.length)break}else tr=Si()};if(qt){let Si=qt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ur]){const Wi=this.prevPlacement.variableOffsets[Ur];Si.indexOf(Wi.anchor)>0&&(Si=Si.filter(cl=>cl!==Wi.anchor),Si.unshift(Wi.anchor))}const Ia=(Wi,cl,xm)=>{const rc=M.getSymbolInstanceTextSize(Me,$n,this.transform.zoom,Jn),Zd=(Wi.x2-Wi.x1)*rc+2*Wi.padding,Kd=(Wi.y2-Wi.y1)*rc+2*Wi.padding,fl=$n.hasIconTextFit&&!Re?cl:null;fl&&ul(fl);let Xl={box:[],offscreen:!1,occluded:!1};const ic=Fe?2*Si.length:Si.length;for(let Pl=0;Pl<ic;++Pl){const Ai=this.attemptAnchorPlacement(Si[Pl%Si.length],Wi,he,ce,yn,Zd,Kd,rc,et,st,oe,q,Ae,Pl>=Si.length,$n,Jn,M,xm,fl,Me,Ce);if(Ai&&(Xl=Ai.placedGlyphBoxes,Xl&&Xl.box&&Xl.box.length)){er=!0,Kn=Ai.shift;break}}return Xl};xa(()=>Ia($o,Yn.iconBox,a.bL.horizontal),()=>{const Wi=Yn.verticalTextBox;return Wi&&ul(Wi),M.allowVerticalPlacement&&!(tr&&tr.box&&tr.box.length)&&Mr>0&&Wi?Ia(Wi,Yn.verticalIconBox,a.bL.vertical):{box:null,offscreen:null,occluded:null}}),tr&&(er=tr.box,Pi=tr.offscreen,ti=tr.occluded);const no=$i(!(!tr||!tr.box));if(!er&&this.prevPlacement){const Wi=this.prevPlacement.variableOffsets[Ur];Wi&&(this.variableOffsets[Ur]=Wi,this.markUsedJustification(M,Wi.anchor,$n,no))}}else{const Si=(Ia,no)=>{const Wi=M.getSymbolInstanceTextSize(Me,$n,this.transform.zoom,Jn),cl=this.collisionIndex.placeCollisionBox(M,Wi,Ia,he,ce,yn,new a.P(0,0),Fe,oe,q,Ae.predicate);return cl&&cl.box&&cl.box.length&&(this.markUsedOrientation(M,no,$n),this.placedOrientations[Ur]=no),cl};xa(()=>Si($o,a.bL.horizontal),()=>{const Ia=Yn.verticalTextBox;return M.allowVerticalPlacement&&Mr>0&&Ia?(ul(Ia),Si(Ia,a.bL.vertical)):{box:null,offscreen:null,occluded:null}}),$i(!!(tr&&tr.box&&tr.box.length))}}if(Ji=tr,er=Ji&&Ji.box&&Ji.box.length>0,Pi=Ji&&Ji.offscreen,ti=Ji&&Ji.occluded,$n.useRuntimeCollisionCircles){const $i=$n.centerJustifiedTextSymbolIndex>=0?$n.centerJustifiedTextSymbolIndex:$n.verticalPlacedTextSymbolIndex,xa=M.text.placedSymbolArray.get($i),Si=a.bM(M.textSizeData,Me,xa),Ia=R.get("text-padding");ai=this.collisionIndex.placeCollisionCircles(M,Fe,xa,$i,M.lineVertexArray,M.glyphOffsetArray,Si,q,H,re,v,st,Ae.predicate,$n.collisionCircleDiameter*Si/a.bY,Ia,this.retainedQueryData[M.bucketInstanceId].tileID),er=Fe||ai.circles.length>0&&!ai.collisionDetected,Pi=Pi&&ai.offscreen,ti=ai.occluded}if(Yn.iconFeatureIndex&&(co=Yn.iconFeatureIndex),Yn.iconBox){const $i=xa=>{ul(xa);const Si=$n.hasIconTextFit&&Kn?vd(Kn.x,Kn.y,et,st,this.transform.angle):new a.P(0,0),Ia=M.getSymbolInstanceIconSize(Ce,this.transform.zoom,$n.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(M,Ia,xa,he,ce,rn,Si,Re,oe,q,Ae.predicate)};yi&&yi.box&&yi.box.length&&Yn.verticalIconBox?(_i=$i(Yn.verticalIconBox),Rr=_i.box.length>0):(_i=$i(Yn.iconBox),Rr=_i.box.length>0),Pi=Pi&&_i.offscreen,Hr=_i.occluded}const Zo=$e||$n.numHorizontalGlyphVertices===0&&Mr===0,Il=Ge||$n.numIconVertices===0;if(Zo||Il?Il?Zo||(Rr=Rr&&er):er=Rr&&er:Rr=er=Rr&&er,er&&Ji&&Ji.box&&this.collisionIndex.insertCollisionBox(Ji.box,R.get("text-ignore-placement"),M.bucketInstanceId,yi&&yi.box&&Uo?Uo:cs,Ae.ID),Rr&&_i&&this.collisionIndex.insertCollisionBox(_i.box,R.get("icon-ignore-placement"),M.bucketInstanceId,co,Ae.ID),ai&&(er&&this.collisionIndex.insertCollisionCircles(ai.circles,R.get("text-ignore-placement"),M.bucketInstanceId,cs,Ae.ID),v)){const $i=M.bucketInstanceId;let xa=this.collisionCircleArrays[$i];xa===void 0&&(xa=this.collisionCircleArrays[$i]=new Np);for(let Si=0;Si<ai.circles.length;Si+=4)xa.circles.push(ai.circles[Si+0]),xa.circles.push(ai.circles[Si+1]),xa.circles.push(ai.circles[Si+2]),xa.circles.push(ai.collisionDetected?1:0)}const qs=M.projection.name!=="globe";_n=_n&&(qs||!ti),Dn=Dn&&(qs||!Hr),this.placements[Ur]=new Bs(er||_n,Rr||Dn,Pi||M.justReloaded),d.add(Ur)},yr=this.retainedQueryData[M.bucketInstanceId].tileID;if(M.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(M,yr),M.elevationType==="road"&&M.updateRoadElevation(yr.canonical),M.updateZOffset(),M.sortFeaturesByY){const $n=M.getSortedSymbolIndexes(this.transform.angle);for(let Jn=$n.length-1;Jn>=0;--Jn){const Yn=$n[Jn];Qn(M.symbolInstances.get(Yn),Yn,M.collisionArrays[Yn])}M.hasAnyZOffset&&a.w(`${M.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(M.hasAnyZOffset){const $n=M.getSortedIndexesByZOffset();for(let Jn=0;Jn<$n.length;++Jn){const Yn=$n[Jn];Qn(M.symbolInstances.get(Yn),Yn,M.collisionArrays[Yn])}}else for(let $n=l.symbolInstanceStart;$n<l.symbolInstanceEnd;$n++)Qn(M.symbolInstances.get($n),$n,M.collisionArrays[$n]);if(v&&M.bucketInstanceId in this.collisionCircleArrays){const $n=this.collisionCircleArrays[M.bucketInstanceId];a.bl($n.invProjMatrix,q),$n.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1}markUsedJustification(l,d,v,T){const{leftJustifiedTextSymbolIndex:O,centerJustifiedTextSymbolIndex:M,rightJustifiedTextSymbolIndex:R,verticalPlacedTextSymbolIndex:N,crossTileID:q}=v,H=a.c3(d),re=T===a.bL.vertical?N:H==="left"?O:H==="center"?M:H==="right"?R:-1;O>=0&&(l.text.placedSymbolArray.get(O).crossTileID=re>=0&&O!==re?0:q),M>=0&&(l.text.placedSymbolArray.get(M).crossTileID=re>=0&&M!==re?0:q),R>=0&&(l.text.placedSymbolArray.get(R).crossTileID=re>=0&&R!==re?0:q),N>=0&&(l.text.placedSymbolArray.get(N).crossTileID=re>=0&&N!==re?0:q)}markUsedOrientation(l,d,v){const T=d===a.bL.horizontal||d===a.bL.horizontalOnly?d:0,O=d===a.bL.vertical?d:0,{leftJustifiedTextSymbolIndex:M,centerJustifiedTextSymbolIndex:R,rightJustifiedTextSymbolIndex:N,verticalPlacedTextSymbolIndex:q}=v,H=l.text.placedSymbolArray;M>=0&&(H.get(M).placedOrientation=T),R>=0&&(H.get(R).placedOrientation=T),N>=0&&(H.get(N).placedOrientation=T),q>=0&&(H.get(q).placedOrientation=O)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const T=d?d.symbolFadeChange(l):1,O=d?d.opacities:{},M=d?d.variableOffsets:{},R=d?d.placedOrientations:{};for(const N in this.placements){const q=this.placements[N],H=O[N];H?(this.opacities[N]=new qr(H,T,q.text,q.icon,null,q.clipped),v=v||q.text!==H.text.placed||q.icon!==H.icon.placed):(this.opacities[N]=new qr(null,T,q.text,q.icon,q.skipFade,q.clipped),v=v||q.text||q.icon)}for(const N in O){const q=O[N];if(!this.opacities[N]){const H=new qr(q,T,!1,!1);H.isHidden()||(this.opacities[N]=H,v=v||q.text.placed||q.icon.placed)}}for(const N in M)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=M[N]);for(const N in R)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=R[N]);v?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:l)}updateLayerOpacities(l,d,v,T){T&&(this.lastReplacementSourceUpdateTime=T.updateTime);const O=new Set;for(const M of d){const R=M.getBucket(l);R&&M.latestFeatureIndex&&l.fqid===R.layerIds[0]&&(this.updateBucketOpacities(R,O,M,M.collisionBoxArray,v,T,M.tileID,l.scope),R.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(R,M.tileID),R.elevationType==="road"&&R.updateRoadElevation(M.tileID.canonical),R.updateZOffset())}}updateBucketOpacities(l,d,v,T,O,M,R,N){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const q=l.layers[0].layout,H=l.layers[0].paint,re=!!l.layers[0].dynamicFilter(),ee=new qr(null,0,!1,!1,!0),oe=q.get("text-allow-overlap"),he=q.get("icon-allow-overlap"),ce=q.get("text-variable-anchor"),de=q.get("text-rotation-alignment")==="map",_e=q.get("text-pitch-alignment")==="map",Me=H.get("symbol-z-offset"),Ce=q.get("symbol-elevation-reference")==="sea",Ae=!Me.isConstant(),We=new qr(null,0,oe&&(he||!l.hasIconData()||q.get("icon-optional")),he&&(oe||!l.hasTextData()||q.get("text-optional")),!0);!l.collisionArrays&&T&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(T);const $e=(Fe,Re,et)=>{for(let nt=0;nt<Re/4;nt++)Fe.opacityVertexArray.emplaceBack(et)};let Ge=0;M&&l.updateReplacement(R,M);for(let Fe=0;Fe<l.symbolInstances.length;Fe++){const Re=l.symbolInstances.get(Fe),{numHorizontalGlyphVertices:et,numVerticalGlyphVertices:nt,crossTileID:st,numIconVertices:dt,tileAnchorX:ft,tileAnchorY:wt}=Re;let It=null;const pt=this.retainedQueryData[l.bucketInstanceId];Ae&&Re&&pt&&(It=v.latestFeatureIndex.loadFeature({featureIndex:Re.featureIndex,bucketIndex:pt.bucketIndex,sourceLayerIndex:pt.sourceLayerIndex,layoutVertexArrayOffset:0}));const tt=Me.evaluate(It,{}),At=d.has(st);let gt=this.opacities[st];At?gt=ee:gt||(gt=We,this.opacities[st]=gt),d.add(st);const Dt=et>0||nt>0,qt=dt>0,tn=this.placedOrientations[st],Wt=tn===a.bL.vertical,Ht=tn===a.bL.horizontal||tn===a.bL.horizontalOnly;!Dt&&!qt||gt.isHidden()||Ge++;let xn=!1;if((Dt||qt)&&M)for(const yn of l.activeReplacements){if(a.bZ(yn,O,a.b_.Symbol,N)||yn.min.x>ft||ft>yn.max.x||yn.min.y>wt||wt>yn.max.y)continue;const rn=a.b$(ft,wt,R.canonical,yn.footprintTileId.canonical);if(xn=a.c0(rn,yn.footprint),xn)break}if(Dt){const yn=xn?Bo:ss(gt.text);$e(l.text,et,Wt?Bo:yn),$e(l.text,nt,Ht?Bo:yn);const rn=gt.text.isHidden(),{leftJustifiedTextSymbolIndex:_n,centerJustifiedTextSymbolIndex:Dn,rightJustifiedTextSymbolIndex:Un,verticalPlacedTextSymbolIndex:Qn}=Re,yr=l.text.placedSymbolArray,$n=rn||Wt?1:0;_n>=0&&(yr.get(_n).hidden=$n),Dn>=0&&(yr.get(Dn).hidden=$n),Un>=0&&(yr.get(Un).hidden=$n),Qn>=0&&(yr.get(Qn).hidden=rn||Ht?1:0);const Jn=this.variableOffsets[st];Jn&&this.markUsedJustification(l,Jn.anchor,Re,tn);const Yn=this.placedOrientations[st];Yn&&(this.markUsedJustification(l,"left",Re,Yn),this.markUsedOrientation(l,Yn,Re))}if(qt){const yn=xn?Bo:ss(gt.icon),{placedIconSymbolIndex:rn,verticalPlacedIconSymbolIndex:_n}=Re,Dn=l.icon.placedSymbolArray,Un=gt.icon.isHidden()?1:0;rn>=0&&($e(l.icon,dt,Wt?Bo:yn),Dn.get(rn).hidden=Un),_n>=0&&($e(l.icon,Re.numVerticalIconVertices,Ht?Bo:yn),Dn.get(_n).hidden=Un)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const yn=l.collisionArrays[Fe];if(yn){let rn=new a.P(0,0),_n=!0;if(yn.textBox||yn.verticalTextBox){if(ce){const Un=this.variableOffsets[st];Un?(rn=Bp(Un.anchor,Un.width,Un.height,Un.textOffset,Un.textScale),de&&rn._rotate(_e?this.transform.angle:-this.transform.angle)):_n=!1}re&&(_n=!gt.clipped),yn.textBox&&Oa(l.textCollisionBox.collisionVertexArray,gt.text.placed,!_n||Wt,tt,Ce,rn.x,rn.y),yn.verticalTextBox&&Oa(l.textCollisionBox.collisionVertexArray,gt.text.placed,!_n||Ht,tt,Ce,rn.x,rn.y)}const Dn=_n&&!!(!Ht&&yn.verticalIconBox);yn.iconBox&&Oa(l.iconCollisionBox.collisionVertexArray,gt.icon.placed,Dn,tt,Ce,Re.hasIconTextFit?rn.x:0,Re.hasIconTextFit?rn.y:0),yn.verticalIconBox&&Oa(l.iconCollisionBox.collisionVertexArray,gt.icon.placed,!Dn,tt,Ce,Re.hasIconTextFit?rn.x:0,Re.hasIconTextFit?rn.y:0)}}}if(l.fullyClipped=Ge===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const Fe=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=Fe.invProjMatrix,l.placementViewportMatrix=Fe.viewportMatrix,l.collisionCircleArray=Fe.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,d){const v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>l}isStale(){return this.stale}setStale(){this.stale=!0}}function Oa(y,l,d,v,T,O,M){y.emplaceBack(l?1:0,d?1:0,O||0,M||0,v,T?1:0),y.emplaceBack(l?1:0,d?1:0,O||0,M||0,v,T?1:0),y.emplaceBack(l?1:0,d?1:0,O||0,M||0,v,T?1:0),y.emplaceBack(l?1:0,d?1:0,O||0,M||0,v,T?1:0)}const x0=Math.pow(2,25),pf=Math.pow(2,24),w0=Math.pow(2,17),jp=Math.pow(2,16),wg=Math.pow(2,9),O_=Math.pow(2,8),Sg=Math.pow(2,1);function ss(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const l=y.placed?1:0,d=Math.floor(127*y.opacity);return d*x0+l*pf+d*w0+l*jp+d*wg+l*O_+d*Sg+l}const Bo=0;class nl{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,d,v,T,O,M){const R=this._bucketParts;for(;this._currentTileIndex<l.length;)if(d.getBucketParts(R,T,l[this._currentTileIndex],this._sortAcrossTiles,M),this._currentTileIndex++,O())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,R.sort((N,q)=>N.sortKey-q.sortKey));this._currentPartIndex<R.length;){const N=R[this._currentPartIndex];if(d.placeLayerBucketPart(N,this._seenCrossTileIDs,v,N.symbolInstanceStart===0,M),this._currentPartIndex++,O())return!0}return!1}}class S0{startNewPlacement(l,d,v,T,O,M,R,N){return this.placement=new Ss(l,T,O,M,R,N),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=!1,this._showCollisionBoxes=v,this._fadeDuration=T,this._done=!1,this._inProgressLayer=null,this}requestFullPlacement(){this._forceFullPlacement=!0}isFullPlacementRequested(){return this._forceFullPlacement}setStale(){this.placement&&(this.placement.stale=!0)}isStale(){return!!this.placement&&this.placement.stale}isDone(){return this._done}continuePlacement(l,d,v,T,O){const M=a.o.now(),R=()=>{const N=a.o.now()-M;return!this.isFullPlacementRequested()&&this._fadeDuration!==0&&N>2};for(;this._currentPlacementIndex>=0;){const N=d[l[this._currentPlacementIndex]],q=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&N.visibility!=="none"&&(!N.minzoom||N.minzoom<=q)&&(!N.maxzoom||N.maxzoom>q)){const H=N,re=H.layout.get("symbol-z-elevate"),ee=H.layout.get("symbol-sort-key").constantOr(1)!==void 0,oe=H.layout.get("symbol-z-order"),he=oe==="viewport-y"||oe==="auto"&&!(oe!=="viewport-y"&&ee),ce=H.layout.get("text-allow-overlap")||H.layout.get("icon-allow-overlap")||H.layout.get("text-ignore-placement")||H.layout.get("icon-ignore-placement"),de=he&&ce,_e=this._inProgressLayer=this._inProgressLayer||new nl(H),Me=a.B(N.source,N.scope);if(_e.continuePlacement(re||de?T[Me]:v[Me],this.placement,this._showCollisionBoxes,N,R,O))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._forceFullPlacement=!1,this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const uh=512/a.al/2;class to{constructor(l,d,v){this.tileID=l,this.bucketInstanceId=v,this.index=new a.c4(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const T=l.canonical.x*a.al,O=l.canonical.y*a.al;for(let M=0;M<d.length;M++){const{key:R,crossTileID:N,tileAnchorX:q,tileAnchorY:H}=d.get(M),re=Math.floor((T+q)*uh),ee=Math.floor((O+H)*uh);this.index.add(re,ee),this.keys.push(R),this.crossTileIDs.push(N)}this.index.finish()}findMatches(l,d,v){const T=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),O=uh/Math.pow(2,d.canonical.z-this.tileID.canonical.z),M=d.canonical.x*a.al,R=d.canonical.y*a.al;for(let N=0;N<l.length;N++){const q=l.get(N);if(q.crossTileID)continue;const{key:H,tileAnchorX:re,tileAnchorY:ee}=q,oe=Math.floor((M+re)*O),he=Math.floor((R+ee)*O),ce=this.index.range(oe-T,he-T,oe+T,he+T).sort((de,_e)=>de-_e);for(const de of ce){const _e=this.crossTileIDs[de];if(this.keys[de]===H&&!v.has(_e)){v.add(_e),q.crossTileID=_e;break}}}}}class ju{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ul{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const d=Math.round((l-this.lng)/360);if(d!==0)for(const v in this.indexes){const T=this.indexes[v],O={};for(const M in T){const R=T[M];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+d),O[R.tileID.key]=R}this.indexes[v]=O}this.lng=l}addBucket(l,d,v){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let O=0;O<d.symbolInstances.length;O++)d.symbolInstances.get(O).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const T=this.usedCrossTileIDs[l.overscaledZ];for(const O in this.indexes){const M=this.indexes[O];if(Number(O)>l.overscaledZ)for(const R in M){const N=M[R];N.tileID.isChildOf(l)&&N.findMatches(d.symbolInstances,l,T)}else{const R=M[l.scaledTo(Number(O)).key];R&&R.findMatches(d.symbolInstances,l,T)}}for(let O=0;O<d.symbolInstances.length;O++){const M=d.symbolInstances.get(O);M.crossTileID||(M.crossTileID=v.generate(),T.add(M.crossTileID))}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new to(l,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(l,d){for(const v of d.crossTileIDs)this.usedCrossTileIDs[l].delete(v)}removeStaleBuckets(l){let d=!1;for(const v in this.indexes){const T=this.indexes[v];for(const O in T)l[T[O].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,T[O]),delete T[O],d=!0)}return d}}class Ca{constructor(){this.layerIndexes={},this.crossTileIDs=new ju,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,d,v,T){let O=this.layerIndexes[l.fqid];O===void 0&&(O=this.layerIndexes[l.fqid]=new Ul);let M=!1;const R={};T.name!=="globe"&&O.handleWrapJump(v);for(const N of d){const q=N.getBucket(l);q&&l.fqid===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),O.addBucket(N.tileID,q,this.crossTileIDs)&&(M=!0),R[q.bucketInstanceId]=!0)}return O.removeStaleBuckets(R)&&(M=!0),M}pruneUnusedLayers(l){const d={};l.forEach(v=>{d[v]=!0});for(const v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}const ch=771;class Gn{constructor(l,d,v,T){this.blendFunction=l,this.blendColor=d.toNonPremultipliedRenderColor(null),this.mask=v,this.blendEquation=T}}Gn.Replace=[1,0,1,0],Gn.disabled=new Gn(Gn.Replace,a.ao.transparent,[!1,!1,!1,!1]),Gn.unblended=new Gn(Gn.Replace,a.ao.transparent,[!0,!0,!0,!0]),Gn.alphaBlended=new Gn([1,ch,1,ch],a.ao.transparent,[!0,!0,!0,!0]),Gn.alphaBlendedNonPremultiplied=new Gn([770,ch,770,ch],a.ao.transparent,[!0,!0,!0,!0]),Gn.multiply=new Gn([774,0,774,0],a.ao.transparent,[!0,!0,!0,!0]),Gn.additive=new Gn([1,1,1,1],a.ao.transparent,[!0,!0,!0,!0]);class An{constructor(l,d,v){this.func=l,this.mask=d,this.range=v}}An.ReadOnly=!1,An.ReadWrite=!0,An.disabled=new An(519,An.ReadOnly,[0,1]);const bd=7680;class qn{constructor(l,d,v,T,O,M){this.test=l,this.ref=d,this.mask=v,this.fail=T,this.depthFail=O,this.pass=M}}qn.disabled=new qn({func:519,mask:0},0,0,bd,bd,bd);const Up=1029,$p=2305;class jn{constructor(l,d,v){this.enable=l,this.mode=d,this.frontFace=v}}function C_(y,l){const d=a.ca(y,3);a.cc(y,l),a.cg(y,3,d)}function T0(y,l){const d=a.c7([]);return a.c8(d,d,-l),a.c9(d,d,-y),d}function Oc(y,l){const d=[y[0],y[1],0],v=[l[0],l[1],0];if(a.ag(d)>=1e-15){const M=a.aw([],d);a.c5(v,M,a.bJ(v,M)),l[0]=v[0],l[1]=v[1]}const T=a.bI([],l,y);if(a.c6(T)<1e-15)return null;const O=Math.atan2(-T[1],T[0]);return T0(Math.atan2(Math.sqrt(y[0]*y[0]+y[1]*y[1]),-y[2]),O)}jn.disabled=new jn(!1,Up,$p),jn.backCCW=new jn(!0,Up,$p),jn.backCW=new jn(!0,Up,2304),jn.frontCW=new jn(!0,1028,2304),jn.frontCCW=new jn(!0,1028,$p);class Qx{constructor(l,d){this.position=l,this.orientation=d}get position(){return this._position}set position(l){if(l){const d=l instanceof a.ae?l:new a.ae(l[0],l[1],l[2]);this._renderWorldCopies&&(d.x=a.bT(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(l,d,v){if(this.orientation=null,!this.position)return;const T=this.position,O=v||(this._elevation?this._elevation.getAtPointOrZero(a.ae.fromLngLat(l)):0),M=a.ae.fromLngLat(l,O),R=[M.x-T.x,M.y-T.y,M.z-T.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=Oc(R,d)}setPitchBearing(l,d){this.orientation=T0(a.an(l),a.an(-d))}}class Vp{constructor(l,d){this._transform=a.bA([]),this.orientation=d,this.position=l}get mercatorPosition(){const l=this.position;return new a.ae(l[0],l[1],l[2])}get position(){const l=a.ca(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var d;l&&a.cg(this._transform,3,[(d=l)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||a.c7([]),l&&C_(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,d){this._orientation=T0(l,d),C_(this._transform,this._orientation)}forward(){const l=a.ca(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=a.ca(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=a.ca(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,d){const v=new Float64Array(16);return a.bl(v,this.getWorldToCamera(l,d)),v}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(l,d,v){const T=this.position;a.c5(T,T,-l);const O=new Float64Array(16);return a.bq(O,[v,v,v]),a.br(O,O,T),O[10]*=d,O}getWorldToCamera(l,d){const v=new Float64Array(16),T=new Float64Array(4),O=this.position;return a.cb(T,this._orientation),a.c5(O,O,-l),a.cc(v,T),a.br(v,v,O),v[1]*=-1,v[5]*=-1,v[9]*=-1,v[13]*=-1,v[8]*=d,v[9]*=d,v[10]*=d,v[11]*=d,v}getCameraToClipPerspective(l,d,v,T){const O=new Float64Array(16);return a.cd(O,l,d,v,T),O}getCameraToClipOrthographic(l,d,v,T,O,M){const R=new Float64Array(16);return a.ce(R,l,d,v,T,O,M),R}getDistanceToElevation(l,d=!1){const v=l===0?0:a.cf(l,d?a.a$(this.position[1]):this.position[1]),T=this.forward();return(v-this.position[2])/T[2]}clone(){return new Vp([...this.position],[...this.orientation])}}const rl=(y,l)=>({u_matrix:y,u_ground_shadow_factor:l});class il{constructor(l=0,d=0,v=0,T=0){if(isNaN(l)||l<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(T)||T<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=d,this.left=v,this.right=T}interpolate(l,d,v){return d.top!=null&&l.top!=null&&(this.top=a.ak(l.top,d.top,v)),d.bottom!=null&&l.bottom!=null&&(this.bottom=a.ak(l.bottom,d.bottom,v)),d.left!=null&&l.left!=null&&(this.left=a.ak(l.left,d.left,v)),d.right!=null&&l.right!=null&&(this.right=a.ak(l.right,d.right,v)),this}getCenter(l,d){const v=a.aA((this.left+l-this.right)/2,0,l),T=a.aA((this.top+d-this.bottom)/2,0,d);return new a.P(v,T)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new il(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Tl=15;class Tg{constructor(l,d,v,T,O,M,R){this.tileSize=512,this._renderWorldCopies=O===void 0||O,this._minZoom=l||0,this._maxZoom=d||22,this._minPitch=v??0,this._maxPitch=T??60,this.setProjection(M),this.setMaxBounds(R),this.width=0,this.height=0,this._center=new a.aT(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new il,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Vp,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const l=new Tg(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l._allowWorldUnderZoom=this._allowWorldUnderZoom,l}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<Tl}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(l,d=!1){const v=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||v)&&this._updateCameraOnTerrain(),(l||v)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return a.aH(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=a.cm(this.projectionOptions);const v=this.getProjection(),T=!a.by(d,v);return T&&this._calcMatrices(),this.mercatorFromTransition=!1,T}setOrthographicProjectionAtLowPitch(l){return this._orthographicProjectionAtLowPitch!==l&&(this._orthographicProjectionAtLowPitch=l,this._calcMatrices(),!0)}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=a.cm({name:"mercator"});const d=l!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return a.cf(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return a.bT(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const d=-l*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=a.cn(),a.co(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const d=a.aA(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=a.an(l),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const d=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(l){this._tileCoverLift!==l&&(this._tileCoverLift=l)}_updateCameraOnTerrain(){const l=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,d=this.elevation&&l===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||l===Number.NEGATIVE_INFINITY&&(!d||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const v=this._elevation;d||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&v.exaggeration()&&this._centerAltitudeValidForExaggeration!==v.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*v.exaggeration(),this._centerAltitudeValidForExaggeration=v.exaggeration()):(this._centerAltitude=l||0,this._centerAltitudeValidForExaggeration=v.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){if(this._centerAltitudeValidForExaggeration===void 0)return;const l=Math.max(0,(this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize);this._seaLevelZoom=this._zoomFromMercatorZ(l)}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],v=this.horizonLineFromTop();let T=0,O=0;for(let M=0;M<d.length;M++){const R=new a.P(d[M][0]*this.width,v+d[M][1]*(this.height-v)),N=l.pointCoordinate(R);if(!N)continue;const q=1/Math.hypot(N[0]-this._camera.position[0],N[1]-this._camera.position[1]);T+=N[3]*q,O+=q}return O===0?NaN:T/O}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),v=this.pixelsPerMeter/this.worldSize*d,T=this._mercatorZfromZoom(l),O=this._mercatorZfromZoom(this._maxZoom),M=Math.max(T-v,O);this._setZoom(this._zoomFromMercatorZ(M))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}equals(l){const d=this.elevation,v=l.elevation,T=d!=null!=(v!=null)||d&&v&&d.exaggeration()!==v.exaggeration();return this.width===l.width&&this.height===l.height&&this.center.lng===l.center.lng&&this.center.lat===l.center.lat&&this.zoom===l.zoom&&this.bearing===l.bearing&&this.pitch===l.pitch&&this.fov===l.fov&&this.projection.name===l.projection.name&&this._edgeInsets.equals(l.padding)&&!T}computeZoomRelativeTo(l){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let v;v=l.z<this._camera.position[2]?[d.x,d.y,d.z]:[l.x,l.y,l.z];const T=a.ag(a.av([],this._camera.position,v));return a.aA(this._zoomFromMercatorZ(T),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let d=!1;if(l.orientation&&!a.cp(l.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(l.orientation)),l.position){const v=[l.position.x,l.position.y,l.position.z];a.cq(v,this._camera.position)||(this._setCameraPosition(v),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,d=new Qx;return d.position=new a.ae(l[0],l[1],l[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(l){if(!a.cr(l))return!1;a.cs(l,l);const d=a.ct([],[0,0,-1],l),v=a.ct([],[0,-1,0],l);if(v[2]<0)return!1;const T=Oc(d,v);return!!T&&(this._camera.orientation=T,!0)}_setCameraPosition(l){const d=this.zoomScale(this.minZoom)*this.tileSize,v=this.zoomScale(this.maxZoom)*this.tileSize,T=this.cameraToCenterDistance;l[2]=a.aA(l[2],T/v,T/d),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,d,v){this._unmodified=!1,this._edgeInsets.interpolate(l,d,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const d=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(l){const d=[new a.cu(0,l)];if(this.renderWorldCopies){const v=this.pointCoordinate(new a.P(0,0)),T=this.pointCoordinate(new a.P(this.width,0)),O=this.pointCoordinate(new a.P(this.width,this.height)),M=this.pointCoordinate(new a.P(0,this.height)),R=Math.floor(Math.min(v.x,T.x,O.x,M.x)),N=Math.floor(Math.max(v.x,T.x,O.x,M.x)),q=1;for(let H=R-q;H<=N+q;H++)H!==0&&d.push(new a.cu(H,l))}return d}isLODDisabled(l){return(!l||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(l,d,v,T){let O=[];const M=v!=null,R=!M;if(R&&this.zoom<d||M&&v[0]===0&&v[1]===0)return O;const N=new Set,q=(re,ee,oe,he,ce)=>{const de=a.cY(ee,re,oe,he,ce);N.has(de)||(O.push(new a.aQ(re,ee,oe,he,ce)),N.add(de))};for(let re=0;re<l.length;re++){const ee=l[re];if(R&&ee.canonical.z!==d||M&&T!==void 0&&T>ee.canonical.z)continue;const oe=ee.canonical,he=ee.overscaledZ,ce=ee.wrap,de=1<<oe.z,_e=oe.x+1<de,Me=oe.x>0,Ce=oe.y+1<de,Ae=oe.y>0,We=ee.wrap-(Me?0:1),$e=ee.wrap+(_e?0:1),Ge=Me?oe.x-1:de-1,Fe=_e?oe.x+1:0;if(M)v[0]<0?(q(he,$e,oe.z,Fe,oe.y),v[1]<0&&Ce&&(q(he,ce,oe.z,oe.x,oe.y+1),q(he,$e,oe.z,Fe,oe.y+1)),v[1]>0&&Ae&&(q(he,ce,oe.z,oe.x,oe.y-1),q(he,$e,oe.z,Fe,oe.y-1))):v[0]>0?(q(he,We,oe.z,Ge,oe.y),v[1]<0&&Ce&&(q(he,ce,oe.z,oe.x,oe.y+1),q(he,We,oe.z,Ge,oe.y+1)),v[1]>0&&Ae&&(q(he,ce,oe.z,oe.x,oe.y-1),q(he,We,oe.z,Ge,oe.y-1))):v[1]<0&&Ce?q(he,ce,oe.z,oe.x,oe.y+1):Ae&&q(he,ce,oe.z,oe.x,oe.y-1);else{const Re=ee.visibleQuadrants;1&Re&&(q(he,We,oe.z,Ge,oe.y),Ae&&(q(he,ce,oe.z,oe.x,oe.y-1),q(he,We,oe.z,Ge,oe.y-1))),2&Re&&(q(he,$e,oe.z,Fe,oe.y),Ae&&(q(he,ce,oe.z,oe.x,oe.y-1),q(he,$e,oe.z,Fe,oe.y-1))),4&Re&&(q(he,We,oe.z,Ge,oe.y),Ce&&(q(he,ce,oe.z,oe.x,oe.y+1),q(he,We,oe.z,Ge,oe.y+1))),8&Re&&(q(he,$e,oe.z,Fe,oe.y),Ce&&(q(he,ce,oe.z,oe.x,oe.y+1),q(he,$e,oe.z,Fe,oe.y+1)))}}const H=[];for(const re of O)O.some(ee=>re.isChildOf(ee))||H.push(re);if(O=H.filter(re=>!l.some(ee=>!!(re.overscaledZ<d&&ee.isChildOf(re))||re.equals(ee)||re.isChildOf(ee))),R){const re=1<<d,ee=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),oe=[re*ee.x,re*ee.y],he=4,ce=he*he;O=O.filter(de=>{const _e=de.canonical.x+.5-oe[0],Me=de.canonical.y+.5-oe[1];return _e*_e+Me*Me<ce})}return O}extendTileCoverToNearPlane(l,d,v){const T=[],O=new Set;for(const Me of l)O.add(Me.key);const M=(Me,Ce,Ae,We,$e)=>{const Ge=a.cY(Ce,Me,Ae,We,$e);O.has(Ge)||(T.push(new a.aQ(Me,Ce,Ae,We,$e)),O.add(Ge))},R=l.reduce((Me,Ce)=>Math.max(Me,Ce.overscaledZ),v),N=1<<v,q=[new a.P(0,0),new a.P(a.al,0),new a.P(a.al,a.al),new a.P(0,a.al)],H=new a.P(0,0),re=new a.P(0,0),ee=(Me,Ce)=>{const Ae=Math.floor(Me[0]),We=Math.floor(Me[1]),$e=(Me[0]-Ae)*a.al,Ge=(Me[1]-We)*a.al,Fe=Math.floor(Ce[0]),Re=Math.floor(Ce[1]),et=(Ce[0]-Fe)*a.al,nt=(Ce[1]-Re)*a.al;for(let st=-1;st<=1;st++){const dt=Ae+st;if(!(dt<0||dt>=N)){H.x=$e-st*a.al,re.x=et-(dt-Fe)*a.al;for(let ft=-1;ft<=1;ft++){const wt=We+ft;H.y=Ge-ft*a.al,re.y=nt-(wt-Re)*a.al,a.cZ(H,re,q)&&M(R,0,v,dt,wt)}}}},oe=d.points,he=oe[a.cv],ce=oe[a.cw],de=this._projectToGround(he,oe[a.cx]),_e=this._projectToGround(ce,oe[a.cy]);return ee(he,de),ee(ce,_e),T}_projectToGround(l,d){return a.cz(a.cA(),l,d,l[2]/(l[2]-d[2]))}coveringTiles(l){let d=this.coveringZoomLevel(l);const v=d,T=this.elevation&&this.elevation.exaggeration(),O=T&&!l.isTerrainDEM,M=this.projection.name==="mercator";if(l.minzoom!==void 0&&d<l.minzoom)return[];l.maxzoom!==void 0&&d>l.maxzoom&&(d=l.maxzoom);const R=this.locationCoordinate(this.center),N=this.center.lat,q=1<<d,H=[q*R.x,q*R.y,0],re=this.projection.name==="globe",ee=!re,oe=a.cB.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,ee),he=re?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ce=q*a.cf(1,this.center.lat),de=this._camera.position[2]/a.cf(1,this.center.lat),_e=[q*he.x,q*he.y,de*(ee?1:ce)],Me=re||T,Ce=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),Ae=this.isLODDisabled(!0)?d:0;let We;if(this._elevation&&l.isTerrainDEM)We=1e4*this._elevation.exaggeration();else if(this._elevation){const tt=this._elevation.getMinMaxForVisibleTiles();We=tt?tt.max:this._centerAltitude}else We=this._centerAltitude;const $e=l.isTerrainDEM?-We:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ge=this.projection.isReprojectedInTileSpace?a.cC(this):1,Fe=tt=>{const gt=new a.ae(tt.x+25e-6,tt.y,tt.z),Dt=new a.ae(tt.x,tt.y+25e-6,tt.z),qt=tt.toLngLat(),tn=gt.toLngLat(),Wt=Dt.toLngLat(),Ht=this.locationCoordinate(qt),xn=this.locationCoordinate(tn),yn=this.locationCoordinate(Wt),rn=Math.hypot(xn.x-Ht.x,xn.y-Ht.y),_n=Math.hypot(yn.x-Ht.x,yn.y-Ht.y);return Math.sqrt(rn*_n)*Ge/25e-6},Re=tt=>{const At=We,gt=$e;return{aabb:a.cF(this,q,0,0,0,tt,gt,At,this.projection),zoom:0,x:0,y:0,minZ:gt,maxZ:At,wrap:tt,fullyVisible:!1}},et=[];let nt=[];const st=d,dt=l.reparseOverscaled?v:d,ft=(de-this._centerAltitude)*ce,wt=tt=>{if(!this._elevation||!tt.tileID||!M)return;const At=this._elevation.getMinMaxForTile(tt.tileID),gt=tt.aabb;At?(gt.min[2]=At.min,gt.max[2]=At.max,gt.center[2]=(gt.min[2]+gt.max[2])/2):(tt.shouldSplit=pt(tt),tt.shouldSplit||(gt.min[2]=gt.max[2]=gt.center[2]=this._centerAltitude))},It=(tt,At)=>{if(.707*At<tt)return 1;const gt=At/tt;return gt/(1.4144271570014144+(Math.pow(1.1,gt-1.4144271570014144+1)-1)/(1.1-1)-1)},pt=tt=>{if(tt.zoom<Ae)return!0;if(tt.zoom===st)return!1;if(tt.shouldSplit!=null)return tt.shouldSplit;const At=tt.aabb.distanceX(_e),gt=tt.aabb.distanceY(_e);let Dt=ft,qt=1;if(re){Dt=tt.aabb.distanceZ(_e);const _n=Math.pow(2,tt.zoom),Dn=a.a$((tt.y+1)/_n),Un=a.a$(tt.y/_n),Qn=Math.min(Math.max(N,Dn),Un),yr=a.d1(Qn)/a.d1(N);if(qt=Qn===N?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,yr/this._mercatorScaleRatio),this.zoom<=a.c_&&tt.zoom===st-1&&yr>=.9)return!0}else if(O&&(Dt=tt.aabb.distanceZ(_e)*ce),this.projection.isReprojectedInTileSpace&&v<=5){const _n=Math.pow(2,tt.zoom),Dn=Fe(new a.ae((tt.x+.5)/_n,(tt.y+.5)/_n));qt=Dn>.85?1:Dn}if(!M&&!re){const _n=Math.sqrt(At*At+gt*gt+Dt*Dt);let Dn=(1<<st-tt.zoom)*Ce*qt;return Dn*=It(Math.max(Dt,ft),_n),_n<Dn}let tn=Number.MAX_VALUE,Wt=0;const Ht=tt.aabb.getCorners(),xn=[];for(const _n of Ht){a.av(xn,_n,_e),re||(O?xn[2]*=ce:xn[2]=ft);const Dn=a.bJ(xn,this._camera.forward());Dn<tn&&(tn=Dn,Wt=Math.abs(xn[2]))}let yn=(1<<st-tt.zoom)*Ce*qt;if(yn*=It(Math.max(Wt,ft),tn),tn<yn)return!0;const rn=tt.aabb.closestPoint(H);return rn[0]===H[0]&&rn[1]===H[1]};if(this.renderWorldCopies)for(let tt=1;tt<=3;tt++)et.push(Re(-tt)),et.push(Re(tt));for(et.push(Re(0));et.length>0;){const tt=et.pop(),At=tt.x,gt=tt.y;let Dt=tt.fullyVisible;const qt=()=>this.projection.name==="globe"&&(tt.y===0||tt.y===(1<<tt.zoom)-1);if(!Dt){let tn=Me?tt.aabb.intersects(oe):tt.aabb.intersectsFlat(oe);if(tn===0&&qt()){const Wt=new a.cD(tt.zoom,At,gt);tn=a.cE(this,q,Wt,!0).intersects(oe)}if(tn===0)continue;Dt=tn===2}if(tt.zoom===st||!pt(tt)){const tn=tt.zoom===st?dt:tt.zoom;if(l.minzoom&&l.minzoom>tn)continue;let Wt=0;if(!Dt){let rn=Me?tt.aabb.intersectsPrecise(oe):tt.aabb.intersectsPreciseFlat(oe);if(rn===0&&qt()){const _n=new a.cD(tt.zoom,At,gt);rn=a.cE(this,q,_n,!0).intersectsPrecise(oe)}if(rn===0)continue;if(l.calculateQuadrantVisibility)if(oe.containsPoint(tt.aabb.center))Wt=15;else for(let _n=0;_n<4;_n++)tt.aabb.quadrant(_n).intersects(oe)!==0&&(Wt|=1<<_n)}const Ht=H[0]-(.5+At+(tt.wrap<<tt.zoom))*(1<<d-tt.zoom),xn=H[1]-.5-gt,yn=tt.tileID?tt.tileID:new a.aQ(tn,tt.wrap,tt.zoom,At,gt);l.calculateQuadrantVisibility&&(yn.visibleQuadrants=Wt),nt.push({tileID:yn,distanceSq:Ht*Ht+xn*xn});continue}for(let tn=0;tn<4;tn++){const Wt=(At<<1)+tn%2,Ht=(gt<<1)+(tn>>1),xn={aabb:M?tt.aabb.quadrant(tn):a.cF(this,q,tt.zoom+1,Wt,Ht,tt.wrap,tt.minZ,tt.maxZ,this.projection),zoom:tt.zoom+1,x:Wt,y:Ht,wrap:tt.wrap,fullyVisible:Dt,tileID:void 0,shouldSplit:void 0,minZ:tt.minZ,maxZ:tt.maxZ};O&&!re&&(xn.tileID=new a.aQ(tt.zoom+1===st?dt:tt.zoom+1,tt.wrap,tt.zoom+1,Wt,Ht),wt(xn)),et.push(xn)}}if(this.fogCullDistSq){const tt=this.fogCullDistSq,At=this.horizonLineFromTop();nt=nt.filter(gt=>{const Dt=[0,0,0,1],qt=[a.al,a.al,0,1],tn=this.calculateFogTileMatrix(gt.tileID.toUnwrapped());a.aC(Dt,Dt,tn),a.aC(qt,qt,tn);const Wt=a.cG([],Dt,qt),Ht=a.cH([],Dt,qt),xn=a.c$(Wt,Ht);if(xn===0)return!0;let yn=!1;const rn=this._elevation;if(rn&&xn>tt&&At!==0){const _n=this.calculateProjMatrix(gt.tileID.toUnwrapped());let Dn;l.isTerrainDEM||(Dn=rn.getMinMaxForTile(gt.tileID)),Dn||(Dn={min:$e,max:We});const Un=a.cI(this.rotation),Qn=[Un[0]*a.al,Un[1]*a.al,Dn.max];a.af(Qn,Qn,_n),yn=(1-Qn[1])*this.height*.5<At}return xn<tt||yn})}return nt.sort((tt,At)=>tt.distanceSq-At.distanceSq).map(tt=>tt.tileID)}resize(l,d){this.width=l,this.height=d,this.pixelsToGLUnits=[2/l,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log2(l)}project(l){const d=a.aA(l.lat,-a.cJ,a.cJ),v=this.projection.project(l.lng,d);return new a.P(v.x*this.worldSize,v.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/a.cf(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,d){let v,T;const O=this.centerPoint;if(this.projection.name==="globe"){const R=this.worldSize;v=(d.x-O.x)/R,T=(d.y-O.y)/R}else{const R=this.pointCoordinate(d),N=this.pointCoordinate(O);v=R.x-N.x,T=R.y-N.y}const M=this.locationCoordinate(l);this.setLocation(new a.ae(M.x-v,M.y-T))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l,d){return this.projection.locationPoint(this,l,d)}locationPoint3D(l,d){return this.projection.locationPoint(this,l,d,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l,d){return this.coordinateLocation(this.pointCoordinate3D(l,d))}locationCoordinate(l,d){const v=d?a.cf(d,l.lat):void 0,T=this.projection.project(l.lng,l.lat);return new a.ae(T.x,T.y,v)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,d){const v=d??this._centerAltitude,T=[l.x,l.y,0,1],O=[l.x,l.y,1,1];a.aC(T,T,this.pixelMatrixInverse),a.aC(O,O,this.pixelMatrixInverse);const M=O[3];a.cK(T,T,1/T[3]),a.cK(O,O,1/M);const R=T[2],N=O[2];return{p0:T,p1:O,t:R===N?0:(v-R)/(N-R)}}screenPointToMercatorRay(l){const d=[l.x,l.y,0,1],v=[l.x,l.y,1,1];return a.aC(d,d,this.pixelMatrixInverse),a.aC(v,v,this.pixelMatrixInverse),a.cK(d,d,1/d[3]),a.cK(v,v,1/v[3]),d[2]=a.cf(d[2],this._center.lat)*this.worldSize,v[2]=a.cf(v[2],this._center.lat)*this.worldSize,a.cK(d,d,1/this.worldSize),a.cK(v,v,1/this.worldSize),new a.ax([d[0],d[1],d[2]],a.aw([],a.av([],v,d)))}rayIntersectionCoordinate(l){const{p0:d,p1:v,t:T}=l,O=a.cf(d[2],this._center.lat),M=a.cf(v[2],this._center.lat);return new a.ae(a.ak(d[0],v[0],T)/this.worldSize,a.ak(d[1],v[1],T)/this.worldSize,a.ak(O,M,T))}pointCoordinate(l,d=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,d)}pointCoordinate3D(l,d){if(!this.elevation)return this.pointCoordinate(l,d);let v=this.projection.pointCoordinate3D(this,l.x,l.y);if(v)return new a.ae(v[0],v[1],v[2]);let T=0,O=this.horizonLineFromTop();if(l.y>O)return this.pointCoordinate(l,d);const M=.02*O,R=l.clone();for(let N=0;N<10&&O-T>M;N++){R.y=a.ak(T,O,.66);const q=this.projection.pointCoordinate3D(this,R.x,R.y);q?(O=R.y,v=q):T=R.y}return v?new a.ae(v[0],v[1],v[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=a.cL)return!this.isPointAboveHorizon(l);const d=this.pointCoordinate(l);return d.y>=0&&d.y<=1}_coordinatePoint(l,d){const v=d&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,T=[l.x*this.worldSize,l.y*this.worldSize,v+l.toAltitude(),1];return a.aC(T,T,this.pixelMatrix),T[3]>0?new a.P(T[0]/T[3],T[1]/T[3]):new a.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:d}=this._edgeInsets,v=this.height-this._edgeInsets.bottom,T=this.width-this._edgeInsets.right,O=this.pointLocation3D(new a.P(d,l)),M=this.pointLocation3D(new a.P(T,l)),R=this.pointLocation3D(new a.P(T,v)),N=this.pointLocation3D(new a.P(d,v));let q=Math.min(O.lng,M.lng,R.lng,N.lng),H=Math.max(O.lng,M.lng,R.lng,N.lng),re=Math.min(O.lat,M.lat,R.lat,N.lat),ee=Math.max(O.lat,M.lat,R.lat,N.lat);const oe=Math.pow(2,-this.zoom)/16*270,he=this.projection.name==="globe"?1:4,ce=(de,_e,Me,Ce,Ae)=>{const We=(de+Me)/2,$e=(_e+Ce)/2,Ge=new a.P(We,$e),{lng:Fe,lat:Re}=this.pointLocation3D(Ge),et=Math.max(0,q-Fe,re-Re,Fe-H,Re-ee);q=Math.min(q,Fe),H=Math.max(H,Fe),re=Math.min(re,Re),ee=Math.max(ee,Re),(Ae<he||et>oe)&&(ce(de,_e,We,$e,Ae+1),ce(We,$e,Me,Ce,Ae+1))};if(ce(d,l,T,l,1),ce(T,l,T,v,1),ce(T,v,d,v,1),ce(d,v,d,l,1),this.projection.name==="globe"){const[de,_e]=a.cM(this);de?(ee=90,H=180,q=-180):_e&&(re=-90,H=180,q=-180)}return new a.aI(new a.aT(q,re),new a.aT(H,ee))}_getBoundsRectangular(l,d){const{top:v,left:T}=this._edgeInsets,O=this.height-this._edgeInsets.bottom,M=this.width-this._edgeInsets.right,R=new a.P(T,v),N=new a.P(M,v),q=new a.P(M,O),H=new a.P(T,O);let re=this.pointCoordinate(R,l),ee=this.pointCoordinate(N,l);const oe=this.pointCoordinate(q,d),he=this.pointCoordinate(H,d),ce=(de,_e)=>(_e.y-de.y)/(_e.x-de.x);return re.y>1&&ee.y>=0?re=new a.ae((1-he.y)/ce(he,re)+he.x,1):re.y<0&&ee.y<=1&&(re=new a.ae(-he.y/ce(he,re)+he.x,0)),ee.y>1&&re.y>=0?ee=new a.ae((1-oe.y)/ce(oe,ee)+oe.x,1):ee.y<0&&re.y<=1&&(ee=new a.ae(-oe.y/ce(oe,ee)+oe.x,0)),new a.aI().extend(this.coordinateLocation(re)).extend(this.coordinateLocation(ee)).extend(this.coordinateLocation(he)).extend(this.coordinateLocation(oe))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=l.visibleDemTiles.reduce((v,T)=>{if(T.dem){const O=T.dem.tree;v.min=Math.min(v.min,O.minimums[0]),v.max=Math.max(v.max,O.maximums[0])}return v},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*l.exaggeration(),d.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,v=this.height/2-d*(1-this._horizonShift);return l?Math.max(0,v):v}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-a.cJ,this.maxLat=a.cJ,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=a.aF(this.minLng)*this.tileSize,this.worldMaxX=a.aF(this.maxLng)*this.tileSize,this.worldMinY=a.aJ(this.maxLat)*this.tileSize,this.worldMaxY=a.aJ(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,d){return this.projection.createTileMatrix(this,d,l)}calculateDistanceTileData(l){const d=l.key,v=this._distanceTileDataCache;if(v[d])return v[d];const T=l.canonical,O=1/this.height,M=this.cameraWorldSize,R=M/this.zoomScale(T.z),N=(T.x+Math.pow(2,T.z)*l.wrap)*R,q=T.y*R,H=this.point;H.x*=M/this.worldSize,H.y*=M/this.worldSize;const re=this.angle,ee=Math.sin(-re),oe=-Math.cos(-re);return v[d]={bearing:[ee,oe],center:[(H.x-N)*O,(H.y-q)*O],scale:R/a.al*O},v[d]}calculateFogTileMatrix(l){const d=l.key,v=this._fogTileMatrixCache;if(v[d])return v[d];const T=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return a.aB(T,this.worldToFogMatrix,T),v[d]=new Float32Array(T),v[d]}calculateProjMatrix(l,d=!1,v=!1){const T=l.key;let O;if(O=v?this._expandedProjMatrixCache:d?this._alignedProjMatrixCache:this._projMatrixCache,O[T])return O[T];const M=this.calculatePosMatrix(l,this.worldSize);let R;return R=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:v?this.expandedFarZProjMatrix:d?this.alignedProjMatrix:this.projMatrix,a.aB(M,R,M),O[T]=new Float32Array(M),O[T]}calculatePixelsToTileUnitsMatrix(l){const d=l.tileID.key,v=this._pixelsToTileUnitsCache;if(v[d])return v[d];const T=a.cN(l,this);return v[d]=T,v[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,d=a.bq([],[l,l,l]);return a.aB(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const d=a.cf(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(d),T=this._camera.forward(),O=a.cf(1,this._center.lat);v[2]/=O,T[2]/=O,a.aw(T,T);const M=l.raycast(v,T,l.exaggeration());if(M){const R=a.bH([],v,T,M),N=new a.ae(R[0],R[1],a.cf(R[2],a.a$(R[1]))),q=(N.z+a.ag([N.x-v[0],N.y-v[1],N.z-v[2]*O]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(q),this._centerAltitude=N.toAltitude(),this._center=this.coordinateLocation(N),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const d=this._elevation,v=a.cf(1,this._center.lat)*this.worldSize,T=this._computeCameraPosition(v),O=d.getAtPointOrZero(new a.ae(...T)),M=this.pixelsPerMeter/this.worldSize*O,R=this._minimumHeightOverTerrain(),N=T[2]-M;if(N<=R)if(N<0||l){const q=this.locationCoordinate(this._center,this._centerAltitude),H=[T[0],T[1],q.z-T[2]],re=a.ag(H);H[2]-=(R-N)/this._pixelsPerMercatorPixel;const ee=a.ag(H);if(ee===0)return;a.c5(H,H,re/ee*this._pixelsPerMercatorPixel),this._camera.position=[T[0],T[1],q.z*this._pixelsPerMercatorPixel-H[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const ee=this.center;return ee.lat=a.aA(ee.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(ee.lng=a.aA(ee.lng,this.minLng,this.maxLng)),this.center=ee,void(this._constraining=!1)}const d=this._unmodified,{x:v,y:T}=this.point;let O=0,M=v,R=T;const N=this.width/2,q=this.height/2,H=this.worldMinY*this.scale,re=this.worldMaxY*this.scale;if(T-q<H&&(R=H+q),T+q>re&&(R=re-q),re-H<this.height&&(O=Math.max(O,this.height/(re-H)),R=(re+H)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ee=this.worldMinX*this.scale,oe=this.worldMaxX*this.scale,he=this.worldSize/2-(ee+oe)/2;M=(v+he+this.worldSize)%this.worldSize-he,M-N<ee&&(M=ee+N),M+N>oe&&(M=oe-N),oe-ee<this.width&&(O=Math.max(O,this.width/(oe-ee)),M=(oe+ee)/2)}M===v&&R===T||this._allowWorldUnderZoom||(this.center=this.unproject(new a.P(M,R))),O&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(O)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(Math.max(0,this.height)/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,d=this.projection.name==="globe",v=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=a.cf(1,this.center.lat)/a.cf(1,a.d2));const T=a.cO(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,T),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const O=this.projection.zAxisUnit==="meters"?v:1,M=this._camera.getWorldToCamera(this.worldSize,O);let R;const N=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(N[8]=2*-l.x/this.width,N[9]=2*l.y/this.height,this.isOrthographic){let Re=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),et=Re*this.aspect,nt=-et,st=-Re;et-=l.x,nt-=l.x,Re+=l.y,st+=l.y,R=this._camera.getCameraToClipOrthographic(nt,et,st,Re,this._nearZ,this._farZ),((dt,ft,wt,It)=>{for(let pt=0;pt<16;pt++)dt[pt]=a.ak(ft[pt],wt[pt],It)})(R,R,N,a.d0(this.pitch>=Tl?1:this.pitch/Tl))}else R=N;const q=a.cP([],N,M);let H=a.cP([],R,M);if(this.projection.isReprojectedInTileSpace){const Re=this.locationCoordinate(this.center),et=a.bA([]);a.br(et,et,[Re.x*this.worldSize,Re.y*this.worldSize,0]),a.aB(et,et,a.cQ(this)),a.br(et,et,[-Re.x*this.worldSize,-Re.y*this.worldSize,0]),a.aB(H,H,et),a.aB(q,q,et),this.inverseAdjustmentMatrix=a.cR(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=a.cS([],H,[this.worldSize,this.worldSize,this.worldSize/O,1]),this.projMatrix=H,this.invProjMatrix=a.bl(new Float64Array(16),this.projMatrix),d){const Re=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Re[8]=2*-l.x/this.width,Re[9]=2*l.y/this.height,this.expandedFarZProjMatrix=a.cP([],Re,M)}else this.expandedFarZProjMatrix=this.projMatrix;const re=a.bl([],R);this.frustumCorners=a.cT.fromInvProjectionMatrix(re,this.horizonLineFromTop(),this.height),this.cameraFrustum=a.cB.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!d);const ee=new Float32Array(16);a.bA(ee),a.cS(ee,ee,[1,-1,1]),a.cU(ee,ee,this._pitch),a.bB(ee,ee,this.angle);const oe=a.cd(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=a.bz(oe);const he=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;oe[8]=2*-l.x/this.width,oe[9]=2*(l.y+he)/this.height,this.skyboxMatrix=a.aB(ee,oe,ee);const ce=this.point,de=ce.x,_e=ce.y,Me=this.width%2/2,Ce=this.height%2/2,Ae=Math.cos(this.angle),We=Math.sin(this.angle),$e=de-Math.round(de)+Ae*Me+We*Ce,Ge=_e-Math.round(_e)+Ae*Ce+We*Me,Fe=new Float64Array(H);if(a.br(Fe,Fe,[$e>.5?$e-1:$e,Ge>.5?Ge-1:Ge,0]),this.alignedProjMatrix=Fe,H=a.bC(),a.cS(H,H,[this.width/2,-this.height/2,1]),a.br(H,H,[1,-1,0]),this.labelPlaneMatrix=H,H=a.bC(),a.cS(H,H,[1,-1,1]),a.br(H,H,[-1,-1,0]),a.cS(H,H,[2/this.width,2/this.height,1]),this.glCoordMatrix=H,this.pixelMatrix=a.aB(new Float64Array(16),this.labelPlaneMatrix,q),this._calcFogMatrices(),this._distanceTileDataCache={},H=a.bl(new Float64Array(16),this.pixelMatrix),!H)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=H,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=a.cV(this);const Re=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=a.af(Re,Re,M),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=H;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,v=this._camera.position,T=1/this.height/this._pixelsPerMercatorPixel,O=[l,l,d];a.c5(O,O,T),a.c5(v,v,-1),a.cW(v,v,O);const M=a.bC();a.br(M,M,v),a.cS(M,M,O),this.mercatorFogMatrix=M,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,d,T)}_computeCameraPosition(l){const d=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,v=this._camera.forward(),T=this.point,O=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-l/this.worldSize*this._centerAltitude;return[T.x/this.worldSize-v[0]*O,T.y/this.worldSize-v[1]*O,l/this.worldSize*this._centerAltitude-v[2]*O]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),v=this._camera.position[2],T=l[2];let O=1;this.projection.wrap&&(this.center=this.center.wrap()),T>0&&(O=Math.min((d-v)/T,1)),this._camera.position=a.bH([],this._camera.position,l,O),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,d=this._camera.forward(),{pitch:v,bearing:T}=this._camera.getPitchBearing(),O=a.cf(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,M=this._mercatorZfromZoom(this._maxZoom)*Math.cos(a.an(this._maxPitch)),R=Math.max((l[2]-O)/Math.cos(v),M),N=this._zoomFromMercatorZ(R);a.bH(l,l,d,R),this._pitch=a.aA(v,a.an(this.minPitch),a.an(this.maxPitch)),this.angle=a.bT(T,-Math.PI,Math.PI),this._setZoom(a.aA(N,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new a.ae(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(Math.max(0,l)*this.tileSize))}zoomFromMercatorZAdjusted(l){let d=0,v=a.cL,T=0,O=1/0;for(;v-d>1e-6&&v>d;){const M=d+.5*(v-d),R=this.tileSize*Math.pow(2,M),N=this.getCameraToCenterDistance(this.projection,M,R),q=this.scaleZoom(N/(Math.max(0,l)*this.tileSize)),H=Math.abs(M-q);H<O&&(O=H,T=M),M<q?d=M:v=M}return T}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(a.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,d){const v=Math.min(l.x,d.x),T=Math.max(l.x,d.x),O=Math.min(l.y,d.y),M=Math.max(l.y,d.y);if(O<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const R=[new a.P(v,O),new a.P(T,M),new a.P(v,M),new a.P(T,O)],N=this.renderWorldCopies?-3:0,q=this.renderWorldCopies?4:1;for(const H of R){const re=this.pointRayIntersection(H);if(re.t<0)return!0;const ee=this.rayIntersectionCoordinate(re);if(ee.x<N||ee.y<0||ee.x>q||ee.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+a.cX(this.fovAboveCenter)>88||this.anyCornerOffEdge(new a.P(0,0),new a.P(this.width,this.height))}zoomDeltaToMovement(l,d){const v=a.ag(a.av([],this._camera.position,l)),T=this._zoomFromMercatorZ(v)+d;return v-this._mercatorZfromZoom(T)}getCameraPoint(){if(this.projection.name==="globe"){const l=(function([d,v,T],O){const M=[d,v,T,1];a.aC(M,M,O);const R=M[3]=Math.max(M[3],1e-6);return M[0]/=R,M[1]/=R,M[2]/=R,M})([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new a.P(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,l))}}getCameraToCenterDistance(l,d=this.zoom,v=this.worldSize){const T=a.cO(l,d,this.width,this.height,1024),O=l.pixelSpaceConversion(this.center.lat,v,T);let M=.5/Math.tan(.5*this._fov)*this.height*O;return this.isOrthographic&&(M=a.ak(1,M,a.d0(this.pitch>=Tl?1:this.pitch/Tl))),M}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&a.aB(l,l,this.globeMatrix),l}getFrustum(l){return a.cB.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,this.projection.zAxisUnit==="meters")}}const $l=(y,l)=>{if(l>0&&y.terrain&&a.w("Cutoff is currently disabled on terrain"),l<=0||y.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const d=y.transform,v=Math.max(Math.abs(d._zoom-(y.minCutoffZoom-1)),1),T=d.isLODDisabled(!1)?a.ah(60,45,d.pitch):a.ah(30,15,d.pitch),O=d._farZ-d._nearZ,M=l*d.height,R=((1-(N=T))*d.cameraToCenterDistance+N*(d._farZ+M))*v;var N;return{shouldRenderCutoff:T<1,uniformValues:{u_cutoff_params:[d._nearZ,d._farZ,(R-d._nearZ)/O,(R-M-d._nearZ)/O]}}},mf=2048;class Jx{constructor(l,d){this.aabb=l,this.lastCascade=d}}class xd{add(l,d){const v=this.receivers[l.key];v!==void 0?(v.aabb.min[0]=Math.min(v.aabb.min[0],d.min[0]),v.aabb.min[1]=Math.min(v.aabb.min[1],d.min[1]),v.aabb.min[2]=Math.min(v.aabb.min[2],d.min[2]),v.aabb.max[0]=Math.max(v.aabb.max[0],d.max[0]),v.aabb.max[1]=Math.max(v.aabb.max[1],d.max[1]),v.aabb.max[2]=Math.max(v.aabb.max[2],d.max[2])):this.receivers[l.key]=new Jx(d,null)}clear(){this.receivers={}}get(l){return this.receivers[l.key]}computeRequiredCascades(l,d,v){const T=a.d9.fromPoints(l.points);let O=0;for(const M in this.receivers){const R=this.receivers[M];if(!R||!T.intersectsAabb(R.aabb))continue;R.aabb.min=T.closestPoint(R.aabb.min),R.aabb.max=T.closestPoint(R.aabb.max);const N=R.aabb.getCorners();for(let q=0;q<v.length;q++){let H=!0;for(const re of N){const ee=[re[0]*d,re[1]*d,re[2]];if(a.af(ee,ee,v[q].matrix),ee[0]<-1||ee[0]>1||ee[1]<-1||ee[1]>1){H=!1;break}}if(R.lastCascade=q,O=Math.max(O,q),H)break}}return O+1}}class Eg{constructor(l){this.painter=l,this._enabled=!1,this._drawShadowAfterLayer=-1,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new xd,this._depthMode=new An(l.context.gl.LEQUAL,An.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1}destroy(){for(const l of this._cascades)l.texture.destroy(),l.framebuffer.destroy();this._cascades=[]}updateShadowParameters(l,d){const v=this.painter;if(this._enabled=!1,this._drawShadowAfterLayer=-1,this._receivers.clear(),!d||!d.properties)return;const T=d.properties.get("shadow-intensity"),O=d.properties.get("shadow-draw-before-layer");if(!d.shadowsEnabled()||T<=0)return;let M=-1,R=0;for(const _e of v.style.order){const Me=v.style._mergedLayers[_e];Me.hasShadowPass()&&!Me.isHidden(l.zoom)&&(M=R),O&&O===_e&&(this._drawShadowAfterLayer=R>0?R-1:0),R+=1}if(this._enabled=M>=0,!this.enabled)return;this._drawShadowAfterLayer<0&&(this._drawShadowAfterLayer=M);const N=v.context,q=mf,H=mf;if(this._cascades.length===0||mf!==this._cascades[0].texture.size[0]){this._cascades=[];for(let _e=0;_e<2;++_e){const Me=v._shadowMapDebug,Ce=N.gl,Ae=N.createFramebuffer(q,H,Me?1:0,"texture"),We=new a.T(N,{width:q,height:H,data:null},Ce.DEPTH_COMPONENT16);if(Ae.depthAttachment.set(We.texture),Me){const $e=new a.T(N,{width:q,height:H,data:null},Ce.RGBA8);Ae.colorAttachment0.set($e.texture)}this._cascades.push({framebuffer:Ae,texture:We,matrix:[],far:0,boundingSphereRadius:0,frustum:new a.cB,scale:0})}}this.shadowDirection=M_(d);let re=0;if(l.elevation){const _e=l.elevation,Me=[1e4,-1e4];_e.visibleDemTiles.filter(Ce=>Ce.dem).forEach(Ce=>{const Ae=Ce.dem.tree;Me[0]=Math.min(Me[0],Ae.minimums[0]),Me[1]=Math.max(Me[1],Ae.maximums[0])}),Me[0]!==1e4&&(re=(Me[1]-Me[0])*_e.exaggeration())}const ee=1.5*l.cameraToCenterDistance,oe=3*ee,he=new Float64Array(16);for(let _e=0;_e<this._cascades.length;++_e){const Me=this._cascades[_e];let Ce=l.height/50,Ae=1;_e===0?Ae=ee:(Ce=ee,Ae=oe);const[We,$e]=D_(l,this.shadowDirection,Ce,Ae,mf,re);Me.scale=l.scale,Me.matrix=We,Me.boundingSphereRadius=$e,a.bl(he,Me.matrix),Me.frustum=a.cB.fromInvProjectionMatrix(he,1,0,!0),Me.far=Ae}const ce=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[ce].far,this._cascades[ce].far],this._uniformValues.u_shadow_intensity=T,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=.00048828125,this._uniformValues.u_shadow_map_resolution=mf,this._uniformValues.u_shadowmap_0=11,this._uniformValues.u_shadowmap_1=12,this._groundShadowTiles=v.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const de=v.transform.elevation;for(const _e of this._groundShadowTiles){let Me={min:0,max:0};if(de){const Ce=de.getMinMaxForTile(_e);Ce&&(Me=Ce)}this.addShadowReceiver(_e.toUnwrapped(),Me.min,Me.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(l){this._enabled=l}drawShadowPass(l,d){if(!this.enabled)return;const v=this.painter,T=v.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(v.transform.getFrustum(0),v.transform.worldSize,this._cascades),T.viewport.set([0,0,mf,mf]);for(let O=0;O<this._numCascadesToRender;++O){v.currentShadowCascade=O,T.bindFramebuffer.set(this._cascades[O].framebuffer.framebuffer),T.clear({color:a.ao.white,depth:1});for(const M of l.order){const R=l._mergedLayers[M];if(!R.hasShadowPass()||R.isHidden(v.transform.zoom))continue;const N=l.getLayerSourceCache(R),q=N?d[N.id]:void 0;(R.type==="model"||q&&q.length)&&v.renderLayer(v,N,R,q)}}v.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const l=this.painter,d=l.style,v=l.context,T=v.gl,O=d.directionalLight,M=d.ambientLight;if(!O||!M)return;const R=[],N=$l(l,l.longestCutoffRange);N.shouldRenderCutoff&&R.push("RENDER_CUTOFF"),R.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&R.push("NORMAL_OFFSET");const q=js(d,O,M),H=new An(T.LEQUAL,An.ReadOnly,l.depthRangeFor3D),re=new qn({func:T.EQUAL,mask:255},0,255,T.KEEP,T.KEEP,T.KEEP);for(const ee of this._groundShadowTiles){const oe=ee.toUnwrapped(),he=l.isTileAffectedByFog(ee),ce=l.getOrCreateProgram("groundShadow",{defines:R,overrideFog:he});this.setupShadows(oe,ce),l.uploadCommonUniforms(v,ce,oe,null,N);const de=rl(l.transform.calculateProjMatrix(oe),q);ce.draw(l,T.TRIANGLES,H,re,Gn.multiply,jn.disabled,de,"ground_shadow",l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments,null,l.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Gn.unblended:Gn.disabled}getShadowPassDepthMode(){return this._depthMode}getGroundShadowLayerIndex(){return this._drawShadowAfterLayer}calculateShadowPassMatrixFromTile(l){const d=this.painter.transform,v=d.calculatePosMatrix(l,d.worldSize);return a.aB(v,this._cascades[this.painter.currentShadowCascade].matrix,v),Float32Array.from(v)}calculateShadowPassMatrixFromMatrix(l){const d=a.bz(l);return a.aB(d,this._cascades[this.painter.currentShadowCascade].matrix,l),d}setupShadows(l,d,v){if(!this.enabled)return;const T=this.painter.transform,O=this.painter.context,M=O.gl,R=this._uniformValues,N=new Float64Array(16),q=T.calculatePosMatrix(l,T.worldSize);for(let H=0;H<this._cascades.length;H++)a.aB(N,this._cascades[H].matrix,q),R[H===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(N),O.activeTexture.set(M.TEXTURE0+11+H),this._cascades[H].texture.bindExtraParam(M.LINEAR,M.LINEAR,M.CLAMP_TO_EDGE,M.CLAMP_TO_EDGE,M.GREATER);if(this.useNormalOffset=!!v,this.useNormalOffset){const H=a.d7(l.canonical),re=2/T.tileSize*a.al/mf,ee=re*this._cascades[0].boundingSphereRadius,oe=re*this._cascades[this._cascades.length-1].boundingSphereRadius,he=(v==="vector-tile"?1:3)*(function(ce){const de=a.aA((ce-22)/-22,0,1);return .125*(1-de)+4*de})(T.zoom);R.u_shadow_normal_offset=[H,ee*he,oe*he],R.u_shadow_bias=[1e-4,.0012,.012]}else R.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(O,R)}setupShadowsFromMatrix(l,d,v=!1){if(!this.enabled)return;const T=this.painter.context,O=T.gl,M=this._uniformValues,R=new Float64Array(16);for(let N=0;N<2;N++)a.aB(R,this._cascades[N].matrix,l),M[N===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(R),T.activeTexture.set(O.TEXTURE0+11+N),this._cascades[N].texture.bindExtraParam(O.LINEAR,O.LINEAR,O.CLAMP_TO_EDGE,O.CLAMP_TO_EDGE,O.GREATER);this.useNormalOffset=v,v?(M.u_shadow_normal_offset=[1,3,3],M.u_shadow_bias=[6e-5,.0012,.012]):M.u_shadow_bias=[36e-5,.0012,.012],d.setShadowUniformValues(T,M)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(l,d,v,T){if(T[2]>=0)return{};const O=(function(N,q,H){const re=H/(1<<N.canonical.z);return new a.d9([N.canonical.x*re+N.wrap*H,N.canonical.y*re+N.wrap*H,0],[(N.canonical.x+1)*re+N.wrap*H,(N.canonical.y+1)*re+N.wrap*H,q])})(l,d,v).getCorners(),M=d/-T[2];T[0]<0?(a.d8(O[0],O[0],[T[0]*M,0,0]),a.d8(O[3],O[3],[T[0]*M,0,0])):T[0]>0&&(a.d8(O[1],O[1],[T[0]*M,0,0]),a.d8(O[2],O[2],[T[0]*M,0,0])),T[1]<0?(a.d8(O[0],O[0],[0,T[1]*M,0]),a.d8(O[1],O[1],[0,T[1]*M,0])):T[1]>0&&(a.d8(O[2],O[2],[0,T[1]*M,0]),a.d8(O[3],O[3],[0,T[1]*M,0]));const R={};return R.vertices=O,R.planes=[gf(O[1],O[0],O[4]),gf(O[2],O[1],O[5]),gf(O[3],O[2],O[6]),gf(O[0],O[3],O[7])],R}addShadowReceiver(l,d,v){this._receivers.add(l,a.d9.fromTileIdAndHeight(l,d,v))}getMaxCascadeForTile(l){const d=this._receivers.get(l);return d&&d.lastCascade?d.lastCascade:0}}function gf(y,l,d){const v=a.av([],d,l),T=a.av([],y,l),O=a.bI([],v,T),M=a.ag(O);return M===0?[0,0,1,0]:(a.c5(O,O,1/M),[O[0],O[1],O[2],-a.bJ(O,l)])}function M_(y){const l=y.properties.get("direction"),d=a.d4(l.x,l.y,l.z);d[2]=a.aA(d[2],0,75);const v=a.d6([d[0],d[1],d[2]]);return a.d5(v.x,v.y,v.z)}function js(y,l,d){const v=l.properties.get("color-use-theme")==="none",T=l.properties.get("color"),O=l.properties.get("intensity"),M=l.properties.get("direction"),R=[M.x,M.y,M.z],N=d.properties.get("color-use-theme")==="none",q=d.properties.get("color"),H=d.properties.get("intensity"),re=Math.max(a.bJ([0,0,1],R),0),ee=[0,0,0];a.c5(ee,q.toPremultipliedRenderColor(N?null:y.getLut(l.scope)).toArray01Linear().slice(0,3),H);const oe=[0,0,0];return a.c5(oe,T.toPremultipliedRenderColor(v?null:y.getLut(d.scope)).toArray01Linear().slice(0,3),re*O),a.db([ee[0]>0?ee[0]/(ee[0]+oe[0]):0,ee[1]>0?ee[1]/(ee[1]+oe[1]):0,ee[2]>0?ee[2]/(ee[2]+oe[2]):0])}function D_(y,l,d,v,T,O){const M=y.zoom,R=y.scale,N=y.worldSize,q=1/N,H=y.aspect,re=Math.sqrt(1+H*H)*Math.tan(.5*y.fovX),ee=re*re,oe=v-d,he=v+d;let ce,de;ee>oe/he?(ce=v,de=v*re):(ce=.5*he*(1+ee),de=.5*Math.sqrt(oe*oe+2*(v*v+d*d)*ee+he*he*ee*ee));const _e=y.projection.pixelsPerMeter(y.center.lat,N),Me=y._camera.getCameraToWorldMercator(),Ce=[0,0,-ce*q];a.af(Ce,Ce,Me);let Ae=de*q;const We=function(Dt){return Dt[0]/=R,Dt[1]/=R,Dt[2]=a.cf(Dt[2],y._center.lat),Dt},$e=y._edgeInsets;if(!($e.left===0&&$e.top===0&&$e.right===0&&$e.bottom===0||$e.left===$e.right&&$e.top===$e.bottom)){const Dt=y._camera.getWorldToCamera(y.worldSize,y.projection.zAxisUnit==="meters"?_e:1),qt=y._camera.getCameraToClipPerspective(y._fov,y.width/y.height,d,v);qt[8]=2*-y.centerOffset.x/y.width,qt[9]=2*y.centerOffset.y/y.height;const tn=new Float64Array(16);a.cP(tn,qt,Dt);const Wt=new Float64Array(16);a.bl(Wt,tn);const Ht=a.cB.fromInvProjectionMatrix(Wt,N,M,!0);for(const xn of Ht.points){const yn=We(xn);Ae=Math.max(Ae,a.c6(a.da([],Ce,yn)))}}Ae*=T/(T-1);const Ge=Math.acos(l[2]),Fe=Math.atan2(-l[0],-l[1]),Re=new Vp;Re.position=Ce,Re.setPitchBearing(Ge,Fe);const et=Re.getWorldToCamera(N,_e),nt=Ae*N,st=Math.min(y._mercatorZfromZoom(17)*N*-2,-2*nt),dt=Re.getCameraToClipOrthographic(-nt,nt,-nt,nt,st,(nt+O*_e)/l[2]),ft=new Float64Array(16);a.aB(ft,dt,et);const wt=a.d5(Math.floor(1e6*Ce[0])/1e6*N,Math.floor(1e6*Ce[1])/1e6*N,0),It=.5*T,pt=[0,0,0];a.af(pt,wt,ft),a.c5(pt,pt,It);const tt=[Math.floor(pt[0]),Math.floor(pt[1]),Math.floor(pt[2])],At=[0,0,0];a.av(At,pt,tt),a.c5(At,At,-1/It);const gt=new Float64Array(16);return a.bA(gt),a.br(gt,gt,At),a.aB(ft,gt,ft),[ft,nt]}class Ag extends a.E{constructor(l){super(),this.requestManager=l,this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}loadModel(l,d){return a.dc(this.requestManager.transformRequest(d,a.R.Model).url).then(v=>{if(!v)return;const T=a.dd(v),O=new a.de(l,d,void 0,void 0,T);return O.computeBoundsAndApplyParent(),O}).catch(v=>{if(v&&v.status===404)return null;this.fire(new a.y(new Error(`Could not load model ${l} from ${d}: ${v.message}`)))})}load(l,d,v={forceReload:!1}){this.models[d]||(this.models[d]={});const T=Object.keys(l),O=[],M=[];for(const R of T){const N=l[R];this.hasURLBeenRequested(N)&&!v.forceReload||(this.modelByURL[N]={modelId:R,scope:d},O.push(this.loadModel(R,N)),M.push(R)),this.models[d][R]||(this.models[d][R]={model:null,numReferences:1})}this.numModelsLoading[d]=(this.numModelsLoading[d]||0)+M.length,Promise.allSettled(O).then(R=>{for(let N=0;N<R.length;N++){const{status:q}=R[N];if(q==="rejected")continue;const{value:H}=R[N];this.models[d][M[N]]||(this.models[d][M[N]]={model:null,numReferences:1}),this.models[d][M[N]].model=H}this.numModelsLoading[d]-=M.length,this.fire(new a.z("data",{dataType:"style"}))}).catch(R=>{this.fire(new a.y(new Error(`Could not load models: ${R.message}`)))})}isLoaded(){for(const l in this.numModelsLoading)if(this.numModelsLoading[l]>0)return!1;return!0}hasModel(l,d,v={exactIdMatch:!1}){return!!(v.exactIdMatch?this.getModel(l,d):this.getModelByURL(this.modelUris[d][l]))}getModel(l,d){return this.models[d]||(this.models[d]={}),this.models[d][l]?this.models[d][l].model:void 0}getModelByURL(l){if(!l)return null;const d=this.modelByURL[l];return d?this.models[d.scope][d.modelId].model:null}hasModelBeenAdded(l,d){return this.models[d]&&this.models[d][l]!==void 0}getModelURIs(l){return this.modelUris[l]||{}}addModel(l,d,v){this.models[v]||(this.models[v]={}),this.modelUris[v]||(this.modelUris[v]={});const T=this.requestManager.normalizeModelURL(d);if((this.hasModel(l,v,{exactIdMatch:!0})||this.hasModelBeenAdded(l,v))&&this.modelUris[v][l]===T)this.models[v][l].numReferences++;else if(this.hasURLBeenRequested(T)){const{scope:O,modelId:M}=this.modelByURL[T];this.models[O][M].numReferences++}else this.modelUris[v][l]=T,this.load({[l]:this.modelUris[v][l]},v)}addModelURLs(l,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const v=this.modelUris[d];for(const T in l)v[T]=this.requestManager.normalizeModelURL(l[T])}reloadModels(l){this.load(this.modelUris[l],l,{forceReload:!0})}addModelsFromBucket(l,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const v={};for(const T of l)this.hasModel(T,d,{exactIdMatch:!0})||this.hasURLBeenRequested(T)?this.models[d][T].numReferences++:this.modelUris[d][T]&&!this.hasURLBeenRequested(T)?v[T]=this.modelUris[d][T]:!this.hasURLBeenRequested(T)&&a.df(T,!1)&&(this.modelUris[d][T]=this.requestManager.normalizeModelURL(T),v[T]=this.modelUris[d][T]);this.load(v,d)}hasURLBeenRequested(l){return this.modelByURL[l]!==void 0}removeModel(l,d,v=!1,T=!1){if(this.models[d]&&this.models[d][l]&&(this.models[d][l].numReferences--,this.models[d][l].numReferences===0||T)){const O=this.modelUris[d][l];v||delete this.modelUris[d][l],delete this.modelByURL[O];const M=this.models[d][l].model;if(!M)return;delete this.models[d][l],M.destroy()}}destroy(){for(const l of Object.keys(this.models))for(const d of Object.keys(this.models[l])){const v=this.models[l][d].model;delete this.models[l][d],v&&v.destroy()}this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}listModels(l){return this.models[l]||(this.models[l]={}),Object.keys(this.models[l])}upload(l,d){this.models[d]||(this.models[d]={});for(const v in this.models[d])this.models[d][v].model&&this.models[d][v].model.upload(l.context)}}const Uu=a.a6.colorTheme,Vl=new a.a9({data:new a.aa(Uu.data)});function E0(y){if(!y.metadata||!y.metadata.content_area)return;const l=a.o.devicePixelRatio,{left:d,top:v,width:T,height:O}=y.metadata.content_area,M=d*l,R=v*l;return[M,R,M+T*l,R+O*l]}function A0(y){if(y)return y.map(([l,d])=>[l*a.o.devicePixelRatio,d*a.o.devicePixelRatio])}class wd{constructor(l,d,v){this.id=l,this.scope=d,this.sourceCache=v,this.pendingRequests=new Set,this.missingRequests=new Set}addPendingRequest(l){this.missingRequests.has(l.name)||this.pendingRequests.has(l.name)||this.pendingRequests.add(l.name)}hasPendingRequests(){return this.pendingRequests.size>0}resolvePendingRequests(){const l=new Map;if(!this.sourceCache.loaded())return l;const d=this.sourceCache.getVisibleCoordinates();if(d.length===0)return l;const v=this.sourceCache.getSource();if(!(v instanceof xs))return l;const T=d.map(M=>this.sourceCache.getTile(M)),O=v.getImages(T,Array.from(this.pendingRequests));for(const[M,R]of O)l.set(a.I.from({name:M,iconsetId:this.id}),R),this.pendingRequests.delete(M);for(const M of this.pendingRequests)this.missingRequests.add(M);return this.pendingRequests.clear(),l}}class I_{constructor(){a.aY(["_onIndoorUpdate"],this)}onAdd(l){return this._map=l,this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._map.style&&this._map.style.indoorManager.on("selector-update",d=>this._onIndoorUpdate(d)),this._container}_createButton(l,d){const v=U("button",l,this._container);return v.type="button",v.addEventListener("click",d),v}_createSeparator(){return U("div","mapboxgl-ctrl-separator",this._container)}_setButtonTitle(l,d){this._map&&(l.setAttribute("aria-label",d),l.textContent=d)}onRemove(){this._container&&this._container.remove(),this._map&&this._map.style&&(this._map.style.indoorManager.off("selector-update",this._onIndoorUpdate),this._map=null)}getDefaultPosition(){return"right"}_onIndoorUpdate(l){if(!l||!l.floors)return this._model=l,void(this._container.style.display="none");const d=this._model;this._model=l,this._container.style.display="inline-block",this._container.style.borderRadius="8px",d&&Array.from(this._container.children).forEach(v=>v.remove()),l.floors.length>0&&(this.addBuildingsToggleButton(),this.addCurrentFloors(l.floors,l.activeFloorsVisible),this._updateBuildingsButtonState())}addBuildingsToggleButton(){const l=this._createButton("mapboxgl-ctrl-buildings-toggle",()=>{const d=this._map;this._model&&d&&d._setIndoorActiveFloorsVisibility(!this._model.activeFloorsVisible)});U("span","mapboxgl-ctrl-icon",l).setAttribute("aria-hidden","true"),l.classList.add("mapboxgl-ctrl-level-button","mapboxgl-ctrl-buildings-toggle"),this._model&&!this._model.activeFloorsVisible&&l.classList.add("mapboxgl-ctrl-level-button-selected"),this._container.append(l),this._createSeparator()}_updateBuildingsButtonState(){const l=this._container.querySelector(".mapboxgl-ctrl-buildings-toggle");l&&this._model&&(this._model.activeFloorsVisible?l.classList.remove("mapboxgl-ctrl-level-button-selected"):l.classList.add("mapboxgl-ctrl-level-button-selected"))}addCurrentFloors(l,d){for(let v=0;v<l.length;v++){const T=l[v],O=this._createButton("mapboxgl-ctrl-level-button",()=>{this._map._selectIndoorFloor(T.id)}),M=(T.name||"").trim(),R=T.zIndex.toString(),N=M?Array.from(M).slice(0,3).join(""):R;this._setButtonTitle(O,N),this._model&&T.id===this._model.selectedFloorId&&d&&O.classList.add("mapboxgl-ctrl-level-button-selected"),this._container.append(O),v<l.length-1&&this._createSeparator()}}}class e1 extends a.E{constructor(l){super(),this._style=l,this._buildings={},this._indoorControl=null,this._activeFloors=new Set,this._activeFloorsVisible=!0,this._indoorState={selectedFloorId:null,lastActiveFloors:null,activeFloorsVisible:!0},a.aY(["_updateUI"],this),this._style.on("style.load",()=>{this._style.isIndoorEnabled()&&(this._style.map.on("load",this._updateUI),this._style.map.on("move",this._updateUI),this._style.map.on("idle",this._updateUI),this._updateUI())})}destroy(){this._buildings={},this._activeFloors=new Set,this._indoorState=null,this._removeIndoorControl()}selectFloor(l){l===this._selectedFloorId&&this._activeFloorsVisible||(this._selectedFloorId=l,this._activeFloorsVisible=!0,this._updateActiveFloors())}setActiveFloorsVisibility(l){this._activeFloorsVisible=l,this._updateActiveFloors(),this._updateIndoorSelector()}setIndoorData(l){for(const[d,v]of Object.entries(l.buildings))if(this._buildings[d])for(const T of v.floorIds)this._buildings[d].floors[T]||(this._buildings[d].floors[T]=v.floors[T]);else this._buildings[d]=v;for(const d of l.activeFloors)this._activeFloors.add(d);this._updateIndoorSelector()}getIndoorTileOptions(l,d){const v=this._style.getIndoorSourceLayers(l,d);return v&&this._indoorState?{sourceLayers:v,indoorState:this._indoorState}:null}_addIndoorControl(){this._indoorControl||(this._indoorControl=new I_,this._style.map.addControl(this._indoorControl,"right"))}_removeIndoorControl(){this._indoorControl&&(this._indoorControl.onRemove(),this._indoorControl=null)}_updateUI(){const l=this._style.map.transform,d=(function(v,T,O,M){let R=null,N=Number.MAX_SAFE_INTEGER;if(M<16)return null;for(const[q,H]of Object.entries(v)){const re=H.center;if(re){const ee=T.distanceTo(a.aT.convert(re));ee<N&&O.contains(re)&&(N=ee,R=q)}}return R})(this._buildings,l.center,l.getBounds(),l.zoom);d!==this._closestBuildingId&&(this._closestBuildingId=d,this._updateIndoorSelector())}_updateIndoorSelector(){const l=this._buildings,d=this._closestBuildingId,v=d&&l?l[d]:void 0;if(!v)return this._removeIndoorControl(),void this.fire(new a.z("selector-update",{selectedFloorId:null,activeFloorsVisible:this._activeFloorsVisible,floors:[]}));this._addIndoorControl();let T=null;for(const M of v.floorIds)if(this._activeFloors&&this._activeFloors.has(M)){T=M;break}const O=Array.from(v.floorIds).map(M=>({id:M,name:v.floors[M].name,zIndex:v.floors[M].zIndex})).sort((M,R)=>R.zIndex-M.zIndex).filter((M,R,N)=>R===0||M.zIndex!==N[R-1].zIndex);this.fire(new a.z("selector-update",{selectedFloorId:T,activeFloorsVisible:this._activeFloorsVisible,floors:O}))}_updateActiveFloors(){const l=this._activeFloors;this._activeFloors=new Set,this._indoorState={selectedFloorId:this._selectedFloorId,lastActiveFloors:l,activeFloorsVisible:this._activeFloorsVisible},this._style.updateIndoorDependentLayers()}}const Cc=(y,l)=>ot(y,l&&l.filter(d=>d.identifier!=="source.canvas")),t1=a.aH(Cr,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setLayerProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport","addIconset","removeIconset"]),n1=a.aH(Cr,["setCenter","setZoom","setBearing","setPitch"]),P_=new Set(["background","sky","slot","custom"]),R_={version:8,layers:[],sources:{}},yf={duration:300,delay:0};class Us extends a.E{constructor(l,d={}){super(),this.map=l,this.scope=d.scope||"",this.globalId=null,this.fragments=[],this.importDepth=d.importDepth||0,this.importsCache=d.importsCache||new Map,this.resolvedImports=d.resolvedImports||new Set,this.transition=Object.assign({},yf),this._buildingIndex=new gd(this),this.crossTileSymbolIndex=new Ca,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedIndoor={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._hasAppearances=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._importedAsBasemap=!1,this._changes=d.styleChanges||new sr,this._hasDataDrivenEmissive=!1,this.indoorManager=new e1(this),this.dispatcher=d.dispatcher?d.dispatcher:new a.D(a.dh(),this),d.imageManager?this.imageManager=d.imageManager:(this.imageManager=new Pr(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.addScope(this.scope),this.glyphManager=d.glyphManager?d.glyphManager:new a.di(l._requestManager,d.localFontFamily?a.dj.all:d.localIdeographFontFamily?a.dj.ideographs:a.dj.none,d.localFontFamily||d.localIdeographFontFamily),d.modelManager?this.modelManager=d.modelManager:(this.modelManager=new Ag(l._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._availableModels={},this._order=[],this._markersNeedUpdate=!1,this.options=d.configOptions?d.configOptions:new Map,this._configDependentLayers=d.configDependentLayers?d.configDependentLayers:new Set,this._indoorDependentLayers=d.indoorDependentLayers?d.indoorDependentLayers:new Set,this._config=d.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:d.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=d.initialConfig,this.dispatcher.broadcast("setReferrer",a.dk());const v=this;this._rtlTextPluginCallback=Us.registerForPluginStateChange(T=>{v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:T.pluginStatus,pluginURL:T.pluginURL},(O,M)=>{if(a.dl(O),M&&M.every(R=>R))for(const R in v._sourceCaches){const N=v._sourceCaches[R],q=N.getSource().type;q!=="vector"&&q!=="geojson"||N.reload()}})}),this.on("data",T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const O=this.getOwnSource(T.sourceId);if(O&&O.vectorLayerIds)for(const M in this._layers){const R=this._layers[M];R.source===O.id&&this._validateLayer(R)}})}load(l){return l?(typeof l=="string"?this.loadURL(l):this.loadJSON(l),this):this}_getGlobalId(l){if(!l)return null;if(typeof l=="string"){if(a.h(l))return l;const d=a.dm(l);if(!d.startsWith("http"))try{return new URL(d,location.href).toString()}catch{return d}return d}return`json://${a.dn(JSON.stringify(l))}`}_diffStyle(l,d,v){this.globalId=this._getGlobalId(l);const T=(O,M)=>{try{M(null,this.setState(O,v))}catch(R){M(R,!1)}};if(typeof l=="string"){const O=this.map._requestManager.normalizeStyleURL(l),M=this.map._requestManager.transformRequest(O,a.R.Style);a.m(M,(R,N)=>{R?this.fire(new a.y(R)):N&&T(N,d)})}else typeof l=="object"&&T(l,d)}loadURL(l,d={}){this.fire(new a.z("dataloading",{dataType:"style"}));const v=typeof d.validate=="boolean"?d.validate:!a.h(l);this.globalId=this._getGlobalId(l),l=this.map._requestManager.normalizeStyleURL(l,d.accessToken),this.resolvedImports.add(l);const T=this.importsCache.get(l);if(T)return this._load(T,v);const O=this.map._requestManager.transformRequest(l,a.R.Style);this._request=a.m(O,(M,R)=>{if(this._request=null,M)this.fire(new a.y(M));else if(R)return this.importsCache.set(l,R),this._load(R,v)})}loadJSON(l,d={}){this.fire(new a.z("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(l),this._request=a.o.frame(()=>{this._request=null,this._load(l,d.validate!==!1)})}loadEmpty(){this.fire(new a.z("dataloading",{dataType:"style"})),this._load(R_,!1)}_loadImports(l,d,v){if(this.importDepth>=4)return a.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const T=[];for(const O of l){const M=this._createFragmentStyle(O),R=new Promise(H=>{M.once("style.import.load",H),M.once("error",H)}).then(()=>this.mergeAll());if(T.push(R),this.resolvedImports.has(O.url)){M.loadEmpty();continue}const N=O.data||this.importsCache.get(O.url);N?(M.loadJSON(N,{validate:d}),this._isInternalStyle(N)&&(M.globalId=null)):O.url?M.loadURL(O.url,{validate:d}):M.loadEmpty();const q={style:M,id:O.id,config:O.config};if(v){const H=this.fragments.findIndex(({id:re})=>re===v);this.fragments=this.fragments.slice(0,H).concat(q).concat(this.fragments.slice(H))}else this.fragments.push(q)}return Promise.allSettled(T)}getImportGlobalIds(l=this,d=new Set){for(const v of l.fragments)v.style.globalId&&d.add(v.style.globalId),this.getImportGlobalIds(v.style,d);return[...d.values()]}_createFragmentStyle(l){const d=this.scope?a.B(l.id,this.scope):l.id;let v;const T=this._initialConfig&&this._initialConfig[d];(l.config||T)&&(v=Object.assign({},l.config,T));const O=new Us(this.map,{scope:d,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:v,configOptions:this.options,colorThemeOverride:l["color-theme"],configDependentLayers:this._configDependentLayers,indoorDependentLayers:this._indoorDependentLayers});return O.setEventedParent(this.map,{style:O}),O}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this._updateLayers(this._indoorDependentLayers),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(l){return this.isRootStyle()&&(l.fragment||!!l.schema&&l.fragment!==!1)}_load(l,d){if(this._isInternalStyle(l)){const O=Object.assign({},R_,{imports:[{id:"basemap",data:l,url:""}]},l.center?{center:l.center}:{},l.bearing?{bearing:l.bearing}:{},l.pitch?{pitch:l.pitch}:{},l.zoom?{zoom:l.zoom}:{},l.light?{light:l.light}:{});return this._importedAsBasemap=!0,void this._load(O,d)}if(this.updateConfig(this._config,l.schema),d&&Cc(this,wl(l)))return;this._loaded=!0,this.stylesheet=a.dp(l);const v=()=>{for(const N in l.sources)this.addSource(N,l.sources[N],{validate:!1,isInitialLoad:!0});if(l.iconsets)for(const N in l.iconsets)this.addIconset(N,l.iconsets[N]);l.sprite?this._loadIconset(l.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),!this.glyphManager.url&&l.glyphs&&this.glyphManager.setURL(l.glyphs);const O=S_(this.stylesheet.layers);if(this._order=O.map(N=>N.id),this.stylesheet.light&&a.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const N=this.stylesheet.lights[0];this.light=new bt(N.properties,N.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new bt(this.stylesheet.light)),this._layers={};for(const N of O){const q=a.du(N,this.scope,this._styleColorTheme.lut,this.options);q.expressionDependencies.configDependencies.size!==0&&this._configDependentLayers.add(q.fqid),q.expressionDependencies.isIndoorDependent&&this._indoorDependentLayers.add(q.fqid),this._hasAppearances=this._hasAppearances||q.getAppearances().length!==0,q.setEventedParent(this,{layer:{id:q.id}}),this._layers[q.id]=q;const H=this.getOwnLayerSourceCache(q),re=!!this.directionalLight&&this.directionalLight.shadowsEnabled();H&&q.canCastShadows()&&re&&(H.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.addModelURLs(this.stylesheet.models);const M=this.stylesheet.terrain;M&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(M,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new a.z("data",{dataType:"style"}));const R=this.isRootStyle();l.imports?this._loadImports(l.imports,d).then(()=>{this._reloadImports(),this.fire(new a.z(R?"style.load":"style.import.load"))}).catch(N=>{this.fire(new a.y(new Error("Failed to load imports",N))),this.fire(new a.z(R?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new a.z(R?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const T=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(T){const O=this._evaluateColorThemeData(T);this._loadColorTheme(O).then(()=>{v()}).catch(M=>{a.w(`Couldn't load color theme from the stylesheet: ${M}`),v()})}else this._styleColorTheme.lut=null,v()}isRootStyle(){return this.importDepth===0}hasAppearances(){return this._hasAppearances||this.fragments.some(l=>l.style.hasAppearances())}mergeAll(){let l,d,v,T,O,M,R,N,q,H;const re={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(ee=>{if(ee.stylesheet){if(ee.light!=null&&(l=ee.light),ee.stylesheet.lights)for(const oe of ee.stylesheet.lights)oe.type==="ambient"&&ee.ambientLight!=null&&(d=ee.ambientLight),oe.type==="directional"&&ee.directionalLight!=null&&(v=ee.directionalLight);T=this._prioritizeTerrain(T,ee.terrain,ee.stylesheet.terrain),ee.stylesheet.fog&&ee.fog!=null&&(O=ee.fog),ee.stylesheet.snow&&ee.snow!=null&&(M=ee.snow),ee.stylesheet.rain&&ee.rain!=null&&(R=ee.rain),ee.stylesheet.camera!=null&&(H=ee.stylesheet.camera),ee.stylesheet.projection!=null&&(N=ee.stylesheet.projection),ee.stylesheet.transition!=null&&(q=ee.stylesheet.transition),re[ee.scope]=ee._styleColorTheme}}),this.light=l,this.ambientLight=d,this.directionalLight=v,this.fog=O,this.snow=M,this.rain=R,this._styleColorThemeForScope=re,T===null?delete this.terrain:this.terrain=T,this.camera=H||{"camera-projection":"perspective"},this.projection=N||{name:"mercator"},this.transition=Object.assign({},yf,q),this.mergeSources(),this.mergeLayers(),this.mergeIndoor()}forEachFragmentStyle(l){const d=v=>{for(const T of v.fragments)d(T.style);l(v)};d(this)}_prioritizeTerrain(l,d,v){const T=l&&l.drapeRenderMode===0;return v===null?d&&d.drapeRenderMode===0?d:T?l:null:d!=null&&(!l||T||d&&d.drapeRenderMode===1)?d:l}mergeTerrain(){let l;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(d=>{l=this._prioritizeTerrain(l,d.terrain,d.stylesheet.terrain)}),l===null?delete this.terrain:this.terrain=l}mergeProjection(){let l;this.forEachFragmentStyle(d=>{d.stylesheet.projection!=null&&(l=d.stylesheet.projection)}),this.projection=l||{name:"mercator"}}mergeSources(){const l={},d={},v={};this.forEachFragmentStyle(T=>{for(const O in T._sourceCaches){const M=a.B(O,T.scope);l[M]=T._sourceCaches[O]}for(const O in T._otherSourceCaches){const M=a.B(O,T.scope);d[M]=T._otherSourceCaches[O]}for(const O in T._symbolSourceCaches){const M=a.B(O,T.scope);v[M]=T._symbolSourceCaches[O]}}),this._mergedSourceCaches=l,this._mergedOtherSourceCaches=d,this._mergedSymbolSourceCaches=v}mergeIndoor(){this.forEachFragmentStyle(l=>{if(l.stylesheet&&l.stylesheet.indoor)for(const d of Object.values(l.stylesheet.indoor)){const v=d,T=a.B(v.sourceId,l.scope);this._mergedIndoor[T]=new Set(v.sourceLayers||[])}})}mergeLayers(){const l={},d=[],v={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(M=>{for(const R of M._order){const N=M._layers[R];if(N.type==="slot"){const q=a.dq(R);if(l[q])continue;l[q]=[]}N.slot&&l[N.slot]?l[N.slot].push(N):d.push(N)}}),this._mergedOrder=[];let T=-1;const O=(M=[])=>{for(const R of M)if(R.type==="slot"){const N=a.dq(R.id);l[N]&&O(l[N]),this._mergedSlots.push(N)}else{const N=a.B(R.id,R.scope);this._mergedOrder.push(N),v[N]=R,R.is3D(!!this.terrain)&&(this._has3DLayers=!0,T=this._mergedOrder.length-1),R.type==="circle"&&(this._hasCircleLayers=!0),R.type==="symbol"&&(this._hasSymbolLayers=!0),R.type==="clip"&&(this._clipLayerPresent=!0)}};if(O(d),this._has3DLayers){const M={};for(let R=0;R<this._mergedOrder.length;++R){const N=this._mergedOrder[R];M[N]=R===T?1:R<T?v[N].hasOcclusionOpacityProperties?2:0:4}this._mergedOrder.sort((R,N)=>M[R]-M[N])}this._mergedLayers=v,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged(),this._updateDataDrivenEmissiveStrength()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(l){return this.stylesheet.camera=Object.assign({},this.stylesheet.camera,l),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(l){return l.data?(function(d,v,T){const O=Object.assign({},v);for(const R of Object.keys(Uu))O[R]===void 0&&(O[R]=Uu[R].default);const M=new a.a8(Vl,d,new Map(T));return M.setTransitionOrValue(O,T),M.untransitioned().possiblyEvaluate(new a.ac(0,{worldview:void 0}))})(this.scope,l,this.options).get("data"):null}_loadColorTheme(l){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const d=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((v,T)=>{const O="data:image/png;base64,";if(!l||l.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void v();let M=l;M.startsWith(O)||(M=O+M);const R=a.I.from("mapbox-reserved-lut"),N=new Image;N.src=M,N.onerror=()=>{this._styleColorTheme.lutLoading=!1,T(new Error("Failed to load image data"))},N.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==d)return void v();this._styleColorTheme.lutLoading=!1;const{width:q,height:H,data:re}=a.o.getImageData(N);if(H>32)return void T(new Error("The height of the image must be less than or equal to 32 pixels."));if(q!==H*H)return void T(new Error("The width of the image must be equal to the height squared."));this.getImage(R)&&this.removeImage(R),this.addImage(R,{data:new a.q({width:q,height:H},re),pixelRatio:1,sdf:!1,usvg:!1,version:0});const ee=this.imageManager.getImage(R,this.scope);ee?(this._styleColorTheme.lut={image:ee.data,data:l},v()):T(new Error("Missing LUT image."))}})}getLut(l){const d=this._styleColorThemeForScope[l];return d?d.lut:null}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(l){this._spriteRequest=(function(d,v,T){let O,M,R;const N=a.o.devicePixelRatio>1?"@2x":"";let q=a.m(v.transformRequest(v.normalizeSpriteURL(d,N,".json"),a.R.SpriteJSON),(ee,oe)=>{q=null,R||(R=ee,O=oe,re())}),H=a.n(v.transformRequest(v.normalizeSpriteURL(d,N,".png"),a.R.SpriteImage),(ee,oe)=>{H=null,R||(R=ee,M=oe,re())});function re(){if(R)T(R);else if(O&&M){const ee=a.o.getImageData(M),oe={};for(const he in O){const{width:ce,height:de,x:_e,y:Me,sdf:Ce,pixelRatio:Ae,stretchX:We,stretchY:$e,content:Ge}=O[he],Fe=new a.q({width:ce,height:de});a.q.copy(ee,Fe,{x:_e,y:Me},{x:0,y:0},{width:ce,height:de},null),oe[he]={data:Fe,pixelRatio:Ae!==void 0?Ae:1,sdf:Ce!==void 0&&Ce,stretchX:We,stretchY:$e,content:Ge,usvg:!1,version:0}}T(null,oe)}}return{cancel(){q&&(q.cancel(),q=null),H&&(H.cancel(),H=null)}}})(l,this.map._requestManager,(d,v)=>{if(this._spriteRequest=null,d)this.fire(new a.y(d));else if(v){const T=new Map;for(const O in v)T.set(a.I.from(O),v[O]);this.addImages(T)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new a.z("data",{dataType:"style"}))})}addIconset(l,d){if(d.type==="sprite")return void this._loadSprite(d.url);const v=this.getOwnSourceCache(d.source);if(!v)return void this.fire(new a.y(new Error(`Source "${d.source}" as specified by iconset "${l}" does not exist and cannot be used as an iconset source`)));const T=v.getSource();if(T.type!=="raster-array")return void this.fire(new a.y(new Error(`Source "${d.source}" as specified by iconset "${l}" is not a "raster-array" source and cannot be used as an iconset source`)));T.partial=!1;const O=new wd(l,this.scope,v);this.imageManager.addImageProvider(O,this.scope)}removeIconset(l){this.imageManager.removeImageProvider(l,this.scope)}_loadIconset(l){if(!a.h(l)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(l);const d=this.map._spriteFormat==="auto";var v,T;this._spriteRequest=(T=(O,M)=>{if(this._spriteRequest=null,O)d?this._loadSprite(l):this.fire(new a.y(O));else if(M){const R=new Map;for(const N in M)R.set(a.I.from(N),M[N]);this.addImages(R)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new a.z("data",{dataType:"style"}))},a.bu((v=this.map._requestManager).transformRequest(v.normalizeIconsetURL(l),a.R.Iconset),(O,M)=>{if(O)return void T(O);const R={},N=a.dg(new a.bt(M));for(const q of N.icons){const H={version:1,pixelRatio:a.o.devicePixelRatio,content:E0(q),stretchX:q.metadata?A0(q.metadata.stretch_x_areas):void 0,stretchY:q.metadata?A0(q.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:q};R[q.name]=H}T(null,R)}))}_validateLayer(l){const d=this.getOwnSource(l.source);if(!d)return;const v=l.sourceLayer;v&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(v)===-1)&&this.fire(new a.y(new Error(`Source layer "${v}" does not exist on source "${d.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:l}of this.fragments)if(!l.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((l,d)=>{const v=this.fragments[d];return v&&v.style&&(l.data=v.style.serialize()),l})}_serializeSources(){const l={};for(const d in this._sourceCaches){const v=this._sourceCaches[d].getSource();l[v.id]||(l[v.id]=v.serialize())}return l}_serializeLayers(l){const d=[];for(const v of l){const T=this._layers[v];T&&T.type!=="custom"&&d.push(T.serialize())}return d}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_updateDataDrivenEmissiveStrength(){for(const l in this._mergedLayers){const d=this._mergedLayers[l];if(d._transitionablePaint&&d._transitionablePaint._values){const v=d._transitionablePaint._values["line-emissive-strength"];if(v&&v.value&&v.value.isDataDriven())return void(this._hasDataDrivenEmissive=!0)}}this._hasDataDrivenEmissive=!1}hasDataDrivenEmissiveStrength(){return this._hasDataDrivenEmissive}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(l){return l?this.order:this._mergedOrder}isLayerDraped(l){return!!this.terrain&&l.isDraped(this.getLayerSourceCache(l))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(l){const d=this.getOwnLayer(l);if(d)return d;this.fire(new a.y(new Error(`The layer '${l}' does not exist in the map's style.`)))}_checkSource(l){const d=this.getOwnSource(l);if(d)return d;this.fire(new a.y(new Error(`The source '${l}' does not exist in the map's style.`)))}precompilePrograms(l,d){const v=this.map.painter;if(v)for(let T=l.minzoom||0;T<(l.maxzoom||25.5);T++){const O=l.getProgramIds();if(O)for(const M of O){const R=l.getDefaultProgramParams(M,d.zoom,this._styleColorTheme.lut);R&&(v.style=this,this.fog&&(v._fogVisible=!0,R.overrideFog=!0,v.getOrCreateProgram(M,R)),v._fogVisible=!1,R.overrideFog=!1,v.getOrCreateProgram(M,R),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(R.overrideRtt=!0,v.getOrCreateProgram(M,R)))}}}update(l){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(l),this.directionalLight&&this.directionalLight.recalculate(l);const d=this.calculateLightsBrightness();l.brightness=d||0,d!==this._brightness&&(this._brightness=d,this.dispatcher.broadcast("setBrightness",d)),l.worldview!==this._worldview&&(this._worldview=l.worldview,this.dispatcher.broadcast("setWorldview",this._worldview));const v=this._changes.isDirty();let T=!1;if(this._changes.isDirty()){const R=this._changes.getLayerUpdatesByScope();for(const N in R){const{updatedIds:q,removedIds:H}=R[N];(q||H)&&(this._updateWorkerLayers(N,q,H),T=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(l),this.light&&this.light.updateTransitions(l),this.ambientLight&&this.ambientLight.updateTransitions(l),this.directionalLight&&this.directionalLight.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this.snow&&this.snow.updateTransitions(l),this.rain&&this.rain.updateTransitions(l),this._changes.reset()}const O={};for(const R in this._mergedSourceCaches){const N=this._mergedSourceCaches[R];O[R]=N.used,N.used=!1,N.tileCoverLift=0}for(const R of this._mergedOrder){const N=this._mergedLayers[R];if(N.visibility!=="none"&&N.recalculate(l,this._availableImages),!N.isHidden(l.zoom)){const q=this.getLayerSourceCache(N);q&&(q.used=!0,q.tileCoverLift=Math.max(q.tileCoverLift,N.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(N,l)}):this.precompilePrograms(N,l))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&T&&this.mergeLayers();const M=this.imageManager.getPendingImageProviders();for(const R of M)R.sourceCache.used=!0;for(const R in O){const N=this._mergedSourceCaches[R];O[R]!==N.used&&N.getSource().fire(new a.z("data",{sourceDataType:"visibility",dataType:"source",sourceId:N.getSource().id}))}this.light&&this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.snow&&this.snow.recalculate(l),this.rain&&this.rain.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),v&&this.fire(new a.z("data",{dataType:"style"}))}updateImageProviders(){const l=this.imageManager.getPendingImageProviders();for(const d of l){const v=d.resolvePendingRequests(),T=this.getFragmentStyle(d.scope);T&&T.addImages(v)}}_updateTilesForChangedImages(){const l={};for(const d in this._mergedSourceCaches){const v=this._mergedSourceCaches[d].getSource().scope;l[v]=l[v]||this._changes.getUpdatedImages(v),l[v].length!==0&&this._mergedSourceCaches[d].reloadTilesForDependencies(["icons","patterns"],l[v])}for(const d in l)this._changes.resetUpdatedImages(d)}_updateWorkerLayers(l,d,v){const T=this.getFragmentStyle(l);T&&this.dispatcher.broadcast("updateLayers",{layers:d?T._serializeLayers(d):[],scope:l,removedIds:v||[],options:T.options})}setState(l,d){if(this._checkLoaded(),Cc(this,wl(l)))return!1;(l=a.dp(l)).layers=S_(l.layers);const v=(function(M,R){if(!M)return[{command:Cr.setStyle,args:[R]}];let N=[];try{if(!a.by(M.version,R.version))return[{command:Cr.setStyle,args:[R]}];if(a.by(M.center,R.center)||N.push({command:Cr.setCenter,args:[R.center]}),a.by(M.zoom,R.zoom)||N.push({command:Cr.setZoom,args:[R.zoom]}),a.by(M.bearing,R.bearing)||N.push({command:Cr.setBearing,args:[R.bearing]}),a.by(M.pitch,R.pitch)||N.push({command:Cr.setPitch,args:[R.pitch]}),a.by(M.sprite,R.sprite)||N.push({command:Cr.setSprite,args:[R.sprite]}),a.by(M.glyphs,R.glyphs)||N.push({command:Cr.setGlyphs,args:[R.glyphs]}),a.by(M.imports,R.imports)||(function(oe=[],he=[],ce){he=he||[];const de=(oe=oe||[]).map(lu),_e=he.map(lu),Me=oe.reduce(xg,{}),Ce=he.reduce(xg,{}),Ae=de.slice();let We,$e,Ge,Fe;for(We=0,$e=0;We<de.length;We++)Ge=de[We],Ce.hasOwnProperty(Ge)?$e++:(ce.push({command:Cr.removeImport,args:[Ge]}),Ae.splice(Ae.indexOf(Ge,$e),1));for(We=0,$e=0;We<_e.length;We++)Ge=_e[_e.length-1-We],Ae[Ae.length-1-We]!==Ge&&(Me.hasOwnProperty(Ge)?(ce.push({command:Cr.removeImport,args:[Ge]}),Ae.splice(Ae.lastIndexOf(Ge,Ae.length-$e),1)):$e++,Fe=Ae[Ae.length-We],ce.push({command:Cr.addImport,args:[Ce[Ge],Fe]}),Ae.splice(Ae.length-We,0,Ge));for(const Re of he){const et=Me[Re.id];et&&(delete et.data,a.by(et,Re)||ce.push({command:Cr.updateImport,args:[Re.id,Re]}))}})(M.imports,R.imports,N),a.by(M.transition,R.transition)||N.push({command:Cr.setTransition,args:[R.transition]}),a.by(M.light,R.light)||N.push({command:Cr.setLight,args:[R.light]}),a.by(M.fog,R.fog)||N.push({command:Cr.setFog,args:[R.fog]}),a.by(M.snow,R.snow)||N.push({command:Cr.setSnow,args:[R.snow]}),a.by(M.rain,R.rain)||N.push({command:Cr.setRain,args:[R.rain]}),a.by(M.projection,R.projection)||N.push({command:Cr.setProjection,args:[R.projection]}),a.by(M.lights,R.lights)||N.push({command:Cr.setLights,args:[R.lights]}),a.by(M.camera,R.camera)||N.push({command:Cr.setCamera,args:[R.camera]}),a.by(M.iconsets,R.iconsets)||(function(oe,he,ce){let de;for(de in he=he||{},oe=oe||{})oe.hasOwnProperty(de)&&(he.hasOwnProperty(de)||ce.push({command:Cr.removeIconset,args:[de]}));for(de in he){if(!he.hasOwnProperty(de))continue;const _e=he[de];oe.hasOwnProperty(de)?a.by(oe[de],_e)||(ce.push({command:Cr.removeIconset,args:[de]}),ce.push({command:Cr.addIconset,args:[de,_e]})):ce.push({command:Cr.addIconset,args:[de,_e]})}})(M.iconsets,R.iconsets,N),!a.by(M["color-theme"],R["color-theme"]))return[{command:Cr.setStyle,args:[R]}];const q={},H=[];(function(oe,he,ce,de){let _e;for(_e in he=he||{},oe=oe||{})oe.hasOwnProperty(_e)&&(he.hasOwnProperty(_e)||bg(_e,ce,de));for(_e in he){if(!he.hasOwnProperty(_e))continue;const Me=he[_e];oe.hasOwnProperty(_e)?a.by(oe[_e],Me)||(oe[_e].type==="geojson"&&Me.type==="geojson"&&sh(oe,he,_e)?ce.push({command:Cr.setGeoJSONSourceData,args:[_e,Me.data]}):el(_e,he,ce,de)):hf(_e,he,ce)}})(M.sources,R.sources,H,q);const re=[];M.layers&&M.layers.forEach(oe=>{oe.source&&q[oe.source]?N.push({command:Cr.removeLayer,args:[oe.id]}):re.push(oe)});let ee=M.terrain;ee&&q[ee.source]&&(N.push({command:Cr.setTerrain,args:[void 0]}),ee=void 0),N=N.concat(H),a.by(ee,R.terrain)||N.push({command:Cr.setTerrain,args:[R.terrain]}),(function(oe,he,ce){he=he||[];const de=(oe=oe||[]).map(lu),_e=he.map(lu),Me=oe.reduce(xg,{}),Ce=he.reduce(xg,{}),Ae=de.slice(),We=Object.create(null);let $e,Ge,Fe,Re,et,nt,st;for($e=0,Ge=0;$e<de.length;$e++)Fe=de[$e],Ce.hasOwnProperty(Fe)?Ge++:(ce.push({command:Cr.removeLayer,args:[Fe]}),Ae.splice(Ae.indexOf(Fe,Ge),1));for($e=0,Ge=0;$e<_e.length;$e++)Fe=_e[_e.length-1-$e],Ae[Ae.length-1-$e]!==Fe&&(Me.hasOwnProperty(Fe)?(ce.push({command:Cr.removeLayer,args:[Fe]}),Ae.splice(Ae.lastIndexOf(Fe,Ae.length-Ge),1)):Ge++,nt=Ae[Ae.length-$e],ce.push({command:Cr.addLayer,args:[Ce[Fe],nt]}),Ae.splice(Ae.length-$e,0,Fe),We[Fe]=!0);for($e=0;$e<_e.length;$e++)if(Fe=_e[$e],Re=Me[Fe],et=Ce[Fe],!We[Fe]&&!a.by(Re,et))if(a.by(Re.source,et.source)&&a.by(Re["source-layer"],et["source-layer"])&&a.by(Re.type,et.type)){for(st in lh(Re.layout,et.layout,ce,Fe,null,Cr.setLayoutProperty),lh(Re.paint,et.paint,ce,Fe,null,Cr.setPaintProperty),a.by(Re.slot,et.slot)||ce.push({command:Cr.setSlot,args:[Fe,et.slot]}),a.by(Re.filter,et.filter)||ce.push({command:Cr.setFilter,args:[Fe,et.filter]}),a.by(Re.minzoom,et.minzoom)&&a.by(Re.maxzoom,et.maxzoom)||ce.push({command:Cr.setLayerZoomRange,args:[Fe,et.minzoom,et.maxzoom]}),Re)Re.hasOwnProperty(st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&st!=="slot"&&(st.indexOf("paint.")===0?lh(Re[st],et[st],ce,Fe,st.slice(6),Cr.setPaintProperty):a.by(Re[st],et[st])||ce.push({command:Cr.setLayerProperty,args:[Fe,st,et[st]]}));for(st in et)et.hasOwnProperty(st)&&!Re.hasOwnProperty(st)&&st!=="layout"&&st!=="paint"&&st!=="filter"&&st!=="metadata"&&st!=="minzoom"&&st!=="maxzoom"&&st!=="slot"&&(st.indexOf("paint.")===0?lh(Re[st],et[st],ce,Fe,st.slice(6),Cr.setPaintProperty):a.by(Re[st],et[st])||ce.push({command:Cr.setLayerProperty,args:[Fe,st,et[st]]}))}else ce.push({command:Cr.removeLayer,args:[Fe]}),nt=Ae[Ae.lastIndexOf(Fe)+1],ce.push({command:Cr.addLayer,args:[et,nt]})})(re,R.layers,N)}catch(q){console.warn("Unable to compute style diff:",q),N=[{command:Cr.setStyle,args:[R]}]}return N})(this.serialize(),l).filter(M=>!(M.command in n1));if(v.length===0)return!1;const T=v.filter(M=>!(M.command in t1));if(T.length>0)throw new Error(`Unimplemented: ${T.map(M=>M.command).join(", ")}.`);const O=[];return v.forEach(M=>{O.push(this[M.command](...M.args))}),d&&Promise.all(O).then(d).catch(d),this.stylesheet=l,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}_updateWorkerModels(){this._availableModels=this.modelManager.getModelURIs(this.scope),this.dispatcher.broadcast("setModels",{scope:this.scope,models:this._availableModels})}addImages(l){if(l.size===0)return this;for(const[d,v]of l.entries()){if(this.getImage(d))return this.fire(new a.y(new Error(`An image with the name "${d.name}" already exists.`)));this.imageManager.addImage(d,this.scope,v),this._changes.updateImage(d,this.scope)}return this._updateWorkerImages(),this.fire(new a.z("data",{dataType:"style"})),this}addImage(l,d){return this.getImage(l)?this.fire(new a.y(new Error(`An image with the name "${l.name}" already exists.`))):(this.imageManager.addImage(l,this.scope,d),this._changes.updateImage(l,this.scope),this._updateWorkerImages(),this.fire(new a.z("data",{dataType:"style"})),this)}updateImage(l,d,v=!1){this.imageManager.updateImage(l,this.scope,d),v&&(this._changes.updateImage(l,this.scope),this._updateWorkerImages(),this.fire(new a.z("data",{dataType:"style"})))}getImage(l){return this.imageManager.getImage(l,this.scope)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l,this.scope),this._changes.updateImage(l,this.scope),this._updateWorkerImages(),this.fire(new a.z("data",{dataType:"style"})),this):this.fire(new a.y(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}getActualScope(){return this._importedAsBasemap?"basemap":this.scope}addModelURLs(l){return this.modelManager.addModelURLs(l,this.getActualScope()),this._updateWorkerModels(),this.fire(new a.z("data",{dataType:"style"})),this}addModel(l,d,v={}){return this._checkLoaded(),this._validate(Qe,`models.${l}`,d,null,v)||(this.modelManager.addModel(l,d,this.getActualScope()),this.fire(new a.z("data",{dataType:"style"}))),this}hasModel(l){return this.modelManager.hasModel(l,this.getActualScope())}removeModel(l){return this.hasModel(l)?(this.modelManager.removeModel(l,this.getActualScope(),!1,!0),this.fire(new a.z("data",{dataType:"style"})),this):this.fire(new a.y(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.getActualScope())}addSource(l,d,v={}){if(this._checkLoaded(),this.getOwnSource(l)!==void 0)throw new Error(`There is already a source with ID "${l}".`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(_g,`sources.${l}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const T=iu(l,d,this.dispatcher,this);T.scope=this.scope,T.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(T.id),source:T.serialize(),sourceId:T.id}));const O=M=>{const R=(M?"symbol:":"other:")+T.id,N=a.B(R,this.scope),q=this._sourceCaches[R]=new eo(N,T,M);(M?this._symbolSourceCaches:this._otherSourceCaches)[T.id]=q,q.onAdd(this.map)};O(!1),d.type!=="vector"&&d.type!=="geojson"||O(!0),T.onAdd&&T.onAdd(this.map),v.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(l){this._checkLoaded();const d=this.getOwnSource(l);if(!d)throw new Error("There is no source with this ID");for(const T in this._layers)if(this._layers[T].source===l)return this.fire(new a.y(new Error(`Source "${l}" cannot be removed while layer "${T}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===l)return this.fire(new a.y(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));if(this.stylesheet.iconsets){const T=Object.entries(this.stylesheet.iconsets).find(([O,M])=>M.type==="source"&&M.source===l);if(T)return this.fire(new a.y(new Error(`Source "${l}" cannot be removed while iconset "${T[0]}" is using it.`)))}const v=this.getOwnSourceCaches(l);for(const T of v){const O=a.dq(T.id);delete this._sourceCaches[O],this._changes.discardSourceCacheUpdate(T.id),T.fire(new a.z("data",{sourceDataType:"metadata",dataType:"source",sourceId:T.getSource().id})),T.setEventedParent(null),T.clearTiles()}return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],this.mergeSources(),d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(l,d){this._checkLoaded(),this.getOwnSource(l).setData(d),this._changes.setDirty()}getOwnSource(l){const d=this.getOwnSourceCache(l);return d&&d.getSource()}getOwnSources(){const l=[];for(const d in this._otherSourceCaches){const v=this.getOwnSourceCache(d);v&&l.push(v.getSource())}return l}areTilesLoaded(){const l=this._mergedSourceCaches;for(const d in l){const v=l[d]._tiles;for(const T in v){const O=v[T];if(O.state!=="loaded"&&O.state!=="errored")return!1}}return!0}setLights(l){if(this._checkLoaded(),!l)return delete this.ambientLight,void delete this.directionalLight;const d=this._getTransitionParameters();for(const O of l){if(this._validate(Vt,"lights",O))return;switch(O.type){case"ambient":if(this.ambientLight){const M=this.ambientLight;M.set(O),M.updateTransitions(d)}else this.ambientLight=new Or(O,ji(),this.scope,this.options);break;case"directional":if(this.directionalLight){const M=this.directionalLight;M.set(O),M.updateTransitions(d)}else this.directionalLight=new Or(O,li(),this.scope,this.options)}}const v=Object.assign(d,{worldview:this.map.getWorldview()}),T=new a.ac(this.z||0,v);this.ambientLight&&this.ambientLight.recalculate(T),this.directionalLight&&this.directionalLight.recalculate(T),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const l=this.directionalLight,d=this.ambientLight;if(!l||!d)return;const v=ee=>.2126*(ee[0]<=.03928?ee[0]/12.92:Math.pow((ee[0]+.055)/1.055,2.4))+.7152*(ee[1]<=.03928?ee[1]/12.92:Math.pow((ee[1]+.055)/1.055,2.4))+.0722*(ee[2]<=.03928?ee[2]/12.92:Math.pow((ee[2]+.055)/1.055,2.4)),T=l.properties.get("color").toNonPremultipliedRenderColor(null).toArray01(),O=l.properties.get("intensity"),M=l.properties.get("direction"),R=1-a.d4(M.x,M.y,M.z)[2]/90,N=v(T)*O*R,q=d.properties.get("color").toNonPremultipliedRenderColor(null).toArray01(),H=d.properties.get("intensity"),re=v(q)*H;return Number(((N+re)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const l=[];return this.directionalLight&&l.push(this.directionalLight.get()),this.ambientLight&&l.push(this.ambientLight.get()),l}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(l){if(l==null||l===""&&this.isRootStyle())return this;if(a.dr(l)){const d=a.ds(l),v=this.fragments.find(({id:O})=>O===d);if(!v)return;const T=a.dq(l);return v.style.getFragmentStyle(T)}{const d=this.fragments.find(({id:v})=>v===l);return d?d.style:void 0}}setFeaturesetSelectors(l){if(!l)return;const d={},v=(T,O="")=>`${T}::${O}`;this._featuresetSelectors={};for(const T in l){const O=this._featuresetSelectors[T]=[];for(const M of l[T].selectors){if(M.featureNamespace){const N=this.getOwnLayer(M.layer);if(!N){a.w(`Layer is undefined for selector: ${M.layer}`);continue}const q=v(N.source,N.sourceLayer);if(q in d&&d[q]!==M.featureNamespace){a.w(`"featureNamespace ${M.featureNamespace} of featureset ${T}'s selector is not associated to the same source, skip this selector`);continue}d[q]=M.featureNamespace}let R;if(M.properties)for(const N in M.properties){const q=a.U(M.properties[N]);q.result==="success"&&(R=R||{},R[N]=q.value)}O.push({layerId:M.layer,namespace:M.featureNamespace,properties:R,uniqueFeatureID:M._uniqueFeatureID})}}}getFeaturesetDescriptors(l){const d=this.getFragmentStyle(l);if(!d||!d.stylesheet.featuresets)return[];const v=[];for(const T in d.stylesheet.featuresets)v.push({featuresetId:T,importId:d.scope?d.scope:void 0});return v}getFeaturesetLayers(l,d){const v=this.getFragmentStyle(d),T=v.stylesheet.featuresets;if(!T||!T[l])return this.fire(new a.y(new Error(`The featureset '${l}' does not exist in the map's style and cannot be queried.`))),[];const O=[];for(const M of T[l].selectors){const R=v.getOwnLayer(M.layer);R&&O.push(R)}return O}getConfigProperty(l,d){const v=this.getFragmentStyle(l);if(!v)return null;const T=a.B(d,v.scope),O=v.options.get(T),M=O?O.value||O.default:null;return M?M.serialize():null}isIndoorEnabled(){return Object.keys(this._mergedIndoor).length>0}getIndoorSourceLayers(l,d){const v=a.B(l,d);return this._mergedIndoor[v]}setIndoorData(l,d){this.indoorManager.setIndoorData(d)}updateIndoorDependentLayers(){this._updateLayers(this._indoorDependentLayers),this.map._styleDirty=!0,this.map.triggerRepaint()}setConfigProperty(l,d,v){const T=this.getFragmentStyle(l);if(!T)return;const O=T.stylesheet.schema;if(!O||!O[d])return;const M=a.U(v);if(M.result!=="success")return void Cc(this,M.value);const R=M.value.expression,N=a.B(d,T.scope),q=T.options.get(N);if(!q)return;let H;const{minValue:re,maxValue:ee,stepValue:oe,type:he,values:ce}=O[d],de=a.U(O[d].default);de.result==="success"&&(H=de.value.expression),H?(this.options.set(N,Object.assign({},q,{value:R,default:H,minValue:re,maxValue:ee,stepValue:oe,type:he,values:ce})),this.updateConfigDependencies(d)):this.fire(new a.y(new Error(`No schema defined for the config option "${d}" in the "${l}" fragment.`)))}getConfig(l){const d=this.getFragmentStyle(l);if(!d)return null;const v=d.stylesheet.schema;if(!v)return null;const T={};for(const O in v){const M=a.B(O,d.scope),R=d.options.get(M),N=R?R.value||R.default:null;T[O]=N?N.serialize():null}return T}setConfig(l,d){const v=this.getFragmentStyle(l);v&&(v.updateConfig(d,v.stylesheet.schema),this.updateConfigDependencies())}getSchema(l){const d=this.getFragmentStyle(l);return d?d.stylesheet.schema:null}setSchema(l,d){const v=this.getFragmentStyle(l);v&&(v.stylesheet.schema=d,v.updateConfig(v._config,d),this.updateConfigDependencies())}updateConfig(l,d){if(this._config=l,l||d)if(d)for(const v in d){let T,O;const M=a.U(d[v].default);if(M.result==="success"&&(T=M.value.expression),l&&l[v]!==void 0){const ee=a.U(l[v]);ee.result==="success"&&(O=ee.value.expression)}const{minValue:R,maxValue:N,stepValue:q,type:H,values:re}=d[v];if(T){const ee=a.B(v,this.scope);this.options.set(ee,{default:T,value:O,minValue:R,maxValue:N,stepValue:q,type:H,values:re})}else this.fire(new a.y(new Error(`No schema defined for config option "${v}".`)))}else this.fire(new a.y(new Error("Attempting to set config for a style without schema.")))}_updateLayers(l,d=()=>!0){for(const v of l){const T=this.getLayer(v);T&&d(T)&&(T.possiblyEvaluateVisibility(),this._updateLayer(T),this._changes.setDirty())}}updateConfigDependencies(l){this._updateLayers(this._configDependentLayers,d=>!l||d.expressionDependencies.configDependencies.has(l)),this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(d=>{const v=d._styleColorTheme.colorThemeOverride?d._styleColorTheme.colorThemeOverride:d._styleColorTheme.colorTheme;if(v){const T=d._evaluateColorThemeData(v);(!d._styleColorTheme.lut&&T!==""||d._styleColorTheme.lut&&T!==d._styleColorTheme.lut.data)&&d.setColorTheme(v)}}),this._changes.setDirty()}addLayer(l,d,v={}){this._checkLoaded();const T=l.id;if(this._layers[T])return void this.fire(new a.y(new Error(`Layer with id "${T}" already exists on this map`)));let O;if(l.type==="custom"){if(Cc(this,a.dt(l)))return;O=a.du(l,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof l.source=="object"&&(this.addSource(T,l.source),l=a.dp(l),l=Object.assign(l,{source:T})),this._validate(ut,`layers.${T}`,l,{arrayIndex:-1},v))return;O=a.du(l,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(O),O.setEventedParent(this,{layer:{id:T}})}const M=a.B(O.source,O.scope);O.expressionDependencies.configDependencies.size!==0&&this._configDependentLayers.add(M),O.expressionDependencies.isIndoorDependent&&this._indoorDependentLayers.add(M);let R=this._order.length;if(d){const re=this._order.indexOf(d);if(re===-1)return void this.fire(new a.y(new Error(`Layer with id "${d}" does not exist on this map.`)));O.slot&&O.slot!==this._layers[d].slot?a.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`):R=re}this._order.splice(R,0,T),this._handleLayerOrderChange(),this._layers[T]=O;const N=this.getOwnLayerSourceCache(O),q=!!this.directionalLight&&this.directionalLight.shadowsEnabled();N&&O.canCastShadows()&&q&&(N.castsShadows=!0);const H=this._changes.getRemovedLayer(O);if(H&&O.source&&N&&O.type!=="custom"){this._changes.discardLayerRemoval(O);const re=a.B(O.source,O.scope);H.type!==O.type?this._changes.updateSourceCache(re,"clear"):(this._changes.updateSourceCache(re,"reload"),N.pause())}this._updateLayer(O),O.onAdd&&O.onAdd(this.map),O.scope=this.scope,this.mergeLayers()}moveLayer(l,d){this._checkLoaded();const v=this._checkLayer(l);if(!v||l===d)return;const T=this._order.indexOf(l);this._order.splice(T,1);let O=this._order.length;if(d){const M=this._order.indexOf(d);if(M===-1)return void this.fire(new a.y(new Error(`Layer with id "${d}" does not exist on this map.`)));v.slot&&v.slot!==this._layers[d].slot?a.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`):O=M}this._order.splice(O,0,l),this._changes.setDirty(),this._handleLayerOrderChange(),this.mergeLayers()}removeLayer(l){this._checkLoaded();const d=this._checkLayer(l);if(!d)return;d.setEventedParent(null);const v=this._order.indexOf(l);this._order.splice(v,1),delete this._layers[l],this._changes.setDirty(),this._handleLayerOrderChange(),this._configDependentLayers.delete(d.fqid),this._indoorDependentLayers.delete(d.fqid),this._changes.removeLayer(d);const T=this.getOwnLayerSourceCache(d);if(T&&T.castsShadows){let O=!1;for(const M in this._layers)if(this._layers[M].source===d.source&&this._layers[M].canCastShadows()){O=!0;break}T.castsShadows=O}d.onRemove&&d.onRemove(this.map),this.mergeLayers()}getOwnLayer(l){return this._layers[l]}hasLayer(l){return l in this._mergedLayers}hasLayerType(l){for(const d in this._layers)if(this._layers[d].type===l)return!0;return!1}setLayerZoomRange(l,d,v){this._checkLoaded();const T=this._checkLayer(l);T&&(T.minzoom===d&&T.maxzoom===v||(d!=null&&(T.minzoom=d),v!=null&&(T.maxzoom=v),this._updateLayer(T)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(l,d){this._checkLoaded();const v=this._checkLayer(l);v&&v.slot!==d&&(v.slot=d,this._updateLayer(v))}setFilter(l,d,v={}){this._checkLoaded();const T=this._checkLayer(l);if(T&&!a.by(T.filter,d))return d==null?(T.filter=void 0,void this._updateLayer(T)):void(this._validate(me,`layers.${T.id}.filter`,d,{layerType:T.type},v)||(T.filter=a.dp(d),this._updateLayer(T)))}getFilter(l){const d=this._checkLayer(l);if(d)return a.dp(d.filter)}setLayoutProperty(l,d,v,T={}){this._checkLoaded();const O=this._checkLayer(l);if(O&&!a.by(O.getLayoutProperty(d),v)){if(v!=null&&(!T||T.validate!==!1)&&Cc(O,Le.call(wl,{key:`layers.${l}.layout.${d}`,layerType:O.type,objectKey:d,value:v,styleSpec:a.a6,style:{glyphs:!0,sprite:!0}})))return;O.setLayoutProperty(d,v),O.expressionDependencies.configDependencies.size!==0&&this._configDependentLayers.add(O.fqid),O.expressionDependencies.isIndoorDependent&&this._indoorDependentLayers.add(O.fqid),this._updateLayer(O)}}setLayerProperty(l,d,v,T={}){this._checkLoaded();const O=this._checkLayer(l);O&&(d==="appearances"?(O.setAppearances(v),this._changes.setDirty()):O.isPaintProperty(d)?this.setPaintProperty(l,d,v,T):this.setLayoutProperty(l,d,v,T))}getLayoutProperty(l,d){const v=this._checkLayer(l);if(v)return v.getLayoutProperty(d)}setPaintProperty(l,d,v,T={}){this._checkLoaded();const O=this._checkLayer(l);if(!O||a.by(O.getPaintProperty(d),v)||v!=null&&(!T||T.validate!==!1)&&Cc(O,we.call(wl,{key:`layers.${l}.paint.${d}`,layerType:O.type,objectKey:d,value:v,styleSpec:a.a6})))return;const M=O.setPaintProperty(d,v);O.expressionDependencies.configDependencies.size!==0&&this._configDependentLayers.add(O.fqid),O.expressionDependencies.isIndoorDependent&&this._indoorDependentLayers.add(O.fqid),M&&this._updateLayer(O),this._changes.updatePaintProperties(O)}getPaintProperty(l,d){const v=this._checkLayer(l);if(v)return v.getPaintProperty(d)}setFeatureState(l,d){if(this._checkLoaded(),"target"in l){if("featuresetId"in l.target){const{featuresetId:N,importId:q}=l.target,H=this.getFragmentStyle(q),re=H.getFeaturesetLayers(N);for(const{source:ee,sourceLayer:oe}of re)H.setFeatureState({id:l.id,source:ee,sourceLayer:oe},d)}else if("layerId"in l.target){const{layerId:N}=l.target,q=this.getLayer(N);this.setFeatureState({id:l.id,source:q.source,sourceLayer:q.sourceLayer},d)}return}const v=l.source,T=l.sourceLayer,O=this._checkSource(v);if(!O)return;const M=O.type;if(M==="geojson"&&T)return void this.fire(new a.y(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(M==="vector"&&!T)return void this.fire(new a.y(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new a.y(new Error("The feature id parameter must be provided.")));const R=this.getOwnSourceCaches(v);for(const N of R)N.setFeatureState(T,l.id,d)}removeFeatureState(l,d){if(this._checkLoaded(),"target"in l){if("featuresetId"in l.target){const{featuresetId:N,importId:q}=l.target,H=this.getFragmentStyle(q),re=H.getFeaturesetLayers(N);for(const{source:ee,sourceLayer:oe}of re)H.removeFeatureState({id:l.id,source:ee,sourceLayer:oe},d)}else if("layerId"in l.target){const{layerId:N}=l.target,q=this.getLayer(N);this.removeFeatureState({id:l.id,source:q.source,sourceLayer:q.sourceLayer},d)}return}const v=l.source,T=this._checkSource(v);if(!T)return;const O=T.type,M=O==="vector"?l.sourceLayer:void 0;if(O==="vector"&&!M)return void this.fire(new a.y(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new a.y(new Error("A feature id is required to remove its specific state property.")));const R=this.getOwnSourceCaches(v);for(const N of R)N.removeFeatureState(M,l.id,d)}getFeatureState(l){if(this._checkLoaded(),"target"in l){let O;if("featuresetId"in l.target){const{featuresetId:M,importId:R}=l.target,N=this.getFragmentStyle(R),q=N.getFeaturesetLayers(M);for(const{source:H,sourceLayer:re}of q){const ee=N.getFeatureState({id:l.id,source:H,sourceLayer:re});if(ee&&!O)O=ee;else if(!a.by(O,ee))return void this.fire(new a.y(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in l.target){const{layerId:M}=l.target,R=this.getLayer(M);O=this.getFeatureState({id:l.id,source:R.source,sourceLayer:R.sourceLayer})}return O}const d=l.source,v=l.sourceLayer,T=this._checkSource(d);if(T){if(T.type!=="vector"||v)return l.id===void 0&&this.fire(new a.y(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(d)[0].getFeatureState(v,l.id);this.fire(new a.y(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(l){return this.stylesheet.transition=Object.assign({},this.stylesheet.transition,l),this.transition=this.stylesheet.transition,this}getTransition(){return Object.assign({},this.stylesheet.transition)}serialize(){this._checkLoaded();const l=this.getTerrain(),d=l&&this.terrain&&this.terrain.scope===this.scope?l:this.stylesheet.terrain;return a.dv({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,featuresets:this.stylesheet.featuresets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:d,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,indoor:this.stylesheet.indoor,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},v=>v!==void 0)}_updateFilteredLayers(l){for(const d of Object.values(this._mergedLayers))l(d)&&this._updateLayer(d)}_updateLayer(l){this._changes.updateLayer(l);const d=this.getLayerSourceCache(l),v=a.B(l.source,l.scope),T=this._changes.getUpdatedSourceCaches();l.source&&!T[v]&&d&&d.getSource().type!=="raster"&&(this._changes.updateSourceCache(v,"reload"),d.pause()),l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const d=R=>this._mergedLayers[R].is3D(!!this.terrain),v=this.order,T={},O=[];for(let R=v.length-1;R>=0;R--){const N=v[R];if(d(N)){T[N]=R;for(const q of l){const H=q[N];if(H)for(const re of H)O.push(re)}}}O.sort((R,N)=>N.intersectionZ-R.intersectionZ);const M=[];for(let R=v.length-1;R>=0;R--){const N=v[R];if(d(N))for(let q=O.length-1;q>=0;q--){const H=O[q].feature;if(H.layer&&T[H.layer.id]<R)break;M.push(H),O.pop()}else for(const q of l){const H=q[N];if(H)for(const re of H)M.push(re.feature)}}return M}queryRasterValue(l,d,v){const T=this.getOwnSource(l);return T?T.type!=="raster-array"?(this.fire(new a.y(new Error('queryRasterValue support only "raster-array" sources.'))),Promise.resolve(null)):T.queryRasterArrayValue(d,v):(this.fire(new a.y(new Error(`Source with id "${l}" does not exist in the style.`))),Promise.resolve(null))}queryRenderedFeatures(l,d,v){let T;d&&!Array.isArray(d)&&d.filter&&(this._validate(me,"queryRenderedFeatures.filter",d.filter,null,d),T=a.b6(d.filter));const O={},M=H=>{if(P_.has(H.type))return;const re=this.getOwnLayerSourceCache(H),ee=O[re.id]=O[re.id]||{sourceCache:re,layers:{},has3DLayers:!1};H.is3D(!!this.terrain)&&(ee.has3DLayers=!0),ee.layers[H.fqid]=ee.layers[H.fqid]||{styleLayer:H,targets:[]},ee.layers[H.fqid].targets.push({filter:T})};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new a.y(new Error("parameters.layers must be an Array."))),[];for(const H of d.layers){const re=this._layers[H];if(!re)return this.fire(new a.y(new Error(`The layer '${H}' does not exist in the map's style and cannot be queried for features.`))),[];M(re)}}else for(const H in this._layers)M(this._layers[H]);const R=this._queryRenderedFeatures(l,O,v),N=this._flattenAndSortRenderedFeatures(R),q=[];for(const H of N)a.dw(H.layer.id)===this.scope&&q.push(H);return q}queryRenderedFeatureset(l,d,v){let T;d&&!Array.isArray(d)&&d.filter&&(this._validate(me,"queryRenderedFeatures.filter",d.filter,null,d),T=a.b6(d.filter));const O="mock",M=[];if(d&&d.target)M.push(Object.assign({},d,{targetId:O,filter:T}));else{const H=this.getFeaturesetDescriptors();for(const re of H)M.push({targetId:O,filter:T,target:re});for(const{style:re}of this.fragments){const ee=re.getFeaturesetDescriptors();for(const oe of ee)M.push({targetId:O,filter:T,target:oe})}}const R=this.queryRenderedTargets(l,M,v),N=[],q=new Set;for(const H of R)for(const re of H.variants[O])Rp(re,H,q)||N.push(new a.dx(H,re));return N}queryRenderedTargets(l,d,v){const T={},O=(R,N,q,H)=>{const re=T[N.id]=T[N.id]||{sourceCache:N,layers:{},has3DLayers:!1};if(re.layers[R.fqid]=re.layers[R.fqid]||{styleLayer:R,targets:[]},R.is3D(!!this.terrain)&&(re.has3DLayers=!0),!H)return q.uniqueFeatureID=!1,void re.layers[R.fqid].targets.push(q);re.layers[R.fqid].targets.push(Object.assign({},q,{namespace:H.namespace,properties:H.properties,uniqueFeatureID:H.uniqueFeatureID}))};for(const R of d)if("featuresetId"in R.target){const{featuresetId:N,importId:q}=R.target,H=this.getFragmentStyle(q);if(!H||!H._featuresetSelectors)continue;const re=H._featuresetSelectors[N];if(!re){this.fire(new a.y(new Error(`The featureset '${N}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const ee of re){const oe=H.getOwnLayer(ee.layerId);oe&&!P_.has(oe.type)&&O(oe,H.getOwnLayerSourceCache(oe),R,ee)}}else if("layerId"in R.target){const{layerId:N}=R.target,q=this.getLayer(N);if(!q||P_.has(q.type))continue;O(q,this.getLayerSourceCache(q),R)}const M=this._queryRenderedFeatures(l,T,v);return this._flattenAndSortRenderedFeatures(M)}_queryRenderedFeatures(l,d,v){const T=[],O=!!this.map._showQueryGeometry,M=wi.createFromScreenPoints(l,v);for(const R in d){const N=Ec(M,d[R],this._availableImages,v,O,this.getActualScope());Object.keys(N).length&&T.push(N)}if(this.placement)for(const R in d){if(!d[R].sourceCache._onlySymbols)continue;const N=Wx(M.screenGeometry,d[R],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData,this.map.getWorldview());Object.keys(N).length&&T.push(N)}return T}querySourceFeatures(l,d){const v=d&&d.filter;v&&this._validate(me,"querySourceFeatures.filter",v,null,d);let T=[];const O=this.getOwnSourceCaches(l);for(const M of O)T=T.concat(m0(M,d));return T}addSourceType(l,d,v){return Us.getSourceType(l)?v(new Error(`A source type called "${l}" already exists.`)):(Us.setSourceType(l,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:d.workerSourceURL},v):v(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(l,d,v={}){this._checkLoaded();const T=this.light.getLight();let O=!1;for(const R in l)if(!a.by(l[R],T[R])){O=!0;break}if(!O)return;const M=this._getTransitionParameters();this.light.setLight(l,d,v),this.light.updateTransitions(M)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=a.o.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&a.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(l,d=1){if(this._checkLoaded(),!l)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),d===0&&delete this.terrain,l===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let v=l;const T=!("source"in l)||l.source==null;if(d===1){if(this.disableElevatedTerrain)return;if("source"in v&&typeof v.source=="object"){const R="terrain-dem-src";this.addSource(R,v.source),v=a.dp(v),v=Object.assign(v,{source:R})}const O=Object.assign({},v),M={};if(this.terrain&&T){O.source=this.terrain.get().source;const R=this.terrain?this.getFragmentStyle(this.terrain.scope):null;R&&(M.style=R.serialize())}if(this._validate(Sc,"terrain",O,M))return}if(!this.terrain||this.terrain.scope!==this.scope&&!T||this.terrain&&d!==this.terrain.drapeRenderMode){if(!v)return;this._createTerrain(v,d),this.fire(new a.z("data",{dataType:"style"}))}else{const O=this.terrain,M=O.get();for(const R of Object.keys(a.a6.terrain))!v.hasOwnProperty(R)&&a.a6.terrain[R].default&&(v[R]=a.a6.terrain[R].default);for(const R in l)if(!a.by(l[R],M[R])){O.set(l,this.options),this.stylesheet.terrain=l;const N=this._getTransitionParameters({duration:0});O.updateTransitions(N),this.fire(new a.z("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const d=this.fog=new Hn(l,this.map.transform,this.scope,this.options);this.stylesheet.fog=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}_createSnow(l){const d=this.snow=new _a(l,this.map.transform,this.scope,this.options);this.stylesheet.snow=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}_createRain(l){const d=this.rain=new ki(l,this.map.transform,this.scope,this.options);this.stylesheet.rain=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog;if(!a.by(d.get(),l)){d.set(l,this.options),this.stylesheet.fog=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}}else this._createFog(l);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(l){if(this._checkLoaded(),!l)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const d=this.snow;if(!a.by(d.get(),l)){d.set(l,this.options),this.stylesheet.snow=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}}else this._createSnow(l);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(l){if(this._checkLoaded(),!l)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const d=this.rain;if(!a.by(d.get(),l)){d.set(l,this.options),this.stylesheet.rain=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}}else this._createRain(l);this._markersNeedUpdate=!0}_reloadColorTheme(){const l=()=>{for(const T in this._layers)this._layers[T].lut=this._styleColorTheme.lut;for(const T in this._sourceCaches)this._sourceCaches[T].clearTiles()},d=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!d)return this._styleColorTheme.lut=null,void l();const v=this._evaluateColorThemeData(d);this._loadColorTheme(v).then(()=>{this.fire(new a.z("colorthemeset")),l()}).catch(T=>{a.w(`Couldn't set color theme: ${T}`)})}setColorTheme(l){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&a.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=l,this._reloadColorTheme()}setImportColorTheme(l,d){const v=this.getFragmentStyle(l);v&&(v._styleColorTheme.colorThemeOverride=d,v._reloadColorTheme())}_getTransitionParameters(l){return{now:a.o.now(),transition:Object.assign(this.transition,l)}}updateDrapeFirstLayers(){if(!this.terrain)return;const l=[],d=[];for(const v of this._mergedOrder)this.isLayerDraped(this._mergedLayers[v])?l.push(v):d.push(v);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...d)}_createTerrain(l,d){const v=this.terrain=new Nt(l,d,this.scope,this.options,this.map.getWorldview());d===1&&(this.stylesheet.terrain=l),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const T=this._getTransitionParameters({duration:0});v.updateTransitions(T)}_force3DLayerUpdate(){for(const l in this._layers){const d=this._layers[l];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const d=this._layers[l];d.type==="symbol"&&this._updateLayer(d)}}_validate(l,d,v,T,O={}){if(O&&O.validate===!1)return!1;const M=Object.assign({},this.serialize());return Cc(this,l.call(wl,Object.assign({key:d,style:M,value:v,styleSpec:a.a6},T)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.dy.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._mergedLayers)this._mergedLayers[l].setEventedParent(null);for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles(),this._mergedSourceCaches[l].setEventedParent(null);this.imageManager.removeScope(this.scope),this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.indoorManager.destroy(),this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this.modelManager.setEventedParent(null),this.modelManager.destroy(),this.dispatcher.remove())}clearSource(l){const d=this.getSourceCaches(l);for(const v of d)v.clearTiles()}clearSources(){for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles()}clearLayers(){for(const l in this._mergedLayers){const d=this._mergedLayers[l];d._clear&&d._clear()}}reloadSource(l){const d=this.getSourceCaches(l);for(const v of d)v.resume(),v.reload()}reloadSources(){for(const l of this.getSources())l.reload&&l.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(l=>{l.modelManager.reloadModels(l.scope)})}updateSources(l){let d;this.directionalLight&&(d=M_(this.directionalLight));const v=new Set,T=new Set;for(const O in this._mergedLayers){const M=this._mergedLayers[O];M.type==="building"&&v.add(M.source),M.hasElevation()&&!T.has(M.source)&&T.add(M.source)}for(const O in this._mergedSourceCaches){const M=this._mergedSourceCaches[O],R=T.has(M._source.id);v.has(M._source.id)&&(M._source.reparseOverscaled=!1),M.update(l,void 0,void 0,d,R)}}_generateCollisionBoxes(){for(const l in this._sourceCaches){const d=this._sourceCaches[l];d.resume(),d.reload()}}_handleLayerOrderChange(){this._requestFullLabelPlacement(),this.fire(new a.z("neworder"))}_requestFullLabelPlacement(){this.pauseablePlacement||(this.pauseablePlacement=new S0),this.pauseablePlacement.requestFullPlacement()}_setLabelPlacementStale(){this.placement&&this.placement.setStale()}_updatePlacement(l,d,v,T,O){this.pauseablePlacement||(this.pauseablePlacement=new S0);let M=!1,R=!1;const N={},q={};for(const ce of this._mergedOrder){const de=this._mergedLayers[ce];if(de.type!=="symbol")continue;const _e=a.B(de.source,de.scope);let Me=N[_e];if(!Me){const Ae=this.getLayerSourceCache(de);if(!Ae)continue;const We=Ae.getRenderableIds(!0).map($e=>Ae.getTileByID($e));q[_e]=We.slice(),Me=N[_e]=We.sort(($e,Ge)=>Ge.tileID.overscaledZ-$e.tileID.overscaledZ||($e.tileID.isLessThan(Ge.tileID)?-1:1))}const Ce=this.crossTileSymbolIndex.addLayer(de,Me,l.center.lng,l.projection);M=M||Ce}this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder);const H=!!(this.placement&&!l.equals(this.placement.transform)),re=!!(this.placement&&(this.placement.lastReplacementSourceUpdateTime!==0&&!O||this.placement.lastReplacementSourceUpdateTime!==O.updateTime)),ee=H||re||M,oe=(ee||this.pauseablePlacement.isStale())&&v===0,he=this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.o.now(),l.zoom)&&v!==0;if((this.pauseablePlacement.isFullPlacementRequested()||!this.pauseablePlacement.placement||oe||he)&&(this.pauseablePlacement=this.pauseablePlacement.startNewPlacement(l,this._mergedOrder,d,v,T,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null,this._buildingIndex)),this.pauseablePlacement.isDone()?ee&&v!==0&&this.pauseablePlacement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,N,q,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.o.now()),R=!0),M&&this.pauseablePlacement.setStale()),R||M){this._buildingIndex.onNewFrame(l.zoom);for(let ce=0;ce<this._mergedOrder.length;ce++){const de=this._mergedLayers[this._mergedOrder[ce]];if(de.type!=="symbol"||de.visibility==="none")continue;const _e=this.isLayerClipped(de);this.placement.updateLayerOpacities(de,N[a.B(de.source,de.scope)],ce,_e?O:null)}}return!this.pauseablePlacement.isDone()||this.placement.isStale()||this.placement.hasTransitions(a.o.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}addImport(l,d){this._checkLoaded();const v=this.stylesheet.imports=this.stylesheet.imports||[];if(v.findIndex(({id:O})=>O===l.id)!==-1)return void this.fire(new a.y(new Error(`Import with id '${l.id}' already exists in the map's style.`)));if(!d)return v.push(l),this._loadImports([l],!0);const T=v.findIndex(({id:O})=>O===d);return T===-1&&this.fire(new a.y(new Error(`Import with id "${d}" does not exist on this map.`))),this.stylesheet.imports=v.slice(0,T).concat(l).concat(v.slice(T)),this._loadImports([l],!0,d)}updateImport(l,d){this._checkLoaded();const v=this.stylesheet.imports||[],T=this.getImportIndex(l);return T===-1?this:typeof d=="string"?(this.setImportUrl(l,d),this):(d.url&&d.url!==v[T].url&&this.setImportUrl(l,d.url),a.by(d.config,v[T].config)||this.setImportConfig(l,d.config,d.data.schema),a.by(d.data,v[T].data)||this.setImportData(l,d.data),this)}moveImport(l,d){this._checkLoaded();let v=this.stylesheet.imports||[];const T=this.getImportIndex(l);if(T===-1)return this;const O=this.getImportIndex(d);if(O===-1)return this;const M=v[T],R=this.fragments[T];return v=v.filter(({id:N})=>N!==l),this.fragments=this.fragments.filter(({id:N})=>N!==l),this.stylesheet.imports=v.slice(0,O).concat(M).concat(v.slice(O)),this.fragments=this.fragments.slice(0,O).concat(R).concat(this.fragments.slice(O)),this.mergeLayers(),this}setImportUrl(l,d){this._checkLoaded();const v=this.stylesheet.imports||[],T=this.getImportIndex(l);if(T===-1)return this;v[T].url=d;const O=this.fragments[T];return O.style=this._createFragmentStyle(v[T]),O.style.on("style.import.load",()=>this.mergeAll()),O.style.loadURL(d),this}setImportData(l,d){this._checkLoaded();const v=this.getImportIndex(l),T=this.stylesheet.imports||[];return v===-1?this:d?(this.fragments[v].style.setState(d),this._reloadImports(),this):(delete T[v].data,this.setImportUrl(l,T[v].url))}setImportConfig(l,d,v){this._checkLoaded();const T=this.getImportIndex(l),O=this.stylesheet.imports||[];if(T===-1)return this;d?O[T].config=d:delete O[T].config;const M=this.fragments[T];v&&M.style.stylesheet&&(M.style.stylesheet.schema=v);const R=M.style.stylesheet&&M.style.stylesheet.schema;return M.config=d,M.style.updateConfig(d,R),this.updateConfigDependencies(),this}removeImport(l){this._checkLoaded();const d=this.stylesheet.imports||[],v=this.getImportIndex(l);v!==-1&&(d.splice(v,1),this.fragments[v].style._remove(),this.fragments.splice(v,1),this._reloadImports())}getImportIndex(l){const d=(this.stylesheet.imports||[]).findIndex(v=>v.id===l);return d===-1&&this.fire(new a.y(new Error(`Import '${l}' does not exist in the map's style and cannot be updated.`))),d}getLayer(l){return this._mergedLayers[l]}getSources(){const l=[];for(const d in this._mergedOtherSourceCaches){const v=this._mergedOtherSourceCaches[d];v&&l.push(v.getSource())}return l}getSource(l,d){const v=this.getSourceCache(l,d);return v&&v.getSource()}getLayerSource(l){const d=this.getLayerSourceCache(l);return d&&d.getSource()}getSourceCache(l,d){const v=a.B(l,d);return this._mergedOtherSourceCaches[v]}getLayerSourceCache(l){const d=a.B(l.source,l.scope);return l.type==="symbol"?this._mergedSymbolSourceCaches[d]:this._mergedOtherSourceCaches[d]}getSourceCaches(l){if(l==null)return Object.values(this._mergedSourceCaches);const d=[];return this._mergedOtherSourceCaches[l]&&d.push(this._mergedOtherSourceCaches[l]),this._mergedSymbolSourceCaches[l]&&d.push(this._mergedSymbolSourceCaches[l]),d}updateSourceCaches(){const l=this._changes.getUpdatedSourceCaches();for(const d in l){const v=l[d];v==="reload"?this.reloadSource(d):v==="clear"&&this.clearSource(d)}}updateLayers(l){const d=this._changes.getUpdatedPaintProperties();for(const v of d){const T=this.getLayer(v);T&&T.updateTransitions(l)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(l){this.stylesheet.glyphs=l,this.glyphManager.setURL(l)}getImages(l,d,v){this.imageManager.getImages(d.images,d.scope,v),this._updateTilesForChangedImages();const T=M=>{if(M){const R=d.images.map(N=>a.I.toString(N));M.setDependencies(d.tileID.key,d.type,R)}},O=a.B(d.source,d.scope);T(this._mergedOtherSourceCaches[O]),T(this._mergedSymbolSourceCaches[O]),d.images.some(M=>M.iconsetId)&&this.fire(new a.z("data",{dataType:"style"}))}rasterizeImages(l,d,v){this.imageManager.rasterizeImages(d,v)}getGlyphs(l,d,v){this.glyphManager.getGlyphs(d.stacks,v)}getResource(l,d,v){return a.dz(d,v)}getOwnSourceCache(l){return this._otherSourceCaches[l]}getOwnLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}getOwnSourceCaches(l){const d=[];return this._otherSourceCaches[l]&&d.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&d.push(this._symbolSourceCaches[l]),d}_isSourceCacheLoaded(l){const d=this.getOwnSourceCaches(l);return d.length===0?(this.fire(new a.y(new Error(`There is no source with ID '${l}'`))),!1):d.every(v=>v.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(l,d){if(!this._clipLayerPresent&&l.type!=="fill-extrusion"&&l.type!=="building")return!1;const v=l.type==="fill-extrusion"&&(l.sourceLayer==="building"||l.sourceLayer==="procedural_buildings"),T=l.type==="building";if(l.is3D(!!this.terrain)){if(v||T||d&&d.type==="batched-model"||l.type==="model")return!0}else if(l.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(l=>{l.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Us.getSourceType=function(y){return Nu[y]},Us.setSourceType=function(y,l){Nu[y]=l},Us.registerForPluginStateChange=a.dA;var ql=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,qp=`
#ifdef DUAL_SOURCE_BLENDING
layout(location=0,index=0) out vec4 glFragColor;layout(location=0,index=1) out vec4 glFragColorSrc1;
#else
layout(location=0) out vec4 glFragColor;
#endif
#ifdef USE_MRT1
layout(location=1) out vec4 out_Target1;
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb*col.a,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Ts=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifndef HAS_SHADER_STORAGE_BLOCK_material_buffer
#define GET_ATTRIBUTE_float(attrib,matInfo,attrib_id) attrib
#define GET_ATTRIBUTE_vec4(attrib,matInfo,attrib_id) attrib
#define GET_ATTRIBUTE_vec2(attrib,matInfo,attrib_id) attrib
#define DECLARE_MATERIAL_TABLE_INFO
#endif`,$u="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Og=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef CLIP_ZERO_TO_ONE
coord.z=-1.0+2.0*coord.z; 
#endif
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;
#ifdef CLIP_ZERO_TO_ONE
coord.z=-1.0+2.0*coord.z; 
#endif
int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;
#ifdef CLIP_ZERO_TO_ONE
coord.z=-1.0+2.0*coord.z; 
#endif
highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif`,Sd=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,$s=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;
#ifdef FLIP_Y
uv.y=1.0-uv.y;
#endif
highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Td=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Jt=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,k_=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif`,Hp=`#ifdef RENDER_SHADOWS
precision highp sampler2DShadow;uniform sampler2DShadow u_shadowmap_0;uniform sampler2DShadow u_shadowmap_1;uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;float shadow_sample(sampler2DShadow shadowmap,highp vec3 pos,highp float bias) {
#ifdef CLIP_ZERO_TO_ONE
highp vec3 coord=vec3(pos.xy*0.5+0.5,pos.z-bias);
#else
highp vec3 coord=vec3(pos.xy*0.5+0.5,pos.z*0.5+0.5-bias);
#endif
return texture(shadowmap,coord);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {light_view_pos0.xyz/=light_view_pos0.w;
#ifdef SHADOWS_SINGLE_CASCADE
vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}return shadow_sample(u_shadowmap_0,light_view_pos0.xyz,bias);
#else
light_view_pos1.xyz/=light_view_pos1.w;vec4 abs_bounds=abs(vec4(light_view_pos0.xy,light_view_pos1.xy));if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {return shadow_sample(u_shadowmap_0,light_view_pos0.xyz,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}float occlusion1=shadow_sample(u_shadowmap_1,light_view_pos1.xyz,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Mc=/#include\s+"([^"]+)"/g,Dc=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g,al=/\b[A-Za-z_][A-Za-z0-9_]*\b/g,_f=new Set(["ifdef","ifndef","elif","if","defined"]),ol=new Set;Wo(ql,ol),Wo(Ts,ol),Wo(qp,ol);const vf={"_prelude_fog.vertex.glsl":Sd,"_prelude_terrain.vertex.glsl":Og,"_prelude_shadow.vertex.glsl":k_,"_prelude_material_table.vertex.glsl":`#ifdef HAS_SHADER_STORAGE_BLOCK_material_buffer
#define MATERIAL_TABLE_DEBUG 0
uniform int u_material_offset;uniform int u_vertex_offset;layout(std140,binding=0)readonly buffer material_buffer{uvec4 material_data[];};struct MaterialInfo{uint dataOffset;
#if MATERIAL_TABLE_DEBUG
vec4 colorDebug;
#endif
};uint read_buf_no_offset(uint iDword) {return material_data[iDword/4u][iDword % 4u];}uint read_buf(uint iDword) {iDword+=uint(u_material_offset/4);return read_buf_no_offset(iDword);}float read_buf_float(uint iDword){return uintBitsToFloat(read_buf(iDword));}uint read_buf_uint8(uint iDword,uint iUint8){uint dwordOffset=iDword+(iUint8/4u);uint byteOffset=iUint8 & 3u;uint bitOffset=8u*byteOffset;uint mask=0xffu << bitOffset;uint dwordVal=read_buf(dwordOffset);return (dwordVal & mask) >> bitOffset;}uint read_buf_uint16(uint iDword,uint iUint16){uint dwordOffset=iDword+(iUint16 >> 1u);uint bitOffset=(iUint16 & 1u)*16u;uint mask=0xffffu << bitOffset;uint dwordVal=read_buf(dwordOffset);return (dwordVal & mask) >> bitOffset;}uint nrDwordsForVertexIdEntries(uint nrMaterialLookupEntries) {return nrMaterialLookupEntries;}uint nrDwordsForMaterialIdEntries(uint nrMaterialLookupEntries) {return (nrMaterialLookupEntries*2u+3u)/4u;}uint findRangeBinarySearch(uint vertexId,uint numRanges,uint dwordOffset) {uint left=0u;uint right=numRanges-1u;for (uint i=0u; i < 16u; i++) { 
if (left > right) {break;}uint mid=(left+right)/2u;uint start=read_buf(dwordOffset+mid);uint nextStart=(mid+1u < numRanges) ? read_buf(dwordOffset+mid+1u) : 0xffffffffu;if (vertexId >=start && vertexId < nextStart) {return mid;} else if (vertexId < start) {if (mid==0u) {break;}right=mid-1u;} else {left=mid+1u;}}return 0u; 
}uint readVertexId(uint dwordOffset,uint iMaterialLookupEntry) {return read_buf(dwordOffset+iMaterialLookupEntry);}uint findRange(uint vertexId,uint numRanges,uint dwordOffset) {uint iRange;if(numRanges <=64u){uint vertexBegin;for(iRange=0u; iRange < numRanges;++iRange) {vertexBegin=readVertexId(dwordOffset,iRange);if(vertexBegin > vertexId) {break;}}iRange=iRange==0u? 0u : iRange-1u;} else { 
iRange=findRangeBinarySearch(vertexId,numRanges,dwordOffset);}return iRange;}MaterialInfo read_material_info(uint vertex_id) {MaterialInfo info;
#if MATERIAL_TABLE_DEBUG
const vec4 red=vec4(1.0,0.0,0.0,1.0);const vec4 orange=vec4(1.0,0.5,0.0,1.0);const vec4 yellow=vec4(1.0,1.0,0.0,1.0);const vec4 green=vec4(0.0,1.0,0.0,1.0);const vec4 indigo=vec4(0.294,0.0,0.510,1.0);const vec4 blue=vec4(0.0,0.0,1.0,1.0);const vec4 purple=vec4(0.5,0.0,0.5,1.0);const vec4 pink=vec4(1.0,0.0,1.0,1.0);info.colorDebug=green;
#endif
uint offset=0u;
#if MATERIAL_TABLE_DEBUG
bool keepFinding=true;uint magic=read_buf(offset);if(magic !=0xCAFEBABEu) {info.colorDebug=red;keepFinding=false;return info;}
#endif
offset++;
#if MATERIAL_TABLE_DEBUG
uint nrMaterials=read_buf(offset);uint nrVertices=read_buf(offset+1u);if(keepFinding && vertex_id >=nrVertices) {info.colorDebug=red;keepFinding=false;}
#endif
offset+=2u;uint nrMaterialLookupEntries=read_buf(offset++);uint perMaterialEntrySizeDwords=read_buf(offset++);
#if MATERIAL_TABLE_DEBUG
if(keepFinding && perMaterialEntrySizeDwords !=1u) {info.colorDebug=red;keepFinding=false;}
#endif
uint iMaterialLookup=findRange(vertex_id,nrMaterialLookupEntries,offset);
#if MATERIAL_TABLE_DEBUG
if(keepFinding)
{uint vertexBeginCheck=readVertexId(offset,iMaterialLookup);if(vertexBeginCheck > vertex_id) {info.colorDebug=red;keepFinding=false;}if(iMaterialLookup < nrMaterialLookupEntries-1u) {uint vertexEndCheck=readVertexId(offset,iMaterialLookup+1u);if(vertexEndCheck <=vertex_id) {info.colorDebug=red;keepFinding=false;}}}
#endif
offset+=nrDwordsForVertexIdEntries(nrMaterialLookupEntries);uint materialId=iMaterialLookup;
#if MATERIAL_TABLE_DEBUG
if(keepFinding) {if(materialId >=nrMaterialLookupEntries) {info.colorDebug=red;}}
#endif
info.dataOffset=offset+materialId*perMaterialEntrySizeDwords;return info;}uint get_data_location(const MaterialInfo matInfo,uint attribOffsetBytes)
{uint attribFieldOffsetDwords=attribOffsetBytes/4u;return matInfo.dataOffset+attribFieldOffsetDwords;}vec4 read_material_vec4(const MaterialInfo matInfo,uint attribOffsetBytes){uint loc=get_data_location(matInfo,attribOffsetBytes);return vec4(read_buf_float(loc),read_buf_float(loc+1u),read_buf_float(loc+2u),read_buf_float(loc+3u));}vec2 read_material_vec2(const MaterialInfo matInfo,uint attribOffsetBytes){uint loc=get_data_location(matInfo,attribOffsetBytes);return vec2(read_buf_float(loc),read_buf_float(loc+1u));}float read_material_float(const MaterialInfo matInfo,uint attribOffsetBytes){uint loc=get_data_location(matInfo,attribOffsetBytes);return read_buf_float(loc);}
#define GET_ATTRIBUTE_float(attrib,matInfo,attrib_offset) read_material_float(matInfo,attrib_offset)
#define GET_ATTRIBUTE_vec4(attrib,matInfo,attrib_offset) read_material_vec4(matInfo,attrib_offset)
#define GET_ATTRIBUTE_vec2(attrib,matInfo,attrib_offset) read_material_vec2(matInfo,attrib_offset)
#define DECLARE_MATERIAL_TABLE_INFO MaterialInfo materialInfo=read_material_info(uint(gl_VertexID));
#define DECLARE_MATERIAL_TABLE_INFO_DEBUG(dbgColor) MaterialInfo materialInfo=read_material_info(uint(gl_VertexID)); dbgColor=materialInfo.colorDebug;
#endif`,"_prelude_fog.fragment.glsl":$s,"_prelude_shadow.fragment.glsl":Hp,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif`,"_prelude_raster_array.glsl":Td,"_prelude_raster_particle.glsl":Jt},Ed={};xr("",Og),xr($s,Sd),xr(Hp,k_),xr(Td,""),xr(Jt,"");const fh=xr(qp,Ts),Gp=ql,r1=[`
#if defined(GL_EXT_blend_func_extended) && defined(DUAL_SOURCE_BLENDING)
#extension GL_EXT_blend_func_extended : require
#endif`,"precision mediump float;",Gp,fh.fragmentSource].join(`
`),L_=["precision highp float;",Gp,fh.vertexSource].join(`
`);var z_={background:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;uniform mediump float u_emissive_strength;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;uniform mediump float u_emissive_strength;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),building:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
const float window_depth=0.5;const float ao_radius=0.2;in vec4 v_color;in highp vec3 v_normal;in highp vec3 v_pos;
#ifdef BUILDING_FAUX_FACADE
in lowp float v_faux_facade;in highp float v_faux_facade_ed;in highp vec2 v_faux_facade_window;in highp vec2 v_faux_facade_floor;in highp vec2 v_faux_facade_range;in highp float v_aspect;in highp vec3 v_tbn_0;in highp vec3 v_tbn_1;in highp vec3 v_tbn_2;in highp vec4 v_faux_color_emissive;uniform float u_faux_facade_ao_intensity;
#endif
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
#ifdef FLOOD_LIGHT
in highp float v_flood_radius;in float v_has_flood_light;
#endif
uniform lowp float u_opacity;uniform vec3 u_camera_pos;uniform highp float u_tile_to_meter;uniform float u_facade_emissive_chance;uniform vec3 u_flood_light_color;uniform float u_flood_light_intensity;vec3 linearTosRGB(in vec3 color) {return pow(color,vec3(1./2.2));}
#ifdef BUILDING_FAUX_FACADE
float hash12(in vec2 p) {vec3 p3 =fract(vec3(p.xyx)*0.1031);p3+=dot(p3,p3.yzx+33.33);return fract((p3.x+p3.y)*p3.z);}float min3(in vec3 v) {return min(min(v.x,v.y),v.z);}vec2 get_uv_mask_id(in vec2 q,out float mask,out vec2 id) {vec2 p=q;mask=step(v_faux_facade_range.x,p.y)*step(p.y,v_faux_facade_range.y);p.y=p.y-v_faux_facade_range.x;vec2 uv=modf(p/v_faux_facade_floor,id);vec4 d=(v_faux_facade_floor.xyxy+vec4(-v_faux_facade_window,v_faux_facade_window))*0.5;vec4 edge=d/v_faux_facade_floor.xyxy;vec2 m=step(edge.xy,uv)*step(uv,edge.zw);mask*=m.x*m.y;uv-=vec2(0.5);uv*=vec2(0.5)/(vec2(0.5)-edge.xy);uv+=vec2(0.5);return uv;}float ray_unit_box(in vec3 ray_o,in vec3 ray_d,in vec3 bmin,in vec3 bmax) {vec3 planes=mix(bmin,bmax,step(0.0,ray_d));vec3 t=(planes-ray_o)/ray_d;return min3(t);}float get_emissive(in vec2 id) {if (u_facade_emissive_chance > 0.0) {return (step(hash12(id),u_facade_emissive_chance)+0.05)*v_faux_color_emissive.a;}return 0.0;}vec3 get_shade_info(in vec3 v,in vec3 v_normalized,in vec3 color,in vec2 id,in mat3 tbn,inout vec3 out_normal,inout float out_emissive) {vec3 out_color=color;vec3 abs_v=abs(v_normalized);bool x_major=abs_v.x >=abs_v.y && abs_v.x >=abs_v.z;bool y_major=abs_v.y >=abs_v.x && abs_v.y >=abs_v.z;bool z_major=abs_v.z >=abs_v.x && abs_v.z >=abs_v.y;
#if 0
if (x_major) {out_color=v.x > 0.0 ? vec3(1.0,0.0,0.0) : vec3(0.0,1.0,1.0);} else if (y_major) {out_color=v.y > 0.0 ? vec3(0.0,1.0,0.0) : vec3(1.0,0.0,1.0);} else if (z_major) {out_color=v.z > 0.0 ? vec3(0.0,0.0,1.0) : vec3(1.0,1.0,0.0);}out_emissive=1.0;
#else
if (x_major) {out_normal=sign(v.x)*tbn[0];} else if (y_major) {out_normal=vec3(0.0,0.0,-sign(v.y));} else if (z_major) {out_color=v_faux_color_emissive.rgb;out_emissive=v.z <=0.0 ? get_emissive(id) : out_emissive;}float ao=1.0;if (u_faux_facade_ao_intensity > 0.0) {vec4 ao_range=v_faux_facade_window.xxyy*0.5-vec4(0,ao_radius,0,ao_radius);vec2 ao_range_z=vec2(window_depth*0.5)-vec2(0.0,ao_radius);if (x_major || y_major) {ao*=smoothstep(-ao_range_z.x,-ao_range_z.y,v.z);} else if (z_major) {ao*=smoothstep(-ao_range.x,-ao_range.y,v.x)*(1.0-smoothstep(ao_range.y,ao_range.x,v.x));ao*=smoothstep(-ao_range.z,-ao_range.w,v.y)*(1.0-smoothstep(ao_range.w,ao_range.z,v.y));}ao=mix(1.0,min(1.0,ao+0.25),u_faux_facade_ao_intensity);}out_color*=ao;
#endif
return out_color;}
#endif
vec3 apply_lighting_linear(in vec3 color,in vec3 normal,in float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return color*(ambient_contrib+directional_contrib);}void main() {vec3 normal=normalize(v_normal);vec3 base_color=v_color.rgb;float emissive=v_color.a;
#ifdef BUILDING_FAUX_FACADE
if (v_faux_facade > 0.0) {mat3 tbn=mat3(v_tbn_0,v_tbn_1,v_tbn_2);vec3 v=vec3(v_pos.xy,v_pos.z/u_tile_to_meter)-u_camera_pos;vec3 view_tangent=transpose(tbn)*v;vec2 q=vec2(v_faux_facade_ed,v_pos.z);float mask=0.0;vec2 id=vec2(0.0);vec2 uv=get_uv_mask_id(q,mask,id);uv*=v_faux_facade_window;vec3 bmin=vec3(0.0,0.0,-window_depth);vec3 bmax=bmin+vec3(v_faux_facade_window,window_depth);vec3 ray_o=vec3(uv,0.0);vec3 ray_d=normalize(view_tangent);float t_min=ray_unit_box(ray_o,ray_d,bmin,bmax);vec3 hit=ray_o+t_min*ray_d;vec3 r=vec3(v_faux_facade_window,-window_depth);hit-=r*0.5;vec3 normalized=hit/r;vec3 out_normal=normal;float out_emissive=emissive;vec3 room_color=get_shade_info(hit,normalized,base_color,id,tbn,out_normal,out_emissive);base_color=mix(base_color,room_color,mask);normal=mix(normal,out_normal,mask);emissive=mix(emissive,out_emissive,mask);}
#endif
vec4 color=vec4(base_color,1.0);vec3 xy_flipped_normal=vec3(-normal.xy,normal.z);float shadowed_lighting_factor=0.0;
#ifdef RENDER_SHADOWS
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(xy_flipped_normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(xy_flipped_normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
#else
shadowed_lighting_factor=dot(xy_flipped_normal,u_lighting_directional_dir);
#endif
color.rgb=apply_lighting_linear(color.rgb,xy_flipped_normal,shadowed_lighting_factor);color.rgb=linearTosRGB(color.rgb);
#ifdef FLOOD_LIGHT
float flood_radiance=(1.0-min(v_pos.z/v_flood_radius,1.0))*u_flood_light_intensity*v_has_flood_light;color.rgb=mix(color.rgb,u_flood_light_color,flood_radiance);
#endif
color.rgb=mix(color.rgb,linearTosRGB(base_color.rgb),emissive);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,v_pos.z));
#endif
color*=u_opacity;
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_pos.z);
#endif
#ifdef FEATURE_CUTOUT
color=apply_feature_cutout(color,gl_FragCoord);
#endif
glFragColor=color; 
#ifdef DEBUG_SHOW_NORMALS
color.rgb=xy_flipped_normal*0.5+vec3(0.5,0.5,0.5);color.a=1.0;glFragColor=color;
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;in vec3 a_normal_3;in vec3 a_centroid_3;in float a_flood_light_wall_radius_1i16;in vec4 a_faux_facade_data;in vec2 a_faux_facade_vertical_range;uniform mat4 u_matrix;uniform mat4 u_normal_matrix;uniform highp float u_tile_to_meter;out vec4 v_color;out vec3 v_normal;out highp vec3 v_pos;
#ifdef BUILDING_FAUX_FACADE
out lowp float v_faux_facade;out highp float v_faux_facade_ed;out highp vec2 v_faux_facade_window;out highp vec2 v_faux_facade_floor;out highp vec2 v_faux_facade_range;out highp float v_aspect;out highp vec3 v_tbn_0;out highp vec3 v_tbn_1;out highp vec3 v_tbn_2;out highp vec4 v_faux_color_emissive;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#ifdef FLOOD_LIGHT
out highp float v_flood_radius;out float v_has_flood_light;
#endif
const float MAX_UINT_16=65535.0;const float MAX_INT_16=32767.0;const float MAX_UINT_8=255.0;const float TWO_POW_8=256.0;const float FLOOD_LIGHT_MAX_RADIUS_METER=2048.0;vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#ifdef BUILDING_FAUX_FACADE
mat3 get_tbn(in vec3 normal) {const vec3 bitangent=vec3(0.0,0.0,1.0);vec3 tangent=normalize(vec3(normal.y,-normal.x,0.0));return mat3(tangent,bitangent,normal);}
#endif
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 part_color_emissive
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 faux_facade_color_emissive
void main() {
#pragma mapbox: initialize-attribute-custom highp vec2 part_color_emissive
#pragma mapbox: initialize-attribute-custom highp vec2 faux_facade_color_emissive
#ifdef FLOOD_LIGHT
v_flood_radius=(a_flood_light_wall_radius_1i16/MAX_INT_16*FLOOD_LIGHT_MAX_RADIUS_METER);v_has_flood_light=step(0.0,v_flood_radius);
#endif
vec4 color_emissive=decode_color(part_color_emissive);v_color=vec4(sRGBToLinear(color_emissive.rgb),color_emissive.a);vec3 a_normal_3f=a_normal_3/MAX_INT_16;v_normal=vec3(u_normal_matrix*vec4(a_normal_3f,0.0));float hidden=0.0;float depth_offset=0.0;
#ifdef BUILDING_FAUX_FACADE
v_faux_facade=a_faux_facade_data.x;if (v_faux_facade > 0.0) {v_faux_facade_ed=a_faux_facade_data.x *u_tile_to_meter;float window_x_perc=floor(a_faux_facade_data.y/TWO_POW_8);float window_y_perc=a_faux_facade_data.y-TWO_POW_8*window_x_perc;vec2 window_perc=vec2(window_x_perc,window_y_perc)/MAX_UINT_8;v_faux_facade_floor=(a_faux_facade_data.zw/MAX_UINT_16*EXTENT)*u_tile_to_meter;v_faux_facade_window=window_perc*v_faux_facade_floor;v_faux_facade_range=(a_faux_facade_vertical_range/MAX_UINT_16*EXTENT)*u_tile_to_meter;v_aspect=v_faux_facade_window.x/v_faux_facade_window.y;mat3 tbn=get_tbn(normalize(v_normal));v_tbn_0=tbn[0];v_tbn_1=tbn[1];v_tbn_2=tbn[2];v_faux_color_emissive=decode_color(faux_facade_color_emissive);v_faux_color_emissive.rgb=sRGBToLinear(v_faux_color_emissive.rgb);float height=a_centroid_3.z;depth_offset=min(1000.0,height)*0.0000002;}
#endif
v_pos=a_pos_3f;
#ifdef RENDER_CUTOFF
vec4 ground=u_matrix*vec4(a_centroid_3,1.0);v_cutoff_opacity=cutoff_opacity(u_cutoff_params,ground.z);hidden=float(v_cutoff_opacity==0.0);v_pos.z*=v_cutoff_opacity;
#endif
#ifdef RENDER_SHADOWS
vec3 shadow_pos=v_pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset_model(v_normal);shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1.0);
#endif
#ifdef FOG
v_fog_pos=fog_position(v_pos);
#endif
gl_Position=mix(u_matrix*vec4(v_pos,1),AWAY,hidden);gl_Position.z-=depth_offset*gl_Position.w;}`),buildingBloom:xr(`in vec4 v_color_emissive;
#pragma mapbox: define-attribute highp vec4 bloom_attenuation
#pragma mapbox: initialize-attribute highp vec4 bloom_attenuation
float saturate(float val) {return clamp(val,0.0,1.0);}void main() {float emission=v_color_emissive.a;float opacity=1.0;
#ifdef HAS_ATTRIBUTE_a_bloom_attenuation
float distance=length(vec2(1.3*max(0.0,abs(bloom_attenuation.x)-bloom_attenuation.z),bloom_attenuation.y));distance+= mix(0.5,0.0,clamp(emission-1.0,0.0,1.0));opacity*=saturate(1.0-distance*distance);
#endif
#ifdef RENDER_CUTOFF
opacity*=v_cutoff_opacity;
#endif
glFragColor=vec4(v_color_emissive.rgb,1.0)*opacity;}`,`in vec3 a_pos_3f;
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 part_color_emissive
#pragma mapbox: define-attribute highp vec4 bloom_attenuation
out vec4 v_color_emissive;uniform mat4 u_matrix;vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute-custom highp vec2 part_color_emissive
#pragma mapbox: initialize-attribute highp vec4 bloom_attenuation
#ifdef HAS_ATTRIBUTE_a_part_color_emissive
vec4 color_emissive=decode_color(part_color_emissive);float part_emissive=color_emissive.a*5.0;v_color_emissive=vec4(sRGBToLinear(color_emissive.rgb),part_emissive);
#else
v_color_emissive=vec4(1.0);
#endif
gl_Position=u_matrix*vec4(a_pos_3f,1.0);
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),buildingDepth:xr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,"in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;void main() {gl_Position=u_matrix*vec4(a_pos_3f,1.0);v_depth=gl_Position.z/gl_Position.w;}"),circle:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:xr("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:xr(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:xr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:xr("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform float u_zoom_transition;
#endif
out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec3 proj_pos=a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation);
#ifdef PROJECTION_GLOBE_VIEW
#ifndef PROJECTED_POS_ON_VIEWPORT
vec3 globe_pos=proj_pos;vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,a_anchor_pos,u_tile_id,u_merc_center);proj_pos=mix_globe_mercator(globe_pos,mercator_pos,u_zoom_transition);
#endif
#endif
vec4 projectedPoint=u_matrix*vec4(proj_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:xr("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:xr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:xr(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:xr(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#else
#ifdef FEATURE_CUTOUT
apply_feature_cutout(vec4(0.0,0.0,0.0,1.0),gl_FragCoord);
#endif
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}vec3 compute_view_dependent_emissive_color(float ndotl,float emissive_strength,vec3 color)
{color=sRGBToLinear(color);color=color*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);color=linearTosRGB(color.rgb);return color;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 structure_color
void main() {
#pragma mapbox: initialize highp vec4 structure_color
vec3 color=structure_color.xyz;
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);vec3 transformed_normal=vec3(-normal.xy,normal.z);float ndotl=calculate_NdotL(transformed_normal);float emissive_strength=u_emissive_strength;emissive_strength=0.0;vec3 emissive_color=compute_view_dependent_emissive_color(ndotl,emissive_strength,color.xyz);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,transformed_normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,transformed_normal);
#endif
color=mix(color,emissive_color,emissive_strength);if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
#pragma mapbox: define highp vec4 structure_color
void main() {
#pragma mapbox: initialize highp vec4 structure_color
v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(-v_normal.xy,v_normal.z));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color;
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;v_road_z_offset=z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef FLIP_Y
v_pos=(vec2(gl_Position.x,-gl_Position.y)/gl_Position.w+1.0)/2.0*u_world;
#else
v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#endif
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
uniform float u_emissive_strength;
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef APPLY_LUT_ON_GPU
out_color=applyLUT(u_lutTexture,out_color);
#endif
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FLIP_Y
v_pos_world=(vec2(gl_Position.x,-gl_Position.y)/gl_Position.w+1.0)/2.0*u_world;
#else
v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#endif
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef APPLY_LUT_ON_GPU
out_color=applyLUT(u_lutTexture,out_color);
#endif
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;v_road_z_offset=z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
#ifdef FEATURE_CUTOUT
color=apply_feature_cutout(color,gl_FragCoord);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_material_table.vertex.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {DECLARE_MATERIAL_TABLE_INFO
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);
#ifdef CLIP_ZERO_TO_ONE
cutoff=cutoff_opacity(u_cutoff_params,ground.z*2.0-ground.w);
#else
cutoff=cutoff_opacity(u_cutoff_params,ground.z);
#endif
if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:xr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_material_table.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {DECLARE_MATERIAL_TABLE_INFO
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef APPLY_LUT_ON_GPU
out_color=applyLUT(u_lutTexture,out_color);
#endif
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_material_table.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {DECLARE_MATERIAL_TABLE_INFO
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:xr(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:xr(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
#ifdef USE_MRT1
out_Target1=vec4(1.0-texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size)).a,0.0,0.0,0.0);
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:xr(`precision highp float;uniform highp sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform highp vec2 u_trim_gradient_mix_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef VARIABLE_LINE_WIDTH
in float stub_side;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float side_z_offset
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
#pragma mapbox: define lowp float emissive_strength
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float side_z_offset
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
#pragma mapbox: initialize lowp float emissive_strength
float dist=length(v_normal)*v_width2.s;
#ifdef VARIABLE_LINE_WIDTH
blur=mix(blur,0.0,stub_side);
#endif
float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef VARIABLE_LINE_WIDTH
alpha=mix(alpha,1.0,stub_side);
#endif
alpha=side_z_offset > 0.0 ? 1.0-alpha : alpha;
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);highp float gradient_trim_color_mix_factor=0.0;
#ifdef RENDER_LINE_GRADIENT
gradient_trim_color_mix_factor=smoothstep(u_trim_gradient_mix_range.x,u_trim_gradient_mix_range.y,line_progress);
#endif
highp vec4 trim_color=mix(u_trim_color,out_color,gradient_trim_color_mix_factor);out_color=mix(u_trim_gradient_mix_range.x < 1.0 ? color : out_color,trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
#ifndef VARIABLE_LINE_WIDTH
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color;
#ifdef DUAL_SOURCE_BLENDING
glFragColorSrc1=vec4(vec3(0.0),emissive_strength);
#else
#ifdef USE_MRT1
out_Target1=vec4(emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef VARIABLE_LINE_WIDTH
out float stub_side;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float side_z_offset
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float side_z_offset
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
#pragma mapbox: initialize lowp float emissive_strength
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;offset=-1.0*offset*u_width_scale;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
bool left=normal.y==1.0;float left_width=a_z_offset_width.y;float right_width=a_z_offset_width.z;halfwidth=(u_width_scale*(left ? left_width : right_width))/2.0;a_z_offset+=left ? side_z_offset : 0.0;v_normal=side_z_offset > 0.0 && left ? vec2(0.0) : v_normal;offset=border_width > 0.0 ? (left_width+right_width)*u_width_scale*0.5 : offset;halfwidth=border_width > 0.0 ? border_width*u_width_scale*0.5 : halfwidth;bool zero_right_width=border_width==0.0 && right_width==0.0;stub_side=zero_right_width ?-normal.y : 0.0;v_normal=!left && zero_right_width ? vec2(0.0) : v_normal;ANTIALIASING=!left && zero_right_width ? 0.0 : ANTIALIASING;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float epsilon=0.0001;float extrude_length_without_perspective=max(length(dist),epsilon);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),epsilon);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef LINE_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize lowp float emissive_strength
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
#ifdef LINE_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl*texel_size-texel_size,pattern_b_br*texel_size+texel_size,vec2(x,y));vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);color=color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef DUAL_SOURCE_BLENDING
glFragColorSrc1=vec4(vec3(0.0),emissive_strength);
#else
#ifdef USE_MRT1
out_Target1=vec4(emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize lowp float emissive_strength
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
#ifdef USE_MRT1
out_Target1=vec4(u_emissive_strength*glFragColor.a,0.0,0.0,glFragColor.a);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),1.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:xr("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:xr("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:xr(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:xr(`#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#else
#ifdef RENDER_SHADOWS
in highp float v_z_offset;
#endif
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef APPLY_LUT_ON_GPU
out_color=applyLUT(u_lutTexture,out_color);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef TERRAIN
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#else
out_color.rgb*=mix(v_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#endif
#endif
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
#ifdef FEATURE_CUTOUT
out_color=apply_feature_cutout(out_color,gl_FragCoord);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#define USING_APPEARANCE 1.0
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef ELEVATED_ROADS
in vec3 a_x_axis;in vec3 a_y_axis;uniform float u_normal_scale;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#else
#ifdef RENDER_SHADOWS
out highp float v_z_offset;
#endif
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float a_size_max= floor(a_size[1]*0.5);float a_apperance=a_size[1]-2.0*a_size_max;vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (a_apperance==USING_APPEARANCE) {size=a_size_max/128.0;} else if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size_max,u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+z_offset : 0.0;
#else
z+=u_pitch_with_map ? z_offset : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
#ifdef Z_TEST_OCCLUSION
out_fade_opacity*=occlusion_opacity;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
#ifdef ELEVATED_ROADS
vec3 xAxis=vec3(a_x_axis.xy,a_x_axis.z*u_normal_scale);vec3 yAxis=vec3(a_y_axis.xy,a_y_axis.z*u_normal_scale);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
pos=vec3(projected_pos.xy/projected_pos.w+offset,z);
#endif
#endif
gl_Position=mix(u_coord_matrix*vec4(pos,1.0),AWAY,hidden);float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef RENDER_SHADOWS
vec4 shd_pos=u_inv_matrix*vec4(pos,1.0);vec3 shd_pos0=shd_pos.xyz;vec3 shd_pos1=shd_pos.xyz;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#else
#ifdef RENDER_SHADOWS
v_z_offset=e;
#endif
#endif
}`),terrainRaster:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
uniform sampler2D u_image1;uniform float u_emissive_texture_available;
#endif
in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
float emissive_strength=u_emissive_texture_available > 0.5 ? texture(u_image1,v_pos0).r : image_color.a;vec3 unlit_base=image_color.rgb*(1.0-emissive_strength);vec3 emissive_base=image_color.rgb*emissive_strength;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
float emissive_strength=u_emissive_texture_available > 0.5 ? texture(u_image1,v_pos0).r : image_color.a;color.rgb=mix(color.rgb,image_color.rgb,emissive_strength);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:xr("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:xr(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,$u),skyboxGradient:xr(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,$u),skyboxCapture:xr(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
uniform sampler2D u_image1;uniform float u_emissive_texture_available;
#endif
uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;
#ifdef FLIP_Y
uv.y=1.0-uv.y;
#endif
highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
float emissive_strength=u_emissive_texture_available > 0.5 ? texture(u_image1,v_pos0).r : raster.a;raster=apply_lighting_with_emission_ground(raster,emissive_strength);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
float emissive_strength=u_emissive_texture_available > 0.5 ? texture(u_image1,v_pos0).r : color.a;color=apply_lighting_with_emission_ground(color,emissive_strength);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:xr(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_atmosphere_fog_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_atmosphere_fog_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_atmosphere_fog_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:xr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;
#ifdef DITHERED_DISCARD
uniform float u_dithered_discard_threshold;
#endif
uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef FLIP_Y
coord.y=1.0-coord.y;
#endif
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;
#ifdef FLIP_Y
T=-T;B=-B;
#endif
highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));
#ifdef FLIP_Y
n=normalize(cross(fdx,fdy));
#else
n=normalize(cross(fdx,fdy))*-1.0;
#endif
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef DITHERED_DISCARD
if (abs(u_dithered_discard_threshold) < 1.0) {float ditherValue=fract(52.9829189*fract(0.06711056*gl_FragCoord.x+0.00583715*gl_FragCoord.y));float compareValue=mix(1.0-ditherValue,ditherValue,step(0.0,u_dithered_discard_threshold));if (abs(u_dithered_discard_threshold) < compareValue) {discard;}}
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
#ifdef FEATURE_CUTOUT
finalColor=apply_feature_cutout(finalColor,gl_FragCoord);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#ifdef CLIP_ZERO_TO_ONE
v_depth=-1.0+2.0*v_depth; 
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:xr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:xr(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:xr("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:xr("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:xr("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:xr("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Wo(y,l){const d=y.split(`
`);for(let v of d){if(v=v.trimStart(),v[0]!=="#"||!v.includes("if")||v.startsWith("#endif"))continue;const T=v.match(al);if(T)for(const O of T)_f.has(O)||l.add(O)}}function xr(y,l){const d=new Set,v=[],T=[];y=y.replace(Mc,(M,R)=>(T.push(R),"")),l=l.replace(Mc,(M,R)=>(v.push(R),""));let O=new Set(ol);Wo(y,O),Wo(l,O);for(const M of[...v,...T])Ed[M]||(Ed[M]=new Set,Wo(vf[M],Ed[M])),O=new Set([...O,...Ed[M]]);return{fragmentSource:y=y.replace(Dc,(M,R,N,q,H)=>(d.add(H),R==="define"?`
#ifndef HAS_UNIFORM_u_${H}
in ${N} ${q} ${H};
#else
uniform ${N} ${q} u_${H};
#endif
`:R==="initialize"?`
#ifdef HAS_UNIFORM_u_${H}
    ${N} ${q} ${H} = u_${H};
#endif
`:R==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${H}
    in ${N} ${q} ${H};
#endif
`:R==="initialize-attribute"?"":void 0)),vertexSource:l=l.replace(Dc,(M,R,N,q,H)=>{const re=`MATERIAL_ATTRIBUTE_OFFSET_${H}`,ee=q==="float"?"vec2":q,oe=`GET_ATTRIBUTE_${ee}(a_${H}, materialInfo, ${re})`,he=H.match(/color/)?"color":ee;return R==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${H}
in ${N} ${q} a_${H};
#endif
`:d.has(H)?R==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
    #if !defined(${re})
        in ${N} ${ee} a_${H};
    #endif
out ${N} ${q} ${H};
#else
uniform ${N} ${q} u_${H};
#endif
`:R==="initialize"?he==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${N} ${q} ${H} = u_${H};
#endif
`:`
#if !defined(HAS_UNIFORM_u_${H})
    #ifdef ${re}
        ${H} = unpack_mix_${he}(${oe}, u_${H}_t);
    #else
        ${H} = unpack_mix_${he}(a_${H}, u_${H}_t);
    #endif
#else
    ${N} ${q} ${H} = u_${H};
#endif
`:R==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${H}
    in ${N} ${q} a_${H};
    out ${N} ${q} ${H};
#endif
`:R==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${H}
    ${H} = a_${H};
#endif
`:void 0:R==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
    #if !defined(${re})
        in ${N} ${ee} a_${H};
    #endif
#else
uniform ${N} ${q} u_${H};
#endif
`:R==="define-instanced"?he==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${H}0;
in vec4 a_${H}1;
in vec4 a_${H}2;
in vec4 a_${H}3;
#else
uniform ${N} ${q} u_${H};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${N} ${ee} a_${H};
#else
uniform ${N} ${q} u_${H};
#endif
`:R==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${H}
    ${N} ${q} ${H} = a_${H};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    #ifdef ${re}
        ${N} ${q} ${H} = ${oe};
    #else
        ${N} ${q} ${H} = a_${H};
    #endif
#else
    ${N} ${q} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    #ifdef ${re}
        ${N} ${q} ${H} = unpack_mix_${he}(${oe}, u_${H}_t);
    #else
        ${N} ${q} ${H} = unpack_mix_${he}(a_${H}, u_${H}_t);
    #endif
#else
    ${N} ${q} ${H} = u_${H};
#endif
`}),usedDefines:O,vertexIncludes:v,fragmentIncludes:T}}class Yp{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,d,v,T,O,M,R,N){this.context=l;let q=this.boundPaintVertexBuffers.length!==T.length;for(let re=0;!q&&re<T.length;re++)this.boundPaintVertexBuffers[re]!==T[re]&&(q=!0);let H=this.boundDynamicVertexBuffers.length!==R.length;for(let re=0;!H&&re<R.length;re++)this.boundDynamicVertexBuffers[re]!==R[re]&&(H=!0);if(!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==v||q||H||this.boundIndexBuffer!==O||this.boundVertexOffset!==M)this.freshBind(d,v,T,O,M,R,N);else{l.bindVertexArrayOES.set(this.vao);for(const re of R)re&&(re.bind(),N&&re.instanceCount&&re.setVertexAttribDivisor(l.gl,d,N));O&&O.dynamicDraw&&O.bind()}}freshBind(l,d,v,T,O,M,R){const N=this.context,q=N.gl;this.vao&&this.destroy(),this.vao=N.gl.createVertexArray(),N.bindVertexArrayOES.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=T,this.boundVertexOffset=O,this.boundDynamicVertexBuffers=M,d.enableAttributes(q,l),d.bind(),d.setVertexAttribPointers(q,l,O);for(const H of v)H.enableAttributes(q,l),H.bind(),H.setVertexAttribPointers(q,l,O);for(const H of M)H&&(H.enableAttributes(q,l),H.bind(),H.setVertexAttribPointers(q,l,O),R&&H.instanceCount&&H.setVertexAttribDivisor(q,l,R));T&&T.bind()}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function F_(y,l){const d=Math.pow(2,l.canonical.z),v=l.canonical.y;return[new a.ae(0,v/d).toLngLat().lat,new a.ae(0,(v+1)/d).toLngLat().lat]}function Cg(y,l,d,v,T,O,M){const R=y.context,N=R.gl,q=d.hillshadeFBO;if(!q)return;y.prepareDrawTile();const H=y.isTileAffectedByFog(l),re=[];y.terrain&&y.terrain.renderingToTexture&&y.emissiveMode==="mrt-fallback"&&re.push("USE_MRT1");const ee=y.getOrCreateProgram("hillshade",{overrideFog:H,defines:re});R.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,q.colorAttachment0.get());const oe=((_e,Me,Ce,Ae)=>{const We=Ce.paint.get("hillshade-shadow-color"),$e=Ce.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",Ge=Ce.paint.get("hillshade-highlight-color"),Fe=Ce.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",Re=Ce.paint.get("hillshade-accent-color"),et=Ce.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",nt=Ce.paint.get("hillshade-emissive-strength");let st=a.an(Ce.paint.get("hillshade-illumination-direction"));if(Ce.paint.get("hillshade-illumination-anchor")==="viewport")st-=_e.transform.angle;else if(_e.style&&_e.style.enable3dLights()&&_e.style.directionalLight){const ft=_e.style.directionalLight.properties.get("direction"),wt=a.d4(ft.x,ft.y,ft.z);st=a.an(wt[1])}const dt=!_e.options.moving;return{u_matrix:Ae||_e.transform.calculateProjMatrix(Me.tileID.toUnwrapped(),dt),u_image:0,u_latrange:F_(0,Me.tileID),u_light:[Ce.paint.get("hillshade-exaggeration"),st],u_shadow:We.toPremultipliedRenderColor($e?null:Ce.lut),u_highlight:Ge.toPremultipliedRenderColor(Fe?null:Ce.lut),u_emissive_strength:nt,u_accent:Re.toPremultipliedRenderColor(et?null:Ce.lut)}})(y,d,v,y.terrain?l.projMatrix:null);y.uploadCommonUniforms(R,ee,l.toUnwrapped());const{tileBoundsBuffer:he,tileBoundsIndexBuffer:ce,tileBoundsSegments:de}=y.getTileBoundsBuffers(d);ee.draw(y,N.TRIANGLES,T,O,M,jn.disabled,oe,v.id,he,ce,de)}function El(y,l,d){if(!l.needsDEMTextureUpload)return;const v=y.context,T=v.gl;v.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||y.getTileTexture(d.stride);const O=d.getPixels();l.demTexture?l.demTexture.update(O,{premultiply:!1}):l.demTexture=new a.T(v,O,T.R32F,{premultiply:!1}),l.needsDEMTextureUpload=!1}function fu(y,l,d){const v=y.context,T=v.gl;if(!l.dem)return;const O=l.dem;if(v.activeTexture.set(T.TEXTURE1),El(y,l,O),!l.demTexture)return;l.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);const M=O.dim;v.activeTexture.set(T.TEXTURE0);let R=l.hillshadeFBO;if(!R){const ee=new a.T(v,{width:M,height:M,data:null},T.RGBA8);ee.bind(T.LINEAR,T.CLAMP_TO_EDGE),R=l.hillshadeFBO=v.createFramebuffer(M,M,1,"renderbuffer"),R.colorAttachment0.set(ee.texture)}v.bindFramebuffer.set(R.framebuffer),v.viewport.set([0,0,M,M]);const{tileBoundsBuffer:N,tileBoundsIndexBuffer:q,tileBoundsSegments:H}=y.getMercatorTileBoundsBuffers(),re=[];y.linearFloatFilteringSupported()&&re.push("TERRAIN_DEM_FLOAT_FORMAT"),y.terrain&&y.terrain.renderingToTexture&&y.emissiveMode==="mrt-fallback"&&re.push("USE_MRT1"),y.getOrCreateProgram("hillshadePrepare",{defines:re}).draw(y,T.TRIANGLES,An.disabled,qn.disabled,Gn.unblended,jn.disabled,((ee,oe)=>{const he=oe.stride,ce=a.bC();return a.ce(ce,0,a.al,-a.al,0,0,1),a.br(ce,ce,[0,-a.al,0]),{u_matrix:ce,u_image:1,u_dimension:[he,he],u_zoom:ee.overscaledZ}})(l.tileID,O),d.id,N,q,H),l.needsHillshadePrepare=!1}class ci{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ic extends ci{getDefault(){return a.ao.transparent.toNonPremultipliedRenderColor(null)}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Vu extends ci{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class qu extends ci{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Mg extends ci{getDefault(){return[!0,!0,!0,!0]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Dg extends ci{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class bf extends ci{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Ad extends ci{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const d=this.current;(l.func!==d.func||l.ref!==d.ref||l.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class wo extends ci{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class ua extends ci{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=l,this.dirty=!1}}class Di extends ci{getDefault(){return[0,1]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Pc extends ci{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=l,this.dirty=!1}}class Hl extends ci{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class hh extends ci{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.BLEND):d.disable(d.BLEND),this.current=l,this.dirty=!1}}class Hu extends ci{getDefault(){const l=this.gl;return[l.ONE,l.ZERO,l.ONE,l.ZERO]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.blendFuncSeparate(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Ig extends ci{getDefault(){return a.ao.transparent.toNonPremultipliedRenderColor(null)}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class N_ extends ci{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(l,l),this.current=l,this.dirty=!1)}}class xf extends ci{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=l,this.dirty=!1}}class Gu extends ci{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class B_ extends ci{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let Wp=class extends ci{getDefault(){return null}set(y){(y!==this.current||this.dirty)&&(this.gl.useProgram(y),this.current=y,this.dirty=!1)}};class j_ extends ci{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class hu extends ci{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Rc extends ci{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class dh extends ci{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class wf extends ci{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class O0 extends ci{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Pg extends ci{getDefault(){return null}set(l){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class ph extends ci{getDefault(){return null}set(l){this.gl&&(l!==this.current||this.dirty)&&(this.gl.bindVertexArray(l),this.current=l,this.dirty=!1)}}class Xp extends ci{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Sf extends ci{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class ls extends ci{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Od extends ci{constructor(l,d){super(l),this.context=l,this.parent=d}getDefault(){return null}}class Rg extends Od{constructor(l,d,v=0){super(l,d),this.attachmentPoint=l.gl.COLOR_ATTACHMENT0+v}setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachmentPoint,d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Zp extends Od{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class kg extends Od{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachment(),d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class i1 extends Zp{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const Yi=(y,l,d,v)=>({u_matrix:y,u_image0:0,u_image1:1,u_skirt_height:l,u_ground_shadow_factor:d,u_emissive_texture_available:v}),Kp=(y,l,d,v,T,O,M,R,N,q,H,re,ee,oe,he,ce,de)=>({u_proj_matrix:Float32Array.from(y),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(v),u_merc_matrix:d,u_zoom_transition:T,u_merc_center:O,u_image0:0,u_image1:1,u_frustum_tl:M,u_frustum_tr:R,u_frustum_br:N,u_frustum_bl:q,u_globe_pos:H,u_globe_radius:re,u_viewport:ee,u_grid_matrix:de?Float32Array.from(de):new Float32Array(9),u_skirt_height:oe,u_far_z_cutoff:he,u_emissive_texture_available:ce});function Tf(y,l){return y!=null&&l!=null&&!(!y.hasData()||!l.hasData())&&y.demTexture!=null&&l.demTexture!=null&&y.tileID.key!==l.tileID.key}const Gl=new class{constructor(){this.operations={}}newMorphing(y,l,d,v,T){if(y in this.operations){const O=this.operations[y];O.to.tileID.key!==d.tileID.key&&(O.queued=d)}else this.operations[y]={startTime:v,phase:0,duration:T,from:l,to:d,queued:null}}getMorphValuesForProxy(y){if(!(y in this.operations))return null;const l=this.operations[y];return{from:l.from,to:l.to,phase:l.phase}}update(y){for(const l in this.operations){const d=this.operations[l];for(d.phase=(y-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,y)){delete this.operations[l];break}}}_nextOp(y,l){return!!y.queued&&(y.from=y.to,y.to=y.queued,y.queued=null,y.phase=0,y.startTime=l,!0)}_validOp(y){return y.from.hasData()&&y.to.hasData()}},Qp={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Ef(y,l,d){if(l===0)return 0;const v=l<1&&d===514?.25/l:1;return 6*Math.pow(1.5,22-y)*Math.max(l,1)*v}function mh(y,l){const d=1<<y.z;return!l&&(y.x===0||y.x===d-1)||y.y===0||y.y===d-1}function Jp(y,l){if(!y.style||!y.style.enable3dLights())return;const d=y.context,v=d.gl;d.activeTexture.set(v.TEXTURE1),l?l.bind(v.LINEAR,v.CLAMP_TO_EDGE):y.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE)}const em=y=>({u_matrix:y});function Lg(y,l,d,v,T){if(T>0){const O=a.o.now(),M=(O-y.timeAdded)/T,R=l?(O-l.timeAdded)/T:-1,N=d.getSource(),q=v.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),H=!l||Math.abs(l.tileID.overscaledZ-q)>Math.abs(y.tileID.overscaledZ-q),re=H&&y.refreshedUponExpiration?1:a.aA(H?M:1-R,0,1);return l?{opacity:1,mix:1-re,isFading:M<1}:{opacity:re,mix:0,isFading:M<1}}return{opacity:1,mix:0,isFading:!1}}class zg extends eo{constructor(l){const d=iu("mock-dem",{type:"raster-dem",maxzoom:l.transform.maxZoom},l.style.dispatcher,l.style);super("mock-dem",d,!1),d.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,d){l.state="loaded",d(null)}}class Af extends eo{constructor(l){const d=iu("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},l.style.dispatcher,l.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,d,v){if(l.freezeTileCoverage)return;this.transform=l;const T=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((O,M)=>{if(O[M.key]="",!this._tiles[M.key]){const R=new cf(M,this._source.tileSize*M.overscaleFactor(),l.tileZoom,void 0,void 0,this._source.worldview);R.state="loaded",this._tiles[M.key]=R}return O},{});for(const O in this._tiles)O in T||(this.freeFBO(O),this._tiles[O].unloadVectorData(),delete this._tiles[O])}freeFBO(l){const d=this.proxyCachedFBO[l];if(d!==void 0){const v=Object.values(d);this.renderCachePool.push(...v),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Fg extends a.aQ{constructor(l,d,v){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=d,this.projMatrix=v}}class tm extends a.bV{constructor(l,d){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[v,T,O]=(function(){const N=new a.bd,q=new a.b0,H=131;N.reserve(17161),q.reserve(33800);const re=a.al/128,ee=a.al+re/2,oe=ee+re;for(let ce=-re;ce<oe;ce+=re)for(let de=-re;de<oe;de+=re){const _e=de<0||de>ee||ce<0||ce>ee?24575:0,Me=a.aA(Math.round(de),0,a.al),Ce=a.aA(Math.round(ce),0,a.al);N.emplaceBack(Me+_e,Ce)}const he=(ce,de)=>{const _e=de*H+ce;q.emplaceBack(_e+1,_e,_e+H),q.emplaceBack(_e+H,_e+H+1,_e+1)};for(let ce=1;ce<129;ce++)for(let de=1;de<129;de++)he(de,ce);return[0,129].forEach(ce=>{for(let de=0;de<130;de++)he(de,ce),he(ce,de)}),[N,q,32768]})(),M=l.context;this.gridBuffer=M.createVertexBuffer(v,a.bf.members),this.gridIndexBuffer=M.createIndexBuffer(T),this.gridSegments=a.bg.simpleSegment(0,0,v.length,T.length),this.gridNoSkirtSegments=a.bg.simpleSegment(0,0,v.length,O),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Af(d.map),this.orthoMatrix=a.bC(),a.ce(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,a.al,0,a.al,0,1);const R=M.gl;this._overlapStencilMode=new qn({func:R.GEQUAL,mask:255},0,255,R.KEEP,R.KEEP,R.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new zg(d.map),this._pendingGroundEffectLayers=[],this._emissiveTexture=!1}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),this._style=l,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,d,v){if(l&&l.terrain){this._style!==l&&(this.style=l,this._evaluationZoom=void 0);const T=l.terrain.properties,O=l.terrain.drapeRenderMode===0,M=l.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=a.o.now();const R=l.terrain&&l.terrain.scope,N=T.get("source"),q=O?this._mockSourceCache:l.getSourceCache(N,R);if(!q)return void a.w(`Couldn't find terrain source "${N}".`);if(this.sourceCache=q,this._attenuationRange=l.terrain.getAttenuationRange(),this._exaggeration=M?this.calculateExaggeration(d):T.get("exaggeration"),!d.projection.requiresDraping&&M&&this._exaggeration===0)return void this._disable();this.enabled=!0;const H=()=>{this.sourceCache.used&&a.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const re=this.getScaledDemTileSize();this.sourceCache.update(d,re,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,H(),this._initializing=!0),H(),d.updateElevation(!0,v),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0,this._previousZoom=d.zoom}else this._disable()}calculateExaggeration(l){if(this._attenuationRange&&l.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(l.zoom);const d=this._previousCameraAltitude,v=l.getFreeCameraOptions().position.z/l.pixelsPerMeter*l.worldSize;this._previousCameraAltitude=v;const T=d!=null?v-d:Number.MAX_VALUE;if(Math.abs(T)<2)return this._exaggeration;const O=l.zoom,M=this._style.terrain;if(!this._previousUpdateTimestamp)return M.getExaggeration(O);let R=O-this._previousZoom;const N=this._previousUpdateTimestamp;let q=O;this._evaluationZoom!=null&&(q=this._evaluationZoom,Math.abs(O-q)>.5&&(R=.5*(O-q+R)),R*T<0&&(q+=R)),this._evaluationZoom=q;const H=M.getExaggeration(q),re=H===M.getExaggeration(Math.max(0,q-.1));if(re&&Math.abs(H-this._exaggeration)<.01)return H;let ee=Math.min(.1,.00375*(this._updateTimestamp-N));return(re||H<.1||Math.abs(R)<1e-4)&&(ee=Math.min(.2,4*ee)),a.ak(this._exaggeration,H,ee)}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(l){l.dataType==="source"&&l.coord?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._mergedSourceCaches)this._style._mergedSourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,v=this.painter.transform;this._initializing&&(this._initializing=v._centerAltitude===0&&this.getAtPointOrZero(a.ae.fromLngLat(v.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const T=this.proxyCoords=d.getIds().map(N=>{const q=d.getTileByID(N).tileID;return q.projMatrix=v.calculateProjMatrix(q.toUnwrapped()),q});(function(N,q){const H=q.transform.pointCoordinate(q.transform.getCameraPoint()),re=new a.P(H.x,H.y);N.sort((ee,oe)=>{if(oe.overscaledZ-ee.overscaledZ)return oe.overscaledZ-ee.overscaledZ;const he=new a.P(ee.canonical.x+(1<<ee.canonical.z)*ee.wrap,ee.canonical.y),ce=new a.P(oe.canonical.x+(1<<oe.canonical.z)*oe.wrap,oe.canonical.y),de=re.mult(1<<ee.canonical.z);return de.x-=.5,de.y-=.5,de.distSqr(he)-de.distSqr(ce)})})(T,this.painter);const O=this.proxyToSource||{};this.proxyToSource={},T.forEach(N=>{this.proxyToSource[N.key]={}}),this.terrainTileForTile={};const M=this._style._mergedSourceCaches;for(const N in M){const q=M[N];if(!q.used||(q!==this.sourceCache&&this.resetTileLookupCache(q.id),this._setupProxiedCoordsForOrtho(q,l[N],O),q.usedForTerrain))continue;const H=l[N];q.getSource().reparseOverscaled&&this._assignTerrainTiles(H)}this.proxiedCoords[d.id]=T.map(N=>new Fg(N,N.key,this.orthoMatrix)),this._assignTerrainTiles(T),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(O),this.renderingToTexture=!1;const R={};this._visibleDemTiles=[];for(const N of this.proxyCoords){const q=this.terrainTileForTile[N.key];if(!q)continue;const H=q.tileID.key;H in R||(this._visibleDemTiles.push(q),R[H]=H)}}_assignTerrainTiles(l){this._initializing||l.forEach(d=>{if(this.terrainTileForTile[d.key])return;const v=this._findTileCoveringTileID(d,this.sourceCache);v&&(this.terrainTileForTile[d.key]=v)})}_prepareDEMTextures(){const l=this.painter.context,d=l.gl;for(const v in this.terrainTileForTile){const T=this.terrainTileForTile[v],O=T.dem;!O||T.demTexture&&!T.needsDEMTextureUpload||(l.activeTexture.set(d.TEXTURE1),El(this.painter,T,O))}}_prepareDemTileUniforms(l,d,v,T){if(!d||d.demTexture==null)return!1;const O=l.tileID.canonical,M=Math.pow(2,d.tileID.canonical.z-O.z),R=T||"";return v[`u_dem_tl${R}`]=[O.x*M%1,O.y*M%1],v[`u_dem_scale${R}`]=M,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let l=0;const d=this._visibleDemTiles.reduce((v,T)=>{if(!T.dem)return v;const O=T.dem.tree.minimums[0];return O>0&&l++,v+O},0);return l?d/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,d=l.gl;l.activeTexture.set(d.TEXTURE2);const v=this._getLoadedAreaMinimum(),T=new a.dL({width:1,height:1},new Float32Array([v]));this._emptyDEMTextureDirty=!1;let O=this._emptyDEMTexture;return O?O.update(T,{premultiply:!1}):O=this._emptyDEMTexture=new a.T(l,T,d.R32F,{premultiply:!1}),O}setupElevationDraw(l,d,v){const T=this.painter.context,O=T.gl,M={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};M.u_exaggeration=this.exaggeration();let R=null,N=null,q=1;if(v&&v.morphing&&this._useVertexMorphing){const oe=v.morphing.srcDemTile,he=v.morphing.dstDemTile;q=v.morphing.phase,oe&&he&&(this._prepareDemTileUniforms(l,oe,M,"_prev")&&(N=oe),this._prepareDemTileUniforms(l,he,M)&&(R=he))}const H=oe=>oe&&oe.demTexture&&this.painter.linearFloatFilteringSupported()?O.LINEAR:O.NEAREST;let re=null;var ee;if(this.enabled?N&&R?(re=R.demTexture,T.activeTexture.set(O.TEXTURE4),N.demTexture.bind(H(N),O.CLAMP_TO_EDGE),M.u_dem_lerp=q):(R=this.terrainTileForTile[l.tileID.key],re=this._prepareDemTileUniforms(l,R,M)?R.demTexture:this.emptyDEMTexture):re=this.emptyDEMTexture,T.activeTexture.set(O.TEXTURE2),re&&(M.u_dem_size=(ee=re).size[0]===1?1:ee.size[0]-2,re.bind(H(R),O.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(v&&v.useDepthForOcclusion,d,M),v&&v.useMeterToDem&&R){const oe=(1<<R.tileID.canonical.z)*a.cf(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;M.u_meter_to_dem=oe}if(v&&v.labelPlaneMatrixInv&&(M.u_label_plane_matrix_inv=v.labelPlaneMatrixInv),d.setTerrainUniformValues(T,M),this.painter.transform.projection.name==="globe"){const oe=this.globeUniformValues(this.painter.transform,l.tileID.canonical,v&&v.useDenormalizedUpVectorScale);d.setGlobeUniformValues(T,oe)}}globeUniformValues(l,d,v){const T=l.projection;return{u_tile_tl_up:T.upVector(d,0,0),u_tile_tr_up:T.upVector(d,a.al,0),u_tile_br_up:T.upVector(d,a.al,a.al),u_tile_bl_up:T.upVector(d,0,a.al),u_tile_up_scale:v?a.dM(1):T.upVectorScale(d,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const d=this.painter,v=this.painter.context;l.length!==0&&(v.bindFramebuffer.set(null),v.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,(function(T,O,M,R,N){if(T.transform.projection.name==="globe")(function(q,H,re,ee,oe){const he=q.context,ce=he.gl;let de,_e;const Me=q.transform,Ce=a.dE(q,he,Me),Ae=(dt,ft)=>{if(_e===ft)return;const wt=[Qp[ft],"PROJECTION_GLOBE_VIEW"];Ce&&wt.push("CUSTOM_ANTIALIASING");const It=q.isTileAffectedByFog(dt);de=q.getOrCreateProgram("globeRaster",{defines:wt,overrideFog:It}),_e=ft},We=q.colorModeForRenderPass(),$e=new An(ce.LEQUAL,An.ReadWrite,q.depthRangeFor3D);Gl.update(oe);const Ge=a.dF(Me),Fe=[a.aF(Me.center.lng),a.aJ(Me.center.lat)],Re=q.globeSharedBuffers,et=[Me.width*a.o.devicePixelRatio,Me.height*a.o.devicePixelRatio],nt=Float32Array.from(Me.globeMatrix),st={useDenormalizedUpVectorScale:!0};{const dt=q.transform,ft=Ef(dt.zoom,H.exaggeration(),H.sourceCache._source.tileSize);_e=-1;const wt=ce.TRIANGLES;for(const It of ee){const pt=re.getTile(It),tt=qn.disabled,At=H.prevTerrainTileForTile[It.key],gt=H.terrainTileForTile[It.key];Tf(At,gt)&&Gl.newMorphing(It.key,At,gt,oe,250),Jp(q,pt.emissiveTexture),he.activeTexture.set(ce.TEXTURE0),pt.texture&&pt.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);const Dt=Gl.getMorphValuesForProxy(It.key),qt=Dt?1:0;Dt&&Object.assign(st,{morphing:{srcDemTile:Dt.from,dstDemTile:Dt.to,phase:a.dD(Dt.phase)}});const tn=a.dG(It.canonical),Wt=a.dH(tn.getCenter().lat),Ht=a.dI(It.canonical,tn,Wt,dt.worldSize/dt._pixelsPerMercatorPixel),xn=a.bk(a.dJ(It.canonical)),yn=q.emissiveMode==="mrt-fallback"?1:0,rn=Kp(dt.expandedFarZProjMatrix,nt,Ge,xn,a.aj(dt.zoom),Fe,dt.frustumCorners.TL,dt.frustumCorners.TR,dt.frustumCorners.BR,dt.frustumCorners.BL,dt.globeCenterInViewSpace,dt.globeRadius,et,ft,dt._farZ,yn,Ht);if(Ae(It,qt),de&&(H.setupElevationDraw(pt,de,st),q.uploadCommonUniforms(he,de,It.toUnwrapped()),Re)){const[_n,Dn,Un]=Re.getGridBuffers(Wt,ft!==0);de.draw(q,wt,$e,tt,We,jn.backCCW,rn,"globe_raster",_n,Dn,Un)}}}if(Re&&(q.renderDefaultNorthPole||q.renderDefaultSouthPole)){const dt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Ce&&dt.push("CUSTOM_ANTIALIASING"),de=q.getOrCreateProgram("globeRaster",{defines:dt});for(const ft of ee){const{x:wt,y:It,z:pt}=ft.canonical,tt=It===0,At=It===(1<<pt)-1,[gt,Dt,qt,tn]=Re.getPoleBuffers(pt,!1);if(tn&&(tt||At)){const Wt=re.getTile(ft);Jp(q,Wt.emissiveTexture),he.activeTexture.set(ce.TEXTURE0),Wt.texture&&Wt.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);let Ht=a.dK(pt,wt,Me);const xn=a.bk(a.dJ(ft.canonical)),yn=q.emissiveMode==="mrt-fallback"?1:0,rn=(_n,Dn)=>_n.draw(q,ce.TRIANGLES,$e,qn.disabled,We,jn.disabled,Kp(Me.expandedFarZProjMatrix,Ht,Ht,xn,0,Fe,Me.frustumCorners.TL,Me.frustumCorners.TR,Me.frustumCorners.BR,Me.frustumCorners.BL,Me.globeCenterInViewSpace,Me.globeRadius,et,0,Me._farZ,yn),"globe_pole_raster",Dn,qt,tn);H.setupElevationDraw(Wt,de,st),q.uploadCommonUniforms(he,de,ft.toUnwrapped()),tt&&q.renderDefaultNorthPole&&rn(de,gt),At&&q.renderDefaultSouthPole&&(Ht=a.cS(a.bC(),Ht,[1,-1,1]),rn(de,Dt))}}}})(T,O,M,R,N);else{const q=T.context,H=q.gl;let re,ee;const oe=T.shadowRenderer,he=$l(T,T.longestCutoffRange),ce=We=>{if(ee===We)return;const $e=[];$e.push(Qp[We]),he.shouldRenderCutoff&&$e.push("RENDER_CUTOFF"),oe&&($e.push("RENDER_SHADOWS","DEPTH_TEXTURE"),oe.useNormalOffset&&$e.push("NORMAL_OFFSET")),re=T.getOrCreateProgram("terrainRaster",{defines:$e}),ee=We},de=T.colorModeForRenderPass(),_e=new An(H.LEQUAL,An.ReadWrite,T.depthRangeFor3D);Gl.update(N);const Me=T.transform,Ce=Ef(Me.zoom,O.exaggeration(),O.sourceCache._source.tileSize);let Ae=[0,0,0];if(oe){const We=T.style.directionalLight,$e=T.style.ambientLight;We&&$e&&(Ae=js(T.style,We,$e))}{ee=-1;const We=H.TRIANGLES,[$e,Ge]=[O.gridIndexBuffer,O.gridSegments];for(const Fe of R){const Re=M.getTile(Fe),et=qn.disabled,nt=O.prevTerrainTileForTile[Fe.key],st=O.terrainTileForTile[Fe.key];Tf(nt,st)&&Gl.newMorphing(Fe.key,nt,st,N,250),Jp(T,Re.emissiveTexture),q.activeTexture.set(H.TEXTURE0),Re.texture&&Re.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE);const dt=Gl.getMorphValuesForProxy(Fe.key),ft=dt?1:0;let wt;dt&&(wt={morphing:{srcDemTile:dt.from,dstDemTile:dt.to,phase:a.dD(dt.phase)}});const It=T.emissiveMode==="mrt-fallback"?1:0,pt=Yi(Fe.projMatrix,mh(Fe.canonical,Me.renderWorldCopies)?Ce/10:Ce,Ae,It);if(ce(ft),!re)continue;O.setupElevationDraw(Re,re,wt);const tt=Fe.toUnwrapped();oe&&oe.setupShadows(tt,re),T.uploadCommonUniforms(q,re,tt,null,he),re.draw(T,We,_e,et,de,jn.backCCW,pt,"terrain_raster",O.gridBuffer,$e,Ge)}}}})(d,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const d=this.painter,v=this.painter.context,T=this.proxySourceCache,O=this.proxiedCoords[T.id],M=this._drapedRenderBatches.shift(),R=d.style.order,N=[];this._updateFBOs(d.emissiveMode==="mrt-fallback");let q=0;for(const H of O){const re=T.getTileByID(H.proxyTileKey),ee=T.proxyCachedFBO[H.key]?T.proxyCachedFBO[H.key][l]:void 0,oe=ee!==void 0?T.renderCache[ee]:this.pool[q++],he=ee!==void 0;if(re.texture=oe.tex,re.emissiveTexture=oe.emissiveTex,he&&!oe.dirty){N.push(re.tileID);continue}v.bindFramebuffer.set(oe.fb.framebuffer);const ce=v.gl;let de;ce.drawBuffers(d.emissiveMode==="mrt-fallback"?[ce.COLOR_ATTACHMENT0,ce.COLOR_ATTACHMENT1]:[ce.COLOR_ATTACHMENT0]),this.renderedToTile=!1,oe.dirty&&(v.clear({color:a.ao.transparent,stencil:0}),oe.dirty=!1);for(let _e=M.start;_e<=M.end;++_e){const Me=d.style._mergedLayers[R[_e]];if(Me.isHidden(d.transform.zoom))continue;const Ce=d.style.getLayerSourceCache(Me),Ae=Ce?this.proxyToSource[H.key][Ce.id]:[H];if(!Ae)continue;const We=Ae;v.viewport.set([0,0,oe.fb.width,oe.fb.height]),de!==(Ce?Ce.id:null)&&(this._setupStencil(oe,Ae,Me,Ce),de=Ce?Ce.id:null),d.renderLayer(d,Ce,Me,We)}if(ce.drawBuffers([ce.COLOR_ATTACHMENT0]),this._drapedRenderBatches.length===0)for(const _e of this._pendingGroundEffectLayers){const Me=d.style._mergedLayers[R[_e]];if(Me.isHidden(d.transform.zoom))continue;const Ce=d.style.getLayerSourceCache(Me),Ae=Ce?this.proxyToSource[H.key][Ce.id]:[H];if(!Ae)continue;const We=Ae;v.viewport.set([0,0,oe.fb.width,oe.fb.height]),de!==(Ce?Ce.id:null)&&(this._setupStencil(oe,Ae,Me,Ce),de=Ce?Ce.id:null),d.renderLayer(d,Ce,Me,We)}this.renderedToTile?(oe.dirty=!0,N.push(re.tileID)):he||--q,q===5&&(q=0,this.renderToBackBuffer(N))}return this.renderToBackBuffer(N),this.renderingToTexture=!1,v.bindFramebuffer.set(null),v.viewport.set([0,0,d.width,d.height]),M.end+1}postRender(){}isLayerOrderingCorrect(l){const d=l.order.length;let v=-1,T=d;for(let O=0;O<d;++O)this._style.isLayerDraped(l._mergedLayers[l.order[O]])?v=Math.max(v,O):T=Math.min(T,O);return T>v}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{l=Math.min(l,d.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,d,v){if(!this._visibleDemTiles)return null;const T=this._visibleDemTiles.filter(O=>O.dem).map(O=>{const M=O.tileID,R=1<<M.overscaledZ,{x:N,y:q}=M.canonical,H=N/R,re=(N+1)/R,ee=q/R,oe=(q+1)/R;return{minx:H,miny:ee,maxx:re,maxy:oe,t:O.dem.tree.raycastRoot(H,ee,re,oe,l,d,v),tile:O}});T.sort((O,M)=>(O.t!==null?O.t:Number.MAX_VALUE)-(M.t!==null?M.t:Number.MAX_VALUE));for(const O of T){if(O.t==null)return null;const M=O.tile.dem.tree.raycast(O.minx,O.miny,O.maxx,O.maxy,l,d,v);if(M!=null)return M}return null}_createFBO(){const l=this.painter.context,d=l.gl,v=this.drapeBufferSize;l.activeTexture.set(d.TEXTURE0);const T=new a.T(l,{width:v[0],height:v[1],data:null},d.RGBA8);T.bind(d.LINEAR,d.CLAMP_TO_EDGE);const O=l.createFramebuffer(v[0],v[1],1,null);let M;return O.colorAttachment0.set(T.texture),this._emissiveTexture&&(M=new a.T(l,{width:v[0],height:v[1],data:null},d.R8),M.bind(d.LINEAR,d.CLAMP_TO_EDGE),O.createColorAttachment(l,1),O.colorAttachment1.set(M.texture)),O.depthAttachment=new i1(l,O.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,v[0],v[1]),this._stencilRef=0,O.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):O.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&d.texParameterf(d.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:O,tex:T,emissiveTex:M,dirty:!1}}_updateFBOs(l){if(this._emissiveTexture!==l){for(const d of this.pool)this._updateFBO(d,l);for(const d of this.proxySourceCache.renderCache)this._updateFBO(d,l);this._emissiveTexture=l}}_updateFBO(l,d){const v=l.fb,T=this.painter.context,O=T.gl,M=this.drapeBufferSize;if(d){const R=new a.T(T,{width:M[0],height:M[1],data:null},O.R8);R.bind(O.LINEAR,O.CLAMP_TO_EDGE),l.emissiveTex=R,v.createColorAttachment(T,1),v.colorAttachment1.set(R.texture)}else l.emissiveTex=void 0,v.removeColorAttachment(T,1);l.dirty=!0}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const l in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const d=this._style._mergedLayers[l],v=d.isHidden(this.painter.transform.zoom);return d.type==="hillshade"||d.type==="custom"?!v&&d.shouldRedrape():!v&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const v of this._style.getSources())if(v instanceof ru){l=!0;break}if(!l)return;const d={};for(let v=0;v<this._style.order.length;++v){const T=this._style._mergedLayers[this._style.order[v]],O=this._style.getLayerSourceCache(T);if(!O||d[O.id]||T.isHidden(this.painter.transform.zoom)||T.type!=="line")continue;const M=T.widthExpression(),R=T.emissiveStrengthExpression();if(M instanceof a.ad||R instanceof a.ad){d[O.id]=!0;for(const N of this.proxyCoords){const q=this.proxyToSource[N.key][O.id];if(q)for(const H of q)this._clearRenderCacheForTile(O.id,H)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const v in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[v]._source instanceof so){l=!0;break}if(!l)return;const d={};for(let v=0;v<this._style.order.length;++v){const T=this._style._mergedLayers[this._style.order[v]],O=this._style.getLayerSourceCache(T);if(!O||d[O.id]||T.isHidden(this.painter.transform.zoom)||T.type!=="raster")continue;const M=T.paint.get("raster-fade-duration");for(const R of this.proxyCoords){const N=this.proxyToSource[R.key][O.id];if(N)for(const q of N){const H=Lg(O.getTile(q),O.findLoadedParent(q,0),O,this.painter.transform,M);(H.opacity!==1||H.mix!==0)&&this._clearRenderCacheForTile(O.id,q)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const l=this._style.order,d=l.length;if(d===0)return;const v=[];this._pendingGroundEffectLayers=[];let T,O=0,M=this._style._mergedLayers[l[O]];for(;!this._style.isLayerDraped(M)&&M.isHidden(this.painter.transform.zoom)&&++O<d;)M=this._style._mergedLayers[l[O]];for(;O<d;++O){const R=this._style._mergedLayers[l[O]];R.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(R)?T===void 0&&(T=O):(R.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(O),T!==void 0&&(v.push({start:T,end:O-1}),T=void 0)))}if(T!==void 0&&v.push({start:T,end:O-1}),v.length!==0){const R=v[v.length-1];this._pendingGroundEffectLayers.every(N=>N>R.end)||a.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=v}_setupRenderCache(l){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const M=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let R=0;R<M.length;++R){const N=Object.values(M[R]);d.renderCachePool.push(...N)}}return}this._clearRasterLayersFromRenderCache();const v=this.proxyCoords,T=this._tilesDirty;for(let M=v.length-1;M>=0;M--){const R=v[M];if(d.getTileByID(R.key),d.proxyCachedFBO[R.key]!==void 0){const N=l[R.key],q=this.proxyToSource[R.key];let H=0;for(const re in q){const ee=q[re],oe=N[re];if(!oe||oe.length!==ee.length||ee.some((he,ce)=>he!==oe[ce]||T[re]&&T[re].hasOwnProperty(he.key))){H=-1;break}++H}for(const re in d.proxyCachedFBO[R.key])d.renderCache[d.proxyCachedFBO[R.key][re]].dirty=H<0||H!==Object.values(N).length}}const O=[...this._drapedRenderBatches];O.sort((M,R)=>R.end-R.start-(M.end-M.start));for(const M of O)for(const R of v){if(d.proxyCachedFBO[R.key])continue;let N=d.renderCachePool.pop();N===void 0&&d.renderCache.length<50&&(N=d.renderCache.length,d.renderCache.push(this._createFBO())),N!==void 0&&(d.proxyCachedFBO[R.key]={},d.proxyCachedFBO[R.key][M.start]=N,d.renderCache[N].dirty=!0)}this._tilesDirty={}}_setupStencil(l,d,v,T){if(!T||!this._sourceTilesOverlap[T.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const O=this.painter.context,M=O.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let R;if(v.isTileClipped())R=d.length,this._overlapStencilMode.test={func:M.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);R=1,this._overlapStencilMode.test={func:M.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+R>255&&(O.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=R,this._overlapStencilMode.ref=this._stencilRef,v.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):qn.disabled}_renderTileClippingMasks(l,d){const v=this.painter,T=this.painter.context,O=T.gl;v._tileClippingMaskIDs={},T.setColorMode(Gn.disabled),T.setDepthMode(An.disabled);const M=v.getOrCreateProgram("clippingMask");for(const R of l){const N=v._tileClippingMaskIDs[R.key]=--d;M.draw(v,O.TRIANGLES,An.disabled,new qn({func:O.ALWAYS,mask:0},N,255,O.KEEP,O.KEEP,O.REPLACE),Gn.disabled,jn.disabled,em(R.projMatrix),"$clipping",v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}}pointCoordinate(l){const d=this.painter.transform;if(l.x<0||l.x>d.width||l.y<0||l.y>d.height)return null;const v=[l.x,l.y,1,1];a.aC(v,v,d.pixelMatrixInverse),a.cK(v,v,1/v[3]),v[0]/=d.worldSize,v[1]/=d.worldSize;const T=d._camera.position,O=a.cf(1,d.center.lat),M=[T[0],T[1],T[2]/O,0],R=a.da([],v.slice(0,3),M);a.aw(R,R);const N=this.raycast(M,R,this._exaggeration);return N!==null&&N?(a.bH(M,M,R,N),M[3]=M[2],M[2]*=O,M):null}_setupProxiedCoordsForOrtho(l,d,v){if(l.getSource()instanceof a.aU)return this._setupProxiedCoordsForImageSource(l,d,v);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const T=this.proxiedCoords[l.id]=[],O=this.proxyCoords;for(let N=0;N<O.length;N++){const q=O[N],H=this._findTileCoveringTileID(q,l);if(H){const re=this._createProxiedId(q,H,v[q.key]&&v[q.key][l.id]);T.push(re),this.proxyToSource[q.key][l.id]=[re]}}let M=!1;const R=new Set;for(let N=0;N<d.length;N++){const q=l.getTile(d[N]);if(!q||!q.hasData())continue;const H=this._findTileCoveringTileID(q.tileID,this.proxySourceCache);if(H&&H.tileID.canonical.z!==q.tileID.canonical.z){const re=this.proxyToSource[H.tileID.key][l.id],ee=this._createProxiedId(H.tileID,q,v[H.tileID.key]&&v[H.tileID.key][l.id]);re?re.splice(re.length-1,0,ee):this.proxyToSource[H.tileID.key][l.id]=[ee];const oe=this.proxyToSource[H.tileID.key][l.id];R.has(oe)||R.add(oe),T.push(ee),M=!0}}if(this._sourceTilesOverlap[l.id]=M,M&&this._debugParams.sortTilesHiZFirst)for(const N of R)N.sort((q,H)=>H.overscaledZ-q.overscaledZ)}_setupProxiedCoordsForImageSource(l,d,v){if(!l.getSource().loaded())return;const T=this.proxiedCoords[l.id]=[],O=this.proxyCoords,M=l.getSource(),R=M.tileID;if(!R)return;const N=new a.P(R.x,R.y)._div(1<<R.z),q=M.coordinates.map(a.ae.fromLngLat).reduce((re,ee)=>(re.min.x=Math.min(re.min.x,ee.x-N.x),re.min.y=Math.min(re.min.y,ee.y-N.y),re.max.x=Math.max(re.max.x,ee.x-N.x),re.max.y=Math.max(re.max.y,ee.y-N.y),re),{min:new a.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new a.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),H=(re,ee)=>{const oe=re.wrap+re.canonical.x/(1<<re.canonical.z),he=re.canonical.y/(1<<re.canonical.z),ce=a.al/(1<<re.canonical.z),de=ee.wrap+ee.canonical.x/(1<<ee.canonical.z),_e=ee.canonical.y/(1<<ee.canonical.z);return oe+ce<de+q.min.x||oe>de+q.max.x||he+ce<_e+q.min.y||he>_e+q.max.y};for(let re=0;re<O.length;re++){const ee=O[re];for(let oe=0;oe<d.length;oe++){const he=l.getTile(d[oe]);if(!he||!he.hasData()||H(ee,he.tileID))continue;const ce=this._createProxiedId(ee,he,v[ee.key]&&v[ee.key][l.id]),de=this.proxyToSource[ee.key][l.id];de?de.push(ce):this.proxyToSource[ee.key][l.id]=[ce],T.push(ce)}}}_createProxiedId(l,d,v){let T=this.orthoMatrix;if(v){const O=v.find(M=>M.key===d.tileID.key);if(O)return O}if(d.tileID.key!==l.key){const O=l.canonical.z-d.tileID.canonical.z;let M,R,N;T=a.bC();const q=d.tileID.wrap-l.wrap<<l.overscaledZ;O>0?(M=a.al>>O,R=M*((d.tileID.canonical.x<<O)-l.canonical.x+q),N=M*((d.tileID.canonical.y<<O)-l.canonical.y)):(M=a.al<<-O,R=a.al*(d.tileID.canonical.x-(l.canonical.x+q<<-O)),N=a.al*(d.tileID.canonical.y-(l.canonical.y<<-O))),a.ce(T,0,M,0,M,0,1),a.br(T,T,[R,N,0])}return new Fg(d.tileID,l.key,T)}_findTileCoveringTileID(l,d){let v=d.getTile(l);if(v&&v.hasData())return v;const T=this._findCoveringTileCache[d.id],O=T[l.key];if(v=O?d.getTileByID(O):null,v&&v.hasData()||O===null)return v;let M=v?v.tileID:l,R=M.overscaledZ;const N=d.getSource().minzoom,q=[];if(!O){const re=d.getSource().maxzoom;if(l.canonical.z>=re){const ee=l.canonical.z-re;d.getSource().reparseOverscaled?(R=Math.max(l.canonical.z+2,d.transform.tileZoom),M=new a.aQ(R,l.wrap,re,l.canonical.x>>ee,l.canonical.y>>ee)):ee!==0&&(R=re,M=new a.aQ(R,l.wrap,re,l.canonical.x>>ee,l.canonical.y>>ee))}M.key!==l.key&&(q.push(M.key),v=d.getTile(M))}const H=re=>{q.forEach(ee=>{T[ee]=re}),q.length=0};for(R-=1;R>=N&&(!v||!v.hasData());R--){v&&H(v.tileID.key);const re=M.calculateScaledKey(R);if(v=d.getTileByID(re),v&&v.hasData())break;const ee=T[re];if(ee===null)break;ee===void 0?q.push(re):v=d.getTileByID(ee)}return H(v?v.tileID.key:null),v&&v.hasData()?v:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,d){let v=this._tilesDirty[l];v||(v=this._tilesDirty[l]={}),v[d.key]=!0}}function Cd(y,l,d){const v=(function(R,N,q){const H=a.bJ(N,R),re=a.bJ(q,[.2126,.7152,.0722]),ee=(he,ce,de)=>(1-de)*he+de*ce,oe=ee(1-.3*Math.min(re,1),1,Math.min(H+1,1));return ee(.92,1,Math.asin(a.aA(N[2],-1,1))/Math.PI+.5)*oe})(y,[0,0,1],l),T=[0,0,0];a.c5(T,d.slice(0,3),v);const O=[0,0,0];a.c5(O,l.slice(0,3),y[2]);const M=[0,0,0];return a.d8(M,T,O),a.db(M)}const nm=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],C0=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","building","buildingBloom","elevatedStructures","model","symbol"];class Ng{static cacheKey(l,d,v,T){const O=[d];T&&O.push(T.cacheKey);for(const M of v)l.usedDefines.has(M)&&O.push(M);return O.join("/")}constructor(l,d,v,T,O,M){const R=l.gl;this.program=R.createProgram(),this.configuration=T,this.name=d,this.fixedDefines=[...M];const N=`#version 300 es
${(T?T.defines():[]).concat(M.map(ce=>`#define ${ce}`)).join(`
`)}`,q=[N,r1];for(const ce of v.fragmentIncludes)q.push(vf[ce]);q.push(v.fragmentSource);const H=q.join(`
`),re=[N,L_];for(const ce of v.vertexIncludes)re.push(vf[ce]);this.forceManualRenderingForInstanceIDShaders=l.forceManualRenderingForInstanceIDShaders&&v.vertexSource.includes("gl_InstanceID"),this.forceManualRenderingForInstanceIDShaders&&re.push("uniform int u_instanceID;"),re.push(v.vertexSource);let ee=re.join(`
`);this.forceManualRenderingForInstanceIDShaders&&(ee=ee.replaceAll("gl_InstanceID","u_instanceID"));const oe=R.createShader(R.FRAGMENT_SHADER);if(R.isContextLost())return void(this.failedToCreate=!0);R.shaderSource(oe,H),R.compileShader(oe),R.attachShader(this.program,oe);const he=R.createShader(R.VERTEX_SHADER);R.isContextLost()?this.failedToCreate=!0:(R.shaderSource(he,ee),R.compileShader(he),R.attachShader(this.program,he),this.attributes={},R.linkProgram(this.program),R.deleteShader(he),R.deleteShader(oe),this.fixedUniforms=O(l),this.fixedUniformsEntries=Object.entries(this.fixedUniforms),this.binderUniforms=T?T.getUniforms(l):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(ce=>({u_instanceID:new a.ch(ce)}))(l)),(M.includes("TERRAIN")||d.includes("symbol")||d.includes("circle"))&&(this.terrainUniforms=(ce=>({u_dem:new a.ch(ce),u_dem_prev:new a.ch(ce),u_dem_tl:new a.ck(ce),u_dem_scale:new a.cj(ce),u_dem_tl_prev:new a.ck(ce),u_dem_scale_prev:new a.cj(ce),u_dem_size:new a.cj(ce),u_dem_lerp:new a.cj(ce),u_exaggeration:new a.cj(ce),u_depth:new a.ch(ce),u_depth_size_inv:new a.ck(ce),u_depth_range_unpack:new a.ck(ce),u_occluder_half_size:new a.cj(ce),u_occlusion_depth_offset:new a.cj(ce),u_meter_to_dem:new a.cj(ce),u_label_plane_matrix_inv:new a.cl(ce)}))(l)),M.includes("GLOBE")&&(this.globeUniforms=(ce=>({u_tile_tl_up:new a.ci(ce),u_tile_tr_up:new a.ci(ce),u_tile_br_up:new a.ci(ce),u_tile_bl_up:new a.ci(ce),u_tile_up_scale:new a.cj(ce)}))(l)),M.includes("FOG")&&(this.fogUniforms=(ce=>({u_fog_matrix:new a.cl(ce),u_fog_range:new a.ck(ce),u_fog_color:new a.d3(ce),u_fog_horizon_blend:new a.cj(ce),u_fog_vertical_limit:new a.ck(ce),u_fog_temporal_offset:new a.cj(ce),u_frustum_tl:new a.ci(ce),u_frustum_tr:new a.ci(ce),u_frustum_br:new a.ci(ce),u_frustum_bl:new a.ci(ce),u_globe_pos:new a.ci(ce),u_globe_radius:new a.cj(ce),u_globe_transition:new a.cj(ce),u_is_globe:new a.ch(ce),u_viewport:new a.ck(ce)}))(l)),M.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(ce=>({u_cutoff_params:new a.d3(ce)}))(l)),M.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(ce=>({u_lighting_ambient_color:new a.ci(ce),u_lighting_directional_dir:new a.ci(ce),u_lighting_directional_color:new a.ci(ce),u_ground_radiance:new a.ci(ce)}))(l)),M.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(ce=>({u_light_matrix_0:new a.cl(ce),u_light_matrix_1:new a.cl(ce),u_fade_range:new a.ck(ce),u_shadow_normal_offset:new a.ci(ce),u_shadow_intensity:new a.cj(ce),u_shadow_texel_size:new a.cj(ce),u_shadow_map_resolution:new a.cj(ce),u_shadow_direction:new a.ci(ce),u_shadow_bias:new a.ci(ce),u_shadowmap_0:new a.ch(ce),u_shadowmap_1:new a.ch(ce)}))(l)))}getAttributeLocation(l,d){let v=this.attributes[d];return v===void 0&&(v=this.attributes[d]=l.getAttribLocation(this.program,d)),v}setTerrainUniformValues(l,d){if(!this.terrainUniforms)return;const v=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in d)v[T]&&v[T].set(this.program,T,d[T])}}setGlobeUniformValues(l,d){if(!this.globeUniforms)return;const v=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in d)v[T]&&v[T].set(this.program,T,d[T])}}setFogUniformValues(l,d){if(!this.fogUniforms)return;const v=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in d)v[T].set(this.program,T,d[T])}}setCutoffUniformValues(l,d){if(!this.cutoffUniforms)return;const v=this.cutoffUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in d)v[T].set(this.program,T,d[T])}}setLightsUniformValues(l,d){if(!this.lightsUniforms)return;const v=this.lightsUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in d)v[T].set(this.program,T,d[T])}}setShadowUniformValues(l,d){if(this.failedToCreate||!this.shadowUniforms)return;const v=this.shadowUniforms;l.program.set(this.program);for(const T in d)v[T].set(this.program,T,d[T])}_drawDebugWireframe(l,d,v,T,O,M,R,N,q,H){const re=l.options.wireframe;if(re.terrain===!1&&re.layers2D===!1&&re.layers3D===!1)return;const ee=l.context;if(!(!(!re.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!re.layers2D||l._terrain&&l._terrain.renderingToTexture||!nm.includes(this.name))||!(!re.layers3D||!C0.includes(this.name))))return;const oe=ee.gl,he=l.wireframeDebugCache.getLinesFromTrianglesBuffer(l.frameCounter,O,ee);if(!he)return;const ce=[...this.fixedDefines,"DEBUG_WIREFRAME"],de=l.getOrCreateProgram(this.name,{config:this.configuration,defines:ce});ee.program.set(de.program);const _e=(Ae,We,$e)=>{if(We[Ae]&&$e[Ae])for(const Ge in We[Ae])$e[Ae][Ge]&&$e[Ae][Ge].set($e.program,Ge,We[Ae][Ge].current)};q&&q.setUniforms(de.program,ee,de.binderUniforms,R,{zoom:N}),_e("fixedUniforms",this,de),_e("terrainUniforms",this,de),_e("globeUniforms",this,de),_e("fogUniforms",this,de),_e("lightsUniforms",this,de),_e("shadowUniforms",this,de),he.bind(),ee.setColorMode(new Gn([oe.ONE,oe.ONE_MINUS_SRC_ALPHA,oe.ZERO,oe.ONE],a.ao.transparent,[!0,!0,!0,!1])),ee.setDepthMode(new An(d.func===oe.LESS?oe.LEQUAL:d.func,An.ReadOnly,d.range)),ee.setStencilMode(qn.disabled);const Me=3*M.primitiveLength*2,Ce=3*M.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const Ae=H||1;for(let We=0;We<Ae;++We)de.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",We),oe.drawElements(oe.LINES,Me,oe.UNSIGNED_SHORT,Ce)}else H&&H>1?oe.drawElementsInstanced(oe.LINES,Me,oe.UNSIGNED_SHORT,Ce,H):oe.drawElements(oe.LINES,Me,oe.UNSIGNED_SHORT,Ce);O.bind(),ee.program.set(this.program),ee.setDepthMode(d),ee.setStencilMode(v),ee.setColorMode(T)}checkUniforms(l,d,v){if(this.fixedDefines.includes(d)){for(const T of Object.keys(v))if(!v[T].initialized)throw new Error(`Program '${this.name}', from draw '${l}': uniform ${T} not set but required by ${d} being defined`)}}draw(l,d,v,T,O,M,R,N,q,H,re,ee,oe,he,ce,de){const _e=l.context,Me=_e.gl;if(this.failedToCreate)return;_e.program.set(this.program),_e.setDepthMode(v),_e.setStencilMode(T),_e.setColorMode(O),_e.setCullFace(M);for(const[Fe,Re]of this.fixedUniformsEntries)Re.set(this.program,Fe,R[Fe]);he&&he.setUniforms(this.program,_e,this.binderUniforms,ee,{zoom:oe});const Ce={[Me.POINTS]:1,[Me.LINES]:2,[Me.TRIANGLES]:3,[Me.LINE_STRIP]:1}[d];this.checkUniforms(N,"RENDER_SHADOWS",this.shadowUniforms);const Ae=ce||[],We=he?he.getPaintVertexBuffers():[],$e=d===Me.TRIANGLES&&H,Ge=de&&de>0?1:void 0;for(const Fe of re.get()){const Re=Fe.vaos||(Fe.vaos={});if((Re[N]||(Re[N]=new Yp)).bind(_e,this,q,We,H,Fe.vertexOffset,Ae,Ge),this.forceManualRenderingForInstanceIDShaders){const et=de||1;for(let nt=0;nt<et;++nt)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",nt),H?Me.drawElements(d,Fe.primitiveLength*Ce,Me.UNSIGNED_SHORT,Fe.primitiveOffset*Ce*2):Me.drawArrays(d,Fe.vertexOffset,Fe.vertexLength)}else de&&de>1?Me.drawElementsInstanced(d,Fe.primitiveLength*Ce,Me.UNSIGNED_SHORT,Fe.primitiveOffset*Ce*2,de):H?Me.drawElements(d,Fe.primitiveLength*Ce,Me.UNSIGNED_SHORT,Fe.primitiveOffset*Ce*2):Me.drawArrays(d,Fe.vertexOffset,Fe.vertexLength);$e&&this._drawDebugWireframe(l,v,T,O,H,Fe,ee,oe,he,de)}}}function Bg(y,l,d=0){const v=Math.pow(2,l.tileID.overscaledZ),T=l.tileSize*Math.pow(2,y.transform.tileZoom)/v,O=T*(l.tileID.canonical.x+l.tileID.wrap*v),M=T*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture?l.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/a.ay(l,1,y.transform.tileZoom),u_pixel_coord_upper:[O>>16,M>>16],u_pixel_coord_lower:[65535&O,65535&M],u_pattern_transition:d}}const jg={terrain:0,flat:1},a1=a.bC(),kc=(y,l,d,v,T,O,M,R,N,q,H,re,ee,oe,he,ce,de,_e)=>{const Me=l.style.light,Ce=Me.properties.get("position"),Ae=[Ce.x,Ce.y,Ce.z],We=a.dO();Me.properties.get("anchor")==="viewport"&&(a.dP(We,-l.transform.angle),a.dQ(Ae,Ae,We));const $e=Me.properties.get("color").toPremultipliedRenderColor(null),Ge=l.transform,Fe={u_matrix:y,u_lightpos:Ae,u_lightintensity:Me.properties.get("intensity"),u_lightcolor:[$e.r,$e.g,$e.b],u_vertical_gradient:+d,u_opacity:v,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:a1,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:jg[q],u_base_type:jg[H],u_ao:T,u_edge_radius:O,u_width_scale:M,u_flood_light_color:he,u_vertical_scale:ce,u_flood_light_intensity:de,u_ground_shadow_factor:_e};return Ge.projection.name==="globe"&&(Fe.u_tile_id=[R.canonical.x,R.canonical.y,1<<R.canonical.z],Fe.u_zoom_transition=re,Fe.u_inv_rot_matrix=oe,Fe.u_merc_center=ee,Fe.u_up_dir=Ge.projection.upVector(new a.cD(0,0,0),ee[0]*a.al,ee[1]*a.al),Fe.u_height_lift=N),Fe},Of=(y,l,d,v,T,O)=>({u_matrix:y,u_edge_radius:l,u_width_scale:d,u_vertical_scale:v,u_height_type:jg[T],u_base_type:jg[O]}),M0=(y,l,d,v,T,O,M,R,N,q,H,re,ee,oe,he,ce,de,_e)=>{const Me=kc(y,l,d,v,T,O,M,R,q,H,re,ee,oe,he,ce,de,1,[0,0,0]),Ce={u_height_factor:-Math.pow(2,R.overscaledZ)/N.tileSize/8};return Object.assign(Me,Bg(l,N,_e),Ce)},gh=(y,l,d)=>({u_matrix:y,u_emissive_strength:l,u_ground_shadow_factor:d}),yh=(y,l,d,v,T,O=0)=>Object.assign(gh(y,l,T),Bg(d,v,O)),rm=(y,l,d,v)=>({u_matrix:y,u_world:d,u_emissive_strength:l,u_ground_shadow_factor:v}),Ug=(y,l,d,v,T,O,M=0)=>Object.assign(yh(y,l,d,v,O,M),{u_world:T}),Md=(y,l)=>({u_matrix:y,u_depth_bias:l}),Yu=(y,l)=>({u_matrix:y,u_ground_shadow_factor:l}),_h=(y,l,d,v,T)=>({u_matrix:y,u_camera_pos:[l[0],l[1],l[2]],u_depth_bias:d,u_height_scale:v,u_reset_depth:T}),Lc=(y,l,d,v,T,O,M,R,N)=>({u_matrix:y,u_normal_matrix:l,u_opacity:d,u_faux_facade_ao_intensity:v,u_camera_pos:T,u_tile_to_meter:O,u_facade_emissive_chance:M,u_flood_light_color:R,u_flood_light_intensity:N}),D0=y=>({u_matrix:y}),sl=y=>({u_matrix:y}),$g=(y,l,d,v,T,O,M,R)=>{const N=a.al/O.tileSize;return{u_matrix:y,u_inv_rot_matrix:l,u_camera_to_center_distance:d.getCameraToCenterDistance(R),u_extrude_scale:[d.pixelsToGLUnits[0]/N,d.pixelsToGLUnits[1]/N],u_zoom_transition:v,u_tile_id:M,u_merc_center:T}},im=(y,l,d,v)=>({u_matrix:y,u_inv_matrix:l,u_camera_to_center_distance:d.getCameraToCenterDistance(v),u_viewport_size:[d.width,d.height]}),zc=(y,l,d=1)=>({u_matrix:y,u_color:l,u_overlay:0,u_overlay_scale:d}),Cf=a.bC(),Dd=(y,l,d,v,T,O,M)=>{const R=y.transform,N=R.projection.name==="globe",q=N?a.dR(R.zoom,l.canonical)*R._pixelsPerMercatorPixel:a.ay(d,1,O),H={u_matrix:l.projMatrix,u_extrude_scale:q,u_intensity:M,u_inv_rot_matrix:Cf,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(N){H.u_inv_rot_matrix=v,H.u_merc_center=T,H.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],H.u_zoom_transition=a.aj(R.zoom);const re=T[0]*a.al,ee=T[1]*a.al;H.u_up_dir=R.projection.upVector(new a.cD(0,0,0),re,ee)}return H};function am(y,[l,d,v,T],[O,M]){if(O===M)return[0,0,0,0];const R=255*(y-1)/(y*(M-O));return[l*R,d*R,v*R,T*R]}function U_(y,l,[d,v]){return d===v?0:.5/y+(l-d)*(y-1)/(y*(v-d))}const Id=(y,l,d,v,T,O,M,R,N,q,H,re,ee,oe,he,ce,de,_e,Me,Ce,Ae)=>({u_matrix:y,u_normalize_matrix:l,u_globe_matrix:d,u_merc_matrix:v,u_grid_matrix:T,u_tl_parent:O,u_scale_parent:q,u_fade_t:H.mix,u_opacity:H.opacity*re.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:re.paint.get("raster-brightness-min"),u_brightness_high:re.paint.get("raster-brightness-max"),u_saturation_factor:a.dT(re.paint.get("raster-saturation")),u_contrast_factor:a.dS(re.paint.get("raster-contrast")),u_spin_weights:Mf(re.paint.get("raster-hue-rotate")),u_perspective_transform:ee,u_raster_elevation:oe,u_zoom_transition:M,u_merc_center:R,u_cutoff_params:N,u_colorization_mix:am(a.dU,ce,_e),u_colorization_offset:U_(a.dU,de,_e),u_color_ramp:he,u_texture_offset:[Ce/(Me+2*Ce),Me/(Me+2*Ce)],u_texture_res:[Me+2*Ce,Me+2*Ce],u_emissive_strength:Ae});function Mf(y){y*=Math.PI/180;const l=Math.sin(y),d=Math.cos(y);return[(2*d+1)/3,(-Math.sqrt(3)*l-d+1)/3,(Math.sqrt(3)*l-d+1)/3]}const Pd=.05,o1=(y,l,d,v,T,O,M,R,N,q,H,re)=>({u_matrix:y,u_normalize_matrix:l,u_globe_matrix:d,u_merc_matrix:v,u_grid_matrix:T,u_tl_parent:O,u_scale_parent:q,u_fade_t:H.mix,u_opacity:H.opacity,u_image0:0,u_image1:1,u_raster_elevation:re,u_zoom_transition:M,u_merc_center:R,u_cutoff_params:N}),Rd=(y,l,d,v,T,O,M,R,N,q)=>({u_particle_texture:y,u_particle_texture_side_len:l,u_tile_offset:d,u_velocity:v,u_color_ramp:O,u_velocity_res:T,u_max_speed:M,u_uv_offset:R,u_data_scale:[255*N[0],255*N[1]],u_data_offset:q,u_particle_pos_scale:1.1,u_particle_pos_offset:[Pd,Pd]}),$_=(y,l,d,v,T,O,M,R,N,q)=>({u_particle_texture:y,u_particle_texture_side_len:l,u_velocity:d,u_velocity_res:v,u_max_speed:T,u_speed_factor:O,u_reset_rate:M,u_rand_seed:Math.random(),u_uv_offset:R,u_data_scale:[255*N[0],255*N[1]],u_data_offset:q,u_particle_pos_scale:1.1,u_particle_pos_offset:[Pd,Pd]}),Vg=a.bC(),kd=(y,l,d,v,T,O,M,R,N,q,H,re,ee,oe,he,ce,de,_e,Me,Ce,Ae,We,$e,Ge)=>{const Fe=T.transform,Re={u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:Fe.getCameraToCenterDistance(Me),u_rotate_symbol:+d,u_aspect_ratio:Fe.width/Fe.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:O,u_label_plane_matrix:M,u_coord_matrix:R,u_is_text:+q,u_elevation_from_sea:N?1:0,u_pitch_with_map:+v,u_texsize:H,u_texsize_icon:re,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Vg,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Vg,u_up_vector:[0,-1,0],u_color_adj_mat:We,u_icon_transition:$e||0,u_gamma_scale:v?T.transform.getCameraToCenterDistance(Me)*Math.cos(T.terrain?0:T.transform._pitch):1,u_device_pixel_ratio:a.o.devicePixelRatio,u_is_halo:1,u_scale_factor:Ge||1,u_ground_shadow_factor:Ce,u_inv_matrix:a.bl(a.bC(),M),u_normal_scale:Ae,u_lutTexture:10};return Me.name==="globe"&&(Re.u_tile_id=[oe.canonical.x,oe.canonical.y,1<<oe.canonical.z],Re.u_zoom_transition=he,Re.u_inv_rot_matrix=de,Re.u_merc_center=ce,Re.u_camera_forward=Fe._camera.forward(),Re.u_ecef_origin=a.dV(Fe.globeMatrix,oe.toUnwrapped()),Re.u_tile_matrix=Float32Array.from(Fe.globeMatrix),Re.u_up_vector=_e),Re},Fc=(y,l,d,v)=>({u_matrix:y,u_emissive_strength:l,u_opacity:d,u_color:v}),Es=(y,l,d,v,T,O,M,R,N)=>Object.assign((function(q,H,re,ee,oe,he){const{width:ce,height:de}=ee.imageManager.getPixelSize(H),_e=Math.pow(2,he.tileID.overscaledZ),Me=he.tileSize*Math.pow(2,ee.transform.tileZoom)/_e,Ce=Me*(he.tileID.canonical.x+he.tileID.wrap*_e),Ae=Me*he.tileID.canonical.y;return{u_image:0,u_pattern_tl:re.tl,u_pattern_br:re.br,u_texsize:[ce,de],u_pattern_size:re.displaySize,u_pattern_units_to_pixels:oe?[ee.transform.width,-1*ee.transform.height]:[1/a.ay(he,1,ee.transform.tileZoom),1/a.ay(he,1,ee.transform.tileZoom)],u_pixel_coord_upper:[Ce>>16,Ae>>16],u_pixel_coord_lower:[65535&Ce,65535&Ae]}})(0,O,M,v,R,N),{u_matrix:y,u_emissive_strength:l,u_opacity:d}),us=new Float32Array(a.bA([])),Wu=(y,l,d,v,T,O,M,R,N,q,H,re,ee,oe=[0,0,0],he,ce,de)=>{const _e=T.style.light,Me=_e.properties.get("position"),Ce=[-Me.x,-Me.y,Me.z],Ae=a.dO();_e.properties.get("anchor")==="viewport"&&(a.dP(Ae,-T.transform.angle),a.dQ(Ce,Ce,Ae));const We=H.alphaMode==="MASK",$e=_e.properties.get("color").toNonPremultipliedRenderColor(null),Ge=ee.paint.get("model-ambient-occlusion-intensity"),Fe=ee.paint.get("model-color").constantOr(a.ao.white).toNonPremultipliedRenderColor(null);return Fe.a=ee.paint.get("model-color-mix-intensity").constantOr(0),de&&(Fe.r=de[0],Fe.g=de[1],Fe.b=de[2],Fe.a=de[3]),ce&&(Fe.r=ce.color.r,Fe.g=ce.color.g,Fe.b=ce.color.b,Fe.a=ce.colorMix,re=ce.emissionStrength,O*=ce.opacity),{u_matrix:y,u_lighting_matrix:l,u_normal_matrix:d,u_node_matrix:v||us,u_lightpos:Ce,u_lightintensity:_e.properties.get("intensity"),u_lightcolor:[$e.r,$e.g,$e.b],u_camera_pos:oe,u_opacity:O,u_baseTextureIsAlpha:0,u_alphaMask:+We,u_alphaCutoff:H.alphaCutoff,u_baseColorFactor:M.toNonPremultipliedRenderColor(null).toArray01(),u_emissiveFactor:R.toNonPremultipliedRenderColor(null).toArray01(),u_metallicFactor:N,u_roughnessFactor:q,u_baseColorTexture:5,u_metallicRoughnessTexture:6,u_normalTexture:7,u_occlusionTexture:8,u_emissionTexture:9,u_lutTexture:10,u_color_mix:Fe.toArray01(),u_aoIntensity:Ge,u_emissive_strength:re,u_occlusionTextureTransform:he||[0,0,0,0]}},Ld=(y,l=us,d=us)=>({u_matrix:y,u_instance:l,u_node_matrix:d}),qg={fillExtrusion:y=>({u_matrix:new a.cl(y),u_lightpos:new a.ci(y),u_lightintensity:new a.cj(y),u_lightcolor:new a.ci(y),u_vertical_gradient:new a.cj(y),u_opacity:new a.cj(y),u_edge_radius:new a.cj(y),u_width_scale:new a.cj(y),u_ao:new a.ck(y),u_height_type:new a.ch(y),u_base_type:new a.ch(y),u_tile_id:new a.ci(y),u_zoom_transition:new a.cj(y),u_inv_rot_matrix:new a.cl(y),u_merc_center:new a.ck(y),u_up_dir:new a.ci(y),u_height_lift:new a.cj(y),u_flood_light_color:new a.ci(y),u_vertical_scale:new a.cj(y),u_flood_light_intensity:new a.cj(y),u_ground_shadow_factor:new a.ci(y)}),fillExtrusionDepth:y=>({u_matrix:new a.cl(y),u_edge_radius:new a.cj(y),u_width_scale:new a.cj(y),u_vertical_scale:new a.cj(y),u_height_type:new a.ch(y),u_base_type:new a.ch(y)}),fillExtrusionPattern:y=>({u_matrix:new a.cl(y),u_lightpos:new a.ci(y),u_lightintensity:new a.cj(y),u_lightcolor:new a.ci(y),u_vertical_gradient:new a.cj(y),u_height_factor:new a.cj(y),u_edge_radius:new a.cj(y),u_width_scale:new a.cj(y),u_ao:new a.ck(y),u_height_type:new a.ch(y),u_base_type:new a.ch(y),u_tile_id:new a.ci(y),u_zoom_transition:new a.cj(y),u_inv_rot_matrix:new a.cl(y),u_merc_center:new a.ck(y),u_up_dir:new a.ci(y),u_height_lift:new a.cj(y),u_image:new a.ch(y),u_texsize:new a.ck(y),u_pixel_coord_upper:new a.ck(y),u_pixel_coord_lower:new a.ck(y),u_tile_units_to_pixels:new a.cj(y),u_opacity:new a.cj(y),u_pattern_transition:new a.cj(y)}),fillExtrusionGroundEffect:y=>({u_matrix:new a.cl(y),u_opacity:new a.cj(y),u_ao_pass:new a.cj(y),u_meter_to_tile:new a.cj(y),u_ao:new a.ck(y),u_flood_light_intensity:new a.cj(y),u_flood_light_color:new a.ci(y),u_attenuation:new a.cj(y),u_edge_radius:new a.cj(y),u_fb:new a.ch(y),u_fb_size:new a.cj(y),u_dynamic_offset:new a.cj(y)}),fill:y=>({u_matrix:new a.cl(y),u_emissive_strength:new a.cj(y),u_ground_shadow_factor:new a.ci(y)}),fillPattern:y=>({u_matrix:new a.cl(y),u_emissive_strength:new a.cj(y),u_image:new a.ch(y),u_texsize:new a.ck(y),u_pixel_coord_upper:new a.ck(y),u_pixel_coord_lower:new a.ck(y),u_tile_units_to_pixels:new a.cj(y),u_ground_shadow_factor:new a.ci(y),u_pattern_transition:new a.cj(y)}),fillOutline:y=>({u_matrix:new a.cl(y),u_emissive_strength:new a.cj(y),u_world:new a.ck(y),u_ground_shadow_factor:new a.ci(y)}),fillOutlinePattern:y=>({u_matrix:new a.cl(y),u_emissive_strength:new a.cj(y),u_world:new a.ck(y),u_image:new a.ch(y),u_texsize:new a.ck(y),u_pixel_coord_upper:new a.ck(y),u_pixel_coord_lower:new a.ck(y),u_tile_units_to_pixels:new a.cj(y),u_ground_shadow_factor:new a.ci(y),u_pattern_transition:new a.cj(y)}),building:y=>({u_matrix:new a.cl(y),u_normal_matrix:new a.cl(y),u_opacity:new a.cj(y),u_faux_facade_ao_intensity:new a.cj(y),u_camera_pos:new a.ci(y),u_tile_to_meter:new a.cj(y),u_facade_emissive_chance:new a.cj(y),u_flood_light_color:new a.ci(y),u_flood_light_intensity:new a.cj(y)}),buildingBloom:y=>({u_matrix:new a.cl(y)}),buildingDepth:y=>({u_matrix:new a.cl(y)}),elevatedStructuresDepth:y=>({u_matrix:new a.cl(y),u_depth_bias:new a.cj(y)}),elevatedStructures:y=>({u_matrix:new a.cl(y),u_ground_shadow_factor:new a.ci(y)}),elevatedStructuresDepthReconstruct:y=>({u_matrix:new a.cl(y),u_camera_pos:new a.ci(y),u_depth_bias:new a.cj(y),u_height_scale:new a.cj(y),u_reset_depth:new a.cj(y)}),circle:a.dY,collisionBox:y=>({u_matrix:new a.cl(y),u_inv_rot_matrix:new a.cl(y),u_camera_to_center_distance:new a.cj(y),u_extrude_scale:new a.ck(y),u_zoom_transition:new a.cj(y),u_merc_center:new a.ck(y),u_tile_id:new a.ci(y)}),collisionCircle:y=>({u_matrix:new a.cl(y),u_inv_matrix:new a.cl(y),u_camera_to_center_distance:new a.cj(y),u_viewport_size:new a.ck(y)}),debug:y=>({u_color:new a.dB(y),u_matrix:new a.cl(y),u_overlay:new a.ch(y),u_overlay_scale:new a.cj(y)}),clippingMask:y=>({u_matrix:new a.cl(y)}),heatmap:y=>({u_extrude_scale:new a.cj(y),u_intensity:new a.cj(y),u_matrix:new a.cl(y),u_inv_rot_matrix:new a.cl(y),u_merc_center:new a.ck(y),u_tile_id:new a.ci(y),u_zoom_transition:new a.cj(y),u_up_dir:new a.ci(y)}),heatmapTexture:y=>({u_image:new a.ch(y),u_color_ramp:new a.ch(y),u_opacity:new a.cj(y)}),hillshade:y=>({u_matrix:new a.cl(y),u_image:new a.ch(y),u_latrange:new a.ck(y),u_light:new a.ck(y),u_shadow:new a.dB(y),u_highlight:new a.dB(y),u_emissive_strength:new a.cj(y),u_accent:new a.dB(y)}),hillshadePrepare:y=>({u_matrix:new a.cl(y),u_image:new a.ch(y),u_dimension:new a.ck(y),u_zoom:new a.cj(y)}),line:a.dX,linePattern:a.dW,raster:y=>({u_matrix:new a.cl(y),u_normalize_matrix:new a.cl(y),u_globe_matrix:new a.cl(y),u_merc_matrix:new a.cl(y),u_grid_matrix:new a.dC(y),u_tl_parent:new a.ck(y),u_scale_parent:new a.cj(y),u_fade_t:new a.cj(y),u_opacity:new a.cj(y),u_image0:new a.ch(y),u_image1:new a.ch(y),u_brightness_low:new a.cj(y),u_brightness_high:new a.cj(y),u_saturation_factor:new a.cj(y),u_contrast_factor:new a.cj(y),u_spin_weights:new a.ci(y),u_perspective_transform:new a.ck(y),u_raster_elevation:new a.cj(y),u_zoom_transition:new a.cj(y),u_merc_center:new a.ck(y),u_cutoff_params:new a.d3(y),u_colorization_mix:new a.d3(y),u_colorization_offset:new a.cj(y),u_color_ramp:new a.ch(y),u_texture_offset:new a.ck(y),u_texture_res:new a.ck(y),u_emissive_strength:new a.cj(y)}),rasterParticle:y=>({u_matrix:new a.cl(y),u_normalize_matrix:new a.cl(y),u_globe_matrix:new a.cl(y),u_merc_matrix:new a.cl(y),u_grid_matrix:new a.dC(y),u_tl_parent:new a.ck(y),u_scale_parent:new a.cj(y),u_fade_t:new a.cj(y),u_opacity:new a.cj(y),u_image0:new a.ch(y),u_image1:new a.ch(y),u_raster_elevation:new a.cj(y),u_zoom_transition:new a.cj(y),u_merc_center:new a.ck(y),u_cutoff_params:new a.d3(y)}),rasterParticleTexture:y=>({u_texture:new a.ch(y),u_opacity:new a.cj(y)}),rasterParticleDraw:y=>({u_particle_texture:new a.ch(y),u_particle_texture_side_len:new a.cj(y),u_tile_offset:new a.ck(y),u_velocity:new a.ch(y),u_color_ramp:new a.ch(y),u_velocity_res:new a.ck(y),u_max_speed:new a.cj(y),u_uv_offset:new a.ck(y),u_data_scale:new a.ck(y),u_data_offset:new a.cj(y),u_particle_pos_scale:new a.cj(y),u_particle_pos_offset:new a.ck(y)}),rasterParticleUpdate:y=>({u_particle_texture:new a.ch(y),u_particle_texture_side_len:new a.cj(y),u_velocity:new a.ch(y),u_velocity_res:new a.ck(y),u_max_speed:new a.cj(y),u_speed_factor:new a.cj(y),u_reset_rate:new a.cj(y),u_rand_seed:new a.cj(y),u_uv_offset:new a.ck(y),u_data_scale:new a.ck(y),u_data_offset:new a.cj(y),u_particle_pos_scale:new a.cj(y),u_particle_pos_offset:new a.ck(y)}),symbol:y=>({u_is_size_zoom_constant:new a.ch(y),u_is_size_feature_constant:new a.ch(y),u_size_t:new a.cj(y),u_size:new a.cj(y),u_camera_to_center_distance:new a.cj(y),u_rotate_symbol:new a.ch(y),u_aspect_ratio:new a.cj(y),u_fade_change:new a.cj(y),u_matrix:new a.cl(y),u_label_plane_matrix:new a.cl(y),u_coord_matrix:new a.cl(y),u_is_text:new a.ch(y),u_elevation_from_sea:new a.ch(y),u_pitch_with_map:new a.ch(y),u_texsize:new a.ck(y),u_texsize_icon:new a.ck(y),u_texture:new a.ch(y),u_texture_icon:new a.ch(y),u_gamma_scale:new a.cj(y),u_device_pixel_ratio:new a.cj(y),u_tile_id:new a.ci(y),u_zoom_transition:new a.cj(y),u_inv_rot_matrix:new a.cl(y),u_merc_center:new a.ck(y),u_camera_forward:new a.ci(y),u_tile_matrix:new a.cl(y),u_up_vector:new a.ci(y),u_ecef_origin:new a.ci(y),u_is_halo:new a.ch(y),u_icon_transition:new a.cj(y),u_color_adj_mat:new a.cl(y),u_scale_factor:new a.cj(y),u_ground_shadow_factor:new a.ci(y),u_inv_matrix:new a.cl(y),u_normal_scale:new a.cj(y),u_lutTexture:new a.ch(y)}),background:y=>({u_matrix:new a.cl(y),u_emissive_strength:new a.cj(y),u_opacity:new a.cj(y),u_color:new a.dB(y)}),backgroundPattern:y=>({u_matrix:new a.cl(y),u_emissive_strength:new a.cj(y),u_opacity:new a.cj(y),u_image:new a.ch(y),u_pattern_tl:new a.ck(y),u_pattern_br:new a.ck(y),u_texsize:new a.ck(y),u_pattern_size:new a.ck(y),u_pixel_coord_upper:new a.ck(y),u_pixel_coord_lower:new a.ck(y),u_pattern_units_to_pixels:new a.ck(y)}),terrainRaster:y=>({u_matrix:new a.cl(y),u_image0:new a.ch(y),u_image1:new a.ch(y),u_skirt_height:new a.cj(y),u_ground_shadow_factor:new a.ci(y),u_emissive_texture_available:new a.cj(y)}),skybox:y=>({u_matrix:new a.cl(y),u_sun_direction:new a.ci(y),u_cubemap:new a.ch(y),u_opacity:new a.cj(y),u_temporal_offset:new a.cj(y)}),skyboxGradient:y=>({u_matrix:new a.cl(y),u_color_ramp:new a.ch(y),u_center_direction:new a.ci(y),u_radius:new a.cj(y),u_opacity:new a.cj(y),u_temporal_offset:new a.cj(y)}),skyboxCapture:y=>({u_matrix_3f:new a.dC(y),u_sun_direction:new a.ci(y),u_sun_intensity:new a.cj(y),u_color_tint_r:new a.d3(y),u_color_tint_m:new a.d3(y),u_luminance:new a.cj(y)}),globeRaster:y=>({u_proj_matrix:new a.cl(y),u_globe_matrix:new a.cl(y),u_normalize_matrix:new a.cl(y),u_merc_matrix:new a.cl(y),u_zoom_transition:new a.cj(y),u_merc_center:new a.ck(y),u_image0:new a.ch(y),u_image1:new a.ch(y),u_grid_matrix:new a.dC(y),u_skirt_height:new a.cj(y),u_far_z_cutoff:new a.cj(y),u_frustum_tl:new a.ci(y),u_frustum_tr:new a.ci(y),u_frustum_br:new a.ci(y),u_frustum_bl:new a.ci(y),u_globe_pos:new a.ci(y),u_globe_radius:new a.cj(y),u_viewport:new a.ck(y),u_emissive_texture_available:new a.cj(y)}),globeAtmosphere:y=>({u_frustum_tl:new a.ci(y),u_frustum_tr:new a.ci(y),u_frustum_br:new a.ci(y),u_frustum_bl:new a.ci(y),u_horizon:new a.cj(y),u_transition:new a.cj(y),u_fadeout_range:new a.cj(y),u_atmosphere_fog_color:new a.d3(y),u_high_color:new a.d3(y),u_space_color:new a.d3(y),u_temporal_offset:new a.cj(y),u_horizon_angle:new a.cj(y)}),model:y=>({u_matrix:new a.cl(y),u_lighting_matrix:new a.cl(y),u_normal_matrix:new a.cl(y),u_node_matrix:new a.cl(y),u_lightpos:new a.ci(y),u_lightintensity:new a.cj(y),u_lightcolor:new a.ci(y),u_camera_pos:new a.ci(y),u_opacity:new a.cj(y),u_baseColorFactor:new a.d3(y),u_emissiveFactor:new a.d3(y),u_metallicFactor:new a.cj(y),u_roughnessFactor:new a.cj(y),u_baseTextureIsAlpha:new a.ch(y),u_alphaMask:new a.ch(y),u_alphaCutoff:new a.cj(y),u_baseColorTexture:new a.ch(y),u_metallicRoughnessTexture:new a.ch(y),u_normalTexture:new a.ch(y),u_occlusionTexture:new a.ch(y),u_emissionTexture:new a.ch(y),u_lutTexture:new a.ch(y),u_color_mix:new a.d3(y),u_aoIntensity:new a.cj(y),u_emissive_strength:new a.cj(y),u_occlusionTextureTransform:new a.d3(y)}),modelDepth:y=>({u_matrix:new a.cl(y),u_instance:new a.cl(y),u_node_matrix:new a.cl(y)}),groundShadow:y=>({u_matrix:new a.cl(y),u_ground_shadow_factor:new a.ci(y)}),stars:y=>({u_matrix:new a.cl(y),u_up:new a.ci(y),u_right:new a.ci(y),u_intensity_multiplier:new a.cj(y)}),snowParticle:y=>({u_modelview:new a.cl(y),u_projection:new a.cl(y),u_time:new a.cj(y),u_cam_pos:new a.ci(y),u_velocityConeAperture:new a.cj(y),u_velocity:new a.cj(y),u_horizontalOscillationRadius:new a.cj(y),u_horizontalOscillationRate:new a.cj(y),u_boxSize:new a.cj(y),u_billboardSize:new a.cj(y),u_simpleShapeParameters:new a.ck(y),u_screenSize:new a.ck(y),u_thinningCenterPos:new a.ck(y),u_thinningShape:new a.ci(y),u_thinningAffectedRatio:new a.cj(y),u_thinningParticleOffset:new a.cj(y),u_particleColor:new a.d3(y),u_direction:new a.ci(y)}),rainParticle:y=>({u_modelview:new a.cl(y),u_projection:new a.cl(y),u_time:new a.cj(y),u_cam_pos:new a.ci(y),u_texScreen:new a.ch(y),u_velocityConeAperture:new a.cj(y),u_velocity:new a.cj(y),u_boxSize:new a.cj(y),u_rainDropletSize:new a.ck(y),u_distortionStrength:new a.cj(y),u_rainDirection:new a.ci(y),u_color:new a.d3(y),u_screenSize:new a.ck(y),u_thinningCenterPos:new a.ck(y),u_thinningShape:new a.ci(y),u_thinningAffectedRatio:new a.cj(y),u_thinningParticleOffset:new a.cj(y),u_shapeDirectionalPower:new a.cj(y),u_shapeNormalPower:new a.cj(y),u_mode:new a.cj(y)}),vignette:y=>({u_vignetteShape:new a.ci(y),u_vignetteColor:new a.d3(y)}),occlusion:y=>({u_matrix:new a.cl(y),u_anchorPos:new a.ci(y),u_screenSizePx:new a.ck(y),u_occluderSizePx:new a.ck(y),u_color:new a.d3(y)})};class As{constructor(l,d,v,T){this.id=As.uniqueIdxCounter,As.uniqueIdxCounter++,this.context=l;const O=l.gl;this.buffer=O.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),O.bufferData(O.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||T||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){this.id=As.uniqueIdxCounter,As.uniqueIdxCounter++;const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}As.uniqueIdxCounter=0;const Al={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class So{constructor(l,d,v,T,O,M){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=T,this.instanceCount=M,this.context=l;const R=l.gl;this.buffer=R.createBuffer(),l.bindVertexBuffer.set(this.buffer),R.bufferData(R.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||O||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,d){for(let v=0;v<this.attributes.length;v++){const T=d.getAttributeLocation(l,this.attributes[v].name);T!==-1&&l.enableVertexAttribArray(T)}}setVertexAttribPointers(l,d,v){for(let T=0;T<this.attributes.length;T++){const O=this.attributes[T],M=d.getAttributeLocation(l,O.name);M!==-1&&l.vertexAttribPointer(M,O.components,l[Al[O.type]],!1,this.itemSize,O.offset+this.itemSize*(v||0))}}setVertexAttribDivisor(l,d,v){for(let T=0;T<this.attributes.length;T++){const O=d.getAttributeLocation(l,this.attributes[T].name);O!==-1&&this.instanceCount&&this.instanceCount>0&&l.vertexAttribDivisor(O,v)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Nc{constructor(l,d,v,T,O){this.context=l,this.width=d,this.height=v;const M=this.framebuffer=l.gl.createFramebuffer();T>0&&(this.colorAttachment0=new Rg(l,M,0)),T>1&&(this.colorAttachment1=new Rg(l,M,1)),O&&(this.depthAttachmentType=O,this.depthAttachment=O==="renderbuffer"?new Zp(l,M):new kg(l,M))}createColorAttachment(l,d){d===0?this.colorAttachment0=new Rg(l,this.framebuffer,0):d===1&&(this.colorAttachment1=new Rg(l,this.framebuffer,1))}removeColorAttachment(l,d){const v=this.context.gl;let T;d===0?(T=this.colorAttachment0.get(),this.colorAttachment0=void 0):d===1&&(T=this.colorAttachment1.get(),this.colorAttachment1=void 0),T&&v.deleteTexture(T)}destroy(){const l=this.context.gl;if(this.colorAttachment0){const d=this.colorAttachment0.get();d&&l.deleteTexture(d)}if(this.colorAttachment1){const d=this.colorAttachment1.get();d&&l.deleteTexture(d)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const d=this.depthAttachment.get();d&&l.deleteRenderbuffer(d)}else{const d=this.depthAttachment.get();d&&l.deleteTexture(d)}l.deleteFramebuffer(this.framebuffer)}}class du{constructor(l,d){this.gl=l,this.clearColor=new Ic(this),this.clearDepth=new Vu(this),this.clearStencil=new qu(this),this.colorMask=new Mg(this),this.depthMask=new Dg(this),this.stencilMask=new bf(this),this.stencilFunc=new Ad(this),this.stencilOp=new wo(this),this.stencilTest=new ua(this),this.depthRange=new Di(this),this.depthTest=new Pc(this),this.depthFunc=new Hl(this),this.blend=new hh(this),this.blendFunc=new Hu(this),this.blendColor=new Ig(this),this.blendEquation=new N_(this),this.cullFace=new xf(this),this.cullFaceSide=new Gu(this),this.frontFace=new B_(this),this.program=new Wp(this),this.activeTexture=new j_(this),this.viewport=new hu(this),this.bindFramebuffer=new Rc(this),this.bindRenderbuffer=new dh(this),this.bindTexture=new wf(this),this.bindVertexBuffer=new O0(this),this.bindElementBuffer=new Pg(this),this.bindVertexArrayOES=new ph(this),this.pixelStoreUnpack=new Xp(this),this.pixelStoreUnpackPremultiplyAlpha=new Sf(this),this.pixelStoreUnpackFlipY=new ls(this),this.options=d?Object.assign({},d):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=d&&!!d.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=l.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),this.extBlendFuncExtended=l.getExtension("WEBGL_blend_func_extended")}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,d,v){return new As(this,l,d,v)}createVertexBuffer(l,d,v,T,O){return new So(this,l,d,v,T,O)}createRenderbuffer(l,d,v){const T=this.gl,O=T.createRenderbuffer();return this.bindRenderbuffer.set(O),T.renderbufferStorage(T.RENDERBUFFER,l,d,v),this.bindRenderbuffer.set(null),O}createFramebuffer(l,d,v,T){return new Nc(this,l,d,v,T)}clear({color:l,depth:d,stencil:v,colorMask:T}){const O=this.gl;let M=0;l&&(M|=O.COLOR_BUFFER_BIT,this.clearColor.set(l.toNonPremultipliedRenderColor(null)),this.colorMask.set(T||[!0,!0,!0,!0])),d!==void 0&&(M|=O.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),v!==void 0&&(M|=O.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),O.clear(M)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.by(l.blendFunction,Gn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor),l.blendEquation?this.blendEquation.set(l.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(l.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let Kt;function ca(y,l,d,v,T,O,M){const R=y.context,N=R.gl,q=y.transform,H=[a.aF(q.center.lng),a.aJ(q.center.lat)],re=d.layout.get("symbol-placement"),ee=d.layout.get("text-variable-anchor"),oe=d.layout.get("icon-rotation-alignment")==="map",he=d.layout.get("text-rotation-alignment")==="map",ce=re!=="point",de=[];let _e=0,Me=0;for(let Fe=0;Fe<v.length;Fe++){const Re=v[Fe],et=l.getTile(Re),nt=et.getBucket(d);if(!nt)continue;const st=nt.getProjection().createInversionMatrix(q,Re.canonical),dt=[],ft=y0(Re,nt,q),wt=!M&&oe&&ce,It=M&&he&&ce,pt=ee&&nt.hasTextData(),tt=nt.hasIconTextFit()&&pt&&nt.hasIconData(),At=wt||It||M&&pt||tt,gt=nt.projection.name==="globe",Dt=gt?a.aj(q.zoom):0;gt&&(dt.push("PROJECTION_GLOBE_VIEW"),At&&dt.push("PROJECTED_POS_ON_VIEWPORT"));const qt=y.getOrCreateProgram("collisionBox",{defines:dt});let tn=ft;T[0]===0&&T[1]===0||(tn=y.translatePosMatrix(ft,et,T,O));const Wt=M?nt.textCollisionBox:nt.iconCollisionBox,Ht=nt.collisionCircleArray;if(Ht.length>0){const yn=a.bC(),rn=tn;a.cP(yn,nt.placementInvProjMatrix,q.glCoordMatrix),a.cP(yn,yn,nt.placementViewportMatrix),de.push({circleArray:Ht,circleOffset:Me,transform:rn,invTransform:yn,projection:nt.getProjection()}),_e+=Ht.length/4,Me=_e}if(!Wt)continue;y.terrain&&y.terrain.setupElevationDraw(et,qt);const xn=gt?[Re.canonical.x,Re.canonical.y,1<<Re.canonical.z]:[0,0,0];qt.draw(y,N.LINES,An.disabled,qn.disabled,y.colorModeForRenderPass(),jn.disabled,$g(tn,st,q,Dt,H,et,xn,nt.getProjection()),d.id,Wt.layoutVertexBuffer,Wt.indexBuffer,Wt.segments,null,q.zoom,null,[Wt.collisionVertexBuffer,Wt.collisionVertexBufferExt])}if(!M||!de.length)return;const Ce=y.getOrCreateProgram("collisionCircle"),Ae=new a.dZ;Ae.resize(4*_e),Ae._trim();let We=0;for(const Fe of de)for(let Re=0;Re<Fe.circleArray.length/4;Re++){const et=4*Re,nt=Fe.circleArray[et+0],st=Fe.circleArray[et+1],dt=Fe.circleArray[et+2],ft=Fe.circleArray[et+3];Ae.emplace(We++,nt,st,dt,ft,0),Ae.emplace(We++,nt,st,dt,ft,1),Ae.emplace(We++,nt,st,dt,ft,2),Ae.emplace(We++,nt,st,dt,ft,3)}(!Kt||Kt.length<2*_e)&&(Kt=(function(Fe){const Re=2*Fe,et=new a.b0;et.resize(Re),et._trim();for(let nt=0;nt<Re;nt++){const st=6*nt;et.uint16[st+0]=4*nt+0,et.uint16[st+1]=4*nt+1,et.uint16[st+2]=4*nt+2,et.uint16[st+3]=4*nt+2,et.uint16[st+4]=4*nt+3,et.uint16[st+5]=4*nt+0}return et})(_e));const $e=R.createIndexBuffer(Kt,!0),Ge=R.createVertexBuffer(Ae,a.d_.members,!0);for(const Fe of de){const Re=im(Fe.transform,Fe.invTransform,q,Fe.projection);Ce.draw(y,N.TRIANGLES,An.disabled,qn.disabled,y.colorModeForRenderPass(),jn.disabled,Re,d.id,Ge,$e,a.bg.simpleSegment(0,2*Fe.circleOffset,Fe.circleArray.length,Fe.circleArray.length/2),null,q.zoom)}Ge.destroy(),$e.destroy()}const fa=a.bC();function pu(y){const l=y._camera.getWorldToCamera(y.worldSize,1),d=a.aB([],l,y.globeMatrix);a.bl(d,d);const v=[0,0,0],T=[0,1,0,0];return a.aC(T,T,d),v[0]=T[0],v[1]=T[1],v[2]=T[2],a.aw(v,v),v}function zd({width:y,height:l,anchor:d,textOffset:v,textScale:T},O){const{horizontalAlign:M,verticalAlign:R}=a.c1(d),N=-(M-.5)*y,q=-(R-.5)*l,H=a.c2(d,v);return new a.P((N/T+H[0])*O,(q/T+H[1])*O)}function vh(y,l,d,v,T,O,M,R,N,q){const H=y.text.placedSymbolArray,re=y.text.dynamicLayoutVertexArray,ee=y.icon.dynamicLayoutVertexArray,oe={},he=y.getProjection(),ce=Ac(M,he,T),de=T.elevation,_e=he.upVectorScale(M.canonical,T.center.lat,T.worldSize).metersToTile;re.clear();for(let Me=0;Me<H.length;Me++){const Ce=H.get(Me),{tileAnchorX:Ae,tileAnchorY:We,numGlyphs:$e}=Ce,Ge=Ce.hidden||!Ce.crossTileID||y.allowVerticalPlacement&&!Ce.placedOrientation?null:v[Ce.crossTileID];if(Ge){let Fe=0,Re=0,et=0;const nt=y.elevationType==="road";if(de||nt){const gt=nt?y.getElevationFeatureForText(Me):null,Dt=a.bV.getAtTileOffset(M,new a.P(Ae,We),de,gt),[qt,tn,Wt]=he.upVector(M.canonical,Ae,We);Fe=Dt*qt*_e,Re=Dt*tn*_e,et=Dt*Wt*_e}let[st,dt,ft,wt]=cu(Ce.projectedAnchorX+Fe,Ce.projectedAnchorY+Re,Ce.projectedAnchorZ+et,d?ce:O);const It=T_(T.getCameraToCenterDistance(he),wt);let pt=a.bM(y.textSizeData,N,Ce)*It/a.bY;d&&(pt*=y.tilePixelRatio/R);const tt=zd(Ge,pt);d?({x:st,y:dt,z:ft}=he.projectTilePoint(Ae+tt.x,We+tt.y,M.canonical),[st,dt,ft]=cu(st+Fe,dt+Re,ft+et,O)):(l&&tt._rotate(-T.angle),st+=tt.x,dt+=tt.y,ft=0);const At=y.allowVerticalPlacement&&Ce.placedOrientation===a.bL.vertical?Math.PI/2:0;for(let gt=0;gt<$e;gt++)a.bO(re,st,dt,ft,At);q&&Ce.associatedIconIndex>=0&&(oe[Ce.associatedIconIndex]={x:st,y:dt,z:ft,angle:At})}else os($e,re)}if(q){ee.clear();const Me=y.icon.placedSymbolArray;for(let Ce=0;Ce<Me.length;Ce++){const Ae=Me.get(Ce),{numGlyphs:We}=Ae,$e=oe[Ce];if(Ae.hidden||!$e)os(We,ee);else{const{x:Ge,y:Fe,z:Re,angle:et}=$e;for(let nt=0;nt<We;nt++)a.bO(ee,Ge,Fe,Re,et)}}y.icon.dynamicLayoutVertexBuffer.updateData(ee)}y.text.dynamicLayoutVertexBuffer.updateData(re)}function Fd(y,l,d,v,T,O,M={}){const R=d.paint.get("icon-translate"),N=d.paint.get("text-translate"),q=d.paint.get("icon-translate-anchor"),H=d.paint.get("text-translate-anchor"),re=d.layout.get("icon-rotation-alignment"),ee=d.layout.get("text-rotation-alignment"),oe=d.layout.get("icon-pitch-alignment"),he=d.layout.get("text-pitch-alignment"),ce=d.layout.get("icon-keep-upright"),de=d.layout.get("text-keep-upright"),_e=d.paint.get("icon-color-saturation"),Me=d.paint.get("icon-color-contrast"),Ce=d.paint.get("icon-color-brightness-min"),Ae=d.paint.get("icon-color-brightness-max"),We=d.layout.get("symbol-elevation-reference")==="sea",$e=d.layout.get("icon-image-use-theme")==="none",Ge=y.context,Fe=Ge.gl,Re=y.transform,et=re==="map",nt=ee==="map",st=oe==="map",dt=he==="map",ft=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let wt=!1;const It=y.depthModeForSublayer(0,An.ReadOnly),pt=new An(y.context.gl.LEQUAL,An.ReadOnly,y.depthRangeFor3D),tt=[a.aF(Re.center.lng),a.aJ(Re.center.lat)],At=d.layout.get("text-variable-anchor"),gt=Re.projection.name==="globe",Dt=[],qt=[0,-1,0];for(const tn of v){const Wt=l.getTile(tn),Ht=Wt.getBucket(d);if(!Ht||Ht.projection.name==="mercator"&&gt||Ht.fullyClipped)continue;const xn=Ht.projection.name==="globe",yn=xn?a.aj(Re.zoom):0,rn=Ac(tn,Ht.getProjection(),Re),_n=Re.calculatePixelsToTileUnitsMatrix(Wt),Dn=At&&Ht.hasTextData(),Un=Ht.hasIconTextFit()&&Dn&&Ht.hasIconData(),Qn=Ht.getProjection().createInversionMatrix(Re,tn.canonical),yr=(1<<Wt.tileID.canonical.z)*a.al/y.transform.worldSize,$n=Hr=>{let Kn=[0,0,0];if(Hr){const tr=y.style.directionalLight,yi=y.style.ambientLight;tr&&yi&&(Kn=js(y.style,tr,yi))}return Kn},Jn=Hr=>{Re.depthOcclusionForSymbolsAndCircles&&(d.hasOcclusionOpacityProperties||y.terrain)&&(Hr.push("DEPTH_D24"),Hr.push("DEPTH_OCCLUSION"))},Yn=Hr=>{d.lut&&!$e&&(d.lut.texture||(d.lut.texture=new a.d$(y.context,d.lut.image,[d.lut.image.height,d.lut.image.height,d.lut.image.height],Ge.gl.RGBA8)),Ge.activeTexture.set(Ge.gl.TEXTURE0+10),d.lut.texture&&d.lut.texture.bind(Ge.gl.LINEAR,Ge.gl.CLAMP_TO_EDGE),Hr.push("APPLY_LUT_ON_GPU"))},Ur=()=>{const Hr=et&&d.layout.get("symbol-placement")!=="point",Kn=[];Jn(Kn),Yn(Kn);const tr=Hr||Un,yi=Ht.elevationType==="road",Ji=y.shadowRenderer,ai=yi&&st&&!!Ji&&Ji.enabled,_i=$n(ai),cs=yi&&st&&!y.terrain?pt:It,Uo=d.paint.get("icon-image-cross-fade");y.terrainRenderModeElevated()&&st&&Kn.push("PITCH_WITH_MAP_TERRAIN"),xn&&(Kn.push("PROJECTION_GLOBE_VIEW"),tr&&Kn.push("PROJECTED_POS_ON_VIEWPORT")),Uo>0&&Ht.hasAnySecondaryIcon&&Kn.push("ICON_TRANSITION"),!Ht.icon.zOffsetVertexBuffer||yi&&y.terrain||Kn.push("Z_OFFSET"),_e===0&&Me===0&&Ce===0&&Ae===1||Kn.push("COLOR_ADJUSTMENT"),Ht.sdfIcons&&Kn.push("RENDER_SDF"),ai&&Kn.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),yi&&st&&!y.terrain&&Ht.icon.orientationVertexBuffer&&Kn.push("ELEVATED_ROADS");const co=Ht.icon.programConfigurations.get(d.id),Gr=y.getOrCreateProgram("symbol",{config:co,defines:Kn}),ul=Wt.imageAtlasTexture?Wt.imageAtlasTexture.size:[0,0],$o=Ht.iconSizeData,Zo=a.bK($o,Re.zoom),Il=st||!Re.isOrthographic,qs=yd(rn,Wt.tileID.canonical,st,et,Re,Ht.getProjection(),_n),$i=ws(rn,Wt.tileID.canonical,st,et,Re,Ht.getProjection(),_n),xa=y.translatePosMatrix($i,Wt,R,q,!0),Si=y.translatePosMatrix(rn,Wt,R,q),Ia=tr?fa:qs,no=et&&!st&&!Hr;let Wi=qt;!gt&&!Re.mercatorFromTransition||et||(Wi=pu(Re));const cl=xn?Wi:qt,xm=d.getColorAdjustmentMatrix(_e,Me,Ce,Ae),rc=kd($o.kind,Zo,no,st,y,Si,Ia,xa,We,!1,ul,[0,0],0,tn,yn,tt,Qn,cl,Ht.getProjection(),_i,yr,xm,Uo,null),Zd=Wt.imageAtlasTexture?Wt.imageAtlasTexture:null,Kd=d.layout.get("icon-size").constantOr(0)!==1||Ht.iconsNeedLinear,fl=Ht.sdfIcons||y.options.rotating||y.options.zooming||Kd||Il?Fe.LINEAR:Fe.NEAREST,Xl=Ht.sdfIcons&&d.paint.get("icon-halo-width").constantOr(1)!==0,ic=y.terrain&&st&&Hr?a.bl(a.bC(),qs):fa;if(Hr&&Ht.icon){const Pl=a.bV.getAtTileOffsetFunc(tn,Re.center.lat,Re.worldSize,Ht.getProjection()),Ai=df(rn,Wt.tileID.canonical,st,et,Re,Ht.getProjection(),_n),zf=d.layout.get("icon-size-scale-range"),cv=a.aA(y.scaleFactor,zf[0],zf[1]);Qr(Ht,rn,y,!1,Ai,$i,st,ce,Pl,tn,cv)}return{program:Gr,buffers:Ht.icon,uniformValues:rc,atlasTexture:Zd,atlasTextureIcon:null,atlasInterpolation:fl,atlasInterpolationIcon:null,isSDF:Ht.sdfIcons,hasHalo:Xl,depthMode:cs,tile:Wt,renderWithShadows:ai,labelPlaneMatrixInv:ic}},Mr=()=>{const Hr=nt&&d.layout.get("symbol-placement")!=="point",Kn=[],tr=Hr||At||Un,yi=Ht.elevationType==="road",Ji=y.shadowRenderer,ai=yi&&dt&&!!Ji&&Ji.enabled,_i=$n(ai),cs=yi&&dt&&!y.terrain?pt:It;y.terrainRenderModeElevated()&&dt&&Kn.push("PITCH_WITH_MAP_TERRAIN"),xn&&(Kn.push("PROJECTION_GLOBE_VIEW"),tr&&Kn.push("PROJECTED_POS_ON_VIEWPORT")),!Ht.text.zOffsetVertexBuffer||yi&&y.terrain||Kn.push("Z_OFFSET"),Ht.iconsInText&&Kn.push("RENDER_TEXT_AND_SYMBOL"),Kn.push("RENDER_SDF"),ai&&Kn.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),yi&&dt&&!y.terrain&&Ht.text.orientationVertexBuffer&&Kn.push("ELEVATED_ROADS"),Jn(Kn);const Uo=Ht.text.programConfigurations.get(d.id),co=y.getOrCreateProgram("symbol",{config:Uo,defines:Kn});let Gr,ul=[0,0],$o=null;const Zo=Ht.textSizeData;Ht.iconsInText&&(ul=Wt.imageAtlasTexture?Wt.imageAtlasTexture.size:[0,0],$o=Wt.imageAtlasTexture?Wt.imageAtlasTexture:null,Gr=dt||!Re.isOrthographic||y.options.rotating||y.options.zooming||Zo.kind==="composite"||Zo.kind==="camera"?Fe.LINEAR:Fe.NEAREST);const Il=Wt.glyphAtlasTexture?Wt.glyphAtlasTexture.size:[0,0],qs=d.layout.get("text-size-scale-range"),$i=a.aA(y.scaleFactor,qs[0],qs[1]),xa=a.bK(Zo,Re.zoom,$i),Si=yd(rn,Wt.tileID.canonical,dt,nt,Re,Ht.getProjection(),_n),Ia=ws(rn,Wt.tileID.canonical,dt,nt,Re,Ht.getProjection(),_n),no=y.translatePosMatrix(Ia,Wt,N,H,!0),Wi=y.translatePosMatrix(rn,Wt,N,H),cl=tr?fa:Si,xm=nt&&!dt&&!Hr;let rc=qt;!gt&&!Re.mercatorFromTransition||nt||(rc=pu(Re));const Zd=kd(Zo.kind,xa,xm,dt,y,Wi,cl,no,We,!0,Il,ul,0,tn,yn,tt,Qn,xn?rc:qt,Ht.getProjection(),_i,yr,null,null,$i),Kd=Wt.glyphAtlasTexture?Wt.glyphAtlasTexture:null,fl=Fe.LINEAR,Xl=d.paint.get("text-halo-width").constantOr(1)!==0,ic=y.terrain&&dt&&Hr?a.bl(a.bC(),Si):fa;if(Hr&&Ht.text){const Pl=a.bV.getAtTileOffsetFunc(tn,Re.center.lat,Re.worldSize,Ht.getProjection()),Ai=df(rn,Wt.tileID.canonical,dt,nt,Re,Ht.getProjection(),_n);Qr(Ht,rn,y,!0,Ai,Ia,dt,de,Pl,tn,$i)}return{program:co,buffers:Ht.text,uniformValues:Zd,atlasTexture:Kd,atlasTextureIcon:$o,atlasInterpolation:fl,atlasInterpolationIcon:Gr,isSDF:!0,hasHalo:Xl,depthMode:cs,tile:Wt,renderWithShadows:ai,labelPlaneMatrixInv:ic}},ei=Ht.icon.segments.get().length,wr=Ht.text.segments.get().length,er=ei&&!M.onlyText?Ur():null,Rr=wr&&!M.onlyIcons?Mr():null,Pi=d.paint.get("icon-opacity").constantOr(1),ti=d.paint.get("text-opacity").constantOr(1);if(ft&&Ht.canOverlap){wt=!0;const Hr=Pi&&!M.onlyText?Ht.icon.segments.get():[],Kn=ti&&!M.onlyIcons?Ht.text.segments.get():[];for(const tr of Hr)Dt.push({segments:new a.bg([tr]),sortKey:tr.sortKey,state:er});for(const tr of Kn)Dt.push({segments:new a.bg([tr]),sortKey:tr.sortKey,state:Rr})}else M.onlyText||Dt.push({segments:Pi?Ht.icon.segments:new a.bg([]),sortKey:0,state:er}),M.onlyIcons||Dt.push({segments:ti?Ht.text.segments:new a.bg([]),sortKey:0,state:Rr})}wt&&Dt.sort((tn,Wt)=>tn.sortKey-Wt.sortKey);for(const tn of Dt){const Wt=tn.state;if(Wt)if(y.terrain?y.terrain.setupElevationDraw(Wt.tile,Wt.program,{useDepthForOcclusion:Re.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Wt.labelPlaneMatrixInv}):y.setupDepthForOcclusion(Re.depthOcclusionForSymbolsAndCircles,Wt.program),Ge.activeTexture.set(Fe.TEXTURE0),Wt.atlasTexture&&Wt.atlasTexture.bind(Wt.atlasInterpolation,Fe.CLAMP_TO_EDGE,!0),Wt.atlasTextureIcon&&(Ge.activeTexture.set(Fe.TEXTURE1),Wt.atlasTextureIcon&&Wt.atlasTextureIcon.bind(Wt.atlasInterpolationIcon,Fe.CLAMP_TO_EDGE,!0)),Wt.renderWithShadows&&y.shadowRenderer.setupShadows(Wt.tile.tileID.toUnwrapped(),Wt.program,"vector-tile"),y.uploadCommonLightUniforms(y.context,Wt.program),Wt.hasHalo){const Ht=Wt.uniformValues;Ht.u_is_halo=1,bh(Wt.buffers,tn.segments,d,y,Wt.program,Wt.depthMode,T,O,Ht,2),Ht.u_is_halo=0}else{if(Wt.isSDF){const Ht=Wt.uniformValues;Wt.hasHalo&&(Ht.u_is_halo=1,bh(Wt.buffers,tn.segments,d,y,Wt.program,Wt.depthMode,T,O,Ht,1)),Ht.u_is_halo=0}bh(Wt.buffers,tn.segments,d,y,Wt.program,Wt.depthMode,T,O,Wt.uniformValues,1)}}}function bh(y,l,d,v,T,O,M,R,N,q){const H=[y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer,y.iconTransitioningVertexBuffer,y.globeExtVertexBuffer,y.zOffsetVertexBuffer,y.orientationVertexBuffer];T.draw(v,v.context.gl.TRIANGLES,O,M,R,jn.disabled,N,d.id,y.layoutVertexBuffer,y.indexBuffer,l,d.paint,v.transform.zoom,y.programConfigurations.get(d.id),H,q)}function xh(y,l){const d=1<<y.canonical.z,v=(l.x*d-y.canonical.x-y.wrap*d)*a.al,T=(l.y*d-y.canonical.y)*a.al,O=a.e8(l.z,l.y);return a.d5(v,T,O)}function I0(y,l,d,v,T){if(!d.layout||d.layout.get("fill-elevation-reference")==="none"||d.paint.get("fill-opacity").constantOr(1)===0)return;const O=y.context.gl,M=new An(y.context.gl.LEQUAL,An.ReadWrite,y.depthRangeFor3D),R=new An(y.context.gl.GREATER,An.ReadWrite,y.depthRangeFor3D),N=(function(oe){let he=.01;return oe.isOrthographic&&(he=a.ak(1e-4,he,a.d0(oe.pitch>=Tl?1:oe.pitch/Tl))),2*he})(y.transform),q=y.transform.getFreeCameraOptions().position,H="elevatedStructuresDepthReconstruct",re=y.getOrCreateProgram(H,{defines:["DEPTH_RECONSTRUCTION"]}),ee=y.getOrCreateProgram(H);for(const oe of v){const he=l.getTile(oe),ce=he.getBucket(d);if(!ce)continue;const de=ce.elevatedStructures;if(!de)continue;const _e=ce.elevationBufferData.heightRange,Me=xh(oe.toUnwrapped(),q),Ce=y.translatePosMatrix(oe.projMatrix,he,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));let Ae,We,$e,Ge;if(T==="initialize"){if(!_e||_e.min>=1||de.depthSegments.segments[0].primitiveLength===0)continue;Ae=_h(Ce,Me,N,1,0),We=M,$e=de.depthSegments,Ge=re}else if(T==="reset"){if(!_e||_e.min>=0||de.maskSegments.segments[0].primitiveLength===0)continue;Ae=_h(Ce,Me,0,0,1),We=R,$e=de.maskSegments,Ge=re}else if(T==="geometry"){if(de.depthSegments.segments[0].primitiveLength===0)continue;Ae=_h(Ce,Me,N,1,0),We=M,$e=de.depthSegments,Ge=ee}Ge.draw(y,O.TRIANGLES,We,qn.disabled,Gn.disabled,jn.disabled,Ae,d.id,de.vertexBuffer,de.indexBuffer,$e,d.paint,y.transform.zoom)}}function Ma(y,l,d,v){const{painter:T,sourceCache:O,layer:M,coords:R,colorMode:N,elevationType:q,terrainEnabled:H,pass:re}=y,ee=T.context.gl,oe=M.paint.get("fill-pattern"),he=M.paint.get("fill-pattern-cross-fade"),ce=oe.constantOr(null);let de=q;q!=="road"||l&&!H||(de="none");const _e=de==="road",Me=y.painter.shadowRenderer,Ce=_e&&!!Me&&Me.enabled,Ae=new An(T.context.gl.LEQUAL,An.ReadOnly,T.depthRangeFor3D);let We=[0,0,0];if(Ce){const Re=T.style.directionalLight,et=T.style.ambientLight;Re&&et&&(We=js(T.style,Re,et))}const $e=oe&&oe.constantOr(1),Ge=T.terrain&&T.terrain.renderingToTexture,Fe=(Re,et)=>{let nt,st,dt,ft,wt;et?(nt=$e&&!M.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",dt=ee.LINES):(nt=$e?"fillPattern":"fill",dt=ee.TRIANGLES);for(const It of R){const pt=O.getTile(It);if($e&&!pt.patternsLoaded())continue;const tt=pt.getBucket(M);if(!tt)continue;const At=l?tt.elevationBufferData:tt.bufferData;if(At.isEmpty())continue;T.prepareDrawTile();const gt=At.programConfigurations.get(M.id),Dt=T.isTileAffectedByFog(It),qt=[],tn=[];_e&&(qt.push("ELEVATED_ROADS"),tn.push(At.elevatedLayoutVertexBuffer)),Ce&&qt.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),Ge&&d&&qt.push("USE_MRT1"),$e&&(T.context.activeTexture.set(ee.TEXTURE0),pt.imageAtlasTexture&&pt.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),gt.updatePaintBuffers());let Wt=!1;if(ce&&pt.imageAtlas){const _n=pt.imageAtlas,Dn=a.e3.from(ce),Un=Dn.getPrimary().scaleSelf(a.o.devicePixelRatio).toString(),Qn=Dn.getSecondary(),yr=_n.patternPositions.get(Un),$n=Qn?_n.patternPositions.get(Qn.scaleSelf(a.o.devicePixelRatio).toString()):null;Wt=!!yr&&!!$n,yr&&gt.setConstantPatternPositions(yr,$n)}he>0&&(Wt||gt.getPatternTransitionVertexBuffer("fill-pattern"))&&qt.push("FILL_PATTERN_TRANSITION");const Ht=T.getOrCreateProgram(nt,{config:gt,overrideFog:Dt,defines:qt}),xn=T.translatePosMatrix(It.projMatrix,pt,M.paint.get("fill-translate"),M.paint.get("fill-translate-anchor"));Ce&&Me.setupShadows(pt.tileID.toUnwrapped(),Ht,"vector-tile");const yn=M.paint.get("fill-emissive-strength");if(et){ft=At.lineIndexBuffer,wt=At.lineSegments;const _n=T.terrain&&T.terrain.renderingToTexture?T.terrain.drapeBufferSize:[ee.drawingBufferWidth,ee.drawingBufferHeight];st=nt==="fillOutlinePattern"&&$e?Ug(xn,yn,T,pt,_n,We,he):rm(xn,yn,_n,We)}else ft=At.indexBuffer,wt=At.triangleSegments,st=$e?yh(xn,yn,T,pt,We,he):gh(xn,yn,We);T.uploadCommonUniforms(T.context,Ht,It.toUnwrapped());let rn=Re;(q==="road"&&!H||q==="offset")&&(rn=Ae),Ht.draw(T,dt,rn,v||T.stencilModeForClipping(It),N,jn.disabled,st,M.id,At.layoutVertexBuffer,ft,wt,M.paint,T.transform.zoom,gt,tn)}};T.renderPass===re&&Fe(T.depthModeForSublayer(1,T.renderPass==="opaque"?An.ReadWrite:An.ReadOnly),!1),de==="none"&&T.renderPass==="translucent"&&M.paint.get("fill-antialias")&&Fe(T.depthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,An.ReadOnly),!0)}function wh(y,l,d,v,T,O,M,R){d.resetLayerRenderingStats(y);const N=y.context,q=N.gl,H=y.transform,re=d.paint.get("fill-extrusion-pattern"),ee=d.paint.get("fill-extrusion-pattern-cross-fade"),oe=re.constantOr(null),he=re.constantOr(1),ce=d.paint.get("fill-extrusion-opacity"),de=y.style.enable3dLights(),_e=d.paint.get(de&&!he?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),Me=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),_e],Ce=d.layout.get("fill-extrusion-edge-radius"),Ae=Ce>0&&!d.paint.get("fill-extrusion-rounded-roof"),We=Ae?0:Ce,$e=H.projection.name==="globe"?a.eb():0,Ge=H.projection.name==="globe",Fe=Ge?a.aj(H.zoom):0,Re=[a.aF(H.center.lng),a.aJ(H.center.lat)],et=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",nt=d.paint.get("fill-extrusion-flood-light-color").toNonPremultipliedRenderColor(et?null:d.lut).toArray01().slice(0,3),st=d.paint.get("fill-extrusion-flood-light-intensity"),dt=d.paint.get("fill-extrusion-vertical-scale"),ft=d.paint.get("fill-extrusion-line-width").constantOr(1)!==0,wt=d.paint.get("fill-extrusion-height-alignment"),It=d.paint.get("fill-extrusion-base-alignment"),pt=$l(y,d.paint.get("fill-extrusion-cutoff-fade-range")),tt=[];let At;Ge&&tt.push("PROJECTION_GLOBE_VIEW"),Me[0]>0&&tt.push("FAUX_AO"),Ae&&tt.push("ZERO_ROOF_RADIUS"),R&&tt.push("HAS_CENTROID"),st>0&&tt.push("FLOOD_LIGHT"),pt.shouldRenderCutoff&&tt.push("RENDER_CUTOFF"),ft&&tt.push("RENDER_WALL_MODE");const gt=y.renderPass==="shadow",Dt=y.shadowRenderer,qt=gt&&!!Dt,tn=gt?jn.disabled:jn.backCCW;y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!0);let Wt=[0,0,0];if(Dt){const yn=y.style.directionalLight,rn=y.style.ambientLight;yn&&rn&&(Wt=js(y.style,yn,rn)),gt||(tt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Dt.useNormalOffset&&tt.push("NORMAL_OFFSET")),At=tt.concat(["SHADOWS_SINGLE_CASCADE"])}const Ht=qt?"fillExtrusionDepth":he?"fillExtrusionPattern":"fillExtrusion",xn=d.getLayerRenderingStats();for(const yn of v){const rn=l.getTile(yn),_n=rn.getBucket(d);if(!_n||_n.projection.name!==H.projection.name)continue;let Dn=!1;Dt&&(Dn=Dt.getMaxCascadeForTile(yn.toUnwrapped())===0);const Un=y.isTileAffectedByFog(yn),Qn=_n.programConfigurations.get(d.id);let yr=!1;if(oe&&rn.imageAtlas){const wr=rn.imageAtlas,er=a.e3.from(oe),Rr=er.getPrimary().scaleSelf(a.o.devicePixelRatio).toString(),Pi=er.getSecondary(),ti=wr.patternPositions.get(Rr),Hr=Pi?wr.patternPositions.get(Pi.scaleSelf(a.o.devicePixelRatio).toString()):null;yr=!!ti&&!!Hr,ti&&Qn.setConstantPatternPositions(ti,Hr)}ee>0&&(yr||Qn.getPatternTransitionVertexBuffer("fill-extrusion-pattern"))&&tt.push("FILL_EXTRUSION_PATTERN_TRANSITION");const $n=y.getOrCreateProgram(Ht,{config:Qn,defines:Dn?At:tt,overrideFog:Un});if(y.terrain&&y.terrain.setupElevationDraw(rn,$n,{useMeterToDem:!0}),!_n.centroidVertexBuffer){const wr=$n.getAttributeLocation(q,"a_centroid_pos");wr!==-1&&q.vertexAttrib2f(wr,0,0)}!gt&&Dt&&Dt.setupShadows(rn.tileID.toUnwrapped(),$n,"vector-tile"),he&&(y.context.activeTexture.set(q.TEXTURE0),rn.imageAtlasTexture&&rn.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Qn.updatePaintBuffers());const Jn=d.paint.get("fill-extrusion-vertical-gradient"),Yn=1/_n.tileToMeter;let Ur;if(gt&&Dt){if(Hg(rn.tileID,_n.maxHeight,y))continue;const wr=Dt.calculateShadowPassMatrixFromTile(rn.tileID.toUnwrapped());Ur=Of(wr,We,Yn,dt,wt,It)}else{const wr=y.translatePosMatrix(yn.expandedProjMatrix,rn,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),er=H.projection.createInversionMatrix(H,yn.canonical);Ur=he?M0(wr,y,Jn,ce,Me,We,Yn,yn,rn,$e,wt,It,Fe,Re,er,nt,dt,ee):kc(wr,y,Jn,ce,Me,We,Yn,yn,$e,wt,It,Fe,Re,er,nt,dt,st,Wt)}y.uploadCommonUniforms(N,$n,yn.toUnwrapped(),null,pt);let Mr=_n.segments;if(H.projection.name==="mercator"&&!gt&&(Mr=_n.getVisibleSegments(rn.tileID,y.terrain,y.transform.getFrustum(0)),!Mr.get().length))continue;if(xn)if(gt)for(const wr of Mr.get())xn.numRenderedVerticesInShadowPass+=wr.primitiveLength;else for(const wr of Mr.get())xn.numRenderedVerticesInTransparentPass+=wr.primitiveLength;const ei=[];(y.terrain||R)&&ei.push(_n.centroidVertexBuffer),Ge&&ei.push(_n.layoutVertexExtBuffer),ft&&ei.push(_n.wallVertexBuffer),$n.draw(y,N.gl.TRIANGLES,T,O,M,tn,Ur,d.id,_n.layoutVertexBuffer,_n.indexBuffer,Mr,d.paint,y.transform.zoom,Qn,ei)}y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!1)}class Nd{constructor(){this.translate=[0,0],this.translateAnchor="map",this.edgeRadius=0,this.cutoffFadeRange=0}}function Xu(y,l,d,v,T,O,M,R,N,q,H,re,ee,oe,he,ce,de,_e,Me,Ce){const Ae=l.context,We=Ae.gl,$e=l.transform,Ge=l.transform.zoom,Fe=[],Re=y.translate,et=y.translateAnchor,nt=y.edgeRadius,st=$l(l,y.cutoffFadeRange);H==="clear"?(Fe.push("CLEAR_SUBPASS"),Ce&&(Fe.push("CLEAR_FROM_TEXTURE"),Ae.activeTexture.set(We.TEXTURE0),Ce.bind(We.LINEAR,We.CLAMP_TO_EDGE))):H==="sdf"?Fe.push("SDF_SUBPASS"):H==="emissive"&&(Fe.push("USE_MRT1"),Ae.activeTexture.set(We.TEXTURE0),Ce.bind(We.LINEAR,We.CLAMP_TO_EDGE)),_e&&Fe.push("HAS_CENTROID"),st.shouldRenderCutoff&&Fe.push("RENDER_CUTOFF");const dt=(ft,wt,It,pt,tt)=>{let At=Fe;wt.groundRadiusBuffer!=null&&(At=Fe.concat("HAS_ATTRIBUTE_a_flood_light_ground_radius"));const gt=wt.programConfigurations.get(v.id),Dt=l.isTileAffectedByFog(ft),qt=l.getOrCreateProgram("fillExtrusionGroundEffect",{config:gt,defines:At,overrideFog:Dt}),tn=((Ht,xn,yn,rn,_n,Dn,Un,Qn,yr,$n,Jn)=>({u_matrix:xn,u_opacity:yn,u_ao_pass:rn?1:0,u_meter_to_tile:_n,u_ao:Dn,u_flood_light_intensity:Un,u_flood_light_color:Qn,u_attenuation:yr,u_edge_radius:$n,u_fb:0,u_fb_size:Jn,u_dynamic_offset:1}))(0,pt,re,q,tt,[ee,oe*tt],he,ce,de,Ge>=17?0:nt*tt,Ce?Ce.size[0]:0),Wt=[];_e&&Wt.push(wt.hiddenByLandmarkVertexBuffer),wt.groundRadiusBuffer!=null&&Wt.push(wt.groundRadiusBuffer),l.uploadCommonUniforms(Ae,qt,ft.toUnwrapped(),null,st),qt.draw(l,Ae.gl.TRIANGLES,O,M,R,N,tn,v.id,wt.vertexBuffer,wt.indexBuffer,It,v.paint,Ge,gt,Wt)};for(const ft of T){const wt=d.getTile(ft),It=wt.getBucket(v);if(!It||It.projection.name!==$e.projection.name||!It.groundEffect||It.groundEffect&&!It.groundEffect.hasData())continue;const pt=It.groundEffect,tt=1/It.tileToMeter;{const At=l.translatePosMatrix(ft.projMatrix,wt,Re,et),gt=pt.getDefaultSegment();dt(ft,pt,gt,At,tt)}if(Me)for(let At=0;At<4;At++){const gt=a.e9[At](ft),Dt=d.getTile(gt);if(!Dt)continue;const qt=Dt.getBucket(v);if(!qt||qt.projection.name!==$e.projection.name||!qt.groundEffect||qt.groundEffect&&!qt.groundEffect.hasData())continue;const tn=qt.groundEffect;let Wt,Ht;At===0?(Wt=[-a.al,0,0],Ht=1):At===1?(Wt=[a.al,0,0],Ht=0):At===2?(Wt=[0,-a.al,0],Ht=3):(Wt=[0,a.al,0],Ht=2);const xn=tn.regionSegments[Ht];if(!xn)continue;const yn=new Float32Array(16);a.br(yn,ft.projMatrix,Wt),dt(ft,tn,xn,l.translatePosMatrix(yn,wt,Re,et),tt)}}}function P0(y,l,d,v,T,O,M){v.centroidVertexArray.length===0&&v.createCentroidsBuffer();const R=O?O.findDEMTileFor(d):null;if(!(R&&R.dem||M))return;O&&R&&R.dem&&v.selfDEMTileTimestamp!==R.dem._timestamp&&(v.borderDoneWithNeighborZ=[-1,-1,-1,-1],v.selfDEMTileTimestamp=R.dem._timestamp);const N=(de,_e)=>{(de.flags|_e.flags)&a.ec?(de.flags|=a.ec,_e.flags|=a.ec):(de.flags&=~a.ec,_e.flags&=~a.ec)},q=de=>new a.P(Math.ceil((de+a.ed)*a.ee),0),H=de=>{const _e=l.getSource().minzoom,Me=Ae=>{const We=l.getTileByID(Ae);if(We&&We.hasData())return We.getBucket(T)},Ce=[0,-1,1];for(const Ae of Ce){if(de.overscaledZ+Ae<_e)continue;const We=Me(de.calculateScaledKey(de.overscaledZ+Ae));if(We)return We}},re=[0,0,0],ee=(de,_e)=>(re[0]=Math.min(de.min.y,_e.min.y),re[1]=Math.max(de.max.y,_e.max.y),re[2]=a.al-_e.min.x>de.max.x?_e.min.x-a.al:de.max.x,re),oe=(de,_e)=>(re[0]=Math.min(de.min.x,_e.min.x),re[1]=Math.max(de.max.x,_e.max.x),re[2]=a.al-_e.min.y>de.max.y?_e.min.y-a.al:de.max.y,re),he=[(de,_e)=>ee(de,_e),(de,_e)=>ee(_e,de),(de,_e)=>oe(de,_e),(de,_e)=>oe(_e,de)],ce=(de,_e,Me,Ce,Ae,We,$e)=>{if(!O)return 0;const Ge=[[We?Me:de,We?de:Me,0],[We?Me:_e,We?_e:Me,0]],Fe=$e<0?a.al+$e:$e,Re=[We?Fe:(de+_e)/2,We?(de+_e)/2:Fe,0];return Me===0&&$e<0||Me!==0&&$e>0?O.getForTilePoints(Ae,[Re],!0,Ce):Ge.push(Re),O.getForTilePoints(d,Ge,!0,R),Math.max(Ge[0][2],Ge[1][2],Re[2])/O.exaggeration()};for(let de=0;de<4;de++){const _e=v.borderFeatureIndices[de];if(_e.length===0)continue;const Me=a.e9[de](d),Ce=H(Me);if(!(Ce&&Ce instanceof a.ea))continue;const Ae=O?O.findDEMTileFor(Me):null;if(!(Ae&&Ae.dem||M)||(O&&Ae&&Ae.dem&&v.borderDEMTileTimestamp[de]!==Ae.dem._timestamp&&(v.borderDoneWithNeighborZ[de]=-1,v.borderDEMTileTimestamp[de]=Ae.dem._timestamp),v.borderDoneWithNeighborZ[de]===Ce.canonical.z))continue;Ce.centroidVertexArray.length===0&&Ce.createCentroidsBuffer();const We=(de<2?1:5)-de,$e=Ce.borderDoneWithNeighborZ[We]!==v.canonical.z,Ge=Ce.borderFeatureIndices[We];let Fe=0;if(v.canonical.z!==Ce.canonical.z){for(const Re of _e)v.showCentroid(v.featuresOnBorder[Re]);if($e)for(const Re of Ge)Ce.showCentroid(Ce.featuresOnBorder[Re]);v.borderDoneWithNeighborZ[de]=Ce.canonical.z,Ce.borderDoneWithNeighborZ[We]=v.canonical.z}for(const Re of _e){const et=v.featuresOnBorder[Re],nt=v.centroidData[et.centroidDataIndex],st=et.borders[de];let dt;for(;Fe<Ge.length;){dt=Ce.featuresOnBorder[Ge[Fe]];const ft=dt.borders[We];if(ft[1]>st[0]+3||ft[0]>st[0]-3)break;Ce.showCentroid(dt),Fe++}if(dt&&Fe<Ge.length){const ft=Fe;let wt=0;for(;!(dt.borders[We][0]>st[1]-3)&&(wt++,++Fe!==Ge.length);)dt=Ce.featuresOnBorder[Ge[Fe]];dt=Ce.featuresOnBorder[Ge[ft]];let It=!1;if(wt>=1){const At=dt.borders[We];Math.abs(st[0]-At[0])<3&&Math.abs(st[1]-At[1])<3&&(wt=1,It=!0,Fe=ft+1)}else if(wt===0){v.showCentroid(et);continue}const pt=Ce.centroidData[dt.centroidDataIndex];M&&It&&N(nt,pt);const tt=et.intersectsCount()>1||dt.intersectsCount()>1;if(wt>1)Fe=ft,nt.centroidXY=pt.centroidXY=new a.P(0,0);else if(Ae&&Ae.dem&&!tt){const At=he[de](nt,pt),gt=de%2?a.al-1:0,Dt=ce(At[0],Math.min(a.al-1,At[1]),gt,Ae,Me,de<2,At[2]);nt.centroidXY=pt.centroidXY=q(Dt)}else tt?nt.centroidXY=pt.centroidXY=new a.P(0,0):(nt.centroidXY=v.encodeBorderCentroid(et),pt.centroidXY=Ce.encodeBorderCentroid(dt));v.writeCentroidToBuffer(nt),Ce.writeCentroidToBuffer(pt)}else v.showCentroid(et)}v.borderDoneWithNeighborZ[de]=Ce.canonical.z,Ce.borderDoneWithNeighborZ[We]=v.canonical.z}(v.needsCentroidUpdate||!v.centroidVertexBuffer&&v.centroidVertexArray.length!==0)&&v.uploadCentroid(y)}const s1=[1,0,0],V_=[0,1,0],q_=[0,0,1];function Hg(y,l,d){const v=d.transform,T=d.shadowRenderer;if(!T)return!0;const O=y.toUnwrapped(),M=v.tileSize*T._cascades[d.currentShadowCascade].scale;let R=l;if(v.elevation){const ce=v.elevation.getMinMaxForTile(y);ce&&(R+=ce.max)}const N=[...T.shadowDirection];N[2]=-N[2];const q=T.computeSimplifiedTileShadowVolume(O,R,M,N);if(!q)return!1;const H=[s1,V_,q_,N,[N[0],0,N[2]],[0,N[1],N[2]]],re=v.projection.name==="globe",ee=v.scaleZoom(M),oe=a.cB.fromInvProjectionMatrix(v.invProjMatrix,v.worldSize,ee,!re),he=T.getCurrentCascadeFrustum();return oe.intersectsPrecise(q.vertices,q.planes,H)===0||he.intersectsPrecise(q.vertices,q.planes,H)===0}function jo(y){const{painter:l,source:d,layer:v,coords:T}=y;let O=y.defines;const M=l.context,R=l.renderPass==="shadow",N=l.renderPass==="light-beam",q=l.shadowRenderer,H=a.ef(l.transform.center.lat,l.transform.zoom),re=$l(l,v.paint.get("building-cutoff-fade-range"));re.shouldRenderCutoff&&(O=O.concat("RENDER_CUTOFF")),y.floodLightIntensity>0&&(O=O.concat("FLOOD_LIGHT"));for(const ee of T){const oe=d.getTile(ee),he=oe.getBucket(v);if(!he)continue;q&&q.getMaxCascadeForTile(ee.toUnwrapped())===0&&(O=O.concat("SHADOWS_SINGLE_CASCADE"));const ce=he.programConfigurations.get(v.id);let de,_e,Me,Ce=l.translatePosMatrix(ee.expandedProjMatrix,oe,[0,0],"map");if(Ce=a.cS(a.bC(),Ce,[1,1,y.verticalScale]),R&&q){if(Hg(oe.tileID,he.maxHeight*H,l))continue;let We=q.calculateShadowPassMatrixFromTile(oe.tileID.toUnwrapped());We=a.cS(a.bC(),We,[1,1,y.verticalScale]),Me=sl(We),de=_e=l.getOrCreateProgram("buildingDepth",{config:ce,defines:O,overrideFog:!1})}else if(N)de=_e=l.getOrCreateProgram("buildingBloom",{config:ce,defines:O,overrideFog:!1}),Me=D0(Ce);else{const We=l.transform.calculatePosMatrix(ee.toUnwrapped(),l.transform.worldSize);a.cS(We,We,[1,1,y.verticalScale]);const $e=a.bC();a.cS($e,We,[1,-1,1/H]),a.bl($e,$e),a.eg($e,$e);const Ge=l.transform.getFreeCameraOptions().position,Fe=1<<ee.canonical.z;if(Me=Lc(Ce,$e,y.opacity,y.facadeAOIntensity,[((Ge.x-ee.wrap)*Fe-ee.canonical.x)*a.al,(Ge.y*Fe-ee.canonical.y)*a.al,Ge.z*Fe*a.al],he.tileToMeter,y.facadeEmissiveChance,y.floodLightColor,y.floodLightIntensity),_e=l.getOrCreateProgram("building",{config:ce,defines:O,overrideFog:!1}),y.depthOnly===!0)de=_e;else{const Re=O.concat(["BUILDING_FAUX_FACADE","HAS_ATTRIBUTE_a_faux_facade_color_emissive"]);de=l.getOrCreateProgram("building",{config:ce,defines:Re,overrideFog:!1})}q&&(q.setupShadowsFromMatrix(We,_e,!0),de!==_e&&q.setupShadowsFromMatrix(We,de,!0))}const Ae=(We,$e)=>{if(N){const Ge=We.entranceBloom;$e.draw(l,M.gl.TRIANGLES,y.depthMode,qn.disabled,y.blendMode,jn.disabled,Me,v.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segmentsBucket,v.paint,l.transform.zoom,ce,[Ge.layoutAttenuationBuffer,Ge.layoutColorBuffer])}else{const Ge=We.segmentsBucket;let Fe=[We.layoutNormalBuffer,We.layoutCentroidBuffer,We.layoutColorBuffer,We.layoutFloodLightDataBuffer];We.layoutFacadePaintBuffer&&(Fe=Fe.concat([We.layoutFacadeDataBuffer,We.layoutFacadeVerticalRangeBuffer,We.layoutFacadePaintBuffer])),$e.draw(l,M.gl.TRIANGLES,y.depthMode,qn.disabled,y.blendMode,R?jn.disabled:jn.backCW,Me,v.id,We.layoutVertexBuffer,We.indexBuffer,Ge,v.paint,l.transform.zoom,ce,Fe)}};l.uploadCommonUniforms(M,_e,ee.toUnwrapped(),null,re),he.buildingWithoutFacade&&Ae(he.buildingWithoutFacade,_e),he.buildingWithFacade&&(de!==_e&&l.uploadCommonUniforms(M,de,ee.toUnwrapped(),null,re),Ae(he.buildingWithFacade,de))}}function Wa(y,l,d,v,T,O,M,R,N,q,H,re,ee){const oe=y.context.gl,he=y.depthModeForSublayer(1,An.ReadOnly,oe.LEQUAL,!0),ce=.1*(1-(de=H))+3*de;var de;const _e=y._showOverdrawInspector,Me=re,Ce=new Nd;_e||Xu(Ce,y,l,d,v,he,new qn({func:oe.ALWAYS,mask:255},255,255,oe.KEEP,oe.KEEP,oe.REPLACE),new Gn([oe.ONE,oe.ONE,oe.ONE,oe.ONE],a.ao.transparent,[!1,!1,!1,!0],oe.MIN),jn.disabled,T,"sdf",O,M,R,N,q,ce,Me,!1);{const Ae=_e?qn.disabled:new qn({func:oe.EQUAL,mask:255},255,255,oe.KEEP,oe.DECR,oe.DECR),We=_e?y.colorModeForRenderPass():new Gn([oe.ONE_MINUS_DST_ALPHA,oe.DST_ALPHA,oe.ONE,oe.ONE],a.ao.transparent,[!0,!0,!0,!0]);Xu(Ce,y,l,d,v,he,Ae,We,jn.disabled,T,"color",O,M,R,N,q,ce,Me,!1)}}function om(y){return[y[0]*a.eh,y[1]*a.eh,y[2]*a.eh,0]}function Sh(y,l,d,v,T,O,M,R,N){const q=v.getSource(),H=d.globeSharedBuffers;if(!H)return;let re,ee,oe;if(l&&(re=v.getTile(l)),q instanceof a.aU?(ee=q.texture,oe=a.dK(0,0,d.transform)):re&&l&&(ee=re.texture,oe=a.dK(l.canonical.z,l.canonical.x,d.transform)),!ee||!oe)return;y||(oe=a.cS(a.bC(),oe,[1,-1,1]));const he=d.context,ce=he.gl,de=T.paint.get("raster-resampling")==="nearest"?ce.NEAREST:ce.LINEAR,_e=d.colorModeForDrapableLayerRenderPass(O),Me=M.defines;Me.push("GLOBE_POLES");const Ce=new An(ce.LEQUAL,An.ReadWrite,d.depthRangeFor3D),Ae=Float32Array.from(d.transform.expandedFarZProjMatrix),We=Float32Array.from(a.bk(a.dJ(new a.cD(0,0,0))));d.terrain&&d.terrain.prepareDrawTile(),he.activeTexture.set(ce.TEXTURE0),ee.bind(de,ce.CLAMP_TO_EDGE),he.activeTexture.set(ce.TEXTURE1),ee.bind(de,ce.CLAMP_TO_EDGE),"useMipmap"in ee&&he.extTextureFilterAnisotropic&&d.transform.pitch>20&&ce.texParameterf(ce.TEXTURE_2D,he.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,he.extTextureFilterAnisotropicMax);const[$e,Ge,Fe,Re]=l?H.getPoleBuffers(l.canonical.z,!1):H.getPoleBuffers(0,!0),et=T.paint.get("raster-elevation");let nt;y?(nt=$e,d.renderDefaultNorthPole=et!==0):(nt=Ge,d.renderDefaultSouthPole=et!==0);const st=om(M.mix),dt=((wt,It,pt,tt,At,gt,Dt,qt,tn,Wt,Ht,xn,yn)=>Id(wt,It,pt,new Float32Array(16),new Float32Array(9),[0,0],tt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},gt,[0,0],qt,2,Wt,Ht,xn,1,0,yn))(Ae,We,oe,a.aj(d.transform.zoom),0,T,0,et,0,st,M.offset,M.range,O),ft=d.getOrCreateProgram("raster",{defines:Me});d.uploadCommonUniforms(he,ft,null),ft.draw(d,ce.TRIANGLES,Ce,N,_e,R,dt,T.id,nt,Fe,Re)}function Gg(y){if(y.isOrthographic)return[0,0,0,0];const l=y._nearZ,d=y.projection.farthestPixelDistance(y),v=d-l,T=.2*y.height,O=l+T;return[l,d,(O-T-l)/v,(O-l)/v]}function H_(y,l,d,v){if(y)return l instanceof xs&&y instanceof kp?l.getTextureDescriptor(y,d,!0):{texture:y.texture,mix:om(v.mix),offset:v.offset,buffer:0,tileSize:1}}var Zu=a.ei([{name:"a_index",type:"Int16",components:1}]);class Yg{constructor(l,d,v,T){const O={width:v[0],height:v[1],data:null},M=l.gl;this.targetColorTexture=new a.T(l,O,M.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new a.T(l,O,M.RGBA8,{useMipmap:!1}),this.context=l,this.updateParticleTexture(d,T),this.lastInvalidatedAt=0}updateParticleTexture(l,d){if(this.particleTextureDimension===d.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const v=this.context.gl,T=d.width*d.height;this.particleTexture0=new a.T(this.context,d,v.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new a.T(this.context,d,v.RGBA8,{premultiply:!1,useMipmap:!1});const O=new a.ej;O.reserve(T);for(let M=0;M<T;M++)O.emplaceBack(M);this.particleIndexBuffer=this.context.createVertexBuffer(O,Zu.members,!0),this.particleSegment=a.bg.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=d.width}update(l){return!(this.lastInvalidatedAt<l&&(this.lastInvalidatedAt=a.o.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Wg(y,l,d){if(!y)return null;const v=l.getTextureDescriptor(y,d,!0);if(!v)return null;let{texture:T,mix:O,offset:M,tileSize:R,buffer:N,format:q}=v;if(!T||!q)return null;let H=!1;return q==="uint32"&&(H=!0,O[3]=0,O=am(a.ek,O,[0,d.paint.get("raster-particle-max-speed")]),M=U_(a.ek,M,[0,d.paint.get("raster-particle-max-speed")])),{texture:T,textureOffset:[N/(R+2*N),R/(R+2*N)],tileSize:R,scalarData:H,scale:O,offset:M,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[q]]}}function G_(y){const l=y._nearZ,d=y.projection.farthestPixelDistance(y),v=d-l,T=.2*y.height,O=l+T;return[l,d,(O-T-l)/v,(O-l)/v]}const Y_=new a.ao(1,0,0,1),W_=new a.ao(0,1,0,1),X_=new a.ao(0,0,1,1),l1=new a.ao(1,0,1,1),u1=new a.ao(0,1,1,1);function R0(y,l,d,v,T,O){for(let M=0;M<d.length;M++)if(T){const q=new a.ao(v.r*.8,v.g*.8,v.b*.8,1);Bc(y,l,d[M],v,-1,-1,O),Bc(y,l,d[M],v,-1,1,O),Bc(y,l,d[M],v,1,1,O),Bc(y,l,d[M],v,1,-1,O),Bc(y,l,d[M],q,0,0,O)}else Bc(y,l,d[M],v,0,0,O)}function Bc(y,l,d,v,T,O,M){const R=y.context,N=y.transform,q=R.gl,H=N.projection.name==="globe",re=H?["PROJECTION_GLOBE_VIEW"]:[];let ee=a.bz(d.projMatrix);if(H&&a.aj(N.zoom)>0){const st=a.bj(d.canonical,N),dt=a.el(st);ee=a.aB(new Float32Array(16),N.globeMatrix,dt),a.aB(ee,N.projMatrix,ee)}const oe=a.bC();oe[12]+=2*T/(a.o.devicePixelRatio*N.width),oe[13]+=2*O/(a.o.devicePixelRatio*N.height),a.aB(ee,oe,ee);const he=y.getOrCreateProgram("debug",{defines:re}),ce=l.getTileByID(d.key);y.terrain&&y.terrain.setupElevationDraw(ce,he);const de=An.disabled,_e=qn.disabled,Me=y.colorModeForRenderPass(),Ce="$debug";R.activeTexture.set(q.TEXTURE0),y.emptyTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),H?ce._makeGlobeTileDebugBuffers(y.context,N):ce._makeDebugTileBoundsBuffers(y.context,N.projection);const Ae=ce._tileDebugBuffer||y.debugBuffer,We=ce._tileDebugIndexBuffer||y.debugIndexBuffer,$e=ce._tileDebugSegments||y.debugSegments;if(he.draw(y,q.LINE_STRIP,de,_e,Me,jn.disabled,zc(ee,v.toPremultipliedRenderColor(null)),Ce,Ae,We,$e,null,null,null,[ce._globeTileDebugBorderBuffer]),M){const st=ce.latestRawTileData,dt=Math.floor((st&&st.byteLength||0)/1024);let ft=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ft+=` => ${d.overscaledZ}`),ft+=` ${ce.state}`,ft+=` ${dt}kb`,(function(wt,It){wt.initDebugOverlayCanvas();const pt=wt.debugOverlayCanvas,tt=wt.context.gl,At=wt.debugOverlayCanvas.getContext("2d");At.clearRect(0,0,pt.width,pt.height),At.shadowColor="white",At.shadowBlur=2,At.lineWidth=1.5,At.strokeStyle="white",At.textBaseline="top",At.font="bold 36px Open Sans, sans-serif",At.fillText(It,5,5),At.strokeText(It,5,5),wt.debugOverlayTexture.update(pt),wt.debugOverlayTexture.bind(tt.LINEAR,tt.CLAMP_TO_EDGE)})(y,ft)}const Ge=l.getTile(d).tileSize,Fe=512/Math.min(Ge,512)*(d.overscaledZ/N.zoom)*.5,Re=ce._tileDebugTextBuffer||y.debugBuffer,et=ce._tileDebugTextIndexBuffer||y.quadTriangleIndexBuffer,nt=ce._tileDebugTextSegments||y.debugSegments;he.draw(y,q.TRIANGLES,de,_e,Gn.alphaBlended,jn.disabled,zc(ee,a.ao.transparent.toPremultipliedRenderColor(null),Fe),Ce,Re,et,nt,null,null,null,[ce._globeTileDebugTextBuffer])}function k0(y,l,d,v){Xg(y,0,l+d/2,y.transform.width,d,v)}function L0(y,l,d,v){Xg(y,l-d/2,0,d,y.transform.height,v)}function Xg(y,l,d,v,T,O){const M=y.context,R=M.gl;R.enable(R.SCISSOR_TEST),R.scissor(l*a.o.devicePixelRatio,d*a.o.devicePixelRatio,v*a.o.devicePixelRatio,T*a.o.devicePixelRatio),M.clear({color:O}),R.disable(R.SCISSOR_TEST)}const z0=a.ei([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:c1}=z0;function jc(y,l,d,v){y.emplaceBack(l,d,v)}class Vs{constructor(l){this.vertexArray=new a.em,this.indices=new a.b0,jc(this.vertexArray,-1,-1,1),jc(this.vertexArray,1,-1,1),jc(this.vertexArray,-1,1,1),jc(this.vertexArray,1,1,1),jc(this.vertexArray,-1,-1,-1),jc(this.vertexArray,1,-1,-1),jc(this.vertexArray,-1,1,-1),jc(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,c1),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=a.bg.simpleSegment(0,0,36,12)}}function Df(y,l,d,v,T,O){const M=y.context.gl,R=l.paint.get("sky-atmosphere-color"),N=l.paint.get("sky-atmosphere-halo-color"),q=l.paint.get("sky-atmosphere-sun-intensity"),H=((re,ee,oe,he,ce)=>({u_matrix_3f:re,u_sun_direction:ee,u_sun_intensity:oe,u_color_tint_r:[he.r,he.g,he.b,he.a],u_color_tint_m:[ce.r,ce.g,ce.b,ce.a],u_luminance:5e-5}))(a.eo(a.dO(),v),T,q,R.toPremultipliedRenderColor(null),N.toPremultipliedRenderColor(null));M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_CUBE_MAP_POSITIVE_X+O,l.skyboxTexture,0),d.draw(y,M.TRIANGLES,An.disabled,qn.disabled,Gn.unblended,jn.frontCW,H,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const Os=a.ei([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class If{constructor(l){const d=new a.ep;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const v=new a.b0;v.emplaceBack(0,1,2),v.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(d,Os.members),this.indexBuffer=l.createIndexBuffer(v),this.segments=a.bg.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const F0=a.ei([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class N0{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Z_{constructor(l){this.colorModeAlphaBlendedWriteRGB=new Gn([1,ch,1,ch],a.ao.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Gn([1,0,1,0],a.ao.transparent,[!1,!1,!1,!0]),this.params=new N0,this.updateNeeded=!0}update(l){const d=l.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new If(d);const v=this.params.sizeRange,T=this.params.intensityRange,O=(function(H){const re=a.eq(30),ee=[];for(let oe=0;oe<H;++oe){const he=2*Math.PI*re(),ce=Math.acos(1-2*re())-.5*Math.PI;ee.push(a.d5(Math.cos(ce)*Math.cos(he),Math.cos(ce)*Math.sin(he),Math.sin(ce)))}return ee})(this.params.starsCount),M=a.eq(300),R=new a.er,N=new a.b0;let q=0;for(let H=0;H<O.length;++H){const re=a.c5([],O[H],200),ee=Math.max(0,1+.01*v*(1*M()-.5)),oe=Math.max(0,1+.01*T*(1*M()-.5));R.emplaceBack(re[0],re[1],re[2],-1,-1,ee,oe),R.emplaceBack(re[0],re[1],re[2],1,-1,ee,oe),R.emplaceBack(re[0],re[1],re[2],1,1,ee,oe),R.emplaceBack(re[0],re[1],re[2],-1,1,ee,oe),N.emplaceBack(q+0,q+1,q+2),N.emplaceBack(q+0,q+2,q+3),q+=4}this.starsVx=d.createVertexBuffer(R,F0.members),this.starsIdx=d.createIndexBuffer(N),this.starsSegments=a.bg.simpleSegment(0,0,R.length,N.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(l,d){const v=l.context,T=v.gl,O=l.transform,M=new An(T.LEQUAL,An.ReadOnly,[0,1]),R=a.aj(O.zoom),N=l.style.getLut(d.scope),q=d.properties.get("color-use-theme")==="none",H=d.properties.get("color").toNonPremultipliedRenderColor(q?null:N),re=d.properties.get("high-color-use-theme")==="none",ee=d.properties.get("high-color").toNonPremultipliedRenderColor(re?null:N),oe=d.properties.get("space-color-use-theme")==="none",he=d.properties.get("space-color").toNonPremultipliedRenderColor(oe?null:N),ce=5e-4,de=a.es(d.properties.get("horizon-blend"),0,1,ce,.25),_e=a.dE(l,v,O)&&de===ce?O.worldSize/(2*Math.PI*1.025)-1:O.globeRadius,Me=l.frameCounter/1e3%1,Ce=a.ag(O.globeCenterInViewSpace),Ae=Math.sqrt(Math.pow(Ce,2)-Math.pow(_e,2)),We=Math.acos(Ae/Ce),$e=Ge=>{const Fe=O.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];Ge&&Fe.push("ALPHA_PASS");const Re=l.getOrCreateProgram("globeAtmosphere",{defines:Fe}),et=((st,dt,ft,wt,It,pt,tt,At,gt,Dt,qt,tn)=>({u_frustum_tl:st,u_frustum_tr:dt,u_frustum_br:ft,u_frustum_bl:wt,u_horizon:It,u_transition:pt,u_fadeout_range:tt,u_atmosphere_fog_color:At.toArray01(),u_high_color:gt.toArray01(),u_space_color:Dt.toArray01(),u_temporal_offset:qt,u_horizon_angle:tn}))(O.frustumCorners.TL,O.frustumCorners.TR,O.frustumCorners.BR,O.frustumCorners.BL,O.frustumCorners.horizon,R,de,H,ee,he,Me,We);l.uploadCommonUniforms(v,Re);const nt=this.atmosphereBuffer;nt&&Re.draw(l,T.TRIANGLES,M,qn.disabled,Ge?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,jn.backCW,et,Ge?"atmosphere_glow_alpha":"atmosphere_glow",nt.vertexBuffer,nt.indexBuffer,nt.segments)};$e(!1),$e(!0)}drawStars(l,d){const v=a.aA(d.properties.get("star-intensity"),0,1);if(v===0)return;const T=l.context,O=T.gl,M=l.transform,R=l.getOrCreateProgram("stars"),N=a.c7([]);a.c9(N,N,-M._pitch),a.c8(N,N,-M.angle),a.c9(N,N,a.an(M._center.lat)),a.et(N,N,-a.an(M._center.lng));const q=a.cc(new Float32Array(16),N),H=a.aB([],M.starsProjMatrix,q),re=a.eo([],q),ee=a.eu([],re),oe=[0,1,0];a.dQ(oe,oe,ee),a.c5(oe,oe,this.params.sizeMultiplier);const he=[1,0,0];a.dQ(he,he,ee),a.c5(he,he,this.params.sizeMultiplier);const ce=(de=oe,_e=he,Me=v,{u_matrix:Float32Array.from(H),u_up:de,u_right:_e,u_intensity_multiplier:Me});var de,_e,Me;l.uploadCommonUniforms(T,R),this.starsVx&&this.starsIdx&&R.draw(l,O.TRIANGLES,An.disabled,qn.disabled,this.colorModeAlphaBlendedWriteRGB,jn.disabled,ce,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}class Th{constructor(){this.visibleTiles=[]}updateBorders(l,d){const v=[],T=[],O=l._getRenderableCoordinates(!1,!0);for(const N of O){const q=l.getTile(N);if(!q.hasData())continue;const H=q.getBucket(d);H&&(H.isEmpty()||(v.push(N.key),T.push({bucket:H,tileID:N.canonical})))}let M=v.length!==this.visibleTiles.length;if(!M){v.sort();for(let N=0;N<v.length;N++)if(v[N]!==this.visibleTiles[N]){M=!0;break}}if(!M)return;const R=new Set;this.visibleTiles=v,T.sort((N,q)=>N.tileID.z-q.tileID.z||N.tileID.x-q.tileID.x||N.tileID.y-q.tileID.y);for(const N of T){const q=new Array,H=new Array,re=N.bucket;for(const ee of re.featuresOnBorder)R.has(ee.featureId)?H.push(ee.footprintIndex):(R.add(ee.featureId),q.push(ee.footprintIndex));re.updateFootprintHiddenFlags(q,a.ev,!1),re.updateFootprintHiddenFlags(H,a.ev,!0)}}}function K_(y,l){const d=[...y],v=l.cameraWorldSizeForFog/l.worldSize,T=a.bA([]);return a.cS(T,T,[v,v,1]),a.aB(d,T,d),a.aB(d,l.worldToFogMatrix,d),d}function Ol(y,l,d,v,T){const O=d.material,M=v.context,{baseColorTexture:R,metallicRoughnessTexture:N}=O.pbrMetallicRoughness,{normalTexture:q,occlusionTexture:H,emissionTexture:re}=O;function ee(he,ce,de){if(he&&(y.push(ce),M.activeTexture.set(M.gl.TEXTURE0+de),he.gfxTexture)){const{minFilter:_e,magFilter:Me,wrapS:Ce,wrapT:Ae}=he.sampler;he.gfxTexture.bindExtraParam(_e,Me,Ce,Ae)}}ee(R,"HAS_TEXTURE_u_baseColorTexture",5),ee(N,"HAS_TEXTURE_u_metallicRoughnessTexture",6),ee(q,"HAS_TEXTURE_u_normalTexture",7),ee(H,"HAS_TEXTURE_u_occlusionTexture",8),ee(re,"HAS_TEXTURE_u_emissionTexture",9),T&&(T.texture||(T.texture=new a.d$(v.context,T.image,[T.image.height,T.image.height,T.image.height],M.gl.RGBA8)),M.activeTexture.set(M.gl.TEXTURE0+10),T.texture&&T.texture.bind(M.gl.LINEAR,M.gl.CLAMP_TO_EDGE),y.push("APPLY_LUT_ON_GPU")),d.texcoordBuffer&&(y.push("HAS_ATTRIBUTE_a_uv_2f"),l.push(d.texcoordBuffer)),d.colorBuffer&&(y.push(d.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),l.push(d.colorBuffer)),d.normalBuffer&&(y.push("HAS_ATTRIBUTE_a_normal_3f"),l.push(d.normalBuffer)),d.pbrBuffer&&(y.push("HAS_ATTRIBUTE_a_pbr"),y.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),l.push(d.pbrBuffer)),O.alphaMode!=="OPAQUE"&&O.alphaMode!=="MASK"||y.push("UNPREMULT_TEXTURE_IN_SHADER"),O.defined||y.push("DIFFUSE_SHADED");const oe=v.shadowRenderer;oe&&(y.push("RENDER_SHADOWS","DEPTH_TEXTURE"),oe.useNormalOffset&&y.push("NORMAL_OFFSET"))}function Jr(y,l,d,v,T,O){const M=y.modelOpacity,R=l.context,N=new An(l.context.gl.LEQUAL,y.isLightMesh?An.ReadOnly:An.ReadWrite,l.depthRangeFor3D),q=l.transform,H=y.mesh,re=H.material,ee=re.pbrMetallicRoughness,oe=l.style.fog;let he;he=l.transform.projection.zAxisUnit==="pixels"?[...y.nodeModelMatrix]:a.aB([],v.zScaleMatrix,y.nodeModelMatrix),a.aB(he,v.negCameraPosMatrix,he);const ce=a.bl([],he);a.eg(ce,ce);const de=d.paint.get("model-color-use-theme").constantOr("default")==="none",_e=d.paint.get("model-emissive-strength").constantOr(0),Me=Wu(new Float32Array(y.worldViewProjection),new Float32Array(he),new Float32Array(ce),null,l,M,ee.baseColorFactor,re.emissiveFactor,ee.metallicFactor,ee.roughnessFactor,re,_e,d,void 0,void 0,y.materialOverride,y.modelColor),Ce={defines:[]},Ae=[],We=l.shadowRenderer;We&&(We.useNormalOffset=!1),Ol(Ce.defines,Ae,H,l,de?null:d.lut);let $e=null;if(oe){const Re=K_(y.nodeModelMatrix,l.transform);if($e=new Float32Array(Re),q.projection.name!=="globe"){const et=H.aabb.min,nt=H.aabb.max,[st,dt]=oe.getOpacityForBounds(Re,et[0],et[1],nt[0],nt[1]);Ce.overrideFog=st>=hn||dt>=hn}}const Ge=$l(l,d.paint.get("model-cutoff-fade-range"));Ge.shouldRenderCutoff&&Ce.defines.push("RENDER_CUTOFF");const Fe=l.getOrCreateProgram("model",Ce);l.uploadCommonUniforms(R,Fe,null,$e,Ge),l.renderPass!=="shadow"&&We&&We.setupShadowsFromMatrix(y.nodeModelMatrix,Fe),Fe.draw(l,R.gl.TRIANGLES,N,T,O,H.material.doubleSided?jn.disabled:jn.backCCW,Me,d.id,H.vertexBuffer,H.indexBuffer,H.segments,d.paint,l.transform.zoom,void 0,Ae)}function sm(y,l){return y.style._importedAsBasemap?"basemap":l.scope}function Bd(y,l,d,v,T,O,M,R,N,q){const H=y.transform,re=!!l.isGeometryBloom&&l.isGeometryBloom;if(re&&y.renderPass==="shadow")return;const ee=H.projection.name==="globe"?a.eD(d,H):[...d];a.aB(ee,ee,l.globalMatrix);const oe=a.aB([],v,ee);if(l.meshes)for(const he of l.meshes){const ce=R.get(he.material.name);if(ce&&ce.opacity<=0)continue;if(he.material.alphaMode!=="BLEND"){M.push({mesh:he,depth:0,modelIndex:T,worldViewProjection:oe,nodeModelMatrix:ee,isLightMesh:re,materialOverride:ce,modelOpacity:N,modelColor:q});continue}const de=a.af([],he.centroid,oe);!H.isOrthographic&&de[2]<=0||O.push({mesh:he,depth:de[2],modelIndex:T,worldViewProjection:oe,nodeModelMatrix:ee,isLightMesh:re,materialOverride:ce,modelOpacity:N,modelColor:q})}if(l.children)for(const he of l.children)Bd(y,he,d,v,T,O,M,R,N,q)}function lm(y,l,d,v){const T=d.shadowRenderer;if(!T)return;const O=T.getShadowPassDepthMode(),M=T.getShadowPassColorMode(),R=T.calculateShadowPassMatrixFromMatrix(l),N=Ld(R);d.getOrCreateProgram("modelDepth",{defines:d._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(d,d.context.gl.TRIANGLES,O,qn.disabled,M,jn.disabled,N,v.id,y.vertexBuffer,y.indexBuffer,y.segments,v.paint,d.transform.zoom,void 0,void 0)}function B0(y,l,d,v,T,O){for(const M of T){const R=Object.assign({},v);R.part=M;const N={type:"Unknown",id:l,properties:R},q={orientation:y.paint.get("model-rotation").evaluate(N,d)};O.set(M,q)}}function j0(y,l,d,v,T,O){for(const M of T){const R=Object.assign({},v);R.part=M;const N={type:"Unknown",id:l,properties:R},q={color:y.paint.get("model-color").evaluate(N,d),colorMix:y.paint.get("model-color-mix-intensity").evaluate(N,d),opacity:y.paint.get("model-opacity").evaluate(N,d),emissionStrength:y.paint.get("model-emissive-strength").evaluate(N,d)};O.set(M,q)}}function Q_(y,l,d,v,T){let O=!1;for(const R of v)R.modelOpacity!==1&&(Jr(R,y,l,T[R.modelIndex],qn.disabled,Gn.disabled),O=!0);for(const R of v)Jr(R,y,l,T[R.modelIndex],R.modelOpacity!==1?y.stencilModeFor3D():qn.disabled,y.colorModeForRenderPass());O&&y.resetStencilClippingMasks();const M=Gn.additive;for(const R of d)Jr(R,y,l,T[R.modelIndex],qn.disabled,R.isLightMesh?M:y.colorModeForRenderPass())}function Eh(y,l,d){const v=l.updateZoomBasedPaintProperties(),T=(function(O,M,R){let N,q,H,re=O.terrain?O.terrain.exaggeration():0;if(O.terrain&&re>0){const ee=O.terrain,oe=ee.findDEMTileFor(R);oe&&oe.dem?N=a.eF.create(ee,R,oe):re=0}if(re===0&&(M.terrainElevationMin=0,M.terrainElevationMax=0),re===M.validForExaggeration&&(re===0||N&&N._demTile&&N._demTile.tileID===M.validForDEMTile.id&&N._dem._timestamp===M.validForDEMTile.timestamp))return!1;for(const ee in M.instancesPerModel){const oe=M.instancesPerModel[ee];for(let he=0;he<oe.instancedDataArray.length;++he){const ce=(N?re*N.getElevationAt(0|oe.instancedDataArray.float32[16*he],0|oe.instancedDataArray.float32[16*he+1],!0,!0):0)+oe.instancesEvaluatedElevation[he];oe.instancedDataArray.float32[16*he+6]=ce,q=q?Math.min(M.terrainElevationMin,ce):ce,H=H?Math.max(M.terrainElevationMax,ce):ce}}return M.terrainElevationMin=q||0,M.terrainElevationMax=H||0,M.validForExaggeration=re,M.validForDEMTile=N&&N._demTile?{id:N._demTile.tileID,timestamp:N._dem._timestamp}:{id:void 0,timestamp:0},!0})(y,l,d);(v||T)&&(l.uploaded=!1,l.upload(y.context))}const Cs={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new a.d9([0,0,0],[a.al,a.al,0])};function Xt(y,l){const d=1<<y.canonical.z,v=l.getFreeCameraOptions().position,T=l.elevation,O=y.canonical.x/d,M=(y.canonical.x+1)/d,R=y.canonical.y/d,N=(y.canonical.y+1)/d;let q=l._centerAltitude;if(T){const oe=T.getMinMaxForTile(y);oe&&oe.max>q&&(q=oe.max)}const H=a.aA(v.x,O,M)-v.x,re=a.aA(v.y,R,N)-v.y,ee=a.cf(q,l.center.lat)-v.z;return l._zoomFromMercatorZ(Math.sqrt(H*H+re*re+ee*ee))}function on(y,l,d,v,T,O,M){const R=y.context,N=y.renderPass==="shadow",q=y.shadowRenderer,H=N&&q?q.getShadowPassDepthMode():new An(R.gl.LEQUAL,An.ReadWrite,y.depthRangeFor3D),re=y.isTileAffectedByFog(O),ee=y.transform.projection.name==="globe";if(d.meshes)for(const oe of d.meshes){const he=ee?[]:["MODEL_POSITION_ON_GPU"],ce=[];let de,_e,Me;const Ce=!ee&&v.instancedDataArray.length>20;Ce&&he.push("INSTANCED_ARRAYS");const Ae=$l(y,l.paint.get("model-cutoff-fade-range"));if(Ae.shouldRenderCutoff&&he.push("RENDER_CUTOFF"),N&&q)de=y.getOrCreateProgram("modelDepth",{defines:he}),_e=Ld(M.shadowTileMatrix,M.shadowTileMatrix,Float32Array.from(d.globalMatrix)),Me=q.getShadowPassColorMode();else{Ol(he,ce,oe,y,l.paint.get("model-color-use-theme").constantOr("default")==="none"?null:l.lut),de=y.getOrCreateProgram("model",{defines:he,overrideFog:re});const $e=oe.material,Ge=$e.pbrMetallicRoughness,Fe=l.paint.get("model-opacity").constantOr(1),Re=l.paint.get("model-emissive-strength").constantOr(0);_e=Wu(O.expandedProjMatrix,Float32Array.from(d.globalMatrix),new Float32Array(16),null,y,Fe,Ge.baseColorFactor,$e.emissiveFactor,Ge.metallicFactor,Ge.roughnessFactor,$e,Re,l,T),q&&(M.shadowUniformsInitialized?de.setShadowUniformValues(R,q.getShadowUniformValues()):(q.setupShadows(O.toUnwrapped(),de,"model-tile"),M.shadowUniformsInitialized=!0)),Me=Ae.shouldRenderCutoff||Fe<1||$e.alphaMode!=="OPAQUE"?Gn.alphaBlended:Gn.unblended}y.uploadCommonUniforms(R,de,O.toUnwrapped(),null,Ae);const We=oe.material.doubleSided?jn.disabled:jn.backCCW;if(Ce)ce.push(v.instancedDataBuffer),de.draw(y,R.gl.TRIANGLES,H,qn.disabled,Me,We,_e,l.id,oe.vertexBuffer,oe.indexBuffer,oe.segments,l.paint,y.transform.zoom,void 0,ce,v.instancedDataArray.length);else{const $e=N?"u_instance":"u_normal_matrix";for(let Ge=0;Ge<v.instancedDataArray.length;++Ge)_e[$e]=new Float32Array(v.instancedDataArray.arrayBuffer,64*Ge,16),de.draw(y,R.gl.TRIANGLES,H,qn.disabled,Me,We,_e,l.id,oe.vertexBuffer,oe.indexBuffer,oe.segments,l.paint,y.transform.zoom,void 0,ce)}}if(d.children)for(const oe of d.children)on(y,l,oe,v,T,O,M)}const jd=[1,-1,1];function Ui(y,l,d,v){if(!d.modelManager)return!0;const T=d.modelManager;if(!d.shadowRenderer)return!0;const O=d.shadowRenderer,M=l.aabb;let R=!0,N=y.maxHeight;if(N===0){let H=0;for(const re in y.instancesPerModel){const ee=T.getModel(re,v);ee?H=Math.max(H,Math.max(Math.max(ee.aabb.max[0],ee.aabb.max[1]),ee.aabb.max[2])):R=!1}N=y.maxScale*H*1.41+y.maxVerticalOffset,R&&(y.maxHeight=N)}M.max[2]=N,M.min[2]+=y.terrainElevationMin,M.max[2]+=y.terrainElevationMax,a.af(M.min,M.min,l.tileMatrix),a.af(M.max,M.max,l.tileMatrix);const q=M.intersects(O.getCurrentCascadeFrustum());return d.currentShadowCascade===0&&(y.isInsideFirstShadowMapFrustum=q===2),q===0}function ht(y,l){const d=y.uniformValues.u_cutoff_params[0],v=y.uniformValues.u_cutoff_params[1],T=y.uniformValues.u_cutoff_params[2],O=y.uniformValues.u_cutoff_params[3];return v===d||O===T?1:a.aA(((l-d)/(v-d)-T)/(O-T),0,1)}function U0(y,l,d,v){if(l.pitch<20)return 1;const T=l.getWorldToCameraMatrix();a.aB(T,T,y);const O=a.bU(d.min[0],d.min[1],d.min[2],1);let M=a.aC(a.eG(),O,T),R=M,N=M;O[1]=d.max[1],M=a.aC(a.eG(),O,T),R=M[1]<R[1]?M:R,N=M[1]>N[1]?M:N,O[0]=d.max[0],M=a.aC(a.eG(),O,T),R=M[1]<R[1]?M:R,N=M[1]>N[1]?M:N,O[1]=d.min[1],M=a.aC(a.eG(),O,T),R=M[1]<R[1]?M:R,N=M[1]>N[1]?M:N;const q=a.aA(v[0],0,1),H=100*l.pixelsPerMeter*a.aA(v[1],0,1),re=a.aA(v[2],0,1),ee=a.eH(a.eG(),R,N,q),oe=Math.tan(.5*l.fovX),he=-ee[2]*oe;if(H===0)return ee[1]<-Math.abs(he)?re:1;const ce=(-Math.abs(he)-ee[1])/H,de=(Me,Ce,Ae)=>(1-Ae)*Me+Ae*Ce,_e=a.aA(de(1,re,ce),re,1);return de(1,_e,a.aA((l.pitch-20)/20,0,1))}class J_{}class Zg{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(l,d,v){{const re=this._storage.get(d.id);if(re)return re.lastUsedFrameIdx=l,re.buf}const T=v.gl,O=T.getBufferParameter(T.ELEMENT_ARRAY_BUFFER,T.BUFFER_SIZE),M=new ArrayBuffer(O),R=new Int16Array(M);T.getBufferSubData(T.ELEMENT_ARRAY_BUFFER,0,new Int16Array(M));const N=new a.eJ;for(let re=0;re<O/2;re+=3){const ee=R[re],oe=R[re+1],he=R[re+2];N.emplaceBack(ee,oe),N.emplaceBack(oe,he),N.emplaceBack(he,ee)}const q=v.bindVertexArrayOES.current,H=new J_;return H.buf=new As(v,N),H.lastUsedFrameIdx=l,this._storage.set(d.id,H),v.bindVertexArrayOES.set(q),H.buf}update(l){for(const[d,v]of this._storage)l-v.lastUsedFrameIdx>30&&(v.buf.destroy(),this._storage.delete(d))}destroy(){for(const[l,d]of this._storage)d.buf.destroy(),this._storage.delete(l)}}class ev{constructor(){this.occluderSize=30,this.depthOffset=-1e-4}}const $0=a.ei([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class Kg{constructor(l){this.revealStart=11,this.revealRange=2}}const Ud=a.ei([{type:"Float32",name:"a_pos_2f",components:2}]);class f1{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(l,d){const v=l.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const M=new a.eK,R=new a.b0;M.emplaceBack(-1,-1),M.emplaceBack(1,-1),M.emplaceBack(1,1),M.emplaceBack(-1,1),R.emplaceBack(0,1,2),R.emplaceBack(0,2,3),this.vignetteVx=l.context.createVertexBuffer(M,Ud.members),this.vignetteIdx=l.context.createIndexBuffer(R)}const T=a.bg.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){l.uploadCommonUniforms(l.context,v);const M={u_vignetteShape:(O={vignetteShape:[d.start,d.range,Math.pow(10,d.fadePower)],vignetteColor:[d.color.r,d.color.g,d.color.b,d.color.a*d.strength]}).vignetteShape,u_vignetteColor:O.vignetteColor};v.draw(l,l.context.gl.TRIANGLES,An.disabled,qn.disabled,Gn.alphaBlended,jn.disabled,M,"vignette",this.vignetteVx,this.vignetteIdx,T)}var O}}class yT{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(l,d){const v=l.getFreeCameraOptions().position,T=v.toAltitude(),O=v.toLngLat(),M=a.an(O.lng),R=a.an(O.lat),N=l.pixelsPerMeter/d,q=M*a.eM,H=a.eM*Math.log(Math.tan(Math.PI/4+R/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const re=-this._offsetYPrev+H,ee=-this._elevationPrev+T;this._accumulatedOffsetX+=(-this._offsetXPrev+q)*N,this._accumulatedOffsetY+=re*N,this._accumulatedElevation+=ee*N,this._offsetXPrev=q,this._offsetYPrev=H,this._elevationPrev=T}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function V0(y,l){return[-(y[0]-Math.floor(y[0]/l)*l),-(y[1]-Math.floor(y[1]/l)*l),-(y[2]-Math.floor(y[2]/l)*l)]}function um(y){const l=a.eq(1323123451230),d=[];for(let v=0;v<y;++v){const T=2*l()-1,O=2*l()-1,M=2*l()-1;d.push(a.d5(T,O,M))}return d}function Cl(y,l,d,v,T){const O=a.aA((T-d)/(v-d),0,1);return(1-O)*y+O*l}class Qg{constructor(l){this._movement=new yT,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new f1,this._ppmScaleFactor=l}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(l,d){const v=l.transform;this._movement.update(v,this._ppmScaleFactor);const T=v.starsProjMatrix,O=a.c7([]);a.c9(O,O,a.an(90)-v._pitch),a.c8(O,O,-v.angle);const M=a.cc(new Float32Array(16),O),R=a.eL(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),N=a.eg([],R),q=a.aB([],N,M),H=Date.now()/1e3;return this._accumulatedTimeFromStart+=(H-this._prevTime)*d,this._prevTime=H,{projectionMatrix:T,modelviewMatrix:q}}}class Jg extends Qg{constructor(l){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new Kg("Precipitation > Rain"),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(l){const d=l.context;if(!this.particlesVx){const v=um(this.particlesCount),T=new a.eN,O=new a.b0;let M=0;const R=a.eq(1323123451230);for(let N=0;N<v.length;++N){const q=v[N],H=[2*R()-1,R(),R(),R()];T.emplaceBack(q[0],q[1],q[2],-1,-1,...H),T.emplaceBack(q[0],q[1],q[2],1,-1,...H),T.emplaceBack(q[0],q[1],q[2],1,1,...H),T.emplaceBack(q[0],q[1],q[2],-1,1,...H),O.emplaceBack(M+0,M+1,M+2),O.emplaceBack(M+0,M+2,M+3),M+=4}this.particlesVx=d.createVertexBuffer(T,$0.members),this.particlesIdx=d.createIndexBuffer(O)}}draw(l){if(!this._params.overrideStyleParameters&&!l.style.rain)return;const d=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},v=l.transform.zoom;if(d.revealStart>v)return;const T=Cl(0,1,d.revealStart,d.revealStart+d.revealRange,v);if(!this.particlesVx||!this.particlesIdx)return;const O=structuredClone(this._params);let M=[-O.direction.x,O.direction.y,-100];a.aw(M,M);const R=structuredClone(this._vignetteParams);R.strength*=T,O.overrideStyleParameters||(O.intensity=l.style.rain.state.density,O.timeFactor=l.style.rain.state.intensity,O.color=structuredClone(l.style.rain.state.color),M=structuredClone(l.style.rain.state.direction),O.screenThinning.intensity=l.style.rain.state.centerThinning,O.dropletSizeX=l.style.rain.state.dropletSize[0],O.dropletSizeYScale=l.style.rain.state.dropletSize[1]/l.style.rain.state.dropletSize[0],O.distortionStrength=100*l.style.rain.state.distortionStrength,R.strength=1,R.color=structuredClone(l.style.rain.state.vignetteColor));const N=this.updateOnRender(l,O.timeFactor),q=l.context,H=q.gl,re=l.transform;this.screenTexture&&this.screenTexture.size[0]===l.width&&this.screenTexture.size[1]===l.height||(this.screenTexture=new a.T(q,{width:l.width,height:l.height,data:null},H.RGBA8)),O.distortionStrength>0&&(q.activeTexture.set(H.TEXTURE0),this.screenTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),H.copyTexSubImage2D(H.TEXTURE_2D,0,0,0,0,0,l.width,l.height));const ee=l.getOrCreateProgram("rainParticle");l.uploadCommonUniforms(q,ee),q.activeTexture.set(H.TEXTURE0),this.screenTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE);const oe=[O.color.r,O.color.g,O.color.b,O.color.a],he=(ce,de)=>{const _e=V0(this._movement.getPosition(),ce),Me=O.dropletSizeX,Ce=O.dropletSizeX*O.dropletSizeYScale,Ae=l.width/2,We=l.height/2,$e=Cl(0,O.screenThinning.start,0,1,O.screenThinning.intensity),Ge=Cl(.001,O.screenThinning.range,0,1,O.screenThinning.intensity),Fe=Cl(0,O.screenThinning.particleOffset,0,1,O.screenThinning.intensity),Re=(et={modelview:N.modelviewMatrix,projection:N.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:_e,velocityConeAperture:O.velocityConeAperture,velocity:O.velocity,boxSize:ce,rainDropletSize:[Me,Ce],distortionStrength:O.distortionStrength,rainDirection:M,color:oe,screenSize:[re.width,re.height],thinningCenterPos:[Ae,We],thinningShape:[$e,Ge,Math.pow(10,O.screenThinning.fadePower)],thinningAffectedRatio:O.screenThinning.affectedRatio,thinningParticleOffset:Fe,shapeDirectionalPower:O.shapeDirPower,shapeNormalPower:O.shapeNormalPower,mode:de?0:1},{u_modelview:Float32Array.from(et.modelview),u_projection:Float32Array.from(et.projection),u_time:et.time,u_cam_pos:et.camPos,u_texScreen:0,u_velocityConeAperture:et.velocityConeAperture,u_velocity:et.velocity,u_boxSize:et.boxSize,u_rainDropletSize:et.rainDropletSize,u_distortionStrength:et.distortionStrength,u_rainDirection:et.rainDirection,u_color:et.color,u_screenSize:et.screenSize,u_thinningCenterPos:et.thinningCenterPos,u_thinningShape:et.thinningShape,u_thinningAffectedRatio:et.thinningAffectedRatio,u_thinningParticleOffset:et.thinningParticleOffset,u_shapeDirectionalPower:et.shapeDirectionalPower,u_shapeNormalPower:et.shapeNormalPower,u_mode:et.mode});var et;const nt=Math.round(O.intensity*this.particlesCount),st=a.bg.simpleSegment(0,0,4*nt,2*nt);ee.draw(l,H.TRIANGLES,An.disabled,qn.disabled,Gn.alphaBlended,jn.disabled,Re,"rain_particles",this.particlesVx,this.particlesIdx,st)};O.distortionStrength>0&&he(O.boxSize,!0),he(O.boxSize,!1),this._vignette.draw(l,R)}}const ey=a.ei([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class cm extends Qg{constructor(l){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new Kg("Precipitation > Snow"),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(l){const d=l.context;if(!this.particlesVx){const v=um(this.particlesCount),T=new a.eO,O=new a.b0;let M=0;const R=a.eq(1323123451230);for(let N=0;N<v.length;++N){const q=v[N],H=R(),re=R(),ee=R(),oe=[N/v.length,H,re,ee],he=[R(),R()];T.emplaceBack(q[0],q[1],q[2],-1,-1,...oe,...he),T.emplaceBack(q[0],q[1],q[2],1,-1,...oe,...he),T.emplaceBack(q[0],q[1],q[2],1,1,...oe,...he),T.emplaceBack(q[0],q[1],q[2],-1,1,...oe,...he),O.emplaceBack(M+0,M+1,M+2),O.emplaceBack(M+0,M+2,M+3),M+=4}this.particlesVx=d.createVertexBuffer(T,ey.members),this.particlesIdx=d.createIndexBuffer(O)}}draw(l){if(!this._params.overrideStyleParameters&&!l.style.snow)return;const d=structuredClone(this._params);let v=[-d.direction.x,d.direction.y,-100];a.aw(v,v);const T=structuredClone(this._vignetteParams),O=d.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},M=l.transform.zoom;if(O.revealStart>M)return;const R=Cl(0,1,O.revealStart,O.revealStart+O.revealRange,M);T.strength*=R,d.overrideStyleParameters||(d.intensity=l.style.snow.state.density,d.timeFactor=l.style.snow.state.intensity,d.color=structuredClone(l.style.snow.state.color),v=structuredClone(l.style.snow.state.direction),d.screenThinning.intensity=l.style.snow.state.centerThinning,d.billboardSize=2.79*l.style.snow.state.flakeSize,T.strength=1,T.color=structuredClone(l.style.snow.state.vignetteColor));const N=this.updateOnRender(l,d.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const q=l.context,H=q.gl,re=l.transform,ee=l.getOrCreateProgram("snowParticle");l.uploadCommonUniforms(q,ee),((oe,he,ce)=>{const de=V0(this._movement.getPosition(),oe),_e=re.width/2,Me=re.height/2,Ce=Cl(0,ce.screenThinning.start,0,1,ce.screenThinning.intensity),Ae=Cl(.001,ce.screenThinning.range,0,1,ce.screenThinning.intensity),We=Cl(0,ce.screenThinning.particleOffset,0,1,ce.screenThinning.intensity),$e=(Ge={modelview:N.modelviewMatrix,projection:N.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:de,velocityConeAperture:ce.velocityConeAperture,velocity:ce.velocity,horizontalOscillationRadius:ce.horizontalOscillationRadius,horizontalOscillationRate:ce.horizontalOscillationRate,boxSize:oe,billboardSize:1*ce.billboardSize,simpleShapeParameters:[ce.shapeFadeStart,ce.shapeFadePower],screenSize:[re.width,re.height],thinningCenterPos:[_e,Me],thinningShape:[Ce,Ae,Math.pow(10,ce.screenThinning.fadePower)],thinningAffectedRatio:ce.screenThinning.affectedRatio,thinningParticleOffset:We,color:[ce.color.r,ce.color.g,ce.color.b,ce.color.a],direction:v},{u_modelview:Float32Array.from(Ge.modelview),u_projection:Float32Array.from(Ge.projection),u_time:Ge.time,u_cam_pos:Ge.camPos,u_velocityConeAperture:Ge.velocityConeAperture,u_velocity:Ge.velocity,u_horizontalOscillationRadius:Ge.horizontalOscillationRadius,u_horizontalOscillationRate:Ge.horizontalOscillationRate,u_boxSize:Ge.boxSize,u_billboardSize:Ge.billboardSize,u_simpleShapeParameters:Ge.simpleShapeParameters,u_screenSize:Ge.screenSize,u_thinningCenterPos:Ge.thinningCenterPos,u_thinningShape:Ge.thinningShape,u_thinningAffectedRatio:Ge.thinningAffectedRatio,u_thinningParticleOffset:Ge.thinningParticleOffset,u_particleColor:Ge.color,u_direction:Ge.direction});var Ge;const Fe=Math.round(ce.intensity*this.particlesCount),Re=a.bg.simpleSegment(0,0,4*Fe,2*Fe);this.particlesVx&&this.particlesIdx&&ee.draw(l,H.TRIANGLES,An.disabled,qn.disabled,Gn.alphaBlended,jn.disabled,$e,"snow_particles",this.particlesVx,this.particlesIdx,Re)})(d.boxSize,0,d),this._vignette.draw(l,T)}}const Ku={symbol:function(y,l,d,v,T){if(y.renderPass!=="translucent")return;const O=qn.disabled,M=y.colorModeForRenderPass(),R=d.layout.get("text-variable-anchor"),N=d.layout.get("text-size-scale-range"),q=a.aA(y.scaleFactor,N[0],N[1]);R&&(function(ee,oe,he,ce,de,_e,Me,Ce){const Ae=oe.transform,We=de==="map",$e=_e==="map";for(const Ge of ee){const Fe=ce.getTile(Ge),Re=Fe.getBucket(he);if(!Re||!Re.text||!Re.text.segments.get().length)continue;const et=a.bK(Re.textSizeData,Ae.zoom,Ce),nt=Ac(Ge,Re.getProjection(),Ae),st=Ae.calculatePixelsToTileUnitsMatrix(Fe),dt=yd(nt,Fe.tileID.canonical,$e,We,Ae,Re.getProjection(),st),ft=Re.hasIconTextFit()&&Re.hasIconData();et&&vh(Re,We,$e,Me,Ae,dt,Ge,Math.pow(2,Ae.zoom-Fe.tileID.overscaledZ),et,ft)}})(v,y,d,l,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),T,q);const H=d.paint.get("icon-opacity").constantOr(1)!==0,re=d.paint.get("text-opacity").constantOr(1)!==0;d.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(H||re)?Fd(y,l,d,v,O,M):(H&&Fd(y,l,d,v,O,M,{onlyIcons:!0}),re&&Fd(y,l,d,v,O,M,{onlyText:!0})),l.map.showCollisionBoxes&&(ca(y,l,d,v,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),ca(y,l,d,v,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(y,l,d,v){if(y.renderPass!=="translucent")return;const T=d.paint.get("circle-opacity"),O=d.paint.get("circle-stroke-width"),M=d.paint.get("circle-stroke-opacity"),R=d.layout.get("circle-sort-key").constantOr(1)!==void 0,N=d.paint.get("circle-emissive-strength");if(T.constantOr(1)===0&&(O.constantOr(1)===0||M.constantOr(1)===0))return;const q=y.context,H=q.gl,re=y.transform,ee=!(!y.terrain||!y.terrain.enabled),oe=d.layout.get("circle-elevation-reference"),he=y.depthModeForSublayer(0,An.ReadOnly),ce=new An(y.context.gl.LEQUAL,An.ReadOnly,y.depthRangeFor3D),de=oe==="none"||ee?he:ce,_e=qn.disabled,Me=y.colorModeForDrapableLayerRenderPass(N),Ce=re.projection.name==="globe",Ae=[a.aF(re.center.lng),a.aJ(re.center.lat)],We=[];for(let Ge=0;Ge<v.length;Ge++){const Fe=v[Ge],Re=l.getTile(Fe),et=Re.getBucket(d);if(!et||et.projection.name!==re.projection.name)continue;const nt=et.programConfigurations.get(d.id),st=et.layoutVertexBuffer,dt=et.globeExtVertexBuffer,ft=et.indexBuffer,wt=a.e0(d),It=[dt],pt=y.isTileAffectedByFog(Fe);Ce&&wt.push("PROJECTION_GLOBE_VIEW"),wt.push("DEPTH_D24"),y.terrain&&re.depthOcclusionForSymbolsAndCircles&&wt.push("DEPTH_OCCLUSION"),et.hasElevation&&!y.terrain&&(wt.push("ELEVATED_ROADS"),It.push(et.elevatedLayoutVertexBuffer));const tt=y.getOrCreateProgram("circle",{config:nt,defines:wt,overrideFog:pt}),At=re.projection.createInversionMatrix(re,Fe.canonical),gt={programConfiguration:nt,program:tt,layoutVertexBuffer:st,dynamicBuffers:It,indexBuffer:ft,uniformValues:a.e1(y,Fe,Re,At,Ae,d),tile:Re};if(R){const Dt=et.segments.get();for(const qt of Dt)We.push({segments:new a.bg([qt]),sortKey:qt.sortKey,state:gt})}else We.push({segments:et.segments,sortKey:0,state:gt})}R&&We.sort((Ge,Fe)=>Ge.sortKey-Fe.sortKey);const $e={useDepthForOcclusion:re.depthOcclusionForSymbolsAndCircles};for(const Ge of We){const{programConfiguration:Fe,program:Re,layoutVertexBuffer:et,dynamicBuffers:nt,indexBuffer:st,uniformValues:dt,tile:ft}=Ge.state,wt=Ge.segments;y.terrain&&y.terrain.setupElevationDraw(ft,Re,$e),y.uploadCommonUniforms(q,Re,ft.tileID.toUnwrapped()),Re.draw(y,H.TRIANGLES,de,_e,Me,jn.disabled,dt,d.id,et,st,wt,d.paint,re.zoom,Fe,nt)}},heatmap:function(y,l,d,v){if(d.paint.get("heatmap-opacity")!==0)if(y.renderPass==="offscreen"){const T=y.context,O=T.gl,M=qn.disabled,R=new Gn([O.ONE,O.ONE,O.ONE,O.ONE],a.ao.transparent,[!0,!0,!0,!0]);(function(oe,he,ce,de){const _e=oe.gl,Me=he.width*de,Ce=he.height*de;oe.activeTexture.set(_e.TEXTURE1),oe.viewport.set([0,0,Me,Ce]);let Ae=ce.heatmapFbo;if(!Ae||Ae&&(Ae.width!==Me||Ae.height!==Ce)){Ae&&Ae.destroy();const We=_e.createTexture();_e.bindTexture(_e.TEXTURE_2D,We),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_WRAP_S,_e.CLAMP_TO_EDGE),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_WRAP_T,_e.CLAMP_TO_EDGE),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_MIN_FILTER,_e.LINEAR),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_MAG_FILTER,_e.LINEAR),Ae=ce.heatmapFbo=oe.createFramebuffer(Me,Ce,1,null),(function($e,Ge,Fe,Re,et,nt){const st=$e.gl;st.texImage2D(st.TEXTURE_2D,0,$e.extRenderToTextureHalfFloat?st.RGBA16F:st.RGBA,et,nt,0,st.RGBA,$e.extRenderToTextureHalfFloat?st.HALF_FLOAT:st.UNSIGNED_BYTE,null),Re.colorAttachment0.set(Fe)})(oe,0,We,Ae,Me,Ce)}else _e.bindTexture(_e.TEXTURE_2D,Ae.colorAttachment0.get()),oe.bindFramebuffer.set(Ae.framebuffer)})(T,y,d,y.transform.projection.name==="globe"?.5:.25),T.clear({color:a.ao.transparent});const N=y.transform,q=N.projection.name==="globe",H=q?["PROJECTION_GLOBE_VIEW"]:[],re=q?jn.frontCCW:jn.disabled,ee=[a.aF(N.center.lng),a.aJ(N.center.lat)];for(let oe=0;oe<v.length;oe++){const he=v[oe];if(l.hasRenderableParent(he))continue;const ce=l.getTile(he),de=ce.getBucket(d);if(!de||de.projection.name!==N.projection.name)continue;const _e=y.isTileAffectedByFog(he),Me=de.programConfigurations.get(d.id),Ce=y.getOrCreateProgram("heatmap",{config:Me,defines:H,overrideFog:_e}),{zoom:Ae}=y.transform;y.terrain&&y.terrain.setupElevationDraw(ce,Ce),y.uploadCommonUniforms(T,Ce,he.toUnwrapped());const We=N.projection.createInversionMatrix(N,he.canonical);Ce.draw(y,O.TRIANGLES,An.disabled,M,R,re,Dd(y,he,ce,We,ee,Ae,d.paint.get("heatmap-intensity")),d.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,d.paint,y.transform.zoom,Me,q?[de.globeExtVertexBuffer]:null)}T.viewport.set([0,0,y.width,y.height])}else y.renderPass==="translucent"&&(y.context.setColorMode(y.colorModeForRenderPass()),(function(T,O){const M=T.context,R=M.gl,N=O.heatmapFbo;if(!N)return;M.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,N.colorAttachment0.get()),M.activeTexture.set(R.TEXTURE1);let q=O.colorRampTexture;q||(q=O.colorRampTexture=new a.T(M,O.colorRamp,R.RGBA8)),q.bind(R.LINEAR,R.CLAMP_TO_EDGE),T.getOrCreateProgram("heatmapTexture").draw(T,R.TRIANGLES,An.disabled,qn.disabled,T.colorModeForRenderPass(),jn.disabled,((H,re)=>({u_image:0,u_color_ramp:1,u_opacity:re.paint.get("heatmap-opacity")}))(0,O),O.id,T.viewportBuffer,T.quadTriangleIndexBuffer,T.viewportSegments,O.paint,T.transform.zoom)})(y,d))},line:function(y,l,d,v){if(y.renderPass!=="translucent")return;const T=d.paint.get("line-opacity"),O=d.paint.get("line-width");if(T.constantOr(1)===0||O.constantOr(1)===0)return;const M=d.paint.get("line-emissive-strength").isConstant(),R=d.paint.get("line-emissive-strength").constantOr(0),N=d.paint.get("line-occlusion-opacity"),q=d.layout.get("line-elevation-reference"),H=d.layout.get("line-width-unit")==="meters",re=q==="sea",ee=!(!y.terrain||!y.terrain.enabled),oe=y.context,he=oe.gl;if(d.hasElevatedBuckets&&y.transform.projection.name==="globe")return;const ce=d.layout.get("line-cross-slope"),de=ce!==void 0,_e=ce<1,Me=y.colorModeForDrapableLayerRenderPass(M?R:null),Ce=y.terrain&&y.terrain.renderingToTexture,Ae=Ce?1:a.o.devicePixelRatio,We=d.paint.get("line-dasharray"),$e=We.constantOr(1),Ge=d.layout.get("line-cap"),Fe=We.constantOr(null),Re=Ge.constantOr(null),et=d.paint.get("line-pattern"),nt=et.constantOr(1),st=d.paint.get("line-pattern-cross-fade"),dt=et.constantOr(null),ft=d.paint.get("line-opacity").constantOr(1);let wt=!nt&&ft!==1||y.depthOcclusion&&N>0&&N<1;const It=d.paint.get("line-gradient"),pt=nt?"linePattern":"line",tt=a.e2(d);let At;if(Ce&&y.terrain&&y.terrain.clipOrMaskOverlapStencilType()&&(wt=!1),N!==0&&y.depthOcclusion){const tn=d.paint._values["line-opacity"];tn&&tn.value&&tn.value.kind==="constant"?At=tn.value:a.w(`Occlusion opacity for layer ${d.id} is supported only when line-opacity isn't data-driven.`)}O.value.kind!=="constant"&&O.value.isLineProgressConstant===!1&&tt.push("VARIABLE_LINE_WIDTH"),Ce&&(y.emissiveMode!=="dual-source-blending"||M?y.emissiveMode==="mrt-fallback"&&tt.push("USE_MRT1"):tt.push("DUAL_SOURCE_BLENDING"));const gt=(tn,Wt,Ht,xn,yn,rn)=>{for(const _n of tn){const Dn=l.getTile(_n);if(nt&&!Dn.patternsLoaded())continue;const Un=Dn.getBucket(d);if(!Un||Un.elevationType!=="none"&&!yn||Un.elevationType==="none"&&yn)continue;y.prepareDrawTile();const Qn=[...Wt],yr=y.shadowRenderer,$n=Un.elevationType==="road"&&!!yr&&yr.enabled;let Jn=[0,0,0];if($n){const tr=y.style.directionalLight,yi=y.style.ambientLight;tr&&yi&&(Jn=js(y.style,tr,yi)),Qn.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET")}const Yn=Un.programConfigurations.get(d.id);let Ur=!1;if(dt&&Dn.imageAtlas){const tr=a.e3.from(dt),yi=tr.getPrimary().scaleSelf(Ae).toString(),Ji=Dn.imageAtlas.patternPositions.get(yi),ai=tr.getSecondary(),_i=ai?Dn.imageAtlas.patternPositions.get(ai.scaleSelf(Ae).toString()):null;Ur=!!Ji&&!!_i,Ji&&Yn.setConstantPatternPositions(Ji,_i)}st>0&&(Ur||Yn.getPatternTransitionVertexBuffer("line-pattern"))&&Qn.push("LINE_PATTERN_TRANSITION");const Mr=y.isTileAffectedByFog(_n),ei=y.getOrCreateProgram(pt,{config:Yn,defines:Qn,overrideFog:Mr});if(!nt&&Fe&&Re&&Dn.lineAtlas){const tr=Dn.lineAtlas.getDash(Fe,Re);tr&&Yn.setConstantPatternPositions(tr)}$n&&yr.setupShadows(Dn.tileID.toUnwrapped(),ei,"vector-tile");let[wr,er]=d.paint.get("line-trim-offset");(Re==="round"||Re==="square")&&wr!==er&&(wr===0&&(wr-=1),er===1&&(er+=1));const Rr=Ce?_n.projMatrix:null,Pi=H?1/Un.tileToMeter/a.ay(Dn,1,y.transform.zoom):1,ti=H?1/Un.tileToMeter/a.ay(Dn,1,Math.floor(y.transform.zoom)):1,Hr=nt?a.e4(y,Dn,d,Rr,Ae,Pi,ti,[wr,er],Jn,st):a.e5(y,Dn,d,Rr,Un.lineClipsArray.length,Ae,Pi,ti,[wr,er],Jn);if(It){const tr=Un.gradients[d.id];let yi=tr.texture;if(d.gradientVersion!==tr.version){let Ji=256;if(d.stepInterpolant){const ai=l.getSource().maxzoom,_i=_n.canonical.z===ai?Math.ceil(1<<y.transform.maxZoom-_n.canonical.z):1;Ji=a.aA(a.e6(Un.maxLineLength/a.al*1024*_i),256,oe.maxTextureSize)}tr.gradient=a.e7({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:Ji,image:tr.gradient||void 0,clips:Un.lineClipsArray}),tr.texture?tr.texture.update(tr.gradient):tr.texture=new a.T(oe,tr.gradient,he.RGBA8),tr.version=d.gradientVersion,yi=tr.texture}oe.activeTexture.set(he.TEXTURE1),yi.bind(d.stepInterpolant?he.NEAREST:he.LINEAR,he.CLAMP_TO_EDGE)}$e&&(oe.activeTexture.set(he.TEXTURE0),Dn.lineAtlasTexture&&Dn.lineAtlasTexture.bind(he.LINEAR,he.REPEAT),Yn.updatePaintBuffers()),nt&&(oe.activeTexture.set(he.TEXTURE0),Dn.imageAtlasTexture&&Dn.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),Yn.updatePaintBuffers()),yn&&!re&&y.terrain.setupElevationDraw(Dn,ei),y.uploadCommonUniforms(oe,ei,_n.toUnwrapped());const Kn=tr=>{At!=null&&(At.value=ft*N),ei.draw(y,he.TRIANGLES,Ht,tr,Me,jn.disabled,Hr,d.id,Un.layoutVertexBuffer,Un.indexBuffer,Un.segments,d.paint,y.transform.zoom,Yn,[Un.layoutVertexBuffer2,Un.patternVertexBuffer,Un.zOffsetVertexBuffer]),At!=null&&(At.value=ft)};if(wt&&!yn){const tr=y.stencilModeForClipping(_n).ref;tr===0&&Ce&&oe.clear({stencil:0});const yi={func:he.EQUAL,mask:255};Hr.u_alpha_discard_threshold=.8,Kn(new qn(yi,tr,255,he.KEEP,he.KEEP,he.INVERT)),Hr.u_alpha_discard_threshold=0,Kn(new qn(yi,tr,255,he.KEEP,he.KEEP,he.KEEP))}else Hr.u_alpha_discard_threshold=wt&&yn&&rn?.8:0,Kn(yn?xn:y.stencilModeForClipping(_n))}};let Dt=y.depthModeForSublayer(0,An.ReadOnly);const qt=new An(y.depthOcclusion?he.GREATER:he.LEQUAL,An.ReadOnly,y.depthRangeFor3D);if(d.hasNonElevatedBuckets){const tn=!Ce&&y.terrain;N!==0&&tn?a.w(`Occlusion opacity for layer ${d.id} is supported on terrain only if the layer has line-z-offset enabled.`):tn?a.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${d.id}.`):gt(v,tt,Dt,qn.disabled,!1,!0)}if(d.hasElevatedBuckets){q==="hd-road-markup"?ee||(Dt=qt,tt.push("ELEVATED_ROADS")):(tt.push("ELEVATED"),Dt=qt,de&&tt.push(_e?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),re&&tt.push("ELEVATION_REFERENCE_SEA"));const tn=wt?y.stencilModeFor3D():qn.disabled;y.forceTerrainMode=!0,gt(v,tt,Dt,tn,!0,!0),wt&&gt(v,tt,Dt,tn,!0,!1),y.forceTerrainMode=!1}wt&&(y.resetStencilClippingMasks(),Ce&&oe.clear({stencil:0})),N===0||y.depthOcclusion||Ce||y.layersWithOcclusionOpacity.push(y.currentLayer)},fill:function(y,l,d,v){const T=d.paint.get("fill-color"),O=d.paint.get("fill-opacity");if(O.constantOr(1)===0)return;const M=d.paint.get("fill-emissive-strength"),R=y.colorModeForDrapableLayerRenderPass(M),N=d.paint.get("fill-pattern"),q=y.opaquePassEnabledForLayer()&&!N.constantOr(1)&&T.constantOr(a.ao.transparent).a===1&&O.constantOr(0)===1?"opaque":"translucent";let H="none";d.layout.get("fill-elevation-reference")!=="none"?H="road":d.paint.get("fill-z-offset").constantOr(1)!==0&&(H="offset");const re=!(!y.terrain||!y.terrain.enabled),ee={painter:y,sourceCache:l,layer:d,coords:v,colorMode:R,elevationType:H,terrainEnabled:re,pass:q};if(y.renderPass==="shadow")return void(y.shadowRenderer&&H==="road"&&!re&&(function(he){const{painter:ce,sourceCache:de,layer:_e,coords:Me}=he,Ce=ce.context.gl,Ae=he.painter.shadowRenderer;for(const We of Me){const $e=de.getTile(We),Ge=$e.getBucket(_e);if(!Ge)continue;const Fe=Ge.elevatedStructures;if(!Fe||!Fe.shadowCasterSegments||Fe.shadowCasterSegments.segments[0].primitiveLength===0)continue;ce.prepareDrawTile();const Re=Ge.bufferData.programConfigurations.get(_e.id),et=ce.isTileAffectedByFog(We),nt=ce.getOrCreateProgram("elevatedStructuresDepth",{config:Re,overrideFog:et}),st=Ae.calculateShadowPassMatrixFromTile($e.tileID.toUnwrapped());ce.uploadCommonUniforms(ce.context,nt,We.toUnwrapped());const dt=Md(st,0);nt.draw(ce,Ce.TRIANGLES,Ae.getShadowPassDepthMode(),qn.disabled,Ae.getShadowPassColorMode(),jn.disabled,dt,_e.id,Fe.vertexBuffer,Fe.indexBuffer,Fe.shadowCasterSegments,_e.paint,ce.transform.zoom,Re)}})(ee));const oe=y.emissiveMode==="mrt-fallback";if(H!=="offset"){if(Ma(ee,!1,oe),H==="road"){const he=!re&&y.renderPass==="translucent";he&&I0(y,l,d,v,"geometry"),Ma(ee,!0,oe,qn.disabled),he&&(function(ce){const{painter:de,sourceCache:_e,layer:Me,coords:Ce,colorMode:Ae}=ce,We=de.context.gl,$e=ce.painter.shadowRenderer,Ge=!!$e&&$e.enabled,Fe=new An(de.context.gl.LEQUAL,An.ReadOnly,de.depthRangeFor3D);let Re=[0,0,0];if(Ge){const nt=de.style.directionalLight,st=de.style.ambientLight;nt&&st&&(Re=js(de.style,nt,st))}const et=nt=>{for(const st of Ce){const dt=_e.getTile(st),ft=dt.getBucket(Me);if(!ft)continue;const wt=ft.elevatedStructures;if(!wt)continue;let It,pt;if(nt?(It=wt.renderableBridgeSegments,pt=wt.bridgeProgramConfigurations.get(Me.id)):(It=wt.renderableTunnelSegments,pt=wt.tunnelProgramConfigurations.get(Me.id)),!It||It.segments[0].primitiveLength===0)continue;pt.updatePaintBuffers(),de.prepareDrawTile();const tt=de.isTileAffectedByFog(st),At=[];Ge&&At.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET");const gt=de.getOrCreateProgram("elevatedStructures",{config:pt,overrideFog:tt,defines:At}),Dt=de.translatePosMatrix(st.projMatrix,dt,Me.paint.get("fill-translate"),Me.paint.get("fill-translate-anchor"));Ge&&$e.setupShadows(dt.tileID.toUnwrapped(),gt,"vector-tile");const qt=Yu(Dt,Re);de.uploadCommonUniforms(de.context,gt,st.toUnwrapped()),gt.draw(de,We.TRIANGLES,Fe,qn.disabled,Ae,jn.backCCW,qt,Me.id,wt.vertexBuffer,wt.indexBuffer,It,Me.paint,de.transform.zoom,pt,[wt.vertexBufferNormal])}};et(!0),et(!1)})(ee)}}else Ma(ee,!1,oe,y.stencilModeFor3D())},"fill-extrusion":function(y,l,d,v){const T=d.paint.get("fill-extrusion-opacity"),O=y.context,M=O.gl,R=y.terrain,N=R&&R.renderingToTexture;if(T===0)return;const q=y.emissiveMode==="mrt-fallback",H=y.conflationActive&&y.style.isLayerClipped(d,l.getSource()),re=y.style.order.indexOf(d.fqid);if(H&&(function(ee,oe,he,ce,de){for(const _e of ce){const Me=oe.getTile(_e).getBucket(he);Me&&(Me.updateReplacement(_e,ee.replacementSource,de),Me.uploadCentroid(ee.context))}})(y,l,d,v,re),R||H)for(const ee of v){const oe=l.getTile(ee).getBucket(d);oe&&P0(y.context,l,ee,oe,d,R,H)}if(y.renderPass==="shadow"&&y.shadowRenderer){const ee=y.shadowRenderer;if(R&&T<.65&&d._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof a.ad)return;const oe=ee.getShadowPassDepthMode(),he=ee.getShadowPassColorMode();wh(y,l,d,v,oe,qn.disabled,he,H)}else if(y.renderPass==="translucent"){const ee=!d.paint.get("fill-extrusion-pattern").constantOr(1),oe=d.paint.get("fill-extrusion-color").constantOr(a.ao.white);if(!N&&oe.a!==0){const he=new An(y.context.gl.LEQUAL,An.ReadWrite,y.depthRangeFor3D);T===1&&ee?wh(y,l,d,v,he,qn.disabled,Gn.unblended,H):(wh(y,l,d,v,he,qn.disabled,Gn.disabled,H),wh(y,l,d,v,he,y.stencilModeFor3D(),y.colorModeForRenderPass(),H),y.resetStencilClippingMasks())}if(y.style.enable3dLights()&&ee&&(!R&&y.transform.projection.name!=="globe"||N)){const he=d.paint.get("fill-extrusion-opacity"),ce=d.paint.get("fill-extrusion-ambient-occlusion-intensity"),de=d.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),_e=d.paint.get("fill-extrusion-flood-light-intensity"),Me=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Ce=d.paint.get("fill-extrusion-flood-light-color").toNonPremultipliedRenderColor(Me?null:d.lut).toArray01().slice(0,3),Ae=ce>0&&de>0,We=_e>0,$e=(Re,et,nt)=>(1-nt)*Re+nt*et,Ge=new Nd;Ge.translate=d.paint.get("fill-extrusion-translate"),Ge.translateAnchor=d.paint.get("fill-extrusion-translate-anchor"),Ge.edgeRadius=d.layout.get("fill-extrusion-edge-radius"),Ge.cutoffFadeRange=d.paint.get("fill-extrusion-cutoff-fade-range");const Fe=Re=>{const et=y.depthModeForSublayer(1,An.ReadOnly,M.LEQUAL,!0),nt=d.paint.get(Re?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),st=$e(.1,3,nt),dt=y._showOverdrawInspector;if(!dt){const ft=new qn({func:M.ALWAYS,mask:255},255,255,M.KEEP,M.KEEP,M.REPLACE),wt=new Gn([M.ONE,M.ONE,M.ONE,M.ONE],a.ao.transparent,[!1,!1,!1,!0],M.MIN);Xu(Ge,y,l,d,v,et,ft,wt,jn.disabled,Re,"sdf",he,ce,de,_e,Ce,st,H,!1)}{const ft=dt?qn.disabled:new qn({func:M.EQUAL,mask:255},255,255,M.KEEP,M.DECR,M.DECR),wt=dt?y.colorModeForRenderPass():new Gn([M.ONE_MINUS_DST_ALPHA,M.DST_ALPHA,M.ONE,M.ONE],a.ao.transparent,[!0,!0,!0,!0]);Xu(Ge,y,l,d,v,et,ft,wt,jn.disabled,Re,"color",he,ce,de,_e,Ce,st,H,!1)}};if(N){const Re=()=>{const nt=R.drapeBufferSize[0],st=R.drapeBufferSize[1];let dt=R.framebufferCopyTexture;return dt&&(!dt||dt.size[0]===nt&&dt.size[1]===st)||(dt&&dt.destroy(),dt=R.framebufferCopyTexture=new a.T(O,new a.q({width:nt,height:st}),M.RGBA8)),dt.bind(M.LINEAR,M.CLAMP_TO_EDGE),M.copyTexSubImage2D(M.TEXTURE_2D,0,0,0,0,0,nt,st),dt},et=(nt,st,dt)=>{const ft=y.depthModeForSublayer(1,An.ReadOnly,M.LEQUAL,!1),wt=d.paint.get(nt?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),It=$e(.1,3,wt);{const pt=new Gn([M.ONE,M.ONE,M.ONE,M.ONE],a.ao.transparent,[!1,!1,!1,!0]);Xu(Ge,y,l,d,v,ft,qn.disabled,pt,jn.disabled,nt,"clear",he,ce,de,_e,Ce,It,H,st)}{const pt=new qn({func:M.ALWAYS,mask:255},255,255,M.KEEP,M.KEEP,M.REPLACE),tt=new Gn([M.ONE,M.ONE,M.ONE,M.ONE],a.ao.transparent,[!1,!1,!1,!0],M.MIN);Xu(Ge,y,l,d,v,ft,pt,tt,jn.disabled,nt,"sdf",he,ce,de,_e,Ce,It,H,st)}q&&!nt&&(dt=Re());{const pt=nt?M.ZERO:M.ONE_MINUS_DST_ALPHA,tt=new qn({func:M.EQUAL,mask:255},255,255,M.KEEP,M.DECR,M.DECR),At=new Gn([pt,M.DST_ALPHA,M.ONE_MINUS_DST_ALPHA,M.ZERO],a.ao.transparent,[!0,!0,!0,!0]);Xu(Ge,y,l,d,v,ft,tt,At,jn.disabled,nt,"color",he,ce,de,_e,Ce,It,H,st)}if(!q||nt){const pt=new Gn([M.ONE,M.ONE,M.ONE,nt?M.ZERO:M.ONE],a.ao.transparent,[!1,!1,!1,!0],nt?M.FUNC_ADD:M.MAX);Xu(Ge,y,l,d,v,ft,qn.disabled,pt,jn.disabled,nt,"clear",he,ce,de,_e,Ce,It,H,st,dt)}else{M.drawBuffers([M.NONE,M.COLOR_ATTACHMENT1]);const pt=new qn({func:M.EQUAL,mask:255},254,255,M.KEEP,M.DECR,M.DECR),tt=new Gn([M.ONE,M.ONE,M.ONE,M.ONE],a.ao.transparent,[!0,!1,!1,!1],M.MAX);Xu(Ge,y,l,d,v,ft,pt,tt,jn.disabled,nt,"emissive",he,ce,de,_e,Ce,It,H,st,dt),M.drawBuffers([M.COLOR_ATTACHMENT0])}};if(Ae||We){let nt;y.prepareDrawTile(),q&&!Ae||(nt=Re()),Ae&&et(!0,!1,nt),We&&et(!1,!0,nt)}}else Ae&&Fe(!0),We&&Fe(!1),(Ae||We)&&y.resetStencilClippingMasks()}}},building:function(y,l,d,v){y.currentLayer<y.firstLightBeamLayer&&(y.firstLightBeamLayer=y.currentLayer);const T=d.paint.get("building-ambient-occlusion-ground-intensity"),O=d.paint.get("building-ambient-occlusion-ground-radius"),M=d.paint.get("building-ambient-occlusion-ground-attenuation"),R=d.paint.get("building-opacity");if(R<=0)return;let N=T>0&&O>0,q=!0;const H=d.paint.get("building-vertical-scale");if(H<=0)return;y.shadowRenderer||(q=!1);const re=y.conflationActive&&y.style.isLayerClipped(d,l.getSource()),ee=y.style.order.indexOf(d.fqid);if((function(oe,he,ce,de,_e,Me){for(const Ce of Me){const Ae=he.getTile(Ce).getBucket(ce);Ae&&(_e&&Ae.updateReplacement(Ce,oe.replacementSource,de),Ae.uploadUpdatedIndexBuffer(oe.context))}})(y,l,d,ee,re,v),(function(oe,he,ce,de){for(const _e of de){const Me=he.getTile(_e).getBucket(ce);Me&&Me.needsEvaluation()&&Me.uploadUpdatedColorBuffer(oe.context)}})(y,l,d,v),d.resetLayerRenderingStats(y),y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!0),y.renderPass==="shadow"&&y.shadowRenderer){const oe=y.shadowRenderer,he=[],ce=oe.getShadowPassDepthMode();jo({painter:y,source:l,layer:d,coords:v,defines:he,blendMode:oe.getShadowPassColorMode(),depthMode:ce,opacity:R,verticalScale:H,facadeEmissiveChance:0,facadeAOIntensity:0,floodLightIntensity:0,floodLightColor:[0,0,0]})}else if(y.renderPass==="translucent"){let oe=["HAS_ATTRIBUTE_a_part_color_emissive","LIGHTING_3D_MODE"];q&&(oe=oe.concat("RENDER_SHADOWS","DEPTH_TEXTURE")),y.shadowRenderer&&y.shadowRenderer.useNormalOffset&&(oe=oe.concat("NORMAL_OFFSET"));const he=d.paint.get("building-facade-emissive-chance"),ce=d.paint.get("building-ambient-occlusion-intensity"),de=d.paint.get("building-flood-light-intensity"),_e=d.paint.get("building-flood-light-color-use-theme").constantOr("default")==="none",Me=d.paint.get("building-flood-light-color").toNonPremultipliedRenderColor(_e?null:d.lut).toArray01().slice(0,3),Ce=d.paint.get("building-flood-light-ground-attenuation"),Ae=de>0,We=new An(y.context.gl.LEQUAL,An.ReadWrite,y.depthRangeFor3D);R<1&&jo({painter:y,source:l,layer:d,coords:v,defines:oe,blendMode:Gn.disabled,depthMode:We,opacity:R,verticalScale:H,facadeEmissiveChance:he,facadeAOIntensity:ce,floodLightIntensity:de,floodLightColor:Me,depthOnly:!0});const $e=y.colorModeForRenderPass();jo({painter:y,source:l,layer:d,coords:v,defines:oe,blendMode:$e,depthMode:We,opacity:R,verticalScale:H,facadeEmissiveChance:he,facadeAOIntensity:ce,floodLightIntensity:de,floodLightColor:Me}),N&&Wa(y,l,d,v,!0,R,T,O,de,Me,M,re),Ae&&Wa(y,l,d,v,!1,R,T,O,de,Me,Ce,re)}else if(y.renderPass==="light-beam"){const oe=["HAS_ATTRIBUTE_a_part_color_emissive","HAS_ATTRIBUTE_a_bloom_attenuation"],he=new An(y.context.gl.LEQUAL,An.ReadOnly,y.depthRangeFor3D);jo({painter:y,source:l,layer:d,coords:v,defines:oe,blendMode:Gn.alphaBlended,depthMode:he,opacity:R,verticalScale:H,facadeEmissiveChance:0,facadeAOIntensity:0,floodLightIntensity:0,floodLightColor:[0,0,0]})}y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!1),y.resetStencilClippingMasks()},hillshade:function(y,l,d,v){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent"||y.style.disableElevatedTerrain)return;const T=y.context,O=y.terrain&&y.terrain.renderingToTexture,[M,R]=y.renderPass!=="translucent"||O?[{},v]:y.stencilConfigForOverlap(v);for(const N of R){const q=l.getTile(N);if(q.needsHillshadePrepare&&y.renderPass==="offscreen")fu(y,q,d);else if(y.renderPass==="translucent"){const H=y.depthModeForSublayer(0,An.ReadOnly),re=d.paint.get("hillshade-emissive-strength"),ee=y.colorModeForDrapableLayerRenderPass(re),oe=O&&y.terrain?y.terrain.stencilModeForRTTOverlap(N):M[N.overscaledZ];Cg(y,N,q,d,H,oe,ee)}}T.viewport.set([0,0,y.width,y.height]),y.resetStencilClippingMasks()},raster:function(y,l,d,v,T,O){if(y.renderPass!=="translucent"||d.paint.get("raster-opacity")===0)return;const M=y.transform.projection.name==="globe",R=d.paint.get("raster-elevation")!==0,N=R&&M;if(y.renderElevatedRasterBackface&&!N)return;const q=y.context,H=q.gl,re=l.getSource(),ee=(function($e,Ge,Fe,Re,et){const nt=Ge.paint.get("raster-color"),st=$e.type==="raster-array",dt=[],ft=Ge.paint.get("raster-resampling"),wt=Ge.paint.get("raster-color-mix");let It=Ge.paint.get("raster-color-range");const pt=[wt[0],wt[1],wt[2],0],tt=wt[3];let At=ft==="nearest"?Re.NEAREST:Re.LINEAR;if(st&&(dt.push("RASTER_ARRAY"),nt||dt.push("RASTER_COLOR"),ft==="linear"&&dt.push("RASTER_ARRAY_LINEAR"),At=Re.NEAREST,!It&&$e.rasterLayers)){const gt=$e.rasterLayers.find(({id:Dt})=>Dt===Ge.sourceLayer);gt&&gt.fields&&gt.fields.range&&(It=gt.fields.range)}if(It=It||[0,1],nt){dt.push("RASTER_COLOR"),Fe.activeTexture.set(Re.TEXTURE2),Ge.updateColorRamp(It);let gt=Ge.colorRampTexture;gt||(gt=Ge.colorRampTexture=new a.T(Fe,Ge.colorRamp,Re.RGBA8)),gt.bind(At,Re.CLAMP_TO_EDGE)}return et&&dt.push("USE_MRT1"),{mix:pt,range:It,offset:tt,defines:dt,resampling:At}})(re,d,q,H,y.terrain&&y.terrain.renderingToTexture&&y.emissiveMode==="mrt-fallback");if(re instanceof a.aU&&!v.length&&!M)return;const oe=d.paint.get("raster-emissive-strength"),he=y.colorModeForDrapableLayerRenderPass(oe),ce=y.terrain&&y.terrain.renderingToTexture,de=!y.options.moving,_e=d.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;if(re instanceof a.aU&&!v.length&&(re.onNorthPole||re.onSouthPole)){const $e=R?y.stencilModeFor3D():qn.disabled;return void Sh(!!re.onNorthPole,null,y,l,d,oe,ee,jn.disabled,$e)}if(!v.length)return;const[Me,Ce]=re instanceof a.aU||ce?[{},v]:y.stencilConfigForOverlap(v),Ae=Ce[Ce.length-1].overscaledZ;N&&ee.defines.push("PROJECTION_GLOBE_VIEW"),R&&ee.defines.push("RENDER_CUTOFF");const We=($e,Ge,Fe)=>{for(const Re of $e){const et=Re.toUnwrapped(),nt=l.getTile(Re);if(ce&&(!nt||!nt.hasData()))continue;q.activeTexture.set(H.TEXTURE0);const st=H_(nt,re,d,ee);if(!st||!st.texture)continue;const{texture:dt,mix:ft,offset:wt,tileSize:It,buffer:pt}=st;let tt,At;ce?(tt=An.disabled,At=Re.projMatrix):R?(tt=new An(H.LEQUAL,An.ReadWrite,y.depthRangeFor3D),At=M?Float32Array.from(y.transform.expandedFarZProjMatrix):y.transform.calculateProjMatrix(et,de)):(tt=y.depthModeForSublayer(Re.overscaledZ-Ae,d.paint.get("raster-opacity")===1?An.ReadWrite:An.ReadOnly,H.LESS),At=y.transform.calculateProjMatrix(et,de));const gt=y.terrain&&ce?y.terrain.stencilModeForRTTOverlap(Re):Me[Re.overscaledZ],Dt=O?0:d.paint.get("raster-fade-duration");nt.registerFadeDuration(Dt);const qt=l.findLoadedParent(Re,0),tn=Lg(nt,qt,l,y.transform,Dt);let Wt,Ht;!tn.isFading&&nt.refreshedUponExpiration&&(nt.refreshedUponExpiration=!1),y.terrain&&y.terrain.prepareDrawTile(),q.activeTexture.set(H.TEXTURE0),dt.bind(_e,H.CLAMP_TO_EDGE),q.activeTexture.set(H.TEXTURE1),qt?(qt.texture&&qt.texture.bind(_e,H.CLAMP_TO_EDGE),Wt=Math.pow(2,qt.tileID.overscaledZ-nt.tileID.overscaledZ),Ht=[nt.tileID.canonical.x*Wt%1,nt.tileID.canonical.y*Wt%1]):dt.bind(_e,H.CLAMP_TO_EDGE),"useMipmap"in dt&&q.extTextureFilterAnisotropic&&y.transform.pitch>20&&H.texParameterf(H.TEXTURE_2D,q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,q.extTextureFilterAnisotropicMax);const xn=y.transform;let yn;const rn=R?Gg(xn):[0,0,0,0];let _n,Dn,Un,Qn,yr,$n=0;if(N&&re instanceof a.aU&&re.coordinates.length>3)_n=Float32Array.from(a.bk(a.dJ(new a.cD(0,0,0)))),Dn=Float32Array.from(xn.globeMatrix),Un=Float32Array.from(a.dF(xn)),Qn=[a.aF(xn.center.lng),a.aJ(xn.center.lat)],yn=re.elevatedGlobePerspectiveTransform,yr=re.elevatedGlobeGridMatrix||new Float32Array(9);else if(N){const Mr=a.dG(Re.canonical);$n=a.dH(Mr.getCenter().lat),_n=Float32Array.from(a.bk(a.dJ(Re.canonical))),Dn=Float32Array.from(xn.globeMatrix),Un=Float32Array.from(a.dF(xn)),Qn=[a.aF(xn.center.lng),a.aJ(xn.center.lat)],yn=[0,0],yr=Float32Array.from(a.dI(Re.canonical,Mr,$n,xn.worldSize/xn._pixelsPerMercatorPixel))}else yn=re instanceof a.aU?re.perspectiveTransform:[0,0],_n=new Float32Array(16),Dn=new Float32Array(9),Un=new Float32Array(16),Qn=[0,0],yr=new Float32Array(9);const Jn=Id(At,_n,Dn,Un,yr,Ht||[0,0],a.aj(y.transform.zoom),Qn,rn,Wt||1,tn,d,yn,R?d.paint.get("raster-elevation"):0,2,ft,wt,ee.range,It,pt,oe),Yn=y.isTileAffectedByFog(Re),Ur=y.getOrCreateProgram("raster",{defines:ee.defines,overrideFog:Yn});if(y.uploadCommonUniforms(q,Ur,et),re instanceof a.aU){const Mr=re.elevatedGlobeVertexBuffer,ei=re.elevatedGlobeIndexBuffer;if(ce||!M)re.boundsBuffer&&re.boundsSegments&&Ur.draw(y,H.TRIANGLES,tt,qn.disabled,he,jn.disabled,Jn,d.id,re.boundsBuffer,y.quadTriangleIndexBuffer,re.boundsSegments);else if(Mr&&ei){const wr=xn.zoom<=a.c_?re.elevatedGlobeSegments:re.getSegmentsForLongitude(xn.center.lng);wr&&Ur.draw(y,H.TRIANGLES,tt,qn.disabled,he,Ge,Jn,d.id,Mr,ei,wr)}}else if(N){tt=new An(H.LEQUAL,An.ReadOnly,y.depthRangeFor3D);const Mr=y.globeSharedBuffers;if(Mr){const[ei,wr,er]=Mr.getGridBuffers($n,!1);Ur.draw(y,H.TRIANGLES,tt,Fe||gt,y.colorModeForRenderPass(),Ge,Jn,d.id,ei,wr,er)}}else{const{tileBoundsBuffer:Mr,tileBoundsIndexBuffer:ei,tileBoundsSegments:wr}=y.getTileBoundsBuffers(nt);Ur.draw(y,H.TRIANGLES,tt,gt,he,jn.disabled,Jn,d.id,Mr,ei,wr)}}if(!(re instanceof a.aU)&&N)for(const Re of $e){const et=Re.canonical.y===(1<<Re.canonical.z)-1;Re.canonical.y===0&&Sh(!0,Re,y,l,d,oe,ee,Ge,Fe||qn.disabled),et&&Sh(!1,Re,y,l,d,oe,ee,Ge===jn.frontCW?jn.backCW:jn.frontCW,Fe||qn.disabled)}};N?We(Ce,y.renderElevatedRasterBackface?jn.backCW:jn.frontCW,y.stencilModeFor3D()):We(Ce,jn.disabled,void 0),y.resetStencilClippingMasks()},"raster-particle":function(y,l,d,v,T,O){y.renderPass==="offscreen"&&(function(M,R,N,q){if(!q.length)return;const H=M.context,re=H.gl,ee=R.getSource();if(!(ee instanceof xs))return;const oe=Math.ceil(Math.sqrt(N.paint.get("raster-particle-count")));let he=N.particlePositionRGBAImage;if(!he||he.width!==oe){const Ce=(function(Ae){const We=Ae*Ae,$e=new Uint8Array(4*We),Ge=function(Re){return Re|=0,Re=Math.imul(2747636419^Re,2654435769),Re=Math.imul(Re^Re>>>16,2654435769),((Re=Math.imul(Re^Re>>>16,2654435769))>>>0)/4294967296},Fe=.9090909090909091;for(let Re=0;Re<We;Re++){const et=Fe*(Ge(2*Re+0)+Pd),nt=Fe*(Ge(2*Re+1)+Pd),st=255*et%1,dt=255*nt%1,ft=st,wt=nt-dt/255,It=dt;$e[4*Re+0]=255*(et-st/255),$e[4*Re+1]=255*ft,$e[4*Re+2]=255*wt,$e[4*Re+3]=255*It}return $e})(oe);he=N.particlePositionRGBAImage=new a.q({width:oe,height:oe},Ce)}let ce=N.particleFramebuffer;ce?ce.width!==oe&&(ce.destroy(),ce=N.particleFramebuffer=H.createFramebuffer(oe,oe,1,null)):ce=N.particleFramebuffer=H.createFramebuffer(oe,oe,1,null);const de=[];for(const Ce of q){const Ae=R.getTile(Ce);if(!(Ae instanceof kp))continue;const We=Wg(Ae,ee,N);if(!We)continue;const $e=[Ae.tileSize,Ae.tileSize];let Ge=N.tileFramebuffer;Ge||(Ge=N.tileFramebuffer=H.createFramebuffer($e[0],$e[1],1,null));let Fe=Ae.rasterParticleState;Fe||(Fe=Ae.rasterParticleState=new Yg(H,Ce,$e,he));const Re=Fe.update(N.lastInvalidatedAt);Fe.particleTextureDimension!==oe&&Fe.updateParticleTexture(Ce,he);const et=Fe.targetColorTexture;Fe.targetColorTexture=Fe.backgroundColorTexture,Fe.backgroundColorTexture=et;const nt=Fe.particleTexture0;Fe.particleTexture0=Fe.particleTexture1,Fe.particleTexture1=nt,de.push([Ce,We,Fe,Re])}if(de.length===0)return;const _e=a.o.now(),Me=N.previousDrawTimestamp?.001*(_e-N.previousDrawTimestamp):.0167;if(N.previousDrawTimestamp=_e,N.hasColorMap()){H.activeTexture.set(re.TEXTURE0+2);let Ce=N.colorRampTexture;Ce||(Ce=N.colorRampTexture=new a.T(H,N.colorRamp,re.RGBA8)),Ce.bind(re.LINEAR,re.CLAMP_TO_EDGE)}H.bindFramebuffer.set(N.tileFramebuffer.framebuffer),(function(Ce,Ae,We){const $e=Ce.context,Ge=$e.gl,Fe=Ae.tileFramebuffer;$e.activeTexture.set(Ge.TEXTURE0);const Re={u_texture:0,u_opacity:1.05*(nt=Ae.paint.get("raster-particle-fade-opacity-factor"))/(nt+.05)},et=Ce.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var nt;for(const st of We){const[,,dt,ft]=st;Fe.colorAttachment0.set(dt.targetColorTexture.texture),$e.viewport.set([0,0,Fe.width,Fe.height]),$e.clear({color:a.ao.transparent}),ft&&(dt.backgroundColorTexture.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE),et.draw(Ce,Ge.TRIANGLES,An.disabled,qn.disabled,Gn.alphaBlended,jn.disabled,Re,Ae.id,Ce.viewportBuffer,Ce.quadTriangleIndexBuffer,Ce.viewportSegments))}})(M,N,de),(function(Ce,Ae,We,$e){const Ge=Ce.context,Fe=Ge.gl,Re=We.tileFramebuffer,et=Ce.transform.projection.name==="globe",nt=We.paint.get("raster-particle-max-speed");for(const st of $e){const[dt,ft,wt]=st;Ge.activeTexture.set(Fe.TEXTURE0+0),ft.texture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),Re.colorAttachment0.set(wt.targetColorTexture.texture);const It=Ce.getOrCreateProgram("rasterParticleDraw",{defines:ft.defines,overrideFog:!1});Ge.activeTexture.set(Fe.TEXTURE0+1);const pt=ft.scalarData?[]:[0,1,2,3].map(gt=>a.e9[gt](dt));pt.push(dt);const tt=dt.canonical.x,At=dt.canonical.y;for(const gt of pt){const Dt=Ae.getTile(et?gt.wrapped():gt);if(!Dt)continue;const qt=Dt.rasterParticleState;if(!qt)continue;const tn=gt.canonical.x+(1<<gt.canonical.z)*(gt.wrap-dt.wrap),Wt=gt.canonical.y;qt.particleTexture0.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE);const Ht=Rd(1,qt.particleTexture0.size[0],[tn-tt,Wt-At],0,ft.texture.size,2,nt,ft.textureOffset,ft.scale,ft.offset);It.draw(Ce,Fe.POINTS,An.disabled,qn.disabled,Gn.alphaBlended,jn.disabled,Ht,We.id,qt.particleIndexBuffer,void 0,qt.particleSegment)}}})(M,R,N,de),H.bindFramebuffer.set(N.particleFramebuffer.framebuffer),(function(Ce,Ae,We,$e){const Ge=Ce.context,Fe=Ge.gl,Re=Ae.paint.get("raster-particle-max-speed"),et=$e*Ae.paint.get("raster-particle-speed-factor")*.15,nt=(function(dt){return Math.pow(dt,6)})(.01+1*Ae.paint.get("raster-particle-reset-rate-factor")),st=Ae.particleFramebuffer;Ge.viewport.set([0,0,st.width,st.height]);for(const dt of We){const[,ft,wt]=dt;Ge.activeTexture.set(Fe.TEXTURE0+0),ft.texture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),Ge.activeTexture.set(Fe.TEXTURE0+1);const It=wt.particleTexture0;It.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE);const pt=$_(1,It.size[0],0,ft.texture.size,Re,et,nt,ft.textureOffset,ft.scale,ft.offset);st.colorAttachment0.set(wt.particleTexture1.texture),Ge.clear({color:a.ao.transparent}),Ce.getOrCreateProgram("rasterParticleUpdate",{defines:ft.defines}).draw(Ce,Fe.TRIANGLES,An.disabled,qn.disabled,Gn.unblended,jn.disabled,pt,Ae.id,Ce.viewportBuffer,Ce.quadTriangleIndexBuffer,Ce.viewportSegments)}})(M,N,de,Me)})(y,l,d,v),y.renderPass==="translucent"&&((function(M,R,N,q){const H=M.context,re=H.gl,ee=R.getSource().tileSize,oe=5*(1-a.ah(a.cL,a.cL+1,M.transform.zoom))*ee+N.paint.get("raster-particle-elevation"),he=!M.options.moving,ce=M.transform.projection.name==="globe";if(!q.length)return;const[de,_e]=M.stencilConfigForOverlap(q),Me=[];ce&&Me.push("PROJECTION_GLOBE_VIEW");const Ce=M.stencilModeFor3D();for(const Ae of _e){const We=Ae.toUnwrapped(),$e=R.getTile(Ae);if(!$e.rasterParticleState)continue;const Ge=$e.rasterParticleState,Fe=100;$e.registerFadeDuration(Fe);const Re=R.findLoadedParent(Ae,0),et=Lg($e,Re,R,M.transform,Fe);let nt,st;M.terrain&&M.terrain.prepareDrawTile(),H.activeTexture.set(re.TEXTURE0),Ge.targetColorTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),H.activeTexture.set(re.TEXTURE1),Re&&Re.rasterParticleState?(Re.rasterParticleState.targetColorTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),nt=Math.pow(2,Re.tileID.overscaledZ-$e.tileID.overscaledZ),st=[$e.tileID.canonical.x*nt%1,$e.tileID.canonical.y*nt%1]):Ge.targetColorTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE);const dt=ce?Float32Array.from(M.transform.expandedFarZProjMatrix):M.transform.calculateProjMatrix(We,he),ft=M.transform,wt=G_(ft),It=a.dG(Ae.canonical),pt=a.dH(It.getCenter().lat);let tt,At,gt,Dt,qt;ce?(tt=Float32Array.from(a.bk(a.dJ(Ae.canonical))),At=Float32Array.from(ft.globeMatrix),gt=Float32Array.from(a.dF(ft)),Dt=[a.aF(ft.center.lng),a.aJ(ft.center.lat)],qt=Float32Array.from(a.dI(Ae.canonical,It,pt,ft.worldSize/ft._pixelsPerMercatorPixel))):(tt=new Float32Array(16),At=new Float32Array(9),gt=new Float32Array(16),Dt=[0,0],qt=new Float32Array(9));const tn=o1(dt,tt,At,gt,qt,st||[0,0],a.aj(M.transform.zoom),Dt,wt,nt||1,et,oe),Wt=M.isTileAffectedByFog(Ae),Ht=M.getOrCreateProgram("rasterParticle",{defines:Me,overrideFog:Wt});if(M.uploadCommonUniforms(H,Ht,We),ce){const xn=new An(re.LEQUAL,An.ReadOnly,M.depthRangeFor3D),yn=0,rn=M.globeSharedBuffers;if(rn){const[_n,Dn,Un]=rn.getGridBuffers(pt,yn!==0);Ht.draw(M,re.TRIANGLES,xn,Ce,Gn.alphaBlended,M.renderElevatedRasterBackface?jn.frontCCW:jn.backCCW,tn,N.id,_n,Dn,Un)}}else{const xn=M.depthModeForSublayer(0,An.ReadOnly),yn=de[Ae.overscaledZ],{tileBoundsBuffer:rn,tileBoundsIndexBuffer:_n,tileBoundsSegments:Dn}=M.getTileBoundsBuffers($e);Ht.draw(M,re.TRIANGLES,xn,yn,Gn.alphaBlended,jn.disabled,tn,N.id,rn,_n,Dn)}}M.resetStencilClippingMasks()})(y,l,d,v),y.style.map.triggerRepaint())},background:function(y,l,d,v){const T=d.paint.get("background-color"),O=d.paint.get("background-color-use-theme").constantOr("default")==="none",M=d.paint.get("background-opacity"),R=d.paint.get("background-emissive-strength"),N=d.paint.get("background-pitch-alignment")==="viewport";if(M===0)return;const q=y.context,H=q.gl,re=y.transform,ee=re.tileSize,oe=d.paint.get("background-pattern");let he;if(oe!==void 0&&(oe===null||(he=y.imageManager.getPattern(a.I.from(oe.toString()),d.scope,y.style.getLut(d.scope)),!he)))return;const ce=!oe&&T.a===1&&M===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==ce)return;const de=qn.disabled,_e=y.depthModeForSublayer(0,ce==="opaque"?An.ReadWrite:An.ReadOnly),Me=y.colorModeForDrapableLayerRenderPass(R),Ce=oe?"backgroundPattern":"background";let Ae,We=v;We||(Ae=y.getBackgroundTiles(),We=Object.values(Ae).map(Ge=>Ge.tileID)),oe&&(q.activeTexture.set(H.TEXTURE0),y.imageManager.bind(y.context,d.scope));const $e=[];if(y.terrain&&y.terrain.renderingToTexture&&y.emissiveMode==="mrt-fallback"&&$e.push("USE_MRT1"),N){const Ge=y.getOrCreateProgram(Ce,{overrideFog:!1,overrideRtt:!0,defines:$e}),Fe=new Float32Array(a.bA([])),Re=new a.aQ(0,0,0,0,0),et=oe?Es(Fe,R,M,y,0,d.scope,he,N,{tileID:Re,tileSize:ee}):Fc(Fe,R,M,T.toPremultipliedRenderColor(O?null:d.lut));return void Ge.draw(y,H.TRIANGLES,_e,de,Me,jn.disabled,et,d.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments)}for(const Ge of We){const Fe=y.isTileAffectedByFog(Ge),Re=y.getOrCreateProgram(Ce,{overrideFog:Fe,defines:$e}),et=Ge.toUnwrapped(),nt=v?Ge.projMatrix:y.transform.calculateProjMatrix(et);y.prepareDrawTile();const st=l?l.getTile(Ge):Ae?Ae[Ge.key]:new cf(Ge,ee,re.zoom,y),dt=oe?Es(nt,R,M,y,0,d.scope,he,N,{tileID:Ge,tileSize:ee}):Fc(nt,R,M,T.toPremultipliedRenderColor(O?null:d.lut));y.uploadCommonUniforms(q,Re,et);const{tileBoundsBuffer:ft,tileBoundsIndexBuffer:wt,tileBoundsSegments:It}=y.getTileBoundsBuffers(st);Re.draw(y,H.TRIANGLES,_e,de,Me,jn.disabled,dt,d.id,ft,wt,It)}},sky:function(y,l,d){const v=y._atmosphere?a.aj(y.transform.zoom):1,T=d.paint.get("sky-opacity")*v;if(T===0)return;const O=y.context,M=d.paint.get("sky-type"),R=new An(O.gl.LEQUAL,An.ReadOnly,[0,1]),N=y.frameCounter/1e3%1;M==="atmosphere"?y.renderPass==="offscreen"?d.needsSkyboxCapture(y)&&((function(q,H){const re=q.context,ee=re.gl;let oe=H.skyboxFbo;if(!oe){oe=H.skyboxFbo=re.createFramebuffer(32,32,1,null),H.skyboxGeometry=new Vs(re),H.skyboxTexture=re.gl.createTexture(),ee.bindTexture(ee.TEXTURE_CUBE_MAP,H.skyboxTexture),ee.texParameteri(ee.TEXTURE_CUBE_MAP,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_CUBE_MAP,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_CUBE_MAP,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_CUBE_MAP,ee.TEXTURE_MAG_FILTER,ee.LINEAR);for(let _e=0;_e<6;++_e)ee.texImage2D(ee.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,ee.RGBA,32,32,0,ee.RGBA,ee.UNSIGNED_BYTE,null)}re.bindFramebuffer.set(oe.framebuffer),re.viewport.set([0,0,32,32]);const he=H.getCenter(q,!0),ce=q.getOrCreateProgram("skyboxCapture"),de=new Float64Array(16);a.bA(de),a.en(de,de,.5*-Math.PI),Df(q,H,ce,de,he,0),a.bA(de),a.en(de,de,.5*Math.PI),Df(q,H,ce,de,he,1),a.bA(de),a.cU(de,de,.5*-Math.PI),Df(q,H,ce,de,he,2),a.bA(de),a.cU(de,de,.5*Math.PI),Df(q,H,ce,de,he,3),a.bA(de),Df(q,H,ce,de,he,4),a.bA(de),a.en(de,de,Math.PI),Df(q,H,ce,de,he,5),re.viewport.set([0,0,q.width,q.height])})(y,d),d.markSkyboxValid(y)):y.renderPass==="sky"&&(function(q,H,re,ee,oe){const he=q.context,ce=he.gl,de=q.transform,_e=q.getOrCreateProgram("skybox");he.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_CUBE_MAP,H.skyboxTexture);const Me=((Ce,Ae,We,$e,Ge)=>({u_matrix:Ce,u_sun_direction:Ae,u_cubemap:0,u_opacity:$e,u_temporal_offset:Ge}))(de.skyboxMatrix,H.getCenter(q,!1),0,ee,oe);q.uploadCommonUniforms(he,_e),_e.draw(q,ce.TRIANGLES,re,qn.disabled,q.colorModeForRenderPass(),jn.backCW,Me,"skybox",H.skyboxGeometry.vertexBuffer,H.skyboxGeometry.indexBuffer,H.skyboxGeometry.segment)})(y,d,R,T,N):M==="gradient"&&y.renderPass==="sky"&&(function(q,H,re,ee,oe){const he=q.context,ce=he.gl,de=q.transform,_e=q.getOrCreateProgram("skyboxGradient");H.skyboxGeometry||(H.skyboxGeometry=new Vs(he)),he.activeTexture.set(ce.TEXTURE0);let Me=H.colorRampTexture;Me||(Me=H.colorRampTexture=new a.T(he,H.colorRamp,ce.RGBA8)),Me.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);const Ce=((Ae,We,$e,Ge,Fe)=>({u_matrix:Ae,u_color_ramp:0,u_center_direction:We,u_radius:a.an($e),u_opacity:Ge,u_temporal_offset:Fe}))(de.skyboxMatrix,H.getCenter(q,!1),H.paint.get("sky-gradient-radius"),ee,oe);q.uploadCommonUniforms(he,_e),_e.draw(q,ce.TRIANGLES,re,qn.disabled,q.colorModeForRenderPass(),jn.backCW,Ce,"skyboxGradient",H.skyboxGeometry.vertexBuffer,H.skyboxGeometry.indexBuffer,H.skyboxGeometry.segment)})(y,d,R,T,N)},custom:function(y,l,d,v){const T=y.context,O=d.implementation;if(!y.transform.projection.unsupportedLayers||!y.transform.projection.unsupportedLayers.includes("custom")||y.terrain&&(y.terrain.renderingToTexture||y.renderPass==="offscreen")&&d.isDraped(l)){if(y.renderPass==="offscreen"){const M=O.prerender;if(M){if(y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),y.transform.projection.name==="globe"){const R=y.transform.pointMerc;M.call(O,T.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),a.aj(y.transform.zoom),[R.x,R.y],y.transform.pixelsPerMeterRatio)}else M.call(O,T.gl,y.transform.customLayerMatrix());T.setDirty(),y.setBaseState()}}else if(y.renderPass==="translucent"){if(y.terrain&&y.terrain.renderingToTexture){const R=O.renderToTile;if(R){const N=v[0].canonical,q={x:N.x+v[0].wrap*(O.wrapTileId?0:1<<N.z),y:N.y,z:N.z};T.setDepthMode(An.disabled),T.setStencilMode(qn.disabled),T.setColorMode(y.colorModeForRenderPass()),y.setCustomLayerDefaults(),R.call(O,T.gl,q),T.setDirty(),y.setBaseState()}return}y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),T.setStencilMode(qn.disabled);const M=O.renderingMode==="3d"?new An(y.context.gl.LEQUAL,An.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,An.ReadOnly);if(T.setDepthMode(M),y.transform.projection.name==="globe"){const R=y.transform.pointMerc;O.render(T.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),a.aj(y.transform.zoom),[R.x,R.y],y.transform.pixelsPerMeterRatio)}else O.render(T.gl,y.transform.customLayerMatrix());T.setDirty(),y.setBaseState(),T.bindFramebuffer.set(null)}}else a.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(y,l,d,v){if(y.renderPass==="opaque")return;const T=d.paint.get("model-opacity").constantOr(1),O=d.paint.get("model-elevation-reference"),M=O==="ground",R=O==="ground";if(T===0)return;const N=d.paint.get("model-cast-shadows");if(y.renderPass==="shadow"&&(!N||y.terrain&&T<.65&&d._transitionablePaint._values["model-opacity"].value.expression instanceof a.ad))return;const q=y.shadowRenderer,H=d.paint.get("model-receive-shadows");q&&(q.useNormalOffset=!0,H||(q.enabled=!1));const re=()=>{q&&(q.useNormalOffset=!0,H||(q.enabled=!0))},ee=l.getSource();if(y.renderPass==="light-beam"&&ee.type!=="batched-model")return;if(ee.type==="vector"||ee.type==="geojson")return(function(Ae,We,$e,Ge,Fe){const Re=Ae.transform,et=Re.projection.name==="globe",nt=Re.getFreeCameraOptions().position;if(!Ae.modelManager)return;const st=Ae.modelManager;$e.modelManager=st;const dt=Ae.shadowRenderer;if(!$e._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const ft=$e._unevaluatedLayout._values["model-id"],wt=Object.assign({},$e.layout.get("model-id").parameters),It=Ae.style.order.indexOf($e.fqid),pt=$e.paint.get("model-opacity").constantOr(1);for(const tt of Ge){const At=We.getTile(tt).getBucket($e);if(!At||At.projection.name!==Re.projection.name)continue;const gt=At.getModelUris();if(gt&&!At.modelsRequested&&(st.addModelsFromBucket(gt,Fe),At.modelsRequested=!0),et)wt.zoom=tt.overscaledZ;else{const rn=Xt(tt,Re);wt.zoom=rn}const Dt=ft.possiblyEvaluate(wt);if(Eh(Ae,At,tt),Cs.shadowUniformsInitialized=!1,Cs.useSingleShadowCascade=!!dt&&dt.getMaxCascadeForTile(tt.toUnwrapped())===0,Ae.renderPass==="shadow"&&dt){if(Ae.currentShadowCascade===1&&At.isInsideFirstShadowMapFrustum)continue;const rn=Re.calculatePosMatrix(tt.toUnwrapped(),Re.worldSize);if(Cs.tileMatrix.set(rn),Cs.shadowTileMatrix=Float32Array.from(dt.calculateShadowPassMatrixFromMatrix(rn)),Cs.aabb.min=[0,0,0],Cs.aabb.max[0]=Cs.aabb.max[1]=a.al,Cs.aabb.max[2]=0,Ui(At,Cs,Ae,$e.scope))continue}const qt=1<<tt.canonical.z,tn=[((nt.x-tt.wrap)*qt-tt.canonical.x)*a.al,(nt.y*qt-tt.canonical.y)*a.al,nt.z*qt*a.al];Ae.conflationActive&&Object.keys(At.instancesPerModel).length>0&&Ae.style.isLayerClipped($e,We.getSource())&&At.updateReplacement(tt,Ae.replacementSource,It,$e.scope)&&(At.uploaded=!1,At.upload(Ae.context));let Wt=0;const Ht=new Array,xn=new Array,yn=new Array;for(let rn in At.instancesPerModel){const _n=At.instancesPerModel[rn];_n.features.length>0&&!et&&(rn=Dt.evaluate(_n.features[0].feature,{}));const Dn=st.getModel(rn,Fe);if(Dn||st.hasURLBeenRequested(rn)||At.modelUris.includes(rn)||(At.modelUris.push(rn),At.modelsRequested=!1),Dn&&Dn.uploaded)if(et){const Un=a.c5([],[nt.x,nt.y,nt.z],Ae.transform.worldSize);a.ew(Un,Un);for(let Qn=0;Qn<_n.instancedDataArray.length;++Qn){const yr=[0,0,0],$n=[1,1,1],Jn=a.ex(),Yn=_n.tileCoordinatesForInstance(Qn),Ur=_n.transformForInstance(Qn);a.ey($n,Ur),a.ez(Jn,Ur),a.eA(yr,Jn);const Mr=_n.translationForInstance(Qn),ei=new a.aT(0,0);a.eB(At.canonical,ei,Yn.x,Yn.y);const wr=a.bC();a.eC(wr,Dn,Ae.transform,ei,yr,$n,Mr,!0,!1,!1);const er=_n.colorForInstance(Qn),Rr=a.bA([]),Pi=a.ef(ei.lat,Ae.transform.zoom),ti=a.bq([],[1,1,1/Pi]);a.br(Rr,Rr,Un),yn.push({zScaleMatrix:ti,negCameraPosMatrix:Rr});for(const Hr of Dn.nodes)Bd(Ae,Hr,wr,Ae.transform.expandedFarZProjMatrix,Wt,Ht,xn,Dn.materialOverrides,pt,er);++Wt}}else for(const Un of Dn.nodes)on(Ae,$e,Un,_n,tn,tt,Cs)}if(et)if(Ae.renderPass==="shadow"){for(const rn of xn)lm(rn.mesh,rn.nodeModelMatrix,Ae,$e);for(const rn of Ht)lm(rn.mesh,rn.nodeModelMatrix,Ae,$e)}else Q_(Ae,$e,Ht,xn,yn)}})(y,l,d,v,sm(y,d)),void re();if(!ee.loaded())return;if(ee.type==="batched-model")return(function(Ae,We,$e,Ge){$e.resetLayerRenderingStats(Ae);const Fe=Ae.context,Re=Ae.transform,et=Ae.style.fog,nt=Ae.shadowRenderer;if(Re.projection.name!=="mercator")return void a.w(`Drawing 3D landmark models for ${Re.projection.name} projection is not yet implemented`);const st=Ae.transform.getFreeCameraOptions().position,dt=a.c5([],[st.x,st.y,st.z],Ae.transform.worldSize),ft=a.ew([],dt),wt=a.bA([]),It=a.ef(Re.center.lat,Re.zoom),pt=a.bq([],[1,1,1/It]);a.br(wt,wt,ft);const tt=$e.paint.get("model-opacity").constantOr(1),At=new An(Fe.gl.LEQUAL,An.ReadWrite,Ae.depthRangeFor3D),gt=new An(Fe.gl.LEQUAL,An.ReadOnly,Ae.depthRangeFor3D),Dt=new a.d9([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),qt=Ae.renderPass==="shadow",tn=qt&&nt?nt.getCurrentCascadeFrustum():Re.getFrustum(Re.scaleZoom(Re.worldSize)),Wt=$e.paint.get("model-front-cutoff"),Ht=Wt[2]<1,xn=$l(Ae,$e.paint.get("model-cutoff-fade-range")),yn=$e.getLayerRenderingStats();(function(rn,_n,Dn,Un){const Qn=rn.terrain?rn.terrain.exaggeration():0,yr=rn.transform.zoom;for(const $n of Un){const Jn=_n.getTile($n).getBucket(Dn);Jn&&(Jn.setFilter(Dn.filter),rn.conflationActive&&Jn.updateReplacement($n,rn.replacementSource),Jn.evaluateTransform(rn,Dn),rn.terrain&&Qn>0&&Jn.elevationUpdate(rn.terrain,Qn,$n,Dn.source),Jn.needsReEvaluation(rn,yr,Dn)&&Jn.evaluate(Dn))}})(Ae,We,$e,Ge),(function(){let rn,_n,Dn;Ht?(rn=Ge.length-1,_n=-1,Dn=-1):(rn=0,_n=Ge.length,Dn=1);const Un=new Float64Array(16),Qn=a.cA(),yr=new a.P(0,0);for(let $n=rn;$n!==_n;$n+=Dn){const Jn=Ge[$n],Yn=We.getTile(Jn).getBucket($e);if(!Yn||!Yn.uploaded)continue;let Ur=!1;nt&&(Ur=nt.getMaxCascadeForTile(Jn.toUnwrapped())===0);const Mr=Re.calculatePosMatrix(Jn.toUnwrapped(),Re.worldSize),ei=Yn.modelTraits;!qt&&Ht&&(a.bl(Un,Mr),a.af(Qn,dt,Un),yr.x=Qn[0],yr.y=Qn[1]);const wr=[];Yn.setFilter($e.filter);for(const er of Yn.getNodesInfo()){if(er.hiddenByReplacement||!er.node.meshes)continue;const Rr=er.node;let Pi=0;Ae.terrain&&Rr.elevation&&(Pi=Rr.elevation*Ae.terrain.exaggeration());const ti=(()=>{const Gr=er.aabb;return Dt.min=[...Gr.min],Dt.max=[...Gr.max],Dt.min[2]+=Pi,Dt.max[2]+=Pi,a.af(Dt.min,Dt.min,Mr),a.af(Dt.max,Dt.max,Mr),Dt})(),Hr=er.evaluatedScale;if(Hr[0]<=1&&Hr[1]<=1&&Hr[2]<=1&&ti.intersects(tn)===0)continue;if(!qt&&Ht){const Gr=.16666666666666666;er.cameraCollisionOpacity=dt[0]>ti.min[0]&&dt[0]<ti.max[0]&&dt[1]>ti.min[1]&&dt[1]<ti.max[1]&&dt[2]*It<ti.max[2]&&Rr.footprint&&a.c0(yr,Rr.footprint)?Math.max(er.cameraCollisionOpacity-Gr,0):Math.min(1,er.cameraCollisionOpacity+Gr)}const Kn=[...Mr],tr=1/a.d7(Jn.canonical),yi=Rr.anchor?Rr.anchor[0]:0,Ji=Rr.anchor?Rr.anchor[1]:0;a.br(Kn,Kn,[yi*(Hr[0]-1)+er.evaluatedTranslation[0]*tr,Ji*(Hr[1]-1)+er.evaluatedTranslation[1]*tr,Pi+er.evaluatedTranslation[2]]),a.cq(Hr,a.eE)||a.cS(Kn,Kn,Hr);const ai=a.aB([],Kn,Rr.globalMatrix),_i=a.aB([],Re.expandedFarZProjMatrix,ai),cs=a.aB([],Re.expandedFarZProjMatrix,Kn),Uo=a.aC([],[yi,Ji,Pi,1],_i)[2];Rr.hidden=!1;let co=tt;qt||(Ht&&(co*=er.cameraCollisionOpacity,co*=U0(Kn,Re,er.aabb,Wt)),co*=ht(xn,Uo)),co!==0?wr.push({nodeInfo:er,depth:Uo,opacity:co,wvpForNode:_i,wvpForTile:cs,nodeModelMatrix:ai,tileModelMatrix:Kn}):Rr.hidden=!0}qt||wr.sort((er,Rr)=>!Ht||er.opacity===1&&Rr.opacity===1?er.depth<Rr.depth?-1:1:er.opacity===1?-1:Rr.opacity===1?1:er.depth>Rr.depth?-1:1);for(const er of wr){const Rr=er.nodeInfo,Pi=Rr.node;let ti=a.aB([],pt,er.tileModelMatrix);a.aB(ti,wt,ti);const Hr=a.bl([],ti);a.eg(Hr,Hr),a.cS(Hr,Hr,jd),ti=a.aB(ti,ti,Pi.globalMatrix);const Kn=Ae.renderPass==="light-beam",tr=$e.paint.get("model-color-use-theme").constantOr("default")==="none",yi=ei&a.eI.HasMapboxMeshFeatures,Ji=yi?0:Rr.evaluatedRMEA[0][2];for(let ai=0;ai<Pi.meshes.length;++ai){const _i=Pi.meshes[ai],cs=ai===Pi.lightMeshIndex;let Uo=er.wvpForNode;if(cs){if(!Kn&&!Ae.terrain&&Ae.shadowRenderer){Ae.currentLayer<Ae.firstLightBeamLayer&&(Ae.firstLightBeamLayer=Ae.currentLayer);continue}Uo=er.wvpForTile}else if(Kn)continue;const co={defines:[]},Gr=[];if(!qt&&nt&&(nt.useNormalOffset=!!_i.normalBuffer),Ol(co.defines,Gr,_i,Ae,tr?null:$e.lut),yi||co.defines.push("DIFFUSE_SHADED"),Ur&&co.defines.push("SHADOWS_SINGLE_CASCADE"),yn&&(qt?yn.numRenderedVerticesInShadowPass+=_i.vertexArray.length:yn.numRenderedVerticesInTransparentPass+=_i.vertexArray.length),qt){lm(_i,er.nodeModelMatrix,Ae,$e);continue}let ul=null;if(et){const xa=K_(er.nodeModelMatrix,Ae.transform);if(ul=new Float32Array(xa),Re.projection.name!=="globe"){const Si=_i.aabb.min,Ia=_i.aabb.max,[no,Wi]=et.getOpacityForBounds(xa,Si[0],Si[1],Ia[0],Ia[1]);co.overrideFog=no>=hn||Wi>=hn}}const $o=_i.material;let Zo;$o.occlusionTexture&&$o.occlusionTexture.offsetScale&&(Zo=$o.occlusionTexture.offsetScale,co.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Il=Ae.getOrCreateProgram("model",co);!qt&&nt&&nt.setupShadowsFromMatrix(er.tileModelMatrix,Il,nt.useNormalOffset),Ae.uploadCommonUniforms(Fe,Il,null,ul);const qs=$o.pbrMetallicRoughness;qs.metallicFactor=.9,qs.roughnessFactor=.5;const $i=Wu(new Float32Array(Uo),new Float32Array(ti),new Float32Array(Hr),new Float32Array(Pi.globalMatrix),Ae,er.opacity,qs.baseColorFactor,$o.emissiveFactor,qs.metallicFactor,qs.roughnessFactor,$o,Ji,$e,[0,0,0],Zo);!cs&&(Rr.hasTranslucentParts||er.opacity<1)&&Il.draw(Ae,Fe.gl.TRIANGLES,At,qn.disabled,Gn.disabled,jn.backCCW,$i,$e.id,_i.vertexBuffer,_i.indexBuffer,_i.segments,$e.paint,Ae.transform.zoom,void 0,Gr),Il.draw(Ae,Fe.gl.TRIANGLES,cs?gt:At,qn.disabled,cs||er.opacity<1||Rr.hasTranslucentParts?Gn.alphaBlended:Gn.unblended,jn.backCCW,$i,$e.id,_i.vertexBuffer,_i.indexBuffer,_i.segments,$e.paint,Ae.transform.zoom,void 0,Gr)}}}})()})(y,l,d,v),void re();if(ee.type!=="model")return;const oe=ee.getModels(),he=[],ce=y.transform.getFreeCameraOptions().position,de=a.c5([],[ce.x,ce.y,ce.z],y.transform.worldSize);a.ew(de,de);const _e=[],Me=[];let Ce=0;for(const Ae of oe){const We=l.getFeatureState("",Ae.id),$e={type:"Unknown",id:Ae.id,properties:Ae.featureProperties},Ge=d.paint.get("model-rotation").evaluate($e,We),Fe=d.paint.get("model-scale").evaluate($e,We),Re=d.paint.get("model-translation").evaluate($e,We),et=d.paint.get("model-opacity").evaluate($e,We);B0(d,Ae.id,We,Ae.featureProperties,Ae.nodeOverrideNames,Ae.nodeOverrides),j0(d,Ae.id,We,Ae.featureProperties,Ae.materialOverrideNames,Ae.materialOverrides),Ae.nodeOverrides.size>0&&Ae.computeBoundsAndApplyParent(),Ae.computeModelMatrix(y,Ge,Fe,Re,R,M,!1);const nt=a.bA([]),st=a.ef(Ae.position.lat,y.transform.zoom),dt=a.bq([],[1,1,1/st]);a.br(nt,nt,de),he.push({zScaleMatrix:dt,negCameraPosMatrix:nt});for(const ft of Ae.nodes)Bd(y,ft,Ae.matrix,y.transform.expandedFarZProjMatrix,Ce,_e,Me,Ae.materialOverrides,et);Ce++}if(_e.sort((Ae,We)=>We.depth-Ae.depth),y.renderPass!=="shadow")Q_(y,d,_e,Me,he),re();else{for(const Ae of Me)lm(Ae.mesh,Ae.nodeModelMatrix,y,d);for(const Ae of _e)lm(Ae.mesh,Ae.nodeModelMatrix,y,d);re()}}},tv={line:function(y,l,d){if(y.hasElevatedBuckets=!1,y.hasNonElevatedBuckets=!1,y._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||y._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(l){const v=l.getVisibleCoordinates();for(const T of v){const O=l.getTile(T).getBucket(y);if(O&&(O.elevationType!=="none"?y.hasElevatedBuckets=!0:y.hasNonElevatedBuckets=!0,y.hasElevatedBuckets&&y.hasNonElevatedBuckets))break}}}else y.hasNonElevatedBuckets=!0},model:function(y,l,d){const v=l.getSource();if(!v.loaded())return;if(v.type==="vector"||v.type==="geojson")return void(d.modelManager&&d.modelManager.upload(d,sm(d,y)));if(v.type==="batched-model"||v.type!=="model")return;const T=v.getModels();for(const O of T)O.upload(d.context)},raster:function(y,l,d){const v=l.getSource();if(!(v instanceof xs&&v.loaded()))return;const T=y.sourceLayer||v.rasterLayerIds&&v.rasterLayerIds[0];if(!T)return;const O=y.paint.get("raster-array-band")||v.getInitialBand(T);if(O==null)return;const M=l.getIds().map(R=>l.getTileByID(R));for(const R of M)R.updateNeeded(y.id,O)&&v.prepareTile(R,T,y.id,O)},"raster-particle":function(y,l,d){const v=l.getSource();if(!(v instanceof xs&&v.loaded()))return;const T=y.sourceLayer||v.rasterLayerIds&&v.rasterLayerIds[0];if(!T)return;const O=y.paint.get("raster-particle-array-band")||v.getInitialBand(T);if(O==null)return;const M=l.getIds().map(R=>l.getTileByID(R));for(const R of M)R.updateNeeded(y.id,O)&&v.prepareTile(R,T,y.id,O)}},ty={fill:I0},q0={fill:function(y,l,d,v){if(!d.layout||d.layout.get("fill-elevation-reference")==="none"||d.paint.get("fill-opacity").constantOr(1)===0)return;const T=y.context.gl,O=new An(T.LEQUAL,An.ReadOnly,y.depthRangeFor3D),M=new qn({func:T.ALWAYS,mask:255},255,255,T.KEEP,T.KEEP,T.REPLACE),R=y.transform.getFreeCameraOptions().position,N=y.getOrCreateProgram("elevatedStructuresDepthReconstruct");for(const q of v){const H=l.getTile(q),re=H.getBucket(d);if(!re)continue;const ee=re.elevatedStructures;if(!ee||ee.depthSegments.segments[0].primitiveLength===0)continue;const oe=xh(q.toUnwrapped(),R),he=y.translatePosMatrix(q.projMatrix,H,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor")),ce=_h(he,oe,0,1,0);N.draw(y,T.TRIANGLES,O,M,Gn.disabled,jn.disabled,ce,d.id,ee.vertexBuffer,ee.indexBuffer,ee.depthSegments,d.paint,y.transform.zoom)}}};class nv{constructor(l,d,v,T,O){this.context=new du(l,d),this.transform=v,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this._timeStamp=a.o.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const M=["fill","line","symbol","circle","heatmap","fill-extrusion","building","raster","raster-particle","hillshade","model","background","sky"];for(const N of M)this._debugParams.enabledLayers[N]=!0;for(const N of M);this.occlusionParams=new ev,this.setup(),this.numSublayers=eo.maxUnderzooming+eo.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new a.eP,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Eg(this),this._wireframeDebugCache=new Zg,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const R=new a.q({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new a.T(this.context,R,l.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=T,this.worldview=O,this._forceEmissiveMode=!1,this.emissiveMode="constant"}updateTerrain(l,d){const v=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(v||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new tm(this,l));const T=this._terrain;this.transform.elevation=v?T:null,T.update(l,this.transform,d),this.transform.elevation&&!T.enabled&&(this.transform.elevation=null)}_updateFog(l){const d=l.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[v,T]=d.getFovAdjustedRange(this.transform._fov);if(v>T)return void(this.transform.fogCullDistSq=null);const O=v+.78*(T-v);this.transform.fogCullDistSq=O*O}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(l){l&&!this._terrain&&(this._terrain=new tm(this,this.style)),this._forceTerrainMode=l}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(l,d){if(this.width=l*a.o.devicePixelRatio,this.height=d*a.o.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style.order)this.style._mergedLayers[v].resize()}setup(){const l=this.context,d=new a.bd;d.emplaceBack(0,0),d.emplaceBack(a.al,0),d.emplaceBack(0,a.al),d.emplaceBack(a.al,a.al),this.tileExtentBuffer=l.createVertexBuffer(d,a.bf.members),this.tileExtentSegments=a.bg.simpleSegment(0,0,4,2);const v=new a.bd;v.emplaceBack(0,0),v.emplaceBack(a.al,0),v.emplaceBack(0,a.al),v.emplaceBack(a.al,a.al),this.debugBuffer=l.createVertexBuffer(v,a.bf.members),this.debugSegments=a.bg.simpleSegment(0,0,4,5);const T=new a.bd;T.emplaceBack(-1,-1),T.emplaceBack(1,-1),T.emplaceBack(-1,1),T.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(T,a.bf.members),this.viewportSegments=a.bg.simpleSegment(0,0,4,2);const O=new a.b1;O.emplaceBack(0,0,0,0),O.emplaceBack(a.al,0,a.al,0),O.emplaceBack(0,a.al,0,a.al),O.emplaceBack(a.al,a.al,a.al,a.al),this.mercatorBoundsBuffer=l.createVertexBuffer(O,a.bi.members),this.mercatorBoundsSegments=a.bg.simpleSegment(0,0,4,2);const M=new a.b0;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(M);const R=new a.be;for(const q of[0,1,3,2,0])R.emplaceBack(q);this.debugIndexBuffer=l.createIndexBuffer(R),this.emptyTexture=new a.T(l,new a.q({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA8),this.identityMat=a.bC();const N=this.context.gl;this.stencilClearMode=new qn({func:N.ALWAYS,mask:0},0,255,N.ZERO,N.ZERO,N.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,l.TRIANGLES,An.disabled,this.stencilClearMode,Gn.disabled,jn.disabled,em(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,d,v){if(!d||this.currentStencilSource===d.id||!l.isTileClipped()||!v||v.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let R=!1;for(const N of v)if(this._tileClippingMaskIDs[N.key]===void 0){R=!0;break}if(!R)return}this.currentStencilSource=d.id;const T=this.context,O=T.gl;this.nextStencilID+v.length>256&&this.clearStencil(),T.setColorMode(Gn.disabled),T.setDepthMode(An.disabled);const M=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const R of v){const N=d.getTile(R),q=this._tileClippingMaskIDs[R.key]=this.nextStencilID++,{tileBoundsBuffer:H,tileBoundsIndexBuffer:re,tileBoundsSegments:ee}=this.getTileBoundsBuffers(N);M.draw(this,O.TRIANGLES,An.disabled,new qn({func:O.ALWAYS,mask:0},q,255,O.KEEP,O.KEEP,O.REPLACE),Gn.disabled,jn.disabled,em(R.projMatrix),"$clipping",H,re,ee)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,d=this.context.gl;return new qn({func:d.NOTEQUAL,mask:255},l,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const d=this.context.gl;return new qn({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(l){const d=this.context.gl,v=l.sort((M,R)=>R.overscaledZ-M.overscaledZ),T=v[v.length-1].overscaledZ,O=v[0].overscaledZ-T+1;if(O>1){this.currentStencilSource=void 0,this.nextStencilID+O>256&&this.clearStencil();const M={};for(let R=0;R<O;R++)M[R+T]=new qn({func:d.GEQUAL,mask:255},R+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=O,[M,v]}return[{[T]:qn.disabled},v]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Gn([l.CONSTANT_COLOR,l.ONE,l.CONSTANT_COLOR,l.ONE],new a.ao(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Gn.unblended:Gn.alphaBlended}colorModeForDrapableLayerRenderPass(l){const d=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?l!=null&&this.emissiveMode!=="mrt-fallback"||this.emissiveMode==="constant"?new Gn([d.ONE,d.ONE_MINUS_SRC_ALPHA,d.CONSTANT_ALPHA,d.ONE_MINUS_SRC_ALPHA],new a.ao(0,0,0,l??0),[!0,!0,!0,!0]):this.emissiveMode==="dual-source-blending"?new Gn([d.ONE,d.ONE_MINUS_SRC_ALPHA,this.context.extBlendFuncExtended.SRC1_ALPHA_WEBGL,d.ONE_MINUS_SRC_ALPHA],a.ao.transparent,[!0,!0,!0,!0]):this.colorModeForRenderPass():this.colorModeForRenderPass()}depthModeForSublayer(l,d,v,T=!1){if(this.depthOcclusion)return new An(this.context.gl.GREATER,An.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!T)return An.disabled;const O=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new An(v||this.context.gl.LEQUAL,d,[O,O])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const l=this.context.gl,d=Math.ceil(this.width),v=Math.ceil(this.height),T=this.context.bindFramebuffer.get(),O=l.getParameter(l.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===d&&this.depthFBO.height===v||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),d!==0&&v!==0&&(this.depthFBO=new Nc(this.context,d,v,0,"texture"),this.depthTexture=new a.T(this.context,{width:d,height:v,data:null},l.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(T),l.bindTexture(l.TEXTURE_2D,O),this.depthFBO&&(l.bindFramebuffer(l.READ_FRAMEBUFFER,null),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),l.blitFramebuffer(0,0,d,v,0,0,d,v,l.DEPTH_BUFFER_BIT,l.NEAREST),l.bindFramebuffer(l.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((l,d)=>l+d/this._fpsHistory.length,0))}render(l,d){const v=a.o.now();this._dt=v-this._timeStamp,this._timeStamp=v,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=l.map.repaint,this.style=l,this.options=d;const T=this.style._mergedLayers,O=!(!this.terrain||!this.terrain.enabled),M=()=>this.style._getOrder(O).filter(pt=>{const tt=T[pt];return!(tt.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[tt.type]});let R=M(),N=!1,q=!1,H=null,re=0,ee=!1;for(const pt of R){const tt=T[pt];tt.visibility!=="none"&&(tt.type==="circle"?N=!0:tt.type==="building"?(H=tt,++re):tt.type==="symbol"&&(tt.hasOcclusionOpacityProperties?q=!0:N=!0))}this.updateEmissiveMode();let oe=R.map(pt=>T[pt]);const he=this.style._mergedSourceCaches;this.imageManager=l.imageManager,this.modelManager=l.modelManager,this.symbolFadeChange=l.placement.symbolFadeChange(a.o.now()),this.imageManager.beginFrame();for(const pt in he){const tt=he[pt];tt.used&&(tt.prepare(this.context),tt.getSource().usedInConflation&&++re)}let ce=!1;for(const pt of oe)pt.isHidden(this.transform.zoom)||(pt.type==="clip"&&(ce=!0),this.prepareLayer(pt));const de={},_e={},Me={},Ce={},Ae={};for(const pt in he){const tt=he[pt];de[pt]=tt.getVisibleCoordinates(),_e[pt]=de[pt].slice().reverse(),Me[pt]=tt.getVisibleCoordinates(!0).reverse(),Ce[pt]=tt.getShadowCasterCoordinates(),Ae[pt]=tt.sortCoordinatesByDistance(de[pt])}const We=pt=>{const tt=this.style.getLayerSourceCache(pt);return tt&&tt.used?tt.getSource():null};if(re||ce||this._clippingActiveLastFrame){const pt=[],tt=[];let At=0;for(const gt of oe)this.isSourceForClippingOrConflation(gt,We(gt))&&(pt.push(gt),tt.push(At)),At++;if(pt&&(ce||pt.length>1)||this._clippingActiveLastFrame){ce=!1;const gt=[];for(let Dt=0;Dt<pt.length;Dt++){const qt=pt[Dt],tn=tt[Dt],Wt=this.style.getLayerSourceCache(qt);if(!Wt||!Wt.used||!Wt.getSource().usedInConflation&&qt.type!=="clip"&&qt.type!=="building")continue;let Ht=a.eQ,xn=a.b_.None;const yn=[];let rn=!0;if(qt.type==="building")Ht=a.eS;else if(qt.type==="clip")if(Ht=tn,qt.isHidden(this.transform.zoom))rn=!1;else{if(!qt.layout){rn=!1;continue}for(const _n of qt.layout.get("clip-layer-types"))xn|=_n==="model"?a.b_.Model:_n==="symbol"?a.b_.Symbol:a.b_.FillExtrusion;for(const _n of qt.layout.get("clip-layer-scope"))yn.push(_n);ce=!0}rn&&gt.push({layer:qt.fqid,cache:Wt,order:Ht,clipMask:xn,clipScope:yn})}this.replacementSource.setSources(gt),ee=!0}}this._clippingActiveLastFrame=ce,ee||this.replacementSource.clear(),this.conflationActive=ee,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let pt=0;pt<oe.length;pt++){const tt=oe[pt];if(tt.visibility==="none")continue;const At=tt.cutoffRange();if(this.longestCutoffRange=Math.max(At,this.longestCutoffRange),At>0){const gt=We(tt);gt&&(this.minCutoffZoom=Math.max(gt.minzoom,this.minCutoffZoom)),tt.minzoom&&(this.minCutoffZoom=Math.max(tt.minzoom,this.minCutoffZoom))}tt.is3D(O)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=pt),this._lastOcclusionLayer=pt)}const $e=this.style&&this.style.fog;$e?(this._fogVisible=$e.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=$e.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(Me),this.opaquePassCutoff=0,R=M(),oe=R.map(pt=>T[pt]));const Ge=this._shadowRenderer;if(Ge){Ge.updateShadowParameters(this.transform,this.style.directionalLight);for(const pt in he)for(const tt of de[pt]){let At={min:0,max:0};this.terrain&&(At=this.terrain.getMinMaxForTile(tt)||At),Ge.addShadowReceiver(tt.toUnwrapped(),At.min,At.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new a.eR(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Z_(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const Fe=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),Re=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(Fe&&!this._snow&&(this._snow=new cm(this)),!Fe&&this._snow&&(this._snow.destroy(),delete this._snow),Re&&!this._rain&&(this._rain=new Jg(this)),!Re&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),H){this.buildingTileBorderManager||(this.buildingTileBorderManager=new Th);const pt=this.style.getLayerSourceCache(H);this.buildingTileBorderManager.updateBorders(pt,H)}if(!En.has(this.context.gl))return;this.renderPass="offscreen";for(const pt of oe){const tt=l.getLayerSourceCache(pt);if(!pt.hasOffscreenPass()||pt.isHidden(this.transform.zoom))continue;const At=tt?_e[tt.id]:void 0;(pt.type==="custom"||pt.type==="raster"||pt.type==="raster-particle"||pt.isSky()||At&&At.length)&&this.renderLayer(this,tt,pt,At)}this.depthRangeFor3D=[0,1-(oe.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Ce)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const et=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),nt=(()=>{if(d.showOverdrawInspector)return a.ao.black;const pt=this.style.fog;if(pt&&this.transform.projection.supportsFog){const tt=this.style.getLut(pt.scope);if(!et){const At=pt.properties.get("color-use-theme")==="none",gt=pt.properties.get("color").toNonPremultipliedRenderColor(At?null:tt).toArray01();return new a.ao(...gt)}if(et){const At=pt.properties.get("space-color-use-theme")==="none",gt=pt.properties.get("space-color").toNonPremultipliedRenderColor(At?null:tt).toArray01();return new a.ao(...gt)}}return a.ao.transparent})();if(this.context.clear({color:nt,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&et&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=R.length-1;this.currentLayer>=0;this.currentLayer--){const pt=oe[this.currentLayer],tt=l.getLayerSourceCache(pt);if(pt.isSky())continue;const At=tt?(pt.is3D(O)?Ae:_e)[tt.id]:void 0;this._renderTileClippingMasks(pt,tt,At),this.renderLayer(this,tt,pt,At)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&et&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||a.aj(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<R.length;this.currentLayer++){const pt=oe[this.currentLayer],tt=l.getLayerSourceCache(pt);pt.isSky()&&this.renderLayer(this,tt,pt,tt?_e[tt.id]:void 0)}function st(pt,tt){let At;return tt&&(At=(pt.type==="symbol"?Me:pt.is3D(O)?Ae:_e)[tt.id]),At}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<R.length;){const pt=oe[this.currentLayer];if(pt.type==="raster"||pt.type==="raster-particle"){const tt=l.getLayerSourceCache(pt);this.renderLayer(this,tt,pt,st(pt,tt))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;const dt=Ge?Ge.getGroundShadowLayerIndex():-1;let ft=!1,wt=-1;for(let pt=0;pt<R.length;++pt){const tt=oe[pt];tt.isHidden(this.transform.zoom)||tt.is3D(O)&&(wt=pt)}q&&wt===-1&&(N=!0);let It=!1;for(;this.currentLayer<R.length;){const pt=oe[this.currentLayer],tt=l.getLayerSourceCache(pt);if(pt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(pt)){if(pt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!It&&pt.is3D(O)&&!O){const At=this.currentLayer,gt=Dt=>{for(this.currentLayer=0;this.currentLayer<oe.length;this.currentLayer++){const qt=oe[this.currentLayer];if(ty[qt.type]){const tn=this.style.getLayerSourceCache(qt);ty[qt.type](this,tn,qt,st(qt,tn),Dt)}}};gt("initialize"),gt("reset"),this.currentLayer=At,It=!0}if(N&&!ft&&this.terrain&&!this.transform.isOrthographic&&(ft=!0,this.blitDepth()),q&&wt!==-1&&this.currentLayer===wt+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(pt,tt,tt?de[tt.id]:void 0),this.renderLayer(this,tt,pt,st(pt,tt)),!this.terrain&&Ge&&this.currentLayer===dt){{this.clearStencil(),this.resetStencilClippingMasks();const At=this.currentLayer;for(this.currentLayer=0;this.currentLayer<oe.length;this.currentLayer++){const gt=oe[this.currentLayer];if(q0[gt.type]){const Dt=this.style.getLayerSourceCache(gt);q0[gt.type](this,Dt,gt,st(gt,Dt))}}this.currentLayer=At}if(Ge.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer){const At=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=At;this.currentLayer++){const gt=oe[this.currentLayer];if(!gt.hasLightBeamPass())continue;const Dt=l.getLayerSourceCache(gt);this.renderLayer(this,Dt,gt,Dt?_e[Dt.id]:void 0)}this.currentLayer=At,this.renderPass="translucent"}}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const At=this.currentLayer;this.depthOcclusion=!0;for(const gt of this.layersWithOcclusionOpacity){this.currentLayer=gt;const Dt=oe[this.currentLayer],qt=l.getLayerSourceCache(Dt),tn=qt?_e[qt.id]:void 0;this.terrain||this._renderTileClippingMasks(Dt,qt,qt?de[qt.id]:void 0),this.renderLayer(this,qt,Dt,tn)}this.depthOcclusion=!1,this.currentLayer=At,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let pt=null;oe.forEach(tt=>{const At=l.getLayerSourceCache(tt);At&&!tt.isHidden(this.transform.zoom)&&At.getVisibleCoordinates().length&&(!pt||pt.getSource().maxzoom<At.getSource().maxzoom)&&(pt=At)}),pt&&this.options.showTileBoundaries&&R0(this,pt,pt.getVisibleCoordinates(),a.ao.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&R0(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new a.ao(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&(function(pt){const tt=pt.transform.padding;k0(pt,pt.transform.height-(tt.top||0),3,Y_),k0(pt,tt.bottom||0,3,W_),L0(pt,tt.left||0,3,X_),L0(pt,pt.transform.width-(tt.right||0),3,l1);const At=pt.transform.centerPoint;(function(gt,Dt,qt,tn){Xg(gt,Dt-1,qt-10,2,20,tn),Xg(gt,Dt-10,qt-1,20,2,tn)})(pt,At.x,pt.transform.height-At.y,u1)})(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),ee||(this.conflationActive=!1)}prepareLayer(l){this.gpuTimingStart(l);const{unsupportedLayers:d}=this.transform.projection,v=!d||!d.includes(l.type);if(tv[l.type]&&(v||this.terrain&&l.type==="custom")){const T=this.style.getLayerSourceCache(l);tv[l.type](l,T,this)}this.gpuTimingEnd()}renderLayer(l,d,v,T){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="sky"||v.type==="custom"||v.type==="model"||v.type==="raster"||v.type==="raster-particle"||T&&T.length)&&(this.id=v.id,this.gpuTimingStart(v),l.transform.projection.unsupportedLayers&&l.transform.projection.unsupportedLayers.includes(v.type)&&(!l.terrain||v.type!=="custom")||v.type==="clip"||Ku[v.type](l,d,v,T,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery,v=this.context.gl;let T=this.gpuTimers[l.id];T||(T=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:v.createQuery()}),T.calls++,v.beginQuery(d.TIME_ELAPSED_EXT,T.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,d=this.context.gl,v=d.createQuery();this.deferredRenderGpuTimeQueries.push(v),d.beginQuery(l.TIME_ELAPSED_EXT,v)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const d={};for(const v in l){const T=l[v],O=this.context.extTimerQuery,M=O.getQueryParameter(T.query,this.context.gl.QUERY_RESULT)/1e6;O.deleteQueryEXT(T.query),d[v]=M}return d}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.gl;let v=0;for(const T of l)v+=d.getQueryParameter(T,d.QUERY_RESULT)/1e6,d.deleteQuery(T);return v}translatePosMatrix(l,d,v,T,O){if(!v[0]&&!v[1])return l;const M=O?T==="map"?this.transform.angle:0:T==="viewport"?-this.transform.angle:0;if(M){const q=Math.sin(M),H=Math.cos(M);v=[v[0]*H-v[1]*q,v[0]*q+v[1]*H]}const R=[O?v[0]:a.ay(d,v[0],this.transform.zoom),O?v[1]:a.ay(d,v[1],this.transform.zoom),0],N=new Float32Array(16);return a.br(N,l,R),N}saveTileTexture(l){if(l.context!==this.context)return;const d=l.size[0],v=this._tileTextures[d];v?v.push(l):this._tileTextures[d]=[l]}getTileTexture(l){const d=this._tileTextures[l];return d&&d.length>0?d.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(l,d,v){const T=v===void 0?this.terrain&&this.terrain.renderingToTexture:v,O=[];return this.style&&this.style.enable3dLights()&&(l==="globeRaster"||l==="terrainRaster"?(O.push("LIGHTING_3D_MODE"),O.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):T||O.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||O.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(O.push("TERRAIN"),this.linearFloatFilteringSupported()&&O.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&O.push("GLOBE"),!this._fogVisible||T||d!==void 0&&!d||O.push("FOG"),T&&O.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&O.push("OVERDRAW_INSPECTOR"),O}getOrCreateProgram(l,d){this.cache=this.cache||{};const v=d&&d.defines||[],T=d&&d.config,O=this.currentGlobalDefines(l,d&&d.overrideFog,d&&d.overrideRtt).concat(v),M=Ng.cacheKey(z_[l],l,O,T);return this.cache[M]||(this.cache[M]=new Ng(this.context,l,z_[l],T,qg[l],O)),this.cache[M]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(l,d){if(this.style.enable3dLights()){const v=this.style.directionalLight,T=this.style.ambientLight;if(v&&T){const O=((M,R,N)=>{const q=M.properties.get("direction"),H=M.properties.get("color-use-theme")==="none",re=M.properties.get("color").toNonPremultipliedRenderColor(H?null:N.getLut(M.scope)).toArray01(),ee=M.properties.get("intensity"),oe=R.properties.get("color-use-theme")==="none",he=R.properties.get("color").toNonPremultipliedRenderColor(oe?null:N.getLut(R.scope)).toArray01(),ce=R.properties.get("intensity"),de=[q.x,q.y,q.z],_e=a.dN(he,ce),Me=a.dN(re,ee);return{u_lighting_ambient_color:_e,u_lighting_directional_dir:de,u_lighting_directional_color:Me,u_ground_radiance:Cd(de,Me,_e)}})(v,T,this.style);d.setLightsUniformValues(l,O)}}}uploadCommonUniforms(l,d,v,T,O){if(this.uploadCommonLightUniforms(l,d),this.terrain&&this.terrain.renderingToTexture)return;const M=this.style.fog;if(M){const R=M.getOpacity(this.transform.pitch),N=((q,H,re,ee,oe,he,ce,de,_e,Me,Ce,Ae)=>{const We=q.transform,$e=H.properties.get("color-use-theme")==="none",Ge=H.properties.get("color").toNonPremultipliedRenderColor($e?null:q.style.getLut(H.scope)).toArray01();Ge[3]=ee;const Fe=q.frameCounter/1e3%1,[Re,et]=H.properties.get("vertical-range");return{u_fog_matrix:re?We.calculateFogTileMatrix(re):Ae||q.identityMat,u_fog_range:H.getFovAdjustedRange(We._fov),u_fog_color:Ge,u_fog_horizon_blend:H.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Re,et),et],u_fog_temporal_offset:Fe,u_frustum_tl:oe,u_frustum_tr:he,u_frustum_br:ce,u_frustum_bl:de,u_globe_pos:_e,u_globe_radius:Me,u_viewport:Ce,u_globe_transition:a.aj(We.zoom),u_is_globe:+(We.projection.name==="globe")}})(this,M,v,R,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*a.o.devicePixelRatio,this.transform.height*a.o.devicePixelRatio],T);d.setFogUniformValues(l,N)}O&&d.setCutoffUniformValues(l,O.uniformValues)}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,d=l.createTexture();return l.bindTexture(l.TEXTURE_2D,d),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,d=this._backgroundTiles={},v=this.transform.coveringTiles({tileSize:512});for(const T of v)d[T.key]=l[T.key]||new cf(T,512,this.transform.tileZoom,this,void 0,this.worldview);return d}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(l,d){return!(!l.is3D(!(!this.terrain||!this.terrain.enabled))||l.type!=="clip"&&l.type!=="building"&&(l.minzoom&&l.minzoom>this.transform.zoom||(this.style._clipLayerPresent||l.sourceLayer!=="building"&&l.sourceLayer!=="procedural_buildings")&&(!d||d.type!=="batched-model")))}isTileAffectedByFog(l){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let d=this._cachedTileFogOpacities[l.key];return d||(this._cachedTileFogOpacities[l.key]=d=this.style.fog.getOpacityForTile(l)),d[0]>=hn||d[1]>=hn}setupDepthForOcclusion(l,d,v){const T=this.context,O=T.gl,M=!!v;var R;v||(v={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),T.activeTexture.set(O.TEXTURE3),l&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE),v.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],v.u_depth_range_unpack=[2/((R=this.depthRangeFor3D)[1]-R[0]),-1-2*R[0]/(R[1]-R[0])],v.u_occluder_half_size=.5*this.occlusionParams.occluderSize,v.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE),T.activeTexture.set(O.TEXTURE0),M||d.setTerrainUniformValues(T,v)}updateEmissiveMode(){if(this._forceEmissiveMode)return;const l=this.style.hasDataDrivenEmissiveStrength();this.emissiveMode=l?this.context.extBlendFuncExtended?"dual-source-blending":"mrt-fallback":"constant"}}function rv(y,l){let d=!1,v=null;const T=()=>{v=null,d&&(y(),v=setTimeout(T,l),d=!1)};return()=>(d=!0,v||T(),v)}class Ms{constructor(l){this._hashName=l&&encodeURIComponent(l),a.aY(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=rv(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const d=H0(l);if(this._hashName){const v=this._hashName;let T=!1;const O=location.hash.slice(1).split("&").map(M=>{const R=M.split("=")[0];return R===v?(T=!0,`${R}=${d}`):M}).filter(M=>M);return T||O.push(`${v}=${d}`),`#${O.join("&")}`}return`#${d}`}_getCurrentHash(){const l=location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(d=v)}),(d&&d[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(v=>isNaN(Number(v)))){const v=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(d[3]||0):l.getBearing();return l.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function H0(y,l){const d=y.getCenter(),v=Math.round(100*y.getZoom())/100,T=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),O=Math.pow(10,T),M=Math.round(d.lng*O)/O,R=Math.round(d.lat*O)/O,N=y.getBearing(),q=y.getPitch();let H=l?`/${M}/${R}/${v}`:`${v}/${R}/${M}`;return(N||q)&&(H+="/"+Math.round(10*N)/10),q&&(H+=`/${Math.round(q)}`),H}const Ml={linearity:.3,easing:a.eT(0,0,.3,1)},h1=Object.assign({deceleration:2500,maxSpeed:1400},Ml),Ei=Object.assign({deceleration:20,maxSpeed:1400},Ml),gr=Object.assign({deceleration:1e3,maxSpeed:360},Ml),ny=Object.assign({deceleration:1e3,maxSpeed:90},Ml);class Pf{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.o.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,d=a.o.now();for(;l.length>0&&d-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:O}of this._inertiaBuffer)d.zoom+=O.zoomDelta||0,d.bearing+=O.bearingDelta||0,d.pitch+=O.pitchDelta||0,O.panDelta&&d.pan._add(O.panDelta),O.around&&(d.around=O.around),O.pinchAround&&(d.pinchAround=O.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,T={};if(d.pan.mag()){const O=Uc(d.pan.mag(),v,Object.assign({},h1,l||{}));T.offset=d.pan.mult(O.amount/d.pan.mag()),T.center=this._map.transform.center,Qu(T,O)}if(d.zoom){const O=Uc(d.zoom,v,Ei);T.zoom=this._map.transform.zoom+O.amount,Qu(T,O)}if(d.bearing){const O=Uc(d.bearing,v,gr);T.bearing=this._map.transform.bearing+a.aA(O.amount,-179,179),Qu(T,O)}if(d.pitch){const O=Uc(d.pitch,v,ny);T.pitch=this._map.transform.pitch+O.amount,Qu(T,O)}if(T.zoom||T.bearing){const O=d.pinchAround===void 0?d.around:d.pinchAround;T.around=O?this._map.unproject(O):this._map.getCenter()}return this.clear(),T.noMoveStart=!0,T}}function Qu(y,l){(!y.duration||y.duration<l.duration)&&(y.duration=l.duration,y.easing=l.easing)}function Uc(y,l,d){const{maxSpeed:v,linearity:T,deceleration:O}=d,M=a.aA(y*T/(l/1e3),-v,v),R=Math.abs(M)/(O*T);return{easing:d.easing,duration:1e3*R,amount:M*(R/2)}}class To extends a.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,v,T={}){const O=X(d.getCanvasContainer(),v),M=d.unproject(O);super(l,Object.assign({point:O,lngLat:M,originalEvent:v},T)),this._defaultPrevented=!1,this.target=d}}class fm extends a.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,v){const T=l==="touchend"?v.changedTouches:v.touches,O=ae(d.getCanvasContainer(),T),M=O.map(N=>d.unproject(N)),R=O.reduce((N,q,H,re)=>N.add(q.div(re.length)),new a.P(0,0));super(l,{points:O,point:R,lngLats:M,lngLat:d.unproject(R),originalEvent:v}),this._defaultPrevented=!1}}class ry extends a.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d){super("wheel",{originalEvent:d}),this._defaultPrevented=!1}}class lo{constructor(l,d){this._map=l,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new ry(this._map,l))}mousedown(l,d){return this._mousedownPos=d,this._firePreventable(new To(l.type,this._map,l))}mouseup(l){this._map.fire(new To(l.type,this._map,l))}preclick(l){const d=new MouseEvent("preclick",l);this._map.fire(new To(d.type,this._map,d))}click(l,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(l),this._map.fire(new To(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new To(l.type,this._map,l))}mouseover(l){this._map.fire(new To(l.type,this._map,l))}mouseout(l){this._map.fire(new To(l.type,this._map,l))}touchstart(l){return this._firePreventable(new fm(l.type,this._map,l))}touchmove(l){this._map.fire(new fm(l.type,this._map,l))}touchend(l){this._map.fire(new fm(l.type,this._map,l))}touchcancel(l){this._map.fire(new fm(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xo{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new To(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new To("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new To(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yl{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,d){this.isEnabled()&&l.shiftKey&&l.button===0&&(ie(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(l,d){if(!this._active)return;const v=d,T=this._startPos,O=this._lastPos;if(!T||!O||O.equals(v)||!this._box&&v.dist(T)<this._clickTolerance)return;this._lastPos=v,this._box||(this._box=U("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const M=Math.min(T.x,v.x),R=Math.max(T.x,v.x),N=Math.min(T.y,v.y),q=Math.max(T.y,v.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${M}px,${N}px)`,this._box.style.width=R-M+"px",this._box.style.height=q-N+"px")})}mouseupWindow(l,d){if(!this._active)return;const v=this._startPos,T=d;if(v&&l.button===0){if(this.reset(),te(),v.x!==T.x||v.y!==T.y)return this._map.fire(new a.z("boxzoomend",{originalEvent:l})),{cameraAnimation:O=>O.fitScreenCoordinates(v,T,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Q(),delete this._startPos,delete this._lastPos}_fireEvent(l,d){return this._map.fire(new a.z(l,{originalEvent:d}))}}function Ju(y,l){const d={};for(let v=0;v<y.length;v++)d[y[v].identifier]=l[v];return d}class $d{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),v.length===this.numTouches&&(this.centroid=(function(T){const O=new a.P(0,0);for(const M of T)O._add(M);return O.div(T.length)})(d),this.touches=Ju(v,d)))}touchmove(l,d,v){if(this.aborted||!this.centroid)return;const T=Ju(v,d);for(const O in this.touches){const M=T[O];(!M||M.dist(this.touches[O])>30)&&(this.aborted=!0)}}touchend(l,d,v){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const T=!this.aborted&&this.centroid;if(this.reset(),T)return T}}}class Vd{constructor(l){this.singleTap=new $d(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,d,v){this.singleTap.touchstart(l,d,v)}touchmove(l,d,v){this.singleTap.touchmove(l,d,v)}touchend(l,d,v){const T=this.singleTap.touchend(l,d,v);if(T){const O=l.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(T)<30;if(O&&M||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=T,this.count===this.numTaps)return this.reset(),T}}}class qd{constructor(){this._zoomIn=new Vd({numTouches:1,numTaps:2}),this._zoomOut=new Vd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,d,v){this._zoomIn.touchstart(l,d,v),this._zoomOut.touchstart(l,d,v)}touchmove(l,d,v){this._zoomIn.touchmove(l,d,v),this._zoomOut.touchmove(l,d,v)}touchend(l,d,v){const T=this._zoomIn.touchend(l,d,v),O=this._zoomOut.touchend(l,d,v);return T?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()+1,around:M.unproject(T)},{originalEvent:l})}):O?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()-1,around:M.unproject(O)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const iv=0,ec=2,av={[iv]:1,[ec]:2},Wl={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class Ah{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,d){return!1}_move(l,d){return{}}mousedown(l,d){if(this._lastPoint)return;const v=le(l);this._correctButton(l,v)&&(this._lastPoint=d,this._eventButton=v)}mousemoveWindow(l,d){const v=this._lastPoint;if(v){if(l.preventDefault(),this._eventButton!=null&&(function(T,O){const M=av[O];return T.buttons===void 0||(T.buttons&M)!==M})(l,this._eventButton))this.reset();else if(this._moved||!(d.dist(v)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(v,d)}}mouseupWindow(l){this._lastPoint&&le(l)===this._eventButton&&(this._moved&&te(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hm extends Ah{mousedown(l,d){super.mousedown(l,d),this._lastPoint&&(this._active=!0)}_correctButton(l,d){return d===0&&!l.ctrlKey}_move(l,d){return{around:d,panDelta:d.sub(l)}}}class iy extends Ah{constructor(l){super(l),this._pitchRotateKey=l.pitchRotateKey?Wl[l.pitchRotateKey]:void 0}_correctButton(l,d){return this._pitchRotateKey?d===0&&l[this._pitchRotateKey]:d===0&&l.ctrlKey||d===2}_move(l,d){const v=.8*(d.x-l.x);if(v)return this._active=!0,{bearingDelta:v}}contextmenu(l){this._pitchRotateKey||l.preventDefault()}}class ay extends Ah{constructor(l){super(l),this._pitchRotateKey=l.pitchRotateKey?Wl[l.pitchRotateKey]:void 0}_correctButton(l,d){return this._pitchRotateKey?d===0&&l[this._pitchRotateKey]:d===0&&l.ctrlKey||d===2}_move(l,d){const v=-.5*(d.y-l.y);if(v)return this._active=!0,{pitchDelta:v}}contextmenu(l){this._pitchRotateKey||l.preventDefault()}}class Xa{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),a.aY(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}touchstart(l,d,v){return this._calculateTransform(l,d,v)}touchmove(l,d,v){if(this._active&&!(v.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(v.length===1&&!a.eU())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,d,v)}}touchend(l,d,v){this._calculateTransform(l,d,v),this._active&&v.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,d,v){v.length>0&&(this._active=!0);const T=Ju(v,d),O=new a.P(0,0),M=new a.P(0,0);let R=0;for(const q in T){const H=T[q],re=this._touches[q];re&&(O._add(H),M._add(H.sub(re)),R++,T[q]=H)}if(this._touches=T,R<this._minTouches||!M.mag())return;const N=M.div(R);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:O.div(R),panDelta:N}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=U("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Hd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,d,v){return{}}touchstart(l,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(l,d,v){const T=this._firstTwoTouches;if(!T)return;l.preventDefault();const[O,M]=T,R=Oh(v,d,O),N=Oh(v,d,M);if(!R||!N)return;const q=this._aroundCenter?null:R.add(N).div(2);return this._move([R,N],q,l)}touchend(l,d,v){if(!this._firstTwoTouches)return;const[T,O]=this._firstTwoTouches,M=Oh(v,d,T),R=Oh(v,d,O);M&&R||(this._active&&te(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Oh(y,l,d){for(let v=0;v<y.length;v++)if(y[v].identifier===d)return l[v]}function dm(y,l){return Math.log2(y/l)}class Ch extends Hd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,d){const v=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(dm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:dm(this._distance,v),pinchAround:d}}}function pm(y,l){return 180*y.angleWith(l)/Math.PI}class mm extends Hd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,d){const v=this._vector;if(this._vector=l[0].sub(l[1]),v&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:pm(this._vector,v),pinchAround:d}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const d=25/(Math.PI*this._minDiameter)*360,v=this._startVector;if(!v)return!1;const T=pm(l,v);return Math.abs(T)<d}}function Gd(y){return Math.abs(y.y)>Math.abs(y.x)}class Mh extends Hd{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,Gd(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,d,v){const T=this._lastPoints;if(!T)return;const O=l[0].sub(T[0]),M=l[1].sub(T[1]);return this._map._cooperativeGestures&&!a.eU()&&v.touches.length<3||(this._valid=this.gestureBeginsVertically(O,M,v.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(O.y+M.y)/2*-.5})}gestureBeginsVertically(l,d,v){if(this._valid!==void 0)return this._valid;const T=l.mag()>=2,O=d.mag()>=2;if(!T&&!O)return;if(!T||!O)return this._firstMove==null&&(this._firstMove=v),v-this._firstMove<100&&void 0;const M=l.y>0==d.y>0;return Gd(l)&&Gd(d)&&M}}const oy={panStep:100,bearingStep:15,pitchStep:10};class gm{constructor(){const l=oy;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let d=0,v=0,T=0,O=0,M=0;switch(l.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:l.shiftKey?v=-1:(l.preventDefault(),O=-1);break;case 39:l.shiftKey?v=1:(l.preventDefault(),O=1);break;case 38:l.shiftKey?T=1:(l.preventDefault(),M=-1);break;case 40:l.shiftKey?T=-1:(l.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(v=0,T=0),{cameraAnimation:R=>{const N=R.getZoom();R.easeTo({duration:300,easeId:"keyboardHandler",easing:tc,zoom:d?Math.round(N)+d*(l.shiftKey?2:1):N,bearing:R.getBearing()+v*this._bearingStep,pitch:R.getPitch()+T*this._pitchStep,offset:[-O*this._panStep,-M*this._panStep],center:R.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function tc(y){return y*(2-y)}const Yd=4.000244140625,G0=1/450;class sy{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._handler=d,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=G0,a.aY(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||a.eU()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const v=a.o.now(),T=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,d!==0&&d%Yd===0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":T>400?(this._type=null,this._lastValue=d,this._timeout=window.setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(T*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),l.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=l,this._delta-=d,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=X(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const q=this._type==="wheel"&&Math.abs(this._delta)>Yd?this._wheelZoomRate:this._defaultZoomRate;let H=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&H!==0&&(H=1/H);const re=d(),ee=Math.pow(2,re),oe=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):ee;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(oe*H))),this._type==="wheel"&&(this._startZoom=re,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const v=typeof this._targetZoom=="number"?this._targetZoom:d(),T=this._startZoom,O=this._easing;let M,R=!1;if(this._type==="wheel"&&T&&O){const q=Math.min((a.o.now()-this._lastWheelEventTime)/200,1),H=O(q);M=a.ak(T,v,H),q<1?this._frameId||(this._frameId=!0):R=!0}else M=v,R=!0;this._active=!0,R&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let N=M-d();return N*this._lastDelta<0&&(N=0),{noInertia:!0,needsRenderFrame:!R,zoomDelta:N,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let d=a.eV;if(this._prevEase){const v=this._prevEase,T=(a.o.now()-v.start)/v.duration,O=v.easing(T+.01)-v.easing(T),M=.27/Math.sqrt(O*O+1e-4)*.01,R=Math.sqrt(.0729-M*M);d=a.eT(M,R,.25,1)}return this._prevEase={start:a.o.now(),duration:l,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=U("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class $c{constructor(l,d){this._clickZoom=l,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ov{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,d){return l.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:v.getZoom()+(l.shiftKey?-1:1),around:v.unproject(d)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Y0{constructor(){this._tap=new Vd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,d,v){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?v.length>0&&(this._swipePoint=d[0],this._swipeTouch=v[0].identifier):this._tap.touchstart(l,d,v))}touchmove(l,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const T=d[0],O=T.y-this._swipePoint.y;return this._swipePoint=T,l.preventDefault(),this._active=!0,{zoomDelta:O/128}}}else this._tap.touchmove(l,d,v)}touchend(l,d,v){this._tapTime?this._swipePoint&&v.length===0&&this.reset():this._tap.touchend(l,d,v)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ly{constructor(l,d,v){this._el=l,this._mousePan=d,this._touchPan=v}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ym{constructor(l,d,v){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=d,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ja{constructor(l,d,v,T){this._el=l,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=T,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const uy=y=>y.zoom||y.drag||y.pitch||y.rotate;class d1 extends a.z{}class W0{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,d){const v=a.av([],d,l);this.radius=a.ag(v[2]<0?a.eX([],v,this.constants):[v[0],v[1],0])}projectRay(l){a.eX(l,l,this.constants),a.aw(l,l),a.eY(l,l,this.constants);const d=a.c5([],l,this.radius);if(d[2]>0){const v=a.c5([],[0,0,1],a.bJ(d,[0,0,1])),T=a.c5([],a.aw([],[d[0],d[1],0]),this.radius),O=a.d8([],d,a.c5([],a.av([],a.d8([],T,v),d),2));d[0]=O[0],d[1]=O[1]}return d}}function Rf(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class kf{constructor(l,d){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Pf(l),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new W0,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),a.aY(["handleEvent","handleWindowEvent"],this);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[T,O,M]of this._listeners){const R=T===document?this.handleWindowEvent:this.handleEvent;T.addEventListener(O,R,M)}}destroy(){for(const[l,d,v]of this._listeners){const T=l===document?this.handleWindowEvent:this.handleEvent;l.removeEventListener(d,T,v)}}_addDefaultHandlers(l){const d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new lo(d,l));const T=d.boxZoom=new Yl(d,l);this._add("boxZoom",T);const O=new qd,M=new ov;d.doubleClickZoom=new $c(M,O),this._add("tapZoom",O),this._add("clickZoom",M);const R=new Y0;this._add("tapDragZoom",R);const N=d.touchPitch=new Mh(d);this._add("touchPitch",N);const q=new iy(l),H=new ay(l);d.dragRotate=new ym(l,q,H),this._add("mouseRotate",q,["mousePitch"]),this._add("mousePitch",H,["mouseRotate"]);const re=new hm(l),ee=new Xa(d,l);d.dragPan=new ly(v,re,ee),this._add("mousePan",re),this._add("touchPan",ee,["touchZoom","touchRotate"]);const oe=new mm,he=new Ch;d.touchZoomRotate=new ja(v,he,oe,R),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Xo(d));const ce=d.scrollZoom=new sy(d,this);this._add("scrollZoom",ce,["mousePan"]);const de=d.keyboard=new gm;this._add("keyboard",de);for(const _e of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[_e]&&d[_e].enable(l[_e])}_add(l,d,v){this._handlers.push({handlerName:l,handler:d,allowed:v}),this._handlersById[l]=d}stop(l){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!uy(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,d,v){for(const T in l)if(T!==v&&(!d||d.indexOf(T)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const d=[];for(const v of l)this._el.contains(v.target)&&d.push(v);return d}handleEvent(l,d){this._updatingCamera=!0;const v=l.type==="renderFrame",T=v?void 0:l,O={needsRenderFrame:!1},M={},R={},N=l.touches?this._getMapTouches(l.touches):void 0,q=N?ae(this._el,N):v?void 0:X(this._el,l);for(const{handlerName:ee,handler:oe,allowed:he}of this._handlers){if(!oe.isEnabled())continue;let ce;this._blockedByActive(R,he,ee)?oe.reset():oe[d||l.type]&&(ce=oe[d||l.type](l,q,N),this.mergeHandlerResult(O,M,ce,ee,T),ce&&ce.needsRenderFrame&&this._triggerRenderFrame()),(ce||oe.isActive())&&(R[ee]=oe)}const H={};for(const ee in this._previousActiveHandlers)R[ee]||(H[ee]=T);this._previousActiveHandlers=R,(Object.keys(H).length||Rf(O))&&(this._changes.push([O,M,H]),this._triggerRenderFrame()),(Object.keys(R).length||Rf(O))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:re}=O;re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],re(this._map))}mergeHandlerResult(l,d,v,T,O){if(!v)return;Object.assign(l,v);const M={handlerName:T,originalEvent:v.originalEvent||O};v.zoomDelta!==void 0&&(d.zoom=M),v.panDelta!==void 0&&(d.drag=M),v.pitchDelta!==void 0&&(d.pitch=M),v.bearingDelta!==void 0&&(d.rotate=M)}_applyChanges(){const l={},d={},v={};for(const[T,O,M]of this._changes)T.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(T.panDelta)),T.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+T.zoomDelta),T.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+T.bearingDelta),T.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+T.pitchDelta),T.around!==void 0&&(l.around=T.around),T.aroundCoord!==void 0&&(l.aroundCoord=T.aroundCoord),T.pinchAround!==void 0&&(l.pinchAround=T.pinchAround),T.noInertia&&(l.noInertia=T.noInertia),Object.assign(d,O),Object.assign(v,M);this._updateMapTransform(l,d,v),this._changes=[]}_updateMapTransform(l,d,v){const T=this._map,O=T.transform,M=Me=>[Me.x,Me.y,Me.z];if((()=>{const Me=this._eventsInProgress.drag;return Me&&!this._handlersById[Me.handlerName].isActive()})()&&!Rf(l)){const Me=O.zoom;O.cameraElevationReference="sea",this._originalZoom!=null&&O._orthographicProjectionAtLowPitch&&O.projection.name!=="globe"&&O.pitch===0?(O.cameraElevationReference="ground",O.zoom=this._originalZoom):(O.recenterOnTerrain(),O.cameraElevationReference="ground"),Me!==O.zoom&&this._map._update(!0)}if(O._isCameraConstrained&&T._stop(!0),!Rf(l))return void this._fireEvents(d,v,!0);let{panDelta:R,zoomDelta:N,bearingDelta:q,pitchDelta:H,around:re,aroundCoord:ee,pinchAround:oe}=l;O._isCameraConstrained&&(N>0&&(N=0),O._isCameraConstrained=!1),oe!==void 0&&(re=oe),(N||(Me=>d[Me]&&!this._eventsInProgress[Me])("drag"))&&re&&(this._dragOrigin=M(O.pointCoordinate3D(re)),this._originalZoom=O.zoom,this._trackingEllipsoid.setup(O._camera.position,this._dragOrigin)),O.cameraElevationReference="sea",T._stop(!0),re=re||T.transform.centerPoint,q&&(O.bearing+=q),H&&(O.pitch+=H),O._updateCameraState();const he=[0,0,0];if(R)if(O.projection.name==="mercator"){const Me=this._trackingEllipsoid.projectRay(O.screenPointToMercatorRay(re).dir),Ce=this._trackingEllipsoid.projectRay(O.screenPointToMercatorRay(re.sub(R)).dir);he[0]=Ce[0]-Me[0],he[1]=Ce[1]-Me[1]}else{const Me=O.pointCoordinate(re);if(O.projection.name==="globe"){R=R.rotate(-O.angle);const Ce=O._pixelsPerMercatorPixel/O.worldSize;he[0]=-R.x*a.eW(a.a$(Me.y))*Ce,he[1]=-R.y*a.eW(O.center.lat)*Ce}else{const Ce=O.pointCoordinate(re.sub(R));Me&&Ce&&(he[0]=Ce.x-Me.x,he[1]=Ce.y-Me.y)}}const ce=O.zoom,de=[0,0,0];if(N){const Me=M(ee||O.pointCoordinate3D(re)),Ce={dir:a.aw([],a.av([],Me,O._camera.position))};if(Ce.dir[2]<0){const Ae=O.zoomDeltaToMovement(Me,N);a.c5(de,Ce.dir,Ae)}}const _e=a.d8(he,he,de);O._translateCameraConstrained(_e),N&&Math.abs(O.zoom-ce)>1e-4&&O.recenterOnTerrain(),O.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(d,v,!0)}_fireEvents(l,d,v){const T=uy(this._eventsInProgress),O=uy(l),M={};for(const H in l){const{originalEvent:re}=l[H];this._eventsInProgress[H]||(M[`${H}start`]=re),this._eventsInProgress[H]=l[H]}!T&&O&&this._fireEvent("movestart",O.originalEvent);for(const H in M)this._fireEvent(H,M[H]);O&&this._fireEvent("move",O.originalEvent);for(const H in l){const{originalEvent:re}=l[H];this._fireEvent(H,re)}const R={};let N;for(const H in this._eventsInProgress){const{handlerName:re,originalEvent:ee}=this._eventsInProgress[H];this._handlersById[re].isActive()||(delete this._eventsInProgress[H],N=d[re]||ee,R[`${H}end`]=N)}for(const H in R)this._fireEvent(H,R[H]);const q=uy(this._eventsInProgress);if(v&&(T||O)&&!q){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),re=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;H?(re(H.bearing||this._map.getBearing())&&(H.bearing=0),this._map.easeTo(H,{originalEvent:N})):(this._map.fire(new a.z("moveend",{originalEvent:N})),re(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,d){this._map.fire(new a.z(l,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new d1("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const sv="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class X0 extends a.E{constructor(l,d){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,a.aY(["_renderFrameCallback"],this)}getCenter(){return new a.aT(this.transform.center.lng,this.transform.center.lat)}setCenter(l,d){return this.jumpTo({center:l},d)}panBy(l,d,v){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,Object.assign({offset:l},d),v)}panTo(l,d,v){return this.easeTo(Object.assign({center:l},d),v)}getZoom(){return this.transform.zoom}setZoom(l,d){return this.jumpTo({zoom:l},d),this}zoomTo(l,d,v){return this.easeTo(Object.assign({zoom:l},d),v)}zoomIn(l,d){return this.zoomTo(this.getZoom()+1,l,d),this}zoomOut(l,d){return this.zoomTo(this.getZoom()-1,l,d),this}getBearing(){return this.transform.bearing}setBearing(l,d){return this.jumpTo({bearing:l},d),this}getPadding(){return this.transform.padding}setPadding(l,d){return this.jumpTo({padding:l},d),this}rotateTo(l,d,v){return this.easeTo(Object.assign({bearing:l},d),v)}resetNorth(l,d){return this.rotateTo(0,Object.assign({duration:1e3},l),d),this}resetNorthPitch(l,d){return this.easeTo(Object.assign({bearing:0,pitch:0,duration:1e3},l),d),this}snapToNorth(l,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,d):this}getPitch(){return this.transform.pitch}setPitch(l,d){return this.jumpTo({pitch:l},d),this}cameraForBounds(l,d){l=a.aI.convert(l);const v=d&&d.bearing||0,T=d&&d.pitch||0,O=l.getNorthWest(),M=l.getSouthEast();return this._cameraForBounds(this.transform,O,M,v,T,d)}_extendPadding(l){const d={top:0,right:0,bottom:0,left:0};return l==null?Object.assign({},d,this.transform.padding):typeof l=="number"?{top:l,bottom:l,right:l,left:l}:Object.assign({},d,l)}_extendCameraOptions(l){return(l=Object.assign({offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=this._extendPadding(l.padding),l}_minimumAABBFrustumDistance(l,d){const v=d.max[0]-d.min[0],T=d.max[1]-d.min[1];return v/T>l.aspect?v/(2*Math.tan(.5*l.fovX)*l.aspect):T/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,d,v,T,O,M){const R=l.clone(),N=this._extendCameraOptions(M);R.bearing=T,R.pitch=O;const q=a.aT.convert(d),H=a.aT.convert(v),re=.5*(q.lat+H.lat),ee=.5*(q.lng+H.lng),oe=a.eZ(re,ee),he=a.aw([],oe),ce=a.aw([],a.bI([],he,[0,1,0])),de=a.bI([],ce,he),_e=[ce[0],ce[1],ce[2],0,de[0],de[1],de[2],0,he[0],he[1],he[2],0,0,0,0,1],Me=[oe,a.eZ(q.lat,q.lng),a.eZ(H.lat,q.lng),a.eZ(H.lat,H.lng),a.eZ(q.lat,H.lng),a.eZ(re,q.lng),a.eZ(re,H.lng),a.eZ(q.lat,ee),a.eZ(H.lat,ee)];let Ce=a.d9.fromPoints(Me.map(gt=>[a.bJ(ce,gt),a.bJ(de,gt),a.bJ(he,gt)]));const Ae=a.af([],Ce.center,_e);a.e_(Ae)===0&&a.e$(Ae,0,0,1),a.aw(Ae,Ae),a.c5(Ae,Ae,a.aD),R.center=a.f0(Ae);const We=R.getWorldToCameraMatrix(),$e=a.bl(new Float64Array(16),We);Ce=a.d9.applyTransform(Ce,a.aB([],We,_e));const Ge=this._extendAABB(Ce,R,N,T);if(!Ge)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Ce=Ge,a.af(Ae,Ae,We);const Fe=.5*(Ce.max[2]-Ce.min[2]),Re=this._minimumAABBFrustumDistance(R,Ce),et=a.c5([],[0,0,1],Fe),nt=a.d8(et,Ae,et),st=Re+(R.pitch===0?0:a.bG(Ae,nt)),dt=R.globeCenterInViewSpace,ft=a.av([],Ae,[dt[0],dt[1],dt[2]]);a.aw(ft,ft),a.c5(ft,ft,st);const wt=a.d8([],Ae,ft);a.af(wt,wt,$e);const It=a.eM/a.aD,pt=a.ag(wt),tt=a.cf(Math.max(pt*It-a.eM,Number.EPSILON),0),At=Math.min(R.zoomFromMercatorZAdjusted(tt),N.maxZoom);return At>.5*(a.c_+a.cL)?(R.setProjection({name:"mercator"}),R.zoom=At,this._cameraForBounds(R,d,v,T,O,M)):{center:R.center,zoom:At,bearing:T,pitch:O}}_extendAABB(l,d,v,T){const O=.5*((v.padding.left||0)+(v.padding.right||0)),M=.5*((v.padding.top||0)+(v.padding.bottom||0)),R=M,N=O,q=O,H=M,re=d.width-(N+q),ee=d.height-(R+H),oe=a.av([],l.max,l.min),he=Math.min(re/oe[0],ee/oe[1]),ce=Math.min(d.scaleZoom(d.scale*he),v.maxZoom);if(isNaN(ce))return null;const de=d.scale/d.zoomScale(ce),_e=new a.d9([l.min[0]-N*de,l.min[1]-H*de,l.min[2]],[l.max[0]+q*de,l.max[1]+R*de,l.max[2]]),Me=(typeof v.offset.x=="number"&&typeof v.offset.y=="number"?new a.P(v.offset.x,v.offset.y):a.P.convert(v.offset)).rotate(-a.an(T));return _e.center[0]-=Me.x*de,_e.center[1]+=Me.y*de,_e}queryTerrainElevation(l,d){const v=this.transform.elevation;return v?(d=Object.assign({},{exaggerated:!0},d),v.getAtPoint(a.ae.fromLngLat(l),null,d.exaggerated)):null}_cameraForBounds(l,d,v,T,O,M){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,d,v,T,O,M);const R=l.clone(),N=this._extendCameraOptions(M);R.bearing=T,R.pitch=O;const q=a.aT.convert(d),H=a.aT.convert(v),re=new a.aT(q.lng,H.lat),ee=new a.aT(H.lng,q.lat),oe=R.project(q),he=R.project(H),ce=this.queryTerrainElevation(q),de=this.queryTerrainElevation(H),_e=this.queryTerrainElevation(re),Me=this.queryTerrainElevation(ee),Ce=[[oe.x,oe.y,Math.min(ce||0,de||0,_e||0,Me||0)],[he.x,he.y,Math.max(ce||0,de||0,_e||0,Me||0)]];let Ae=a.d9.fromPoints(Ce);const We=R.getWorldToCameraMatrix(),$e=a.bl(new Float64Array(16),We);Ae=a.d9.applyTransform(Ae,We);const Ge=this._extendAABB(Ae,R,N,T);if(!Ge)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Ae=Ge;const Fe=.5*a.av([],Ae.max,Ae.min)[2],Re=this._minimumAABBFrustumDistance(R,Ae),et=[0,0,1,0];a.aC(et,et,We),a.f1(et,et);const nt=a.c5([],et,Re+Fe),st=a.d8([],Ae.center,nt);a.af(Ae.center,Ae.center,$e),a.af(st,st,$e);const dt=R.unproject(new a.P(Ae.center[0],Ae.center[1])),ft=a.f2(R.projection,dt),wt=Math.pow(2,ft),It=Math.min(R._zoomFromMercatorZ(st[2]*R.pixelsPerMeter*wt/R.worldSize),N.maxZoom);return R.mercatorFromTransition&&It<.5*(a.c_+a.cL)?(R.setProjection({name:"globe"}),R.zoom=It,this._cameraForBounds(R,d,v,T,O,M)):{center:dt,zoom:It,bearing:T,pitch:O}}fitBounds(l,d,v){const T=this.cameraForBounds(l,d);return this._fitInternal(T,d,v)}fitScreenCoordinates(l,d,v,T,O){const M=a.P.convert(l),R=a.P.convert(d),N=new a.P(Math.min(M.x,R.x),Math.min(M.y,R.y)),q=new a.P(Math.max(M.x,R.x),Math.max(M.y,R.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(M,R))return this;const H=this.transform.pointLocation3D(N),re=this.transform.pointLocation3D(q),ee=this.transform.pointLocation3D(new a.P(N.x,q.y)),oe=this.transform.pointLocation3D(new a.P(q.x,N.y)),he=[Math.min(H.lng,re.lng,ee.lng,oe.lng),Math.min(H.lat,re.lat,ee.lat,oe.lat)],ce=[Math.max(H.lng,re.lng,ee.lng,oe.lng),Math.max(H.lat,re.lat,ee.lat,oe.lat)],de=T&&T.pitch?T.pitch:this.getPitch(),_e=this._cameraForBounds(this.transform,he,ce,v,de,T);return this._fitInternal(_e,T,O)}_fitInternal(l,d,v){return l?(d=Object.assign(l,d)).linear?this.easeTo(d,v):this.flyTo(d,v):this}jumpTo(l,d){this.stop();const v=l.preloadOnly?this.transform.clone():this.transform;let T=!1,O=!1,M=!1;"zoom"in l&&v.zoom!==+l.zoom&&(T=!0,v.zoom=+l.zoom),l.center!==void 0&&(v.center=a.aT.convert(l.center)),"bearing"in l&&v.bearing!==+l.bearing&&(O=!0,v.bearing=+l.bearing),"pitch"in l&&v.pitch!==+l.pitch&&(M=!0,v.pitch=+l.pitch);const R=typeof l.padding=="number"?this._extendPadding(l.padding):l.padding;if(l.padding!=null&&!v.isPaddingEqual(R))if(l.retainPadding===!1){const N=v.clone();N.padding=R,v.setLocationAtPoint(v.center,N.centerPoint)}else v.padding=R;return l.preloadOnly?(this._preloadTiles(v),this):(this.fire(new a.z("movestart",d)).fire(new a.z("move",d)),T&&this.fire(new a.z("zoomstart",d)).fire(new a.z("zoom",d)).fire(new a.z("zoomend",d)),O&&this.fire(new a.z("rotatestart",d)).fire(new a.z("rotate",d)).fire(new a.z("rotateend",d)),M&&this.fire(new a.z("pitchstart",d)).fire(new a.z("pitch",d)).fire(new a.z("pitchend",d)),this.fire(new a.z("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||a.w(sv),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,d){const v=this.transform;if(!v.projection.supportsFreeCamera)return a.w(sv),this;this.stop();const T=v.zoom,O=v.pitch,M=v.bearing;v.setFreeCameraOptions(l);const R=T!==v.zoom,N=O!==v.pitch,q=M!==v.bearing;return this.fire(new a.z("movestart",d)).fire(new a.z("move",d)),R&&this.fire(new a.z("zoomstart",d)).fire(new a.z("zoom",d)).fire(new a.z("zoomend",d)),q&&this.fire(new a.z("rotatestart",d)).fire(new a.z("rotate",d)).fire(new a.z("rotateend",d)),N&&this.fire(new a.z("pitchstart",d)).fire(new a.z("pitch",d)).fire(new a.z("pitchend",d)),this.fire(new a.z("moveend",d)),this}easeTo(l,d){this._stop(!1,l.easeId),((l=Object.assign({offset:[0,0],duration:500,easing:a.eV},l)).animate===!1||this._prefersReducedMotion(l))&&(l.duration=0);const v=this.transform,T=this.getZoom(),O=this.getBearing(),M=this.getPitch(),R=this.getPadding(),N="zoom"in l?+l.zoom:T,q="bearing"in l?this._normalizeBearing(l.bearing,O):O,H="pitch"in l?+l.pitch:M,re=this._extendPadding(l.padding),ee=a.P.convert(l.offset);let oe,he,ce;if(v.projection.name==="globe"){const et=a.ae.fromLngLat(v.center),nt=ee.rotate(-v.angle);et.x+=nt.x/v.worldSize,et.y+=nt.y/v.worldSize;const st=et.toLngLat(),dt=a.aT.convert(l.center||st);this._normalizeCenter(dt),oe=v.centerPoint.add(nt),he=new a.P(et.x,et.y).mult(v.worldSize),ce=new a.P(a.aF(dt.lng),a.aJ(dt.lat)).mult(v.worldSize).sub(he)}else{oe=v.centerPoint.add(ee);const et=v.pointLocation(oe),nt=a.aT.convert(l.center||et);this._normalizeCenter(nt),he=v.project(et),ce=v.project(nt).sub(he)}const de=v.zoomScale(N-T);let _e,Me;l.around&&(_e=a.aT.convert(l.around),Me=v.locationPoint(_e));const Ce=this._zooming||N!==T,Ae=this._rotating||O!==q,We=this._pitching||H!==M,$e=!v.isPaddingEqual(re),Ge=l.retainPadding===!1?v.clone():v,Fe=et=>nt=>{if(Ce&&(et.zoom=a.ak(T,N,nt)),Ae&&(et.bearing=a.ak(O,q,nt)),We&&(et.pitch=a.ak(M,H,nt)),$e&&(Ge.interpolatePadding(R,re,nt),oe=Ge.centerPoint.add(ee)),_e)et.setLocationAtPoint(_e,Me);else{const st=et.zoomScale(et.zoom-T),dt=N>T?Math.min(2,de):Math.max(.5,de),ft=Math.pow(dt,1-nt),wt=et.unproject(he.add(ce.mult(nt*ft)).mult(st));et.setLocationAtPoint(et.renderWorldCopies?wt.wrap():wt,oe)}return l.preloadOnly||this._fireMoveEvents(d),et};if(l.preloadOnly){const et=this._emulate(Fe,l.duration,v);return this._preloadTiles(et),this}const Re={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ce,this._rotating=Ae,this._pitching=We,this._padding=$e,this._easeId=l.easeId,this._prepareEase(d,l.noMoveStart,Re),this._ease(Fe(v),et=>{v.cameraElevationReference==="sea"&&v.recenterOnTerrain(),this._afterEase(d,et)},l),this}_prepareEase(l,d,v={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),d||v.moving||this.fire(new a.z("movestart",l)),this._zooming&&!v.zooming&&this.fire(new a.z("zoomstart",l)),this._rotating&&!v.rotating&&this.fire(new a.z("rotatestart",l)),this._pitching&&!v.pitching&&this.fire(new a.z("pitchstart",l))}_fireMoveEvents(l){this.fire(new a.z("move",l)),this._zooming&&this.fire(new a.z("zoom",l)),this._rotating&&this.fire(new a.z("rotate",l)),this._pitching&&this.fire(new a.z("pitch",l))}_afterEase(l,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const v=this._zooming,T=this._rotating,O=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new a.z("zoomend",l)),T&&this.fire(new a.z("rotateend",l)),O&&this.fire(new a.z("pitchend",l)),this.fire(new a.z("moveend",l))}flyTo(l,d){if(this._prefersReducedMotion(l)){const gt=a.aH(l,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(gt,d)}this.stop(),l=Object.assign({offset:[0,0],speed:1.2,curve:1.42,easing:a.eV},l);const v=this.transform,T=this.getZoom(),O=this.getBearing(),M=this.getPitch(),R=this.getPadding(),N="zoom"in l?a.aA(+l.zoom,v.minZoom,v.maxZoom):T,q="bearing"in l?this._normalizeBearing(l.bearing,O):O,H="pitch"in l?+l.pitch:M,re=this._extendPadding(l.padding),ee=v.zoomScale(N-T),oe=a.P.convert(l.offset);let he=v.centerPoint.add(oe);const ce=v.pointLocation(he),de=a.aT.convert(l.center||ce);this._normalizeCenter(de);const _e=v.project(ce),Me=v.project(de).sub(_e);let Ce=l.curve;const Ae=Math.max(v.width,v.height),We=Ae/ee,$e=Me.mag();if("minZoom"in l){const gt=a.aA(Math.min(l.minZoom,T,N),v.minZoom,v.maxZoom),Dt=Ae/v.zoomScale(gt-T);Ce=Math.sqrt(Dt/$e*2)}const Ge=Ce*Ce;function Fe(gt){const Dt=(We*We-Ae*Ae+(gt?-1:1)*Ge*Ge*$e*$e)/(2*(gt?We:Ae)*Ge*$e);return Math.log(Math.sqrt(Dt*Dt+1)-Dt)}function Re(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function et(gt){return(Math.exp(gt)+Math.exp(-gt))/2}const nt=Fe(0);let st=function(gt){return et(nt)/et(nt+Ce*gt)},dt=function(gt){return Ae*((et(nt)*(Re(Dt=nt+Ce*gt)/et(Dt))-Re(nt))/Ge)/$e;var Dt},ft=(Fe(1)-nt)/Ce;if(Math.abs($e)<1e-6||!isFinite(ft)){if(Math.abs(Ae-We)<1e-6)return this.easeTo(l,d);const gt=We<Ae?-1:1;ft=Math.abs(Math.log(We/Ae))/Ce,dt=function(){return 0},st=function(Dt){return Math.exp(gt*Ce*Dt)}}l.duration="duration"in l?+l.duration:1e3*ft/("screenSpeed"in l?+l.screenSpeed/Ce:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const wt=O!==q,It=H!==M,pt=!v.isPaddingEqual(re),tt=l.retainPadding===!1?v.clone():v,At=gt=>Dt=>{const qt=Dt*ft,tn=1/st(qt);gt.zoom=Dt===1?N:T+gt.scaleZoom(tn),wt&&(gt.bearing=a.ak(O,q,Dt)),It&&(gt.pitch=a.ak(M,H,Dt)),pt&&(tt.interpolatePadding(R,re,Dt),he=tt.centerPoint.add(oe));const Wt=Dt===1?de:gt.unproject(_e.add(Me.mult(dt(qt))).mult(tn));return gt.setLocationAtPoint(gt.renderWorldCopies?Wt.wrap():Wt,he),gt._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(d),gt};if(l.preloadOnly){const gt=this._emulate(At,l.duration,v);return this._preloadTiles(gt),this}return this._zooming=!0,this._rotating=wt,this._pitching=It,this._padding=pt,this._prepareEase(d,!1),this._ease(At(v),()=>this._afterEase(d),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(l){}_cancelRenderFrame(l){}_stop(l,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const v=this._onEaseEnd;this._onEaseEnd=void 0,v.call(this,d)}if(!l){const v=this.handlers;v&&v.stop(!1)}return this}_ease(l,d,v){v.animate===!1||v.duration===0?(l(1),d()):(this._easeStart=a.o.now(),this._easeOptions=v,this._onEaseFrame=l,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((a.o.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,d){l=a.bT(l,-180,180);const v=Math.abs(l-d);return Math.abs(l-360-d)<v&&(l-=360),Math.abs(l+360-d)<v&&(l+=360),l}_normalizeCenter(l){const d=this.transform;if(d.maxBounds||d.projection.name!=="globe"&&!d.renderWorldCopies)return;const v=l.lng-d.center.lng;l.lng+=v>180?-360:v<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&a.o.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,d,v){const T=Math.ceil(15*d/1e3),O=[],M=l(v.clone());for(let R=0;R<=T;R++){const N=M(R/T);O.push(N.clone())}return O}_preloadTiles(l,d){}}class _m{constructor(l={}){this.options=l,a.aY(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const d=this.options&&this.options.compact,v=l._getUIString("AttributionControl.ToggleAttribution");this._map=l,this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=U("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",v);const T=U("span","mapboxgl-ctrl-icon",this._compactButton);return T.setAttribute("aria-hidden","true"),T.setAttribute("title",v),this._innerContainer=U("div","mapboxgl-ctrl-attrib-inner",this._container),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.e.ACCESS_TOKEN}];if(l){const v=d.reduce((T,O,M)=>(O.value&&(T+=`${O.key}=${O.value}${M<d.length-1?"&":""}`),T),"?");l.href=`${a.e.FEEDBACK_URL}/${v}#${H0(this._map,!0)}`,l.rel="noopener nofollow"}}_updateData(l){!l||(l.dataType!=="source"||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility")&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const T=this._map.style.stylesheet;this.styleOwner=T.owner,this.styleId=T.id}const d=this._map.style._mergedSourceCaches;for(const T in d){const O=d[T];if(O.used){const M=O.getSource();M.attribution&&l.indexOf(M.attribution)<0&&l.push(M.attribution)}}l.sort((T,O)=>T.length-O.length),l=l.filter((T,O)=>{for(let M=O+1;M<l.length;M++)if(l[M].indexOf(T)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const v=l.map(T=>(function(O){const M=new DOMParser().parseFromString(O,"text/html");return Array.from(M.body.querySelectorAll("*")).reverse().forEach(R=>{const N=R.textContent||"";if(R.tagName!=="A")return void R.replaceWith(...R.childNodes);const q=R.getAttribute("href");if(!q||!/^(https?:|mailto:)/i.test(q))return void R.replaceWith(M.createTextNode(N));const H=M.createElement("a");H.href=q,H.textContent=N,H.rel="noopener nofollow";const re=R.getAttribute("class");re&&(H.className=re),R.replaceWith(H)}),M.body.innerHTML})(T)).join(" | ");v!==this._attribHTML&&(this._attribHTML=v,l.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class nc{constructor(){a.aY(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=U("div","mapboxgl-ctrl");const d=U("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const d in l){const v=l[d].getSource();if(v.hasOwnProperty("mapbox_logo")&&!v.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class Z0{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const d=++this._id;return this._queue.push({callback:l,id:d,cancelled:!1}),d}remove(l){const d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(const T of v)if(T.id===l)return void(T.cancelled=!0)}run(l=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const v of d)if(!v.cancelled&&(v.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Ii{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const d=a.dD((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,d,v){this._start=this.getValue(d),this._end=l,this._startTime=d,this._endTime=d+v}}const K0={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class lv extends a.z{constructor(l,d,v,T){const{point:O,lngLat:M,originalEvent:R,target:N}=l;super(l.type,{point:O,lngLat:M,originalEvent:R,target:N}),this.preventDefault=()=>{l.preventDefault()},this.id=d,this.interaction=v,this.feature=T}}class Q0{constructor(l){this.map=l,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(l,d){if(this.typeById.has(l))throw new Error(`Interaction id "${l}" already exists.`);const v=d.filter;let T=d.type;v&&this.filters.set(l,a.b6(v)),T==="mouseover"&&(T="mouseenter"),T==="mouseout"&&(T="mouseleave");const O=this.interactionsByType.get(T)||new Map;T==="mouseenter"||T==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(l,d)):O.size===0&&this.map.on(T,this.handleType),O.size===0&&this.interactionsByType.set(T,O),O.set(l,d),this.typeById.set(l,T)}get(l){const d=this.typeById.get(l);if(!d)return;const v=this.interactionsByType.get(d);return v?v.get(l):void 0}remove(l){const d=this.typeById.get(l);if(!d)return;this.typeById.delete(l),this.filters.delete(l);const v=this.interactionsByType.get(d);v&&(v.delete(l),d==="mouseenter"||d==="mouseleave"?(this.delegatedInteractions.delete(l),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):v.size===0&&this.map.off(d,this.handleType))}queryTargets(l,d){const v=[];for(const[T,O]of d)O.target&&v.push({targetId:T,target:O.target,filter:this.filters.get(T)});return this.map.style.queryRenderedTargets(l,v,this.map.transform)}handleMove(l){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const d=this.queryTargets(l.point,Array.from(this.delegatedInteractions).reverse());d.length&&(l.type="mouseenter",this.handleType(l,d));const v=new Map;for(const[T,{feature:O}]of this.prevHoveredFeatures)this.hoveredFeatures.has(T)||v.set(O.id,O);v.size&&(l.type="mouseleave",this.handleType(l,Array.from(v.values())))}handleOut(l){const d=Array.from(this.hoveredFeatures.values()).map(({feature:v})=>v);d.length&&(l.type="mouseleave",this.handleType(l,d)),this.hoveredFeatures.clear()}handleType(l,d){const v=l.type==="mouseenter";if(v&&!this.interactionsByType.has(l.type))return void a.w("mouseenter interaction required for mouseleave to work.");const T=Array.from(this.interactionsByType.get(l.type)).reverse(),O=!!d;d=d||this.queryTargets(l.point,T);let M=!1;const R=new Set;for(const N of d){for(const[q,H]of T){if(!H.target)continue;const re=N.variants?N.variants[q]:null;if(re){for(const ee of re){if(Rp(ee,N,R,q))continue;const oe=new a.dx(N,ee),he=Sl(ee,N,q);O&&oe.id!==void 0&&(oe.state=this.map.getFeatureState(oe));const ce=v?this.prevHoveredFeatures.get(he):null,de=new lv(l,q,H,oe),_e=ce?ce.stop:H.handler(de);if(v&&this.hoveredFeatures.set(he,{feature:N,stop:_e}),_e!==!1){M=!0;break}}if(M)break}}if(M)break}if(!M)for(const[N,q]of T){const{handler:H,target:re}=q;if(!re&&H(new lv(l,N,q,null))!==!1)break}}}function uv(y,l){if(Array.isArray(y)&&Array.isArray(l)){const d=new Set(y),v=new Set(l);return d.size===v.size&&y.every(T=>v.has(T))}return a.by(y,l)}const vm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},Vc={showCompass:!0,showZoom:!0,visualizePitch:!1};class uo{constructor(l,d,v=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new iy({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,v&&(this.mousePitch=new ay({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),a.aY(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(l,d){this.mouseRotate.mousedown(l,d),this.mousePitch&&this.mousePitch.mousedown(l,d),ie()}move(l,d){const v=this.map,T=this.mouseRotate.mousemoveWindow(l,d),O=T&&T.bearingDelta;if(O&&v.setBearing(v.getBearing()+O),this.mousePitch){const M=this.mousePitch.mousemoveWindow(l,d),R=M&&M.pitchDelta;R&&v.setPitch(v.getPitch()+R)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Q(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(Object.assign({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),X(this.element,l)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,X(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ae(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=ae(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Wd(y,l,d){if(y=new a.aT(y.lng,y.lat),l){const v=new a.aT(y.lng-360,y.lat),T=new a.aT(y.lng+360,y.lat),O=360*Math.ceil(Math.abs(y.lng-d.center.lng)/360),M=d.locationPoint3D(y).distSqr(l),R=l.x<0||l.y<0||l.x>d.width||l.y>d.height;d.locationPoint3D(v).distSqr(l)<M&&(R||Math.abs(v.lng-d.center.lng)<O)?y=v:d.locationPoint3D(T).distSqr(l)<M&&(R||Math.abs(T.lng-d.center.lng)<O)&&(y=T)}for(;Math.abs(y.lng-d.center.lng)>180;){const v=d.locationPoint3D(y);if(v.x>=0&&v.y>=0&&v.x<=d.width&&v.y<=d.height)break;y.lng>d.center.lng?y.lng-=360:y.lng+=360}return y}const mu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},ha={rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class Ua extends a.E{constructor(l,d){super(),(l instanceof HTMLElement||d)&&(l=Object.assign({element:l},d)),a.aY(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this);const{anchor:v="center",color:T="#3FB1CE",scale:O=1,draggable:M=!1,clickTolerance:R=0,rotation:N=ha.rotation,rotationAlignment:q=ha.rotationAlignment,pitchAlignment:H=ha.pitchAlignment,occludedOpacity:re=ha.occludedOpacity,altitude:ee=ha.altitude}=l||{};this._anchor=v,this._color=T,this._scale=O,this._draggable=M,this._clickTolerance=R,this._rotation=N,this._rotationAlignment=q,this._pitchAlignment=H,this._occludedOpacity=re,this._altitude=ee,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),l&&l.element?(this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=a.P.convert(l&&l.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",ce=>{ce.preventDefault()}),this._element.addEventListener("mousedown",ce=>{ce.preventDefault()});const oe=this._element.classList;for(const ce in mu)oe.remove(`mapboxgl-marker-anchor-${ce}`);oe.add(`mapboxgl-marker-anchor-${this._anchor}`);const he=l&&l.className?l.className.trim().split(/\s+/):[];oe.add(...he),this._popup=null}_createDefaultMarker(){const l=U("div"),d=k("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},l);if(this._altitude===0){const v=k("radialGradient",{id:"shadowGradient"},k("defs",{},d));k("stop",{offset:"10%","stop-opacity":.4},v),k("stop",{offset:"100%","stop-opacity":.05},v),k("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},d)}return k("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},d),k("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},d),k("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},d),l}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.aT.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(l){return l===this._altitude||(this._defaultMarker&&(this._altitude===0&&l!==0||this._altitude!==0&&l===0)&&(this._element=this._createDefaultMarker()),this._altitude=l||ha.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const T=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[T,-1*(38.1-13.5+T)],"bottom-right":[-T,-1*(38.1-13.5+T)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,l._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const d=l.code,v=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&v!==32&&v!==13||this.togglePopup()}_onMapClick(l){const d=l.originalEvent.target,v=this._element;this._popup&&(d===v||v.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,d=this._pos;if(!l||!d)return!1;const v=l.unproject(d,this._altitude),T=l.getFreeCameraOptions();if(!T.position)return!1;const O=T.position.toLngLat();return O.distanceTo(v)<.9*O.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const d=this._pos;if(!d||d.x<0||d.x>l.transform.width||d.y<0||d.y>l.transform.height)return void this._clearFadeTimer();const v=l.unproject(d,this._altitude);let T;l._showingGlobe()&&a.f5(l.transform,this._lngLat)?T=0:(T=1-l._queryFogOpacity(v),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(T*=this._occludedOpacity)),this._element.style.opacity=`${T}`,this._element.style.pointerEvents=T>0?"auto":"none",this._popup&&this._popup._setOpacity(T),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${mu[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const l=this._pos,d=this._map,v=this.getPitchAlignment();if(!d||!l||v!=="map")return"";if(!d._showingGlobe()){const N=d.getPitch();return N?`rotateX(${N}deg)`:""}const T=a.cX(a.f6(d.transform,this._lngLat)),O=l.sub(a.f7(d.transform)),M=Math.abs(O.x)+Math.abs(O.y);if(M===0)return"";const R=T/M;return`rotateX(${-O.y*R}deg) rotateY(${O.x*R}deg)`}_calculateZTransform(){const l=this._pos,d=this._map;if(!d||!l)return"";let v=0;const T=this.getRotationAlignment();if(T==="map")if(d._showingGlobe()){const O=d.project(new a.aT(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),M=d.project(new a.aT(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(O);v=a.cX(Math.atan2(M.y,M.x))-90}else v=-d.getBearing();else if(T==="horizon"){const O=a.ah(4,6,d.getZoom()),M=a.f7(d.transform);M.y+=O*d.transform.height;const R=l.sub(M),N=a.cX(Math.atan2(R.y,R.x));v=(N>90?N-270:N+90)*(1-O)}return v+=this._rotation,v?`rotateZ(${v}deg)`:""}_update(l){cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Wd(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat,this._altitude),l===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){return this._element.classList.add(l),this}removeClassName(l){return this._element.classList.remove(l),this}toggleClassName(l){return this._element.classList.toggle(l)}_onMove(l){const d=this._map;if(!d)return;const v=this._pointerdownPos,T=this._positionDelta;if(v&&T){if(!this._isDragging){const O=this._clickTolerance||d._clickTolerance;if(l.point.dist(v)<O)return;this._isDragging=!0}this._pos=l.point.sub(T),this._lngLat=d.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.z("dragstart"))),this.fire(new a.z("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new a.z("dragend")),this._state="inactive"}_addDragHandler(l){const d=this._map,v=this._pos;d&&v&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(v),this._pointerdownPos=l.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const d=this._map;return d&&(l?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||ha.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||ha.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||ha.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||ha.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Dl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1,showButton:!0,followUserLocation:!0},bm={maxWidth:100,unit:"metric"},Da={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},ll={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},Lf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Xd(y=new a.P(0,0),l="bottom"){if(typeof y=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(y,2)));switch(l){case"top":return new a.P(0,y);case"top-left":return new a.P(d,d);case"top-right":return new a.P(-d,d);case"bottom":return new a.P(0,-y);case"bottom-left":return new a.P(d,-d);case"bottom-right":return new a.P(-d,-d);case"left":return new a.P(y,0);case"right":return new a.P(-y,0)}return new a.P(0,0)}return y instanceof a.P||Array.isArray(y)?a.P.convert(y):a.P.convert(y[l]||[0,0])}return{version:p,supported:F.supported,setRTLTextPlugin:a.fb,getRTLTextPluginStatus:a.fa,Map:class extends X0{constructor(y){S.mark(_.create);const l=y;if((y=Object.assign({},vm,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(y.antialias&&a.f3(window)&&(y.antialias=!1,a.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Tg(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies,null,null),y),this._repaint=!!y.repaint,this._interactive=y.interactive,this._minTileCacheSize=y.minTileCacheSize,this._maxTileCacheSize=y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=y.crossSourceCollisions,this._collectResourceTiming=y.collectResourceTiming,this._language=this._parseLanguage(y.language),this._worldview=y.worldview,this._renderTaskQueue=new Z0,this._domRenderTaskQueue=new Z0,this._controls=[],this._markers=[],this._popups=[],this._mapId=a.b2(),this._locale=Object.assign({},K0,y.locale),this._clickTolerance=y.clickTolerance,this._cooperativeGestures=y.cooperativeGestures,this._performanceMetricsCollection=y.performanceMetricsCollection,this._tessellationStep=y.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=y.precompilePrograms,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Ii(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=y.scaleFactor,this._requestManager=new He(y.transformRequest,y.accessToken,y.testMode),this._silenceAuthErrors=!!y.testMode,this._contextCreateOptions=y.contextCreateOptions?Object.assign({},y.contextCreateOptions):{},typeof y.container=="string"){const d=document.getElementById(y.container);if(!d)throw new Error(`Container '${y.container.toString()}' not found.`);this._container=d}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(this._container.childNodes.length>0&&a.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),y.maxBounds&&this.setMaxBounds(y.maxBounds),this._spriteFormat=y.spriteFormat,a.aY(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new kf(this,y),this._localFontFamily=y.localFontFamily,this._localIdeographFontFamily=y.localIdeographFontFamily,(y.style||!y.testMode)&&this.setStyle(y.style||a.e.DEFAULT_STYLE,{config:y.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),y.projection&&this.setProjection(y.projection),y.hash&&(this._hash=new Ms(typeof y.hash=="string"&&y.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){l.center==null&&l.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch});const d=y.bounds;d&&(this.resize(),this.fitBounds(d,Object.assign({},y.fitBoundsOptions,{duration:0})))}this.resize(),y.attributionControl&&this.addControl(new _m({customAttribution:y.customAttribution})),this._logoControl=new nc,this.addControl(this._logoControl,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent(),this._postStyleWithAppearanceEvent()}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new a.z(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new a.z(`${d.dataType}dataloading`,d))}),this._interactions=new Q0(this)}_getMapId(){return this._mapId}addControl(y,l){if(l===void 0&&(l=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new a.y(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=y.onAdd(this);this._controls.push(y);const v=this._controlPositions[l];return l.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new a.y(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(y);return l>-1&&this._controls.splice(l,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(y){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new a.z("movestart",y)).fire(new a.z("move",y)),this.fire(new a.z("resize",y)),l&&this.fire(new a.z("moveend",y)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(y){return this.transform.setMaxBounds(a.aI.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y?this.setZoom(y):this.fire(new a.z("zoomstart")).fire(new a.z("zoom")).fire(new a.z("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y?this.setZoom(y):this.fire(new a.z("zoomstart")).fire(new a.z("zoom")).fire(new a.z("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y?this.setPitch(y):this.fire(new a.z("pitchstart")).fire(new a.z("pitch")).fire(new a.z("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y?this.setPitch(y):this.fire(new a.z("pitchstart")).fire(new a.z("pitch")).fire(new a.z("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(y){return this._scaleFactor=y,this.painter.scaleFactor=y,this.style&&this.style._setLabelPlacementStale(),this.style._updateFilteredLayers(l=>l.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(y){return y==="auto"?navigator.language:Array.isArray(y)?y.length===0?void 0:y.map(l=>l==="auto"?navigator.language:l):y}setLanguage(y){const l=this._parseLanguage(y);if(!this.style||l===this._language)return this;this._language=l,this.style.reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(y){return this.style&&y!==this._worldview?(this._worldview=y,this._styleDirty=!0,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(y){return this._lazyInitEmptyStyle(),y?typeof y=="string"&&(y={name:y}):y=null,this._useExplicitProjection=!!y,this._prioritizeAndUpdateProjection(y,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const y=this.transform,l=y.projection.name;let d;l==="globe"&&y.zoom>=a.cL?(y.setMercatorFromTransition(),d=!0):l==="mercator"&&y.zoom<a.cL&&(y.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate(),this._update(!0))}_prioritizeAndUpdateProjection(y,l){return this._updateProjection(y||l||{name:"mercator"})}_updateProjection(y){let l;const d=this.transform.mercatorFromTransition;l=y.name==="globe"&&this.transform.zoom>=a.cL?this.transform.setMercatorFromTransition():this.transform.setProjection(y),this.style.applyProjectionUpdate();const v=this.transform.getProjection().name==="mercator"&&d!==this.transform.mercatorFromTransition;return(l||v)&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(y,l){return this.transform.locationPoint3D(a.aT.convert(y),l)}unproject(y,l){return this.transform.pointLocation3D(a.P.convert(y),l)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(y,l,d){const v=T=>{let O=[];if(Array.isArray(l)){const M=l.filter(R=>this.getLayer(R));O=M.length?this.queryRenderedFeatures(T,{layers:M}):[]}else O=this.queryRenderedFeatures(T,{target:l});return O};if(y==="mouseenter"||y==="mouseover"){let T=!1;return{listener:d,targets:l,delegates:{mousemove:M=>{const R=v(M.point);R.length?T||(T=!0,d.call(this,new To(y,this,M.originalEvent,{features:R}))):T=!1},mouseout:()=>{T=!1}}}}if(y==="mouseleave"||y==="mouseout"){let T=!1;return{listener:d,targets:l,delegates:{mousemove:R=>{v(R.point).length?T=!0:T&&(T=!1,d.call(this,new To(y,this,R.originalEvent)))},mouseout:R=>{T&&(T=!1,d.call(this,new To(y,this,R.originalEvent)))}}}}{const T=O=>{const M=v(O.point);M.length&&(O.features=M,d.call(this,O),delete O.features)};return{listener:d,targets:l,delegates:{[y]:T}}}}on(y,l,d){if(typeof l=="function"||d===void 0)return super.on(y,l);if(typeof l=="string"&&(l=[l]),!this._areTargetsValid(l))return this;const v=this._createDelegatedListener(y,l,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(v);for(const T in v.delegates)this.on(T,v.delegates[T]);return this}once(y,l,d){if(typeof l=="function"||d===void 0)return super.once(y,l);if(typeof l=="string"&&(l=[l]),!this._areTargetsValid(l))return this;const v=this._createDelegatedListener(y,l,d);for(const T in v.delegates)this.once(T,v.delegates[T]);return this}off(y,l,d){if(typeof l=="function"||d===void 0)return super.off(y,l);if(typeof l=="string"&&(l=[l]),!this._areTargetsValid(l))return this;const v=this._delegatedListeners?this._delegatedListeners[y]:void 0;return v&&(T=>{for(let O=0;O<T.length;O++){const M=T[O];if(M.listener===d&&uv(M.targets,l)){for(const R in M.delegates)this.off(R,M.delegates[R]);return T.splice(O,1),this}}})(v),this}queryRenderedFeatures(y,l){if(!this.style)return[];if(y===void 0||y instanceof a.P||Array.isArray(y)||l!==void 0||(l=y,y=void 0),y=y||[[0,0],[this.transform.width,this.transform.height]],!l){const O=this.style.queryRenderedFeatures(y,void 0,this.transform),M=this.style.queryRenderedFeatureset(y,void 0,this.transform);return O.concat(M)}let d=!0;if(l.target&&(d=this._isTargetValid(l.target),d&&!l.layers))return this.style.queryRenderedFeatureset(y,l,this.transform);let v=!0;if(l.layers&&Array.isArray(l.layers)){for(const O of l.layers)if(!this._isValidId(O)){v=!1;break}if(v&&!l.target)return this.style.queryRenderedFeatures(y,l,this.transform)}let T=[];return v&&(T=T.concat(this.style.queryRenderedFeatures(y,l,this.transform))),d&&(T=T.concat(this.style.queryRenderedFeatureset(y,l,this.transform))),T}querySourceFeatures(y,l){return!y||typeof y=="string"&&!this._isValidId(y)?[]:this.style.querySourceFeatures(y,l)}queryRasterValue(y,l,d){return this._isValidId(y)?this.style.queryRasterValue(y,l,d):Promise.resolve(null)}isPointOnSurface(y){const{name:l}=this.transform.projection;return l!=="globe"&&l!=="mercator"&&a.w(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(a.P.convert(y))}addInteraction(y,l){return this._interactions.add(y,l),this}removeInteraction(y){return this._interactions.remove(y),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this}setStyle(y,l){return l=Object.assign({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l),this.style&&y&&l.diff!==!1&&l.localFontFamily===this._localFontFamily&&l.localIdeographFontFamily===this._localIdeographFontFamily&&!l.config?(this.style._diffStyle(y,(d,v)=>{if(d){const T=typeof d=="string"?d:d instanceof Error?d.message:d.error;a.w(`Unable to perform style diff: ${T}. Rebuilding the style from scratch.`),this._updateStyle(y,l)}else v&&this._update(!0)},()=>this._postStyleLoadEvent()),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(y,l))}_getUIString(y){const l=this._locale[y];if(l==null)throw new Error(`Missing UI string '${y}'`);return l}_updateStyle(y,l){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),y){const d=Object.assign({},l);l&&l.config&&(d.initialConfig=l.config,delete d.config),this.style=new Us(this,d).load(y),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Us(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(a.w("There is no style added to the map."),!1)}_isValidId(y){return y==null?(this.fire(new a.y(new Error("IDs can't be empty."))),!1):!a.dr(y)||(this.fire(new a.y(new Error(`IDs can't contain special symbols: "${y}".`))),!1)}_isTargetValid(y){return"featuresetId"in y?this._isValidId("importId"in y?y.importId:y.featuresetId):"layerId"in y&&this._isValidId(y.layerId)}_areTargetsValid(y){if(Array.isArray(y)){for(const l of y)if(!this._isValidId(l))return!1;return!0}return this._isTargetValid(y)}addSource(y,l){return this._isValidId(y)?(this._lazyInitEmptyStyle(),this.style.addSource(y,l),this._update(!0)):this}isSourceLoaded(y){return!!this._isValidId(y)&&!!this.style&&this.style._isSourceCacheLoaded(y)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(y,l,d){this._lazyInitEmptyStyle(),this.style.addSourceType(y,l,d)}removeSource(y){return this._isValidId(y)?(this.style.removeSource(y),this._updateTerrain(),this._update(!0)):this}getSource(y){return this._isValidId(y)?this.style.getOwnSource(y):null}addImage(y,l,{pixelRatio:d=1,sdf:v=!1,stretchX:T,stretchY:O,content:M}={}){this._lazyInitEmptyStyle();const R=a.I.from(y);if(l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap){const{width:N,height:q,data:H}=a.o.getImageData(l);this.style.addImage(R,{data:new a.q({width:N,height:q},H),pixelRatio:d,stretchX:T,stretchY:O,content:M,sdf:v,version:0,usvg:!1})}else if(l.width===void 0||l.height===void 0)this.fire(new a.y(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:N,height:q}=l,H=l;this.style.addImage(R,{data:new a.q({width:N,height:q},new Uint8Array(H.data)),pixelRatio:d,stretchX:T,stretchY:O,content:M,sdf:v,usvg:!1,version:0,userImage:H}),H.onAdd&&H.onAdd(this,y)}}updateImage(y,l){this._lazyInitEmptyStyle();const d=a.I.from(y),v=this.style.getImage(d);if(!v)return void this.fire(new a.y(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap?a.o.getImageData(l):l,{width:O,height:M,data:R}=T;if(O===void 0||M===void 0)return void this.fire(new a.y(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(O!==(v.usvg?v.icon.usvg_tree.width:v.data.width)||M!==(v.usvg?v.icon.usvg_tree.height:v.data.height))return void this.fire(new a.y(new Error(`The width and height of the updated image (${O}, ${M})
                must be that same as the previous version of the image
                (${v.data.width}, ${v.data.height})`)));const N=!(l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap);let q=!1;v.usvg?(v.data=new a.q({width:O,height:M},new Uint8Array(R)),v.usvg=!1,v.icon=void 0,q=!0):v.data.replace(R,N),this.style.updateImage(d,v,q)}hasImage(y){return y?!!this.style&&!!this.style.getImage(a.I.from(y)):(this.fire(new a.y(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(a.I.from(y))}loadImage(y,l){a.n(this._requestManager.transformRequest(y,a.R.Image),(d,v)=>{l(d,v instanceof HTMLImageElement?a.o.getImageData(v):v)})}listImages(){return this.style.listImages().map(y=>y.name)}addModel(y,l){this._lazyInitEmptyStyle(),this.style.addModel(y,l)}hasModel(y){return y?this.style.hasModel(y):(this.fire(new a.y(new Error("Missing required model id"))),!1)}removeModel(y){this.style.removeModel(y)}listModels(){return this.style.listModels()}addLayer(y,l){return this._isValidId(y.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(y,l),this._update(!0)):this}getSlot(y){const l=this.getLayer(y);return l&&l.slot||null}setSlot(y,l){return this.style.setSlot(y,l),this.style.mergeLayers(),this._update(!0)}addImport(y,l){return this.style.addImport(y,l).catch(d=>this.fire(new a.y(new Error("Failed to add import",d)))),this}updateImport(y,l){return typeof l!="string"&&l.id!==y?(this.removeImport(y),this.addImport(l)):(this.style.updateImport(y,l),this._update(!0))}removeImport(y){return this.style.removeImport(y),this}moveImport(y,l){return this.style.moveImport(y,l),this._update(!0)}moveLayer(y,l){return this._isValidId(y)?(this.style.moveLayer(y,l),this._update(!0)):this}removeLayer(y){return this._isValidId(y)?(this.style.removeLayer(y),this._update(!0)):this}getLayer(y){if(!this._isValidId(y))return null;const l=this.style.getOwnLayer(y);return l?l.type==="custom"?l.implementation:l.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(y,l,d){return this._isValidId(y)?(this.style.setLayerZoomRange(y,l,d),this._update(!0)):this}setFilter(y,l,d={}){return this._isValidId(y)?(this.style.setFilter(y,l,d),this._update(!0)):this}getFilter(y){return this._isValidId(y)?this.style.getFilter(y):null}setPaintProperty(y,l,d,v={}){return this._isValidId(y)?(this.style.setPaintProperty(y,l,d,v),this._update(!0)):this}getPaintProperty(y,l){return this._isValidId(y)?this.style.getPaintProperty(y,l):null}setLayoutProperty(y,l,d,v={}){return this._isValidId(y)?(this.style.setLayoutProperty(y,l,d,v),this._update(!0)):this}getLayoutProperty(y,l){return this._isValidId(y)?this.style.getLayoutProperty(y,l):null}setLayerProperty(y,l,d,v={}){return this._isValidId(y)?(l==="appearances"&&this._postAddingAppearancesToStyleEvent(),this.style.setLayerProperty(y,l,d,v),this._update(!0)):this}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(y){return this.style.setGlyphsUrl(y),this._update(!0)}getSchema(y){return this.style.getSchema(y)}setSchema(y,l){return this.style.setSchema(y,l),this._update(!0)}getConfig(y){return this.style.getConfig(y)}setConfig(y,l){return this.style.setConfig(y,l),this._update(!0)}getConfigProperty(y,l){return this.style.getConfigProperty(y,l)}setConfigProperty(y,l,d){return this.style.setConfigProperty(y,l,d),this._update(!0)}getFeaturesetDescriptors(y){return this.style.getFeaturesetDescriptors(y)}setLights(y){if(this._lazyInitEmptyStyle(),y&&y.length===1&&y[0].type==="flat"){const l=y[0];l.properties?this.style.setFlatLight(l.properties,l.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(y),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const y=this.style.getLights()||[];return y.length===0&&y.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),y}setLight(y,l={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:y}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(y){return this._lazyInitEmptyStyle(),!y&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(y),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(y){return this._lazyInitEmptyStyle(),this.style.setFog(y),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(y){return this._lazyInitEmptyStyle(),this.style.setSnow(y),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(y){return this._lazyInitEmptyStyle(),this.style.setRain(y),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(y){return this._lazyInitEmptyStyle(),this.style.setColorTheme(y),this._update(!0)}setImportColorTheme(y,l){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(y,l),this._update(!0)}setCamera(y){return this.style.setCamera(y),this._triggerCameraUpdate(y)}_triggerCameraUpdate(y){return this._update(this.transform.setOrthographicProjectionAtLowPitch(y["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(y){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(a.aT.convert(y),this.transform):0}setFeatureState(y,l){return y.source&&!this._isValidId(y.source)?this:(this.style.setFeatureState(y,l),this._update())}removeFeatureState(y,l){return y.source&&!this._isValidId(y.source)?this:(this.style.removeFeatureState(y,l),this._update())}getFeatureState(y){return y.source&&!this._isValidId(y.source)?null:this.style.getFeatureState(y)}_selectIndoorFloor(y){this.style.indoorManager.selectFloor(y)}_setIndoorActiveFloorsVisibility(y){this.style.indoorManager.setActiveFloorsVisibility(y)}getIndoorTileOptions(y,l){return this.style.isIndoorEnabled()?this.style.indoorManager.getIndoorTileOptions(y,l):null}_updateContainerDimensions(){if(!this._container)return;const y=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let d,v,T,O=this._container;for(;O&&(!v||!T);){const M=window.getComputedStyle(O).transform;M&&M!=="none"&&(d=M.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(v=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(T=d[3])),O=O.parentElement}this._containerWidth=v?Math.abs(y/v):y,this._containerHeight=T?Math.abs(l/T):l}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const y=this._container;y.classList.add("mapboxgl-map"),(this._missingCSSCanary=U("div","mapboxgl-canary",y)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=U("div","mapboxgl-canvas-container",y);this._canvas=U("canvas","mapboxgl-canvas",l),this._interactive&&(l.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=U("div","mapboxgl-control-container",y),v=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(T=>{v[T]=U("div",`mapboxgl-ctrl-${T}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,l){const d=a.o.devicePixelRatio||1;this._canvas.width=d*Math.ceil(y),this._canvas.height=d*Math.ceil(l),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${l}px`}_addMarker(y){this._markers.push(y)}_removeMarker(y){const l=this._markers.indexOf(y);l!==-1&&this._markers.splice(l,1)}_addPopup(y){this._popups.push(y)}_removePopup(y){const l=this._popups.indexOf(y);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const y=Object.assign({},F.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl2",y);l?(or(l,!0),this.painter=new nv(l,this._contextCreateOptions,this.transform,this._scaleFactor,this._worldview),this.on("data",d=>{if(d.dataType==="source"){const v=this.transform.elevation?this.transform.elevation._source():null;v&&d.sourceCacheId===v.id&&this.style&&this.style._setLabelPlacementStale(),this.painter.setTileLoadedFlag(!0)}}),a.k.testSupport(l)):this.fire(new a.y(new Error("Failed to initialize WebGL")))}_contextLost(y){y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.z("webglcontextlost",{originalEvent:y}))}_contextRestored(y){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style&&(this.style.clearLayers(),this.style.imageManager.destroyAtlasTextures(),this.style.reloadModels(),this.style.clearSources()),this._update(),this.fire(new a.z("webglcontextrestored",{originalEvent:y}))}_onMapScroll(y){if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(y){return this.style?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_requestDomTask(y){!this.loaded()||this.loaded()&&!this.isMoving()?y():this._domRenderTaskQueue.add(y)}_render(y){let l;this.fire(new a.z("renderstart")),++this._frameId;const d=this.painter.context.extTimerQuery,v=a.o.now(),T=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(l=T.createQuery(),T.beginQuery(d.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(y),this._domRenderTaskQueue.run(y),this._removed)return;this._updateProjectionTransition();const O=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const N=this.transform.zoom,q=this.transform.pitch,H=a.o.now(),re=new a.ac(N,{now:H,fadeDuration:O,pitch:q,transition:this.style.transition,worldview:this._worldview});this.style.update(re)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let M=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),M=this._updateAverageElevation(v),this.style.updateSources(this.transform),this.style.updateImageProviders(),this.isMoving()||this._forceMarkerAndPopupUpdate()):M=this._updateAverageElevation(v),this.style&&(this._placementDirty=this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,O,this._crossSourceCollisions,this.painter.replacementSource)),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:O,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new a.z("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,S.mark(_.load),this.fire(new a.z("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this.style.modelManager.isLoaded()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const N=a.o.now()-v;T.endQuery(d.TIME_ELAPSED_EXT),setTimeout(()=>{const q=T.getQueryParameter(l,T.QUERY_RESULT)/1e6;T.deleteQuery(l),this.fire(new a.z("gpu-timing-frame",{cpuTime:N,gpuTime:q}))},50)}if(this.listens("gpu-timing-layer")){const N=this.painter.collectGpuTimers();setTimeout(()=>{const q=this.painter.queryGpuTimers(N);this.fire(new a.z("gpu-timing-layer",{layerTimes:q}))},50)}if(this.listens("gpu-timing-deferred-render")){const N=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const q=this.painter.queryGpuTimeDeferredRender(N);this.fire(new a.z("gpu-timing-deferred-render",{gpuTime:q}))},50)}const R=this._sourcesDirty||this._styleDirty||this._placementDirty||M;if(R||this._repaint)this.triggerRepaint();else{const N=this.idle();if(N&&(M=this._updateAverageElevation(v,!0)),M)this.triggerRepaint();else if(this._triggerFrame(!1),N&&(this.fire(new a.z("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const q=this._calculateSpeedIndex();this.fire(new a.z("speedindexcompleted",{speedIndex:q})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||R||(this._fullyLoaded=!0,S.mark(_.fullLoad),this._performanceMetricsCollection&&Ct(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(y){for(const l of this._markers)y&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!y||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(y,l=!1){const d=T=>(this.transform.averageElevation=T,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);const v=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(v||(l||y-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(y)){const T=this.transform.averageElevation;let O=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(O)?O=0:this._averageElevationLastSampledAt=y;const M=Math.abs(T-O);if(M>1){if(this._isInitialLoad||v)return this._averageElevation.jumpTo(O),d(O);this._averageElevation.easeTo(O,y,300)}else if(M>1e-4)return this._averageElevation.jumpTo(O),d(O)}return!!this._averageElevation.isEasing(y)&&d(this._averageElevation.getValue(y))}_authenticate(){gn(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,y=>{if(y&&(y.message===De||y.status===401)){const l=this.painter.context.gl;or(l,!1),this._logoControl instanceof nc&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new a.y(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),sn(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&Sn(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_postStyleWithAppearanceEvent(){this.style.globalId&&this.style.hasAppearances()&&xe(this._requestManager._customAccessToken)}_postAddingAppearancesToStyleEvent(){ct(this._requestManager._customAccessToken)}_updateTerrain(){const y=this._isDragging();this.painter.updateTerrain(this.style,y)}_calculateSpeedIndex(){const y=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const d=this.painter.context.gl,v=d.createFramebuffer();function T(O){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,O,0);const M=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,M),M}return d.bindFramebuffer(d.FRAMEBUFFER,v),this._canvasPixelComparison(T(y),l.canvasCopies.map(T),l.timeStamps)}_canvasPixelComparison(y,l,d){let v=d[1]-d[0];const T=y.length/4;for(let O=0;O<l.length;O++){const M=l[O];let R=0;for(let N=0;N<M.length;N+=4)M[N]===y[N]&&M[N+1]===y[N+1]&&M[N+2]===y[N+2]&&M[N+3]===y[N+3]&&(R+=1);v+=(d[O+2]-d[O+1])*(1-R/T)}return v}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const y=this.painter.context.gl.getExtension("WEBGL_lose_context");y&&y.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),En.delete(this.painter.context.gl),Yt.remove(),jt.remove(),this._removed=!0,this.fire(new a.z("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(y){this._renderNextFrame=this._renderNextFrame||y,this.style&&!this._frame&&(this._frame=a.o.frame(l=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(l)}))}_preloadTiles(y){const l=this.style?this.style.getSourceCaches():[];return a.bw(l,(d,v)=>d._preloadTiles(y,v),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(y){this._trackResize&&this.resize({originalEvent:y})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(y){this._showParseStatus!==y&&(this._showParseStatus=y,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(y){this._showTerrainWireframe!==y&&(this._showTerrainWireframe=y,this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(y){this._showLayers2DWireframe!==y&&(this._showLayers2DWireframe=y,this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(y){this._showLayers3DWireframe!==y&&(this._showLayers3DWireframe=y,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(y){this._speedIndexTiming!==y&&(this._speedIndexTiming=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,this.style&&y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(y){this._showTileAABBs!==y&&(this._showTileAABBs=y,y&&this._update())}_setCacheLimits(y,l){a.f4(y,l)}get version(){return p}},NavigationControl:class{constructor(y={}){this.options=Object.assign({},Vc,y),this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(a.aY(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),U("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),U("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.aY(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:l}):d.resetNorth({},{originalEvent:l}))}),this._compassIcon=U("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const y=this._map;if(!y)return;const l=y.getZoom(),d=l===y.getMaxZoom(),v=l===y.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())}_rotateCompassArrow(){const y=this._map;if(!y)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(y.transform.pitch*(Math.PI/180)),.5)}) rotateX(${y.transform.pitch}deg) rotateZ(${y.transform.angle*(180/Math.PI)}deg)`:`rotate(${y.transform.angle*(180/Math.PI)}deg)`;y._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),y.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&y.on("pitch",this._rotateCompassArrow),y.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new uo(y,this._compass,this.options.visualizePitch)),this._container}onRemove(){const y=this._map;y&&(this._container.remove(),this.options.showZoom&&y.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&y.off("pitch",this._rotateCompassArrow),y.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(y,l){const d=U("button",y,this._container);return d.type="button",d.addEventListener("click",l),d}_setButtonTitle(y,l){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${l}`);y.setAttribute("aria-label",d),y.firstElementChild&&y.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends a.E{constructor(y={}){super();const l=navigator.geolocation;this.options=Object.assign({geolocation:l},Dl,y),a.aY(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=rv(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(y){return this._map=y,this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._clearRequestTimeout(),this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(y){const l=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,y(d)};this._supportsGeolocation!==void 0?y(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(d=>l(d.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(y){const l=this._map.getMaxBounds(),d=y.coords;return!!l&&(d.longitude<l.getWest()||d.longitude>l.getEast()||d.latitude<l.getSouth()||d.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(y){if(this._map){if(this._clearRequestTimeout(),this._isOutOfMapMaxBounds(y))return this._setErrorState(),this.fire(new a.z("outofmaxbounds",y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this.options.followUserLocation?(this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active")):(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"));break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(y),this.options.followUserLocation&&(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(y),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new a.z("geolocate",Object.assign({coords:y.coords,timestamp:y.timestamp},y.toJSON?{toJSON:y.toJSON.bind(y)}:{}))),this._finish()}}_updateCamera(y){const l=new a.aT(y.coords.longitude,y.coords.latitude),d=y.coords.accuracy,v=this._map.getBearing(),T=Object.assign({bearing:v},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(d),T,{geolocateSource:!0})}_updateMarker(y){if(y){const l=new a.aT(y.coords.longitude,y.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const y=this._map.transform,l=a.cf(1,y._center.lat)*y.worldSize,d=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(y){if(this._map){if(this._clearRequestTimeout(),this.options.trackUserLocation)if(y.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(y.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new a.z("error",{code:y.code,message:y.message,PERMISSION_DENIED:y.PERMISSION_DENIED,POSITION_UNAVAILABLE:y.POSITION_UNAVAILABLE,TIMEOUT:y.TIMEOUT})),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_startRequestTimeout(){this._clearRequestTimeout();const y=this.options.positionOptions.timeout;y&&(this._requestTimeoutId=window.setTimeout(()=>{this._onError({code:3,message:"Geolocation request timed out"})},y))}_clearRequestTimeout(){this._requestTimeoutId!==void 0&&(clearTimeout(this._requestTimeoutId),this._requestTimeoutId=void 0)}_setupUI(y){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=U("button","mapboxgl-ctrl-geolocate",this._container),U("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",y===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=U("div","mapboxgl-user-location"),this._dotElement.appendChild(U("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(U("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ua({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=U("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ua({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.showButton||(this._container.style.display="none"),this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new a.z("trackuserlocationend")))})}}_onDeviceOrientation(y){this._userLocationDotMarker&&(y.webkitCompassHeading?this._heading=y.webkitCompassHeading:y.absolute===!0&&(this._heading=-1*y.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.z("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.z("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.z("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(y={maximumAge:6e5,timeout:0},this._noTimeout=!0):(y=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,y),this._startRequestTimeout(),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._startRequestTimeout(),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}setFollowUserLocation(y){return this.options.followUserLocation=y??Dl.followUserLocation,this.options.trackUserLocation&&this._watchState!=="OFF"&&(this.options.followUserLocation?this._watchState!=="BACKGROUND"&&this._watchState!=="BACKGROUND_ERROR"||(this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.z("trackuserlocationstart"))):this._watchState!=="ACTIVE_LOCK"&&this._watchState!=="ACTIVE_ERROR"||(this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this.fire(new a.z("trackuserlocationend")))),this}_addDeviceOrientationListener(){const y=()=>{const l="ondeviceorientationabsolute"in window?"deviceorientationabsolute":"deviceorientation";window.addEventListener(l,this._onDeviceOrientation)};typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&y()}).catch(console.error):y()}_clearWatch(){this._clearRequestTimeout(),this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:_m,ScaleControl:class{constructor(y={}){this.options=Object.assign({},bm,y),a.aY(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const y=this.options.maxWidth||100,l=this._map,d=l._containerHeight/2,v=l._containerWidth/2-y/2,T=l.unproject([v,d]),O=l.unproject([v+y,d]),M=T.distanceTo(O);if(this.options.unit==="imperial"){const R=3.2808*M;R>5280?this._setScale(y,R/5280,"mile"):this._setScale(y,R,"foot")}else this.options.unit==="nautical"?this._setScale(y,M/1852,"nautical-mile"):M>=1e3?this._setScale(y,M/1e3,"kilometer"):this._setScale(y,M,"meter")}_setScale(y,l,d){this._map._requestDomTask(()=>{const v=(function(O){const M=Math.pow(10,`${Math.floor(O)}`.length-1);let R=O/M;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:(function(N){const q=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*q)/q})(R),M*R})(l),T=v/l;this._container.innerHTML=d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(v):`${v}&nbsp;${Da[d]}`,this._container.style.width=y*T+"px"})}onAdd(y){return this._map=y,this._language=y.getLanguage(),this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-scale",y.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(y){this._language=y,this._update()}setUnit(y){this.options.unit=y,this._update()}},FullscreenControl:class{constructor(y={}){this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:a.w("Full screen control 'container' must be a DOM element.")),a.aY(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=U("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const y=this._fullscreenButton=U("button","mapboxgl-ctrl-fullscreen",this._controlContainer);U("span","mapboxgl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",y)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},IndoorControl:I_,Popup:class extends a.E{constructor(y){super(),this.options=Object.assign(Object.create(ll),y),this._altitude=this.options.altitude,a.aY(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(y&&y.className?y.className.trim().split(/\s+/):[])}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&y.on("preclick",this._onClose),this.options.closeOnMove&&y.on("move",this._onClose),y.on("remove",this.remove),this._update(),y._addPopup(this),this._focusFirstElement(),this._trackPointer?(y.on("mousemove",this._onMouseEvent),y.on("mouseup",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")):y.on("move",this._update),this.fire(new a.z("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const y=this._map;return y&&(y.off("move",this._update),y.off("move",this._onClose),y.off("preclick",this._onClose),y.off("click",this._onClose),y.off("remove",this.remove),y.off("mousemove",this._onMouseEvent),y.off("mouseup",this._onMouseEvent),y.off("drag",this._onMouseEvent),y._canvasContainer&&y._canvasContainer.classList.remove("mapboxgl-track-pointer"),y._removePopup(this),this._map=void 0),this.fire(new a.z("close")),this}getLngLat(){return this._lngLat}setLngLat(y){this._lngLat=a.aT.convert(y),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(y){return this._altitude=y,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const y=this._map;return y&&(y.off("move",this._update),y.on("mousemove",this._onMouseEvent),y.on("drag",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const l=document.createDocumentFragment(),d=document.createElement("body");let v;for(d.innerHTML=y;v=d.firstChild,v;)l.appendChild(v);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=U("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(y),this.options.closeButton){const d=this._closeButton=U("button","mapboxgl-popup-close-button",l);d.type="button",d.setAttribute("aria-label","Close popup"),d.innerHTML='<span aria-hidden="true">&#215;</span>',d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(y){return this._classList.add(y),this._updateClassList(),this}removeClassName(y){return this._classList.delete(y),this._updateClassList(),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){let l;return this._classList.delete(y)?l=!1:(this._classList.add(y),l=!0),this._updateClassList(),l}_onMouseEvent(y){this._update(y.point)}_getAnchor(y){if(this.options.anchor)return this.options.anchor;const l=this._map,d=this._container,v=this._pos;if(!l||!d||!v)return"bottom";const T=d.offsetWidth,O=d.offsetHeight,M=v.x<T/2,R=v.x>l.transform.width-T/2;if(v.y+y<O)return M?"top-left":R?"top-right":"top";if(v.y>l.transform.height-O){if(M)return"bottom-left";if(R)return"bottom-right"}return M?"left":R?"right":"bottom"}_updateClassList(){const y=this._container;if(!y)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),y.className=l.join(" ")}_update(y){const l=this._map,d=this._content;if(!l||!this._lngLat&&!this._trackPointer||!d)return;let v=this._container;if(v||(v=this._container=U("div","mapboxgl-popup",l.getContainer()),this._tip=U("div","mapboxgl-popup-tip",v),v.appendChild(d)),this.options.maxWidth&&v.style.maxWidth!==this.options.maxWidth&&(v.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Wd(this._lngLat,this._pos,l.transform)),!this._trackPointer||y){const T=this._pos=this._trackPointer&&y instanceof a.P?y:l.project(this._lngLat,this._altitude),O=Xd(this.options.offset),M=this._anchor=this._getAnchor(O.y),R=Xd(this.options.offset,M),N=T.add(R).round();l._requestDomTask(()=>{this._container&&M&&(this._container.style.transform=`${mu[M]} translate(${N.x}px,${N.y}px)`)})}if(!this._marker&&l._showingGlobe()){const T=a.f5(l.transform,this._lngLat)?0:1;this._setOpacity(T)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Lf);y&&y.focus()}_onClose(){this.remove()}_setOpacity(y){this._container&&(this._container.style.opacity=`${y}`),this._content&&(this._content.style.pointerEvents=y?"auto":"none")}},Marker:Ua,Style:Us,LngLat:a.aT,LngLatBounds:a.aI,Point:a.P,MercatorCoordinate:a.ae,FreeCameraOptions:Qx,Evented:a.E,config:a.e,prewarm:a.f9,clearPrewarmedResources:a.f8,get accessToken(){return a.e.ACCESS_TOKEN},set accessToken(y){a.e.ACCESS_TOKEN=y},get baseApiUrl(){return a.e.API_URL},set baseApiUrl(y){a.e.API_URL=y},get workerCount(){return a.fi.workerCount},set workerCount(y){a.fi.workerCount=y},get maxParallelImageRequests(){return a.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(y){a.e.MAX_PARALLEL_IMAGE_REQUESTS=y},clearStorage(y){a.fh(y)},get workerUrl(){return a.fg.workerUrl},set workerUrl(y){a.fg.workerUrl=y},get workerClass(){return a.fg.workerClass},set workerClass(y){a.fg.workerClass=y},get workerParams(){return a.fg.workerParams},set workerParams(y){a.fg.workerParams=y},get dracoUrl(){return a.ff()},set dracoUrl(y){a.fe(y)},get meshoptUrl(){return a.fd()},set meshoptUrl(y){a.fc(y)},setNow:a.o.setNow,restoreNow:a.o.restoreNow}});var f=i;return f}))})(mD)),mD.exports}var mVe=pVe();const Pb=ga(mVe);var Oz,RZ;function oT(){if(RZ)return Oz;RZ=1,Oz=t;var e=Object.prototype.hasOwnProperty;function t(){for(var n={},r=0;r<arguments.length;r++){var i=arguments[r];for(var s in i)e.call(i,s)&&(n[s]=i[s])}return n}return Oz}var Cz={exports:{}},kZ;function gVe(){return kZ||(kZ=1,(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(r,i){return i.filter(function(s){return n.test(r,s)})},n.test=function(r,i){return n.match(r,i)!==null},n.match=function(r,i,s){s=s||{};var f=0,a=[],p=i.length,_=0,S=0,E=s.pre||"",I=s.post||"",z=s.caseSensitive&&i||i.toLowerCase(),F;r=s.caseSensitive&&r||r.toLowerCase();for(var U=0;U<p;U++)F=i[U],z[U]===r[f]?(F=E+F+I,f+=1,S+=1+S):S=0,_+=S,a[a.length]=F;return f===r.length?(_=z===r?1/0:_,{rendered:a.join(""),score:_}):null},n.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(f,a,p,_){var S=a;s.extract&&(S=s.extract(a));var E=n.match(r,S,s);return E!=null&&(f[f.length]={string:E.rendered,score:E.score,index:p,original:a}),f},[]).sort(function(f,a){var p=a.score-f.score;return p||f.index-a.index}))}})()})(Cz)),Cz.exports}var Mz,LZ;function yVe(){if(LZ)return Mz;LZ=1;var e=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};return e.prototype.show=function(){this.element.style.display="block"},e.prototype.hide=function(){this.element.style.display="none"},e.prototype.add=function(t){this.items.push(t)},e.prototype.clear=function(){this.items=[],this.active=0},e.prototype.isEmpty=function(){return!this.items.length},e.prototype.isVisible=function(){return this.element.style.display==="block"},e.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()},e.prototype.drawItem=function(t,n){var r=document.createElement("li"),i=document.createElement("a");n&&(r.className+=" active"),i.innerHTML=t.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,t)}).bind(this))},e.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},e.prototype.move=function(t){this.active=t,this.draw()},e.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)},e.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},e.prototype.drawError=function(t){var n=document.createElement("li");n.innerHTML=t,this.element.appendChild(n),this.show()},Mz=e,Mz}var Dz,zZ;function _Ve(){if(zZ)return Dz;zZ=1;var e=oT(),t=gVe(),n=yVe(),r=function(i,s,f){return f=f||{},this.options=e({minLength:2,limit:5,filter:!0,hideOnBlur:!0},f),this.el=i,this.data=s||[],this.list=new n(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(a){this.handleKeyUp(a.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(a){this.handleKeyDown(a)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(a){this.handlePaste(a)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i){i===40||i===38||i===27||i===13||i===9||this.handleInputChange(this.el.value)},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var s=this;setTimeout(function(){s.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(s){for(var f=0;f<s.length&&(this.list.add(s[f]),f!==this.options.limit-1);f++);this.list.draw()}).bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i=i.toLowerCase(),i},r.prototype.match=function(i,s){return i.indexOf(s)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i),document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!1),this.el.dispatchEvent(s)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var s={pre:"<strong>",post:"</strong>",extract:(function(a){return this.getItemValue(a)}).bind(this)},f;this.options.filter?(f=t.filter(this.query,this.data,s),f=f.map((function(a){return{original:a.original,string:this.render(a.original,a.string)}}).bind(this))):f=this.data.map((function(a){var p=this.render(a);return{original:a,string:p}}).bind(this)),i(f)},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,s){if(s)return s;for(var f=i.original?this.getItemValue(i.original):this.getItemValue(i),a=this.normalize(f),p=a.lastIndexOf(this.query);p>-1;){var _=p+this.query.length;f=f.slice(0,p)+"<strong>"+f.slice(p,_)+"</strong>"+f.slice(_),p=a.slice(0,p).lastIndexOf(this.query)}return f},r.prototype.renderError=function(i){this.list.drawError(i)},Dz=r,Dz}var Iz,FZ;function vVe(){if(FZ)return Iz;FZ=1;var e=_Ve();return Iz=e,typeof window<"u"&&(window.Suggestions=e),Iz}var Pz,NZ;function bVe(){if(NZ)return Pz;NZ=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,f=/^0o[0-7]+$/i,a=parseInt,p=typeof Au=="object"&&Au&&Au.Object===Object&&Au,_=typeof self=="object"&&self&&self.Object===Object&&self,S=p||_||Function("return this")(),E=Object.prototype,I=E.toString,z=Math.max,F=Math.min,U=function(){return S.Date.now()};function k(Q,W,te){var X,ae,le,ge,ye,De,He=0,Be=!1,Ee=!1,Ne=!0;if(typeof Q!="function")throw new TypeError(e);W=ie(W)||0,V(te)&&(Be=!!te.leading,Ee="maxWait"in te,le=Ee?z(ie(te.maxWait)||0,W):le,Ne="trailing"in te?!!te.trailing:Ne);function at(Sn){var Ut=X,xe=ae;return X=ae=void 0,He=Sn,ge=Q.apply(xe,Ut),ge}function yt(Sn){return He=Sn,ye=setTimeout(it,W),Be?at(Sn):ge}function je(Sn){var Ut=Sn-De,xe=Sn-He,Ye=W-Ut;return Ee?F(Ye,le-xe):Ye}function Ke(Sn){var Ut=Sn-De,xe=Sn-He;return De===void 0||Ut>=W||Ut<0||Ee&&xe>=le}function it(){var Sn=U();if(Ke(Sn))return Pe(Sn);ye=setTimeout(it,je(Sn))}function Pe(Sn){return ye=void 0,Ne&&X?at(Sn):(X=ae=void 0,ge)}function jt(){ye!==void 0&&clearTimeout(ye),He=0,X=De=ae=ye=void 0}function sn(){return ye===void 0?ge:Pe(U())}function dn(){var Sn=U(),Ut=Ke(Sn);if(X=arguments,ae=this,De=Sn,Ut){if(ye===void 0)return yt(De);if(Ee)return ye=setTimeout(it,W),at(De)}return ye===void 0&&(ye=setTimeout(it,W)),ge}return dn.cancel=jt,dn.flush=sn,dn}function V(Q){var W=typeof Q;return!!Q&&(W=="object"||W=="function")}function K(Q){return!!Q&&typeof Q=="object"}function J(Q){return typeof Q=="symbol"||K(Q)&&I.call(Q)==n}function ie(Q){if(typeof Q=="number")return Q;if(J(Q))return t;if(V(Q)){var W=typeof Q.valueOf=="function"?Q.valueOf():Q;Q=V(W)?W+"":W}if(typeof Q!="string")return Q===0?Q:+Q;Q=Q.replace(r,"");var te=s.test(Q);return te||f.test(Q)?a(Q.slice(2),te?2:8):i.test(Q)?t:+Q}return Pz=k,Pz}var AM={exports:{}},BZ;function xVe(){if(BZ)return AM.exports;BZ=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(Q,W,te){return Function.prototype.apply.call(Q,W,te)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(Q){return Object.getOwnPropertyNames(Q).concat(Object.getOwnPropertySymbols(Q))}:n=function(Q){return Object.getOwnPropertyNames(Q)};function r(ie){console&&console.warn&&console.warn(ie)}var i=Number.isNaN||function(Q){return Q!==Q};function s(){s.init.call(this)}AM.exports=s,AM.exports.once=V,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var f=10;function a(ie){if(typeof ie!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ie)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(ie){if(typeof ie!="number"||ie<0||i(ie))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ie+".");f=ie}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(Q){if(typeof Q!="number"||Q<0||i(Q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Q+".");return this._maxListeners=Q,this};function p(ie){return ie._maxListeners===void 0?s.defaultMaxListeners:ie._maxListeners}s.prototype.getMaxListeners=function(){return p(this)},s.prototype.emit=function(Q){for(var W=[],te=1;te<arguments.length;te++)W.push(arguments[te]);var X=Q==="error",ae=this._events;if(ae!==void 0)X=X&&ae.error===void 0;else if(!X)return!1;if(X){var le;if(W.length>0&&(le=W[0]),le instanceof Error)throw le;var ge=new Error("Unhandled error."+(le?" ("+le.message+")":""));throw ge.context=le,ge}var ye=ae[Q];if(ye===void 0)return!1;if(typeof ye=="function")t(ye,this,W);else for(var De=ye.length,He=F(ye,De),te=0;te<De;++te)t(He[te],this,W);return!0};function _(ie,Q,W,te){var X,ae,le;if(a(W),ae=ie._events,ae===void 0?(ae=ie._events=Object.create(null),ie._eventsCount=0):(ae.newListener!==void 0&&(ie.emit("newListener",Q,W.listener?W.listener:W),ae=ie._events),le=ae[Q]),le===void 0)le=ae[Q]=W,++ie._eventsCount;else if(typeof le=="function"?le=ae[Q]=te?[W,le]:[le,W]:te?le.unshift(W):le.push(W),X=p(ie),X>0&&le.length>X&&!le.warned){le.warned=!0;var ge=new Error("Possible EventEmitter memory leak detected. "+le.length+" "+String(Q)+" listeners added. Use emitter.setMaxListeners() to increase limit");ge.name="MaxListenersExceededWarning",ge.emitter=ie,ge.type=Q,ge.count=le.length,r(ge)}return ie}s.prototype.addListener=function(Q,W){return _(this,Q,W,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(Q,W){return _(this,Q,W,!0)};function S(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(ie,Q,W){var te={fired:!1,wrapFn:void 0,target:ie,type:Q,listener:W},X=S.bind(te);return X.listener=W,te.wrapFn=X,X}s.prototype.once=function(Q,W){return a(W),this.on(Q,E(this,Q,W)),this},s.prototype.prependOnceListener=function(Q,W){return a(W),this.prependListener(Q,E(this,Q,W)),this},s.prototype.removeListener=function(Q,W){var te,X,ae,le,ge;if(a(W),X=this._events,X===void 0)return this;if(te=X[Q],te===void 0)return this;if(te===W||te.listener===W)--this._eventsCount===0?this._events=Object.create(null):(delete X[Q],X.removeListener&&this.emit("removeListener",Q,te.listener||W));else if(typeof te!="function"){for(ae=-1,le=te.length-1;le>=0;le--)if(te[le]===W||te[le].listener===W){ge=te[le].listener,ae=le;break}if(ae<0)return this;ae===0?te.shift():U(te,ae),te.length===1&&(X[Q]=te[0]),X.removeListener!==void 0&&this.emit("removeListener",Q,ge||W)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(Q){var W,te,X;if(te=this._events,te===void 0)return this;if(te.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):te[Q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete te[Q]),this;if(arguments.length===0){var ae=Object.keys(te),le;for(X=0;X<ae.length;++X)le=ae[X],le!=="removeListener"&&this.removeAllListeners(le);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(W=te[Q],typeof W=="function")this.removeListener(Q,W);else if(W!==void 0)for(X=W.length-1;X>=0;X--)this.removeListener(Q,W[X]);return this};function I(ie,Q,W){var te=ie._events;if(te===void 0)return[];var X=te[Q];return X===void 0?[]:typeof X=="function"?W?[X.listener||X]:[X]:W?k(X):F(X,X.length)}s.prototype.listeners=function(Q){return I(this,Q,!0)},s.prototype.rawListeners=function(Q){return I(this,Q,!1)},s.listenerCount=function(ie,Q){return typeof ie.listenerCount=="function"?ie.listenerCount(Q):z.call(ie,Q)},s.prototype.listenerCount=z;function z(ie){var Q=this._events;if(Q!==void 0){var W=Q[ie];if(typeof W=="function")return 1;if(W!==void 0)return W.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function F(ie,Q){for(var W=new Array(Q),te=0;te<Q;++te)W[te]=ie[te];return W}function U(ie,Q){for(;Q+1<ie.length;Q++)ie[Q]=ie[Q+1];ie.pop()}function k(ie){for(var Q=new Array(ie.length),W=0;W<Q.length;++W)Q[W]=ie[W].listener||ie[W];return Q}function V(ie,Q){return new Promise(function(W,te){function X(le){ie.removeListener(Q,ae),te(le)}function ae(){typeof ie.removeListener=="function"&&ie.removeListener("error",X),W([].slice.call(arguments))}J(ie,Q,ae,{once:!0}),Q!=="error"&&K(ie,X,{once:!0})})}function K(ie,Q,W){typeof ie.on=="function"&&J(ie,"error",Q,W)}function J(ie,Q,W,te){if(typeof ie.on=="function")te.once?ie.once(Q,W):ie.on(Q,W);else if(typeof ie.addEventListener=="function")ie.addEventListener(Q,function X(ae){te.once&&ie.removeEventListener(Q,X),W(ae)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ie)}return AM.exports}var Rz,jZ;function wVe(){return jZ||(jZ=1,Rz={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}),Rz}var kz,UZ;function SVe(){if(UZ)return kz;UZ=1;function e(r){var i=r.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return i?{key:i[1],value:i[2]}:null}function t(r){var i=r.match(/<?([^>]*)>(.*)/);if(!i)return null;var s=i[1],f=i[2].split(";"),a=null,p=f.reduce(function(_,S){var E=e(S);return E?E.key==="rel"?(a||(a=E.value),_):(_[E.key]=E.value,_):_},{});return a?{url:s,rel:a,params:p}:null}function n(r){return r?r.split(/,\s*</).reduce(function(i,s){var f=t(s);if(!f)return i;var a=f.rel.split(/\s+/);return a.forEach(function(p){i[p]||(i[p]={url:f.url,params:f.params})}),i},{}):{}}return kz=n,kz}var Lz,$Z;function TVe(){if($Z)return Lz;$Z=1;var e=SVe();function t(n,r){this.request=n,this.headers=r.headers,this.rawBody=r.body,this.statusCode=r.statusCode;try{this.body=JSON.parse(r.body||"{}")}catch{this.body=r.body}this.links=e(this.headers.link)}return t.prototype.hasNextPage=function(){return!!this.links.next},t.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},Lz=t,Lz}var zz,VZ;function UR(){return VZ||(VZ=1,zz={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}),zz}var Fz,qZ;function EVe(){if(qZ)return Fz;qZ=1;var e=UR();function t(n){var r=n.type||e.ERROR_HTTP,i;if(n.body)try{i=JSON.parse(n.body)}catch{i=n.body}else i=null;var s=n.message||null;s||(typeof i=="string"?s=i:i&&typeof i.message=="string"?s=i.message:r===e.ERROR_REQUEST_ABORTED&&(s="Request aborted")),this.message=s,this.type=r,this.statusCode=n.statusCode||null,this.request=n.request,this.body=i}return Fz=t,Fz}var Nz,HZ;function AVe(){if(HZ)return Nz;HZ=1;function e(n){var r=n.indexOf(":"),i=n.substring(0,r).trim().toLowerCase(),s=n.substring(r+1).trim();return{name:i,value:s}}function t(n){var r={};return n&&n.trim().split(/[\r|\n]+/).forEach(function(i){var s=e(i);r[s.name]=s.value}),r}return Nz=t,Nz}var Bz,GZ;function OVe(){if(GZ)return Bz;GZ=1;var e=TVe(),t=EVe(),n=UR(),r=AVe(),i={};function s(E){var I=i[E.id];I&&(I.abort(),delete i[E.id])}function f(E,I){return new e(E,{body:I.response,headers:r(I.getAllResponseHeaders()),statusCode:I.status})}function a(E){var I=E.total,z=E.loaded,F=100*z/I;return{total:I,transferred:z,percent:F}}function p(E,I){return new Promise(function(z,F){I.onprogress=function(V){E.emitter.emit(n.EVENT_PROGRESS_DOWNLOAD,a(V))};var U=E.file;U&&(I.upload.onprogress=function(V){E.emitter.emit(n.EVENT_PROGRESS_UPLOAD,a(V))}),I.onerror=function(V){F(V)},I.onabort=function(){var V=new t({request:E,type:n.ERROR_REQUEST_ABORTED});F(V)},I.onload=function(){if(delete i[E.id],I.status<200||I.status>=400){var V=new t({request:E,body:I.response,statusCode:I.status});F(V);return}z(I)};var k=E.body;typeof k=="string"?I.send(k):k?I.send(JSON.stringify(k)):U?I.send(U):I.send(),i[E.id]=I}).then(function(z){return f(E,z)})}function _(E,I){var z=E.url(I),F=new window.XMLHttpRequest;return F.open(E.method,z),Object.keys(E.headers).forEach(function(U){F.setRequestHeader(U,E.headers[U])}),F}function S(E){return Promise.resolve().then(function(){var I=_(E,E.client.accessToken);return p(E,I)})}return Bz={browserAbort:s,sendRequestXhr:p,browserSend:S,createRequestXhr:_},Bz}var r2={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */var CVe=r2.exports,YZ;function MVe(){return YZ||(YZ=1,(function(e,t){(function(n){var r=t,i=e&&e.exports==r&&e,s=typeof Au=="object"&&Au;(s.global===s||s.window===s)&&(n=s);var f=function(F){this.message=F};f.prototype=new Error,f.prototype.name="InvalidCharacterError";var a=function(F){throw new f(F)},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=/[\t\n\f\r ]/g,S=function(F){F=String(F).replace(_,"");var U=F.length;U%4==0&&(F=F.replace(/==?$/,""),U=F.length),(U%4==1||/[^+a-zA-Z0-9/]/.test(F))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var k=0,V,K,J="",ie=-1;++ie<U;)K=p.indexOf(F.charAt(ie)),V=k%4?V*64+K:K,k++%4&&(J+=String.fromCharCode(255&V>>(-2*k&6)));return J},E=function(F){F=String(F),/[^\0-\xFF]/.test(F)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var U=F.length%3,k="",V=-1,K,J,ie,Q,W=F.length-U;++V<W;)K=F.charCodeAt(V)<<16,J=F.charCodeAt(++V)<<8,ie=F.charCodeAt(++V),Q=K+J+ie,k+=p.charAt(Q>>18&63)+p.charAt(Q>>12&63)+p.charAt(Q>>6&63)+p.charAt(Q&63);return U==2?(K=F.charCodeAt(V)<<8,J=F.charCodeAt(++V),Q=K+J,k+=p.charAt(Q>>10)+p.charAt(Q>>4&63)+p.charAt(Q<<2&63)+"="):U==1&&(Q=F.charCodeAt(V),k+=p.charAt(Q>>2)+p.charAt(Q<<4&63)+"=="),k},I={encode:E,decode:S,version:"0.1.0"};if(r&&!r.nodeType)if(i)i.exports=I;else for(var z in I)I.hasOwnProperty(z)&&(r[z]=I[z]);else n.base64=I})(CVe)})(r2,r2.exports)),r2.exports}var jz,WZ;function Whe(){if(WZ)return jz;WZ=1;var e=MVe(),t={};function n(s){if(t[s])return t[s];var f=s.split("."),a=f[0],p=f[1];if(!p)throw new Error("Invalid token");var _=r(p),S={usage:a,user:_.u};return i(_,"a")&&(S.authorization=_.a),i(_,"exp")&&(S.expires=_.exp*1e3),i(_,"iat")&&(S.created=_.iat*1e3),i(_,"scopes")&&(S.scopes=_.scopes),i(_,"client")&&(S.client=_.client),i(_,"ll")&&(S.lastLogin=_.ll),i(_,"iu")&&(S.impersonator=_.iu),t[s]=S,S}function r(s){try{return JSON.parse(e.decode(s))}catch{throw new Error("Invalid token")}}function i(s,f){return Object.prototype.hasOwnProperty.call(s,f)}return jz=n,jz}var Uz={exports:{}},XZ;function DVe(){return XZ||(XZ=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(p,_,S){this.fn=p,this.context=_,this.once=S||!1}function s(p,_,S,E,I){if(typeof S!="function")throw new TypeError("The listener must be a function");var z=new i(S,E||p,I),F=n?n+_:_;return p._events[F]?p._events[F].fn?p._events[F]=[p._events[F],z]:p._events[F].push(z):(p._events[F]=z,p._eventsCount++),p}function f(p,_){--p._eventsCount===0?p._events=new r:delete p._events[_]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var _=[],S,E;if(this._eventsCount===0)return _;for(E in S=this._events)t.call(S,E)&&_.push(n?E.slice(1):E);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(S)):_},a.prototype.listeners=function(_){var S=n?n+_:_,E=this._events[S];if(!E)return[];if(E.fn)return[E.fn];for(var I=0,z=E.length,F=new Array(z);I<z;I++)F[I]=E[I].fn;return F},a.prototype.listenerCount=function(_){var S=n?n+_:_,E=this._events[S];return E?E.fn?1:E.length:0},a.prototype.emit=function(_,S,E,I,z,F){var U=n?n+_:_;if(!this._events[U])return!1;var k=this._events[U],V=arguments.length,K,J;if(k.fn){switch(k.once&&this.removeListener(_,k.fn,void 0,!0),V){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,S),!0;case 3:return k.fn.call(k.context,S,E),!0;case 4:return k.fn.call(k.context,S,E,I),!0;case 5:return k.fn.call(k.context,S,E,I,z),!0;case 6:return k.fn.call(k.context,S,E,I,z,F),!0}for(J=1,K=new Array(V-1);J<V;J++)K[J-1]=arguments[J];k.fn.apply(k.context,K)}else{var ie=k.length,Q;for(J=0;J<ie;J++)switch(k[J].once&&this.removeListener(_,k[J].fn,void 0,!0),V){case 1:k[J].fn.call(k[J].context);break;case 2:k[J].fn.call(k[J].context,S);break;case 3:k[J].fn.call(k[J].context,S,E);break;case 4:k[J].fn.call(k[J].context,S,E,I);break;default:if(!K)for(Q=1,K=new Array(V-1);Q<V;Q++)K[Q-1]=arguments[Q];k[J].fn.apply(k[J].context,K)}}return!0},a.prototype.on=function(_,S,E){return s(this,_,S,E,!1)},a.prototype.once=function(_,S,E){return s(this,_,S,E,!0)},a.prototype.removeListener=function(_,S,E,I){var z=n?n+_:_;if(!this._events[z])return this;if(!S)return f(this,z),this;var F=this._events[z];if(F.fn)F.fn===S&&(!I||F.once)&&(!E||F.context===E)&&f(this,z);else{for(var U=0,k=[],V=F.length;U<V;U++)(F[U].fn!==S||I&&!F[U].once||E&&F[U].context!==E)&&k.push(F[U]);k.length?this._events[z]=k.length===1?k[0]:k:f(this,z)}return this},a.prototype.removeAllListeners=function(_){var S;return _?(S=n?n+_:_,this._events[S]&&f(this,S)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(Uz)),Uz.exports}var $z,ZZ;function IVe(){if(ZZ)return $z;ZZ=1;function e(f){return f.map(encodeURIComponent).join(",")}function t(f){return Array.isArray(f)?e(f):encodeURIComponent(String(f))}function n(f,a,p){if(p===!1||p===null)return f;var _=/\?/.test(f)?"&":"?",S=encodeURIComponent(a);return p!==void 0&&p!==""&&p!==!0&&(S+="="+t(p)),""+f+_+S}function r(f,a){if(!a)return f;var p=f;return Object.keys(a).forEach(function(_){var S=a[_];S!==void 0&&(Array.isArray(S)&&(S=S.filter(function(E){return E!=null}).join(",")),p=n(p,_,S))}),p}function i(f,a){if(!a||f.slice(0,4)==="http")return f;var p=f[0]==="/"?"":"/";return""+a.replace(/\/$/,"")+p+f}function s(f,a){return a?f.replace(/\/:([a-zA-Z0-9]+)/g,function(p,_){var S=a[_];if(S===void 0)throw new Error("Unspecified route parameter "+_);var E=t(S);return"/"+E}):f}return $z={appendQueryObject:r,appendQueryParam:n,prependOrigin:i,interpolateRouteParams:s},$z}var Vz,KZ;function PVe(){if(KZ)return Vz;KZ=1;var e=Whe(),t=oT(),n=DVe(),r=IVe(),i=UR(),s=1;function f(a,p){if(!a)throw new Error("MapiRequest requires a client");if(!p||!p.path||!p.method)throw new Error("MapiRequest requires an options object with path and method properties");var _={};p.body&&(_["content-type"]="application/json");var S=t(_,p.headers),E=Object.keys(S).reduce(function(I,z){return I[z.toLowerCase()]=S[z],I},{});this.id=s++,this._options=p,this.emitter=new n,this.client=a,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=p.path,this.method=p.method,this.origin=p.origin||a.origin,this.query=p.query||{},this.params=p.params||{},this.body=p.body||null,this.file=p.file||null,this.encoding=p.encoding||"utf8",this.sendFileAs=p.sendFileAs||null,this.headers=E}return f.prototype.url=function(p){var _=r.prependOrigin(this.path,this.origin);_=r.appendQueryObject(_,this.query);var S=this.params,E=p??this.client.accessToken;if(E){_=r.appendQueryParam(_,"access_token",E);var I=e(E).user;S=t({ownerId:I},S)}return _=r.interpolateRouteParams(_,S),_},f.prototype.send=function(){var p=this;if(p.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return p.sent=!0,p.client.sendRequest(p).then(function(_){return p.response=_,p.emitter.emit(i.EVENT_RESPONSE,_),_},function(_){throw p.error=_,p.emitter.emit(i.EVENT_ERROR,_),_})},f.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))},f.prototype.eachPage=function(p){var _=this;function S(z){function F(){delete _._nextPageRequest;var U=z.nextPage();U&&(_._nextPageRequest=U,I(U))}p(null,z,F)}function E(z){p(z,null,function(){})}function I(z){z.send().then(S,E)}I(this)},f.prototype.clone=function(){return this._extend()},f.prototype._extend=function(p){var _=t(this._options,p);return new f(this.client,_)},Vz=f,Vz}var qz,QZ;function Xhe(){if(QZ)return qz;QZ=1;var e=Whe(),t=PVe(),n=UR();function r(i){if(!i||!i.accessToken)throw new Error("Cannot create a client without an access token");e(i.accessToken),this.accessToken=i.accessToken,this.origin=i.origin||n.API_ORIGIN}return r.prototype.createRequest=function(s){return new t(this,s)},qz=r,qz}var Hz,JZ;function Zhe(){if(JZ)return Hz;JZ=1;var e=OVe(),t=Xhe();function n(i){t.call(this,i)}n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.sendRequest=e.browserSend,n.prototype.abortRequest=e.browserAbort;function r(i){return new n(i)}return Hz=r,Hz}var Gz,eK;function RVe(){if(eK)return Gz;eK=1;var e=Zhe();return Gz=e,Gz}var Yz,tK;function kVe(){if(tK)return Yz;tK=1;var e=Object.prototype.toString;return Yz=function(t){var n;return e.call(t)==="[object Object]"&&(n=Object.getPrototypeOf(t),n===null||n===Object.getPrototypeOf({}))},Yz}var Wz,nK;function LVe(){if(nK)return Wz;nK=1;var e=kVe(),t=oT(),n="value",r=`
  `,i={};i.assert=function(F,U){return U=U||{},function(k){var V=f(F,k);if(V){var K=a(V,U);throw U.apiName&&(K=U.apiName+": "+K),new Error(K)}}},i.shape=function(U){var k=z(U);return function(K){var J=f(i.plainObject,K);if(J)return J;for(var ie,Q,W=[],te=0;te<k.length;te++)ie=k[te].key,Q=k[te].value,J=f(Q,K[ie]),J&&W.push([ie].concat(J));return W.length<2?W[0]:function(X){W=W.map(function(ge){var ye=ge[0],De=a(ge,X).split(`
`).join(r);return"- "+ye+": "+De});var ae=X.path.join("."),le=ae===n?"":" of "+ae;return"The following properties"+le+" have invalid values:"+r+W.join(r)}}},i.strictShape=function(U){var k=i.shape(U);return function(K){var J=k(K);if(J)return J;var ie=Object.keys(K).reduce(function(Q,W){return U[W]===void 0&&Q.push(W),Q},[]);if(ie.length!==0)return function(){return"The following keys are invalid: "+ie.join(", ")}}},i.arrayOf=function(U){return s(U)},i.tuple=function(){var U=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return s(U)};function s(F){var U=Array.isArray(F),k=function(V){return U?F[V]:F};return function(K){var J=f(i.plainArray,K);if(J)return J;if(U&&K.length!==F.length)return"an array with "+F.length+" items";for(var ie=0;ie<K.length;ie++)if(J=f(k(ie),K[ie]),J)return[ie].concat(J)}}i.required=function(U){function k(V){return V==null?function(K){return E(K,I(K.path)?"cannot be undefined/null.":"is required.")}:U.apply(this,arguments)}return k.__required=!0,k},i.oneOfType=function(){var U=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(V){var K=U.map(function(J){return f(J,V)}).filter(Boolean);if(K.length===U.length)return K.every(function(J){return J.length===1&&typeof J[0]=="string"})?p(K.map(function(J){return J[0]})):K.reduce(function(J,ie){return ie.length>J.length?ie:J})}},i.equal=function(U){return function(V){if(V!==U)return JSON.stringify(U)}},i.oneOf=function(){var U=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),k=U.map(function(V){return i.equal(V)});return i.oneOfType.apply(this,k)},i.range=function(U){var k=U[0],V=U[1];return function(J){var ie=f(i.number,J);if(ie||J<k||J>V)return"number between "+k+" & "+V+" (inclusive)"}},i.any=function(){},i.boolean=function(U){if(typeof U!="boolean")return"boolean"},i.number=function(U){if(typeof U!="number")return"number"},i.plainArray=function(U){if(!Array.isArray(U))return"array"},i.plainObject=function(U){if(!e(U))return"object"},i.string=function(U){if(typeof U!="string")return"string"},i.func=function(U){if(typeof U!="function")return"function"};function f(F,U){if(!(U==null&&!F.hasOwnProperty("__required"))){var k=F(U);if(k)return Array.isArray(k)?k:[k]}}function a(F,U){var k=F.length,V=F[k-1],K=F.slice(0,k-1);return K.length===0&&(K=[n]),U=t(U,{path:K}),typeof V=="function"?V(U):E(U,_(V))}function p(F){return F.length<2?F[0]:F.length===2?F.join(" or "):F.slice(0,-1).join(", ")+", or "+F.slice(-1)}function _(F){return"must be "+S(F)+"."}function S(F){return/^an? /.test(F)?F:/^[aeiou]/i.test(F)?"an "+F:/^[a-z]/i.test(F)?"a "+F:F}function E(F,U){var k=I(F.path),V=F.path.join(".")+" "+U,K=k?"Item at position ":"";return K+V}function I(F){return typeof F[F.length-1]=="number"||typeof F[0]=="number"}function z(F){return Object.keys(F||{}).map(function(U){return{key:U,value:F[U]}})}return i.validate=f,i.processMessage=a,Wz=i,Wz}var Xz,rK;function zVe(){if(rK)return Xz;rK=1;var e=oT(),t=LVe();function n(f){if(typeof window<"u")return f instanceof Au.Blob||f instanceof Au.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof f=="string"||f.pipe!==void 0))return"Filename or Readable stream"}function r(f,a){return t.assert(t.strictShape(f),a)}function i(f){var a="date";if(typeof f=="boolean")return a;try{var p=new Date(f);if(p.getTime&&isNaN(p.getTime()))return a}catch{return a}}function s(f){return t.tuple(t.number,t.number)(f)}return Xz=e(t,{file:n,date:i,coordinates:s,assertShape:r}),Xz}var Zz,iK;function FVe(){if(iK)return Zz;iK=1;function e(t,n){var r=function(i,s){return n.indexOf(i)!==-1&&s!==void 0};return typeof n=="function"&&(r=n),Object.keys(t).filter(function(i){return r(i,t[i])}).reduce(function(i,s){return i[s]=t[s],i},{})}return Zz=e,Zz}var Kz,aK;function NVe(){if(aK)return Kz;aK=1;function e(t,n){return Object.keys(t).reduce(function(r,i){return r[i]=n(i,t[i]),r},{})}return Kz=e,Kz}var Qz,oK;function BVe(){if(oK)return Qz;oK=1;var e=NVe();function t(n){return e(n,function(r,i){return typeof i=="boolean"?JSON.stringify(i):i})}return Qz=t,Qz}var Jz,sK;function jVe(){if(sK)return Jz;sK=1;var e=Xhe(),t=Zhe();function n(r){return function(i){var s;e.prototype.isPrototypeOf(i)?s=i:s=t(i);var f=Object.create(r);return f.client=s,f}}return Jz=n,Jz}var eF,lK;function UVe(){if(lK)return eF;lK=1;var e=oT(),t=zVe(),n=FVe(),r=BVe(),i=jVe(),s={},f=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];return s.forwardGeocode=function(a){t.assertShape({query:t.required(t.string),mode:t.oneOf("mapbox.places","mapbox.places-permanent"),countries:t.arrayOf(t.string),proximity:t.oneOf(t.coordinates,"ip"),types:t.arrayOf(t.oneOf(f)),autocomplete:t.boolean,bbox:t.arrayOf(t.number),limit:t.number,language:t.arrayOf(t.string),routing:t.boolean,fuzzyMatch:t.boolean,worldview:t.string,session_token:t.string})(a),a.mode=a.mode||"mapbox.places";var p=r(e({country:a.countries},n(a,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview","session_token"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:n(a,["mode","query"]),query:p})},s.reverseGeocode=function(a){t.assertShape({query:t.required(t.coordinates),mode:t.oneOf("mapbox.places","mapbox.places-permanent"),countries:t.arrayOf(t.string),types:t.arrayOf(t.oneOf(f)),bbox:t.arrayOf(t.number),limit:t.number,language:t.arrayOf(t.string),reverseMode:t.oneOf("distance","score"),routing:t.boolean,worldview:t.string,session_token:t.string})(a),a.mode=a.mode||"mapbox.places";var p=r(e({country:a.countries},n(a,["country","types","bbox","limit","language","reverseMode","routing","worldview","session_token"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:n(a,["mode","query"]),query:p})},eF=i(s),eF}let $Ve="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Khe=e=>crypto.getRandomValues(new Uint8Array(e)),Qhe=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*t/e.length);return(s=t)=>{let f="";for(;;){let a=n(i),p=i|0;for(;p--;)if(f+=e[a[p]&r]||"",f.length===s)return f}}},VVe=(e,t=21)=>Qhe(e,t,Khe),qVe=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const HVe=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:VVe,customRandom:Qhe,nanoid:qVe,random:Khe,urlAlphabet:$Ve},Symbol.toStringTag,{value:"Module"})),GVe=L0e(HVe);var tF,uK;function YVe(){if(uK)return tF;uK=1;var e=GVe.nanoid;function t(n){this.origin=n.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=n.accessToken,this.version="0.3.0",this.pluginSessionID=this.generateSessionID(),this.sessionIncrementer=0,this.userAgent=this.getUserAgent(),this.options=n,this.send=this.send.bind(this),this.countries=n.countries?n.countries.split(","):null,this.types=n.types?n.types.split(","):null,this.bbox=n.bbox?n.bbox:null,this.language=n.language?n.language.split(","):null,this.limit=n.limit?+n.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(n),this.eventQueue=new Array,this.flushInterval=n.flushInterval||1e3,this.maxQueueSize=n.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}return t.prototype={select:function(n,r){var i=this.getEventPayload("search.select",r,{selectedFeature:n});if(i&&!(i.resultIndex===this.lastSentIndex&&i.queryString===this.lastSentInput||i.resultIndex==-1))return this.lastSentIndex=i.resultIndex,this.lastSentInput=i.queryString,this.push(i)},start:function(n){var r=this.getEventPayload("search.start",n);if(r)return this.push(r)},keyevent:function(n,r){if(n.key&&!(n.metaKey||[9,27,37,39,13,38,40].indexOf(n.keyCode)!==-1)){var i=this.getEventPayload("search.keystroke",r,{key:n.key});if(i)return this.push(i)}},send:function(n,r){if(!this.enableEventLogging)return r?r():void 0;var i=this.getRequestOptions(n);this.request(i,(function(s){if(s)return this.handleError(s,r);if(r)return r()}).bind(this))},getRequestOptions:function(n){Array.isArray(n)||(n=[n]);var r={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};return r},getEventPayload:function(n,r,i={}){if(n==="search.select"&&!i.selectedFeature||n==="search.keystroke"&&!i.key)return null;var s;if(!r.options.proximity)s=null;else if(typeof r.options.proximity=="object")s=[r.options.proximity.longitude,r.options.proximity.latitude];else if(r.options.proximity==="ip"){var f=r._headers?r._headers["ip-proximity"]:null;f&&typeof f=="string"?s=f.split(",").map(parseFloat):s=[999,999]}else s=r.options.proximity;var a=r._map?r._map.getZoom():void 0,p={event:n,version:this.getEventSchemaVersion(n),created:+new Date,sessionIdentifier:this.getSessionId(),country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:r.options.autocomplete,fuzzyMatch:r.options.fuzzyMatch,proximity:s,limit:r.options.limit,routing:r.options.routing,worldview:r.options.worldview,mapZoom:a,keyboardLocale:this.locale};if(n==="search.select"?p.queryString=r.inputString:n!="search.select"&&r._inputEl?p.queryString=r._inputEl.value:p.queryString=r.inputString,["search.keystroke","search.select"].includes(n)&&(p.path="geocoding/v5/mapbox.places"),n==="search.keystroke"&&i.key)p.lastAction=i.key;else if(n==="search.select"&&i.selectedFeature){var _=i.selectedFeature,S=this.getSelectedIndex(_,r);if(p.resultIndex=S,p.resultPlaceName=_.place_name,p.resultId=_.id,_.properties&&(p.resultMapboxId=_.properties.mapbox_id),r._typeahead){var E=r._typeahead.data;E&&E.length>0&&(p.suggestionIds=this.getSuggestionIds(E),p.suggestionNames=this.getSuggestionNames(E),p.suggestionTypes=this.getSuggestionTypes(E),p.suggestionSources=this.getSuggestionSources(E))}}return this.validatePayload(p)?p:null},request:function(n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(this.readyState==4)return this.status==204?r(null):r(this.statusText)},i.open(n.method,n.host+"/"+n.path,!0);for(var s in n.headers){var f=n.headers[s];i.setRequestHeader(s,f)}i.send(n.body)},handleError:function(n,r){if(r)return r(n)},generateSessionID:function(){return e()},getSessionId:function(){return this.pluginSessionID+"."+this.sessionIncrementer},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(n,r){if(r._typeahead){var i=r._typeahead.data,s=n.id,f=i.map(function(p){return p.id}),a=f.indexOf(s);return a}},getSuggestionIds:function(n){return n.map(function(r){return r.properties?r.properties.mapbox_id||"":r.id||""})},getSuggestionNames:function(n){return n.map(function(r){return r.place_name||""})},getSuggestionTypes:function(n){return n.map(function(r){return r.place_type&&Array.isArray(r.place_type)&&r.place_type[0]||""})},getSuggestionSources:function(n){return n.map(function(r){return r._source||""})},getEventSchemaVersion:function(n){return["search.keystroke","search.select"].includes(n)?"2.2":"2.0"},validatePayload:function(n){if(!n||!n.event)return!1;var r=["event","created","sessionIdentifier","queryString"],i=["event","created","sessionIdentifier","queryString","lastAction"],s=["event","created","sessionIdentifier","queryString","resultIndex","path","suggestionIds"],f=n.event;return f==="search.start"?this.objectHasRequiredProps(n,r):f==="search.keystroke"?this.objectHasRequiredProps(n,i):f==="search.select"?this.objectHasRequiredProps(n,s):!0},objectHasRequiredProps:function(n,r){return r.every(function(i){return i==="queryString"?typeof n[i]=="string"&&n[i].length>0:n[i]!==void 0})},shouldEnableLogging:function(n){return!(n.enableEventLogging===!1||n.origin&&n.origin!=="https://api.mapbox.com")},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(n,r){this.eventQueue.push(n),(this.eventQueue.length>=this.maxQueueSize||r)&&this.flush()},remove:function(){this.flush()}},tF=t,tF}var nF,cK;function WVe(){if(cK)return nF;cK=1;var e={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""};return nF={placeholder:e},nF}var gD={exports:{}},XVe=gD.exports,fK;function ZVe(){return fK||(fK=1,(function(e){(function(t,n,r){e.exports?e.exports=r():t[n]=r()})(XVe,"subtag",function(){var t="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(p){return p.match(n)||[]}function i(p){return r(p).filter(function(_,S){return _&&S})}function s(p){return p=r(p),{language:p[1]||t,extlang:p[2]||t,script:p[3]||t,region:p[4]||t}}function f(p,_,S){Object.defineProperty(p,_,{value:S,enumerable:!0})}function a(p,_,S){function E(I){return r(I)[p]||t}f(E,"pattern",_),f(s,S,E)}return a(1,/^[a-zA-Z]{2,3}$/,"language"),a(2,/^[a-zA-Z]{3}$/,"extlang"),a(3,/^[a-zA-Z]{4}$/,"script"),a(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),f(s,"split",i),s})})(gD)),gD.exports}var rF,hK;function KVe(){if(hK)return rF;hK=1;function e(){}return e.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const t={enableHighAccuracy:!0};return new Promise(function(n,r){window.navigator.geolocation.getCurrentPosition(n,r,t)})}},rF=e,rF}var iF,dK;function QVe(){if(dK)return iF;dK=1;function e(r,i){const s=t(r),f=["address","street","place","country"];var a;if(typeof i=="function")return i(s);const p=f.indexOf(i);return p===-1?a=f:a=f.slice(p),a.reduce(function(_,S){return s[S]?(_!==""&&(_=_+", "),_+s[S]):_},"")}function t(r){const i=r.address||"",s=r.text||"",f=r.place_name||"",p={address:f.split(",")[0],houseNumber:i,street:s,placeName:f};return r.context.forEach(function(_){const S=_.id.split(".")[0];p[S]=_.text}),p}return iF={transformFeatureToGeolocationText:e,getAddressInfo:t,REVERSE_GEOCODE_COORD_RGX:/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/},iF}var aF,pK;function JVe(){if(pK)return aF;pK=1;var e=vVe(),t=bVe(),n=oT(),r=xVe().EventEmitter,i=wVe(),s=RVe(),f=UVe(),a=YVe(),p=WVe(),_=ZVe(),S=KVe(),E=QVe();const I={FORWARD:0,LOCAL:1,REVERSE:2};function z(){var k=document.createElement("div");return k.className="mapboxgl-ctrl-geocoder--powered-by",k.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',k}function F(k){this._eventEmitter=new r,this.options=n({},this.options,k),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new S}function U(k){return k?String(k).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""}return F.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",useBrowserFocus:!1,getItemValue:function(k){return k.place_name},render:function(k){var V=U(k.place_name).split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+V[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+V.splice(1,V.length).join(",")+"</div></div>"}},_headers:{},addTo:function(k){function V(K,J){if(!document.body.contains(J))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const ie=K.onAdd();J.appendChild(ie)}if(k._controlContainer)k.addControl(this);else if(k instanceof HTMLElement)V(this,k);else if(typeof k=="string"){const K=document.querySelectorAll(k);if(K.length===0)throw new Error("Element ",k,"not found.");if(K.length>1)throw new Error("Geocoder can only be added to a single html element");V(this,K[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(k){if(k&&typeof k!="string"&&(this._map=k),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=f(s({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new a(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this),this._onSuggestionItemFocus=this._onSuggestionItemFocus.bind(this),this._onSuggestionItemKeyDown=this._onSuggestionItemKeydown.bind(this);var V=this.container=document.createElement("div");V.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var K=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",t(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",(function(ye){this.eventManager.keyevent(ye,this)}).bind(this));var J=document.createElement("div");J.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var ie=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(ie),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),J.appendChild(this._clearEl),J.appendChild(this._loadingEl),V.appendChild(K),V.appendChild(this._inputEl),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var Q=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(Q),J.appendChild(this._geolocateEl),this._showGeolocateButton()}var W=this._typeahead=new e(this._inputEl,[],{hideOnBlur:!this.options.useBrowserFocus,filter:!1,minLength:this.options.minLength,limit:this.options.limit});V.insertBefore(J,W.list.wrapper),this.setRenderFunction(this.options.render),W.getItemValue=this.options.getItemValue;const te=this._typeahead.handleKeyDown.bind(this._typeahead),X=this._typeahead.handleKeyUp.bind(this._typeahead);this._typeahead.handleKeyUp,this.options.useBrowserFocus&&(this._typeahead.handleKeyDown=(function(ye){if(!(ye.keyCode===9&&!W.list.isEmpty())){if(ye.keyCode===40){this._typeahead.list.active=0,this._typeahead.list.element.querySelectorAll("li").forEach(function(De){De.classList.remove("active")}),this._typeahead.list.element.querySelectorAll("li")[0].classList.add("active"),this._typeahead.list.element.querySelectorAll("li")[0].focus();return}else if(ye.keyCode===38){this._typeahead.list.active=W.list.items.length-1,this._typeahead.list.element.querySelectorAll("li").forEach(function(De){De.classList.remove("active")}),this._typeahead.list.element.querySelectorAll("li")[this._typeahead.list.active].classList.add("active"),this._typeahead.list.element.querySelectorAll("li")[this._typeahead.list.active].focus();return}te(ye)}}).bind(this),this._typeahead.handleKeyUp=function(ye){if(ye&&ye.keyCode===16){ye.preventDefault();return}X(ye)});var ae=W.list.draw,le=this._footerNode=z(),ge=this;return W.list.draw=function(){ge.options.useBrowserFocus&&W.list.element.querySelectorAll("li").forEach(function(ye){ye.removeEventListener("focus",ge._onSuggestionItemFocus),ye.removeEventListener("keydown",ge._onSuggestionItemKeyDown)}),ae.call(this),ge.options.useBrowserFocus&&W.list.element.querySelectorAll("li").forEach((function(ye,De){De===0&&ye.focus(),ye.setAttribute("data-index",De),ye.tabIndex=0,ye.addEventListener("focus",this._onSuggestionItemFocus),ye.addEventListener("keydown",this._onSuggestionItemKeyDown)}).bind(ge)),le.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),le.addEventListener("mouseup",(function(){this.selectingListItem=!1}).bind(this)),this.element.appendChild(le)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),V},_onSuggestionItemKeydown(k){const V=k.keyCode;if(V!==9){if(V===13){k.preventDefault();const K=this._typeahead.list.element.querySelector(".active");if(K){const J=K.getAttribute("data-index"),ie=this._typeahead.list.items[J];ie&&(this._typeahead.value(ie.original),this._typeahead.list.hide())}}else if(V===38||V===40){const K=this._typeahead.list.element.querySelectorAll("li");if(K.length>0){if(V===38)if(this._typeahead.list.active>0)k.preventDefault(),this._typeahead.list.active--;else{this._typeahead.el.focus();return}else if(V===40)if(k.preventDefault(),this._typeahead.list.active<K.length-1)this._typeahead.list.active++;else return;K.forEach(function(ie){ie.classList.remove("active")});const J=K[this._typeahead.list.active];J&&(J.classList.add("active"),J.focus())}}}},_onSuggestionItemFocus(k){this._typeahead.list.active=k.target.getAttribute("data-index"),this._typeahead.list.element.querySelectorAll("li").forEach(function(V){V.classList.remove("active")}),k.target.classList.add("active")},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then((function(k){this._hideLoadingIcon();const V={geometry:{type:"Point",coordinates:[k.coords.longitude,k.coords.latitude]}};this._handleMarker(V),this._fly(V),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(V),this._showClearButton(),this.fresh=!1;const K={limit:1,language:[this.options.language],query:V.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const J=V.geometry.coordinates[0]+","+V.geometry.coordinates[1];this._setInputValue(J),this._eventEmitter.emit("result",{result:V})}else this.geocoderService.reverseGeocode(K).send().then((function(J){const ie=J.body.features[0];if(ie){const Q=E.transformFeatureToGeolocationText(ie,this.options.addressAccuracy);this._setInputValue(Q),ie.user_coordinates=V.geometry.coordinates,this._eventEmitter.emit("result",{result:ie})}else this._eventEmitter.emit("result",{result:{user_coordinates:V.geometry.coordinates}})}).bind(this))}).bind(this)).catch((function(k){k.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}).bind(this))},createIcon:function(k,V){var K=document.createElementNS("http://www.w3.org/2000/svg","svg");return K.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+k),K.setAttribute("viewBox","0 0 18 18"),K.setAttribute("xml:space","preserve"),K.setAttribute("width",18),K.setAttribute("height",18),K.innerHTML=V,K},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(k){this._inputEl.value=k,setTimeout((function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}).bind(this),1)},_onPaste:function(k){var V=(k.clipboardData||window.clipboardData).getData("text");V.length>=this.options.minLength&&this._geocode(V)},_onKeyDown:function(k){var V=27,K=9;if(k.keyCode===V&&this.options.clearAndBlurOnEsc)return this._clear(k),this._inputEl.blur();var J=k.target&&k.target.shadowRoot?k.target.shadowRoot.activeElement:k.target,ie=J?J.value:"";if(!ie)return this.fresh=!0,k.keyCode!==K&&this.clear(k),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(k.metaKey||[K,V,37,39,13,38,40].indexOf(k.keyCode)!==-1)&&J.value.length>=this.options.minLength&&this._geocode(J.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(k){this.options.clearOnBlur&&this._clearOnBlur(k),this.options.collapsed&&this._collapse()},_onChange:function(){var k=this._typeahead.selected;k&&JSON.stringify(k)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(k),this.options.marker&&this._mapboxgl&&this._handleMarker(k),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(k),this._eventEmitter.emit("result",{result:k}),this.eventManager.select(k,this))},_fly:function(k){var V;if(k.properties&&i[k.properties.short_code])V=n({},this.options.flyTo),this._map&&this._map.fitBounds(i[k.properties.short_code].bbox,V);else if(k.bbox){var K=k.bbox;V=n({},this.options.flyTo),this._map&&this._map.fitBounds([[K[0],K[1]],[K[2],K[3]]],V)}else{var J={zoom:this.options.zoom};V=n({},J,this.options.flyTo),k.center?V.center=k.center:k.geometry&&k.geometry.type&&k.geometry.type==="Point"&&k.geometry.coordinates&&(V.center=k.geometry.coordinates),this._map&&this._map.flyTo(V)}},_requestType:function(k,V){var K;return k.localGeocoderOnly?K=I.LOCAL:k.reverseGeocode&&E.REVERSE_GEOCODE_COORD_RGX.test(V)?K=I.REVERSE:K=I.FORWARD,K},_setupConfig:function(k,V){const K=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],J=/[\s,]+/;var ie=this,Q=K.reduce(function(te,X){if(ie.options[X]===void 0||ie.options[X]===null)return te;["countries","types","language"].indexOf(X)>-1?te[X]=ie.options[X].split(J):te[X]=ie.options[X];const ae=typeof ie.options[X].longitude=="number"&&typeof ie.options[X].latitude=="number";if(X==="proximity"&&ae){const le=ie.options[X].longitude,ge=ie.options[X].latitude;te[X]=[le,ge]}return te},{});switch(k){case I.REVERSE:{var W=V.split(J).map(function(te){return parseFloat(te,10)});ie.options.flipCoordinates||W.reverse(),Q.types&&Q.types[0],Q=n(Q,{query:W,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(te){te in Q&&delete Q[te]})}break;case I.FORWARD:{const te=V.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(te)&&(V=V.replace(/,/g," ")),Q=n(Q,{query:V})}break}return Q.session_token=this.eventManager.getSessionId(),Q},_geocode:function(k){this.inputString=k,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:k});const V=this._requestType(this.options,k),K=this._setupConfig(V,k);var J;switch(V){case I.LOCAL:J=Promise.resolve();break;case I.FORWARD:J=this.geocoderService.forwardGeocode(K).send();break;case I.REVERSE:J=this.geocoderService.reverseGeocode(K).send();break}var ie=this.options.localGeocoder?this.options.localGeocoder(k)||[]:[],Q=[],W=null;return J.catch((function(te){W=te}).bind(this)).then((function(te){this._hideLoadingIcon();var X={};return te?te.statusCode=="200"&&(X=te.body,X.request=te.request,X.headers=te.headers,this._headers=te.headers):X={type:"FeatureCollection",features:[]},X.config=K,this.fresh&&(this.eventManager.start(this),this.fresh=!1),X.features&&X.features.length&&X.features.map(function(ae){ae._source="mapbox"}),X.features=X.features?ie.concat(X.features):ie,this.options.externalGeocoder?(Q=this.options.externalGeocoder(k,X.features)||Promise.resolve([]),Q.then(function(ae){return X.features=X.features?ae.concat(X.features):ae,X},function(){return X})):X}).bind(this)).then((function(te){if(W)throw W;this.options.filter&&te.features.length&&(te.features=te.features.filter(this.options.filter)),te.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",te),this._typeahead.update(te.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",te))}).bind(this)).catch((function(te){this._hideLoadingIcon(),this._hideAttribution(),ie.length&&this.options.localGeocoder||Q.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(ie)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:ie}),this._eventEmitter.emit("error",{error:te})}).bind(this)),J},_clear:function(k){k&&k.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this.eventManager.sessionIncrementer++,this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(k){this._clear(k),this._inputEl.focus(),this.options.useBrowserFocus&&this._typeahead.list.hide()},_clearOnBlur:function(k){var V=this;k.relatedTarget&&V._clear(k)},_onQueryResult:function(k){var V=k.body;if(V.features.length){var K=V.features[0];this._typeahead.selected=K,this._inputEl.value=K.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var k=this._map.getCenter().wrap();this.setProximity({longitude:k.lng,latitude:k.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(k){return this._geocode(k).then(this._onQueryResult),this},_renderError:function(){var k="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(k)},_renderLocationError:function(){var k="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(k)},_renderNoResults:function(){var k="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(k)},_renderUserDeniedGeolocationError:function(){var k="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(k)},_renderMessage:function(k){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(k)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var k=this.options.language.split(",")[0],V=_.language(k),K=p.placeholder[V];if(K)return K}return"Search"},setInput:function(k,V){return V===void 0&&(V=!1),this._inputEl.value=k,this._typeahead.selected=null,this._typeahead.clear(),k.length>=this.options.minLength&&(V?this._geocode(k):this._onChange()),this},setProximity:function(k,V=!0){return this.options.proximity=k,V&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(k){return k&&typeof k=="function"&&(this._typeahead.render=k),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(k){var V=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=k||this.options.language||V,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(k){return this.options.zoom=k,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(k){return this.options.flyTo=k,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(k){return this.options.placeholder=k||this._getPlaceholderText(),this._inputEl.placeholder=this.options.placeholder,this._inputEl.setAttribute("aria-label",this.options.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(k){return this.options.bbox=k,this},getCountries:function(){return this.options.countries},setCountries:function(k){return this.options.countries=k,this},getTypes:function(){return this.options.types},setTypes:function(k){return this.options.types=k,this},getMinLength:function(){return this.options.minLength},setMinLength:function(k){return this.options.minLength=k,this._typeahead&&(this._typeahead.options.minLength=k),this},getLimit:function(){return this.options.limit},setLimit:function(k){return this.options.limit=k,this._typeahead&&(this._typeahead.options.limit=k),this},getFilter:function(){return this.options.filter},setFilter:function(k){return this.options.filter=k,this},setOrigin:function(k){return this.options.origin=k,this.geocoderService=f(s({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(k){return this.options.accessToken=k,this.geocoderService=f(s({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(k){return this.options.autocomplete=k,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(k){return this.options.fuzzyMatch=k,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(k){return this.options.routing=k,this},getRouting:function(){return this.options.routing},setWorldview:function(k){return this.options.worldview=k,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(k){if(this._map){this._removeMarker();var V={color:"#4668F2"},K=n({},V,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(K),k.center?this.mapMarker.setLngLat(k.center).addTo(this._map):k.geometry&&k.geometry.type&&k.geometry.type==="Point"&&k.geometry.coordinates&&this.mapMarker.setLngLat(k.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(k,V){return this._eventEmitter.on(k,V),this},off:function(k,V){return this._eventEmitter.removeListener(k,V),this.eventManager.remove(),this}},aF=F,aF}var e8e=JVe();const t8e=ga(e8e),Za={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Jhe(e,t,n){n.push({command:Za.addSource,args:[e,t[e]]})}function ede(e,t,n){t.push({command:Za.removeSource,args:[e]}),n[e]=!0}function n8e(e,t,n,r){ede(e,n,r),Jhe(e,t,n)}function r8e(e,t,n){let r;for(r in e[n])if(e[n].hasOwnProperty(r)&&r!=="data"&&!ts(e[n][r],t[n][r]))return!1;for(r in t[n])if(t[n].hasOwnProperty(r)&&r!=="data"&&!ts(e[n][r],t[n][r]))return!1;return!0}function i8e(e,t,n,r){e=e||{},t=t||{};let i;for(i in e)e.hasOwnProperty(i)&&(t.hasOwnProperty(i)||ede(i,n,r));for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)?ts(e[i],t[i])||(e[i].type==="geojson"&&t[i].type==="geojson"&&r8e(e,t,i)?n.push({command:Za.setGeoJSONSourceData,args:[i,t[i].data]}):n8e(i,t,n,r)):Jhe(i,t,n))}function OM(e,t,n,r,i,s){e=e||{},t=t||{};let f;for(f in e)e.hasOwnProperty(f)&&(ts(e[f],t[f])||n.push({command:s,args:[r,f,t[f],i]}));for(f in t)!t.hasOwnProperty(f)||e.hasOwnProperty(f)||ts(e[f],t[f])||n.push({command:s,args:[r,f,t[f],i]})}function mK(e){return e.id}function gK(e,t){return e[t.id]=t,e}function a8e(e,t,n){e=e||[],t=t||[];const r=e.map(mK),i=t.map(mK),s=e.reduce(gK,{}),f=t.reduce(gK,{}),a=r.slice(),p=Object.create(null);let _,S,E,I,z,F,U;for(_=0,S=0;_<r.length;_++)E=r[_],f.hasOwnProperty(E)?S++:(n.push({command:Za.removeLayer,args:[E]}),a.splice(a.indexOf(E,S),1));for(_=0,S=0;_<i.length;_++)E=i[i.length-1-_],a[a.length-1-_]!==E&&(s.hasOwnProperty(E)?(n.push({command:Za.removeLayer,args:[E]}),a.splice(a.lastIndexOf(E,a.length-S),1)):S++,F=a[a.length-_],n.push({command:Za.addLayer,args:[f[E],F]}),a.splice(a.length-_,0,E),p[E]=!0);for(_=0;_<i.length;_++)if(E=i[_],I=s[E],z=f[E],!(p[E]||ts(I,z))){if(!ts(I.source,z.source)||!ts(I["source-layer"],z["source-layer"])||!ts(I.type,z.type)){n.push({command:Za.removeLayer,args:[E]}),F=a[a.lastIndexOf(E)+1],n.push({command:Za.addLayer,args:[z,F]});continue}OM(I.layout,z.layout,n,E,null,Za.setLayoutProperty),OM(I.paint,z.paint,n,E,null,Za.setPaintProperty),ts(I.filter,z.filter)||n.push({command:Za.setFilter,args:[E,z.filter]}),(!ts(I.minzoom,z.minzoom)||!ts(I.maxzoom,z.maxzoom))&&n.push({command:Za.setLayerZoomRange,args:[E,z.minzoom,z.maxzoom]});for(U in I)I.hasOwnProperty(U)&&(U==="layout"||U==="paint"||U==="filter"||U==="metadata"||U==="minzoom"||U==="maxzoom"||(U.indexOf("paint.")===0?OM(I[U],z[U],n,E,U.slice(6),Za.setPaintProperty):ts(I[U],z[U])||n.push({command:Za.setLayerProperty,args:[E,U,z[U]]})));for(U in z)!z.hasOwnProperty(U)||I.hasOwnProperty(U)||U==="layout"||U==="paint"||U==="filter"||U==="metadata"||U==="minzoom"||U==="maxzoom"||(U.indexOf("paint.")===0?OM(I[U],z[U],n,E,U.slice(6),Za.setPaintProperty):ts(I[U],z[U])||n.push({command:Za.setLayerProperty,args:[E,U,z[U]]}))}}function o8e(e,t){if(!e)return[{command:Za.setStyle,args:[t]}];let n=[];try{if(!ts(e.version,t.version))return[{command:Za.setStyle,args:[t]}];ts(e.center,t.center)||n.push({command:Za.setCenter,args:[t.center]}),ts(e.zoom,t.zoom)||n.push({command:Za.setZoom,args:[t.zoom]}),ts(e.bearing,t.bearing)||n.push({command:Za.setBearing,args:[t.bearing]}),ts(e.pitch,t.pitch)||n.push({command:Za.setPitch,args:[t.pitch]}),ts(e.sprite,t.sprite)||n.push({command:Za.setSprite,args:[t.sprite]}),ts(e.glyphs,t.glyphs)||n.push({command:Za.setGlyphs,args:[t.glyphs]}),ts(e.transition,t.transition)||n.push({command:Za.setTransition,args:[t.transition]}),ts(e.light,t.light)||n.push({command:Za.setLight,args:[t.light]});const r={},i=[];i8e(e.sources,t.sources,i,r);const s=[];e.layers&&e.layers.forEach(f=>{r[f.source]?n.push({command:Za.removeLayer,args:[f.id]}):s.push(f)}),n=n.concat(i),a8e(s,t.layers,n)}catch(r){console.warn("Unable to compute style diff:",r),n=[{command:Za.setStyle,args:[t]}]}return n}const s8e=(e,t)=>TFe(e,t).toFixed(t),yK=(e,t,n)=>e>0&&e===1?t:n,l8e=({features:e})=>{const t=e.filter(r=>r.id!==void 0).length,n=(r,i)=>{let s=r.properties;return Oe.jsxs(Vw.Item,{children:[Oe.jsx("h6",{className:"tooltip-header",children:s.label}),s.total!==""?Oe.jsxs("p",{className:"tooltip-body",children:["Total rainfall: ",Oe.jsx("strong",{children:s8e(s.total,2)})," inches"]}):null]},i)};return t>0?Oe.jsx(Ub,{children:Oe.jsx(Vw,{variant:"flush",children:e.filter(r=>r.id!==void 0).map(n)})}):null},u8e=Kfe("total",nue.breaks_050).legendContent;class c8e extends Je.Component{constructor(){super(...arguments);ir(this,"handleSelectLegend",n=>{this.props.dispatchPickLegend(n.currentTarget.value)})}render(){return Oe.jsxs(ia,{className:"my-2",children:[Oe.jsxs(kr,{sm:10,children:[Oe.jsx(lse,{size:"sm",children:Oe.jsx("tbody",{children:Oe.jsx("tr",{children:this.props.bins.map((n,r)=>Oe.jsx("td",{className:"text-center legend-label",style:{backgroundColor:`${n[1]}`},children:Oe.jsx("span",{style:{color:`${n[2]}`},children:n[0]})},r))})})}),Oe.jsx("span",{className:"form-check-label",children:"Total Rainfall"})]}),Oe.jsx(kr,{sm:2,children:Oe.jsxs(gw,{children:[Oe.jsx(gw.Check,{defaultChecked:!0,custom:!0,size:"sm",value:"breaks_005",label:"0.5 in.",name:"legendRadios",type:"radio",id:"legend-radio-1",onChange:this.handleSelectLegend}),Oe.jsx(gw.Check,{custom:!0,size:"sm",value:"breaks_050",label:"5 in.",name:"legendRadios",type:"radio",id:"legend-radio-2",onChange:this.handleSelectLegend}),Oe.jsx(gw.Check,{custom:!0,size:"sm",value:"breaks_100",label:"10 in.",name:"legendRadios",type:"radio",id:"legend-radio-3",onChange:this.handleSelectLegend})]})})]})}}function f8e(e){let t=nf(e,["mapLegend","content"],[]);return(!Array.isArray(t)||t.length===0)&&(t=u8e),t=t.filter(n=>Array.isArray(n)&&n.length>=2&&qi.valid(n[1])).map(n=>{let r="#000";return qi(n[1]).luminance()<.4&&(r="#fff"),[n[0],n[1],r]}),{bins:t}}const h8e=(e,t)=>({dispatchPickLegend:n=>{e(UV({breaks:nue[n]}))}}),d8e=af(f8e,h8e)(c8e),aw=pIe,_K="map";class p8e extends be.Component{constructor(n){super(n);ir(this,"tooltipContainer");ir(this,"tooltipRoot");this.state={features:[]}}componentDidMount(){this.props.loadingMap(),this.loadMap()}componentDidUpdate(n){n.mapStyle!==this.props.mapStyle&&this.updateMapStyle(n.mapStyle,this.props.mapStyle)}componentWillUnmount(){this.tooltipRoot&&(this.tooltipRoot.unmount(),this.tooltipRoot=null),this.webmap&&(this.webmap.remove(),this.webmap=null)}setTooltip(n){this.tooltipRoot&&(n.length?this.tooltipRoot.render(Oe.jsx(l8e,{features:n})):this.tooltipRoot.render(null))}makeTooltipOnHover(n,r){if(n===void 0)return;const i=q3(this.props.activeTab);if(i.length===0){this.webmap.getCanvas().style.cursor="",this.setTooltip([]),this.setState({features:[]});return}const s=this.webmap.queryRenderedFeatures(n.point,{layers:i});r.setLngLat(n.lngLat),this.webmap.getCanvas().style.cursor=s.length?"pointer":"",this.setTooltip(s),this.setState({features:s})}handleMapClick(n){const r=q3(this.props.activeTab);if(r.length===0)return;const i=[[n.point.x-1,n.point.y-1],[n.point.x+1,n.point.y+1]];let s=this.webmap.queryRenderedFeatures(i,{layers:r}),f={};s.length>0&&(s.forEach(a=>{let p=VV(a);_w(f,a.source)?f[a.source].push(p):f[a.source]=[p]}),sR(f,(a,p)=>{this.props.makeChoiceOnMapClick({sensorLocationType:p,selectedOptions:a})}))}loadMap(){const n=this.props.initMap.mapboxSources["3rww-rainfall-base"].url;if(!n){console.error("Missing Mapbox style URL. Set VITE_MAPBOX_STYLE_BASEMAP in your .env file.");return}const r={container:_K,style:n,center:[this.props.initMap.longitude,this.props.initMap.latitude],zoom:this.props.zoom,attributionControl:!1};Pb.accessToken=this.props.token,this.webmap=new Pb.Map(r),this.tooltipContainer=document.createElement("div"),this.tooltipRoot=vae.createRoot(this.tooltipContainer);const i=new Pb.Marker({element:this.tooltipContainer,offset:[105,0]}).setLngLat([0,0]).addTo(this.webmap);this.webmap.on("load",()=>{this.webmap.addControl(new t8e({accessToken:Pb.accessToken,mapboxgl:Pb,placeholder:"Fly me to...",marker:!1,collapsed:!0,clearAndBlurOnEsc:!0,clearOnBlur:!0,countries:"us"})),this.webmap.addControl(new Pb.NavigationControl),this.webmap.addControl(new Pb.AttributionControl({compact:!0,customAttribution:this.props.initMap.attribution})),this.props.initMap.sourcesToAdd.forEach(a=>{this.webmap.addSource(a.sourceName,a.sourceData)}),this.props.initMap.layersToAdd.forEach(a=>{a.layerStyles.forEach(p=>{this.webmap.addLayer(p,a.addLayerStylesAbove)})});let s=this.webmap.getStyle();this.props.setStyle(s),this.props.mapLoaded(this.webmap.loaded()),this.props.initFetchData();let f={};EIe.forEach(a=>{let p=a[0],_=a[1];f[p]=null,this.webmap.on("mousemove",p,S=>{if(!q3(this.props.activeTab).includes(p)){this.setTooltip([]),this.webmap.getCanvas().style.cursor="",f[p]&&this.webmap.setFeatureState({source:_,id:f[p]},{hover:!1}),f[p]=null;return}this.makeTooltipOnHover(S,i),S.features.length>0&&(f[p]&&this.webmap.setFeatureState({source:_,id:f[p]},{hover:!1}),f[p]=S.features[0].id,this.webmap.setFeatureState({source:_,id:f[p]},{hover:!0}))}),this.webmap.on("mouseleave",p,()=>{this.setTooltip([]),this.webmap.getCanvas().style.cursor="",f[p]&&this.webmap.setFeatureState({source:_,id:f[p]},{hover:!1}),f[p]=null})})}),this.webmap.on("click",s=>this.handleMapClick(s))}updateMapStyle(n,r){if(!this.webmap||n===null||Oj(n)||r===null||Oj(r))return;const i=this.webmap,s=Az.fromJS(n),f=Az.fromJS(r);if(!Az.is(s,f)){let a=o8e(s.toJS(),f.toJS());aw&&console.log(`updating mapStyle (${a.map(p=>p.command)})`),a.forEach(p=>this.executeMapChange(i,p))}}getSourceLayerIds(n,r){const i=n.getStyle&&n.getStyle();return!i||!i.layers?[]:i.layers.filter(s=>s.source===r).map(s=>s.id)}executeMapChange(n,r){const{command:i,args:s=[]}=r;if(i==="setGeoJSONSourceData"){const a=s[0],p=n.getSource(a);p&&typeof p.setData=="function"?p.setData(s[1]):console.warn(`[mapStyle] setGeoJSONSourceData skipped: source "${a}" is missing or non-geojson`);return}if(i==="removeLayer"){const a=s[0];if(!n.getLayer(a)){aw&&console.debug(`[mapStyle] removeLayer noop: layer "${a}" is already absent`);return}try{n.removeLayer(a)}catch(p){console.warn(`[mapStyle] removeLayer failed for layer "${a}"`,p)}return}if(i==="removeSource"){const a=s[0];if(!n.getSource(a)){aw&&console.debug(`[mapStyle] removeSource noop: source "${a}" is already absent`);return}this.getSourceLayerIds(n,a).forEach(p=>{if(n.getLayer(p))try{n.removeLayer(p),aw&&console.debug(`[mapStyle] removed dependent layer "${p}" before source "${a}"`)}catch(_){console.warn(`[mapStyle] failed removing dependent layer "${p}" for source "${a}"`,_)}});try{n.removeSource(a)}catch(p){console.warn(`[mapStyle] removeSource failed for source "${a}"`,p)}return}if(i==="addSource"){const a=s[0];if(n.getSource(a)){aw&&console.debug(`[mapStyle] addSource noop: source "${a}" already exists`);return}try{n.addSource(...s)}catch(p){console.warn(`[mapStyle] addSource failed for source "${a}"`,p)}return}if(i==="addLayer"){const a=s[0]&&s[0].id?s[0].id:"unknown-layer";if(a!=="unknown-layer"&&n.getLayer(a)){aw&&console.debug(`[mapStyle] addLayer noop: layer "${a}" already exists`);return}try{n.addLayer(...s)}catch(p){console.warn(`[mapStyle] addLayer failed for layer "${a}"`,p)}return}const f=n[i];if(typeof f!="function"){console.warn(`[mapStyle] unsupported command "${i}"`);return}try{f.apply(n,s)}catch(a){const p=s[0]!==void 0?` (${String(s[0])})`:"";console.warn(`[mapStyle] command "${i}" failed${p}`,a)}}render(){return Oe.jsxs("div",{className:"map-and-legend-container",children:[Oe.jsx("div",{className:"map",id:_K}),Oe.jsx("div",{className:"legend-container container-fluid",children:Oe.jsx(d8e,{})})]})}}function m8e(e){return{mapStyle:e.mapStyle,initMap:e.initMap}}const g8e=(e,t)=>({loadingMap:n=>{e(AR("Loading the map"))},setStyle:n=>{e(rfe(n))},mapLoaded:n=>{e(nfe(n)),e(OR("Map loaded"))},initFetchData:n=>e(c$e()),makeChoiceOnMapClick:n=>{e(Iw({contextType:t.activeTab,...n}))}}),y8e=af(m8e,g8e)(p8e);function tde(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=tde(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ri(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=tde(e))&&(r&&(r+=" "),r+=t);return r}function lr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ha(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function bp(e,t){const n=lr(e);return isNaN(t)?Ha(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Ap(e,t){const n=lr(e);if(isNaN(t))return Ha(e,NaN);if(!t)return n;const r=n.getDate(),i=Ha(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}function R8(e,t){const n=+lr(e);return Ha(e,n+t)}const nde=6048e5,_8e=864e5,$R=6e4,VR=36e5,v8e=1e3;function b8e(e,t){return R8(e,t*VR)}let x8e={};function Vx(){return x8e}function i_(e,t){var a,p,_,S;const n=Vx(),r=(t==null?void 0:t.weekStartsOn)??((p=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((S=(_=n.locale)==null?void 0:_.options)==null?void 0:S.weekStartsOn)??0,i=lr(e),s=i.getDay(),f=(s<r?7:0)+s-r;return i.setDate(i.getDate()-f),i.setHours(0,0,0,0),i}function lS(e){return i_(e,{weekStartsOn:1})}function rde(e){const t=lr(e),n=t.getFullYear(),r=Ha(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=lS(r),s=Ha(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const f=lS(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=f.getTime()?n:n-1}function xx(e){const t=lr(e);return t.setHours(0,0,0,0),t}function dI(e){const t=lr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function uS(e,t){const n=xx(e),r=xx(t),i=+n-dI(n),s=+r-dI(r);return Math.round((i-s)/_8e)}function w8e(e){const t=rde(e),n=Ha(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),lS(n)}function a6(e,t){return R8(e,t*$R)}function k8(e,t){const n=t*3;return Ap(e,n)}function S8e(e,t){return R8(e,t*1e3)}function pI(e,t){const n=t*7;return bp(e,n)}function Uy(e,t){return Ap(e,t*12)}function vK(e){let t;return e.forEach(function(n){const r=lr(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function bK(e){let t;return e.forEach(n=>{const r=lr(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function T8e(e,t){const n=xx(e),r=xx(t);return+n==+r}function $y(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function mI(e){if(!$y(e)&&typeof e!="number")return!1;const t=lr(e);return!isNaN(Number(t))}function gI(e,t){const n=lr(e),r=lr(t),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function nx(e){const t=lr(e);return Math.trunc(t.getMonth()/3)+1}function yI(e,t){const n=lr(e),r=lr(t),i=n.getFullYear()-r.getFullYear(),s=nx(n)-nx(r);return i*4+s}function _I(e,t){const n=lr(e),r=lr(t);return n.getFullYear()-r.getFullYear()}function E8e(e,t){const n=lr(e),r=lr(t),i=xK(n,r),s=Math.abs(uS(n,r));n.setDate(n.getDate()-i*s);const f=+(xK(n,r)===-i),a=i*(s-f);return a===0?0:a}function xK(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function ide(e){const t=lr(e);return t.setHours(23,59,59,999),t}function ade(e){const t=lr(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function o6(e){const t=lr(e),n=t.getMonth(),r=n-n%3;return t.setMonth(r,1),t.setHours(0,0,0,0),t}function ode(e){const t=lr(e);return t.setDate(1),t.setHours(0,0,0,0),t}function sde(e){const t=lr(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function qR(e){const t=lr(e),n=Ha(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function A8e(e,t){var a,p;const n=Vx(),r=n.weekStartsOn??((p=(a=n.locale)==null?void 0:a.options)==null?void 0:p.weekStartsOn)??0,i=lr(e),s=i.getDay(),f=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+f),i.setHours(23,59,59,999),i}const O8e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},C8e=(e,t,n)=>{let r;const i=O8e[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function oF(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const M8e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},D8e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},I8e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},P8e={date:oF({formats:M8e,defaultWidth:"full"}),time:oF({formats:D8e,defaultWidth:"full"}),dateTime:oF({formats:I8e,defaultWidth:"full"})},R8e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},k8e=(e,t,n,r)=>R8e[e];function zE(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const f=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):f;i=e.formattingValues[a]||e.formattingValues[f]}else{const f=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[a]||e.values[f]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const L8e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},z8e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},F8e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},N8e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},B8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},j8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},U8e=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},$8e={ordinalNumber:U8e,era:zE({values:L8e,defaultWidth:"wide"}),quarter:zE({values:z8e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:zE({values:F8e,defaultWidth:"wide"}),day:zE({values:N8e,defaultWidth:"wide"}),dayPeriod:zE({values:B8e,defaultWidth:"wide",formattingValues:j8e,defaultFormattingWidth:"wide"})};function FE(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const f=s[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],p=Array.isArray(a)?q8e(a,E=>E.test(f)):V8e(a,E=>E.test(f));let _;_=e.valueCallback?e.valueCallback(p):p,_=n.valueCallback?n.valueCallback(_):_;const S=t.slice(f.length);return{value:_,rest:S}}}function V8e(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function q8e(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function H8e(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let f=e.valueCallback?e.valueCallback(s[0]):s[0];f=n.valueCallback?n.valueCallback(f):f;const a=t.slice(i.length);return{value:f,rest:a}}}const G8e=/^(\d+)(th|st|nd|rd)?/i,Y8e=/\d+/i,W8e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},X8e={any:[/^b/i,/^(a|c)/i]},Z8e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},K8e={any:[/1/i,/2/i,/3/i,/4/i]},Q8e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},J8e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eqe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tqe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nqe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rqe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iqe={ordinalNumber:H8e({matchPattern:G8e,parsePattern:Y8e,valueCallback:e=>parseInt(e,10)}),era:FE({matchPatterns:W8e,defaultMatchWidth:"wide",parsePatterns:X8e,defaultParseWidth:"any"}),quarter:FE({matchPatterns:Z8e,defaultMatchWidth:"wide",parsePatterns:K8e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:FE({matchPatterns:Q8e,defaultMatchWidth:"wide",parsePatterns:J8e,defaultParseWidth:"any"}),day:FE({matchPatterns:eqe,defaultMatchWidth:"wide",parsePatterns:tqe,defaultParseWidth:"any"}),dayPeriod:FE({matchPatterns:nqe,defaultMatchWidth:"any",parsePatterns:rqe,defaultParseWidth:"any"})},lde={code:"en-US",formatDistance:C8e,formatLong:P8e,formatRelative:k8e,localize:$8e,match:iqe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function aqe(e){const t=lr(e);return uS(t,qR(t))+1}function L8(e){const t=lr(e),n=+lS(t)-+w8e(t);return Math.round(n/nde)+1}function z8(e,t){var S,E,I,z;const n=lr(e),r=n.getFullYear(),i=Vx(),s=(t==null?void 0:t.firstWeekContainsDate)??((E=(S=t==null?void 0:t.locale)==null?void 0:S.options)==null?void 0:E.firstWeekContainsDate)??i.firstWeekContainsDate??((z=(I=i.locale)==null?void 0:I.options)==null?void 0:z.firstWeekContainsDate)??1,f=Ha(e,0);f.setFullYear(r+1,0,s),f.setHours(0,0,0,0);const a=i_(f,t),p=Ha(e,0);p.setFullYear(r,0,s),p.setHours(0,0,0,0);const _=i_(p,t);return n.getTime()>=a.getTime()?r+1:n.getTime()>=_.getTime()?r:r-1}function oqe(e,t){var a,p,_,S;const n=Vx(),r=(t==null?void 0:t.firstWeekContainsDate)??((p=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:p.firstWeekContainsDate)??n.firstWeekContainsDate??((S=(_=n.locale)==null?void 0:_.options)==null?void 0:S.firstWeekContainsDate)??1,i=z8(e,t),s=Ha(e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),i_(s,t)}function ude(e,t){const n=lr(e),r=+i_(n,t)-+oqe(n,t);return Math.round(r/nde)+1}function qa(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Dv={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return qa(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):qa(n+1,2)},d(e,t){return qa(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return qa(e.getHours()%12||12,t.length)},H(e,t){return qa(e.getHours(),t.length)},m(e,t){return qa(e.getMinutes(),t.length)},s(e,t){return qa(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return qa(i,t.length)}},ow={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wK={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Dv.y(e,t)},Y:function(e,t,n,r){const i=z8(e,r),s=i>0?i:1-i;if(t==="YY"){const f=s%100;return qa(f,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):qa(s,t.length)},R:function(e,t){const n=rde(e);return qa(n,t.length)},u:function(e,t){const n=e.getFullYear();return qa(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return qa(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return qa(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Dv.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return qa(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=ude(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):qa(i,t.length)},I:function(e,t,n){const r=L8(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):qa(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Dv.d(e,t)},D:function(e,t,n){const r=aqe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):qa(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return qa(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return qa(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return qa(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=ow.noon:r===0?i=ow.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=ow.evening:r>=12?i=ow.afternoon:r>=4?i=ow.morning:i=ow.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Dv.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Dv.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):qa(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):qa(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Dv.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Dv.s(e,t)},S:function(e,t){return Dv.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return TK(r);case"XXXX":case"XX":return zb(r);case"XXXXX":case"XXX":default:return zb(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return TK(r);case"xxxx":case"xx":return zb(r);case"xxxxx":case"xxx":default:return zb(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+SK(r,":");case"OOOO":default:return"GMT"+zb(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+SK(r,":");case"zzzz":default:return"GMT"+zb(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return qa(r,t.length)},T:function(e,t,n){const r=e.getTime();return qa(r,t.length)}};function SK(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+qa(s,2)}function TK(e,t){return e%60===0?(e>0?"-":"+")+qa(Math.abs(e)/60,2):zb(e,t)}function zb(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=qa(Math.trunc(r/60),2),s=qa(r%60,2);return n+i+t+s}const EK=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},cde=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},sqe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return EK(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",EK(r,t)).replace("{{time}}",cde(i,t))},vI={p:cde,P:sqe},lqe=/^D+$/,uqe=/^Y+$/,cqe=["D","DD","YY","YYYY"];function fde(e){return lqe.test(e)}function hde(e){return uqe.test(e)}function s6(e,t,n){const r=fqe(e,t,n);if(console.warn(r),cqe.includes(e))throw new RangeError(r)}function fqe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hqe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dqe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pqe=/^'([^]*?)'?$/,mqe=/''/g,gqe=/[a-zA-Z]/;function AK(e,t,n){var S,E,I,z,F,U,k,V;const r=Vx(),i=(n==null?void 0:n.locale)??r.locale??lde,s=(n==null?void 0:n.firstWeekContainsDate)??((E=(S=n==null?void 0:n.locale)==null?void 0:S.options)==null?void 0:E.firstWeekContainsDate)??r.firstWeekContainsDate??((z=(I=r.locale)==null?void 0:I.options)==null?void 0:z.firstWeekContainsDate)??1,f=(n==null?void 0:n.weekStartsOn)??((U=(F=n==null?void 0:n.locale)==null?void 0:F.options)==null?void 0:U.weekStartsOn)??r.weekStartsOn??((V=(k=r.locale)==null?void 0:k.options)==null?void 0:V.weekStartsOn)??0,a=lr(e);if(!mI(a))throw new RangeError("Invalid time value");let p=t.match(dqe).map(K=>{const J=K[0];if(J==="p"||J==="P"){const ie=vI[J];return ie(K,i.formatLong)}return K}).join("").match(hqe).map(K=>{if(K==="''")return{isToken:!1,value:"'"};const J=K[0];if(J==="'")return{isToken:!1,value:yqe(K)};if(wK[J])return{isToken:!0,value:K};if(J.match(gqe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+J+"`");return{isToken:!1,value:K}});i.localize.preprocessor&&(p=i.localize.preprocessor(a,p));const _={firstWeekContainsDate:s,weekStartsOn:f,locale:i};return p.map(K=>{if(!K.isToken)return K.value;const J=K.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&hde(J)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&fde(J))&&s6(J,t,String(e));const ie=wK[J[0]];return ie(a,J,i.localize,_)}).join("")}function yqe(e){const t=e.match(pqe);return t?t[1].replace(mqe,"'"):e}function OK(e){return lr(e).getDate()}function _qe(e){return lr(e).getDay()}function vqe(e){const t=lr(e),n=t.getFullYear(),r=t.getMonth(),i=Ha(e,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function bqe(){return Object.assign({},Vx())}function eg(e){return lr(e).getHours()}function xqe(e){let n=lr(e).getDay();return n===0&&(n=7),n}function tg(e){return lr(e).getMinutes()}function pc(e){return lr(e).getMonth()}function Vy(e){return lr(e).getSeconds()}function l6(e){return lr(e).getTime()}function Ni(e){return lr(e).getFullYear()}function r0(e,t){const n=lr(e),r=lr(t);return n.getTime()>r.getTime()}function wx(e,t){const n=lr(e),r=lr(t);return+n<+r}function wqe(e,t){const n=lr(e),r=lr(t);return+n==+r}function Sqe(e,t){const n=t instanceof Date?Ha(t,0):new t(0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}const Tqe=10;class dde{constructor(){ir(this,"subPriority",0)}validate(t,n){return!0}}class Eqe extends dde{constructor(t,n,r,i,s){super(),this.value=t,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,r){return this.setValue(t,n,this.value,r)}}class Aqe extends dde{constructor(){super(...arguments);ir(this,"priority",Tqe);ir(this,"subPriority",-1)}set(n,r){return r.timestampIsSet?n:Ha(n,Sqe(n,Date))}}class Ba{run(t,n,r,i){const s=this.parse(t,n,r,i);return s?{setter:new Eqe(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(t,n,r){return!0}}class Oqe extends Ba{constructor(){super(...arguments);ir(this,"priority",140);ir(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const ks={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Vm={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ls(e,t){return e&&{value:t(e.value),rest:e.rest}}function ns(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function qm(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,f=n[5]?parseInt(n[5],10):0;return{value:r*(i*VR+s*$R+f*v8e),rest:t.slice(n[0].length)}}function pde(e){return ns(ks.anyDigitsSigned,e)}function vs(e,t){switch(e){case 1:return ns(ks.singleDigit,t);case 2:return ns(ks.twoDigits,t);case 3:return ns(ks.threeDigits,t);case 4:return ns(ks.fourDigits,t);default:return ns(new RegExp("^\\d{1,"+e+"}"),t)}}function bI(e,t){switch(e){case 1:return ns(ks.singleDigitSigned,t);case 2:return ns(ks.twoDigitsSigned,t);case 3:return ns(ks.threeDigitsSigned,t);case 4:return ns(ks.fourDigitsSigned,t);default:return ns(new RegExp("^-?\\d{1,"+e+"}"),t)}}function F8(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function mde(e,t){const n=t>0,r=n?t:1-t;let i;if(r<=50)i=e||100;else{const s=r+50,f=Math.trunc(s/100)*100,a=e>=s%100;i=e+f-(a?100:0)}return n?i:1-i}function gde(e){return e%400===0||e%4===0&&e%100!==0}class Cqe extends Ba{constructor(){super(...arguments);ir(this,"priority",130);ir(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=f=>({year:f,isTwoDigitYear:r==="yy"});switch(r){case"y":return Ls(vs(4,n),s);case"yo":return Ls(i.ordinalNumber(n,{unit:"year"}),s);default:return Ls(vs(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=mde(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const f=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(f,0,1),n.setHours(0,0,0,0),n}}class Mqe extends Ba{constructor(){super(...arguments);ir(this,"priority",130);ir(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=f=>({year:f,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Ls(vs(4,n),s);case"Yo":return Ls(i.ordinalNumber(n,{unit:"year"}),s);default:return Ls(vs(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const f=z8(n,s);if(i.isTwoDigitYear){const p=mde(i.year,f);return n.setFullYear(p,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),i_(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),i_(n,s)}}class Dqe extends Ba{constructor(){super(...arguments);ir(this,"priority",130);ir(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return bI(r==="R"?4:r.length,n)}set(n,r,i){const s=Ha(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),lS(s)}}class Iqe extends Ba{constructor(){super(...arguments);ir(this,"priority",130);ir(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return bI(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class Pqe extends Ba{constructor(){super(...arguments);ir(this,"priority",120);ir(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return vs(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Rqe extends Ba{constructor(){super(...arguments);ir(this,"priority",120);ir(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return vs(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class kqe extends Ba{constructor(){super(...arguments);ir(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ir(this,"priority",110)}parse(n,r,i){const s=f=>f-1;switch(r){case"M":return Ls(ns(ks.month,n),s);case"MM":return Ls(vs(2,n),s);case"Mo":return Ls(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class Lqe extends Ba{constructor(){super(...arguments);ir(this,"priority",110);ir(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=f=>f-1;switch(r){case"L":return Ls(ns(ks.month,n),s);case"LL":return Ls(vs(2,n),s);case"Lo":return Ls(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function zqe(e,t,n){const r=lr(e),i=ude(r,n)-t;return r.setDate(r.getDate()-i*7),r}class Fqe extends Ba{constructor(){super(...arguments);ir(this,"priority",100);ir(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return ns(ks.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return vs(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return i_(zqe(n,i,s),s)}}function Nqe(e,t){const n=lr(e),r=L8(n)-t;return n.setDate(n.getDate()-r*7),n}class Bqe extends Ba{constructor(){super(...arguments);ir(this,"priority",100);ir(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return ns(ks.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return vs(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return lS(Nqe(n,i))}}const jqe=[31,28,31,30,31,30,31,31,30,31,30,31],Uqe=[31,29,31,30,31,30,31,31,30,31,30,31];class $qe extends Ba{constructor(){super(...arguments);ir(this,"priority",90);ir(this,"subPriority",1);ir(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return ns(ks.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return vs(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=gde(i),f=n.getMonth();return s?r>=1&&r<=Uqe[f]:r>=1&&r<=jqe[f]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class Vqe extends Ba{constructor(){super(...arguments);ir(this,"priority",90);ir(this,"subpriority",1);ir(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return ns(ks.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return vs(r.length,n)}}validate(n,r){const i=n.getFullYear();return gde(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function N8(e,t,n){var E,I,z,F;const r=Vx(),i=(n==null?void 0:n.weekStartsOn)??((I=(E=n==null?void 0:n.locale)==null?void 0:E.options)==null?void 0:I.weekStartsOn)??r.weekStartsOn??((F=(z=r.locale)==null?void 0:z.options)==null?void 0:F.weekStartsOn)??0,s=lr(e),f=s.getDay(),p=(t%7+7)%7,_=7-i,S=t<0||t>6?t-(f+_)%7:(p+_)%7-(f+_)%7;return bp(s,S)}class qqe extends Ba{constructor(){super(...arguments);ir(this,"priority",90);ir(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=N8(n,i,s),n.setHours(0,0,0,0),n}}class Hqe extends Ba{constructor(){super(...arguments);ir(this,"priority",90);ir(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const f=a=>{const p=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+p};switch(r){case"e":case"ee":return Ls(vs(r.length,n),f);case"eo":return Ls(i.ordinalNumber(n,{unit:"day"}),f);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=N8(n,i,s),n.setHours(0,0,0,0),n}}class Gqe extends Ba{constructor(){super(...arguments);ir(this,"priority",90);ir(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const f=a=>{const p=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+p};switch(r){case"c":case"cc":return Ls(vs(r.length,n),f);case"co":return Ls(i.ordinalNumber(n,{unit:"day"}),f);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=N8(n,i,s),n.setHours(0,0,0,0),n}}function Yqe(e,t){const n=lr(e),r=xqe(n),i=t-r;return bp(n,i)}class Wqe extends Ba{constructor(){super(...arguments);ir(this,"priority",90);ir(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=f=>f===0?7:f;switch(r){case"i":case"ii":return vs(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Ls(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return Ls(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Ls(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Ls(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=Yqe(n,i),n.setHours(0,0,0,0),n}}class Xqe extends Ba{constructor(){super(...arguments);ir(this,"priority",80);ir(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(F8(i),0,0,0),n}}class Zqe extends Ba{constructor(){super(...arguments);ir(this,"priority",80);ir(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(F8(i),0,0,0),n}}class Kqe extends Ba{constructor(){super(...arguments);ir(this,"priority",80);ir(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(F8(i),0,0,0),n}}class Qqe extends Ba{constructor(){super(...arguments);ir(this,"priority",70);ir(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return ns(ks.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return vs(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class Jqe extends Ba{constructor(){super(...arguments);ir(this,"priority",70);ir(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return ns(ks.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return vs(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class e9e extends Ba{constructor(){super(...arguments);ir(this,"priority",70);ir(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return ns(ks.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return vs(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class t9e extends Ba{constructor(){super(...arguments);ir(this,"priority",70);ir(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return ns(ks.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return vs(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class n9e extends Ba{constructor(){super(...arguments);ir(this,"priority",60);ir(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return ns(ks.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return vs(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class r9e extends Ba{constructor(){super(...arguments);ir(this,"priority",50);ir(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return ns(ks.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return vs(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class i9e extends Ba{constructor(){super(...arguments);ir(this,"priority",30);ir(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Ls(vs(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class a9e extends Ba{constructor(){super(...arguments);ir(this,"priority",10);ir(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return qm(Vm.basicOptionalMinutes,n);case"XX":return qm(Vm.basic,n);case"XXXX":return qm(Vm.basicOptionalSeconds,n);case"XXXXX":return qm(Vm.extendedOptionalSeconds,n);case"XXX":default:return qm(Vm.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Ha(n,n.getTime()-dI(n)-i)}}class o9e extends Ba{constructor(){super(...arguments);ir(this,"priority",10);ir(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return qm(Vm.basicOptionalMinutes,n);case"xx":return qm(Vm.basic,n);case"xxxx":return qm(Vm.basicOptionalSeconds,n);case"xxxxx":return qm(Vm.extendedOptionalSeconds,n);case"xxx":default:return qm(Vm.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Ha(n,n.getTime()-dI(n)-i)}}class s9e extends Ba{constructor(){super(...arguments);ir(this,"priority",40);ir(this,"incompatibleTokens","*")}parse(n){return pde(n)}set(n,r,i){return[Ha(n,i*1e3),{timestampIsSet:!0}]}}class l9e extends Ba{constructor(){super(...arguments);ir(this,"priority",20);ir(this,"incompatibleTokens","*")}parse(n){return pde(n)}set(n,r,i){return[Ha(n,i),{timestampIsSet:!0}]}}const u9e={G:new Oqe,y:new Cqe,Y:new Mqe,R:new Dqe,u:new Iqe,Q:new Pqe,q:new Rqe,M:new kqe,L:new Lqe,w:new Fqe,I:new Bqe,d:new $qe,D:new Vqe,E:new qqe,e:new Hqe,c:new Gqe,i:new Wqe,a:new Xqe,b:new Zqe,B:new Kqe,h:new Qqe,H:new Jqe,K:new e9e,k:new t9e,m:new n9e,s:new r9e,S:new i9e,X:new a9e,x:new o9e,t:new s9e,T:new l9e},c9e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,f9e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,h9e=/^'([^]*?)'?$/,d9e=/''/g,p9e=/\S/,m9e=/[a-zA-Z]/;function sF(e,t,n,r){var U,k,V,K,J,ie,Q,W;const i=bqe(),s=(r==null?void 0:r.locale)??i.locale??lde,f=(r==null?void 0:r.firstWeekContainsDate)??((k=(U=r==null?void 0:r.locale)==null?void 0:U.options)==null?void 0:k.firstWeekContainsDate)??i.firstWeekContainsDate??((K=(V=i.locale)==null?void 0:V.options)==null?void 0:K.firstWeekContainsDate)??1,a=(r==null?void 0:r.weekStartsOn)??((ie=(J=r==null?void 0:r.locale)==null?void 0:J.options)==null?void 0:ie.weekStartsOn)??i.weekStartsOn??((W=(Q=i.locale)==null?void 0:Q.options)==null?void 0:W.weekStartsOn)??0;if(t==="")return e===""?lr(n):Ha(n,NaN);const p={firstWeekContainsDate:f,weekStartsOn:a,locale:s},_=[new Aqe],S=t.match(f9e).map(te=>{const X=te[0];if(X in vI){const ae=vI[X];return ae(te,s.formatLong)}return te}).join("").match(c9e),E=[];for(let te of S){!(r!=null&&r.useAdditionalWeekYearTokens)&&hde(te)&&s6(te,t,e),!(r!=null&&r.useAdditionalDayOfYearTokens)&&fde(te)&&s6(te,t,e);const X=te[0],ae=u9e[X];if(ae){const{incompatibleTokens:le}=ae;if(Array.isArray(le)){const ye=E.find(De=>le.includes(De.token)||De.token===X);if(ye)throw new RangeError(`The format string mustn't contain \`${ye.fullToken}\` and \`${te}\` at the same time`)}else if(ae.incompatibleTokens==="*"&&E.length>0)throw new RangeError(`The format string mustn't contain \`${te}\` and any other token at the same time`);E.push({token:X,fullToken:te});const ge=ae.run(e,te,s.match,p);if(!ge)return Ha(n,NaN);_.push(ge.setter),e=ge.rest}else{if(X.match(m9e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+X+"`");if(te==="''"?te="'":X==="'"&&(te=g9e(te)),e.indexOf(te)===0)e=e.slice(te.length);else return Ha(n,NaN)}}if(e.length>0&&p9e.test(e))return Ha(n,NaN);const I=_.map(te=>te.priority).sort((te,X)=>X-te).filter((te,X,ae)=>ae.indexOf(te)===X).map(te=>_.filter(X=>X.priority===te).sort((X,ae)=>ae.subPriority-X.subPriority)).map(te=>te[0]);let z=lr(n);if(isNaN(z.getTime()))return Ha(n,NaN);const F={};for(const te of I){if(!te.validate(z,p))return Ha(n,NaN);const X=te.set(z,F,p);Array.isArray(X)?(z=X[0],Object.assign(F,X[1])):z=X}return Ha(n,z)}function g9e(e){return e.match(h9e)[1].replace(d9e,"'")}function y9e(e,t){const n=lr(e),r=lr(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function _9e(e,t){const n=o6(e),r=o6(t);return+n==+r}function v9e(e,t){const n=lr(e),r=lr(t);return n.getFullYear()===r.getFullYear()}function eA(e,t){const n=+lr(e),[r,i]=[+lr(t.start),+lr(t.end)].sort((s,f)=>s-f);return n>=r&&n<=i}function b9e(e,t){return bp(e,-1)}function x9e(e,t){const r=E9e(e);let i;if(r.date){const p=A9e(r.date,2);i=O9e(p.restDateString,p.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let f=0,a;if(r.time&&(f=C9e(r.time),isNaN(f)))return new Date(NaN);if(r.timezone){if(a=M9e(r.timezone),isNaN(a))return new Date(NaN)}else{const p=new Date(s+f),_=new Date(0);return _.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),_.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),_}return new Date(s+f+a)}const CM={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},w9e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,S9e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,T9e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function E9e(e){const t={},n=e.split(CM.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],CM.timeZoneDelimiter.test(t.date)&&(t.date=e.split(CM.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=CM.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function A9e(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:e.slice((r[1]||r[2]).length)}}function O9e(e,t){if(t===null)return new Date(NaN);const n=e.match(w9e);if(!n)return new Date(NaN);const r=!!n[4],i=NE(n[1]),s=NE(n[2])-1,f=NE(n[3]),a=NE(n[4]),p=NE(n[5])-1;if(r)return k9e(t,a,p)?D9e(t,a,p):new Date(NaN);{const _=new Date(0);return!P9e(t,s,f)||!R9e(t,i)?new Date(NaN):(_.setUTCFullYear(t,s,Math.max(i,f)),_)}}function NE(e){return e?parseInt(e):1}function C9e(e){const t=e.match(S9e);if(!t)return NaN;const n=lF(t[1]),r=lF(t[2]),i=lF(t[3]);return L9e(n,r,i)?n*VR+r*$R+i*1e3:NaN}function lF(e){return e&&parseFloat(e.replace(",","."))||0}function M9e(e){if(e==="Z")return 0;const t=e.match(T9e);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return z9e(r,i)?n*(r*VR+i*$R):NaN}function D9e(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const I9e=[31,null,31,30,31,30,31,31,30,31,30,31];function yde(e){return e%400===0||e%4===0&&e%100!==0}function P9e(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(I9e[t]||(yde(e)?29:28))}function R9e(e,t){return t>=1&&t<=(yde(e)?366:365)}function k9e(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function L9e(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function z9e(e,t){return t>=0&&t<=59}function Gf(e,t){const n=lr(e),r=n.getFullYear(),i=n.getDate(),s=Ha(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const f=vqe(s);return n.setMonth(t,Math.min(i,f)),n}function F9e(e,t){let n=lr(e);return isNaN(+n)?Ha(e,NaN):(t.year!=null&&n.setFullYear(t.year),t.month!=null&&(n=Gf(n,t.month)),t.date!=null&&n.setDate(t.date),t.hours!=null&&n.setHours(t.hours),t.minutes!=null&&n.setMinutes(t.minutes),t.seconds!=null&&n.setSeconds(t.seconds),t.milliseconds!=null&&n.setMilliseconds(t.milliseconds),n)}function yD(e,t){const n=lr(e);return n.setHours(t),n}function _D(e,t){const n=lr(e);return n.setMinutes(t),n}function mw(e,t){const n=lr(e),r=Math.trunc(n.getMonth()/3)+1,i=t-r;return Gf(n,n.getMonth()+i*3)}function vD(e,t){const n=lr(e);return n.setSeconds(t),n}function Lm(e,t){const n=lr(e);return isNaN(+n)?Ha(e,NaN):(n.setFullYear(t),n)}function rx(e,t){return Ap(e,-t)}function _de(e,t){return k8(e,-1)}function CK(e,t){return pI(e,-1)}function cS(e,t){return Uy(e,-t)}function HR(){return typeof window<"u"}function sT(e){return vde(e)?(e.nodeName||"").toLowerCase():"#document"}function Jf(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gg(e){var t;return(t=(vde(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function vde(e){return HR()?e instanceof Node||e instanceof Jf(e).Node:!1}function mc(e){return HR()?e instanceof Element||e instanceof Jf(e).Element:!1}function cg(e){return HR()?e instanceof HTMLElement||e instanceof Jf(e).HTMLElement:!1}function MK(e){return!HR()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jf(e).ShadowRoot}const N9e=new Set(["inline","contents"]);function EO(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=sd(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!N9e.has(i)}const B9e=new Set(["table","td","th"]);function j9e(e){return B9e.has(sT(e))}const U9e=[":popover-open",":modal"];function GR(e){return U9e.some(t=>{try{return e.matches(t)}catch{return!1}})}const $9e=["transform","translate","scale","rotate","perspective"],V9e=["transform","translate","scale","rotate","perspective","filter"],q9e=["paint","layout","strict","content"];function B8(e){const t=j8(),n=mc(e)?sd(e):e;return $9e.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||V9e.some(r=>(n.willChange||"").includes(r))||q9e.some(r=>(n.contain||"").includes(r))}function H9e(e){let t=i0(e);for(;cg(t)&&!fS(t);){if(B8(t))return t;if(GR(t))return null;t=i0(t)}return null}function j8(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const G9e=new Set(["html","body","#document"]);function fS(e){return G9e.has(sT(e))}function sd(e){return Jf(e).getComputedStyle(e)}function YR(e){return mc(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function i0(e){if(sT(e)==="html")return e;const t=e.assignedSlot||e.parentNode||MK(e)&&e.host||gg(e);return MK(t)?t.host:t}function bde(e){const t=i0(e);return fS(t)?e.ownerDocument?e.ownerDocument.body:e.body:cg(t)&&EO(t)?t:bde(t)}function tA(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=bde(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),f=Jf(i);if(s){const a=u6(f);return t.concat(f,f.visualViewport||[],EO(i)?i:[],a&&n?tA(a):[])}return t.concat(i,tA(i,[],n))}function u6(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const hS=Math.min,ix=Math.max,xI=Math.round,MM=Math.floor,ng=e=>({x:e,y:e}),Y9e={left:"right",right:"left",bottom:"top",top:"bottom"},W9e={start:"end",end:"start"};function X9e(e,t,n){return ix(e,hS(t,n))}function WR(e,t){return typeof e=="function"?e(t):e}function dS(e){return e.split("-")[0]}function AO(e){return e.split("-")[1]}function Z9e(e){return e==="x"?"y":"x"}function U8(e){return e==="y"?"height":"width"}const K9e=new Set(["top","bottom"]);function Hb(e){return K9e.has(dS(e))?"y":"x"}function $8(e){return Z9e(Hb(e))}function Q9e(e,t,n){n===void 0&&(n=!1);const r=AO(e),i=$8(e),s=U8(i);let f=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(f=wI(f)),[f,wI(f)]}function J9e(e){const t=wI(e);return[c6(e),t,c6(t)]}function c6(e){return e.replace(/start|end/g,t=>W9e[t])}const DK=["left","right"],IK=["right","left"],eHe=["top","bottom"],tHe=["bottom","top"];function nHe(e,t,n){switch(e){case"top":case"bottom":return n?t?IK:DK:t?DK:IK;case"left":case"right":return t?eHe:tHe;default:return[]}}function rHe(e,t,n,r){const i=AO(e);let s=nHe(dS(e),n==="start",r);return i&&(s=s.map(f=>f+"-"+i),t&&(s=s.concat(s.map(c6)))),s}function wI(e){return e.replace(/left|right|bottom|top/g,t=>Y9e[t])}function iHe(e){return{top:0,right:0,bottom:0,left:0,...e}}function xde(e){return typeof e!="number"?iHe(e):{top:e,right:e,bottom:e,left:e}}function SI(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}var aHe=typeof document<"u",oHe=function(){},TI=aHe?be.useLayoutEffect:oHe;const sHe={...MD},lHe=sHe.useInsertionEffect,uHe=lHe||(e=>e());function cHe(e){const t=be.useRef(()=>{});return uHe(()=>{t.current=e}),be.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function PK(e,t,n){let{reference:r,floating:i}=e;const s=Hb(t),f=$8(t),a=U8(f),p=dS(t),_=s==="y",S=r.x+r.width/2-i.width/2,E=r.y+r.height/2-i.height/2,I=r[a]/2-i[a]/2;let z;switch(p){case"top":z={x:S,y:r.y-i.height};break;case"bottom":z={x:S,y:r.y+r.height};break;case"right":z={x:r.x+r.width,y:E};break;case"left":z={x:r.x-i.width,y:E};break;default:z={x:r.x,y:r.y}}switch(AO(t)){case"start":z[f]-=I*(n&&_?-1:1);break;case"end":z[f]+=I*(n&&_?-1:1);break}return z}async function fHe(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:f,elements:a,strategy:p}=e,{boundary:_="clippingAncestors",rootBoundary:S="viewport",elementContext:E="floating",altBoundary:I=!1,padding:z=0}=WR(t,e),F=xde(z),k=a[I?E==="floating"?"reference":"floating":E],V=SI(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(k)))==null||n?k:k.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:_,rootBoundary:S,strategy:p})),K=E==="floating"?{x:r,y:i,width:f.floating.width,height:f.floating.height}:f.reference,J=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),ie=await(s.isElement==null?void 0:s.isElement(J))?await(s.getScale==null?void 0:s.getScale(J))||{x:1,y:1}:{x:1,y:1},Q=SI(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:K,offsetParent:J,strategy:p}):K);return{top:(V.top-Q.top+F.top)/ie.y,bottom:(Q.bottom-V.bottom+F.bottom)/ie.y,left:(V.left-Q.left+F.left)/ie.x,right:(Q.right-V.right+F.right)/ie.x}}const hHe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:f}=n,a=s.filter(Boolean),p=await(f.isRTL==null?void 0:f.isRTL(t));let _=await f.getElementRects({reference:e,floating:t,strategy:i}),{x:S,y:E}=PK(_,r,p),I=r,z={},F=0;for(let k=0;k<a.length;k++){var U;const{name:V,fn:K}=a[k],{x:J,y:ie,data:Q,reset:W}=await K({x:S,y:E,initialPlacement:r,placement:I,strategy:i,middlewareData:z,rects:_,platform:{...f,detectOverflow:(U=f.detectOverflow)!=null?U:fHe},elements:{reference:e,floating:t}});S=J??S,E=ie??E,z={...z,[V]:{...z[V],...Q}},W&&F<=50&&(F++,typeof W=="object"&&(W.placement&&(I=W.placement),W.rects&&(_=W.rects===!0?await f.getElementRects({reference:e,floating:t,strategy:i}):W.rects),{x:S,y:E}=PK(_,I,p)),k=-1)}return{x:S,y:E,placement:I,strategy:i,middlewareData:z}},dHe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:f,elements:a,middlewareData:p}=t,{element:_,padding:S=0}=WR(e,t)||{};if(_==null)return{};const E=xde(S),I={x:n,y:r},z=$8(i),F=U8(z),U=await f.getDimensions(_),k=z==="y",V=k?"top":"left",K=k?"bottom":"right",J=k?"clientHeight":"clientWidth",ie=s.reference[F]+s.reference[z]-I[z]-s.floating[F],Q=I[z]-s.reference[z],W=await(f.getOffsetParent==null?void 0:f.getOffsetParent(_));let te=W?W[J]:0;(!te||!await(f.isElement==null?void 0:f.isElement(W)))&&(te=a.floating[J]||s.floating[F]);const X=ie/2-Q/2,ae=te/2-U[F]/2-1,le=hS(E[V],ae),ge=hS(E[K],ae),ye=le,De=te-U[F]-ge,He=te/2-U[F]/2+X,Be=X9e(ye,He,De),Ee=!p.arrow&&AO(i)!=null&&He!==Be&&s.reference[F]/2-(He<ye?le:ge)-U[F]/2<0,Ne=Ee?He<ye?He-ye:He-De:0;return{[z]:I[z]+Ne,data:{[z]:Be,centerOffset:He-Be-Ne,...Ee&&{alignmentOffset:Ne}},reset:Ee}}}),pHe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:f,initialPlacement:a,platform:p,elements:_}=t,{mainAxis:S=!0,crossAxis:E=!0,fallbackPlacements:I,fallbackStrategy:z="bestFit",fallbackAxisSideDirection:F="none",flipAlignment:U=!0,...k}=WR(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const V=dS(i),K=Hb(a),J=dS(a)===a,ie=await(p.isRTL==null?void 0:p.isRTL(_.floating)),Q=I||(J||!U?[wI(a)]:J9e(a)),W=F!=="none";!I&&W&&Q.push(...rHe(a,U,F,ie));const te=[a,...Q],X=await p.detectOverflow(t,k),ae=[];let le=((r=s.flip)==null?void 0:r.overflows)||[];if(S&&ae.push(X[V]),E){const He=Q9e(i,f,ie);ae.push(X[He[0]],X[He[1]])}if(le=[...le,{placement:i,overflows:ae}],!ae.every(He=>He<=0)){var ge,ye;const He=(((ge=s.flip)==null?void 0:ge.index)||0)+1,Be=te[He];if(Be&&(!(E==="alignment"?K!==Hb(Be):!1)||le.every(at=>Hb(at.placement)===K?at.overflows[0]>0:!0)))return{data:{index:He,overflows:le},reset:{placement:Be}};let Ee=(ye=le.filter(Ne=>Ne.overflows[0]<=0).sort((Ne,at)=>Ne.overflows[1]-at.overflows[1])[0])==null?void 0:ye.placement;if(!Ee)switch(z){case"bestFit":{var De;const Ne=(De=le.filter(at=>{if(W){const yt=Hb(at.placement);return yt===K||yt==="y"}return!0}).map(at=>[at.placement,at.overflows.filter(yt=>yt>0).reduce((yt,je)=>yt+je,0)]).sort((at,yt)=>at[1]-yt[1])[0])==null?void 0:De[0];Ne&&(Ee=Ne);break}case"initialPlacement":Ee=a;break}if(i!==Ee)return{reset:{placement:Ee}}}return{}}}},mHe=new Set(["left","top"]);async function gHe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),f=dS(n),a=AO(n),p=Hb(n)==="y",_=mHe.has(f)?-1:1,S=s&&p?-1:1,E=WR(t,e);let{mainAxis:I,crossAxis:z,alignmentAxis:F}=typeof E=="number"?{mainAxis:E,crossAxis:0,alignmentAxis:null}:{mainAxis:E.mainAxis||0,crossAxis:E.crossAxis||0,alignmentAxis:E.alignmentAxis};return a&&typeof F=="number"&&(z=a==="end"?F*-1:F),p?{x:z*S,y:I*_}:{x:I*_,y:z*S}}const yHe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:f,middlewareData:a}=t,p=await gHe(t,e);return f===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+p.x,y:s+p.y,data:{...p,placement:f}}}}};function wde(e){const t=sd(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=cg(e),s=i?e.offsetWidth:n,f=i?e.offsetHeight:r,a=xI(n)!==s||xI(r)!==f;return a&&(n=s,r=f),{width:n,height:r,$:a}}function V8(e){return mc(e)?e:e.contextElement}function Pw(e){const t=V8(e);if(!cg(t))return ng(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=wde(t);let f=(s?xI(n.width):n.width)/r,a=(s?xI(n.height):n.height)/i;return(!f||!Number.isFinite(f))&&(f=1),(!a||!Number.isFinite(a))&&(a=1),{x:f,y:a}}const _He=ng(0);function Sde(e){const t=Jf(e);return!j8()||!t.visualViewport?_He:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vHe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Jf(e)?!1:t}function Sx(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=V8(e);let f=ng(1);t&&(r?mc(r)&&(f=Pw(r)):f=Pw(e));const a=vHe(s,n,r)?Sde(s):ng(0);let p=(i.left+a.x)/f.x,_=(i.top+a.y)/f.y,S=i.width/f.x,E=i.height/f.y;if(s){const I=Jf(s),z=r&&mc(r)?Jf(r):r;let F=I,U=u6(F);for(;U&&r&&z!==F;){const k=Pw(U),V=U.getBoundingClientRect(),K=sd(U),J=V.left+(U.clientLeft+parseFloat(K.paddingLeft))*k.x,ie=V.top+(U.clientTop+parseFloat(K.paddingTop))*k.y;p*=k.x,_*=k.y,S*=k.x,E*=k.y,p+=J,_+=ie,F=Jf(U),U=u6(F)}}return SI({width:S,height:E,x:p,y:_})}function XR(e,t){const n=YR(e).scrollLeft;return t?t.left+n:Sx(gg(e)).left+n}function Tde(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-XR(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function bHe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",f=gg(r),a=t?GR(t.floating):!1;if(r===f||a&&s)return n;let p={scrollLeft:0,scrollTop:0},_=ng(1);const S=ng(0),E=cg(r);if((E||!E&&!s)&&((sT(r)!=="body"||EO(f))&&(p=YR(r)),cg(r))){const z=Sx(r);_=Pw(r),S.x=z.x+r.clientLeft,S.y=z.y+r.clientTop}const I=f&&!E&&!s?Tde(f,p):ng(0);return{width:n.width*_.x,height:n.height*_.y,x:n.x*_.x-p.scrollLeft*_.x+S.x+I.x,y:n.y*_.y-p.scrollTop*_.y+S.y+I.y}}function xHe(e){return Array.from(e.getClientRects())}function wHe(e){const t=gg(e),n=YR(e),r=e.ownerDocument.body,i=ix(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ix(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let f=-n.scrollLeft+XR(e);const a=-n.scrollTop;return sd(r).direction==="rtl"&&(f+=ix(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:f,y:a}}const RK=25;function SHe(e,t){const n=Jf(e),r=gg(e),i=n.visualViewport;let s=r.clientWidth,f=r.clientHeight,a=0,p=0;if(i){s=i.width,f=i.height;const S=j8();(!S||S&&t==="fixed")&&(a=i.offsetLeft,p=i.offsetTop)}const _=XR(r);if(_<=0){const S=r.ownerDocument,E=S.body,I=getComputedStyle(E),z=S.compatMode==="CSS1Compat"&&parseFloat(I.marginLeft)+parseFloat(I.marginRight)||0,F=Math.abs(r.clientWidth-E.clientWidth-z);F<=RK&&(s-=F)}else _<=RK&&(s+=_);return{width:s,height:f,x:a,y:p}}const THe=new Set(["absolute","fixed"]);function EHe(e,t){const n=Sx(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=cg(e)?Pw(e):ng(1),f=e.clientWidth*s.x,a=e.clientHeight*s.y,p=i*s.x,_=r*s.y;return{width:f,height:a,x:p,y:_}}function kK(e,t,n){let r;if(t==="viewport")r=SHe(e,n);else if(t==="document")r=wHe(gg(e));else if(mc(t))r=EHe(t,n);else{const i=Sde(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return SI(r)}function Ede(e,t){const n=i0(e);return n===t||!mc(n)||fS(n)?!1:sd(n).position==="fixed"||Ede(n,t)}function AHe(e,t){const n=t.get(e);if(n)return n;let r=tA(e,[],!1).filter(a=>mc(a)&&sT(a)!=="body"),i=null;const s=sd(e).position==="fixed";let f=s?i0(e):e;for(;mc(f)&&!fS(f);){const a=sd(f),p=B8(f);!p&&a.position==="fixed"&&(i=null),(s?!p&&!i:!p&&a.position==="static"&&!!i&&THe.has(i.position)||EO(f)&&!p&&Ede(e,f))?r=r.filter(S=>S!==f):i=a,f=i0(f)}return t.set(e,r),r}function OHe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const f=[...n==="clippingAncestors"?GR(t)?[]:AHe(t,this._c):[].concat(n),r],a=f[0],p=f.reduce((_,S)=>{const E=kK(t,S,i);return _.top=ix(E.top,_.top),_.right=hS(E.right,_.right),_.bottom=hS(E.bottom,_.bottom),_.left=ix(E.left,_.left),_},kK(t,a,i));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function CHe(e){const{width:t,height:n}=wde(e);return{width:t,height:n}}function MHe(e,t,n){const r=cg(t),i=gg(t),s=n==="fixed",f=Sx(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const p=ng(0);function _(){p.x=XR(i)}if(r||!r&&!s)if((sT(t)!=="body"||EO(i))&&(a=YR(t)),r){const z=Sx(t,!0,s,t);p.x=z.x+t.clientLeft,p.y=z.y+t.clientTop}else i&&_();s&&!r&&i&&_();const S=i&&!r&&!s?Tde(i,a):ng(0),E=f.left+a.scrollLeft-p.x-S.x,I=f.top+a.scrollTop-p.y-S.y;return{x:E,y:I,width:f.width,height:f.height}}function uF(e){return sd(e).position==="static"}function LK(e,t){if(!cg(e)||sd(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return gg(e)===n&&(n=n.ownerDocument.body),n}function Ade(e,t){const n=Jf(e);if(GR(e))return n;if(!cg(e)){let i=i0(e);for(;i&&!fS(i);){if(mc(i)&&!uF(i))return i;i=i0(i)}return n}let r=LK(e,t);for(;r&&j9e(r)&&uF(r);)r=LK(r,t);return r&&fS(r)&&uF(r)&&!B8(r)?n:r||H9e(e)||n}const DHe=async function(e){const t=this.getOffsetParent||Ade,n=this.getDimensions,r=await n(e.floating);return{reference:MHe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function IHe(e){return sd(e).direction==="rtl"}const PHe={convertOffsetParentRelativeRectToViewportRelativeRect:bHe,getDocumentElement:gg,getClippingRect:OHe,getOffsetParent:Ade,getElementRects:DHe,getClientRects:xHe,getDimensions:CHe,getScale:Pw,isElement:mc,isRTL:IHe};function Ode(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function RHe(e,t){let n=null,r;const i=gg(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function f(a,p){a===void 0&&(a=!1),p===void 0&&(p=1),s();const _=e.getBoundingClientRect(),{left:S,top:E,width:I,height:z}=_;if(a||t(),!I||!z)return;const F=MM(E),U=MM(i.clientWidth-(S+I)),k=MM(i.clientHeight-(E+z)),V=MM(S),J={rootMargin:-F+"px "+-U+"px "+-k+"px "+-V+"px",threshold:ix(0,hS(1,p))||1};let ie=!0;function Q(W){const te=W[0].intersectionRatio;if(te!==p){if(!ie)return f();te?f(!1,te):r=setTimeout(()=>{f(!1,1e-7)},1e3)}te===1&&!Ode(_,e.getBoundingClientRect())&&f(),ie=!1}try{n=new IntersectionObserver(Q,{...J,root:i.ownerDocument})}catch{n=new IntersectionObserver(Q,J)}n.observe(e)}return f(!0),s}function Cde(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:f=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:p=!1}=r,_=V8(e),S=i||s?[..._?tA(_):[],...tA(t)]:[];S.forEach(V=>{i&&V.addEventListener("scroll",n,{passive:!0}),s&&V.addEventListener("resize",n)});const E=_&&a?RHe(_,n):null;let I=-1,z=null;f&&(z=new ResizeObserver(V=>{let[K]=V;K&&K.target===_&&z&&(z.unobserve(t),cancelAnimationFrame(I),I=requestAnimationFrame(()=>{var J;(J=z)==null||J.observe(t)})),n()}),_&&!p&&z.observe(_),z.observe(t));let F,U=p?Sx(e):null;p&&k();function k(){const V=Sx(e);U&&!Ode(U,V)&&n(),U=V,F=requestAnimationFrame(k)}return n(),()=>{var V;S.forEach(K=>{i&&K.removeEventListener("scroll",n),s&&K.removeEventListener("resize",n)}),E==null||E(),(V=z)==null||V.disconnect(),z=null,p&&cancelAnimationFrame(F)}}const kHe=yHe,LHe=pHe,zK=dHe,zHe=(e,t,n)=>{const r=new Map,i={platform:PHe,...n},s={...i.platform,_c:r};return hHe(e,t,{...i,platform:s})};var FHe=typeof document<"u",NHe=function(){},bD=FHe?be.useLayoutEffect:NHe;function EI(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!EI(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!EI(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Mde(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function FK(e,t){const n=Mde(e);return Math.round(t*n)/n}function cF(e){const t=be.useRef(e);return bD(()=>{t.current=e}),t}function BHe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:f}={},transform:a=!0,whileElementsMounted:p,open:_}=e,[S,E]=be.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[I,z]=be.useState(r);EI(I,r)||z(r);const[F,U]=be.useState(null),[k,V]=be.useState(null),K=be.useCallback(at=>{at!==W.current&&(W.current=at,U(at))},[]),J=be.useCallback(at=>{at!==te.current&&(te.current=at,V(at))},[]),ie=s||F,Q=f||k,W=be.useRef(null),te=be.useRef(null),X=be.useRef(S),ae=p!=null,le=cF(p),ge=cF(i),ye=cF(_),De=be.useCallback(()=>{if(!W.current||!te.current)return;const at={placement:t,strategy:n,middleware:I};ge.current&&(at.platform=ge.current),zHe(W.current,te.current,at).then(yt=>{const je={...yt,isPositioned:ye.current!==!1};He.current&&!EI(X.current,je)&&(X.current=je,UU.flushSync(()=>{E(je)}))})},[I,t,n,ge,ye]);bD(()=>{_===!1&&X.current.isPositioned&&(X.current.isPositioned=!1,E(at=>({...at,isPositioned:!1})))},[_]);const He=be.useRef(!1);bD(()=>(He.current=!0,()=>{He.current=!1}),[]),bD(()=>{if(ie&&(W.current=ie),Q&&(te.current=Q),ie&&Q){if(le.current)return le.current(ie,Q,De);De()}},[ie,Q,De,le,ae]);const Be=be.useMemo(()=>({reference:W,floating:te,setReference:K,setFloating:J}),[K,J]),Ee=be.useMemo(()=>({reference:ie,floating:Q}),[ie,Q]),Ne=be.useMemo(()=>{const at={position:n,left:0,top:0};if(!Ee.floating)return at;const yt=FK(Ee.floating,S.x),je=FK(Ee.floating,S.y);return a?{...at,transform:"translate("+yt+"px, "+je+"px)",...Mde(Ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:yt,top:je}},[n,a,Ee.floating,S.x,S.y]);return be.useMemo(()=>({...S,update:De,refs:Be,elements:Ee,floatingStyles:Ne}),[S,De,Be,Ee,Ne])}const jHe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?zK({element:r.current,padding:i}).fn(n):{}:r?zK({element:r,padding:i}).fn(n):{}}}},UHe=(e,t)=>({...kHe(e),options:[e,t]}),$He=(e,t)=>({...LHe(e),options:[e,t]}),VHe=(e,t)=>({...jHe(e),options:[e,t]}),qHe={...MD};let NK=!1,HHe=0;const BK=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+HHe++;function GHe(){const[e,t]=be.useState(()=>NK?BK():void 0);return TI(()=>{e==null&&t(BK())},[]),be.useEffect(()=>{NK=!0},[]),e}const YHe=qHe.useId,Dde=YHe||GHe,WHe=be.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:i},middlewareData:{arrow:s,shift:f}},width:a=14,height:p=7,tipRadius:_=0,strokeWidth:S=0,staticOffset:E,stroke:I,d:z,style:{transform:F,...U}={},...k}=t,V=Dde(),[K,J]=be.useState(!1);if(TI(()=>{if(!i)return;sd(i).direction==="rtl"&&J(!0)},[i]),!i)return null;const[ie,Q]=r.split("-"),W=ie==="top"||ie==="bottom";let te=E;(W&&f!=null&&f.x||!W&&f!=null&&f.y)&&(te=null);const X=S*2,ae=X/2,le=a/2*(_/-8+1),ge=p/2*_/4,ye=!!z,De=te&&Q==="end"?"bottom":"top";let He=te&&Q==="end"?"right":"left";te&&K&&(He=Q==="end"?"left":"right");const Be=(s==null?void 0:s.x)!=null?te||s.x:"",Ee=(s==null?void 0:s.y)!=null?te||s.y:"",Ne=z||"M0,0"+(" H"+a)+(" L"+(a-le)+","+(p-ge))+(" Q"+a/2+","+p+" "+le+","+(p-ge))+" Z",at={top:ye?"rotate(180deg)":"",left:ye?"rotate(90deg)":"rotate(-90deg)",bottom:ye?"":"rotate(180deg)",right:ye?"rotate(-90deg)":"rotate(90deg)"}[ie];return Oe.jsxs("svg",{...k,"aria-hidden":!0,ref:n,width:ye?a:a+X,height:a,viewBox:"0 0 "+a+" "+(p>a?p:a),style:{position:"absolute",pointerEvents:"none",[He]:Be,[De]:Ee,[ie]:W||ye?"100%":"calc(100% - "+X/2+"px)",transform:[at,F].filter(yt=>!!yt).join(" "),...U},children:[X>0&&Oe.jsx("path",{clipPath:"url(#"+V+")",fill:"none",stroke:I,strokeWidth:X+(z?0:1),d:Ne}),Oe.jsx("path",{stroke:X&&!z?k.fill:"none",d:Ne}),Oe.jsx("clipPath",{id:V,children:Oe.jsx("rect",{x:-ae,y:ae*(ye?-1:1),width:a+X,height:a})})]})});function XHe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const ZHe=be.createContext(null),KHe=be.createContext(null),QHe=()=>{var e;return((e=be.useContext(ZHe))==null?void 0:e.id)||null},JHe=()=>be.useContext(KHe);function eGe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Dde(),s=be.useRef({}),[f]=be.useState(()=>XHe()),a=QHe()!=null,[p,_]=be.useState(r.reference),S=cHe((z,F,U)=>{s.current.openEvent=z?F:void 0,f.emit("openchange",{open:z,event:F,reason:U,nested:a}),n==null||n(z,F,U)}),E=be.useMemo(()=>({setPositionReference:_}),[]),I=be.useMemo(()=>({reference:p||r.reference||null,floating:r.floating||null,domReference:r.reference}),[p,r.reference,r.floating]);return be.useMemo(()=>({dataRef:s,open:t,onOpenChange:S,elements:I,events:f,floatingId:i,refs:E}),[t,S,I,f,i,E])}function tGe(e){e===void 0&&(e={});const{nodeId:t}=e,n=eGe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,f]=be.useState(null),[a,p]=be.useState(null),S=(i==null?void 0:i.domReference)||s,E=be.useRef(null),I=JHe();TI(()=>{S&&(E.current=S)},[S]);const z=BHe({...e,elements:{...i,...a&&{reference:a}}}),F=be.useCallback(J=>{const ie=mc(J)?{getBoundingClientRect:()=>J.getBoundingClientRect(),getClientRects:()=>J.getClientRects(),contextElement:J}:J;p(ie),z.refs.setReference(ie)},[z.refs]),U=be.useCallback(J=>{(mc(J)||J===null)&&(E.current=J,f(J)),(mc(z.refs.reference.current)||z.refs.reference.current===null||J!==null&&!mc(J))&&z.refs.setReference(J)},[z.refs]),k=be.useMemo(()=>({...z.refs,setReference:U,setPositionReference:F,domReference:E}),[z.refs,U,F]),V=be.useMemo(()=>({...z.elements,domReference:S}),[z.elements,S]),K=be.useMemo(()=>({...z,...r,refs:k,elements:V,nodeId:t}),[z,k,V,t,r]);return TI(()=>{r.dataRef.current.floatingContext=K;const J=I==null?void 0:I.nodesRef.current.find(ie=>ie.id===t);J&&(J.context=K)}),be.useMemo(()=>({...z,context:K,refs:k,elements:V}),[z,k,V,K])}/*!
  react-datepicker v7.6.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var f6=function(t,n){return f6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},f6(t,n)};function Nl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");f6(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ba=function(){return ba=Object.assign||function(n){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(n[f]=r[f])}return n},ba.apply(this,arguments)};function Ym(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var nGe=function(e){var t=e.showTimeSelectOnly,n=t===void 0?!1:t,r=e.showTime,i=r===void 0?!1:r,s=e.className,f=e.children,a=n?"Choose Time":"Choose Date".concat(i?" and Time":"");return Je.createElement("div",{className:s,role:"dialog","aria-label":a,"aria-modal":"true"},f)},rGe=function(e,t){var n=be.useRef(null),r=be.useRef(e);r.current=e;var i=be.useCallback(function(s){var f;n.current&&!n.current.contains(s.target)&&(t&&s.target instanceof HTMLElement&&s.target.classList.contains(t)||(f=r.current)===null||f===void 0||f.call(r,s))},[t]);return be.useEffect(function(){return document.addEventListener("mousedown",i),function(){document.removeEventListener("mousedown",i)}},[i]),n},ZR=function(e){var t=e.children,n=e.onClickOutside,r=e.className,i=e.containerRef,s=e.style,f=e.ignoreClass,a=rGe(n,f);return Je.createElement("div",{className:r,style:s,ref:function(p){a.current=p,i&&(i.current=p)}},t)},nr;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(nr||(nr={}));function Ide(){var e=typeof window<"u"?window:globalThis;return e}var OO=12,iGe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Ga(e){if(e==null)return new Date;var t=typeof e=="string"?x9e(e):lr(e);return Oy(t)?t:new Date}function fF(e,t,n,r,i){var s,f=null,a=ax(n)||ax(x2()),p=!0;if(Array.isArray(t))return t.forEach(function(S){var E=sF(e,S,new Date,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});r&&(p=Oy(E,i)&&e===Ro(E,S,n)),Oy(E,i)&&p&&(f=E)}),f;if(f=sF(e,t,new Date,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),r)p=Oy(f)&&e===Ro(f,t,n);else if(!Oy(f)){var _=((s=t.match(iGe))!==null&&s!==void 0?s:[]).map(function(S){var E=S[0];if(E==="p"||E==="P"){var I=vI[E];return a?I(S,a.formatLong):E}return S}).join("");e.length>0&&(f=sF(e,_.slice(0,e.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),Oy(f)||(f=new Date(e))}return Oy(f)&&p?f:null}function Oy(e,t){return mI(e)&&!wx(e,t??new Date("1/1/1800"))}function Ro(e,t,n){if(n==="en")return AK(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?ax(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&x2()&&ax(x2())&&(r=ax(x2())),AK(e,t,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Vh(e,t){var n=t.dateFormat,r=t.locale,i=Array.isArray(n)&&n.length>0?n[0]:n;return e&&Ro(e,i,r)||""}function aGe(e,t,n){if(!e)return"";var r=Vh(e,n),i=t?Vh(t,n):"";return"".concat(r," - ").concat(i)}function oGe(e,t){if(!(e!=null&&e.length))return"";var n=e[0]?Vh(e[0],t):"";if(e.length===1)return n;if(e.length===2&&e[1]){var r=Vh(e[1],t);return"".concat(n,", ").concat(r)}var i=e.length-1;return"".concat(n," (+").concat(i,")")}function hF(e,t){var n=t.hour,r=n===void 0?0:n,i=t.minute,s=i===void 0?0:i,f=t.second,a=f===void 0?0:f;return yD(_D(vD(e,a),s),r)}function sGe(e){return L8(e)}function lGe(e,t){return Ro(e,"ddd",t)}function xD(e){return xx(e)}function Gv(e,t,n){var r=ax(t||x2());return i_(e,{locale:r,weekStartsOn:n})}function qy(e){return ode(e)}function i2(e){return qR(e)}function jK(e){return o6(e)}function UK(){return xx(Ga())}function $K(e){return ide(e)}function uGe(e){return A8e(e)}function cGe(e){return ade(e)}function Nm(e,t){return e&&t?v9e(e,t):!e&&!t}function fc(e,t){return e&&t?y9e(e,t):!e&&!t}function AI(e,t){return e&&t?_9e(e,t):!e&&!t}function pa(e,t){return e&&t?T8e(e,t):!e&&!t}function Gb(e,t){return e&&t?wqe(e,t):!e&&!t}function a2(e,t,n){var r,i=xx(t),s=ide(n);try{r=eA(e,{start:i,end:s})}catch{r=!1}return r}function x2(){var e=Ide();return e.__localeId__}function ax(e){if(typeof e=="string"){var t=Ide();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function fGe(e,t,n){return t(Ro(e,"EEEE",n))}function hGe(e,t){return Ro(e,"EEEEEE",t)}function dGe(e,t){return Ro(e,"EEE",t)}function q8(e,t){return Ro(Gf(Ga(),e),"LLLL",t)}function Pde(e,t){return Ro(Gf(Ga(),e),"LLL",t)}function pGe(e,t){return Ro(mw(Ga(),e),"QQQ",t)}function Yh(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.maxDate,s=n.excludeDates,f=n.excludeDateIntervals,a=n.includeDates,p=n.includeDateIntervals,_=n.filterDate;return CO(e,{minDate:r,maxDate:i})||s&&s.some(function(S){return S instanceof Date?pa(e,S):pa(e,S.date)})||f&&f.some(function(S){var E=S.start,I=S.end;return eA(e,{start:E,end:I})})||a&&!a.some(function(S){return pa(e,S)})||p&&!p.some(function(S){var E=S.start,I=S.end;return eA(e,{start:E,end:I})})||_&&!_(Ga(e))||!1}function H8(e,t){var n=t===void 0?{}:t,r=n.excludeDates,i=n.excludeDateIntervals;return i&&i.length>0?i.some(function(s){var f=s.start,a=s.end;return eA(e,{start:f,end:a})}):r&&r.some(function(s){var f;return s instanceof Date?pa(e,s):pa(e,(f=s.date)!==null&&f!==void 0?f:new Date)})||!1}function Rde(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.maxDate,s=n.excludeDates,f=n.includeDates,a=n.filterDate;return CO(e,{minDate:r?ode(r):void 0,maxDate:i?ade(i):void 0})||(s==null?void 0:s.some(function(p){return fc(e,p instanceof Date?p:p.date)}))||f&&!f.some(function(p){return fc(e,p)})||a&&!a(Ga(e))||!1}function DM(e,t,n,r){var i=Ni(e),s=pc(e),f=Ni(t),a=pc(t),p=Ni(r);return i===f&&i===p?s<=n&&n<=a:i<f?p===i&&s<=n||p===f&&a>=n||p<f&&p>i:!1}function mGe(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.maxDate,s=n.excludeDates,f=n.includeDates;return CO(e,{minDate:r,maxDate:i})||s&&s.some(function(a){return fc(a instanceof Date?a:a.date,e)})||f&&!f.some(function(a){return fc(a,e)})||!1}function IM(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.maxDate,s=n.excludeDates,f=n.includeDates,a=n.filterDate;return CO(e,{minDate:r,maxDate:i})||(s==null?void 0:s.some(function(p){return AI(e,p instanceof Date?p:p.date)}))||f&&!f.some(function(p){return AI(e,p)})||a&&!a(Ga(e))||!1}function PM(e,t,n){if(!t||!n||!mI(t)||!mI(n))return!1;var r=Ni(t),i=Ni(n);return r<=e&&i>=e}function wD(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.maxDate,s=n.excludeDates,f=n.includeDates,a=n.filterDate,p=new Date(e,0,1);return CO(p,{minDate:r?qR(r):void 0,maxDate:i?sde(i):void 0})||(s==null?void 0:s.some(function(_){return Nm(p,_ instanceof Date?_:_.date)}))||f&&!f.some(function(_){return Nm(p,_)})||a&&!a(Ga(p))||!1}function RM(e,t,n,r){var i=Ni(e),s=nx(e),f=Ni(t),a=nx(t),p=Ni(r);return i===f&&i===p?s<=n&&n<=a:i<f?p===i&&s<=n||p===f&&a>=n||p<f&&p>i:!1}function CO(e,t){var n,r=t===void 0?{}:t,i=r.minDate,s=r.maxDate;return(n=i&&uS(e,i)<0||s&&uS(e,s)>0)!==null&&n!==void 0?n:!1}function VK(e,t){return t.some(function(n){return eg(n)===eg(e)&&tg(n)===tg(e)&&Vy(n)===Vy(e)})}function qK(e,t){var n=t===void 0?{}:t,r=n.excludeTimes,i=n.includeTimes,s=n.filterTime;return r&&VK(e,r)||i&&!VK(e,i)||s&&!s(e)||!1}function HK(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var i=Ga();i=yD(i,eg(e)),i=_D(i,tg(e)),i=vD(i,Vy(e));var s=Ga();s=yD(s,eg(n)),s=_D(s,tg(n)),s=vD(s,Vy(n));var f=Ga();f=yD(f,eg(r)),f=_D(f,tg(r)),f=vD(f,Vy(r));var a;try{a=!eA(i,{start:s,end:f})}catch{a=!1}return a}function GK(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.includeDates,s=rx(e,1);return r&&gI(r,s)>0||i&&i.every(function(f){return gI(f,s)>0})||!1}function YK(e,t){var n=t===void 0?{}:t,r=n.maxDate,i=n.includeDates,s=Ap(e,1);return r&&gI(s,r)>0||i&&i.every(function(f){return gI(s,f)>0})||!1}function gGe(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.includeDates,s=qR(e),f=_de(s);return r&&yI(r,f)>0||i&&i.every(function(a){return yI(a,f)>0})||!1}function yGe(e,t){var n=t===void 0?{}:t,r=n.maxDate,i=n.includeDates,s=sde(e),f=k8(s,1);return r&&yI(f,r)>0||i&&i.every(function(a){return yI(f,a)>0})||!1}function WK(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.includeDates,s=cS(e,1);return r&&_I(r,s)>0||i&&i.every(function(f){return _I(f,s)>0})||!1}function _Ge(e,t){var n=t===void 0?{}:t,r=n.minDate,i=n.yearItemNumber,s=i===void 0?OO:i,f=i2(cS(e,s)),a=jv(f,s).endPeriod,p=r&&Ni(r);return p&&p>a||!1}function XK(e,t){var n=t===void 0?{}:t,r=n.maxDate,i=n.includeDates,s=Uy(e,1);return r&&_I(s,r)>0||i&&i.every(function(f){return _I(s,f)>0})||!1}function vGe(e,t){var n=t===void 0?{}:t,r=n.maxDate,i=n.yearItemNumber,s=i===void 0?OO:i,f=Uy(e,s),a=jv(f,s).startPeriod,p=r&&Ni(r);return p&&p<a||!1}function kde(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter(function(i){return uS(i,t)>=0});return bK(r)}else return n?bK(n):t}function Lde(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter(function(i){return uS(i,t)<=0});return vK(r)}else return n?vK(n):t}function ZK(e,t){var n;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var r=new Map,i=0,s=e.length;i<s;i++){var f=e[i];if($y(f)){var a=Ro(f,"MM.dd.yyyy"),p=r.get(a)||[];p.includes(t)||(p.push(t),r.set(a,p))}else if(typeof f=="object"){var _=Object.keys(f),S=(n=_[0])!==null&&n!==void 0?n:"",E=f[S];if(typeof S=="string"&&Array.isArray(E))for(var I=0,z=E.length;I<z;I++){var F=E[I];if(F){var a=Ro(F,"MM.dd.yyyy"),p=r.get(a)||[];p.includes(S)||(p.push(S),r.set(a,p))}}}}return r}function bGe(e,t){return e.length!==t.length?!1:e.every(function(n,r){return n===t[r]})}function xGe(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach(function(r){var i=r.date,s=r.holidayName;if($y(i)){var f=Ro(i,"MM.dd.yyyy"),a=n.get(f)||{className:"",holidayNames:[]};if(!("className"in a&&a.className===t&&bGe(a.holidayNames,[s]))){a.className=t;var p=a.holidayNames;a.holidayNames=p?Ym(Ym([],p,!0),[s],!1):[s],n.set(f,a)}}}),n}function wGe(e,t,n,r,i){for(var s=i.length,f=[],a=0;a<s;a++){var p=e,_=i[a];_&&(p=b8e(p,eg(_)),p=a6(p,tg(_)),p=S8e(p,Vy(_)));var S=a6(e,(n+1)*r);r0(p,t)&&wx(p,S)&&_!=null&&f.push(_)}return f}function KK(e){return e<10?"0".concat(e):"".concat(e)}function jv(e,t){t===void 0&&(t=OO);var n=Math.ceil(Ni(e)/t)*t,r=n-(t-1);return{startPeriod:r,endPeriod:n}}function SGe(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}function QK(e){var t=e.getSeconds(),n=e.getMilliseconds();return lr(e.getTime()-t*1e3-n)}function TGe(e,t){return QK(e).getTime()===QK(t).getTime()}function JK(e){if(!$y(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function eQ(e,t){if(!$y(e)||!$y(t))throw new Error("Invalid date received");var n=JK(e),r=JK(t);return wx(n,r)}function zde(e){return e.key===nr.Space}var EGe=(function(e){Nl(t,e);function t(n){var r=e.call(this,n)||this;return r.inputRef=Je.createRef(),r.onTimeChange=function(i){var s,f;r.setState({time:i});var a=r.props.date,p=a instanceof Date&&!isNaN(+a),_=p?a:new Date;if(i!=null&&i.includes(":")){var S=i.split(":"),E=S[0],I=S[1];_.setHours(Number(E)),_.setMinutes(Number(I))}(f=(s=r.props).onChange)===null||f===void 0||f.call(s,_)},r.renderTimeInput=function(){var i=r.state.time,s=r.props,f=s.date,a=s.timeString,p=s.customTimeInput;return p?be.cloneElement(p,{date:f,value:i,onChange:r.onTimeChange}):Je.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var _;(_=r.inputRef.current)===null||_===void 0||_.focus()},required:!0,value:i,onChange:function(_){r.onTimeChange(_.target.value||a)}})},r.state={time:r.props.timeString},r}return t.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},t.prototype.render=function(){return Je.createElement("div",{className:"react-datepicker__input-time-container"},Je.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Je.createElement("div",{className:"react-datepicker-time__input-container"},Je.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t})(be.Component),AGe=(function(e){Nl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.dayEl=be.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var i,s,f=r.key;f===nr.Space&&(r.preventDefault(),r.key=nr.Enter),(s=(i=n.props).handleOnKeyDown)===null||s===void 0||s.call(i,r)},n.isSameDay=function(r){return pa(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var i=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(f){return n.isSameDayOrWeek(f)}):n.isSameDayOrWeek(n.props.selected),s=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!i&&n.isSameDayOrWeek(n.props.preSelection)&&!s},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),Yh(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(){return H8(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return pa(n.props.day,Gv(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&pa(r,Gv(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,i=r.day,s=r.highlightDates;if(!s)return!1;var f=Ro(i,"MM.dd.yyyy");return s.get(f)},n.getHolidaysClass=function(){var r,i=n.props,s=i.day,f=i.holidays;if(!f)return[void 0];var a=Ro(s,"MM.dd.yyyy");return f.has(a)?[(r=f.get(a))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,i=r.day,s=r.startDate,f=r.endDate;return!s||!f?!1:a2(i,s,f)},n.isInSelectingRange=function(){var r,i=n.props,s=i.day,f=i.selectsStart,a=i.selectsEnd,p=i.selectsRange,_=i.selectsDisabledDaysInRange,S=i.startDate,E=i.endDate,I=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(f||a||p)||!I||!_&&n.isDisabled()?!1:f&&E&&(wx(I,E)||Gb(I,E))?a2(s,I,E):a&&S&&(r0(I,S)||Gb(I,S))||p&&S&&!E&&(r0(I,S)||Gb(I,S))?a2(s,S,I):!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var i=n.props,s=i.day,f=i.startDate,a=i.selectsStart,p=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return a?pa(s,p):pa(s,f)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var i=n.props,s=i.day,f=i.endDate,a=i.selectsEnd,p=i.selectsRange,_=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return a||p?pa(s,_):pa(s,f)},n.isRangeStart=function(){var r=n.props,i=r.day,s=r.startDate,f=r.endDate;return!s||!f?!1:pa(s,i)},n.isRangeEnd=function(){var r=n.props,i=r.day,s=r.startDate,f=r.endDate;return!s||!f?!1:pa(f,i)},n.isWeekend=function(){var r=_qe(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===pc(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(pc(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(Ga())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(i){return n.isSameDayOrWeek(i)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var i=n.props.dayClassName?n.props.dayClassName(r):void 0;return ri("react-datepicker__day",i,"react-datepicker__day--"+lGe(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,i=r.day,s=r.ariaLabelPrefixWhenEnabled,f=s===void 0?"Choose":s,a=r.ariaLabelPrefixWhenDisabled,p=a===void 0?"Not available":a,_=n.isDisabled()||n.isExcluded()?p:f;return"".concat(_," ").concat(Ro(i,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,i=r.day,s=r.holidays,f=s===void 0?new Map:s,a=r.excludeDates,p=Ro(i,"MM.dd.yyyy"),_=[];return f.has(p)&&_.push.apply(_,f.get(p).holidayNames),n.isExcluded()&&_.push(a==null?void 0:a.filter(function(S){return S instanceof Date?pa(S,i):pa(S==null?void 0:S.date,i)}).map(function(S){if(!(S instanceof Date))return S==null?void 0:S.message})),_.join(", ")},n.getTabIndex=function(){var r=n.props.selected,i=n.props.preSelection,s=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&pa(i,r))?0:-1;return s},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(OK(n.props.day),n.props.day):OK(n.props.day)},n.render=function(){return Je.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&Je.createElement("span",{className:"overlay"},n.getTitle()))},n}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},t.prototype.isDayActiveElement=function(){var n,r,i;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((i=document.activeElement)===null||i===void 0?void 0:i.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t})(be.Component),OGe=(function(e){Nl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.weekNumberEl=be.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var i,s,f=r.key;f===nr.Space&&(r.preventDefault(),r.key=nr.Enter),(s=(i=n.props).handleOnKeyDown)===null||s===void 0||s.call(i,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!pa(n.props.date,n.props.selected)&&pa(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||pa(n.props.date,n.props.selected)&&pa(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var i=!1;n.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&pa(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(i=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(i=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(i=!0)),i&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},t.prototype.render=function(){var n=this.props,r=n.weekNumber,i=n.isWeekDisabled,s=n.ariaLabelPrefix,f=s===void 0?t.defaultProps.ariaLabelPrefix:s,a=n.onClick,p={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!a&&!i,"react-datepicker__week-number--selected":!!a&&pa(this.props.date,this.props.selected)};return Je.createElement("div",{ref:this.weekNumberEl,className:ri(p),"aria-label":"".concat(f," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},t})(be.Component),CGe=(function(e){Nl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isDisabled=function(r){return Yh(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,i){n.props.onDayClick&&n.props.onDayClick(r,i)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,i,s){for(var f,a,p,_=new Date(r),S=0;S<7;S++){var E=new Date(r);E.setDate(E.getDate()+S);var I=!n.isDisabled(E);if(I){_=E;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(_,i,s),n.props.showWeekPicker&&n.handleDayClick(_,s),((f=n.props.shouldCloseOnSelect)!==null&&f!==void 0?f:t.defaultProps.shouldCloseOnSelect)&&((p=(a=n.props).setOpen)===null||p===void 0||p.call(a,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):sGe(r)},n.isWeekDisabled=function(){for(var r=n.startOfWeek(),i=bp(r,6),s=new Date(r);s<=i;){if(!n.isDisabled(s))return!1;s=bp(s,1)}return!0},n.renderDays=function(){var r=n.startOfWeek(),i=[],s=n.formatWeekNumber(r);if(n.props.showWeekNumber){var f=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,s):void 0;i.push(Je.createElement(OGe,ba({key:"W"},t.defaultProps,n.props,{weekNumber:s,isWeekDisabled:n.isWeekDisabled(),date:r,onClick:f})))}return i.concat([0,1,2,3,4,5,6].map(function(a){var p=bp(r,a);return Je.createElement(AGe,ba({},t.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:p.valueOf(),day:p,onClick:n.handleDayClick.bind(n,p),onMouseEnter:n.handleDayMouseEnter.bind(n,p)}))}))},n.startOfWeek=function(){return Gv(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!pa(n.startOfWeek(),n.props.selected)&&pa(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":pa(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return Je.createElement("div",{className:ri(n)},this.renderDays())},t})(be.Component),BE,MGe=6,Rw={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},dF=(BE={},BE[Rw.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},BE[Rw.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},BE[Rw.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},BE),kM=1;function tQ(e,t){return e?Rw.FOUR_COLUMNS:t?Rw.TWO_COLUMNS:Rw.THREE_COLUMNS}var DGe=(function(e){Nl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.MONTH_REFS=Ym([],Array(12),!0).map(function(){return be.createRef()}),n.QUARTER_REFS=Ym([],Array(4),!0).map(function(){return be.createRef()}),n.isDisabled=function(r){return Yh(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return H8(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,i){var s,f;(f=(s=n.props).onDayClick)===null||f===void 0||f.call(s,r,i,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var i,s;(s=(i=n.props).onDayMouseEnter)===null||s===void 0||s.call(i,r)},n.handleMouseLeave=function(){var r,i;(i=(r=n.props).onMouseLeave)===null||i===void 0||i.call(r)},n.isRangeStartMonth=function(r){var i=n.props,s=i.day,f=i.startDate,a=i.endDate;return!f||!a?!1:fc(Gf(s,r),f)},n.isRangeStartQuarter=function(r){var i=n.props,s=i.day,f=i.startDate,a=i.endDate;return!f||!a?!1:AI(mw(s,r),f)},n.isRangeEndMonth=function(r){var i=n.props,s=i.day,f=i.startDate,a=i.endDate;return!f||!a?!1:fc(Gf(s,r),a)},n.isRangeEndQuarter=function(r){var i=n.props,s=i.day,f=i.startDate,a=i.endDate;return!f||!a?!1:AI(mw(s,r),a)},n.isInSelectingRangeMonth=function(r){var i,s=n.props,f=s.day,a=s.selectsStart,p=s.selectsEnd,_=s.selectsRange,S=s.startDate,E=s.endDate,I=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return!(a||p||_)||!I?!1:a&&E?DM(I,E,r,f):p&&S||_&&S&&!E?DM(S,I,r,f):!1},n.isSelectingMonthRangeStart=function(r){var i;if(!n.isInSelectingRangeMonth(r))return!1;var s=n.props,f=s.day,a=s.startDate,p=s.selectsStart,_=Gf(f,r),S=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return p?fc(_,S):fc(_,a)},n.isSelectingMonthRangeEnd=function(r){var i;if(!n.isInSelectingRangeMonth(r))return!1;var s=n.props,f=s.day,a=s.endDate,p=s.selectsEnd,_=s.selectsRange,S=Gf(f,r),E=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return p||_?fc(S,E):fc(S,a)},n.isInSelectingRangeQuarter=function(r){var i,s=n.props,f=s.day,a=s.selectsStart,p=s.selectsEnd,_=s.selectsRange,S=s.startDate,E=s.endDate,I=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return!(a||p||_)||!I?!1:a&&E?RM(I,E,r,f):p&&S||_&&S&&!E?RM(S,I,r,f):!1},n.isWeekInMonth=function(r){var i=n.props.day,s=bp(r,6);return fc(r,i)||fc(s,i)},n.isCurrentMonth=function(r,i){return Ni(r)===Ni(Ga())&&i===pc(Ga())},n.isCurrentQuarter=function(r,i){return Ni(r)===Ni(Ga())&&i===nx(Ga())},n.isSelectedMonth=function(r,i,s){return pc(s)===i&&Ni(r)===Ni(s)},n.isSelectMonthInList=function(r,i,s){return s.some(function(f){return n.isSelectedMonth(r,i,f)})},n.isSelectedQuarter=function(r,i,s){return nx(r)===i&&Ni(r)===Ni(s)},n.renderWeeks=function(){for(var r=[],i=n.props.fixedHeight,s=0,f=!1,a=Gv(qy(n.props.day),n.props.locale,n.props.calendarStartDay),p=function(F){return n.props.showWeekPicker?Gv(F,n.props.locale,n.props.calendarStartDay):n.props.preSelection},_=function(F){return n.props.showWeekPicker?Gv(F,n.props.locale,n.props.calendarStartDay):n.props.selected},S=n.props.selected?_(n.props.selected):void 0,E=n.props.preSelection?p(n.props.preSelection):void 0;r.push(Je.createElement(CGe,ba({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:s,day:a,month:pc(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:S,preSelection:E,showWeekNumber:n.props.showWeekNumbers}))),!f;){s++,a=pI(a,1);var I=i&&s>=MGe,z=!i&&!n.isWeekInMonth(a);if(I||z)if(n.props.peekNextMonth)f=!0;else break}return r},n.onMonthClick=function(r,i){var s=n.isMonthDisabledForLabelDate(i),f=s.isDisabled,a=s.labelDate;f||n.handleDayClick(qy(a),r)},n.onMonthMouseEnter=function(r){var i=n.isMonthDisabledForLabelDate(r),s=i.isDisabled,f=i.labelDate;s||n.handleDayMouseEnter(qy(f))},n.handleMonthNavigation=function(r,i){var s,f,a,p;(f=(s=n.props).setPreSelection)===null||f===void 0||f.call(s,i),(p=(a=n.MONTH_REFS[r])===null||a===void 0?void 0:a.current)===null||p===void 0||p.focus()},n.handleKeyboardNavigation=function(r,i,s){var f,a=n.props,p=a.selected,_=a.preSelection,S=a.setPreSelection,E=a.minDate,I=a.maxDate,z=a.showFourColumnMonthYearPicker,F=a.showTwoColumnMonthYearPicker;if(_){var U=tQ(z,F),k=n.getVerticalOffset(U),V=(f=dF[U])===null||f===void 0?void 0:f.grid,K=function(te,X,ae){var le,ge,ye=X,De=ae;switch(te){case nr.ArrowRight:ye=Ap(X,kM),De=ae===11?0:ae+kM;break;case nr.ArrowLeft:ye=rx(X,kM),De=ae===0?11:ae-kM;break;case nr.ArrowUp:ye=rx(X,k),De=!((le=V==null?void 0:V[0])===null||le===void 0)&&le.includes(ae)?ae+12-k:ae-k;break;case nr.ArrowDown:ye=Ap(X,k),De=!((ge=V==null?void 0:V[V.length-1])===null||ge===void 0)&&ge.includes(ae)?ae-12+k:ae+k;break}return{newCalculatedDate:ye,newCalculatedMonth:De}},J=function(te,X,ae){for(var le=40,ge=te,ye=!1,De=0,He=K(ge,X,ae),Be=He.newCalculatedDate,Ee=He.newCalculatedMonth;!ye;){if(De>=le){Be=X,Ee=ae;break}if(E&&Be<E){ge=nr.ArrowRight;var Ne=K(ge,Be,Ee);Be=Ne.newCalculatedDate,Ee=Ne.newCalculatedMonth}if(I&&Be>I){ge=nr.ArrowLeft;var Ne=K(ge,Be,Ee);Be=Ne.newCalculatedDate,Ee=Ne.newCalculatedMonth}if(mGe(Be,n.props)){var Ne=K(ge,Be,Ee);Be=Ne.newCalculatedDate,Ee=Ne.newCalculatedMonth}else ye=!0;De++}return{newCalculatedDate:Be,newCalculatedMonth:Ee}};if(i===nr.Enter){n.isMonthDisabled(s)||(n.onMonthClick(r,s),S==null||S(p));return}var ie=J(i,_,s),Q=ie.newCalculatedDate,W=ie.newCalculatedMonth;switch(i){case nr.ArrowRight:case nr.ArrowLeft:case nr.ArrowUp:case nr.ArrowDown:n.handleMonthNavigation(W,Q);break}}},n.getVerticalOffset=function(r){var i,s;return(s=(i=dF[r])===null||i===void 0?void 0:i.verticalNavigationOffset)!==null&&s!==void 0?s:0},n.onMonthKeyDown=function(r,i){var s=n.props,f=s.disabledKeyboardNavigation,a=s.handleOnMonthKeyDown,p=r.key;p!==nr.Tab&&r.preventDefault(),f||n.handleKeyboardNavigation(r,p,i),a&&a(r)},n.onQuarterClick=function(r,i){var s=mw(n.props.day,i);IM(s,n.props)||n.handleDayClick(jK(s),r)},n.onQuarterMouseEnter=function(r){var i=mw(n.props.day,r);IM(i,n.props)||n.handleDayMouseEnter(jK(i))},n.handleQuarterNavigation=function(r,i){var s,f,a,p;n.isDisabled(i)||n.isExcluded(i)||((f=(s=n.props).setPreSelection)===null||f===void 0||f.call(s,i),(p=(a=n.QUARTER_REFS[r-1])===null||a===void 0?void 0:a.current)===null||p===void 0||p.focus())},n.onQuarterKeyDown=function(r,i){var s,f,a=r.key;if(!n.props.disabledKeyboardNavigation)switch(a){case nr.Enter:n.onQuarterClick(r,i),(f=(s=n.props).setPreSelection)===null||f===void 0||f.call(s,n.props.selected);break;case nr.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(i===4?1:i+1,k8(n.props.preSelection,1));break;case nr.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(i===1?4:i-1,_de(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(r){var i,s=n.props,f=s.day,a=s.minDate,p=s.maxDate,_=s.excludeDates,S=s.includeDates,E=Gf(f,r);return{isDisabled:(i=(a||p||_||S)&&Rde(E,n.props))!==null&&i!==void 0?i:!1,labelDate:E}},n.isMonthDisabled=function(r){var i=n.isMonthDisabledForLabelDate(r).isDisabled;return i},n.getMonthClassNames=function(r){var i=n.props,s=i.day,f=i.startDate,a=i.endDate,p=i.preSelection,_=i.monthClassName,S=_?_(Gf(s,r)):void 0,E=n.getSelection();return ri("react-datepicker__month-text","react-datepicker__month-".concat(r),S,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":E?n.isSelectMonthInList(s,r,E):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&p&&n.isSelectedMonth(s,r,p)&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":f&&a?DM(f,a,r,s):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(s,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var i=pc(n.props.preSelection),s=n.isMonthDisabledForLabelDate(i).isDisabled,f=r===i&&!(s||n.props.disabledKeyboardNavigation)?"0":"-1";return f},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var i=nx(n.props.preSelection),s=IM(n.props.day,n.props),f=r===i&&!(s||n.props.disabledKeyboardNavigation)?"0":"-1";return f},n.getAriaLabel=function(r){var i=n.props,s=i.chooseDayAriaLabelPrefix,f=s===void 0?"Choose":s,a=i.disabledDayAriaLabelPrefix,p=a===void 0?"Not available":a,_=i.day,S=i.locale,E=Gf(_,r),I=n.isDisabled(E)||n.isExcluded(E)?p:f;return"".concat(I," ").concat(Ro(E,"MMMM yyyy",S))},n.getQuarterClassNames=function(r){var i=n.props,s=i.day,f=i.startDate,a=i.endDate,p=i.selected,_=i.minDate,S=i.maxDate,E=i.excludeDates,I=i.includeDates,z=i.filterDate,F=i.preSelection,U=i.disabledKeyboardNavigation,k=(_||S||E||I||z)&&IM(mw(s,r),n.props);return ri("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":k,"react-datepicker__quarter-text--selected":p?n.isSelectedQuarter(s,r,p):void 0,"react-datepicker__quarter-text--keyboard-selected":!U&&F&&n.isSelectedQuarter(s,r,F)&&!k,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":f&&a?RM(f,a,r,s):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r)})},n.getMonthContent=function(r){var i=n.props,s=i.showFullMonthYearPicker,f=i.renderMonthContent,a=i.locale,p=i.day,_=Pde(r,a),S=q8(r,a);return f?f(r,_,S,p):s?S:_},n.getQuarterContent=function(r){var i,s=n.props,f=s.renderQuarterContent,a=s.locale,p=pGe(r,a);return(i=f==null?void 0:f(r,p))!==null&&i!==void 0?i:p},n.renderMonths=function(){var r,i=n.props,s=i.showTwoColumnMonthYearPicker,f=i.showFourColumnMonthYearPicker,a=i.day,p=i.selected,_=(r=dF[tQ(f,s)])===null||r===void 0?void 0:r.grid;return _==null?void 0:_.map(function(S,E){return Je.createElement("div",{className:"react-datepicker__month-wrapper",key:E},S.map(function(I,z){return Je.createElement("div",{ref:n.MONTH_REFS[I],key:z,onClick:function(F){n.onMonthClick(F,I)},onKeyDown:function(F){zde(F)&&(F.preventDefault(),F.key=nr.Enter),n.onMonthKeyDown(F,I)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(I)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(I)}:void 0,tabIndex:Number(n.getTabIndex(I)),className:n.getMonthClassNames(I),"aria-disabled":n.isMonthDisabled(I),role:"option","aria-label":n.getAriaLabel(I),"aria-current":n.isCurrentMonth(a,I)?"date":void 0,"aria-selected":p?n.isSelectedMonth(a,I,p):void 0},n.getMonthContent(I))}))})},n.renderQuarters=function(){var r=n.props,i=r.day,s=r.selected,f=[1,2,3,4];return Je.createElement("div",{className:"react-datepicker__quarter-wrapper"},f.map(function(a,p){return Je.createElement("div",{key:p,ref:n.QUARTER_REFS[p],role:"option",onClick:function(_){n.onQuarterClick(_,a)},onKeyDown:function(_){n.onQuarterKeyDown(_,a)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(a)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(a)}:void 0,className:n.getQuarterClassNames(a),"aria-selected":s?n.isSelectedQuarter(i,a,s):void 0,tabIndex:Number(n.getQuarterTabIndex(a)),"aria-current":n.isCurrentQuarter(i,a)?"date":void 0},n.getQuarterContent(a))}))},n.getClassNames=function(){var r=n.props,i=r.selectingDate,s=r.selectsStart,f=r.selectsEnd,a=r.showMonthYearPicker,p=r.showQuarterYearPicker,_=r.showWeekPicker;return ri("react-datepicker__month",{"react-datepicker__month--selecting-range":i&&(s||f)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":p},{"react-datepicker__weekPicker":_})},n}return t.prototype.getSelection=function(){var n=this.props,r=n.selected,i=n.selectedDates,s=n.selectsMultiple;if(s)return i;if(r)return[r]},t.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,i=n.showQuarterYearPicker,s=n.day,f=n.ariaLabelPrefix,a=f===void 0?"Month ":f,p=a?a.trim()+" ":"";return Je.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(p).concat(Ro(s,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():i?this.renderQuarters():this.renderWeeks())},t})(be.Component),IGe=(function(e){Nl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isSelectedMonth=function(r){return n.props.month===r},n.renderOptions=function(){return n.props.monthNames.map(function(r,i){return Je.createElement("div",{className:n.isSelectedMonth(i)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,i),"aria-selected":n.isSelectedMonth(i)?"true":void 0},n.isSelectedMonth(i)?Je.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return t.prototype.render=function(){return Je.createElement(ZR,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t})(be.Component),PGe=(function(e){Nl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(i,s){return Je.createElement("option",{key:i,value:s},i)})},n.renderSelectMode=function(r){return Je.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(i){return n.onChange(parseInt(i.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,i){return Je.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},Je.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Je.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},i[n.props.month]))},n.renderDropdown=function(r){return Je.createElement(IGe,ba({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var i=n.state.dropdownVisible,s=[n.renderReadView(!i,r)];return i&&s.unshift(n.renderDropdown(r)),s},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(s){return Pde(s,n.props.locale)}:function(s){return q8(s,n.props.locale)}),i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode(r);break;case"select":i=this.renderSelectMode(r);break}return Je.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},i)},t})(be.Component);function RGe(e,t){for(var n=[],r=qy(e),i=qy(t);!r0(r,i);)n.push(Ga(r)),r=Ap(r,1);return n}var kGe=(function(e){Nl(t,e);function t(n){var r=e.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(i){var s=l6(i),f=Nm(r.props.date,i)&&fc(r.props.date,i);return Je.createElement("div",{className:f?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:s,onClick:r.onChange.bind(r,s),"aria-selected":f?"true":void 0},f?Je.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",Ro(i,r.props.dateFormat,r.props.locale))})},r.onChange=function(i){return r.props.onChange(i)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:RGe(r.props.minDate,r.props.maxDate)},r}return t.prototype.render=function(){var n=ri({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Je.createElement(ZR,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},t})(be.Component),LGe=(function(e){Nl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=qy(n.props.minDate),i=qy(n.props.maxDate),s=[];!r0(r,i);){var f=l6(r);s.push(Je.createElement("option",{key:f,value:f},Ro(r,n.props.dateFormat,n.props.locale))),r=Ap(r,1)}return s},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return Je.createElement("select",{value:l6(qy(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var i=Ro(n.props.date,n.props.dateFormat,n.props.locale);return Je.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},Je.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Je.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},i))},n.renderDropdown=function(){return Je.createElement(kGe,ba({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,i=[n.renderReadView(!r)];return r&&i.unshift(n.renderDropdown()),i},n.onChange=function(r){n.toggleDropdown();var i=Ga(r);Nm(n.props.date,i)&&fc(n.props.date,i)||n.props.onChange(i)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return Je.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},t})(be.Component),zGe=(function(e){Nl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,i,s;n.list&&(n.list.scrollTop=(s=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((i=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&i!==void 0?i:0):n.list.clientHeight,n.centerLi))!==null&&s!==void 0?s:0)})},n.handleClick=function(r){var i,s;(n.props.minTime||n.props.maxTime)&&HK(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&qK(r,n.props)||(s=(i=n.props).onChange)===null||s===void 0||s.call(i,r)},n.isSelectedTime=function(r){return n.props.selected&&TGe(n.props.selected,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&HK(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&qK(r,n.props)},n.liClasses=function(r){var i,s=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&s.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&s.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(eg(r)*3600+tg(r)*60+Vy(r))%(((i=n.props.intervals)!==null&&i!==void 0?i:t.defaultProps.intervals)*60)!==0&&s.push("react-datepicker__time-list-item--injected"),s.join(" ")},n.handleOnKeyDown=function(r,i){var s,f;r.key===nr.Space&&(r.preventDefault(),r.key=nr.Enter),(r.key===nr.ArrowUp||r.key===nr.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===nr.ArrowDown||r.key===nr.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===nr.Enter&&n.handleClick(i),(f=(s=n.props).handleOnKeyDown)===null||f===void 0||f.call(s,r)},n.renderTimes=function(){for(var r,i=[],s=typeof n.props.format=="string"?n.props.format:"p",f=(r=n.props.intervals)!==null&&r!==void 0?r:t.defaultProps.intervals,a=n.props.selected||n.props.openToDate||Ga(),p=xD(a),_=n.props.injectTimes&&n.props.injectTimes.sort(function(k,V){return k.getTime()-V.getTime()}),S=60*SGe(a),E=S/f,I=0;I<E;I++){var z=a6(p,I*f);if(i.push(z),_){var F=wGe(p,z,I,f,_);i=i.concat(F)}}var U=i.reduce(function(k,V){return V.getTime()<=a.getTime()?V:k},i[0]);return i.map(function(k){return Je.createElement("li",{key:k.valueOf(),onClick:n.handleClick.bind(n,k),className:n.liClasses(k),ref:function(V){k===U&&(n.centerLi=V)},onKeyDown:function(V){n.handleOnKeyDown(V,k)},tabIndex:k===U?0:-1,role:"option","aria-selected":n.isSelectedTime(k)?"true":void 0,"aria-disabled":n.isDisabledTime(k)?"true":void 0},Ro(k,s,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?Je.createElement(Je.Fragment,null):Je.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){n.header=r}},Je.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var n=this,r,i=this.state.height;return Je.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),Je.createElement("div",{className:"react-datepicker__time"},Je.createElement("div",{className:"react-datepicker__time-box"},Je.createElement("ul",{className:"react-datepicker__time-list",ref:function(s){n.list=s},style:i?{height:i}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},t})(be.Component),nQ=3,FGe=(function(e){Nl(t,e);function t(n){var r=e.call(this,n)||this;return r.YEAR_REFS=Ym([],Array(r.props.yearItemNumber),!0).map(function(){return be.createRef()}),r.isDisabled=function(i){return Yh(i,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(i){return H8(i,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var i;return(i=r.props.selectingDate)!==null&&i!==void 0?i:r.props.preSelection},r.updateFocusOnPaginate=function(i){var s=function(){var f,a;(a=(f=r.YEAR_REFS[i])===null||f===void 0?void 0:f.current)===null||a===void 0||a.focus()};window.requestAnimationFrame(s)},r.handleYearClick=function(i,s){r.props.onDayClick&&r.props.onDayClick(i,s)},r.handleYearNavigation=function(i,s){var f,a,p,_,S=r.props,E=S.date,I=S.yearItemNumber;if(!(E===void 0||I===void 0)){var z=jv(E,I).startPeriod;r.isDisabled(s)||r.isExcluded(s)||((a=(f=r.props).setPreSelection)===null||a===void 0||a.call(f,s),i-z<0?r.updateFocusOnPaginate(I-(z-i)):i-z>=I?r.updateFocusOnPaginate(Math.abs(I-(i-z))):(_=(p=r.YEAR_REFS[i-z])===null||p===void 0?void 0:p.current)===null||_===void 0||_.focus())}},r.isSameDay=function(i,s){return pa(i,s)},r.isCurrentYear=function(i){return i===Ni(Ga())},r.isRangeStart=function(i){return r.props.startDate&&r.props.endDate&&Nm(Lm(Ga(),i),r.props.startDate)},r.isRangeEnd=function(i){return r.props.startDate&&r.props.endDate&&Nm(Lm(Ga(),i),r.props.endDate)},r.isInRange=function(i){return PM(i,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(i){var s=r.props,f=s.selectsStart,a=s.selectsEnd,p=s.selectsRange,_=s.startDate,S=s.endDate;return!(f||a||p)||!r.selectingDate()?!1:f&&S?PM(i,r.selectingDate(),S):a&&_||p&&_&&!S?PM(i,_,r.selectingDate()):!1},r.isSelectingRangeStart=function(i){var s;if(!r.isInSelectingRange(i))return!1;var f=r.props,a=f.startDate,p=f.selectsStart,_=Lm(Ga(),i);return p?Nm(_,(s=r.selectingDate())!==null&&s!==void 0?s:null):Nm(_,a??null)},r.isSelectingRangeEnd=function(i){var s;if(!r.isInSelectingRange(i))return!1;var f=r.props,a=f.endDate,p=f.selectsEnd,_=f.selectsRange,S=Lm(Ga(),i);return p||_?Nm(S,(s=r.selectingDate())!==null&&s!==void 0?s:null):Nm(S,a??null)},r.isKeyboardSelected=function(i){if(!(r.props.date===void 0||r.props.selected==null||r.props.preSelection==null)){var s=r.props,f=s.minDate,a=s.maxDate,p=s.excludeDates,_=s.includeDates,S=s.filterDate,E=i2(Lm(r.props.date,i)),I=(f||a||p||_||S)&&wD(i,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!pa(E,i2(r.props.selected))&&pa(E,i2(r.props.preSelection))&&!I}},r.onYearClick=function(i,s){var f=r.props.date;f!==void 0&&r.handleYearClick(i2(Lm(f,s)),i)},r.onYearKeyDown=function(i,s){var f,a,p=i.key,_=r.props,S=_.date,E=_.yearItemNumber,I=_.handleOnKeyDown;if(p!==nr.Tab&&i.preventDefault(),!r.props.disabledKeyboardNavigation)switch(p){case nr.Enter:if(r.props.selected==null)break;r.onYearClick(i,s),(a=(f=r.props).setPreSelection)===null||a===void 0||a.call(f,r.props.selected);break;case nr.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(s+1,Uy(r.props.preSelection,1));break;case nr.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(s-1,cS(r.props.preSelection,1));break;case nr.ArrowUp:{if(S===void 0||E===void 0||r.props.preSelection==null)break;var z=jv(S,E).startPeriod,F=nQ,U=s-F;if(U<z){var k=E%F;s>=z&&s<z+k?F=k:F+=k,U=s-F}r.handleYearNavigation(U,cS(r.props.preSelection,F));break}case nr.ArrowDown:{if(S===void 0||E===void 0||r.props.preSelection==null)break;var V=jv(S,E).endPeriod,F=nQ,U=s+F;if(U>V){var k=E%F;s<=V&&s>V-k?F=k:F+=k,U=s+F}r.handleYearNavigation(U,Uy(r.props.preSelection,F));break}}I&&I(i)},r.getYearClassNames=function(i){var s=r.props,f=s.date,a=s.minDate,p=s.maxDate,_=s.selected,S=s.excludeDates,E=s.includeDates,I=s.filterDate,z=s.yearClassName;return ri("react-datepicker__year-text","react-datepicker__year-".concat(i),f?z==null?void 0:z(Lm(f,i)):void 0,{"react-datepicker__year-text--selected":_?i===Ni(_):void 0,"react-datepicker__year-text--disabled":(a||p||S||E||I)&&wD(i,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(i),"react-datepicker__year-text--range-start":r.isRangeStart(i),"react-datepicker__year-text--range-end":r.isRangeEnd(i),"react-datepicker__year-text--in-range":r.isInRange(i),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(i),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(i),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(i),"react-datepicker__year-text--today":r.isCurrentYear(i)})},r.getYearTabIndex=function(i){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var s=Ni(r.props.preSelection),f=wD(i,r.props);return i===s&&!f?"0":"-1"},r.getYearContent=function(i){return r.props.renderYearContent?r.props.renderYearContent(i):i},r}return t.prototype.render=function(){var n=this,r=[],i=this.props,s=i.date,f=i.yearItemNumber,a=i.onYearMouseEnter,p=i.onYearMouseLeave;if(s===void 0)return null;for(var _=jv(s,f),S=_.startPeriod,E=_.endPeriod,I=function(U){r.push(Je.createElement("div",{ref:z.YEAR_REFS[U-S],onClick:function(k){n.onYearClick(k,U)},onKeyDown:function(k){zde(k)&&(k.preventDefault(),k.key=nr.Enter),n.onYearKeyDown(k,U)},tabIndex:Number(z.getYearTabIndex(U)),className:z.getYearClassNames(U),onMouseEnter:z.props.usePointerEvent?void 0:function(k){return a(k,U)},onPointerEnter:z.props.usePointerEvent?function(k){return a(k,U)}:void 0,onMouseLeave:z.props.usePointerEvent?void 0:function(k){return p(k,U)},onPointerLeave:z.props.usePointerEvent?function(k){return p(k,U)}:void 0,key:U,"aria-current":z.isCurrentYear(U)?"date":void 0},z.getYearContent(U)))},z=this,F=S;F<=E;F++)I(F);return Je.createElement("div",{className:"react-datepicker__year"},Je.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},t})(be.Component);function NGe(e,t,n,r){for(var i=[],s=0;s<2*t+1;s++){var f=e+t-s,a=!0;n&&(a=Ni(n)<=f),r&&a&&(a=Ni(r)>=f),a&&i.push(f)}return i}var BGe=(function(e){Nl(t,e);function t(n){var r=e.call(this,n)||this;r.renderOptions=function(){var a=r.props.year,p=r.state.yearsList.map(function(E){return Je.createElement("div",{className:a===E?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:E,onClick:r.onChange.bind(r,E),"aria-selected":a===E?"true":void 0},a===E?Je.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",E)}),_=r.props.minDate?Ni(r.props.minDate):null,S=r.props.maxDate?Ni(r.props.maxDate):null;return(!S||!r.state.yearsList.find(function(E){return E===S}))&&p.unshift(Je.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},Je.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!_||!r.state.yearsList.find(function(E){return E===_}))&&p.push(Je.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},Je.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),p},r.onChange=function(a){r.props.onChange(a)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(a){var p=r.state.yearsList.map(function(_){return _+a});r.setState({yearsList:p})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var i=n.yearDropdownItemNumber,s=n.scrollableYearDropdown,f=i||(s?10:5);return r.state={yearsList:NGe(r.props.year,f,r.props.minDate,r.props.maxDate)},r.dropdownRef=be.createRef(),r}return t.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,i=r?r.find(function(s){return s.ariaSelected}):null;n.scrollTop=i&&i instanceof HTMLElement?i.offsetTop+(i.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},t.prototype.render=function(){var n=ri({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Je.createElement(ZR,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t})(be.Component),jGe=(function(e){Nl(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?Ni(n.props.minDate):1900,i=n.props.maxDate?Ni(n.props.maxDate):2100,s=[],f=r;f<=i;f++)s.push(Je.createElement("option",{key:f,value:f},f));return s},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return Je.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return Je.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(i){return n.toggleDropdown(i)}},Je.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Je.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return Je.createElement(BGe,ba({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,i=[n.renderReadView(!r)];return r&&i.unshift(n.renderDropdown()),i},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,i){var s;(s=n.onSelect)===null||s===void 0||s.call(n,r,i),n.setOpen()},n.onSelect=function(r,i){var s,f;(f=(s=n.props).onSelect)===null||f===void 0||f.call(s,r,i)},n.setOpen=function(){var r,i;(i=(r=n.props).setOpen)===null||i===void 0||i.call(r,!0)},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return Je.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},t})(be.Component),UGe=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],$Ge=function(e){var t=(e.className||"").split(/\s+/);return UGe.some(function(n){return t.indexOf(n)>=0})},VGe=(function(e){Nl(t,e);function t(n){var r=e.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(i){r.props.onClickOutside(i)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(i){var s,f;$Ge(i.target)&&((f=(s=r.props).onDropdownFocus)===null||f===void 0||f.call(s,i))},r.getDateInView=function(){var i=r.props,s=i.preSelection,f=i.selected,a=i.openToDate,p=kde(r.props),_=Lde(r.props),S=Ga(),E=a||f||s;return E||(p&&wx(S,p)?p:_&&r0(S,_)?_:S)},r.increaseMonth=function(){r.setState(function(i){var s=i.date;return{date:Ap(s,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(i){var s=i.date;return{date:rx(s,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(i,s,f){r.props.onSelect(i,s,f),r.props.setPreSelection&&r.props.setPreSelection(i)},r.handleDayMouseEnter=function(i){r.setState({selectingDate:i}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(i)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(i,s){r.setState({selectingDate:Lm(Ga(),s)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(i,s)},r.handleYearMouseLeave=function(i,s){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(i,s)},r.handleYearChange=function(i){var s,f,a,p;(f=(s=r.props).onYearChange)===null||f===void 0||f.call(s,i),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(i),(p=(a=r.props).setOpen)===null||p===void 0||p.call(a,!0)),r.props.setPreSelection&&r.props.setPreSelection(i)},r.getEnabledPreSelectionDateForMonth=function(i){if(!Yh(i,r.props))return i;for(var s=qy(i),f=cGe(i),a=E8e(f,s),p=null,_=0;_<=a;_++){var S=bp(s,_);if(!Yh(S,r.props)){p=S;break}}return p},r.handleMonthChange=function(i){var s,f,a,p=(s=r.getEnabledPreSelectionDateForMonth(i))!==null&&s!==void 0?s:i;r.handleCustomMonthChange(p),r.props.adjustDateOnChange&&(r.props.onSelect(p),(a=(f=r.props).setOpen)===null||a===void 0||a.call(f,!0)),r.props.setPreSelection&&r.props.setPreSelection(p)},r.handleCustomMonthChange=function(i){var s,f;(f=(s=r.props).onMonthChange)===null||f===void 0||f.call(s,i),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(i){r.handleYearChange(i),r.handleMonthChange(i)},r.changeYear=function(i){r.setState(function(s){var f=s.date;return{date:Lm(f,Number(i))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(i){r.setState(function(s){var f=s.date;return{date:Gf(f,Number(i))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(i){r.setState(function(s){var f=s.date;return{date:Lm(Gf(f,pc(i)),Ni(i))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(i){i===void 0&&(i=r.state.date);var s=Gv(i,r.props.locale,r.props.calendarStartDay),f=[];return r.props.showWeekNumbers&&f.push(Je.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),f.concat([0,1,2,3,4,5,6].map(function(a){var p=bp(s,a),_=r.formatWeekday(p,r.props.locale),S=r.props.weekDayClassName?r.props.weekDayClassName(p):void 0;return Je.createElement("div",{key:a,"aria-label":Ro(p,"EEEE",r.props.locale),className:ri("react-datepicker__day-name",S)},_)}))},r.formatWeekday=function(i,s){return r.props.formatWeekDay?fGe(i,r.props.formatWeekDay,s):r.props.useWeekdaysShort?dGe(i,s):hGe(i,s)},r.decreaseYear=function(){r.setState(function(i){var s,f=i.date;return{date:cS(f,r.props.showYearPicker?(s=r.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var i,s,f;if(!r.props.renderCustomHeader){var a=(i=r.props.monthsShown)!==null&&i!==void 0?i:t.defaultProps.monthsShown,p=r.props.showPreviousMonths?a-1:0,_=(s=r.props.monthSelectedIn)!==null&&s!==void 0?s:p,S=rx(r.state.date,_),E;switch(!0){case r.props.showMonthYearPicker:E=WK(r.state.date,r.props);break;case r.props.showYearPicker:E=_Ge(r.state.date,r.props);break;case r.props.showQuarterYearPicker:E=gGe(r.state.date,r.props);break;default:E=GK(S,r.props);break}if(!(!((f=r.props.forceShowMonthNavigation)!==null&&f!==void 0?f:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&E||r.props.showTimeSelectOnly)){var I=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],z=["react-datepicker__navigation","react-datepicker__navigation--previous"],F=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(F=r.decreaseYear),E&&r.props.showDisabledMonthNavigation&&(z.push("react-datepicker__navigation--previous--disabled"),F=void 0);var U=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,k=r.props,V=k.previousMonthButtonLabel,K=V===void 0?t.defaultProps.previousMonthButtonLabel:V,J=k.previousYearButtonLabel,ie=J===void 0?t.defaultProps.previousYearButtonLabel:J,Q=r.props,W=Q.previousMonthAriaLabel,te=W===void 0?typeof K=="string"?K:"Previous Month":W,X=Q.previousYearAriaLabel,ae=X===void 0?typeof ie=="string"?ie:"Previous Year":X;return Je.createElement("button",{type:"button",className:z.join(" "),onClick:F,onKeyDown:r.props.handleOnKeyDown,"aria-label":U?ae:te},Je.createElement("span",{className:I.join(" ")},U?ie:K))}}},r.increaseYear=function(){r.setState(function(i){var s,f=i.date;return{date:Uy(f,r.props.showYearPicker?(s=r.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var i;if(!r.props.renderCustomHeader){var s;switch(!0){case r.props.showMonthYearPicker:s=XK(r.state.date,r.props);break;case r.props.showYearPicker:s=vGe(r.state.date,r.props);break;case r.props.showQuarterYearPicker:s=yGe(r.state.date,r.props);break;default:s=YK(r.state.date,r.props);break}if(!(!((i=r.props.forceShowMonthNavigation)!==null&&i!==void 0?i:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&s||r.props.showTimeSelectOnly)){var f=["react-datepicker__navigation","react-datepicker__navigation--next"],a=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&f.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&f.push("react-datepicker__navigation--next--with-today-button");var p=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(p=r.increaseYear),s&&r.props.showDisabledMonthNavigation&&(f.push("react-datepicker__navigation--next--disabled"),p=void 0);var _=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,S=r.props,E=S.nextMonthButtonLabel,I=E===void 0?t.defaultProps.nextMonthButtonLabel:E,z=S.nextYearButtonLabel,F=z===void 0?t.defaultProps.nextYearButtonLabel:z,U=r.props,k=U.nextMonthAriaLabel,V=k===void 0?typeof I=="string"?I:"Next Month":k,K=U.nextYearAriaLabel,J=K===void 0?typeof F=="string"?F:"Next Year":K;return Je.createElement("button",{type:"button",className:f.join(" "),onClick:p,onKeyDown:r.props.handleOnKeyDown,"aria-label":_?J:V},Je.createElement("span",{className:a.join(" ")},_?F:I))}}},r.renderCurrentMonth=function(i){i===void 0&&(i=r.state.date);var s=["react-datepicker__current-month"];return r.props.showYearDropdown&&s.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&s.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&s.push("react-datepicker__current-month--hasMonthYearDropdown"),Je.createElement("h2",{className:s.join(" ")},Ro(i,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showYearDropdown||i))return Je.createElement(jGe,ba({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:Ni(r.state.date)}))},r.renderMonthDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showMonthDropdown||i))return Je.createElement(PGe,ba({},t.defaultProps,r.props,{month:pc(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showMonthYearDropdown||i))return Je.createElement(LGe,ba({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(i){r.props.onSelect(UK(),i),r.props.setPreSelection&&r.props.setPreSelection(UK())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return Je.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDefaultHeader=function(i){var s=i.monthDate,f=i.i;return Je.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(s),Je.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(f!==0),r.renderMonthYearDropdown(f!==0),r.renderYearDropdown(f!==0)),Je.createElement("div",{className:"react-datepicker__day-names"},r.header(s)))},r.renderCustomHeader=function(i){var s,f,a=i.monthDate,p=i.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var _=GK(r.state.date,r.props),S=YK(r.state.date,r.props),E=WK(r.state.date,r.props),I=XK(r.state.date,r.props),z=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return Je.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(f=(s=r.props).renderCustomHeader)===null||f===void 0?void 0:f.call(s,ba(ba({},r.state),{customHeaderCount:p,monthDate:a,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:_,nextMonthButtonDisabled:S,prevYearButtonDisabled:E,nextYearButtonDisabled:I})),z&&Je.createElement("div",{className:"react-datepicker__day-names"},r.header(a)))},r.renderYearHeader=function(i){var s=i.monthDate,f=r.props,a=f.showYearPicker,p=f.yearItemNumber,_=p===void 0?t.defaultProps.yearItemNumber:p,S=jv(s,_),E=S.startPeriod,I=S.endPeriod;return Je.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},a?"".concat(E," - ").concat(I):Ni(s))},r.renderHeader=function(i){var s=i.monthDate,f=i.i,a=f===void 0?0:f,p={monthDate:s,i:a};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(p);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(p);default:return r.renderDefaultHeader(p)}},r.renderMonths=function(){var i,s;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var f=[],a=(i=r.props.monthsShown)!==null&&i!==void 0?i:t.defaultProps.monthsShown,p=r.props.showPreviousMonths?a-1:0,_=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Uy(r.state.date,p):rx(r.state.date,p),S=(s=r.props.monthSelectedIn)!==null&&s!==void 0?s:p,E=0;E<a;++E){var I=E-S+p,z=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Uy(_,I):Ap(_,I),F="month-".concat(E),U=E<a-1,k=E>0;f.push(Je.createElement("div",{key:F,ref:function(V){r.monthContainer=V??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:z,i:E}),Je.createElement(DGe,ba({},t.defaultProps,r.props,{ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:z,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:E,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:U,monthShowsDuplicateDaysStart:k}))))}return f}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return Je.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),Je.createElement(FGe,ba({},t.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return Je.createElement(zGe,ba({},t.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var i=r.props.selected?new Date(r.props.selected):void 0,s=i&&Oy(i)&&!!r.props.selected,f=s?"".concat(KK(i.getHours()),":").concat(KK(i.getMinutes())):"";if(r.props.showTimeInput)return Je.createElement(EGe,ba({},t.defaultProps,r.props,{date:i,timeString:f,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var i,s=jv(r.state.date,(i=r.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber),f=s.startPeriod,a=s.endPeriod,p;return r.props.showYearPicker?p="".concat(f," - ").concat(a):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?p=Ni(r.state.date):p="".concat(q8(pc(r.state.date),r.props.locale)," ").concat(Ni(r.state.date)),Je.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&p)},r.renderChildren=function(){if(r.props.children)return Je.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=be.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:OO}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){n.setState({monthContainer:n.monthContainer})})())},t.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&(!pa(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var i=!fc(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return i&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!pa(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var n=this.props.container||nGe;return Je.createElement(ZR,{onClickOutside:this.handleClickOutside,style:{display:"contents"},containerRef:this.containerRef,ignoreClass:this.props.outsideClickIgnoreClass},Je.createElement(n,{className:ri("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))},t})(be.Component),qGe=function(e){var t=e.icon,n=e.className,r=n===void 0?"":n,i=e.onClick,s="react-datepicker__calendar-icon";return typeof t=="string"?Je.createElement("i",{className:"".concat(s," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:i}):Je.isValidElement(t)?Je.cloneElement(t,{className:"".concat(t.props.className||""," ").concat(s," ").concat(r),onClick:function(f){typeof t.props.onClick=="function"&&t.props.onClick(f),typeof i=="function"&&i(f)}}):Je.createElement("svg",{className:"".concat(s," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},Je.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Fde=(function(e){Nl(t,e);function t(n){var r=e.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return Fv.createPortal(this.props.children,this.el)},t})(be.Component),HGe="[tabindex], a, button, input, select, textarea",GGe=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},Nde=(function(e){Nl(t,e);function t(n){var r=e.call(this,n)||this;return r.getTabChildren=function(){var i;return Array.prototype.slice.call((i=r.tabLoopRef.current)===null||i===void 0?void 0:i.querySelectorAll(HGe),1,-1).filter(GGe)},r.handleFocusStart=function(){var i=r.getTabChildren();i&&i.length>1&&i[i.length-1].focus()},r.handleFocusEnd=function(){var i=r.getTabChildren();i&&i.length>1&&i[0].focus()},r.tabLoopRef=be.createRef(),r}return t.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:t.defaultProps.enableTabLoop)?Je.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Je.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,Je.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t})(be.Component);function YGe(e){var t=function(n){var r,i=typeof n.hidePopper=="boolean"?n.hidePopper:!0,s=be.useRef(null),f=tGe(ba({open:!i,whileElementsMounted:Cde,placement:n.popperPlacement,middleware:Ym([$He({padding:15}),UHe(10),VHe({element:s})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),a=ba(ba({},n),{hidePopper:i,popperProps:ba(ba({},f),{arrowRef:s})});return Je.createElement(e,ba({},a))};return t}var WGe=(function(e){Nl(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n=this.props,r=n.className,i=n.wrapperClassName,s=n.hidePopper,f=s===void 0?t.defaultProps.hidePopper:s,a=n.popperComponent,p=n.targetComponent,_=n.enableTabLoop,S=n.popperOnKeyDown,E=n.portalId,I=n.portalHost,z=n.popperProps,F=n.showArrow,U=void 0;if(!f){var k=ri("react-datepicker-popper",r);U=Je.createElement(Nde,{enableTabLoop:_},Je.createElement("div",{ref:z.refs.setFloating,style:z.floatingStyles,className:k,"data-placement":z.placement,onKeyDown:S},a,F&&Je.createElement(WHe,{ref:z.arrowRef,context:z.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(U=be.createElement(this.props.popperContainer,{},U)),E&&!f&&(U=Je.createElement(Fde,{portalId:E,portalHost:I},U));var V=ri("react-datepicker-wrapper",i);return Je.createElement(Je.Fragment,null,Je.createElement("div",{ref:z.refs.setReference,className:V},p),U)},t})(be.Component),XGe=YGe(WGe),rQ="react-datepicker-ignore-onclickoutside";function ZGe(e,t){return e&&t?pc(e)!==pc(t)||Ni(e)!==Ni(t):e!==t}var pF="Date input not valid.",iQ=(function(e){Nl(t,e);function t(n){var r=e.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Ga()},r.modifyHolidays=function(){var i;return(i=r.props.holidays)===null||i===void 0?void 0:i.reduce(function(s,f){var a=new Date(f.date);return Oy(a)?Ym(Ym([],s,!0),[ba(ba({},f),{date:a})],!1):s},[])},r.calcInitialState=function(){var i,s=r.getPreSelection(),f=kde(r.props),a=Lde(r.props),p=f&&wx(s,xD(f))?f:a&&r0(s,$K(a))?a:s;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(i=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&i!==void 0?i:p,highlightDates:ZK(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.resetHiddenStatus=function(){r.setState(ba(ba({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(ba(ba({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.safeFocus=function(){setTimeout(function(){var i,s;(s=(i=r.input)===null||i===void 0?void 0:i.focus)===null||s===void 0||s.call(i,{preventScroll:!0})},0)},r.safeBlur=function(){setTimeout(function(){var i,s;(s=(i=r.input)===null||i===void 0?void 0:i.blur)===null||s===void 0||s.call(i)},0)},r.setFocus=function(){r.safeFocus()},r.setBlur=function(){r.safeBlur(),r.cancelFocusInput()},r.setOpen=function(i,s){s===void 0&&(s=!1),r.setState({open:i,preSelection:i&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:mF},function(){i||r.setState(function(f){return{focused:s?f.focused:!1}},function(){!s&&r.setBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return $y(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(i){var s,f,a=r.state.wasHidden,p=a?r.state.open:!0;a&&r.resetHiddenStatus(),!r.state.preventFocus&&p&&((f=(s=r.props).onFocus)===null||f===void 0||f.call(s,i),!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.handleBlur=function(i){var s,f;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((f=(s=r.props).onBlur)===null||f===void 0||f.call(s,i)),r.setState({focused:!1})},r.handleCalendarClickOutside=function(i){var s,f;r.props.inline||r.setOpen(!1),(f=(s=r.props).onClickOutside)===null||f===void 0||f.call(s,i),r.props.withPortal&&i.preventDefault()},r.handleChange=function(){for(var i,s,f=[],a=0;a<arguments.length;a++)f[a]=arguments[a];var p=f[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,f),!p||typeof p.isDefaultPrevented!="function"||p.isDefaultPrevented()))){r.setState({inputValue:(p==null?void 0:p.target)instanceof HTMLInputElement?p.target.value:null,lastPreSelectChange:KGe});var _=r.props,S=_.dateFormat,E=S===void 0?t.defaultProps.dateFormat:S,I=_.strictParsing,z=I===void 0?t.defaultProps.strictParsing:I,F=_.selectsRange,U=_.startDate,k=_.endDate,V=(p==null?void 0:p.target)instanceof HTMLInputElement?p.target.value:"";if(F){var K=V.split("-",2).map(function(le){return le.trim()}),J=K[0],ie=K[1],Q=fF(J??"",E,r.props.locale,z),W=fF(ie??"",E,r.props.locale,z),te=(U==null?void 0:U.getTime())!==(Q==null?void 0:Q.getTime()),X=(k==null?void 0:k.getTime())!==(W==null?void 0:W.getTime());if(!te&&!X||Q&&Yh(Q,r.props)||W&&Yh(W,r.props))return;(s=(i=r.props).onChange)===null||s===void 0||s.call(i,[Q,W],p)}else{var ae=fF(V,E,r.props.locale,z,r.props.minDate);r.props.showTimeSelectOnly&&r.props.selected&&ae&&!pa(ae,r.props.selected)&&(ae=F9e(r.props.selected,{hours:eg(ae),minutes:tg(ae),seconds:Vy(ae)})),(ae||!V)&&r.setSelected(ae,p,!0)}}},r.handleSelect=function(i,s,f){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(s),r.setSelected(i,s,!1,f),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(i);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var a=r.props,p=a.startDate,_=a.endDate;p&&!_&&(r.props.swapRange||!eQ(i,p))&&r.setOpen(!1)}},r.setSelected=function(i,s,f,a){var p,_,S=i;if(r.props.showYearPicker){if(S!==null&&wD(Ni(S),r.props))return}else if(r.props.showMonthYearPicker){if(S!==null&&Rde(S,r.props))return}else if(S!==null&&Yh(S,r.props))return;var E=r.props,I=E.onChange,z=E.selectsRange,F=E.startDate,U=E.endDate,k=E.selectsMultiple,V=E.selectedDates,K=E.minTime,J=E.swapRange;if(!Gb(r.props.selected,S)||r.props.allowSameDay||z||k)if(S!==null&&(r.props.selected&&(!f||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(S=hF(S,{hour:eg(r.props.selected),minute:tg(r.props.selected),second:Vy(r.props.selected)})),!f&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&K&&(S=hF(S,{hour:K.getHours(),minute:K.getMinutes(),second:K.getSeconds()})),r.props.inline||r.setState({preSelection:S}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:a})),z){var ie=!F&&!U,Q=F&&!U,W=F&&U;ie?I==null||I([S,null],s):Q&&(S===null?I==null||I([null,null],s):eQ(S,F)?J?I==null||I([S,F],s):I==null||I([S,null],s):I==null||I([F,S],s)),W&&(I==null||I([S,null],s))}else if(k){if(S!==null)if(!(V!=null&&V.length))I==null||I([S],s);else{var te=V.some(function(ae){return pa(ae,S)});if(te){var X=V.filter(function(ae){return!pa(ae,S)});I==null||I(X,s)}else I==null||I(Ym(Ym([],V,!0),[S],!1),s)}}else I==null||I(S,s);f||((_=(p=r.props).onSelect)===null||_===void 0||_.call(p,S,s),r.setState({inputValue:null}))},r.setPreSelection=function(i){var s=$y(r.props.minDate),f=$y(r.props.maxDate),a=!0;if(i){var p=xD(i);if(s&&f)a=a2(i,r.props.minDate,r.props.maxDate);else if(s){var _=xD(r.props.minDate);a=r0(i,_)||Gb(p,_)}else if(f){var S=$K(r.props.maxDate);a=wx(i,S)||Gb(p,S)}}a&&r.setState({preSelection:i})},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(i){var s,f;if(!(r.props.selectsRange||r.props.selectsMultiple)){var a=r.props.selected?r.props.selected:r.getPreSelection(),p=r.props.selected?i:hF(a,{hour:eg(i),minute:tg(i)});r.setState({preSelection:p}),(f=(s=r.props).onChange)===null||f===void 0||f.call(s,p),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var i,s;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(s=(i=r.props).onInputClick)===null||s===void 0||s.call(i)},r.onInputKeyDown=function(i){var s,f,a,p,_,S;(f=(s=r.props).onKeyDown)===null||f===void 0||f.call(s,i);var E=i.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(E===nr.ArrowDown||E===nr.ArrowUp||E===nr.Enter)&&((a=r.onInputClick)===null||a===void 0||a.call(r));return}if(r.state.open){if(E===nr.ArrowDown||E===nr.ArrowUp){i.preventDefault();var I=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',z=((p=r.calendar)===null||p===void 0?void 0:p.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(I);z instanceof HTMLElement&&z.focus({preventScroll:!0});return}var F=Ga(r.state.preSelection);E===nr.Enter?(i.preventDefault(),i.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===mF?(r.handleSelect(F,i),!r.props.shouldCloseOnSelect&&r.setPreSelection(F)):r.setOpen(!1)):E===nr.Escape?(i.preventDefault(),i.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):E===nr.Tab&&r.setOpen(!1),r.inputOk()||(S=(_=r.props).onInputError)===null||S===void 0||S.call(_,{code:1,msg:pF})}},r.onPortalKeyDown=function(i){var s=i.key;s===nr.Escape&&(i.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(i){var s,f,a,p,_,S,E=r.props,I=E.minDate,z=E.maxDate,F=E.disabledKeyboardNavigation,U=E.showWeekPicker,k=E.shouldCloseOnSelect,V=E.locale,K=E.calendarStartDay,J=E.adjustDateOnChange,ie=E.inline;if((f=(s=r.props).onKeyDown)===null||f===void 0||f.call(s,i),!F){var Q=i.key,W=i.shiftKey,te=Ga(r.state.preSelection),X=function(Be,Ee){var Ne=Ee;switch(Be){case nr.ArrowRight:Ne=U?pI(Ee,1):bp(Ee,1);break;case nr.ArrowLeft:Ne=U?CK(Ee):b9e(Ee);break;case nr.ArrowUp:Ne=CK(Ee);break;case nr.ArrowDown:Ne=pI(Ee,1);break;case nr.PageUp:Ne=W?cS(Ee,1):rx(Ee,1);break;case nr.PageDown:Ne=W?Uy(Ee,1):Ap(Ee,1);break;case nr.Home:Ne=Gv(Ee,V,K);break;case nr.End:Ne=uGe(Ee);break}return Ne},ae=function(Be,Ee){for(var Ne=40,at=Be,yt=!1,je=0,Ke=X(Be,Ee);!yt;){if(je>=Ne){Ke=Ee;break}I&&Ke<I&&(at=nr.ArrowRight,Ke=Yh(I,r.props)?X(at,Ke):I),z&&Ke>z&&(at=nr.ArrowLeft,Ke=Yh(z,r.props)?X(at,Ke):z),Yh(Ke,r.props)?((at===nr.PageUp||at===nr.Home)&&(at=nr.ArrowRight),(at===nr.PageDown||at===nr.End)&&(at=nr.ArrowLeft),Ke=X(at,Ke)):yt=!0,je++}return Ke};if(Q===nr.Enter){i.preventDefault(),r.handleSelect(te,i),!k&&r.setPreSelection(te);return}else if(Q===nr.Escape){i.preventDefault(),r.setOpen(!1),r.inputOk()||(p=(a=r.props).onInputError)===null||p===void 0||p.call(a,{code:1,msg:pF});return}var le=null;switch(Q){case nr.ArrowLeft:case nr.ArrowRight:case nr.ArrowUp:case nr.ArrowDown:case nr.PageUp:case nr.PageDown:case nr.Home:case nr.End:le=ae(Q,te);break}if(!le){(S=(_=r.props).onInputError)===null||S===void 0||S.call(_,{code:1,msg:pF});return}if(i.preventDefault(),r.setState({lastPreSelectChange:mF}),J&&r.setSelected(le),r.setPreSelection(le),ie){var ge=pc(te),ye=pc(le),De=Ni(te),He=Ni(le);ge!==ye||De!==He?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(i){var s=i.key;s===nr.Escape&&(i.preventDefault(),r.sendFocusBackToInput())},r.onClearClick=function(i){i&&i.preventDefault&&i.preventDefault(),r.sendFocusBackToInput();var s=r.props,f=s.selectsRange,a=s.onChange;f?a==null||a([null,null],i):a==null||a(null,i),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(i){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(i.target===document||i.target===document.documentElement||i.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(i)&&r.setOpen(!1)},r.renderCalendar=function(){var i,s;return!r.props.inline&&!r.isCalendarOpen()?null:Je.createElement(VGe,ba({showMonthYearDropdown:void 0,ref:function(f){r.calendar=f}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(i=r.props.dateFormatCalendar)!==null&&i!==void 0?i:t.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:xGe(r.modifyHolidays()),outsideClickIgnoreClass:rQ,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(s=r.props.dropdownMode)!==null&&s!==void 0?s:t.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var i=r.props,s=i.dateFormat,f=s===void 0?t.defaultProps.dateFormat:s,a=i.locale,p=r.props.showTimeInput||r.props.showTimeSelect,_=p?"PPPPp":"PPPP",S;return r.props.selectsRange?S="Selected start date: ".concat(Vh(r.props.startDate,{dateFormat:_,locale:a}),". ").concat(r.props.endDate?"End date: "+Vh(r.props.endDate,{dateFormat:_,locale:a}):""):r.props.showTimeSelectOnly?S="Selected time: ".concat(Vh(r.props.selected,{dateFormat:f,locale:a})):r.props.showYearPicker?S="Selected year: ".concat(Vh(r.props.selected,{dateFormat:"yyyy",locale:a})):r.props.showMonthYearPicker?S="Selected month: ".concat(Vh(r.props.selected,{dateFormat:"MMMM yyyy",locale:a})):r.props.showQuarterYearPicker?S="Selected quarter: ".concat(Vh(r.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):S="Selected date: ".concat(Vh(r.props.selected,{dateFormat:_,locale:a})),Je.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},S)},r.renderDateInput=function(){var i,s,f,a=ri(r.props.className,(i={},i[rQ]=r.state.open,i)),p=r.props.customInput||Je.createElement("input",{type:"text"}),_=r.props.customInputRef||"ref",S=r.props,E=S.dateFormat,I=E===void 0?t.defaultProps.dateFormat:E,z=S.locale,F=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?aGe(r.props.startDate,r.props.endDate,{dateFormat:I,locale:z}):r.props.selectsMultiple?oGe((f=r.props.selectedDates)!==null&&f!==void 0?f:[],{dateFormat:I,locale:z}):Vh(r.props.selected,{dateFormat:I,locale:z});return be.cloneElement(p,(s={},s[_]=function(U){r.input=U},s.value=F,s.onBlur=r.handleBlur,s.onChange=r.handleChange,s.onClick=r.onInputClick,s.onFocus=r.handleFocus,s.onKeyDown=r.onInputKeyDown,s.id=r.props.id,s.name=r.props.name,s.form=r.props.form,s.autoFocus=r.props.autoFocus,s.placeholder=r.props.placeholderText,s.disabled=r.props.disabled,s.autoComplete=r.props.autoComplete,s.className=ri(p.props.className,a),s.title=r.props.title,s.readOnly=r.props.readOnly,s.required=r.props.required,s.tabIndex=r.props.tabIndex,s["aria-describedby"]=r.props.ariaDescribedBy,s["aria-invalid"]=r.props.ariaInvalid,s["aria-labelledby"]=r.props.ariaLabelledBy,s["aria-required"]=r.props.ariaRequired,s))},r.renderClearButton=function(){var i=r.props,s=i.isClearable,f=i.disabled,a=i.selected,p=i.startDate,_=i.endDate,S=i.clearButtonTitle,E=i.clearButtonClassName,I=E===void 0?"":E,z=i.ariaLabelClose,F=z===void 0?"Close":z,U=i.selectedDates;return s&&(a!=null||p!=null||_!=null||U!=null&&U.length)?Je.createElement("button",{type:"button",className:ri("react-datepicker__close-icon",I,{"react-datepicker__close-icon--disabled":f}),disabled:f,"aria-label":F,onClick:r.onClearClick,title:S,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:OO,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(n,r){var i,s,f,a;n.inline&&ZGe(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:ZK(this.props.highlightDates)}),!r.focused&&!Gb(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((s=(i=this.props).onCalendarOpen)===null||s===void 0||s.call(i)),r.open===!0&&this.state.open===!1&&((a=(f=this.props).onCalendarClose)===null||a===void 0||a.call(f)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,i=n.icon,s=n.calendarIconClassname,f=n.calendarIconClassName,a=n.toggleCalendarOnIconClick,p=this.state.open;return s&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),Je.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&Je.createElement(qGe,ba({icon:i,className:ri(f,!f&&s,p&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?Je.createElement(Nde,{enableTabLoop:this.props.enableTabLoop},Je.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=Je.createElement(Fde,ba({portalId:this.props.portalId},this.props),r)),Je.createElement("div",null,this.renderInputContainer(),r)}return Je.createElement(XGe,ba({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t})(be.Component),KGe="input",mF="navigate";class QGe extends Je.Component{constructor(t){super(t),this.handleListClick=this.handleListClick.bind(this)}handleListClick(t){this.props.dispatchPickRainfallEvent(t.eventid)}render(){return Oe.jsx(ia,{children:Oe.jsx(kr,{children:Oe.jsx(Vw,{variant:"flush",children:this.props.events.map((t,n)=>{let r=Pn(t.startDt),i=Pn(t.endDt),s=t.hours/48*100;return Oe.jsxs(Vw.Item,{action:!0,onClick:()=>this.handleListClick(t),eventKey:t.eventid,className:"event-list-item",children:[Oe.jsx("small",{children:Oe.jsxs(ia,{children:[Oe.jsxs(kr,{xs:7,children:[r.format("DD MMM YYYY, h:mm a"),"  ",i.format("DD MMM YYYY, h:mm a"),""]}),Oe.jsxs(kr,{xs:5,children:[t.hours," hour",t.hours>1?"s":""]})]})}),Oe.jsx(ia,{children:Oe.jsx(kr,{children:Oe.jsx(rse,{className:"event-length-bar",now:s,variant:"primary"})})})]},n)})})})})}}function JGe(e){let t=CR(e);return{events:t.list.filter(n=>{if(t.filters.maxHours>=24)return n;if(n.hours<=t.filters.maxHours)return n}),maxHours:parseFloat(t.stats.longest)}}const e7e=(e,t)=>({dispatchPickRainfallEvent:n=>{e(lfe({eventid:n,contextType:t.contextType}))}}),t7e=af(JGe,e7e)(QGe),h6="MM/DD/YYYY hh:mm A",aQ="MM/DD/YYYY",n7e={[fi.legacyRealtime]:"real-time rainfall",[fi.legacyGauge]:"historical rain gauge rainfall",[fi.legacyGarr]:"calibrated radar rainfall"};class r7e extends Je.Component{constructor(t){super(t),this.handleEventModalShow=this.handleEventModalShow.bind(this),this.handleEventModalClose=this.handleEventModalClose.bind(this),this.handleRangeModalShow=this.handleRangeModalShow.bind(this),this.handleRangeModalClose=this.handleRangeModalClose.bind(this),this.handleApplyRange=this.handleApplyRange.bind(this),this.handlePresetPick=this.handlePresetPick.bind(this),this.state={showEventModal:!1,showRangeModal:!1,pendingStart:null,pendingEnd:null}}componentDidMount(){this.clampActiveStoreRange()}componentDidUpdate(t,n){const r=!this.props.minDate.isSame(t.minDate)||!this.props.maxDate.isSame(t.maxDate),i=!this.props.rawStartDt.isSame(t.rawStartDt)||!this.props.rawEndDt.isSame(t.rawEndDt);(r||i)&&this.clampActiveStoreRange(),this.state.showRangeModal&&(!n.showRangeModal&&this.state.showRangeModal||r)&&this.clampPendingModalRange()}clampActiveStoreRange(){if(!this.props.rawStartDt.isValid()||!this.props.rawEndDt.isValid())return;const t=Rv({start:this.props.rawStartDt,end:this.props.rawEndDt,min:this.props.minDate,max:this.props.maxDate});!t.start||!t.end||(!t.start.isSame(this.props.rawStartDt)||!t.end.isSame(this.props.rawEndDt))&&this.props.dispatchPickRainfallDateTimeRange({startDt:t.start.toISOString(),endDt:t.end.toISOString()})}clampPendingModalRange(){const t=Rv({start:this.state.pendingStart||this.props.startDt,end:this.state.pendingEnd||this.props.endDt,min:this.props.minDate,max:this.props.maxDate});if(!t.start||!t.end)return;const n=t.start.toDate(),r=t.end.toDate(),i=this.state.pendingStart===null||this.state.pendingStart.getTime()!==n.getTime(),s=this.state.pendingEnd===null||this.state.pendingEnd.getTime()!==r.getTime();(i||s)&&this.setState({pendingStart:n,pendingEnd:r})}handleEventModalClose(){this.setState({showEventModal:!1})}handleEventModalShow(){this.setState({showEventModal:!0})}handleRangeModalClose(){this.setState({showRangeModal:!1})}handleRangeModalShow(){const t=Rv({start:this.props.startDt,end:this.props.endDt,min:this.props.minDate,max:this.props.maxDate});this.setState({showRangeModal:!0,pendingStart:t.start?t.start.toDate():this.props.minDate.toDate(),pendingEnd:t.end?t.end.toDate():this.props.maxDate.toDate()})}handleApplyRange(){const{pendingStart:t,pendingEnd:n}=this.state;if(!t||!n)return;const r=Rv({start:t,end:n,min:this.props.minDate,max:this.props.maxDate});!r.start||!r.end||(this.props.dispatchPickRainfallDateTimeRange({startDt:r.start.toISOString(),endDt:r.end.toISOString()}),this.setState({showRangeModal:!1}))}handlePresetPick(t,n){const[r,i]=n;if(!Uje({start:r,end:i,min:this.props.minDate,max:this.props.maxDate})){console.log("[DateTimePicker] preset range outside available bounds",{label:t,contextType:this.props.contextType,rollup:this.props.rollup,attemptedStart:Pn(r).toISOString(),attemptedEnd:Pn(i).toISOString(),min:this.props.minDate.toISOString(),max:this.props.maxDate.toISOString()});return}this.setState({pendingStart:r.toDate(),pendingEnd:i.toDate()})}buildAvailabilityNote(){const t=n7e[this.props.contextType]||"rainfall",n=this.props.rollup||"selected",r=this.props.minDate.format(aQ),i=this.props.maxDate.format(aQ);return`${n} ${t} data is available between ${r} and ${i}`}render(){const{pendingStart:t,pendingEnd:n}=this.state;return Oe.jsxs("div",{children:[Oe.jsxs(Zs,{show:this.state.showRangeModal,onHide:this.handleRangeModalClose,size:"lg",animation:!1,children:[Oe.jsx(Zs.Header,{closeButton:!0,children:Oe.jsx(Zs.Title,{children:"Select Date and Time Range"})}),Oe.jsx(Zs.Body,{children:Oe.jsxs(ia,{className:"g-3",children:[Oe.jsx(kr,{xs:3,className:"border-end",children:Oe.jsx("div",{className:"btn-group-vertical w-100",role:"group","aria-label":"Quick Ranges",children:Object.entries(this.props.ranges).map(([r,i])=>Oe.jsx(Yf,{variant:"outline-primary",size:"sm",onClick:()=>this.handlePresetPick(r,i),children:r},`${this.props.contextType}-${r}`))})}),Oe.jsxs(kr,{xs:9,children:[Oe.jsxs(ia,{children:[Oe.jsxs(kr,{md:6,children:[Oe.jsx("p",{className:"lead mb-0",children:"Start"}),Oe.jsx(iQ,{selected:t,onChange:r=>{const i=Rv({start:r,end:n,min:this.props.minDate,max:this.props.maxDate});this.setState({pendingStart:i.start?i.start.toDate():null,pendingEnd:i.end?i.end.toDate():null})},showTimeSelect:!0,timeIntervals:15,dateFormat:"MM/dd/yyyy hh:mm aa",minDate:this.props.minDate.toDate(),maxDate:this.props.maxDate.toDate(),className:"form-control"})]}),Oe.jsxs(kr,{md:6,children:[Oe.jsx("p",{className:"lead mb-0",children:"End"}),Oe.jsx(iQ,{selected:n,onChange:r=>{const i=Rv({start:t,end:r,min:this.props.minDate,max:this.props.maxDate});this.setState({pendingStart:i.start?i.start.toDate():null,pendingEnd:i.end?i.end.toDate():null})},showTimeSelect:!0,timeIntervals:15,dateFormat:"MM/dd/yyyy hh:mm aa",minDate:t||this.props.minDate.toDate(),maxDate:this.props.maxDate.toDate(),className:"form-control"})]})]}),Oe.jsx(ia,{children:Oe.jsx(kr,{children:Oe.jsx("p",{className:"datetimepicker-range-note mb-0",children:this.buildAvailabilityNote()})})})]})]})}),Oe.jsxs(Zs.Footer,{children:[Oe.jsx(Yf,{variant:"secondary",onClick:this.handleRangeModalClose,children:"Cancel"}),Oe.jsx(Yf,{variant:"primary",onClick:this.handleApplyRange,children:"Apply"})]})]}),Oe.jsxs(Zs,{show:this.state.showEventModal,onHide:this.handleEventModalClose,size:"lg",animation:!1,children:[Oe.jsx(Zs.Header,{closeButton:!0,children:Oe.jsx(Zs.Title,{children:"Select A Rainfall Event"})}),Oe.jsx(Zs.Body,{children:Oe.jsx(t7e,{contextType:this.props.contextType,handleClose:this.handleEventModalClose})}),Oe.jsx(Zs.Footer,{children:Oe.jsx(Yf,{variant:"secondary",onClick:this.handleEventModalClose,children:"Close"})})]}),Oe.jsx(ia,{className:"g-0",children:Oe.jsx(kr,{children:Oe.jsx("strong",{children:"When"})})}),Oe.jsx(ia,{className:"g-0",children:Oe.jsx(kr,{children:this.props.startDt!==!1&&this.props.endDt!==!1?Oe.jsxs(vwe,{className:"datetimepicker-control",children:[Oe.jsx(poe,{plaintext:!0,readOnly:!0,placeholder:"start and end date/times",value:`${this.props.startDt.format(h6)} to ${this.props.endDt.format(h6)}`,"aria-label":"start and end dates",className:"datetimepicker-control"}),Oe.jsx(Yf,{variant:"light",className:"datetimepicker-control",onClick:this.handleRangeModalShow,id:`dtp-show-datepicker-${this.props.rainfallDataType}`,children:Oe.jsx(dx,{icon:zEe})}),this.props.rainfallDataType===Km.historic?Oe.jsx(Yf,{id:"dtp-show-eventlistmodal",variant:"light",onClick:this.handleEventModalShow,className:"datetimepicker-control",children:Oe.jsx(dx,{icon:FEe})}):null]}):Oe.jsx(d$,{animation:"border",variant:"primary",size:"sm",children:Oe.jsx("span",{className:"visually-hidden",children:"Fetching historic ranges..."})})})})]})}}function i7e(e,t){const n=dp(e,t.contextType),r=Pn().toISOString(),i=pfe({contextType:t.contextType,rainfallDataType:t.rainfallDataType,rollup:n.rollup,latest:Ije(e),rainfallMinDate:G$,now:r}),s=Pn(n.startDt),f=Pn(n.endDt);let a=s.clone(),p=f.clone();const _=i.min.clone(),S=i.max.clone();let E={};if(s.isValid()&&f.isValid()){const z=Rv({start:s,end:f,min:_,max:S});a=z.start,p=z.end}else a=!1,p=!1;return t.rainfallDataType===Km.historic?E={"Latest month":[S.clone().startOf("month"),S.clone()],"Latest 3 months":[S.clone().subtract(2,"month").startOf("month"),S.clone()],"Latest 6 months":[S.clone().subtract(5,"month").startOf("month"),S.clone()],"Latest 12 months":[S.clone().subtract(11,"month").startOf("month"),S.clone()],"Latest Available This Year":[S.clone().startOf("year"),S.clone()],"Last Year":[S.clone().subtract(1,"year").startOf("year"),S.clone().subtract(1,"year").endOf("year")]}:t.rainfallDataType===Km.realtime?E={"Past 2 hours":[S.clone().subtract(2,"hour"),S.clone()],"Past 4 hours":[S.clone().subtract(4,"hour"),S.clone()],"Past 6 hours":[S.clone().subtract(6,"hour"),S.clone()],"Past 12 hours":[S.clone().subtract(12,"hour"),S.clone()],"Past 24 hours":[S.clone().subtract(24,"hour"),S.clone()],"Past 48 hours":[S.clone().subtract(48,"hour"),S.clone()],Today:[S.clone().startOf("day"),S.clone()],Yesterday:[S.clone().subtract(1,"day").startOf("day"),S.clone().subtract(1,"day").endOf("day")],"Past 3 days":[S.clone().subtract(3,"day").startOf("day"),S.clone()],"Past 7 days":[S.clone().subtract(7,"day").startOf("day"),S.clone()],"Past month":[S.clone().subtract(1,"month").startOf("day"),S.clone()],"Past 3 months":[S.clone().subtract(3,"month").startOf("month"),S.clone()]}:(a=!1,p=!1,E={}),{local:{format:h6},startDt:a,endDt:p,rawStartDt:s,rawEndDt:f,minDate:_,maxDate:S,minYear:_.year(),maxYear:S.year(),ranges:E,rainfallDataType:t.rainfallDataType,rollup:n.rollup}}const a7e=(e,t)=>({dispatchPickRainfallDateTimeRange:n=>{e(jV({...n,contextType:t.contextType}))}}),o7e=af(i7e,a7e)(r7e);function Tx(e){"@babel/helpers - typeof";return Tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tx(e)}function s7e(e,t){if(Tx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Tx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bde(e){var t=s7e(e,"string");return Tx(t)=="symbol"?t:t+""}function o2(e,t,n){return(t=Bde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oQ(Object(n),!0).forEach(function(r){o2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oQ(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l7e(e){if(Array.isArray(e))return e}function u7e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;p=!1}else for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function d6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function jde(e,t){if(e){if(typeof e=="string")return d6(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d6(e,t):void 0}}function c7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hy(e,t){return l7e(e)||u7e(e,t)||jde(e,t)||c7e()}function g_(e,t){if(e==null)return{};var n,r,i=BU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var f7e=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function h7e(e){var t=e.defaultInputValue,n=t===void 0?"":t,r=e.defaultMenuIsOpen,i=r===void 0?!1:r,s=e.defaultValue,f=s===void 0?null:s,a=e.inputValue,p=e.menuIsOpen,_=e.onChange,S=e.onInputChange,E=e.onMenuClose,I=e.onMenuOpen,z=e.value,F=g_(e,f7e),U=be.useState(a!==void 0?a:n),k=Hy(U,2),V=k[0],K=k[1],J=be.useState(p!==void 0?p:i),ie=Hy(J,2),Q=ie[0],W=ie[1],te=be.useState(z!==void 0?z:f),X=Hy(te,2),ae=X[0],le=X[1],ge=be.useCallback(function(at,yt){typeof _=="function"&&_(at,yt),le(at)},[_]),ye=be.useCallback(function(at,yt){var je;typeof S=="function"&&(je=S(at,yt)),K(je!==void 0?je:at)},[S]),De=be.useCallback(function(){typeof I=="function"&&I(),W(!0)},[I]),He=be.useCallback(function(){typeof E=="function"&&E(),W(!1)},[E]),Be=a!==void 0?a:V,Ee=p!==void 0?p:Q,Ne=z!==void 0?z:ae;return Xr(Xr({},F),{},{inputValue:Be,menuIsOpen:Ee,onChange:ge,onInputChange:ye,onMenuClose:He,onMenuOpen:De,value:Ne})}function d7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bde(r.key),r)}}function p7e(e,t,n){return t&&sQ(e.prototype,t),n&&sQ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ID(e,t)}function OI(e){return OI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},OI(e)}function Ude(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ude=function(){return!!e})()}function g7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y7e(e,t){if(t&&(Tx(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g7e(e)}function _7e(e){var t=Ude();return function(){var n,r=OI(e);if(t){var i=OI(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y7e(this,n)}}function v7e(e){if(Array.isArray(e))return d6(e)}function b7e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function x7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G8(e){return v7e(e)||b7e(e)||jde(e)||x7e()}function w7e(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function S7e(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var T7e=(function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(S7e(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=w7e(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e})(),bu="-ms-",CI="-moz-",za="-webkit-",$de="comm",Y8="rule",W8="decl",E7e="@import",Vde="@keyframes",A7e="@layer",O7e=Math.abs,KR=String.fromCharCode,C7e=Object.assign;function M7e(e,t){return eu(e,0)^45?(((t<<2^eu(e,0))<<2^eu(e,1))<<2^eu(e,2))<<2^eu(e,3):0}function qde(e){return e.trim()}function D7e(e,t){return(e=t.exec(e))?e[0]:e}function Fa(e,t,n){return e.replace(t,n)}function p6(e,t){return e.indexOf(t)}function eu(e,t){return e.charCodeAt(t)|0}function nA(e,t,n){return e.slice(t,n)}function Bm(e){return e.length}function X8(e){return e.length}function LM(e,t){return t.push(e),e}function I7e(e,t){return e.map(t).join("")}var QR=1,pS=1,Hde=0,rf=0,Ks=0,lT="";function JR(e,t,n,r,i,s,f){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:QR,column:pS,length:f,return:""}}function jE(e,t){return C7e(JR("",null,null,"",null,null,0),e,{length:-e.length},t)}function P7e(){return Ks}function R7e(){return Ks=rf>0?eu(lT,--rf):0,pS--,Ks===10&&(pS=1,QR--),Ks}function eh(){return Ks=rf<Hde?eu(lT,rf++):0,pS++,Ks===10&&(pS=1,QR++),Ks}function rg(){return eu(lT,rf)}function SD(){return rf}function MO(e,t){return nA(lT,e,t)}function rA(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Gde(e){return QR=pS=1,Hde=Bm(lT=e),rf=0,[]}function Yde(e){return lT="",e}function TD(e){return qde(MO(rf-1,m6(e===91?e+2:e===40?e+1:e)))}function k7e(e){for(;(Ks=rg())&&Ks<33;)eh();return rA(e)>2||rA(Ks)>3?"":" "}function L7e(e,t){for(;--t&&eh()&&!(Ks<48||Ks>102||Ks>57&&Ks<65||Ks>70&&Ks<97););return MO(e,SD()+(t<6&&rg()==32&&eh()==32))}function m6(e){for(;eh();)switch(Ks){case e:return rf;case 34:case 39:e!==34&&e!==39&&m6(Ks);break;case 40:e===41&&m6(e);break;case 92:eh();break}return rf}function z7e(e,t){for(;eh()&&e+Ks!==57;)if(e+Ks===84&&rg()===47)break;return"/*"+MO(t,rf-1)+"*"+KR(e===47?e:eh())}function F7e(e){for(;!rA(rg());)eh();return MO(e,rf)}function N7e(e){return Yde(ED("",null,null,null,[""],e=Gde(e),0,[0],e))}function ED(e,t,n,r,i,s,f,a,p){for(var _=0,S=0,E=f,I=0,z=0,F=0,U=1,k=1,V=1,K=0,J="",ie=i,Q=s,W=r,te=J;k;)switch(F=K,K=eh()){case 40:if(F!=108&&eu(te,E-1)==58){p6(te+=Fa(TD(K),"&","&\f"),"&\f")!=-1&&(V=-1);break}case 34:case 39:case 91:te+=TD(K);break;case 9:case 10:case 13:case 32:te+=k7e(F);break;case 92:te+=L7e(SD()-1,7);continue;case 47:switch(rg()){case 42:case 47:LM(B7e(z7e(eh(),SD()),t,n),p);break;default:te+="/"}break;case 123*U:a[_++]=Bm(te)*V;case 125*U:case 59:case 0:switch(K){case 0:case 125:k=0;case 59+S:V==-1&&(te=Fa(te,/\f/g,"")),z>0&&Bm(te)-E&&LM(z>32?uQ(te+";",r,n,E-1):uQ(Fa(te," ","")+";",r,n,E-2),p);break;case 59:te+=";";default:if(LM(W=lQ(te,t,n,_,S,i,a,J,ie=[],Q=[],E),s),K===123)if(S===0)ED(te,t,W,W,ie,s,E,a,Q);else switch(I===99&&eu(te,3)===110?100:I){case 100:case 108:case 109:case 115:ED(e,W,W,r&&LM(lQ(e,W,W,0,0,i,a,J,i,ie=[],E),Q),i,Q,E,a,r?ie:Q);break;default:ED(te,W,W,W,[""],Q,0,a,Q)}}_=S=z=0,U=V=1,J=te="",E=f;break;case 58:E=1+Bm(te),z=F;default:if(U<1){if(K==123)--U;else if(K==125&&U++==0&&R7e()==125)continue}switch(te+=KR(K),K*U){case 38:V=S>0?1:(te+="\f",-1);break;case 44:a[_++]=(Bm(te)-1)*V,V=1;break;case 64:rg()===45&&(te+=TD(eh())),I=rg(),S=E=Bm(J=te+=F7e(SD())),K++;break;case 45:F===45&&Bm(te)==2&&(U=0)}}return s}function lQ(e,t,n,r,i,s,f,a,p,_,S){for(var E=i-1,I=i===0?s:[""],z=X8(I),F=0,U=0,k=0;F<r;++F)for(var V=0,K=nA(e,E+1,E=O7e(U=f[F])),J=e;V<z;++V)(J=qde(U>0?I[V]+" "+K:Fa(K,/&\f/g,I[V])))&&(p[k++]=J);return JR(e,t,n,i===0?Y8:a,p,_,S)}function B7e(e,t,n){return JR(e,t,n,$de,KR(P7e()),nA(e,2,-2),0)}function uQ(e,t,n,r){return JR(e,t,n,W8,nA(e,0,r),nA(e,r+1,-1),r)}function kw(e,t){for(var n="",r=X8(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function j7e(e,t,n,r){switch(e.type){case A7e:if(e.children.length)break;case E7e:case W8:return e.return=e.return||e.value;case $de:return"";case Vde:return e.return=e.value+"{"+kw(e.children,r)+"}";case Y8:e.value=e.props.join(",")}return Bm(n=kw(e.children,r))?e.return=e.value+"{"+n+"}":""}function U7e(e){var t=X8(e);return function(n,r,i,s){for(var f="",a=0;a<t;a++)f+=e[a](n,r,i,s)||"";return f}}function $7e(e){return function(t){t.root||(t=t.return)&&e(t)}}function V7e(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var q7e=function(t,n,r){for(var i=0,s=0;i=s,s=rg(),i===38&&s===12&&(n[r]=1),!rA(s);)eh();return MO(t,rf)},H7e=function(t,n){var r=-1,i=44;do switch(rA(i)){case 0:i===38&&rg()===12&&(n[r]=1),t[r]+=q7e(rf-1,n,r);break;case 2:t[r]+=TD(i);break;case 4:if(i===44){t[++r]=rg()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=KR(i)}while(i=eh());return t},G7e=function(t,n){return Yde(H7e(Gde(t),n))},cQ=new WeakMap,Y7e=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!cQ.get(r))&&!i){cQ.set(t,!0);for(var s=[],f=G7e(n,s),a=r.props,p=0,_=0;p<f.length;p++)for(var S=0;S<a.length;S++,_++)t.props[_]=s[p]?f[p].replace(/&\f/g,a[S]):a[S]+" "+f[p]}}},W7e=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function Wde(e,t){switch(M7e(e,t)){case 5103:return za+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return za+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return za+e+CI+e+bu+e+e;case 6828:case 4268:return za+e+bu+e+e;case 6165:return za+e+bu+"flex-"+e+e;case 5187:return za+e+Fa(e,/(\w+).+(:[^]+)/,za+"box-$1$2"+bu+"flex-$1$2")+e;case 5443:return za+e+bu+"flex-item-"+Fa(e,/flex-|-self/,"")+e;case 4675:return za+e+bu+"flex-line-pack"+Fa(e,/align-content|flex-|-self/,"")+e;case 5548:return za+e+bu+Fa(e,"shrink","negative")+e;case 5292:return za+e+bu+Fa(e,"basis","preferred-size")+e;case 6060:return za+"box-"+Fa(e,"-grow","")+za+e+bu+Fa(e,"grow","positive")+e;case 4554:return za+Fa(e,/([^-])(transform)/g,"$1"+za+"$2")+e;case 6187:return Fa(Fa(Fa(e,/(zoom-|grab)/,za+"$1"),/(image-set)/,za+"$1"),e,"")+e;case 5495:case 3959:return Fa(e,/(image-set\([^]*)/,za+"$1$`$1");case 4968:return Fa(Fa(e,/(.+:)(flex-)?(.*)/,za+"box-pack:$3"+bu+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+za+e+e;case 4095:case 3583:case 4068:case 2532:return Fa(e,/(.+)-inline(.+)/,za+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Bm(e)-1-t>6)switch(eu(e,t+1)){case 109:if(eu(e,t+4)!==45)break;case 102:return Fa(e,/(.+:)(.+)-([^]+)/,"$1"+za+"$2-$3$1"+CI+(eu(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~p6(e,"stretch")?Wde(Fa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(eu(e,t+1)!==115)break;case 6444:switch(eu(e,Bm(e)-3-(~p6(e,"!important")&&10))){case 107:return Fa(e,":",":"+za)+e;case 101:return Fa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+za+(eu(e,14)===45?"inline-":"")+"box$3$1"+za+"$2$3$1"+bu+"$2box$3")+e}break;case 5936:switch(eu(e,t+11)){case 114:return za+e+bu+Fa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return za+e+bu+Fa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return za+e+bu+Fa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return za+e+bu+e+e}return e}var X7e=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case W8:t.return=Wde(t.value,t.length);break;case Vde:return kw([jE(t,{value:Fa(t.value,"@","@"+za)})],i);case Y8:if(t.length)return I7e(t.props,function(s){switch(D7e(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return kw([jE(t,{props:[Fa(s,/:(read-\w+)/,":"+CI+"$1")]})],i);case"::placeholder":return kw([jE(t,{props:[Fa(s,/:(plac\w+)/,":"+za+"input-$1")]}),jE(t,{props:[Fa(s,/:(plac\w+)/,":"+CI+"$1")]}),jE(t,{props:[Fa(s,/:(plac\w+)/,bu+"input-$1")]})],i)}return""})}},Z7e=[X7e],K7e=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(U){var k=U.getAttribute("data-emotion");k.indexOf(" ")!==-1&&(document.head.appendChild(U),U.setAttribute("data-s",""))})}var i=t.stylisPlugins||Z7e,s={},f,a=[];f=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(U){for(var k=U.getAttribute("data-emotion").split(" "),V=1;V<k.length;V++)s[k[V]]=!0;a.push(U)});var p,_=[Y7e,W7e];{var S,E=[j7e,$7e(function(U){S.insert(U)})],I=U7e(_.concat(i,E)),z=function(k){return kw(N7e(k),I)};p=function(k,V,K,J){S=K,z(k?k+"{"+V.styles+"}":V.styles),J&&(F.inserted[V.name]=!0)}}var F={key:n,sheet:new T7e({key:n,container:f,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:p};return F.sheet.hydrate(a),F},gF={exports:{}},$a={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fQ;function Q7e(){if(fQ)return $a;fQ=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,f=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,_=e?Symbol.for("react.concurrent_mode"):60111,S=e?Symbol.for("react.forward_ref"):60112,E=e?Symbol.for("react.suspense"):60113,I=e?Symbol.for("react.suspense_list"):60120,z=e?Symbol.for("react.memo"):60115,F=e?Symbol.for("react.lazy"):60116,U=e?Symbol.for("react.block"):60121,k=e?Symbol.for("react.fundamental"):60117,V=e?Symbol.for("react.responder"):60118,K=e?Symbol.for("react.scope"):60119;function J(Q){if(typeof Q=="object"&&Q!==null){var W=Q.$$typeof;switch(W){case t:switch(Q=Q.type,Q){case p:case _:case r:case s:case i:case E:return Q;default:switch(Q=Q&&Q.$$typeof,Q){case a:case S:case F:case z:case f:return Q;default:return W}}case n:return W}}}function ie(Q){return J(Q)===_}return $a.AsyncMode=p,$a.ConcurrentMode=_,$a.ContextConsumer=a,$a.ContextProvider=f,$a.Element=t,$a.ForwardRef=S,$a.Fragment=r,$a.Lazy=F,$a.Memo=z,$a.Portal=n,$a.Profiler=s,$a.StrictMode=i,$a.Suspense=E,$a.isAsyncMode=function(Q){return ie(Q)||J(Q)===p},$a.isConcurrentMode=ie,$a.isContextConsumer=function(Q){return J(Q)===a},$a.isContextProvider=function(Q){return J(Q)===f},$a.isElement=function(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t},$a.isForwardRef=function(Q){return J(Q)===S},$a.isFragment=function(Q){return J(Q)===r},$a.isLazy=function(Q){return J(Q)===F},$a.isMemo=function(Q){return J(Q)===z},$a.isPortal=function(Q){return J(Q)===n},$a.isProfiler=function(Q){return J(Q)===s},$a.isStrictMode=function(Q){return J(Q)===i},$a.isSuspense=function(Q){return J(Q)===E},$a.isValidElementType=function(Q){return typeof Q=="string"||typeof Q=="function"||Q===r||Q===_||Q===s||Q===i||Q===E||Q===I||typeof Q=="object"&&Q!==null&&(Q.$$typeof===F||Q.$$typeof===z||Q.$$typeof===f||Q.$$typeof===a||Q.$$typeof===S||Q.$$typeof===k||Q.$$typeof===V||Q.$$typeof===K||Q.$$typeof===U)},$a.typeOf=J,$a}var hQ;function J7e(){return hQ||(hQ=1,gF.exports=Q7e()),gF.exports}var yF,dQ;function eYe(){if(dQ)return yF;dQ=1;var e=J7e(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=r,s[e.Memo]=i;function f(F){return e.isMemo(F)?i:s[F.$$typeof]||t}var a=Object.defineProperty,p=Object.getOwnPropertyNames,_=Object.getOwnPropertySymbols,S=Object.getOwnPropertyDescriptor,E=Object.getPrototypeOf,I=Object.prototype;function z(F,U,k){if(typeof U!="string"){if(I){var V=E(U);V&&V!==I&&z(F,V,k)}var K=p(U);_&&(K=K.concat(_(U)));for(var J=f(F),ie=f(U),Q=0;Q<K.length;++Q){var W=K[Q];if(!n[W]&&!(k&&k[W])&&!(ie&&ie[W])&&!(J&&J[W])){var te=S(U,W);try{a(F,W,te)}catch{}}}}return F}return yF=z,yF}eYe();var tYe=!0;function nYe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(r+=i+" ")}),r}var Xde=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||tYe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},rYe=function(t,n,r){Xde(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function iYe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var aYe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},oYe=/[A-Z]|^ms/g,sYe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Zde=function(t){return t.charCodeAt(1)===45},pQ=function(t){return t!=null&&typeof t!="boolean"},_F=V7e(function(e){return Zde(e)?e:e.replace(oYe,"-$&").toLowerCase()}),mQ=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(sYe,function(r,i,s){return jm={name:i,styles:s,next:jm},i})}return aYe[t]!==1&&!Zde(t)&&typeof n=="number"&&n!==0?n+"px":n};function iA(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return jm={name:i.name,styles:i.styles,next:jm},i.name;var s=n;if(s.styles!==void 0){var f=s.next;if(f!==void 0)for(;f!==void 0;)jm={name:f.name,styles:f.styles,next:jm},f=f.next;var a=s.styles+";";return a}return lYe(e,t,n)}case"function":{if(e!==void 0){var p=jm,_=n(e);return jm=p,iA(e,t,_)}break}}var S=n;return S}function lYe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=iA(e,t,n[i])+";";else for(var s in n){var f=n[s];if(typeof f!="object"){var a=f;pQ(a)&&(r+=_F(s)+":"+mQ(s,a)+";")}else if(Array.isArray(f)&&typeof f[0]=="string"&&t==null)for(var p=0;p<f.length;p++)pQ(f[p])&&(r+=_F(s)+":"+mQ(s,f[p])+";");else{var _=iA(e,t,f);switch(s){case"animation":case"animationName":{r+=_F(s)+":"+_+";";break}default:r+=s+"{"+_+"}"}}}return r}var gQ=/label:\s*([^\s;{]+)\s*(;|$)/g,jm;function Kde(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";jm=void 0;var s=e[0];if(s==null||s.raw===void 0)r=!1,i+=iA(n,t,s);else{var f=s;i+=f[0]}for(var a=1;a<e.length;a++)if(i+=iA(n,t,e[a]),r){var p=s;i+=p[a]}gQ.lastIndex=0;for(var _="",S;(S=gQ.exec(i))!==null;)_+="-"+S[1];var E=iYe(i)+_;return{name:E,styles:i,next:jm}}var uYe=function(t){return t()},cYe=MD.useInsertionEffect?MD.useInsertionEffect:!1,fYe=cYe||uYe,Qde=be.createContext(typeof HTMLElement<"u"?K7e({key:"css"}):null);Qde.Provider;var hYe=function(t){return be.forwardRef(function(n,r){var i=be.useContext(Qde);return t(n,i,r)})},dYe=be.createContext({}),Z8={}.hasOwnProperty,g6="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",pYe=function(t,n){var r={};for(var i in n)Z8.call(n,i)&&(r[i]=n[i]);return r[g6]=t,r},mYe=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return Xde(n,r,i),fYe(function(){return rYe(n,r,i)}),null},gYe=hYe(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var i=e[g6],s=[r],f="";typeof e.className=="string"?f=nYe(t.registered,s,e.className):e.className!=null&&(f=e.className+" ");var a=Kde(s,void 0,be.useContext(dYe));f+=t.key+"-"+a.name;var p={};for(var _ in e)Z8.call(e,_)&&_!=="css"&&_!==g6&&(p[_]=e[_]);return p.className=f,n&&(p.ref=n),be.createElement(be.Fragment,null,be.createElement(mYe,{cache:t,serialized:a,isStringTag:typeof i=="string"}),be.createElement(i,p))}),yYe=gYe,zr=function(t,n){var r=arguments;if(n==null||!Z8.call(n,"css"))return be.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=yYe,s[1]=pYe(t,n);for(var f=2;f<i;f++)s[f]=r[f];return be.createElement.apply(null,s)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(zr||(zr={}));function K8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Kde(t)}function _Ye(){var e=K8.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function vYe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y6=be.useLayoutEffect,bYe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],MI=function(){};function xYe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function wYe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=[].concat(r);if(t&&e)for(var f in t)t.hasOwnProperty(f)&&t[f]&&s.push("".concat(xYe(e,f)));return s.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var yQ=function(t){return IYe(t)?t.filter(Boolean):Tx(t)==="object"&&t!==null?[t]:[]},Jde=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var n=g_(t,bYe);return Xr({},n)},ys=function(t,n,r){var i=t.cx,s=t.getStyles,f=t.getClassNames,a=t.className;return{css:s(n,t),className:i(r??{},f(n,t),a)}};function ek(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function SYe(e){return ek(e)?window.innerHeight:e.clientHeight}function epe(e){return ek(e)?window.pageYOffset:e.scrollTop}function DI(e,t){if(ek(e)){window.scrollTo(0,t);return}e.scrollTop=t}function TYe(e){var t=getComputedStyle(e),n=t.position==="absolute",r=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),!(n&&t.position==="static")&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}function EYe(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}function zM(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:MI,i=epe(e),s=t-i,f=10,a=0;function p(){a+=f;var _=EYe(a,i,s,n);DI(e,_),a<n?window.requestAnimationFrame(p):r(e)}p()}function _Q(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=t.offsetHeight/3;r.bottom+i>n.bottom?DI(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):r.top-i<n.top&&DI(e,Math.max(t.offsetTop-i,0))}function AYe(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function vQ(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function OYe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var tpe=!1,CYe={get passive(){return tpe=!0}},FM=typeof window<"u"?window:{};FM.addEventListener&&FM.removeEventListener&&(FM.addEventListener("p",MI,CYe),FM.removeEventListener("p",MI,!1));var MYe=tpe;function DYe(e){return e!=null}function IYe(e){return Array.isArray(e)}function NM(e,t,n){return e?t:n}var PYe=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s=Object.entries(t).filter(function(f){var a=Hy(f,1),p=a[0];return!r.includes(p)});return s.reduce(function(f,a){var p=Hy(a,2),_=p[0],S=p[1];return f[_]=S,f},{})},RYe=["children","innerProps"],kYe=["children","innerProps"];function LYe(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,s=e.shouldScroll,f=e.isFixedPosition,a=e.controlHeight,p=TYe(n),_={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return _;var S=p.getBoundingClientRect(),E=S.height,I=n.getBoundingClientRect(),z=I.bottom,F=I.height,U=I.top,k=n.offsetParent.getBoundingClientRect(),V=k.top,K=f?window.innerHeight:SYe(p),J=epe(p),ie=parseInt(getComputedStyle(n).marginBottom,10),Q=parseInt(getComputedStyle(n).marginTop,10),W=V-Q,te=K-U,X=W+J,ae=E-J-U,le=z-K+J+ie,ge=J+U-Q,ye=160;switch(i){case"auto":case"bottom":if(te>=F)return{placement:"bottom",maxHeight:t};if(ae>=F&&!f)return s&&zM(p,le,ye),{placement:"bottom",maxHeight:t};if(!f&&ae>=r||f&&te>=r){s&&zM(p,le,ye);var De=f?te-ie:ae-ie;return{placement:"bottom",maxHeight:De}}if(i==="auto"||f){var He=t,Be=f?W:X;return Be>=r&&(He=Math.min(Be-ie-a,t)),{placement:"top",maxHeight:He}}if(i==="bottom")return s&&DI(p,le),{placement:"bottom",maxHeight:t};break;case"top":if(W>=F)return{placement:"top",maxHeight:t};if(X>=F&&!f)return s&&zM(p,ge,ye),{placement:"top",maxHeight:t};if(!f&&X>=r||f&&W>=r){var Ee=t;return(!f&&X>=r||f&&W>=r)&&(Ee=f?W-Q:X-Q),s&&zM(p,ge,ye),{placement:"top",maxHeight:Ee}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return _}function zYe(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var npe=function(t){return t==="auto"?"bottom":t},FYe=function(t,n){var r,i=t.placement,s=t.theme,f=s.borderRadius,a=s.spacing,p=s.colors;return Xr((r={label:"menu"},o2(r,zYe(i),"100%"),o2(r,"position","absolute"),o2(r,"width","100%"),o2(r,"zIndex",1),r),n?{}:{backgroundColor:p.neutral0,borderRadius:f,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},rpe=be.createContext(null),NYe=function(t){var n=t.children,r=t.minMenuHeight,i=t.maxMenuHeight,s=t.menuPlacement,f=t.menuPosition,a=t.menuShouldScrollIntoView,p=t.theme,_=be.useContext(rpe)||{},S=_.setPortalPlacement,E=be.useRef(null),I=be.useState(i),z=Hy(I,2),F=z[0],U=z[1],k=be.useState(null),V=Hy(k,2),K=V[0],J=V[1],ie=p.spacing.controlHeight;return y6(function(){var Q=E.current;if(Q){var W=f==="fixed",te=a&&!W,X=LYe({maxHeight:i,menuEl:Q,minHeight:r,placement:s,shouldScroll:te,isFixedPosition:W,controlHeight:ie});U(X.maxHeight),J(X.placement),S==null||S(X.placement)}},[i,s,f,a,r,S,ie]),n({ref:E,placerProps:Xr(Xr({},t),{},{placement:K||npe(s),maxHeight:F})})},BYe=function(t){var n=t.children,r=t.innerRef,i=t.innerProps;return zr("div",Kr({},ys(t,"menu",{menu:!0}),{ref:r},i),n)},jYe=BYe,UYe=function(t,n){var r=t.maxHeight,i=t.theme.spacing.baseUnit;return Xr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},$Ye=function(t){var n=t.children,r=t.innerProps,i=t.innerRef,s=t.isMulti;return zr("div",Kr({},ys(t,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},r),n)},ipe=function(t,n){var r=t.theme,i=r.spacing.baseUnit,s=r.colors;return Xr({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},VYe=ipe,qYe=ipe,HYe=function(t){var n=t.children,r=n===void 0?"No options":n,i=t.innerProps,s=g_(t,RYe);return zr("div",Kr({},ys(Xr(Xr({},s),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},GYe=function(t){var n=t.children,r=n===void 0?"Loading...":n,i=t.innerProps,s=g_(t,kYe);return zr("div",Kr({},ys(Xr(Xr({},s),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},YYe=function(t){var n=t.rect,r=t.offset,i=t.position;return{left:n.left,position:i,top:r,width:n.width,zIndex:1}},WYe=function(t){var n=t.appendTo,r=t.children,i=t.controlElement,s=t.innerProps,f=t.menuPlacement,a=t.menuPosition,p=be.useRef(null),_=be.useRef(null),S=be.useState(npe(f)),E=Hy(S,2),I=E[0],z=E[1],F=be.useMemo(function(){return{setPortalPlacement:z}},[]),U=be.useState(null),k=Hy(U,2),V=k[0],K=k[1],J=be.useCallback(function(){if(i){var te=AYe(i),X=a==="fixed"?0:window.pageYOffset,ae=te[I]+X;(ae!==(V==null?void 0:V.offset)||te.left!==(V==null?void 0:V.rect.left)||te.width!==(V==null?void 0:V.rect.width))&&K({offset:ae,rect:te})}},[i,a,I,V==null?void 0:V.offset,V==null?void 0:V.rect.left,V==null?void 0:V.rect.width]);y6(function(){J()},[J]);var ie=be.useCallback(function(){typeof _.current=="function"&&(_.current(),_.current=null),i&&p.current&&(_.current=Cde(i,p.current,J,{elementResize:"ResizeObserver"in window}))},[i,J]);y6(function(){ie()},[ie]);var Q=be.useCallback(function(te){p.current=te,ie()},[ie]);if(!n&&a!=="fixed"||!V)return null;var W=zr("div",Kr({ref:Q},ys(Xr(Xr({},t),{},{offset:V.offset,position:a,rect:V.rect}),"menuPortal",{"menu-portal":!0}),s),r);return zr(rpe.Provider,{value:F},n?UU.createPortal(W,n):W)},XYe=function(t){var n=t.isDisabled,r=t.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},ZYe=function(t){var n=t.children,r=t.innerProps,i=t.isDisabled,s=t.isRtl;return zr("div",Kr({},ys(t,"container",{"--is-disabled":i,"--is-rtl":s}),r),n)},KYe=function(t,n){var r=t.theme.spacing,i=t.isMulti,s=t.hasValue,f=t.selectProps.controlShouldRenderValue;return Xr({alignItems:"center",display:i&&s&&f?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},QYe=function(t){var n=t.children,r=t.innerProps,i=t.isMulti,s=t.hasValue;return zr("div",Kr({},ys(t,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),r),n)},JYe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},eWe=function(t){var n=t.children,r=t.innerProps;return zr("div",Kr({},ys(t,"indicatorsContainer",{indicators:!0}),r),n)},bQ,tWe=["size"],nWe=["innerProps","isRtl","size"],rWe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},ape=function(t){var n=t.size,r=g_(t,tWe);return zr("svg",Kr({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:rWe},r))},Q8=function(t){return zr(ape,Kr({size:20},t),zr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},ope=function(t){return zr(ape,Kr({size:20},t),zr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},spe=function(t,n){var r=t.isFocused,i=t.theme,s=i.spacing.baseUnit,f=i.colors;return Xr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?f.neutral60:f.neutral20,padding:s*2,":hover":{color:r?f.neutral80:f.neutral40}})},iWe=spe,aWe=function(t){var n=t.children,r=t.innerProps;return zr("div",Kr({},ys(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||zr(ope,null))},oWe=spe,sWe=function(t){var n=t.children,r=t.innerProps;return zr("div",Kr({},ys(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||zr(Q8,null))},lWe=function(t,n){var r=t.isDisabled,i=t.theme,s=i.spacing.baseUnit,f=i.colors;return Xr({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?f.neutral10:f.neutral20,marginBottom:s*2,marginTop:s*2})},uWe=function(t){var n=t.innerProps;return zr("span",Kr({},n,ys(t,"indicatorSeparator",{"indicator-separator":!0})))},cWe=_Ye(bQ||(bQ=vYe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),fWe=function(t,n){var r=t.isFocused,i=t.size,s=t.theme,f=s.colors,a=s.spacing.baseUnit;return Xr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?f.neutral60:f.neutral20,padding:a*2})},vF=function(t){var n=t.delay,r=t.offset;return zr("span",{css:K8({animation:"".concat(cWe," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},hWe=function(t){var n=t.innerProps,r=t.isRtl,i=t.size,s=i===void 0?4:i,f=g_(t,nWe);return zr("div",Kr({},ys(Xr(Xr({},f),{},{innerProps:n,isRtl:r,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),zr(vF,{delay:0,offset:r}),zr(vF,{delay:160,offset:!0}),zr(vF,{delay:320,offset:!r}))},dWe=function(t,n){var r=t.isDisabled,i=t.isFocused,s=t.theme,f=s.colors,a=s.borderRadius,p=s.spacing;return Xr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:p.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?f.neutral5:f.neutral0,borderColor:r?f.neutral10:i?f.primary:f.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(f.primary):void 0,"&:hover":{borderColor:i?f.primary:f.neutral30}})},pWe=function(t){var n=t.children,r=t.isDisabled,i=t.isFocused,s=t.innerRef,f=t.innerProps,a=t.menuIsOpen;return zr("div",Kr({ref:s},ys(t,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":a}),f,{"aria-disabled":r||void 0}),n)},mWe=pWe,gWe=["data"],yWe=function(t,n){var r=t.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},_We=function(t){var n=t.children,r=t.cx,i=t.getStyles,s=t.getClassNames,f=t.Heading,a=t.headingProps,p=t.innerProps,_=t.label,S=t.theme,E=t.selectProps;return zr("div",Kr({},ys(t,"group",{group:!0}),p),zr(f,Kr({},a,{selectProps:E,theme:S,getStyles:i,getClassNames:s,cx:r}),_),zr("div",null,n))},vWe=function(t,n){var r=t.theme,i=r.colors,s=r.spacing;return Xr({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},bWe=function(t){var n=Jde(t);n.data;var r=g_(n,gWe);return zr("div",Kr({},ys(t,"groupHeading",{"group-heading":!0}),r))},xWe=_We,wWe=["innerRef","isDisabled","isHidden","inputClassName"],SWe=function(t,n){var r=t.isDisabled,i=t.value,s=t.theme,f=s.spacing,a=s.colors;return Xr(Xr({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},TWe),n?{}:{margin:f.baseUnit/2,paddingBottom:f.baseUnit/2,paddingTop:f.baseUnit/2,color:a.neutral80})},lpe={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},TWe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Xr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},lpe)},EWe=function(t){return Xr({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},lpe)},AWe=function(t){var n=t.cx,r=t.value,i=Jde(t),s=i.innerRef,f=i.isDisabled,a=i.isHidden,p=i.inputClassName,_=g_(i,wWe);return zr("div",Kr({},ys(t,"input",{"input-container":!0}),{"data-value":r||""}),zr("input",Kr({className:n({input:!0},p),ref:s,style:EWe(a),disabled:f},_)))},OWe=AWe,CWe=function(t,n){var r=t.theme,i=r.spacing,s=r.borderRadius,f=r.colors;return Xr({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:f.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},MWe=function(t,n){var r=t.theme,i=r.borderRadius,s=r.colors,f=t.cropWithEllipsis;return Xr({overflow:"hidden",textOverflow:f||f===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},DWe=function(t,n){var r=t.theme,i=r.spacing,s=r.borderRadius,f=r.colors,a=t.isFocused;return Xr({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:a?f.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:f.dangerLight,color:f.danger}})},upe=function(t){var n=t.children,r=t.innerProps;return zr("div",r,n)},IWe=upe,PWe=upe;function RWe(e){var t=e.children,n=e.innerProps;return zr("div",Kr({role:"button"},n),t||zr(Q8,{size:14}))}var kWe=function(t){var n=t.children,r=t.components,i=t.data,s=t.innerProps,f=t.isDisabled,a=t.removeProps,p=t.selectProps,_=r.Container,S=r.Label,E=r.Remove;return zr(_,{data:i,innerProps:Xr(Xr({},ys(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":f})),s),selectProps:p},zr(S,{data:i,innerProps:Xr({},ys(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:p},n),zr(E,{data:i,innerProps:Xr(Xr({},ys(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},a),selectProps:p}))},LWe=kWe,zWe=function(t,n){var r=t.isDisabled,i=t.isFocused,s=t.isSelected,f=t.theme,a=f.spacing,p=f.colors;return Xr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?p.primary:i?p.primary25:"transparent",color:r?p.neutral20:s?p.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:s?p.primary:p.primary50}})},FWe=function(t){var n=t.children,r=t.isDisabled,i=t.isFocused,s=t.isSelected,f=t.innerRef,a=t.innerProps;return zr("div",Kr({},ys(t,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":s}),{ref:f,"aria-disabled":r},a),n)},NWe=FWe,BWe=function(t,n){var r=t.theme,i=r.spacing,s=r.colors;return Xr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},jWe=function(t){var n=t.children,r=t.innerProps;return zr("div",Kr({},ys(t,"placeholder",{placeholder:!0}),r),n)},UWe=jWe,$We=function(t,n){var r=t.isDisabled,i=t.theme,s=i.spacing,f=i.colors;return Xr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?f.neutral40:f.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},VWe=function(t){var n=t.children,r=t.isDisabled,i=t.innerProps;return zr("div",Kr({},ys(t,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),n)},qWe=VWe,HWe={ClearIndicator:sWe,Control:mWe,DropdownIndicator:aWe,DownChevron:ope,CrossIcon:Q8,Group:xWe,GroupHeading:bWe,IndicatorsContainer:eWe,IndicatorSeparator:uWe,Input:OWe,LoadingIndicator:hWe,Menu:jYe,MenuList:$Ye,MenuPortal:WYe,LoadingMessage:GYe,NoOptionsMessage:HYe,MultiValue:LWe,MultiValueContainer:IWe,MultiValueLabel:PWe,MultiValueRemove:RWe,Option:NWe,Placeholder:UWe,SelectContainer:ZYe,SingleValue:qWe,ValueContainer:QYe},GWe=function(t){return Xr(Xr({},HWe),t.components)},xQ=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function YWe(e,t){return!!(e===t||xQ(e)&&xQ(t))}function WWe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!YWe(e[n],t[n]))return!1;return!0}function XWe(e,t){t===void 0&&(t=WWe);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&t(i,n.lastArgs))return n.lastResult;var f=e.apply(this,i);return n={lastResult:f,lastArgs:i,lastThis:this},f}return r.clear=function(){n=null},r}var ZWe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},KWe=function(t){return zr("span",Kr({css:ZWe},t))},wQ=KWe,QWe={guidance:function(t){var n=t.isSearchable,r=t.isMulti,i=t.tabSelectsValue,s=t.context,f=t.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return f?"".concat(t["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var n=t.action,r=t.label,i=r===void 0?"":r,s=t.labels,f=t.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return f?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(t){var n=t.context,r=t.focused,i=t.options,s=t.label,f=s===void 0?"":s,a=t.selectValue,p=t.isDisabled,_=t.isSelected,S=t.isAppleDevice,E=function(U,k){return U&&U.length?"".concat(U.indexOf(k)+1," of ").concat(U.length):""};if(n==="value"&&a)return"value ".concat(f," focused, ").concat(E(a,r),".");if(n==="menu"&&S){var I=p?" disabled":"",z="".concat(_?" selected":"").concat(I);return"".concat(f).concat(z,", ").concat(E(i,r),".")}return""},onFilter:function(t){var n=t.inputValue,r=t.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},JWe=function(t){var n=t.ariaSelection,r=t.focusedOption,i=t.focusedValue,s=t.focusableOptions,f=t.isFocused,a=t.selectValue,p=t.selectProps,_=t.id,S=t.isAppleDevice,E=p.ariaLiveMessages,I=p.getOptionLabel,z=p.inputValue,F=p.isMulti,U=p.isOptionDisabled,k=p.isSearchable,V=p.menuIsOpen,K=p.options,J=p.screenReaderStatus,ie=p.tabSelectsValue,Q=p.isLoading,W=p["aria-label"],te=p["aria-live"],X=be.useMemo(function(){return Xr(Xr({},QWe),E||{})},[E]),ae=be.useMemo(function(){var Be="";if(n&&X.onChange){var Ee=n.option,Ne=n.options,at=n.removedValue,yt=n.removedValues,je=n.value,Ke=function(Ut){return Array.isArray(Ut)?null:Ut},it=at||Ee||Ke(je),Pe=it?I(it):"",jt=Ne||yt||void 0,sn=jt?jt.map(I):[],dn=Xr({isDisabled:it&&U(it,a),label:Pe,labels:sn},n);Be=X.onChange(dn)}return Be},[n,X,U,a,I]),le=be.useMemo(function(){var Be="",Ee=r||i,Ne=!!(r&&a&&a.includes(r));if(Ee&&X.onFocus){var at={focused:Ee,label:I(Ee),isDisabled:U(Ee,a),isSelected:Ne,options:s,context:Ee===r?"menu":"value",selectValue:a,isAppleDevice:S};Be=X.onFocus(at)}return Be},[r,i,I,U,X,s,a,S]),ge=be.useMemo(function(){var Be="";if(V&&K.length&&!Q&&X.onFilter){var Ee=J({count:s.length});Be=X.onFilter({inputValue:z,resultsMessage:Ee})}return Be},[s,z,V,X,K,J,Q]),ye=(n==null?void 0:n.action)==="initial-input-focus",De=be.useMemo(function(){var Be="";if(X.guidance){var Ee=i?"value":V?"menu":"input";Be=X.guidance({"aria-label":W,context:Ee,isDisabled:r&&U(r,a),isMulti:F,isSearchable:k,tabSelectsValue:ie,isInitialFocus:ye})}return Be},[W,r,i,F,U,k,V,X,a,ie,ye]),He=zr(be.Fragment,null,zr("span",{id:"aria-selection"},ae),zr("span",{id:"aria-focused"},le),zr("span",{id:"aria-results"},ge),zr("span",{id:"aria-guidance"},De));return zr(be.Fragment,null,zr(wQ,{id:_},ye&&He),zr(wQ,{"aria-live":te,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},f&&!ye&&He))},eXe=JWe,_6=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],tXe=new RegExp("["+_6.map(function(e){return e.letters}).join("")+"]","g"),cpe={};for(var bF=0;bF<_6.length;bF++)for(var xF=_6[bF],wF=0;wF<xF.letters.length;wF++)cpe[xF.letters[wF]]=xF.base;var fpe=function(t){return t.replace(tXe,function(n){return cpe[n]})},nXe=XWe(fpe),SQ=function(t){return t.replace(/^\s+|\s+$/g,"")},rXe=function(t){return"".concat(t.label," ").concat(t.value)},iXe=function(t){return function(n,r){if(n.data.__isNew__)return!0;var i=Xr({ignoreCase:!0,ignoreAccents:!0,stringify:rXe,trim:!0,matchFrom:"any"},t),s=i.ignoreCase,f=i.ignoreAccents,a=i.stringify,p=i.trim,_=i.matchFrom,S=p?SQ(r):r,E=p?SQ(a(n)):a(n);return s&&(S=S.toLowerCase(),E=E.toLowerCase()),f&&(S=nXe(S),E=fpe(E)),_==="start"?E.substr(0,S.length)===S:E.indexOf(S)>-1}},aXe=["innerRef"];function oXe(e){var t=e.innerRef,n=g_(e,aXe),r=PYe(n,"onExited","in","enter","exit","appear");return zr("input",Kr({ref:t},r,{css:K8({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var sXe=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function lXe(e){var t=e.isEnabled,n=e.onBottomArrive,r=e.onBottomLeave,i=e.onTopArrive,s=e.onTopLeave,f=be.useRef(!1),a=be.useRef(!1),p=be.useRef(0),_=be.useRef(null),S=be.useCallback(function(k,V){if(_.current!==null){var K=_.current,J=K.scrollTop,ie=K.scrollHeight,Q=K.clientHeight,W=_.current,te=V>0,X=ie-Q-J,ae=!1;X>V&&f.current&&(r&&r(k),f.current=!1),te&&a.current&&(s&&s(k),a.current=!1),te&&V>X?(n&&!f.current&&n(k),W.scrollTop=ie,ae=!0,f.current=!0):!te&&-V>J&&(i&&!a.current&&i(k),W.scrollTop=0,ae=!0,a.current=!0),ae&&sXe(k)}},[n,r,i,s]),E=be.useCallback(function(k){S(k,k.deltaY)},[S]),I=be.useCallback(function(k){p.current=k.changedTouches[0].clientY},[]),z=be.useCallback(function(k){var V=p.current-k.changedTouches[0].clientY;S(k,V)},[S]),F=be.useCallback(function(k){if(k){var V=MYe?{passive:!1}:!1;k.addEventListener("wheel",E,V),k.addEventListener("touchstart",I,V),k.addEventListener("touchmove",z,V)}},[z,I,E]),U=be.useCallback(function(k){k&&(k.removeEventListener("wheel",E,!1),k.removeEventListener("touchstart",I,!1),k.removeEventListener("touchmove",z,!1))},[z,I,E]);return be.useEffect(function(){if(t){var k=_.current;return F(k),function(){U(k)}}},[t,F,U]),function(k){_.current=k}}var TQ=["boxSizing","height","overflow","paddingRight","position"],EQ={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function AQ(e){e.cancelable&&e.preventDefault()}function OQ(e){e.stopPropagation()}function CQ(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;e===0?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function MQ(){return"ontouchstart"in window||navigator.maxTouchPoints}var DQ=!!(typeof window<"u"&&window.document&&window.document.createElement),UE=0,sw={capture:!1,passive:!1};function uXe(e){var t=e.isEnabled,n=e.accountForScrollbars,r=n===void 0?!0:n,i=be.useRef({}),s=be.useRef(null),f=be.useCallback(function(p){if(DQ){var _=document.body,S=_&&_.style;if(r&&TQ.forEach(function(F){var U=S&&S[F];i.current[F]=U}),r&&UE<1){var E=parseInt(i.current.paddingRight,10)||0,I=document.body?document.body.clientWidth:0,z=window.innerWidth-I+E||0;Object.keys(EQ).forEach(function(F){var U=EQ[F];S&&(S[F]=U)}),S&&(S.paddingRight="".concat(z,"px"))}_&&MQ()&&(_.addEventListener("touchmove",AQ,sw),p&&(p.addEventListener("touchstart",CQ,sw),p.addEventListener("touchmove",OQ,sw))),UE+=1}},[r]),a=be.useCallback(function(p){if(DQ){var _=document.body,S=_&&_.style;UE=Math.max(UE-1,0),r&&UE<1&&TQ.forEach(function(E){var I=i.current[E];S&&(S[E]=I)}),_&&MQ()&&(_.removeEventListener("touchmove",AQ,sw),p&&(p.removeEventListener("touchstart",CQ,sw),p.removeEventListener("touchmove",OQ,sw)))}},[r]);return be.useEffect(function(){if(t){var p=s.current;return f(p),function(){a(p)}}},[t,f,a]),function(p){s.current=p}}var cXe=function(t){var n=t.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},fXe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function hXe(e){var t=e.children,n=e.lockEnabled,r=e.captureEnabled,i=r===void 0?!0:r,s=e.onBottomArrive,f=e.onBottomLeave,a=e.onTopArrive,p=e.onTopLeave,_=lXe({isEnabled:i,onBottomArrive:s,onBottomLeave:f,onTopArrive:a,onTopLeave:p}),S=uXe({isEnabled:n}),E=function(z){_(z),S(z)};return zr(be.Fragment,null,n&&zr("div",{onClick:cXe,css:fXe}),t(E))}var dXe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},pXe=function(t){var n=t.name,r=t.onFocus;return zr("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:dXe,value:"",onChange:function(){}})},mXe=pXe;function J8(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function gXe(){return J8(/^iPhone/i)}function hpe(){return J8(/^Mac/i)}function yXe(){return J8(/^iPad/i)||hpe()&&navigator.maxTouchPoints>1}function _Xe(){return gXe()||yXe()}function vXe(){return hpe()||_Xe()}var bXe=function(t){return t.label},xXe=function(t){return t.label},wXe=function(t){return t.value},SXe=function(t){return!!t.isDisabled},TXe={clearIndicator:oWe,container:XYe,control:dWe,dropdownIndicator:iWe,group:yWe,groupHeading:vWe,indicatorsContainer:JYe,indicatorSeparator:lWe,input:SWe,loadingIndicator:fWe,loadingMessage:qYe,menu:FYe,menuList:UYe,menuPortal:YYe,multiValue:CWe,multiValueLabel:MWe,multiValueRemove:DWe,noOptionsMessage:VYe,option:zWe,placeholder:BWe,singleValue:$We,valueContainer:KYe},EXe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},AXe=4,dpe=4,OXe=38,CXe=dpe*2,MXe={baseUnit:dpe,controlHeight:OXe,menuGutter:CXe},SF={borderRadius:AXe,colors:EXe,spacing:MXe},DXe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:vQ(),captureMenuScroll:!vQ(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:iXe(),formatGroupLabel:bXe,getOptionLabel:xXe,getOptionValue:wXe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:SXe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!OYe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var n=t.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function IQ(e,t,n,r){var i=gpe(e,t,n),s=ype(e,t,n),f=mpe(e,t),a=II(e,t);return{type:"option",data:t,isDisabled:i,isSelected:s,label:f,value:a,index:r}}function AD(e,t){return e.options.map(function(n,r){if("options"in n){var i=n.options.map(function(f,a){return IQ(e,f,t,a)}).filter(function(f){return RQ(e,f)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var s=IQ(e,n,t,r);return RQ(e,s)?s:void 0}).filter(DYe)}function ppe(e){return e.reduce(function(t,n){return n.type==="group"?t.push.apply(t,G8(n.options.map(function(r){return r.data}))):t.push(n.data),t},[])}function PQ(e,t){return e.reduce(function(n,r){return r.type==="group"?n.push.apply(n,G8(r.options.map(function(i){return{data:i.data,id:"".concat(t,"-").concat(r.index,"-").concat(i.index)}}))):n.push({data:r.data,id:"".concat(t,"-").concat(r.index)}),n},[])}function IXe(e,t){return ppe(AD(e,t))}function RQ(e,t){var n=e.inputValue,r=n===void 0?"":n,i=t.data,s=t.isSelected,f=t.label,a=t.value;return(!vpe(e)||!s)&&_pe(e,{label:f,value:a,data:i},r)}function PXe(e,t){var n=e.focusedValue,r=e.selectValue,i=r.indexOf(n);if(i>-1){var s=t.indexOf(n);if(s>-1)return n;if(i<t.length)return t[i]}return null}function RXe(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}var TF=function(t,n){var r,i=(r=t.find(function(s){return s.data===n}))===null||r===void 0?void 0:r.id;return i||null},mpe=function(t,n){return t.getOptionLabel(n)},II=function(t,n){return t.getOptionValue(n)};function gpe(e,t,n){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,n):!1}function ype(e,t,n){if(n.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,n);var r=II(e,t);return n.some(function(i){return II(e,i)===r})}function _pe(e,t,n){return e.filterOption?e.filterOption(t,n):!0}var vpe=function(t){var n=t.hideSelectedOptions,r=t.isMulti;return n===void 0?r:n},kXe=1,bpe=(function(e){m7e(n,e);var t=_7e(n);function n(r){var i;if(d7e(this,n),i=t.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(p){i.controlRef=p},i.focusedOptionRef=null,i.getFocusedOptionRef=function(p){i.focusedOptionRef=p},i.menuListRef=null,i.getMenuListRef=function(p){i.menuListRef=p},i.inputRef=null,i.getInputRef=function(p){i.inputRef=p},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(p,_){var S=i.props,E=S.onChange,I=S.name;_.name=I,i.ariaOnChange(p,_),E(p,_)},i.setValue=function(p,_,S){var E=i.props,I=E.closeMenuOnSelect,z=E.isMulti,F=E.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:F}),I&&(i.setState({inputIsHiddenAfterUpdate:!z}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(p,{action:_,option:S})},i.selectOption=function(p){var _=i.props,S=_.blurInputOnSelect,E=_.isMulti,I=_.name,z=i.state.selectValue,F=E&&i.isOptionSelected(p,z),U=i.isOptionDisabled(p,z);if(F){var k=i.getOptionValue(p);i.setValue(z.filter(function(V){return i.getOptionValue(V)!==k}),"deselect-option",p)}else if(!U)E?i.setValue([].concat(G8(z),[p]),"select-option",p):i.setValue(p,"select-option");else{i.ariaOnChange(p,{action:"select-option",option:p,name:I});return}S&&i.blurInput()},i.removeValue=function(p){var _=i.props.isMulti,S=i.state.selectValue,E=i.getOptionValue(p),I=S.filter(function(F){return i.getOptionValue(F)!==E}),z=NM(_,I,I[0]||null);i.onChange(z,{action:"remove-value",removedValue:p}),i.focusInput()},i.clearValue=function(){var p=i.state.selectValue;i.onChange(NM(i.props.isMulti,[],null),{action:"clear",removedValues:p})},i.popValue=function(){var p=i.props.isMulti,_=i.state.selectValue,S=_[_.length-1],E=_.slice(0,_.length-1),I=NM(p,E,E[0]||null);S&&i.onChange(I,{action:"pop-value",removedValue:S})},i.getFocusedOptionId=function(p){return TF(i.state.focusableOptionsWithIds,p)},i.getFocusableOptionsWithIds=function(){return PQ(AD(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var p=arguments.length,_=new Array(p),S=0;S<p;S++)_[S]=arguments[S];return wYe.apply(void 0,[i.props.classNamePrefix].concat(_))},i.getOptionLabel=function(p){return mpe(i.props,p)},i.getOptionValue=function(p){return II(i.props,p)},i.getStyles=function(p,_){var S=i.props.unstyled,E=TXe[p](_,S);E.boxSizing="border-box";var I=i.props.styles[p];return I?I(E,_):E},i.getClassNames=function(p,_){var S,E;return(S=(E=i.props.classNames)[p])===null||S===void 0?void 0:S.call(E,_)},i.getElementId=function(p){return"".concat(i.state.instancePrefix,"-").concat(p)},i.getComponents=function(){return GWe(i.props)},i.buildCategorizedOptions=function(){return AD(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return ppe(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(p,_){i.setState({ariaSelection:Xr({value:p},_)})},i.onMenuMouseDown=function(p){p.button===0&&(p.stopPropagation(),p.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(p){i.blockOptionHover=!1},i.onControlMouseDown=function(p){if(!p.defaultPrevented){var _=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?p.target.tagName!=="INPUT"&&p.target.tagName!=="TEXTAREA"&&i.onMenuClose():_&&i.openMenu("first"):(_&&(i.openAfterFocus=!0),i.focusInput()),p.target.tagName!=="INPUT"&&p.target.tagName!=="TEXTAREA"&&p.preventDefault()}},i.onDropdownIndicatorMouseDown=function(p){if(!(p&&p.type==="mousedown"&&p.button!==0)&&!i.props.isDisabled){var _=i.props,S=_.isMulti,E=_.menuIsOpen;i.focusInput(),E?(i.setState({inputIsHiddenAfterUpdate:!S}),i.onMenuClose()):i.openMenu("first"),p.preventDefault()}},i.onClearIndicatorMouseDown=function(p){p&&p.type==="mousedown"&&p.button!==0||(i.clearValue(),p.preventDefault(),i.openAfterFocus=!1,p.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(p){typeof i.props.closeMenuOnScroll=="boolean"?p.target instanceof HTMLElement&&ek(p.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(p)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(p){var _=p.touches,S=_&&_.item(0);S&&(i.initialTouchX=S.clientX,i.initialTouchY=S.clientY,i.userIsDragging=!1)},i.onTouchMove=function(p){var _=p.touches,S=_&&_.item(0);if(S){var E=Math.abs(S.clientX-i.initialTouchX),I=Math.abs(S.clientY-i.initialTouchY),z=5;i.userIsDragging=E>z||I>z}},i.onTouchEnd=function(p){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(p.target)&&i.menuListRef&&!i.menuListRef.contains(p.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(p){i.userIsDragging||i.onControlMouseDown(p)},i.onClearIndicatorTouchEnd=function(p){i.userIsDragging||i.onClearIndicatorMouseDown(p)},i.onDropdownIndicatorTouchEnd=function(p){i.userIsDragging||i.onDropdownIndicatorMouseDown(p)},i.handleInputChange=function(p){var _=i.props.inputValue,S=p.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(S,{action:"input-change",prevInputValue:_}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(p){i.props.onFocus&&i.props.onFocus(p),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(p){var _=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(p),i.onInputChange("",{action:"input-blur",prevInputValue:_}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(p){if(!(i.blockOptionHover||i.state.focusedOption===p)){var _=i.getFocusableOptions(),S=_.indexOf(p);i.setState({focusedOption:p,focusedOptionId:S>-1?i.getFocusedOptionId(p):null})}},i.shouldHideSelectedOptions=function(){return vpe(i.props)},i.onValueInputFocus=function(p){p.preventDefault(),p.stopPropagation(),i.focus()},i.onKeyDown=function(p){var _=i.props,S=_.isMulti,E=_.backspaceRemovesValue,I=_.escapeClearsValue,z=_.inputValue,F=_.isClearable,U=_.isDisabled,k=_.menuIsOpen,V=_.onKeyDown,K=_.tabSelectsValue,J=_.openMenuOnFocus,ie=i.state,Q=ie.focusedOption,W=ie.focusedValue,te=ie.selectValue;if(!U&&!(typeof V=="function"&&(V(p),p.defaultPrevented))){switch(i.blockOptionHover=!0,p.key){case"ArrowLeft":if(!S||z)return;i.focusValue("previous");break;case"ArrowRight":if(!S||z)return;i.focusValue("next");break;case"Delete":case"Backspace":if(z)return;if(W)i.removeValue(W);else{if(!E)return;S?i.popValue():F&&i.clearValue()}break;case"Tab":if(i.isComposing||p.shiftKey||!k||!K||!Q||J&&i.isOptionSelected(Q,te))return;i.selectOption(Q);break;case"Enter":if(p.keyCode===229)break;if(k){if(!Q||i.isComposing)return;i.selectOption(Q);break}return;case"Escape":k?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:z}),i.onMenuClose()):F&&I&&i.clearValue();break;case" ":if(z)return;if(!k){i.openMenu("first");break}if(!Q)return;i.selectOption(Q);break;case"ArrowUp":k?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":k?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!k)return;i.focusOption("pageup");break;case"PageDown":if(!k)return;i.focusOption("pagedown");break;case"Home":if(!k)return;i.focusOption("first");break;case"End":if(!k)return;i.focusOption("last");break;default:return}p.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++kXe),i.state.selectValue=yQ(r.value),r.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),f=i.buildFocusableOptions(),a=f.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=f[a],i.state.focusedOptionId=TF(s,f[a])}return i}return p7e(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&_Q(this.menuListRef,this.focusedOptionRef),vXe()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var s=this.props,f=s.isDisabled,a=s.menuIsOpen,p=this.state.isFocused;(p&&!f&&i.isDisabled||p&&a&&!i.menuIsOpen)&&this.focusInput(),p&&f&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!p&&!f&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(_Q(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,f=this.state,a=f.selectValue,p=f.isFocused,_=this.buildFocusableOptions(),S=i==="first"?0:_.length-1;if(!this.props.isMulti){var E=_.indexOf(a[0]);E>-1&&(S=E)}this.scrollToFocusedOptionOnUpdate=!(p&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:_[S],focusedOptionId:this.getFocusedOptionId(_[S])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,f=s.selectValue,a=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var p=f.indexOf(a);a||(p=-1);var _=f.length-1,S=-1;if(f.length){switch(i){case"previous":p===0?S=0:p===-1?S=_:S=p-1;break;case"next":p>-1&&p<_&&(S=p+1);break}this.setState({inputIsHidden:S!==-1,focusedValue:f[S]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,f=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var p=0,_=a.indexOf(f);f||(_=-1),i==="up"?p=_>0?_-1:a.length-1:i==="down"?p=(_+1)%a.length:i==="pageup"?(p=_-s,p<0&&(p=0)):i==="pagedown"?(p=_+s,p>a.length-1&&(p=a.length-1)):i==="last"&&(p=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[p],focusedValue:null,focusedOptionId:this.getFocusedOptionId(a[p])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(SF):Xr(Xr({},SF),this.props.theme):SF})},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,f=this.getStyles,a=this.getClassNames,p=this.getValue,_=this.selectOption,S=this.setValue,E=this.props,I=E.isMulti,z=E.isRtl,F=E.options,U=this.hasValue();return{clearValue:i,cx:s,getStyles:f,getClassNames:a,getValue:p,hasValue:U,isMulti:I,isRtl:z,options:F,selectOption:_,selectProps:E,setValue:S,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,f=i.isMulti;return s===void 0?f:s}},{key:"isOptionDisabled",value:function(i,s){return gpe(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return ype(this.props,i,s)}},{key:"filterOption",value:function(i,s){return _pe(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var f=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:f,selectValue:a})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var i=this.props,s=i.isDisabled,f=i.isSearchable,a=i.inputId,p=i.inputValue,_=i.tabIndex,S=i.form,E=i.menuIsOpen,I=i.required,z=this.getComponents(),F=z.Input,U=this.state,k=U.inputIsHidden,V=U.ariaSelection,K=this.commonProps,J=a||this.getElementId("input"),ie=Xr(Xr(Xr({"aria-autocomplete":"list","aria-expanded":E,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":I,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},E&&{"aria-controls":this.getElementId("listbox")}),!f&&{"aria-readonly":!0}),this.hasValue()?(V==null?void 0:V.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return f?be.createElement(F,Kr({},K,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:J,innerRef:this.getInputRef,isDisabled:s,isHidden:k,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:_,form:S,type:"text",value:p},ie)):be.createElement(oXe,Kr({id:J,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:MI,onFocus:this.onInputFocus,disabled:s,tabIndex:_,inputMode:"none",form:S,value:""},ie))})},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),f=s.MultiValue,a=s.MultiValueContainer,p=s.MultiValueLabel,_=s.MultiValueRemove,S=s.SingleValue,E=s.Placeholder,I=this.commonProps,z=this.props,F=z.controlShouldRenderValue,U=z.isDisabled,k=z.isMulti,V=z.inputValue,K=z.placeholder,J=this.state,ie=J.selectValue,Q=J.focusedValue,W=J.isFocused;if(!this.hasValue()||!F)return V?null:be.createElement(E,Kr({},I,{key:"placeholder",isDisabled:U,isFocused:W,innerProps:{id:this.getElementId("placeholder")}}),K);if(k)return ie.map(function(X,ae){var le=X===Q,ge="".concat(i.getOptionLabel(X),"-").concat(i.getOptionValue(X));return be.createElement(f,Kr({},I,{components:{Container:a,Label:p,Remove:_},isFocused:le,isDisabled:U,key:ge,index:ae,removeProps:{onClick:function(){return i.removeValue(X)},onTouchEnd:function(){return i.removeValue(X)},onMouseDown:function(De){De.preventDefault()}},data:X}),i.formatOptionLabel(X,"value"))});if(V)return null;var te=ie[0];return be.createElement(S,Kr({},I,{data:te,isDisabled:U}),this.formatOptionLabel(te,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,f=this.commonProps,a=this.props,p=a.isDisabled,_=a.isLoading,S=this.state.isFocused;if(!this.isClearable()||!s||p||!this.hasValue()||_)return null;var E={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return be.createElement(s,Kr({},f,{innerProps:E,isFocused:S}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,f=this.commonProps,a=this.props,p=a.isDisabled,_=a.isLoading,S=this.state.isFocused;if(!s||!_)return null;var E={"aria-hidden":"true"};return be.createElement(s,Kr({},f,{innerProps:E,isDisabled:p,isFocused:S}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,f=i.IndicatorSeparator;if(!s||!f)return null;var a=this.commonProps,p=this.props.isDisabled,_=this.state.isFocused;return be.createElement(f,Kr({},a,{isDisabled:p,isFocused:_}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var f=this.commonProps,a=this.props.isDisabled,p=this.state.isFocused,_={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return be.createElement(s,Kr({},f,{innerProps:_,isDisabled:a,isFocused:p}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),f=s.Group,a=s.GroupHeading,p=s.Menu,_=s.MenuList,S=s.MenuPortal,E=s.LoadingMessage,I=s.NoOptionsMessage,z=s.Option,F=this.commonProps,U=this.state.focusedOption,k=this.props,V=k.captureMenuScroll,K=k.inputValue,J=k.isLoading,ie=k.loadingMessage,Q=k.minMenuHeight,W=k.maxMenuHeight,te=k.menuIsOpen,X=k.menuPlacement,ae=k.menuPosition,le=k.menuPortalTarget,ge=k.menuShouldBlockScroll,ye=k.menuShouldScrollIntoView,De=k.noOptionsMessage,He=k.onMenuScrollToTop,Be=k.onMenuScrollToBottom;if(!te)return null;var Ee=function(Pe,jt){var sn=Pe.type,dn=Pe.data,Sn=Pe.isDisabled,Ut=Pe.isSelected,xe=Pe.label,Ye=Pe.value,ct=U===dn,mt=Sn?void 0:function(){return i.onOptionHover(dn)},Ct=Sn?void 0:function(){return i.selectOption(dn)},Yt="".concat(i.getElementId("option"),"-").concat(jt),gn={id:Yt,onClick:Ct,onMouseMove:mt,onMouseOver:mt,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:Ut};return be.createElement(z,Kr({},F,{innerProps:gn,data:dn,isDisabled:Sn,isSelected:Ut,key:Yt,label:xe,type:sn,value:Ye,isFocused:ct,innerRef:ct?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Pe.data,"menu"))},Ne;if(this.hasOptions())Ne=this.getCategorizedOptions().map(function(it){if(it.type==="group"){var Pe=it.data,jt=it.options,sn=it.index,dn="".concat(i.getElementId("group"),"-").concat(sn),Sn="".concat(dn,"-heading");return be.createElement(f,Kr({},F,{key:dn,data:Pe,options:jt,Heading:a,headingProps:{id:Sn,data:it.data},label:i.formatGroupLabel(it.data)}),it.options.map(function(Ut){return Ee(Ut,"".concat(sn,"-").concat(Ut.index))}))}else if(it.type==="option")return Ee(it,"".concat(it.index))});else if(J){var at=ie({inputValue:K});if(at===null)return null;Ne=be.createElement(E,F,at)}else{var yt=De({inputValue:K});if(yt===null)return null;Ne=be.createElement(I,F,yt)}var je={minMenuHeight:Q,maxMenuHeight:W,menuPlacement:X,menuPosition:ae,menuShouldScrollIntoView:ye},Ke=be.createElement(NYe,Kr({},F,je),function(it){var Pe=it.ref,jt=it.placerProps,sn=jt.placement,dn=jt.maxHeight;return be.createElement(p,Kr({},F,je,{innerRef:Pe,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:J,placement:sn}),be.createElement(hXe,{captureEnabled:V,onTopArrive:He,onBottomArrive:Be,lockEnabled:ge},function(Sn){return be.createElement(_,Kr({},F,{innerRef:function(xe){i.getMenuListRef(xe),Sn(xe)},innerProps:{role:"listbox","aria-multiselectable":F.isMulti,id:i.getElementId("listbox")},isLoading:J,maxHeight:dn,focusedOption:U}),Ne)}))});return le||ae==="fixed"?be.createElement(S,Kr({},F,{appendTo:le,controlElement:this.controlRef,menuPlacement:X,menuPosition:ae}),Ke):Ke}},{key:"renderFormField",value:function(){var i=this,s=this.props,f=s.delimiter,a=s.isDisabled,p=s.isMulti,_=s.name,S=s.required,E=this.state.selectValue;if(S&&!this.hasValue()&&!a)return be.createElement(mXe,{name:_,onFocus:this.onValueInputFocus});if(!(!_||a))if(p)if(f){var I=E.map(function(U){return i.getOptionValue(U)}).join(f);return be.createElement("input",{name:_,type:"hidden",value:I})}else{var z=E.length>0?E.map(function(U,k){return be.createElement("input",{key:"i-".concat(k),name:_,type:"hidden",value:i.getOptionValue(U)})}):be.createElement("input",{name:_,type:"hidden",value:""});return be.createElement("div",null,z)}else{var F=E[0]?this.getOptionValue(E[0]):"";return be.createElement("input",{name:_,type:"hidden",value:F})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,f=s.ariaSelection,a=s.focusedOption,p=s.focusedValue,_=s.isFocused,S=s.selectValue,E=this.getFocusableOptions();return be.createElement(eXe,Kr({},i,{id:this.getElementId("live-region"),ariaSelection:f,focusedOption:a,focusedValue:p,isFocused:_,selectValue:S,focusableOptions:E,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,f=i.IndicatorsContainer,a=i.SelectContainer,p=i.ValueContainer,_=this.props,S=_.className,E=_.id,I=_.isDisabled,z=_.menuIsOpen,F=this.state.isFocused,U=this.commonProps=this.getCommonProps();return be.createElement(a,Kr({},U,{className:S,innerProps:{id:E,onKeyDown:this.onKeyDown},isDisabled:I,isFocused:F}),this.renderLiveRegion(),be.createElement(s,Kr({},U,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:I,isFocused:F,menuIsOpen:z}),be.createElement(p,Kr({},U,{isDisabled:I}),this.renderPlaceholderOrValue(),this.renderInput()),be.createElement(f,Kr({},U,{isDisabled:I}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var f=s.prevProps,a=s.clearFocusValueOnUpdate,p=s.inputIsHiddenAfterUpdate,_=s.ariaSelection,S=s.isFocused,E=s.prevWasFocused,I=s.instancePrefix,z=i.options,F=i.value,U=i.menuIsOpen,k=i.inputValue,V=i.isMulti,K=yQ(F),J={};if(f&&(F!==f.value||z!==f.options||U!==f.menuIsOpen||k!==f.inputValue)){var ie=U?IXe(i,K):[],Q=U?PQ(AD(i,K),"".concat(I,"-option")):[],W=a?PXe(s,K):null,te=RXe(s,ie),X=TF(Q,te);J={selectValue:K,focusedOption:te,focusedOptionId:X,focusableOptionsWithIds:Q,focusedValue:W,clearFocusValueOnUpdate:!1}}var ae=p!=null&&i!==f?{inputIsHidden:p,inputIsHiddenAfterUpdate:void 0}:{},le=_,ge=S&&E;return S&&!ge&&(le={value:NM(V,K,K[0]||null),options:K,action:"initial-input-focus"},ge=!E),(_==null?void 0:_.action)==="initial-input-focus"&&(le=null),Xr(Xr(Xr({},J),ae),{},{prevProps:i,ariaSelection:le,prevWasFocused:ge})}}]),n})(be.Component);bpe.defaultProps=DXe;var LXe=be.forwardRef(function(e,t){var n=h7e(e);return be.createElement(bpe,Kr({ref:t},n))}),EF=LXe;class zXe extends Je.Component{constructor(t){super(),this.handleOnApply=this.handleOnApply.bind(this),this.handleShow=this.handleShow.bind(this),this.handleClose=this.handleClose.bind(this),this.state={show:!1}}handleOnApply(){}handleClose(t){this.setState({show:!1})}handleShow(t){this.setState({show:!0})}render(){let t=this.props.gaugeCount,n=this.props.pixelCount;return Oe.jsxs("div",{children:[Oe.jsx(ia,{className:"g-0 mb-2",children:Oe.jsxs(kr,{children:[Oe.jsx("strong",{children:"Where"}),t>0?Oe.jsx("span",{className:"mx-1 my-1",children:Oe.jsx(I4,{pill:!0,bg:"primary",children:`${t} ${yK(t,"gauge","gauges")}`})}):null,n>0?Oe.jsx("span",{className:"mx-1 my-1",children:Oe.jsx(I4,{pill:!0,bg:"primary",children:`${n} ${yK(n,"pixel","pixels")}`})}):null]})}),Oe.jsx(ia,{className:"g-0",children:Oe.jsx(kr,{children:Oe.jsxs(g$,{defaultActiveKey:"sensor",id:"geomPickerTypes",children:[Oe.jsxs(Bb,{eventKey:"sensor",title:"By Sensor",className:"my-4",children:[this.props.context!==fi.legacyGarr?Oe.jsxs(ia,{className:"g-0",children:[Oe.jsx(kr,{md:3,children:Oe.jsx("small",{children:"Rain Gauges"})}),Oe.jsx(kr,{md:9,children:Oe.jsx(EF,{isMulti:!0,value:this.props.selectedGauges,onChange:this.props.handleSelectGauge,options:this.props.gaugeOpts,menuPortalTarget:document.body,isClearable:!0})})]}):null,this.props.context!==fi.legacyGauge?Oe.jsxs(ia,{className:"g-0",children:[Oe.jsx(kr,{md:3,children:Oe.jsx("small",{children:"Radar Pixels"})}),Oe.jsx(kr,{md:9,children:Oe.jsx(EF,{isMulti:!0,value:this.props.selectedPixels,onChange:this.props.handleSelectPixel,options:this.props.pixelOpts,menuPortalTarget:document.body,isClearable:!0})})]}):null]}),this.props.context!==fi.legacyGauge?Oe.jsx(Bb,{eventKey:"geography",title:"By Geography",className:"my-4",children:Oe.jsx(ia,{className:"g-0",children:Oe.jsx(kr,{md:12,children:Oe.jsx(EF,{placeholder:"Select radar pixels by basin, municipality, or watershed",isMulti:!0,onChange:this.props.handleSelectGeography,options:this.props.geographyOpts,menuPortalTarget:document.body,isClearable:!0})})})}):null]})})})]})}}function FXe(e,t){var n=dfe(e),r=Kw(e,"pixel").map(_=>({value:_.properties.id,label:`${_.properties.id}`})),i=oz(e,t.contextType,"pixel"),s=Kw(e,"gauge").filter(_=>_.properties.active===!0).map(_=>({value:_.properties.id,label:`${_.properties.id}: ${_.properties.name}`})),f=oz(e,t.contextType,"gauge"),a=Cje(e),p=oz(e,t.contextType,"basin");return{gaugeOpts:s,pixelOpts:r,geographyOpts:a,selectedBasin:p,selectedGauges:f,selectedPixels:i,pixelCount:i.length,gaugeCount:f.length,context:n}}const NXe=(e,t)=>({handleSelectGauge:n=>{e(Iw({contextType:t.contextType,inputType:"geomPicker",sensorLocationType:"gauge",selectedOptions:n}))},handleSelectPixel:n=>{e(Iw({contextType:t.contextType,inputType:"geomPicker",sensorLocationType:"pixel",selectedOptions:n}))},handleSelectGeography:n=>{e(d$e({contextType:t.contextType,inputType:"geomPicker",sensorLocationType:"geography",selectedOptions:n}))}}),BXe=af(FXe,NXe)(zXe);class jXe extends Je.Component{constructor(){super(...arguments);ir(this,"handleSelectInterval",n=>{this.props.dispatchPickInterval(n.currentTarget.value)})}render(){const n=wIe(this.props.contextType);return Oe.jsxs(ia,{className:"g-0",children:[Oe.jsx(kr,{lg:3,children:Oe.jsx("strong",{children:"Interval"})}),Oe.jsx(kr,{lg:9,children:Oe.jsx(gw,{children:n.map((r,i)=>Oe.jsx(gw.Check,{defaultChecked:r==="15-minute",inline:!0,label:r,value:r,type:"radio",id:`interval-${r}-${this.props.rainfallDataType}`,name:"intervalRadios",onChange:this.handleSelectInterval},`interval-${r}-${i}-${this.props.rainfallDataType}`))})})]})}}function UXe(e){return{}}const $Xe=(e,t)=>({dispatchPickInterval:n=>{e(ufe({rollup:n,contextType:t.contextType}))}}),VXe=af(UXe,$Xe)(jXe);var OD={exports:{}};/* @license
Papa Parse
v5.3.2
https://github.com/mholt/PapaParse
License: MIT
*/var qXe=OD.exports,kQ;function HXe(){return kQ||(kQ=1,(function(e,t){(function(n,r){e.exports=r()})(qXe,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i=!r.document&&!!r.postMessage,s=i&&/blob:/i.test((r.location||{}).protocol),f={},a=0,p={parse:function(X,ae){var le=(ae=ae||{}).dynamicTyping||!1;if(te(le)&&(ae.dynamicTypingFunction=le,le={}),ae.dynamicTyping=le,ae.transform=!!te(ae.transform)&&ae.transform,ae.worker&&p.WORKERS_SUPPORTED){var ge=(function(){if(!p.WORKERS_SUPPORTED)return!1;var De=(Be=r.URL||r.webkitURL||null,Ee=n.toString(),p.BLOB_URL||(p.BLOB_URL=Be.createObjectURL(new Blob(["(",Ee,")();"],{type:"text/javascript"})))),He=new r.Worker(De),Be,Ee;return He.onmessage=K,He.id=a++,f[He.id]=He})();return ge.userStep=ae.step,ge.userChunk=ae.chunk,ge.userComplete=ae.complete,ge.userError=ae.error,ae.step=te(ae.step),ae.chunk=te(ae.chunk),ae.complete=te(ae.complete),ae.error=te(ae.error),delete ae.worker,void ge.postMessage({input:X,config:ae,workerId:ge.id})}var ye=null;return p.NODE_STREAM_INPUT,typeof X=="string"?ye=ae.download?new E(ae):new z(ae):X.readable===!0&&te(X.read)&&te(X.on)?ye=new F(ae):(r.File&&X instanceof File||X instanceof Object)&&(ye=new I(ae)),ye.stream(X)},unparse:function(X,ae){var le=!1,ge=!0,ye=",",De=`\r
`,He='"',Be=He+He,Ee=!1,Ne=null,at=!1;(function(){if(typeof ae=="object"){if(typeof ae.delimiter!="string"||p.BAD_DELIMITERS.filter(function(it){return ae.delimiter.indexOf(it)!==-1}).length||(ye=ae.delimiter),(typeof ae.quotes=="boolean"||typeof ae.quotes=="function"||Array.isArray(ae.quotes))&&(le=ae.quotes),typeof ae.skipEmptyLines!="boolean"&&typeof ae.skipEmptyLines!="string"||(Ee=ae.skipEmptyLines),typeof ae.newline=="string"&&(De=ae.newline),typeof ae.quoteChar=="string"&&(He=ae.quoteChar),typeof ae.header=="boolean"&&(ge=ae.header),Array.isArray(ae.columns)){if(ae.columns.length===0)throw new Error("Option columns is empty");Ne=ae.columns}ae.escapeChar!==void 0&&(Be=ae.escapeChar+He),(typeof ae.escapeFormulae=="boolean"||ae.escapeFormulae instanceof RegExp)&&(at=ae.escapeFormulae instanceof RegExp?ae.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var yt=new RegExp(k(He),"g");if(typeof X=="string"&&(X=JSON.parse(X)),Array.isArray(X)){if(!X.length||Array.isArray(X[0]))return je(null,X,Ee);if(typeof X[0]=="object")return je(Ne||Object.keys(X[0]),X,Ee)}else if(typeof X=="object")return typeof X.data=="string"&&(X.data=JSON.parse(X.data)),Array.isArray(X.data)&&(X.fields||(X.fields=X.meta&&X.meta.fields||Ne),X.fields||(X.fields=Array.isArray(X.data[0])?X.fields:typeof X.data[0]=="object"?Object.keys(X.data[0]):[]),Array.isArray(X.data[0])||typeof X.data[0]=="object"||(X.data=[X.data])),je(X.fields||[],X.data||[],Ee);throw new Error("Unable to serialize unrecognized input");function je(it,Pe,jt){var sn="";typeof it=="string"&&(it=JSON.parse(it)),typeof Pe=="string"&&(Pe=JSON.parse(Pe));var dn=Array.isArray(it)&&0<it.length,Sn=!Array.isArray(Pe[0]);if(dn&&ge){for(var Ut=0;Ut<it.length;Ut++)0<Ut&&(sn+=ye),sn+=Ke(it[Ut],Ut);0<Pe.length&&(sn+=De)}for(var xe=0;xe<Pe.length;xe++){var Ye=dn?it.length:Pe[xe].length,ct=!1,mt=dn?Object.keys(Pe[xe]).length===0:Pe[xe].length===0;if(jt&&!dn&&(ct=jt==="greedy"?Pe[xe].join("").trim()==="":Pe[xe].length===1&&Pe[xe][0].length===0),jt==="greedy"&&dn){for(var Ct=[],Yt=0;Yt<Ye;Yt++){var gn=Sn?it[Yt]:Yt;Ct.push(Pe[xe][gn])}ct=Ct.join("").trim()===""}if(!ct){for(var En=0;En<Ye;En++){0<En&&!mt&&(sn+=ye);var or=dn&&Sn?it[En]:En;sn+=Ke(Pe[xe][or],En)}xe<Pe.length-1&&(!jt||0<Ye&&!mt)&&(sn+=De)}}return sn}function Ke(it,Pe){if(it==null)return"";if(it.constructor===Date)return JSON.stringify(it).slice(1,25);var jt=!1;at&&typeof it=="string"&&at.test(it)&&(it="'"+it,jt=!0);var sn=it.toString().replace(yt,Be);return(jt=jt||le===!0||typeof le=="function"&&le(it,Pe)||Array.isArray(le)&&le[Pe]||(function(dn,Sn){for(var Ut=0;Ut<Sn.length;Ut++)if(-1<dn.indexOf(Sn[Ut]))return!0;return!1})(sn,p.BAD_DELIMITERS)||-1<sn.indexOf(ye)||sn.charAt(0)===" "||sn.charAt(sn.length-1)===" ")?He+sn+He:sn}}};if(p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!i&&!!r.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=V,p.ParserHandle=U,p.NetworkStreamer=E,p.FileStreamer=I,p.StringStreamer=z,p.ReadableStreamStreamer=F,r.jQuery){var _=r.jQuery;_.fn.parse=function(X){var ae=X.config||{},le=[];return this.each(function(De){if(!(_(this).prop("tagName").toUpperCase()==="INPUT"&&_(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var He=0;He<this.files.length;He++)le.push({file:this.files[He],inputElem:this,instanceConfig:_.extend({},ae)})}),ge(),this;function ge(){if(le.length!==0){var De,He,Be,Ee,Ne=le[0];if(te(X.before)){var at=X.before(Ne.file,Ne.inputElem);if(typeof at=="object"){if(at.action==="abort")return De="AbortError",He=Ne.file,Be=Ne.inputElem,Ee=at.reason,void(te(X.error)&&X.error({name:De},He,Be,Ee));if(at.action==="skip")return void ye();typeof at.config=="object"&&(Ne.instanceConfig=_.extend(Ne.instanceConfig,at.config))}else if(at==="skip")return void ye()}var yt=Ne.instanceConfig.complete;Ne.instanceConfig.complete=function(je){te(yt)&&yt(je,Ne.file,Ne.inputElem),ye()},p.parse(Ne.file,Ne.instanceConfig)}else te(X.complete)&&X.complete()}function ye(){le.splice(0,1),ge()}}}function S(X){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(ae){var le=Q(ae);le.chunkSize=parseInt(le.chunkSize),ae.step||ae.chunk||(le.chunkSize=null),this._handle=new U(le),(this._handle.streamer=this)._config=le}).call(this,X),this.parseChunk=function(ae,le){if(this.isFirstChunk&&te(this._config.beforeFirstChunk)){var ge=this._config.beforeFirstChunk(ae);ge!==void 0&&(ae=ge)}this.isFirstChunk=!1,this._halted=!1;var ye=this._partialLine+ae;this._partialLine="";var De=this._handle.parse(ye,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var He=De.meta.cursor;this._finished||(this._partialLine=ye.substring(He-this._baseIndex),this._baseIndex=He),De&&De.data&&(this._rowCount+=De.data.length);var Be=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)r.postMessage({results:De,workerId:p.WORKER_ID,finished:Be});else if(te(this._config.chunk)&&!le){if(this._config.chunk(De,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);De=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(De.data),this._completeResults.errors=this._completeResults.errors.concat(De.errors),this._completeResults.meta=De.meta),this._completed||!Be||!te(this._config.complete)||De&&De.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Be||De&&De.meta.paused||this._nextChunk(),De}this._halted=!0},this._sendError=function(ae){te(this._config.error)?this._config.error(ae):s&&this._config.error&&r.postMessage({workerId:p.WORKER_ID,error:ae,finished:!1})}}function E(X){var ae;(X=X||{}).chunkSize||(X.chunkSize=p.RemoteChunkSize),S.call(this,X),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(le){this._input=le,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(ae=new XMLHttpRequest,this._config.withCredentials&&(ae.withCredentials=this._config.withCredentials),i||(ae.onload=W(this._chunkLoaded,this),ae.onerror=W(this._chunkError,this)),ae.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var le=this._config.downloadRequestHeaders;for(var ge in le)ae.setRequestHeader(ge,le[ge])}if(this._config.chunkSize){var ye=this._start+this._config.chunkSize-1;ae.setRequestHeader("Range","bytes="+this._start+"-"+ye)}try{ae.send(this._config.downloadRequestBody)}catch(De){this._chunkError(De.message)}i&&ae.status===0&&this._chunkError()}},this._chunkLoaded=function(){ae.readyState===4&&(ae.status<200||400<=ae.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:ae.responseText.length,this._finished=!this._config.chunkSize||this._start>=(function(le){var ge=le.getResponseHeader("Content-Range");return ge===null?-1:parseInt(ge.substring(ge.lastIndexOf("/")+1))})(ae),this.parseChunk(ae.responseText)))},this._chunkError=function(le){var ge=ae.statusText||le;this._sendError(new Error(ge))}}function I(X){var ae,le;(X=X||{}).chunkSize||(X.chunkSize=p.LocalChunkSize),S.call(this,X);var ge=typeof FileReader<"u";this.stream=function(ye){this._input=ye,le=ye.slice||ye.webkitSlice||ye.mozSlice,ge?((ae=new FileReader).onload=W(this._chunkLoaded,this),ae.onerror=W(this._chunkError,this)):ae=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var ye=this._input;if(this._config.chunkSize){var De=Math.min(this._start+this._config.chunkSize,this._input.size);ye=le.call(ye,this._start,De)}var He=ae.readAsText(ye,this._config.encoding);ge||this._chunkLoaded({target:{result:He}})},this._chunkLoaded=function(ye){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(ye.target.result)},this._chunkError=function(){this._sendError(ae.error)}}function z(X){var ae;S.call(this,X=X||{}),this.stream=function(le){return ae=le,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var le,ge=this._config.chunkSize;return ge?(le=ae.substring(0,ge),ae=ae.substring(ge)):(le=ae,ae=""),this._finished=!ae,this.parseChunk(le)}}}function F(X){S.call(this,X=X||{});var ae=[],le=!0,ge=!1;this.pause=function(){S.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){S.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(ye){this._input=ye,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ge&&ae.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),ae.length?this.parseChunk(ae.shift()):le=!0},this._streamData=W(function(ye){try{ae.push(typeof ye=="string"?ye:ye.toString(this._config.encoding)),le&&(le=!1,this._checkIsFinished(),this.parseChunk(ae.shift()))}catch(De){this._streamError(De)}},this),this._streamError=W(function(ye){this._streamCleanUp(),this._sendError(ye)},this),this._streamEnd=W(function(){this._streamCleanUp(),ge=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function U(X){var ae,le,ge,ye=Math.pow(2,53),De=-ye,He=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Be=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,Ee=this,Ne=0,at=0,yt=!1,je=!1,Ke=[],it={data:[],errors:[],meta:{}};if(te(X.step)){var Pe=X.step;X.step=function(xe){if(it=xe,dn())sn();else{if(sn(),it.data.length===0)return;Ne+=xe.data.length,X.preview&&Ne>X.preview?le.abort():(it.data=it.data[0],Pe(it,Ee))}}}function jt(xe){return X.skipEmptyLines==="greedy"?xe.join("").trim()==="":xe.length===1&&xe[0].length===0}function sn(){return it&&ge&&(Ut("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),ge=!1),X.skipEmptyLines&&(it.data=it.data.filter(function(xe){return!jt(xe)})),dn()&&(function(){if(!it)return;function xe(ct,mt){te(X.transformHeader)&&(ct=X.transformHeader(ct,mt)),Ke.push(ct)}if(Array.isArray(it.data[0])){for(var Ye=0;dn()&&Ye<it.data.length;Ye++)it.data[Ye].forEach(xe);it.data.splice(0,1)}else it.data.forEach(xe)})(),(function(){if(!it||!X.header&&!X.dynamicTyping&&!X.transform)return it;function xe(ct,mt){var Ct,Yt=X.header?{}:[];for(Ct=0;Ct<ct.length;Ct++){var gn=Ct,En=ct[Ct];X.header&&(gn=Ct>=Ke.length?"__parsed_extra":Ke[Ct]),X.transform&&(En=X.transform(En,gn)),En=Sn(gn,En),gn==="__parsed_extra"?(Yt[gn]=Yt[gn]||[],Yt[gn].push(En)):Yt[gn]=En}return X.header&&(Ct>Ke.length?Ut("FieldMismatch","TooManyFields","Too many fields: expected "+Ke.length+" fields but parsed "+Ct,at+mt):Ct<Ke.length&&Ut("FieldMismatch","TooFewFields","Too few fields: expected "+Ke.length+" fields but parsed "+Ct,at+mt)),Yt}var Ye=1;return!it.data.length||Array.isArray(it.data[0])?(it.data=it.data.map(xe),Ye=it.data.length):it.data=xe(it.data,0),X.header&&it.meta&&(it.meta.fields=Ke),at+=Ye,it})()}function dn(){return X.header&&Ke.length===0}function Sn(xe,Ye){return ct=xe,X.dynamicTypingFunction&&X.dynamicTyping[ct]===void 0&&(X.dynamicTyping[ct]=X.dynamicTypingFunction(ct)),(X.dynamicTyping[ct]||X.dynamicTyping)===!0?Ye==="true"||Ye==="TRUE"||Ye!=="false"&&Ye!=="FALSE"&&((function(mt){if(He.test(mt)){var Ct=parseFloat(mt);if(De<Ct&&Ct<ye)return!0}return!1})(Ye)?parseFloat(Ye):Be.test(Ye)?new Date(Ye):Ye===""?null:Ye):Ye;var ct}function Ut(xe,Ye,ct,mt){var Ct={type:xe,code:Ye,message:ct};mt!==void 0&&(Ct.row=mt),it.errors.push(Ct)}this.parse=function(xe,Ye,ct){var mt=X.quoteChar||'"';if(X.newline||(X.newline=(function(gn,En){gn=gn.substring(0,1048576);var or=new RegExp(k(En)+"([^]*?)"+k(En),"gm"),sr=(gn=gn.replace(or,"")).split("\r"),Nr=gn.split(`
`),Pr=1<Nr.length&&Nr[0].length<sr[0].length;if(sr.length===1||Pr)return`
`;for(var Er=0,Tr=0;Tr<sr.length;Tr++)sr[Tr][0]===`
`&&Er++;return Er>=sr.length/2?`\r
`:"\r"})(xe,mt)),ge=!1,X.delimiter)te(X.delimiter)&&(X.delimiter=X.delimiter(xe),it.meta.delimiter=X.delimiter);else{var Ct=(function(gn,En,or,sr,Nr){var Pr,Er,Tr,pi;Nr=Nr||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var Br=0;Br<Nr.length;Br++){var hi=Nr[Br],$t=0,Tn=0,ur=0;Tr=void 0;for(var Vr=new V({comments:sr,delimiter:hi,newline:En,preview:10}).parse(gn),jr=0;jr<Vr.data.length;jr++)if(or&&jt(Vr.data[jr]))ur++;else{var Ya=Vr.data[jr].length;Tn+=Ya,Tr!==void 0?0<Ya&&($t+=Math.abs(Ya-Tr),Tr=Ya):Tr=Ya}0<Vr.data.length&&(Tn/=Vr.data.length-ur),(Er===void 0||$t<=Er)&&(pi===void 0||pi<Tn)&&1.99<Tn&&(Er=$t,Pr=hi,pi=Tn)}return{successful:!!(X.delimiter=Pr),bestDelimiter:Pr}})(xe,X.newline,X.skipEmptyLines,X.comments,X.delimitersToGuess);Ct.successful?X.delimiter=Ct.bestDelimiter:(ge=!0,X.delimiter=p.DefaultDelimiter),it.meta.delimiter=X.delimiter}var Yt=Q(X);return X.preview&&X.header&&Yt.preview++,ae=xe,le=new V(Yt),it=le.parse(ae,Ye,ct),sn(),yt?{meta:{paused:!0}}:it||{meta:{paused:!1}}},this.paused=function(){return yt},this.pause=function(){yt=!0,le.abort(),ae=te(X.chunk)?"":ae.substring(le.getCharIndex())},this.resume=function(){Ee.streamer._halted?(yt=!1,Ee.streamer.parseChunk(ae,!0)):setTimeout(Ee.resume,3)},this.aborted=function(){return je},this.abort=function(){je=!0,le.abort(),it.meta.aborted=!0,te(X.complete)&&X.complete(it),ae=""}}function k(X){return X.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function V(X){var ae,le=(X=X||{}).delimiter,ge=X.newline,ye=X.comments,De=X.step,He=X.preview,Be=X.fastMode,Ee=ae=X.quoteChar===void 0||X.quoteChar===null?'"':X.quoteChar;if(X.escapeChar!==void 0&&(Ee=X.escapeChar),(typeof le!="string"||-1<p.BAD_DELIMITERS.indexOf(le))&&(le=","),ye===le)throw new Error("Comment character same as delimiter");ye===!0?ye="#":(typeof ye!="string"||-1<p.BAD_DELIMITERS.indexOf(ye))&&(ye=!1),ge!==`
`&&ge!=="\r"&&ge!==`\r
`&&(ge=`
`);var Ne=0,at=!1;this.parse=function(yt,je,Ke){if(typeof yt!="string")throw new Error("Input must be a string");var it=yt.length,Pe=le.length,jt=ge.length,sn=ye.length,dn=te(De),Sn=[],Ut=[],xe=[],Ye=Ne=0;if(!yt)return pi();if(Be||Be!==!1&&yt.indexOf(ae)===-1){for(var ct=yt.split(ge),mt=0;mt<ct.length;mt++){if(xe=ct[mt],Ne+=xe.length,mt!==ct.length-1)Ne+=ge.length;else if(Ke)return pi();if(!ye||xe.substring(0,sn)!==ye){if(dn){if(Sn=[],Nr(xe.split(le)),Br(),at)return pi()}else Nr(xe.split(le));if(He&&He<=mt)return Sn=Sn.slice(0,He),pi(!0)}}return pi()}for(var Ct=yt.indexOf(le,Ne),Yt=yt.indexOf(ge,Ne),gn=new RegExp(k(Ee)+k(ae),"g"),En=yt.indexOf(ae,Ne);;)if(yt[Ne]!==ae)if(ye&&xe.length===0&&yt.substring(Ne,Ne+sn)===ye){if(Yt===-1)return pi();Ne=Yt+jt,Yt=yt.indexOf(ge,Ne),Ct=yt.indexOf(le,Ne)}else if(Ct!==-1&&(Ct<Yt||Yt===-1))xe.push(yt.substring(Ne,Ct)),Ne=Ct+Pe,Ct=yt.indexOf(le,Ne);else{if(Yt===-1)break;if(xe.push(yt.substring(Ne,Yt)),Tr(Yt+jt),dn&&(Br(),at))return pi();if(He&&Sn.length>=He)return pi(!0)}else for(En=Ne,Ne++;;){if((En=yt.indexOf(ae,En+1))===-1)return Ke||Ut.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Sn.length,index:Ne}),Er();if(En===it-1)return Er(yt.substring(Ne,En).replace(gn,ae));if(ae!==Ee||yt[En+1]!==Ee){if(ae===Ee||En===0||yt[En-1]!==Ee){Ct!==-1&&Ct<En+1&&(Ct=yt.indexOf(le,En+1)),Yt!==-1&&Yt<En+1&&(Yt=yt.indexOf(ge,En+1));var or=Pr(Yt===-1?Ct:Math.min(Ct,Yt));if(yt.substr(En+1+or,Pe)===le){xe.push(yt.substring(Ne,En).replace(gn,ae)),yt[Ne=En+1+or+Pe]!==ae&&(En=yt.indexOf(ae,Ne)),Ct=yt.indexOf(le,Ne),Yt=yt.indexOf(ge,Ne);break}var sr=Pr(Yt);if(yt.substring(En+1+sr,En+1+sr+jt)===ge){if(xe.push(yt.substring(Ne,En).replace(gn,ae)),Tr(En+1+sr+jt),Ct=yt.indexOf(le,Ne),En=yt.indexOf(ae,Ne),dn&&(Br(),at))return pi();if(He&&Sn.length>=He)return pi(!0);break}Ut.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Sn.length,index:Ne}),En++}}else En++}return Er();function Nr(hi){Sn.push(hi),Ye=Ne}function Pr(hi){var $t=0;if(hi!==-1){var Tn=yt.substring(En+1,hi);Tn&&Tn.trim()===""&&($t=Tn.length)}return $t}function Er(hi){return Ke||(hi===void 0&&(hi=yt.substring(Ne)),xe.push(hi),Ne=it,Nr(xe),dn&&Br()),pi()}function Tr(hi){Ne=hi,Nr(xe),xe=[],Yt=yt.indexOf(ge,Ne)}function pi(hi){return{data:Sn,errors:Ut,meta:{delimiter:le,linebreak:ge,aborted:at,truncated:!!hi,cursor:Ye+(je||0)}}}function Br(){De(pi()),Sn=[],Ut=[]}},this.abort=function(){at=!0},this.getCharIndex=function(){return Ne}}function K(X){var ae=X.data,le=f[ae.workerId],ge=!1;if(ae.error)le.userError(ae.error,ae.file);else if(ae.results&&ae.results.data){var ye={abort:function(){ge=!0,J(ae.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ie,resume:ie};if(te(le.userStep)){for(var De=0;De<ae.results.data.length&&(le.userStep({data:ae.results.data[De],errors:ae.results.errors,meta:ae.results.meta},ye),!ge);De++);delete ae.results}else te(le.userChunk)&&(le.userChunk(ae.results,ye,ae.file),delete ae.results)}ae.finished&&!ge&&J(ae.workerId,ae.results)}function J(X,ae){var le=f[X];te(le.userComplete)&&le.userComplete(ae),le.terminate(),delete f[X]}function ie(){throw new Error("Not implemented.")}function Q(X){if(typeof X!="object"||X===null)return X;var ae=Array.isArray(X)?[]:{};for(var le in X)ae[le]=Q(X[le]);return ae}function W(X,ae){return function(){X.apply(ae,arguments)}}function te(X){return typeof X=="function"}return s&&(r.onmessage=function(X){var ae=X.data;if(p.WORKER_ID===void 0&&ae&&(p.WORKER_ID=ae.workerId),typeof ae.input=="string")r.postMessage({workerId:p.WORKER_ID,results:p.parse(ae.input,ae.config),finished:!0});else if(r.File&&ae.input instanceof File||ae.input instanceof Object){var le=p.parse(ae.input,ae.config);le&&r.postMessage({workerId:p.WORKER_ID,results:le,finished:!0})}}),(E.prototype=Object.create(S.prototype)).constructor=E,(I.prototype=Object.create(S.prototype)).constructor=I,(z.prototype=Object.create(z.prototype)).constructor=z,(F.prototype=Object.create(S.prototype)).constructor=F,p})})(OD)),OD.exports}var GXe=HXe(),CD={exports:{}},YXe=CD.exports,LQ;function WXe(){return LQ||(LQ=1,(function(e,t){(function(n,r){r()})(YXe,function(){function n(_,S){return typeof S>"u"?S={autoBom:!1}:typeof S!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),S={autoBom:!S}),S.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_}function r(_,S,E){var I=new XMLHttpRequest;I.open("GET",_),I.responseType="blob",I.onload=function(){p(I.response,S,E)},I.onerror=function(){console.error("could not download file")},I.send()}function i(_){var S=new XMLHttpRequest;S.open("HEAD",_,!1);try{S.send()}catch{}return 200<=S.status&&299>=S.status}function s(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var S=document.createEvent("MouseEvents");S.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(S)}}var f=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Au=="object"&&Au.global===Au?Au:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=f.saveAs||(typeof window!="object"||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(_,S,E){var I=f.URL||f.webkitURL,z=document.createElement("a");S=S||_.name||"download",z.download=S,z.rel="noopener",typeof _=="string"?(z.href=_,z.origin===location.origin?s(z):i(z.href)?r(_,S,E):s(z,z.target="_blank")):(z.href=I.createObjectURL(_),setTimeout(function(){I.revokeObjectURL(z.href)},4e4),setTimeout(function(){s(z)},0))}:"msSaveOrOpenBlob"in navigator?function(_,S,E){if(S=S||_.name||"download",typeof _!="string")navigator.msSaveOrOpenBlob(n(_,E),S);else if(i(_))r(_,S,E);else{var I=document.createElement("a");I.href=_,I.target="_blank",setTimeout(function(){s(I)})}}:function(_,S,E,I){if(I=I||open("","_blank"),I&&(I.document.title=I.document.body.innerText="downloading..."),typeof _=="string")return r(_,S,E);var z=_.type==="application/octet-stream",F=/constructor/i.test(f.HTMLElement)||f.safari,U=/CriOS\/[\d]+/.test(navigator.userAgent);if((U||z&&F||a)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var J=k.result;J=U?J:J.replace(/^data:[^;]*;/,"data:attachment/file;"),I?I.location.href=J:location=J,I=null},k.readAsDataURL(_)}else{var V=f.URL||f.webkitURL,K=V.createObjectURL(_);I?I.location=K:location.href=K,I=null,setTimeout(function(){V.revokeObjectURL(K)},4e4)}});f.saveAs=p.saveAs=p,e.exports=p})})(CD)),CD.exports}var XXe=WXe(),AF,zQ;function sf(){if(zQ)return AF;zQ=1;var e=Array.isArray;return AF=e,AF}var OF,FQ;function xpe(){if(FQ)return OF;FQ=1;var e=typeof Au=="object"&&Au&&Au.Object===Object&&Au;return OF=e,OF}var CF,NQ;function yg(){if(NQ)return CF;NQ=1;var e=xpe(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return CF=n,CF}var MF,BQ;function DO(){if(BQ)return MF;BQ=1;var e=yg(),t=e.Symbol;return MF=t,MF}var DF,jQ;function ZXe(){if(jQ)return DF;jQ=1;var e=DO(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(f){var a=n.call(f,i),p=f[i];try{f[i]=void 0;var _=!0}catch{}var S=r.call(f);return _&&(a?f[i]=p:delete f[i]),S}return DF=s,DF}var IF,UQ;function KXe(){if(UQ)return IF;UQ=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return IF=n,IF}var PF,$Q;function y_(){if($Q)return PF;$Q=1;var e=DO(),t=ZXe(),n=KXe(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function f(a){return a==null?a===void 0?i:r:s&&s in Object(a)?t(a):n(a)}return PF=f,PF}var RF,VQ;function __(){if(VQ)return RF;VQ=1;function e(t){return t!=null&&typeof t=="object"}return RF=e,RF}var kF,qQ;function uT(){if(qQ)return kF;qQ=1;var e=y_(),t=__(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return kF=r,kF}var LF,HQ;function eq(){if(HQ)return LF;HQ=1;var e=sf(),t=uT(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,f){if(e(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||f!=null&&s in Object(f)}return LF=i,LF}var zF,GQ;function c0(){if(GQ)return zF;GQ=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return zF=e,zF}var FF,YQ;function tq(){if(YQ)return FF;YQ=1;var e=y_(),t=c0(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function f(a){if(!t(a))return!1;var p=e(a);return p==r||p==i||p==n||p==s}return FF=f,FF}var NF,WQ;function QXe(){if(WQ)return NF;WQ=1;var e=yg(),t=e["__core-js_shared__"];return NF=t,NF}var BF,XQ;function JXe(){if(XQ)return BF;XQ=1;var e=QXe(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return BF=n,BF}var jF,ZQ;function wpe(){if(ZQ)return jF;ZQ=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return jF=n,jF}var UF,KQ;function eZe(){if(KQ)return UF;KQ=1;var e=tq(),t=JXe(),n=c0(),r=wpe(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,f=Function.prototype,a=Object.prototype,p=f.toString,_=a.hasOwnProperty,S=RegExp("^"+p.call(_).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E(I){if(!n(I)||t(I))return!1;var z=e(I)?S:s;return z.test(r(I))}return UF=E,UF}var $F,QQ;function tZe(){if(QQ)return $F;QQ=1;function e(t,n){return t==null?void 0:t[n]}return $F=e,$F}var VF,JQ;function qx(){if(JQ)return VF;JQ=1;var e=eZe(),t=tZe();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return VF=n,VF}var qF,eJ;function tk(){if(eJ)return qF;eJ=1;var e=qx(),t=e(Object,"create");return qF=t,qF}var HF,tJ;function nZe(){if(tJ)return HF;tJ=1;var e=tk();function t(){this.__data__=e?e(null):{},this.size=0}return HF=t,HF}var GF,nJ;function rZe(){if(nJ)return GF;nJ=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return GF=e,GF}var YF,rJ;function iZe(){if(rJ)return YF;rJ=1;var e=tk(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var f=this.__data__;if(e){var a=f[s];return a===t?void 0:a}return r.call(f,s)?f[s]:void 0}return YF=i,YF}var WF,iJ;function aZe(){if(iJ)return WF;iJ=1;var e=tk(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return WF=r,WF}var XF,aJ;function oZe(){if(aJ)return XF;aJ=1;var e=tk(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return XF=n,XF}var ZF,oJ;function sZe(){if(oJ)return ZF;oJ=1;var e=nZe(),t=rZe(),n=iZe(),r=aZe(),i=oZe();function s(f){var a=-1,p=f==null?0:f.length;for(this.clear();++a<p;){var _=f[a];this.set(_[0],_[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,ZF=s,ZF}var KF,sJ;function lZe(){if(sJ)return KF;sJ=1;function e(){this.__data__=[],this.size=0}return KF=e,KF}var QF,lJ;function nq(){if(lJ)return QF;lJ=1;function e(t,n){return t===n||t!==t&&n!==n}return QF=e,QF}var JF,uJ;function nk(){if(uJ)return JF;uJ=1;var e=nq();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return JF=t,JF}var eN,cJ;function uZe(){if(cJ)return eN;cJ=1;var e=nk(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,f=e(s,i);if(f<0)return!1;var a=s.length-1;return f==a?s.pop():n.call(s,f,1),--this.size,!0}return eN=r,eN}var tN,fJ;function cZe(){if(fJ)return tN;fJ=1;var e=nk();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return tN=t,tN}var nN,hJ;function fZe(){if(hJ)return nN;hJ=1;var e=nk();function t(n){return e(this.__data__,n)>-1}return nN=t,nN}var rN,dJ;function hZe(){if(dJ)return rN;dJ=1;var e=nk();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return rN=t,rN}var iN,pJ;function rk(){if(pJ)return iN;pJ=1;var e=lZe(),t=uZe(),n=cZe(),r=fZe(),i=hZe();function s(f){var a=-1,p=f==null?0:f.length;for(this.clear();++a<p;){var _=f[a];this.set(_[0],_[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,iN=s,iN}var aN,mJ;function rq(){if(mJ)return aN;mJ=1;var e=qx(),t=yg(),n=e(t,"Map");return aN=n,aN}var oN,gJ;function dZe(){if(gJ)return oN;gJ=1;var e=sZe(),t=rk(),n=rq();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return oN=r,oN}var sN,yJ;function pZe(){if(yJ)return sN;yJ=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return sN=e,sN}var lN,_J;function ik(){if(_J)return lN;_J=1;var e=pZe();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return lN=t,lN}var uN,vJ;function mZe(){if(vJ)return uN;vJ=1;var e=ik();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return uN=t,uN}var cN,bJ;function gZe(){if(bJ)return cN;bJ=1;var e=ik();function t(n){return e(this,n).get(n)}return cN=t,cN}var fN,xJ;function yZe(){if(xJ)return fN;xJ=1;var e=ik();function t(n){return e(this,n).has(n)}return fN=t,fN}var hN,wJ;function _Ze(){if(wJ)return hN;wJ=1;var e=ik();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return hN=t,hN}var dN,SJ;function iq(){if(SJ)return dN;SJ=1;var e=dZe(),t=mZe(),n=gZe(),r=yZe(),i=_Ze();function s(f){var a=-1,p=f==null?0:f.length;for(this.clear();++a<p;){var _=f[a];this.set(_[0],_[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,dN=s,dN}var pN,TJ;function Spe(){if(TJ)return pN;TJ=1;var e=iq(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var f=arguments,a=i?i.apply(this,f):f[0],p=s.cache;if(p.has(a))return p.get(a);var _=r.apply(this,f);return s.cache=p.set(a,_)||p,_};return s.cache=new(n.Cache||e),s}return n.Cache=e,pN=n,pN}var mN,EJ;function vZe(){if(EJ)return mN;EJ=1;var e=Spe(),t=500;function n(r){var i=e(r,function(f){return s.size===t&&s.clear(),f}),s=i.cache;return i}return mN=n,mN}var gN,AJ;function bZe(){if(AJ)return gN;AJ=1;var e=vZe(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(f,a,p,_){s.push(p?_.replace(n,"$1"):a||f)}),s});return gN=r,gN}var yN,OJ;function aq(){if(OJ)return yN;OJ=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return yN=e,yN}var _N,CJ;function xZe(){if(CJ)return _N;CJ=1;var e=DO(),t=aq(),n=sf(),r=uT(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function f(a){if(typeof a=="string")return a;if(n(a))return t(a,f)+"";if(r(a))return s?s.call(a):"";var p=a+"";return p=="0"&&1/a==-1/0?"-0":p}return _N=f,_N}var vN,MJ;function Tpe(){if(MJ)return vN;MJ=1;var e=xZe();function t(n){return n==null?"":e(n)}return vN=t,vN}var bN,DJ;function Epe(){if(DJ)return bN;DJ=1;var e=sf(),t=eq(),n=bZe(),r=Tpe();function i(s,f){return e(s)?s:t(s,f)?[s]:n(r(s))}return bN=i,bN}var xN,IJ;function ak(){if(IJ)return xN;IJ=1;var e=uT();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return xN=t,xN}var wN,PJ;function oq(){if(PJ)return wN;PJ=1;var e=Epe(),t=ak();function n(r,i){i=e(i,r);for(var s=0,f=i.length;r!=null&&s<f;)r=r[t(i[s++])];return s&&s==f?r:void 0}return wN=n,wN}var SN,RJ;function Ape(){if(RJ)return SN;RJ=1;var e=oq();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return SN=t,SN}var wZe=Ape();const ed=ga(wZe);var TN,kJ;function SZe(){if(kJ)return TN;kJ=1;function e(t){return t==null}return TN=e,TN}var TZe=SZe();const Gi=ga(TZe);var EN,LJ;function EZe(){if(LJ)return EN;LJ=1;var e=y_(),t=sf(),n=__(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return EN=i,EN}var AZe=EZe();const Ex=ga(AZe);var OZe=tq();const Li=ga(OZe);var CZe=c0();const cT=ga(CZe);var AN={exports:{}},Va={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zJ;function MZe(){if(zJ)return Va;zJ=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),f=Symbol.for("react.context"),a=Symbol.for("react.server_context"),p=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),F;F=Symbol.for("react.module.reference");function U(k){if(typeof k=="object"&&k!==null){var V=k.$$typeof;switch(V){case e:switch(k=k.type,k){case n:case i:case r:case _:case S:return k;default:switch(k=k&&k.$$typeof,k){case a:case f:case p:case I:case E:case s:return k;default:return V}}case t:return V}}}return Va.ContextConsumer=f,Va.ContextProvider=s,Va.Element=e,Va.ForwardRef=p,Va.Fragment=n,Va.Lazy=I,Va.Memo=E,Va.Portal=t,Va.Profiler=i,Va.StrictMode=r,Va.Suspense=_,Va.SuspenseList=S,Va.isAsyncMode=function(){return!1},Va.isConcurrentMode=function(){return!1},Va.isContextConsumer=function(k){return U(k)===f},Va.isContextProvider=function(k){return U(k)===s},Va.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},Va.isForwardRef=function(k){return U(k)===p},Va.isFragment=function(k){return U(k)===n},Va.isLazy=function(k){return U(k)===I},Va.isMemo=function(k){return U(k)===E},Va.isPortal=function(k){return U(k)===t},Va.isProfiler=function(k){return U(k)===i},Va.isStrictMode=function(k){return U(k)===r},Va.isSuspense=function(k){return U(k)===_},Va.isSuspenseList=function(k){return U(k)===S},Va.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===n||k===i||k===r||k===_||k===S||k===z||typeof k=="object"&&k!==null&&(k.$$typeof===I||k.$$typeof===E||k.$$typeof===s||k.$$typeof===f||k.$$typeof===p||k.$$typeof===F||k.getModuleId!==void 0)},Va.typeOf=U,Va}var FJ;function DZe(){return FJ||(FJ=1,AN.exports=MZe()),AN.exports}var IZe=DZe(),ON,NJ;function Ope(){if(NJ)return ON;NJ=1;var e=y_(),t=__(),n="[object Number]";function r(i){return typeof i=="number"||t(i)&&e(i)==n}return ON=r,ON}var CN,BJ;function PZe(){if(BJ)return CN;BJ=1;var e=Ope();function t(n){return e(n)&&n!=+n}return CN=t,CN}var RZe=PZe();const IO=ga(RZe);var kZe=Ope();const LZe=ga(kZe);var yp=function(t){return t===0?0:t>0?1:-1},Yb=function(t){return Ex(t)&&t.indexOf("%")===t.length-1},Xn=function(t){return LZe(t)&&!IO(t)},zZe=function(t){return Gi(t)},vl=function(t){return Xn(t)||Ex(t)},FZe=0,PO=function(t){var n=++FZe;return"".concat(t||"").concat(n)},Ax=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Xn(t)&&!Ex(t))return r;var s;if(Yb(t)){var f=t.indexOf("%");s=n*parseFloat(t.slice(0,f))/100}else s=+t;return IO(s)&&(s=r),i&&s>n&&(s=n),s},zv=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},NZe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},i=0;i<n;i++)if(!r[t[i]])r[t[i]]=!0;else return!0;return!1},fp=function(t,n){return Xn(t)&&Xn(n)?function(r){return t+r*(n-t)}:function(){return n}};function PI(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):ed(r,t))===n})}var BZe=function(t,n){return Xn(t)&&Xn(n)?t-n:Ex(t)&&Ex(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function Lw(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function v6(e){"@babel/helpers - typeof";return v6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v6(e)}var jZe=["viewBox","children"],UZe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],jJ=["points","pathLength"],MN={svg:jZe,polygon:jJ,polyline:jJ},sq=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],RI=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(be.isValidElement(t)&&(r=t.props),!cT(r))return null;var i={};return Object.keys(r).forEach(function(s){sq.includes(s)&&(i[s]=n||function(f){return r[s](r,f)})}),i},$Ze=function(t,n,r){return function(i){return t(n,r,i),null}},kI=function(t,n,r){if(!cT(t)||v6(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(s){var f=t[s];sq.includes(s)&&typeof f=="function"&&(i||(i={}),i[s]=$Ze(f,n,r))}),i},VZe=["children"],qZe=["children"];function UJ(e,t){if(e==null)return{};var n=HZe(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function HZe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function b6(e){"@babel/helpers - typeof";return b6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b6(e)}var $J={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Gy=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},VJ=null,DN=null,lq=function e(t){if(t===VJ&&Array.isArray(DN))return DN;var n=[];return be.Children.forEach(t,function(r){Gi(r)||(IZe.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),DN=n,VJ=t,n};function td(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(i){return Gy(i)}):r=[Gy(t)],lq(e).forEach(function(i){var s=ed(i,"type.displayName")||ed(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function Hf(e,t){var n=td(e,t);return n&&n[0]}var qJ=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,i=n.height;return!(!Xn(r)||r<=0||!Xn(i)||i<=0)},GZe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],YZe=function(t){return t&&t.type&&Ex(t.type)&&GZe.indexOf(t.type)>=0},WZe=function(t){return t&&b6(t)==="object"&&"clipDot"in t},XZe=function(t,n,r,i){var s,f=(s=MN==null?void 0:MN[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Li(t)&&(i&&f.includes(n)||UZe.includes(n))||r&&sq.includes(n)},oa=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(be.isValidElement(t)&&(i=t.props),!cT(i))return null;var s={};return Object.keys(i).forEach(function(f){var a;XZe((a=i)===null||a===void 0?void 0:a[f],f,n,r)&&(s[f]=i[f])}),s},x6=function e(t,n){if(t===n)return!0;var r=be.Children.count(t);if(r!==be.Children.count(n))return!1;if(r===0)return!0;if(r===1)return HJ(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=t[i],f=n[i];if(Array.isArray(s)||Array.isArray(f)){if(!e(s,f))return!1}else if(!HJ(s,f))return!1}return!0},HJ=function(t,n){if(Gi(t)&&Gi(n))return!0;if(!Gi(t)&&!Gi(n)){var r=t.props||{},i=r.children,s=UJ(r,VZe),f=n.props||{},a=f.children,p=UJ(f,qZe);return i&&a?Lw(s,p)&&x6(i,a):!i&&!a?Lw(s,p):!1}return!1},GJ=function(t,n){var r=[],i={};return lq(t).forEach(function(s,f){if(YZe(s))r.push(s);else if(s){var a=Gy(s.type),p=n[a]||{},_=p.handler,S=p.once;if(_&&(!S||!i[a])){var E=_(s,a,f);r.push(E),i[a]=!0}}}),r},ZZe=function(t){var n=t&&t.type;return n&&$J[n]?$J[n]:null},KZe=function(t,n){return lq(n).indexOf(t)},QZe=["children","width","height","viewBox","className","style","title","desc"];function w6(){return w6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w6.apply(this,arguments)}function JZe(e,t){if(e==null)return{};var n=eKe(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function eKe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function S6(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,s=e.className,f=e.style,a=e.title,p=e.desc,_=JZe(e,QZe),S=i||{width:n,height:r,x:0,y:0},E=ri("recharts-surface",s);return Je.createElement("svg",w6({},oa(_,!0,"svg"),{className:E,width:n,height:r,style:f,viewBox:"".concat(S.x," ").concat(S.y," ").concat(S.width," ").concat(S.height)}),Je.createElement("title",null,a),Je.createElement("desc",null,p),t)}var tKe=["children","className"];function T6(){return T6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T6.apply(this,arguments)}function nKe(e,t){if(e==null)return{};var n=rKe(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rKe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Rs=Je.forwardRef(function(e,t){var n=e.children,r=e.className,i=nKe(e,tKe),s=ri("recharts-layer",r);return Je.createElement("g",T6({className:s},oa(i,!0),{ref:t}),n)}),Yy=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]},IN,YJ;function iKe(){if(YJ)return IN;YJ=1;function e(t,n,r){var i=-1,s=t.length;n<0&&(n=-n>s?0:s+n),r=r>s?s:r,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var f=Array(s);++i<s;)f[i]=t[i+n];return f}return IN=e,IN}var PN,WJ;function aKe(){if(WJ)return PN;WJ=1;var e=iKe();function t(n,r,i){var s=n.length;return i=i===void 0?s:i,!r&&i>=s?n:e(n,r,i)}return PN=t,PN}var RN,XJ;function Cpe(){if(XJ)return RN;XJ=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",f="\\u200d",a=RegExp("["+f+e+i+s+"]");function p(_){return a.test(_)}return RN=p,RN}var kN,ZJ;function oKe(){if(ZJ)return kN;ZJ=1;function e(t){return t.split("")}return kN=e,kN}var LN,KJ;function sKe(){if(KJ)return LN;KJ=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",f="["+e+"]",a="["+i+"]",p="\\ud83c[\\udffb-\\udfff]",_="(?:"+a+"|"+p+")",S="[^"+e+"]",E="(?:\\ud83c[\\udde6-\\uddff]){2}",I="[\\ud800-\\udbff][\\udc00-\\udfff]",z="\\u200d",F=_+"?",U="["+s+"]?",k="(?:"+z+"(?:"+[S,E,I].join("|")+")"+U+F+")*",V=U+F+k,K="(?:"+[S+a+"?",a,E,I,f].join("|")+")",J=RegExp(p+"(?="+p+")|"+K+V,"g");function ie(Q){return Q.match(J)||[]}return LN=ie,LN}var zN,QJ;function lKe(){if(QJ)return zN;QJ=1;var e=oKe(),t=Cpe(),n=sKe();function r(i){return t(i)?n(i):e(i)}return zN=r,zN}var FN,JJ;function uKe(){if(JJ)return FN;JJ=1;var e=aKe(),t=Cpe(),n=lKe(),r=Tpe();function i(s){return function(f){f=r(f);var a=t(f)?n(f):void 0,p=a?a[0]:f.charAt(0),_=a?e(a,1).join(""):f.slice(1);return p[s]()+_}}return FN=i,FN}var NN,eee;function cKe(){if(eee)return NN;eee=1;var e=uKe(),t=e("toUpperCase");return NN=t,NN}var fKe=cKe();const ok=ga(fKe);function go(e){return function(){return e}}const Mpe=Math.cos,LI=Math.sin,Dp=Math.sqrt,zI=Math.PI,sk=2*zI,E6=Math.PI,A6=2*E6,Fb=1e-6,hKe=A6-Fb;function Dpe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function dKe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Dpe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class pKe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Dpe:dKe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,f){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+f}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let f=this._x1,a=this._y1,p=r-t,_=i-n,S=f-t,E=a-n,I=S*S+E*E;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(I>Fb)if(!(Math.abs(E*p-_*S)>Fb)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let z=r-f,F=i-a,U=p*p+_*_,k=z*z+F*F,V=Math.sqrt(U),K=Math.sqrt(I),J=s*Math.tan((E6-Math.acos((U+I-k)/(2*V*K)))/2),ie=J/K,Q=J/V;Math.abs(ie-1)>Fb&&this._append`L${t+ie*S},${n+ie*E}`,this._append`A${s},${s},0,0,${+(E*z>S*F)},${this._x1=t+Q*p},${this._y1=n+Q*_}`}}arc(t,n,r,i,s,f){if(t=+t,n=+n,r=+r,f=!!f,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),p=r*Math.sin(i),_=t+a,S=n+p,E=1^f,I=f?i-s:s-i;this._x1===null?this._append`M${_},${S}`:(Math.abs(this._x1-_)>Fb||Math.abs(this._y1-S)>Fb)&&this._append`L${_},${S}`,r&&(I<0&&(I=I%A6+A6),I>hKe?this._append`A${r},${r},0,1,${E},${t-a},${n-p}A${r},${r},0,1,${E},${this._x1=_},${this._y1=S}`:I>Fb&&this._append`A${r},${r},0,${+(I>=E6)},${E},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function uq(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new pKe(t)}function cq(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ipe(e){this._context=e}Ipe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function lk(e){return new Ipe(e)}function Ppe(e){return e[0]}function Rpe(e){return e[1]}function kpe(e,t){var n=go(!0),r=null,i=lk,s=null,f=uq(a);e=typeof e=="function"?e:e===void 0?Ppe:go(e),t=typeof t=="function"?t:t===void 0?Rpe:go(t);function a(p){var _,S=(p=cq(p)).length,E,I=!1,z;for(r==null&&(s=i(z=f())),_=0;_<=S;++_)!(_<S&&n(E=p[_],_,p))===I&&((I=!I)?s.lineStart():s.lineEnd()),I&&s.point(+e(E,_,p),+t(E,_,p));if(z)return s=null,z+""||null}return a.x=function(p){return arguments.length?(e=typeof p=="function"?p:go(+p),a):e},a.y=function(p){return arguments.length?(t=typeof p=="function"?p:go(+p),a):t},a.defined=function(p){return arguments.length?(n=typeof p=="function"?p:go(!!p),a):n},a.curve=function(p){return arguments.length?(i=p,r!=null&&(s=i(r)),a):i},a.context=function(p){return arguments.length?(p==null?r=s=null:s=i(r=p),a):r},a}function BM(e,t,n){var r=null,i=go(!0),s=null,f=lk,a=null,p=uq(_);e=typeof e=="function"?e:e===void 0?Ppe:go(+e),t=typeof t=="function"?t:go(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Rpe:go(+n);function _(E){var I,z,F,U=(E=cq(E)).length,k,V=!1,K,J=new Array(U),ie=new Array(U);for(s==null&&(a=f(K=p())),I=0;I<=U;++I){if(!(I<U&&i(k=E[I],I,E))===V)if(V=!V)z=I,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),F=I-1;F>=z;--F)a.point(J[F],ie[F]);a.lineEnd(),a.areaEnd()}V&&(J[I]=+e(k,I,E),ie[I]=+t(k,I,E),a.point(r?+r(k,I,E):J[I],n?+n(k,I,E):ie[I]))}if(K)return a=null,K+""||null}function S(){return kpe().defined(i).curve(f).context(s)}return _.x=function(E){return arguments.length?(e=typeof E=="function"?E:go(+E),r=null,_):e},_.x0=function(E){return arguments.length?(e=typeof E=="function"?E:go(+E),_):e},_.x1=function(E){return arguments.length?(r=E==null?null:typeof E=="function"?E:go(+E),_):r},_.y=function(E){return arguments.length?(t=typeof E=="function"?E:go(+E),n=null,_):t},_.y0=function(E){return arguments.length?(t=typeof E=="function"?E:go(+E),_):t},_.y1=function(E){return arguments.length?(n=E==null?null:typeof E=="function"?E:go(+E),_):n},_.lineX0=_.lineY0=function(){return S().x(e).y(t)},_.lineY1=function(){return S().x(e).y(n)},_.lineX1=function(){return S().x(r).y(t)},_.defined=function(E){return arguments.length?(i=typeof E=="function"?E:go(!!E),_):i},_.curve=function(E){return arguments.length?(f=E,s!=null&&(a=f(s)),_):f},_.context=function(E){return arguments.length?(E==null?s=a=null:a=f(s=E),_):s},_}class Lpe{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function mKe(e){return new Lpe(e,!0)}function gKe(e){return new Lpe(e,!1)}const fq={draw(e,t){const n=Dp(t/zI);e.moveTo(n,0),e.arc(0,0,n,0,sk)}},yKe={draw(e,t){const n=Dp(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},zpe=Dp(1/3),_Ke=zpe*2,vKe={draw(e,t){const n=Dp(t/_Ke),r=n*zpe;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},bKe={draw(e,t){const n=Dp(t),r=-n/2;e.rect(r,r,n,n)}},xKe=.8908130915292852,Fpe=LI(zI/10)/LI(7*zI/10),wKe=LI(sk/10)*Fpe,SKe=-Mpe(sk/10)*Fpe,TKe={draw(e,t){const n=Dp(t*xKe),r=wKe*n,i=SKe*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const f=sk*s/5,a=Mpe(f),p=LI(f);e.lineTo(p*n,-a*n),e.lineTo(a*r-p*i,p*r+a*i)}e.closePath()}},BN=Dp(3),EKe={draw(e,t){const n=-Dp(t/(BN*3));e.moveTo(0,n*2),e.lineTo(-BN*n,-n),e.lineTo(BN*n,-n),e.closePath()}},jh=-.5,Uh=Dp(3)/2,O6=1/Dp(12),AKe=(O6/2+1)*3,OKe={draw(e,t){const n=Dp(t/AKe),r=n/2,i=n*O6,s=r,f=n*O6+n,a=-s,p=f;e.moveTo(r,i),e.lineTo(s,f),e.lineTo(a,p),e.lineTo(jh*r-Uh*i,Uh*r+jh*i),e.lineTo(jh*s-Uh*f,Uh*s+jh*f),e.lineTo(jh*a-Uh*p,Uh*a+jh*p),e.lineTo(jh*r+Uh*i,jh*i-Uh*r),e.lineTo(jh*s+Uh*f,jh*f-Uh*s),e.lineTo(jh*a+Uh*p,jh*p-Uh*a),e.closePath()}};function CKe(e,t){let n=null,r=uq(i);e=typeof e=="function"?e:go(e||fq),t=typeof t=="function"?t:go(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:go(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:go(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function FI(){}function NI(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Npe(e){this._context=e}Npe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:NI(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:NI(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function MKe(e){return new Npe(e)}function Bpe(e){this._context=e}Bpe.prototype={areaStart:FI,areaEnd:FI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:NI(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DKe(e){return new Bpe(e)}function jpe(e){this._context=e}jpe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:NI(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function IKe(e){return new jpe(e)}function Upe(e){this._context=e}Upe.prototype={areaStart:FI,areaEnd:FI,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function PKe(e){return new Upe(e)}function tee(e){return e<0?-1:1}function nee(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),f=(n-e._y1)/(i||r<0&&-0),a=(s*i+f*r)/(r+i);return(tee(s)+tee(f))*Math.min(Math.abs(s),Math.abs(f),.5*Math.abs(a))||0}function ree(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function jN(e,t,n){var r=e._x0,i=e._y0,s=e._x1,f=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,f-a*n,s,f)}function BI(e){this._context=e}BI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jN(this,this._t0,ree(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,jN(this,ree(this,n=nee(this,e,t)),n);break;default:jN(this,this._t0,n=nee(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function $pe(e){this._context=new Vpe(e)}($pe.prototype=Object.create(BI.prototype)).point=function(e,t){BI.prototype.point.call(this,t,e)};function Vpe(e){this._context=e}Vpe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function RKe(e){return new BI(e)}function kKe(e){return new $pe(e)}function qpe(e){this._context=e}qpe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=iee(e),i=iee(t),s=0,f=1;f<n;++s,++f)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[f],t[f]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function iee(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),f=new Array(n);for(i[0]=0,s[0]=2,f[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,f[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,f[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,f[t]-=r*f[t-1];for(i[n-1]=f[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(f[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function LKe(e){return new qpe(e)}function uk(e,t){this._context=e,this._t=t}uk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function zKe(e){return new uk(e,.5)}function FKe(e){return new uk(e,0)}function NKe(e){return new uk(e,1)}function mS(e,t){if((f=e.length)>1)for(var n=1,r,i,s=e[t[0]],f,a=s.length;n<f;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function C6(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function BKe(e,t){return e[t]}function jKe(e){const t=[];return t.key=e,t}function UKe(){var e=go([]),t=C6,n=mS,r=BKe;function i(s){var f=Array.from(e.apply(this,arguments),jKe),a,p=f.length,_=-1,S;for(const E of s)for(a=0,++_;a<p;++a)(f[a][_]=[0,+r(E,f[a].key,_,s)]).data=E;for(a=0,S=cq(t(f));a<p;++a)f[S[a]].index=a;return n(f,S),f}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:go(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:go(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?C6:typeof s=="function"?s:go(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??mS,i):n},i}function $Ke(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,f;i<s;++i){for(f=n=0;n<r;++n)f+=e[n][i][1]||0;if(f)for(n=0;n<r;++n)e[n][i][1]/=f}mS(e,t)}}function VKe(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var f=0,a=0;f<i;++f)a+=e[f][n][1]||0;r[n][1]+=r[n][0]=-a/2}mS(e,t)}}function qKe(e,t){if(!(!((f=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,f;r<s;++r){for(var a=0,p=0,_=0;a<f;++a){for(var S=e[t[a]],E=S[r][1]||0,I=S[r-1][1]||0,z=(E-I)/2,F=0;F<a;++F){var U=e[t[F]],k=U[r][1]||0,V=U[r-1][1]||0;z+=k-V}p+=E,_+=z*E}i[r-1][1]+=i[r-1][0]=n,p&&(n-=_/p)}i[r-1][1]+=i[r-1][0]=n,mS(e,t)}}function aA(e){"@babel/helpers - typeof";return aA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aA(e)}var HKe=["type","size","sizeType"];function M6(){return M6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M6.apply(this,arguments)}function aee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aee(Object(n),!0).forEach(function(r){GKe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aee(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GKe(e,t,n){return t=YKe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YKe(e){var t=WKe(e,"string");return aA(t)=="symbol"?t:t+""}function WKe(e,t){if(aA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(aA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XKe(e,t){if(e==null)return{};var n=ZKe(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ZKe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Hpe={symbolCircle:fq,symbolCross:yKe,symbolDiamond:vKe,symbolSquare:bKe,symbolStar:TKe,symbolTriangle:EKe,symbolWye:OKe},KKe=Math.PI/180,QKe=function(t){var n="symbol".concat(ok(t));return Hpe[n]||fq},JKe=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*KKe;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},eQe=function(t,n){Hpe["symbol".concat(ok(t))]=n},hq=function(t){var n=t.type,r=n===void 0?"circle":n,i=t.size,s=i===void 0?64:i,f=t.sizeType,a=f===void 0?"area":f,p=XKe(t,HKe),_=oee(oee({},p),{},{type:r,size:s,sizeType:a}),S=function(){var k=QKe(r),V=CKe().type(k).size(JKe(s,a,r));return V()},E=_.className,I=_.cx,z=_.cy,F=oa(_,!0);return I===+I&&z===+z&&s===+s?Je.createElement("path",M6({},F,{className:ri("recharts-symbols",E),transform:"translate(".concat(I,", ").concat(z,")"),d:S()})):null};hq.registerSymbol=eQe;function gS(e){"@babel/helpers - typeof";return gS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gS(e)}function D6(){return D6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D6.apply(this,arguments)}function see(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tQe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?see(Object(n),!0).forEach(function(r){oA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):see(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nQe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rQe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ype(r.key),r)}}function iQe(e,t,n){return t&&rQe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aQe(e,t,n){return t=jI(t),oQe(e,Gpe()?Reflect.construct(t,n||[],jI(e).constructor):t.apply(e,n))}function oQe(e,t){if(t&&(gS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sQe(e)}function sQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gpe=function(){return!!e})()}function jI(e){return jI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jI(e)}function lQe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I6(e,t)}function I6(e,t){return I6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},I6(e,t)}function oA(e,t,n){return t=Ype(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ype(e){var t=uQe(e,"string");return gS(t)=="symbol"?t:t+""}function uQe(e,t){if(gS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(gS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $h=32,dq=(function(e){function t(){return nQe(this,t),aQe(this,t,arguments)}return lQe(t,e),iQe(t,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=$h/2,f=$h/6,a=$h/3,p=r.inactive?i:r.color;if(r.type==="plainline")return Je.createElement("line",{strokeWidth:4,fill:"none",stroke:p,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:$h,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return Je.createElement("path",{strokeWidth:4,fill:"none",stroke:p,d:"M0,".concat(s,"h").concat(a,`
            A`).concat(f,",").concat(f,",0,1,1,").concat(2*a,",").concat(s,`
            H`).concat($h,"M").concat(2*a,",").concat(s,`
            A`).concat(f,",").concat(f,",0,1,1,").concat(a,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return Je.createElement("path",{stroke:"none",fill:p,d:"M0,".concat($h/8,"h").concat($h,"v").concat($h*3/4,"h").concat(-$h,"z"),className:"recharts-legend-icon"});if(Je.isValidElement(r.legendIcon)){var _=tQe({},r);return delete _.legendIcon,Je.cloneElement(r.legendIcon,_)}return Je.createElement(hq,{fill:p,cx:s,cy:s,size:$h,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,f=i.iconSize,a=i.layout,p=i.formatter,_=i.inactiveColor,S={x:0,y:0,width:$h,height:$h},E={display:a==="horizontal"?"inline-block":"block",marginRight:10},I={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(z,F){var U=z.formatter||p,k=ri(oA(oA({"recharts-legend-item":!0},"legend-item-".concat(F),!0),"inactive",z.inactive));if(z.type==="none")return null;var V=Li(z.value)?null:z.value;Yy(!Li(z.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var K=z.inactive?_:z.color;return Je.createElement("li",D6({className:k,style:E,key:"legend-item-".concat(F)},kI(r.props,z,F)),Je.createElement(S6,{width:f,height:f,viewBox:S,style:I},r.renderIcon(z)),Je.createElement("span",{className:"recharts-legend-item-text",style:{color:K}},U?U(V,z,F):V))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,f=r.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:s==="horizontal"?f:"left"};return Je.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])})(be.PureComponent);oA(dq,"displayName","Legend");oA(dq,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var UN,lee;function cQe(){if(lee)return UN;lee=1;var e=rk();function t(){this.__data__=new e,this.size=0}return UN=t,UN}var $N,uee;function fQe(){if(uee)return $N;uee=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return $N=e,$N}var VN,cee;function hQe(){if(cee)return VN;cee=1;function e(t){return this.__data__.get(t)}return VN=e,VN}var qN,fee;function dQe(){if(fee)return qN;fee=1;function e(t){return this.__data__.has(t)}return qN=e,qN}var HN,hee;function pQe(){if(hee)return HN;hee=1;var e=rk(),t=rq(),n=iq(),r=200;function i(s,f){var a=this.__data__;if(a instanceof e){var p=a.__data__;if(!t||p.length<r-1)return p.push([s,f]),this.size=++a.size,this;a=this.__data__=new n(p)}return a.set(s,f),this.size=a.size,this}return HN=i,HN}var GN,dee;function Wpe(){if(dee)return GN;dee=1;var e=rk(),t=cQe(),n=fQe(),r=hQe(),i=dQe(),s=pQe();function f(a){var p=this.__data__=new e(a);this.size=p.size}return f.prototype.clear=t,f.prototype.delete=n,f.prototype.get=r,f.prototype.has=i,f.prototype.set=s,GN=f,GN}var YN,pee;function mQe(){if(pee)return YN;pee=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return YN=t,YN}var WN,mee;function gQe(){if(mee)return WN;mee=1;function e(t){return this.__data__.has(t)}return WN=e,WN}var XN,gee;function Xpe(){if(gee)return XN;gee=1;var e=iq(),t=mQe(),n=gQe();function r(i){var s=-1,f=i==null?0:i.length;for(this.__data__=new e;++s<f;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,XN=r,XN}var ZN,yee;function Zpe(){if(yee)return ZN;yee=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return ZN=e,ZN}var KN,_ee;function Kpe(){if(_ee)return KN;_ee=1;function e(t,n){return t.has(n)}return KN=e,KN}var QN,vee;function Qpe(){if(vee)return QN;vee=1;var e=Xpe(),t=Zpe(),n=Kpe(),r=1,i=2;function s(f,a,p,_,S,E){var I=p&r,z=f.length,F=a.length;if(z!=F&&!(I&&F>z))return!1;var U=E.get(f),k=E.get(a);if(U&&k)return U==a&&k==f;var V=-1,K=!0,J=p&i?new e:void 0;for(E.set(f,a),E.set(a,f);++V<z;){var ie=f[V],Q=a[V];if(_)var W=I?_(Q,ie,V,a,f,E):_(ie,Q,V,f,a,E);if(W!==void 0){if(W)continue;K=!1;break}if(J){if(!t(a,function(te,X){if(!n(J,X)&&(ie===te||S(ie,te,p,_,E)))return J.push(X)})){K=!1;break}}else if(!(ie===Q||S(ie,Q,p,_,E))){K=!1;break}}return E.delete(f),E.delete(a),K}return QN=s,QN}var JN,bee;function yQe(){if(bee)return JN;bee=1;var e=yg(),t=e.Uint8Array;return JN=t,JN}var eB,xee;function _Qe(){if(xee)return eB;xee=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return eB=e,eB}var tB,wee;function pq(){if(wee)return tB;wee=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return tB=e,tB}var nB,See;function vQe(){if(See)return nB;See=1;var e=DO(),t=yQe(),n=nq(),r=Qpe(),i=_Qe(),s=pq(),f=1,a=2,p="[object Boolean]",_="[object Date]",S="[object Error]",E="[object Map]",I="[object Number]",z="[object RegExp]",F="[object Set]",U="[object String]",k="[object Symbol]",V="[object ArrayBuffer]",K="[object DataView]",J=e?e.prototype:void 0,ie=J?J.valueOf:void 0;function Q(W,te,X,ae,le,ge,ye){switch(X){case K:if(W.byteLength!=te.byteLength||W.byteOffset!=te.byteOffset)return!1;W=W.buffer,te=te.buffer;case V:return!(W.byteLength!=te.byteLength||!ge(new t(W),new t(te)));case p:case _:case I:return n(+W,+te);case S:return W.name==te.name&&W.message==te.message;case z:case U:return W==te+"";case E:var De=i;case F:var He=ae&f;if(De||(De=s),W.size!=te.size&&!He)return!1;var Be=ye.get(W);if(Be)return Be==te;ae|=a,ye.set(W,te);var Ee=r(De(W),De(te),ae,le,ge,ye);return ye.delete(W),Ee;case k:if(ie)return ie.call(W)==ie.call(te)}return!1}return nB=Q,nB}var rB,Tee;function Jpe(){if(Tee)return rB;Tee=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return rB=e,rB}var iB,Eee;function bQe(){if(Eee)return iB;Eee=1;var e=Jpe(),t=sf();function n(r,i,s){var f=i(r);return t(r)?f:e(f,s(r))}return iB=n,iB}var aB,Aee;function xQe(){if(Aee)return aB;Aee=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,f=[];++r<i;){var a=t[r];n(a,r,t)&&(f[s++]=a)}return f}return aB=e,aB}var oB,Oee;function wQe(){if(Oee)return oB;Oee=1;function e(){return[]}return oB=e,oB}var sB,Cee;function SQe(){if(Cee)return sB;Cee=1;var e=xQe(),t=wQe(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(f){return f==null?[]:(f=Object(f),e(i(f),function(a){return r.call(f,a)}))}:t;return sB=s,sB}var lB,Mee;function TQe(){if(Mee)return lB;Mee=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return lB=e,lB}var uB,Dee;function EQe(){if(Dee)return uB;Dee=1;var e=y_(),t=__(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return uB=r,uB}var cB,Iee;function mq(){if(Iee)return cB;Iee=1;var e=EQe(),t=__(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(f){return t(f)&&r.call(f,"callee")&&!i.call(f,"callee")};return cB=s,cB}var s2={exports:{}},fB,Pee;function AQe(){if(Pee)return fB;Pee=1;function e(){return!1}return fB=e,fB}s2.exports;var Ree;function eme(){return Ree||(Ree=1,(function(e,t){var n=yg(),r=AQe(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,f=s&&s.exports===i,a=f?n.Buffer:void 0,p=a?a.isBuffer:void 0,_=p||r;e.exports=_})(s2,s2.exports)),s2.exports}var hB,kee;function gq(){if(kee)return hB;kee=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return hB=n,hB}var dB,Lee;function yq(){if(Lee)return dB;Lee=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return dB=t,dB}var pB,zee;function OQe(){if(zee)return pB;zee=1;var e=y_(),t=yq(),n=__(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",f="[object Date]",a="[object Error]",p="[object Function]",_="[object Map]",S="[object Number]",E="[object Object]",I="[object RegExp]",z="[object Set]",F="[object String]",U="[object WeakMap]",k="[object ArrayBuffer]",V="[object DataView]",K="[object Float32Array]",J="[object Float64Array]",ie="[object Int8Array]",Q="[object Int16Array]",W="[object Int32Array]",te="[object Uint8Array]",X="[object Uint8ClampedArray]",ae="[object Uint16Array]",le="[object Uint32Array]",ge={};ge[K]=ge[J]=ge[ie]=ge[Q]=ge[W]=ge[te]=ge[X]=ge[ae]=ge[le]=!0,ge[r]=ge[i]=ge[k]=ge[s]=ge[V]=ge[f]=ge[a]=ge[p]=ge[_]=ge[S]=ge[E]=ge[I]=ge[z]=ge[F]=ge[U]=!1;function ye(De){return n(De)&&t(De.length)&&!!ge[e(De)]}return pB=ye,pB}var mB,Fee;function tme(){if(Fee)return mB;Fee=1;function e(t){return function(n){return t(n)}}return mB=e,mB}var l2={exports:{}};l2.exports;var Nee;function CQe(){return Nee||(Nee=1,(function(e,t){var n=xpe(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,f=s&&n.process,a=(function(){try{var p=i&&i.require&&i.require("util").types;return p||f&&f.binding&&f.binding("util")}catch{}})();e.exports=a})(l2,l2.exports)),l2.exports}var gB,Bee;function nme(){if(Bee)return gB;Bee=1;var e=OQe(),t=tme(),n=CQe(),r=n&&n.isTypedArray,i=r?t(r):e;return gB=i,gB}var yB,jee;function MQe(){if(jee)return yB;jee=1;var e=TQe(),t=mq(),n=sf(),r=eme(),i=gq(),s=nme(),f=Object.prototype,a=f.hasOwnProperty;function p(_,S){var E=n(_),I=!E&&t(_),z=!E&&!I&&r(_),F=!E&&!I&&!z&&s(_),U=E||I||z||F,k=U?e(_.length,String):[],V=k.length;for(var K in _)(S||a.call(_,K))&&!(U&&(K=="length"||z&&(K=="offset"||K=="parent")||F&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||i(K,V)))&&k.push(K);return k}return yB=p,yB}var _B,Uee;function DQe(){if(Uee)return _B;Uee=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return _B=t,_B}var vB,$ee;function rme(){if($ee)return vB;$ee=1;function e(t,n){return function(r){return t(n(r))}}return vB=e,vB}var bB,Vee;function IQe(){if(Vee)return bB;Vee=1;var e=rme(),t=e(Object.keys,Object);return bB=t,bB}var xB,qee;function PQe(){if(qee)return xB;qee=1;var e=DQe(),t=IQe(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var f=[];for(var a in Object(s))r.call(s,a)&&a!="constructor"&&f.push(a);return f}return xB=i,xB}var wB,Hee;function RO(){if(Hee)return wB;Hee=1;var e=tq(),t=yq();function n(r){return r!=null&&t(r.length)&&!e(r)}return wB=n,wB}var SB,Gee;function ck(){if(Gee)return SB;Gee=1;var e=MQe(),t=PQe(),n=RO();function r(i){return n(i)?e(i):t(i)}return SB=r,SB}var TB,Yee;function RQe(){if(Yee)return TB;Yee=1;var e=bQe(),t=SQe(),n=ck();function r(i){return e(i,n,t)}return TB=r,TB}var EB,Wee;function kQe(){if(Wee)return EB;Wee=1;var e=RQe(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,f,a,p,_,S){var E=a&t,I=e(s),z=I.length,F=e(f),U=F.length;if(z!=U&&!E)return!1;for(var k=z;k--;){var V=I[k];if(!(E?V in f:r.call(f,V)))return!1}var K=S.get(s),J=S.get(f);if(K&&J)return K==f&&J==s;var ie=!0;S.set(s,f),S.set(f,s);for(var Q=E;++k<z;){V=I[k];var W=s[V],te=f[V];if(p)var X=E?p(te,W,V,f,s,S):p(W,te,V,s,f,S);if(!(X===void 0?W===te||_(W,te,a,p,S):X)){ie=!1;break}Q||(Q=V=="constructor")}if(ie&&!Q){var ae=s.constructor,le=f.constructor;ae!=le&&"constructor"in s&&"constructor"in f&&!(typeof ae=="function"&&ae instanceof ae&&typeof le=="function"&&le instanceof le)&&(ie=!1)}return S.delete(s),S.delete(f),ie}return EB=i,EB}var AB,Xee;function LQe(){if(Xee)return AB;Xee=1;var e=qx(),t=yg(),n=e(t,"DataView");return AB=n,AB}var OB,Zee;function zQe(){if(Zee)return OB;Zee=1;var e=qx(),t=yg(),n=e(t,"Promise");return OB=n,OB}var CB,Kee;function ime(){if(Kee)return CB;Kee=1;var e=qx(),t=yg(),n=e(t,"Set");return CB=n,CB}var MB,Qee;function FQe(){if(Qee)return MB;Qee=1;var e=qx(),t=yg(),n=e(t,"WeakMap");return MB=n,MB}var DB,Jee;function NQe(){if(Jee)return DB;Jee=1;var e=LQe(),t=rq(),n=zQe(),r=ime(),i=FQe(),s=y_(),f=wpe(),a="[object Map]",p="[object Object]",_="[object Promise]",S="[object Set]",E="[object WeakMap]",I="[object DataView]",z=f(e),F=f(t),U=f(n),k=f(r),V=f(i),K=s;return(e&&K(new e(new ArrayBuffer(1)))!=I||t&&K(new t)!=a||n&&K(n.resolve())!=_||r&&K(new r)!=S||i&&K(new i)!=E)&&(K=function(J){var ie=s(J),Q=ie==p?J.constructor:void 0,W=Q?f(Q):"";if(W)switch(W){case z:return I;case F:return a;case U:return _;case k:return S;case V:return E}return ie}),DB=K,DB}var IB,ete;function BQe(){if(ete)return IB;ete=1;var e=Wpe(),t=Qpe(),n=vQe(),r=kQe(),i=NQe(),s=sf(),f=eme(),a=nme(),p=1,_="[object Arguments]",S="[object Array]",E="[object Object]",I=Object.prototype,z=I.hasOwnProperty;function F(U,k,V,K,J,ie){var Q=s(U),W=s(k),te=Q?S:i(U),X=W?S:i(k);te=te==_?E:te,X=X==_?E:X;var ae=te==E,le=X==E,ge=te==X;if(ge&&f(U)){if(!f(k))return!1;Q=!0,ae=!1}if(ge&&!ae)return ie||(ie=new e),Q||a(U)?t(U,k,V,K,J,ie):n(U,k,te,V,K,J,ie);if(!(V&p)){var ye=ae&&z.call(U,"__wrapped__"),De=le&&z.call(k,"__wrapped__");if(ye||De){var He=ye?U.value():U,Be=De?k.value():k;return ie||(ie=new e),J(He,Be,V,K,ie)}}return ge?(ie||(ie=new e),r(U,k,V,K,J,ie)):!1}return IB=F,IB}var PB,tte;function _q(){if(tte)return PB;tte=1;var e=BQe(),t=__();function n(r,i,s,f,a){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,f,n,a)}return PB=n,PB}var RB,nte;function jQe(){if(nte)return RB;nte=1;var e=Wpe(),t=_q(),n=1,r=2;function i(s,f,a,p){var _=a.length,S=_,E=!p;if(s==null)return!S;for(s=Object(s);_--;){var I=a[_];if(E&&I[2]?I[1]!==s[I[0]]:!(I[0]in s))return!1}for(;++_<S;){I=a[_];var z=I[0],F=s[z],U=I[1];if(E&&I[2]){if(F===void 0&&!(z in s))return!1}else{var k=new e;if(p)var V=p(F,U,z,s,f,k);if(!(V===void 0?t(U,F,n|r,p,k):V))return!1}}return!0}return RB=i,RB}var kB,rte;function ame(){if(rte)return kB;rte=1;var e=c0();function t(n){return n===n&&!e(n)}return kB=t,kB}var LB,ite;function UQe(){if(ite)return LB;ite=1;var e=ame(),t=ck();function n(r){for(var i=t(r),s=i.length;s--;){var f=i[s],a=r[f];i[s]=[f,a,e(a)]}return i}return LB=n,LB}var zB,ate;function ome(){if(ate)return zB;ate=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return zB=e,zB}var FB,ote;function $Qe(){if(ote)return FB;ote=1;var e=jQe(),t=UQe(),n=ome();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(f){return f===i||e(f,i,s)}}return FB=r,FB}var NB,ste;function VQe(){if(ste)return NB;ste=1;function e(t,n){return t!=null&&n in Object(t)}return NB=e,NB}var BB,lte;function qQe(){if(lte)return BB;lte=1;var e=Epe(),t=mq(),n=sf(),r=gq(),i=yq(),s=ak();function f(a,p,_){p=e(p,a);for(var S=-1,E=p.length,I=!1;++S<E;){var z=s(p[S]);if(!(I=a!=null&&_(a,z)))break;a=a[z]}return I||++S!=E?I:(E=a==null?0:a.length,!!E&&i(E)&&r(z,E)&&(n(a)||t(a)))}return BB=f,BB}var jB,ute;function HQe(){if(ute)return jB;ute=1;var e=VQe(),t=qQe();function n(r,i){return r!=null&&t(r,i,e)}return jB=n,jB}var UB,cte;function GQe(){if(cte)return UB;cte=1;var e=_q(),t=Ape(),n=HQe(),r=eq(),i=ame(),s=ome(),f=ak(),a=1,p=2;function _(S,E){return r(S)&&i(E)?s(f(S),E):function(I){var z=t(I,S);return z===void 0&&z===E?n(I,S):e(E,z,a|p)}}return UB=_,UB}var $B,fte;function fT(){if(fte)return $B;fte=1;function e(t){return t}return $B=e,$B}var VB,hte;function YQe(){if(hte)return VB;hte=1;function e(t){return function(n){return n==null?void 0:n[t]}}return VB=e,VB}var qB,dte;function WQe(){if(dte)return qB;dte=1;var e=oq();function t(n){return function(r){return e(r,n)}}return qB=t,qB}var HB,pte;function XQe(){if(pte)return HB;pte=1;var e=YQe(),t=WQe(),n=eq(),r=ak();function i(s){return n(s)?e(r(s)):t(s)}return HB=i,HB}var GB,mte;function f0(){if(mte)return GB;mte=1;var e=$Qe(),t=GQe(),n=fT(),r=sf(),i=XQe();function s(f){return typeof f=="function"?f:f==null?n:typeof f=="object"?r(f)?t(f[0],f[1]):e(f):i(f)}return GB=s,GB}var YB,gte;function sme(){if(gte)return YB;gte=1;function e(t,n,r,i){for(var s=t.length,f=r+(i?1:-1);i?f--:++f<s;)if(n(t[f],f,t))return f;return-1}return YB=e,YB}var WB,yte;function ZQe(){if(yte)return WB;yte=1;function e(t){return t!==t}return WB=e,WB}var XB,_te;function KQe(){if(_te)return XB;_te=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return XB=e,XB}var ZB,vte;function QQe(){if(vte)return ZB;vte=1;var e=sme(),t=ZQe(),n=KQe();function r(i,s,f){return s===s?n(i,s,f):e(i,t,f)}return ZB=r,ZB}var KB,bte;function JQe(){if(bte)return KB;bte=1;var e=QQe();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return KB=t,KB}var QB,xte;function eJe(){if(xte)return QB;xte=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return QB=e,QB}var JB,wte;function tJe(){if(wte)return JB;wte=1;function e(){}return JB=e,JB}var e5,Ste;function nJe(){if(Ste)return e5;Ste=1;var e=ime(),t=tJe(),n=pq(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return e5=i,e5}var t5,Tte;function rJe(){if(Tte)return t5;Tte=1;var e=Xpe(),t=JQe(),n=eJe(),r=Kpe(),i=nJe(),s=pq(),f=200;function a(p,_,S){var E=-1,I=t,z=p.length,F=!0,U=[],k=U;if(S)F=!1,I=n;else if(z>=f){var V=_?null:i(p);if(V)return s(V);F=!1,I=r,k=new e}else k=_?[]:U;e:for(;++E<z;){var K=p[E],J=_?_(K):K;if(K=S||K!==0?K:0,F&&J===J){for(var ie=k.length;ie--;)if(k[ie]===J)continue e;_&&k.push(J),U.push(K)}else I(k,J,S)||(k!==U&&k.push(J),U.push(K))}return U}return t5=a,t5}var n5,Ete;function iJe(){if(Ete)return n5;Ete=1;var e=f0(),t=rJe();function n(r,i){return r&&r.length?t(r,e(i,2)):[]}return n5=n,n5}var aJe=iJe();const Ate=ga(aJe);function lme(e,t,n){return t===!0?Ate(e,n):Li(t)?Ate(e,t):e}function yS(e){"@babel/helpers - typeof";return yS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yS(e)}var oJe=["ref"];function Ote(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ote(Object(n),!0).forEach(function(r){fk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ote(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sJe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cte(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cme(r.key),r)}}function lJe(e,t,n){return t&&Cte(e.prototype,t),n&&Cte(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uJe(e,t,n){return t=UI(t),cJe(e,ume()?Reflect.construct(t,n||[],UI(e).constructor):t.apply(e,n))}function cJe(e,t){if(t&&(yS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fJe(e)}function fJe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ume(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ume=function(){return!!e})()}function UI(e){return UI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},UI(e)}function hJe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P6(e,t)}function P6(e,t){return P6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},P6(e,t)}function fk(e,t,n){return t=cme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cme(e){var t=dJe(e,"string");return yS(t)=="symbol"?t:t+""}function dJe(e,t){if(yS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(yS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function pJe(e,t){if(e==null)return{};var n=mJe(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mJe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function gJe(e){return e.value}function yJe(e,t){if(Je.isValidElement(e))return Je.cloneElement(e,t);if(typeof e=="function")return Je.createElement(e,t);t.ref;var n=pJe(t,oJe);return Je.createElement(dq,n)}var Mte=1,ox=(function(e){function t(){var n;sJe(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=uJe(this,t,[].concat(i)),fk(n,"lastBoundingBox",{width:-1,height:-1}),n}return hJe(t,e),lJe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Mte||Math.abs(i.height-this.lastBoundingBox.height)>Mte)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Sy({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,f=i.align,a=i.verticalAlign,p=i.margin,_=i.chartWidth,S=i.chartHeight,E,I;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(f==="center"&&s==="vertical"){var z=this.getBBoxSnapshot();E={left:((_||0)-z.width)/2}}else E=f==="right"?{right:p&&p.right||0}:{left:p&&p.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var F=this.getBBoxSnapshot();I={top:((S||0)-F.height)/2}}else I=a==="bottom"?{bottom:p&&p.bottom||0}:{top:p&&p.top||0};return Sy(Sy({},E),I)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,f=i.width,a=i.height,p=i.wrapperStyle,_=i.payloadUniqBy,S=i.payload,E=Sy(Sy({position:"absolute",width:f||"auto",height:a||"auto"},this.getDefaultPosition(p)),p);return Je.createElement("div",{className:"recharts-legend-wrapper",style:E,ref:function(z){r.wrapperNode=z}},yJe(s,Sy(Sy({},this.props),{},{payload:lme(S,_,gJe)})))}}],[{key:"getWithHeight",value:function(r,i){var s=Sy(Sy({},this.defaultProps),r.props),f=s.layout;return f==="vertical"&&Xn(r.props.height)?{height:r.props.height}:f==="horizontal"?{width:r.props.width||i}:null}}])})(be.PureComponent);fk(ox,"displayName","Legend");fk(ox,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var r5,Dte;function _Je(){if(Dte)return r5;Dte=1;var e=DO(),t=mq(),n=sf(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return r5=i,r5}var i5,Ite;function fme(){if(Ite)return i5;Ite=1;var e=Jpe(),t=_Je();function n(r,i,s,f,a){var p=-1,_=r.length;for(s||(s=t),a||(a=[]);++p<_;){var S=r[p];i>0&&s(S)?i>1?n(S,i-1,s,f,a):e(a,S):f||(a[a.length]=S)}return a}return i5=n,i5}var a5,Pte;function vJe(){if(Pte)return a5;Pte=1;function e(t){return function(n,r,i){for(var s=-1,f=Object(n),a=i(n),p=a.length;p--;){var _=a[t?p:++s];if(r(f[_],_,f)===!1)break}return n}}return a5=e,a5}var o5,Rte;function bJe(){if(Rte)return o5;Rte=1;var e=vJe(),t=e();return o5=t,o5}var s5,kte;function hme(){if(kte)return s5;kte=1;var e=bJe(),t=ck();function n(r,i){return r&&e(r,i,t)}return s5=n,s5}var l5,Lte;function xJe(){if(Lte)return l5;Lte=1;var e=RO();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var f=i.length,a=r?f:-1,p=Object(i);(r?a--:++a<f)&&s(p[a],a,p)!==!1;);return i}}return l5=t,l5}var u5,zte;function vq(){if(zte)return u5;zte=1;var e=hme(),t=xJe(),n=t(e);return u5=n,u5}var c5,Fte;function dme(){if(Fte)return c5;Fte=1;var e=vq(),t=RO();function n(r,i){var s=-1,f=t(r)?Array(r.length):[];return e(r,function(a,p,_){f[++s]=i(a,p,_)}),f}return c5=n,c5}var f5,Nte;function wJe(){if(Nte)return f5;Nte=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return f5=e,f5}var h5,Bte;function SJe(){if(Bte)return h5;Bte=1;var e=uT();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,f=n===n,a=e(n),p=r!==void 0,_=r===null,S=r===r,E=e(r);if(!_&&!E&&!a&&n>r||a&&p&&S&&!_&&!E||s&&p&&S||!i&&S||!f)return 1;if(!s&&!a&&!E&&n<r||E&&i&&f&&!s&&!a||_&&i&&f||!p&&f||!S)return-1}return 0}return h5=t,h5}var d5,jte;function TJe(){if(jte)return d5;jte=1;var e=SJe();function t(n,r,i){for(var s=-1,f=n.criteria,a=r.criteria,p=f.length,_=i.length;++s<p;){var S=e(f[s],a[s]);if(S){if(s>=_)return S;var E=i[s];return S*(E=="desc"?-1:1)}}return n.index-r.index}return d5=t,d5}var p5,Ute;function EJe(){if(Ute)return p5;Ute=1;var e=aq(),t=oq(),n=f0(),r=dme(),i=wJe(),s=tme(),f=TJe(),a=fT(),p=sf();function _(S,E,I){E.length?E=e(E,function(U){return p(U)?function(k){return t(k,U.length===1?U[0]:U)}:U}):E=[a];var z=-1;E=e(E,s(n));var F=r(S,function(U,k,V){var K=e(E,function(J){return J(U)});return{criteria:K,index:++z,value:U}});return i(F,function(U,k){return f(U,k,I)})}return p5=_,p5}var m5,$te;function AJe(){if($te)return m5;$te=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return m5=e,m5}var g5,Vte;function OJe(){if(Vte)return g5;Vte=1;var e=AJe(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var f=arguments,a=-1,p=t(f.length-i,0),_=Array(p);++a<p;)_[a]=f[i+a];a=-1;for(var S=Array(i+1);++a<i;)S[a]=f[a];return S[i]=s(_),e(r,this,S)}}return g5=n,g5}var y5,qte;function CJe(){if(qte)return y5;qte=1;function e(t){return function(){return t}}return y5=e,y5}var _5,Hte;function pme(){if(Hte)return _5;Hte=1;var e=qx(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return _5=t,_5}var v5,Gte;function MJe(){if(Gte)return v5;Gte=1;var e=CJe(),t=pme(),n=fT(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return v5=r,v5}var b5,Yte;function DJe(){if(Yte)return b5;Yte=1;var e=800,t=16,n=Date.now;function r(i){var s=0,f=0;return function(){var a=n(),p=t-(a-f);if(f=a,p>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return b5=r,b5}var x5,Wte;function IJe(){if(Wte)return x5;Wte=1;var e=MJe(),t=DJe(),n=t(e);return x5=n,x5}var w5,Xte;function PJe(){if(Xte)return w5;Xte=1;var e=fT(),t=OJe(),n=IJe();function r(i,s){return n(t(i,s,e),i+"")}return w5=r,w5}var S5,Zte;function hk(){if(Zte)return S5;Zte=1;var e=nq(),t=RO(),n=gq(),r=c0();function i(s,f,a){if(!r(a))return!1;var p=typeof f;return(p=="number"?t(a)&&n(f,a.length):p=="string"&&f in a)?e(a[f],s):!1}return S5=i,S5}var T5,Kte;function RJe(){if(Kte)return T5;Kte=1;var e=fme(),t=EJe(),n=PJe(),r=hk(),i=n(function(s,f){if(s==null)return[];var a=f.length;return a>1&&r(s,f[0],f[1])?f=[]:a>2&&r(f[0],f[1],f[2])&&(f=[f[0]]),t(s,e(f,1),[])});return T5=i,T5}var kJe=RJe();const bq=ga(kJe);function sA(e){"@babel/helpers - typeof";return sA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sA(e)}function R6(){return R6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R6.apply(this,arguments)}function LJe(e,t){return BJe(e)||NJe(e,t)||FJe(e,t)||zJe()}function zJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FJe(e,t){if(e){if(typeof e=="string")return Qte(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qte(e,t)}}function Qte(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function NJe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function BJe(e){if(Array.isArray(e))return e}function Jte(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function E5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jte(Object(n),!0).forEach(function(r){jJe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jte(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jJe(e,t,n){return t=UJe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UJe(e){var t=$Je(e,"string");return sA(t)=="symbol"?t:t+""}function $Je(e,t){if(sA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(sA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VJe(e){return Array.isArray(e)&&vl(e[0])&&vl(e[1])?e.join(" ~ "):e}var qJe=function(t){var n=t.separator,r=n===void 0?" : ":n,i=t.contentStyle,s=i===void 0?{}:i,f=t.itemStyle,a=f===void 0?{}:f,p=t.labelStyle,_=p===void 0?{}:p,S=t.payload,E=t.formatter,I=t.itemSorter,z=t.wrapperClassName,F=t.labelClassName,U=t.label,k=t.labelFormatter,V=t.accessibilityLayer,K=V===void 0?!1:V,J=function(){if(S&&S.length){var ye={padding:0,margin:0},De=(I?bq(S,I):S).map(function(He,Be){if(He.type==="none")return null;var Ee=E5({display:"block",paddingTop:4,paddingBottom:4,color:He.color||"#000"},a),Ne=He.formatter||E||VJe,at=He.value,yt=He.name,je=at,Ke=yt;if(Ne&&je!=null&&Ke!=null){var it=Ne(at,yt,He,Be,S);if(Array.isArray(it)){var Pe=LJe(it,2);je=Pe[0],Ke=Pe[1]}else je=it}return Je.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Be),style:Ee},vl(Ke)?Je.createElement("span",{className:"recharts-tooltip-item-name"},Ke):null,vl(Ke)?Je.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Je.createElement("span",{className:"recharts-tooltip-item-value"},je),Je.createElement("span",{className:"recharts-tooltip-item-unit"},He.unit||""))});return Je.createElement("ul",{className:"recharts-tooltip-item-list",style:ye},De)}return null},ie=E5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),Q=E5({margin:0},_),W=!Gi(U),te=W?U:"",X=ri("recharts-default-tooltip",z),ae=ri("recharts-tooltip-label",F);W&&k&&S!==void 0&&S!==null&&(te=k(U,S));var le=K?{role:"status","aria-live":"assertive"}:{};return Je.createElement("div",R6({className:X,style:ie},le),Je.createElement("p",{className:ae,style:Q},Je.isValidElement(te)?te:"".concat(te)),J())};function lA(e){"@babel/helpers - typeof";return lA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lA(e)}function jM(e,t,n){return t=HJe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HJe(e){var t=GJe(e,"string");return lA(t)=="symbol"?t:t+""}function GJe(e,t){if(lA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(lA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $E="recharts-tooltip-wrapper",YJe={visibility:"hidden"};function WJe(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return ri($E,jM(jM(jM(jM({},"".concat($E,"-right"),Xn(n)&&t&&Xn(t.x)&&n>=t.x),"".concat($E,"-left"),Xn(n)&&t&&Xn(t.x)&&n<t.x),"".concat($E,"-bottom"),Xn(r)&&t&&Xn(t.y)&&r>=t.y),"".concat($E,"-top"),Xn(r)&&t&&Xn(t.y)&&r<t.y))}function ene(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,s=e.position,f=e.reverseDirection,a=e.tooltipDimension,p=e.viewBox,_=e.viewBoxDimension;if(s&&Xn(s[r]))return s[r];var S=n[r]-a-i,E=n[r]+i;if(t[r])return f[r]?S:E;if(f[r]){var I=S,z=p[r];return I<z?Math.max(E,p[r]):Math.max(S,p[r])}var F=E+a,U=p[r]+_;return F>U?Math.max(S,p[r]):Math.max(E,p[r])}function XJe(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function ZJe(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,i=e.position,s=e.reverseDirection,f=e.tooltipBox,a=e.useTranslate3d,p=e.viewBox,_,S,E;return f.height>0&&f.width>0&&n?(S=ene({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:f.width,viewBox:p,viewBoxDimension:p.width}),E=ene({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:f.height,viewBox:p,viewBoxDimension:p.height}),_=XJe({translateX:S,translateY:E,useTranslate3d:a})):_=YJe,{cssProperties:_,cssClasses:WJe({translateX:S,translateY:E,coordinate:n})}}function _S(e){"@babel/helpers - typeof";return _S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_S(e)}function tne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tne(Object(n),!0).forEach(function(r){L6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tne(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function KJe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QJe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gme(r.key),r)}}function JJe(e,t,n){return t&&QJe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function eet(e,t,n){return t=$I(t),tet(e,mme()?Reflect.construct(t,n||[],$I(e).constructor):t.apply(e,n))}function tet(e,t){if(t&&(_S(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return net(e)}function net(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mme(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mme=function(){return!!e})()}function $I(e){return $I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$I(e)}function ret(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k6(e,t)}function k6(e,t){return k6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},k6(e,t)}function L6(e,t,n){return t=gme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gme(e){var t=iet(e,"string");return _S(t)=="symbol"?t:t+""}function iet(e,t){if(_S(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_S(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var rne=1,aet=(function(e){function t(){var n;KJe(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=eet(this,t,[].concat(i)),L6(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),L6(n,"handleKeyDown",function(f){if(f.key==="Escape"){var a,p,_,S;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(p=n.props.coordinate)===null||p===void 0?void 0:p.x)!==null&&a!==void 0?a:0,y:(_=(S=n.props.coordinate)===null||S===void 0?void 0:S.y)!==null&&_!==void 0?_:0}})}}),n}return ret(t,e),JJe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>rne||Math.abs(r.height-this.state.lastBoundingBox.height)>rne)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,f=i.allowEscapeViewBox,a=i.animationDuration,p=i.animationEasing,_=i.children,S=i.coordinate,E=i.hasPayload,I=i.isAnimationActive,z=i.offset,F=i.position,U=i.reverseDirection,k=i.useTranslate3d,V=i.viewBox,K=i.wrapperStyle,J=ZJe({allowEscapeViewBox:f,coordinate:S,offsetTopLeft:z,position:F,reverseDirection:U,tooltipBox:this.state.lastBoundingBox,useTranslate3d:k,viewBox:V}),ie=J.cssClasses,Q=J.cssProperties,W=nne(nne({transition:I&&s?"transform ".concat(a,"ms ").concat(p):void 0},Q),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&E?"visible":"hidden",position:"absolute",top:0,left:0},K);return Je.createElement("div",{tabIndex:-1,className:ie,style:W,ref:function(X){r.wrapperNode=X}},_)}}])})(be.PureComponent),oet=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},hT={isSsr:oet()};function vS(e){"@babel/helpers - typeof";return vS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vS(e)}function ine(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ane(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ine(Object(n),!0).forEach(function(r){xq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ine(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function set(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uet(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_me(r.key),r)}}function cet(e,t,n){return t&&uet(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fet(e,t,n){return t=VI(t),het(e,yme()?Reflect.construct(t,n||[],VI(e).constructor):t.apply(e,n))}function het(e,t){if(t&&(vS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return det(e)}function det(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yme(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yme=function(){return!!e})()}function VI(e){return VI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},VI(e)}function pet(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z6(e,t)}function z6(e,t){return z6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},z6(e,t)}function xq(e,t,n){return t=_me(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _me(e){var t=met(e,"string");return vS(t)=="symbol"?t:t+""}function met(e,t){if(vS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(vS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function get(e){return e.dataKey}function yet(e,t){return Je.isValidElement(e)?Je.cloneElement(e,t):typeof e=="function"?Je.createElement(e,t):Je.createElement(qJe,t)}var zm=(function(e){function t(){return set(this,t),fet(this,t,arguments)}return pet(t,e),cet(t,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,f=i.allowEscapeViewBox,a=i.animationDuration,p=i.animationEasing,_=i.content,S=i.coordinate,E=i.filterNull,I=i.isAnimationActive,z=i.offset,F=i.payload,U=i.payloadUniqBy,k=i.position,V=i.reverseDirection,K=i.useTranslate3d,J=i.viewBox,ie=i.wrapperStyle,Q=F??[];E&&Q.length&&(Q=lme(F.filter(function(te){return te.value!=null&&(te.hide!==!0||r.props.includeHidden)}),U,get));var W=Q.length>0;return Je.createElement(aet,{allowEscapeViewBox:f,animationDuration:a,animationEasing:p,isAnimationActive:I,active:s,coordinate:S,hasPayload:W,offset:z,position:k,reverseDirection:V,useTranslate3d:K,viewBox:J,wrapperStyle:ie},yet(_,ane(ane({},this.props),{},{payload:Q})))}}])})(be.PureComponent);xq(zm,"displayName","Tooltip");xq(zm,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!hT.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var A5,one;function _et(){if(one)return A5;one=1;var e=yg(),t=function(){return e.Date.now()};return A5=t,A5}var O5,sne;function vet(){if(sne)return O5;sne=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return O5=t,O5}var C5,lne;function bet(){if(lne)return C5;lne=1;var e=vet(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return C5=n,C5}var M5,une;function vme(){if(une)return M5;une=1;var e=bet(),t=c0(),n=uT(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,f=/^0o[0-7]+$/i,a=parseInt;function p(_){if(typeof _=="number")return _;if(n(_))return r;if(t(_)){var S=typeof _.valueOf=="function"?_.valueOf():_;_=t(S)?S+"":S}if(typeof _!="string")return _===0?_:+_;_=e(_);var E=s.test(_);return E||f.test(_)?a(_.slice(2),E?2:8):i.test(_)?r:+_}return M5=p,M5}var D5,cne;function xet(){if(cne)return D5;cne=1;var e=c0(),t=_et(),n=vme(),r="Expected a function",i=Math.max,s=Math.min;function f(a,p,_){var S,E,I,z,F,U,k=0,V=!1,K=!1,J=!0;if(typeof a!="function")throw new TypeError(r);p=n(p)||0,e(_)&&(V=!!_.leading,K="maxWait"in _,I=K?i(n(_.maxWait)||0,p):I,J="trailing"in _?!!_.trailing:J);function ie(De){var He=S,Be=E;return S=E=void 0,k=De,z=a.apply(Be,He),z}function Q(De){return k=De,F=setTimeout(X,p),V?ie(De):z}function W(De){var He=De-U,Be=De-k,Ee=p-He;return K?s(Ee,I-Be):Ee}function te(De){var He=De-U,Be=De-k;return U===void 0||He>=p||He<0||K&&Be>=I}function X(){var De=t();if(te(De))return ae(De);F=setTimeout(X,W(De))}function ae(De){return F=void 0,J&&S?ie(De):(S=E=void 0,z)}function le(){F!==void 0&&clearTimeout(F),k=0,S=U=E=F=void 0}function ge(){return F===void 0?z:ae(t())}function ye(){var De=t(),He=te(De);if(S=arguments,E=this,U=De,He){if(F===void 0)return Q(U);if(K)return clearTimeout(F),F=setTimeout(X,p),ie(U)}return F===void 0&&(F=setTimeout(X,p)),z}return ye.cancel=le,ye.flush=ge,ye}return D5=f,D5}var I5,fne;function wet(){if(fne)return I5;fne=1;var e=xet(),t=c0(),n="Expected a function";function r(i,s,f){var a=!0,p=!0;if(typeof i!="function")throw new TypeError(n);return t(f)&&(a="leading"in f?!!f.leading:a,p="trailing"in f?!!f.trailing:p),e(i,s,{leading:a,maxWait:s,trailing:p})}return I5=r,I5}var Tet=wet();const bme=ga(Tet);function uA(e){"@babel/helpers - typeof";return uA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uA(e)}function hne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function UM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hne(Object(n),!0).forEach(function(r){Eet(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hne(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Eet(e,t,n){return t=Aet(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Aet(e){var t=Oet(e,"string");return uA(t)=="symbol"?t:t+""}function Oet(e,t){if(uA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(uA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cet(e,t){return Pet(e)||Iet(e,t)||Det(e,t)||Met()}function Met(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Det(e,t){if(e){if(typeof e=="string")return dne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dne(e,t)}}function dne(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Iet(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function Pet(e){if(Array.isArray(e))return e}var Ret=be.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=e.width,f=s===void 0?"100%":s,a=e.height,p=a===void 0?"100%":a,_=e.minWidth,S=_===void 0?0:_,E=e.minHeight,I=e.maxHeight,z=e.children,F=e.debounce,U=F===void 0?0:F,k=e.id,V=e.className,K=e.onResize,J=e.style,ie=J===void 0?{}:J,Q=be.useRef(null),W=be.useRef();W.current=K,be.useImperativeHandle(t,function(){return Object.defineProperty(Q.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),Q.current},configurable:!0})});var te=be.useState({containerWidth:i.width,containerHeight:i.height}),X=Cet(te,2),ae=X[0],le=X[1],ge=be.useCallback(function(De,He){le(function(Be){var Ee=Math.round(De),Ne=Math.round(He);return Be.containerWidth===Ee&&Be.containerHeight===Ne?Be:{containerWidth:Ee,containerHeight:Ne}})},[]);be.useEffect(function(){var De=function(yt){var je,Ke=yt[0].contentRect,it=Ke.width,Pe=Ke.height;ge(it,Pe),(je=W.current)===null||je===void 0||je.call(W,it,Pe)};U>0&&(De=bme(De,U,{trailing:!0,leading:!1}));var He=new ResizeObserver(De),Be=Q.current.getBoundingClientRect(),Ee=Be.width,Ne=Be.height;return ge(Ee,Ne),He.observe(Q.current),function(){He.disconnect()}},[ge,U]);var ye=be.useMemo(function(){var De=ae.containerWidth,He=ae.containerHeight;if(De<0||He<0)return null;Yy(Yb(f)||Yb(p),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,f,p),Yy(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Be=Yb(f)?De:f,Ee=Yb(p)?He:p;n&&n>0&&(Be?Ee=Be/n:Ee&&(Be=Ee*n),I&&Ee>I&&(Ee=I)),Yy(Be>0||Ee>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Be,Ee,f,p,S,E,n);var Ne=!Array.isArray(z)&&Gy(z.type).endsWith("Chart");return Je.Children.map(z,function(at){return Je.isValidElement(at)?be.cloneElement(at,UM({width:Be,height:Ee},Ne?{style:UM({height:"100%",width:"100%",maxHeight:Ee,maxWidth:Be},at.props.style)}:{})):at})},[n,z,p,I,E,S,ae,f]);return Je.createElement("div",{id:k?"".concat(k):void 0,className:ri("recharts-responsive-container",V),style:UM(UM({},ie),{},{width:f,height:p,minWidth:S,minHeight:E,maxHeight:I}),ref:Q},ye)}),xme=function(t){return null};xme.displayName="Cell";function cA(e){"@babel/helpers - typeof";return cA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cA(e)}function pne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function F6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pne(Object(n),!0).forEach(function(r){ket(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pne(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ket(e,t,n){return t=Let(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Let(e){var t=zet(e,"string");return cA(t)=="symbol"?t:t+""}function zet(e,t){if(cA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(cA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lw={widthCache:{},cacheCount:0},Fet=2e3,Net={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},mne="recharts_measurement_span";function Bet(e){var t=F6({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var w2=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hT.isSsr)return{width:0,height:0};var r=Bet(n),i=JSON.stringify({text:t,copyStyle:r});if(lw.widthCache[i])return lw.widthCache[i];try{var s=document.getElementById(mne);s||(s=document.createElement("span"),s.setAttribute("id",mne),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var f=F6(F6({},Net),r);Object.assign(s.style,f),s.textContent="".concat(t);var a=s.getBoundingClientRect(),p={width:a.width,height:a.height};return lw.widthCache[i]=p,++lw.cacheCount>Fet&&(lw.cacheCount=0,lw.widthCache={}),p}catch{return{width:0,height:0}}},jet=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function fA(e){"@babel/helpers - typeof";return fA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fA(e)}function qI(e,t){return qet(e)||Vet(e,t)||$et(e,t)||Uet()}function Uet(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $et(e,t){if(e){if(typeof e=="string")return gne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gne(e,t)}}function gne(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vet(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;p=!1}else for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function qet(e){if(Array.isArray(e))return e}function Het(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yet(r.key),r)}}function Get(e,t,n){return t&&yne(e.prototype,t),n&&yne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yet(e){var t=Wet(e,"string");return fA(t)=="symbol"?t:t+""}function Wet(e,t){if(fA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(fA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _ne=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vne=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Xet=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Zet=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,wme={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Ket=Object.keys(wme),xw="NaN";function Qet(e,t){return e*wme[t]}var $M=(function(){function e(t,n){Het(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Xet.test(n)&&(this.num=NaN,this.unit=""),Ket.includes(n)&&(this.num=Qet(t,n),this.unit="px")}return Get(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Zet.exec(n))!==null&&r!==void 0?r:[],s=qI(i,3),f=s[1],a=s[2];return new e(parseFloat(f),a??"")}}])})();function Sme(e){if(e.includes(xw))return xw;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=_ne.exec(t))!==null&&n!==void 0?n:[],i=qI(r,4),s=i[1],f=i[2],a=i[3],p=$M.parse(s??""),_=$M.parse(a??""),S=f==="*"?p.multiply(_):p.divide(_);if(S.isNaN())return xw;t=t.replace(_ne,S.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var E,I=(E=vne.exec(t))!==null&&E!==void 0?E:[],z=qI(I,4),F=z[1],U=z[2],k=z[3],V=$M.parse(F??""),K=$M.parse(k??""),J=U==="+"?V.add(K):V.subtract(K);if(J.isNaN())return xw;t=t.replace(vne,J.toString())}return t}var bne=/\(([^()]*)\)/;function Jet(e){for(var t=e;t.includes("(");){var n=bne.exec(t),r=qI(n,2),i=r[1];t=t.replace(bne,Sme(i))}return t}function ett(e){var t=e.replace(/\s+/g,"");return t=Jet(t),t=Sme(t),t}function ttt(e){try{return ett(e)}catch{return xw}}function P5(e){var t=ttt(e.slice(5,-1));return t===xw?"":t}var ntt=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],rtt=["dx","dy","angle","className","breakAll"];function N6(){return N6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N6.apply(this,arguments)}function xne(e,t){if(e==null)return{};var n=itt(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function itt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function wne(e,t){return ltt(e)||stt(e,t)||ott(e,t)||att()}function att(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ott(e,t){if(e){if(typeof e=="string")return Sne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sne(e,t)}}function Sne(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function stt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;p=!1}else for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function ltt(e){if(Array.isArray(e))return e}var Tme=/[ \f\n\r\t\v\u2028\u2029]+/,Eme=function(t){var n=t.children,r=t.breakAll,i=t.style;try{var s=[];Gi(n)||(r?s=n.toString().split(""):s=n.toString().split(Tme));var f=s.map(function(p){return{word:p,width:w2(p,i).width}}),a=r?0:w2("",i).width;return{wordsWithComputedWidth:f,spaceWidth:a}}catch{return null}},utt=function(t,n,r,i,s){var f=t.maxLines,a=t.children,p=t.style,_=t.breakAll,S=Xn(f),E=a,I=function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Be.reduce(function(Ee,Ne){var at=Ne.word,yt=Ne.width,je=Ee[Ee.length-1];if(je&&(i==null||s||je.width+yt+r<Number(i)))je.words.push(at),je.width+=yt+r;else{var Ke={words:[at],width:yt};Ee.push(Ke)}return Ee},[])},z=I(n),F=function(Be){return Be.reduce(function(Ee,Ne){return Ee.width>Ne.width?Ee:Ne})};if(!S)return z;for(var U="",k=function(Be){var Ee=E.slice(0,Be),Ne=Eme({breakAll:_,style:p,children:Ee+U}).wordsWithComputedWidth,at=I(Ne),yt=at.length>f||F(at).width>Number(i);return[yt,at]},V=0,K=E.length-1,J=0,ie;V<=K&&J<=E.length-1;){var Q=Math.floor((V+K)/2),W=Q-1,te=k(W),X=wne(te,2),ae=X[0],le=X[1],ge=k(Q),ye=wne(ge,1),De=ye[0];if(!ae&&!De&&(V=Q+1),ae&&De&&(K=Q-1),!ae&&De){ie=le;break}J++}return ie||z},Tne=function(t){var n=Gi(t)?[]:t.toString().split(Tme);return[{words:n}]},ctt=function(t){var n=t.width,r=t.scaleToFit,i=t.children,s=t.style,f=t.breakAll,a=t.maxLines;if((n||r)&&!hT.isSsr){var p,_,S=Eme({breakAll:f,children:i,style:s});if(S){var E=S.wordsWithComputedWidth,I=S.spaceWidth;p=E,_=I}else return Tne(i);return utt({breakAll:f,children:i,maxLines:a,style:s},p,_,n,r)}return Tne(i)},Ene="#808080",HI=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,s=i===void 0?0:i,f=t.lineHeight,a=f===void 0?"1em":f,p=t.capHeight,_=p===void 0?"0.71em":p,S=t.scaleToFit,E=S===void 0?!1:S,I=t.textAnchor,z=I===void 0?"start":I,F=t.verticalAnchor,U=F===void 0?"end":F,k=t.fill,V=k===void 0?Ene:k,K=xne(t,ntt),J=be.useMemo(function(){return ctt({breakAll:K.breakAll,children:K.children,maxLines:K.maxLines,scaleToFit:E,style:K.style,width:K.width})},[K.breakAll,K.children,K.maxLines,E,K.style,K.width]),ie=K.dx,Q=K.dy,W=K.angle,te=K.className,X=K.breakAll,ae=xne(K,rtt);if(!vl(r)||!vl(s))return null;var le=r+(Xn(ie)?ie:0),ge=s+(Xn(Q)?Q:0),ye;switch(U){case"start":ye=P5("calc(".concat(_,")"));break;case"middle":ye=P5("calc(".concat((J.length-1)/2," * -").concat(a," + (").concat(_," / 2))"));break;default:ye=P5("calc(".concat(J.length-1," * -").concat(a,")"));break}var De=[];if(E){var He=J[0].width,Be=K.width;De.push("scale(".concat((Xn(Be)?Be/He:1)/He,")"))}return W&&De.push("rotate(".concat(W,", ").concat(le,", ").concat(ge,")")),De.length&&(ae.transform=De.join(" ")),Je.createElement("text",N6({},oa(ae,!0),{x:le,y:ge,className:ri("recharts-text",te),textAnchor:z,fill:V.includes("url")?Ene:V}),J.map(function(Ee,Ne){var at=Ee.words.join(X?"":" ");return Je.createElement("tspan",{x:le,dy:Ne===0?ye:a,key:"".concat(at,"-").concat(Ne)},at)}))};function Yv(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ftt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wq(e){let t,n,r;e.length!==2?(t=Yv,n=(a,p)=>Yv(e(a),p),r=(a,p)=>e(a)-p):(t=e===Yv||e===ftt?e:htt,n=e,r=e);function i(a,p,_=0,S=a.length){if(_<S){if(t(p,p)!==0)return S;do{const E=_+S>>>1;n(a[E],p)<0?_=E+1:S=E}while(_<S)}return _}function s(a,p,_=0,S=a.length){if(_<S){if(t(p,p)!==0)return S;do{const E=_+S>>>1;n(a[E],p)<=0?_=E+1:S=E}while(_<S)}return _}function f(a,p,_=0,S=a.length){const E=i(a,p,_,S-1);return E>_&&r(a[E-1],p)>-r(a[E],p)?E-1:E}return{left:i,center:f,right:s}}function htt(){return 0}function Ame(e){return e===null?NaN:+e}function*dtt(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const ptt=wq(Yv),kO=ptt.right;wq(Ame).center;class Ane extends Map{constructor(t,n=ytt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(One(this,t))}has(t){return super.has(One(this,t))}set(t,n){return super.set(mtt(this,t),n)}delete(t){return super.delete(gtt(this,t))}}function One({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function mtt({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function gtt({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ytt(e){return e!==null&&typeof e=="object"?e.valueOf():e}function _tt(e=Yv){if(e===Yv)return Ome;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Ome(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const vtt=Math.sqrt(50),btt=Math.sqrt(10),xtt=Math.sqrt(2);function GI(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),f=s>=vtt?10:s>=btt?5:s>=xtt?2:1;let a,p,_;return i<0?(_=Math.pow(10,-i)/f,a=Math.round(e*_),p=Math.round(t*_),a/_<e&&++a,p/_>t&&--p,_=-_):(_=Math.pow(10,i)*f,a=Math.round(e/_),p=Math.round(t/_),a*_<e&&++a,p*_>t&&--p),p<a&&.5<=n&&n<2?GI(e,t,n*2):[a,p,_]}function B6(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,f]=r?GI(t,e,n):GI(e,t,n);if(!(s>=i))return[];const a=s-i+1,p=new Array(a);if(r)if(f<0)for(let _=0;_<a;++_)p[_]=(s-_)/-f;else for(let _=0;_<a;++_)p[_]=(s-_)*f;else if(f<0)for(let _=0;_<a;++_)p[_]=(i+_)/-f;else for(let _=0;_<a;++_)p[_]=(i+_)*f;return p}function j6(e,t,n){return t=+t,e=+e,n=+n,GI(e,t,n)[2]}function U6(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?j6(t,e,n):j6(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Cne(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Mne(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Cme(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Ome:_tt(i);r>n;){if(r-n>600){const p=r-n+1,_=t-n+1,S=Math.log(p),E=.5*Math.exp(2*S/3),I=.5*Math.sqrt(S*E*(p-E)/p)*(_-p/2<0?-1:1),z=Math.max(n,Math.floor(t-_*E/p+I)),F=Math.min(r,Math.floor(t+(p-_)*E/p+I));Cme(e,t,z,F,i)}const s=e[t];let f=n,a=r;for(VE(e,n,t),i(e[r],s)>0&&VE(e,n,r);f<a;){for(VE(e,f,a),++f,--a;i(e[f],s)<0;)++f;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?VE(e,n,a):(++a,VE(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function VE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function wtt(e,t,n){if(e=Float64Array.from(dtt(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Mne(e);if(t>=1)return Cne(e);var r,i=(r-1)*t,s=Math.floor(i),f=Cne(Cme(e,s).subarray(0,s+1)),a=Mne(e.subarray(s+1));return f+(a-f)*(i-s)}}function Stt(e,t,n=Ame){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),f=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return f+(a-f)*(i-s)}}function Ttt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function pd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function v_(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $6=Symbol("implicit");function Sq(){var e=new Ane,t=[],n=[],r=$6;function i(s){let f=e.get(s);if(f===void 0){if(r!==$6)return r;e.set(s,f=t.push(s)-1)}return n[f%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Ane;for(const f of s)e.has(f)||e.set(f,t.push(f)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Sq(t,n).unknown(r)},pd.apply(i,arguments),i}function hA(){var e=Sq().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,f,a=!1,p=0,_=0,S=.5;delete e.unknown;function E(){var I=t().length,z=i<r,F=z?i:r,U=z?r:i;s=(U-F)/Math.max(1,I-p+_*2),a&&(s=Math.floor(s)),F+=(U-F-s*(I-p))*S,f=s*(1-p),a&&(F=Math.round(F),f=Math.round(f));var k=Ttt(I).map(function(V){return F+s*V});return n(z?k.reverse():k)}return e.domain=function(I){return arguments.length?(t(I),E()):t()},e.range=function(I){return arguments.length?([r,i]=I,r=+r,i=+i,E()):[r,i]},e.rangeRound=function(I){return[r,i]=I,r=+r,i=+i,a=!0,E()},e.bandwidth=function(){return f},e.step=function(){return s},e.round=function(I){return arguments.length?(a=!!I,E()):a},e.padding=function(I){return arguments.length?(p=Math.min(1,_=+I),E()):p},e.paddingInner=function(I){return arguments.length?(p=Math.min(1,I),E()):p},e.paddingOuter=function(I){return arguments.length?(_=+I,E()):_},e.align=function(I){return arguments.length?(S=Math.max(0,Math.min(1,I)),E()):S},e.copy=function(){return hA(t(),[r,i]).round(a).paddingInner(p).paddingOuter(_).align(S)},pd.apply(E(),arguments)}function Mme(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Mme(t())},e}function S2(){return Mme(hA.apply(null,arguments).paddingInner(1))}function Tq(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Dme(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function LO(){}var dA=.7,YI=1/dA,zw="\\s*([+-]?\\d+)\\s*",pA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ig="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ett=/^#([0-9a-f]{3,8})$/,Att=new RegExp(`^rgb\\(${zw},${zw},${zw}\\)$`),Ott=new RegExp(`^rgb\\(${ig},${ig},${ig}\\)$`),Ctt=new RegExp(`^rgba\\(${zw},${zw},${zw},${pA}\\)$`),Mtt=new RegExp(`^rgba\\(${ig},${ig},${ig},${pA}\\)$`),Dtt=new RegExp(`^hsl\\(${pA},${ig},${ig}\\)$`),Itt=new RegExp(`^hsla\\(${pA},${ig},${ig},${pA}\\)$`),Dne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tq(LO,mA,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ine,formatHex:Ine,formatHex8:Ptt,formatHsl:Rtt,formatRgb:Pne,toString:Pne});function Ine(){return this.rgb().formatHex()}function Ptt(){return this.rgb().formatHex8()}function Rtt(){return Ime(this).formatHsl()}function Pne(){return this.rgb().formatRgb()}function mA(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ett.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Rne(t):n===3?new Kc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?VM(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?VM(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Att.exec(e))?new Kc(t[1],t[2],t[3],1):(t=Ott.exec(e))?new Kc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ctt.exec(e))?VM(t[1],t[2],t[3],t[4]):(t=Mtt.exec(e))?VM(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Dtt.exec(e))?zne(t[1],t[2]/100,t[3]/100,1):(t=Itt.exec(e))?zne(t[1],t[2]/100,t[3]/100,t[4]):Dne.hasOwnProperty(e)?Rne(Dne[e]):e==="transparent"?new Kc(NaN,NaN,NaN,0):null}function Rne(e){return new Kc(e>>16&255,e>>8&255,e&255,1)}function VM(e,t,n,r){return r<=0&&(e=t=n=NaN),new Kc(e,t,n,r)}function ktt(e){return e instanceof LO||(e=mA(e)),e?(e=e.rgb(),new Kc(e.r,e.g,e.b,e.opacity)):new Kc}function V6(e,t,n,r){return arguments.length===1?ktt(e):new Kc(e,t,n,r??1)}function Kc(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Tq(Kc,V6,Dme(LO,{brighter(e){return e=e==null?YI:Math.pow(YI,e),new Kc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dA:Math.pow(dA,e),new Kc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Kc(sx(this.r),sx(this.g),sx(this.b),WI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kne,formatHex:kne,formatHex8:Ltt,formatRgb:Lne,toString:Lne}));function kne(){return`#${Wb(this.r)}${Wb(this.g)}${Wb(this.b)}`}function Ltt(){return`#${Wb(this.r)}${Wb(this.g)}${Wb(this.b)}${Wb((isNaN(this.opacity)?1:this.opacity)*255)}`}function Lne(){const e=WI(this.opacity);return`${e===1?"rgb(":"rgba("}${sx(this.r)}, ${sx(this.g)}, ${sx(this.b)}${e===1?")":`, ${e})`}`}function WI(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sx(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wb(e){return e=sx(e),(e<16?"0":"")+e.toString(16)}function zne(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mp(e,t,n,r)}function Ime(e){if(e instanceof mp)return new mp(e.h,e.s,e.l,e.opacity);if(e instanceof LO||(e=mA(e)),!e)return new mp;if(e instanceof mp)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),f=NaN,a=s-i,p=(s+i)/2;return a?(t===s?f=(n-r)/a+(n<r)*6:n===s?f=(r-t)/a+2:f=(t-n)/a+4,a/=p<.5?s+i:2-s-i,f*=60):a=p>0&&p<1?0:f,new mp(f,a,p,e.opacity)}function ztt(e,t,n,r){return arguments.length===1?Ime(e):new mp(e,t,n,r??1)}function mp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Tq(mp,ztt,Dme(LO,{brighter(e){return e=e==null?YI:Math.pow(YI,e),new mp(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dA:Math.pow(dA,e),new mp(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Kc(R5(e>=240?e-240:e+120,i,r),R5(e,i,r),R5(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new mp(Fne(this.h),qM(this.s),qM(this.l),WI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=WI(this.opacity);return`${e===1?"hsl(":"hsla("}${Fne(this.h)}, ${qM(this.s)*100}%, ${qM(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Fne(e){return e=(e||0)%360,e<0?e+360:e}function qM(e){return Math.max(0,Math.min(1,e||0))}function R5(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Eq=e=>()=>e;function Ftt(e,t){return function(n){return e+n*t}}function Ntt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Btt(e){return(e=+e)==1?Pme:function(t,n){return n-t?Ntt(t,n,e):Eq(isNaN(t)?n:t)}}function Pme(e,t){var n=t-e;return n?Ftt(e,n):Eq(isNaN(e)?t:e)}const Nne=(function e(t){var n=Btt(t);function r(i,s){var f=n((i=V6(i)).r,(s=V6(s)).r),a=n(i.g,s.g),p=n(i.b,s.b),_=Pme(i.opacity,s.opacity);return function(S){return i.r=f(S),i.g=a(S),i.b=p(S),i.opacity=_(S),i+""}}return r.gamma=e,r})(1);function jtt(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Utt(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $tt(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),f;for(f=0;f<r;++f)i[f]=dT(e[f],t[f]);for(;f<n;++f)s[f]=t[f];return function(a){for(f=0;f<r;++f)s[f]=i[f](a);return s}}function Vtt(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function XI(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function qtt(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=dT(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var q6=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,k5=new RegExp(q6.source,"g");function Htt(e){return function(){return e}}function Gtt(e){return function(t){return e(t)+""}}function Ytt(e,t){var n=q6.lastIndex=k5.lastIndex=0,r,i,s,f=-1,a=[],p=[];for(e=e+"",t=t+"";(r=q6.exec(e))&&(i=k5.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[f]?a[f]+=s:a[++f]=s),(r=r[0])===(i=i[0])?a[f]?a[f]+=i:a[++f]=i:(a[++f]=null,p.push({i:f,x:XI(r,i)})),n=k5.lastIndex;return n<t.length&&(s=t.slice(n),a[f]?a[f]+=s:a[++f]=s),a.length<2?p[0]?Gtt(p[0].x):Htt(t):(t=p.length,function(_){for(var S=0,E;S<t;++S)a[(E=p[S]).i]=E.x(_);return a.join("")})}function dT(e,t){var n=typeof t,r;return t==null||n==="boolean"?Eq(t):(n==="number"?XI:n==="string"?(r=mA(t))?(t=r,Nne):Ytt:t instanceof mA?Nne:t instanceof Date?Vtt:Utt(t)?jtt:Array.isArray(t)?$tt:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?qtt:XI)(e,t)}function Aq(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Wtt(e,t){t===void 0&&(t=e,e=dT);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(f){var a=Math.max(0,Math.min(r-1,Math.floor(f*=r)));return s[a](f-a)}}function Xtt(e){return function(){return e}}function ZI(e){return+e}var Bne=[0,1];function gc(e){return e}function H6(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Xtt(isNaN(t)?NaN:.5)}function Ztt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Ktt(e,t,n){var r=e[0],i=e[1],s=t[0],f=t[1];return i<r?(r=H6(i,r),s=n(f,s)):(r=H6(r,i),s=n(s,f)),function(a){return s(r(a))}}function Qtt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),f=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++f<r;)i[f]=H6(e[f],e[f+1]),s[f]=n(t[f],t[f+1]);return function(a){var p=kO(e,a,1,r)-1;return s[p](i[p](a))}}function zO(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function dk(){var e=Bne,t=Bne,n=dT,r,i,s,f=gc,a,p,_;function S(){var I=Math.min(e.length,t.length);return f!==gc&&(f=Ztt(e[0],e[I-1])),a=I>2?Qtt:Ktt,p=_=null,E}function E(I){return I==null||isNaN(I=+I)?s:(p||(p=a(e.map(r),t,n)))(r(f(I)))}return E.invert=function(I){return f(i((_||(_=a(t,e.map(r),XI)))(I)))},E.domain=function(I){return arguments.length?(e=Array.from(I,ZI),S()):e.slice()},E.range=function(I){return arguments.length?(t=Array.from(I),S()):t.slice()},E.rangeRound=function(I){return t=Array.from(I),n=Aq,S()},E.clamp=function(I){return arguments.length?(f=I?!0:gc,S()):f!==gc},E.interpolate=function(I){return arguments.length?(n=I,S()):n},E.unknown=function(I){return arguments.length?(s=I,E):s},function(I,z){return r=I,i=z,S()}}function Oq(){return dk()(gc,gc)}function Jtt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function KI(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function bS(e){return e=KI(Math.abs(e)),e?e[1]:NaN}function ent(e,t){return function(n,r){for(var i=n.length,s=[],f=0,a=e[0],p=0;i>0&&a>0&&(p+a+1>r&&(a=Math.max(1,r-p)),s.push(n.substring(i-=a,i+a)),!((p+=a+1)>r));)a=e[f=(f+1)%e.length];return s.reverse().join(t)}}function tnt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var nnt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gA(e){if(!(t=nnt.exec(e)))throw new Error("invalid format: "+e);var t;return new Cq({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}gA.prototype=Cq.prototype;function Cq(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Cq.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rnt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var QI;function int(e,t){var n=KI(e,t);if(!n)return QI=void 0,e.toPrecision(t);var r=n[0],i=n[1],s=i-(QI=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,f=r.length;return s===f?r:s>f?r+new Array(s-f+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+KI(e,Math.max(0,t+s-1))[0]}function jne(e,t){var n=KI(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Une={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Jtt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>jne(e*100,t),r:jne,s:int,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function $ne(e){return e}var Vne=Array.prototype.map,qne=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ant(e){var t=e.grouping===void 0||e.thousands===void 0?$ne:ent(Vne.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?$ne:tnt(Vne.call(e.numerals,String)),f=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",p=e.nan===void 0?"NaN":e.nan+"";function _(E,I){E=gA(E);var z=E.fill,F=E.align,U=E.sign,k=E.symbol,V=E.zero,K=E.width,J=E.comma,ie=E.precision,Q=E.trim,W=E.type;W==="n"?(J=!0,W="g"):Une[W]||(ie===void 0&&(ie=12),Q=!0,W="g"),(V||z==="0"&&F==="=")&&(V=!0,z="0",F="=");var te=(I&&I.prefix!==void 0?I.prefix:"")+(k==="$"?n:k==="#"&&/[boxX]/.test(W)?"0"+W.toLowerCase():""),X=(k==="$"?r:/[%p]/.test(W)?f:"")+(I&&I.suffix!==void 0?I.suffix:""),ae=Une[W],le=/[defgprs%]/.test(W);ie=ie===void 0?6:/[gprs]/.test(W)?Math.max(1,Math.min(21,ie)):Math.max(0,Math.min(20,ie));function ge(ye){var De=te,He=X,Be,Ee,Ne;if(W==="c")He=ae(ye)+He,ye="";else{ye=+ye;var at=ye<0||1/ye<0;if(ye=isNaN(ye)?p:ae(Math.abs(ye),ie),Q&&(ye=rnt(ye)),at&&+ye==0&&U!=="+"&&(at=!1),De=(at?U==="("?U:a:U==="-"||U==="("?"":U)+De,He=(W==="s"&&!isNaN(ye)&&QI!==void 0?qne[8+QI/3]:"")+He+(at&&U==="("?")":""),le){for(Be=-1,Ee=ye.length;++Be<Ee;)if(Ne=ye.charCodeAt(Be),48>Ne||Ne>57){He=(Ne===46?i+ye.slice(Be+1):ye.slice(Be))+He,ye=ye.slice(0,Be);break}}}J&&!V&&(ye=t(ye,1/0));var yt=De.length+ye.length+He.length,je=yt<K?new Array(K-yt+1).join(z):"";switch(J&&V&&(ye=t(je+ye,je.length?K-He.length:1/0),je=""),F){case"<":ye=De+ye+He+je;break;case"=":ye=De+je+ye+He;break;case"^":ye=je.slice(0,yt=je.length>>1)+De+ye+He+je.slice(yt);break;default:ye=je+De+ye+He;break}return s(ye)}return ge.toString=function(){return E+""},ge}function S(E,I){var z=Math.max(-8,Math.min(8,Math.floor(bS(I)/3)))*3,F=Math.pow(10,-z),U=_((E=gA(E),E.type="f",E),{suffix:qne[8+z/3]});return function(k){return U(F*k)}}return{format:_,formatPrefix:S}}var HM,Mq,Rme;ont({thousands:",",grouping:[3],currency:["$",""]});function ont(e){return HM=ant(e),Mq=HM.format,Rme=HM.formatPrefix,HM}function snt(e){return Math.max(0,-bS(Math.abs(e)))}function lnt(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bS(t)/3)))*3-bS(Math.abs(e)))}function unt(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bS(t)-bS(e))+1}function kme(e,t,n,r){var i=U6(e,t,n),s;switch(r=gA(r??",f"),r.type){case"s":{var f=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=lnt(i,f))&&(r.precision=s),Rme(r,f)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=unt(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=snt(i))&&(r.precision=s-(r.type==="%")*2);break}}return Mq(r)}function h0(e){var t=e.domain;return e.ticks=function(n){var r=t();return B6(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return kme(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,f=r[i],a=r[s],p,_,S=10;for(a<f&&(_=f,f=a,a=_,_=i,i=s,s=_);S-- >0;){if(_=j6(f,a,n),_===p)return r[i]=f,r[s]=a,t(r);if(_>0)f=Math.floor(f/_)*_,a=Math.ceil(a/_)*_;else if(_<0)f=Math.ceil(f*_)/_,a=Math.floor(a*_)/_;else break;p=_}return e},e}function JI(){var e=Oq();return e.copy=function(){return zO(e,JI())},pd.apply(e,arguments),h0(e)}function Lme(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,ZI),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Lme(e).unknown(t)},e=arguments.length?Array.from(e,ZI):[0,1],h0(n)}function zme(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],f;return s<i&&(f=n,n=r,r=f,f=i,i=s,s=f),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Hne(e){return Math.log(e)}function Gne(e){return Math.exp(e)}function cnt(e){return-Math.log(-e)}function fnt(e){return-Math.exp(-e)}function hnt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dnt(e){return e===10?hnt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function pnt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Yne(e){return(t,n)=>-e(-t,n)}function Dq(e){const t=e(Hne,Gne),n=t.domain;let r=10,i,s;function f(){return i=pnt(r),s=dnt(r),n()[0]<0?(i=Yne(i),s=Yne(s),e(cnt,fnt)):e(Hne,Gne),t}return t.base=function(a){return arguments.length?(r=+a,f()):r},t.domain=function(a){return arguments.length?(n(a),f()):n()},t.ticks=a=>{const p=n();let _=p[0],S=p[p.length-1];const E=S<_;E&&([_,S]=[S,_]);let I=i(_),z=i(S),F,U;const k=a==null?10:+a;let V=[];if(!(r%1)&&z-I<k){if(I=Math.floor(I),z=Math.ceil(z),_>0){for(;I<=z;++I)for(F=1;F<r;++F)if(U=I<0?F/s(-I):F*s(I),!(U<_)){if(U>S)break;V.push(U)}}else for(;I<=z;++I)for(F=r-1;F>=1;--F)if(U=I>0?F/s(-I):F*s(I),!(U<_)){if(U>S)break;V.push(U)}V.length*2<k&&(V=B6(_,S,k))}else V=B6(I,z,Math.min(z-I,k)).map(s);return E?V.reverse():V},t.tickFormat=(a,p)=>{if(a==null&&(a=10),p==null&&(p=r===10?"s":","),typeof p!="function"&&(!(r%1)&&(p=gA(p)).precision==null&&(p.trim=!0),p=Mq(p)),a===1/0)return p;const _=Math.max(1,r*a/t.ticks().length);return S=>{let E=S/s(Math.round(i(S)));return E*r<r-.5&&(E*=r),E<=_?p(S):""}},t.nice=()=>n(zme(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function Fme(){const e=Dq(dk()).domain([1,10]);return e.copy=()=>zO(e,Fme()).base(e.base()),pd.apply(e,arguments),e}function Wne(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Xne(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Iq(e){var t=1,n=e(Wne(t),Xne(t));return n.constant=function(r){return arguments.length?e(Wne(t=+r),Xne(t)):t},h0(n)}function Nme(){var e=Iq(dk());return e.copy=function(){return zO(e,Nme()).constant(e.constant())},pd.apply(e,arguments)}function Zne(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function mnt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function gnt(e){return e<0?-e*e:e*e}function Pq(e){var t=e(gc,gc),n=1;function r(){return n===1?e(gc,gc):n===.5?e(mnt,gnt):e(Zne(n),Zne(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},h0(t)}function Rq(){var e=Pq(dk());return e.copy=function(){return zO(e,Rq()).exponent(e.exponent())},pd.apply(e,arguments),e}function ynt(){return Rq.apply(null,arguments).exponent(.5)}function Kne(e){return Math.sign(e)*e*e}function _nt(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Bme(){var e=Oq(),t=[0,1],n=!1,r;function i(s){var f=_nt(e(s));return isNaN(f)?r:n?Math.round(f):f}return i.invert=function(s){return e.invert(Kne(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,ZI)).map(Kne)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Bme(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},pd.apply(i,arguments),h0(i)}function jme(){var e=[],t=[],n=[],r;function i(){var f=0,a=Math.max(1,t.length);for(n=new Array(a-1);++f<a;)n[f-1]=Stt(e,f/a);return s}function s(f){return f==null||isNaN(f=+f)?r:t[kO(n,f)]}return s.invertExtent=function(f){var a=t.indexOf(f);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(f){if(!arguments.length)return e.slice();e=[];for(let a of f)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Yv),i()},s.range=function(f){return arguments.length?(t=Array.from(f),i()):t.slice()},s.unknown=function(f){return arguments.length?(r=f,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return jme().domain(e).range(t).unknown(r)},pd.apply(s,arguments)}function Ume(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function f(p){return p!=null&&p<=p?i[kO(r,p,0,n)]:s}function a(){var p=-1;for(r=new Array(n);++p<n;)r[p]=((p+1)*t-(p-n)*e)/(n+1);return f}return f.domain=function(p){return arguments.length?([e,t]=p,e=+e,t=+t,a()):[e,t]},f.range=function(p){return arguments.length?(n=(i=Array.from(p)).length-1,a()):i.slice()},f.invertExtent=function(p){var _=i.indexOf(p);return _<0?[NaN,NaN]:_<1?[e,r[0]]:_>=n?[r[n-1],t]:[r[_-1],r[_]]},f.unknown=function(p){return arguments.length&&(s=p),f},f.thresholds=function(){return r.slice()},f.copy=function(){return Ume().domain([e,t]).range(i).unknown(s)},pd.apply(h0(f),arguments)}function $me(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[kO(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var f=t.indexOf(s);return[e[f-1],e[f]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return $me().domain(e).range(t).unknown(n)},pd.apply(i,arguments)}const L5=new Date,z5=new Date;function xl(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const f=i(s),a=i.ceil(s);return s-f<a-s?f:a},i.offset=(s,f)=>(t(s=new Date(+s),f==null?1:Math.floor(f)),s),i.range=(s,f,a)=>{const p=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<f)||!(a>0))return p;let _;do p.push(_=new Date(+s)),t(s,a),e(s);while(_<s&&s<f);return p},i.filter=s=>xl(f=>{if(f>=f)for(;e(f),!s(f);)f.setTime(f-1)},(f,a)=>{if(f>=f)if(a<0)for(;++a<=0;)for(;t(f,-1),!s(f););else for(;--a>=0;)for(;t(f,1),!s(f););}),n&&(i.count=(s,f)=>(L5.setTime(+s),z5.setTime(+f),e(L5),e(z5),Math.floor(n(L5,z5))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?f=>r(f)%s===0:f=>i.count(0,f)%s===0):i)),i}const eP=xl(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);eP.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?xl(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):eP);eP.range;const Ry=1e3,Kh=Ry*60,ky=Kh*60,a_=ky*24,kq=a_*7,Qne=a_*30,F5=a_*365,Xb=xl(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ry)},(e,t)=>(t-e)/Ry,e=>e.getUTCSeconds());Xb.range;const Lq=xl(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ry)},(e,t)=>{e.setTime(+e+t*Kh)},(e,t)=>(t-e)/Kh,e=>e.getMinutes());Lq.range;const zq=xl(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Kh)},(e,t)=>(t-e)/Kh,e=>e.getUTCMinutes());zq.range;const Fq=xl(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ry-e.getMinutes()*Kh)},(e,t)=>{e.setTime(+e+t*ky)},(e,t)=>(t-e)/ky,e=>e.getHours());Fq.range;const Nq=xl(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ky)},(e,t)=>(t-e)/ky,e=>e.getUTCHours());Nq.range;const FO=xl(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kh)/a_,e=>e.getDate()-1);FO.range;const pk=xl(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/a_,e=>e.getUTCDate()-1);pk.range;const Vme=xl(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/a_,e=>Math.floor(e/a_));Vme.range;function Hx(e){return xl(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Kh)/kq)}const mk=Hx(0),tP=Hx(1),vnt=Hx(2),bnt=Hx(3),xS=Hx(4),xnt=Hx(5),wnt=Hx(6);mk.range;tP.range;vnt.range;bnt.range;xS.range;xnt.range;wnt.range;function Gx(e){return xl(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/kq)}const gk=Gx(0),nP=Gx(1),Snt=Gx(2),Tnt=Gx(3),wS=Gx(4),Ent=Gx(5),Ant=Gx(6);gk.range;nP.range;Snt.range;Tnt.range;wS.range;Ent.range;Ant.range;const Bq=xl(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Bq.range;const jq=xl(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());jq.range;const o_=xl(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());o_.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xl(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});o_.range;const s_=xl(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());s_.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xl(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});s_.range;function qme(e,t,n,r,i,s){const f=[[Xb,1,Ry],[Xb,5,5*Ry],[Xb,15,15*Ry],[Xb,30,30*Ry],[s,1,Kh],[s,5,5*Kh],[s,15,15*Kh],[s,30,30*Kh],[i,1,ky],[i,3,3*ky],[i,6,6*ky],[i,12,12*ky],[r,1,a_],[r,2,2*a_],[n,1,kq],[t,1,Qne],[t,3,3*Qne],[e,1,F5]];function a(_,S,E){const I=S<_;I&&([_,S]=[S,_]);const z=E&&typeof E.range=="function"?E:p(_,S,E),F=z?z.range(_,+S+1):[];return I?F.reverse():F}function p(_,S,E){const I=Math.abs(S-_)/E,z=wq(([,,k])=>k).right(f,I);if(z===f.length)return e.every(U6(_/F5,S/F5,E));if(z===0)return eP.every(Math.max(U6(_,S,E),1));const[F,U]=f[I/f[z-1][2]<f[z][2]/I?z-1:z];return F.every(U)}return[a,p]}const[Ont,Cnt]=qme(s_,jq,gk,Vme,Nq,zq),[Mnt,Dnt]=qme(o_,Bq,mk,FO,Fq,Lq);function N5(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function B5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function qE(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Int(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,f=e.shortDays,a=e.months,p=e.shortMonths,_=HE(i),S=GE(i),E=HE(s),I=GE(s),z=HE(f),F=GE(f),U=HE(a),k=GE(a),V=HE(p),K=GE(p),J={a:Ne,A:at,b:yt,B:je,c:null,d:ire,e:ire,f:ert,g:crt,G:hrt,H:Knt,I:Qnt,j:Jnt,L:Hme,m:trt,M:nrt,p:Ke,q:it,Q:sre,s:lre,S:rrt,u:irt,U:art,V:ort,w:srt,W:lrt,x:null,X:null,y:urt,Y:frt,Z:drt,"%":ore},ie={a:Pe,A:jt,b:sn,B:dn,c:null,d:are,e:are,f:yrt,g:Ort,G:Mrt,H:prt,I:mrt,j:grt,L:Yme,m:_rt,M:vrt,p:Sn,q:Ut,Q:sre,s:lre,S:brt,u:xrt,U:wrt,V:Srt,w:Trt,W:Ert,x:null,X:null,y:Art,Y:Crt,Z:Drt,"%":ore},Q={a:le,A:ge,b:ye,B:De,c:He,d:nre,e:nre,f:Ynt,g:tre,G:ere,H:rre,I:rre,j:Vnt,L:Gnt,m:$nt,M:qnt,p:ae,q:Unt,Q:Xnt,s:Znt,S:Hnt,u:znt,U:Fnt,V:Nnt,w:Lnt,W:Bnt,x:Be,X:Ee,y:tre,Y:ere,Z:jnt,"%":Wnt};J.x=W(n,J),J.X=W(r,J),J.c=W(t,J),ie.x=W(n,ie),ie.X=W(r,ie),ie.c=W(t,ie);function W(xe,Ye){return function(ct){var mt=[],Ct=-1,Yt=0,gn=xe.length,En,or,sr;for(ct instanceof Date||(ct=new Date(+ct));++Ct<gn;)xe.charCodeAt(Ct)===37&&(mt.push(xe.slice(Yt,Ct)),(or=Jne[En=xe.charAt(++Ct)])!=null?En=xe.charAt(++Ct):or=En==="e"?" ":"0",(sr=Ye[En])&&(En=sr(ct,or)),mt.push(En),Yt=Ct+1);return mt.push(xe.slice(Yt,Ct)),mt.join("")}}function te(xe,Ye){return function(ct){var mt=qE(1900,void 0,1),Ct=X(mt,xe,ct+="",0),Yt,gn;if(Ct!=ct.length)return null;if("Q"in mt)return new Date(mt.Q);if("s"in mt)return new Date(mt.s*1e3+("L"in mt?mt.L:0));if(Ye&&!("Z"in mt)&&(mt.Z=0),"p"in mt&&(mt.H=mt.H%12+mt.p*12),mt.m===void 0&&(mt.m="q"in mt?mt.q:0),"V"in mt){if(mt.V<1||mt.V>53)return null;"w"in mt||(mt.w=1),"Z"in mt?(Yt=B5(qE(mt.y,0,1)),gn=Yt.getUTCDay(),Yt=gn>4||gn===0?nP.ceil(Yt):nP(Yt),Yt=pk.offset(Yt,(mt.V-1)*7),mt.y=Yt.getUTCFullYear(),mt.m=Yt.getUTCMonth(),mt.d=Yt.getUTCDate()+(mt.w+6)%7):(Yt=N5(qE(mt.y,0,1)),gn=Yt.getDay(),Yt=gn>4||gn===0?tP.ceil(Yt):tP(Yt),Yt=FO.offset(Yt,(mt.V-1)*7),mt.y=Yt.getFullYear(),mt.m=Yt.getMonth(),mt.d=Yt.getDate()+(mt.w+6)%7)}else("W"in mt||"U"in mt)&&("w"in mt||(mt.w="u"in mt?mt.u%7:"W"in mt?1:0),gn="Z"in mt?B5(qE(mt.y,0,1)).getUTCDay():N5(qE(mt.y,0,1)).getDay(),mt.m=0,mt.d="W"in mt?(mt.w+6)%7+mt.W*7-(gn+5)%7:mt.w+mt.U*7-(gn+6)%7);return"Z"in mt?(mt.H+=mt.Z/100|0,mt.M+=mt.Z%100,B5(mt)):N5(mt)}}function X(xe,Ye,ct,mt){for(var Ct=0,Yt=Ye.length,gn=ct.length,En,or;Ct<Yt;){if(mt>=gn)return-1;if(En=Ye.charCodeAt(Ct++),En===37){if(En=Ye.charAt(Ct++),or=Q[En in Jne?Ye.charAt(Ct++):En],!or||(mt=or(xe,ct,mt))<0)return-1}else if(En!=ct.charCodeAt(mt++))return-1}return mt}function ae(xe,Ye,ct){var mt=_.exec(Ye.slice(ct));return mt?(xe.p=S.get(mt[0].toLowerCase()),ct+mt[0].length):-1}function le(xe,Ye,ct){var mt=z.exec(Ye.slice(ct));return mt?(xe.w=F.get(mt[0].toLowerCase()),ct+mt[0].length):-1}function ge(xe,Ye,ct){var mt=E.exec(Ye.slice(ct));return mt?(xe.w=I.get(mt[0].toLowerCase()),ct+mt[0].length):-1}function ye(xe,Ye,ct){var mt=V.exec(Ye.slice(ct));return mt?(xe.m=K.get(mt[0].toLowerCase()),ct+mt[0].length):-1}function De(xe,Ye,ct){var mt=U.exec(Ye.slice(ct));return mt?(xe.m=k.get(mt[0].toLowerCase()),ct+mt[0].length):-1}function He(xe,Ye,ct){return X(xe,t,Ye,ct)}function Be(xe,Ye,ct){return X(xe,n,Ye,ct)}function Ee(xe,Ye,ct){return X(xe,r,Ye,ct)}function Ne(xe){return f[xe.getDay()]}function at(xe){return s[xe.getDay()]}function yt(xe){return p[xe.getMonth()]}function je(xe){return a[xe.getMonth()]}function Ke(xe){return i[+(xe.getHours()>=12)]}function it(xe){return 1+~~(xe.getMonth()/3)}function Pe(xe){return f[xe.getUTCDay()]}function jt(xe){return s[xe.getUTCDay()]}function sn(xe){return p[xe.getUTCMonth()]}function dn(xe){return a[xe.getUTCMonth()]}function Sn(xe){return i[+(xe.getUTCHours()>=12)]}function Ut(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var Ye=W(xe+="",J);return Ye.toString=function(){return xe},Ye},parse:function(xe){var Ye=te(xe+="",!1);return Ye.toString=function(){return xe},Ye},utcFormat:function(xe){var Ye=W(xe+="",ie);return Ye.toString=function(){return xe},Ye},utcParse:function(xe){var Ye=te(xe+="",!0);return Ye.toString=function(){return xe},Ye}}}var Jne={"-":"",_:" ",0:"0"},Bl=/^\s*\d+/,Pnt=/^%/,Rnt=/[\\^$*+?|[\]().{}]/g;function Ta(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function knt(e){return e.replace(Rnt,"\\$&")}function HE(e){return new RegExp("^(?:"+e.map(knt).join("|")+")","i")}function GE(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Lnt(e,t,n){var r=Bl.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function znt(e,t,n){var r=Bl.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Fnt(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Nnt(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Bnt(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ere(e,t,n){var r=Bl.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function tre(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function jnt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Unt(e,t,n){var r=Bl.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function $nt(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function nre(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Vnt(e,t,n){var r=Bl.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function rre(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function qnt(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Hnt(e,t,n){var r=Bl.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Gnt(e,t,n){var r=Bl.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Ynt(e,t,n){var r=Bl.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Wnt(e,t,n){var r=Pnt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Xnt(e,t,n){var r=Bl.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Znt(e,t,n){var r=Bl.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function ire(e,t){return Ta(e.getDate(),t,2)}function Knt(e,t){return Ta(e.getHours(),t,2)}function Qnt(e,t){return Ta(e.getHours()%12||12,t,2)}function Jnt(e,t){return Ta(1+FO.count(o_(e),e),t,3)}function Hme(e,t){return Ta(e.getMilliseconds(),t,3)}function ert(e,t){return Hme(e,t)+"000"}function trt(e,t){return Ta(e.getMonth()+1,t,2)}function nrt(e,t){return Ta(e.getMinutes(),t,2)}function rrt(e,t){return Ta(e.getSeconds(),t,2)}function irt(e){var t=e.getDay();return t===0?7:t}function art(e,t){return Ta(mk.count(o_(e)-1,e),t,2)}function Gme(e){var t=e.getDay();return t>=4||t===0?xS(e):xS.ceil(e)}function ort(e,t){return e=Gme(e),Ta(xS.count(o_(e),e)+(o_(e).getDay()===4),t,2)}function srt(e){return e.getDay()}function lrt(e,t){return Ta(tP.count(o_(e)-1,e),t,2)}function urt(e,t){return Ta(e.getFullYear()%100,t,2)}function crt(e,t){return e=Gme(e),Ta(e.getFullYear()%100,t,2)}function frt(e,t){return Ta(e.getFullYear()%1e4,t,4)}function hrt(e,t){var n=e.getDay();return e=n>=4||n===0?xS(e):xS.ceil(e),Ta(e.getFullYear()%1e4,t,4)}function drt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ta(t/60|0,"0",2)+Ta(t%60,"0",2)}function are(e,t){return Ta(e.getUTCDate(),t,2)}function prt(e,t){return Ta(e.getUTCHours(),t,2)}function mrt(e,t){return Ta(e.getUTCHours()%12||12,t,2)}function grt(e,t){return Ta(1+pk.count(s_(e),e),t,3)}function Yme(e,t){return Ta(e.getUTCMilliseconds(),t,3)}function yrt(e,t){return Yme(e,t)+"000"}function _rt(e,t){return Ta(e.getUTCMonth()+1,t,2)}function vrt(e,t){return Ta(e.getUTCMinutes(),t,2)}function brt(e,t){return Ta(e.getUTCSeconds(),t,2)}function xrt(e){var t=e.getUTCDay();return t===0?7:t}function wrt(e,t){return Ta(gk.count(s_(e)-1,e),t,2)}function Wme(e){var t=e.getUTCDay();return t>=4||t===0?wS(e):wS.ceil(e)}function Srt(e,t){return e=Wme(e),Ta(wS.count(s_(e),e)+(s_(e).getUTCDay()===4),t,2)}function Trt(e){return e.getUTCDay()}function Ert(e,t){return Ta(nP.count(s_(e)-1,e),t,2)}function Art(e,t){return Ta(e.getUTCFullYear()%100,t,2)}function Ort(e,t){return e=Wme(e),Ta(e.getUTCFullYear()%100,t,2)}function Crt(e,t){return Ta(e.getUTCFullYear()%1e4,t,4)}function Mrt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?wS(e):wS.ceil(e),Ta(e.getUTCFullYear()%1e4,t,4)}function Drt(){return"+0000"}function ore(){return"%"}function sre(e){return+e}function lre(e){return Math.floor(+e/1e3)}var uw,Xme,Zme;Irt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Irt(e){return uw=Int(e),Xme=uw.format,uw.parse,Zme=uw.utcFormat,uw.utcParse,uw}function Prt(e){return new Date(e)}function Rrt(e){return e instanceof Date?+e:+new Date(+e)}function Uq(e,t,n,r,i,s,f,a,p,_){var S=Oq(),E=S.invert,I=S.domain,z=_(".%L"),F=_(":%S"),U=_("%I:%M"),k=_("%I %p"),V=_("%a %d"),K=_("%b %d"),J=_("%B"),ie=_("%Y");function Q(W){return(p(W)<W?z:a(W)<W?F:f(W)<W?U:s(W)<W?k:r(W)<W?i(W)<W?V:K:n(W)<W?J:ie)(W)}return S.invert=function(W){return new Date(E(W))},S.domain=function(W){return arguments.length?I(Array.from(W,Rrt)):I().map(Prt)},S.ticks=function(W){var te=I();return e(te[0],te[te.length-1],W??10)},S.tickFormat=function(W,te){return te==null?Q:_(te)},S.nice=function(W){var te=I();return(!W||typeof W.range!="function")&&(W=t(te[0],te[te.length-1],W??10)),W?I(zme(te,W)):S},S.copy=function(){return zO(S,Uq(e,t,n,r,i,s,f,a,p,_))},S}function krt(){return pd.apply(Uq(Mnt,Dnt,o_,Bq,mk,FO,Fq,Lq,Xb,Xme).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Lrt(){return pd.apply(Uq(Ont,Cnt,s_,jq,gk,pk,Nq,zq,Xb,Zme).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yk(){var e=0,t=1,n,r,i,s,f=gc,a=!1,p;function _(E){return E==null||isNaN(E=+E)?p:f(i===0?.5:(E=(s(E)-n)*i,a?Math.max(0,Math.min(1,E)):E))}_.domain=function(E){return arguments.length?([e,t]=E,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),_):[e,t]},_.clamp=function(E){return arguments.length?(a=!!E,_):a},_.interpolator=function(E){return arguments.length?(f=E,_):f};function S(E){return function(I){var z,F;return arguments.length?([z,F]=I,f=E(z,F),_):[f(0),f(1)]}}return _.range=S(dT),_.rangeRound=S(Aq),_.unknown=function(E){return arguments.length?(p=E,_):p},function(E){return s=E,n=E(e),r=E(t),i=n===r?0:1/(r-n),_}}function d0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Kme(){var e=h0(yk()(gc));return e.copy=function(){return d0(e,Kme())},v_.apply(e,arguments)}function Qme(){var e=Dq(yk()).domain([1,10]);return e.copy=function(){return d0(e,Qme()).base(e.base())},v_.apply(e,arguments)}function Jme(){var e=Iq(yk());return e.copy=function(){return d0(e,Jme()).constant(e.constant())},v_.apply(e,arguments)}function $q(){var e=Pq(yk());return e.copy=function(){return d0(e,$q()).exponent(e.exponent())},v_.apply(e,arguments)}function zrt(){return $q.apply(null,arguments).exponent(.5)}function ege(){var e=[],t=gc;function n(r){if(r!=null&&!isNaN(r=+r))return t((kO(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Yv),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>wtt(e,s/r))},n.copy=function(){return ege(t).domain(e)},v_.apply(n,arguments)}function _k(){var e=0,t=.5,n=1,r=1,i,s,f,a,p,_=gc,S,E=!1,I;function z(U){return isNaN(U=+U)?I:(U=.5+((U=+S(U))-s)*(r*U<r*s?a:p),_(E?Math.max(0,Math.min(1,U)):U))}z.domain=function(U){return arguments.length?([e,t,n]=U,i=S(e=+e),s=S(t=+t),f=S(n=+n),a=i===s?0:.5/(s-i),p=s===f?0:.5/(f-s),r=s<i?-1:1,z):[e,t,n]},z.clamp=function(U){return arguments.length?(E=!!U,z):E},z.interpolator=function(U){return arguments.length?(_=U,z):_};function F(U){return function(k){var V,K,J;return arguments.length?([V,K,J]=k,_=Wtt(U,[V,K,J]),z):[_(0),_(.5),_(1)]}}return z.range=F(dT),z.rangeRound=F(Aq),z.unknown=function(U){return arguments.length?(I=U,z):I},function(U){return S=U,i=U(e),s=U(t),f=U(n),a=i===s?0:.5/(s-i),p=s===f?0:.5/(f-s),r=s<i?-1:1,z}}function tge(){var e=h0(_k()(gc));return e.copy=function(){return d0(e,tge())},v_.apply(e,arguments)}function nge(){var e=Dq(_k()).domain([.1,1,10]);return e.copy=function(){return d0(e,nge()).base(e.base())},v_.apply(e,arguments)}function rge(){var e=Iq(_k());return e.copy=function(){return d0(e,rge()).constant(e.constant())},v_.apply(e,arguments)}function Vq(){var e=Pq(_k());return e.copy=function(){return d0(e,Vq()).exponent(e.exponent())},v_.apply(e,arguments)}function Frt(){return Vq.apply(null,arguments).exponent(.5)}const ure=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:hA,scaleDiverging:tge,scaleDivergingLog:nge,scaleDivergingPow:Vq,scaleDivergingSqrt:Frt,scaleDivergingSymlog:rge,scaleIdentity:Lme,scaleImplicit:$6,scaleLinear:JI,scaleLog:Fme,scaleOrdinal:Sq,scalePoint:S2,scalePow:Rq,scaleQuantile:jme,scaleQuantize:Ume,scaleRadial:Bme,scaleSequential:Kme,scaleSequentialLog:Qme,scaleSequentialPow:$q,scaleSequentialQuantile:ege,scaleSequentialSqrt:zrt,scaleSequentialSymlog:Jme,scaleSqrt:ynt,scaleSymlog:Nme,scaleThreshold:$me,scaleTime:krt,scaleUtc:Lrt,tickFormat:kme},Symbol.toStringTag,{value:"Module"}));var j5,cre;function ige(){if(cre)return j5;cre=1;var e=uT();function t(n,r,i){for(var s=-1,f=n.length;++s<f;){var a=n[s],p=r(a);if(p!=null&&(_===void 0?p===p&&!e(p):i(p,_)))var _=p,S=a}return S}return j5=t,j5}var U5,fre;function Nrt(){if(fre)return U5;fre=1;function e(t,n){return t>n}return U5=e,U5}var $5,hre;function Brt(){if(hre)return $5;hre=1;var e=ige(),t=Nrt(),n=fT();function r(i){return i&&i.length?e(i,n,t):void 0}return $5=r,$5}var jrt=Brt();const vk=ga(jrt);var V5,dre;function Urt(){if(dre)return V5;dre=1;function e(t,n){return t<n}return V5=e,V5}var q5,pre;function $rt(){if(pre)return q5;pre=1;var e=ige(),t=Urt(),n=fT();function r(i){return i&&i.length?e(i,n,t):void 0}return q5=r,q5}var Vrt=$rt();const bk=ga(Vrt);var H5,mre;function qrt(){if(mre)return H5;mre=1;var e=aq(),t=f0(),n=dme(),r=sf();function i(s,f){var a=r(s)?e:n;return a(s,t(f,3))}return H5=i,H5}var G5,gre;function Hrt(){if(gre)return G5;gre=1;var e=fme(),t=qrt();function n(r,i){return e(t(r,i),1)}return G5=n,G5}var Grt=Hrt();const Yrt=ga(Grt);var Y5,yre;function Wrt(){if(yre)return Y5;yre=1;var e=_q();function t(n,r){return e(n,r)}return Y5=t,Y5}var Xrt=Wrt();const xk=ga(Xrt);var pT=1e9,Zrt={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Hq,Go=!0,ld="[DecimalError] ",lx=ld+"Invalid argument: ",qq=ld+"Exponent out of range: ",mT=Math.floor,Nb=Math.pow,Krt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xf,Ll=1e7,Do=7,age=9007199254740991,rP=mT(age/Do),dr={};dr.absoluteValue=dr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};dr.comparedTo=dr.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};dr.decimalPlaces=dr.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Do;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};dr.dividedBy=dr.div=function(e){return Wy(this,new this.constructor(e))};dr.dividedToIntegerBy=dr.idiv=function(e){var t=this,n=t.constructor;return io(Wy(t,new n(e),0,1),n.precision)};dr.equals=dr.eq=function(e){return!this.cmp(e)};dr.exponent=function(){return Qs(this)};dr.greaterThan=dr.gt=function(e){return this.cmp(e)>0};dr.greaterThanOrEqualTo=dr.gte=function(e){return this.cmp(e)>=0};dr.isInteger=dr.isint=function(){return this.e>this.d.length-2};dr.isNegative=dr.isneg=function(){return this.s<0};dr.isPositive=dr.ispos=function(){return this.s>0};dr.isZero=function(){return this.s===0};dr.lessThan=dr.lt=function(e){return this.cmp(e)<0};dr.lessThanOrEqualTo=dr.lte=function(e){return this.cmp(e)<1};dr.logarithm=dr.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Xf))throw Error(ld+"NaN");if(n.s<1)throw Error(ld+(n.s?"NaN":"-Infinity"));return n.eq(Xf)?new r(0):(Go=!1,t=Wy(yA(n,s),yA(e,s),s),Go=!0,io(t,i))};dr.minus=dr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?lge(t,e):oge(t,(e.s=-e.s,e))};dr.modulo=dr.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(ld+"NaN");return n.s?(Go=!1,t=Wy(n,e,0,1).times(e),Go=!0,n.minus(t)):io(new r(n),i)};dr.naturalExponential=dr.exp=function(){return sge(this)};dr.naturalLogarithm=dr.ln=function(){return yA(this)};dr.negated=dr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};dr.plus=dr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?oge(t,e):lge(t,(e.s=-e.s,e))};dr.precision=dr.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(lx+e);if(t=Qs(i)+1,r=i.d.length-1,n=r*Do+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};dr.squareRoot=dr.sqrt=function(){var e,t,n,r,i,s,f,a=this,p=a.constructor;if(a.s<1){if(!a.s)return new p(0);throw Error(ld+"NaN")}for(e=Qs(a),Go=!1,i=Math.sqrt(+a),i==0||i==1/0?(t=Wm(a.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=mT((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new p(t)):r=new p(i.toString()),n=p.precision,i=f=n+3;;)if(s=r,r=s.plus(Wy(a,s,f+2)).times(.5),Wm(s.d).slice(0,f)===(t=Wm(r.d)).slice(0,f)){if(t=t.slice(f-3,f+1),i==f&&t=="4999"){if(io(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(t!="9999")break;f+=4}return Go=!0,io(r,n)};dr.times=dr.mul=function(e){var t,n,r,i,s,f,a,p,_,S=this,E=S.constructor,I=S.d,z=(e=new E(e)).d;if(!S.s||!e.s)return new E(0);for(e.s*=S.s,n=S.e+e.e,p=I.length,_=z.length,p<_&&(s=I,I=z,z=s,f=p,p=_,_=f),s=[],f=p+_,r=f;r--;)s.push(0);for(r=_;--r>=0;){for(t=0,i=p+r;i>r;)a=s[i]+z[r]*I[i-r-1]+t,s[i--]=a%Ll|0,t=a/Ll|0;s[i]=(s[i]+t)%Ll|0}for(;!s[--f];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,Go?io(e,E.precision):e};dr.toDecimalPlaces=dr.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(fg(e,0,pT),t===void 0?t=r.rounding:fg(t,0,8),io(n,e+Qs(n)+1,t))};dr.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Ox(r,!0):(fg(e,0,pT),t===void 0?t=i.rounding:fg(t,0,8),r=io(new i(r),e+1,t),n=Ox(r,!0,e+1)),n};dr.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?Ox(i):(fg(e,0,pT),t===void 0?t=s.rounding:fg(t,0,8),r=io(new s(i),e+Qs(i)+1,t),n=Ox(r.abs(),!1,e+Qs(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};dr.toInteger=dr.toint=function(){var e=this,t=e.constructor;return io(new t(e),Qs(e)+1,t.rounding)};dr.toNumber=function(){return+this};dr.toPower=dr.pow=function(e){var t,n,r,i,s,f,a=this,p=a.constructor,_=12,S=+(e=new p(e));if(!e.s)return new p(Xf);if(a=new p(a),!a.s){if(e.s<1)throw Error(ld+"Infinity");return a}if(a.eq(Xf))return a;if(r=p.precision,e.eq(Xf))return io(a,r);if(t=e.e,n=e.d.length-1,f=t>=n,s=a.s,f){if((n=S<0?-S:S)<=age){for(i=new p(Xf),t=Math.ceil(r/Do+4),Go=!1;n%2&&(i=i.times(a),vre(i.d,t)),n=mT(n/2),n!==0;)a=a.times(a),vre(a.d,t);return Go=!0,e.s<0?new p(Xf).div(i):io(i,r)}}else if(s<0)throw Error(ld+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,a.s=1,Go=!1,i=e.times(yA(a,r+_)),Go=!0,i=sge(i),i.s=s,i};dr.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Qs(i),r=Ox(i,n<=s.toExpNeg||n>=s.toExpPos)):(fg(e,1,pT),t===void 0?t=s.rounding:fg(t,0,8),i=io(new s(i),e,t),n=Qs(i),r=Ox(i,e<=n||n<=s.toExpNeg,e)),r};dr.toSignificantDigits=dr.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(fg(e,1,pT),t===void 0?t=r.rounding:fg(t,0,8)),io(new r(n),e,t)};dr.toString=dr.valueOf=dr.val=dr.toJSON=dr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Qs(e),n=e.constructor;return Ox(e,t<=n.toExpNeg||t>=n.toExpPos)};function oge(e,t){var n,r,i,s,f,a,p,_,S=e.constructor,E=S.precision;if(!e.s||!t.s)return t.s||(t=new S(e)),Go?io(t,E):t;if(p=e.d,_=t.d,f=e.e,i=t.e,p=p.slice(),s=f-i,s){for(s<0?(r=p,s=-s,a=_.length):(r=_,i=f,a=p.length),f=Math.ceil(E/Do),a=f>a?f+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=p.length,s=_.length,a-s<0&&(s=a,r=_,_=p,p=r),n=0;s;)n=(p[--s]=p[s]+_[s]+n)/Ll|0,p[s]%=Ll;for(n&&(p.unshift(n),++i),a=p.length;p[--a]==0;)p.pop();return t.d=p,t.e=i,Go?io(t,E):t}function fg(e,t,n){if(e!==~~e||e<t||e>n)throw Error(lx+e)}function Wm(e){var t,n,r,i=e.length-1,s="",f=e[0];if(i>0){for(s+=f,t=1;t<i;t++)r=e[t]+"",n=Do-r.length,n&&(s+=Lv(n)),s+=r;f=e[t],r=f+"",n=Do-r.length,n&&(s+=Lv(n))}else if(f===0)return"0";for(;f%10===0;)f/=10;return s+f}var Wy=(function(){function e(r,i){var s,f=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+f,r[a]=s%Ll|0,f=s/Ll|0;return f&&r.unshift(f),r}function t(r,i,s,f){var a,p;if(s!=f)p=s>f?1:-1;else for(a=p=0;a<s;a++)if(r[a]!=i[a]){p=r[a]>i[a]?1:-1;break}return p}function n(r,i,s){for(var f=0;s--;)r[s]-=f,f=r[s]<i[s]?1:0,r[s]=f*Ll+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,f){var a,p,_,S,E,I,z,F,U,k,V,K,J,ie,Q,W,te,X,ae=r.constructor,le=r.s==i.s?1:-1,ge=r.d,ye=i.d;if(!r.s)return new ae(r);if(!i.s)throw Error(ld+"Division by zero");for(p=r.e-i.e,te=ye.length,Q=ge.length,z=new ae(le),F=z.d=[],_=0;ye[_]==(ge[_]||0);)++_;if(ye[_]>(ge[_]||0)&&--p,s==null?K=s=ae.precision:f?K=s+(Qs(r)-Qs(i))+1:K=s,K<0)return new ae(0);if(K=K/Do+2|0,_=0,te==1)for(S=0,ye=ye[0],K++;(_<Q||S)&&K--;_++)J=S*Ll+(ge[_]||0),F[_]=J/ye|0,S=J%ye|0;else{for(S=Ll/(ye[0]+1)|0,S>1&&(ye=e(ye,S),ge=e(ge,S),te=ye.length,Q=ge.length),ie=te,U=ge.slice(0,te),k=U.length;k<te;)U[k++]=0;X=ye.slice(),X.unshift(0),W=ye[0],ye[1]>=Ll/2&&++W;do S=0,a=t(ye,U,te,k),a<0?(V=U[0],te!=k&&(V=V*Ll+(U[1]||0)),S=V/W|0,S>1?(S>=Ll&&(S=Ll-1),E=e(ye,S),I=E.length,k=U.length,a=t(E,U,I,k),a==1&&(S--,n(E,te<I?X:ye,I))):(S==0&&(a=S=1),E=ye.slice()),I=E.length,I<k&&E.unshift(0),n(U,E,k),a==-1&&(k=U.length,a=t(ye,U,te,k),a<1&&(S++,n(U,te<k?X:ye,k))),k=U.length):a===0&&(S++,U=[0]),F[_++]=S,a&&U[0]?U[k++]=ge[ie]||0:(U=[ge[ie]],k=1);while((ie++<Q||U[0]!==void 0)&&K--)}return F[0]||F.shift(),z.e=p,io(z,f?s+Qs(z)+1:s)}})();function sge(e,t){var n,r,i,s,f,a,p=0,_=0,S=e.constructor,E=S.precision;if(Qs(e)>16)throw Error(qq+Qs(e));if(!e.s)return new S(Xf);for(Go=!1,a=E,f=new S(.03125);e.abs().gte(.1);)e=e.times(f),_+=5;for(r=Math.log(Nb(2,_))/Math.LN10*2+5|0,a+=r,n=i=s=new S(Xf),S.precision=a;;){if(i=io(i.times(e),a),n=n.times(++p),f=s.plus(Wy(i,n,a)),Wm(f.d).slice(0,a)===Wm(s.d).slice(0,a)){for(;_--;)s=io(s.times(s),a);return S.precision=E,t==null?(Go=!0,io(s,E)):s}s=f}}function Qs(e){for(var t=e.e*Do,n=e.d[0];n>=10;n/=10)t++;return t}function W5(e,t,n){if(t>e.LN10.sd())throw Go=!0,n&&(e.precision=n),Error(ld+"LN10 precision limit exceeded");return io(new e(e.LN10),t)}function Lv(e){for(var t="";e--;)t+="0";return t}function yA(e,t){var n,r,i,s,f,a,p,_,S,E=1,I=10,z=e,F=z.d,U=z.constructor,k=U.precision;if(z.s<1)throw Error(ld+(z.s?"NaN":"-Infinity"));if(z.eq(Xf))return new U(0);if(t==null?(Go=!1,_=k):_=t,z.eq(10))return t==null&&(Go=!0),W5(U,_);if(_+=I,U.precision=_,n=Wm(F),r=n.charAt(0),s=Qs(z),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)z=z.times(e),n=Wm(z.d),r=n.charAt(0),E++;s=Qs(z),r>1?(z=new U("0."+n),s++):z=new U(r+"."+n.slice(1))}else return p=W5(U,_+2,k).times(s+""),z=yA(new U(r+"."+n.slice(1)),_-I).plus(p),U.precision=k,t==null?(Go=!0,io(z,k)):z;for(a=f=z=Wy(z.minus(Xf),z.plus(Xf),_),S=io(z.times(z),_),i=3;;){if(f=io(f.times(S),_),p=a.plus(Wy(f,new U(i),_)),Wm(p.d).slice(0,_)===Wm(a.d).slice(0,_))return a=a.times(2),s!==0&&(a=a.plus(W5(U,_+2,k).times(s+""))),a=Wy(a,new U(E),_),U.precision=k,t==null?(Go=!0,io(a,k)):a;a=p,i+=2}}function _re(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=mT(n/Do),e.d=[],r=(n+1)%Do,n<0&&(r+=Do),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Do;r<i;)e.d.push(+t.slice(r,r+=Do));t=t.slice(r),r=Do-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Go&&(e.e>rP||e.e<-rP))throw Error(qq+n)}else e.s=0,e.e=0,e.d=[0];return e}function io(e,t,n){var r,i,s,f,a,p,_,S,E=e.d;for(f=1,s=E[0];s>=10;s/=10)f++;if(r=t-f,r<0)r+=Do,i=t,_=E[S=0];else{if(S=Math.ceil((r+1)/Do),s=E.length,S>=s)return e;for(_=s=E[S],f=1;s>=10;s/=10)f++;r%=Do,i=r-Do+f}if(n!==void 0&&(s=Nb(10,f-i-1),a=_/s%10|0,p=t<0||E[S+1]!==void 0||_%s,p=n<4?(a||p)&&(n==0||n==(e.s<0?3:2)):a>5||a==5&&(n==4||p||n==6&&(r>0?i>0?_/Nb(10,f-i):0:E[S-1])%10&1||n==(e.s<0?8:7))),t<1||!E[0])return p?(s=Qs(e),E.length=1,t=t-s-1,E[0]=Nb(10,(Do-t%Do)%Do),e.e=mT(-t/Do)||0):(E.length=1,E[0]=e.e=e.s=0),e;if(r==0?(E.length=S,s=1,S--):(E.length=S+1,s=Nb(10,Do-r),E[S]=i>0?(_/Nb(10,f-i)%Nb(10,i)|0)*s:0),p)for(;;)if(S==0){(E[0]+=s)==Ll&&(E[0]=1,++e.e);break}else{if(E[S]+=s,E[S]!=Ll)break;E[S--]=0,s=1}for(r=E.length;E[--r]===0;)E.pop();if(Go&&(e.e>rP||e.e<-rP))throw Error(qq+Qs(e));return e}function lge(e,t){var n,r,i,s,f,a,p,_,S,E,I=e.constructor,z=I.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new I(e),Go?io(t,z):t;if(p=e.d,E=t.d,r=t.e,_=e.e,p=p.slice(),f=_-r,f){for(S=f<0,S?(n=p,f=-f,a=E.length):(n=E,r=_,a=p.length),i=Math.max(Math.ceil(z/Do),a)+2,f>i&&(f=i,n.length=1),n.reverse(),i=f;i--;)n.push(0);n.reverse()}else{for(i=p.length,a=E.length,S=i<a,S&&(a=i),i=0;i<a;i++)if(p[i]!=E[i]){S=p[i]<E[i];break}f=0}for(S&&(n=p,p=E,E=n,t.s=-t.s),a=p.length,i=E.length-a;i>0;--i)p[a++]=0;for(i=E.length;i>f;){if(p[--i]<E[i]){for(s=i;s&&p[--s]===0;)p[s]=Ll-1;--p[s],p[i]+=Ll}p[i]-=E[i]}for(;p[--a]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=r,Go?io(t,z):t):new I(0)}function Ox(e,t,n){var r,i=Qs(e),s=Wm(e.d),f=s.length;return t?(n&&(r=n-f)>0?s=s.charAt(0)+"."+s.slice(1)+Lv(r):f>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Lv(-i-1)+s,n&&(r=n-f)>0&&(s+=Lv(r))):i>=f?(s+=Lv(i+1-f),n&&(r=n-i-1)>0&&(s=s+"."+Lv(r))):((r=i+1)<f&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-f)>0&&(i+1===f&&(s+="."),s+=Lv(r))),e.s<0?"-"+s:s}function vre(e,t){if(e.length>t)return e.length=t,!0}function uge(e){var t,n,r;function i(s){var f=this;if(!(f instanceof i))return new i(s);if(f.constructor=i,s instanceof i){f.s=s.s,f.e=s.e,f.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(lx+s);if(s>0)f.s=1;else if(s<0)s=-s,f.s=-1;else{f.s=0,f.e=0,f.d=[0];return}if(s===~~s&&s<1e7){f.e=0,f.d=[s];return}return _re(f,s.toString())}else if(typeof s!="string")throw Error(lx+s);if(s.charCodeAt(0)===45?(s=s.slice(1),f.s=-1):f.s=1,Krt.test(s))_re(f,s);else throw Error(lx+s)}if(i.prototype=dr,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=uge,i.config=i.set=Qrt,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function Qrt(e){if(!e||typeof e!="object")throw Error(ld+"Object expected");var t,n,r,i=["precision",1,pT,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(mT(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(lx+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(lx+n+": "+r);return this}var Hq=uge(Zrt);Xf=new Hq(1);const Ka=Hq;function Jrt(e){return rit(e)||nit(e)||tit(e)||eit()}function eit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tit(e,t){if(e){if(typeof e=="string")return G6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G6(e,t)}}function nit(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function rit(e){if(Array.isArray(e))return G6(e)}function G6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var iit=function(t){return t},cge={},fge=function(t){return t===cge},bre=function(t){return function n(){return arguments.length===0||arguments.length===1&&fge(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},ait=function e(t,n){return t===1?n:bre(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var f=i.filter(function(a){return a!==cge}).length;return f>=t?n.apply(void 0,i):e(t-f,bre(function(){for(var a=arguments.length,p=new Array(a),_=0;_<a;_++)p[_]=arguments[_];var S=i.map(function(E){return fge(E)?p.shift():E});return n.apply(void 0,Jrt(S).concat(p))}))})},wk=function(t){return ait(t.length,t)},Y6=function(t,n){for(var r=[],i=t;i<n;++i)r[i-t]=i;return r},oit=wk(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),sit=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return iit;var i=n.reverse(),s=i[0],f=i.slice(1);return function(){return f.reduce(function(a,p){return p(a)},s.apply(void 0,arguments))}},W6=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},hge=function(t){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),f=0;f<i;f++)s[f]=arguments[f];return n&&s.every(function(a,p){return a===n[p]})||(n=s,r=t.apply(void 0,s)),r}};function lit(e){var t;return e===0?t=1:t=Math.floor(new Ka(e).abs().log(10).toNumber())+1,t}function uit(e,t,n){for(var r=new Ka(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var cit=wk(function(e,t,n){var r=+e,i=+t;return r+n*(i-r)}),fit=wk(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),hit=wk(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Sk={rangeStep:uit,getDigitCount:lit,interpolateNumber:cit,uninterpolateNumber:fit,uninterpolateTruncation:hit};function X6(e){return mit(e)||pit(e)||dge(e)||dit()}function dit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pit(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function mit(e){if(Array.isArray(e))return Z6(e)}function _A(e,t){return _it(e)||yit(e,t)||dge(e,t)||git()}function git(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dge(e,t){if(e){if(typeof e=="string")return Z6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z6(e,t)}}function Z6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yit(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,s=void 0;try{for(var f=e[Symbol.iterator](),a;!(r=(a=f.next()).done)&&(n.push(a.value),!(t&&n.length===t));r=!0);}catch(p){i=!0,s=p}finally{try{!r&&f.return!=null&&f.return()}finally{if(i)throw s}}return n}}function _it(e){if(Array.isArray(e))return e}function pge(e){var t=_A(e,2),n=t[0],r=t[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function mge(e,t,n){if(e.lte(0))return new Ka(0);var r=Sk.getDigitCount(e.toNumber()),i=new Ka(10).pow(r),s=e.div(i),f=r!==1?.05:.1,a=new Ka(Math.ceil(s.div(f).toNumber())).add(n).mul(f),p=a.mul(i);return t?p:new Ka(Math.ceil(p))}function vit(e,t,n){var r=1,i=new Ka(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new Ka(10).pow(Sk.getDigitCount(e)-1),i=new Ka(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Ka(Math.floor(e)))}else e===0?i=new Ka(Math.floor((t-1)/2)):n||(i=new Ka(Math.floor(e)));var f=Math.floor((t-1)/2),a=sit(oit(function(p){return i.add(new Ka(p-f).mul(r)).toNumber()}),Y6);return a(0,t)}function gge(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Ka(0),tickMin:new Ka(0),tickMax:new Ka(0)};var s=mge(new Ka(t).sub(e).div(n-1),r,i),f;e<=0&&t>=0?f=new Ka(0):(f=new Ka(e).add(t).div(2),f=f.sub(new Ka(f).mod(s)));var a=Math.ceil(f.sub(e).div(s).toNumber()),p=Math.ceil(new Ka(t).sub(f).div(s).toNumber()),_=a+p+1;return _>n?gge(e,t,n,r,i+1):(_<n&&(p=t>0?p+(n-_):p,a=t>0?a:a+(n-_)),{step:s,tickMin:f.sub(new Ka(a).mul(s)),tickMax:f.add(new Ka(p).mul(s))})}function bit(e){var t=_A(e,2),n=t[0],r=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,f=Math.max(i,2),a=pge([n,r]),p=_A(a,2),_=p[0],S=p[1];if(_===-1/0||S===1/0){var E=S===1/0?[_].concat(X6(Y6(0,i-1).map(function(){return 1/0}))):[].concat(X6(Y6(0,i-1).map(function(){return-1/0})),[S]);return n>r?W6(E):E}if(_===S)return vit(_,i,s);var I=gge(_,S,f,s),z=I.step,F=I.tickMin,U=I.tickMax,k=Sk.rangeStep(F,U.add(new Ka(.1).mul(z)),z);return n>r?W6(k):k}function xit(e,t){var n=_A(e,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,f=pge([r,i]),a=_A(f,2),p=a[0],_=a[1];if(p===-1/0||_===1/0)return[r,i];if(p===_)return[p];var S=Math.max(t,2),E=mge(new Ka(_).sub(p).div(S-1),s,0),I=[].concat(X6(Sk.rangeStep(new Ka(p),new Ka(_).sub(new Ka(.99).mul(E)),E)),[_]);return r>i?W6(I):I}var wit=hge(bit),Sit=hge(xit),Tit="Invariant failed";function Cx(e,t){throw new Error(Tit)}var Eit=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function SS(e){"@babel/helpers - typeof";return SS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SS(e)}function iP(){return iP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iP.apply(this,arguments)}function Ait(e,t){return Dit(e)||Mit(e,t)||Cit(e,t)||Oit()}function Oit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cit(e,t){if(e){if(typeof e=="string")return xre(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xre(e,t)}}function xre(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mit(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function Dit(e){if(Array.isArray(e))return e}function Iit(e,t){if(e==null)return{};var n=Pit(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Pit(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Rit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kit(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vge(r.key),r)}}function Lit(e,t,n){return t&&kit(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zit(e,t,n){return t=aP(t),Fit(e,yge()?Reflect.construct(t,n||[],aP(e).constructor):t.apply(e,n))}function Fit(e,t){if(t&&(SS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nit(e)}function Nit(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yge=function(){return!!e})()}function aP(e){return aP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aP(e)}function Bit(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K6(e,t)}function K6(e,t){return K6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},K6(e,t)}function _ge(e,t,n){return t=vge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vge(e){var t=jit(e,"string");return SS(t)=="symbol"?t:t+""}function jit(e,t){if(SS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(SS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var NO=(function(e){function t(){return Rit(this,t),zit(this,t,arguments)}return Bit(t,e),Lit(t,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,f=r.width,a=r.dataKey,p=r.data,_=r.dataPointFormatter,S=r.xAxis,E=r.yAxis,I=Iit(r,Eit),z=oa(I,!1);this.props.direction==="x"&&S.type!=="number"&&Cx();var F=p.map(function(U){var k=_(U,a),V=k.x,K=k.y,J=k.value,ie=k.errorVal;if(!ie)return null;var Q=[],W,te;if(Array.isArray(ie)){var X=Ait(ie,2);W=X[0],te=X[1]}else W=te=ie;if(s==="vertical"){var ae=S.scale,le=K+i,ge=le+f,ye=le-f,De=ae(J-W),He=ae(J+te);Q.push({x1:He,y1:ge,x2:He,y2:ye}),Q.push({x1:De,y1:le,x2:He,y2:le}),Q.push({x1:De,y1:ge,x2:De,y2:ye})}else if(s==="horizontal"){var Be=E.scale,Ee=V+i,Ne=Ee-f,at=Ee+f,yt=Be(J-W),je=Be(J+te);Q.push({x1:Ne,y1:je,x2:at,y2:je}),Q.push({x1:Ee,y1:yt,x2:Ee,y2:je}),Q.push({x1:Ne,y1:yt,x2:at,y2:yt})}return Je.createElement(Rs,iP({className:"recharts-errorBar",key:"bar-".concat(Q.map(function(Ke){return"".concat(Ke.x1,"-").concat(Ke.x2,"-").concat(Ke.y1,"-").concat(Ke.y2)}))},z),Q.map(function(Ke){return Je.createElement("line",iP({},Ke,{key:"line-".concat(Ke.x1,"-").concat(Ke.x2,"-").concat(Ke.y1,"-").concat(Ke.y2)}))}))});return Je.createElement(Rs,{className:"recharts-errorBars"},F)}}])})(Je.Component);_ge(NO,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});_ge(NO,"displayName","ErrorBar");function vA(e){"@babel/helpers - typeof";return vA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vA(e)}function wre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wre(Object(n),!0).forEach(function(r){Uit(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uit(e,t,n){return t=$it(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $it(e){var t=Vit(e,"string");return vA(t)=="symbol"?t:t+""}function Vit(e,t){if(vA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(vA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bge=function(t){var n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,s=t.legendContent,f=Hf(n,ox);if(!f)return null;var a=ox.defaultProps,p=a!==void 0?Rb(Rb({},a),f.props):{},_;return f.props&&f.props.payload?_=f.props&&f.props.payload:s==="children"?_=(r||[]).reduce(function(S,E){var I=E.item,z=E.props,F=z.sectors||z.data||[];return S.concat(F.map(function(U){return{type:f.props.iconType||I.props.legendType,value:U.name,color:U.fill,payload:U}}))},[]):_=(r||[]).map(function(S){var E=S.item,I=E.type.defaultProps,z=I!==void 0?Rb(Rb({},I),E.props):{},F=z.dataKey,U=z.name,k=z.legendType,V=z.hide;return{inactive:V,dataKey:F,type:p.iconType||k||"square",color:Gq(E),value:U||F,payload:z}}),Rb(Rb(Rb({},p),ox.getWithHeight(f,i)),{},{payload:_,item:f})};function bA(e){"@babel/helpers - typeof";return bA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bA(e)}function Sre(e){return Yit(e)||Git(e)||Hit(e)||qit()}function qit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hit(e,t){if(e){if(typeof e=="string")return Q6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q6(e,t)}}function Git(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yit(e){if(Array.isArray(e))return Q6(e)}function Q6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tre(Object(n),!0).forEach(function(r){Fw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fw(e,t,n){return t=Wit(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wit(e){var t=Xit(e,"string");return bA(t)=="symbol"?t:t+""}function Xit(e,t){if(bA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(bA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nh(e,t,n){return Gi(e)||Gi(t)?n:vl(t)?ed(e,t,n):Li(t)?t(e):n}function T2(e,t,n,r){var i=Yrt(e,function(a){return nh(a,t)});if(n==="number"){var s=i.filter(function(a){return Xn(a)||parseFloat(a)});return s.length?[bk(s),vk(s)]:[1/0,-1/0]}var f=r?i.filter(function(a){return!Gi(a)}):i;return f.map(function(a){return vl(a)||a instanceof Date?a:""})}var Zit=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,f=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var p=s.range,_=0;_<a;_++){var S=_>0?i[_-1].coordinate:i[a-1].coordinate,E=i[_].coordinate,I=_>=a-1?i[0].coordinate:i[_+1].coordinate,z=void 0;if(yp(E-S)!==yp(I-E)){var F=[];if(yp(I-E)===yp(p[1]-p[0])){z=I;var U=E+p[1]-p[0];F[0]=Math.min(U,(U+S)/2),F[1]=Math.max(U,(U+S)/2)}else{z=S;var k=I+p[1]-p[0];F[0]=Math.min(E,(k+E)/2),F[1]=Math.max(E,(k+E)/2)}var V=[Math.min(E,(z+E)/2),Math.max(E,(z+E)/2)];if(t>V[0]&&t<=V[1]||t>=F[0]&&t<=F[1]){f=i[_].index;break}}else{var K=Math.min(S,I),J=Math.max(S,I);if(t>(K+E)/2&&t<=(J+E)/2){f=i[_].index;break}}}else for(var ie=0;ie<a;ie++)if(ie===0&&t<=(r[ie].coordinate+r[ie+1].coordinate)/2||ie>0&&ie<a-1&&t>(r[ie].coordinate+r[ie-1].coordinate)/2&&t<=(r[ie].coordinate+r[ie+1].coordinate)/2||ie===a-1&&t>(r[ie].coordinate+r[ie-1].coordinate)/2){f=r[ie].index;break}return f},Gq=function(t){var n,r=t,i=r.type.displayName,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?gs(gs({},t.type.defaultProps),t.props):t.props,f=s.stroke,a=s.fill,p;switch(i){case"Line":p=f;break;case"Area":case"Radar":p=f&&f!=="none"?f:a;break;default:p=a;break}return p},Kit=function(t){var n=t.barSize,r=t.totalSize,i=t.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var f={},a=Object.keys(s),p=0,_=a.length;p<_;p++)for(var S=s[a[p]].stackGroups,E=Object.keys(S),I=0,z=E.length;I<z;I++){var F=S[E[I]],U=F.items,k=F.cateAxisId,V=U.filter(function(te){return Gy(te.type).indexOf("Bar")>=0});if(V&&V.length){var K=V[0].type.defaultProps,J=K!==void 0?gs(gs({},K),V[0].props):V[0].props,ie=J.barSize,Q=J[k];f[Q]||(f[Q]=[]);var W=Gi(ie)?n:ie;f[Q].push({item:V[0],stackList:V.slice(1),barSize:Gi(W)?void 0:Ax(W,r,0)})}}return f},Qit=function(t){var n=t.barGap,r=t.barCategoryGap,i=t.bandSize,s=t.sizeList,f=s===void 0?[]:s,a=t.maxBarSize,p=f.length;if(p<1)return null;var _=Ax(n,i,0,!0),S,E=[];if(f[0].barSize===+f[0].barSize){var I=!1,z=i/p,F=f.reduce(function(ie,Q){return ie+Q.barSize||0},0);F+=(p-1)*_,F>=i&&(F-=(p-1)*_,_=0),F>=i&&z>0&&(I=!0,z*=.9,F=p*z);var U=(i-F)/2>>0,k={offset:U-_,size:0};S=f.reduce(function(ie,Q){var W={item:Q.item,position:{offset:k.offset+k.size+_,size:I?z:Q.barSize}},te=[].concat(Sre(ie),[W]);return k=te[te.length-1].position,Q.stackList&&Q.stackList.length&&Q.stackList.forEach(function(X){te.push({item:X,position:k})}),te},E)}else{var V=Ax(r,i,0,!0);i-2*V-(p-1)*_<=0&&(_=0);var K=(i-2*V-(p-1)*_)/p;K>1&&(K>>=0);var J=a===+a?Math.min(K,a):K;S=f.reduce(function(ie,Q,W){var te=[].concat(Sre(ie),[{item:Q.item,position:{offset:V+(K+_)*W+(K-J)/2,size:J}}]);return Q.stackList&&Q.stackList.length&&Q.stackList.forEach(function(X){te.push({item:X,position:te[te.length-1].position})}),te},E)}return S},Jit=function(t,n,r,i){var s=r.children,f=r.width,a=r.margin,p=f-(a.left||0)-(a.right||0),_=bge({children:s,legendWidth:p});if(_){var S=i||{},E=S.width,I=S.height,z=_.align,F=_.verticalAlign,U=_.layout;if((U==="vertical"||U==="horizontal"&&F==="middle")&&z!=="center"&&Xn(t[z]))return gs(gs({},t),{},Fw({},z,t[z]+(E||0)));if((U==="horizontal"||U==="vertical"&&z==="center")&&F!=="middle"&&Xn(t[F]))return gs(gs({},t),{},Fw({},F,t[F]+(I||0)))}return t},eat=function(t,n,r){return Gi(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},xge=function(t,n,r,i,s){var f=n.props.children,a=td(f,NO).filter(function(_){return eat(i,s,_.props.direction)});if(a&&a.length){var p=a.map(function(_){return _.props.dataKey});return t.reduce(function(_,S){var E=nh(S,r);if(Gi(E))return _;var I=Array.isArray(E)?[bk(E),vk(E)]:[E,E],z=p.reduce(function(F,U){var k=nh(S,U,0),V=I[0]-Math.abs(Array.isArray(k)?k[0]:k),K=I[1]+Math.abs(Array.isArray(k)?k[1]:k);return[Math.min(V,F[0]),Math.max(K,F[1])]},[1/0,-1/0]);return[Math.min(z[0],_[0]),Math.max(z[1],_[1])]},[1/0,-1/0])}return null},tat=function(t,n,r,i,s){var f=n.map(function(a){return xge(t,a,r,s,i)}).filter(function(a){return!Gi(a)});return f&&f.length?f.reduce(function(a,p){return[Math.min(a[0],p[0]),Math.max(a[1],p[1])]},[1/0,-1/0]):null},wge=function(t,n,r,i,s){var f=n.map(function(p){var _=p.props.dataKey;return r==="number"&&_&&xge(t,p,_,i)||T2(t,_,r,s)});if(r==="number")return f.reduce(function(p,_){return[Math.min(p[0],_[0]),Math.max(p[1],_[1])]},[1/0,-1/0]);var a={};return f.reduce(function(p,_){for(var S=0,E=_.length;S<E;S++)a[_[S]]||(a[_[S]]=!0,p.push(_[S]));return p},[])},Sge=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},Tge=function(t,n,r,i){if(i)return t.map(function(p){return p.coordinate});var s,f,a=t.map(function(p){return p.coordinate===n&&(s=!0),p.coordinate===r&&(f=!0),p.coordinate});return s||a.push(n),f||a.push(r),a},Ly=function(t,n,r){if(!t)return null;var i=t.scale,s=t.duplicateDomain,f=t.type,a=t.range,p=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,_=(n||r)&&f==="category"&&i.bandwidth?i.bandwidth()/p:0;if(_=t.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?yp(a[0]-a[1])*2*_:_,n&&(t.ticks||t.niceTicks)){var S=(t.ticks||t.niceTicks).map(function(E){var I=s?s.indexOf(E):E;return{coordinate:i(I)+_,value:E,offset:_}});return S.filter(function(E){return!IO(E.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(E,I){return{coordinate:i(E)+_,value:E,index:I,offset:_}}):i.ticks&&!r?i.ticks(t.tickCount).map(function(E){return{coordinate:i(E)+_,value:E,offset:_}}):i.domain().map(function(E,I){return{coordinate:i(E)+_,value:s?s[E]:E,index:I,offset:_}})},X5=new WeakMap,GM=function(t,n){if(typeof n!="function")return t;X5.has(t)||X5.set(t,new WeakMap);var r=X5.get(t);if(r.has(n))return r.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},nat=function(t,n,r){var i=t.scale,s=t.type,f=t.layout,a=t.axisType;if(i==="auto")return f==="radial"&&a==="radiusAxis"?{scale:hA(),realScaleType:"band"}:f==="radial"&&a==="angleAxis"?{scale:JI(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:S2(),realScaleType:"point"}:s==="category"?{scale:hA(),realScaleType:"band"}:{scale:JI(),realScaleType:"linear"};if(Ex(i)){var p="scale".concat(ok(i));return{scale:(ure[p]||S2)(),realScaleType:ure[p]?p:"point"}}return Li(i)?{scale:i}:{scale:S2(),realScaleType:"point"}},Ere=1e-4,rat=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,i=t.range(),s=Math.min(i[0],i[1])-Ere,f=Math.max(i[0],i[1])+Ere,a=t(n[0]),p=t(n[r-1]);(a<s||a>f||p<s||p>f)&&t.domain([n[0],n[r-1]])}},iat=function(t,n){if(!t)return null;for(var r=0,i=t.length;r<i;r++)if(t[r].item===n)return t[r].position;return null},aat=function(t,n){if(!n||n.length!==2||!Xn(n[0])||!Xn(n[1]))return t;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[t[0],t[1]];return(!Xn(t[0])||t[0]<r)&&(s[0]=r),(!Xn(t[1])||t[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},oat=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var s=0,f=0,a=0;a<n;++a){var p=IO(t[a][r][1])?t[a][r][0]:t[a][r][1];p>=0?(t[a][r][0]=s,t[a][r][1]=s+p,s=t[a][r][1]):(t[a][r][0]=f,t[a][r][1]=f+p,f=t[a][r][1])}},sat=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var s=0,f=0;f<n;++f){var a=IO(t[f][r][1])?t[f][r][0]:t[f][r][1];a>=0?(t[f][r][0]=s,t[f][r][1]=s+a,s=t[f][r][1]):(t[f][r][0]=0,t[f][r][1]=0)}},lat={sign:oat,expand:$Ke,none:mS,silhouette:VKe,wiggle:qKe,positive:sat},uat=function(t,n,r){var i=n.map(function(a){return a.props.dataKey}),s=lat[r],f=UKe().keys(i).value(function(a,p){return+nh(a,p,0)}).order(C6).offset(s);return f(t)},cat=function(t,n,r,i,s,f){if(!t)return null;var a=f?n.reverse():n,p={},_=a.reduce(function(E,I){var z,F=(z=I.type)!==null&&z!==void 0&&z.defaultProps?gs(gs({},I.type.defaultProps),I.props):I.props,U=F.stackId,k=F.hide;if(k)return E;var V=F[r],K=E[V]||{hasStack:!1,stackGroups:{}};if(vl(U)){var J=K.stackGroups[U]||{numericAxisId:r,cateAxisId:i,items:[]};J.items.push(I),K.hasStack=!0,K.stackGroups[U]=J}else K.stackGroups[PO("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[I]};return gs(gs({},E),{},Fw({},V,K))},p),S={};return Object.keys(_).reduce(function(E,I){var z=_[I];if(z.hasStack){var F={};z.stackGroups=Object.keys(z.stackGroups).reduce(function(U,k){var V=z.stackGroups[k];return gs(gs({},U),{},Fw({},k,{numericAxisId:r,cateAxisId:i,items:V.items,stackedData:uat(t,V.items,s)}))},F)}return gs(gs({},E),{},Fw({},I,z))},S)},fat=function(t,n){var r=n.realScaleType,i=n.type,s=n.tickCount,f=n.originalDomain,a=n.allowDecimals,p=r||n.scale;if(p!=="auto"&&p!=="linear")return null;if(s&&i==="number"&&f&&(f[0]==="auto"||f[1]==="auto")){var _=t.domain();if(!_.length)return null;var S=wit(_,s,a);return t.domain([bk(S),vk(S)]),{niceTicks:S}}if(s&&i==="number"){var E=t.domain(),I=Sit(E,s,a);return{niceTicks:I}}return null};function Are(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,s=e.index,f=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Gi(i[t.dataKey])){var a=PI(n,"value",i[t.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var p=nh(i,Gi(f)?t.dataKey:f);return Gi(p)?null:t.scale(p)}var Ore=function(t){var n=t.axis,r=t.ticks,i=t.offset,s=t.bandSize,f=t.entry,a=t.index;if(n.type==="category")return r[a]?r[a].coordinate+i:null;var p=nh(f,n.dataKey,n.domain[a]);return Gi(p)?null:n.scale(p)-s/2+i},hat=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},dat=function(t,n){var r,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?gs(gs({},t.type.defaultProps),t.props):t.props,s=i.stackId;if(vl(s)){var f=n[s];if(f){var a=f.items.indexOf(t);return a>=0?f.stackedData[a]:null}}return null},pat=function(t){return t.reduce(function(n,r){return[bk(r.concat([n[0]]).filter(Xn)),vk(r.concat([n[1]]).filter(Xn))]},[1/0,-1/0])},Ege=function(t,n,r){return Object.keys(t).reduce(function(i,s){var f=t[s],a=f.stackedData,p=a.reduce(function(_,S){var E=pat(S.slice(n,r+1));return[Math.min(_[0],E[0]),Math.max(_[1],E[1])]},[1/0,-1/0]);return[Math.min(p[0],i[0]),Math.max(p[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Cre=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Mre=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,J6=function(t,n,r){if(Li(t))return t(n,r);if(!Array.isArray(t))return n;var i=[];if(Xn(t[0]))i[0]=r?t[0]:Math.min(t[0],n[0]);else if(Cre.test(t[0])){var s=+Cre.exec(t[0])[1];i[0]=n[0]-s}else Li(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(Xn(t[1]))i[1]=r?t[1]:Math.max(t[1],n[1]);else if(Mre.test(t[1])){var f=+Mre.exec(t[1])[1];i[1]=n[1]+f}else Li(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},oP=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!r||i>0)return i}if(t&&n&&n.length>=2){for(var s=bq(n,function(E){return E.coordinate}),f=1/0,a=1,p=s.length;a<p;a++){var _=s[a],S=s[a-1];f=Math.min((_.coordinate||0)-(S.coordinate||0),f)}return f===1/0?0:f}return r?void 0:0},Dre=function(t,n,r){return!t||!t.length||xk(t,ed(r,"type.defaultProps.domain"))?n:t},Age=function(t,n){var r=t.type.defaultProps?gs(gs({},t.type.defaultProps),t.props):t.props,i=r.dataKey,s=r.name,f=r.unit,a=r.formatter,p=r.tooltipType,_=r.chartType,S=r.hide;return gs(gs({},oa(t,!1)),{},{dataKey:i,unit:f,formatter:a,name:s||i,color:Gq(t),value:nh(n,i),type:p,payload:n,chartType:_,hide:S})};function xA(e){"@babel/helpers - typeof";return xA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xA(e)}function Ire(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ire(Object(n),!0).forEach(function(r){mat(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ire(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mat(e,t,n){return t=gat(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gat(e){var t=yat(e,"string");return xA(t)=="symbol"?t:t+""}function yat(e,t){if(xA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sP=Math.PI/180,_at=function(t){return t*180/Math.PI},tu=function(t,n,r,i){return{x:t+Math.cos(-sP*i)*r,y:n+Math.sin(-sP*i)*r}},vat=function(t,n){var r=t.x,i=t.y,s=n.x,f=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-f,2))},bat=function(t,n){var r=t.x,i=t.y,s=n.cx,f=n.cy,a=vat({x:r,y:i},{x:s,y:f});if(a<=0)return{radius:a};var p=(r-s)/a,_=Math.acos(p);return i>f&&(_=2*Math.PI-_),{radius:a,angle:_at(_),angleInRadian:_}},xat=function(t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),f=Math.min(i,s);return{startAngle:n-f*360,endAngle:r-f*360}},wat=function(t,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),f=Math.floor(i/360),a=Math.min(s,f);return t+a*360},Rre=function(t,n){var r=t.x,i=t.y,s=bat({x:r,y:i},n),f=s.radius,a=s.angle,p=n.innerRadius,_=n.outerRadius;if(f<p||f>_)return!1;if(f===0)return!0;var S=xat(n),E=S.startAngle,I=S.endAngle,z=a,F;if(E<=I){for(;z>I;)z-=360;for(;z<E;)z+=360;F=z>=E&&z<=I}else{for(;z>E;)z-=360;for(;z<I;)z+=360;F=z>=I&&z<=E}return F?Pre(Pre({},n),{},{radius:f,angle:wat(z,n)}):null};function wA(e){"@babel/helpers - typeof";return wA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wA(e)}var Sat=["offset"];function Tat(e){return Cat(e)||Oat(e)||Aat(e)||Eat()}function Eat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aat(e,t){if(e){if(typeof e=="string")return eU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eU(e,t)}}function Oat(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cat(e){if(Array.isArray(e))return eU(e)}function eU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mat(e,t){if(e==null)return{};var n=Dat(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Dat(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function kre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kre(Object(n),!0).forEach(function(r){Iat(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Iat(e,t,n){return t=Pat(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pat(e){var t=Rat(e,"string");return wA(t)=="symbol"?t:t+""}function Rat(e,t){if(wA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SA(){return SA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SA.apply(this,arguments)}var kat=function(t){var n=t.value,r=t.formatter,i=Gi(t.children)?n:t.children;return Li(r)?r(i):i},Lat=function(t,n){var r=yp(n-t),i=Math.min(Math.abs(n-t),360);return r*i},zat=function(t,n,r){var i=t.position,s=t.viewBox,f=t.offset,a=t.className,p=s,_=p.cx,S=p.cy,E=p.innerRadius,I=p.outerRadius,z=p.startAngle,F=p.endAngle,U=p.clockWise,k=(E+I)/2,V=Lat(z,F),K=V>=0?1:-1,J,ie;i==="insideStart"?(J=z+K*f,ie=U):i==="insideEnd"?(J=F-K*f,ie=!U):i==="end"&&(J=F+K*f,ie=U),ie=V<=0?ie:!ie;var Q=tu(_,S,k,J),W=tu(_,S,k,J+(ie?1:-1)*359),te="M".concat(Q.x,",").concat(Q.y,`
    A`).concat(k,",").concat(k,",0,1,").concat(ie?0:1,`,
    `).concat(W.x,",").concat(W.y),X=Gi(t.id)?PO("recharts-radial-line-"):t.id;return Je.createElement("text",SA({},r,{dominantBaseline:"central",className:ri("recharts-radial-bar-label",a)}),Je.createElement("defs",null,Je.createElement("path",{id:X,d:te})),Je.createElement("textPath",{xlinkHref:"#".concat(X)},n))},Fat=function(t){var n=t.viewBox,r=t.offset,i=t.position,s=n,f=s.cx,a=s.cy,p=s.innerRadius,_=s.outerRadius,S=s.startAngle,E=s.endAngle,I=(S+E)/2;if(i==="outside"){var z=tu(f,a,_+r,I),F=z.x,U=z.y;return{x:F,y:U,textAnchor:F>=f?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:f,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:f,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:f,y:a,textAnchor:"middle",verticalAnchor:"end"};var k=(p+_)/2,V=tu(f,a,k,I),K=V.x,J=V.y;return{x:K,y:J,textAnchor:"middle",verticalAnchor:"middle"}},Nat=function(t){var n=t.viewBox,r=t.parentViewBox,i=t.offset,s=t.position,f=n,a=f.x,p=f.y,_=f.width,S=f.height,E=S>=0?1:-1,I=E*i,z=E>0?"end":"start",F=E>0?"start":"end",U=_>=0?1:-1,k=U*i,V=U>0?"end":"start",K=U>0?"start":"end";if(s==="top"){var J={x:a+_/2,y:p-E*i,textAnchor:"middle",verticalAnchor:z};return yl(yl({},J),r?{height:Math.max(p-r.y,0),width:_}:{})}if(s==="bottom"){var ie={x:a+_/2,y:p+S+I,textAnchor:"middle",verticalAnchor:F};return yl(yl({},ie),r?{height:Math.max(r.y+r.height-(p+S),0),width:_}:{})}if(s==="left"){var Q={x:a-k,y:p+S/2,textAnchor:V,verticalAnchor:"middle"};return yl(yl({},Q),r?{width:Math.max(Q.x-r.x,0),height:S}:{})}if(s==="right"){var W={x:a+_+k,y:p+S/2,textAnchor:K,verticalAnchor:"middle"};return yl(yl({},W),r?{width:Math.max(r.x+r.width-W.x,0),height:S}:{})}var te=r?{width:_,height:S}:{};return s==="insideLeft"?yl({x:a+k,y:p+S/2,textAnchor:K,verticalAnchor:"middle"},te):s==="insideRight"?yl({x:a+_-k,y:p+S/2,textAnchor:V,verticalAnchor:"middle"},te):s==="insideTop"?yl({x:a+_/2,y:p+I,textAnchor:"middle",verticalAnchor:F},te):s==="insideBottom"?yl({x:a+_/2,y:p+S-I,textAnchor:"middle",verticalAnchor:z},te):s==="insideTopLeft"?yl({x:a+k,y:p+I,textAnchor:K,verticalAnchor:F},te):s==="insideTopRight"?yl({x:a+_-k,y:p+I,textAnchor:V,verticalAnchor:F},te):s==="insideBottomLeft"?yl({x:a+k,y:p+S-I,textAnchor:K,verticalAnchor:z},te):s==="insideBottomRight"?yl({x:a+_-k,y:p+S-I,textAnchor:V,verticalAnchor:z},te):cT(s)&&(Xn(s.x)||Yb(s.x))&&(Xn(s.y)||Yb(s.y))?yl({x:a+Ax(s.x,_),y:p+Ax(s.y,S),textAnchor:"end",verticalAnchor:"end"},te):yl({x:a+_/2,y:p+S/2,textAnchor:"middle",verticalAnchor:"middle"},te)},Bat=function(t){return"cx"in t&&Xn(t.cx)};function Su(e){var t=e.offset,n=t===void 0?5:t,r=Mat(e,Sat),i=yl({offset:n},r),s=i.viewBox,f=i.position,a=i.value,p=i.children,_=i.content,S=i.className,E=S===void 0?"":S,I=i.textBreakAll;if(!s||Gi(a)&&Gi(p)&&!be.isValidElement(_)&&!Li(_))return null;if(be.isValidElement(_))return be.cloneElement(_,i);var z;if(Li(_)){if(z=be.createElement(_,i),be.isValidElement(z))return z}else z=kat(i);var F=Bat(s),U=oa(i,!0);if(F&&(f==="insideStart"||f==="insideEnd"||f==="end"))return zat(i,z,U);var k=F?Fat(i):Nat(i);return Je.createElement(HI,SA({className:ri("recharts-label",E)},U,k,{breakAll:I}),z)}Su.displayName="Label";var Oge=function(t){var n=t.cx,r=t.cy,i=t.angle,s=t.startAngle,f=t.endAngle,a=t.r,p=t.radius,_=t.innerRadius,S=t.outerRadius,E=t.x,I=t.y,z=t.top,F=t.left,U=t.width,k=t.height,V=t.clockWise,K=t.labelViewBox;if(K)return K;if(Xn(U)&&Xn(k)){if(Xn(E)&&Xn(I))return{x:E,y:I,width:U,height:k};if(Xn(z)&&Xn(F))return{x:z,y:F,width:U,height:k}}return Xn(E)&&Xn(I)?{x:E,y:I,width:0,height:0}:Xn(n)&&Xn(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:f||i||0,innerRadius:_||0,outerRadius:S||p||a||0,clockWise:V}:t.viewBox?t.viewBox:{}},jat=function(t,n){return t?t===!0?Je.createElement(Su,{key:"label-implicit",viewBox:n}):vl(t)?Je.createElement(Su,{key:"label-implicit",viewBox:n,value:t}):be.isValidElement(t)?t.type===Su?be.cloneElement(t,{key:"label-implicit",viewBox:n}):Je.createElement(Su,{key:"label-implicit",content:t,viewBox:n}):Li(t)?Je.createElement(Su,{key:"label-implicit",content:t,viewBox:n}):cT(t)?Je.createElement(Su,SA({viewBox:n},t,{key:"label-implicit"})):null:null},Uat=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var i=t.children,s=Oge(t),f=td(i,Su).map(function(p,_){return be.cloneElement(p,{viewBox:n||s,key:"label-".concat(_)})});if(!r)return f;var a=jat(t.label,n||s);return[a].concat(Tat(f))};Su.parseViewBox=Oge;Su.renderCallByParent=Uat;var Z5,Lre;function $at(){if(Lre)return Z5;Lre=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Z5=e,Z5}var Vat=$at();const qat=ga(Vat);function TA(e){"@babel/helpers - typeof";return TA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TA(e)}var Hat=["valueAccessor"],Gat=["data","dataKey","clockWise","id","textBreakAll"];function Yat(e){return Kat(e)||Zat(e)||Xat(e)||Wat()}function Wat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xat(e,t){if(e){if(typeof e=="string")return tU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tU(e,t)}}function Zat(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kat(e){if(Array.isArray(e))return tU(e)}function tU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lP(){return lP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lP.apply(this,arguments)}function zre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zre(Object(n),!0).forEach(function(r){Qat(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qat(e,t,n){return t=Jat(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jat(e){var t=eot(e,"string");return TA(t)=="symbol"?t:t+""}function eot(e,t){if(TA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(TA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nre(e,t){if(e==null)return{};var n=tot(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function tot(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var not=function(t){return Array.isArray(t.value)?qat(t.value):t.value};function Wv(e){var t=e.valueAccessor,n=t===void 0?not:t,r=Nre(e,Hat),i=r.data,s=r.dataKey,f=r.clockWise,a=r.id,p=r.textBreakAll,_=Nre(r,Gat);return!i||!i.length?null:Je.createElement(Rs,{className:"recharts-label-list"},i.map(function(S,E){var I=Gi(s)?n(S,E):nh(S&&S.payload,s),z=Gi(a)?{}:{id:"".concat(a,"-").concat(E)};return Je.createElement(Su,lP({},oa(S,!0),_,z,{parentViewBox:S.parentViewBox,value:I,textBreakAll:p,viewBox:Su.parseViewBox(Gi(f)?S:Fre(Fre({},S),{},{clockWise:f})),key:"label-".concat(E),index:E}))}))}Wv.displayName="LabelList";function rot(e,t){return e?e===!0?Je.createElement(Wv,{key:"labelList-implicit",data:t}):Je.isValidElement(e)||Li(e)?Je.createElement(Wv,{key:"labelList-implicit",data:t,content:e}):cT(e)?Je.createElement(Wv,lP({data:t},e,{key:"labelList-implicit"})):null:null}function iot(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=td(r,Wv).map(function(f,a){return be.cloneElement(f,{data:t,key:"labelList-".concat(a)})});if(!n)return i;var s=rot(e.label,t);return[s].concat(Yat(i))}Wv.renderCallByParent=iot;function EA(e){"@babel/helpers - typeof";return EA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EA(e)}function nU(){return nU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nU.apply(this,arguments)}function Bre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bre(Object(n),!0).forEach(function(r){aot(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aot(e,t,n){return t=oot(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oot(e){var t=sot(e,"string");return EA(t)=="symbol"?t:t+""}function sot(e,t){if(EA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(EA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lot=function(t,n){var r=yp(n-t),i=Math.min(Math.abs(n-t),359.999);return r*i},YM=function(t){var n=t.cx,r=t.cy,i=t.radius,s=t.angle,f=t.sign,a=t.isExternal,p=t.cornerRadius,_=t.cornerIsExternal,S=p*(a?1:-1)+i,E=Math.asin(p/S)/sP,I=_?s:s+f*E,z=tu(n,r,S,I),F=tu(n,r,i,I),U=_?s-f*E:s,k=tu(n,r,S*Math.cos(E*sP),U);return{center:z,circleTangency:F,lineTangency:k,theta:E}},Cge=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,s=t.outerRadius,f=t.startAngle,a=t.endAngle,p=lot(f,a),_=f+p,S=tu(n,r,s,f),E=tu(n,r,s,_),I="M ".concat(S.x,",").concat(S.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(p)>180),",").concat(+(f>_),`,
    `).concat(E.x,",").concat(E.y,`
  `);if(i>0){var z=tu(n,r,i,f),F=tu(n,r,i,_);I+="L ".concat(F.x,",").concat(F.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(p)>180),",").concat(+(f<=_),`,
            `).concat(z.x,",").concat(z.y," Z")}else I+="L ".concat(n,",").concat(r," Z");return I},uot=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,s=t.outerRadius,f=t.cornerRadius,a=t.forceCornerRadius,p=t.cornerIsExternal,_=t.startAngle,S=t.endAngle,E=yp(S-_),I=YM({cx:n,cy:r,radius:s,angle:_,sign:E,cornerRadius:f,cornerIsExternal:p}),z=I.circleTangency,F=I.lineTangency,U=I.theta,k=YM({cx:n,cy:r,radius:s,angle:S,sign:-E,cornerRadius:f,cornerIsExternal:p}),V=k.circleTangency,K=k.lineTangency,J=k.theta,ie=p?Math.abs(_-S):Math.abs(_-S)-U-J;if(ie<0)return a?"M ".concat(F.x,",").concat(F.y,`
        a`).concat(f,",").concat(f,",0,0,1,").concat(f*2,`,0
        a`).concat(f,",").concat(f,",0,0,1,").concat(-f*2,`,0
      `):Cge({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:_,endAngle:S});var Q="M ".concat(F.x,",").concat(F.y,`
    A`).concat(f,",").concat(f,",0,0,").concat(+(E<0),",").concat(z.x,",").concat(z.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(ie>180),",").concat(+(E<0),",").concat(V.x,",").concat(V.y,`
    A`).concat(f,",").concat(f,",0,0,").concat(+(E<0),",").concat(K.x,",").concat(K.y,`
  `);if(i>0){var W=YM({cx:n,cy:r,radius:i,angle:_,sign:E,isExternal:!0,cornerRadius:f,cornerIsExternal:p}),te=W.circleTangency,X=W.lineTangency,ae=W.theta,le=YM({cx:n,cy:r,radius:i,angle:S,sign:-E,isExternal:!0,cornerRadius:f,cornerIsExternal:p}),ge=le.circleTangency,ye=le.lineTangency,De=le.theta,He=p?Math.abs(_-S):Math.abs(_-S)-ae-De;if(He<0&&f===0)return"".concat(Q,"L").concat(n,",").concat(r,"Z");Q+="L".concat(ye.x,",").concat(ye.y,`
      A`).concat(f,",").concat(f,",0,0,").concat(+(E<0),",").concat(ge.x,",").concat(ge.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(He>180),",").concat(+(E>0),",").concat(te.x,",").concat(te.y,`
      A`).concat(f,",").concat(f,",0,0,").concat(+(E<0),",").concat(X.x,",").concat(X.y,"Z")}else Q+="L".concat(n,",").concat(r,"Z");return Q},cot={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Mge=function(t){var n=jre(jre({},cot),t),r=n.cx,i=n.cy,s=n.innerRadius,f=n.outerRadius,a=n.cornerRadius,p=n.forceCornerRadius,_=n.cornerIsExternal,S=n.startAngle,E=n.endAngle,I=n.className;if(f<s||S===E)return null;var z=ri("recharts-sector",I),F=f-s,U=Ax(a,F,0,!0),k;return U>0&&Math.abs(S-E)<360?k=uot({cx:r,cy:i,innerRadius:s,outerRadius:f,cornerRadius:Math.min(U,F/2),forceCornerRadius:p,cornerIsExternal:_,startAngle:S,endAngle:E}):k=Cge({cx:r,cy:i,innerRadius:s,outerRadius:f,startAngle:S,endAngle:E}),Je.createElement("path",nU({},oa(n,!0),{className:z,d:k,role:"img"}))};function AA(e){"@babel/helpers - typeof";return AA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AA(e)}function rU(){return rU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rU.apply(this,arguments)}function Ure(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $re(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ure(Object(n),!0).forEach(function(r){fot(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ure(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fot(e,t,n){return t=hot(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hot(e){var t=dot(e,"string");return AA(t)=="symbol"?t:t+""}function dot(e,t){if(AA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(AA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vre={curveBasisClosed:DKe,curveBasisOpen:IKe,curveBasis:MKe,curveBumpX:mKe,curveBumpY:gKe,curveLinearClosed:PKe,curveLinear:lk,curveMonotoneX:RKe,curveMonotoneY:kKe,curveNatural:LKe,curveStep:zKe,curveStepAfter:NKe,curveStepBefore:FKe},WM=function(t){return t.x===+t.x&&t.y===+t.y},YE=function(t){return t.x},WE=function(t){return t.y},pot=function(t,n){if(Li(t))return t;var r="curve".concat(ok(t));return(r==="curveMonotone"||r==="curveBump")&&n?Vre["".concat(r).concat(n==="vertical"?"Y":"X")]:Vre[r]||lk},mot=function(t){var n=t.type,r=n===void 0?"linear":n,i=t.points,s=i===void 0?[]:i,f=t.baseLine,a=t.layout,p=t.connectNulls,_=p===void 0?!1:p,S=pot(r,a),E=_?s.filter(function(U){return WM(U)}):s,I;if(Array.isArray(f)){var z=_?f.filter(function(U){return WM(U)}):f,F=E.map(function(U,k){return $re($re({},U),{},{base:z[k]})});return a==="vertical"?I=BM().y(WE).x1(YE).x0(function(U){return U.base.x}):I=BM().x(YE).y1(WE).y0(function(U){return U.base.y}),I.defined(WM).curve(S),I(F)}return a==="vertical"&&Xn(f)?I=BM().y(WE).x1(YE).x0(f):Xn(f)?I=BM().x(YE).y1(WE).y0(f):I=kpe().x(YE).y(WE),I.defined(WM).curve(S),I(E)},iU=function(t){var n=t.className,r=t.points,i=t.path,s=t.pathRef;if((!r||!r.length)&&!i)return null;var f=r&&r.length?mot(t):i;return be.createElement("path",rU({},oa(t,!1),RI(t),{className:ri("recharts-curve",n),d:f,ref:s}))};const{getOwnPropertyNames:got,getOwnPropertySymbols:yot}=Object,{hasOwnProperty:_ot}=Object.prototype;function K5(e,t){return function(r,i,s){return e(r,i,s)&&t(r,i,s)}}function XM(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);const{cache:s}=i,f=s.get(n),a=s.get(r);if(f&&a)return f===r&&a===n;s.set(n,r),s.set(r,n);const p=e(n,r,i);return s.delete(n),s.delete(r),p}}function vot(e){return e!=null?e[Symbol.toStringTag]:void 0}function qre(e){return got(e).concat(yot(e))}const bot=Object.hasOwn||((e,t)=>_ot.call(e,t));function Yx(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const xot="__v",wot="__o",Sot="_owner",{getOwnPropertyDescriptor:Hre,keys:Gre}=Object;function Tot(e,t){return e.byteLength===t.byteLength&&uP(new Uint8Array(e),new Uint8Array(t))}function Eot(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Aot(e,t){return e.byteLength===t.byteLength&&uP(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Oot(e,t){return Yx(e.getTime(),t.getTime())}function Cot(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Mot(e,t){return e===t}function Yre(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.entries();let f,a,p=0;for(;(f=s.next())&&!f.done;){const _=t.entries();let S=!1,E=0;for(;(a=_.next())&&!a.done;){if(i[E]){E++;continue}const I=f.value,z=a.value;if(n.equals(I[0],z[0],p,E,e,t,n)&&n.equals(I[1],z[1],I[0],z[0],e,t,n)){S=i[E]=!0;break}E++}if(!S)return!1;p++}return!0}const Dot=Yx;function Iot(e,t,n){const r=Gre(e);let i=r.length;if(Gre(t).length!==i)return!1;for(;i-- >0;)if(!Dge(e,t,n,r[i]))return!1;return!0}function XE(e,t,n){const r=qre(e);let i=r.length;if(qre(t).length!==i)return!1;let s,f,a;for(;i-- >0;)if(s=r[i],!Dge(e,t,n,s)||(f=Hre(e,s),a=Hre(t,s),(f||a)&&(!f||!a||f.configurable!==a.configurable||f.enumerable!==a.enumerable||f.writable!==a.writable)))return!1;return!0}function Pot(e,t){return Yx(e.valueOf(),t.valueOf())}function Rot(e,t){return e.source===t.source&&e.flags===t.flags}function Wre(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.values();let f,a;for(;(f=s.next())&&!f.done;){const p=t.values();let _=!1,S=0;for(;(a=p.next())&&!a.done;){if(!i[S]&&n.equals(f.value,a.value,f.value,a.value,e,t,n)){_=i[S]=!0;break}S++}if(!_)return!1}return!0}function uP(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function kot(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Dge(e,t,n,r){return(r===Sot||r===wot||r===xot)&&(e.$$typeof||t.$$typeof)?!0:bot(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const Lot="[object ArrayBuffer]",zot="[object Arguments]",Fot="[object Boolean]",Not="[object DataView]",Bot="[object Date]",jot="[object Error]",Uot="[object Map]",$ot="[object Number]",Vot="[object Object]",qot="[object RegExp]",Hot="[object Set]",Got="[object String]",Yot={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Wot="[object URL]",Xot=Object.prototype.toString;function Zot({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:f,areNumbersEqual:a,areObjectsEqual:p,arePrimitiveWrappersEqual:_,areRegExpsEqual:S,areSetsEqual:E,areTypedArraysEqual:I,areUrlsEqual:z,unknownTagComparators:F}){return function(k,V,K){if(k===V)return!0;if(k==null||V==null)return!1;const J=typeof k;if(J!==typeof V)return!1;if(J!=="object")return J==="number"?a(k,V,K):J==="function"?s(k,V,K):!1;const ie=k.constructor;if(ie!==V.constructor)return!1;if(ie===Object)return p(k,V,K);if(Array.isArray(k))return t(k,V,K);if(ie===Date)return r(k,V,K);if(ie===RegExp)return S(k,V,K);if(ie===Map)return f(k,V,K);if(ie===Set)return E(k,V,K);const Q=Xot.call(k);if(Q===Bot)return r(k,V,K);if(Q===qot)return S(k,V,K);if(Q===Uot)return f(k,V,K);if(Q===Hot)return E(k,V,K);if(Q===Vot)return typeof k.then!="function"&&typeof V.then!="function"&&p(k,V,K);if(Q===Wot)return z(k,V,K);if(Q===jot)return i(k,V,K);if(Q===zot)return p(k,V,K);if(Yot[Q])return I(k,V,K);if(Q===Lot)return e(k,V,K);if(Q===Not)return n(k,V,K);if(Q===Fot||Q===$ot||Q===Got)return _(k,V,K);if(F){let W=F[Q];if(!W){const te=vot(k);te&&(W=F[te])}if(W)return W(k,V,K)}return!1}}function Kot({circular:e,createCustomConfig:t,strict:n}){let r={areArrayBuffersEqual:Tot,areArraysEqual:n?XE:Eot,areDataViewsEqual:Aot,areDatesEqual:Oot,areErrorsEqual:Cot,areFunctionsEqual:Mot,areMapsEqual:n?K5(Yre,XE):Yre,areNumbersEqual:Dot,areObjectsEqual:n?XE:Iot,arePrimitiveWrappersEqual:Pot,areRegExpsEqual:Rot,areSetsEqual:n?K5(Wre,XE):Wre,areTypedArraysEqual:n?K5(uP,XE):uP,areUrlsEqual:kot,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){const i=XM(r.areArraysEqual),s=XM(r.areMapsEqual),f=XM(r.areObjectsEqual),a=XM(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:f,areSetsEqual:a})}return r}function Qot(e){return function(t,n,r,i,s,f,a){return e(t,n,a)}}function Jot({circular:e,comparator:t,createState:n,equals:r,strict:i}){if(n)return function(a,p){const{cache:_=e?new WeakMap:void 0,meta:S}=n();return t(a,p,{cache:_,equals:r,meta:S,strict:i})};if(e)return function(a,p){return t(a,p,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,p){return t(a,p,s)}}const est=p0();p0({strict:!0});p0({circular:!0});p0({circular:!0,strict:!0});p0({createInternalComparator:()=>Yx});p0({strict:!0,createInternalComparator:()=>Yx});p0({circular:!0,createInternalComparator:()=>Yx});p0({circular:!0,createInternalComparator:()=>Yx,strict:!0});function p0(e={}){const{circular:t=!1,createInternalComparator:n,createState:r,strict:i=!1}=e,s=Kot(e),f=Zot(s),a=n?n(f):Qot(f);return Jot({circular:t,comparator:f,createState:r,equals:a,strict:i})}function tst(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function Xre(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>t?(e(s),n=-1):tst(i)};requestAnimationFrame(r)}function aU(e){"@babel/helpers - typeof";return aU=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aU(e)}function nst(e){return ost(e)||ast(e)||ist(e)||rst()}function rst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ist(e,t){if(e){if(typeof e=="string")return Zre(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zre(e,t)}}function Zre(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ast(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ost(e){if(Array.isArray(e))return e}function sst(){var e={},t=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var f=s,a=nst(f),p=a[0],_=a.slice(1);if(typeof p=="number"){Xre(i.bind(null,_),p);return}i(p),Xre(i.bind(null,_));return}aU(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function OA(e){"@babel/helpers - typeof";return OA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OA(e)}function Kre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kre(Object(n),!0).forEach(function(r){Ige(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ige(e,t,n){return t=lst(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lst(e){var t=ust(e,"string");return OA(t)==="symbol"?t:String(t)}function ust(e,t){if(OA(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(OA(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cst=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},fst=function(t){return t},hst=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},E2=function(t,n){return Object.keys(n).reduce(function(r,i){return Qre(Qre({},r),{},Ige({},i,t(i,n[i])))},{})},Jre=function(t,n,r){return t.map(function(i){return"".concat(hst(i)," ").concat(n,"ms ").concat(r)}).join(",")};function dst(e,t){return gst(e)||mst(e,t)||Pge(e,t)||pst()}function pst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mst(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function gst(e){if(Array.isArray(e))return e}function yst(e){return bst(e)||vst(e)||Pge(e)||_st()}function _st(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pge(e,t){if(e){if(typeof e=="string")return oU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oU(e,t)}}function vst(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bst(e){if(Array.isArray(e))return oU(e)}function oU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cP=1e-4,Rge=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},kge=function(t,n){return t.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},eie=function(t,n){return function(r){var i=Rge(t,n);return kge(i,r)}},xst=function(t,n){return function(r){var i=Rge(t,n),s=[].concat(yst(i.map(function(f,a){return f*a}).slice(1)),[0]);return kge(s,r)}},tie=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],s=n[1],f=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,f=1,a=1;break;case"ease":i=.25,s=.1,f=.25,a=1;break;case"ease-in":i=.42,s=0,f=1,a=1;break;case"ease-out":i=.42,s=0,f=.58,a=1;break;case"ease-in-out":i=0,s=0,f=.58,a=1;break;default:{var p=n[0].split("(");if(p[0]==="cubic-bezier"&&p[1].split(")")[0].split(",").length===4){var _=p[1].split(")")[0].split(",").map(function(k){return parseFloat(k)}),S=dst(_,4);i=S[0],s=S[1],f=S[2],a=S[3]}}}var E=eie(i,f),I=eie(s,a),z=xst(i,f),F=function(V){return V>1?1:V<0?0:V},U=function(V){for(var K=V>1?1:V,J=K,ie=0;ie<8;++ie){var Q=E(J)-K,W=z(J);if(Math.abs(Q-K)<cP||W<cP)return I(J);J=F(J-Q/W)}return I(J)};return U.isStepper=!1,U},wst=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,i=t.damping,s=i===void 0?8:i,f=t.dt,a=f===void 0?17:f,p=function(S,E,I){var z=-(S-E)*r,F=I*s,U=I+(z-F)*a/1e3,k=I*a/1e3+S;return Math.abs(k-E)<cP&&Math.abs(U)<cP?[E,0]:[k,U]};return p.isStepper=!0,p.dt=a,p},Sst=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tie(i);case"spring":return wst();default:if(i.split("(")[0]==="cubic-bezier")return tie(i)}return typeof i=="function"?i:null};function CA(e){"@babel/helpers - typeof";return CA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CA(e)}function nie(e){return Ast(e)||Est(e)||Lge(e)||Tst()}function Tst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Est(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ast(e){if(Array.isArray(e))return lU(e)}function rie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rie(Object(n),!0).forEach(function(r){sU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sU(e,t,n){return t=Ost(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ost(e){var t=Cst(e,"string");return CA(t)==="symbol"?t:String(t)}function Cst(e,t){if(CA(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(CA(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mst(e,t){return Pst(e)||Ist(e,t)||Lge(e,t)||Dst()}function Dst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lge(e,t){if(e){if(typeof e=="string")return lU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lU(e,t)}}function lU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ist(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function Pst(e){if(Array.isArray(e))return e}var fP=function(t,n,r){return t+(n-t)*r},uU=function(t){var n=t.from,r=t.to;return n!==r},Rst=function e(t,n,r){var i=E2(function(s,f){if(uU(f)){var a=t(f.from,f.to,f.velocity),p=Mst(a,2),_=p[0],S=p[1];return Jl(Jl({},f),{},{from:_,velocity:S})}return f},n);return r<1?E2(function(s,f){return uU(f)?Jl(Jl({},f),{},{velocity:fP(f.velocity,i[s].velocity,r),from:fP(f.from,i[s].from,r)}):f},n):e(t,i,r-1)};const kst=(function(e,t,n,r,i){var s=cst(e,t),f=s.reduce(function(k,V){return Jl(Jl({},k),{},sU({},V,[e[V],t[V]]))},{}),a=s.reduce(function(k,V){return Jl(Jl({},k),{},sU({},V,{from:e[V],velocity:0,to:t[V]}))},{}),p=-1,_,S,E=function(){return null},I=function(){return E2(function(V,K){return K.from},a)},z=function(){return!Object.values(a).filter(uU).length},F=function(V){_||(_=V);var K=V-_,J=K/n.dt;a=Rst(n,a,J),i(Jl(Jl(Jl({},e),t),I())),_=V,z()||(p=requestAnimationFrame(E))},U=function(V){S||(S=V);var K=(V-S)/r,J=E2(function(Q,W){return fP.apply(void 0,nie(W).concat([n(K)]))},f);if(i(Jl(Jl(Jl({},e),t),J)),K<1)p=requestAnimationFrame(E);else{var ie=E2(function(Q,W){return fP.apply(void 0,nie(W).concat([n(1)]))},f);i(Jl(Jl(Jl({},e),t),ie))}};return E=n.isStepper?F:U,function(){return requestAnimationFrame(E),function(){cancelAnimationFrame(p)}}});function TS(e){"@babel/helpers - typeof";return TS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TS(e)}var Lst=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function zst(e,t){if(e==null)return{};var n=Fst(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Fst(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Q5(e){return Ust(e)||jst(e)||Bst(e)||Nst()}function Nst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bst(e,t){if(e){if(typeof e=="string")return cU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cU(e,t)}}function jst(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ust(e){if(Array.isArray(e))return cU(e)}function cU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function op(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iie(Object(n),!0).forEach(function(r){u2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u2(e,t,n){return t=zge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $st(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vst(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zge(r.key),r)}}function qst(e,t,n){return t&&Vst(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zge(e){var t=Hst(e,"string");return TS(t)==="symbol"?t:String(t)}function Hst(e,t){if(TS(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(TS(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gst(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fU(e,t)}function fU(e,t){return fU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fU(e,t)}function Yst(e){var t=Wst();return function(){var r=hP(e),i;if(t){var s=hP(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return hU(this,i)}}function hU(e,t){if(t&&(TS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dU(e)}function dU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wst(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hP(e){return hP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hP(e)}var l_=(function(e){Gst(n,e);var t=Yst(n);function n(r,i){var s;$st(this,n),s=t.call(this,r,i);var f=s.props,a=f.isActive,p=f.attributeName,_=f.from,S=f.to,E=f.steps,I=f.children,z=f.duration;if(s.handleStyleChange=s.handleStyleChange.bind(dU(s)),s.changeStyle=s.changeStyle.bind(dU(s)),!a||z<=0)return s.state={style:{}},typeof I=="function"&&(s.state={style:S}),hU(s);if(E&&E.length)s.state={style:E[0].style};else if(_){if(typeof I=="function")return s.state={style:_},hU(s);s.state={style:p?u2({},p,_):_}}else s.state={style:{}};return s}return qst(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,f=i.canBegin;this.mounted=!0,!(!s||!f)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,f=s.isActive,a=s.canBegin,p=s.attributeName,_=s.shouldReAnimate,S=s.to,E=s.from,I=this.state.style;if(a){if(!f){var z={style:p?u2({},p,S):S};this.state&&I&&(p&&I[p]!==S||!p&&I!==S)&&this.setState(z);return}if(!(est(i.to,S)&&i.canBegin&&i.isActive)){var F=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var U=F||_?E:i.to;if(this.state&&I){var k={style:p?u2({},p,U):U};(p&&I[p]!==U||!p&&I!==U)&&this.setState(k)}this.runAnimation(op(op({},this.props),{},{from:U,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,f=i.from,a=i.to,p=i.duration,_=i.easing,S=i.begin,E=i.onAnimationEnd,I=i.onAnimationStart,z=kst(f,a,Sst(_),p,this.changeStyle),F=function(){s.stopJSAnimation=z()};this.manager.start([I,S,F,p,E])}},{key:"runStepAnimation",value:function(i){var s=this,f=i.steps,a=i.begin,p=i.onAnimationStart,_=f[0],S=_.style,E=_.duration,I=E===void 0?0:E,z=function(U,k,V){if(V===0)return U;var K=k.duration,J=k.easing,ie=J===void 0?"ease":J,Q=k.style,W=k.properties,te=k.onAnimationEnd,X=V>0?f[V-1]:k,ae=W||Object.keys(Q);if(typeof ie=="function"||ie==="spring")return[].concat(Q5(U),[s.runJSAnimation.bind(s,{from:X.style,to:Q,duration:K,easing:ie}),K]);var le=Jre(ae,K,ie),ge=op(op(op({},X.style),Q),{},{transition:le});return[].concat(Q5(U),[ge,K,te]).filter(fst)};return this.manager.start([p].concat(Q5(f.reduce(z,[S,Math.max(I,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=sst());var s=i.begin,f=i.duration,a=i.attributeName,p=i.to,_=i.easing,S=i.onAnimationStart,E=i.onAnimationEnd,I=i.steps,z=i.children,F=this.manager;if(this.unSubscribe=F.subscribe(this.handleStyleChange),typeof _=="function"||typeof z=="function"||_==="spring"){this.runJSAnimation(i);return}if(I.length>1){this.runStepAnimation(i);return}var U=a?u2({},a,p):p,k=Jre(Object.keys(U),f,_);F.start([S,s,op(op({},U),{},{transition:k}),f,E])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var f=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var p=zst(i,Lst),_=be.Children.count(s),S=this.state.style;if(typeof s=="function")return s(S);if(!a||_===0||f<=0)return s;var E=function(z){var F=z.props,U=F.style,k=U===void 0?{}:U,V=F.className,K=be.cloneElement(z,op(op({},p),{},{style:op(op({},k),S),className:V}));return K};return _===1?E(be.Children.only(s)):Je.createElement("div",null,be.Children.map(s,function(I){return E(I)}))}}]),n})(be.PureComponent);l_.displayName="Animate";l_.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};l_.propTypes={from:Bn.oneOfType([Bn.object,Bn.string]),to:Bn.oneOfType([Bn.object,Bn.string]),attributeName:Bn.string,duration:Bn.number,begin:Bn.number,easing:Bn.oneOfType([Bn.string,Bn.func]),steps:Bn.arrayOf(Bn.shape({duration:Bn.number.isRequired,style:Bn.object.isRequired,easing:Bn.oneOfType([Bn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Bn.func]),properties:Bn.arrayOf("string"),onAnimationEnd:Bn.func})),children:Bn.oneOfType([Bn.node,Bn.func]),isActive:Bn.bool,canBegin:Bn.bool,onAnimationEnd:Bn.func,shouldReAnimate:Bn.bool,onAnimationStart:Bn.func,onAnimationReStart:Bn.func};function MA(e){"@babel/helpers - typeof";return MA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MA(e)}function dP(){return dP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dP.apply(this,arguments)}function Xst(e,t){return Jst(e)||Qst(e,t)||Kst(e,t)||Zst()}function Zst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kst(e,t){if(e){if(typeof e=="string")return aie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aie(e,t)}}function aie(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qst(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function Jst(e){if(Array.isArray(e))return e}function oie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oie(Object(n),!0).forEach(function(r){elt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function elt(e,t,n){return t=tlt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tlt(e){var t=nlt(e,"string");return MA(t)=="symbol"?t:t+""}function nlt(e,t){if(MA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(MA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lie=function(t,n,r,i,s){var f=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,p=r>=0?1:-1,_=i>=0&&r>=0||i<0&&r<0?1:0,S;if(f>0&&s instanceof Array){for(var E=[0,0,0,0],I=0,z=4;I<z;I++)E[I]=s[I]>f?f:s[I];S="M".concat(t,",").concat(n+a*E[0]),E[0]>0&&(S+="A ".concat(E[0],",").concat(E[0],",0,0,").concat(_,",").concat(t+p*E[0],",").concat(n)),S+="L ".concat(t+r-p*E[1],",").concat(n),E[1]>0&&(S+="A ".concat(E[1],",").concat(E[1],",0,0,").concat(_,`,
        `).concat(t+r,",").concat(n+a*E[1])),S+="L ".concat(t+r,",").concat(n+i-a*E[2]),E[2]>0&&(S+="A ".concat(E[2],",").concat(E[2],",0,0,").concat(_,`,
        `).concat(t+r-p*E[2],",").concat(n+i)),S+="L ".concat(t+p*E[3],",").concat(n+i),E[3]>0&&(S+="A ".concat(E[3],",").concat(E[3],",0,0,").concat(_,`,
        `).concat(t,",").concat(n+i-a*E[3])),S+="Z"}else if(f>0&&s===+s&&s>0){var F=Math.min(f,s);S="M ".concat(t,",").concat(n+a*F,`
            A `).concat(F,",").concat(F,",0,0,").concat(_,",").concat(t+p*F,",").concat(n,`
            L `).concat(t+r-p*F,",").concat(n,`
            A `).concat(F,",").concat(F,",0,0,").concat(_,",").concat(t+r,",").concat(n+a*F,`
            L `).concat(t+r,",").concat(n+i-a*F,`
            A `).concat(F,",").concat(F,",0,0,").concat(_,",").concat(t+r-p*F,",").concat(n+i,`
            L `).concat(t+p*F,",").concat(n+i,`
            A `).concat(F,",").concat(F,",0,0,").concat(_,",").concat(t,",").concat(n+i-a*F," Z")}else S="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return S},rlt=function(t,n){if(!t||!n)return!1;var r=t.x,i=t.y,s=n.x,f=n.y,a=n.width,p=n.height;if(Math.abs(a)>0&&Math.abs(p)>0){var _=Math.min(s,s+a),S=Math.max(s,s+a),E=Math.min(f,f+p),I=Math.max(f,f+p);return r>=_&&r<=S&&i>=E&&i<=I}return!1},ilt={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Yq=function(t){var n=sie(sie({},ilt),t),r=be.useRef(),i=be.useState(-1),s=Xst(i,2),f=s[0],a=s[1];be.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var ie=r.current.getTotalLength();ie&&a(ie)}catch{}},[]);var p=n.x,_=n.y,S=n.width,E=n.height,I=n.radius,z=n.className,F=n.animationEasing,U=n.animationDuration,k=n.animationBegin,V=n.isAnimationActive,K=n.isUpdateAnimationActive;if(p!==+p||_!==+_||S!==+S||E!==+E||S===0||E===0)return null;var J=ri("recharts-rectangle",z);return K?Je.createElement(l_,{canBegin:f>0,from:{width:S,height:E,x:p,y:_},to:{width:S,height:E,x:p,y:_},duration:U,animationEasing:F,isActive:K},function(ie){var Q=ie.width,W=ie.height,te=ie.x,X=ie.y;return Je.createElement(l_,{canBegin:f>0,from:"0px ".concat(f===-1?1:f,"px"),to:"".concat(f,"px 0px"),attributeName:"strokeDasharray",begin:k,duration:U,isActive:V,easing:F},Je.createElement("path",dP({},oa(n,!0),{className:J,d:lie(te,X,Q,W,I),ref:r})))}):Je.createElement("path",dP({},oa(n,!0),{className:J,d:lie(p,_,S,E,I)}))};function pU(){return pU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pU.apply(this,arguments)}var Wq=function(t){var n=t.cx,r=t.cy,i=t.r,s=t.className,f=ri("recharts-dot",s);return n===+n&&r===+r&&i===+i?be.createElement("circle",pU({},oa(t,!1),RI(t),{className:f,cx:n,cy:r,r:i})):null};function DA(e){"@babel/helpers - typeof";return DA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DA(e)}var alt=["x","y","top","left","width","height","className"];function mU(){return mU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mU.apply(this,arguments)}function uie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function olt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uie(Object(n),!0).forEach(function(r){slt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function slt(e,t,n){return t=llt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function llt(e){var t=ult(e,"string");return DA(t)=="symbol"?t:t+""}function ult(e,t){if(DA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(DA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function clt(e,t){if(e==null)return{};var n=flt(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function flt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var hlt=function(t,n,r,i,s,f){return"M".concat(t,",").concat(s,"v").concat(i,"M").concat(f,",").concat(n,"h").concat(r)},dlt=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,s=i===void 0?0:i,f=t.top,a=f===void 0?0:f,p=t.left,_=p===void 0?0:p,S=t.width,E=S===void 0?0:S,I=t.height,z=I===void 0?0:I,F=t.className,U=clt(t,alt),k=olt({x:r,y:s,top:a,left:_,width:E,height:z},U);return!Xn(r)||!Xn(s)||!Xn(E)||!Xn(z)||!Xn(a)||!Xn(_)?null:Je.createElement("path",mU({},oa(k,!0),{className:ri("recharts-cross",F),d:hlt(r,s,E,z,a,_)}))},J5,cie;function plt(){if(cie)return J5;cie=1;var e=rme(),t=e(Object.getPrototypeOf,Object);return J5=t,J5}var e4,fie;function mlt(){if(fie)return e4;fie=1;var e=y_(),t=plt(),n=__(),r="[object Object]",i=Function.prototype,s=Object.prototype,f=i.toString,a=s.hasOwnProperty,p=f.call(Object);function _(S){if(!n(S)||e(S)!=r)return!1;var E=t(S);if(E===null)return!0;var I=a.call(E,"constructor")&&E.constructor;return typeof I=="function"&&I instanceof I&&f.call(I)==p}return e4=_,e4}var glt=mlt();const ylt=ga(glt);var t4,hie;function _lt(){if(hie)return t4;hie=1;var e=y_(),t=__(),n="[object Boolean]";function r(i){return i===!0||i===!1||t(i)&&e(i)==n}return t4=r,t4}var vlt=_lt();const blt=ga(vlt);function IA(e){"@babel/helpers - typeof";return IA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IA(e)}function pP(){return pP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pP.apply(this,arguments)}function xlt(e,t){return Elt(e)||Tlt(e,t)||Slt(e,t)||wlt()}function wlt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Slt(e,t){if(e){if(typeof e=="string")return die(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return die(e,t)}}function die(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tlt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function Elt(e){if(Array.isArray(e))return e}function pie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pie(Object(n),!0).forEach(function(r){Alt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Alt(e,t,n){return t=Olt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Olt(e){var t=Clt(e,"string");return IA(t)=="symbol"?t:t+""}function Clt(e,t){if(IA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(IA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gie=function(t,n,r,i,s){var f=r-i,a;return a="M ".concat(t,",").concat(n),a+="L ".concat(t+r,",").concat(n),a+="L ".concat(t+r-f/2,",").concat(n+s),a+="L ".concat(t+r-f/2-i,",").concat(n+s),a+="L ".concat(t,",").concat(n," Z"),a},Mlt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Dlt=function(t){var n=mie(mie({},Mlt),t),r=be.useRef(),i=be.useState(-1),s=xlt(i,2),f=s[0],a=s[1];be.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var J=r.current.getTotalLength();J&&a(J)}catch{}},[]);var p=n.x,_=n.y,S=n.upperWidth,E=n.lowerWidth,I=n.height,z=n.className,F=n.animationEasing,U=n.animationDuration,k=n.animationBegin,V=n.isUpdateAnimationActive;if(p!==+p||_!==+_||S!==+S||E!==+E||I!==+I||S===0&&E===0||I===0)return null;var K=ri("recharts-trapezoid",z);return V?Je.createElement(l_,{canBegin:f>0,from:{upperWidth:0,lowerWidth:0,height:I,x:p,y:_},to:{upperWidth:S,lowerWidth:E,height:I,x:p,y:_},duration:U,animationEasing:F,isActive:V},function(J){var ie=J.upperWidth,Q=J.lowerWidth,W=J.height,te=J.x,X=J.y;return Je.createElement(l_,{canBegin:f>0,from:"0px ".concat(f===-1?1:f,"px"),to:"".concat(f,"px 0px"),attributeName:"strokeDasharray",begin:k,duration:U,easing:F},Je.createElement("path",pP({},oa(n,!0),{className:K,d:gie(te,X,ie,Q,W),ref:r})))}):Je.createElement("g",null,Je.createElement("path",pP({},oa(n,!0),{className:K,d:gie(p,_,S,E,I)})))},Ilt=["option","shapeType","propTransformer","activeClassName","isActive"];function PA(e){"@babel/helpers - typeof";return PA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PA(e)}function Plt(e,t){if(e==null)return{};var n=Rlt(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Rlt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function yie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yie(Object(n),!0).forEach(function(r){klt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function klt(e,t,n){return t=Llt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Llt(e){var t=zlt(e,"string");return PA(t)=="symbol"?t:t+""}function zlt(e,t){if(PA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(PA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Flt(e,t){return mP(mP({},t),e)}function Nlt(e,t){return e==="symbols"}function _ie(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Je.createElement(Yq,n);case"trapezoid":return Je.createElement(Dlt,n);case"sector":return Je.createElement(Mge,n);case"symbols":if(Nlt(t))return Je.createElement(hq,n);break;default:return null}}function Blt(e){return be.isValidElement(e)?e.props:e}function jlt(e){var t=e.option,n=e.shapeType,r=e.propTransformer,i=r===void 0?Flt:r,s=e.activeClassName,f=s===void 0?"recharts-active-shape":s,a=e.isActive,p=Plt(e,Ilt),_;if(be.isValidElement(t))_=be.cloneElement(t,mP(mP({},p),Blt(t)));else if(Li(t))_=t(p);else if(ylt(t)&&!blt(t)){var S=i(t,p);_=Je.createElement(_ie,{shapeType:n,elementProps:S})}else{var E=p;_=Je.createElement(_ie,{shapeType:n,elementProps:E})}return a?Je.createElement(Rs,{className:f},_):_}function Tk(e,t){return t!=null&&"trapezoids"in e.props}function Ek(e,t){return t!=null&&"sectors"in e.props}function RA(e,t){return t!=null&&"points"in e.props}function Ult(e,t){var n,r,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,s=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return i&&s}function $lt(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function Vlt(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function qlt(e,t){var n;return Tk(e,t)?n=Ult:Ek(e,t)?n=$lt:RA(e,t)&&(n=Vlt),n}function Hlt(e,t){var n;return Tk(e,t)?n="trapezoids":Ek(e,t)?n="sectors":RA(e,t)&&(n="points"),n}function Glt(e,t){if(Tk(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Ek(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return RA(e,t)?t.payload:{}}function Ylt(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=Hlt(n,t),s=Glt(n,t),f=r.filter(function(p,_){var S=xk(s,p),E=n.props[i].filter(function(F){var U=qlt(n,t);return U(F,t)}),I=n.props[i].indexOf(E[E.length-1]),z=_===I;return S&&z}),a=r.indexOf(f[f.length-1]);return a}var n4,vie;function Wlt(){if(vie)return n4;vie=1;var e=Math.ceil,t=Math.max;function n(r,i,s,f){for(var a=-1,p=t(e((i-r)/(s||1)),0),_=Array(p);p--;)_[f?p:++a]=r,r+=s;return _}return n4=n,n4}var r4,bie;function Fge(){if(bie)return r4;bie=1;var e=vme(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return r4=r,r4}var i4,xie;function Xlt(){if(xie)return i4;xie=1;var e=Wlt(),t=hk(),n=Fge();function r(i){return function(s,f,a){return a&&typeof a!="number"&&t(s,f,a)&&(f=a=void 0),s=n(s),f===void 0?(f=s,s=0):f=n(f),a=a===void 0?s<f?1:-1:n(a),e(s,f,a,i)}}return i4=r,i4}var a4,wie;function Zlt(){if(wie)return a4;wie=1;var e=Xlt(),t=e();return a4=t,a4}var Klt=Zlt();const gP=ga(Klt);function kA(e){"@babel/helpers - typeof";return kA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kA(e)}function Sie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sie(Object(n),!0).forEach(function(r){Nge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nge(e,t,n){return t=Qlt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qlt(e){var t=Jlt(e,"string");return kA(t)=="symbol"?t:t+""}function Jlt(e,t){if(kA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eut=["Webkit","Moz","O","ms"],tut=function(t,n){var r=t.replace(/(\w)/,function(s){return s.toUpperCase()}),i=eut.reduce(function(s,f){return Tie(Tie({},s),{},Nge({},f+r,n))},{});return i[t]=n,i};function ES(e){"@babel/helpers - typeof";return ES=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ES(e)}function yP(){return yP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yP.apply(this,arguments)}function Eie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function o4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Eie(Object(n),!0).forEach(function(r){qf(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jge(r.key),r)}}function rut(e,t,n){return t&&Aie(e.prototype,t),n&&Aie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function iut(e,t,n){return t=_P(t),aut(e,Bge()?Reflect.construct(t,n||[],_P(e).constructor):t.apply(e,n))}function aut(e,t){if(t&&(ES(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return out(e)}function out(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bge=function(){return!!e})()}function _P(e){return _P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_P(e)}function sut(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gU(e,t)}function gU(e,t){return gU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gU(e,t)}function qf(e,t,n){return t=jge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jge(e){var t=lut(e,"string");return ES(t)=="symbol"?t:t+""}function lut(e,t){if(ES(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ES(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var uut=function(t){var n=t.data,r=t.startIndex,i=t.endIndex,s=t.x,f=t.width,a=t.travellerWidth;if(!n||!n.length)return{};var p=n.length,_=S2().domain(gP(0,p)).range([s,s+f-a]),S=_.domain().map(function(E){return _(E)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:_(r),endX:_(i),scale:_,scaleValues:S}},Oie=function(t){return t.changedTouches&&!!t.changedTouches.length},AS=(function(e){function t(n){var r;return nut(this,t),r=iut(this,t,[n]),qf(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),qf(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),qf(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,f=i.onDragEnd,a=i.startIndex;f==null||f({endIndex:s,startIndex:a})}),r.detachDragEndListener()}),qf(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),qf(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),qf(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),qf(r,"handleSlideDragStart",function(i){var s=Oie(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return sut(t,e),rut(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,f=this.state.scaleValues,a=this.props,p=a.gap,_=a.data,S=_.length-1,E=Math.min(i,s),I=Math.max(i,s),z=t.getIndexInRange(f,E),F=t.getIndexInRange(f,I);return{startIndex:z-z%p,endIndex:F===S?S:F-F%p}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,f=i.tickFormatter,a=i.dataKey,p=nh(s[r],a,r);return Li(f)?f(p,r):p}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,f=i.startX,a=i.endX,p=this.props,_=p.x,S=p.width,E=p.travellerWidth,I=p.startIndex,z=p.endIndex,F=p.onChange,U=r.pageX-s;U>0?U=Math.min(U,_+S-E-a,_+S-E-f):U<0&&(U=Math.max(U,_-f,_-a));var k=this.getIndex({startX:f+U,endX:a+U});(k.startIndex!==I||k.endIndex!==z)&&F&&F(k),this.setState({startX:f+U,endX:a+U,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=Oie(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,f=i.movingTravellerId,a=i.endX,p=i.startX,_=this.state[f],S=this.props,E=S.x,I=S.width,z=S.travellerWidth,F=S.onChange,U=S.gap,k=S.data,V={startX:this.state.startX,endX:this.state.endX},K=r.pageX-s;K>0?K=Math.min(K,E+I-z-_):K<0&&(K=Math.max(K,E-_)),V[f]=_+K;var J=this.getIndex(V),ie=J.startIndex,Q=J.endIndex,W=function(){var X=k.length-1;return f==="startX"&&(a>p?ie%U===0:Q%U===0)||a<p&&Q===X||f==="endX"&&(a>p?Q%U===0:ie%U===0)||a>p&&Q===X};this.setState(qf(qf({},f,_+K),"brushMoveStartX",r.pageX),function(){F&&W()&&F(J)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,f=this.state,a=f.scaleValues,p=f.startX,_=f.endX,S=this.state[i],E=a.indexOf(S);if(E!==-1){var I=E+r;if(!(I===-1||I>=a.length)){var z=a[I];i==="startX"&&z>=_||i==="endX"&&z<=p||this.setState(qf({},i,z),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,f=r.width,a=r.height,p=r.fill,_=r.stroke;return Je.createElement("rect",{stroke:_,fill:p,x:i,y:s,width:f,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,f=r.width,a=r.height,p=r.data,_=r.children,S=r.padding,E=be.Children.only(_);return E?Je.cloneElement(E,{x:i,y:s,width:f,height:a,margin:S,compact:!0,data:p}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,f,a=this,p=this.props,_=p.y,S=p.travellerWidth,E=p.height,I=p.traveller,z=p.ariaLabel,F=p.data,U=p.startIndex,k=p.endIndex,V=Math.max(r,this.props.x),K=o4(o4({},oa(this.props,!1)),{},{x:V,y:_,width:S,height:E}),J=z||"Min value: ".concat((s=F[U])===null||s===void 0?void 0:s.name,", Max value: ").concat((f=F[k])===null||f===void 0?void 0:f.name);return Je.createElement(Rs,{tabIndex:0,role:"slider","aria-label":J,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(Q){["ArrowLeft","ArrowRight"].includes(Q.key)&&(Q.preventDefault(),Q.stopPropagation(),a.handleTravellerMoveKeyboard(Q.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(I,K))}},{key:"renderSlide",value:function(r,i){var s=this.props,f=s.y,a=s.height,p=s.stroke,_=s.travellerWidth,S=Math.min(r,i)+_,E=Math.max(Math.abs(i-r)-_,0);return Je.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:p,fillOpacity:.2,x:S,y:f,width:E,height:a})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,f=r.y,a=r.height,p=r.travellerWidth,_=r.stroke,S=this.state,E=S.startX,I=S.endX,z=5,F={pointerEvents:"none",fill:_};return Je.createElement(Rs,{className:"recharts-brush-texts"},Je.createElement(HI,yP({textAnchor:"end",verticalAnchor:"middle",x:Math.min(E,I)-z,y:f+a/2},F),this.getTextOfTick(i)),Je.createElement(HI,yP({textAnchor:"start",verticalAnchor:"middle",x:Math.max(E,I)+p+z,y:f+a/2},F),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,f=r.children,a=r.x,p=r.y,_=r.width,S=r.height,E=r.alwaysShowText,I=this.state,z=I.startX,F=I.endX,U=I.isTextActive,k=I.isSlideMoving,V=I.isTravellerMoving,K=I.isTravellerFocused;if(!i||!i.length||!Xn(a)||!Xn(p)||!Xn(_)||!Xn(S)||_<=0||S<=0)return null;var J=ri("recharts-brush",s),ie=Je.Children.count(f)===1,Q=tut("userSelect","none");return Je.createElement(Rs,{className:J,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:Q},this.renderBackground(),ie&&this.renderPanorama(),this.renderSlide(z,F),this.renderTravellerLayer(z,"startX"),this.renderTravellerLayer(F,"endX"),(U||k||V||K||E)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,f=r.width,a=r.height,p=r.stroke,_=Math.floor(s+a/2)-1;return Je.createElement(Je.Fragment,null,Je.createElement("rect",{x:i,y:s,width:f,height:a,fill:p,stroke:"none"}),Je.createElement("line",{x1:i+1,y1:_,x2:i+f-1,y2:_,fill:"none",stroke:"#fff"}),Je.createElement("line",{x1:i+1,y1:_+2,x2:i+f-1,y2:_+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return Je.isValidElement(r)?s=Je.cloneElement(r,i):Li(r)?s=r(i):s=t.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,f=r.width,a=r.x,p=r.travellerWidth,_=r.updateId,S=r.startIndex,E=r.endIndex;if(s!==i.prevData||_!==i.prevUpdateId)return o4({prevData:s,prevTravellerWidth:p,prevUpdateId:_,prevX:a,prevWidth:f},s&&s.length?uut({data:s,width:f,x:a,travellerWidth:p,startIndex:S,endIndex:E}):{scale:null,scaleValues:null});if(i.scale&&(f!==i.prevWidth||a!==i.prevX||p!==i.prevTravellerWidth)){i.scale.range([a,a+f-p]);var I=i.scale.domain().map(function(z){return i.scale(z)});return{prevData:s,prevTravellerWidth:p,prevUpdateId:_,prevX:a,prevWidth:f,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:I}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,f=0,a=s-1;a-f>1;){var p=Math.floor((f+a)/2);r[p]>i?a=p:f=p}return i>=r[a]?a:f}}])})(be.PureComponent);qf(AS,"displayName","Brush");qf(AS,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var s4,Cie;function cut(){if(Cie)return s4;Cie=1;var e=vq();function t(n,r){var i;return e(n,function(s,f,a){return i=r(s,f,a),!i}),!!i}return s4=t,s4}var l4,Mie;function fut(){if(Mie)return l4;Mie=1;var e=Zpe(),t=f0(),n=cut(),r=sf(),i=hk();function s(f,a,p){var _=r(f)?e:n;return p&&i(f,a,p)&&(a=void 0),_(f,t(a,3))}return l4=s,l4}var hut=fut();const dut=ga(hut);var ag=function(t,n){var r=t.alwaysShow,i=t.ifOverflow;return r&&(i="extendDomain"),i===n},u4,Die;function put(){if(Die)return u4;Die=1;var e=pme();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return u4=t,u4}var c4,Iie;function mut(){if(Iie)return c4;Iie=1;var e=put(),t=hme(),n=f0();function r(i,s){var f={};return s=n(s,3),t(i,function(a,p,_){e(f,p,s(a,p,_))}),f}return c4=r,c4}var gut=mut();const yut=ga(gut);var f4,Pie;function _ut(){if(Pie)return f4;Pie=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(!n(t[r],r,t))return!1;return!0}return f4=e,f4}var h4,Rie;function vut(){if(Rie)return h4;Rie=1;var e=vq();function t(n,r){var i=!0;return e(n,function(s,f,a){return i=!!r(s,f,a),i}),i}return h4=t,h4}var d4,kie;function but(){if(kie)return d4;kie=1;var e=_ut(),t=vut(),n=f0(),r=sf(),i=hk();function s(f,a,p){var _=r(f)?e:t;return p&&i(f,a,p)&&(a=void 0),_(f,n(a,3))}return d4=s,d4}var xut=but();const Uge=ga(xut);var wut=["x","y"];function LA(e){"@babel/helpers - typeof";return LA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LA(e)}function yU(){return yU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yU.apply(this,arguments)}function Lie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lie(Object(n),!0).forEach(function(r){Sut(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sut(e,t,n){return t=Tut(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tut(e){var t=Eut(e,"string");return LA(t)=="symbol"?t:t+""}function Eut(e,t){if(LA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(LA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aut(e,t){if(e==null)return{};var n=Out(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Out(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Cut(e,t){var n=e.x,r=e.y,i=Aut(e,wut),s="".concat(n),f=parseInt(s,10),a="".concat(r),p=parseInt(a,10),_="".concat(t.height||i.height),S=parseInt(_,10),E="".concat(t.width||i.width),I=parseInt(E,10);return ZE(ZE(ZE(ZE(ZE({},t),i),f?{x:f}:{}),p?{y:p}:{}),{},{height:S,width:I,name:t.name,radius:t.radius})}function zie(e){return Je.createElement(jlt,yU({shapeType:"rectangle",propTransformer:Cut,activeClassName:"recharts-active-bar"},e))}var Mut=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof t=="number")return t;var s=Xn(r)||zZe(r);return s?t(r,i):(s||Cx(),n)}},Dut=["value","background"],$ge;function OS(e){"@babel/helpers - typeof";return OS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OS(e)}function Iut(e,t){if(e==null)return{};var n=Put(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Put(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vP(){return vP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vP.apply(this,arguments)}function Fie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fie(Object(n),!0).forEach(function(r){Uv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qge(r.key),r)}}function kut(e,t,n){return t&&Nie(e.prototype,t),n&&Nie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lut(e,t,n){return t=bP(t),zut(e,Vge()?Reflect.construct(t,n||[],bP(e).constructor):t.apply(e,n))}function zut(e,t){if(t&&(OS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fut(e)}function Fut(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vge=function(){return!!e})()}function bP(e){return bP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bP(e)}function Nut(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_U(e,t)}function _U(e,t){return _U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_U(e,t)}function Uv(e,t,n){return t=qge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qge(e){var t=But(e,"string");return OS(t)=="symbol"?t:t+""}function But(e,t){if(OS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(OS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var BO=(function(e){function t(){var n;Rut(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Lut(this,t,[].concat(i)),Uv(n,"state",{isAnimationFinished:!1}),Uv(n,"id",PO("recharts-bar-")),Uv(n,"handleAnimationEnd",function(){var f=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),f&&f()}),Uv(n,"handleAnimationStart",function(){var f=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),f&&f()}),n}return Nut(t,e),kut(t,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,f=s.shape,a=s.dataKey,p=s.activeIndex,_=s.activeBar,S=oa(this.props,!1);return r&&r.map(function(E,I){var z=I===p,F=z?_:f,U=Xs(Xs(Xs({},S),E),{},{isActive:z,option:F,index:I,dataKey:a,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Je.createElement(Rs,vP({className:"recharts-bar-rectangle"},kI(i.props,E,I),{key:"rectangle-".concat(E==null?void 0:E.x,"-").concat(E==null?void 0:E.y,"-").concat(E==null?void 0:E.value,"-").concat(I)}),Je.createElement(zie,U))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,f=i.layout,a=i.isAnimationActive,p=i.animationBegin,_=i.animationDuration,S=i.animationEasing,E=i.animationId,I=this.state.prevData;return Je.createElement(l_,{begin:p,duration:_,isActive:a,easing:S,from:{t:0},to:{t:1},key:"bar-".concat(E),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(z){var F=z.t,U=s.map(function(k,V){var K=I&&I[V];if(K){var J=fp(K.x,k.x),ie=fp(K.y,k.y),Q=fp(K.width,k.width),W=fp(K.height,k.height);return Xs(Xs({},k),{},{x:J(F),y:ie(F),width:Q(F),height:W(F)})}if(f==="horizontal"){var te=fp(0,k.height),X=te(F);return Xs(Xs({},k),{},{y:k.y+k.height-X,height:X})}var ae=fp(0,k.width),le=ae(F);return Xs(Xs({},k),{},{width:le})});return Je.createElement(Rs,null,r.renderRectanglesStatically(U))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,f=this.state.prevData;return s&&i&&i.length&&(!f||!xk(f,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,f=i.dataKey,a=i.activeIndex,p=oa(this.props.background,!1);return s.map(function(_,S){_.value;var E=_.background,I=Iut(_,Dut);if(!E)return null;var z=Xs(Xs(Xs(Xs(Xs({},I),{},{fill:"#eee"},E),p),kI(r.props,_,S)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:f,index:S,className:"recharts-bar-background-rectangle"});return Je.createElement(zie,vP({key:"background-bar-".concat(S),option:r.props.background,isActive:S===a},z))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,f=s.data,a=s.xAxis,p=s.yAxis,_=s.layout,S=s.children,E=td(S,NO);if(!E)return null;var I=_==="vertical"?f[0].height/2:f[0].width/2,z=function(k,V){var K=Array.isArray(k.value)?k.value[1]:k.value;return{x:k.x,y:k.y,value:K,errorVal:nh(k,V)}},F={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Je.createElement(Rs,F,E.map(function(U){return Je.cloneElement(U,{key:"error-bar-".concat(i,"-").concat(U.props.dataKey),data:f,xAxis:a,yAxis:p,layout:_,offset:I,dataPointFormatter:z})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,f=r.className,a=r.xAxis,p=r.yAxis,_=r.left,S=r.top,E=r.width,I=r.height,z=r.isAnimationActive,F=r.background,U=r.id;if(i||!s||!s.length)return null;var k=this.state.isAnimationFinished,V=ri("recharts-bar",f),K=a&&a.allowDataOverflow,J=p&&p.allowDataOverflow,ie=K||J,Q=Gi(U)?this.id:U;return Je.createElement(Rs,{className:V},K||J?Je.createElement("defs",null,Je.createElement("clipPath",{id:"clipPath-".concat(Q)},Je.createElement("rect",{x:K?_:_-E/2,y:J?S:S-I/2,width:K?E:E*2,height:J?I:I*2}))):null,Je.createElement(Rs,{className:"recharts-bar-rectangles",clipPath:ie?"url(#clipPath-".concat(Q,")"):null},F?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ie,Q),(!z||k)&&Wv.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(be.PureComponent);$ge=BO;Uv(BO,"displayName","Bar");Uv(BO,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!hT.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Uv(BO,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,s=e.xAxis,f=e.yAxis,a=e.xAxisTicks,p=e.yAxisTicks,_=e.stackedData,S=e.dataStartIndex,E=e.displayedData,I=e.offset,z=iat(r,n);if(!z)return null;var F=t.layout,U=n.type.defaultProps,k=U!==void 0?Xs(Xs({},U),n.props):n.props,V=k.dataKey,K=k.children,J=k.minPointSize,ie=F==="horizontal"?f:s,Q=_?ie.scale.domain():null,W=hat({numericAxis:ie}),te=td(K,xme),X=E.map(function(ae,le){var ge,ye,De,He,Be,Ee;_?ge=aat(_[S+le],Q):(ge=nh(ae,V),Array.isArray(ge)||(ge=[W,ge]));var Ne=Mut(J,$ge.defaultProps.minPointSize)(ge[1],le);if(F==="horizontal"){var at,yt=[f.scale(ge[0]),f.scale(ge[1])],je=yt[0],Ke=yt[1];ye=Ore({axis:s,ticks:a,bandSize:i,offset:z.offset,entry:ae,index:le}),De=(at=Ke??je)!==null&&at!==void 0?at:void 0,He=z.size;var it=je-Ke;if(Be=Number.isNaN(it)?0:it,Ee={x:ye,y:f.y,width:He,height:f.height},Math.abs(Ne)>0&&Math.abs(Be)<Math.abs(Ne)){var Pe=yp(Be||Ne)*(Math.abs(Ne)-Math.abs(Be));De-=Pe,Be+=Pe}}else{var jt=[s.scale(ge[0]),s.scale(ge[1])],sn=jt[0],dn=jt[1];if(ye=sn,De=Ore({axis:f,ticks:p,bandSize:i,offset:z.offset,entry:ae,index:le}),He=dn-sn,Be=z.size,Ee={x:s.x,y:De,width:s.width,height:Be},Math.abs(Ne)>0&&Math.abs(He)<Math.abs(Ne)){var Sn=yp(He||Ne)*(Math.abs(Ne)-Math.abs(He));He+=Sn}}return Xs(Xs(Xs({},ae),{},{x:ye,y:De,width:He,height:Be,value:_?ge:ge[1],payload:ae,background:Ee},te&&te[le]&&te[le].props),{},{tooltipPayload:[Age(n,ae)],tooltipPosition:{x:ye+He/2,y:De+Be/2}})});return Xs({data:X,layout:F},I)});function zA(e){"@babel/helpers - typeof";return zA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zA(e)}function jut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hge(r.key),r)}}function Uut(e,t,n){return t&&Bie(e.prototype,t),n&&Bie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jie(Object(n),!0).forEach(function(r){Ak(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ak(e,t,n){return t=Hge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hge(e){var t=$ut(e,"string");return zA(t)=="symbol"?t:t+""}function $ut(e,t){if(zA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vut=function(t,n,r,i,s){var f=t.width,a=t.height,p=t.layout,_=t.children,S=Object.keys(n),E={left:r.left,leftMirror:r.left,right:f-r.right,rightMirror:f-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},I=!!Hf(_,BO);return S.reduce(function(z,F){var U=n[F],k=U.orientation,V=U.domain,K=U.padding,J=K===void 0?{}:K,ie=U.mirror,Q=U.reversed,W="".concat(k).concat(ie?"Mirror":""),te,X,ae,le,ge;if(U.type==="number"&&(U.padding==="gap"||U.padding==="no-gap")){var ye=V[1]-V[0],De=1/0,He=U.categoricalDomain.sort(BZe);if(He.forEach(function(jt,sn){sn>0&&(De=Math.min((jt||0)-(He[sn-1]||0),De))}),Number.isFinite(De)){var Be=De/ye,Ee=U.layout==="vertical"?r.height:r.width;if(U.padding==="gap"&&(te=Be*Ee/2),U.padding==="no-gap"){var Ne=Ax(t.barCategoryGap,Be*Ee),at=Be*Ee/2;te=at-Ne-(at-Ne)/Ee*Ne}}}i==="xAxis"?X=[r.left+(J.left||0)+(te||0),r.left+r.width-(J.right||0)-(te||0)]:i==="yAxis"?X=p==="horizontal"?[r.top+r.height-(J.bottom||0),r.top+(J.top||0)]:[r.top+(J.top||0)+(te||0),r.top+r.height-(J.bottom||0)-(te||0)]:X=U.range,Q&&(X=[X[1],X[0]]);var yt=nat(U,s,I),je=yt.scale,Ke=yt.realScaleType;je.domain(V).range(X),rat(je);var it=fat(je,lp(lp({},U),{},{realScaleType:Ke}));i==="xAxis"?(ge=k==="top"&&!ie||k==="bottom"&&ie,ae=r.left,le=E[W]-ge*U.height):i==="yAxis"&&(ge=k==="left"&&!ie||k==="right"&&ie,ae=E[W]-ge*U.width,le=r.top);var Pe=lp(lp(lp({},U),it),{},{realScaleType:Ke,x:ae,y:le,scale:je,width:i==="xAxis"?r.width:U.width,height:i==="yAxis"?r.height:U.height});return Pe.bandSize=oP(Pe,it),!U.hide&&i==="xAxis"?E[W]+=(ge?-1:1)*Pe.height:U.hide||(E[W]+=(ge?-1:1)*Pe.width),lp(lp({},z),{},Ak({},F,Pe))},{})},Gge=function(t,n){var r=t.x,i=t.y,s=n.x,f=n.y;return{x:Math.min(r,s),y:Math.min(i,f),width:Math.abs(s-r),height:Math.abs(f-i)}},qut=function(t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2;return Gge({x:n,y:r},{x:i,y:s})},Yge=(function(){function e(t){jut(this,e),this.scale=t}return Uut(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var f=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+f}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(i){var p=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+p}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])})();Ak(Yge,"EPS",1e-4);var Xq=function(t){var n=Object.keys(t).reduce(function(r,i){return lp(lp({},r),{},Ak({},i,Yge.create(t[i])))},{});return lp(lp({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=s.bandAware,a=s.position;return yut(i,function(p,_){return n[_].apply(p,{bandAware:f,position:a})})},isInRange:function(i){return Uge(i,function(s,f){return n[f].isInRange(s)})}})};function Hut(e){return(e%180+180)%180}var Gut=function(t){var n=t.width,r=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Hut(i),f=s*Math.PI/180,a=Math.atan(r/n),p=f>a&&f<Math.PI-a?r/Math.sin(f):n/Math.cos(f);return Math.abs(p)},p4,Uie;function Yut(){if(Uie)return p4;Uie=1;var e=f0(),t=RO(),n=ck();function r(i){return function(s,f,a){var p=Object(s);if(!t(s)){var _=e(f,3);s=n(s),f=function(E){return _(p[E],E,p)}}var S=i(s,f,a);return S>-1?p[_?s[S]:S]:void 0}}return p4=r,p4}var m4,$ie;function Wut(){if($ie)return m4;$ie=1;var e=Fge();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return m4=t,m4}var g4,Vie;function Xut(){if(Vie)return g4;Vie=1;var e=sme(),t=f0(),n=Wut(),r=Math.max;function i(s,f,a){var p=s==null?0:s.length;if(!p)return-1;var _=a==null?0:n(a);return _<0&&(_=r(p+_,0)),e(s,t(f,3),_)}return g4=i,g4}var y4,qie;function Zut(){if(qie)return y4;qie=1;var e=Yut(),t=Xut(),n=e(t);return y4=n,y4}var Kut=Zut();const Qut=ga(Kut);var Jut=Spe();const ect=ga(Jut);var tct=ect(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Zq=be.createContext(void 0),Kq=be.createContext(void 0),Wge=be.createContext(void 0),Xge=be.createContext({}),Zge=be.createContext(void 0),Kge=be.createContext(0),Qge=be.createContext(0),Hie=function(t){var n=t.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,f=t.clipPathId,a=t.children,p=t.width,_=t.height,S=tct(s);return Je.createElement(Zq.Provider,{value:r},Je.createElement(Kq.Provider,{value:i},Je.createElement(Xge.Provider,{value:s},Je.createElement(Wge.Provider,{value:S},Je.createElement(Zge.Provider,{value:f},Je.createElement(Kge.Provider,{value:_},Je.createElement(Qge.Provider,{value:p},a)))))))},nct=function(){return be.useContext(Zge)},Jge=function(t){var n=be.useContext(Zq);n==null&&Cx();var r=n[t];return r==null&&Cx(),r},rct=function(){var t=be.useContext(Zq);return zv(t)},ict=function(){var t=be.useContext(Kq),n=Qut(t,function(r){return Uge(r.domain,Number.isFinite)});return n||zv(t)},eye=function(t){var n=be.useContext(Kq);n==null&&Cx();var r=n[t];return r==null&&Cx(),r},act=function(){var t=be.useContext(Wge);return t},oct=function(){return be.useContext(Xge)},Qq=function(){return be.useContext(Qge)},Jq=function(){return be.useContext(Kge)};function CS(e){"@babel/helpers - typeof";return CS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CS(e)}function sct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nye(r.key),r)}}function uct(e,t,n){return t&&lct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cct(e,t,n){return t=xP(t),fct(e,tye()?Reflect.construct(t,n||[],xP(e).constructor):t.apply(e,n))}function fct(e,t){if(t&&(CS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hct(e)}function hct(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tye=function(){return!!e})()}function xP(e){return xP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xP(e)}function dct(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vU(e,t)}function vU(e,t){return vU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vU(e,t)}function Gie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gie(Object(n),!0).forEach(function(r){e9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function e9(e,t,n){return t=nye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nye(e){var t=pct(e,"string");return CS(t)=="symbol"?t:t+""}function pct(e,t){if(CS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(CS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function mct(e,t){return vct(e)||_ct(e,t)||yct(e,t)||gct()}function gct(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yct(e,t){if(e){if(typeof e=="string")return Wie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wie(e,t)}}function Wie(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _ct(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function vct(e){if(Array.isArray(e))return e}function bU(){return bU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bU.apply(this,arguments)}var bct=function(t,n){var r;return Je.isValidElement(t)?r=Je.cloneElement(t,n):Li(t)?r=t(n):r=Je.createElement("line",bU({},n,{className:"recharts-reference-line-line"})),r},xct=function(t,n,r,i,s,f,a,p,_){var S=s.x,E=s.y,I=s.width,z=s.height;if(r){var F=_.y,U=t.y.apply(F,{position:f});if(ag(_,"discard")&&!t.y.isInRange(U))return null;var k=[{x:S+I,y:U},{x:S,y:U}];return p==="left"?k.reverse():k}if(n){var V=_.x,K=t.x.apply(V,{position:f});if(ag(_,"discard")&&!t.x.isInRange(K))return null;var J=[{x:K,y:E+z},{x:K,y:E}];return a==="top"?J.reverse():J}if(i){var ie=_.segment,Q=ie.map(function(W){return t.apply(W,{position:f})});return ag(_,"discard")&&dut(Q,function(W){return!t.isInRange(W)})?null:Q}return null};function wct(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,s=e.yAxisId,f=e.shape,a=e.className,p=e.alwaysShow,_=nct(),S=Jge(i),E=eye(s),I=act();if(!_||!I)return null;Yy(p===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var z=Xq({x:S.scale,y:E.scale}),F=vl(t),U=vl(n),k=r&&r.length===2,V=xct(z,F,U,k,I,e.position,S.orientation,E.orientation,e);if(!V)return null;var K=mct(V,2),J=K[0],ie=J.x,Q=J.y,W=K[1],te=W.x,X=W.y,ae=ag(e,"hidden")?"url(#".concat(_,")"):void 0,le=Yie(Yie({clipPath:ae},oa(e,!0)),{},{x1:ie,y1:Q,x2:te,y2:X});return Je.createElement(Rs,{className:ri("recharts-reference-line",a)},bct(f,le),Su.renderCallByParent(e,qut({x1:ie,y1:Q,x2:te,y2:X})))}var t9=(function(e){function t(){return sct(this,t),cct(this,t,arguments)}return dct(t,e),uct(t,[{key:"render",value:function(){return Je.createElement(wct,this.props)}}])})(Je.Component);e9(t9,"displayName","ReferenceLine");e9(t9,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function xU(){return xU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xU.apply(this,arguments)}function MS(e){"@babel/helpers - typeof";return MS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MS(e)}function Xie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xie(Object(n),!0).forEach(function(r){Ok(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iye(r.key),r)}}function Ect(e,t,n){return t&&Tct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Act(e,t,n){return t=wP(t),Oct(e,rye()?Reflect.construct(t,n||[],wP(e).constructor):t.apply(e,n))}function Oct(e,t){if(t&&(MS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cct(e)}function Cct(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rye=function(){return!!e})()}function wP(e){return wP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wP(e)}function Mct(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wU(e,t)}function wU(e,t){return wU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wU(e,t)}function Ok(e,t,n){return t=iye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iye(e){var t=Dct(e,"string");return MS(t)=="symbol"?t:t+""}function Dct(e,t){if(MS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(MS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ict=function(t){var n=t.x,r=t.y,i=t.xAxis,s=t.yAxis,f=Xq({x:i.scale,y:s.scale}),a=f.apply({x:n,y:r},{bandAware:!0});return ag(t,"discard")&&!f.isInRange(a)?null:a},Ck=(function(e){function t(){return Sct(this,t),Act(this,t,arguments)}return Mct(t,e),Ect(t,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,f=r.r,a=r.alwaysShow,p=r.clipPathId,_=vl(i),S=vl(s);if(Yy(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!_||!S)return null;var E=Ict(this.props);if(!E)return null;var I=E.x,z=E.y,F=this.props,U=F.shape,k=F.className,V=ag(this.props,"hidden")?"url(#".concat(p,")"):void 0,K=Zie(Zie({clipPath:V},oa(this.props,!0)),{},{cx:I,cy:z});return Je.createElement(Rs,{className:ri("recharts-reference-dot",k)},t.renderDot(U,K),Su.renderCallByParent(this.props,{x:I-f,y:z-f,width:2*f,height:2*f}))}}])})(Je.Component);Ok(Ck,"displayName","ReferenceDot");Ok(Ck,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Ok(Ck,"renderDot",function(e,t){var n;return Je.isValidElement(e)?n=Je.cloneElement(e,t):Li(e)?n=e(t):n=Je.createElement(Wq,xU({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function SU(){return SU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SU.apply(this,arguments)}function DS(e){"@babel/helpers - typeof";return DS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DS(e)}function Kie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kie(Object(n),!0).forEach(function(r){Mk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oye(r.key),r)}}function kct(e,t,n){return t&&Rct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lct(e,t,n){return t=SP(t),zct(e,aye()?Reflect.construct(t,n||[],SP(e).constructor):t.apply(e,n))}function zct(e,t){if(t&&(DS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fct(e)}function Fct(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aye=function(){return!!e})()}function SP(e){return SP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SP(e)}function Nct(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TU(e,t)}function TU(e,t){return TU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},TU(e,t)}function Mk(e,t,n){return t=oye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oye(e){var t=Bct(e,"string");return DS(t)=="symbol"?t:t+""}function Bct(e,t){if(DS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(DS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jct=function(t,n,r,i,s){var f=s.x1,a=s.x2,p=s.y1,_=s.y2,S=s.xAxis,E=s.yAxis;if(!S||!E)return null;var I=Xq({x:S.scale,y:E.scale}),z={x:t?I.x.apply(f,{position:"start"}):I.x.rangeMin,y:r?I.y.apply(p,{position:"start"}):I.y.rangeMin},F={x:n?I.x.apply(a,{position:"end"}):I.x.rangeMax,y:i?I.y.apply(_,{position:"end"}):I.y.rangeMax};return ag(s,"discard")&&(!I.isInRange(z)||!I.isInRange(F))?null:Gge(z,F)},Dk=(function(e){function t(){return Pct(this,t),Lct(this,t,arguments)}return Nct(t,e),kct(t,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,f=r.y1,a=r.y2,p=r.className,_=r.alwaysShow,S=r.clipPathId;Yy(_===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var E=vl(i),I=vl(s),z=vl(f),F=vl(a),U=this.props.shape;if(!E&&!I&&!z&&!F&&!U)return null;var k=jct(E,I,z,F,this.props);if(!k&&!U)return null;var V=ag(this.props,"hidden")?"url(#".concat(S,")"):void 0;return Je.createElement(Rs,{className:ri("recharts-reference-area",p)},t.renderRect(U,Qie(Qie({clipPath:V},oa(this.props,!0)),k)),Su.renderCallByParent(this.props,k))}}])})(Je.Component);Mk(Dk,"displayName","ReferenceArea");Mk(Dk,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Mk(Dk,"renderRect",function(e,t){var n;return Je.isValidElement(e)?n=Je.cloneElement(e,t):Li(e)?n=e(t):n=Je.createElement(Yq,SU({},t,{className:"recharts-reference-area-rect"})),n});function sye(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function Uct(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Gut(r,n)}function $ct(e,t,n){var r=n==="width",i=e.x,s=e.y,f=e.width,a=e.height;return t===1?{start:r?i:s,end:r?i+f:s+a}:{start:r?i+f:s+a,end:r?i:s}}function TP(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function Vct(e,t){return sye(e,t+1)}function qct(e,t,n,r,i){for(var s=(r||[]).slice(),f=t.start,a=t.end,p=0,_=1,S=f,E=function(){var F=r==null?void 0:r[p];if(F===void 0)return{v:sye(r,_)};var U=p,k,V=function(){return k===void 0&&(k=n(F,U)),k},K=F.coordinate,J=p===0||TP(e,K,V,S,a);J||(p=0,S=f,_+=1),J&&(S=K+e*(V()/2+i),p+=_)},I;_<=s.length;)if(I=E(),I)return I.v;return[]}function FA(e){"@babel/helpers - typeof";return FA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FA(e)}function Jie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jie(Object(n),!0).forEach(function(r){Hct(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hct(e,t,n){return t=Gct(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gct(e){var t=Yct(e,"string");return FA(t)=="symbol"?t:t+""}function Yct(e,t){if(FA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(FA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wct(e,t,n,r,i){for(var s=(r||[]).slice(),f=s.length,a=t.start,p=t.end,_=function(I){var z=s[I],F,U=function(){return F===void 0&&(F=n(z,I)),F};if(I===f-1){var k=e*(z.coordinate+e*U()/2-p);s[I]=z=xu(xu({},z),{},{tickCoord:k>0?z.coordinate-k*e:z.coordinate})}else s[I]=z=xu(xu({},z),{},{tickCoord:z.coordinate});var V=TP(e,z.tickCoord,U,a,p);V&&(p=z.tickCoord-e*(U()/2+i),s[I]=xu(xu({},z),{},{isShow:!0}))},S=f-1;S>=0;S--)_(S);return s}function Xct(e,t,n,r,i,s){var f=(r||[]).slice(),a=f.length,p=t.start,_=t.end;if(s){var S=r[a-1],E=n(S,a-1),I=e*(S.coordinate+e*E/2-_);f[a-1]=S=xu(xu({},S),{},{tickCoord:I>0?S.coordinate-I*e:S.coordinate});var z=TP(e,S.tickCoord,function(){return E},p,_);z&&(_=S.tickCoord-e*(E/2+i),f[a-1]=xu(xu({},S),{},{isShow:!0}))}for(var F=s?a-1:a,U=function(K){var J=f[K],ie,Q=function(){return ie===void 0&&(ie=n(J,K)),ie};if(K===0){var W=e*(J.coordinate-e*Q()/2-p);f[K]=J=xu(xu({},J),{},{tickCoord:W<0?J.coordinate-W*e:J.coordinate})}else f[K]=J=xu(xu({},J),{},{tickCoord:J.coordinate});var te=TP(e,J.tickCoord,Q,p,_);te&&(p=J.tickCoord+e*(Q()/2+i),f[K]=xu(xu({},J),{},{isShow:!0}))},k=0;k<F;k++)U(k);return f}function n9(e,t,n){var r=e.tick,i=e.ticks,s=e.viewBox,f=e.minTickGap,a=e.orientation,p=e.interval,_=e.tickFormatter,S=e.unit,E=e.angle;if(!i||!i.length||!r)return[];if(Xn(p)||hT.isSsr)return Vct(i,typeof p=="number"&&Xn(p)?p:0);var I=[],z=a==="top"||a==="bottom"?"width":"height",F=S&&z==="width"?w2(S,{fontSize:t,letterSpacing:n}):{width:0,height:0},U=function(J,ie){var Q=Li(_)?_(J.value,ie):J.value;return z==="width"?Uct(w2(Q,{fontSize:t,letterSpacing:n}),F,E):w2(Q,{fontSize:t,letterSpacing:n})[z]},k=i.length>=2?yp(i[1].coordinate-i[0].coordinate):1,V=$ct(s,k,z);return p==="equidistantPreserveStart"?qct(k,V,U,i,f):(p==="preserveStart"||p==="preserveStartEnd"?I=Xct(k,V,U,i,f,p==="preserveStartEnd"):I=Wct(k,V,U,i,f),I.filter(function(K){return K.isShow}))}var Zct=["viewBox"],Kct=["viewBox"],Qct=["ticks"];function IS(e){"@babel/helpers - typeof";return IS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IS(e)}function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ww.apply(this,arguments)}function eae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eae(Object(n),!0).forEach(function(r){r9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _4(e,t){if(e==null)return{};var n=Jct(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Jct(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function eft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uye(r.key),r)}}function tft(e,t,n){return t&&tae(e.prototype,t),n&&tae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nft(e,t,n){return t=EP(t),rft(e,lye()?Reflect.construct(t,n||[],EP(e).constructor):t.apply(e,n))}function rft(e,t){if(t&&(IS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ift(e)}function ift(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lye=function(){return!!e})()}function EP(e){return EP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},EP(e)}function aft(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EU(e,t)}function EU(e,t){return EU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EU(e,t)}function r9(e,t,n){return t=uye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uye(e){var t=oft(e,"string");return IS(t)=="symbol"?t:t+""}function oft(e,t){if(IS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(IS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gT=(function(e){function t(n){var r;return eft(this,t),r=nft(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return aft(t,e),tft(t,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,f=_4(r,Zct),a=this.props,p=a.viewBox,_=_4(a,Kct);return!Lw(s,p)||!Lw(f,_)||!Lw(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,f=i.y,a=i.width,p=i.height,_=i.orientation,S=i.tickSize,E=i.mirror,I=i.tickMargin,z,F,U,k,V,K,J=E?-1:1,ie=r.tickSize||S,Q=Xn(r.tickCoord)?r.tickCoord:r.coordinate;switch(_){case"top":z=F=r.coordinate,k=f+ +!E*p,U=k-J*ie,K=U-J*I,V=Q;break;case"left":U=k=r.coordinate,F=s+ +!E*a,z=F-J*ie,V=z-J*I,K=Q;break;case"right":U=k=r.coordinate,F=s+ +E*a,z=F+J*ie,V=z+J*I,K=Q;break;default:z=F=r.coordinate,k=f+ +E*p,U=k+J*ie,K=U+J*I,V=Q;break}return{line:{x1:z,y1:U,x2:F,y2:k},tick:{x:V,y:K}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,f;switch(i){case"left":f=s?"start":"end";break;case"right":f=s?"end":"start";break;default:f="middle";break}return f}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,f="end";switch(i){case"left":case"right":f="middle";break;case"top":f=s?"start":"end";break;default:f=s?"end":"start";break}return f}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,f=r.width,a=r.height,p=r.orientation,_=r.mirror,S=r.axisLine,E=gl(gl(gl({},oa(this.props,!1)),oa(S,!1)),{},{fill:"none"});if(p==="top"||p==="bottom"){var I=+(p==="top"&&!_||p==="bottom"&&_);E=gl(gl({},E),{},{x1:i,y1:s+I*a,x2:i+f,y2:s+I*a})}else{var z=+(p==="left"&&!_||p==="right"&&_);E=gl(gl({},E),{},{x1:i+z*f,y1:s,x2:i+z*f,y2:s+a})}return Je.createElement("line",ww({},E,{className:ri("recharts-cartesian-axis-line",ed(S,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var f=this,a=this.props,p=a.tickLine,_=a.stroke,S=a.tick,E=a.tickFormatter,I=a.unit,z=n9(gl(gl({},this.props),{},{ticks:r}),i,s),F=this.getTickTextAnchor(),U=this.getTickVerticalAnchor(),k=oa(this.props,!1),V=oa(S,!1),K=gl(gl({},k),{},{fill:"none"},oa(p,!1)),J=z.map(function(ie,Q){var W=f.getTickLineCoord(ie),te=W.line,X=W.tick,ae=gl(gl(gl(gl({textAnchor:F,verticalAnchor:U},k),{},{stroke:"none",fill:_},V),X),{},{index:Q,payload:ie,visibleTicksCount:z.length,tickFormatter:E});return Je.createElement(Rs,ww({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ie.value,"-").concat(ie.coordinate,"-").concat(ie.tickCoord)},kI(f.props,ie,Q)),p&&Je.createElement("line",ww({},K,te,{className:ri("recharts-cartesian-axis-tick-line",ed(p,"className"))})),S&&t.renderTickItem(S,ae,"".concat(Li(E)?E(ie.value,Q):ie.value).concat(I||"")))});return Je.createElement("g",{className:"recharts-cartesian-axis-ticks"},J)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,f=i.width,a=i.height,p=i.ticksGenerator,_=i.className,S=i.hide;if(S)return null;var E=this.props,I=E.ticks,z=_4(E,Qct),F=I;return Li(p)&&(F=I&&I.length>0?p(this.props):p(z)),f<=0||a<=0||!F||!F.length?null:Je.createElement(Rs,{className:ri("recharts-cartesian-axis",_),ref:function(k){r.layerReference=k}},s&&this.renderAxisLine(),this.renderTicks(F,this.state.fontSize,this.state.letterSpacing),Su.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var f,a=ri(i.className,"recharts-cartesian-axis-tick-value");return Je.isValidElement(r)?f=Je.cloneElement(r,gl(gl({},i),{},{className:a})):Li(r)?f=r(gl(gl({},i),{},{className:a})):f=Je.createElement(HI,ww({},i,{className:"recharts-cartesian-axis-tick-value"}),s),f}}])})(be.Component);r9(gT,"displayName","CartesianAxis");r9(gT,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var sft=["x1","y1","x2","y2","key"],lft=["offset"];function Mx(e){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}function nae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nae(Object(n),!0).forEach(function(r){uft(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uft(e,t,n){return t=cft(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cft(e){var t=fft(e,"string");return Mx(t)=="symbol"?t:t+""}function fft(e,t){if(Mx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Mx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zb.apply(this,arguments)}function rae(e,t){if(e==null)return{};var n=hft(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hft(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var dft=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,s=t.y,f=t.width,a=t.height,p=t.ry;return Je.createElement("rect",{x:i,y:s,ry:p,width:f,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function cye(e,t){var n;if(Je.isValidElement(e))n=Je.cloneElement(e,t);else if(Li(e))n=e(t);else{var r=t.x1,i=t.y1,s=t.x2,f=t.y2,a=t.key,p=rae(t,sft),_=oa(p,!1);_.offset;var S=rae(_,lft);n=Je.createElement("line",Zb({},S,{x1:r,y1:i,x2:s,y2:f,fill:"none",key:a}))}return n}function pft(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,s=e.horizontalPoints;if(!i||!s||!s.length)return null;var f=s.map(function(a,p){var _=Tu(Tu({},e),{},{x1:t,y1:a,x2:t+n,y2:a,key:"line-".concat(p),index:p});return cye(i,_)});return Je.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function mft(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,s=e.verticalPoints;if(!i||!s||!s.length)return null;var f=s.map(function(a,p){var _=Tu(Tu({},e),{},{x1:a,y1:t,x2:a,y2:t+n,key:"line-".concat(p),index:p});return cye(i,_)});return Je.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function gft(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,s=e.width,f=e.height,a=e.horizontalPoints,p=e.horizontal,_=p===void 0?!0:p;if(!_||!t||!t.length)return null;var S=a.map(function(I){return Math.round(I+i-i)}).sort(function(I,z){return I-z});i!==S[0]&&S.unshift(0);var E=S.map(function(I,z){var F=!S[z+1],U=F?i+f-I:S[z+1]-I;if(U<=0)return null;var k=z%t.length;return Je.createElement("rect",{key:"react-".concat(z),y:I,x:r,height:U,width:s,stroke:"none",fill:t[k],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Je.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},E)}function yft(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,s=e.x,f=e.y,a=e.width,p=e.height,_=e.verticalPoints;if(!n||!r||!r.length)return null;var S=_.map(function(I){return Math.round(I+s-s)}).sort(function(I,z){return I-z});s!==S[0]&&S.unshift(0);var E=S.map(function(I,z){var F=!S[z+1],U=F?s+a-I:S[z+1]-I;if(U<=0)return null;var k=z%r.length;return Je.createElement("rect",{key:"react-".concat(z),x:I,y:f,width:U,height:p,stroke:"none",fill:r[k],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Je.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},E)}var _ft=function(t,n){var r=t.xAxis,i=t.width,s=t.height,f=t.offset;return Tge(n9(Tu(Tu(Tu({},gT.defaultProps),r),{},{ticks:Ly(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),f.left,f.left+f.width,n)},vft=function(t,n){var r=t.yAxis,i=t.width,s=t.height,f=t.offset;return Tge(n9(Tu(Tu(Tu({},gT.defaultProps),r),{},{ticks:Ly(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),f.top,f.top+f.height,n)},cw={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function fye(e){var t,n,r,i,s,f,a=Qq(),p=Jq(),_=oct(),S=Tu(Tu({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:cw.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:cw.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:cw.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:cw.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:cw.vertical,verticalFill:(f=e.verticalFill)!==null&&f!==void 0?f:cw.verticalFill,x:Xn(e.x)?e.x:_.left,y:Xn(e.y)?e.y:_.top,width:Xn(e.width)?e.width:_.width,height:Xn(e.height)?e.height:_.height}),E=S.x,I=S.y,z=S.width,F=S.height,U=S.syncWithTicks,k=S.horizontalValues,V=S.verticalValues,K=rct(),J=ict();if(!Xn(z)||z<=0||!Xn(F)||F<=0||!Xn(E)||E!==+E||!Xn(I)||I!==+I)return null;var ie=S.verticalCoordinatesGenerator||_ft,Q=S.horizontalCoordinatesGenerator||vft,W=S.horizontalPoints,te=S.verticalPoints;if((!W||!W.length)&&Li(Q)){var X=k&&k.length,ae=Q({yAxis:J?Tu(Tu({},J),{},{ticks:X?k:J.ticks}):void 0,width:a,height:p,offset:_},X?!0:U);Yy(Array.isArray(ae),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Mx(ae),"]")),Array.isArray(ae)&&(W=ae)}if((!te||!te.length)&&Li(ie)){var le=V&&V.length,ge=ie({xAxis:K?Tu(Tu({},K),{},{ticks:le?V:K.ticks}):void 0,width:a,height:p,offset:_},le?!0:U);Yy(Array.isArray(ge),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Mx(ge),"]")),Array.isArray(ge)&&(te=ge)}return Je.createElement("g",{className:"recharts-cartesian-grid"},Je.createElement(dft,{fill:S.fill,fillOpacity:S.fillOpacity,x:S.x,y:S.y,width:S.width,height:S.height,ry:S.ry}),Je.createElement(pft,Zb({},S,{offset:_,horizontalPoints:W,xAxis:K,yAxis:J})),Je.createElement(mft,Zb({},S,{offset:_,verticalPoints:te,xAxis:K,yAxis:J})),Je.createElement(gft,Zb({},S,{horizontalPoints:W})),Je.createElement(yft,Zb({},S,{verticalPoints:te})))}fye.displayName="CartesianGrid";var bft=["type","layout","connectNulls","ref"],xft=["key"];function PS(e){"@babel/helpers - typeof";return PS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PS(e)}function iae(e,t){if(e==null)return{};var n=wft(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wft(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function A2(){return A2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A2.apply(this,arguments)}function aae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aae(Object(n),!0).forEach(function(r){up(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fw(e){return Aft(e)||Eft(e)||Tft(e)||Sft()}function Sft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tft(e,t){if(e){if(typeof e=="string")return AU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AU(e,t)}}function Eft(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Aft(e){if(Array.isArray(e))return AU(e)}function AU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dye(r.key),r)}}function Cft(e,t,n){return t&&oae(e.prototype,t),n&&oae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mft(e,t,n){return t=AP(t),Dft(e,hye()?Reflect.construct(t,n||[],AP(e).constructor):t.apply(e,n))}function Dft(e,t){if(t&&(PS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ift(e)}function Ift(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hye=function(){return!!e})()}function AP(e){return AP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AP(e)}function Pft(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OU(e,t)}function OU(e,t){return OU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OU(e,t)}function up(e,t,n){return t=dye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dye(e){var t=Rft(e,"string");return PS(t)=="symbol"?t:t+""}function Rft(e,t){if(PS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(PS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jO=(function(e){function t(){var n;Oft(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Mft(this,t,[].concat(i)),up(n,"state",{isAnimationFinished:!0,totalLength:0}),up(n,"generateSimpleStrokeDasharray",function(f,a){return"".concat(a,"px ").concat(f-a,"px")}),up(n,"getStrokeDasharray",function(f,a,p){var _=p.reduce(function(V,K){return V+K});if(!_)return n.generateSimpleStrokeDasharray(a,f);for(var S=Math.floor(f/_),E=f%_,I=a-f,z=[],F=0,U=0;F<p.length;U+=p[F],++F)if(U+p[F]>E){z=[].concat(fw(p.slice(0,F)),[E-U]);break}var k=z.length%2===0?[0,I]:[I];return[].concat(fw(t.repeat(p,S)),fw(z),k).map(function(V){return"".concat(V,"px")}).join(", ")}),up(n,"id",PO("recharts-line-")),up(n,"pathRef",function(f){n.mainCurve=f}),up(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),up(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Pft(t,e),Cft(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,f=s.points,a=s.xAxis,p=s.yAxis,_=s.layout,S=s.children,E=td(S,NO);if(!E)return null;var I=function(U,k){return{x:U.x,y:U.y,value:U.value,errorVal:nh(U.payload,k)}},z={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Je.createElement(Rs,z,E.map(function(F){return Je.cloneElement(F,{key:"bar-".concat(F.props.dataKey),data:f,xAxis:a,yAxis:p,layout:_,dataPointFormatter:I})}))}},{key:"renderDots",value:function(r,i,s){var f=this.props.isAnimationActive;if(f&&!this.state.isAnimationFinished)return null;var a=this.props,p=a.dot,_=a.points,S=a.dataKey,E=oa(this.props,!1),I=oa(p,!0),z=_.map(function(U,k){var V=Vf(Vf(Vf({key:"dot-".concat(k),r:3},E),I),{},{index:k,cx:U.x,cy:U.y,value:U.value,dataKey:S,payload:U.payload,points:_});return t.renderDotItem(p,V)}),F={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Je.createElement(Rs,A2({className:"recharts-line-dots",key:"dots"},F),z)}},{key:"renderCurveStatically",value:function(r,i,s,f){var a=this.props,p=a.type,_=a.layout,S=a.connectNulls;a.ref;var E=iae(a,bft),I=Vf(Vf(Vf({},oa(E,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},f),{},{type:p,layout:_,connectNulls:S});return Je.createElement(iU,A2({},I,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,f=this.props,a=f.points,p=f.strokeDasharray,_=f.isAnimationActive,S=f.animationBegin,E=f.animationDuration,I=f.animationEasing,z=f.animationId,F=f.animateNewValues,U=f.width,k=f.height,V=this.state,K=V.prevPoints,J=V.totalLength;return Je.createElement(l_,{begin:S,duration:E,isActive:_,easing:I,from:{t:0},to:{t:1},key:"line-".concat(z),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(ie){var Q=ie.t;if(K){var W=K.length/a.length,te=a.map(function(ye,De){var He=Math.floor(De*W);if(K[He]){var Be=K[He],Ee=fp(Be.x,ye.x),Ne=fp(Be.y,ye.y);return Vf(Vf({},ye),{},{x:Ee(Q),y:Ne(Q)})}if(F){var at=fp(U*2,ye.x),yt=fp(k/2,ye.y);return Vf(Vf({},ye),{},{x:at(Q),y:yt(Q)})}return Vf(Vf({},ye),{},{x:ye.x,y:ye.y})});return s.renderCurveStatically(te,r,i)}var X=fp(0,J),ae=X(Q),le;if(p){var ge="".concat(p).split(/[,\s]+/gim).map(function(ye){return parseFloat(ye)});le=s.getStrokeDasharray(ae,J,ge)}else le=s.generateSimpleStrokeDasharray(J,ae);return s.renderCurveStatically(a,r,i,{strokeDasharray:le})})}},{key:"renderCurve",value:function(r,i){var s=this.props,f=s.points,a=s.isAnimationActive,p=this.state,_=p.prevPoints,S=p.totalLength;return a&&f&&f.length&&(!_&&S>0||!xk(_,f))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(f,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,f=i.dot,a=i.points,p=i.className,_=i.xAxis,S=i.yAxis,E=i.top,I=i.left,z=i.width,F=i.height,U=i.isAnimationActive,k=i.id;if(s||!a||!a.length)return null;var V=this.state.isAnimationFinished,K=a.length===1,J=ri("recharts-line",p),ie=_&&_.allowDataOverflow,Q=S&&S.allowDataOverflow,W=ie||Q,te=Gi(k)?this.id:k,X=(r=oa(f,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},ae=X.r,le=ae===void 0?3:ae,ge=X.strokeWidth,ye=ge===void 0?2:ge,De=WZe(f)?f:{},He=De.clipDot,Be=He===void 0?!0:He,Ee=le*2+ye;return Je.createElement(Rs,{className:J},ie||Q?Je.createElement("defs",null,Je.createElement("clipPath",{id:"clipPath-".concat(te)},Je.createElement("rect",{x:ie?I:I-z/2,y:Q?E:E-F/2,width:ie?z:z*2,height:Q?F:F*2})),!Be&&Je.createElement("clipPath",{id:"clipPath-dots-".concat(te)},Je.createElement("rect",{x:I-Ee/2,y:E-Ee/2,width:z+Ee,height:F+Ee}))):null,!K&&this.renderCurve(W,te),this.renderErrorBar(W,te),(K||f)&&this.renderDots(W,Be,te),(!U||V)&&Wv.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(fw(r),[0]):r,f=[],a=0;a<i;++a)f=[].concat(fw(f),fw(s));return f}},{key:"renderDotItem",value:function(r,i){var s;if(Je.isValidElement(r))s=Je.cloneElement(r,i);else if(Li(r))s=r(i);else{var f=i.key,a=iae(i,xft),p=ri("recharts-line-dot",typeof r!="boolean"?r.className:"");s=Je.createElement(Wq,A2({key:f},a,{className:p}))}return s}}])})(be.PureComponent);up(jO,"displayName","Line");up(jO,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!hT.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});up(jO,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,s=e.yAxisTicks,f=e.dataKey,a=e.bandSize,p=e.displayedData,_=e.offset,S=t.layout,E=p.map(function(I,z){var F=nh(I,f);return S==="horizontal"?{x:Are({axis:n,ticks:i,bandSize:a,entry:I,index:z}),y:Gi(F)?null:r.scale(F),value:F,payload:I}:{x:Gi(F)?null:n.scale(F),y:Are({axis:r,ticks:s,bandSize:a,entry:I,index:z}),value:F,payload:I}});return Vf({points:E,layout:S},_)});function RS(e){"@babel/helpers - typeof";return RS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RS(e)}function kft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gye(r.key),r)}}function zft(e,t,n){return t&&Lft(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fft(e,t,n){return t=OP(t),Nft(e,pye()?Reflect.construct(t,n||[],OP(e).constructor):t.apply(e,n))}function Nft(e,t){if(t&&(RS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bft(e)}function Bft(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pye=function(){return!!e})()}function OP(e){return OP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},OP(e)}function jft(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CU(e,t)}function CU(e,t){return CU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CU(e,t)}function mye(e,t,n){return t=gye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gye(e){var t=Uft(e,"string");return RS(t)=="symbol"?t:t+""}function Uft(e,t){if(RS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(RS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function MU(){return MU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MU.apply(this,arguments)}function $ft(e){var t=e.xAxisId,n=Qq(),r=Jq(),i=Jge(t);return i==null?null:be.createElement(gT,MU({},i,{className:ri("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(f){return Ly(f,!0)}}))}var Ik=(function(e){function t(){return kft(this,t),Fft(this,t,arguments)}return jft(t,e),zft(t,[{key:"render",value:function(){return be.createElement($ft,this.props)}}])})(be.Component);mye(Ik,"displayName","XAxis");mye(Ik,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function kS(e){"@babel/helpers - typeof";return kS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kS(e)}function Vft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vye(r.key),r)}}function Hft(e,t,n){return t&&qft(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gft(e,t,n){return t=CP(t),Yft(e,yye()?Reflect.construct(t,n||[],CP(e).constructor):t.apply(e,n))}function Yft(e,t){if(t&&(kS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wft(e)}function Wft(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yye=function(){return!!e})()}function CP(e){return CP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CP(e)}function Xft(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DU(e,t)}function DU(e,t){return DU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DU(e,t)}function _ye(e,t,n){return t=vye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vye(e){var t=Zft(e,"string");return kS(t)=="symbol"?t:t+""}function Zft(e,t){if(kS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function IU(){return IU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IU.apply(this,arguments)}var Kft=function(t){var n=t.yAxisId,r=Qq(),i=Jq(),s=eye(n);return s==null?null:be.createElement(gT,IU({},s,{className:ri("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return Ly(a,!0)}}))},Pk=(function(e){function t(){return Vft(this,t),Gft(this,t,arguments)}return Xft(t,e),Hft(t,[{key:"render",value:function(){return be.createElement(Kft,this.props)}}])})(be.Component);_ye(Pk,"displayName","YAxis");_ye(Pk,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function sae(e){return tht(e)||eht(e)||Jft(e)||Qft()}function Qft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jft(e,t){if(e){if(typeof e=="string")return PU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PU(e,t)}}function eht(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tht(e){if(Array.isArray(e))return PU(e)}function PU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var RU=function(t,n,r,i,s){var f=td(t,t9),a=td(t,Ck),p=[].concat(sae(f),sae(a)),_=td(t,Dk),S="".concat(i,"Id"),E=i[0],I=n;if(p.length&&(I=p.reduce(function(U,k){if(k.props[S]===r&&ag(k.props,"extendDomain")&&Xn(k.props[E])){var V=k.props[E];return[Math.min(U[0],V),Math.max(U[1],V)]}return U},I)),_.length){var z="".concat(E,"1"),F="".concat(E,"2");I=_.reduce(function(U,k){if(k.props[S]===r&&ag(k.props,"extendDomain")&&Xn(k.props[z])&&Xn(k.props[F])){var V=k.props[z],K=k.props[F];return[Math.min(U[0],V,K),Math.max(U[1],V,K)]}return U},I)}return s&&s.length&&(I=s.reduce(function(U,k){return Xn(k)?[Math.min(U[0],k),Math.max(U[1],k)]:U},I)),I},v4={exports:{}},lae;function nht(){return lae||(lae=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(p,_,S){this.fn=p,this.context=_,this.once=S||!1}function s(p,_,S,E,I){if(typeof S!="function")throw new TypeError("The listener must be a function");var z=new i(S,E||p,I),F=n?n+_:_;return p._events[F]?p._events[F].fn?p._events[F]=[p._events[F],z]:p._events[F].push(z):(p._events[F]=z,p._eventsCount++),p}function f(p,_){--p._eventsCount===0?p._events=new r:delete p._events[_]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var _=[],S,E;if(this._eventsCount===0)return _;for(E in S=this._events)t.call(S,E)&&_.push(n?E.slice(1):E);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(S)):_},a.prototype.listeners=function(_){var S=n?n+_:_,E=this._events[S];if(!E)return[];if(E.fn)return[E.fn];for(var I=0,z=E.length,F=new Array(z);I<z;I++)F[I]=E[I].fn;return F},a.prototype.listenerCount=function(_){var S=n?n+_:_,E=this._events[S];return E?E.fn?1:E.length:0},a.prototype.emit=function(_,S,E,I,z,F){var U=n?n+_:_;if(!this._events[U])return!1;var k=this._events[U],V=arguments.length,K,J;if(k.fn){switch(k.once&&this.removeListener(_,k.fn,void 0,!0),V){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,S),!0;case 3:return k.fn.call(k.context,S,E),!0;case 4:return k.fn.call(k.context,S,E,I),!0;case 5:return k.fn.call(k.context,S,E,I,z),!0;case 6:return k.fn.call(k.context,S,E,I,z,F),!0}for(J=1,K=new Array(V-1);J<V;J++)K[J-1]=arguments[J];k.fn.apply(k.context,K)}else{var ie=k.length,Q;for(J=0;J<ie;J++)switch(k[J].once&&this.removeListener(_,k[J].fn,void 0,!0),V){case 1:k[J].fn.call(k[J].context);break;case 2:k[J].fn.call(k[J].context,S);break;case 3:k[J].fn.call(k[J].context,S,E);break;case 4:k[J].fn.call(k[J].context,S,E,I);break;default:if(!K)for(Q=1,K=new Array(V-1);Q<V;Q++)K[Q-1]=arguments[Q];k[J].fn.apply(k[J].context,K)}}return!0},a.prototype.on=function(_,S,E){return s(this,_,S,E,!1)},a.prototype.once=function(_,S,E){return s(this,_,S,E,!0)},a.prototype.removeListener=function(_,S,E,I){var z=n?n+_:_;if(!this._events[z])return this;if(!S)return f(this,z),this;var F=this._events[z];if(F.fn)F.fn===S&&(!I||F.once)&&(!E||F.context===E)&&f(this,z);else{for(var U=0,k=[],V=F.length;U<V;U++)(F[U].fn!==S||I&&!F[U].once||E&&F[U].context!==E)&&k.push(F[U]);k.length?this._events[z]=k.length===1?k[0]:k:f(this,z)}return this},a.prototype.removeAllListeners=function(_){var S;return _?(S=n?n+_:_,this._events[S]&&f(this,S)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(v4)),v4.exports}var rht=nht();const iht=ga(rht);var b4=new iht,x4="recharts.syncMouseEvents";function NA(e){"@babel/helpers - typeof";return NA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NA(e)}function aht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bye(r.key),r)}}function sht(e,t,n){return t&&oht(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function w4(e,t,n){return t=bye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bye(e){var t=lht(e,"string");return NA(t)=="symbol"?t:t+""}function lht(e,t){if(NA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(NA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var uht=(function(){function e(){aht(this,e),w4(this,"activeIndex",0),w4(this,"coordinateList",[]),w4(this,"layout","horizontal")}return sht(e,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,f=n.container,a=f===void 0?null:f,p=n.layout,_=p===void 0?null:p,S=n.offset,E=S===void 0?null:S,I=n.mouseHandlerCallback,z=I===void 0?null:I;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=_??this.layout,this.offset=E??this.offset,this.mouseHandlerCallback=z??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,f=i.y,a=i.height,p=this.coordinateList[this.activeIndex].coordinate,_=((n=window)===null||n===void 0?void 0:n.scrollX)||0,S=((r=window)===null||r===void 0?void 0:r.scrollY)||0,E=s+p+_,I=f+this.offset.top+a/2+S;this.mouseHandlerCallback({pageX:E,pageY:I})}}}])})();function cht(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],i=e==null?void 0:e[1];if(r&&i&&Xn(r)&&Xn(i))return!0}return!1}function fht(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function xye(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,s=e.endAngle,f=tu(t,n,r,i),a=tu(t,n,r,s);return{points:[f,a],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function hht(e,t,n){var r,i,s,f;if(e==="horizontal")r=t.x,s=r,i=n.top,f=n.top+n.height;else if(e==="vertical")i=t.y,f=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var a=t.cx,p=t.cy,_=t.innerRadius,S=t.outerRadius,E=t.angle,I=tu(a,p,_,E),z=tu(a,p,S,E);r=I.x,i=I.y,s=z.x,f=z.y}else return xye(t);return[{x:r,y:i},{x:s,y:f}]}function BA(e){"@babel/helpers - typeof";return BA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BA(e)}function uae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uae(Object(n),!0).forEach(function(r){dht(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dht(e,t,n){return t=pht(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pht(e){var t=mht(e,"string");return BA(t)=="symbol"?t:t+""}function mht(e,t){if(BA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(BA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ght(e){var t,n,r=e.element,i=e.tooltipEventType,s=e.isActive,f=e.activeCoordinate,a=e.activePayload,p=e.offset,_=e.activeTooltipIndex,S=e.tooltipAxisBandSize,E=e.layout,I=e.chartName,z=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!z||!s||!f||I!=="ScatterChart"&&i!=="axis")return null;var F,U=iU;if(I==="ScatterChart")F=f,U=dlt;else if(I==="BarChart")F=fht(E,f,p,S),U=Yq;else if(E==="radial"){var k=xye(f),V=k.cx,K=k.cy,J=k.radius,ie=k.startAngle,Q=k.endAngle;F={cx:V,cy:K,startAngle:ie,endAngle:Q,innerRadius:J,outerRadius:J},U=Mge}else F={points:hht(E,f,p)},U=iU;var W=ZM(ZM(ZM(ZM({stroke:"#ccc",pointerEvents:"none"},p),F),oa(z,!1)),{},{payload:a,payloadIndex:_,className:ri("recharts-tooltip-cursor",z.className)});return be.isValidElement(z)?be.cloneElement(z,W):be.createElement(U,W)}var yht=["item"],_ht=["children","className","width","height","style","compact","title","desc"];function LS(e){"@babel/helpers - typeof";return LS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LS(e)}function Sw(){return Sw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sw.apply(this,arguments)}function cae(e,t){return xht(e)||bht(e,t)||Sye(e,t)||vht()}function vht(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bht(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,f,a=[],p=!0,_=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(p=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);p=!0);}catch(S){_=!0,i=S}finally{try{if(!p&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(_)throw i}}return a}}function xht(e){if(Array.isArray(e))return e}function fae(e,t){if(e==null)return{};var n=wht(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wht(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Sht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tye(r.key),r)}}function Eht(e,t,n){return t&&Tht(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Aht(e,t,n){return t=MP(t),Oht(e,wye()?Reflect.construct(t,n||[],MP(e).constructor):t.apply(e,n))}function Oht(e,t){if(t&&(LS(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cht(e)}function Cht(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wye=function(){return!!e})()}function MP(e){return MP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},MP(e)}function Mht(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kU(e,t)}function kU(e,t){return kU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kU(e,t)}function zS(e){return Pht(e)||Iht(e)||Sye(e)||Dht()}function Dht(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sye(e,t){if(e){if(typeof e=="string")return LU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LU(e,t)}}function Iht(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pht(e){if(Array.isArray(e))return LU(e)}function LU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hae(Object(n),!0).forEach(function(r){ni(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ni(e,t,n){return t=Tye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tye(e){var t=Rht(e,"string");return LS(t)=="symbol"?t:t+""}function Rht(e,t){if(LS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(LS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kht={xAxis:["bottom","top"],yAxis:["left","right"]},Lht={width:"100%",height:"100%"},Eye={x:0,y:0};function KM(e){return e}var zht=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},Fht=function(t,n,r,i){var s=n.find(function(S){return S&&S.index===r});if(s){if(t==="horizontal")return{x:s.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:s.coordinate};if(t==="centric"){var f=s.coordinate,a=i.radius;return vn(vn(vn({},i),tu(i.cx,i.cy,a,f)),{},{angle:f,radius:a})}var p=s.coordinate,_=i.angle;return vn(vn(vn({},i),tu(i.cx,i.cy,p,_)),{},{angle:_,radius:p})}return Eye},Rk=function(t,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,f=(r??[]).reduce(function(a,p){var _=p.props.data;return _&&_.length?[].concat(zS(a),zS(_)):a},[]);return f.length>0?f:t&&t.length&&Xn(i)&&Xn(s)?t.slice(i,s+1):[]};function Aye(e){return e==="number"?[0,"auto"]:void 0}var zU=function(t,n,r,i){var s=t.graphicalItems,f=t.tooltipAxis,a=Rk(n,t);return r<0||!s||!s.length||r>=a.length?null:s.reduce(function(p,_){var S,E=(S=_.props.data)!==null&&S!==void 0?S:n;E&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(E=E.slice(t.dataStartIndex,t.dataEndIndex+1));var I;if(f.dataKey&&!f.allowDuplicatedCategory){var z=E===void 0?a:E;I=PI(z,f.dataKey,i)}else I=E&&E[r]||a[r];return I?[].concat(zS(p),[Age(_,I)]):p},[])},dae=function(t,n,r,i){var s=i||{x:t.chartX,y:t.chartY},f=zht(s,r),a=t.orderedTooltipTicks,p=t.tooltipAxis,_=t.tooltipTicks,S=Zit(f,a,_,p);if(S>=0&&_){var E=_[S]&&_[S].value,I=zU(t,n,S,E),z=Fht(r,a,S,s);return{activeTooltipIndex:S,activeLabel:E,activePayload:I,activeCoordinate:z}}return null},Nht=function(t,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,f=n.axisIdKey,a=n.stackGroups,p=n.dataStartIndex,_=n.dataEndIndex,S=t.layout,E=t.children,I=t.stackOffset,z=Sge(S,s);return r.reduce(function(F,U){var k,V=U.type.defaultProps!==void 0?vn(vn({},U.type.defaultProps),U.props):U.props,K=V.type,J=V.dataKey,ie=V.allowDataOverflow,Q=V.allowDuplicatedCategory,W=V.scale,te=V.ticks,X=V.includeHidden,ae=V[f];if(F[ae])return F;var le=Rk(t.data,{graphicalItems:i.filter(function(it){var Pe,jt=f in it.props?it.props[f]:(Pe=it.type.defaultProps)===null||Pe===void 0?void 0:Pe[f];return jt===ae}),dataStartIndex:p,dataEndIndex:_}),ge=le.length,ye,De,He;cht(V.domain,ie,K)&&(ye=J6(V.domain,null,ie),z&&(K==="number"||W!=="auto")&&(He=T2(le,J,"category")));var Be=Aye(K);if(!ye||ye.length===0){var Ee,Ne=(Ee=V.domain)!==null&&Ee!==void 0?Ee:Be;if(J){if(ye=T2(le,J,K),K==="category"&&z){var at=NZe(ye);Q&&at?(De=ye,ye=gP(0,ge)):Q||(ye=Dre(Ne,ye,U).reduce(function(it,Pe){return it.indexOf(Pe)>=0?it:[].concat(zS(it),[Pe])},[]))}else if(K==="category")Q?ye=ye.filter(function(it){return it!==""&&!Gi(it)}):ye=Dre(Ne,ye,U).reduce(function(it,Pe){return it.indexOf(Pe)>=0||Pe===""||Gi(Pe)?it:[].concat(zS(it),[Pe])},[]);else if(K==="number"){var yt=tat(le,i.filter(function(it){var Pe,jt,sn=f in it.props?it.props[f]:(Pe=it.type.defaultProps)===null||Pe===void 0?void 0:Pe[f],dn="hide"in it.props?it.props.hide:(jt=it.type.defaultProps)===null||jt===void 0?void 0:jt.hide;return sn===ae&&(X||!dn)}),J,s,S);yt&&(ye=yt)}z&&(K==="number"||W!=="auto")&&(He=T2(le,J,"category"))}else z?ye=gP(0,ge):a&&a[ae]&&a[ae].hasStack&&K==="number"?ye=I==="expand"?[0,1]:Ege(a[ae].stackGroups,p,_):ye=wge(le,i.filter(function(it){var Pe=f in it.props?it.props[f]:it.type.defaultProps[f],jt="hide"in it.props?it.props.hide:it.type.defaultProps.hide;return Pe===ae&&(X||!jt)}),K,S,!0);if(K==="number")ye=RU(E,ye,ae,s,te),Ne&&(ye=J6(Ne,ye,ie));else if(K==="category"&&Ne){var je=Ne,Ke=ye.every(function(it){return je.indexOf(it)>=0});Ke&&(ye=je)}}return vn(vn({},F),{},ni({},ae,vn(vn({},V),{},{axisType:s,domain:ye,categoricalDomain:He,duplicateDomain:De,originalDomain:(k=V.domain)!==null&&k!==void 0?k:Be,isCategorical:z,layout:S})))},{})},Bht=function(t,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,f=n.axisIdKey,a=n.stackGroups,p=n.dataStartIndex,_=n.dataEndIndex,S=t.layout,E=t.children,I=Rk(t.data,{graphicalItems:r,dataStartIndex:p,dataEndIndex:_}),z=I.length,F=Sge(S,s),U=-1;return r.reduce(function(k,V){var K=V.type.defaultProps!==void 0?vn(vn({},V.type.defaultProps),V.props):V.props,J=K[f],ie=Aye("number");if(!k[J]){U++;var Q;return F?Q=gP(0,z):a&&a[J]&&a[J].hasStack?(Q=Ege(a[J].stackGroups,p,_),Q=RU(E,Q,J,s)):(Q=J6(ie,wge(I,r.filter(function(W){var te,X,ae=f in W.props?W.props[f]:(te=W.type.defaultProps)===null||te===void 0?void 0:te[f],le="hide"in W.props?W.props.hide:(X=W.type.defaultProps)===null||X===void 0?void 0:X.hide;return ae===J&&!le}),"number",S),i.defaultProps.allowDataOverflow),Q=RU(E,Q,J,s)),vn(vn({},k),{},ni({},J,vn(vn({axisType:s},i.defaultProps),{},{hide:!0,orientation:ed(kht,"".concat(s,".").concat(U%2),null),domain:Q,originalDomain:ie,isCategorical:F,layout:S})))}return k},{})},jht=function(t,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,f=n.graphicalItems,a=n.stackGroups,p=n.dataStartIndex,_=n.dataEndIndex,S=t.children,E="".concat(i,"Id"),I=td(S,s),z={};return I&&I.length?z=Nht(t,{axes:I,graphicalItems:f,axisType:i,axisIdKey:E,stackGroups:a,dataStartIndex:p,dataEndIndex:_}):f&&f.length&&(z=Bht(t,{Axis:s,graphicalItems:f,axisType:i,axisIdKey:E,stackGroups:a,dataStartIndex:p,dataEndIndex:_})),z},Uht=function(t){var n=zv(t),r=Ly(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:bq(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:oP(n,r)}},pae=function(t){var n=t.children,r=t.defaultShowTooltip,i=Hf(n,AS),s=0,f=0;return t.data&&t.data.length!==0&&(f=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(f=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:f,activeTooltipIndex:-1,isTooltipActive:!!r}},$ht=function(t){return!t||!t.length?!1:t.some(function(n){var r=Gy(n&&n.type);return r&&r.indexOf("Bar")>=0})},mae=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Vht=function(t,n){var r=t.props,i=t.graphicalItems,s=t.xAxisMap,f=s===void 0?{}:s,a=t.yAxisMap,p=a===void 0?{}:a,_=r.width,S=r.height,E=r.children,I=r.margin||{},z=Hf(E,AS),F=Hf(E,ox),U=Object.keys(p).reduce(function(Q,W){var te=p[W],X=te.orientation;return!te.mirror&&!te.hide?vn(vn({},Q),{},ni({},X,Q[X]+te.width)):Q},{left:I.left||0,right:I.right||0}),k=Object.keys(f).reduce(function(Q,W){var te=f[W],X=te.orientation;return!te.mirror&&!te.hide?vn(vn({},Q),{},ni({},X,ed(Q,"".concat(X))+te.height)):Q},{top:I.top||0,bottom:I.bottom||0}),V=vn(vn({},k),U),K=V.bottom;z&&(V.bottom+=z.props.height||AS.defaultProps.height),F&&n&&(V=Jit(V,i,r,n));var J=_-V.left-V.right,ie=S-V.top-V.bottom;return vn(vn({brushBottom:K},V),{},{width:Math.max(J,0),height:Math.max(ie,0)})},qht=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},Hht=function(t){var n=t.chartName,r=t.GraphicalChild,i=t.defaultTooltipEventType,s=i===void 0?"axis":i,f=t.validateTooltipEventTypes,a=f===void 0?["axis"]:f,p=t.axisComponents,_=t.legendContent,S=t.formatAxisMap,E=t.defaultProps,I=function(V,K){var J=K.graphicalItems,ie=K.stackGroups,Q=K.offset,W=K.updateId,te=K.dataStartIndex,X=K.dataEndIndex,ae=V.barSize,le=V.layout,ge=V.barGap,ye=V.barCategoryGap,De=V.maxBarSize,He=mae(le),Be=He.numericAxisName,Ee=He.cateAxisName,Ne=$ht(J),at=[];return J.forEach(function(yt,je){var Ke=Rk(V.data,{graphicalItems:[yt],dataStartIndex:te,dataEndIndex:X}),it=yt.type.defaultProps!==void 0?vn(vn({},yt.type.defaultProps),yt.props):yt.props,Pe=it.dataKey,jt=it.maxBarSize,sn=it["".concat(Be,"Id")],dn=it["".concat(Ee,"Id")],Sn={},Ut=p.reduce(function(Er,Tr){var pi=K["".concat(Tr.axisType,"Map")],Br=it["".concat(Tr.axisType,"Id")];pi&&pi[Br]||Tr.axisType==="zAxis"||Cx();var hi=pi[Br];return vn(vn({},Er),{},ni(ni({},Tr.axisType,hi),"".concat(Tr.axisType,"Ticks"),Ly(hi)))},Sn),xe=Ut[Ee],Ye=Ut["".concat(Ee,"Ticks")],ct=ie&&ie[sn]&&ie[sn].hasStack&&dat(yt,ie[sn].stackGroups),mt=Gy(yt.type).indexOf("Bar")>=0,Ct=oP(xe,Ye),Yt=[],gn=Ne&&Kit({barSize:ae,stackGroups:ie,totalSize:qht(Ut,Ee)});if(mt){var En,or,sr=Gi(jt)?De:jt,Nr=(En=(or=oP(xe,Ye,!0))!==null&&or!==void 0?or:sr)!==null&&En!==void 0?En:0;Yt=Qit({barGap:ge,barCategoryGap:ye,bandSize:Nr!==Ct?Nr:Ct,sizeList:gn[dn],maxBarSize:sr}),Nr!==Ct&&(Yt=Yt.map(function(Er){return vn(vn({},Er),{},{position:vn(vn({},Er.position),{},{offset:Er.position.offset-Nr/2})})}))}var Pr=yt&&yt.type&&yt.type.getComposedData;Pr&&at.push({props:vn(vn({},Pr(vn(vn({},Ut),{},{displayedData:Ke,props:V,dataKey:Pe,item:yt,bandSize:Ct,barPosition:Yt,offset:Q,stackedData:ct,layout:le,dataStartIndex:te,dataEndIndex:X}))),{},ni(ni(ni({key:yt.key||"item-".concat(je)},Be,Ut[Be]),Ee,Ut[Ee]),"animationId",W)),childIndex:KZe(yt,V.children),item:yt})}),at},z=function(V,K){var J=V.props,ie=V.dataStartIndex,Q=V.dataEndIndex,W=V.updateId;if(!qJ({props:J}))return null;var te=J.children,X=J.layout,ae=J.stackOffset,le=J.data,ge=J.reverseStackOrder,ye=mae(X),De=ye.numericAxisName,He=ye.cateAxisName,Be=td(te,r),Ee=cat(le,Be,"".concat(De,"Id"),"".concat(He,"Id"),ae,ge),Ne=p.reduce(function(it,Pe){var jt="".concat(Pe.axisType,"Map");return vn(vn({},it),{},ni({},jt,jht(J,vn(vn({},Pe),{},{graphicalItems:Be,stackGroups:Pe.axisType===De&&Ee,dataStartIndex:ie,dataEndIndex:Q}))))},{}),at=Vht(vn(vn({},Ne),{},{props:J,graphicalItems:Be}),K==null?void 0:K.legendBBox);Object.keys(Ne).forEach(function(it){Ne[it]=S(J,Ne[it],at,it.replace("Map",""),n)});var yt=Ne["".concat(He,"Map")],je=Uht(yt),Ke=I(J,vn(vn({},Ne),{},{dataStartIndex:ie,dataEndIndex:Q,updateId:W,graphicalItems:Be,stackGroups:Ee,offset:at}));return vn(vn({formattedGraphicalItems:Ke,graphicalItems:Be,offset:at,stackGroups:Ee},je),Ne)},F=(function(k){function V(K){var J,ie,Q;return Sht(this,V),Q=Aht(this,V,[K]),ni(Q,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ni(Q,"accessibilityManager",new uht),ni(Q,"handleLegendBBoxUpdate",function(W){if(W){var te=Q.state,X=te.dataStartIndex,ae=te.dataEndIndex,le=te.updateId;Q.setState(vn({legendBBox:W},z({props:Q.props,dataStartIndex:X,dataEndIndex:ae,updateId:le},vn(vn({},Q.state),{},{legendBBox:W}))))}}),ni(Q,"handleReceiveSyncEvent",function(W,te,X){if(Q.props.syncId===W){if(X===Q.eventEmitterSymbol&&typeof Q.props.syncMethod!="function")return;Q.applySyncEvent(te)}}),ni(Q,"handleBrushChange",function(W){var te=W.startIndex,X=W.endIndex;if(te!==Q.state.dataStartIndex||X!==Q.state.dataEndIndex){var ae=Q.state.updateId;Q.setState(function(){return vn({dataStartIndex:te,dataEndIndex:X},z({props:Q.props,dataStartIndex:te,dataEndIndex:X,updateId:ae},Q.state))}),Q.triggerSyncEvent({dataStartIndex:te,dataEndIndex:X})}}),ni(Q,"handleMouseEnter",function(W){var te=Q.getMouseInfo(W);if(te){var X=vn(vn({},te),{},{isTooltipActive:!0});Q.setState(X),Q.triggerSyncEvent(X);var ae=Q.props.onMouseEnter;Li(ae)&&ae(X,W)}}),ni(Q,"triggeredAfterMouseMove",function(W){var te=Q.getMouseInfo(W),X=te?vn(vn({},te),{},{isTooltipActive:!0}):{isTooltipActive:!1};Q.setState(X),Q.triggerSyncEvent(X);var ae=Q.props.onMouseMove;Li(ae)&&ae(X,W)}),ni(Q,"handleItemMouseEnter",function(W){Q.setState(function(){return{isTooltipActive:!0,activeItem:W,activePayload:W.tooltipPayload,activeCoordinate:W.tooltipPosition||{x:W.cx,y:W.cy}}})}),ni(Q,"handleItemMouseLeave",function(){Q.setState(function(){return{isTooltipActive:!1}})}),ni(Q,"handleMouseMove",function(W){W.persist(),Q.throttleTriggeredAfterMouseMove(W)}),ni(Q,"handleMouseLeave",function(W){Q.throttleTriggeredAfterMouseMove.cancel();var te={isTooltipActive:!1};Q.setState(te),Q.triggerSyncEvent(te);var X=Q.props.onMouseLeave;Li(X)&&X(te,W)}),ni(Q,"handleOuterEvent",function(W){var te=ZZe(W),X=ed(Q.props,"".concat(te));if(te&&Li(X)){var ae,le;/.*touch.*/i.test(te)?le=Q.getMouseInfo(W.changedTouches[0]):le=Q.getMouseInfo(W),X((ae=le)!==null&&ae!==void 0?ae:{},W)}}),ni(Q,"handleClick",function(W){var te=Q.getMouseInfo(W);if(te){var X=vn(vn({},te),{},{isTooltipActive:!0});Q.setState(X),Q.triggerSyncEvent(X);var ae=Q.props.onClick;Li(ae)&&ae(X,W)}}),ni(Q,"handleMouseDown",function(W){var te=Q.props.onMouseDown;if(Li(te)){var X=Q.getMouseInfo(W);te(X,W)}}),ni(Q,"handleMouseUp",function(W){var te=Q.props.onMouseUp;if(Li(te)){var X=Q.getMouseInfo(W);te(X,W)}}),ni(Q,"handleTouchMove",function(W){W.changedTouches!=null&&W.changedTouches.length>0&&Q.throttleTriggeredAfterMouseMove(W.changedTouches[0])}),ni(Q,"handleTouchStart",function(W){W.changedTouches!=null&&W.changedTouches.length>0&&Q.handleMouseDown(W.changedTouches[0])}),ni(Q,"handleTouchEnd",function(W){W.changedTouches!=null&&W.changedTouches.length>0&&Q.handleMouseUp(W.changedTouches[0])}),ni(Q,"handleDoubleClick",function(W){var te=Q.props.onDoubleClick;if(Li(te)){var X=Q.getMouseInfo(W);te(X,W)}}),ni(Q,"handleContextMenu",function(W){var te=Q.props.onContextMenu;if(Li(te)){var X=Q.getMouseInfo(W);te(X,W)}}),ni(Q,"triggerSyncEvent",function(W){Q.props.syncId!==void 0&&b4.emit(x4,Q.props.syncId,W,Q.eventEmitterSymbol)}),ni(Q,"applySyncEvent",function(W){var te=Q.props,X=te.layout,ae=te.syncMethod,le=Q.state.updateId,ge=W.dataStartIndex,ye=W.dataEndIndex;if(W.dataStartIndex!==void 0||W.dataEndIndex!==void 0)Q.setState(vn({dataStartIndex:ge,dataEndIndex:ye},z({props:Q.props,dataStartIndex:ge,dataEndIndex:ye,updateId:le},Q.state)));else if(W.activeTooltipIndex!==void 0){var De=W.chartX,He=W.chartY,Be=W.activeTooltipIndex,Ee=Q.state,Ne=Ee.offset,at=Ee.tooltipTicks;if(!Ne)return;if(typeof ae=="function")Be=ae(at,W);else if(ae==="value"){Be=-1;for(var yt=0;yt<at.length;yt++)if(at[yt].value===W.activeLabel){Be=yt;break}}var je=vn(vn({},Ne),{},{x:Ne.left,y:Ne.top}),Ke=Math.min(De,je.x+je.width),it=Math.min(He,je.y+je.height),Pe=at[Be]&&at[Be].value,jt=zU(Q.state,Q.props.data,Be),sn=at[Be]?{x:X==="horizontal"?at[Be].coordinate:Ke,y:X==="horizontal"?it:at[Be].coordinate}:Eye;Q.setState(vn(vn({},W),{},{activeLabel:Pe,activeCoordinate:sn,activePayload:jt,activeTooltipIndex:Be}))}else Q.setState(W)}),ni(Q,"renderCursor",function(W){var te,X=Q.state,ae=X.isTooltipActive,le=X.activeCoordinate,ge=X.activePayload,ye=X.offset,De=X.activeTooltipIndex,He=X.tooltipAxisBandSize,Be=Q.getTooltipEventType(),Ee=(te=W.props.active)!==null&&te!==void 0?te:ae,Ne=Q.props.layout,at=W.key||"_recharts-cursor";return Je.createElement(ght,{key:at,activeCoordinate:le,activePayload:ge,activeTooltipIndex:De,chartName:n,element:W,isActive:Ee,layout:Ne,offset:ye,tooltipAxisBandSize:He,tooltipEventType:Be})}),ni(Q,"renderPolarAxis",function(W,te,X){var ae=ed(W,"type.axisType"),le=ed(Q.state,"".concat(ae,"Map")),ge=W.type.defaultProps,ye=ge!==void 0?vn(vn({},ge),W.props):W.props,De=le&&le[ye["".concat(ae,"Id")]];return be.cloneElement(W,vn(vn({},De),{},{className:ri(ae,De.className),key:W.key||"".concat(te,"-").concat(X),ticks:Ly(De,!0)}))}),ni(Q,"renderPolarGrid",function(W){var te=W.props,X=te.radialLines,ae=te.polarAngles,le=te.polarRadius,ge=Q.state,ye=ge.radiusAxisMap,De=ge.angleAxisMap,He=zv(ye),Be=zv(De),Ee=Be.cx,Ne=Be.cy,at=Be.innerRadius,yt=Be.outerRadius;return be.cloneElement(W,{polarAngles:Array.isArray(ae)?ae:Ly(Be,!0).map(function(je){return je.coordinate}),polarRadius:Array.isArray(le)?le:Ly(He,!0).map(function(je){return je.coordinate}),cx:Ee,cy:Ne,innerRadius:at,outerRadius:yt,key:W.key||"polar-grid",radialLines:X})}),ni(Q,"renderLegend",function(){var W=Q.state.formattedGraphicalItems,te=Q.props,X=te.children,ae=te.width,le=te.height,ge=Q.props.margin||{},ye=ae-(ge.left||0)-(ge.right||0),De=bge({children:X,formattedGraphicalItems:W,legendWidth:ye,legendContent:_});if(!De)return null;var He=De.item,Be=fae(De,yht);return be.cloneElement(He,vn(vn({},Be),{},{chartWidth:ae,chartHeight:le,margin:ge,onBBoxUpdate:Q.handleLegendBBoxUpdate}))}),ni(Q,"renderTooltip",function(){var W,te=Q.props,X=te.children,ae=te.accessibilityLayer,le=Hf(X,zm);if(!le)return null;var ge=Q.state,ye=ge.isTooltipActive,De=ge.activeCoordinate,He=ge.activePayload,Be=ge.activeLabel,Ee=ge.offset,Ne=(W=le.props.active)!==null&&W!==void 0?W:ye;return be.cloneElement(le,{viewBox:vn(vn({},Ee),{},{x:Ee.left,y:Ee.top}),active:Ne,label:Be,payload:Ne?He:[],coordinate:De,accessibilityLayer:ae})}),ni(Q,"renderBrush",function(W){var te=Q.props,X=te.margin,ae=te.data,le=Q.state,ge=le.offset,ye=le.dataStartIndex,De=le.dataEndIndex,He=le.updateId;return be.cloneElement(W,{key:W.key||"_recharts-brush",onChange:GM(Q.handleBrushChange,W.props.onChange),data:ae,x:Xn(W.props.x)?W.props.x:ge.left,y:Xn(W.props.y)?W.props.y:ge.top+ge.height+ge.brushBottom-(X.bottom||0),width:Xn(W.props.width)?W.props.width:ge.width,startIndex:ye,endIndex:De,updateId:"brush-".concat(He)})}),ni(Q,"renderReferenceElement",function(W,te,X){if(!W)return null;var ae=Q,le=ae.clipPathId,ge=Q.state,ye=ge.xAxisMap,De=ge.yAxisMap,He=ge.offset,Be=W.type.defaultProps||{},Ee=W.props,Ne=Ee.xAxisId,at=Ne===void 0?Be.xAxisId:Ne,yt=Ee.yAxisId,je=yt===void 0?Be.yAxisId:yt;return be.cloneElement(W,{key:W.key||"".concat(te,"-").concat(X),xAxis:ye[at],yAxis:De[je],viewBox:{x:He.left,y:He.top,width:He.width,height:He.height},clipPathId:le})}),ni(Q,"renderActivePoints",function(W){var te=W.item,X=W.activePoint,ae=W.basePoint,le=W.childIndex,ge=W.isRange,ye=[],De=te.props.key,He=te.item.type.defaultProps!==void 0?vn(vn({},te.item.type.defaultProps),te.item.props):te.item.props,Be=He.activeDot,Ee=He.dataKey,Ne=vn(vn({index:le,dataKey:Ee,cx:X.x,cy:X.y,r:4,fill:Gq(te.item),strokeWidth:2,stroke:"#fff",payload:X.payload,value:X.value},oa(Be,!1)),RI(Be));return ye.push(V.renderActiveDot(Be,Ne,"".concat(De,"-activePoint-").concat(le))),ae?ye.push(V.renderActiveDot(Be,vn(vn({},Ne),{},{cx:ae.x,cy:ae.y}),"".concat(De,"-basePoint-").concat(le))):ge&&ye.push(null),ye}),ni(Q,"renderGraphicChild",function(W,te,X){var ae=Q.filterFormatItem(W,te,X);if(!ae)return null;var le=Q.getTooltipEventType(),ge=Q.state,ye=ge.isTooltipActive,De=ge.tooltipAxis,He=ge.activeTooltipIndex,Be=ge.activeLabel,Ee=Q.props.children,Ne=Hf(Ee,zm),at=ae.props,yt=at.points,je=at.isRange,Ke=at.baseLine,it=ae.item.type.defaultProps!==void 0?vn(vn({},ae.item.type.defaultProps),ae.item.props):ae.item.props,Pe=it.activeDot,jt=it.hide,sn=it.activeBar,dn=it.activeShape,Sn=!!(!jt&&ye&&Ne&&(Pe||sn||dn)),Ut={};le!=="axis"&&Ne&&Ne.props.trigger==="click"?Ut={onClick:GM(Q.handleItemMouseEnter,W.props.onClick)}:le!=="axis"&&(Ut={onMouseLeave:GM(Q.handleItemMouseLeave,W.props.onMouseLeave),onMouseEnter:GM(Q.handleItemMouseEnter,W.props.onMouseEnter)});var xe=be.cloneElement(W,vn(vn({},ae.props),Ut));function Ye(Tr){return typeof De.dataKey=="function"?De.dataKey(Tr.payload):null}if(Sn)if(He>=0){var ct,mt;if(De.dataKey&&!De.allowDuplicatedCategory){var Ct=typeof De.dataKey=="function"?Ye:"payload.".concat(De.dataKey.toString());ct=PI(yt,Ct,Be),mt=je&&Ke&&PI(Ke,Ct,Be)}else ct=yt==null?void 0:yt[He],mt=je&&Ke&&Ke[He];if(dn||sn){var Yt=W.props.activeIndex!==void 0?W.props.activeIndex:He;return[be.cloneElement(W,vn(vn(vn({},ae.props),Ut),{},{activeIndex:Yt})),null,null]}if(!Gi(ct))return[xe].concat(zS(Q.renderActivePoints({item:ae,activePoint:ct,basePoint:mt,childIndex:He,isRange:je})))}else{var gn,En=(gn=Q.getItemByXY(Q.state.activeCoordinate))!==null&&gn!==void 0?gn:{graphicalItem:xe},or=En.graphicalItem,sr=or.item,Nr=sr===void 0?W:sr,Pr=or.childIndex,Er=vn(vn(vn({},ae.props),Ut),{},{activeIndex:Pr});return[be.cloneElement(Nr,Er),null,null]}return je?[xe,null,null]:[xe,null]}),ni(Q,"renderCustomized",function(W,te,X){return be.cloneElement(W,vn(vn({key:"recharts-customized-".concat(X)},Q.props),Q.state))}),ni(Q,"renderMap",{CartesianGrid:{handler:KM,once:!0},ReferenceArea:{handler:Q.renderReferenceElement},ReferenceLine:{handler:KM},ReferenceDot:{handler:Q.renderReferenceElement},XAxis:{handler:KM},YAxis:{handler:KM},Brush:{handler:Q.renderBrush,once:!0},Bar:{handler:Q.renderGraphicChild},Line:{handler:Q.renderGraphicChild},Area:{handler:Q.renderGraphicChild},Radar:{handler:Q.renderGraphicChild},RadialBar:{handler:Q.renderGraphicChild},Scatter:{handler:Q.renderGraphicChild},Pie:{handler:Q.renderGraphicChild},Funnel:{handler:Q.renderGraphicChild},Tooltip:{handler:Q.renderCursor,once:!0},PolarGrid:{handler:Q.renderPolarGrid,once:!0},PolarAngleAxis:{handler:Q.renderPolarAxis},PolarRadiusAxis:{handler:Q.renderPolarAxis},Customized:{handler:Q.renderCustomized}}),Q.clipPathId="".concat((J=K.id)!==null&&J!==void 0?J:PO("recharts"),"-clip"),Q.throttleTriggeredAfterMouseMove=bme(Q.triggeredAfterMouseMove,(ie=K.throttleDelay)!==null&&ie!==void 0?ie:1e3/60),Q.state={},Q}return Mht(V,k),Eht(V,[{key:"componentDidMount",value:function(){var J,ie;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(J=this.props.margin.left)!==null&&J!==void 0?J:0,top:(ie=this.props.margin.top)!==null&&ie!==void 0?ie:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var J=this.props,ie=J.children,Q=J.data,W=J.height,te=J.layout,X=Hf(ie,zm);if(X){var ae=X.props.defaultIndex;if(!(typeof ae!="number"||ae<0||ae>this.state.tooltipTicks.length-1)){var le=this.state.tooltipTicks[ae]&&this.state.tooltipTicks[ae].value,ge=zU(this.state,Q,ae,le),ye=this.state.tooltipTicks[ae].coordinate,De=(this.state.offset.top+W)/2,He=te==="horizontal",Be=He?{x:ye,y:De}:{y:ye,x:De},Ee=this.state.formattedGraphicalItems.find(function(at){var yt=at.item;return yt.type.name==="Scatter"});Ee&&(Be=vn(vn({},Be),Ee.props.points[ae].tooltipPosition),ge=Ee.props.points[ae].tooltipPayload);var Ne={activeTooltipIndex:ae,isTooltipActive:!0,activeLabel:le,activePayload:ge,activeCoordinate:Be};this.setState(Ne),this.renderCursor(X),this.accessibilityManager.setIndex(ae)}}}},{key:"getSnapshotBeforeUpdate",value:function(J,ie){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==ie.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==J.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==J.margin){var Q,W;this.accessibilityManager.setDetails({offset:{left:(Q=this.props.margin.left)!==null&&Q!==void 0?Q:0,top:(W=this.props.margin.top)!==null&&W!==void 0?W:0}})}return null}},{key:"componentDidUpdate",value:function(J){x6([Hf(J.children,zm)],[Hf(this.props.children,zm)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var J=Hf(this.props.children,zm);if(J&&typeof J.props.shared=="boolean"){var ie=J.props.shared?"axis":"item";return a.indexOf(ie)>=0?ie:s}return s}},{key:"getMouseInfo",value:function(J){if(!this.container)return null;var ie=this.container,Q=ie.getBoundingClientRect(),W=jet(Q),te={chartX:Math.round(J.pageX-W.left),chartY:Math.round(J.pageY-W.top)},X=Q.width/ie.offsetWidth||1,ae=this.inRange(te.chartX,te.chartY,X);if(!ae)return null;var le=this.state,ge=le.xAxisMap,ye=le.yAxisMap,De=this.getTooltipEventType(),He=dae(this.state,this.props.data,this.props.layout,ae);if(De!=="axis"&&ge&&ye){var Be=zv(ge).scale,Ee=zv(ye).scale,Ne=Be&&Be.invert?Be.invert(te.chartX):null,at=Ee&&Ee.invert?Ee.invert(te.chartY):null;return vn(vn({},te),{},{xValue:Ne,yValue:at},He)}return He?vn(vn({},te),He):null}},{key:"inRange",value:function(J,ie){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,W=this.props.layout,te=J/Q,X=ie/Q;if(W==="horizontal"||W==="vertical"){var ae=this.state.offset,le=te>=ae.left&&te<=ae.left+ae.width&&X>=ae.top&&X<=ae.top+ae.height;return le?{x:te,y:X}:null}var ge=this.state,ye=ge.angleAxisMap,De=ge.radiusAxisMap;if(ye&&De){var He=zv(ye);return Rre({x:te,y:X},He)}return null}},{key:"parseEventsOfWrapper",value:function(){var J=this.props.children,ie=this.getTooltipEventType(),Q=Hf(J,zm),W={};Q&&ie==="axis"&&(Q.props.trigger==="click"?W={onClick:this.handleClick}:W={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var te=RI(this.props,this.handleOuterEvent);return vn(vn({},te),W)}},{key:"addListener",value:function(){b4.on(x4,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){b4.removeListener(x4,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(J,ie,Q){for(var W=this.state.formattedGraphicalItems,te=0,X=W.length;te<X;te++){var ae=W[te];if(ae.item===J||ae.props.key===J.key||ie===Gy(ae.item.type)&&Q===ae.childIndex)return ae}return null}},{key:"renderClipPath",value:function(){var J=this.clipPathId,ie=this.state.offset,Q=ie.left,W=ie.top,te=ie.height,X=ie.width;return Je.createElement("defs",null,Je.createElement("clipPath",{id:J},Je.createElement("rect",{x:Q,y:W,height:te,width:X})))}},{key:"getXScales",value:function(){var J=this.state.xAxisMap;return J?Object.entries(J).reduce(function(ie,Q){var W=cae(Q,2),te=W[0],X=W[1];return vn(vn({},ie),{},ni({},te,X.scale))},{}):null}},{key:"getYScales",value:function(){var J=this.state.yAxisMap;return J?Object.entries(J).reduce(function(ie,Q){var W=cae(Q,2),te=W[0],X=W[1];return vn(vn({},ie),{},ni({},te,X.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(J){var ie;return(ie=this.state.xAxisMap)===null||ie===void 0||(ie=ie[J])===null||ie===void 0?void 0:ie.scale}},{key:"getYScaleByAxisId",value:function(J){var ie;return(ie=this.state.yAxisMap)===null||ie===void 0||(ie=ie[J])===null||ie===void 0?void 0:ie.scale}},{key:"getItemByXY",value:function(J){var ie=this.state,Q=ie.formattedGraphicalItems,W=ie.activeItem;if(Q&&Q.length)for(var te=0,X=Q.length;te<X;te++){var ae=Q[te],le=ae.props,ge=ae.item,ye=ge.type.defaultProps!==void 0?vn(vn({},ge.type.defaultProps),ge.props):ge.props,De=Gy(ge.type);if(De==="Bar"){var He=(le.data||[]).find(function(at){return rlt(J,at)});if(He)return{graphicalItem:ae,payload:He}}else if(De==="RadialBar"){var Be=(le.data||[]).find(function(at){return Rre(J,at)});if(Be)return{graphicalItem:ae,payload:Be}}else if(Tk(ae,W)||Ek(ae,W)||RA(ae,W)){var Ee=Ylt({graphicalItem:ae,activeTooltipItem:W,itemData:ye.data}),Ne=ye.activeIndex===void 0?Ee:ye.activeIndex;return{graphicalItem:vn(vn({},ae),{},{childIndex:Ne}),payload:RA(ae,W)?ye.data[Ee]:ae.props.data[Ee]}}}return null}},{key:"render",value:function(){var J=this;if(!qJ(this))return null;var ie=this.props,Q=ie.children,W=ie.className,te=ie.width,X=ie.height,ae=ie.style,le=ie.compact,ge=ie.title,ye=ie.desc,De=fae(ie,_ht),He=oa(De,!1);if(le)return Je.createElement(Hie,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Je.createElement(S6,Sw({},He,{width:te,height:X,title:ge,desc:ye}),this.renderClipPath(),GJ(Q,this.renderMap)));if(this.props.accessibilityLayer){var Be,Ee;He.tabIndex=(Be=this.props.tabIndex)!==null&&Be!==void 0?Be:0,He.role=(Ee=this.props.role)!==null&&Ee!==void 0?Ee:"application",He.onKeyDown=function(at){J.accessibilityManager.keyboardEvent(at)},He.onFocus=function(){J.accessibilityManager.focus()}}var Ne=this.parseEventsOfWrapper();return Je.createElement(Hie,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Je.createElement("div",Sw({className:ri("recharts-wrapper",W),style:vn({position:"relative",cursor:"default",width:te,height:X},ae)},Ne,{ref:function(yt){J.container=yt}}),Je.createElement(S6,Sw({},He,{width:te,height:X,title:ge,desc:ye,style:Lht}),this.renderClipPath(),GJ(Q,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(be.Component);ni(F,"displayName",n),ni(F,"defaultProps",vn({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},E)),ni(F,"getDerivedStateFromProps",function(k,V){var K=k.dataKey,J=k.data,ie=k.children,Q=k.width,W=k.height,te=k.layout,X=k.stackOffset,ae=k.margin,le=V.dataStartIndex,ge=V.dataEndIndex;if(V.updateId===void 0){var ye=pae(k);return vn(vn(vn({},ye),{},{updateId:0},z(vn(vn({props:k},ye),{},{updateId:0}),V)),{},{prevDataKey:K,prevData:J,prevWidth:Q,prevHeight:W,prevLayout:te,prevStackOffset:X,prevMargin:ae,prevChildren:ie})}if(K!==V.prevDataKey||J!==V.prevData||Q!==V.prevWidth||W!==V.prevHeight||te!==V.prevLayout||X!==V.prevStackOffset||!Lw(ae,V.prevMargin)){var De=pae(k),He={chartX:V.chartX,chartY:V.chartY,isTooltipActive:V.isTooltipActive},Be=vn(vn({},dae(V,J,te)),{},{updateId:V.updateId+1}),Ee=vn(vn(vn({},De),He),Be);return vn(vn(vn({},Ee),z(vn({props:k},Ee),V)),{},{prevDataKey:K,prevData:J,prevWidth:Q,prevHeight:W,prevLayout:te,prevStackOffset:X,prevMargin:ae,prevChildren:ie})}if(!x6(ie,V.prevChildren)){var Ne,at,yt,je,Ke=Hf(ie,AS),it=Ke&&(Ne=(at=Ke.props)===null||at===void 0?void 0:at.startIndex)!==null&&Ne!==void 0?Ne:le,Pe=Ke&&(yt=(je=Ke.props)===null||je===void 0?void 0:je.endIndex)!==null&&yt!==void 0?yt:ge,jt=it!==le||Pe!==ge,sn=!Gi(J),dn=sn&&!jt?V.updateId:V.updateId+1;return vn(vn({updateId:dn},z(vn(vn({props:k},V),{},{updateId:dn,dataStartIndex:it,dataEndIndex:Pe}),V)),{},{prevChildren:ie,dataStartIndex:it,dataEndIndex:Pe})}return null}),ni(F,"renderActiveDot",function(k,V,K){var J;return be.isValidElement(k)?J=be.cloneElement(k,V):Li(k)?J=k(V):J=Je.createElement(Wq,V),Je.createElement(Rs,{className:"recharts-active-dot",key:K},J)});var U=be.forwardRef(function(V,K){return Je.createElement(F,Sw({},V,{ref:K}))});return U.displayName=F.displayName,U},Ght=Hht({chartName:"LineChart",GraphicalChild:jO,axisComponents:[{axisType:"xAxis",AxisComp:Ik},{axisType:"yAxis",AxisComp:Pk}],formatAxisMap:Vut});const gae=["#0077b6","#ff7f11","#009e73","#d62828","#6f4e7c","#6c757d","#118ab2","#8f2d56"],Yht=e=>Pn(e).format("MM/DD HH:mm"),Wht=e=>Pn(e).format("MM/DD/YYYY h:mm a"),Xht=({rows:e,series:t})=>Array.isArray(e)&&e.length>0&&Array.isArray(t)&&t.length>0?Oe.jsx("div",{className:"download-chart-wrapper",role:"img","aria-label":"Rainfall results line chart by sensor",children:Oe.jsx(Ret,{width:"100%",height:460,children:Oe.jsxs(Ght,{data:e,margin:{top:16,right:24,left:0,bottom:16},children:[Oe.jsx(fye,{strokeDasharray:"4 4"}),Oe.jsx(Ik,{dataKey:"timestampMs",domain:["dataMin","dataMax"],minTickGap:36,tickFormatter:Yht,type:"number"}),Oe.jsx(Pk,{}),Oe.jsx(zm,{formatter:(r,i,s)=>[r,s==null?void 0:s.name],labelFormatter:Wht}),Oe.jsx(ox,{}),t.map((r,i)=>Oe.jsx(jO,{connectNulls:!1,dataKey:r.key,dot:!1,isAnimationActive:!1,name:r.label,stroke:gae[i%gae.length],strokeWidth:2,type:"monotone"},r.key))]})})}):Oe.jsx("p",{className:"small mb-0",children:Oe.jsx("em",{children:"No chartable results were returned for this query."})}),Zht="MM/DD/YYYY HH:mm:ss",O2={start:"start",midpoint:"midpoint",end:"end"},yae=["start_ts","end_ts","ts","val","src","id","type"],S4=e=>{if(typeof e!="string")return null;const t=Pn.parseZone(e,Pn.ISO_8601,!0);return t.isValid()?t.format(Zht):null},Kht=e=>{const t={...e},n=t.ts;if(typeof n!="string")return t;const r=n.split("/");if(r.length===2){const s=S4(r[0].trim()),f=S4(r[1].trim());if(s!==null&&f!==null){const{ts:a,...p}=t;return{...p,start_ts:s,end_ts:f}}return t}const i=S4(n);return i===null?t:{...t,ts:i}},Qht=e=>{const t=[];Object.keys(e||{}).forEach(f=>{const a=e[f];Array.isArray(a)&&a.forEach(p=>{(Array.isArray(p==null?void 0:p.data)?p.data:[]).forEach(S=>{t.push(Kht({...S,id:p==null?void 0:p.id,type:f}))})})});const r=new Set,i=[];t.forEach(f=>{Object.keys(f).forEach(a=>{r.add(a),!yae.includes(a)&&!i.includes(a)&&i.push(a)})});const s=yae.filter(f=>r.has(f));return{rows:t,fields:[...s,...i]}},Jht=(e,t)=>`${typeof e=="string"&&e.length>0?`${e[0].toUpperCase()}${e.slice(1)}`:"Sensor"} ${t}`,edt=(e,t=O2.start)=>{if(typeof e!="string")return null;const n=e.split("/");if(n.length===2){const i=Pn.parseZone(n[0].trim(),Pn.ISO_8601,!0),s=Pn.parseZone(n[1].trim(),Pn.ISO_8601,!0);return!i.isValid()||!s.isValid()?null:t===O2.end?s.valueOf():t===O2.midpoint?Math.round((i.valueOf()+s.valueOf())/2):i.valueOf()}const r=Pn.parseZone(e,Pn.ISO_8601,!0);return r.isValid()?r.valueOf():null},tdt=(e,t={})=>{const n=t.timestampRule||O2.start,r=new Map,i=[],s=new Set;return Object.keys(e||{}).forEach(p=>{const _=e[p];Array.isArray(_)&&_.forEach(S=>{const E=S==null?void 0:S.id;if(E==null||E==="")return;const I=`${p}:${E}`;(Array.isArray(S==null?void 0:S.data)?S.data:[]).forEach(F=>{const U=edt(F==null?void 0:F.ts,n),k=Number(F==null?void 0:F.val);if(U===null||!Number.isFinite(k))return;s.has(I)||(s.add(I),i.push({key:I,label:Jht(p,E),sensorType:p,sensorId:E}));const V=r.get(U)||{timestampMs:U};V[I]=k,r.set(U,V)})})}),{rows:[...r.values()].sort((p,_)=>p.timestampMs-_.timestampMs),series:i}};class ndt extends Je.Component{constructor(t){super(),this.handleDownloadClick=this.handleDownloadClick.bind(this)}handleDownloadClick(t){t.preventDefault();var n=new Blob([this.props.csv],{type:"application/csv"});XXe.saveAs(n,"rainfall.csv",{autoBom:!0})}render(){let t=this.props.fetchHistoryItem.fetchKwargs,n=t.sensorLocations,r=n.gauge,i=n.pixel;return Oe.jsxs(Zs,{show:this.props.show,onHide:this.props.onHide,size:"xl",dialogClassName:"min-vw-95",animation:!1,children:[Oe.jsx(Zs.Header,{closeButton:!0,children:Oe.jsxs(Zs.Title,{children:[Oe.jsx(ia,{children:Oe.jsxs(kr,{children:[Oe.jsxs("h4",{children:[Pn(t.startDt).format("DD MMM YYYY, h:mm a")," to ",Pn(t.endDt).format("DD MMM YYYY, h:mm a")]}),Oe.jsx("hr",{})]})}),r.length>0?Oe.jsxs(ia,{children:[Oe.jsx(kr,{md:3,children:Oe.jsx("small",{children:"Gauges:"})}),Oe.jsx(kr,{md:9,children:Oe.jsx("small",{children:r.map(s=>s.label).join(", ")})})]}):null,i.length>0?Oe.jsxs(ia,{children:[Oe.jsx(kr,{md:3,children:Oe.jsx("small",{children:"Pixels:"})}),Oe.jsx(kr,{md:9,children:Oe.jsxs("small",{children:[i.length," pixels queried"]})})]}):null,Oe.jsxs(ia,{children:[Oe.jsx(kr,{md:3,children:Oe.jsx("small",{children:"Interval:"})}),Oe.jsx(kr,{md:9,children:Oe.jsx("small",{children:t.rollup})})]})]})}),Oe.jsxs(Zs.Body,{children:[Oe.jsxs(ia,{className:"download-modal-download-row",children:[Oe.jsx(kr,{sm:3,children:Oe.jsx("p",{className:"mb-0",children:"Download as:"})}),Oe.jsx(kr,{sm:3,children:Oe.jsx(Yf,{className:"w-100",variant:"outline-primary",size:"sm",onClick:this.handleDownloadClick,children:"CSV"})})]}),Oe.jsx(ia,{children:Oe.jsxs(kr,{children:[Oe.jsx("p",{className:"small download-modal-chart-meta",children:Oe.jsx("em",{children:`${this.props.rows.length} total records across ${this.props.chartSeries.length} sensors`})}),Oe.jsx(Xht,{rows:this.props.chartRows,series:this.props.chartSeries})]})})]}),Oe.jsx(Zs.Footer,{children:Oe.jsx(Yf,{variant:"outline-primary",onClick:this.props.onHide,children:"Close"})})]})}}const rdt=(e,t)=>{let n=t.fetchHistoryItem.results||{},{rows:r,fields:i}=Qht(n),{rows:s,series:f}=tdt(n,{timestampRule:O2.start});return{rows:r,chartRows:s,chartSeries:f,csv:r.length>0?GXe.unparse({fields:i,data:r}):""}},idt=af(rdt)(ndt);class adt extends Je.Component{constructor(t,n){super(t,n),this.handleShow=this.handleShow.bind(this),this.handleClose=this.handleClose.bind(this),this.state={show:!1}}handleClose(t){this.setState({show:!1})}handleShow(t){this.setState({show:!0}),this.props.fetchHistoryItem.isActive||(console.log(t),console.log("Loading data from",this.props.fetchHistoryItem.requestId,"to the map"),this.props.dispatchPickDownload())}render(){let t=this.props.fetchHistoryItem,n=t.fetchKwargs,r=n.sensorLocations,i=r.gauge,s=r.pixel,f=t.results!==!1,a=t.processedKwargs,p=Fy(["deferred","failed","does not exist","error"],t.status);return Oe.jsxs("div",{className:"download-item-wrapper",children:[Oe.jsx(ia,{children:Oe.jsxs(kr,{sm:12,children:[Oe.jsxs(Ub.Title,{children:[Pn(n.startDt).format("DD MMM YYYY, h:mm a")," to ",Pn(n.endDt).format("DD MMM YYYY, h:mm a")]}),Oe.jsx("hr",{})]})}),i.length>0?Oe.jsxs(ia,{children:[Oe.jsx(kr,{lg:3,children:Oe.jsx("p",{className:"di-header",children:"Gauges:"})}),Oe.jsx(kr,{lg:9,children:Oe.jsx("p",{children:i.map(_=>_.label).join(", ")})})]}):null,s.length>0?Oe.jsxs(ia,{children:[Oe.jsx(kr,{lg:3,children:Oe.jsx("p",{className:"di-header",children:"Pixels:"})}),Oe.jsx(kr,{lg:9,children:Oe.jsxs("p",{children:[s.length," pixels queried"]})})]}):null,Oe.jsxs(ia,{children:[Oe.jsx(kr,{lg:3,children:Oe.jsx("p",{className:"di-header",children:"Aggregation:"})}),Oe.jsx(kr,{lg:9,children:Oe.jsx("p",{children:n.rollup})})]}),a===void 0?null:Oe.jsxs(ia,{children:[Oe.jsx(kr,{lg:3,children:Oe.jsx("p",{className:"di-header",children:"Date/time range queried:"})}),Oe.jsx(kr,{lg:9,children:Oe.jsxs("p",{children:[a.start_dt,"/",a.end_dt]})})]}),f?Oe.jsx(ia,{children:Oe.jsx(kr,{children:Oe.jsx(Yf,{variant:"outline-primary",size:"sm",onClick:this.handleShow,children:"View and Download Results"})})}):null,p?t.messages.map((_,S)=>Oe.jsx(D4,{dismissible:!0,variant:"danger",children:Oe.jsx("small",{children:_})},S)):null,Oe.jsx(idt,{show:this.state.show,onHide:this.handleClose,fetchHistoryItem:this.props.fetchHistoryItem})]})}}const odt=(e,t)=>({...t}),sdt=(e,t)=>({dispatchPickDownload:n=>{let r={...t.fetchHistoryItem,contextType:t.contextType};e(Jfe(r))}}),ldt=af(odt,sdt)(adt);class udt extends Je.Component{constructor(t,n){super(t,n),this.handleListClick=this.handleListClick.bind(this),this.handleDeleteClick=this.handleDeleteClick.bind(this)}handleListClick(t){this.props.pickDownload(t)}handleDeleteClick(t,n){t.preventDefault(),t.stopPropagation(),this.props.deleteDownload({requestId:n})}render(){return Oe.jsx(Vw,{variant:"flush",children:this.props.fetchHistory.slice(0).reverse().map(t=>{let n=Fy(["deferred","failed","does not exist","error"],t.status),r;return t.isActive&&t.status==="finished"?r="primary":n?r="danger":r="",Oe.jsxs(Vw.Item,{as:"div",className:"mx-0 download-list-item",action:!0,onClick:()=>this.handleListClick(t),variant:r,children:[Oe.jsx(VA,{className:"download-list-item-delete","aria-label":"Delete rainfall query result",onClick:i=>this.handleDeleteClick(i,t.requestId)}),Oe.jsxs(ia,{className:"g-0 download-list-item-row",children:[Oe.jsx(kr,{sm:t.isFetching?11:12,className:"download-list-item-content",children:Oe.jsx(ldt,{fetchHistoryItem:t,contextType:this.props.contextType,rainfallDataType:this.props.rainfallDataType,rainfallSensorType:this.props.rainfallSensorType})}),t.isFetching?Oe.jsx(kr,{sm:1,className:"download-list-item-spinner",children:Oe.jsx(d$,{animation:"border",variant:"primary",children:Oe.jsx("span",{className:"visually-hidden",children:'"Fetching rainfall data...'})})}):null]})]},t.requestId)})})}}const cdt=(e,t)=>{let n=e0(e,t.contextType);return{fetchHistory:n,hasDownloads:n.length>0,rainfallDataType:t.rainfallDataType}},fdt=(e,t)=>({pickDownload:n=>{e(Jfe({...n,contextType:t.contextType}))},deleteDownload:n=>{e(h$e({...n,contextType:t.contextType}))}}),hdt=af(cdt,fdt)(udt);class ddt extends Je.Component{constructor(t){super(),this.handleDownloadClick=this.handleDownloadClick.bind(this)}handleDownloadClick(){this.props.fetchRainfallData({rainfallDataType:this.props.rainfallDataType,contextType:this.props.contextType})}render(){return Oe.jsxs("div",{children:[Oe.jsx(Ub,{children:Oe.jsxs(Ub.Body,{children:[Oe.jsx(o7e,{rainfallDataType:this.props.rainfallDataType,contextType:this.props.contextType}),Oe.jsx("hr",{}),Oe.jsx(BXe,{rainfallDataType:this.props.rainfallDataType,contextType:this.props.contextType}),Oe.jsx("hr",{}),Oe.jsx(VXe,{rainfallDataType:this.props.rainfallDataType,contextType:this.props.contextType}),Oe.jsx("hr",{}),Oe.jsx(Yf,{onClick:this.handleDownloadClick,disabled:!this.props.hasKwargs,block:!0,children:"Get Rainfall Data"})]})}),Oe.jsx("br",{}),this.props.hasDownloads?Oe.jsxs(Ub,{children:[Oe.jsx(Ub.Header,{children:"Retrieved Rainfall Data"}),Oe.jsx(hdt,{contextType:this.props.contextType,rainfallDataType:this.props.rainfallDataType})]}):null]})}}function pdt(e,t){let n=vje(e,t.contextType),r=e0(e,t.contextType);return{hasKwargs:!Oj(n),hasDownloads:r.length>0}}const mdt=(e,t)=>({fetchRainfallData:n=>{e(f$e(n))}}),T4=af(pdt,mdt)(ddt),gdt=Oe.jsxs(Qb,{id:"popover-basic",children:[Oe.jsx(Qb.Header,{as:"h3",children:"Provisional Data Disclaimer"}),Oe.jsx(Qb.Body,{children:"Data shown here are provisional and subject to revision until they have been thoroughly reviewed and received final approval. Current condition data relayed by satellite or other telemetry are automatically screened to not display improbable values until they can be verified. Provisional data may be inaccurate due to instrument malfunctions or physical changes at the measurement site. Subsequent review based on field inspections and measurements may result in significant revisions to the data. Data users are cautioned to consider carefully the provisional nature of the information before using it for decisions that concern personal or public safety or the conduct of business that involves substantial monetary or operational consequences. Information concerning the accuracy and appropriate uses of these data or concerning other hydrologic data may be obtained from the 3RWW."})]});class ydt extends Je.Component{render(){return Oe.jsx(ia,{children:Oe.jsxs(kr,{children:[Oe.jsx("h1",{className:"data-type-header",children:"Get Real-time Rainfall Data"}),Oe.jsxs("p",{children:["Download real-time, provisional rainfall measurements are available from the rain gauge network and NEXRAD radar. This data is updated every 15 minutes.",Oe.jsx("small",{className:"my-3",children:Oe.jsx(nse,{trigger:"click",placement:"bottom",overlay:gdt,children:Oe.jsx(Yf,{variant:"light",size:"sm",children:"Provisional Data Disclaimer"})})})]})]})})}}class _dt extends Je.Component{render(){return this.props.isAppThinking?Oe.jsxs("div",{className:"thinking-overlay",children:[Oe.jsx("div",{className:"d-flex thinking-content",children:Oe.jsxs("span",{className:"fa-layers fa-fw",children:[Oe.jsx(dx,{icon:BEe,pulse:!0,size:"8x"}),Oe.jsx(dx,{icon:NEe,size:"4x",transform:"right-8"})]})}),Oe.jsx("p",{className:"debug-messages",children:this.props.message})]}):null}}function vdt(e){let t=e.progress.messages;return{isAppThinking:e.progress.isThinking>0,message:t[t.length-1]}}const bdt=af(vdt)(_dt);class xdt extends Je.Component{render(){return Oe.jsxs("div",{className:"layout-root",children:[Oe.jsx(bdt,{}),Oe.jsx(ia,{children:Oe.jsx(kr,{})}),Oe.jsxs(ia,{className:"layout-main-row g-0",children:[Oe.jsx(kr,{sm:7,className:"map-column",children:Oe.jsx(y8e,{activeTab:this.props.tab,token:this.props.token,styleUrl:this.props.styleId,latitude:this.props.latitude,longitude:this.props.longitude,zoom:this.props.zoom})}),Oe.jsx(kr,{sm:5,className:"sidebar-column",children:Oe.jsx(Kae,{className:"sidebar mt-3",children:Oe.jsxs(FP,{children:[Oe.jsxs(Tw,{active:this.props.tab===fi.legacyRealtime,eventKey:fi.legacyRealtime,title:"Real-Time Rainfall",children:[Oe.jsx(ydt,{}),Oe.jsx(T4,{contextType:fi.legacyRealtime,rainfallDataType:Km.realtime,rainfallSensorTypes:[zl.gauge,zl.pixel]})]}),Oe.jsxs(Tw,{active:this.props.tab===fi.legacyGauge,eventKey:fi.legacyGauge,title:"Historical Rain Gauge",children:[Oe.jsx("h1",{className:"data-type-header",children:"Get Historical Rain Gauge Data"}),Oe.jsx("p",{children:"Download historic rain gauge data, which has been through a QA/QC process with ALCOSAN and 3RWW, during which any data errors caused by the gauge hardware have been addressed."}),Oe.jsx(T4,{contextType:fi.legacyGauge,rainfallDataType:Km.historic,rainfallSensorTypes:[zl.gauge]})]}),Oe.jsxs(Tw,{active:this.props.tab===fi.legacyGarr,eventKey:fi.legacyGarr,title:"Calibrated Radar Rainfall",children:[Oe.jsx("h1",{className:"data-type-header",children:"Get Calibrated Radar Rainfall Data"}),Oe.jsxs("p",{children:["Download calibrated radar rainfall data, which is NEXRAD radar rainfall data adjusted using 3RWW's rain gauge network. Calibration is performed by ",Oe.jsx("a",{href:"https://www.vieuxinc.com/",target:"_blank",children:"Vieux Associates"}),"."]}),Oe.jsx(T4,{contextType:fi.legacyGarr,rainfallDataType:Km.historic,rainfallSensorTypes:[zl.pixel]})]})]})})})]})]})}}function wdt(e){return{...e.initMap,tab:e.progress.tab}}const Sdt={switchContext:ehe},Tdt=af(wdt,Sdt)(xdt);class Edt extends Je.Component{render(){return Oe.jsxs("div",{className:"app-shell",children:[Oe.jsx(y$e,{isloading:this.props.loading}),Oe.jsx(Tdt,{})]})}}function Adt(e){return{...e.initMap}}const Odt=af(Adt)(Edt);console.log("Hello there curious person! The 3RWW Rainfall API is located at",Jv,"- check it out for more powerful querying capability!");const Oye=document.getElementById("root");if(!Oye)throw new Error("Missing #root element");vae.createRoot(Oye).render(Oe.jsx(Nbe,{store:qv,children:Oe.jsx(Odt,{})}))});export default Cdt();
