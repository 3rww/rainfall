(this["webpackJsonp3rww-rainfall-viz"]=this["webpackJsonp3rww-rainfall-viz"]||[]).push([[0],{325:function(e,t,a){},344:function(e,t,a){e.exports=a(754)},554:function(e,t,a){},555:function(e,t,a){},672:function(e,t){},708:function(e,t,a){},737:function(e,t,a){},738:function(e,t,a){},741:function(e,t,a){},745:function(e,t,a){},748:function(e,t,a){},749:function(e,t,a){},750:function(e,t,a){},751:function(e,t,a){},753:function(e,t,a){},754:function(e,t,a){"use strict";a.r(t);a(345);var n,r,o=a(0),l=a.n(o),i=a(26),s=a.n(i),c=a(14),u=a(12),d=a(8),p=a(94),m=a(10),h=a(73),f=a(7),g=a.n(f),b=a(790),y=a(70),v=a(771),E=a(776),O=a(782),j=a(777),w=a(789),T=window.location.href,x="https://trwwapi.herokuapp.com/rainfall/rainfall-events/?format=json",k=T+"static/data/pixels.geojson",D=T+"static/data/gauges.geojson",C=T+"static/data/basin-lookup-pixel.json",S=Number("2000"),A=["15-minute","Hourly","Daily","Total"],I="".concat("2000-04-01"),R="historic",L="realtime",N={pixel:"pixel",gauge:"gauge"},P="legacyRealtime",_="legacyGauge",M="legacyGarr",H={ts:"timestamp",val:"rainfall",src:"source",id:"sensor id",type:"sensor type"},Y=[{INDEX:69,id:"pixel-results",type:"fill",source:"pixel",layout:{},paint:{"fill-color":["match",["get","total"],"","#fff",["interpolate",["linear"],["get","total"],0,"#fafa6e",10,"#2A4858"]],"fill-opacity":["match",["get","total"],"",0,.8]}},{INDEX:70,id:"".concat("HOVER","-pixel"),type:"fill",source:"pixel",layout:{},paint:{"fill-color":"#2196f3","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.25,0]}},{INDEX:71,id:"".concat("HOVER","-gauge-halo"),type:"circle",source:"gauge",layout:{},paint:{"circle-radius":20,"circle-color":"#2196f3","circle-blur":.8,"circle-opacity":["case",["boolean",["feature-state","hover"],!1],.8,0]}},{INDEX:72,id:"".concat("HOVER","-gauge"),type:"circle",source:"gauge",layout:{},paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,6,18,12],"circle-color":"hsl(209, 25%, 55%)","circle-stroke-color":"#fff","circle-stroke-width":2,"circle-opacity":["case",["boolean",["feature-state","hover"],!1],1,0],"circle-stroke-opacity":["case",["boolean",["feature-state","hover"],!1],1,0]}},{id:"gauge-results",type:"circle",source:"gauge",layout:{},paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,8,18,14],"circle-stroke-color":"#fff","circle-stroke-width":2,"circle-color":["match",["get","total"],"","#fff",["interpolate",["linear"],["get","total"],0,"#fafa6e",10,"#2A4858"]],"circle-opacity":["match",["get","total"],"",0,1],"circle-stroke-opacity":["match",["get","total"],"",0,1]}}],q=[["".concat("HOVER","-pixel"),"pixel"],["".concat("HOVER","-gauge"),"gauge"],["".concat("HOVER","-gauge-halo"),"gauge"]],G=["pixel-results","gauge-results"],F=["#fde725","#5dc962","#20908d","#3a528b","#440154"],z=[.1,.2,.4,.6,.8,1,1.5,2,2.5,3,3.5,4,4.5,5],W={breaks_005:[.01,.02,.04,.06,.08,.1,.12,.15,.2,.25,.3,.35,.4,.45,.5],breaks_050:z,breaks_100:[.2,.4,.8,1,1.2,1.6,2,2.4,3,4,5,6,7,8,9,10]},K={progress:{tab:P,mapLoaded:!1,initialStyleLoaded:!1,isFetching:!0,isThinking:0,messages:[]},fetchKwargs:(n={},Object(d.a)(n,P,{active:{startDt:null,endDt:null,sensorLocations:{gauge:[],basin:[],pixel:[]},rollup:"Total",zerofill:!0,f:"sensor"},history:[]}),Object(d.a)(n,_,{active:{startDt:null,endDt:null,sensorLocations:{gauge:[],basin:[],pixel:[]},rollup:"Total",zerofill:!0,f:"sensor"},history:[]}),Object(d.a)(n,M,{active:{startDt:null,endDt:null,sensorLocations:{gauge:[],basin:[],pixel:[]},rollup:"Total",zerofill:!0,f:"sensor"},history:[]}),n),rainfallEvents:{list:[],stats:{latest:null,longest:null,maxDate:null,minDate:I},filters:{maxHours:24}},stats:{latest:{}},refData:{},initMap:{token:"pk.eyJ1IjoiY2l2aWNtYXBwZXIiLCJhIjoiY2s2azUycjc4MDBvMzNsbnliZDU4dTZiZCJ9.35H-OLQdcpQuCjKE9iAmwg",latitude:40.4481524,longitude:-79.9864242,zoom:10,mapboxSources:{"3rww-rainfall-base":{type:"vector",url:"mapbox://styles/civicmapper/ck2xlf5qg2pbc1clav3r8ddku"}},sourcesToAdd:[],layersToAdd:[],attribution:'<a href="https://www.3riverswetweather.org" target="_blank">3RWW</a>, <a href="https://www.civicmapper.com" target="_blank">CivicMapper</a>.'},mapStyle:{},mapLegend:{}},B=Object(u.b)("MAP_LOADED"),V=Object(u.b)("SET_STYLE"),J=Object(u.b)("LOAD_REF_LAYERS"),X=Object(u.b)("SWITCH_TAB"),U=Object(u.b)("ASYNC_START"),Q=Object(u.b)("ASYNC_SUCCESS"),Z=Object(u.b)("ASYNC_FAIL"),$=Object(u.b)("FETCHING"),ee=Object(u.b)("THINKING_1"),te=Object(u.b)("THINKING_0"),ae=Object(u.b)("CALC_EVENT_STATS"),ne=Object(u.b)("PICK_EVENT"),re=Object(u.b)("PICK_DATETIME_RANGE"),oe=Object(u.b)("PICK_SENSOR"),le=Object(u.b)("PICK_INTERVAL"),ie=Object(u.b)("PICK_ACTIVE_RESULT"),se=Object(u.b)("GETTING_RAINFALL"),ce=(Object(u.b)("GETTING_RAINFALL_INVALID"),Object(u.b)("GETTING_RAINFALL_SUCCESS")),ue=Object(u.b)("GETTING_RAINFALL_FAIL"),de=Object(u.b)("FILTER_EVENT_BY_HOUR"),pe=Object(u.b)("HIGHLIGHT_SENSOR"),me=Object(u.b)("APPLY_COLOR_STRETCH"),he=Object(u.b)("SET_LAYER_STYLE"),fe=Object(u.b)("BUILD_LAYER_STYLE"),ge=Object(u.b)("RESET_LAYER_SRCS"),be=(Object(u.b)("START_ANIMATION"),Object(u.b)("STOP_ANIMATION"),Object(u.b)("RESTART_ANIMATION"),Object(u.b)("SET_STATE")),ye=(a(788),a(759)),ve=function(e){return e.progress.tab},Ee=function(e,t){return e.fetchKwargs[t].active},Oe=function(e,t){return e.fetchKwargs[t].history},je=function(e){return function(e){return e.fetchKwargs[ve(e)].history}(e).find((function(e){return!0===e.isActive}))},we=function(e,t,a){return Oe(e,a).find((function(e){return e.requestId==t}))},Te=function(e,t,a){var n=e.fetchKwargs[t].active.sensorLocations[a];return void 0===n?[]:n},xe=function(e,t){return function(e){return e.mapStyle.sources}(e)[t]},ke=function(e){return e.mapStyle.layers},De=function(e,t){return ke(e).filter((function(e){return Object(E.a)(t,e.id)}))},Ce=function(e,t){return Object(O.a)(e.mapStyle,["sources",t,"data","features"])?e.mapStyle.sources[t].data.features:[]},Se=function(e){if(Object(O.a)(e,["refData","basinPixelLookup"])){var t=e.refData.basinPixelLookup;return Object(y.a)(t).filter((function(e){return"other"!==e})).map((function(e){return{value:e,pixels:t[e]}}))}return[]},Ae=function(e){return e.rainfallEvents},Ie=function(e){return e.stats.latest},Re=function(e){return Ie(e)["calibrated-gauge"]},Le=function(e){return Ie(e)["calibrated-radar"]},Ne=a(72),Pe=a(775),_e=(a(783),function(e,t){var a=e.map((function(e){return e[t]})).filter((function(e){return e>=0}));return{maxValue:Math.max.apply(Math,Object(h.a)(a)),minValue:Math.min.apply(Math,Object(h.a)(a)),maxRank:a.length}}),Me=function(e,t,a,n,r,o,l,i){var s=Ne.scale(n);r&&(s=s.mode(r)),void 0===o&&(o=5),void 0===a&&(a="id");var c,u,d=["match",["get",a]],p=["match",["get",a]],m=[],h=[];void 0===i?(i=_e(e,t),console.log("minMax on the fly",i)):console.log("minMax provided",i),c=i.maxValue,u=i.minValue,void 0===l?(l="linear",m=Ne.limits(e.map((function(e){return e[t]})),"e",o).slice(1),h=s.colors(o),e.forEach((function(e){var n=(e[t]-u)/(c-u),r=s.classes(o)(n).hex("rgb");d.push(e[a],r)}))):(h=(m=Ne.limits(e.map((function(e){return e[t]})),l,o).slice(1)).map((function(e){var t=m.indexOf(m.filter((function(t){return e<=t}))[0])/m.length;return Ne.scale(n).classes(o)(t).brighten(.25).saturate(.25).hex("rgb")})),e.forEach((function(e){var n=m.indexOf(m.filter((function(a){return e[t]<=a}))[0])/m.length,r=s.classes(o)(n).brighten(.25).saturate(.25).hex("rgb");d.push(e[a],r)})));e.forEach((function(e){var n=500*e[t];p.push(e[a],n)}));var f={method:l,content:Object(Pe.a)(m,h)};return d.push("rgba(255,255,255,0)"),p.push(0),{styleExp:d,legendContent:f,heightExp:p}},He=function(e){return{type:"geojson",data:{type:"FeatureCollection",features:e.features.map((function(e){return{properties:Object(m.a)({id:e.id.toString(),label:"Virtual Gauge ".concat(e.id.toString()),data:[],total:""},e.properties),id:e.id,geometry:e.geometry}}))}}},Ye=function(e){return{type:"geojson",data:{type:"FeatureCollection",features:e.features.map((function(e){var t=e.properties,a=t.id,n=Object(p.a)(t,["id"]);return{properties:Object(m.a)({id:e.id.toString(),label:"Gauge ".concat(e.id.toString(),": ").concat(n.name),data:[],total:"",dwid:a},n),id:e.id,geometry:e.geometry}}))}}},qe=function(e){return e.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{startDt:e.start_dt,endDt:e.end_dt,hours:e.duration,isFetching:!1,selected:!1,eventid:e.event_label})})).map((function(e){e.start_dt,e.end_dt,e.event_label,e.duration;return Object(p.a)(e,["start_dt","end_dt","event_label","duration"])})).filter((function(e){return e.hours>0}))},Ge=Object(u.c)(K,(r={},Object(d.a)(r,X,(function(e,t){e.progress.tab=t.payload})),Object(d.a)(r,U,(function(e,t){e.progress.isFetching=!0})),Object(d.a)(r,Q,(function(e,t){e.progress.isFetching=!1;var a=t.payload,n=a.data,r=a.pathArray,o=a.keepACopy;if(Object(b.a)(e,r,n),!0===o){var l=["refData",r[r.length-1]];Object(b.a)(e,l,n)}})),Object(d.a)(r,Z,(function(e,t){e.progress.isFetching=!1,console.log(t.payload)})),Object(d.a)(r,$,(function(e,t){e.progress.isFetching=t.payload.isFetching})),Object(d.a)(r,ee,(function(e,t){void 0!==t.payload&&(console.log(t.payload),e.progress.messages.push(t.payload)),e.progress.isThinking=e.progress.isThinking+1})),Object(d.a)(r,te,(function(e,t){void 0!==t.payload&&(console.log(t.payload),e.progress.messages.push(t.payload)),e.progress.isThinking=e.progress.isThinking-1})),Object(d.a)(r,ae,(function(e,t){var a=e.rainfallEvents.list,n=a.map((function(e){return e.endDt})).sort()[a.length-1];e.rainfallEvents.stats.latest=n,e.rainfallEvents.stats.longest=Math.max.apply(Math,Object(h.a)(a.map((function(e){return e.hours})))),e.rainfallEvents.stats.maxDate=g()(n).endOf("month").format()})),Object(d.a)(r,re,(function(e,t){var a=t.payload,n=a.contextType,r=a.startDt,o=a.endDt,l=Ee(e,n);l.startDt=r,l.endDt=o,Ae(e).list.filter((function(e){return e.selected})).forEach((function(e){return!1===e.selected}))})),Object(d.a)(r,ne,(function(e,t){var a=t.payload,n=a.eventid,r=a.contextType,o=function(e,t){return Ae(e).list.find((function(e){return e.eventid===t}))}(e,n);o.selected=!0,function(e,t){return Ae(e).list.filter((function(e){return e.eventid!==t}))}(e,n).forEach((function(e,t){return e.selected=!1}));var l=Ee(e,r);l.startDt=o.startDt,l.endDt=o.endDt})),Object(d.a)(r,oe,(function(e,t){var a=t.payload,n=a.contextType,r=a.sensorLocationType,o=a.selectedOptions;Ee(e,n).sensorLocations[r]=null!==o?o.filter((function(e){return null!==e})):[],"basin"==r&&(null!==o?Ee(e,n).sensorLocations[r].forEach((function(t,a){var r=e.refData.basinPixelLookup[t.value];console.log(t.value,r.length),Ee(e,n).sensorLocations.pixel=r.map((function(e){return{value:e,label:e}}))})):Ee(e,n).sensorLocations.pixel=[])})),Object(d.a)(r,pe,(function(e,t){console.log(t.payload)})),Object(d.a)(r,le,(function(e,t){var a=t.payload,n=a.rollup,r=a.contextType;Ee(e,r).rollup=n})),Object(d.a)(r,se,(function(e,t){var a=t.payload,n=a.fetchKwargs,r=a.requestId,o=a.contextType,l=a.status,i=a.messages,s=we(e,r,o);void 0==s?Oe(e,o).push({fetchKwargs:n,requestId:r,isFetching:1,isActive:!1,results:!1,status:l,messages:i}):s.isFetching=s.isFetching+1})),Object(d.a)(r,ce,(function(e,t){var a=t.payload,n=a.requestId,r=a.contextType,o=a.results,l=a.processedKwargs,i=a.status,s=a.messages;console.log("request",n,i),function(e,t,a){return Oe(e,a).filter((function(e){return e.requestId==t}))}(e,n,r).forEach((function(e){e.isFetching=e.isFetching-1,e.results=Object(m.a)(Object(m.a)({},o),e.results),e.processedKwargs=l,e.status=i,e.messages=s}))})),Object(d.a)(r,ue,(function(e,t){var a=t.payload,n=a.requestId,r=(a.results,a.status),o=a.messages;console.log(n,r);var l=function(e,t){var a;return Object(j.a)(e.fetchKwargs,(function(e,n){var r=e.history.find((function(e){return e.requestId==t}));void 0!==r&&(a=r)})),a}(e,n);l.isFetching=l.isFetching-1,l.status=r,l.messages=o})),Object(d.a)(r,ie,(function(e,t){var a=t.payload,n=a.requestId,r=a.contextType;(function(e,t,a){return Oe(e,a).filter((function(e){return e.requestId!==t}))})(e,n,r).forEach((function(e){return e.isActive=!1}));var o=we(e,n,r);o.isActive=!0,Object(y.a)(o.results).forEach((function(t){console.log("getting reference ".concat(t," layer"));var a=Object(v.a)(e.refData[t].data),n=o.results[t];console.log("joining ".concat(t," results to layer"));var r=function(e,t,a,n,r){void 0===r&&(r=!1),void 0===a&&(a="id"),void 0===n&&(n=!1);var o=e.features.map((function(e){var o=t.find((function(t){return Object(w.a)(t,n)===Object(w.a)(e,a)}));return void 0===o?!r&&e:{id:e.id,geometry:e.geometry,properties:Object(m.a)(Object(m.a)({},e.properties),o)}}));return r&&(o=o.filter((function(e){return!1!==e}))),{type:"FeatureCollection",features:o}}(a,n,"properties.id","id",!1);console.log("pushing udpated ".concat(t," results layer to map")),xe(e,t).data=r})),Object(y.a)(N).filter((function(e){return!Object(E.a)(Object(y.a)(o.results),e)})).forEach((function(t){console.log(t);var a=Object(v.a)(e.refData[t].data);xe(e,t).data=a}))})),Object(d.a)(r,ge,(function(e,t){var a=t.payload.lyrSrcNames;void 0===a&&(a=Object(y.a)(N)),a.length>0&&a.forEach((function(t){if(Object(O.a)(e.refData,t)){var a=Object(v.a)(e.refData[t].data);xe(e,t).data=a}}))})),Object(d.a)(r,de,(function(e,t){e.eventFilters.maxHours=t.payload.maxHours})),Object(d.a)(r,B,(function(e,t){return e.progress.mapLoaded||(e.progress.mapLoaded=!0),e})),Object(d.a)(r,V,(function(e,t){return e.mapStyle=t.payload,e.progress.initialStyleLoaded||(e.progress.initialStyleLoaded=!0),e})),Object(d.a)(r,J,(function(e,t){Object(j.a)(t.payload,(function(t,a){if(Object(O.a)(t,"INDEX")){var n=t.INDEX,r=Object(p.a)(t,["INDEX"]),o=Object(h.a)(e.mapStyle.layers);o.splice(n,0,r),e.mapStyle.layers=o}else e.mapStyle.layers.push(t)}))})),Object(d.a)(r,be,(function(e,t){var a=t.payload,n=a.data,r=a.path,o=a.how;if("replace"==o)Object(b.a)(e,r,n);else if("append"==o){var l=Object(w.a)(e,r);Object(b.a)(e,r,[].concat(Object(h.a)(l),Object(h.a)(n)))}})),Object(d.a)(r,fe,(function(e,t){var a=t.payload,n=a.requestId,r=a.contextType,o=a.sensor,l=we(e,n,r),i=Object(y.a)(l.results),s=[];i.forEach((function(e){s=s.concat(l.results[e])}));var c=_e(s,"total");console.log(c);var u=Me(s,"total","id",F,"lch",7,"e",c);Object(b.a)(l,["styleExp",o],u.styleExp),Object(b.a)(l,["heightExp",o],u.heightExp),Object(b.a)(l,["legendContent",o],u.legendContent),l.stats=c})),Object(d.a)(r,he,(function(e,t){var a=t.payload,n=a.requestId,r=a.contextType,o=(a.sensor,we(e,n,r)),l=Object(y.a)(o.results),i=Object(y.a)(N).filter((function(e){return!Object(E.a)(l,e)}));l.forEach((function(t){if(Object(O.a)(o,["styleExp",t])&&Object(O.a)(o,["heightExp",t])){var a=o.styleExp[t],n=o.heightExp[t],r=["".concat(t,"-results"),"".concat(t,"-results-3d")];De(e,r).forEach((function(e){e.paint["".concat(e.type,"-color")]=a,"fill-extrusion"==e.type?(e.paint["".concat(e.type,"-base")]=0,e.paint["".concat(e.type,"-height")]=n,e.paint["".concat(e.type,"-opacity")]=1):e.paint["".concat(e.type,"-opacity")]=.5}))}else console.log("style and legend not previously calculated.")})),i.forEach((function(t){var a=["".concat(t,"-results")];De(e,a).forEach((function(e){e.paint["".concat(e.type,"-color")]="#fff",e.paint["".concat(e.type,"-opacity")]=0}))}))})),Object(d.a)(r,me,(function(e,t){var a=function(e,t,a,n,r,o){var l;void 0===t&&(t=z),void 0===e&&(e="total"),void 0===n&&(n=F),void 0===r&&(r="lch"),l=void 0===a?Ne.scale(n).mode(r).domain([0,Math.max.apply(Math,Object(h.a)(t))]):a.domain([0,Math.max.apply(Math,Object(h.a)(t))]).classes(t),void 0===o&&(o="linear");var i=["interpolate",[o],["get",e]],s=[];return t.forEach((function(e){var t=l(e).hex("rgb");i.push(e),i.push(t),s.push([e,t])})),{colorExp:i,legendContent:s}}("total",t.payload.breaks),n=a.colorExp,r=a.legendContent;G.forEach((function(t){var a=function(e,t){return ke(e).find((function(e){return e.id===t}))}(e,t);a.paint["".concat(a.type,"-color")]=n})),e.mapLegend.content=r})),r)),Fe=Object(u.a)({reducer:Ge,devTools:!0}),ze=(a(554),a(555),a(16)),We=a(17),Ke=a(19),Be=a(18),Ve=a(770),Je=a(23),Xe=a(760),Ue=a(331),Qe=a(778),Ze=a(780),$e=a(772),et=a(761),tt=a(329),at=a.n(tt),nt=a(151),rt=a.n(nt),ot=a(330);function lt(e){return function(t){var a,n=e.url,r=e.pathArray,o=e.transformer,l=e.keepACopy;return t(ee('getting data from "'.concat(n,'"'))),t(U(n)),rt()({url:n,method:"GET"}).then((function(e){return a=o?o(e.data):e.data,t(Q({data:a,pathArray:r,keepACopy:l})),!0}),(function(e){return console.log("An error occurred.",e),t(Z("An error occurred.")),!1})).finally((function(){return t(te('data from "'.concat(n,'" loaded to ').concat(r.join("."))))}))}}function it(e){return function(e){e(ee("Loading reference data and map layers")),function(e){return Promise.all([new Promise((function(t,a){t(e(lt({url:x,pathArray:["rainfallEvents","list"],transformer:qe,keepACopy:!1})))})),new Promise((function(t,a){t(e(lt({url:"https://trwwapi.herokuapp.com/rainfall/v2/latest-observations/?format=json",pathArray:["stats","latest"],transformer:!1,keepACopy:!1})))})),new Promise((function(t,a){t(e(lt({url:C,pathArray:["refData","basinPixelLookup"],transformer:!1,keepACopy:!1})))})),new Promise((function(t,a){t(e(lt({url:D,pathArray:["mapStyle","sources","gauge"],transformer:Ye,keepACopy:!0})))})),new Promise((function(t,a){t(e(lt({url:k,pathArray:["mapStyle","sources","pixel"],transformer:He,keepACopy:!0})))}))])}(e).then((function(t){e(J(Y)),e(me({breaks:z}))})).then((function(){e(re({contextType:P,startDt:g()().subtract(2,"hour").toISOString(),endDt:g()().toISOString()}));var t=Re(Fe.getState());e(re({contextType:_,startDt:g()(t).subtract(1,"month").toISOString(),endDt:t}));var a=Le(Fe.getState());e(re({contextType:M,startDt:g()(a).subtract(1,"month").toISOString(),endDt:a}))})).then((function(){return e(te("Initial data load complete."))}))}}function st(e){var t=Fe.getState();return function(a){var n=e.contextType,r=e.rainfallDataType,o=Ee(t,n),l=Object(ot.MD5)(o),i=we(t,l,n);void 0!==i&&(console.log("This exact request was already made. Keeping existing data from request",i.requestId),!1===i.isActive&&a(ie({requestId:i.requestId,contextType:n})));["gauge","basin"].forEach((function(e,t){if(0!==o.sensorLocations[e].length){var i={start_dt:o.startDt,end_dt:o.endDt,rollup:o.rollup,f:o.f},s="basin"===e?["pixel","pixels"]:["gauge","gauges"];i[s[1]]=o.sensorLocations[s[0]].map((function(e){return e.value})).join(","),a(se({fetchKwargs:o,requestId:l,contextType:n}));var c="".concat("https://trwwapi.herokuapp.com/rainfall/","v2/").concat(s[0],"/").concat(r,"/");!function e(t,a,n,r,o,l){var i={url:o,method:"POST"};!1!==l&&(i.data=l),rt()(i).then((function(o){var l=o.data;if(console.log("job ".concat(l.meta.jobId," ").concat(l.status," - ").concat(n)),Object(E.a)(["queued","started"],l.status))setTimeout((function(){return e(t,a,n,r,l.meta.jobUrl,!1)}),S);else if(Object(E.a)(["deferred","failed"],l.status))t(ue({requestId:a,contextType:r,results:Object(d.a)({},n,!1),status:l.status,messages:l.messages}));else if("finished"===l.status)try{null===l.data?(console.log("No data was returned."),t(ue({requestId:a,contextType:r,results:Object(d.a)({},n,!1),status:"error",messages:l.messages}))):(l=function(e){return e.data.forEach((function(e){var t=e.data.length>1&0!==e.data.length?e.data.filter((function(e){return e.val>=0})).map((function(e){return e.val})).reduce((function(e,t){return e+t}),0):e.data[0].val;e.total=t})),e}(l),t(ce({requestId:a,contextType:r,results:Object(d.a)({},n,l.data),processedKwargs:l.args,status:l.status,messages:l.messages})),t(ie({requestId:a,contextType:r})))}catch(i){console.log("An error occurred processing the result.",i),t(ue({requestId:a,contextType:r,results:Object(d.a)({},n,!1),status:"error",messages:l.messages}))}else"does not exist"===l.status&&(console.log("Job was cancelled."),t(ue({requestId:a,contextType:r,results:Object(d.a)({},n,!1),status:l.status,messages:l.messages})))}),(function(e){console.log("An error occurred.",e),t(ue({requestId:a,contextType:r,results:Object(d.a)({},n,!1),status:"error",messages:["An error occurred when trying to fetch the rainfall data.",e]}))})).catch((function(e){console.error("An error occurred.",e),t(ue({requestId:a,contextType:r,results:Object(d.a)({},n,!1),status:"error",messages:["An error occurred when trying to fetch the rainfall data.",e]}))}))}(a,l,s[0],n,c,i)}}))}}function ct(e){var t=e.contextType,a=Object(p.a)(e,["contextType"]);return function(e){var n=a.requestId;a.isActive||e(ie({requestId:n,contextType:t}))}}function ut(e){var t=e;return function(e){e(X(t));var a=je(Fe.getState());e(void 0===a?ge({lyrSrcNames:Object(y.a)(N)}):ie({requestId:a.requestId,contextType:t}))}}a(708);var dt=function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(e,n){var r;return Object(ze.a)(this,a),(r=t.call(this,e,n)).handleShow=r.handleShow.bind(Object(Je.a)(r)),r.handleClose=r.handleClose.bind(Object(Je.a)(r)),r.state={show:!0,showWhich:"AboutButton",content:{AboutButton:{title:l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,{lg:8},l.a.createElement("h1",null,"Make It Rain ",l.a.createElement("small",null,l.a.createElement("em",null,"beta"))),l.a.createElement("h2",null,l.a.createElement("small",null,"Map and download hyper-local rainfall measurements for Allegheny County"))),l.a.createElement(Ue.a,null,l.a.createElement("small",null,"A project by "),l.a.createElement("br",null),l.a.createElement("img",{className:"brand-logo",src:"".concat(T,"static/assets/3rww_logo_full_inverse_transparent_blue.png"),placeholder:"3 River Wet Weather",alt:"3RWW Logo"}))),content:'\nHave you ever wondered how rainfall is actually measured? Technical instruments, called rain gauges, are designed to collect and accurately measure rainfall during wet weather events. However, a rain gauge can only provide a specific rainfall measurement for the limited geographic area where the gauge is located.\n\nOn the flip side, radar systems, often used in weather reports, do not measure rainfall directly, but rather they detect the intensity of microwave energy reflected by raindrops, called reflectivity. Through the use of a mathematical formula, the reflectivity of the raindrops can be converted by the radar system into rainfall estimates for a particular defined area.\n\nNeither measurement technique is perfect, but when the two are combined\u2014when radar estimates are calibrated with actual rain gauge data\u2014a highly accurate and valuable source of rainfall data can be calculated over large geographic areas.\n\nBecause engineers and planners addressing the wet weather issue need this level of accuracy, 3 Rivers Wet Weather created the calibrated radar rainfall system in 2001. Communities throughout Allegheny County use this data\u2014provided in both real-time and historical formats\u2014to design more cost-effective solutions to reduce or eliminate sewage overflows and improve stormwater management.\n\nThe NEXRAD radar (located in Moon Township) data is calibrated with the rain gauge measurements collected during the same time period and rain event for every square kilometer in Allegheny County. The resulting rainfall data is equivalent in accuracy to having 2,276 rain gauges placed across the County.\n\n---\n\n## Available Datasets\n\nCurrently, this site offers rainfall data in three buckets:\n\n* Real-time Rainfall data: provisional rainfall data for rain gauges and radar pixels\n* Historical Rain Gauge data: QA/QC\'d rain gauge data, usually available within 30-60 days\n* Calibrated Radar Rainfall data: QA/QC\'d, gauge-adjusted radar rainfall observations, typically available within 30-60 days\n\n### Real-time Rainfall Data\n\nProvisional data from 3RWW\'s 33 rain gauges is collected and updated every 15 minutes to provide accurate, quality rainfall information as it is occurring. This includes both gauge and radar rainfall data. \n\nData users are cautioned to consider carefully the provisional nature of the information before using it for decisions. Information concerning the accuracy and appropriate uses of these data or concerning other hydrologic data may be obtained from the 3RWW.\n\n### Historical Rain Gauge\n\nThe data from 33 rain gauges is archived in this section. The data may be retrieved for any combination of the rain gauges during a specified time span. The data may also be displayed in 15-minute increments or aggregated to hourly or daily data points.\n\n\n### Calibrated Radar Rainfall\n\nThe calibrated radar rainfall section allows the retrieval of archived gauge-adjusted radar rainfall data for each of the 2313 pixels mapped by the NEXRAD radar cross-section. Calibration is performed by <a href="https://www.vieuxinc.com/" target="_blank">Vieux Associates</a>.\n\n---\n\n## Querying Rainfall\n\nSelect the start and end date/time, along with the interval and the gauges or basins (for radar pixels). Press "Get Rainfall Data" button to get the data.\n\nRainfall data is collected and stored in 15-minute increments, which allows for 15-minute, hourly, and daily aggregations to be calculated. Note that if a daily interval is selected, the start and end selections will begin at midnight and the start and end hour will be ignored.\n\nQuery results will be listed in a panel below on each page and shown on the map. The tabular data output may be viewed and downloaded on the page by selecting the \'View and Download Results\' Button. Download formats currently include a CSV tabular format, for use in spreadsheet software. Spatial formats will be included in the future.\n\nThe output table for each query result contains:\n\n* a gauge or pixel ID\n* a date/time of the observation (presented as standard ISO 8061 datetime text). For hourly and daily aggregations, the start and end time of the observation is indicated using the standard ISO 8061 datetime range format, with start and end delimited by a "/".\n* a rainfall amount (in inches) \n* a source code, which indicates where the rainfall measurement came from.\n\nThe source code can be found in the following table:\n\n| Source |\tDescription |\n| --- | --- |\n| R |\tCalibrated radar rainfall data |\n| G-0 | No gauge or calibrated radar rainfall data is available, but not for the reasons given for N/D below |\n| G-1 |\tDerived from inverse distance squared weighting based on one rain gauge |\n| G-2 |\tDerived from inverse distance squared weighting based on two rain gauges |\n| G-3 |\tDerived from inverse distance squared weighting based on three rain gauges |\n| N/D |\tNo data was collected for this data point. This may be because no data was collected at the time or the pixel may be outside of the data collection boundary. |\n| RTRR | Real-time radar rainfall. Data shown are provisional.|\n| RTRG | Real-time rain gauge data. Data shown are provisional. |\n\nNote that the source code only appears for the 15-minute increments because an hourly or daily increment may include many different sources.\n\n---\n\n## 3RWW Data API\n\nThe rainfall data is served up from 3RWW\'s Data API. Currently, a few low-level API functions are documented and accessible through ['.concat("https://trwwapi.herokuapp.com/rainfall/","](").concat("https://trwwapi.herokuapp.com/rainfall/",").\n\n          ")}}},r}return Object(We.a)(a,[{key:"handleClose",value:function(e){this.setState({show:!1,showWhich:null})}},{key:"handleShow",value:function(e){console.log(e.target.id),this.setState({show:!0,showWhich:e.target.id})}},{key:"render",value:function(){return l.a.createElement("div",{className:"nav-container"},l.a.createElement(Qe.a,{bg:"primary",variant:"dark",expand:"md"},l.a.createElement(Qe.a.Brand,{className:"d-none d-sm-block"},l.a.createElement("img",{className:"nav-brand-logo",src:"".concat(T,"static/assets/3rww_logo_full_inverse_transparent.png"),alt:"3RWW Logo"}),"\xa0 Make It Rain ",l.a.createElement("small",null,l.a.createElement("em",null,"beta"))),l.a.createElement(Qe.a.Brand,{className:"d-block d-sm-none",style:{fontSize:"0.9rem"}},l.a.createElement("img",{className:"nav-brand-logo-xs",src:"".concat(T,"static/assets/3rww_logo_full_inverse_transparent.png"),alt:"3RWW Logo"}),"\xa0 Make It Rain ",l.a.createElement("small",null,l.a.createElement("em",null,"beta"))),l.a.createElement(Qe.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(Qe.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(Ze.a,{variant:"pills",className:"mr-auto",defaultActiveKey:P},l.a.createElement(Ze.a.Item,null,l.a.createElement(Ze.a.Link,{active:this.props.tab===P,eventKey:P,onSelect:this.props.switchContext},"Real-Time Rainfall")),l.a.createElement(Ze.a.Item,null,l.a.createElement(Ze.a.Link,{active:this.props.tab===_,eventKey:_,onSelect:this.props.switchContext},"Historical Rain Gauge")),l.a.createElement(Ze.a.Item,null,l.a.createElement(Ze.a.Link,{active:this.props.tab===M,eventKey:M,onSelect:this.props.switchContext},"Calibrated Radar Rainfall"))),l.a.createElement(Ze.a,{className:"ml-auto"},l.a.createElement(Ze.a.Item,{className:"btn btn-outline-light btn-sm",id:"AboutButton",onClick:this.handleShow},"About")))),l.a.createElement($e.a,{show:this.state.show,onHide:this.handleClose,size:"lg"},l.a.createElement($e.a.Header,{closeButton:!0},l.a.createElement($e.a.Title,null,this.state.showWhich?this.state.content[this.state.showWhich].title:null)),l.a.createElement($e.a.Body,null,l.a.createElement(at.a,{source:this.state.showWhich?this.state.content[this.state.showWhich].content:null,escapeHtml:!1})),l.a.createElement($e.a.Footer,null,l.a.createElement(et.a,{variant:"secondary",onClick:this.handleClose},"Close"))))}}]),a}(o.Component);var pt={switchContext:ut},mt=Object(c.b)((function(e){return{isThinking:e.progress.isThinking>0,mapLoaded:e.progress.mapLoaded,tab:e.progress.tab}}),pt)(dt),ht=a(767),ft=a(768),gt=a(769),bt=a(766),yt=a(201),vt=a(96),Et=a.n(vt),Ot=a(334),jt=a.n(Ot),wt=a(773),Tt="setStyle",xt="addLayer",kt="removeLayer",Dt="setPaintProperty",Ct="setLayoutProperty",St="setFilter",At="addSource",It="removeSource",Rt="setGeoJSONSourceData",Lt="setLayerZoomRange",Nt="setLayerProperty",Pt="setCenter",_t="setZoom",Mt="setBearing",Ht="setPitch",Yt="setSprite",qt="setGlyphs",Gt="setTransition",Ft="setLight";function zt(e,t,a){a.push({command:At,args:[e,t[e]]})}function Wt(e,t,a){t.push({command:It,args:[e]}),a[e]=!0}function Kt(e,t,a,n){Wt(e,a,n),zt(e,t,a)}function Bt(e,t,a){var n;for(n in e[a])if(e[a].hasOwnProperty(n)&&"data"!==n&&!Object(wt.a)(e[a][n],t[a][n]))return!1;for(n in t[a])if(t[a].hasOwnProperty(n)&&"data"!==n&&!Object(wt.a)(e[a][n],t[a][n]))return!1;return!0}function Vt(e,t,a,n,r,o){var l;for(l in t=t||{},e=e||{})e.hasOwnProperty(l)&&(Object(wt.a)(e[l],t[l])||a.push({command:o,args:[n,l,t[l],r]}));for(l in t)t.hasOwnProperty(l)&&!e.hasOwnProperty(l)&&(Object(wt.a)(e[l],t[l])||a.push({command:o,args:[n,l,t[l],r]}))}function Jt(e){return e.id}function Xt(e,t){return e[t.id]=t,e}var Ut=function(e,t){if(!e)return[{command:Tt,args:[t]}];var a=[];try{if(!Object(wt.a)(e.version,t.version))return[{command:Tt,args:[t]}];Object(wt.a)(e.center,t.center)||a.push({command:Pt,args:[t.center]}),Object(wt.a)(e.zoom,t.zoom)||a.push({command:_t,args:[t.zoom]}),Object(wt.a)(e.bearing,t.bearing)||a.push({command:Mt,args:[t.bearing]}),Object(wt.a)(e.pitch,t.pitch)||a.push({command:Ht,args:[t.pitch]}),Object(wt.a)(e.sprite,t.sprite)||a.push({command:Yt,args:[t.sprite]}),Object(wt.a)(e.glyphs,t.glyphs)||a.push({command:qt,args:[t.glyphs]}),Object(wt.a)(e.transition,t.transition)||a.push({command:Gt,args:[t.transition]}),Object(wt.a)(e.light,t.light)||a.push({command:Ft,args:[t.light]});var n={},r=[];!function(e,t,a,n){var r;for(r in t=t||{},e=e||{})e.hasOwnProperty(r)&&(t.hasOwnProperty(r)||Wt(r,a,n));for(r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)?Object(wt.a)(e[r],t[r])||("geojson"===e[r].type&&"geojson"===t[r].type&&Bt(e,t,r)?a.push({command:Rt,args:[r,t[r].data]}):Kt(r,t,a,n)):zt(r,t,a))}(e.sources,t.sources,r,n);var o=[];e.layers&&e.layers.forEach((function(e){n[e.source]?a.push({command:kt,args:[e.id]}):o.push(e)})),a=a.concat(r),function(e,t,a){t=t||[];var n,r,o,l,i,s,c,u=(e=e||[]).map(Jt),d=t.map(Jt),p=e.reduce(Xt,{}),m=t.reduce(Xt,{}),h=u.slice(),f=Object.create(null);for(n=0,r=0;n<u.length;n++)o=u[n],m.hasOwnProperty(o)?r++:(a.push({command:kt,args:[o]}),h.splice(h.indexOf(o,r),1));for(n=0,r=0;n<d.length;n++)o=d[d.length-1-n],h[h.length-1-n]!==o&&(p.hasOwnProperty(o)?(a.push({command:kt,args:[o]}),h.splice(h.lastIndexOf(o,h.length-r),1)):r++,s=h[h.length-n],a.push({command:xt,args:[m[o],s]}),h.splice(h.length-n,0,o),f[o]=!0);for(n=0;n<d.length;n++)if(l=p[o=d[n]],i=m[o],!f[o]&&!Object(wt.a)(l,i))if(Object(wt.a)(l.source,i.source)&&Object(wt.a)(l["source-layer"],i["source-layer"])&&Object(wt.a)(l.type,i.type)){for(c in Vt(l.layout,i.layout,a,o,null,Ct),Vt(l.paint,i.paint,a,o,null,Dt),Object(wt.a)(l.filter,i.filter)||a.push({command:St,args:[o,i.filter]}),Object(wt.a)(l.minzoom,i.minzoom)&&Object(wt.a)(l.maxzoom,i.maxzoom)||a.push({command:Lt,args:[o,i.minzoom,i.maxzoom]}),l)l.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Vt(l[c],i[c],a,o,c.slice(6),Dt):Object(wt.a)(l[c],i[c])||a.push({command:Nt,args:[o,c,i[c]]}));for(c in i)i.hasOwnProperty(c)&&!l.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Vt(l[c],i[c],a,o,c.slice(6),Dt):Object(wt.a)(l[c],i[c])||a.push({command:Nt,args:[o,c,i[c]]}))}else a.push({command:kt,args:[o]}),s=h[h.lastIndexOf(o)+1],a.push({command:xt,args:[i,s]})}(o,t.layers,a)}catch(l){console.warn("Unable to compute style diff:",l),a=[{command:Tt,args:[t]}]}return a},Qt=a(784),Zt=a(785),$t=a(791),ea=function(e,t,a){return e>0&&1==e?t:a},ta=(a(737),function(e){var t=e.features;return t.filter((function(e){return void 0!==e.id})).length>0?l.a.createElement(Zt.a,null,l.a.createElement(Qt.a,{variant:"flush"},t.filter((function(e){return void 0!==e.id})).map((function(e,t){var a,n,r=e.properties;return l.a.createElement(Qt.a.Item,{key:t},l.a.createElement("h6",{className:"tooltip-header"},r.label),""!==r.total?l.a.createElement("p",{className:"tooltip-body"},"Total rainfall: ",l.a.createElement("strong",null,(a=r.total,n=2,Object($t.a)(a,n).toFixed(n)))," inches"):null)})))):null}),aa=a(774),na=a(762),ra=(a(738),function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(){var e;Object(ze.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSelectLegend=function(t){e.props.dispatchPickLegend(t.currentTarget.value)},e}return Object(We.a)(a,[{key:"render",value:function(){return l.a.createElement(Xe.a,{className:"my-2"},l.a.createElement(Ue.a,{sm:2},l.a.createElement(aa.a,null,l.a.createElement(aa.a.Check,{custom:!0,size:"sm",value:"breaks_005",label:"0.5",name:"legendRadios",type:"radio",id:"legend-radio-1",onChange:this.handleSelectLegend}),l.a.createElement(aa.a.Check,{defaultChecked:!0,custom:!0,size:"sm",value:"breaks_050",label:"5",name:"legendRadios",type:"radio",id:"legend-radio-2",onChange:this.handleSelectLegend}),l.a.createElement(aa.a.Check,{custom:!0,size:"sm",value:"breaks_100",label:"10",name:"legendRadios",type:"radio",id:"legend-radio-3",onChange:this.handleSelectLegend}))),l.a.createElement(Ue.a,{sm:10},l.a.createElement(na.a,{size:"sm"},l.a.createElement("tbody",null,l.a.createElement("tr",null,this.props.bins.map((function(e,t){return l.a.createElement("td",{key:t,className:"text-center legend-label",style:{backgroundColor:"".concat(e[1])}},l.a.createElement("span",{style:{color:"".concat(e[2])}},e[0]))})))))))}}]),a}(l.a.Component));var oa=Object(c.b)((function(e){var t=!Object(ye.a)(e.mapLegend)&&e.mapLegend,a=t?t.content:[];return{bins:a=a.map((function(e,t){var a="#000";return Ne(e[1]).luminance()<.4&&(a="#fff"),[e[0],e[1],a]}))}}),(function(e,t){return{dispatchPickLegend:function(t){e(me({breaks:W[t]}))}}}))(ra),la=(a(739),a(740),a(741),q.map((function(e){return e[0]}))),ia=function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(e){var n;return Object(ze.a)(this,a),(n=t.call(this,e)).state={features:[]},n}return Object(We.a)(a,[{key:"componentDidMount",value:function(){this.props.loadingMap(),this.loadMap()}},{key:"componentWillReceiveProps",value:function(e){this.updateMapStyle(e.mapStyle)}},{key:"setTooltip",value:function(e){e.length?s.a.render(l.a.createElement(ta,{features:e}),this.tooltipContainer):s.a.unmountComponentAtNode(this.tooltipContainer)}},{key:"makeTooltipOnHover",value:function(e,t){if(void 0!==e){var a=this.webmap.queryRenderedFeatures(e.point,{layers:["HOVER-pixel","HOVER-gauge"]});t.setLngLat(e.lngLat),this.webmap.getCanvas().style.cursor=a.length?"pointer":"",this.setTooltip(a),this.setState({features:a})}}},{key:"handleMapClick",value:function(e){var t=this,a=[[e.point.x-1,e.point.y-1],[e.point.x+1,e.point.y+1]],n=this.webmap.queryRenderedFeatures(a,{layers:la});n.length>0&&n.forEach((function(e){console.log(e),t.props.makeChoiceOnMapClick(Object(m.a)({layerId:e.layer.id},e.properties))}))}},{key:"loadMap",value:function(){var e=this,t={container:"map",style:this.props.initMap.mapboxSources["3rww-rainfall-base"].url,center:[this.props.initMap.longitude,this.props.initMap.latitude],zoom:this.props.zoom,attributionControl:!1};Et.a.accessToken=this.props.token,this.webmap=new Et.a.Map(t),this.tooltipContainer=document.createElement("div");var a=new Et.a.Marker(this.tooltipContainer,{offset:[105,0]}).setLngLat([0,0]).addTo(this.webmap);this.webmap.on("load",(function(){e.webmap.addControl(new jt.a({accessToken:Et.a.accessToken,mapboxgl:Et.a,placeholder:"Fly me to...",marker:!1,collapsed:!0,clearAndBlurOnEsc:!0,clearOnBlur:!0,countries:"us"})),e.webmap.addControl(new Et.a.NavigationControl),e.webmap.addControl(new Et.a.AttributionControl({compact:!0,customAttribution:e.props.initMap.attribution})),e.props.initMap.sourcesToAdd.forEach((function(t){e.webmap.addSource(t.sourceName,t.sourceData)})),e.props.initMap.layersToAdd.forEach((function(t){t.layerStyles.forEach((function(a){e.webmap.addLayer(a,t.addLayerStylesAbove)}))}));var t=e.webmap.getStyle();e.props.setStyle(t),e.props.mapLoaded(e.webmap.loaded()),e.props.initFetchData()})),this.webmap.on("click",(function(t){return e.handleMapClick(t)}));var n={};q.forEach((function(t){var r=t[0],o=t[1];n[r]=null,e.webmap.on("mousemove",r,(function(t){e.makeTooltipOnHover(t,a),e.webmap.getCanvas().style.cursor=t.features.length?"pointer":"",t.features.length>0&&(n[r]&&e.webmap.setFeatureState({source:o,id:n[r]},{hover:!1}),n[r]=t.features[0].id,e.webmap.setFeatureState({source:o,id:n[r]},{hover:!0}))})),e.webmap.on("mouseleave",r,(function(t){e.makeTooltipOnHover(t,a),e.webmap.getCanvas().style.cursor="",n[r]&&e.webmap.setFeatureState({source:o,id:n[r]},{hover:!1}),n[r]=null}))}))}},{key:"updateMapStyle",value:function(e){if(null!==this.props.mapStyle&&!Object(ye.a)(this.props.mapStyle)){var t=this.webmap,a=yt.a.fromJS(this.props.mapStyle),n=yt.a.fromJS(e);if(!yt.a.is(a,n)){var r=Ut(a.toJS(),n.toJS());console.log("updating mapStyle (".concat(r.map((function(e){return e.command})),")")),r.forEach((function(e){if("setGeoJSONSourceData"==e.command){var a=t.getSource(e.args[0]);a&&a.setData(e.args[1])}else t[e.command].apply(t,e.args)}))}}}},{key:"render",value:function(){return l.a.createElement("div",{className:"map-and-legend-container"},l.a.createElement("div",{className:"map",id:"map"}),l.a.createElement("div",{className:"legend-container container-fluid"},l.a.createElement(oa,null)))}}]),a}(o.Component);var sa=Object(c.b)((function(e){return{mapStyle:e.mapStyle,initMap:e.initMap}}),(function(e,t){return{loadingMap:function(t){e(ee("Loading the map"))},setStyle:function(t){e(V(t))},mapLoaded:function(t){e(B(t)),e(te("Map loaded"))},initFetchData:function(t){return e(it())},makeChoiceOnMapClick:function(t){e(function(e){var t=Object(m.a)({},e);return console.log(t),function(e){e(pe(t))}}(t))}}}))(ia),ca=a(763),ua=a(335),da=a(764),pa=a(336),ma=a.n(pa),ha=a(139),fa=a(140),ga=a(786),ba=(a(745),function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(e){var n;return Object(ze.a)(this,a),(n=t.call(this,e)).handleListClick=n.handleListClick.bind(Object(Je.a)(n)),n}return Object(We.a)(a,[{key:"handleListClick",value:function(e){this.props.dispatchPickRainfallEvent(e.eventid)}},{key:"render",value:function(){var e=this;return l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,null,l.a.createElement(Qt.a,{variant:"flush"},this.props.events.map((function(t,a){var n=g()(t.startDt),r=g()(t.endDt),o=t.hours/48*100;return l.a.createElement(Qt.a.Item,{action:!0,onClick:function(){return e.handleListClick(t)},key:a,eventKey:t.eventid,className:"event-list-item"},l.a.createElement("small",null,l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,{xs:7},n.format("DD MMM YYYY, h:mm a")," \u2014 ",r.format("DD MMM YYYY, h:mm a"),"\xa0"),l.a.createElement(Ue.a,{xs:5},t.hours," hour",t.hours>1?"s":""))),l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,null,l.a.createElement(ga.a,{className:"event-length-bar",now:o,variant:"primary"}))))})))))}}]),a}(l.a.Component));var ya=Object(c.b)((function(e){var t=Ae(e);return{events:t.list.filter((function(e){return t.filters.maxHours>=24||e.hours<=t.filters.maxHours?e:void 0})),maxHours:parseFloat(t.stats.longest)}}),(function(e,t){return{dispatchPickRainfallEvent:function(a){e(ne({eventid:a,contextType:t.contextType}))}}}))(ba),va=(a(249),a(337),a(97),a(787),rt.a.create({baseURL:x}),a(747),a(748),function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(e){var n;return Object(ze.a)(this,a),(n=t.call(this)).handleOnApply=n.handleOnApply.bind(Object(Je.a)(n)),n.handleShow=n.handleShow.bind(Object(Je.a)(n)),n.handleClose=n.handleClose.bind(Object(Je.a)(n)),n.state={show:!1},n}return Object(We.a)(a,[{key:"handleOnApply",value:function(e,t){this.props.dispatchPickRainfallDateTimeRange({startDt:t.startDate.toISOString(),endDt:t.endDate.toISOString()})}},{key:"handleClose",value:function(e){this.setState({show:!1})}},{key:"handleShow",value:function(e){this.setState({show:!0})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement($e.a,{show:this.state.show,onHide:this.handleClose,size:"lg"},l.a.createElement($e.a.Header,{closeButton:!0},l.a.createElement($e.a.Title,null,"Select A Rainfall Event")),l.a.createElement($e.a.Body,null,l.a.createElement(ya,{contextType:this.props.contextType,handleClose:this.handleClose})),l.a.createElement($e.a.Footer,null,l.a.createElement(et.a,{variant:"secondary",onClick:this.handleClose},"Close"))),l.a.createElement(Xe.a,{noGutters:!0},l.a.createElement(Ue.a,null,l.a.createElement("strong",null,"When"))),l.a.createElement(Xe.a,{noGutters:!0},l.a.createElement(Ue.a,null,!1!==this.props.startDt&&!1!==this.props.endDt?l.a.createElement(ca.a,{className:"datetimepicker-control"},l.a.createElement(ua.a,{plaintext:!0,readOnly:!0,placeholder:"start and end date/times",value:"".concat(this.props.startDt.format("MM/DD/YYYY hh:mm A")," to ").concat(this.props.endDt.format("MM/DD/YYYY hh:mm A")),"aria-label":"start and end dates",className:"datetimepicker-control"}),l.a.createElement(ca.a.Append,null,l.a.createElement(ma.a,{id:"dtp-show-daterangepicker-".concat(this.props.rainfallDataType),startDate:this.props.startDt,endDate:this.props.endDt,maxDate:this.props.maxDate,timePicker:!0,timePickerIncrement:15,showDropdowns:!1,ranges:this.props.ranges,alwaysShowCalendars:!0,onApply:this.handleOnApply},l.a.createElement(et.a,{variant:"light",className:"datetimepicker-control"},l.a.createElement(ha.a,{icon:fa.a}))),this.props.rainfallDataType===R?l.a.createElement(et.a,{id:"dtp-show-eventlistmodal",variant:"light",onClick:this.handleShow,className:"datetimepicker-control"},l.a.createElement(ha.a,{icon:fa.c})):null)):l.a.createElement(da.a,{animation:"border",variant:"primary",size:"sm"},l.a.createElement("span",{className:"sr-only"},'"Fetching historic ranges...')))))}}]),a}(l.a.Component));var Ea=Object(c.b)((function(e,t){var a=Ee(e,t.contextType),n=g()(a.startDt),r=g()(a.endDt),o=!1,l={};if(o="legacyGarr"===t.contextType?Le(e):"legacyGauge"===t.contextType?Re(e):g()().toISOString(),t.rainfallDataType===R)l={"Latest month":[g()(o).startOf("month"),g()(o)],"Latest 3 months":[g()(o).subtract(2,"month").startOf("month"),g()(o)],"Latest 6 months":[g()(o).subtract(5,"month").startOf("month"),g()(o)],"Latest 12 months":[g()(o).subtract(11,"month").startOf("month"),g()(o)],"Latest Available This Year":[g()(o).startOf("year"),g()(o)],"Last Year":[g()(o).subtract(1,"year").startOf("year"),g()(o).subtract(1,"year").endOf("year")]};else if(t.rainfallDataType===L){var i=g()().toISOString();l={"Past 2 hours":[g()(i).subtract(2,"hour"),g()(i)],"Past 4 hours":[g()(i).subtract(4,"hour"),g()(i)],"Past 6 hours":[g()(i).subtract(6,"hour"),g()(i)],"Past 12 hours":[g()(i).subtract(12,"hour"),g()(i)],"Past 24 hours":[g()(i).subtract(24,"hour"),g()(i)],"Past 48 hours":[g()(i).subtract(48,"hour"),g()(i)],Today:[g()(i).startOf("day"),g()(i)],Yesterday:[g()(i).subtract(1,"day").startOf("day"),g()(i).subtract(1,"day").endOf("day")],"Past 3 days":[g()(i).subtract(3,"day").startOf("day"),g()(i)],"Past 7 days":[g()(i).subtract(7,"day").startOf("day"),g()(i)],"Past month":[g()(i).subtract(1,"month").startOf("day"),g()(i)],"Past 3 months":[g()(i).subtract(3,"month").startOf("month"),g()(i)]}}else o=!1,n=!1,r=!1,l={};return{local:{format:"MM/DD/YYYY hh:mm A"},startDt:n,endDt:r,minDate:g()(I),maxDate:g()(o),minYear:g()(I).year(),maxYear:g()().year(),ranges:l,rainfallDataType:t.rainfallDataType}}),(function(e,t){return{dispatchPickRainfallDateTimeRange:function(a){e(re(Object(m.a)(Object(m.a)({},a),{},{contextType:t.contextType})))}}}))(va),Oa=a(765),ja=a(250),wa=function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(e){var n;return Object(ze.a)(this,a),(n=t.call(this)).handleSelectGauge=function(e){n.props.dispatchPickSensorParam({sensorLocationType:"gauge",selectedOptions:e})},n.handleSelectBasin=function(e){n.props.dispatchPickSensorParam({sensorLocationType:"basin",selectedOptions:null!==e?[e]:null})},n.handleOnApply=n.handleOnApply.bind(Object(Je.a)(n)),n.handleShow=n.handleShow.bind(Object(Je.a)(n)),n.handleClose=n.handleClose.bind(Object(Je.a)(n)),n.state={show:!1},n}return Object(We.a)(a,[{key:"handleOnApply",value:function(){}},{key:"handleClose",value:function(e){this.setState({show:!1})}},{key:"handleShow",value:function(e){this.setState({show:!0})}},{key:"render",value:function(){var e=this.props.gaugeCount,t=this.props.pixelCount;return l.a.createElement("div",null,l.a.createElement(Xe.a,{noGutters:!0},l.a.createElement(Ue.a,null,l.a.createElement("strong",null,"Where"))),this.props.context!==M?l.a.createElement(Xe.a,{noGutters:!0},l.a.createElement(Ue.a,{md:2},l.a.createElement("small",null,"Rain Gauges")),l.a.createElement(Ue.a,{md:8},l.a.createElement(ja.a,{isMulti:!0,value:this.props.selectedGauges,onChange:this.handleSelectGauge,options:this.props.raingaugeOpts,menuPortalTarget:document.body,isClearable:!0})),l.a.createElement(Ue.a,{md:2},e>0?l.a.createElement("span",{className:"mx-1 my-1"},l.a.createElement(Oa.a,{pill:!0,variant:"primary"},"".concat(e," ").concat(ea(e,"gauge","gauges")))):null)):null,this.props.context!==_?l.a.createElement(Xe.a,{noGutters:!0},l.a.createElement(Ue.a,{md:2},l.a.createElement("small",null,"Radar Pixels")),l.a.createElement(Ue.a,{md:8},l.a.createElement(ja.a,{value:this.props.selectedBasin,onChange:this.handleSelectBasin,options:this.props.basinOpts,menuPortalTarget:document.body,isClearable:!0})),l.a.createElement(Ue.a,{md:2},t>0?l.a.createElement("span",{className:"mx-1 my-1"},l.a.createElement(Oa.a,{pill:!0,variant:"primary"},"".concat(t," ").concat(ea(t,"pixel","pixels")))):null)):null)}}]),a}(l.a.Component);var Ta=Object(c.b)((function(e,t){var a=Te(e,t.contextType,"pixel"),n=Te(e,t.contextType,"gauge");return{raingaugeOpts:Ce(e,"gauge").map((function(e){return{value:e.id,label:"".concat(e.id,": ").concat(e.properties.name)}})),basinOpts:Se(e).map((function(e){return{value:e.value,label:e.value}})),selectedBasin:Te(e,t.contextType,"basin"),selectedRaingauges:a,selectedPixels:a,pixelCount:a.length,gaugeCount:n.length,context:ve(e)}}),(function(e,t){return{dispatchPickSensorParam:function(a){e(oe(Object(m.a)(Object(m.a)({},a),{},{contextType:t.contextType})))}}}))(wa),xa=function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(){var e;Object(ze.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSelectInterval=function(t){e.props.dispatchPickInterval(t.currentTarget.value)},e}return Object(We.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(Xe.a,{noGutters:!0},l.a.createElement(Ue.a,{lg:3},l.a.createElement("strong",null,"Interval")),l.a.createElement(Ue.a,{lg:9},l.a.createElement(aa.a,null,A.map((function(t,a){return l.a.createElement(aa.a.Check,{defaultChecked:"Total"==t,inline:!0,key:"interval-".concat(t,"-").concat(a,"-").concat(e.props.rainfallDataType),label:t,value:t,type:"radio",id:"interval-".concat(t,"-").concat(e.props.rainfallDataType),name:"intervalRadios",onChange:e.handleSelectInterval})})))))}}]),a}(l.a.Component);var ka=Object(c.b)((function(e){return{}}),(function(e,t){return{dispatchPickInterval:function(a){e(le({rollup:a,contextType:t.contextType}))}}}))(xa),Da=a(339),Ca=a(340),Sa=function(e){var t=e.rows,a=e.header;return l.a.createElement(na.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",className:"download-table"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"download-table-header"},a.map((function(e,t){return l.a.createElement("th",{key:"h".concat(t)},l.a.createElement("small",null,l.a.createElement("em",null,H[e])))})))),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement("tr",{key:"r".concat(t)},a.map((function(a,n){return l.a.createElement("td",{key:"d".concat(t).concat(n)},l.a.createElement("small",null,e[a]))})))}))))},Aa=function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(e){var n;return Object(ze.a)(this,a),(n=t.call(this)).handleDownloadClick=n.handleDownloadClick.bind(Object(Je.a)(n)),n}return Object(We.a)(a,[{key:"handleDownloadClick",value:function(e){e.preventDefault();var t=new Blob([this.props.csv],{type:"application/csv"});Object(Ca.saveAs)(t,"rainfall.csv",{autoBom:!0})}},{key:"render",value:function(){var e=this.props.fetchHistoryItem.fetchKwargs,t=e.sensorLocations,a=t.gauge,n=t.pixel;return l.a.createElement($e.a,{show:this.props.show,onHide:this.props.onHide,size:"lg",dialogClassName:"min-vw-95",animation:!1},l.a.createElement($e.a.Header,{closeButton:!0},l.a.createElement($e.a.Title,null,l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,null,l.a.createElement("h4",null,g()(e.startDt).format("DD MMM YYYY, h:mm a")," to ",g()(e.endDt).format("DD MMM YYYY, h:mm a")),l.a.createElement("hr",null))),a.length>0?l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,{md:3},l.a.createElement("small",null,"Gauges:")),l.a.createElement(Ue.a,{md:9},l.a.createElement("small",null,a.map((function(e){return e.label})).join(", ")))):null,n.length>0?l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,{md:3},l.a.createElement("small",null,"Pixels:")),l.a.createElement(Ue.a,{md:9},l.a.createElement("small",null,n.length," pixels queried"))):null,l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,{md:3},l.a.createElement("small",null,"Interval:")),l.a.createElement(Ue.a,{md:9},l.a.createElement("small",null,e.rollup))))),l.a.createElement($e.a.Body,null,l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,{sm:3},l.a.createElement("p",null,"Download as: ")),l.a.createElement(Ue.a,{sm:3},l.a.createElement(et.a,{block:!0,variant:"outline-primary",size:"sm",onClick:this.handleDownloadClick},"CSV"))),l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,null,l.a.createElement(Sa,{rows:this.props.rows,header:this.props.header})))),l.a.createElement($e.a.Footer,null,l.a.createElement(et.a,{variant:"outline-secondary",onClick:this.props.onHide},"Close")))}}]),a}(l.a.Component),Ia=Object(c.b)((function(e,t){var a=t.fetchHistoryItem.results,n=[];return Object(y.a)(a).forEach((function(e){a[e].forEach((function(t){var a=t.data.map((function(a){return Object(m.a)(Object(m.a)({},a),{},{id:t.id,type:e})}));n=n.concat(a)}))})),{header:n.length>0?Object(y.a)(n[0]):[],rows:n.length>0?n:[],csv:n.length>0?Object(Da.unparse)(n):""}}))(Aa),Ra=(a(749),function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(e,n){var r;return Object(ze.a)(this,a),(r=t.call(this,e,n)).handleShow=r.handleShow.bind(Object(Je.a)(r)),r.handleClose=r.handleClose.bind(Object(Je.a)(r)),r.state={show:!1},r}return Object(We.a)(a,[{key:"handleClose",value:function(e){this.setState({show:!1})}},{key:"handleShow",value:function(e){this.setState({show:!0}),this.props.fetchHistoryItem.isActive||(console.log(e),console.log("Loading data from",this.props.fetchHistoryItem.requestId,"to the map"),this.props.dispatchPickDownload())}},{key:"render",value:function(){var e=this.props.fetchHistoryItem,t=e.fetchKwargs,a=t.sensorLocations,n=a.gauge,r=a.pixel,o=!1!==e.results,i=e.processedKwargs,s=Object(E.a)(["deferred","failed","does not exist","error"],e.status);return l.a.createElement("div",{className:"download-item-wrapper"},l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,{sm:12},l.a.createElement(Zt.a.Title,null,g()(t.startDt).format("DD MMM YYYY, h:mm a")," to ",g()(t.endDt).format("DD MMM YYYY, h:mm a")),l.a.createElement("hr",null))),n.length>0?l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,{lg:3},l.a.createElement("p",{className:"di-header"},"Gauges:")),l.a.createElement(Ue.a,{lg:9},l.a.createElement("p",null,n.map((function(e){return e.label})).join(", ")))):null,r.length>0?l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,{lg:3},l.a.createElement("p",{className:"di-header"},"Pixels:")),l.a.createElement(Ue.a,{lg:9},l.a.createElement("p",null,r.length," pixels queried"))):null,l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,{lg:3},l.a.createElement("p",{className:"di-header"},"Aggregation:")),l.a.createElement(Ue.a,{lg:9},l.a.createElement("p",null,t.rollup))),void 0===i?null:l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,{lg:3},l.a.createElement("p",{className:"di-header"},"Date/time range queried:")),l.a.createElement(Ue.a,{lg:9},l.a.createElement("p",null,i.start_dt,"/",i.end_dt))),o?l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,null,l.a.createElement(et.a,{variant:"outline-primary",size:"sm",onClick:this.handleShow},"View and Download Results Table"))):null,s?e.messages.map((function(e,t){return l.a.createElement(bt.a,{dismissible:!0,key:t,variant:"danger"},l.a.createElement("small",null,e))})):null,l.a.createElement(Ia,{show:this.state.show,onHide:this.handleClose,fetchHistoryItem:this.props.fetchHistoryItem}))}}]),a}(l.a.Component)),La=Object(c.b)((function(e,t){return Object(m.a)({},t)}),(function(e,t){return{dispatchPickDownload:function(a){var n=Object(m.a)(Object(m.a)({},t.fetchHistoryItem),{},{contextType:t.contextType});e(ct(n))}}}))(Ra),Na=(a(750),function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(e,n){var r;return Object(ze.a)(this,a),(r=t.call(this,e,n)).handleListClick=r.handleListClick.bind(Object(Je.a)(r)),r}return Object(We.a)(a,[{key:"handleListClick",value:function(e){this.props.pickDownload(e)}},{key:"render",value:function(){var e=this;return console.log(this.props),l.a.createElement(Qt.a,{variant:"flush"},this.props.fetchHistory.slice(0).reverse().map((function(t,a){var n,r=Object(E.a)(["deferred","failed","does not exist","error"],t.status);return n=t.isActive&&"finished"===t.status?"primary":r?"danger":"",l.a.createElement(Qt.a.Item,{key:a,as:"div",className:"mx-0",action:!0,onClick:function(){return e.handleListClick(t)},variant:n},l.a.createElement(Xe.a,{noGutters:!0},l.a.createElement(Ue.a,{sm:t.isFetching?11:12},l.a.createElement(La,{fetchHistoryItem:t,contextType:e.props.contextType,rainfallDataType:e.props.rainfallDataType,rainfallSensorType:e.props.rainfallSensorType})),t.isFetching?l.a.createElement(Ue.a,{sm:1},l.a.createElement(da.a,{animation:"border",variant:"primary"},l.a.createElement("span",{className:"sr-only"},'"Fetching rainfall data...'))):null))})))}}]),a}(l.a.Component)),Pa=Object(c.b)((function(e,t){var a=Oe(e,t.contextType);return{fetchHistory:a,hasDownloads:a.length>0,rainfallDataType:t.rainfallDataType}}),(function(e,t){return{pickDownload:function(a){e(ct(Object(m.a)(Object(m.a)({},a),{},{contextType:t.contextType})))}}}))(Na),_a=(a(751),function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(e){var n;return Object(ze.a)(this,a),(n=t.call(this)).handleDownloadClick=n.handleDownloadClick.bind(Object(Je.a)(n)),n}return Object(We.a)(a,[{key:"handleDownloadClick",value:function(){this.props.fetchRainfallData({rainfallDataType:this.props.rainfallDataType,contextType:this.props.contextType})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(Zt.a,null,l.a.createElement(Zt.a.Body,null,l.a.createElement(Ea,{rainfallDataType:this.props.rainfallDataType,contextType:this.props.contextType}),l.a.createElement("hr",null),l.a.createElement(Ta,{rainfallDataType:this.props.rainfallDataType,contextType:this.props.contextType}),l.a.createElement("hr",null),l.a.createElement(ka,{rainfallDataType:this.props.rainfallDataType,contextType:this.props.contextType}),l.a.createElement("hr",null),l.a.createElement(et.a,{onClick:this.handleDownloadClick,disabled:!this.props.hasKwargs,block:!0},"Get Rainfall Data"))),l.a.createElement("br",null),this.props.hasDownloads?l.a.createElement(Zt.a,null,l.a.createElement(Zt.a.Header,null,"Retrieved Rainfall Data"),l.a.createElement(Pa,{contextType:this.props.contextType,rainfallDataType:this.props.rainfallDataType})):null)}}]),a}(l.a.Component));var Ma=Object(c.b)((function(e,t){var a=function(e,t){var a={};return Object(j.a)(Ee(e,t).sensorLocations,(function(e,t){e.length>0&&(a[t]=e)})),a}(e,t.contextType),n=Oe(e,t.contextType);return{hasKwargs:!Object(ye.a)(a),hasDownloads:n.length>0}}),(function(e,t){return{fetchRainfallData:function(t){e(st(t))}}}))(_a),Ha=a(781),Ya=a(779),qa=(a(325),l.a.createElement(Ha.a,{id:"popover-basic"},l.a.createElement(Ha.a.Title,{as:"h3"},"Provisional Data Disclaimer"),l.a.createElement(Ha.a.Content,null,"Data shown here are provisional and subject to revision until they have been thoroughly reviewed and received final approval. Current condition data relayed by satellite or other telemetry are automatically screened to not display improbable values until they can be verified. Provisional data may be inaccurate due to instrument malfunctions or physical changes at the measurement site. Subsequent review based on field inspections and measurements may result in significant revisions to the data. Data users are cautioned to consider carefully the provisional nature of the information before using it for decisions that concern personal or public safety or the conduct of business that involves substantial monetary or operational consequences. Information concerning the accuracy and appropriate uses of these data or concerning other hydrologic data may be obtained from the 3RWW."))),Ga=function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(){return Object(ze.a)(this,a),t.apply(this,arguments)}return Object(We.a)(a,[{key:"render",value:function(){return l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,null,l.a.createElement("h1",{className:"data-type-header"},"Real-time Rainfall"),l.a.createElement("p",null,"Real-time, provisional rainfall measurements are available from the rain gauge network and NEXRAD radar. This data is updated every 15 minutes.",l.a.createElement("small",{className:"my-3"},l.a.createElement(Ya.a,{trigger:"click",placement:"bottom",overlay:qa},l.a.createElement(et.a,{variant:"light",size:"sm"},"Provisional Data Disclaimer"))))))}}]),a}(l.a.Component),Fa=(a(753),function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(){return Object(ze.a)(this,a),t.apply(this,arguments)}return Object(We.a)(a,[{key:"render",value:function(){return this.props.isAppThinking?l.a.createElement("div",{className:"thinking-overlay"},l.a.createElement("div",{className:"d-flex thinking-content"},l.a.createElement("span",{className:"fa-layers fa-fw"},l.a.createElement(ha.a,{icon:fa.d,pulse:!0,size:"8x"}),l.a.createElement(ha.a,{icon:fa.b,size:"4x",transform:"right-8"}))),l.a.createElement("p",{className:"debug-messages"},this.props.message)):null}}]),a}(l.a.Component));var za=Object(c.b)((function(e){var t=e.progress.messages;return{isAppThinking:e.progress.isThinking>0,message:t[t.length-1]}}))(Fa),Wa=function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(){return Object(ze.a)(this,a),t.apply(this,arguments)}return Object(We.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"fill no-gutters"},l.a.createElement(za,null),l.a.createElement(Xe.a,null,l.a.createElement(Ue.a,null)),l.a.createElement(Xe.a,{className:"fill no-gutters"},l.a.createElement(Ue.a,{sm:7,className:"map-column"},l.a.createElement(sa,{token:this.props.token,styleUrl:this.props.styleId,latitude:this.props.latitude,longitude:this.props.longitude,zoom:this.props.zoom})),l.a.createElement(Ue.a,{sm:5,className:"sidebar-column"},l.a.createElement(ht.a,{className:"sidebar mt-3"},l.a.createElement(ft.a,null,l.a.createElement(gt.a,{active:this.props.tab===P,eventKey:P,title:"Real-Time Rainfall"},l.a.createElement(Ga,null),l.a.createElement(Ma,{contextType:P,rainfallDataType:L,rainfallSensorTypes:[N.gauge,N.pixel]})),l.a.createElement(gt.a,{active:this.props.tab===_,eventKey:_,title:"Historical Rain Gauge"},l.a.createElement("h1",{className:"data-type-header"},"Historical Rain Gauge Data"),l.a.createElement("p",null,"Historic rain gauge data has been through a QA/QC process with ALCOSAN and 3RWW in which any data errors caused by the gauge hardware have been addressed."),l.a.createElement(Ma,{contextType:_,rainfallDataType:R,rainfallSensorTypes:[N.gauge]})),l.a.createElement(gt.a,{active:this.props.tab===M,eventKey:M,title:"Calibrated Radar Rainfall"},l.a.createElement("h1",{className:"data-type-header"},"Calibrated Radar Rainfall"),l.a.createElement("p",null,"Calibrated radar rainfall data is NEXRAD radar rainfall data adjusted using our rain gauge network. Calibration is performed by ",l.a.createElement("a",{href:"https://www.vieuxinc.com/",target:"_blank"},"Vieux Associates"),"."),l.a.createElement(bt.a,{variant:"warning"},l.a.createElement("strong",null,"Please note:")," We are currently migrating historic calibrated radar rainfall data to a new database; consequently you may find that rainfall data downloaded here for dates prior to July 2020 will be incomplete."),l.a.createElement(Ma,{contextType:M,rainfallDataType:R,rainfallSensorTypes:[N.pixel]})))))))}}]),a}(l.a.Component);var Ka={switchContext:ut},Ba=Object(c.b)((function(e){return Object(m.a)(Object(m.a)({},e.initMap),{},{tab:e.progress.tab})}),Ka)(Wa),Va=function(e){Object(Ke.a)(a,e);var t=Object(Be.a)(a);function a(){return Object(ze.a)(this,a),t.apply(this,arguments)}return Object(We.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{style:{height:"100%"}},l.a.createElement(Ve.a,{defaultActiveKey:P,id:"rainfall-tabs",onSelect:this.props.switchContext},l.a.createElement(mt,{isloading:this.props.loading}),l.a.createElement(Ba,null)))}}]),a}(l.a.Component);var Ja=Object(c.b)((function(e){return Object(m.a)({},e.initMap)}),(function(e,t){return{switchContext:function(t){console.log("switching",t),e(ut(t))}}}))(Va);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));console.log("Hello there curious person! The 3RWW Rainfall API is located at","https://trwwapi.herokuapp.com/rainfall/","- check it out for more powerful querying capability!"),s.a.render(l.a.createElement(c.a,{store:Fe},l.a.createElement(Ja,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[344,1,2]]]);
//# sourceMappingURL=main.7194593a.chunk.js.map